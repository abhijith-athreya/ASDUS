webpackJsonp([4],[,,function(e,t,n){"use strict";function i(e,t){(0,r.default)(function(){var n=(0,r.default)(e);n.length&&t(n)})}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=function(e){return e&&e.__esModule?e:{default:e}}(a);window.define_namespace=i,t.default=i},,,,,function(e,t,n){"use strict";function i(){u.fadeIn("fast"),l=(0,o.default)(":focus"),u.find(".jGrowl-notification").attr("tabindex",-1).focus()}function a(){u.fadeOut("fast"),l.length&&l.focus()}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r),s=n(12);n(32);var l,u=(0,o.default)("#growl_section");u.on("click",function(e){var t;(0,o.default)(e.target).is((0,o.default)(this))&&(t=(0,o.default)(this),t.fadeOut("fast"),t.removeClass("sticky"),t.find("div.jGrowl-notification:parent").each(function(){(0,o.default)(this).data("jGrowl")&&((0,o.default)(this).data("jGrowl").sticky=!1)}))}),(0,o.default)(document).on("keydown",function(e){e.which===s.ESC&&u.is(":visible")&&a()});var d=function(e,t){o.default.each(e,function(e,n){void 0===t&&(t={}),"error"===e&&(t.sticky=!0,u.addClass("sticky")),u.jGrowl(n,o.default.extend(t,{theme:e,closeTemplate:'<button class="jGrowl-close-x" aria-label="close notification"><span class="ksr-icon__close" aria-hidden="true"></span></button>',beforeOpen:function(){i()},close:function(){a()}}))})};window.growl=d,t.default=d},,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Col=t.Row=t.Grid=t.ProgressCircle=t.CircleWrap=t.Icon=t.Button=t.Avatar=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=n(4),r=function(e){return e&&e.__esModule?e:{default:e}}(a),o=n(44),s=n(42);t.Avatar=o.Avatar,t.Button=s.Button;var l=function(e){switch(e){case"9":return["icon-9"];case"12":return["icon-12"];case"small":return["icon-small"];case"medium":return["icon-medium"];case"large":return["icon-large"];default:throw"invalid size class"}},u=(t.Icon=function(e){var t=e.name,n=e.label,i=e.size,a=void 0===i?"small":i,o=e.atoms,s=void 0===o?[]:o,u=["svg-icon__"+t].concat(l(a)).concat(s).join(" ");return r.default.createElement("svg",{className:u,"aria-hidden":!n,"aria-label":n},r.default.createElement("use",{xlinkHref:"#"+t}))},t.CircleWrap=function(e){var t=e.children,n=e.backgroundColor,i=e.borderColor,a=e.hoverBorderColor,o=e.shadow,s=void 0!==o&&o,l=["circle","p2","flex","inline-flex","bg-"+n,"border","border-"+(i||n)].concat(a?["hover-border-"+a]:[]).concat(s?["shadow-avatar"]:[]).join(" ");return r.default.createElement("div",{className:l},t)},t.ProgressCircle=function(e){var t=e.defaultColor,n=void 0===t?"grey-500":t,a=e.percentage,o=void 0===a?0:a,s=e.locked,l=void 0!==s&&s,u=e.error,d=void 0!==u&&u,c=e.size,f=void 0===c?8:c,h=e.atoms,p=void 0===h?[]:h,m=["w"+f,"h"+f].concat(p).join(" "),g=Math.round(2*Math.PI*18),v=Math.round(o*g/100),_={status:"not-started",strokeColor:n,checkFillColor:n,circleFillColor:"white"},y=i({},_,{status:"error",strokeColor:"red-500",checkFillColor:"red-500"}),b=i({},_,{status:"locked"}),w=i({},_,{status:"complete",checkFillColor:"white",circleFillColor:"ksr-green-700",strokeColor:"ksr-green-700"}),k=i({},_,{status:"incomplete",strokeColor:"ksr-green-700"}),j=d?y:l?b:v>=100?w:0!=v?k:_,x=j.status,C=j.strokeColor,S=j.checkFillColor,E=j.circleFillColor;return r.default.createElement("svg",{className:m,width:"100%",height:"100%",viewBox:"82 630 48 48",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("defs",null,r.default.createElement("circle",{id:"progress-circle-outer",cx:18,cy:18,r:18}),r.default.createElement("filter",{x:"-50%",y:"-50%",width:"200%",height:"200%",filterUnits:"objectBoundingBox",id:"progress-circle-shadow-1"},r.default.createElement("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"shadowSpreadOuter1"}),r.default.createElement("feOffset",{dy:"2",in:"shadowSpreadOuter1",result:"shadowOffsetOuter1"}),r.default.createElement("feMorphology",{radius:"2",in:"SourceAlpha",result:"shadowInner"}),r.default.createElement("feOffset",{dy:"2",in:"shadowInner",result:"shadowInner"}),r.default.createElement("feComposite",{in:"shadowOffsetOuter1",in2:"shadowInner",operator:"out",result:"shadowOffsetOuter1"}),r.default.createElement("feGaussianBlur",{stdDeviation:"2",in:"shadowOffsetOuter1",result:"shadowBlurOuter1"}),r.default.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0",in:"shadowBlurOuter1"})),r.default.createElement("filter",{x:"-50%",y:"-50%",width:"200%",height:"200%",filterUnits:"objectBoundingBox",id:"progress-circle-shadow-2"},r.default.createElement("feOffset",{dy:"2",in:"SourceAlpha",result:"shadowOffsetOuter1"}),r.default.createElement("feGaussianBlur",{stdDeviation:"2",in:"shadowOffsetOuter1",result:"shadowBlurOuter1"}),r.default.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0",in:"shadowBlurOuter1"}))),r.default.createElement("g",{fill:"none",fillRule:"evenodd"},r.default.createElement("g",{transform:"translate(88 634)"},"error"===x||"incomplete"===x?r.default.createElement("g",null,r.default.createElement("use",{fill:"#000",filter:"url(#progress-circle-shadow-1)",xlinkHref:"#progress-circle-outer"}),r.default.createElement("use",{fill:"#000",filter:"url(#progress-circle-shadow-2)",xlinkHref:"#progress-circle-outer"})):null,"incomplete"===x||"error"===x?r.default.createElement("use",{className:"stroke-"+C,transform:"rotate(-90 18 18)",strokeWidth:"3",strokeDasharray:v+" "+g,xlinkHref:"#progress-circle-outer"}):r.default.createElement("use",{className:"stroke-"+C,strokeWidth:"3",xlinkHref:"#progress-circle-outer"}),r.default.createElement("use",{className:"fill-"+E,xlinkHref:"#progress-circle-outer"})),"locked"===x?r.default.createElement("path",{d:"M103.7 649.3h-1.3v-1.6c0-2 1.5-3.7 3.6-3.7 2 0 3.7 1.7 3.7 3.7v1.5h-1.4v-1.5c0-1.2-1-2.2-2.3-2.2-1.2 0-2.2 1-2.2 2.2v1.5zm7 .5s.3.2.3.4v5.7h-9.7c-.2 0-.3 0-.3-.4V650c0-.2 0-.4.3-.4h9.3z",className:"fill-blue-600",fillRule:"evenodd"}):r.default.createElement("path",{d:"M100 652.8v-.4l1-1h.3l3.2 3.3 7-7.8c0-.2 0-.2.2 0l1 .7v.4l-8 9c0 .2-.2.2-.3 0L100 653z",className:"fill-"+S})))},t.Grid=function(e){var t=e.children,n=e.atoms,i=void 0===n?[]:n,a=e.full,o=void 0!==a&&a,s=[o?"grid-container-full":"grid-container"].concat(i).join(" ");return r.default.createElement("div",{className:s},t)},t.Row=function(e){var t=e.children,n=e.atoms,i=void 0===n?[]:n,a=["grid-row"].concat(i).join(" ");return r.default.createElement("div",{className:a},t)},function(e){var t=e.width,n=e.lgWidth,i=e.lgOffset,a=e.mdWidth,r=e.mdOffset,o=e.smWidth,s=e.smOffset,l=e.parentWidth,u=e.full,c=e.atoms,h=e.center,p=e.offset,m=h?["col-center"]:[],g=f(t,l,u,p),v=d({lgWidth:n,lgOffset:i,mdWidth:a,mdOffset:r,smWidth:o,smOffset:s,parentWidth:l});return g.concat(c).concat(m).concat(v).join(" ")}),d=function(e){var t=e.lgWidth,n=e.lgOffset,i=e.mdWidth,a=e.mdOffset,r=e.smWidth,o=e.smOffset,s=e.parentWidth,l=c("lg",t,s,n),u=c("md",i,s,a),d=c("sm",r,s,o);return l.concat(u).concat(d)},c=function(e,t,n,i){return t?"full"===t||t===n?["col-"+e+"-full"]:i?["col-"+e+"-"+t+"-"+n,"col-offset-"+e+"-"+i+"-"+n]:["col-"+e+"-"+t+"-"+n]:[]},f=function(e,t,n,i){return n||e===t?["col-full"]:i?["col-"+e+"-"+t,"col-offset-"+i+"-"+t]:["col-"+e+"-"+t]};t.Col=function(e){var t=e.width,n=void 0===t?24:t,i=e.lgWidth,a=e.lgOffset,o=e.mdWidth,s=e.mdOffset,l=e.smWidth,d=e.smOffset,c=e.parentWidth,f=void 0===c?24:c,h=e.full,p=void 0!==h&&h,m=e.atoms,g=void 0===m?[]:m,v=e.children,_=e.center,y=void 0!==_&&_,b=e.offset,w=u({width:n,lgWidth:i,lgOffset:a,mdWidth:o,mdOffset:s,smWidth:l,smOffset:d,parentWidth:f,full:p,atoms:g,center:y,offset:b});return r.default.createElement("div",{className:w},v)}},function(e,t,n){e.exports=n(64)()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=(0,u.default)("#template-"+e.replace(/\//g,"_"));if(!t.length)throw"Could not find template: "+e;return u.default.trim(t.html())}function r(e){var t={};if(c.default.isString(e)&&(e=[e]),c.default.isArray(e))return c.default.each(e,function(e){t[e]=a(e)}),t}function o(){return function(e,t){return t(h.default.t(e,this))}}function s(e,t,n){var i=v.default[e]||function(e){return e},s=a(e),l=r(n);return m.default.render(s,u.default.extend({t:o},i(t)),l)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),u=i(l),d=n(3),c=i(d),f=n(1),h=i(f),p=n(66),m=i(p),g=n(100),v=i(g);t.default=s,window.render=s},function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.deviceIdioms=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(10),o=n(23),s=function(e){return e&&e.__esModule?e:{default:e}}(o),l=function(e){return s.default.fromNullable(e).chain((0,r.maybeProp)("className")).map((0,r.method)("split",/\s+/)).getOrElse([])},u=function(e){return e.reduce(function(e,t){return a({},e,i({},t,!0))},{})},d=t.deviceIdioms=(0,r.compose)(u,l),c=d(document.querySelector("body"));t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,a={};i=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}}(navigator.userAgent),i.browser&&(a[i.browser]=!0,a.version=i.version),a.chrome?a.webkit=!0:a.webkit&&(a.safari=!0),t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);n(147),n(33),n(25),n(34),n(53),n(126),n(54),n(121),n(47),n(122),n(157),n(158),n(55),n(56),n(144),n(159),n(160),n(52),n(79),n(136),n(30),n(161),n(48),n(111),n(41),n(162),n(163),n(164),n(165),n(166),n(123),n(167),n(112),n(168),n(137),n(169),n(170),n(49),n(50),n(63),n(124),n(113),n(140),n(174),n(139),n(145),n(172),n(138),n(175),n(173),n(171),n(9),n(65),n(61),n(35);var r=a.default;t.default=r},,,function(e,t,n){var i=n(0);n(0);!function(e,t){var n=0,i=Array.prototype.slice,a=e.cleanData;e.cleanData=function(t){for(var n,i=0;null!=(n=t[i]);i++)try{e(n).triggerHandler("remove")}catch(e){}a(t)},e.widget=function(t,n,i){var a,r,o,s,l={},u=t.split(".")[0];t=t.split(".")[1],a=u+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][a.toLowerCase()]=function(t){return!!e.data(t,a)},e[u]=e[u]||{},r=e[u][t],o=e[u][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,r,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),s=new n,s.options=e.widget.extend({},s.options),e.each(i,function(t,i){if(!e.isFunction(i))return void(l[t]=i);l[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},a=function(e){return n.prototype[t].apply(this,e)};return function(){var t,n=this._super,r=this._superApply;return this._super=e,this._superApply=a,t=i.apply(this,arguments),this._super=n,this._superApply=r,t}}()}),o.prototype=e.widget.extend(s,{widgetEventPrefix:r?s.widgetEventPrefix:t},l,{constructor:o,namespace:u,widgetName:t,widgetFullName:a}),r?(e.each(r._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,o,n._proto)}),delete r._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(t){for(var n,a,r=i.call(arguments,1),o=0,s=r.length;o<s;o++)for(n in r[o])a=r[o][n],r[o].hasOwnProperty(n)&&void 0!==a&&(e.isPlainObject(a)?t[n]=e.isPlainObject(t[n])?e.widget.extend({},t[n],a):e.widget.extend({},a):t[n]=a);return t},e.widget.bridge=function(t,n){var a=n.prototype.widgetFullName||t;e.fn[t]=function(r){var o="string"==typeof r,s=i.call(arguments,1),l=this;return r=!o&&s.length?e.widget.extend.apply(null,[r].concat(s)):r,o?this.each(function(){var n,i=e.data(this,a);return i?e.isFunction(i[r])&&"_"!==r.charAt(0)?(n=i[r].apply(i,s),n!==i&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+r+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+r+"'")}):this.each(function(){var t=e.data(this,a);t?t.option(r||{})._init():e.data(this,a,new n(r,this))}),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var i,a,r,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},i=t.split("."),t=i.shift(),i.length){for(a=o[t]=e.widget.extend({},this.options[t]),r=0;r<i.length-1;r++)a[i[r]]=a[i[r]]||{},a=a[i[r]];if(t=i.pop(),void 0===n)return void 0===a[t]?null:a[t];a[t]=n}else{if(void 0===n)return void 0===this.options[t]?null:this.options[t];o[t]=n}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,i){var a,r=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=a=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,a=this.widget()),e.each(i,function(i,o){function s(){if(t||r.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof o?r[o]:o).apply(r,arguments)}"string"!=typeof o&&(s.guid=o.guid=o.guid||s.guid||e.guid++);var l=i.match(/^(\w+)\s*(.*)$/),u=l[1]+r.eventNamespace,d=l[2];d?a.delegate(d,u,s):n.bind(u,s)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var a,r,o=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],r=n.originalEvent)for(a in r)a in n||(n[a]=r[a]);return this.element.trigger(n,i),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,a,r){"string"==typeof a&&(a={effect:a});var o,s=a?a===!0||"number"==typeof a?n:a.effect||n:t;a=a||{},"number"==typeof a&&(a={duration:a}),o=!e.isEmptyObject(a),a.complete=r,a.delay&&i.delay(a.delay),o&&e.effects&&e.effects.effect[s]?i[t](a):s!==t&&i[s]?i[s](a.duration,a.easing,r):i.queue(function(n){e(this)[t](),r&&r.call(i[0]),n()})}})}(i)},,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){t.blurb||(t.blurb=e.blurb),t.name||(t.name=e.name),t.feature_image_url=t.feature_image_attributes.image_urls.baseball_card,t["has_background_image?"]=!l.default.isEmpty(t.background_image_attributes),t["hide_background_black?"]=t["has_background_image?"]||t.background_color,t.border_color="",t.text_color&&(t.border_color="background-color: #"+t.text_color+";"),t.text_color_style="",t.text_color&&(t.text_color_style="color: #"+t.text_color+";"),t.background_color_style="",t.background_color&&(t.background_color_style="background-color: #"+t.background_color+";"),t.card_style="",t.card_style+=t.text_color_style,t.card_style+=t.background_color_style,t.card_background_style="",t["has_background_image?"]&&(t.card_background_style="background-image: url("+t.background_image_attributes.image_urls.baseball_card+"); opacity: "+t.background_image_opacity+";")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=["live","successful","canceled","failed"],n=[];return e.creator_name=e.creator.name,e.percent_raised=e.pledged/e.goal*100,e.percent_raised_rounded=Math.round(e.percent_raised),e.percent_raised_to_100=Math.min(100,e.percent_raised),e.formatted_percent_raised=d.default.percent(e.percent_raised,{precision:0}),e.formatted_money=d.default.money(e.pledged,{precision:0,currency:e.currency}),e.formatted_goal=d.default.money(e.goal,{precision:0,currency:e.currency}),e.formatted_backers_count=d.default.format_number(e.backers_count,{precision:0}),e.count=e.backers_count,e.javascript_deadline=1e3*e.deadline,e.javascript_state_changed_at=1e3*e.state_changed_at,e.formatted_deadline=(0,c.format)("ll",e.javascript_deadline),e.formatted_state_changed_at=(0,c.format)("ll",e.javascript_state_changed_at),e.raw_score=e.recommendations_raw_score,e.weighted_score=e.recommendations_score,e.model_name=e.recommendations_model_name,e.project_state=e.state,e.section=e.ref||e.url_ref||"refined_search",a(e,e.profile),o.default.each(t,function(){var t=String(this);e[t+"?"]=e.state===t}),e.url_ref?e.url_with_ref=(0,v.default)(e.urls.web.project).setSearch("ref",e.url_ref).toString():e.url_with_ref=e.urls.web.project,e["live_or_successful?"]="live"===e.state||"successful"===e.state,e["video?"]=null!==e.video&&void 0!==e.video,e["potd_today?"]=(0,m.default)(1e3*e.potd_at,new Date),e["staff_pick?"]=e.staff_pick,e["friends_backing?"]=e.friends&&e.friends.length>0,e["friends_backing?"]&&(e.truncated_friends=e.friends.slice(0,2),n=l.default.map(e.truncated_friends,function(e){return"<strong>"+l.default.escape(e.name.split(" ")[0])+"</strong>"}),n.length<e.friends.length&&n.push("<strong>"+h.default.t("presenters.projects.baseball_card_tall.amount_more",{count:e.friends.length-n.length})+"</strong>"),e.escaped_sentence=h.default.t("presenters.projects.baseball_card_tall.friends_are_backers",{friends:d.default.to_sentence(n),count:n.length})),e.json=JSON.stringify(e),e.location_json=JSON.stringify(e.location),e.baseball_card_size||(e.baseball_card_size="tall"),e};var r=n(0),o=i(r),s=n(3),l=i(s),u=n(8),d=i(u),c=n(13),f=n(1),h=i(f),p=n(62),m=i(p),g=n(11),v=i(g)},,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.BoundTranslate=t.boundT=t.consumeTranslations=t.provideTranslations=t.Translate=t.t=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(82),o=i(r),s=n(91),l=i(s),u=n(45);t.t=o.default,t.Translate=l.default,t.provideTranslations=u.provideTranslations,t.consumeTranslations=u.consumeTranslations;var d=t.boundT=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.default.apply(void 0,[window.I18n].concat(t))};t.BoundTranslate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,l.default)(e,a({},t,{i18n:window.I18n,t:d}))}},function(e,t,n){"use strict";n(57),n(73),n(72),n(76),n(75),n(77),n(74);n(0),n(0)},function(e,t,n){"use strict";function i(e,t,n){var i=(0,r.default)(e).absoluteTo(window.location),a=(0,r.default)(t).absoluteTo(window.location);return n=n||{},n.ignore_query&&(i.search({}),a.search({})),n.ignore_hash&&(i.hash(""),a.hash("")),i.equals(a)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n(11),r=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,n){var i=n(0);n(0);!function(e){e.jGrowl=function(t,n){0===e("#jGrowl").length&&e('<div id="jGrowl"></div>').addClass(n&&n.position?n.position:e.jGrowl.defaults.position).appendTo(n&&n.appendTo?n.appendTo:e.jGrowl.defaults.appendTo),e("#jGrowl").jGrowl(t,n)},e.fn.jGrowl=function(t,n){if(void 0===n&&e.isPlainObject(t)&&(n=t,t=n.message),e.isFunction(this.each)){var i=arguments;return this.each(function(){void 0===e(this).data("jGrowl.instance")&&(e(this).data("jGrowl.instance",e.extend(new e.fn.jGrowl,{notifications:[],element:null,interval:null})),e(this).data("jGrowl.instance").startup(this)),e.isFunction(e(this).data("jGrowl.instance")[t])?e(this).data("jGrowl.instance")[t].apply(e(this).data("jGrowl.instance"),e.makeArray(i).slice(1)):e(this).data("jGrowl.instance").create(t,n)})}},e.extend(e.fn.jGrowl.prototype,{defaults:{pool:0,header:"",group:"",sticky:!1,position:"top-right",appendTo:"body",glue:"after",theme:"default",themeState:"highlight",corners:"10px",check:250,life:3e3,closeDuration:"normal",openDuration:"normal",easing:"swing",closer:!0,closeTemplate:"&times;",closerTemplate:"<div>[ close all ]</div>",log:function(){},beforeOpen:function(){},afterOpen:function(){},open:function(){},beforeClose:function(){},close:function(){},click:function(){},animateOpen:{opacity:"show"},animateClose:{opacity:"hide"}},notifications:[],element:null,interval:null,create:function(t,n){var i=e.extend({},this.defaults,n);void 0!==i.speed&&(i.openDuration=i.speed,i.closeDuration=i.speed),this.notifications.push({message:t,options:i}),i.log.apply(this.element,[this.element,t,i])},render:function(t){var n=this,i=t.message,a=t.options;a.themeState=""===a.themeState?"":"ui-state-"+a.themeState;var r=e("<div/>").addClass("jGrowl-notification alert "+a.themeState+" ui-corner-all"+(void 0!==a.group&&""!==a.group?" "+a.group:"")).append(e("<button/>").addClass("jGrowl-close").html(a.closeTemplate)).append(e("<div/>").addClass("jGrowl-header").html(a.header)).append(e("<div/>").addClass("jGrowl-message").html(i)).data("jGrowl",a).addClass(a.theme).children(".jGrowl-close").bind("click.jGrowl",function(){return e(this).parent().trigger("jGrowl.beforeClose"),!1}).parent();e(r).bind("mouseover.jGrowl",function(){e(".jGrowl-notification",n.element).data("jGrowl.pause",!0)}).bind("mouseout.jGrowl",function(){e(".jGrowl-notification",n.element).data("jGrowl.pause",!1)}).bind("jGrowl.beforeOpen",function(){a.beforeOpen.apply(r,[r,i,a,n.element])!==!1&&e(this).trigger("jGrowl.open")}).bind("jGrowl.open",function(){a.open.apply(r,[r,i,a,n.element])!==!1&&("after"==a.glue?e(".jGrowl-notification:last",n.element).after(r):e(".jGrowl-notification:first",n.element).before(r),e(this).animate(a.animateOpen,a.openDuration,a.easing,function(){e.support.opacity===!1&&this.style.removeAttribute("filter"),null!==e(this).data("jGrowl")&&void 0!==e(this).data("jGrowl")&&(e(this).data("jGrowl").created=new Date),e(this).trigger("jGrowl.afterOpen")}))}).bind("jGrowl.afterOpen",function(){a.afterOpen.apply(r,[r,i,a,n.element])}).bind("click",function(){a.click.apply(r,[r,i,a,n.element])}).bind("jGrowl.beforeClose",function(){a.beforeClose.apply(r,[r,i,a,n.element])!==!1&&e(this).trigger("jGrowl.close")}).bind("jGrowl.close",function(){e(this).data("jGrowl.pause",!0),e(this).animate(a.animateClose,a.closeDuration,a.easing,function(){e.isFunction(a.close)?a.close.apply(r,[r,i,a,n.element])!==!1&&e(this).remove():e(this).remove()})}).trigger("jGrowl.beforeOpen"),""!==a.corners&&void 0!==e.fn.corner&&e(r).corner(a.corners),e(".jGrowl-notification:parent",n.element).length>1&&0===e(".jGrowl-closer",n.element).length&&this.defaults.closer!==!1&&e(this.defaults.closerTemplate).addClass("jGrowl-closer "+this.defaults.themeState+" ui-corner-all").addClass(this.defaults.theme).appendTo(n.element).animate(this.defaults.animateOpen,this.defaults.speed,this.defaults.easing).bind("click.jGrowl",function(){e(this).siblings().trigger("jGrowl.beforeClose"),e.isFunction(n.defaults.closer)&&n.defaults.closer.apply(e(this).parent()[0],[e(this).parent()[0]])})},update:function(){e(this.element).find(".jGrowl-notification:parent").each(function(){void 0!==e(this).data("jGrowl")&&void 0!==e(this).data("jGrowl").created&&e(this).data("jGrowl").created.getTime()+parseInt(e(this).data("jGrowl").life,10)<(new Date).getTime()&&e(this).data("jGrowl").sticky!==!0&&(void 0===e(this).data("jGrowl.pause")||e(this).data("jGrowl.pause")!==!0)&&e(this).trigger("jGrowl.beforeClose")}),this.notifications.length>0&&(0===this.defaults.pool||e(this.element).find(".jGrowl-notification:parent").length<this.defaults.pool)&&this.render(this.notifications.shift()),e(this.element).find(".jGrowl-notification:parent").length<2&&e(this.element).find(".jGrowl-closer").animate(this.defaults.animateClose,this.defaults.speed,this.defaults.easing,function(){e(this).remove()})},startup:function(t){this.element=e(t).addClass("jGrowl").append('<div class="jGrowl-notification"></div>'),this.interval=setInterval(function(){var n=e(t).data("jGrowl.instance");void 0!==n&&n.update()},parseInt(this.defaults.check,10))},shutdown:function(){e(this.element).removeClass("jGrowl").find(".jGrowl-notification").trigger("jGrowl.close").parent().empty(),clearInterval(this.interval)},close:function(){e(this.element).find(".jGrowl-notification").each(function(){e(this).trigger("jGrowl.beforeClose")})}}),e.jGrowl.defaults=e.fn.jGrowl.prototype.defaults}(i)},function(e,t,n){var i=n(0);n(0);!function(e,t){function n(t,n){var a,r,o,s=t.nodeName.toLowerCase();return"area"===s?(a=t.parentNode,r=a.name,!(!t.href||!r||"map"!==a.nodeName.toLowerCase())&&(!!(o=e("img[usemap=#"+r+"]")[0])&&i(o))):(/input|select|textarea|button|object/.test(s)?!t.disabled:"a"===s?t.href||n:n)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var a=0,r=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(n,i){return"number"==typeof n?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),i&&i.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var n,i,a=e(this[0]);a.length&&a[0]!==document;){if(("absolute"===(n=a.css("position"))||"relative"===n||"fixed"===n)&&(i=parseInt(a.css("zIndex"),10),!isNaN(i)&&0!==i))return i;a=a.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,i){return!!e.data(t,i[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var i=e.attr(t,"tabindex"),a=isNaN(i);return(a||i>=0)&&n(t,!a)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,n){function i(t,n,i,r){return e.each(a,function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),r&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var a="Width"===n?["Left","Right"]:["Top","Bottom"],r=n.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(t){return void 0===t?o["inner"+n].call(this):this.each(function(){e(this).css(r,i(this,t)+"px")})},e.fn["outer"+n]=function(t,a){return"number"!=typeof t?o["outer"+n].call(this,t):this.each(function(){e(this).css(r,i(this,t,!0,a)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,i){var a,r=e.ui[t].prototype;for(a in i)r.plugins[a]=r.plugins[a]||[],r.plugins[a].push([n,i[a]])},call:function(e,t,n){var i,a=e.plugins[t];if(a&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(i=0;i<a.length;i++)e.options[a[i][0]]&&a[i][1].apply(e.element,n)}},hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",a=!1;return t[i]>0||(t[i]=1,a=t[i]>0,t[i]=0,a)}})}(i)},function(e,t,n){var i=n(0);n(0);!function(e,t){var n=!1;e(document).mouseup(function(){n=!1}),e.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!n){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,a=1===t.which,r=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&e(t.target).closest(this.options.cancel).length;return!(a&&!r&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0))}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(i)},function(e,t){!function(e){var t=".serialScroll",n=e.serialScroll=function(t){return e(window).serialScroll(t)};n.defaults={duration:1e3,axis:"x",event:"click",start:0,step:1,lock:!0,cycle:!0,constant:!0},e.fn.serialScroll=function(i){return this.each(function(){function a(e){e.data+=b,r(e,this)}function r(t,n){e.isNumeric(n)||(n=t.data);var i,a=t.type,r=f.exclude?l().slice(0,-f.exclude):l(),d=r.length-1,h=r[n],m=f.duration;if(a&&t.preventDefault(),w&&(s(),c=setTimeout(o,f.interval)),!h){if(i=n<0?0:d,b!==i)n=i;else{if(!f.cycle)return;n=d-i}h=r[n]}!h||f.lock&&v.is(":animated")||a&&f.onBefore&&f.onBefore(t,h,v,l(),n)===!1||(f.stop&&v.stop(!0),f.constant&&(m=Math.abs(m/p*(b-n))),v.scrollTo(h,m,f),u("notify",n))}function o(){u("next")}function s(){clearTimeout(c)}function l(){return e(y,_)}function u(e){v.trigger(e+t,[].slice.call(arguments,1))}function d(t){if(e.isNumeric(t))return t;for(var n,i=l();(n=i.index(t))===-1&&t!==_;)t=t.parentNode;return n}var c,f=e.extend({},n.defaults,i),h=f.event,p=f.step,m=f.lazy,g=f.target?this:document,v=e(f.target||this,g),_=v[0],y=f.items,b=f.start,w=f.interval,k=f.navigation;delete f.step,delete f.start,_&&(m||(y=l()),(f.force||w)&&r({},b),e(f.prev||[],g).bind(h,-p,a),e(f.next||[],g).bind(h,p,a),_._bound_||v.bind("prev"+t,-p,a).bind("next"+t,p,a).bind("goto"+t,r),w&&v.bind("start"+t,function(e){w||(s(),w=!0,o())}).bind("stop"+t,function(){s(),w=!1}),v.bind("notify"+t,function(e,t){var n=d(t);n>-1&&(b=n)}),_._bound_=!0,f.jump&&(m?v:l()).bind(h,function(e){r(e,d(e.target))}),k&&(k=e(k,g).bind(h,function(e){e.data=Math.round(l().length/k.length)*k.index(this),r(e,this)})))})}}(jQuery)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(3),s=i(o),l=n(5),u=n(11),d=i(u),c=n(31),f=i(c);n(41),n(61),n(9),n(85),n(84),n(83),function(){var e=History.isTraditionalAnchor;"undefined"!=typeof History&&(History.isTraditionalAnchor=function(t){return 0===t.indexOf("remote_modal_dialog")||e.apply(this,arguments)})}(),(0,r.default)(function(){(0,r.default)(".modal_dialog").livequery(function(){var e=(0,r.default)(this),t=e.attr("id");(0,r.default)(document).on("click",".link_to_"+t,function(t){e.modal_dialog({event:t}),t.preventDefault()}),e.closest(".pop_modal_on_load").length&&e.modal_dialog()}),(0,r.default)(document).on("click",".remote_modal_dialog",function(e){if(e.preventDefault(),!(0,r.default)(this).is(".disabled")){var t=r.default.open_remote_modal_dialog((0,d.default)((0,r.default)(this).attr("href")).suffix("js").toString(),{title:s.default.escape((0,r.default)(this).attr("data-modal-title")),id:(0,r.default)(this).attr("data-modal-id"),event:e,do_not_cache:!!(0,r.default)(this).attr("data-do_not_cache"),class_name:(0,r.default)(this).attr("data-modal-class"),theme:(0,r.default)(this).attr("data-modal-theme"),ignore_parent:!!(0,r.default)(this).attr("data-ignore_parent"),remote_modal_dialog_contents_loaded:function(e){var t=e.find(".move_to_head");t.length&&((0,r.default)("head").append(t.children()),t.remove())},dataType:"html"});t&&((0,r.default)(this).data("modal_dialog",t),t.$elem.on("modal_dialog:remote_dialog_loaded",function(){try{"undefined"!=typeof FB&&FB.XFBML&&FB.XFBML.parse()}catch(e){}}))}}).each(function(){var e=(0,r.default)(this);e.is(".pop_modal_on_load")&&e.click()}),(0,r.default)(document).on("click",".modal_dialog_close",function(e){e.preventDefault(),(0,r.default)(this).trigger("close.modal_dialog")}),(0,r.default)(document).on("closed.modal_dialog",function(e){(0,r.default)(e.target).find(".video-player").trigger("ksr_video:pause")}),(0,r.default)(document).on("click",".modal_dialog .pagination a",function(e){var t=(0,r.default)(this).closest(".modal_dialog_body"),n=(0,r.default)(this);t.height(t.height()),e.preventDefault(),r.default.ajax({url:n.attr("href"),type:"get",dataType:"html",beforeSend:function(e){e.setRequestHeader("Accept","text/javascript, */*")},success:function(e){t.html(e),r.default.scrollTo(t),t.css("height","auto")}})});var e,t=/^#modal_dialog:([\-_a-zA-Z0-9]+)$/,n=/^#remote_modal_dialog:(.*)$/,i=t.exec(window.location.hash),a=n.exec(window.location.hash);i&&(e=i[1],(0,r.default)("#"+e).modal_dialog(),window.location.replace("#")),a&&((0,r.default)(".remote_modal_dialog").each(function(){(0,f.default)(decodeURIComponent(a[1]),decodeURIComponent((0,r.default)(this).attr("href")))&&(0,r.default)(this).click()}),window.location.replace("#")),(0,r.default)(".generate_modal_dialog").livequery(function(){var e=(0,r.default)(this),t=s.default.pick(e.data(),"id");r.default.create_modal_dialog(e.data("title"),e.data("content"),t)}),(0,r.default)(document).on("modal_dialog:opened",function(e,t){var n={};n={modal_class:t.options.class_name,modal_title:t.options.title,modal_id:t.options.id},(0,l.track)("Modal Dialog View",n)})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.setupScrollLocking=t.rebindScroll=t.combineHeight=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(0),o=i(r),s=n(3),l=i(s),u=[],d=function(e){var t=e.element,n=e.offsets,i=void 0===n?[]:n,a=e.styles,r=void 0===a?function(){return{onLock:{},offLock:{}}}:a,s=(0,o.default)(t);return{styles:r,options:e,element:s,offsetTop:s.parent().offset().top,eventName:"scroll."+s.selector,offset:f(i)}},c=function(e){var t=e.element,n=e.eventName,i=e.offsetTop,r=e.offset,s=e.styles,l=!1,u=s();(0,o.default)(window).off(n).on(n,function(){var e=this.scrollY;!l&&e>=i-r?(t.addClass("fixed").css(a({top:r+"px"},u.onLock)),l=!0):l&&e<i-r&&(t.removeClass("fixed").css(a({top:""},u.offLock)),l=!1)}).trigger(n)},f=t.combineHeight=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(function(e){return(0,o.default)(e).height()}).reduce(function(e,t){return e+t})},h=t.rebindScroll=function(){return u.forEach(function(e){return c(d(e.options))})};t.setupScrollLocking=function(e){(0,o.default)(document).on("ready",function(){var t=d(e);u=u.concat(t),c(t)})};(0,o.default)(window).on("resize",l.default.debounce(h,250))},,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e.completed=!!e.completed_at,e["is_"+e.status]=!0,e.formatted_deadline=(0,o.format)("ll",1e3*e.project.deadline),e.formatted_money=r.default.money(e.amount,{currency:e.project.currency}),e.formatted_status=l.default.t("presenters.backings.row.status."+e.display_status),e.project_state=d(e),e.reward){var t=e.reward.reward;if(e.formatted_reward=t.length>57?t.substring(0,57)+"â€¦":t,e.reward.estimated_delivery_on){var n=1e3*e.reward.estimated_delivery_on;e.formatted_estimated_delivery_on=(0,o.format)("MMM YYYY",(0,u.toUTC)(n))}}return e.messages&&(e.formatted_messages_count=l.default.t("presenters.backings.row.messages_count",{count:e.messages.count,formatted_count:r.default.format_number(e.messages.count,{precision:0})}),e.formatted_messages_last_activity_at=(0,o.format)("ll",1e3*e.messages.last_activity_at)),e};var a=n(8),r=i(a),o=n(13),s=n(1),l=i(s),u=n(43),d=function(e){switch(e.project.state){case"canceled":return l.default.t("presenters.backings.row.Canceled");case"failed":return l.default.t("presenters.backings.row.Unsuccessful");case"live":return l.default.t("presenters.backings.row.In_progress");case"successful":return l.default.t("presenters.backings.row.Successful");case"suspended":return l.default.t("presenters.backings.row.Suspended");default:return""}}},,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(31),r=i(a),o=n(21),s=i(o),l=n(1),u=i(l),d=n(5),c=n(0);n(0);!function(e){function t(t,n){this.$elem=t,this.$close_a=t.find("a.modal_dialog_close");var i=t.children(),a=i.children(),r=a.children(),o=t.add(i).add(a).add(r).add(this.$close_a);this.options=e.extend({close_link:o,scroll_margin:20,ignore_parent:!1,prevent_close:!1},n),this.prevent_close=this.options.prevent_close,this.prevent_close&&this.$close_a.hide(),this.options.ignore_parent||this._bind_parent_modal(),this._remember_original_css(),this._attach()}function n(t,n){var a,o=e([]);return e.each(i,function(e){(0,r.default)(t,e,{include_query:!0})&&(a=this)}),a||(o=e.create_modal_dialog(n.title||"","spinner",n),o.addClass("spinning"),a=o.data("modal_dialog"),a.remote_url=t,a.remote_xhr=e.ajax({url:t,type:"get",dataType:n.dataType,beforeSend:n.beforeSend,success:function(i){var a=e(i);n.remote_modal_dialog_contents_loaded&&n.remote_modal_dialog_contents_loaded.apply(this,[a,n,t]),o.find(".modal_dialog_body").html(a),o.removeClass("spinning"),o.trigger("size_change"),o.trigger("modal_dialog:remote_dialog_loaded")},error:function(){o.trigger("modal_dialog:errored",arguments),o.remove(),delete i[t]}}),n.do_not_cache||(i[t]=a)),a}e.fn.modal_dialog=function(n){return n=n||{},e(this).each(function(){var i=e(this).data("modal_dialog");i||(i=new t(e(this),n),e(this).data("modal_dialog",i)),i.open()})};var i={};e.create_modal_dialog=function(n,i,a){a=a||{},n.length&&(n="<h4>"+n+"</h4>");var r,o=e('<div class="modal_dialog '+(void 0!==a.theme?a.theme:"dark")+(void 0!==a.class_name?" "+a.class_name:"")+'"'+(void 0!==a.id?' id="'+a.id+'" ':" ")+'style="display: none;"><div class="modal_dialog_outer"><div class="modal_dialog_sizer"><div class="modal_dialog_inner"><div class="modal_dialog_content"><div class="modal_dialog_head">'+n+'<a class="modal_dialog_close" href="#"><span class="ss-icon ss-delete"></span></a></div><div class="modal_dialog_body">'+i+'</div></div></div><span class="modal_dialog_ie_hack"></span></div></div></div>');return e("body").append(o),r=new t(o,a),o.data("modal_dialog",r),o},e.create_login_modal=function(t,n){(0,d.track)("Application Login or Signup",{context:"Login",type:"modal",intent:n});var i=e.create_modal_dialog("",t);i.data("modal_dialog").open(),"undefined"!=typeof FB&&FB.XFBML.parse(i.find(".modal_dialog_body")[0])},e.open_remote_modal_dialog=function(t,i){var a=e(".modal_dialog:visible");if(!a.data("modal_dialog")||a.data("modal_dialog").remote_url!==t){i=i||{};var r=n(t,i);return r.open(),r}},e.extend(t.prototype,{_attach:function(){if(!this._attached){var t=this,n=e(this.options.close_link);this._attached=!0,this.overflow_scroll="scroll"===this.$elem.css("overflow"),this.$elem.on("close.modal_dialog",function(){t.close()}),this.$elem.on("size_change.modal_dialog",function(){t._on_size_changed()}),this.$elem.on("prevent_close.modal_dialog",function(){t._set_prevent_close(!0)}),this.$elem.on("allow_close.modal_dialog",function(){t._set_prevent_close(!1)}),e(window).on("resize.modal_dialog",function(){t._on_size_changed()}),n.on("click.modal_dialog",function(e){n.index(e.target)!==-1&&(t.close(e),e.preventDefault())}),this.$elem.keydown(function(e){27===e.keyCode&&(t.close(e),e.preventDefault())})}},_detach:function(){this._attached=!1,e(this.options.close_link).off("click.modal_dialog"),this.$elem.off("size_change.modal_dialog"),e(window).off("resize.modal_dialog")},_bind_parent_modal:function(){this.$parent_modal=e([]),this.$elem.on("before_close.modal_dialog",function(){var t=e(this).data("modal_dialog").$parent_modal;t.show(),t=e([])})},_on_size_changed:function(e){var t=this.$elem.find("div.modal_dialog_inner");!this.overflow_scroll&&t.height()>this._get_viewport_height()?this._resize_to_position_absolute(e):this._resize_to_position_fixed()},_resize_to_position_fixed:function(){this._apply_original_css()},_resize_to_position_absolute:function(t){var n=e(document).height(),i=document.documentElement&&document.documentElement.scrollTop||e("body")[0].scrollTop+e("html")[0].scrollTop,a=this.$elem.find("div.modal_dialog_inner"),r=a.height(),o=this.options.scroll_margin,s=i+r+2*o,l=s>n?s:n,u=l-i-r-2*o,d="absolute"===this.$elem.css("position");this.$elem.css("position","absolute"),this.$elem.css("top","0"),this.$elem.css("height",n),d&&!t||(a.css("margin-top",i+o),a.css("margin-bottom",u))},_remember_original_css:function(){this._elem_original_css={},this._inner_original_css={};var t=this.$elem.find("div.modal_dialog_inner"),n=["position","top"],i=["margin-top","margin-bottom"],a=this;e.each(n,function(e){var t=n[e];a._elem_original_css[t]=a.$elem.css(t)}),e.each(i,function(e){var n=i[e];a._inner_original_css[n]=t.css(n)})},_get_viewport_height:function(){return s.default.msie?window.document.documentElement.clientHeight:window.innerHeight},_apply_original_css:function(){var e,t,n=this.$elem.find("div.modal_dialog_inner");for(e in this._elem_original_css)this._elem_original_css.hasOwnProperty(e)&&(t=this._elem_original_css[e],this.$elem.css(e,t));for(e in this._inner_original_css)this._inner_original_css.hasOwnProperty(e)&&(t=this._inner_original_css[e],n.css(e,t));this.$elem.css("height","100%")},_set_prevent_close:function(e){this.prevent_close=e,e?this.$close_a.hide():this.$close_a.show()},open:function(){var t=this.$elem.parents("body");t.length&&t.append(this.$elem),this.options.ignore_parent||(this.$parent_modal=e(".modal_dialog:visible"),this.$parent_modal.hide()),this.$elem.show(),this._on_size_changed(!0),this.overflow_scroll&&e("html").css("overflow","hidden"),this.$elem.trigger("modal_dialog:opened",[this]),this._attach()},close:function(t){this.prevent_close||(this.$elem.trigger("before_close.modal_dialog",[t]),t&&t.isDefaultPrevented()||(this._detach(),this.options.do_not_cache?this.$elem.remove():this.$elem.hide(),this.overflow_scroll&&e("html").css("overflow","scroll"),this.$elem.trigger("closed.modal_dialog",[t])))}}),e.modal_confirm=function(t,n){var i,a,r,o={message:u.default.t("library.modal_dialog.Do_you_really_want_to_do_this"),confirm_text:u.default.t("library.modal_dialog.Confirm"),cancel_text:u.default.t("library.modal_dialog.Cancel"),title:u.default.t("library.modal_dialog.Are_you_sure")};n=e.extend({},o,n),i='<div style="max-width:600px;">'+n.message+'<p class="clearfix"><a class="confirm btn btn--blue left" href="#">'+n.confirm_text+'</a><a class="cancel button-space left ml1 lh40 grey-dark" href="#">'+n.cancel_text+"</a></p></div>",a=e.create_modal_dialog(n.title,i),r=a.data("modal_dialog"),a.find(".cancel").click(function(e){e.preventDefault(),r.close()}),a.find(".confirm").click(function(e){e.preventDefault(),t.call(a),r.close()}),r.open()}}(c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Button=t.buttonColorClass=t.buttonSizeClass=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=n(4),r=function(e){return e&&e.__esModule?e:{default:e}}(a),o=t.buttonSizeClass=function(e){switch(e){case"xlarge":return["bttn-xlarge"];case"large":return["bttn-large"];case"medium":return["bttn-medium"];case"small":return["bttn-small"];case"xsmall":return["bttn-xsmall"];default:throw"invalid size class"}},s=t.buttonColorClass=function(e,t){if(t)return["bttn-"+t.name];switch(e){case"black":return["bttn-black"];case"blue":return["bttn-blue"];case"forrest":return["bttn-forrest"];case"green":return["bttn-green"];case"grey":return["bttn-grey"];case"icon":return["bttn-icon"];case"red":return["bttn-red"];case"white":return["bttn-white"];case"facebook":return["bttn-facebook"];default:throw"invalid button color"}};t.Button=function(e){var t=e.onClick,n=e.href,a=e.type,l=void 0===a?"button":a,u=e.atoms,d=void 0===u?[]:u,c=e.size,f=void 0===c?"medium":c,h=e.color,p=void 0===h?"green":h,m=e.theme,g=e.shadow,v=void 0!==g&&g,_=e.disabled,y=void 0!==_&&_,b=e.children,w=e.target,k=v?["shadow-button"]:[],j=["bttn"].concat(o(f)).concat(s(p,m)).concat(m?["keyboard-focusable-"+m["primary-dark"]]:[]).concat(k).concat(d).join(" "),x={onClick:t,className:j};return n?r.default.createElement("a",i({target:w,href:n},x),b):r.default.createElement("button",i({disabled:y,type:l},x),b)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.toUTC=function(e){return new Date(e).toISOString().replace("Z","")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Avatar=void 0;var i=n(4),a=function(e){return e&&e.__esModule?e:{default:e}}(i);t.Avatar=function(e){var t=e.size,n=e.atoms,i=void 0===n?[]:n,r=e.imageUrl,o=e.alt,s=void 0===o?"user avatar":o,l=e.borderColor,u=void 0===l?"grey-500":l,d=t?["w"+t,"h"+t]:[],c=u?["border","border-"+u]:[],f=["avatar","inline-block","align-middle","circle"].concat(d).concat(c).concat(i).join(" ");return a.default.createElement("img",{className:f,src:r,alt:s})}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.provideTranslations=t.consumeTranslations=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(4),u=i(l),d=n(18),c=i(d),f=n(82),h=i(f),p={i18n:c.default.shape({locale:c.default.string,defaultLocale:c.default.string.isRequired,translations:c.default.object.isRequired}),t:c.default.func};t.consumeTranslations=function(e){var t=function(t,n){return e(t,n)};return t.contextTypes=p,t},t.provideTranslations=function(e){return function(t){var n,i;return i=n=function(n){function i(){return a(this,i),r(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return o(i,n),s(i,[{key:"getChildContext",value:function(){var t=h.default.bind(null,e);return{i18n:e,t:t}}},{key:"render",value:function(){return u.default.createElement(t,this.props)}}]),i}(l.Component),n.childContextTypes=p,i}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.formatted_created_at=(0,r.format)("ll",1e3*e.created_at),e.is_recipient=void 0!==a.default&&a.default.get("id")===e.recipient_id,e.sender_is_registered=e.sender.is_registered,e};var i=n(15),a=function(e){return e&&e.__esModule?e:{default:e}}(i),r=n(13)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}n(49);var a=n(21),r=i(a),o=n(1),s=i(o),l=n(184),u=(n(0),n(0));!function(e){function t(t,n){this.$div=t,this.options=e.extend({previous_month_text:"< Prev",next_month_text:"Next >",month_texts:[s.default.t("library.calendar_date_picker.January"),s.default.t("library.calendar_date_picker.February"),s.default.t("library.calendar_date_picker.March"),s.default.t("library.calendar_date_picker.April"),s.default.t("library.calendar_date_picker.May"),s.default.t("library.calendar_date_picker.June"),s.default.t("library.calendar_date_picker.July"),s.default.t("library.calendar_date_picker.August"),s.default.t("library.calendar_date_picker.September"),s.default.t("library.calendar_date_picker.October"),s.default.t("library.calendar_date_picker.November"),s.default.t("library.calendar_date_picker.December")],day_of_week_texts:[s.default.t("library.calendar_date_picker.Sunday_short"),s.default.t("library.calendar_date_picker.Monday_short"),s.default.t("library.calendar_date_picker.Tuesday_short"),s.default.t("library.calendar_date_picker.Wednesday_short"),s.default.t("library.calendar_date_picker.Thursday_short"),s.default.t("library.calendar_date_picker.Friday_short"),s.default.t("library.calendar_date_picker.Saturday_short")]},n),this._extract_options(),this._attach(),this._redraw()}function n(e){return i?i.firstChild.nodeValue=e:(i=document.createElement("div"),i.appendChild(document.createTextNode(e))),i.innerHTML}e.fn.calendar_date_picker=function(n){return this.each(function(){var i=e(this),a=new t(i,n);e(this).data("calendar_date_picker",a)})},e.extend(t.prototype,{_copy_date:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},_copy_date_with_time:function(e,t){if(!e)return e;var n=this._copy_date(e),i=(t||"").split(":");return n.setHours(+i[0]||0),n.setMinutes(+i[1]||0),n},_copy_time:function(e){if(!e)return null;var t=""+e.getHours();1===t.length&&(t="0"+t);var n=""+e.getMinutes();return 1===n.length&&(n="0"+n),t+":"+n},_copy_month:function(e){return new Date(e.getFullYear(),e.getMonth(),1)},_next_month:function(e){return new Date(e.getFullYear(),e.getMonth()+1,1)},_previous_month:function(e){return new Date(e.getFullYear(),e.getMonth()-1,1)},_next_date:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+1,e.getHours(),e.getMinutes())},_previous_date:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()-1,e.getHours(),e.getMinutes())},_same_year:function(e,t){return e.getFullYear()===t.getFullYear()},_same_month:function(e,t){return this._same_year(e,t)&&e.getMonth()===t.getMonth()},_last_date_of_month:function(e){return new Date(e.getFullYear(),e.getMonth()+1,0)},_selected_date_date_in_focus_month:function(){return this.selected_date&&this._same_month(this.selected_date,this.focus_date)?this.selected_date.getDate():void 0},_extract_options:function(){this.today_date=this._copy_date(this.options.today_date||new Date),this.options.selected_date&&(this.selected_date=this._copy_date(this.options.selected_date)),this.focus_date=this._copy_month(this.options.focus_date||this.selected_date||this.today_date),this.time=!!this._does_datetime()&&this._copy_time(this.options.selected_date||this.options.today_date||new Date)},_refresh_calendar_table_classes:function(e){var t=this._selected_date_date_in_focus_month(),n=e.children("tbody"),i=n.find("a.selected");i.removeClass("selected"),i.parent().removeClass("selected");var a=n.find("a:eq("+(t-1)+")");a.addClass("selected"),a.parent().addClass("selected")},_attach:function(){var e=this;this.$div.bind("calendar_date_picker:select_date",function(t,n){e.select_date(n)})},_bind_dom_table_events:function(){var t=this,n=this.$div.children().children("table"),i=n.children(":eq(0)"),a=i.children().children(),o=a.children("a.previous_month");o.text(this.options.previous_month_text),o.click(function(e){e.preventDefault(),t._on_previous_month_clicked()});var s=a.children("a.next_month");s.text(this.options.next_month_text),s.click(function(e){e.preventDefault(),t._on_next_month_clicked()}),a.children(".month, .year").on("click",function(){t.focus_date=new Date,t._refresh_calendar()}),n.children("tbody").click(function(n){var i;i=r.default.msie?n.srcElement:n.target;var a=e(i);if(a[0]&&"A"===a[0].nodeName){n.preventDefault();var o=t._copy_date_with_time(t.focus_date,t.time);o.setDate(+a.text());var s=t._copy_date_with_time(t.selected_date,t.time);t.options.allow_deselect&&s&&o-s==0?t.select_date(void 0):t.select_date(o)}})},_bind_dom_time_events:function(){if(this._does_datetime()){var e=this,t=this.$div.children().children("div.time").find("input");t.time_field(this.options.time),t.trigger("time_field:set_time",this.time),t.bind("time_field:time_changed",function(t,n){e.selected_date||(e.selected_date=new Date);var i=e._copy_date_with_time(e.selected_date,n);e.select_date(i)})}},_does_datetime:function(){return void 0!==this.options.time_text},_on_previous_month_clicked:function(){this.focus_date=this._previous_month(this.focus_date),this._refresh_calendar()},_on_next_month_clicked:function(){this.focus_date=this._next_month(this.focus_date),this._refresh_calendar()},_redraw:function(){this.$div.empty(),this.$div.append('<div class="calendar_date_picker">'+this._table_html()+this._time_div_html()+"</div>"),this._bind_dom_table_events(),this._bind_dom_time_events()},_refresh_calendar:function(){this.$div.children().children("table").replaceWith(this._table_html()),this._bind_dom_table_events()},select_date:function(e,t){var n=e?this._copy_date(e):void 0,i=t?t:e?this._copy_time(e):void 0;(this.selected_date?this.selected_date.valueOf():void 0)===(n?n.valueOf():void 0)&&i===this.time||(this.selected_date=n,this._does_datetime()&&(this.time=i,i&&this.$div.find("input").trigger("time_field:set_time",i)),this.$div.trigger("calendar_date_picker:date_selected",[this._copy_date_with_time(this.selected_date,this.time)]),this.focus_date=this._copy_month(this.selected_date||this.today_date),this._refresh_calendar(),this._refresh_calendar_table_classes(this.$div.find("table")))},_table_html:function(){return"<table>"+this._thead_month_html()+this._thead_days_of_week_html()+this._tbody_html()+"</table>"},_thead_month_html:function(){return'<thead class="month"><tr><th colspan="7"><a class="previous_month ss-icon ss-navigateleft grey-dark" href="#"></a><a class="next_month ss-icon ss-navigateright grey-dark" href="#"></a><span class="month">'+n(this.options.month_texts[this.focus_date.getMonth()])+'</span> <span class="year">'+this.focus_date.getFullYear()+"</span></th></tr></thead>"},_thead_days_of_week_html:function(){return'<thead class="days_of_week"><tr><th>'+this._days_of_week_ths().join("</th><th>")+"</th></tr></thead>"},_tbody_html:function(){var e=this._copy_month(this.focus_date).getDay(),t=1,n=this._last_date_of_month(this.focus_date).getDate(),i=this._selected_date_date_in_focus_month(),a=this._same_month(this.focus_date,this.today_date)&&this.today_date.getDate(),r=[];for(r.push(this._date_tds(e,i,a,t,n)),t=8-e;t<=n;t+=7)r.push(this._date_tds(0,i,a,t,n));return"<tbody><tr>"+r.join("</tr><tr>")+"</tr></tbody>"},_date_tds:function(e,t,n,i,a){for(var r=[],o=0;o<e;o+=1)r.push("<td></td>");for(var s=i;r.length<7&&s<=a;s+=1){var l=[];s===t&&l.push("selected"),s===n&&l.push("today");var u;u=l.length?' class="'+l.join(" ")+'"':"";var d="<td"+u+'><a href="#"'+u+">"+s+"</a></td>";r.push(d)}for(var c=a+1;c<i+7;c+=1)r.push("<td></td>");return r.join("")},_days_of_week_ths:function(){return e.map(this.options.day_of_week_texts,n)},_time_div_html:function(){return this._does_datetime()?'<div class="time"><label>'+n(this.options.time_text)+'<input type="text" /></label>'+n((0,l.zoneAbbr)(new Date))+"</div>":""}});var i}(u)},function(e,t,n){"use strict";var i=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(i),r=n(0);n(0);!function(e){function t(t,n){this.$elem=t,this.xhr=!1,this.paused=n.paused||!1,this.options=e.extend({threshold:500,trigger_next:"scroll",load_next_after:!1,prepend_next:!1,dataType:"html",extra_params:{},$context:e(window),default_page:1,page_by:function(e){return void 0!==e?e+1:this.default_page},page_param:"page",url:!1},n),this.current_page=this.options.page_by(),this.bind_events()}e.fn.mobius=function(n){return n=n||{},e(this).each(function(){var i=e(this).data("mobius");i||(i=new t(e(this),n),e(this).data("mobius",i))})},e.extend(t.prototype,{bind_events:function(){var t=this;"string"==typeof this.options.trigger_next?(this.options.$context.on(this.options.trigger_next,function(){t.check_for_more()}),t.check_for_more()):this.options.trigger_next.jquery&&this.options.trigger_next.click(function(n){n.preventDefault(),e(this).addClass("loading_next"),t.load_next()})},clear_extra_params:function(){this.options.extra_params={}},add_param:function(e,t){this.options.extra_params[e]=t},set_extra_params:function(e){this.options.extra_params=e},pause:function(){this.paused=!0},play:function(){this.paused=!1},check_for_more:function(){if(!this.paused){this.options.$context.scrollTop()+this.options.$context.height()-this.$elem.offset().top>this.$elem.get(0).scrollHeight-this.options.threshold&&this.load_next()}},load_next:function(){this.load_page(this.options.page_by(this.current_page),this.options.load_next_after,!0)},load_page:function(t,n,i){var r=parseInt(t,10),o=this;isNaN(r)||(n&&n.length||(n=!1),this.xhr||(this.$elem.trigger("mobius:loading_page"),this.xhr=e.ajax({type:"get",dataType:this.options.dataType,url:this.build_paged_url(r),success:function(t){if(o.xhr=!1,"html"===o.options.dataType){var s=e("<div>"+t+"</div>"),l=s.find(".mobius").children();if(!l.length)return void o.$elem.trigger("mobius:error",[a.default.t("library.mobius.No_mobius_found_in_page",{page:r})]);n?n.after(l):o.options.prepend_next?o.$elem.prepend(l):o.$elem.append(l),o.options.trigger_next.jquery&&o.options.trigger_next.removeClass("loading_next"),o.$elem.trigger("mobius:loaded_page",[r,l])}else o.$elem.trigger("mobius:loaded_page",[r,t]);!i&&n||(o.current_page=r)},error:function(){o.xhr=!1}})))},build_paged_url:function(t){var n=window.location.toString().replace(window.location.search,"").replace(window.location.hash,""),i=void 0===this.options.extra_params?"":"string"==typeof this.options.extra_params?this.options.extra_params:e.param(this.options.extra_params),a=/(.*)#$/;a.test(n)&&(n=a.exec(n)[1]),i&&(i="&"+i),this.options.url&&(n=this.options.url);var r=n.indexOf("?")!==-1?"&":"?";return n.toString()+r+this.options.page_param+"="+t+i}})}(r)},function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=(n(0),n(0));!function(e){function t(t,n){this.$field=t,this.options=e.extend({on_invalid:null,format:"%H:%M %z",am:"am",pm:"pm"},n),this._value=this._current_time_from_field(),this._attach()}e.fn.time_field=function(n){return e(this).each(function(){new t(e(this),n)})},e.extend(t.prototype,{_attach:function(){var e=this;e.$field.bind("blur",function(){e._handle_edit()}),this.$field.bind("time_field:set_time",function(t,n){e.set_time(n)})},_s_to_time:function(e){if("object"===i(Date.Parsing)){var t=Date.parse(e);return t?t.toString("HH:mm"):this.options.on_invalid}var n,a=e.match(/^\s*(\d\d?)(:(\d\d))?\s*([ap]m?)?\s*$/i),r=!a;if(!r){var o=+a[1]%12,s=+a[3]||0,l=(a[4]||"").match(/p/i);a[4]||(l=+a[1]>=12),+a[1]>23&&(r=!0),+a[1]>12&&a[4]&&(r=!0),s>59&&(r=!0),+a[1]<1&&a[4]&&(r=!0);var u=""+(o+(l?12:0));1===u.length&&(u="0"+u);var d=""+s;1===d.length&&(d="0"+d),n=u+":"+d}return r?this.options.on_invalid:n},_time_to_s:function(t){if("object"===i(Date.Parsing)){var n=Date.parse(t);return n?n.toString("h:mm tt"):this.options.on_invalid}var a=t&&t.match(/(\d\d):(\d\d)/);if(a){var r=this.options.format,o=+a[1],s=+a[2],l=o>=12?this.options.pm:this.options.am,u=""+(o%12?o%12:12),d=""+s;1===d.length&&(d="0"+d);var c=[["%Hh",o],["%H",u],["%M",d],["%z",l]];return e(c).each(function(e,t){r=r.replace(t[0],t[1])}),r}return""},_current_time_from_field:function(){return this._s_to_time(this.$field.val())},_reset_field_value:function(){this._value!==this._current_time_from_field()&&this.$field.val(this._time_to_s(this._value))},set_time:function(e){e!==this._value&&(this._value=e,this.$field.trigger("time_field:time_changed",this._value)),this._reset_field_value()},_handle_edit:function(){var e=this._current_time_from_field();this.set_time(e)}})}(a)},function(e,t,n){"use strict";var i=n(0);n(0);!function(e){e.support.transitionEvent=function(){return void 0!==window.TransitionEvent}}(i)},function(e,t,n){n(0),n(0);!function(e){"use strict";!function(e){function t(t){var n="dragover"===t;return function(i){i.dataTransfer=i.originalEvent&&i.originalEvent.dataTransfer;var a=i.dataTransfer;a&&e.inArray("Files",a.types)!==-1&&this._trigger(t,e.Event(t,{delegatedEvent:i}))!==!1&&(i.preventDefault(),n&&(a.dropEffect="copy"))}}e.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||e('<input type="file">').prop("disabled")),e.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,n){return t=this.messages[t]||t.toString(),n&&e.each(n,function(e,n){t=t.replace("{"+e+"}",n)}),t},formData:function(e){return e.serializeArray()},add:function(t,n){if(t.isDefaultPrevented())return!1;(n.autoUpload||n.autoUpload!==!1&&e(this).fileupload("option","autoUpload"))&&n.process().done(function(){n.submit()})},processData:!1,contentType:!1,cache:!1,timeout:0},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,n){var i=e-this.timestamp;return(!this.bitrate||!n||i>n)&&(this.bitrate=(t-this.loaded)*(1e3/i)*8,this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var n;return"function"===e.type(t.formData)?t.formData(t.form):e.isArray(t.formData)?t.formData:"object"===e.type(t.formData)?(n=[],e.each(t.formData,function(e,t){n.push({name:e,value:t})}),n):[]},_getTotal:function(t){var n=0;return e.each(t,function(e,t){n+=t.size||1}),n},_initProgressObject:function(t){var n={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,n):t._progress=n},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t];else e._response={}},_onProgress:function(t,n){if(t.lengthComputable){var i,a=Date.now?Date.now():(new Date).getTime();if(n._time&&n.progressInterval&&a-n._time<n.progressInterval&&t.loaded!==t.total)return;n._time=a,i=Math.floor(t.loaded/t.total*(n.chunkSize||n._progress.total))+(n.uploadedBytes||0),this._progress.loaded+=i-n._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(a,this._progress.loaded,n.bitrateInterval),n._progress.loaded=n.loaded=i,n._progress.bitrate=n.bitrate=n._bitrateTimer.getBitrate(a,i,n.bitrateInterval),this._trigger("progress",e.Event("progress",{delegatedEvent:t}),n),this._trigger("progressall",e.Event("progressall",{delegatedEvent:t}),this._progress)}},_initProgressListener:function(t){var n=this,i=t.xhr?t.xhr():e.ajaxSettings.xhr();i.upload&&(e(i.upload).bind("progress",function(e){var i=e.originalEvent;e.lengthComputable=i.lengthComputable,e.loaded=i.loaded,e.total=i.total,n._onProgress(e,t)}),t.xhr=function(){return i})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(t){var n,i=this,a=t.files[0],r=t.multipart||!e.support.xhrFileUpload,o="array"===e.type(t.paramName)?t.paramName[0]:t.paramName;t.headers=e.extend({},t.headers),t.contentRange&&(t.headers["Content-Range"]=t.contentRange),r&&!t.blob&&this._isInstanceOf("File",a)||(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(a.name)+'"'),r?e.support.xhrFormDataFileUpload&&(t.postMessage?(n=this._getFormData(t),t.blob?n.push({name:o,value:t.blob}):e.each(t.files,function(i,a){n.push({name:"array"===e.type(t.paramName)&&t.paramName[i]||o,value:a})})):(i._isInstanceOf("FormData",t.formData)?n=t.formData:(n=new FormData,e.each(this._getFormData(t),function(e,t){n.append(t.name,t.value)})),t.blob?n.append(o,t.blob,a.name):e.each(t.files,function(a,r){(i._isInstanceOf("File",r)||i._isInstanceOf("Blob",r))&&n.append("array"===e.type(t.paramName)&&t.paramName[a]||o,r,r.uploadName||r.name)})),t.data=n):(t.contentType=a.type||"application/octet-stream",t.data=t.blob||a),t.blob=null},_initIframeSettings:function(t){var n=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&n&&n!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var n=e(t.fileInput),i=t.paramName;return i?e.isArray(i)||(i=[i]):(i=[],n.each(function(){for(var t=e(this),n=t.prop("name")||"files[]",a=(t.prop("files")||[1]).length;a;)i.push(n),a-=1}),i.length||(i=[n.prop("name")||"files[]"])),i},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||"string"===e.type(t.form.prop("method"))&&t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var n=e.extend({},this.options,t);return this._initFormSettings(n),this._initDataSettings(n),n},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,n,i){var a=e.Deferred(),r=a.promise();return n=n||this.options.context||r,t===!0?a.resolveWith(n,i):t===!1&&a.rejectWith(n,i),r.abort=a.promise,this._enhancePromise(r)},_addConvenienceMethods:function(t,n){var i=this,a=function(t){return e.Deferred().resolveWith(i,t).promise()};n.process=function(t,r){return(t||r)&&(n._processQueue=this._processQueue=(this._processQueue||a([this])).then(function(){return n.errorThrown?e.Deferred().rejectWith(i,[n]).promise():a(arguments)}).then(t,r)),this._processQueue||a([this])},n.submit=function(){return"pending"!==this.state()&&(n.jqXHR=this.jqXHR=i._trigger("submit",e.Event("submit",{delegatedEvent:t}),this)!==!1&&i._onSend(t,this)),this.jqXHR||i._getXHRPromise()},n.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",i._trigger("fail",null,this),i._getXHRPromise(!1))},n.state=function(){return this.jqXHR?i._getDeferredState(this.jqXHR):this._processQueue?i._getDeferredState(this._processQueue):void 0},n.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===i._getDeferredState(this._processQueue)},n.progress=function(){return this._progress},n.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),n=t&&t.split("-"),i=n&&n.length>1&&parseInt(n[1],10);return i&&i+1},_chunkedUpload:function(t,n){t.uploadedBytes=t.uploadedBytes||0;var i,a,r=this,o=t.files[0],s=o.size,l=t.uploadedBytes,u=t.maxChunkSize||s,d=this._blobSlice,c=e.Deferred(),f=c.promise();return!(!(this._isXHRUpload(t)&&d&&(l||u<s))||t.data)&&(!!n||(l>=s?(o.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",o.error])):(a=function(){var n=e.extend({},t),f=n._progress.loaded;n.blob=d.call(o,l,l+u,o.type),n.chunkSize=n.blob.size,n.contentRange="bytes "+l+"-"+(l+n.chunkSize-1)+"/"+s,r._initXHRData(n),r._initProgressListener(n),i=(r._trigger("chunksend",null,n)!==!1&&e.ajax(n)||r._getXHRPromise(!1,n.context)).done(function(i,o,u){l=r._getUploadedBytes(u)||l+n.chunkSize,f+n.chunkSize-n._progress.loaded&&r._onProgress(e.Event("progress",{lengthComputable:!0,loaded:l-n.uploadedBytes,total:l-n.uploadedBytes}),n),t.uploadedBytes=n.uploadedBytes=l,n.result=i,n.textStatus=o,n.jqXHR=u,r._trigger("chunkdone",null,n),r._trigger("chunkalways",null,n),l<s?a():c.resolveWith(n.context,[i,o,u])}).fail(function(e,t,i){n.jqXHR=e,n.textStatus=t,n.errorThrown=i,r._trigger("chunkfail",null,n),r._trigger("chunkalways",null,n),c.rejectWith(n.context,[e,t,i])})},this._enhancePromise(f),f.abort=function(){return i.abort()},a(),f)))},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,n,i,a){var r=a._progress.total,o=a._response;a._progress.loaded<r&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:r,total:r}),a),o.result=a.result=t,o.textStatus=a.textStatus=n,o.jqXHR=a.jqXHR=i,this._trigger("done",null,a)},_onFail:function(e,t,n,i){var a=i._response;i.recalculateProgress&&(this._progress.loaded-=i._progress.loaded,this._progress.total-=i._progress.total),a.jqXHR=i.jqXHR=e,a.textStatus=i.textStatus=t,a.errorThrown=i.errorThrown=n,this._trigger("fail",null,i)},_onAlways:function(e,t,n,i){this._trigger("always",null,i)},_onSend:function(t,n){n.submit||this._addConvenienceMethods(t,n);var i,a,r,o,s=this,l=s._getAJAXSettings(n),u=function(){return s._sending+=1,l._bitrateTimer=new s._BitrateTimer,i=i||((a||s._trigger("send",e.Event("send",{delegatedEvent:t}),l)===!1)&&s._getXHRPromise(!1,l.context,a)||s._chunkedUpload(l)||e.ajax(l)).done(function(e,t,n){s._onDone(e,t,n,l)}).fail(function(e,t,n){s._onFail(e,t,n,l)}).always(function(e,t,n){if(s._onAlways(e,t,n,l),s._sending-=1,s._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>s._sending)for(var i=s._slots.shift();i;){if("pending"===s._getDeferredState(i)){i.resolve();break}i=s._slots.shift()}0===s._active&&s._trigger("stop")})};return this._beforeSend(t,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(r=e.Deferred(),this._slots.push(r),o=r.then(u)):(this._sequence=this._sequence.then(u,u),o=this._sequence),o.abort=function(){return a=[void 0,"abort","abort"],i?i.abort():(r&&r.rejectWith(l.context,a),u())},this._enhancePromise(o)):u()},_onAdd:function(t,n){var i,a,r,o,s=this,l=!0,u=e.extend({},this.options,n),d=n.files,c=d.length,f=u.limitMultiFileUploads,h=u.limitMultiFileUploadSize,p=u.limitMultiFileUploadSizeOverhead,m=0,g=this._getParamName(u),v=0;if(!c)return!1;if(h&&void 0===d[0].size&&(h=void 0),(u.singleFileUploads||f||h)&&this._isXHRUpload(u))if(u.singleFileUploads||h||!f)if(!u.singleFileUploads&&h)for(r=[],i=[],o=0;o<c;o+=1)m+=d[o].size+p,(o+1===c||m+d[o+1].size+p>h||f&&o+1-v>=f)&&(r.push(d.slice(v,o+1)),a=g.slice(v,o+1),a.length||(a=g),i.push(a),v=o+1,m=0);else i=g;else for(r=[],i=[],o=0;o<c;o+=f)r.push(d.slice(o,o+f)),a=g.slice(o,o+f),a.length||(a=g),i.push(a);else r=[d],i=[g];return n.originalFiles=d,e.each(r||d,function(a,o){var u=e.extend({},n);return u.files=r?o:[o],u.paramName=i[a],s._initResponseObject(u),s._initProgressObject(u),s._addConvenienceMethods(t,u),l=s._trigger("add",e.Event("add",{delegatedEvent:t}),u)}),l},_replaceFileInput:function(t){var n=t.fileInput,i=n.clone(!0),a=n.is(document.activeElement);t.fileInputClone=i,e("<form></form>").append(i)[0].reset(),n.after(i).detach(),a&&i.focus(),e.cleanData(n.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,t){return t===n[0]?i[0]:t}),n[0]===this.element[0]&&(this.element=i)},_handleFileTreeEntry:function(t,n){var i,a=this,r=e.Deferred(),o=function(e){e&&!e.entry&&(e.entry=t),r.resolve([e])},s=function(e){a._handleFileTreeEntries(e,n+t.name+"/").done(function(e){r.resolve(e)}).fail(o)},l=function(){i.readEntries(function(e){e.length?(u=u.concat(e),l()):s(u)},o)},u=[];return n=n||"",t.isFile?t._file?(t._file.relativePath=n,r.resolve(t._file)):t.file(function(e){e.relativePath=n,r.resolve(e)},o):t.isDirectory?(i=t.createReader(),l()):r.resolve([]),r.promise()},_handleFileTreeEntries:function(t,n){var i=this;return e.when.apply(e,e.map(t,function(e){return i._handleFileTreeEntry(e,n)})).then(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var n=t.items;return n&&n.length&&(n[0].webkitGetAsEntry||n[0].getAsEntry)?this._handleFileTreeEntries(e.map(n,function(e){var t;return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t);var n,i,a=t.prop("webkitEntries")||t.prop("entries");if(a&&a.length)return this._handleFileTreeEntries(a);if(n=e.makeArray(t.prop("files")),n.length)void 0===n[0].name&&n[0].fileName&&e.each(n,function(e,t){t.name=t.fileName,t.size=t.fileSize});else{if(!(i=t.prop("value")))return e.Deferred().resolve([]).promise();n=[{name:i.replace(/^.*\\/,"")}]}return e.Deferred().resolve(n).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).then(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var n=this,i={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(i.fileInput).always(function(a){i.files=a,n.options.replaceFileInput&&n._replaceFileInput(i),n._trigger("change",e.Event("change",{delegatedEvent:t}),i)!==!1&&n._onAdd(t,i)})},_onPaste:function(t){var n=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,i={files:[]};n&&n.length&&(e.each(n,function(e,t){var n=t.getAsFile&&t.getAsFile();n&&i.files.push(n)}),this._trigger("paste",e.Event("paste",{delegatedEvent:t}),i)!==!1&&this._onAdd(t,i))},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var n=this,i=t.dataTransfer,a={};i&&i.files&&i.files.length&&(t.preventDefault(),this._getDroppedFiles(i).always(function(i){a.files=i,n._trigger("drop",e.Event("drop",{delegatedEvent:t}),a)!==!1&&n._onAdd(t,a)}))},_onDragOver:t("dragover"),_onDragEnter:t("dragenter"),_onDragLeave:t("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,n){var i=e.inArray(t,this._specialOptions)!==-1;i&&this._destroyEventHandlers(),this._super(t,n),i&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),n=t.pop();return t.shift(),new RegExp(t.join("/"),n)},_isRegExpOption:function(t,n){return"url"!==t&&"string"===e.type(n)&&/^\/.*\/[igm]{0,3}$/.test(n)},_initDataAttributes:function(){var t=this,n=this.options,i=this.element.data();e.each(this.element[0].attributes,function(e,a){var r,o=a.name.toLowerCase();/^data-/.test(o)&&(o=o.slice(5).replace(/-[a-z]/g,function(e){return e.charAt(1).toUpperCase()}),r=i[o],t._isRegExpOption(o,r)&&(r=t._getRegExp(r)),n[o]=r)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var n=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,n._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var n,i,a=this,r=e.Deferred(),o=r.promise();return o.abort=function(){return i=!0,n?n.abort():(r.reject(null,"abort","abort"),o)},this._getFileInputFiles(t.fileInput).always(function(e){if(!i){if(!e.length)return void r.reject();t.files=e,n=a._onSend(null,t),n.then(function(e,t,n){r.resolve(e,t,n)},function(e,t,n){r.reject(e,t,n)})}}),this._enhancePromise(o)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})}(n(0),n(25))}()},function(e,t,n){"use strict";var i=n(12),a=n(0);n(0);!function(e){function t(t){t.each(function(){var t=e(this),n=t.find("option:selected");t.siblings(".title").text(n.data("altLabel")||n.text())})}e.fn.ksrSelect=function(){var n=e(this);n.find(".js-ksr-select").livequery(function(){t(e(this).find("select"))}),n.on("focus blur",".js-ksr-select select",function(){e(this).parent().toggleClass("is-focus")}),n.on("change",".js-ksr-select select",function(){t(e(this))}),n.on("keydown",".ksr-icon__arrow-down, .ss-delete",function(t){var n=e(this),a=t.keyCode;a!==i.ENTER&&a!==i.SPACE||(t.preventDefault(),n.hasClass("ss-delete")&&n.parent().find(".ksr-icon__arrow-down").focus(),n.click())})},e.fn.ksr_val=function(n){var i=e(this);if(void 0!==n){var a=i.val(n);return t(i),a}return i.val()}}(a)},function(e,t,n){var i=n(0);n(0);!function(e,t){function n(e,t,n){return e>t&&e<t+n}function i(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===e.axis||i(this.items[0].item)),this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){"disabled"===t?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var i=null,a=!1,r=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),e(t.target).parents().each(function(){if(e.data(this,r.widgetName+"-item")===r)return i=e(this),!1}),e.data(t.target,r.widgetName+"-item")===r&&(i=e(t.target)),!!i&&(!(this.options.handle&&!n&&(e(this.options.handle,i).find("*").addBack().each(function(){this===t.target&&(a=!0)}),!a))&&(this.currentItem=i,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,n,i){var a,r,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(r=this.document.find("body"),this.storedCursor=r.css("cursor"),r.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(r)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(a=this.containers.length-1;a>=0;a--)this.containers[a]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,i,a,r,o=this.options,s=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-e(document).scrollTop()<o.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<o.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+o.scrollSpeed)),t.pageX-e(document).scrollLeft()<o.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<o.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+o.scrollSpeed))),s!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(i=this.items[n],a=i.item[0],(r=this._intersectsWithPointer(i))&&i.instance===this.currentContainer&&!(a===this.currentItem[0]||this.placeholder[1===r?"next":"prev"]()[0]===a||e.contains(this.placeholder[0],a)||"semi-dynamic"===this.options.type&&e.contains(this.element[0],a))){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(t,i),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var i=this,a=this.placeholder.offset(),r=this.options.axis,o={};r&&"x"!==r||(o.left=a.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(o.top=a.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&i.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n.each(function(){i.push(e(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,i=this.positionAbs.top,a=i+this.helperProportions.height,r=e.left,o=r+e.width,s=e.top,l=s+e.height,u=this.offset.click.top,d=this.offset.click.left,c="x"===this.options.axis||i+u>s&&i+u<l,f="y"===this.options.axis||t+d>r&&t+d<o,h=c&&f;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?h:r<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&s<i+this.helperProportions.height/2&&a-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var t="x"===this.options.axis||n(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||n(this.positionAbs.left+this.offset.click.left,e.left,e.width),a=t&&i,r=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return!!a&&(this.floating?o&&"right"===o||"down"===r?2:1:r&&("down"===r?2:1))},_intersectsWithSides:function(e){var t=n(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=n(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),a=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?"right"===r&&i||"left"===r&&!i:a&&("down"===a&&t||"up"===a&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n,i,a,r,o=[],s=[],l=this._connectWith();if(l&&t)for(n=l.length-1;n>=0;n--)for(a=e(l[n]),i=a.length-1;i>=0;i--)(r=e.data(a[i],this.widgetFullName))&&r!==this&&!r.options.disabled&&s.push([e.isFunction(r.options.items)?r.options.items.call(r.element):e(r.options.items,r.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),r]);for(s.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=s.length-1;n>=0;n--)s[n][0].each(function(){o.push(this)});return e(o)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,i,a,r,o,s,l,u,d=this.items,c=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],f=this._connectWith();if(f&&this.ready)for(n=f.length-1;n>=0;n--)for(a=e(f[n]),i=a.length-1;i>=0;i--)(r=e.data(a[i],this.widgetFullName))&&r!==this&&!r.options.disabled&&(c.push([e.isFunction(r.options.items)?r.options.items.call(r.element[0],t,{item:this.currentItem}):e(r.options.items,r.element),r]),this.containers.push(r));for(n=c.length-1;n>=0;n--)for(o=c[n][1],s=c[n][0],i=0,u=s.length;i<u;i++)l=e(s[i]),l.data(this.widgetName+"-item",o),d.push({item:l,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,i,a,r;for(n=this.items.length-1;n>=0;n--)i=this.items[n],i.instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(a=this.options.toleranceElement?e(this.options.toleranceElement,i.item):i.item,t||(i.width=a.outerWidth(),i.height=a.outerHeight()),r=a.offset(),i.left=r.left,i.top=r.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)r=this.containers[n].element.offset(),this.containers[n].containerCache.left=r.left,this.containers[n].containerCache.top=r.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,i=t.options;i.placeholder&&i.placeholder.constructor!==String||(n=i.placeholder,i.placeholder={element:function(){var i=t.currentItem[0].nodeName.toLowerCase(),a=e("<"+i+">",t.document[0]).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===i?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(a)}):"img"===i&&a.attr("src",t.currentItem.attr("src")),n||a.css("visibility","hidden"),a},update:function(e,a){n&&!i.forcePlaceholderSize||(a.height()||a.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),a.width()||a.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(i.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),i.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var a,r,o,s,l,u,d,c,f,h,p=null,m=null;for(a=this.containers.length-1;a>=0;a--)if(!e.contains(this.currentItem[0],this.containers[a].element[0]))if(this._intersectsWith(this.containers[a].containerCache)){if(p&&e.contains(this.containers[a].element[0],p.element[0]))continue;p=this.containers[a],m=a}else this.containers[a].containerCache.over&&(this.containers[a]._trigger("out",t,this._uiHash(this)),this.containers[a].containerCache.over=0);if(p)if(1===this.containers.length)this.containers[m].containerCache.over||(this.containers[m]._trigger("over",t,this._uiHash(this)),this.containers[m].containerCache.over=1);else{for(o=1e4,s=null,h=p.floating||i(this.currentItem),l=h?"left":"top",u=h?"width":"height",d=this.positionAbs[l]+this.offset.click[l],r=this.items.length-1;r>=0;r--)e.contains(this.containers[m].element[0],this.items[r].item[0])&&this.items[r].item[0]!==this.currentItem[0]&&(h&&!n(this.positionAbs.top+this.offset.click.top,this.items[r].top,this.items[r].height)||(c=this.items[r].item.offset()[l],f=!1,Math.abs(c-d)>Math.abs(c+this.items[r][u]-d)&&(f=!0,c+=this.items[r][u]),Math.abs(c-d)<o&&(o=Math.abs(c-d),s=this.items[r],this.direction=f?"up":"down")));if(!s&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[m])return;s?this._rearrange(t,s,null,!0):this._rearrange(t,null,this.containers[m].element,!0),this._trigger("change",t,this._uiHash()),this.containers[m]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[m],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[m]._trigger("over",t,this._uiHash(this)),this.containers[m].containerCache.over=1}},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||e("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),i[0].style.width&&!n.forceHelperSize||i.width(this.currentItem.width()),i[0].style.height&&!n.forceHelperSize||i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,a=this.options;"parent"===a.containment&&(a.containment=this.helper[0].parentNode),"document"!==a.containment&&"window"!==a.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===a.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===a.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(a.containment)||(t=e(a.containment)[0],n=e(a.containment).offset(),i="hidden"!==e(t).css("overflow"),this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"===t?1:-1,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(a[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:a.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:a.scrollLeft())*i}},_generatePosition:function(t){var n,i,a=this.options,r=t.pageX,o=t.pageY,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(s[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),a.grid&&(n=this.originalPageY+Math.round((o-this.originalPageY)/a.grid[1])*a.grid[1],o=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-a.grid[1]:n+a.grid[1]:n,i=this.originalPageX+Math.round((r-this.originalPageX)/a.grid[0])*a.grid[0],r=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-a.grid[0]:i+a.grid[0]:i)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:s.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:s.scrollLeft())}},_rearrange:function(e,t,n,i){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var a=this.counter;this._delay(function(){a===this.counter&&this.refreshPositions(!i)})},_clear:function(e,t){this.reverting=!1;var n,i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)"auto"!==this._storedCSS[n]&&"static"!==this._storedCSS[n]||(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&i.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||i.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(i.push(function(e){this._trigger("remove",e,this._uiHash())}),i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)t||i.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over&&(i.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),n=0;n<i.length;n++)i[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(n=0;n<i.length;n++)i[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}(i)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(3),r=i(a),o=n(7),s=i(o),l=n(1),u=i(l);n(106),n(105),n(51);var d=(n(0),n(0)),c=function(e,t){var n=this;this.options=d.extend({},this.default_options,t),Object.keys(this.constructor.decorator).forEach(function(e){var i=[n.constructor.decorator[e]];"function"==typeof t[e]&&i.push(t[e]),n.options[e]=function(){for(var e=0;e<i.length;e+=1)i[e].apply(n,arguments)}}),this.$input=e,this.$form=e.closest("form"),this.$container=e.closest(".js-asset-upload"),this.uploading_files=[]};c.prototype.raise=function(e){this.$input.trigger("error"),this.$form.trigger("ksr_file_upload:reset"),(0,s.default)({error:e}),this.$container.removeClass("uploading")},c.prototype.default_options={type:"POST",dataType:"text",mimeTypes:[],paramsUrl:null},c.prototype.identifier_for_file=function(e){return e.name+e.size+e.type+e.lastModified},c.decorator={},c.decorator.add=function(e,t){var n=this,i=t.files[0],a=i.name.replace(/\s+/g,"_"),o=this.identifier_for_file(i);if(this.options.mimeTypes&&this.options.mimeTypes.length>0&&this.options.mimeTypes.indexOf(i.type)<0)return this.raise(u.default.t("library.adhoc_fileuploader.This_is_not_a_valid_file_type")),!1;this.options.paramsUrl?d.ajax({url:this.options.paramsUrl,type:"GET",data:{filename:a,filetype:i.type},success:function(e){t.paramName="file",t.formData=r.default.map(e.params,function(e,t){return{name:t,value:e}}),t.submit(),n.uploading_files.push(o)},error:function(){n.raise(u.default.t("library.adhoc_fileuploader.Theres_something_wrong_with_the_filename_Please",{file_name:i.name}))}}):(t.submit(),this.uploading_files.push(o))},c.decorator.done=function(e,t){var n=t.files[0],i=this.identifier_for_file(n);this.uploading_files=this.uploading_files.filter(function(e){return e!==i}),this.uploading_files.length||(this.$container.removeClass("uploading"),window.onbeforeunload=this.previous_onbeforeunload)},c.decorator.submit=function(){this.$container.addClass("uploading"),this.previous_onbeforeunload=window.onbeforeunload;var e=this;window.onbeforeunload=function(){if(e.$container.hasClass("uploading"))return u.default.t("library.adhoc_fileuploader.Your_upload_has_not_completed_yet_Click_Stay")}},c.decorator.progress=function(e,t){var n=this.$container.find(".progress"),i=n.filter(".tmpl");if(i.length){var a=t.formData[2].value.replace(/[^\w-_+]/g,"_");n=this.$container.find("."+a),n.length||(n=i.clone().addClass(a).removeClass("tmpl"),d(".progress:last").after(n))}var r=parseInt(t.loaded/t.total*100,10);n.find(".bar").css("width",r+"%"),n.find(".percentage").text(r+"%"),100===r&&(n.addClass("finished"),n.find(".percentage").text(u.default.t("library.adhoc_fileuploader.Processing")))},c.decorator.fail=function(){this.raise(u.default.t("library.adhoc_fileuploader.There_was_an_error_with_this_file_Please_try_a_different"))},d.fn.adhoc_fileuploader=function(e){d(this).each(function(){var t=new c(d(this),e);d(this).fileupload(t.options)})}},function(e,t,n){"use strict";n(47);var i=(n(0),n(0));!function(e){function t(t,n){this.$field=t,this.$calendar=void 0,this.options=e.extend({calendar:{},position:"right"},n),this._in_manual_edit=!1,this._blurs_to_ignore=-1,this._attach()}e.fn.datetime_picker_field=function(n){return this.each(function(){new t(e(this),n)})},e.extend(t.prototype,{_attach:function(){var e=this;this.$field.focus(function(){e._in_time_field=!1,e._ensure_calendar()}),this.$field.blur(function(){e._hide_calendar_or_refocus(),e._blurs_to_ignore-=1}),e.$field.bind("keypress cut paste input",function(){e._handle_edit()})},_ensure_calendar:function(){if(this.$calendar)return this.$calendar;var t=this,n=e("<div></div>"),i=e.extend({selected_date:this.get_selected_datetime()},this.options.calendar);return this.options.class_name?n.addClass(this.options.class_name):(n.css("position","absolute"),n.css("z-index",1e3)),"bottom"===this.options.position?(n.css("left",this.$field.offset().left),n.css("top",this.$field.offset().top+this.$field.outerHeight()+20)):(n.css("left",this.$field.offset().left+this.$field.width()+20),n.css("top",this.$field.offset().top)),n.hide(),this._get_surrounding_element().append(n),n.calendar_date_picker(i),n.mousedown(function(){t._in_time_field=!1,t._blurs_to_ignore+=1}),n.find("label").mousedown(function(e){t._in_time_field=!0,t._blurs_to_ignore+=1,e.stopPropagation()}),n.find("input").blur(function(){t._hide_calendar_or_refocus(),t._blurs_to_ignore-=1}),t._blurs_to_ignore=0,n.bind("calendar_date_picker:date_selected",function(e,n){if(!t._in_manual_edit){var i=t.options.format_callback(n);i!==t.$field.val()&&(t.$field.val(i),t.$field.trigger("input"),t.options.calendar.time_text||(t._hide_calendar(),t._focus_next()))}}),n.find(".time input").bind("keydown",function(n){13===n.keyCode&&(e(this).blur(),t._hide_calendar())}),this.$calendar=n,n.fadeIn(),this.options.open_calendar_callback&&this.options.open_calendar_callback(),this.$calendar},_hide_calendar:function(){this.$calendar&&(this.$calendar.fadeOut(function(){e(this).remove()}),this.$calendar=void 0,this.options.close_calendar_callback&&this.options.close_calendar_callback())},_focus_next:function(){var e=this.$field.parents("form:eq(0)").find(":input"),t=e.index(this.$field);t>-1&&t+1<e.length&&e.eq(t+1).focus()},_reformat_value:function(){this.$field.val(this.options.format_callback(this.get_selected_datetime()))},_hide_calendar_or_refocus:function(){var e=this;this._blurs_to_ignore<=0?(this._hide_calendar(),this._reformat_value()):window.setTimeout(function(){e._in_time_field?e.$calendar&&e.$calendar.length&&e.$calendar.find("input").focus():e.$field.focus()})},_handle_edit:function(){this._in_manual_edit=!0,this.$calendar&&this.$calendar.trigger("calendar_date_picker:select_date",this.get_selected_datetime()),this._in_manual_edit=!1},get_selected_datetime:function(){var e=this.$field.val();return this.options.parse_callback(e)},_get_surrounding_element:function(){return e(this.options.surrounding_element?this.options.surrounding_element:"body")}})}(i)},function(e,t,n){"use strict";var i=n(109),a=function(e){return e&&e.__esModule?e:{default:e}}(i),r=n(0);n(0);!function(e){function t(e,t){return a.default.pageX(e)-t.offset().left}e.fn.draggable_bar=function(n,i){return i||(i=n,n=null),this.each(function(){var a=e(this),r=null,o=0;a.on("mousedown touchstart",n,function(n){var i=e(n.target);r=n.target,o=t(n,i)}),a.on("mousedown touchstart mousemove touchmove",n,function(e){var n;r&&(n=t(e,a)/a.width())>0&&n<1&&i(n,r,o)}),e(document).on("mouseup touchend",function(){r=null})})}}(r)},function(e,t,n){var i=n(0);n(0);!function(e){function t(t,i,a){var r=(new Date).getTime();return t.find("label,input,textarea,select").each(function(t,o){n(e(o),r,i,a)}),t.removeClass("template").show()}function n(t,n,a,r){var o=a.pattern||i,s=new RegExp("_"+o+"_"),l=new RegExp("\\["+o+"\\]");t.attr("id")&&t.attr("id",t.attr("id").replace(s,"_"+n+"_")),t.attr("for")&&t.attr("for",t.attr("for").replace(s,"_"+n+"_")),t.attr("name")&&(a.copy_values&&t.val(e('[name="'+t.attr("name")+'"]').val()),t.attr("name",t.attr("name").replace(l,"["+n+"]"))),"function"==typeof r&&r.apply(t,t)}var i="-1";e.fn.clone_form_template=function(n,i){return n||(n={}),e(this).map(function(){return t(e(this).clone(),n,i)[0]})}}(i)},,function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);n(52),(0,a.default)(function(){(0,a.default)(document).ksrSelect()})},function(e,t,n){var i=(n(0),n(0),function(){function e(){if(!W&&document.getElementsByTagName("body")[0]){try{var e,t=_("span");t.style.display="none",e=R.getElementsByTagName("body")[0].appendChild(t),e.parentNode.removeChild(e),e=null,t=null}catch(e){return}W=!0;for(var n=$.length,i=0;i<n;i++)$[i]()}}function t(e){W?e():$[$.length]=e}function n(e){if(typeof O.addEventListener!=D)O.addEventListener("load",e,!1);else if(typeof R.addEventListener!=D)R.addEventListener("load",e,!1);else if(typeof O.attachEvent!=D)b(O,"onload",e);else if("function"==typeof O.onload){var t=O.onload;O.onload=function(){t(),e()}}else O.onload=e}function a(){var e=R.getElementsByTagName("body")[0],t=_(I);t.setAttribute("style","visibility: hidden;"),t.setAttribute("type",M);var n=e.appendChild(t);if(n){var i=0;!function a(){if(typeof n.GetVariable!=D)try{var o=n.GetVariable("$version");o&&(o=o.split(" ")[1].split(","),Y.pv=[y(o[0]),y(o[1]),y(o[2])])}catch(e){Y.pv=[8,0,0]}else if(i<10)return i++,void setTimeout(a,10);e.removeChild(t),n=null,r()}()}else r()}function r(){var e=B.length;if(e>0)for(var t=0;t<e;t++){var n=B[t].id,i=B[t].callbackFn,a={success:!1,id:n};if(Y.pv[0]>0){var r=v(n);if(r)if(!w(B[t].swfVersion)||Y.wk&&Y.wk<312)if(B[t].expressInstall&&s()){var d={};d.data=B[t].expressInstall,d.width=r.getAttribute("width")||"0",d.height=r.getAttribute("height")||"0",r.getAttribute("class")&&(d.styleclass=r.getAttribute("class")),r.getAttribute("align")&&(d.align=r.getAttribute("align"));for(var c={},f=r.getElementsByTagName("param"),h=f.length,p=0;p<h;p++)"movie"!=f[p].getAttribute("name").toLowerCase()&&(c[f[p].getAttribute("name")]=f[p].getAttribute("value"));l(d,c,n,i)}else u(r),i&&i(a);else j(n,!0),i&&(a.success=!0,a.ref=o(n),a.id=n,i(a))}else if(j(n,!0),i){var m=o(n);m&&typeof m.SetVariable!=D&&(a.success=!0,a.ref=m,a.id=m.id),i(a)}}}function o(e){var t=null,n=v(e);return n&&"OBJECT"===n.nodeName.toUpperCase()&&(t=typeof n.SetVariable!==D?n:n.getElementsByTagName(I)[0]||n),t}function s(){return!U&&w("6.0.65")&&(Y.win||Y.mac)&&!(Y.wk&&Y.wk<312)}function l(e,t,n,i){var a=v(n);if(n=g(n),U=!0,E=i||null,T={success:!1,id:n},a){"OBJECT"==a.nodeName.toUpperCase()?(C=d(a),S=null):(C=a,S=n),e.id=N,(typeof e.width==D||!/%$/.test(e.width)&&y(e.width)<310)&&(e.width="310"),(typeof e.height==D||!/%$/.test(e.height)&&y(e.height)<137)&&(e.height="137");var r=Y.ie?"ActiveX":"PlugIn",o="MMredirectURL="+encodeURIComponent(O.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+r+"&MMdoctitle="+encodeURIComponent(R.title.slice(0,47)+" - Flash Player Installation");if(typeof t.flashvars!=D?t.flashvars+="&"+o:t.flashvars=o,Y.ie&&4!=a.readyState){var s=_("div");n+="SWFObjectNew",s.setAttribute("id",n),a.parentNode.insertBefore(s,a),a.style.display="none",p(a)}f(e,t,n)}}function u(e){if(Y.ie&&4!=e.readyState){e.style.display="none";var t=_("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(d(e),t),p(e)}else e.parentNode.replaceChild(d(e),e)}function d(e){var t=_("div");if(Y.win&&Y.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(I)[0];if(n){var i=n.childNodes;if(i)for(var a=i.length,r=0;r<a;r++)1==i[r].nodeType&&"PARAM"==i[r].nodeName||8==i[r].nodeType||t.appendChild(i[r].cloneNode(!0))}}return t}function c(e,t){var n=_("div");return n.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+e+"'>"+t+"</object>",n.firstChild}function f(e,t,n){var i,a=v(n);if(n=g(n),Y.wk&&Y.wk<312)return i;if(a){var r,o,s,l=_(Y.ie?"div":I);typeof e.id==D&&(e.id=n);for(s in t)t.hasOwnProperty(s)&&"movie"!==s.toLowerCase()&&h(l,s,t[s]);Y.ie&&(l=c(e.data,l.innerHTML));for(r in e)e.hasOwnProperty(r)&&(o=r.toLowerCase(),"styleclass"===o?l.setAttribute("class",e[r]):"classid"!==o&&"data"!==o&&l.setAttribute(r,e[r]));Y.ie?H[H.length]=e.id:(l.setAttribute("type",M),l.setAttribute("data",e.data)),a.parentNode.replaceChild(l,a),i=l}return i}function h(e,t,n){var i=_("param");i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)}function p(e){var t=v(e);t&&"OBJECT"==t.nodeName.toUpperCase()&&(Y.ie?(t.style.display="none",function e(){if(4==t.readyState){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}else setTimeout(e,10)}()):t.parentNode.removeChild(t))}function m(e){return e&&e.nodeType&&1===e.nodeType}function g(e){return m(e)?e.id:e}function v(e){if(m(e))return e;var t=null;try{t=R.getElementById(e)}catch(e){}return t}function _(e){return R.createElement(e)}function y(e){return parseInt(e,10)}function b(e,t,n){e.attachEvent(t,n),z[z.length]=[e,t,n]}function w(e){e+="";var t=Y.pv,n=e.split(".");return n[0]=y(n[0]),n[1]=y(n[1])||0,n[2]=y(n[2])||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]}function k(e,t,n,i){var a=R.getElementsByTagName("head")[0];if(a){var r="string"==typeof n?n:"screen";if(i&&(A=null,P=null),!A||P!=r){var o=_("style");o.setAttribute("type","text/css"),o.setAttribute("media",r),A=a.appendChild(o),Y.ie&&typeof R.styleSheets!=D&&R.styleSheets.length>0&&(A=R.styleSheets[R.styleSheets.length-1]),P=r}A&&(typeof A.addRule!=D?A.addRule(e,t):typeof R.createTextNode!=D&&A.appendChild(R.createTextNode(e+" {"+t+"}")))}}function j(e,t){if(q){var n=t?"visible":"hidden",i=v(e);W&&i?i.style.visibility=n:"string"==typeof e&&k("#"+e,"visibility:"+n)}}function x(e){return null!=/[\\\"<>\.;]/.exec(e)&&typeof encodeURIComponent!=D?encodeURIComponent(e):e}var C,S,E,T,A,P,D="undefined",I="object",M="application/x-shockwave-flash",N="SWFObjectExprInst",O=window,R=document,L=navigator,F=!1,$=[],B=[],H=[],z=[],W=!1,U=!1,q=!0,V=!1,Y=function(){var e=typeof R.getElementById!=D&&typeof R.getElementsByTagName!=D&&typeof R.createElement!=D,t=L.userAgent.toLowerCase(),n=L.platform.toLowerCase(),i=n?/win/.test(n):/win/.test(t),a=n?/mac/.test(n):/mac/.test(t),r=!!/webkit/.test(t)&&parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),o="Microsoft Internet Explorer"===L.appName,s=[0,0,0],l=null;if(typeof L.plugins!=D&&typeof L.plugins["Shockwave Flash"]==I)(l=L.plugins["Shockwave Flash"].description)&&typeof L.mimeTypes!=D&&L.mimeTypes[M]&&L.mimeTypes[M].enabledPlugin&&(F=!0,o=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),s[0]=y(l.replace(/^(.*)\..*$/,"$1")),s[1]=y(l.replace(/^.*\.(.*)\s.*$/,"$1")),s[2]=/[a-zA-Z]/.test(l)?y(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(typeof O.ActiveXObject!=D)try{var u=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");u&&(l=u.GetVariable("$version"))&&(o=!0,l=l.split(" ")[1].split(","),s=[y(l[0]),y(l[1]),y(l[2])])}catch(e){}return{w3:e,pv:s,wk:r,ie:o,win:i,mac:a}}();!function(){Y.w3&&((typeof R.readyState!=D&&("complete"===R.readyState||"interactive"===R.readyState)||typeof R.readyState==D&&(R.getElementsByTagName("body")[0]||R.body))&&e(),W||(typeof R.addEventListener!=D&&R.addEventListener("DOMContentLoaded",e,!1),Y.ie&&(R.attachEvent("onreadystatechange",function t(){"complete"==R.readyState&&(R.detachEvent("onreadystatechange",t),e())}),O==top&&function t(){if(!W){try{R.documentElement.doScroll("left")}catch(e){return void setTimeout(t,0)}e()}}()),Y.wk&&function t(){if(!W)return/loaded|complete/.test(R.readyState)?void e():void setTimeout(t,0)}()))}();$[0]=function(){F?a():r()};!function(){Y.ie&&window.attachEvent("onunload",function(){for(var e=z.length,t=0;t<e;t++)z[t][0].detachEvent(z[t][1],z[t][2]);for(var n=H.length,a=0;a<n;a++)p(H[a]);for(var r in Y)Y[r]=null;Y=null;for(var o in i)i[o]=null;i=null})}();return{registerObject:function(e,t,n,i){if(Y.w3&&e&&t){var a={};a.id=e,a.swfVersion=t,a.expressInstall=n,a.callbackFn=i,B[B.length]=a,j(e,!1)}else i&&i({success:!1,id:e})},getObjectById:function(e){if(Y.w3)return o(e)},embedSWF:function(e,n,i,a,r,o,u,d,c,h){var p=g(n),m={success:!1,id:p};Y.w3&&!(Y.wk&&Y.wk<312)&&e&&n&&i&&a&&r?(j(p,!1),t(function(){i+="",a+="";var t={};if(c&&typeof c===I)for(var g in c)t[g]=c[g];t.data=e,t.width=i,t.height=a;var v={};if(d&&typeof d===I)for(var _ in d)v[_]=d[_];if(u&&typeof u===I)for(var y in u)if(u.hasOwnProperty(y)){var b=V?encodeURIComponent(y):y,k=V?encodeURIComponent(u[y]):u[y];typeof v.flashvars!=D?v.flashvars+="&"+b+"="+k:v.flashvars=b+"="+k}if(w(r)){var x=f(t,v,n);t.id==p&&j(p,!0),m.success=!0,m.ref=x,m.id=x.id}else{if(o&&s())return t.data=o,void l(t,v,n,h);j(p,!0)}h&&h(m)})):h&&h(m)},switchOffAutoHideShow:function(){q=!1},enableUriEncoding:function(e){V=typeof e===D||e},ua:Y,getFlashPlayerVersion:function(){return{major:Y.pv[0],minor:Y.pv[1],release:Y.pv[2]}},hasFlashPlayerVersion:w,createSWF:function(e,t,n){return Y.w3?f(e,t,n):void 0},showExpressInstall:function(e,t,n,i){Y.w3&&s()&&l(e,t,n,i)},removeSWF:function(e){Y.w3&&p(e)},createCSS:function(e,t,n,i){Y.w3&&k(e,t,n,i)},addDomLoadEvent:t,addLoadEvent:n,getQueryParamValue:function(e){var t=R.location.search||R.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return x(t);for(var n=t.split("&"),i=0;i<n.length;i++)if(n[i].substring(0,n[i].indexOf("="))==e)return x(n[i].substring(n[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(U){var e=v(N);e&&C&&(e.parentNode.replaceChild(C,e),S&&(j(S,!0),Y.ie&&(C.style.display="block")),E&&E(T)),U=!1}},version:"2.3"}}())},function(e,t,n){var i,a,r;!function(o){"use strict";a=[n(0)],i=o,void 0!==(r="function"==typeof i?i.apply(t,a):i)&&(e.exports=r)}(function(e){"use strict";function t(t){return!t.nodeName||e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])!==-1}function n(t){return e.isFunction(t)||e.isPlainObject(t)?t:{top:t,left:t}}var i=e.scrollTo=function(t,n,i){return e(window).scrollTo(t,n,i)};return i.defaults={axis:"xy",duration:0,limit:!0},e.fn.scrollTo=function(a,r,o){"object"==typeof r&&(o=r,r=0),"function"==typeof o&&(o={onAfter:o}),"max"===a&&(a=9e9),o=e.extend({},i.defaults,o),r=r||o.duration;var s=o.queue&&o.axis.length>1;return s&&(r/=2),o.offset=n(o.offset),o.over=n(o.over),this.each(function(){function l(t){var n=e.extend({},o,{queue:!0,duration:r,complete:t&&function(){t.call(c,h,o)}});f.animate(p,n)}if(null!==a){var u,d=t(this),c=d?this.contentWindow||window:this,f=e(c),h=a,p={};switch(typeof h){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(h)){h=n(h);break}h=d?e(h):e(h,c);case"object":if(0===h.length)return;(h.is||h.style)&&(u=(h=e(h)).offset())}var m=e.isFunction(o.offset)&&o.offset(c,h)||o.offset;e.each(o.axis.split(""),function(e,t){var n="x"===t?"Left":"Top",a=n.toLowerCase(),r="scroll"+n,g=f[r](),v=i.max(c,t);if(u)p[r]=u[a]+(d?0:g-f.offset()[a]),o.margin&&(p[r]-=parseInt(h.css("margin"+n),10)||0,p[r]-=parseInt(h.css("border"+n+"Width"),10)||0),p[r]+=m[a]||0,o.over[a]&&(p[r]+=h["x"===t?"width":"height"]()*o.over[a]);else{var _=h[a];p[r]=_.slice&&"%"===_.slice(-1)?parseFloat(_)/100*v:_}o.limit&&/^\d+$/.test(p[r])&&(p[r]=p[r]<=0?0:Math.min(p[r],v)),!e&&o.axis.length>1&&(g===p[r]?p={}:s&&(l(o.onAfterFirst),p={}))}),l(o.onAfter)}})},i.max=function(n,i){var a="x"===i?"Width":"Height",r="scroll"+a;if(!t(n))return n[r]-e(n)[a.toLowerCase()]();var o="client"+a,s=n.ownerDocument||n.document,l=s.documentElement,u=s.body;return Math.max(l[r],u[r])-Math.min(l[o],u[o])},e.Tween.propHooks.scrollLeft=e.Tween.propHooks.scrollTop={get:function(t){return e(t.elem)[t.prop]()},set:function(t){var n=this.get(t);if(t.options.interrupt&&t._last&&t._last!==n)return e(t.elem).stop();var i=Math.round(t.now);n!==i&&(e(t.elem)[t.prop](i),t._last=this.get(t))}},i})},function(e,t,n){function i(e,t){var n=a(e),i=a(t);return n.getTime()===i.getTime()}var a=n(69);e.exports=i},function(e,t,n){"use strict";var i=n(3),a=function(e){return e&&e.__esModule?e:{default:e}}(i),r=n(0),o=n(0);o.fn.validate=function(){var e=!0;return!this.length||(this.is(":input")?(this.each(function(){var t,n=o(this),i=!1,r=n.data("validations");r&&r.length&&(a.default.each(r,function(a){var r=a[0],o=a[1]||{};if("function"!=typeof o.when||o.when.call(n))return r.call(n,n.val())?void 0:(e=!1,i=!0,"string"==typeof o.error&&(t=o.error),!1)}),i?o.each(o.fn.validate.defaults.on_invalid,function(e,i){i(n,t)}):o.each(o.fn.validate.defaults.on_valid,function(e,t){t(n)}))}),e):this.find(":input").validate())},o.fn.validate.defaults={on_valid:[function(e){o(e).trigger("validate:valid")}],on_invalid:[function(e,t){o(e).trigger("validate:invalid",[t])}]},function(e){function t(t,n){var i=e(this);i.data("validations")||i.data("validations",[]),i.data("validations").push([t,n])}function n(e){return function(n){return this.each(function(){t.call(this,e,n)}),this}}e.fn.validates_custom=function(e,n){return this.each(function(){t.call(this,e,n)}),this},e.fn.validates_format=n(function(t){return t.match(new RegExp(e(this).data("format")))}),e.fn.validates_min_length=n(function(t){return t.length>=parseInt(e(this).data("minlength"),10)}),e.fn.validates_max_length=n(function(t){return t.length<=parseInt(e(this).data("maxlength"),10)}),e.fn.validates_presence=n(function(t){return!!e.trim(t)}),e.fn.validates_email=n(function(e){return e.match(/^.+@.+\..{2,}$/)}),e.fn.validates_luhn_check=n(function(e){var t,n,i,a=String(e).replace(/[^\d]/g,""),r=0;for(n=a.length-1;n>=0;n-=1)t=parseInt(a[n],10),i=n%2+1,r+=t>4&&2===i?t*i%10+1:t*i;return r%10==0}),e.fn.validates_routing_number=n(function(t){var n,i,a,r=String(t).replace(/[^\d]/g,""),o=e(this).closest("form").attr("data-country"),s=(r+"").split(""),l=0,u=[0,3,6];switch(o){case"US":for(i=0,a=u.length;i<a;i+=1)n=u[i],l+=3*parseInt(s[n],10),l+=7*parseInt(s[n+1],10),l+=parseInt(s[n+2],10);return 0!==l&&l%10==0;case"CA":return 8===r.length;case"AU":return 6===r.length;case"NZ":return 6===r.length;default:return!0}}),e.fn.validates_vat_format=n(function(e){var t=String(e).toUpperCase();switch(t.substr(0,2)){case"NL":return/^\w{2}\d{9}B\d{2}$/.test(t);default:return/^\w{2}[\w\d]{6}/.test(t)}}),e.fn.validates_postal_code=n(function(t){var n=e(this).closest("form").data("country"),i=!1,a={US:[/(^\d{5}$)|(^\d{5}-\d{4}$)/]};return void 0===a[n]||(e.each(a[n],function(e,n){n.test(t)&&(i=!0)}),i)}),e.fn.validates_business_id=n(function(t){var n=String(t).toUpperCase().replace(/\s+/g,""),i=e(this).closest("form").attr("data-country"),a=!1,r={AU:[/^\d{9}$/,/^\d{11}$/],BE:[/^(BE)?[A-Z0-9]{12}$/],CA:[/^\d{9,10}$/],CH:[/^(CHE-?)?[0-9]{3}\.?[0-9]{3}(\.?[0-9]{3})?(TVA|MWST|IVA|VAT)?$/],ES:[/^[ABCDEFGHJNPQRSUVW][0-9]{7}[A-Z0-9]$/],FI:[/^\d{7}\-\d$/],FR:[/^\d{14}$/],GB:[/^\d{7,8}$/,/^(AC|E[NS]|FC|G[ENS]|I[CP]|LP|N[ACFILOPRVZ]|OC|R[0C]|S[ACEFILOPRZ]|ZC)\d{5,6}[A-Z]?$/i],IE:[/^\d{5,6}$/,/^[A-Z]{2}\d{5,6}$/i,/^R\d{3}$/i,/^\d{2,4}(?:SAL|F|R|T|SA)$/],LU:[/^\d{4,8}$/,/^B\d{4,8}$/i,/^F\d{3,8}$/i],NL:[/^\d{8}$/],US:[/^\d{2}-?\d{7}$/]};return""===n||(void 0===r[i]||(e.each(r[i],function(e,t){t.test(n)&&(a=!0)}),a))})}(r)},function(e,t,n){"use strict";var i=n(81),a=n(24);e.exports=function(){function e(){a(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t};return n.checkPropTypes=i,n.PropTypes=n,n}},function(e,t,n){var i=n(0);n(0);!function(e){function t(t,n,i){this.url=t,this.finished=n||function(){},this.options=e.extend({delay:3e4,on_error:function(){},on_complete:function(){},continue_on_error:!1},i),this.xhr=!1,this.running=!1,this.go()}e.pollster=function(e,n,i){return new t(e,n,i)},window.Pollster=t,t.prototype.start=function(){var e=this;this.running=!0,this.timeout=setTimeout(function(){e.go()},this.options.delay)},t.prototype.stop=function(){this.running=!1,this.timeout&&clearTimeout(this.timeout)},t.prototype.go=function(){function t(){n?i.stop():i.start()}var n=!1,i=this;this.xhr||(this.xhr=e.ajax({url:this.url,dataType:"json",type:"get",global:!1,cache:!1,success:function(e){n=i.finished(e),t()},error:function(){i.options.continue_on_error&&t(),i.options.on_error()},complete:function(){i.xhr=!1,i.options.on_complete()}}))}}(i)},function(e,t,n){var i,a,r;!function(n,o){"object"==typeof t&&t&&"string"!=typeof t.nodeName?o(t):(a=[t],i=o,void 0!==(r="function"==typeof i?i.apply(t,a):i)&&(e.exports=r))}(0,function(e){function t(e){return"function"==typeof e}function n(e){return m(e)?"array":typeof e}function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function a(e,t){return null!=e&&"object"==typeof e&&t in e}function r(e,t){return g.call(e,t)}function o(e){return!r(v,e)}function s(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return _[e]})}function l(t,n){function a(e){if("string"==typeof e&&(e=e.split(b,2)),!m(e)||2!==e.length)throw new Error("Invalid tags: "+e);r=new RegExp(i(e[0])+"\\s*"),s=new RegExp("\\s*"+i(e[1])),l=new RegExp("\\s*"+i("}"+e[1]))}if(!t)return[];var r,s,l,f=[],h=[],p=[],g=!1,v=!1;a(n||e.tags);for(var _,x,C,S,E,T,A=new c(t);!A.eos();){if(_=A.pos,C=A.scanUntil(r))for(var P=0,D=C.length;P<D;++P)S=C.charAt(P),o(S)?p.push(h.length):v=!0,h.push(["text",S,_,_+1]),_+=1,"\n"===S&&function(){if(g&&!v)for(;p.length;)delete h[p.pop()];else p=[];g=!1,v=!1}();if(!A.scan(r))break;if(g=!0,x=A.scan(j)||"name",A.scan(y),"="===x?(C=A.scanUntil(w),A.scan(w),A.scanUntil(s)):"{"===x?(C=A.scanUntil(l),A.scan(k),A.scanUntil(s),x="&"):C=A.scanUntil(s),!A.scan(s))throw new Error("Unclosed tag at "+A.pos);if(E=[x,C,_,A.pos],h.push(E),"#"===x||"^"===x)f.push(E);else if("/"===x){if(!(T=f.pop()))throw new Error('Unopened section "'+C+'" at '+_);if(T[1]!==C)throw new Error('Unclosed section "'+T[1]+'" at '+_)}else"name"===x||"{"===x||"&"===x?v=!0:"="===x&&a(C)}if(T=f.pop())throw new Error('Unclosed section "'+T[1]+'" at '+A.pos);return d(u(h))}function u(e){for(var t,n,i=[],a=0,r=e.length;a<r;++a)(t=e[a])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(i.push(t),n=t));return i}function d(e){for(var t,n,i=[],a=i,r=[],o=0,s=e.length;o<s;++o)switch(t=e[o],t[0]){case"#":case"^":a.push(t),r.push(t),a=t[4]=[];break;case"/":n=r.pop(),n[5]=t[2],a=r.length>0?r[r.length-1][4]:i;break;default:a.push(t)}return i}function c(e){this.string=e,this.tail=e,this.pos=0}function f(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function h(){this.cache={}}var p=Object.prototype.toString,m=Array.isArray||function(e){return"[object Array]"===p.call(e)},g=RegExp.prototype.test,v=/\S/,_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},y=/\s*/,b=/\s+/,w=/\s*=/,k=/\s*\}/,j=/#|\^|\/|>|\{|&|=|!/;c.prototype.eos=function(){return""===this.tail},c.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},c.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},f.prototype.push=function(e){return new f(e,this)},f.prototype.lookup=function(e){var n,i=this.cache;if(i.hasOwnProperty(e))n=i[e];else{for(var r,o,s=this,l=!1;s;){if(e.indexOf(".")>0)for(n=s.view,r=e.split("."),o=0;null!=n&&o<r.length;)o===r.length-1&&(l=a(n,r[o])),n=n[r[o++]];else n=s.view[e],l=a(s.view,e);if(l)break;s=s.parent}i[e]=n}return t(n)&&(n=n.call(this.view)),n},h.prototype.clearCache=function(){this.cache={}},h.prototype.parse=function(e,t){var n=this.cache,i=n[e];return null==i&&(i=n[e]=l(e,t)),i},h.prototype.render=function(e,t,n){var i=this.parse(e),a=t instanceof f?t:new f(t);return this.renderTokens(i,a,n,e)},h.prototype.renderTokens=function(e,t,n,i){for(var a,r,o,s="",l=0,u=e.length;l<u;++l)o=void 0,a=e[l],r=a[0],"#"===r?o=this.renderSection(a,t,n,i):"^"===r?o=this.renderInverted(a,t,n,i):">"===r?o=this.renderPartial(a,t,n,i):"&"===r?o=this.unescapedValue(a,t):"name"===r?o=this.escapedValue(a,t):"text"===r&&(o=this.rawValue(a)),void 0!==o&&(s+=o);return s},h.prototype.renderSection=function(e,n,i,a){function r(e){return o.render(e,n,i)}var o=this,s="",l=n.lookup(e[1]);if(l){if(m(l))for(var u=0,d=l.length;u<d;++u)s+=this.renderTokens(e[4],n.push(l[u]),i,a);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)s+=this.renderTokens(e[4],n.push(l),i,a);else if(t(l)){if("string"!=typeof a)throw new Error("Cannot use higher-order sections without the original template");l=l.call(n.view,a.slice(e[3],e[5]),r),null!=l&&(s+=l)}else s+=this.renderTokens(e[4],n,i,a);return s}},h.prototype.renderInverted=function(e,t,n,i){var a=t.lookup(e[1]);if(!a||m(a)&&0===a.length)return this.renderTokens(e[4],t,n,i)},h.prototype.renderPartial=function(e,n,i){if(i){var a=t(i)?i(e[1]):i[e[1]];return null!=a?this.renderTokens(this.parse(a),n,i,a):void 0}},h.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},h.prototype.escapedValue=function(t,n){var i=n.lookup(t[1]);if(null!=i)return e.escape(i)},h.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.3.0",e.tags=["{{","}}"];var x=new h;return e.clearCache=function(){return x.clearCache()},e.parse=function(e,t){return x.parse(e,t)},e.render=function(e,t,i){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+n(e)+'" was given as the first argument for mustache#render(template, view, partials)');return x.render(e,t,i)},e.to_html=function(n,i,a,r){var o=e.render(n,i,a);if(!t(r))return o;r(o)},e.escape=s,e.Scanner=c,e.Context=f,e.Writer=h,e})},,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=i(a),o=n(7),s=i(o),l=n(1),u=i(l),d={get:function(e,t,n,i){return!n.hasClass("loading")&&(n.trigger("before_ksrjson",[n,i]),r.default.ajax({url:e,type:t||"GET",data:{format:"json"},dataType:"json",beforeSend:function(){n.addClass("loading")},success:function(e){d.parse_response(e,n)},complete:function(){n.removeClass("loading")}}),!1)},enable_form:function(e,t){e.on("submit",function(n){n.preventDefault(),e.trigger("ajaxForm:beforeSerialize"),r.default.ajax({url:e.attr("action"),type:e.attr("method"),data:e.serialize(),dataType:"json",beforeSend:function(){var n=e.find("input.confirmation");return e.is(".submitting")?((0,s.default)({error:u.default.t("library.ksr_json.Sorry_still_waiting_for_a_response_Please_try_refreshing_if")}),!1):!(n.length&&!n.prop("checked"))&&(t.addClass("loading"),void e.addClass("submitting"))},success:function(n){d.parse_response(n,t,e),t.trigger("ksr_json:afterSuccess")},error:function(n){d.parse_error(n,t,e),t.trigger("ksr_json:afterError")},complete:function(){t.removeClass("loading"),e.removeClass("submitting"),t.trigger("ksr_json:afterComplete")}})})},parse_response:function(e,t,n){var i,a,o,l={open:function(){(0,r.default)(n).trigger("jGrowl.open_"+e.status)},close:function(){(0,r.default)(n).trigger("jGrowl.close_"+e.status)}};switch(t.trigger("ksr_json:complete",e),r.default.isArray(e.flash)&&r.default.isArray(e.flash[0])?(0,s.default)(r.default.map(e.flash,function(e){return e[e.length-1]}),l):e.flash&&(0,s.default)(e.flash,l),parseInt(e.status,10)){case 200:case 406:i=(0,r.default)(e.data),e.data&&e.data.length>0&&(e.modal?(o=r.default.create_modal_dialog("",e.data),o.data("modal_dialog").open(),"undefined"!=typeof FB&&FB.XFBML.parse(o.find(".modal_dialog_body")[0])):(i.find("a.cancel").length>0?(a=t.contents().detach(),i.find("a.cancel").one("click",function(){return t.contents().remove(),a.appendTo(t),!1})):t.contents().remove(),t.html(i),t.trigger("size_change"),"undefined"!=typeof FB&&FB.XFBML.parse(t[0]))),(0,r.default)('meta[name="csrf-token"]').attr("content",e.auth_token);break;case 204:t.remove();break;case 302:window.location.href=e.data.replace(/.json$/,"");break;case 303:t.load(e.data,function(){(0,r.default)('meta[name="csrf-token"]').attr("content",e.auth_token)});break;case 304:break;case 500:(0,s.default)({error:u.default.t("library.ksr_json.Sorry_something_went_wrong_Weve_been_notified_and_are_looking")});break;case 422:(0,s.default)({error:u.default.t("library.ksr_json.Sorry_something_went_wrong_Your_form_may_have_explired")})}return e},parse_error:function(e,t,n){d.parse_response({flash:{},status:e.status,data:e.body},t,n)}};t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.default=function(e){return e.show_more_backings=e.total>e.backings.length,e.count=e.total,e.backings=e.backings.map(function(e){return(0,r.default)(i({},e.get()))}),e};var a=n(39),r=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,n){var i=n(0);n(0);!function(e){function t(t,n){this.$elem=t,this.options=e.extend({update_input:!0,no_results_html:"Sorry, we couldn't find anything.",ignore_history:!0,process_results:function(e){return e}},n);var i=this.$elem.closest(".field_with_icon"),a=e([]);a=i.length?i.siblings(".results"):this.$elem.siblings(".results"),a.length?(this.$results=a,this.$results.find("div.no_results").remove()):(this.$results=e('<div class="results"></div>'),i.length?i.after(this.$results):this.$elem.after(this.$results)),this.$results.find("ul.result_list").length||this.$results.append('<ul class="result_list"></ul>'),this.$no_results=e('<div class="no_results">'+this.options.no_results_html+"</div>"),this.$no_results.hide(),this.$results.append(this.$no_results),this.handle_optional_content(),this.livesearch=t.livesearch(this.options).data("livesearch"),this._attach()}var n={UP:38,DOWN:40,DEL:46,TAB:9,ENTER:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8};e.fn.livesearch_input_dropdown=function(n){return n=n||{},e(this).each(function(){var i=e(this).data("livesearch.input_dropdown");i||(i=new t(e(this),n),e(this).data("livesearch.input_dropdown",i))})},e.extend(t.prototype,{_attach:function(){var e=this;this.$elem.on("livesearch:results",function(t,n){e.options.process_results&&(n=e.options.process_results(n)),e.show_results(n),e.push_history(n)}),this.bind_results(),this.bind_popstate(),this.$elem.on("keydown.autocomplete",function(t){var i,a,r,o=!!e.$results.find(".selected").length;switch(t.keyCode){case n.UP:o?(i=e.$results.find(".selected").prev(":not(.not_result)"),i.length||(i=e.$results.find("li:not(.not_result)").last()),e.select(i,!1)):e.select(e.$results.find("li:not(.not_result)").last(),!1),t.preventDefault();break;case n.DOWN:o?(a=e.$results.find(".selected").next(":not(.not_result)"),a.length||(a=e.$results.find("li:not(.not_result)").first()),e.select(a,!1)):e.select(e.$results.find("li:not(.not_result)").first(),!1),t.preventDefault();break;case n.ENTER:r=e.$results.find(".selected"),e.input_can_submit()||t.preventDefault(),r.length&&(t.preventDefault(),e.select(r,!0))}})},history_api_supported:function(){return window.history&&window.history.pushState},bind_popstate:function(){if(this.history_api_supported()&&!this.options.ignore_history){var e=this;this.replacing_history_state=!1,window.onpopstate=function(t){t.state&&t.state.livesearch?(e.show_results(t.state.livesearch.results),e.livesearch.suspend_while(function(){e.$elem.val(t.state.livesearch.input_value).trigger("input")})):e.reset(!0)}}},input_can_submit:function(){var e=this.livesearch.search_xhr.readyState,t=e>0&&e<4;return this.options.input_can_submit_on_enter&&!t&&this.$elem.is(":focus")},bind_results:function(){var t=this;this.$results.find("li").on("click",function(n){t.select(e(this),!0),n.preventDefault()}),this.$results.find("li").on("mouseover",function(){t.select(e(this)),t.unselect_on_mouseout=!0}),this.$results.on("mouseout",function(){t.unselect_on_mouseout&&t.unselect_currently_selected()}),this.$elem.on("livesearch:reveal_results",function(){t.reveal_results()})},build_result_names_list:function(t){var n=[],i=this;return e.each(t,function(e,t){i.options.return_name_from_result?t=i.options.return_name_from_result(t):"string"!=typeof t&&(t=t[0]),n.push(t)}),n},show_results:function(t){var n,i,a,r=this.$results.children("ul"),o=e([]);t.results&&(a=t,t=t.results),this.unselect_currently_selected(),r.empty(),t.length?(this.$no_results.hide(),r.show()):(this.$no_results.show(),r.hide()),n=this.build_result_names_list(t),e.each(n,function(n,i){var a=e("<li>"+i+"</li>");a.data("livesearch_result",t[n]),r.append(a)}),a&&a.count>t.length&&(i="see all "+a.count+" results",o=e("<a>").attr({href:this.livesearch.url+"?"+this.livesearch.last_search,title:i,class:"see_all not_result"}).html(i).wrap("<li>"),r.append(o)),this.bind_results(),this.reveal_results()},push_history:function(e){if(this.history_api_supported()&&!this.options.ignore_history){"string"==typeof e&&(e=JSON.parse(e));var t={livesearch:{input_value:this.$elem.val(),results:e}};this.replacing_history_state?(history.replaceState(t),this.replacing_history_state=!1):history.pushState(t,"","?"+this.livesearch.last_search)}},reveal_results:function(){var t=this;this.$results.slideDown(function(){e(window).resize(),t.$results.trigger("sticky_bar:fix_to_bottom"),t.$results.trigger("shifted"),t.$results.trigger("livesearch:revealed_results")})},reset:function(e){this.$results.hide(),this.$elem.val(""),e&&this.$results.children("ul.result_list").html("")},unselect_currently_selected:function(){var e=this.$results.children("ul"),t=e.children("li.selected");t.trigger("livesearch:unselect"),t.removeClass("selected"),this.unselect_on_mouseout=!1},select:function(e,t){var n=this;e.is(".not_result")||(this.unselect_currently_selected(),e.addClass("selected"),this.options.update_input&&this.livesearch.suspend_while(function(){n.$elem.val(e.text()),n.$elem.focus()}),e.trigger("livesearch:soft_select"),t&&e.trigger("livesearch:selected",[e.data("livesearch_result")]))},handle_optional_content:function(){this.options.prepend&&this.$results.prepend(this.options.prepend)}})}(i)},function(e,t,n){var i=n(0);n(0);!function(e){function t(t,n){this.$elem=t,this.$form=t.closest("form"),this.options=e.extend({delay:400,minimum_characters:3,serialize:this.$form,client_side_cache:!0,process_data:!1,dataType:"json"},n),this.url=this.options.url||this.$form.attr("action"),this.options.file_extension?this.ajax_url=this.ensure_file_extension(this.options.file_extension):this.ajax_url=this.url,this.last_search=!1,this.search_xhr=!1,this.options.client_side_cache?this.cache={}:this.cache=!1,this.active=!0,this._attach()}var n;e.fn.livesearch=function(n){return n=n||{},e(this).each(function(){var i=e(this).data("livesearch");i||(i=new t(e(this),n),e(this).data("livesearch",i))})},e.extend(t.prototype,{_attach:function(){var e=this;this.$elem.attr("autocomplete","off"),this.$elem.on("keypress cut paste input",function(){e.active&&(clearTimeout(n),n=setTimeout(function(){e.search()},e.options.delay))}),this.options.process_data||this.options.serialize.on("change",function(){e.search()}),this.$elem.on("livesearch:suspend",function(){e.active=!1}),this.$elem.on("livesearch:activate",function(){e.active=!0}),this.$elem.on("livesearch:cancel",function(){e.search_xhr&&e.search_xhr.abort(),e.last_search=!1})},ensure_file_extension:function(e){var t=window.location.host.replace(/[^\w\d]/g,function(e){return"\\"+e}),n=new RegExp("((?:"+t+")?[^\\.$#\\?]+)(\\.\\w*|)($|#|\\?)");return this.url.replace(n,function(t,n,i,a){return n+"."+e+a})},suspend_while:function(e){this.active=!1,e();var t=this;setTimeout(function(){t.active=!0},100)},search:function(){var t=this,n=this.options.serialize.serialize();this.options.process_data&&"object"==typeof(n=this.options.process_data.apply(this,[n]))&&(n=e.param(n)),n!==this.last_search&&(this.$elem.val().length<this.options.minimum_characters||(this.search_xhr&&this.search_xhr.abort(),this.cache&&this.cache[n]&&"function"!=typeof this.cache[n]?this.$elem.trigger("livesearch:results",[this.cache[n]]):(this.$elem.trigger("livesearch:searching"),this.$elem.addClass("searching"),this.search_xhr=e.ajax({type:"get",url:this.ajax_url,dataType:this.options.dataType,data:n,global:!1,success:function(e){null!==e&&(t.$elem.trigger("livesearch:results",[e]),t.$elem.removeClass("searching"),t.cache&&(t.cache[n]=e))},error:function(){t.$elem.trigger("livesearch:ajax_error"),t.$elem.removeClass("searching")},statusCode:{304:function(){}}})),this.last_search=n))}})}(i)},function(e,t,n){var i=n(0);n(0);!function(e){e.fn.livesearch_multi_selector=function(t){return t=e.extend({url:!1,cancel_copy:"Remove",sortable:!1,update_input:!1},t),e(this).each(function(){function n(n){var i=e('<a class="ss-icon ss-delete cancel-link" href="#">'+t.cancel_copy+"</a>");n.append(i)}function i(){o.val(""),r.siblings(".results").slideUp(),o.trigger("livesearch:cancel")}var a=e(this),r=a.find(".field_with_icon"),o=r.find("input.text"),s=a.find("ol.search-selected,ul.search-selected"),l=o.siblings(".ss-search"),u=a.find(".template"),d=t;d.url=t.url||a.closest("form").attr("action"),o.livesearch_input_dropdown(d),t.sortable&&s.sortable({containment:"document",axis:"y",update:function(){s.find("input.position").each(function(t){e(this).val(t)})}}),a.addClass("search"),s.find("li").each(function(){n(e(this))}),a.on("click","a.cancel-link",function(t){var n=e(this).closest("li"),i=n.find(".destroy");t.preventDefault(),n.fadeOut(function(){i.length?i.val("1"):n.remove()})}),o.on("livesearch:searching",function(){l.removeClass("ss-search").addClass("icon-loading-small")}),o.on("livesearch:results livesearch:ajax_error",function(){l.removeClass("icon-loading-small").addClass("ss-search")}),a.on("livesearch:selected",function(n,a){if(a){var r=u.clone_form_template();r.find("input.destroy").val(!1),r.find(".name").html(a[0]),r.find(".value").val(a[1]),s.append(r),t.sortable&&s.find("input.position").each(function(t){e(this).val(t)}),i()}})})}}(i)},function(e,t,n){var i=n(0);n(0);!function(e){e.fn.livesearch_navigator=function(t){return t=t||{},e(this).each(function(){var n=e(this);n.livesearch_pretty_input_dropdown(t),n.on("livesearch:selected",function(e,t){t&&(window.location=t[1])})})}}(i)},function(e,t,n){var i=n(0);n(0);!function(e){e.fn.livesearch_pretty_input_dropdown=function(t){return t=t||{},e(this).each(function(){function n(){this.value?s.show():s.hide()}function i(){o.val(""),o.trigger("livesearch:cancel").trigger("livesearch:close_results")}var a,r=e(this),o=r.find("input[type=text]"),s=r.find(".ss-delete"),l=o.siblings(".ss-search");o.livesearch_input_dropdown(e.extend(t,{update_input:!1})),a=o.data("livesearch.input_dropdown"),n.call(o[0]),o.on("keypress cut paste input livesearch:close_results blur",n),o.on("livesearch:searching",function(){l.removeClass("ss-search").addClass("icon-loading-small")}),o.on("livesearch:results livesearch:ajax_error",function(){l.removeClass("icon-loading-small").addClass("ss-search")}),o.on("livesearch:results",function(){if(!t.input_can_submit_on_enter){var e=o.siblings(".results");a.select(e.find("li:first"))}}),s.on("click",function(){o.focus(),i()}),o.on("livesearch:close_results",function(){o.siblings(".results").slideUp(function(){e(window).resize(),e(this).trigger("sticky_bar:fix_to_bottom")})}),o.on("blur",function(){o.val().length<3&&i()})})}}(i)},function(e,t,n){var i=n(0);n(0);!function(e){e.fn.livesearch_selector=function(t){return t=e.extend({url:!1,cancel_copy:"Cancel",target_input:!1},t),e(this).each(function(){function n(){r.hide(),r.attr("disabled","disabled"),r.siblings(".ss-delete, .ss-search").hide();var n=e('<div class="field-selected"><span class="value">'+r.val()+'</span><a class="ss-icon ss-delete cancel-link" href="#">'+t.cancel_copy+"</a></div>");r.siblings("div.field-selected").remove(),r.after(n),r.siblings(".results").slideUp(),r.trigger("livesearch_selector:select",[r.val()]),n.find("a.cancel-link").click(function(e){e.preventDefault(),r.val(""),n.remove(),r.removeAttr("disabled"),r.siblings(".ss-delete, .ss-search").show(),r.show(),r.focus(),o.val(""),r.trigger("dirty"),r.trigger("livesearch_selector:unselect")})}var i,a=e(this),r=a.find('input[type="text"]'),o=t.target_input||a.find('input[type="hidden"]'),s=r.siblings(".ss-search");a.addClass("search"),o.val()&&r.val()&&n(),t.url=t.url||a.closest("form").attr("action"),a.livesearch_pretty_input_dropdown(t),i=r.data("livesearch.input_dropdown"),r.on("livesearch:searching",function(){s.removeClass("ss-search").addClass("icon-loading-small")}),r.on("livesearch:results livesearch:ajax_error",function(){s.removeClass("icon-loading-small").addClass("ss-search")}),r.on("livesearch:results",function(){var e=r.siblings(".results");i.select(e.find("li:first"))}),a.on("livesearch:selected",function(e,t){t&&(r.val(t[0]),o.val(t[1]),n())})})}}(i)},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);n(147),n(1),n(2),n(238),n(203),n(224),n(142),n(190),n(110),n(118),n(153),n(143),n(7),n(59),n(154),n(5),n(185),n(155),n(119),n(120),n(156),n(151),n(132),n(133),n(134),n(135),window.$=a.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(3),r=i(a),o=n(7),s=i(o),l=n(1),u=i(l),d=n(5),c=n(11),f=i(c);n(51);var h=n(14),p=i(h),m=(n(0),n(0));m.fn.ksr_uploader=function(e){function t(t,n,i){return m.pollster(t,function(t){return!!t.image_src&&(n.find(".success img.preview").attr("src",t.image_src).removeAttr("data-status_url"),n.removeClass("encoding"),i.trigger("ksr_uploader:uploaded",[t]),e.after_encode&&e.after_encode(),!0)},{delay:5e3})}return e=e||{},m(this).each(function(){function n(e){S=e,h.data("uploading",e)}function i(e){var i=e,a=k.find(".success");if("string"==typeof i)try{i=m.parseJSON(i)||{}}catch(e){i={}}n(!1),i.image_src&&a.find("img.preview").attr("src",i.image_src),i.id&&a.find("input.asset_id").val(i.id),j.attr("data-status_url",i.status_url),h.trigger("file_added",[i]),x.val(function(e){return C[e]}),w.removeClass("uploading"),w.addClass("has_file"),i.status_url?l=t(i.status_url,w,h):h.trigger("ksr_uploader:uploaded",[i])}function a(t){if("function"==typeof e.remote_upload_success)return void e.remote_upload_success.apply(h,arguments);var a=t.files[0];m.ajax({url:h.data("assetPath"),data:{file_name:encodeURIComponent(a.name),content_type:a.type,updated_at:(a.lastModifiedDate||new Date).getTime(),file_size:a.size,s3_key:r.default.findWhere(_,{name:"key"}).value},type:"POST",success:function(e){i(e)},error:function(){k.trigger("ksr_file_upload:reset"),n(!1),(0,s.default)({error:u.default.t("library.ksr_uploader.Could_not_upload_this_file")}),w.removeClass("uploading"),void 0!==p.default&&0===p.default.get("launched_at")&&o("Errored Project Asset Upload",t,a)}})}function o(e,t,n){var i=m.map(t.messages,function(e){return e}),a=k.find(".js-asset-upload").attr("class");void 0===a&&(a=k.closest(".js-asset-upload").attr("class")),m.each(i,function(t,i){(0,d.track)(e,{project_pid:p.default.data.id,type:n.type,file_size:n.size,context:a,error_description:i})})}var l,c,h=m(this),g=new RegExp(window.location.host+"|^/"),v=!h.attr("url").match(g),_=v?r.default.map(h.data("params"),function(e,t){return{name:t,value:e}}):[{name:"new_style",value:!0}],y=h.siblings(".progress"),b=h.parent(),w=b.parent(),k=h.closest("form"),j=w.find(".success img.preview"),x=k.find("input[type=submit]"),C=x.map(function(){return m(this).val()}).get(),S=!1;h.siblings("label").hide(),h.fileupload({dataType:"text",dropZone:b,pasteZone:null,url:h.attr("url"),type:"POST",replaceFileInput:!1,add:function(e,t){if(t.files[0].size<1)return void(t.files=[]);l&&l.stop(),c=t.submit(),n(!0),y.removeClass("finished"),w.addClass("uploading"),h.trigger("file_queued"),window.onbeforeunload=function(){if(S)return u.default.t("library.ksr_uploader.Your_upload_has_not_completed_yet_Click_Stay")}},submit:function(e,t){v?_.push({name:"success_action_redirect",value:m.support.xhrFormDataFileUpload?"":(0,f.default)().path("/iframe_upload_catcher.html").fragment("").toString()}):_.push({name:"authenticity_token",value:m('meta[name="csrf-token"]').attr("content")}),t.formData=_},done:function(e,t){v?a(t):i(t.result)},progress:function(e,t){var n=parseInt(t.loaded/t.total*100,10);y.find(".bar").css("width",n+"%"),y.find(".percentage").text(n+"%"),100===n&&(y.addClass("finished"),y.find(".percentage").text(u.default.t("library.ksr_uploader.Processing")),x.val(u.default.t("library.ksr_uploader.Processing_please_wait")))},fail:function(e,t){h.trigger("error"),k.trigger("ksr_file_upload:reset"),n(!1),(0,s.default)({error:u.default.t("library.ksr_uploader.There_was_an_error_with_this_file_Please_try_a_different")}),x.val(function(e){return C[e]}),w.removeClass("uploading"),void 0!==p.default&&0===p.default.get("launched_at")&&o("Failed Project Asset Upload",t,t.files[0])}}),j.data("status_url")&&(l=t(j.data("status_url"),w,h),j.removeAttr("status_url")),b.on("pollster:stop",function(){l&&l.stop()}),b.on("ksr_file_upload:cancel cancel",function(){c&&c.abort(),k.trigger("ksr_file_upload:reset"),h.trigger("error"),n(!1)}),b.on("destroy",function(){b.trigger("ksr_file_upload:cancel")}),b.on("resize",function(){b.find("object").attr("width",b.outerWidth()).attr("height",b.outerHeight())})})}},,,,function(e,t,n){n(0),n(0);!function(e,t){"use strict";if("undefined"==typeof DISABLE_HISTORY_JS||!DISABLE_HISTORY_JS){var n=e.History=e.History||{},i=e.jQuery;if(void 0!==n.Adapter)throw new Error("History.js Adapter has already been loaded...");n.Adapter={bind:function(e,t,n){i(e).bind(t,n)},trigger:function(e,t,n){i(e).trigger(t,n)},extractEventData:function(e,t,n){return t&&t.originalEvent&&t.originalEvent[e]||n&&n[e]||void 0},onDomLoad:function(e){i(e)}},void 0!==n.init&&n.init()}}(window)},function(e,t,n){n(0),n(0);!function(e,t){"use strict";if("undefined"==typeof DISABLE_HISTORY_JS||!DISABLE_HISTORY_JS){var n=e.document,i=e.setTimeout||i,a=e.clearTimeout||a,r=e.setInterval||r,o=e.History=e.History||{};if(void 0!==o.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");o.initHtml4=function(){if(void 0!==o.initHtml4.initialized)return!1;o.initHtml4.initialized=!0,o.enabled=!0,o.savedHashes=[],o.isLastHash=function(e){var t=o.getHashByIndex();return e===t},o.isHashEqual=function(e,t){return e=encodeURIComponent(e).replace(/%25/g,"%"),t=encodeURIComponent(t).replace(/%25/g,"%"),e===t},o.saveHash=function(e){return!o.isLastHash(e)&&(o.savedHashes.push(e),!0)},o.getHashByIndex=function(e){return void 0===e?o.savedHashes[o.savedHashes.length-1]:e<0?o.savedHashes[o.savedHashes.length+e]:o.savedHashes[e]},o.discardedHashes={},o.discardedStates={},o.discardState=function(e,t,n){var i,a=o.getHashByState(e);return i={discardedState:e,backState:n,forwardState:t},o.discardedStates[a]=i,!0},o.discardHash=function(e,t,n){var i={discardedHash:e,backState:n,forwardState:t};return o.discardedHashes[e]=i,!0},o.discardedState=function(e){var t=o.getHashByState(e);return o.discardedStates[t]||!1},o.discardedHash=function(e){return o.discardedHashes[e]||!1},o.recycleState=function(e){var t=o.getHashByState(e);return o.discardedState(e)&&delete o.discardedStates[t],!0},o.emulated.hashChange&&(o.hashChangeInit=function(){o.checkerFunction=null;var t,i,a,s,l="",u=Boolean(o.getHash());return o.isInternetExplorer()?(t="historyjs-iframe",i=n.createElement("iframe"),i.setAttribute("id",t),i.setAttribute("src","#"),i.style.display="none",n.body.appendChild(i),i.contentWindow.document.open(),i.contentWindow.document.close(),a="",s=!1,o.checkerFunction=function(){if(s)return!1;s=!0;var t=o.getHash(),n=o.getHash(i.contentWindow.document);return t!==l?(l=t,n!==t&&(a=n=t,i.contentWindow.document.open(),i.contentWindow.document.close(),i.contentWindow.document.location.hash=o.escapeHash(t)),o.Adapter.trigger(e,"hashchange")):n!==a&&(a=n,u&&""===n?o.back():o.setHash(n,!1)),s=!1,!0}):o.checkerFunction=function(){var t=o.getHash()||"";return t!==l&&(l=t,o.Adapter.trigger(e,"hashchange")),!0},o.intervalList.push(r(o.checkerFunction,o.options.hashChangeInterval)),!0},o.Adapter.onDomLoad(o.hashChangeInit)),o.emulated.pushState&&(o.onHashChange=function(t){var n,i=t&&t.newURL||o.getLocationHref(),a=o.getHashByUrl(i),r=null;return o.isLastHash(a)?(o.busy(!1),!1):(o.doubleCheckComplete(),o.saveHash(a),a&&o.isTraditionalAnchor(a)?(o.Adapter.trigger(e,"anchorchange"),o.busy(!1),!1):(r=o.extractState(o.getFullUrl(a||o.getLocationHref()),!0),o.isLastSavedState(r)?(o.busy(!1),!1):(o.getHashByState(r),(n=o.discardedState(r))?(o.getHashByIndex(-2)===o.getHashByState(n.forwardState)?o.back(!1):o.forward(!1),!1):(o.pushState(r.data,r.title,encodeURI(r.url),!1),!0))))},o.Adapter.bind(e,"hashchange",o.onHashChange),o.pushState=function(t,n,i,a){if(i=encodeURI(i).replace(/%25/g,"%"),o.getHashByUrl(i))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(a!==!1&&o.busy())return o.pushQueue({scope:o,callback:o.pushState,args:arguments,queue:a}),!1;o.busy(!0);var r=o.createStateObject(t,n,i),s=o.getHashByState(r),l=o.getState(!1),u=o.getHashByState(l),d=o.getHash(),c=o.expectedStateId==r.id;return o.storeState(r),o.expectedStateId=r.id,o.recycleState(r),o.setTitle(r),s===u?(o.busy(!1),!1):(o.saveState(r),c||o.Adapter.trigger(e,"statechange"),o.isHashEqual(s,d)||o.isHashEqual(s,o.getShortUrl(o.getLocationHref()))||o.setHash(s,!1),o.busy(!1),!0)},o.replaceState=function(t,n,i,a){if(i=encodeURI(i).replace(/%25/g,"%"),o.getHashByUrl(i))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(a!==!1&&o.busy())return o.pushQueue({scope:o,callback:o.replaceState,args:arguments,queue:a}),!1;o.busy(!0);var r=o.createStateObject(t,n,i),s=o.getHashByState(r),l=o.getState(!1),u=o.getHashByState(l),d=o.getStateByIndex(-2);return o.discardState(l,r,d),s===u?(o.storeState(r),o.expectedStateId=r.id,o.recycleState(r),o.setTitle(r),o.saveState(r),o.Adapter.trigger(e,"statechange"),o.busy(!1)):o.pushState(r.data,r.title,r.url,!1),!0}),o.emulated.pushState&&o.getHash()&&!o.emulated.hashChange&&o.Adapter.onDomLoad(function(){o.Adapter.trigger(e,"hashchange")})},void 0!==o.init&&o.init()}}(window)},function(e,t,n){n(0),n(0);!function(e,t){"use strict";if("undefined"==typeof DISABLE_HISTORY_JS||!DISABLE_HISTORY_JS){var n,i=e.console||void 0,a=e.document,r=e.navigator,o=e.setTimeout,s=e.clearTimeout,l=e.setInterval,u=e.clearInterval,d=e.JSON,c=e.alert,f=e.History=e.History||{},h=e.history;try{n=e.sessionStorage||!1,sessionStorage.setItem("TEST","1"),sessionStorage.removeItem("TEST")}catch(e){n=!1}if(d.stringify=d.stringify||d.encode,d.parse=d.parse||d.decode,void 0!==f.init)throw new Error("History.js Core has already been loaded...");f.init=function(e){return void 0!==f.Adapter&&(void 0!==f.initCore&&f.initCore(),void 0!==f.initHtml4&&f.initHtml4(),!0)},f.initCore=function(t){if(void 0!==f.initCore.initialized)return!1;if(f.initCore.initialized=!0,f.options=f.options||{},f.options.hashChangeInterval=f.options.hashChangeInterval||100,f.options.safariPollInterval=f.options.safariPollInterval||500,f.options.doubleCheckInterval=f.options.doubleCheckInterval||500,f.options.disableSuid=f.options.disableSuid||!1,f.options.storeInterval=f.options.storeInterval||1e3,f.options.busyDelay=f.options.busyDelay||250,f.options.debug=f.options.debug||!1,f.options.initialTitle=f.options.initialTitle||a.title,f.options.html4Mode=f.options.html4Mode||!1,f.options.delayInit=f.options.delayInit||!1,f.intervalList=[],f.clearAllIntervals=function(){var e,t=f.intervalList;if(void 0!==t&&null!==t){for(e=0;e<t.length;e++)u(t[e]);f.intervalList=null}},f.debug=function(){f.options.debug&&f.log.apply(f,arguments)},f.log=function(){var e,t,n,r,o,s=!(void 0===i||void 0===i.log||void 0===i.log.apply),l=a.getElementById("log");for(s?(r=Array.prototype.slice.call(arguments),e=r.shift(),void 0!==i.debug?i.debug.apply(i,[e,r]):i.log.apply(i,[e,r])):e="\n"+arguments[0]+"\n",t=1,n=arguments.length;t<n;++t){if("object"==typeof(o=arguments[t])&&void 0!==d)try{o=d.stringify(o)}catch(e){}e+="\n"+o+"\n"}return l?(l.value+=e+"\n-----\n",l.scrollTop=l.scrollHeight-l.clientHeight):s||c(e),!0},f.getInternetExplorerMajorVersion=function(){return f.getInternetExplorerMajorVersion.cached=void 0!==f.getInternetExplorerMajorVersion.cached?f.getInternetExplorerMajorVersion.cached:function(){for(var e=3,t=a.createElement("div"),n=t.getElementsByTagName("i");(t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->")&&n[0];);return e>4&&e}()},f.isInternetExplorer=function(){return f.isInternetExplorer.cached=void 0!==f.isInternetExplorer.cached?f.isInternetExplorer.cached:Boolean(f.getInternetExplorerMajorVersion())},f.options.html4Mode?f.emulated={pushState:!0,hashChange:!0}:f.emulated={pushState:!Boolean(e.history&&e.history.pushState&&e.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(r.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(r.userAgent))),hashChange:Boolean(!("onhashchange"in e||"onhashchange"in a)||f.isInternetExplorer()&&f.getInternetExplorerMajorVersion()<8)},f.enabled=!f.emulated.pushState,f.bugs={setHash:Boolean(!f.emulated.pushState&&"Apple Computer, Inc."===r.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(r.userAgent)),safariPoll:Boolean(!f.emulated.pushState&&"Apple Computer, Inc."===r.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(r.userAgent)),ieDoubleCheck:Boolean(f.isInternetExplorer()&&f.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(f.isInternetExplorer()&&f.getInternetExplorerMajorVersion()<7)},f.isEmptyObject=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},f.cloneObject=function(e){var t,n;return e?(t=d.stringify(e),n=d.parse(t)):n={},n},f.getRootUrl=function(){var e=a.location.protocol+"//"+(a.location.hostname||a.location.host);return a.location.port&&(e+=":"+a.location.port),e+="/"},f.getBaseHref=function(){var e=a.getElementsByTagName("base"),t=null,n="";return 1===e.length&&(t=e[0],n=t.href.replace(/[^\/]+$/,"")),n=n.replace(/\/+$/,""),n&&(n+="/"),n},f.getBaseUrl=function(){return f.getBaseHref()||f.getBasePageUrl()||f.getRootUrl()},f.getPageUrl=function(){var e=f.getState(!1,!1),t=(e||{}).url||f.getLocationHref();return t.replace(/\/+$/,"").replace(/[^\/]+$/,function(e,t,n){return/\./.test(e)?e:e+"/"})},f.getBasePageUrl=function(){return f.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(e,t,n){return/[^\/]$/.test(e)?"":e}).replace(/\/+$/,"")+"/"},f.getFullUrl=function(e,t){var n=e,i=e.substring(0,1);return t=void 0===t||t,/[a-z]+\:\/\//.test(e)||(n="/"===i?f.getRootUrl()+e.replace(/^\/+/,""):"#"===i?f.getPageUrl().replace(/#.*/,"")+e:"?"===i?f.getPageUrl().replace(/[\?#].*/,"")+e:t?f.getBaseUrl()+e.replace(/^(\.\/)+/,""):f.getBasePageUrl()+e.replace(/^(\.\/)+/,"")),n.replace(/\#$/,"")},f.getShortUrl=function(e){var t=e,n=f.getBaseUrl(),i=f.getRootUrl();return f.emulated.pushState&&(t=t.replace(n,"")),t=t.replace(i,"/"),f.isTraditionalAnchor(t)&&(t="./"+t),t=t.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},f.getLocationHref=function(e){return e=e||a,e.URL===e.location.href?e.location.href:e.location.href===decodeURIComponent(e.URL)?e.URL:e.location.hash&&decodeURIComponent(e.location.href.replace(/^[^#]+/,""))===e.location.hash?e.location.href:e.URL.indexOf("#")==-1&&e.location.href.indexOf("#")!=-1?e.location.href:e.URL||e.location.href},f.store={},f.idToState=f.idToState||{},f.stateToId=f.stateToId||{},f.urlToId=f.urlToId||{},f.storedStates=f.storedStates||[],f.savedStates=f.savedStates||[],f.normalizeStore=function(){f.store.idToState=f.store.idToState||{},f.store.urlToId=f.store.urlToId||{},f.store.stateToId=f.store.stateToId||{}},f.getState=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var n=f.getLastSavedState();return!n&&t&&(n=f.createStateObject()),e&&(n=f.cloneObject(n),n.url=n.cleanUrl||n.url),n},f.getIdByState=function(e){var t,n=f.extractId(e.url);if(!n)if(t=f.getStateString(e),void 0!==f.stateToId[t])n=f.stateToId[t];else if(void 0!==f.store.stateToId[t])n=f.store.stateToId[t];else{for(;;)if(n=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),void 0===f.idToState[n]&&void 0===f.store.idToState[n])break;f.stateToId[t]=n,f.idToState[n]=e}return n},f.normalizeState=function(e){var t,n;return e&&"object"==typeof e||(e={}),void 0!==e.normalized?e:(e.data&&"object"==typeof e.data||(e.data={}),t={},t.normalized=!0,t.title=e.title||"",t.url=f.getFullUrl(e.url?e.url:f.getLocationHref()),t.hash=f.getShortUrl(t.url),t.data=f.cloneObject(e.data),t.id=f.getIdByState(t),t.cleanUrl=t.url.replace(/\??\&_suid.*/,""),t.url=t.cleanUrl,n=!f.isEmptyObject(t.data),(t.title||n)&&f.options.disableSuid!==!0&&(t.hash=f.getShortUrl(t.url).replace(/\??\&_suid.*/,""),/\?/.test(t.hash)||(t.hash+="?"),t.hash+="&_suid="+t.id),t.hashedUrl=f.getFullUrl(t.hash),(f.emulated.pushState||f.bugs.safariPoll)&&f.hasUrlDuplicate(t)&&(t.url=t.hashedUrl),t)},f.createStateObject=function(e,t,n){var i={data:e,title:t,url:n};return i=f.normalizeState(i)},f.getStateById=function(e){return e=String(e),f.idToState[e]||f.store.idToState[e]||void 0},f.getStateString=function(e){var t,n;return t=f.normalizeState(e),n={data:t.data,title:e.title,url:e.url},d.stringify(n)},f.getStateId=function(e){var t;return t=f.normalizeState(e),t.id},f.getHashByState=function(e){var t;return t=f.normalizeState(e),t.hash},f.extractId=function(e){var t,n;return n=e.indexOf("#")!=-1?e.split("#")[0]:e,t=/(.*)\&_suid=([0-9]+)$/.exec(n),t?t[1]||e:e,(t?String(t[2]||""):"")||!1},f.isTraditionalAnchor=function(e){return!/[\/\?\.]/.test(e)},f.extractState=function(e,t,n){var i,a,r=null;return t=t||!1,i=f.extractId(e),i&&(r=f.getStateById(i)),r||(a=f.getFullUrl(e),i=f.getIdByUrl(a)||!1,i&&(r=f.getStateById(i)),r||!t||f.isTraditionalAnchor(e)||(r=f.createStateObject(null,n||null,a))),r},f.getIdByUrl=function(e){return f.urlToId[e]||f.store.urlToId[e]||void 0},f.getLastSavedState=function(){return f.savedStates[f.savedStates.length-1]||void 0},f.getLastStoredState=function(){return f.storedStates[f.storedStates.length-1]||void 0},f.hasUrlDuplicate=function(e){var t;return t=f.extractState(e.url),t&&t.id!==e.id},f.storeState=function(e){return f.urlToId[e.url]=e.id,f.storedStates.push(f.cloneObject(e)),e},f.isLastSavedState=function(e){var t,n,i,a=!1;return f.savedStates.length&&(t=e.id,n=f.getLastSavedState(),i=n.id,a=t===i),a},f.saveState=function(e){return!f.isLastSavedState(e)&&(f.savedStates.push(f.cloneObject(e)),!0)},f.getStateByIndex=function(e){return void 0===e?f.savedStates[f.savedStates.length-1]:e<0?f.savedStates[f.savedStates.length+e]:f.savedStates[e]},f.getCurrentIndex=function(){return f.savedStates.length<1?0:f.savedStates.length-1},f.getHash=function(e){var t=f.getLocationHref(e);return f.getHashByUrl(t)},f.unescapeHash=function(e){var t=f.normalizeHash(e);return t=decodeURIComponent(t)},f.normalizeHash=function(e){return e.replace(/[^#]*#/,"").replace(/#.*/,"")},f.setHash=function(e,t){var n,i;return t!==!1&&f.busy()?(f.pushQueue({scope:f,callback:f.setHash,args:arguments,queue:t}),!1):(f.busy(!0),n=f.extractState(e,!0),n&&!f.emulated.pushState?f.pushState(n.data,n.title,n.url,!1):f.getHash()!==e&&(f.bugs.setHash?(i=f.getPageUrl(),f.pushState(null,null,i+"#"+e,!1)):a.location.hash=e),f)},f.escapeHash=function(t){var n=f.normalizeHash(t);return n=e.encodeURIComponent(n),f.bugs.hashEscape||(n=n.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),n},f.getHashByUrl=function(e){var t=String(e).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return t=f.unescapeHash(t)},f.setTitle=function(e){var t,n=e.title;n||(t=f.getStateByIndex(0))&&t.url===e.url&&(n=t.title),n||(n=f.options.initialTitle);try{a.getElementsByTagName("title")[0].innerHTML=n.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(e){}return a.title=n,f},f.queues=[],f.busy=function(e){if(void 0!==e?f.busy.flag=e:void 0===f.busy.flag&&(f.busy.flag=!1),!f.busy.flag){s(f.busy.timeout);var t=function(){var e,n,i;if(!f.busy.flag)for(e=f.queues.length-1;e>=0;--e)n=f.queues[e],0!==n.length&&(i=n.shift(),f.fireQueueItem(i),f.busy.timeout=o(t,f.options.busyDelay))};f.busy.timeout=o(t,f.options.busyDelay)}return f.busy.flag},f.busy.flag=!1,f.fireQueueItem=function(e){return e.callback.apply(e.scope||f,e.args||[])},f.pushQueue=function(e){return f.queues[e.queue||0]=f.queues[e.queue||0]||[],f.queues[e.queue||0].push(e),f},f.queue=function(e,t){return"function"==typeof e&&(e={callback:e}),void 0!==t&&(e.queue=t),f.busy()?f.pushQueue(e):f.fireQueueItem(e),f},f.clearQueue=function(){return f.busy.flag=!1,f.queues=[],f},f.stateChanged=!1,f.doubleChecker=!1,f.doubleCheckComplete=function(){return f.stateChanged=!0,f.doubleCheckClear(),f},f.doubleCheckClear=function(){return f.doubleChecker&&(s(f.doubleChecker),f.doubleChecker=!1),f},f.doubleCheck=function(e){return f.stateChanged=!1,f.doubleCheckClear(),f.bugs.ieDoubleCheck&&(f.doubleChecker=o(function(){return f.doubleCheckClear(),f.stateChanged||e(),!0},f.options.doubleCheckInterval)),f},f.safariStatePoll=function(){var t,n=f.extractState(f.getLocationHref());if(!f.isLastSavedState(n))return t=n,t||(t=f.createStateObject()),f.Adapter.trigger(e,"popstate"),f},f.back=function(e){return e!==!1&&f.busy()?(f.pushQueue({scope:f,callback:f.back,args:arguments,queue:e}),!1):(f.busy(!0),f.doubleCheck(function(){f.back(!1)}),h.go(-1),!0)},f.forward=function(e){return e!==!1&&f.busy()?(f.pushQueue({scope:f,callback:f.forward,args:arguments,queue:e}),!1):(f.busy(!0),f.doubleCheck(function(){f.forward(!1)}),h.go(1),!0)},f.go=function(e,t){var n;if(e>0)for(n=1;n<=e;++n)f.forward(t);else{if(!(e<0))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(n=-1;n>=e;--n)f.back(t)}return f},f.emulated.pushState){var p=function(){};f.pushState=f.pushState||p,f.replaceState=f.replaceState||p}else f.onPopState=function(t,n){var i,a,r=!1,o=!1;return f.doubleCheckComplete(),(i=f.getHash())?(a=f.extractState(i||f.getLocationHref(),!0),a?f.replaceState(a.data,a.title,a.url,!1):(f.Adapter.trigger(e,"anchorchange"),f.busy(!1)),f.expectedStateId=!1,!1):(r=f.Adapter.extractEventData("state",t,n)||!1,o=r?f.getStateById(r):f.expectedStateId?f.getStateById(f.expectedStateId):f.extractState(f.getLocationHref()),o||(o=f.createStateObject(null,null,f.getLocationHref())),f.expectedStateId=!1,f.isLastSavedState(o)?(f.busy(!1),!1):(f.storeState(o),f.saveState(o),f.setTitle(o),f.Adapter.trigger(e,"statechange"),f.busy(!1),!0))},f.Adapter.bind(e,"popstate",f.onPopState),f.pushState=function(t,n,i,a){if(f.getHashByUrl(i)&&f.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(a!==!1&&f.busy())return f.pushQueue({scope:f,callback:f.pushState,args:arguments,queue:a}),!1;f.busy(!0);var r=f.createStateObject(t,n,i);return f.isLastSavedState(r)?f.busy(!1):(f.storeState(r),f.expectedStateId=r.id,h.pushState(r.id,r.title,r.url),f.Adapter.trigger(e,"popstate")),!0},f.replaceState=function(t,n,i,a){if(f.getHashByUrl(i)&&f.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(a!==!1&&f.busy())return f.pushQueue({scope:f,callback:f.replaceState,args:arguments,queue:a}),!1;f.busy(!0);var r=f.createStateObject(t,n,i);return f.isLastSavedState(r)?f.busy(!1):(f.storeState(r),f.expectedStateId=r.id,h.replaceState(r.id,r.title,r.url),f.Adapter.trigger(e,"popstate")),!0};if(n){try{f.store=d.parse(n.getItem("History.store"))||{}}catch(e){f.store={}}f.normalizeStore()}else f.store={},f.normalizeStore();f.Adapter.bind(e,"unload",f.clearAllIntervals),f.saveState(f.storeState(f.extractState(f.getLocationHref(),!0,a.title))),n&&(f.onUnload=function(){var e,t,i;try{e=d.parse(n.getItem("History.store"))||{}}catch(t){e={}}e.idToState=e.idToState||{},e.urlToId=e.urlToId||{},e.stateToId=e.stateToId||{};for(t in f.idToState)f.idToState.hasOwnProperty(t)&&(e.idToState[t]=f.idToState[t]);for(t in f.urlToId)f.urlToId.hasOwnProperty(t)&&(e.urlToId[t]=f.urlToId[t]);for(t in f.stateToId)f.stateToId.hasOwnProperty(t)&&(e.stateToId[t]=f.stateToId[t]);f.store=e,f.normalizeStore(),i=d.stringify(e);try{sessionStorage.setItem("History.store",i)}catch(e){if(e.code===DOMException.QUOTA_EXCEEDED_ERR||1014===e.code)try{sessionStorage.length&&(sessionStorage.removeItem("History.store"),sessionStorage.setItem("History.store",i))}catch(e){}}},f.intervalList.push(l(f.onUnload,f.options.storeInterval)),f.Adapter.bind(e,"beforeunload",f.onUnload),f.Adapter.bind(e,"unload",f.onUnload)),f.emulated.pushState||(f.bugs.safariPoll&&f.intervalList.push(l(f.safariStatePoll,f.options.safariPollInterval)),"Apple Computer, Inc."!==r.vendor&&"Mozilla"!==(r.appCodeName||"")||(f.Adapter.bind(e,"hashchange",function(){f.Adapter.trigger(e,"popstate")}),f.getHash()&&f.Adapter.onDomLoad(function(){f.Adapter.trigger(e,"hashchange")})))},f.options&&f.options.delayInit||f.init()}}(window)},,,,,,function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(4),s=function(e){return e&&e.__esModule?e:{default:e}}(o),l=n(45),u=n(199),d=function(e,t){var n=e.i18nKey,o=e.i18nTag,l=void 0===o?"span":o,d=e.atoms,c=void 0===d?[]:d,f=a(e,["i18nKey","i18nTag","atoms"]),h=t.i18n||{},p=(0,u.getTranslation)(h,n,f);void 0===p&&(p=(0,u.humanize)(n),c=c.concat(["translation_missing"]),f.debug&&window.console.log("I18n key is missing: ",n));var m=p.split(u.PARAMS_REGEX).reduce(function(e,t,n){var i=n%2==0?t:f[t];return e.concat([i])},[]),g=c.length>0?{className:c.join(" ")}:{};return s.default.createElement.apply(s.default,[l,r({},g)].concat(i(m)))};t.default=(0,l.consumeTranslations)(d)},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.short_filesize=a.default.number_to_human_size(e.data_file_size,{precision:1}),e};var i=n(8),a=function(e){return e&&e.__esModule?e:{default:e}}(i)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return e.project.disputed>0&&(e.filters.disputed={true:{count:e.project.disputed}}),e}function r(e){return d.default.each(d.default.keys(e.aggregations),function(t){d.default.each(d.default.keys(e.aggregations[t]),function(n){var i=e.aggregations[t][n];e.aggregations[t][n]={count:i}})}),e}function o(e){return e.params&&(d.default.each(d.default.keys(e.params),function(t){d.default.has(e.aggregations,t)?(e.aggregations[t][e.params[t]]||(e.aggregations[t][e.params[t]]={}),e.aggregations[t][e.params[t]].selected=!0):d.default.has(e.filters,t)?e.filters[t][e.params[t]].selected=!0:(e.aggregations[t]={})[e.params[t]]={selected:!0}}),e.params.sort_by&&(e.params["sort_by_"+e.params.sort_by]=" "+(e.params.asc_or_desc||"asc")),e.actual_reward_selected=!1,e.params.reward_id&&(e.actual_reward_selected=!0,e.selected_reward=d.default.findWhere(e.rewards,{id:parseInt(e.params.reward_id,10)}),e.selected_reward||(e.actual_reward_selected=!1,e.selected_reward=d.default.findWhere(e.rewards,{id:"none"})),e.selected_reward.selected=!0),d.default.each(["survey_answered","completed","must_have_creator_note","status","backer_banned","disputed"],function(t){e.params[t]&&(e.not_filtered=!1)})),e}function s(e){return e.show_aggregations=e.total_entries>0||!(e.params&&e.params.term&&!e.params.creator_note&&!e.params.creator_note_not),e}function l(e){return d.default.each(e.rewards,function(e){e.formatted_minimum=f.default.money(e.minimum,{currency:g.default.get("currency"),precision:0}),e.reward.length>35?e.truncated_description=e.reward.substring(0,35)+"â€¦":e.truncated_description=e.reward}),e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.filters={},e=a(e),e=r(e),e.aggregations.must_have_creator_note={true:{},false:{}},e.not_filtered=!0,e=o(e),"successful"===e.project.state&&(e.project.is_successful=!0),e=s(e),e.formatted_total_entries=f.default.format_number(e.total_entries,{precision:0}),e.count=e.total_entries,e=l(e),e.message_url=(0,p.default)(e.urls.web.message_batches).segment("new").query(e.params),e.isCreator=g.default.get("creator.id")===_.default.get("id"),e.showMessages=e.isCreator||e.showMessages,e};var u=n(3),d=i(u),c=n(8),f=i(c),h=n(11),p=i(h),m=n(14),g=i(m),v=n(15),_=i(v)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.formatted_pledged_at=(0,o.format)("ll",1e3*e.pledged_at),e.formatted_survey_answered_at=(0,o.format)("ll",1e3*e.survey_answered_at),e.formatted_amount=r.default.money(e.amount,{precision:2,currency:l.default.get("currency")}),e.is_registered||(e.name=f.default.t("backer_report.row.Guest",{backer_uid:e.backer_uid})),e.isCreator=l.default.get("creator.id")===d.default.get("id"),e.showMessages=e.isCreator||e.showMessages,e};var a=n(8),r=i(a),o=n(13),s=n(14),l=i(s),u=n(15),d=i(u),c=n(1),f=i(c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.json=JSON.stringify(e),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.ancestor_locations=e.ancestor_locations||[],e.ancestor_locations=e.ancestor_locations.reverse(),e.nearby_locations=e.nearby_locations||[],e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e)};var i=n(27),a=function(e){return e&&e.__esModule?e:{default:e}}(i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.json=JSON.stringify(e),e}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(93),r=i(a),o=n(94),s=i(o),l=n(95),u=i(l),d=n(39),c=i(d),f=n(71),h=i(f),p=n(96),m=i(p),g=n(97),v=i(g),_=n(98),y=i(_),b=n(99),w=i(b),k=n(101),j=i(k),x=n(102),C=i(x),S=n(103),E=i(S),T=n(46),A=i(T),P=n(104),D=i(P),I=n(27),M=i(I),N={"assets/_uploaded_item":r.default,"backer_report/_index":s.default,"backer_report/_row":u.default,"backings/_row":c.default,"backings/_table":h.default,"discover/_location_li":m.default,"discover/_location_options":v.default,"discover/_project_baseball_card_li":y.default,"discover/_search_location_li":w.default,"message_threads/_index":j.default,"message_threads/_row":C.default,"message_threads/_show":E.default,"messages/_show":A.default,"projects/_baseball_card_grid":D.default,"projects/_baseball_card_tall":M.default};t.default=N},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[],n=e.aggregations.read?e.aggregations.read[e.user]:0,i=e.total_entries-n;return window.enabled_features&&(e.archived_enabled=window.enabled_features.message_archiving,e.spam_enabled=window.enabled_features.message_spam),e.aggregations.read={},n>0&&(e.aggregations.read.true=n),i>0&&(e.aggregations.read.false=i),r.default.each(r.default.keys(e.aggregations),function(t){r.default.each(r.default.keys(e.aggregations[t]),function(n){var i=e.aggregations[t][n];e.aggregations[t][n]={count:i}})}),"undefined"==typeof current_project?(r.default.each(e.projects,function(n){var i=e.aggregations.projects?e.aggregations.projects[n[1]]:void 0,a=parseInt(e.params.project,10)===n[1],r={name:n[0],truncated_name:n[0].substring(0,35)+(n[0].length>35?"â€¦":""),id:n[1],count:i||0,selected:a};t.push(r),a&&(e.selected_project=r)}),e.projects=t,e.has_projects=e.projects&&e.projects.length>0):e.has_projects=!1,e.params&&(r.default.each(r.default.keys(e.params),function(t){r.default.has(e.aggregations,t)?(e.aggregations[t][e.params[t]]||(e.aggregations[t][e.params[t]]={}),e.aggregations[t][e.params[t]].selected=!0):(e.aggregations[t]={})[e.params[t]]={selected:!0}}),"other"===e.params.project&&(e.selected_project={truncated_name:s.default.t("presenters.message_threads.index.Other_projects"),other:!0})),e};var a=n(3),r=i(a),o=n(1),s=i(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.formatted_sent_at=(0,i.format)("ll",1e3*e.sent_at),e};var i=n(13)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.is_creator=e.project.creator.id===d.default.get("id"),e.project.is_live="live"===e.project.state,e.backing&&(e.backing.reward.formatted_estimated_delivery_on=f.default.fromNullable(e.backing.reward.estimated_delivery_on).map(function(e){return(0,l.format)("ll",(0,m.toUTC)(1e3*e))}).getOrElse(null),e.backing.is_creator=e.is_creator,e.backing.formatted_amount=s.default.money(e.backing.amount,{currency:e.backing.project.currency,precision:0})),e.messages=r.default.map(e.messages,function(t){return t.sender=r.default.findWhere(e.participants,{id:t.sender_id}),(0,p.default)(t)}),e};var a=n(3),r=i(a),o=n(8),s=i(o),l=n(13),u=n(15),d=i(u),c=n(23),f=i(c),h=n(46),p=i(h),m=n(43)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=r.default.extend({},e);return t.projects=t.projects.map(function(e){return e.map(function(e){return(0,s.default)(e)})}),t};var a=n(0),r=i(a),o=n(27),s=i(o)},function(e,t,n){var i=(n(0),n(0),!1);!function(e){"use strict";"function"==typeof i&&i.amd?i(["jquery"],e):e(n(0))}(function(e){"use strict";var t=0;e.ajaxTransport("iframe",function(n){if(n.async){var i,a,r,o=n.initialIframeSrc||"javascript:false;";return{send:function(s,l){i=e('<form style="display:none;"></form>'),i.attr("accept-charset",n.formAcceptCharset),r=/\?/.test(n.url)?"&":"?","DELETE"===n.type?(n.url=n.url+r+"_method=DELETE",n.type="POST"):"PUT"===n.type?(n.url=n.url+r+"_method=PUT",n.type="POST"):"PATCH"===n.type&&(n.url=n.url+r+"_method=PATCH",n.type="POST"),t+=1,a=e('<iframe src="'+o+'" name="iframe-transport-'+t+'"></iframe>').bind("load",function(){var t,r=e.isArray(n.paramName)?n.paramName:[n.paramName];a.unbind("load").bind("load",function(){var t;try{if(t=a.contents(),!t.length||!t[0].firstChild)throw new Error}catch(e){t=void 0}l(200,"success",{iframe:t}),e('<iframe src="'+o+'"></iframe>').appendTo(i),window.setTimeout(function(){i.remove()},0)}),i.prop("target",a.prop("name")).prop("action",n.url).prop("method",n.type),n.formData&&e.each(n.formData,function(t,n){e('<input type="hidden"/>').prop("name",n.name).val(n.value).appendTo(i)}),n.fileInput&&n.fileInput.length&&"POST"===n.type&&(t=n.fileInput.clone(),n.fileInput.after(function(e){return t[e]}),n.paramName&&n.fileInput.each(function(t){e(this).prop("name",r[t]||n.paramName)}),i.append(n.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),n.fileInput.removeAttr("form")),i.submit(),t&&t.length&&n.fileInput.each(function(n,i){var a=e(t[n]);e(i).prop("name",a.prop("name")).attr("form",a.attr("form")),a.replaceWith(i)})}),i.append(a).appendTo(document.body)},abort:function(){a&&a.unbind("load").prop("src",o),i&&i.remove()}}}}),e.ajaxSetup({converters:{"iframe text":function(t){return t&&e(t[0].body).text()},"iframe json":function(t){return t&&e.parseJSON(e(t[0].body).text())},"iframe html":function(t){return t&&e(t[0].body).html()},"iframe xml":function(t){var n=t&&t[0];return n&&e.isXMLDoc(n)?n:e.parseXML(n.XMLDocument&&n.XMLDocument.xml||e(n.body).html())},"iframe script":function(t){return t&&e.globalEval(e(t[0].body).text())}}})})},function(e,t,n){var i=(n(0),n(0),!1);!function(e){"function"==typeof i&&i.amd?i(["jquery"],e):e(n(0))}(function(e){var t=0,n=Array.prototype.slice;e.cleanData=function(t){return function(n){var i,a,r;for(r=0;null!=(a=n[r]);r++)try{i=e._data(a,"events"),i&&i.remove&&e(a).triggerHandler("remove")}catch(e){}t(n)}}(e.cleanData),e.widget=function(t,n,i){var a,r,o,s,l={},u=t.split(".")[0];return t=t.split(".")[1],a=u+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][a.toLowerCase()]=function(t){return!!e.data(t,a)},e[u]=e[u]||{},r=e[u][t],o=e[u][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,r,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),s=new n,s.options=e.widget.extend({},s.options),e.each(i,function(t,i){if(!e.isFunction(i))return void(l[t]=i);l[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},a=function(e){return n.prototype[t].apply(this,e)};return function(){var t,n=this._super,r=this._superApply;return this._super=e,this._superApply=a,t=i.apply(this,arguments),this._super=n,this._superApply=r,t}}()}),o.prototype=e.widget.extend(s,{widgetEventPrefix:r?s.widgetEventPrefix||t:t},l,{constructor:o,namespace:u,widgetName:t,widgetFullName:a}),r?(e.each(r._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,o,n._proto)}),delete r._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var i,a,r=n.call(arguments,1),o=0,s=r.length;o<s;o++)for(i in r[o])a=r[o][i],r[o].hasOwnProperty(i)&&void 0!==a&&(e.isPlainObject(a)?t[i]=e.isPlainObject(t[i])?e.widget.extend({},t[i],a):e.widget.extend({},a):t[i]=a);return t},e.widget.bridge=function(t,i){var a=i.prototype.widgetFullName||t;e.fn[t]=function(r){var o="string"==typeof r,s=n.call(arguments,1),l=this;return o?this.each(function(){var n,i=e.data(this,a);return"instance"===r?(l=i,!1):i?e.isFunction(i[r])&&"_"!==r.charAt(0)?(n=i[r].apply(i,s),n!==i&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+r+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+r+"'")}):(s.length&&(r=e.widget.extend.apply(null,[r].concat(s))),this.each(function(){var t=e.data(this,a);t?(t.option(r||{}),t._init&&t._init()):e.data(this,a,new i(r,this))})),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(n,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),n),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var i,a,r,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},i=t.split("."),t=i.shift(),i.length){for(a=o[t]=e.widget.extend({},this.options[t]),r=0;r<i.length-1;r++)a[i[r]]=a[i[r]]||{},a=a[i[r]];if(t=i.pop(),1===arguments.length)return void 0===a[t]?null:a[t];a[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=n}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,n,i){var a,r=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=a=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,a=this.widget()),e.each(i,function(i,o){function s(){if(t||r.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof o?r[o]:o).apply(r,arguments)}"string"!=typeof o&&(s.guid=o.guid=o.guid||s.guid||e.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),u=l[1]+r.eventNamespace,d=l[2];d?a.delegate(d,u,s):n.bind(u,s)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(n).undelegate(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var a,r,o=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],r=n.originalEvent)for(a in r)a in n||(n[a]=r[a]);return this.element.trigger(n,i),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,a,r){"string"==typeof a&&(a={effect:a});var o,s=a?a===!0||"number"==typeof a?n:a.effect||n:t;a=a||{},"number"==typeof a&&(a={duration:a}),o=!e.isEmptyObject(a),a.complete=r,a.delay&&i.delay(a.delay),o&&e.effects&&e.effects.effect[s]?i[t](a):s!==t&&i[s]?i[s](a.duration,a.easing,r):i.queue(function(n){e(this)[t](),r&&r.call(i[0]),n()})}});e.widget})},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={};i.pageX=function(e){return e.originalEvent&&e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageX:e.pageX},t.default=i},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);!function(){(0,a.default)(function(){(0,a.default)("body").hasClass("admin")||(window._sf_async_config={uid:5536,domain:window.location.hostname.replace("www.","")},window._sf_endpt=(new Date).getTime(),a.default.getScript("//a248.e.akamai.net/chartbeat.download.akamai.com/102508/js/chartbeat.js"))})}()},function(e,t,n){"use strict";n(48);var i=n(0);n(0);!function(e){function t(e){window.history&&window.history.replaceState?history.replaceState(null,null,e):window.location.replace(e)}e.fn.persistent_paging=function(){return e(this).each(function(){function n(){var t=[];e.each(a,function(){t.push([this[0],this[2].offset().top,this[2]])}),a=t}var i=e(this),a=[[1,0,i.find(".page")]],r=[],o=!1,s=i.data("mobius"),l=/^#p(\d*)/,u=l.exec(window.location.hash);u&&1!==parseInt(u[1],10)&&(i.one("mobius:loaded_page",function(t,n,i){e.scrollTo(i.offset().top+70)}),s.load_page(parseInt(u[1],10))),i.on("mobius:loaded_page",function(t,r,o){function l(){if(this[0]===d)return u=!0,!1}var u,d,c=[];for(a.push([r,!1,o]),n(),d=1;d<=a[a.length-1][0];d+=1)u=!1,e.each(a,l),u||c.push(d);c.length?e.each(c,function(){var t=a[0],n=parseInt(this,10),r=e([]),o=[],l=e([]),u=e([]);e.each(a,function(){this[0]>t[0]&&this[0]<n&&(t=this)}),r=t[2].next(".missing"),r.length?(o=r.data("missing_pages"),e.inArray(n,o)===-1&&(o.push(n),r.data("missing_pages",o))):(r=i.siblings(".missing").clone(),l=r.find(".loading"),u=r.find(".load_more"),r.data("missing_pages",[n]),r.find("a").click(function(e){var t=r.data("missing_pages"),n=t.pop();e.preventDefault(),t.length&&r.data("missing_pages",t),u.addClass("loading"),s.load_page(n,r),i.one("mobius:loaded_page",function(){u.removeClass("loading")})}),t[2].after(r),l.hide(),r.show())}):i.find("div.missing").remove()}),e(document).scroll(function(){var n=e(window).scrollTop();e.each(a,function(){var e=this[1];n>e&&(r=this)}),r[0]!==o&&(t("#p"+r[0]),e(document).trigger("infinite_scroll:scrolled_to",[r[0]]),o=r[0])})})}}(i)},function(e,t,n){"use strict";var i=n(0);n(0);!function(e){function t(t,n){this.$elem=t,this.options=e.extend({},{adjust_on:"mobius:loaded_page scroll resize sticky_bar:position load hashchange",parent:t.parent(),attach_to:"top",lock_to_bottom:!0},n),this.paused=!1,this.last_scroll_top=0,this.last_up=!1,this.fixed=!1,this.original_top=t.offset().top,this.original_bottom=this.original_top+t.height(),this.update_window_larger_then_elem(),this.attach_to_top="top"===this.options.attach_to,this.attach_to_bottom=!this.attach_to_top,this.bind_events(),this.reposition()}function n(t,n){this.$elem=t,this.options=e.extend({},{adjust_on:"shifted scroll resize load hashchange"},n),this.original_top=t.offset().top,this.bind_events(),this.reposition()}e.fn.sticky_bar=function(n){return n=n||{},e(this).each(function(){var i=e(this).data("stickybar");i?e(this).trigger("shifted"):(i=new t(e(this),n),e(this).data("stickybar",i))})},e.fn.simple_sticky_bar=function(t){return t=t||{},e(this).each(function(){var i=e(this).data("simple_stickybar");i?e(this).trigger("shifted"):(i=new n(e(this),t),e(this).data("simple_stickybar",i))})},e.extend(n.prototype,{bind_events:function(){var t=this;e(window).on(this.options.adjust_on,function(e){t.reposition(e)})},reposition:function(){e(window).scrollTop()<this.original_top?(this.$elem.css("position","static"),this.$elem.css("top","auto")):(this.$elem.css("position","fixed"),this.$elem.css("top",0))}}),e.extend(t.prototype,{bind_events:function(){var t=this;e(window).resize(function(e){e.target===window&&t.update_window_larger_then_elem()}),e(document).on("shifted",function(){t.fixed=!1,t.$elem.css("position","static"),t.$elem.css("top","auto"),t.$elem.css("bottom","auto"),t.original_top=t.$elem.offset().top,t.original_bottom=t.original_top+t.$elem.height(),t.reposition()}),e(window).on(this.options.adjust_on,function(e){t.paused||t.reposition(e)}),this.$elem.on("sticky_bar:fix_to_bottom",function(){t.fixed=!0,t.$elem.css("position","fixed"),t.$elem.css("top",-(t.$elem.height()-e(window).height()))}),this.$elem.on("sticky_bar:pause",function(){t.paused=!0}),this.$elem.on("sticky_bar:unpause",function(){t.paused=!1})},update_window_larger_then_elem:function(){this.window_larger_then_elem=e(window).height()>this.$elem.height()},lockToBottom:function(e){this.fixed=!1,this.$elem.css("position","absolute"),this.$elem.css("top",e-this.$elem.outerHeight()-this.$elem.offsetParent().offset().top)},reposition:function(t){var n=this,i=e(window).scrollTop(),a=i+e(window).height(),r=n.$elem.offset().top,o=r+n.$elem.height(),s=n.options.parent,l=s.offset().top+s.outerHeight(),u=t&&"scroll"===t.type,d=!(i>n.last_scroll_top),c=d!==n.last_up;e("body").width()<640||n.attach_to_top&&i<n.original_top||n.attach_to_bottom&&a>n.original_bottom?(n.fixed=!1,n.$elem.css("position","static"),n.$elem.css("top","auto"),n.$elem.css("bottom","auto")):n.options.lock_to_bottom&&!n.window_larger_then_elem&&a>l?n.lockToBottom(l):n.options.lock_to_bottom&&n.window_larger_then_elem&&i+n.$elem.height()>l?n.lockToBottom(l):c&&u?n.window_larger_then_elem||(n.fixed=!1,n.$elem.css("position","absolute"),n.$elem.css("top",r),n.$elem.css("bottom","auto")):n.fixed||(n.attach_to_top?n.window_larger_then_elem||(!u||d)&&i<r?(n.fixed=!0,n.$elem.css("position","fixed"),n.$elem.css("top",0)):u&&d||!(a>o)||(n.fixed=!0,n.$elem.css("position","fixed"),n.$elem.css("top",-(n.$elem.height()-e(window).height()))):(n.window_larger_then_elem||(!u||!d)&&a>o)&&(n.fixed=!0,n.$elem.css("position","fixed"),n.$elem.css("bottom",0))),n.was_fixed!==n.fixed&&n.$elem.trigger("sticky_bar:fixed_changed",[n.fixed]),n.last_scroll_top=i,n.last_up=d}})}(i)},function(e,t,n){"use strict";var i=n(3),a=function(e){return e&&e.__esModule?e:{default:e}}(i),r=n(0);n(0);!function(e){e.fn.whenNear=function(t,n){function i(){var t=a.default.filter(s,function(t){var n=e(t);if(!n.is(":hidden")){var i=r.scrollTop(),a=i+r.height(),s=n.offset().top;return s+n.height()>=i-o&&s<=a+o}});s=s.not(t),a.default.each(t,n)}var r=e(window),o=t||0,s=this;return r.on("scroll.whenNear resize.whenNear",a.default.throttle(i,25)),i(),this}}(r)},function(e,t,n){n(0),n(0);!function(e,t,n){"use strict";function i(n){if(a=t.documentElement,r=t.body,x(),B=this,n=n||{},q=n.constants||{},n.easing)for(var i in n.easing)E[i]=n.easing[i];Q=n.edgeStrategy||"set",W={beforerender:n.beforerender,render:n.render},U=n.forceHeight!==!1,U&&(pe=n.scale||1),V=n.mobileDeceleration||p,G=n.smoothScrolling!==!1,J=n.smoothScrollingDuration||m,X={targetTop:B.getScrollTop()},ke=(n.mobileCheck||function(){return/Android|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent||navigator.vendor||e.opera)})(),ke?(z=t.getElementById("skrollr-body"),z&&$(),T(),le(a,[d,h],[c])):le(a,[d,f],[c]),B.refresh(),te(e,"resize orientationchange",function(){var e=a.clientWidth,t=a.clientHeight;t===ye&&e===_e||(ye=t,_e=e,be=!0)});var o=C();return function e(){D(),ee=o(e)}(),B}var a,r,o=e.skrollr={get:function(){return B},init:function(e){return B||new i(e)},VERSION:"0.6.21"},s=Object.prototype.hasOwnProperty,l=e.Math,u=e.getComputedStyle,d="skrollr",c="no-"+d,f=d+"-desktop",h=d+"-mobile",p=.004,m=200,g=/^(?:input|textarea|button|select)$/i,v=/\s*([\w\-\[\]]+)\s*:\s*(.+?)\s*(?:;|$)/gi,_=function(e,t){return t.toUpperCase()},y=/\{\?\}/g,b=/rgba?\(\s*-?\d+\s*,\s*-?\d+\s*,\s*-?\d+/g,w=/[a-z\-]+-gradient/g,k="",j="",x=function(){var e=/^(?:O|Moz|webkit|ms)|(?:-(?:o|moz|webkit|ms)-)/;if(u){var t=u(r,null);for(var n in t)if(k=n.match(e)||+n==n&&t[n].match(e))break;if(!k)return void(k=j="");k=k[0],"-"===k.slice(0,1)?(j=k,k={"-webkit-":"webkit","-moz-":"Moz","-ms-":"ms","-o-":"O"}[k]):j="-"+k.toLowerCase()+"-"}},C=function(){var t=e.requestAnimationFrame||e[k.toLowerCase()+"RequestAnimationFrame"],n=ce();return!ke&&t||(t=function(t){var i=ce()-n,a=l.max(0,1e3/60-i);return e.setTimeout(function(){n=ce(),t()},a)}),t},S=function(){var t=e.cancelAnimationFrame||e[k.toLowerCase()+"CancelAnimationFrame"];return!ke&&t||(t=function(t){return e.clearTimeout(t)}),t},E={begin:function(){return 0},end:function(){return 1},linear:function(e){return e},quadratic:function(e){return e*e},cubic:function(e){return e*e*e},swing:function(e){return-l.cos(e*l.PI)/2+.5},sqrt:function(e){return l.sqrt(e)},outCubic:function(e){return l.pow(e-1,3)+1},bounce:function(e){var t;if(e<=.5083)t=3;else if(e<=.8489)t=9;else if(e<=.96208)t=27;else{if(!(e<=.99981))return 1;t=91}return 1-l.abs(3*l.cos(e*t*1.028)/t)}};i.prototype.refresh=function(e){var n,i,a=!1;for(void 0===e?(a=!0,H=[],we=0,e=t.getElementsByTagName("*")):e=[].concat(e),n=0,i=e.length;n<i;n++){var r=e[n],o=r,s=[],l=G,u=Q;if(r.attributes){for(var d=0,c=r.attributes.length;d<c;d++){var f=r.attributes[d];if("data-anchor-target"!==f.name)if("data-smooth-scrolling"!==f.name)if("data-edge-strategy"!==f.name){var h=f.name.match(/^data(?:-(_\w+))?(?:-?(-?\d*\.?\d+p?))?(?:-?(start|end|top|center|bottom))?(?:-?(top|center|bottom))?$/);if(null!==h){var p={props:f.value,element:r};s.push(p);var m=h[1];m&&(p.constant=m.substr(1));var g=h[2];/p$/.test(g)?(p.isPercentage=!0,p.offset=(0|g.slice(0,-1))/100):p.offset=0|g;var v=h[3],_=h[4]||v;v&&"start"!==v&&"end"!==v?(p.mode="relative",p.anchors=[v,_]):(p.mode="absolute","end"===v?p.isEnd=!0:p.isPercentage||(p.offset=p.offset*pe))}}else u=f.value;else l="off"!==f.value;else if(null===(o=t.querySelector(f.value)))throw'Unable to find anchor target "'+f.value+'"'}if(s.length){var y,b,w;!a&&"___skrollable_id"in r?(w=r.___skrollable_id,y=H[w].styleAttr,b=H[w].classAttr):(w=r.___skrollable_id=we++,y=r.style.cssText,b=se(r)),H[w]={element:r,styleAttr:y,classAttr:b,anchorTarget:o,keyFrames:s,smoothScrolling:l,edgeStrategy:u},le(r,["skrollable"],[])}}}for(ae(),n=0,i=e.length;n<i;n++){var k=H[e[n].___skrollable_id];void 0!==k&&(I(k),N(k))}return B},i.prototype.relativeToAbsolute=function(e,t,n){var i=a.clientHeight,r=e.getBoundingClientRect(),o=r.top,s=r.bottom-r.top;return"bottom"===t?o-=i:"center"===t&&(o-=i/2),"bottom"===n?o+=s:"center"===n&&(o+=s/2),(o+=B.getScrollTop())+.5|0},i.prototype.animateTo=function(e,t){t=t||{};var n=ce(),i=B.getScrollTop();return Y={startTop:i,topDiff:e-i,targetTop:e,duration:t.duration||1e3,startTime:n,endTime:n+(t.duration||1e3),easing:E[t.easing||"linear"],done:t.done},Y.topDiff||(Y.done&&Y.done.call(B,!1),Y=void 0),B},i.prototype.stopAnimateTo=function(){Y&&Y.done&&Y.done.call(B,!0),Y=void 0},i.prototype.isAnimatingTo=function(){return!!Y},i.prototype.setScrollTop=function(t,n){return K=n===!0,ke?je=l.min(l.max(t,0),he):e.scrollTo(0,t),B},i.prototype.getScrollTop=function(){return ke?je:e.pageYOffset||a.scrollTop||r.scrollTop||0},i.prototype.getMaxScrollTop=function(){return he},i.prototype.on=function(e,t){return W[e]=t,B},i.prototype.off=function(e){return delete W[e],B},i.prototype.destroy=function(){S()(ee),ie(),le(a,[c],[d,f,h]);for(var e=0,t=H.length;e<t;e++)F(H[e].element);a.style.overflow=r.style.overflow="auto",a.style.height=r.style.height="auto",z&&o.setStyle(z,"transform","none"),B=void 0,z=void 0,W=void 0,U=void 0,he=0,pe=1,q=void 0,V=void 0,me="down",ge=-1,_e=0,ye=0,be=!1,Y=void 0,G=void 0,J=void 0,X=void 0,K=void 0,we=0,Q=void 0,ke=!1,je=0,Z=void 0};var T=function(){var n,i,o,s,u,d,c,f,h,p,m,v;te(a,["touchstart","touchmove","touchcancel","touchend"].join(" "),function(e){var a=e.changedTouches[0];for(s=e.target;3===s.nodeType;)s=s.parentNode;switch(u=a.clientY,d=a.clientX,p=e.timeStamp,g.test(s.tagName)||e.preventDefault(),e.type){case"touchstart":n&&n.blur(),B.stopAnimateTo(),n=s,i=c=u,o=d,h=p;break;case"touchmove":g.test(s.tagName)&&t.activeElement!==s&&e.preventDefault(),f=u-c,v=p-m,B.setScrollTop(je-f,!0),c=u,m=p;break;default:case"touchcancel":case"touchend":var r=i-u,_=o-d;if(_*_+r*r<49){if(!g.test(n.tagName)){n.focus();var y=t.createEvent("MouseEvents");y.initMouseEvent("click",!0,!0,e.view,1,a.screenX,a.screenY,a.clientX,a.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),n.dispatchEvent(y)}return}n=void 0;var b=f/v;b=l.max(l.min(b,3),-3);var w=l.abs(b/V),k=b*w+.5*V*w*w,j=B.getScrollTop()-k,x=0;j>he?(x=(he-j)/k,j=he):j<0&&(x=-j/k,j=0),w*=1-x,B.animateTo(j+.5|0,{easing:"outCubic",duration:w})}}),e.scrollTo(0,0),a.style.overflow=r.style.overflow="hidden"},A=function(){var e,t,n,i,r,o,s,u,d,c,f,h=a.clientHeight,p=re();for(u=0,d=H.length;u<d;u++)for(e=H[u],t=e.element,n=e.anchorTarget,i=e.keyFrames,r=0,o=i.length;r<o;r++)s=i[r],c=s.offset,f=p[s.constant]||0,s.frame=c,s.isPercentage&&(c*=h,s.frame=c),"relative"===s.mode&&(F(t),s.frame=B.relativeToAbsolute(n,s.anchors[0],s.anchors[1])-c,F(t,!0)),s.frame+=f,U&&!s.isEnd&&s.frame>he&&(he=s.frame);for(he=l.max(he,oe()),u=0,d=H.length;u<d;u++){for(e=H[u],i=e.keyFrames,r=0,o=i.length;r<o;r++)s=i[r],f=p[s.constant]||0,s.isEnd&&(s.frame=he-s.offset+f);e.keyFrames.sort(fe)}},P=function(e,t){for(var n=0,i=H.length;n<i;n++){var a,r,l=H[n],u=l.element,d=l.smoothScrolling?e:t,c=l.keyFrames,f=c[0].frame,h=c[c.length-1].frame,p=d<f,m=d>h,g=c[p?0:c.length-1];if(p||m){if(p&&l.edge===-1||m&&1===l.edge)continue;switch(le(u,[p?"skrollable-before":"skrollable-after"],["skrollable-before","skrollable-between","skrollable-after"]),l.edge=p?-1:1,l.edgeStrategy){case"reset":F(u);continue;case"ease":d=g.frame;break;default:case"set":var v=g.props;for(a in v)s.call(v,a)&&(r=L(v[a].value),o.setStyle(u,a,r));continue}}else 0!==l.edge&&(le(u,["skrollable","skrollable-between"],["skrollable-before","skrollable-after"]),l.edge=0);for(var _=0,y=c.length-1;_<y;_++)if(d>=c[_].frame&&d<=c[_+1].frame){var b=c[_],w=c[_+1];for(a in b.props)if(s.call(b.props,a)){var k=(d-b.frame)/(w.frame-b.frame);k=b.props[a].easing(k),r=R(b.props[a].value,w.props[a].value,k),r=L(r),o.setStyle(u,a,r)}break}}},D=function(){be&&(be=!1,ae());var e,t,n=B.getScrollTop(),i=ce();if(Y)i>=Y.endTime?(n=Y.targetTop,e=Y.done,Y=void 0):(t=Y.easing((i-Y.startTime)/Y.duration),n=Y.startTop+t*Y.topDiff|0),B.setScrollTop(n,!0);else if(!K){var a=X.targetTop-n;a&&(X={startTop:ge,topDiff:n-ge,targetTop:n,startTime:ve,endTime:ve+J}),i<=X.endTime&&(t=E.sqrt((i-X.startTime)/J),n=X.startTop+t*X.topDiff|0)}if(ke&&z&&o.setStyle(z,"transform","translate(0, "+-je+"px) "+Z),K||ge!==n){me=n>ge?"down":n<ge?"up":me,K=!1;var r={curTop:n,lastTop:ge,maxTop:he,direction:me};(W.beforerender&&W.beforerender.call(B,r))!==!1&&(P(n,B.getScrollTop()),ge=n,W.render&&W.render.call(B,r)),e&&e.call(B,!1)}ve=i},I=function(e){for(var t=0,n=e.keyFrames.length;t<n;t++){for(var i,a,r,o,s=e.keyFrames[t],l={};null!==(o=v.exec(s.props));)r=o[1],a=o[2],i=r.match(/^([a-z\-]+)\[(\w+)\]$/),null!==i?(r=i[1],i=i[2]):i="linear",a=a.indexOf("!")?M(a):[a.slice(1)],l[r]={value:a,easing:E[i]};s.props=l}},M=function(e){var t=[];return b.lastIndex=0,e=e.replace(b,function(e){return e.replace(/[\-+]?[\d]*\.?[\d]+/g,function(e){return e/255*100+"%"})}),j&&(w.lastIndex=0,e=e.replace(w,function(e){return j+e})),e=e.replace(/[\-+]?[\d]*\.?[\d]+/g,function(e){return t.push(+e),"{?}"}),t.unshift(e),t},N=function(e){var t,n,i={};for(t=0,n=e.keyFrames.length;t<n;t++)O(e.keyFrames[t],i);for(i={},t=e.keyFrames.length-1;t>=0;t--)O(e.keyFrames[t],i)},O=function(e,t){var n;for(n in t)s.call(e.props,n)||(e.props[n]=t[n]);for(n in e.props)t[n]=e.props[n]},R=function(e,t,n){var i,a=e.length;if(a!==t.length)throw"Can't interpolate between \""+e[0]+'" and "'+t[0]+'"';var r=[e[0]];for(i=1;i<a;i++)r[i]=e[i]+(t[i]-e[i])*n;return r},L=function(e){var t=1;return y.lastIndex=0,e[0].replace(y,function(){return e[t++]})},F=function(e,t){e=[].concat(e);for(var n,i,a=0,r=e.length;a<r;a++)i=e[a],(n=H[i.___skrollable_id])&&(t?(i.style.cssText=n.dirtyStyleAttr,le(i,n.dirtyClassAttr)):(n.dirtyStyleAttr=i.style.cssText,n.dirtyClassAttr=se(i),i.style.cssText=n.styleAttr,le(i,n.classAttr)))},$=function(){Z="translateZ(0)",o.setStyle(z,"transform",Z);var e=u(z),t=e.getPropertyValue("transform"),n=e.getPropertyValue(j+"transform");t&&"none"!==t||n&&"none"!==n||(Z="")};o.setStyle=function(e,t,n){var i=e.style;if("zIndex"===(t=t.replace(/-([a-z])/g,_).replace("-","")))isNaN(n)?i[t]=n:i[t]=""+(0|n);else if("float"===t)i.styleFloat=i.cssFloat=n;else try{k&&(i[k+t.slice(0,1).toUpperCase()+t.slice(1)]=n),i[t]=n}catch(e){}};var B,H,z,W,U,q,V,Y,G,J,X,K,Q,Z,ee,te=o.addEvent=function(t,n,i){var a=function(t){return t=t||e.event,t.target||(t.target=t.srcElement),t.preventDefault||(t.preventDefault=function(){t.returnValue=!1}),i.call(this,t)};n=n.split(" ");for(var r,o=0,s=n.length;o<s;o++)r=n[o],t.addEventListener?t.addEventListener(r,i,!1):t.attachEvent("on"+r,a),xe.push({element:t,name:r,listener:i})},ne=o.removeEvent=function(e,t,n){t=t.split(" ");for(var i=0,a=t.length;i<a;i++)e.removeEventListener?e.removeEventListener(t[i],n,!1):e.detachEvent("on"+t[i],n)},ie=function(){for(var e,t=0,n=xe.length;t<n;t++)e=xe[t],ne(e.element,e.name,e.listener);xe=[]},ae=function(){var e=B.getScrollTop();he=0,U&&!ke&&(r.style.height="auto"),A(),U&&!ke&&(r.style.height=he+a.clientHeight+"px"),ke?B.setScrollTop(l.min(B.getScrollTop(),he)):B.setScrollTop(e,!0),K=!0},re=function(){var e,t,n=a.clientHeight,i={};for(e in q)t=q[e],"function"==typeof t?t=t.call(B):/p$/.test(t)&&(t=t.slice(0,-1)/100*n),i[e]=t;return i},oe=function(){var e=z&&z.offsetHeight||0;return l.max(e,r.scrollHeight,r.offsetHeight,a.scrollHeight,a.offsetHeight,a.clientHeight)-a.clientHeight},se=function(t){var n="className";return e.SVGElement&&t instanceof e.SVGElement&&(t=t[n],n="baseVal"),t[n]},le=function(t,n,i){var a="className";if(e.SVGElement&&t instanceof e.SVGElement&&(t=t[a],a="baseVal"),void 0===i)return void(t[a]=n);for(var r=t[a],o=0,s=i.length;o<s;o++)r=de(r).replace(de(i[o])," ");r=ue(r);for(var l=0,u=n.length;l<u;l++)de(r).indexOf(de(n[l]))===-1&&(r+=" "+n[l]);t[a]=ue(r)},ue=function(e){return e.replace(/^\s+|\s+$/g,"")},de=function(e){return" "+e+" "},ce=Date.now||function(){return+new Date},fe=function(e,t){return e.frame-t.frame},he=0,pe=1,me="down",ge=-1,ve=ce(),_e=0,ye=0,be=!1,we=0,ke=!1,je=0,xe=[]}(window,document)},,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(7),s=i(o),l=n(31),u=i(l);(0,r.default)(document).on("click",".js-facebook-login, a.facebook-link",function(e){var t=(0,r.default)(this);e.preventDefault(),"undefined"!==window.FB?FB.login(function(e){e.authResponse&&r.default.post(t.attr("href"),{fbsr:e.authResponse.signedRequest}).done(function(e){e.data&&(0,u.default)(e.data,window.location.href)?window.location.reload(!0):e.data?window.location=e.data:e.flash&&(r.default.isArray(e.flash)&&r.default.isArray(e.flash[0])?(0,s.default)(r.default.map(e.flash,function(e){return e[e.length-1]})):e.flash&&(0,s.default)(e.flash))})},{scope:"email,user_friends,public_profile"}):(0,s.default)({error:"Sorry, we weren't able to connect to Facebook"})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(3),s=i(o),l=n(19),u=i(l);n(9),(0,r.default)(function(){(0,r.default)(".render_mustache").livequery(function(){var e=(0,r.default)(this),t=s.default.extend(e.data("data"),e.data("extend")),n=t,i=e.data("partials")?e.data("partials").split(","):void 0,a=e.data("template");e.append((0,u.default)(a,n,i))})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(129),u=i(l);(0,s.default)(".NS_banners__social_prompt",function(e){var t=e.data("url");t&&r.default.ajax({url:(0,u.default)(t),type:"get",success:function(t){var n=t.remotely_followed_count;n>0&&(e.find(".js-friend-count").html(n),e.removeClass("banner--is-hidden"))}})})},function(e,t,n){"use strict";var i=n(21),a=function(e){return e&&e.__esModule?e:{default:e}}(i),r=n(0);n(0);r.browser=a.default},function(e,t,n){"use strict";n(54);var i=(n(0),n(0));!function(){i.fn.client_side_asset_uploader=function(){var e=i(this),t=["data-asset-attachable-type","data-asset-method"].map(function(t){return"["+t+'="'+e.attr(t)+'"]'}).join("");e.adhoc_fileuploader({url:e.data("url"),paramsUrl:e.data("params-url"),done:function(e,n){var a=n.files[0],r={file:a,s3_key:n.formData.filter(function(e){return"key"===e.name})[0].value,data_file_name:a.name,data_file_size:a.size,data_content_type:a.type,signed_preview_url:"umm"};i(".js-assets-list"+t).trigger("assets_list:item_added",r)}})}}()},function(e,t,n){"use strict";n(60);var i=n(0);n(0);!function(e){function t(t){this.$container=e(t),this.embed()}e.fn.sound_player=function(){return e(this).each(function(){var n=e(this).data("ksr_video");n||(n=new t(e(this)),e(this).data("sound_player",n))})},e.extend(t.prototype,{embed:function(t){var n="v"+parseInt(1e8*Math.random(),10),i=this;this.$container.find("span").attr("id",n),swfobject.embedSWF("https://d3mlfyygrfdi2i.cloudfront.net/321f/kickplayer.swf",n,this.$container.width(),this.$container.height(),"9.0.115","https://d3mlfyygrfdi2i.cloudfront.net/7b65/expressInstall.swf",{displayheight:this.$container.height(),file:encodeURI(this.$container.attr("data-file")),backcolor:"000000",screencolor:"000000",controlbar:"bottom","controlbar.idlehide":"false",autostart:t,audioonly:!0,skin:"https://d3mlfyygrfdi2i.cloudfront.net/cc3a/kickskin.swf"},{allowscriptaccess:"always",wmode:"opaque",menu:"false"},{id:"sound_player_"+n,class:"ksr_player",name:"sound_player_"+n},function(n){if(n.success)i.jwplayer=jwplayer(n.ref);else{var a=e("<audio />",{src:i.$container.attr("data-file"),controls:!0,autoplay:t});i.$container.html(a),i.$audio=a}}),this.initialized=!0}})}(i)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(7),r=i(a),o=n(1),s=i(o),l=n(0);n(0);!function(e){function t(t){var n=t.data("status-url");n&&e.pollster(n,function(n){var i,a=t.data("track-label");return n.ok?(i=e(n.html),t.replaceWith(i),(0,r.default)({success:s.default.t("library.video_tracks_editor.Successfully_imported_label",{label:a})}),!0):!!n.error&&(i=e(n.html),t.replaceWith(i),(0,r.default)({error:s.default.t("library.video_tracks_editor.Something_went_wrong_while_importing_label",{label:a,error:n.error})}),!0)},{delay:1e3})}e.fn.videoTracksEditor=function(){var n=e(this);n.on("click",".js-add-track",function(t){var n,i=e(t.currentTarget),a=i.closest(".js-subtitles"),r=a.find(".js-language-select"),o=a.find(".js-track-list"),s=r.find("option:selected").val();n=e.ajax({method:"POST",url:i.data("create-track-path"),data:{language:s,captionable_type:i.data("captionable-type"),captionable_id:i.data("captionable-id")},dataType:"json"}),n.success(function(e){o.append(e.html),a.find(".js-empty-tracks").hide(),r.find('option[value="'+s+'"]').prop("disabled",!0),r.ksr_val(r.find("option").not("[disabled]").first().val())}),t.preventDefault()}),n.on("click",".js-captionable--destroy-track",function(t){var n,i=e(t.currentTarget),a=i.closest(".js-subtitles"),r=a.find(".js-language-select"),o=i.data("path");t.preventDefault(),confirm(s.default.t("library.video_tracks_editor.Are_you_sure_you_want_to_delete_this_track"))&&(n=e.ajax({method:"DELETE",url:o}),n.success(function(e){var t=i.data("language");e.ok&&(r.find('option[value="'+t+'"]').prop("disabled",!1),i.closest(".js-captionable--track-item").remove(),0===a.find(".js-captionable--track-item").length&&a.find(".js-empty-tracks").show())}))}),n.on("change",".js-importer--input",function(){var n,i=e(this),a=i.closest(".js-importer"),o=i.closest(".js-captionable--track-item"),l=a.find(".js-importer--text"),u=this.files&&this.files[0],d=new FormData;u&&(i.hide(),l.text(s.default.t("library.video_tracks_editor.Uploading")),d.append("track[file]",u),n=e.ajax({url:i.data("url"),type:"PUT",processData:!1,contentType:!1,data:d}),n.success(function(n){var i;n.ok?(i=e(n.html),o.replaceWith(i),t(i)):(0,r.default)({error:n.error})}),n.error(function(){(0,r.default)({error:s.default.t("library.video_tracks_editor.Something_went_wrong_while_uploading_file",{file:u.name})}),i.show()}))}),n.find(".js-captionable--track-item").each(function(){t(e(this))})}}(l)},function(e,t,n){var i=n(0);n(0);!function(e,t){e.effects={effect:{}},function(e,t){function n(e,t,n){var i=d[t.type]||{};return null==e?n||!t.def?null:t.def:(e=i.floor?~~e:parseFloat(e),isNaN(e)?t.def:i.mod?(e+i.mod)%i.mod:0>e?0:i.max<e?i.max:e)}function i(t){var n=l(),i=n._rgba=[];return t=t.toLowerCase(),h(s,function(e,a){var r,o=a.re.exec(t),s=o&&a.parse(o),l=a.space||"rgba";if(s)return r=n[l](s),n[u[l].cache]=r[u[l].cache],i=n._rgba=r._rgba,!1}),i.length?("0,0,0,0"===i.join()&&e.extend(i,r.transparent),n):r[t]}function a(e,t,n){return n=(n+1)%1,6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}var r,o=/^([\-+])=\s*(\d+\.?\d*)/,s=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],l=e.Color=function(t,n,i,a){return new e.Color.fn.parse(t,n,i,a)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},c=l.support={},f=e("<p>")[0],h=e.each;f.style.cssText="background-color:rgba(1,1,1,.5)",c.rgba=f.style.backgroundColor.indexOf("rgba")>-1,h(u,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),l.fn=e.extend(l.prototype,{parse:function(t,a,o,s){if(void 0===t)return this._rgba=[null,null,null,null],this;(t.jquery||t.nodeType)&&(t=e(t).css(a),a=void 0);var d=this,c=e.type(t),f=this._rgba=[];return void 0!==a&&(t=[t,a,o,s],c="array"),"string"===c?this.parse(i(t)||r._default):"array"===c?(h(u.rgba.props,function(e,i){f[i.idx]=n(t[i.idx],i)}),this):"object"===c?(t instanceof l?h(u,function(e,n){t[n.cache]&&(d[n.cache]=t[n.cache].slice())}):h(u,function(i,a){var r=a.cache;h(a.props,function(e,i){if(!d[r]&&a.to){if("alpha"===e||null==t[e])return;d[r]=a.to(d._rgba)}d[r][i.idx]=n(t[e],i,!0)}),d[r]&&e.inArray(null,d[r].slice(0,3))<0&&(d[r][3]=1,a.from&&(d._rgba=a.from(d[r])))}),this):void 0},is:function(e){var t=l(e),n=!0,i=this;return h(u,function(e,a){var r,o=t[a.cache];return o&&(r=i[a.cache]||a.to&&a.to(i._rgba)||[],h(a.props,function(e,t){if(null!=o[t.idx])return n=o[t.idx]===r[t.idx]})),n}),n},_space:function(){var e=[],t=this;return h(u,function(n,i){t[i.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var i=l(e),a=i._space(),r=u[a],o=0===this.alpha()?l("transparent"):this,s=o[r.cache]||r.to(o._rgba),c=s.slice();return i=i[r.cache],h(r.props,function(e,a){var r=a.idx,o=s[r],l=i[r],u=d[a.type]||{};null!==l&&(null===o?c[r]=l:(u.mod&&(l-o>u.mod/2?o+=u.mod:o-l>u.mod/2&&(o-=u.mod)),c[r]=n((l-o)*t+o,a)))}),this[a](c)},blend:function(t){if(1===this._rgba[3])return this;var n=this._rgba.slice(),i=n.pop(),a=l(t)._rgba;return l(e.map(n,function(e,t){return(1-i)*a[t]+i*e}))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===n[3]&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&t<3&&(e=Math.round(100*e)+"%"),e});return 1===n[3]&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),i=n.pop();return t&&n.push(~~(255*i)),"#"+e.map(n,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,u.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,n,i=e[0]/255,a=e[1]/255,r=e[2]/255,o=e[3],s=Math.max(i,a,r),l=Math.min(i,a,r),u=s-l,d=s+l,c=.5*d;return t=l===s?0:i===s?60*(a-r)/u+360:a===s?60*(r-i)/u+120:60*(i-a)/u+240,n=0===u?0:c<=.5?u/d:u/(2-d),[Math.round(t)%360,n,c,null==o?1:o]},u.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,n=e[1],i=e[2],r=e[3],o=i<=.5?i*(1+n):i+n-i*n,s=2*i-o;return[Math.round(255*a(s,o,t+1/3)),Math.round(255*a(s,o,t)),Math.round(255*a(s,o,t-1/3)),r]},h(u,function(t,i){var a=i.props,r=i.cache,s=i.to,u=i.from;l.fn[t]=function(t){if(s&&!this[r]&&(this[r]=s(this._rgba)),void 0===t)return this[r].slice();var i,o=e.type(t),d="array"===o||"object"===o?t:arguments,c=this[r].slice();return h(a,function(e,t){var i=d["object"===o?e:t.idx];null==i&&(i=c[t.idx]),c[t.idx]=n(i,t)}),u?(i=l(u(c)),i[r]=c,i):l(c)},h(a,function(n,i){l.fn[n]||(l.fn[n]=function(a){var r,s=e.type(a),l="alpha"===n?this._hsla?"hsla":"rgba":t,u=this[l](),d=u[i.idx];return"undefined"===s?d:("function"===s&&(a=a.call(this,d),s=e.type(a)),null==a&&i.empty?this:("string"===s&&(r=o.exec(a))&&(a=d+parseFloat(r[2])*("+"===r[1]?1:-1)),u[i.idx]=a,this[l](u)))})})}),l.hook=function(t){var n=t.split(" ");h(n,function(t,n){e.cssHooks[n]={set:function(t,a){var r,o,s="";if("transparent"!==a&&("string"!==e.type(a)||(r=i(a)))){if(a=l(r||a),!c.rgba&&1!==a._rgba[3]){for(o="backgroundColor"===n?t.parentNode:t;(""===s||"transparent"===s)&&o&&o.style;)try{s=e.css(o,"backgroundColor"),o=o.parentNode}catch(e){}a=a.blend(s&&"transparent"!==s?s:"_default")}a=a.toRgbaString()}try{t.style[n]=a}catch(e){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=l(t.elem,n),t.end=l(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}})},l.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),e.cssHooks.borderColor={expand:function(e){var t={};return h(["Top","Right","Bottom","Left"],function(n,i){t["border"+i+"Color"]=e}),t}},r=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(i),function(){function t(t){var n,i,a=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,r={};if(a&&a.length&&a[0]&&a[a[0]])for(i=a.length;i--;)n=a[i],"string"==typeof a[n]&&(r[e.camelCase(n)]=a[n]);else for(n in a)"string"==typeof a[n]&&(r[n]=a[n]);return r}function n(t,n){var i,a,o={};for(i in n)a=n[i],t[i]!==a&&(r[i]||!e.fx.step[i]&&isNaN(parseFloat(a))||(o[i]=a));return o}var a=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(i.style(e.elem,n,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(i,r,o,s){var l=e.speed(r,o,s);return this.queue(function(){var r,o=e(this),s=o.attr("class")||"",u=l.children?o.find("*").addBack():o;u=u.map(function(){return{el:e(this),start:t(this)}}),r=function(){e.each(a,function(e,t){i[t]&&o[t+"Class"](i[t])})},r(),u=u.map(function(){return this.end=t(this.el[0]),this.diff=n(this.start,this.end),this}),o.attr("class",s),u=u.map(function(){var t=this,n=e.Deferred(),i=e.extend({},l,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,i),n.promise()}),e.when.apply(e,u.get()).done(function(){r(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),l.complete.call(o[0])})})},e.fn.extend({addClass:function(t){return function(n,i,a,r){return i?e.effects.animateClass.call(this,{add:n},i,a,r):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(n,i,a,r){return arguments.length>1?e.effects.animateClass.call(this,{remove:n},i,a,r):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(n,i,a,r,o){return"boolean"==typeof i||void 0===i?a?e.effects.animateClass.call(this,i?{add:n}:{remove:n},a,r,o):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:n},i,a,r)}}(e.fn.toggleClass),switchClass:function(t,n,i,a,r){return e.effects.animateClass.call(this,{add:n,remove:t},i,a,r)}})}(),function(){function t(t,n,i,a){return e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},null==n&&(n={}),e.isFunction(n)&&(a=n,i=null,n={}),("number"==typeof n||e.fx.speeds[n])&&(a=i,i=n,n={}),e.isFunction(i)&&(a=i,i=null),n&&e.extend(t,n),i=i||n.duration,t.duration=e.fx.off?0:"number"==typeof i?i:i in e.fx.speeds?e.fx.speeds[i]:e.fx.speeds._default,t.complete=a||n.complete,t}function n(t){return!(t&&"number"!=typeof t&&!e.fx.speeds[t])||("string"==typeof t&&!e.effects.effect[t]||(!!e.isFunction(t)||"object"==typeof t&&!t.effect))}e.extend(e.effects,{version:"1.10.3",save:function(e,t){for(var n=0;n<t.length;n++)null!==t[n]&&e.data("ui-effects-"+t[n],e[0].style[t[n]])},restore:function(e,t){var n,i;for(i=0;i<t.length;i++)null!==t[i]&&(n=e.data("ui-effects-"+t[i]),void 0===n&&(n=""),e.css(t[i],n))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,i;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=e[1]/t.width}return{x:i,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),float:t.css("float")},i=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),a={width:t.width(),height:t.height()},r=document.activeElement;try{r.id}catch(e){r=document.body}return t.wrap(i),(t[0]===r||e.contains(t[0],r))&&e(r).focus(),i=t.parent(),"static"===t.css("position")?(i.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,i){n[i]=t.css(i),isNaN(parseInt(n[i],10))&&(n[i]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(a),i.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,i,a){return a=a||{},e.each(n,function(e,n){var r=t.cssUnit(n);r[0]>0&&(a[n]=r[0]*i+r[1])}),a}}),e.fn.extend({effect:function(){function n(t){function n(){e.isFunction(r)&&r.call(a[0]),e.isFunction(t)&&t()}var a=e(this),r=i.complete,s=i.mode;(a.is(":hidden")?"hide"===s:"show"===s)?(a[s](),n()):o.call(a[0],i,n)}var i=t.apply(this,arguments),a=i.mode,r=i.queue,o=e.effects.effect[i.effect];return e.fx.off||!o?a?this[a](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)}):r===!1?this.each(n):this.queue(r||"fx",n)},show:function(e){return function(i){if(n(i))return e.apply(this,arguments);var a=t.apply(this,arguments);return a.mode="show",this.effect.call(this,a)}}(e.fn.show),hide:function(e){return function(i){if(n(i))return e.apply(this,arguments);var a=t.apply(this,arguments);return a.mode="hide",this.effect.call(this,a)}}(e.fn.hide),toggle:function(e){return function(i){if(n(i)||"boolean"==typeof i)return e.apply(this,arguments);var a=t.apply(this,arguments);return a.mode="toggle",this.effect.call(this,a)}}(e.fn.toggle),cssUnit:function(t){var n=this.css(t),i=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(i=[parseFloat(n),t])}),i}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?n(2*e)/2:1-n(e*-2+2)/2}})}()}(i)},function(e,t,n){var i=n(0);n(0);!function(e,t){function n(e){return parseInt(e,10)||0}function i(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,n,i,a,r,o=this,s=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!s.aspectRatio,aspectRatio:s.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:s.helper||s.ghost||s.animate?s.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=s.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},n=0;n<t.length;n++)i=e.trim(t[n]),r="ui-resizable-"+i,a=e("<div class='ui-resizable-handle "+r+"'></div>"),a.css({zIndex:s.zIndex}),"se"===i&&a.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[i]=".ui-resizable-"+i,this.element.append(a);this._renderAxis=function(t){var n,i,a,r;t=t||this.element;for(n in this.handles)this.handles[n].constructor===String&&(this.handles[n]=e(this.handles[n],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(i=e(this.handles[n],this.element),r=/sw|ne|nw|se|n|s/.test(n)?i.outerHeight():i.outerWidth(),a=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(a,r),this._proportionallyResize()),e(this.handles[n]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=a&&a[1]?a[1]:"se")}),s.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){s.disabled||(e(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){s.disabled||o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_mouseCapture:function(t){var n,i,a=!1;for(n in this.handles)((i=e(this.handles[n])[0])===t.target||e.contains(i,t.target))&&(a=!0);return!this.options.disabled&&a},_mouseStart:function(t){var i,a,r,o=this.options,s=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:s.top,left:s.left}),this._renderProxy(),i=n(this.helper.css("left")),a=n(this.helper.css("top")),o.containment&&(i+=e(o.containment).scrollLeft()||0,a+=e(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:a},this.size=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:i,top:a},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,r=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===r?this.axis+"-resize":r),l.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,i=this.helper,a={},r=this.originalMousePosition,o=this.axis,s=this.position.top,l=this.position.left,u=this.size.width,d=this.size.height,c=t.pageX-r.left||0,f=t.pageY-r.top||0,h=this._change[o];return!!h&&(n=h.apply(this,[t,c,f]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(n=this._updateRatio(n,t)),n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),this.position.top!==s&&(a.top=this.position.top+"px"),this.position.left!==l&&(a.left=this.position.left+"px"),this.size.width!==u&&(a.width=this.size.width+"px"),this.size.height!==d&&(a.height=this.size.height+"px"),i.css(a),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(a)||this._trigger("resize",t,this.ui()),!1)},_mouseStop:function(t){this.resizing=!1;var n,i,a,r,o,s,l,u=this.options,d=this;return this._helper&&(n=this._proportionallyResizeElements,i=n.length&&/textarea/i.test(n[0].nodeName),a=i&&e.ui.hasScroll(n[0],"left")?0:d.sizeDiff.height,r=i?0:d.sizeDiff.width,o={width:d.helper.width()-r,height:d.helper.height()-a},s=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,l=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null,u.animate||this.element.css(e.extend(o,{top:l,left:s})),d.helper.height(d.size.height),d.helper.width(d.size.width),this._helper&&!u.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,n,a,r,o,s=this.options;o={minWidth:i(s.minWidth)?s.minWidth:0,maxWidth:i(s.maxWidth)?s.maxWidth:1/0,minHeight:i(s.minHeight)?s.minHeight:0,maxHeight:i(s.maxHeight)?s.maxHeight:1/0},(this._aspectRatio||e)&&(t=o.minHeight*this.aspectRatio,a=o.minWidth/this.aspectRatio,n=o.maxHeight*this.aspectRatio,r=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),a>o.minHeight&&(o.minHeight=a),n<o.maxWidth&&(o.maxWidth=n),r<o.maxHeight&&(o.maxHeight=r)),this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),i(e.left)&&(this.position.left=e.left),i(e.top)&&(this.position.top=e.top),i(e.height)&&(this.size.height=e.height),i(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,a=this.axis;return i(e.height)?e.width=e.height*this.aspectRatio:i(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===a&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"===a&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,a=i(e.width)&&t.maxWidth&&t.maxWidth<e.width,r=i(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=i(e.width)&&t.minWidth&&t.minWidth>e.width,s=i(e.height)&&t.minHeight&&t.minHeight>e.height,l=this.originalPosition.left+this.originalSize.width,u=this.position.top+this.size.height,d=/sw|nw|w/.test(n),c=/nw|ne|n/.test(n);return o&&(e.width=t.minWidth),s&&(e.height=t.minHeight),a&&(e.width=t.maxWidth),r&&(e.height=t.maxHeight),o&&d&&(e.left=l-t.minWidth),a&&d&&(e.left=l-t.maxWidth),s&&c&&(e.top=u-t.minHeight),r&&c&&(e.top=u-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,n,i,a,r=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){if(a=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],n=[a.css("borderTopWidth"),a.css("borderRightWidth"),a.css("borderBottomWidth"),a.css("borderLeftWidth")],i=[a.css("paddingTop"),a.css("paddingRight"),a.css("paddingBottom"),a.css("paddingLeft")],t=0;t<n.length;t++)this.borderDif[t]=(parseInt(n[t],10)||0)+(parseInt(i[t],10)||0);a.css({height:r.height()-this.borderDif[0]-this.borderDif[2]||0,width:r.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize;return{left:this.originalPosition.left+t,width:n.width-t}},n:function(e,t,n){var i=this.originalSize;return{top:this.originalPosition.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},sw:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,i]))},ne:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},nw:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,i]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),"resize"!==t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).data("ui-resizable"),i=n.options,a=n._proportionallyResizeElements,r=a.length&&/textarea/i.test(a[0].nodeName),o=r&&e.ui.hasScroll(a[0],"left")?0:n.sizeDiff.height,s=r?0:n.sizeDiff.width,l={width:n.size.width-s,height:n.size.height-o},u=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,d=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(l,d&&u?{top:d,left:u}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};a&&a.length&&e(a[0]).css({width:i.width,height:i.height}),n._updateCache(i),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,i,a,r,o,s,l,u=e(this).data("ui-resizable"),d=u.options,c=u.element,f=d.containment,h=f instanceof e?f.get(0):/parent/.test(f)?c.parent().get(0):f;h&&(u.containerElement=e(h),/document/.test(f)||f===document?(u.containerOffset={left:0,top:0},u.containerPosition={left:0,top:0},u.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(h),i=[],e(["Top","Right","Left","Bottom"]).each(function(e,a){i[e]=n(t.css("padding"+a))}),u.containerOffset=t.offset(),u.containerPosition=t.position(),u.containerSize={height:t.innerHeight()-i[3],width:t.innerWidth()-i[1]},a=u.containerOffset,r=u.containerSize.height,o=u.containerSize.width,s=e.ui.hasScroll(h,"left")?h.scrollWidth:o,l=e.ui.hasScroll(h)?h.scrollHeight:r,u.parentData={element:h,left:a.left,top:a.top,width:s,height:l}))},resize:function(t){var n,i,a,r,o=e(this).data("ui-resizable"),s=o.options,l=o.containerOffset,u=o.position,d=o._aspectRatio||t.shiftKey,c={top:0,left:0},f=o.containerElement;f[0]!==document&&/static/.test(f.css("position"))&&(c=l),u.left<(o._helper?l.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-l.left:o.position.left-c.left),d&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=s.helper?l.left:0),u.top<(o._helper?l.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-l.top:o.position.top),d&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?l.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top,n=Math.abs((o._helper,o.offset.left-c.left+o.sizeDiff.width)),i=Math.abs((o._helper?o.offset.top-c.top:o.offset.top-l.top)+o.sizeDiff.height),a=o.containerElement.get(0)===o.element.parent().get(0),r=/relative|absolute/.test(o.containerElement.css("position")),a&&r&&(n-=o.parentData.left),n+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-n,d&&(o.size.height=o.size.width/o.aspectRatio)),i+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-i,d&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),n=t.options,i=t.containerOffset,a=t.containerPosition,r=t.containerElement,o=e(t.helper),s=o.offset(),l=o.outerWidth()-t.sizeDiff.width,u=o.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(r.css("position"))&&e(this).css({left:s.left-a.left-i.left,width:l,height:u}),t._helper&&!n.animate&&/static/.test(r.css("position"))&&e(this).css({left:s.left-a.left-i.left,width:l,height:u})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,i=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof n.alsoResize||n.alsoResize.parentNode?i(n.alsoResize):n.alsoResize.length?(n.alsoResize=n.alsoResize[0],i(n.alsoResize)):e.each(n.alsoResize,function(e){i(e)})},resize:function(t,n){var i=e(this).data("ui-resizable"),a=i.options,r=i.originalSize,o=i.originalPosition,s={height:i.size.height-r.height||0,width:i.size.width-r.width||0,top:i.position.top-o.top||0,left:i.position.left-o.left||0},l=function(t,i){e(t).each(function(){var t=e(this),a=e(this).data("ui-resizable-alsoresize"),r={},o=i&&i.length?i:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(a[t]||0)+(s[t]||0);n&&n>=0&&(r[t]=n||null)}),t.css(r)})};"object"!=typeof a.alsoResize||a.alsoResize.nodeType?l(a.alsoResize):e.each(a.alsoResize,function(e,t){l(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,i=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof n.ghost?n.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),n=t.options,i=t.size,a=t.originalSize,r=t.originalPosition,o=t.axis,s="number"==typeof n.grid?[n.grid,n.grid]:n.grid,l=s[0]||1,u=s[1]||1,d=Math.round((i.width-a.width)/l)*l,c=Math.round((i.height-a.height)/u)*u,f=a.width+d,h=a.height+c,p=n.maxWidth&&n.maxWidth<f,m=n.maxHeight&&n.maxHeight<h,g=n.minWidth&&n.minWidth>f,v=n.minHeight&&n.minHeight>h;n.grid=s,g&&(f+=l),v&&(h+=u),p&&(f-=l),m&&(h-=u),/^(se|s|e)$/.test(o)?(t.size.width=f,t.size.height=h):/^(ne)$/.test(o)?(t.size.width=f,t.size.height=h,t.position.top=r.top-c):/^(sw)$/.test(o)?(t.size.width=f,t.size.height=h,t.position.left=r.left-d):(t.size.width=f,t.size.height=h,t.position.top=r.top-c,t.position.left=r.left-d)}})}(i)},,,,,,function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);n(59),function(){(0,a.default)(function(){var e=(0,a.default)(".js-mega-footer");e.length&&function(){function t(e){e>9||(s.removeClass(r[o]),o+=1,o===r.length&&(o=0),s.addClass(r[o]),setTimeout(function(){t(e+1)},100))}var n,i=0,r=["icon-scissors-1","icon-scissors-2","icon-scissors-3"],o=0,s=(0,a.default)("span.scissors",e);s.click(function(){n||(n=(0,a.default)(".js-mega-footer__content").width()/3),i+=1,t(0),s.animate({marginLeft:n*i},1e3,function(){3===i&&(s.hide(),e.height(e.height()),e.addClass("gone"),(0,a.default)("html").addClass("gone"),(0,a.default)(".js-mini-footer").hide(),e.find(".js-mega-footer__content").animate({marginTop:[e.height(),"easeInOutExpo"],opacity:0},1e3,function(){(0,a.default)(".js-mega-footer__newsletter-signup").fadeIn()}))})}),(0,a.default)(document).on("change",".js-change-language",function(){(0,a.default)(this).submit()})}()})}()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a);n(25),n(33),n(34),n(125),n(30),n(35),n(50);var o=n(3),s=i(o),l=n(21),u=i(l),d=n(12),c=n(1),f=i(c),h=n(19),p=i(h),m=n(20),g=i(m),v=n(5),_=n(37);n(28);var y=n(15),b=i(y);(0,r.default)(function(){function e(e){if(!r.default.support.transitionEvent())return 0;var t=e.css("transition-duration");return/ms$/.test(t)?parseFloat(t,10)||0:1e3*parseFloat(t,10)||0}function t(e,t,n,i){e.which===d.DOWN&&n.is(".selected")?(i.find(":tabbable:first").focus(),e.preventDefault()):e.which!==d.DOWN||n.is(".selected")?e.which===d.UP&&n.is(".selected")?(t.click(),e.preventDefault()):e.which===d.SPACE&&(t.click(),e.preventDefault()):(t.click(),e.preventDefault())}function n(e,t,n){var i,a,o=(0,r.default)(e.target),s=n.find(":tabbable"),l=s.length,u=s.index(o);e.which===d.LEFT||e.which===d.RIGHT?(a=e.which===d.LEFT?-1:1,i=n.find(".js-dropdown_group"),u=i.index(o.closest(i)),i.length>0&&u!==-1&&u+a>=0&&u+a<i.length&&(u+=a,i.eq(u).find(":tabbable:first").focus()),e.preventDefault()):e.which===d.UP&&0===u?(t.focus(),e.preventDefault()):e.which===d.DOWN&&u===l-1?e.preventDefault():e.which!==d.DOWN&&e.which!==d.UP||(a=e.which===d.DOWN?1:-1,s.eq(u+a).focus(),e.preventDefault())}function i(e){X=e,X?V.addClass("selecting"):(V.removeClass("selecting"),q.find(".js-livesearch-result").removeClass("selected"))}function a(){var e=R.find(".ksr-icon__close");B.trigger("livesearch:cancel"),B.val(""),e.hide(),ee.hide(),U.slideUp(function(){V.empty(),M&&W.fadeOut(200),Z.empty(),ee.empty()}),I.removeClass("searching")}function o(){q.find(".js-livesearch-result").length<ie?U.find(".arrow").addClass("hide"):(U.find(".arrow").removeClass("hide"),0===q.data("cur_page")&&q.find(".js-prev").addClass("hide"),q.data("cur_page")===q.data("last_page")&&q.find(".js-next").addClass("hide"))}function l(e){e.preventDefault(),R.removeClass("submitting-non-ajax")}function c(e){e?R.off("submit",l):R.on("submit",l)}function h(e,t){return e.attr("class").indexOf(t)!==-1}function m(e,t){e.attr("class",function(e,n){return n+" "+t})}function y(e,t){e.attr("class",function(e,n){var i=new RegExp(t,"g");return n.replace(i,"").trim()})}function w(e,t){t.addClass("livesearch-list"),s.default.each(e.projects,function(e){e.url_ref="nav_search",t.append('<li class="livesearch-result js-livesearch-result">'+(0,p.default)("projects/_baseball_card_tall",e,["projects/_baseball_card_tall_spotlight","projects/_baseball_card_tall_standard"])+"</li>")}),(0,v.trackLinks)(".js-livesearch-result a","Clicked Search Result",{discover_term:B.val(),type:"search_preview"})}function k(e){Z.html(e.header),e.footer?(ee.html(e.footer),ee.show()):(ee.empty(),ee.hide())}function j(e,t,n){e.projects.length>ie?(G.html(t),G.prop("href",n),G.removeClass("hidden"),J.addClass("hidden")):(J.html(f.default.t("onloads.views.layouts.navigation.Displaying_all_amount_results",{count:e.projects.length})),J.removeClass("hidden"),G.addClass("hidden"))}function x(e){V.html(e),I.addClass("searching"),U.slideDown("fast"),M&&W.fadeIn(200),V.trigger("goto",[0]),q.data("cur_page",0),q.data("last_page",Math.floor((e.children().length-1)/ie)),o(),i(!1)}function C(){clearTimeout(z),h(Q,"hide")||(m(Q,"hide"),y(K,"hide"))}function S(){Y.addClass("hide")}function E(){Y.removeClass("hide")}function T(){return r.default.getJSON(ae)}function A(e){var t=(0,r.default)("<ul></ul>");t.addClass("livesearch-list");var n=ae+"?ref=nav_search_no_results&sort=newest",i=f.default.t("onloads.views.layouts.navigation.Show_more_term_projects",{term:(0,r.default)(".js-livesearch-no-results").data("filler-type")}),a=(0,r.default)("<b></b>");a.addClass("h3 center block").html(f.default.t("onloads.views.layouts.navigation.Oops_looks_like_we_couldnt_find_any_search_results"));var o=(0,r.default)("<div></div>");o.addClass("h4 center m4").html(f.default.t("onloads.views.layouts.navigation.Or_explore_some_of_our_most_popular_projects")),Y.text()||Y.append(a,o),E(),w(e,t),k(e),j(e,i,n),x(t)}function P(e){var t=(0,r.default)("<ul></ul>");t.addClass("livesearch-list");var n=e.search_url,i=f.default.t("onloads.views.layouts.navigation.See_all_results_for_term",{term:B.val()});S(),w(e,t),k(e),j(e,i,n),x(t)}function D(){Y.is(":visible")?C():T().then(function(e){A(e),C()})}var I=(0,r.default)("body"),M=window.enabled_features.sticky_nav&&!I.hasClass("project");if(M){var N=[".js-admin-nav-wrap"],O=(0,_.combineHeight)([".js-site-nav-container"].concat(N));(0,_.setupScrollLocking)({element:".js-site-nav-body",offsets:N}),g.default["not-touchable"]&&((0,_.setupScrollLocking)({element:".js-livesearch-wrap",offsets:N}),(0,_.setupScrollLocking)({element:".js-user-dropdown",offsets:[".js-site-nav-body"].concat(N),styles:function(){return{onLock:{"max-height":"calc(100% - "+O+"px)"},offLock:{"max-height":"initial"}}}}))}(0,r.default)(".js-discover-link").click(function(){(0,v.track)("About KSR Navigation Discover Click")}),(0,r.default)(".js-start-link").click(function(){(0,v.track)("About KSR Navigation Start Click")}),(0,r.default)(".js-about-us-link").click(function(){(0,v.track)("About KSR Navigation About Us Click")}),void 0!==b.default&&b.default.on_change("name",function(e){(0,r.default)(".js-user-menu .user_context strong").text(e.name)}),KSR.store.getItem("banner_country_projects_hide")||((0,r.default)(".country_tout").removeClass("hidden"),KSR.store.getItem("banner_country_projects_animated")?((0,r.default)(".country_tout").css({"margin-top":"0px"}),(0,r.default)(".country_tout").addClass("expanded")):(0,r.default)(".country_tout").delay(1200).animate({marginTop:"0px"},400,"easeOutExpo",function(){(0,r.default)(this).addClass("expanded"),KSR.store.setItem("banner_country_projects_animated",!0)})),(0,r.default)(".country_tout .close").click(function(){(0,r.default)(".country_tout").animate({"margin-top":"-40px"},400,"easeOutExpo"),(0,r.default)(".country_tout").removeClass("expanded"),(0,r.default)(".country_tout").addClass("hidden")}),(0,r.default)(".country_tout a, .country_tout .close").on("click",function(){KSR.store.setItem("banner_country_projects_hide",!0)}),(0,r.default)("#js-user_menu_dropdown").attr("aria-expanded","false").attr("aria-hidden","true"),(0,r.default)("#js-user_nav_select").attr("aria-haspopup","true").attr("aria-expanded","false"),(0,r.default)("#js-nav-secondary").attr("aria-hidden","true"),(0,r.default)("#js-nav-secondary").find("a").each(function(e,t){(0,r.default)(t).attr("tabindex","-1")}),(0,r.default)("#js-nav-search").attr("aria-hidden","true"),(0,r.default)(".js-search-term").attr("tabindex","-1");var R=(0,r.default)(".js-header-livesearch"),L=(0,r.default)(".js-site-nav-container"),F=(0,r.default)("#js-nav-search"),$=(0,r.default)("#js-nav-primary"),B=R.find(".js-search-term"),H=function(){L.removeClass("site-nav--search-is-visible"),F.attr("aria-hidden","true"),$.attr("aria-hidden","false"),B.attr("tabindex","-1")};if((0,r.default)(".js-toggle-search").on("click",function(t){t.preventDefault();var n=e(F)+30;L.hasClass("site-nav--search-is-visible")?(a(),H(),setTimeout(function(){$.find(".js-toggle-search").focus(),(0,r.default)(".js-searchbar").removeClass("site-nav__item--searchbar--visible")},n)):(L.addClass("site-nav--search-is-visible"),$.attr("aria-hidden","true"),F.attr("aria-hidden","false"),B.attr("tabindex","0"),setTimeout(function(){B.focus(),(0,r.default)(".js-searchbar").addClass("site-nav__item--searchbar--visible")},n)),(0,v.track)("Clicked Search Bar")}),(0,r.default)(".js-tab-expand").click(function(e){e.preventDefault();var t=(0,r.default)(this),n=t.closest(".js-user_menu_dropdown"),i=!0;n.is("#menu-sub-me")?(0,r.default)("#menu-sub-me").trigger("user_dropdown:open"):(n.addClass("selected"),(0,r.default)(".js-user-dropdown").addClass("selected")),t.focus(),(0,r.default)("#js-user_menu_dropdown").attr("aria-expanded","true").attr("aria-hidden","false"),(0,r.default)("#js-user_nav_select").attr("aria-expanded","true"),n.find("span.count").remove(),(0,r.default)(document).on("click."+n.attr("id"),function(e){if(i)return void(i=!1);(0,r.default)(e.target).parents(".dropdown-child").length||((0,r.default)(document).off("click."+n.attr("id")),n.removeClass("selected"),(0,r.default)(".js-user-dropdown").removeClass("selected"),(0,r.default)("#js-user_menu_dropdown").attr("aria-expanded","false").attr("aria-hidden","true"),(0,r.default)("#js-user_nav_select").attr("aria-expanded","false"))})}),(0,r.default)("#js-user_nav_select, .js-user-dropdown").on("keydown",function(e){var i=(0,r.default)(e.target),a=(0,r.default)(".js-user-dropdown"),o=(0,r.default)("#js-user_nav_select"),s=(0,r.default)(".js-user-dropdown");e.which===d.ESC?(o.click(),e.preventDefault()):i.is(o)?t(e,o,a,s):i.closest(s).length&&n(e,o,s)}),!(u.default.msie&&u.default.version<=6||(0,r.default)("body.touchable").length)){var z,W=(0,r.default)(".js-livesearch-overlay"),U=(0,r.default)(".js-livesearch-wrap"),q=(0,r.default)(".js-livesearch-container"),V=(0,r.default)(".js-livesearch-results"),Y=(0,r.default)(".js-livesearch-no-results"),G=(0,r.default)(".js-livesearch-see-all-results"),J=(0,r.default)(".js-livesearch-displaying-results"),X=!1,K=B.siblings(".svg-icon__search"),Q=B.siblings(".js-loading-spinner"),Z=q.find(".header"),ee=q.find("p.footer"),te=q.find(".js-close"),ne=R.find(".ksr-icon__close"),ie=4,ae=(0,r.default)(".js-livesearch-no-results").data("filler-projects-url");V.serialScroll({items:".js-livesearch-result",lazy:!0,lock:!1,step:ie,cycle:!1,duration:500}),U.on("click",".js-next:not(.disabled)",function(){V.trigger("next"),q.data("cur_page",q.data("cur_page")+1),o(),X&&i(!1)}),U.on("click",".js-prev:not(.disabled)",function(){V.trigger("prev"),q.data("cur_page",q.data("cur_page")-1),o(),X&&i(!1)}),B.livesearch({minimum_characters:2,file_extension:"json",process_data:function(){return{term:B.val().trim(),ref:"nav_search"}}}).data("livesearch"),B.on("livesearch:searching",function(){z=setTimeout(function(){m(K,"hide"),y(Q,"hide")},750),c(!1)}),B.on("keypress keydown cut paste input",function(e){13!==e.keyCode&&(27===e.keyCode&&(0,r.default)(".js-toggle-search:first").click(),c(!1))}),B.on("livesearch:results livesearch:ajax_error",function(){c(!0)}),B.on("livesearch:ajax_error",function(){C()}),B.on("livesearch:results",function(e,t){t.projects&&t.projects.length?(P(t),C()):D()}),(0,r.default)(window).on("scroll",function(){U.is(":visible")&&(0,r.default)(window).scrollTop()>q.offset().top+q.height()&&a()}),(0,r.default)(document).click(function(e){(0,r.default)(e.target).closest(".js-livesearch-wrap").length||(0,r.default)(e.target).closest(".js-search-term, .site-nav__right").length||(a(),H())}),B.on("keypress cut paste input",function(){this.value?ne.show():(ne.hide(),a())}),ne.on("click",function(){a(),B.focus()}),te.on("click",a),(0,r.default)(document).on("select",".js-livesearch-container .js-livesearch-result",function(){var e=(0,r.default)(this),t=q.find(".js-livesearch-result.selected").removeClass("selected");e.addClass("selected"),i(!0),e.index()>t.index()&&e.index()%ie==0?V.trigger("goto",[e.index()]):e.index()<t.index()&&t.index()%ie==0&&V.trigger("goto",[t.index()-ie]),q.data("cur_page",Math.floor(e.index()/ie)),o()}),B.on("keydown",function(e){var t,n=q.find("li.selected"),a=!!n.length;switch(e.keyCode){case d.UP:i(!1),e.preventDefault();break;case d.DOWN:a||q.find(".js-livesearch-result:first").trigger("select"),i(!0),e.preventDefault();break;case d.LEFT:if(!X)break;a?n.prev("li").trigger("select"):q.find(".js-livesearch-result:first").trigger("select"),e.preventDefault();break;case d.RIGHT:if(!X)break;a?n.next("li").trigger("select"):q.find(".js-livesearch-result:last").trigger("select"),e.preventDefault();break;case d.ENTER:if(!X)break;if(!(t=n.find("h2 strong a").attr("href")))break;window.location=t,e.preventDefault();break;case d.ESC:i(!1),e.preventDefault()}})}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(3),s=i(o),l=n(2),u=i(l),d=n(8),c=i(d),f=n(37),h=n(1),p=i(h);(0,u.default)(".NS_layouts__notifications",function(e){function t(t){var n=(0,r.default)(".ksr-banner__text",e);if(0!==n.length){var i=s.default.pairs(s.default.countBy((0,r.default)(".ksr-alert-box",e).map(function(){return(0,r.default)(this).data("category")}).get(),function(e){return e})),a=s.default.reduce(i,function(e,t){return e+t[1]},0),o=(0,r.default)(".js-cta",e),l=(0,r.default)(".ksr-banner__button.js-dismiss",e),u=(0,r.default)(".js-default-toggle",e);if(1===a&&t){n.html((0,r.default)(".ksr-alert-box .alert-content",e).html());var d=(0,r.default)(".ksr-alert-box .alert-cta")[0];d?(o.html(d),o.show()):(o.html(""),o.hide());var f=(0,r.default)(".ksr-alert-box .alert-close",e);f.length?(l[0].setAttribute("href",f.attr("href")),l.show()):l.hide(),u.hide()}else{var h=s.default.map(i,function(e){return e[0]}).sort().map(function(e){return"<strong>"+p.default.t(e)+"</strong>"}),m="<strong>"+p.default.t("banners.title.alerts",{count:a})+"</strong>",g=c.default.to_sentence(h);n.html(p.default.t("banners.title.text",{alerts:m,categories:g})),(0,r.default)(".ksr-alert-title--urgent",e).text(p.default.t("banners.subtitles.urgent")),(0,r.default)(".ksr-alert-title--nonurgent",e).text(2===(0,r.default)(".alert-section",e).length?p.default.t("banners.subtitles.nonurgent.more"):p.default.t("banners.subtitles.nonurgent.less")),o.hide(),l.hide(),u.show()}(0,r.default)(".ksr-banner-buttons",e).show()}}t(!0),e.on("click",".js-dismiss",function(){function e(e){e.slideUp(200,function(){(0,r.default)(this).remove(),t(!1),window.enabled_features.sticky_nav&&(0,f.rebindScroll)()})}var n=(0,r.default)(this),i=n.closest(".ksr-banner"),a=n.closest(".alert-wrap"),o=".ksr-alert-box";return e(1===i.find(o).length?i:1===a.find(o).length?a:n.closest(o)),r.default.post(n.attr("href"),{_method:"delete"}),!1}),e.on("click",".js-banners-toggle",function(){(0,r.default)(".ksr-banner",e).toggleClass("ksr-banner--open",500),(0,r.default)(".alert-container",e).toggleClass("alert-container--open",500),setTimeout(function(){window.enabled_features.sticky_nav&&(0,f.rebindScroll)()},501)})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(1),s=i(o);n(28);var l=n(5);!function(){(0,r.default)(function(){function e(){i.find("#menu-me-backed").length&&i.find(".user-dropdown").addClass("backer"),i.find("#menu-me-created").length&&i.find(".user-dropdown").addClass("creator")}function t(t){var n=i.find("#menu-me-children");KSR.store.setItem("user_dropdown_backer_creator_columns_html",t),n.children(".NS_layouts__user_dropdown_backer_creator_columns").remove(),n.append(t),e()}function n(e){o||(o=r.default.ajax({url:i.data("user_dropdown_backer_creator_columns_path"),type:"get",dataType:"html",data:{i18n:s.default.enabled},beforeSend:function(e){e.setRequestHeader("Accept","text/javascript, */*")},success:function(e){t(e),a=!0},complete:function(){e&&e(),o=!1}}))}var i=(0,r.default)(".NS_layouts__user_dropdown"),a=!1,o=!1;!function(){var e=KSR.store.getItem("user_dropdown_backer_creator_columns_html");e&&(t(e),a=!0)}(),e(),(0,r.default)(".js-user-menu-tab").on("user_dropdown:open",function(){var e=(0,r.default)(this);a?e.addClass("selected"):n(function(){e.addClass("selected")})}),(0,r.default)(".js-user-menu-tab, .js-user-menu-tab > a").one("click",function(){(0,l.track)("Account Menu Dropdown",{new_indicator_visible:(0,r.default)(this).find(".indicator").is(":visible")}),n()}),(0,r.default)(document).on("user_dropdown:refresh_from_remote",function(){n()}),(0,r.default)("body").is(".just_logged_out")&&KSR.store.removeItem("user_dropdown_backer_creator_columns_html")})}()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(3),r=i(a),o=n(21),s=i(o),l=n(12),u=n(1),d=i(u);n(252),n(56),n(28),n(150),n(60);var c=n(0);n(0);!function(e){function t(t){this.$c=e(t),this.video_data=this.$c.data("video")||{},this.autostarting=!1;var n=this.$c.find("video");n.get(0)&&n.get(0).canPlayType&&(n.get(0).canPlayType("video/mp4")||n.hasClass("has_webm"))&&(this.$video=n,this.video=n.get(0),s.default.chrome&&this.$video.attr("controls","controls").removeAttr("controls"),this.$c.addClass("vertically_center")),this.initialize(),(window.location.search.match("play="+(this.$c.attr("id")||this.video_data.id))||this.$c.hasClass("autoplay"))&&(this.autostarting=!0,this.play()),this.$c.hasClass("muted")&&this.mute(),this.add_size_class(),this.bind_events()}e.fn.ksr_video=function(){return e(this).each(function(){var n=e(this).data("ksr_video");n||(n=new t(e(this)),e(this).data("ksr_video",n))})},e.extend(t.prototype,{overlay:function(){var t=this;this.$c.children(":not(video)").hide(),this.$overlay=e('<div class="overlay"><span class="button-playvideo"></span></div>'),this.$overlay.on("click",function(e){t.initialize_flash(),t.$overlay.remove(),e.preventDefault()}),this.$c.append(this.$overlay)},bind_events:function(){var e=this;this.$c.on("ksr_video:play",function(){e.play()}),this.$c.on("ksr_video:pause",function(){e.pause()}),this.$c.on("ksr_video:mute",function(){e.mute()}),this.$c.on("ksr_video:unmute",function(){e.unmute()}),this.$c.on("ksr_video:destroy",function(){e.destroy()}),this.$c.on("ksr_video:seek",function(t,n,i){e.seek(n,i)})},add_size_class:function(){this.$c.removeClass("small medium large"),this.$c.width()>600?this.$c.addClass("large"):this.$c.width()>400?this.$c.addClass("large"):this.$c.addClass("small")},bind_video_element:function(){var e=this,t=this.$video,n=!0;this.$video.on("loadedmetadata",function(){e.$c.trigger("ksr_video:loaded")}),t.bind("ended",function(){e.$c.trigger("ksr_video:ended")}),t.on("play",function(){e.$c.trigger("ksr_video:playing",[n]),e.$c.addClass("has_played"),e.autostarting?e.autostarting=!1:e.focus_playpause_button(),n=!1}),t.on("pause",function(){e.$c.trigger("ksr_video:paused"),e.focus_playpause_button()}),t.on("progress",function(){var t,n,i,a=e.video.buffered,o=[];if(a.length)for(t=0;t<a.length;t+=1)o.push(a.end(t));n=r.default.max(o),i=n/e.video.duration*100,e.$c.trigger("ksr_video:buffer_change",[n,i])}),t.on("timeupdate",function(){e.$c.trigger("ksr_video:time_update",[e.video.currentTime])})},bind_controls:function(){function t(e){var t=Math.floor(e/60),n=Math.floor(e-60*t);return t+":"+(n<10?"0":"")+n}function n(){i()?(_.removeClass("visible"),_.trigger("ksr_video:controls_hidden")):s()}function i(){return!_.is(":hover")}function a(){_.addClass("visible"),_.trigger("ksr_video:controls_shown")}function o(){clearTimeout(I)}function s(){o(),I=setTimeout(n,2e3)}function u(){var e=v.video.duration;e&&(v.$c.find(".total_time").text(t(e)).attr("datetime","PT"+Math.floor(e)+"S"),k.attr("aria-valuenow",v.video.currentTime).attr("aria-valuemin","0").attr("aria-valuemax",e))}function c(e){return e.which===l.LEFT?-1:e.which===l.RIGHT?1:null}function f(e,t,n){return Math.min(n,Math.max(t,e))}function h(e,t){var n=t.delta,i=t.direction,r=t.max,o=v.video[e];i&&(o=f(o+n*i,0,r),v.video[e]=o,a(),s())}function p(){var e=v.video.volume;KSR.store.setItem("ksr_video_volume",e),v.video.muted?(e=0,E.addClass("muted").attr("aria-label",d.default.t("library.ksr_video.Unmute"))):E.removeClass("muted").attr("aria-label",d.default.t("library.ksr_video.Mute"));var t=100*e+"%";x.width(t),C.css("left",t),C.attr("aria-valuenow",e)}function m(t){var n=P.find(".js-track"),i=t?n.filter('[data-language="'+t+'"]'):e();0===i.length&&(i=n.filter(".js-captions-off"),t=void 0),n.removeClass("selected"),i.addClass("selected"),i.is(".js-captions-off")?_.find(".ksr-icon__closed-caption").removeClass("is-on"):_.find(".ksr-icon__closed-caption").addClass("is-on"),v.$c.data("language",t),r.default.each(v.video.textTracks,function(e){e.mode=e.language===t?"showing":"hidden"})}function g(){v.$c.trigger("ksr_video:volume_adjusted")}var v=this,_=this.$c.find(".player_controls"),y=_.find(".progress_container .progress_bg"),b=y.find(".buffer"),w=y.find(".progress"),k=y.find(".progress_handle"),j=_.find(".volume_container .progress_bg"),x=j.find(".progress"),C=j.find(".progress_handle"),S=_.find(".current_time"),E=_.find(".volume"),T=_.find(".playpause"),A=_.find(".video_track_list"),P=_.find(".js-caption-dropdown"),D={x:0,y:0},I=!1;this.$c.on("mousemove touchstart touchmove",function(e){var t={x:e.pageX,y:e.pageY};v.playing()&&("touchstart"===e.type||Math.abs(t.x-D.x)+Math.abs(t.y-D.y)>20)&&(a(),s(),D=t)}),u(),this.$video.on("click",function(){v.playpause()}),this.$c.find(".play_button_big, img.poster").on("click",function(e){v.play(),e.preventDefault()}),this.$c.on("focus click",":tabbable",function(){v.playing()&&(a(),s())}),this.$c.on("keydown",'[role="button"]',function(t){t.which!==l.ENTER&&t.which!==l.SPACE||(e(this).click(),t.preventDefault())}),this.$c.on("keydown",'.progress_container [role="slider"]',function(e){h("currentTime",{delta:.05*v.video.duration,direction:c(e),max:v.video.duration})}),this.$c.on("keydown",'.volume_container [role="slider"]',function(e){h("volume",{delta:.05,direction:c(e),max:1})}),this.$c.on("ksr_video:loaded",function(){u(),C.attr("aria-valuemin","0").attr("aria-valuemax","1"),p()}),this.$video.on("volumechange",function(){p()}).on("play",function(){T.removeClass("play").addClass("pause").attr("aria-label",d.default.t("library.ksr_video.Pause")),s()}).on("pause",function(){T.removeClass("pause").addClass("play").attr("aria-label",d.default.t("library.ksr_video.Play")),a(),o()}),T.on("click",function(e){v.playpause(),e.preventDefault()}),_.on("mouseenter focus",".video_dropdown",function(t){var n=e(t.currentTarget);n.addClass("open"),_.on("mouseleave.leave_dropdown blur.leave_dropdown",".video_dropdown",function(){n.removeClass("open"),_.off(".leave_dropdown")})}),A.on("click","li",function(){var t=e(this),n=t.data("language");P.removeClass("open"),n?KSR.store.setItem("last_track_language",n):KSR.store.removeItem("last_track_language"),m(n),v.$c.trigger("ksr_video:change_track",n)}),v.video.textTracks&&0!==v.video.textTracks.length?m(KSR.store.getItem("last_track_language")):this.$c.find(".js-remove-unless-text-tracks").remove();var M=null;e(document).on("fullscreenchange mozfullscreenchange webkitfullscreenchange",function(){!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement)&&M&&v.$c.css("height",M)}),_.find(".fullscreen").on("click",function(e){if(document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled){var t=v.$c.get(0);document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement?document.cancelFullscreen?document.cancelFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():(M=v.$c.css("height"),v.$c.css("height","auto"),t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen())}else v.$c.toggleClass("fullscreen");e.preventDefault()}),y.draggable_bar(function(e){var t=v.video.duration*e;v.video.currentTime=t}),j.draggable_bar(function(e){v.video.muted&&v.unmute(),v.video.volume=e}),j.find(".progress_bar_bg").on("mouseup",g),x.on("mouseup",g),C.on("mouseup",g),e("body").is(".touchable")?x.hide():E.on("click",function(){v.mute_toggle()}),this.$c.on("ksr_video:buffer_change",function(e,t,n){b.width(n+"%")}),this.$c.on("ksr_video:time_update",function(e,n){var i=n/v.video.duration*100;w.width(i+"%"),k.css("left",i+"%"),S.text(t(n)).attr("datetime","PT"+Math.floor(n)+"S"),k.attr("aria-valuenow",n)})},play:function(){this.video?(this.$video.show(),this.video.play()):this.jwplayer&&this.jwplayer.play()},pause:function(){this.playing()&&(this.video?this.video.pause():this.jwplayer&&this.jwplayer.pause())},playpause:function(){return this.playing()?this.pause():this.play(),this.playing()},focus_playpause_button:function(){var t=this.$c.find(".playpause"),n=e(window),i=t[0].getBoundingClientRect();i.top>=0&&i.left>=0&&i.bottom<=n.height()&&i.right<=n.width()&&t.focus()},seek:function(e,t){var n=this;if(void 0===t&&(t=!1),this.video){if(this.video.readyState<1)return this.video.load(),void this.$c.one("ksr_video:loaded",function(){n.seek(e,t)});this.video.currentTime=e,t?this.pause():this.play()}else this.jwplayer&&(this.jwplayer.seek(e),this.jwplayer.pause(t))},mute_toggle:function(){return this.video&&(this.video.muted?this.unmute():this.mute()),this.video.muted},mute:function(){this.$c.trigger("ksr_video:muted"),this.jwplayer?this.jwplayer.setMute(!0):this.video.muted=!0},unmute:function(){this.$c.trigger("ksr_video:unmuted"),this.jwplayer?this.jwplayer.setMute(!1):this.video.muted=!1},destroy:function(){this.$c.empty(),this.$c.removeData("ksr_video")},current_position:function(){return this.video?this.video.currentTime:this.jwplayer?this.jwplayer.getPosition():void 0},duration:function(){return this.jwplayer?this.jwplayer.getDuration():this.video.duration},playing:function(){return this.video?!this.video.paused:this.jwplayer?"playing"===this.jwplayer.getState().toLowerCase():void 0},initialize_flash:function(){var e="v"+parseInt(1e8*Math.random(),10),t=this.$c.data("external_flashvars")||{},n=this;this.$c.append('<div id="'+e+'"></div>'),"undefined"!=typeof swfobject&&swfobject.embedSWF("https://d3mlfyygrfdi2i.cloudfront.net/321f/kickplayer.swf",e,this.$c.data("dimensions").width,this.$c.data("dimensions").height,"9.0.115","/swf/expressInstall.swf",r.default.extend(t,{displayheight:this.$c.height(),file:encodeURI(this.$c.attr("data-video-url")),image:encodeURI(this.$c.attr("data-image")),backcolor:"000000",screencolor:"000000",controlbar:"over","controlbar.idlehide":"true",autostart:!0,skin:"https://d3mlfyygrfdi2i.cloudfront.net/cc3a/kickskin.swf"}),{allowscriptaccess:"always",allowfullscreen:"true",wmode:"opaque",menu:"false"},{id:"ksr_player_"+e,class:"ksr_player",name:"ksr_player_"+e},function(e){var t=!0;window.player_reference=e.ref,e.success?(n.$c.find("video").remove(),n.jwplayer=jwplayer(e.ref),n.jwplayer.onReady(function(){n.$c.trigger("ksr_video:loaded")}),n.jwplayer.onPlay(function(){n.$c.trigger("ksr_video:playing",[t]),t=!1}),n.jwplayer.onPause(function(){n.$c.trigger("ksr_video:paused")}),n.jwplayer.onComplete(function(){n.$c.trigger("ksr_video:ended")}),n.jwplayer.onBufferChange(function(e){var t=e.duration*(e.bufferPercent/100);isNaN(t)||n.$c.trigger("ksr_video:buffer_change",[t,e.bufferPercent])})):(n.$video=n.$c.find("video"),n.video=n.$video.get(0),n.$overlay.remove(),n.$c.children().show(),n.$c.find(".play_button_big").removeAttr("style"),n.video&&(n.initialize(),n.play()))})},initialize:function(){var e=this;this.video?(e.bind_controls(),e.bind_video_element(),KSR.store.getItem("ksr_video_volume")&&(this.video.volume=KSR.store.getItem("ksr_video_volume")),this.$video.css({height:"100%"}).removeAttr("style")):this.overlay()}})}(c)},function(e,t,n){"use strict";var i=(n(0),n(0));!function(){i.fn.tabs=function(){return i(this).each(function(){var e=i(this);e.on("activate",function(t,n){var a=i(n),r=i("#"+a.data("pane"));e.data("pane")&&e.data("pane").trigger("deactivated"),e.data("pane",r.trigger("activated"))}),e.children().on("click",function(){i(this).parent().trigger("activate",i(this))})})},i.fn.panes=function(){var e=i(this);return e.each(function(){e.children().on("activated",function(){i(this).show()}).on("deactivated",function(){i(this).hide()})})}}()},function(e,t,n){var i=n(0);n(0);!function(e){"use strict";function t(t,i){var a,r,o,s=i.autoHeight;if("container"==s)r=e(i.slides[i.currSlide]).outerHeight(),i.container.height(r);else if(i._autoHeightRatio)i.container.height(i.container.width()/i._autoHeightRatio);else if("calc"===s||"number"==e.type(s)&&s>=0){if((o="calc"===s?n(t,i):s>=i.slides.length?0:s)==i._sentinelIndex)return;i._sentinelIndex=o,i._sentinel&&i._sentinel.remove(),a=e(i.slides[o].cloneNode(!0)),a.removeAttr("id name rel").find("[id],[name],[rel]").removeAttr("id name rel"),a.css({position:"static",visibility:"hidden",display:"block"}).prependTo(i.container).addClass("cycle-sentinel cycle-slide").removeClass("cycle-slide-active"),a.find("*").css("visibility","hidden"),i._sentinel=a}}function n(t,n){var i=0,a=-1;return n.slides.each(function(t){var n=e(this).height();n>a&&(a=n,i=t)}),i}function i(t,n,i,a,r){var o=e(a).outerHeight();n.container.animate({height:o},n.autoHeightSpeed,n.autoHeightEasing)}function a(n,r){r._autoHeightOnResize&&(e(window).off("resize orientationchange",r._autoHeightOnResize),r._autoHeightOnResize=null),r.container.off("cycle-slide-added cycle-slide-removed",t),r.container.off("cycle-destroyed",a),r.container.off("cycle-before",i),r._sentinel&&(r._sentinel.remove(),r._sentinel=null)}e.extend(e.fn.cycle.defaults,{autoHeight:0,autoHeightSpeed:250,autoHeightEasing:null}),e(document).on("cycle-initialized",function(n,r){function o(){t(n,r)}var s,l=r.autoHeight,u=e.type(l),d=null;"string"!==u&&"number"!==u||(r.container.on("cycle-slide-added cycle-slide-removed",t),r.container.on("cycle-destroyed",a),"container"==l?r.container.on("cycle-before",i):"string"===u&&/\d+\:\d+/.test(l)&&(s=l.match(/(\d+)\:(\d+)/),s=s[1]/s[2],r._autoHeightRatio=s),"number"!==u&&(r._autoHeightOnResize=function(){clearTimeout(d),d=setTimeout(o,50)},e(window).on("resize orientationchange",r._autoHeightOnResize)),setTimeout(o,30))})}(i)},function(e,t,n){var i=n(0);n(0);!function(e){"use strict";var t=e.fn.cycle;e.fn.cycle=function(n){var i,a,r,o=e.makeArray(arguments);return"number"==e.type(n)?this.cycle("goto",n):"string"==e.type(n)?this.each(function(){var s;return i=n,void 0===(r=e(this).data("cycle.opts"))?void t.log('slideshow must be initialized before sending commands; "'+i+'" ignored'):(i="goto"==i?"jump":i,a=r.API[i],e.isFunction(a)?(s=e.makeArray(o),s.shift(),a.apply(r.API,s)):void t.log("unknown command: ",i))}):t.apply(this,arguments)},e.extend(e.fn.cycle,t),e.extend(t.API,{next:function(){var e=this.opts();if(!e.busy||e.manualTrump){var t=e.reverse?-1:1;e.allowWrap===!1&&e.currSlide+t>=e.slideCount||(e.API.advanceSlide(t),e.API.trigger("cycle-next",[e]).log("cycle-next"))}},prev:function(){var e=this.opts();if(!e.busy||e.manualTrump){var t=e.reverse?1:-1;e.allowWrap===!1&&e.currSlide+t<0||(e.API.advanceSlide(t),e.API.trigger("cycle-prev",[e]).log("cycle-prev"))}},destroy:function(){this.stop();var t=this.opts(),n=e.isFunction(e._data)?e._data:e.noop;clearTimeout(t.timeoutId),t.timeoutId=0,t.API.stop(),t.API.trigger("cycle-destroyed",[t]).log("cycle-destroyed"),t.container.removeData(),n(t.container[0],"parsedAttrs",!1),t.retainStylesOnDestroy||(t.container.removeAttr("style"),t.slides.removeAttr("style"),t.slides.removeClass(t.slideActiveClass)),t.slides.each(function(){e(this).removeData(),n(this,"parsedAttrs",!1)})},jump:function(e){var t,n=this.opts();if(!n.busy||n.manualTrump){var i=parseInt(e,10);if(isNaN(i)||i<0||i>=n.slides.length)return void n.API.log("goto: invalid slide index: "+i);if(i==n.currSlide)return void n.API.log("goto: skipping, already on slide",i);n.nextSlide=i,clearTimeout(n.timeoutId),n.timeoutId=0,n.API.log("goto: ",i," (zero-index)"),t=n.currSlide<n.nextSlide,n.API.prepareTx(!0,t)}},stop:function(){var t=this.opts(),n=t.container;clearTimeout(t.timeoutId),t.timeoutId=0,t.API.stopTransition(),t.pauseOnHover&&(t.pauseOnHover!==!0&&(n=e(t.pauseOnHover)),n.off("mouseenter mouseleave")),t.API.trigger("cycle-stopped",[t]).log("cycle-stopped")},reinit:function(){var e=this.opts();e.API.destroy(),e.container.cycle()},remove:function(t){for(var n,i,a=this.opts(),r=[],o=1,s=0;s<a.slides.length;s++)n=a.slides[s],s==t?i=n:(r.push(n),e(n).data("cycle.opts").slideNum=o,o++);i&&(a.slides=e(r),a.slideCount--,e(i).remove(),t==a.currSlide?a.API.advanceSlide(1):t<a.currSlide?a.currSlide--:a.currSlide++,a.API.trigger("cycle-slide-removed",[a,t,i]).log("cycle-slide-removed"),a.API.updateView())}}),e(document).on("click.cycle","[data-cycle-cmd]",function(t){t.preventDefault();var n=e(this),i=n.data("cycle-cmd"),a=n.data("cycle-context")||".cycle-slideshow";e(a).cycle(i,n.data("cycle-arg"))})}(i)},function(e,t,n){var i=n(0);n(0);!function(e){"use strict";function t(e){return(e||"").toLowerCase()}e.fn.cycle=function(n){var i;return 0!==this.length||e.isReady?this.each(function(){var i,a,r,o,s=e(this),l=e.fn.cycle.log;if(!s.data("cycle.opts")){(s.data("cycle-log")===!1||n&&n.log===!1||a&&a.log===!1)&&(l=e.noop),l("--c2 init--"),i=s.data();for(var u in i)i.hasOwnProperty(u)&&/^cycle[A-Z]+/.test(u)&&(o=i[u],r=u.match(/^cycle(.*)/)[1].replace(/^[A-Z]/,t),l(r+":",o,"("+typeof o+")"),i[r]=o);a=e.extend({},e.fn.cycle.defaults,i,n||{}),a.timeoutId=0,a.paused=a.paused||!1,a.container=s,a._maxZ=a.maxZ,a.API=e.extend({_container:s},e.fn.cycle.API),a.API.log=l,a.API.trigger=function(e,t){return a.container.trigger(e,t),a.API},s.data("cycle.opts",a),s.data("cycle.API",a.API),a.API.trigger("cycle-bootstrap",[a,a.API]),a.API.addInitialSlides(),a.API.preInitSlideshow(),a.slides.length&&a.API.initSlideshow()}}):(i={s:this.selector,c:this.context},e.fn.cycle.log("requeuing slideshow (dom not ready)"),e(function(){e(i.s,i.c).cycle(n)}),this)},e.fn.cycle.API={opts:function(){return this._container.data("cycle.opts")},addInitialSlides:function(){var t=this.opts(),n=t.slides;t.slideCount=0,t.slides=e(),n=n.jquery?n:t.container.find(n),t.random&&n.sort(function(){return Math.random()-.5}),t.API.add(n)},preInitSlideshow:function(){var t=this.opts();t.API.trigger("cycle-pre-initialize",[t]);var n=e.fn.cycle.transitions[t.fx];n&&e.isFunction(n.preInit)&&n.preInit(t),t._preInitialized=!0},postInitSlideshow:function(){var t=this.opts();t.API.trigger("cycle-post-initialize",[t]);var n=e.fn.cycle.transitions[t.fx];n&&e.isFunction(n.postInit)&&n.postInit(t)},initSlideshow:function(){var t,n=this.opts(),i=n.container;n.API.calcFirstSlide(),"static"==n.container.css("position")&&n.container.css("position","relative"),e(n.slides[n.currSlide]).css("opacity",1).show(),n.API.stackSlides(n.slides[n.currSlide],n.slides[n.nextSlide],!n.reverse),n.pauseOnHover&&(n.pauseOnHover!==!0&&(i=e(n.pauseOnHover)),i.hover(function(){n.API.pause(!0)},function(){n.API.resume(!0)})),n.timeout&&(t=n.API.getSlideOpts(n.currSlide),n.API.queueTransition(t,t.timeout+n.delay)),n._initialized=!0,n.API.updateView(!0),n.API.trigger("cycle-initialized",[n]),n.API.postInitSlideshow()},pause:function(t){var n=this.opts(),i=n.API.getSlideOpts(),a=n.hoverPaused||n.paused;t?n.hoverPaused=!0:n.paused=!0,a||(n.container.addClass("cycle-paused"),n.API.trigger("cycle-paused",[n]).log("cycle-paused"),i.timeout&&(clearTimeout(n.timeoutId),n.timeoutId=0,n._remainingTimeout-=e.now()-n._lastQueue,(n._remainingTimeout<0||isNaN(n._remainingTimeout))&&(n._remainingTimeout=void 0)))},resume:function(e){var t=this.opts(),n=!t.hoverPaused&&!t.paused;e?t.hoverPaused=!1:t.paused=!1,n||(t.container.removeClass("cycle-paused"),0===t.slides.filter(":animated").length&&t.API.queueTransition(t.API.getSlideOpts(),t._remainingTimeout),t.API.trigger("cycle-resumed",[t,t._remainingTimeout]).log("cycle-resumed"))},add:function(t,n){var i,a=this.opts(),r=a.slideCount,o=!1;"string"==e.type(t)&&(t=e.trim(t)),e(t).each(function(t){var i,r=e(this);n?a.container.prepend(r):a.container.append(r),a.slideCount++,i=a.API.buildSlideOpts(r),a.slides=n?e(r).add(a.slides):a.slides.add(r),a.API.initSlide(i,r,--a._maxZ),r.data("cycle.opts",i),a.API.trigger("cycle-slide-added",[a,i,r])}),a.API.updateView(!0),(o=a._preInitialized&&r<2&&a.slideCount>=1)&&(a._initialized?a.timeout&&(i=a.slides.length,a.nextSlide=a.reverse?i-1:1,a.timeoutId||a.API.queueTransition(a)):a.API.initSlideshow())},calcFirstSlide:function(){var e,t=this.opts();e=parseInt(t.startingSlide||0,10),(e>=t.slides.length||e<0)&&(e=0),t.currSlide=e,t.reverse?(t.nextSlide=e-1,t.nextSlide<0&&(t.nextSlide=t.slides.length-1)):(t.nextSlide=e+1,t.nextSlide==t.slides.length&&(t.nextSlide=0))},calcNextSlide:function(){var e,t=this.opts();t.reverse?(e=t.nextSlide-1<0,t.nextSlide=e?t.slideCount-1:t.nextSlide-1,t.currSlide=e?0:t.nextSlide+1):(e=t.nextSlide+1==t.slides.length,t.nextSlide=e?0:t.nextSlide+1,t.currSlide=e?t.slides.length-1:t.nextSlide-1)},calcTx:function(t,n){var i,a=t;return n&&a.manualFx&&(i=e.fn.cycle.transitions[a.manualFx]),i||(i=e.fn.cycle.transitions[a.fx]),i||(i=e.fn.cycle.transitions.fade,a.API.log('Transition "'+a.fx+'" not found.  Using fade.')),i},prepareTx:function(e,t){var n,i,a,r,o,s=this.opts();if(s.slideCount<2)return void(s.timeoutId=0);!e||s.busy&&!s.manualTrump||(s.API.stopTransition(),s.busy=!1,clearTimeout(s.timeoutId),s.timeoutId=0),s.busy||(0!==s.timeoutId||e)&&(i=s.slides[s.currSlide],a=s.slides[s.nextSlide],r=s.API.getSlideOpts(s.nextSlide),o=s.API.calcTx(r,e),s._tx=o,e&&void 0!==r.manualSpeed&&(r.speed=r.manualSpeed),s.nextSlide!=s.currSlide&&(e||!s.paused&&!s.hoverPaused&&s.timeout)?(s.API.trigger("cycle-before",[r,i,a,t]),o.before&&o.before(r,i,a,t),n=function(){s.busy=!1,s.container.data("cycle.opts")&&(o.after&&o.after(r,i,a,t),s.API.trigger("cycle-after",[r,i,a,t]),s.API.queueTransition(r),s.API.updateView(!0))},s.busy=!0,o.transition?o.transition(r,i,a,t,n):s.API.doTransition(r,i,a,t,n),s.API.calcNextSlide(),s.API.updateView()):s.API.queueTransition(r))},doTransition:function(t,n,i,a,r){var o=t,s=e(n),l=e(i),u=function(){l.animate(o.animIn||{opacity:1},o.speed,o.easeIn||o.easing,r)};l.css(o.cssBefore||{}),s.animate(o.animOut||{},o.speed,o.easeOut||o.easing,function(){s.css(o.cssAfter||{}),o.sync||u()}),o.sync&&u()},queueTransition:function(t,n){var i=this.opts(),a=void 0!==n?n:t.timeout;if(0===i.nextSlide&&0==--i.loop)return i.API.log("terminating; loop=0"),i.timeout=0,a?setTimeout(function(){i.API.trigger("cycle-finished",[i])},a):i.API.trigger("cycle-finished",[i]),void(i.nextSlide=i.currSlide);a&&(i._lastQueue=e.now(),void 0===n&&(i._remainingTimeout=t.timeout),i.paused||i.hoverPaused||(i.timeoutId=setTimeout(function(){i.API.prepareTx(!1,!i.reverse)},a)))},stopTransition:function(){var e=this.opts();e.slides.filter(":animated").length&&(e.slides.stop(!1,!0),e.API.trigger("cycle-transition-stopped",[e])),e._tx&&e._tx.stopTransition&&e._tx.stopTransition(e)},advanceSlide:function(e){var t=this.opts();return clearTimeout(t.timeoutId),t.timeoutId=0,t.nextSlide=t.currSlide+e,t.nextSlide<0?t.nextSlide=t.slides.length-1:t.nextSlide>=t.slides.length&&(t.nextSlide=0),t.API.prepareTx(!0,e>=0),!1},buildSlideOpts:function(n){var i,a,r=this.opts(),o=n.data()||{};for(var s in o)o.hasOwnProperty(s)&&/^cycle[A-Z]+/.test(s)&&(i=o[s],a=s.match(/^cycle(.*)/)[1].replace(/^[A-Z]/,t),r.API.log("["+(r.slideCount-1)+"]",a+":",i,"("+typeof i+")"),o[a]=i);o=e.extend({},e.fn.cycle.defaults,r,o),o.slideNum=r.slideCount;try{delete o.API,delete o.slideCount,delete o.currSlide,delete o.nextSlide,delete o.slides}catch(e){}return o},getSlideOpts:function(t){var n=this.opts();void 0===t&&(t=n.currSlide);var i=n.slides[t],a=e(i).data("cycle.opts");return e.extend({},n,a)},initSlide:function(t,n,i){var a=this.opts();n.css(t.slideCss||{}),i>0&&n.css("zIndex",i),isNaN(t.speed)&&(t.speed=e.fx.speeds[t.speed]||e.fx.speeds._default),t.sync||(t.speed=t.speed/2),n.addClass(a.slideClass)},updateView:function(e,t,n){var i=this.opts();if(i._initialized){var a=i.API.getSlideOpts(),r=i.slides[i.currSlide];!e&&t!==!0&&(i.API.trigger("cycle-update-view-before",[i,a,r]),i.updateView<0)||(i.slideActiveClass&&i.slides.removeClass(i.slideActiveClass).eq(i.currSlide).addClass(i.slideActiveClass),e&&i.hideNonActive&&i.slides.filter(":not(."+i.slideActiveClass+")").hide(),0===i.updateView&&setTimeout(function(){i.API.trigger("cycle-update-view",[i,a,r,e])},a.speed/(i.sync?2:1)),0!==i.updateView&&i.API.trigger("cycle-update-view",[i,a,r,e]),e&&i.API.trigger("cycle-update-view-after",[i,a,r]))}},getComponent:function(t){var n=this.opts(),i=n[t];return"string"==typeof i?/^\s*[\>|\+|~]/.test(i)?n.container.find(i):e(i):i.jquery?i:e(i)},stackSlides:function(t,n,i){var a=this.opts();t||(t=a.slides[a.currSlide],n=a.slides[a.nextSlide],i=!a.reverse),e(t).css("zIndex",a.maxZ);var r,o=a.maxZ-2,s=a.slideCount;if(i){for(r=a.currSlide+1;r<s;r++)e(a.slides[r]).css("zIndex",o--);for(r=0;r<a.currSlide;r++)e(a.slides[r]).css("zIndex",o--)}else{for(r=a.currSlide-1;r>=0;r--)e(a.slides[r]).css("zIndex",o--);for(r=s-1;r>a.currSlide;r--)e(a.slides[r]).css("zIndex",o--)}e(n).css("zIndex",a.maxZ-1)},getSlideIndex:function(e){return this.opts().slides.index(e)}},e.fn.cycle.log=function(){window.console&&console.log&&console.log("[cycle2] "+Array.prototype.join.call(arguments," "))},e.fn.cycle.version=function(){return"Cycle2: 2.0.2"},e.fn.cycle.transitions={custom:{},none:{before:function(e,t,n,i){e.API.stackSlides(n,t,i),e.cssBefore={opacity:1,display:"block"}}},fade:{before:function(t,n,i,a){var r=t.API.getSlideOpts(t.nextSlide).slideCss||{};t.API.stackSlides(n,i,a),t.cssBefore=e.extend(r,{opacity:0,display:"block"}),t.animIn={opacity:1},t.animOut={opacity:0}}},fadeout:{before:function(t,n,i,a){var r=t.API.getSlideOpts(t.nextSlide).slideCss||{};t.API.stackSlides(n,i,a),t.cssBefore=e.extend(r,{opacity:1,display:"block"}),t.animOut={opacity:0}}},scrollHorz:{before:function(e,t,n,i){e.API.stackSlides(t,n,i);var a=e.container.css("overflow","hidden").width();e.cssBefore={left:i?a:-a,top:0,opacity:1,display:"block"},e.cssAfter={zIndex:e._maxZ-2,left:0},e.animIn={left:0},e.animOut={left:i?-a:a}}}},e.fn.cycle.defaults={allowWrap:!0,autoSelector:".cycle-slideshow[data-cycle-auto-init!=false]",delay:0,easing:null,fx:"fade",hideNonActive:!0,loop:0,manualFx:void 0,manualSpeed:void 0,manualTrump:!0,maxZ:100,pauseOnHover:!1,reverse:!1,slideActiveClass:"cycle-slide-active",slideClass:"cycle-slide",slideCss:{position:"absolute",top:0,left:0},slides:"> img",speed:500,startingSlide:0,sync:!0,timeout:4e3,updateView:0},e(document).ready(function(){e(e.fn.cycle.defaults.autoSelector).cycle()})}(i)},function(e,t,n){function i(e,t){var n=a(e),i=n.getTime(),r=a(t),o=r.getTime();return i<o?-1:i>o?1:0}var a=n(6);e.exports=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(70),s=i(o),l=n(11),u=i(l);n(9),(0,r.default)(function(){function e(e){var t=new u.default(e).domain();return""===t||t===new u.default(window.location.href).domain()}(0,r.default)(document).ajaxSend(function(t,n,i){"GET"!==i.type&&e(i.url)&&n.setRequestHeader("X-CSRF-Token",(0,r.default)('meta[name="csrf-token"]').attr("content"))}),(0,r.default)("form[data-ksrjson]").livequery(function(){var e=(0,r.default)([]);(0,r.default)(this).attr("data-target")?e=(0,r.default)((0,r.default)(this).attr("data-target")):(0,r.default)(this).closest(".ajax-container").length?e=(0,r.default)(this).closest(".ajax-container"):(0,r.default)(this).closest(".modal_dialog").length>0&&(e=(0,r.default)(this)),e.length>0&&s.default.enable_form((0,r.default)(this),e)}),(0,r.default)(document).on("click","a[data-ksrjson]",function(e){var t=(0,r.default)(this),n=(0,r.default)(t.attr("data-target"));return e.preventDefault(),0===n.length&&(n=t.closest(".ajax-container")),0===n.length||s.default.get(t.attr("href"),t.attr("data-ksrmethod"),n,this)})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(){var e=["AdobeReader","Flash","Quicktime","RealPlayer","Shockwave","Silverlight","VLC","WindowsMediaPlayer"],t=function(e){try{return window.PluginDetect.getVersion(e)}catch(e){return e.description}};return y.default.chain(e).zip(y.default.map(e,t)).filter(y.default.last).value()}function r(){return y.default.map(navigator.plugins,function(e){return[e.name,e.description,e.filename,e.length].join("|")})}function o(){return y.default.map(navigator.mimeTypes,function(e){return[e.type,e.description].join("|")})}function s(){var e=[screen.availWidth,screen.availHeight],t=screen.orientation||screen.mozOrientation||screen.msOrientation;return"object"===(void 0===t?"undefined":m(t))&&(t=t.type),t?t.match("portrait")&&e.reverse():e.sort().reverse(),e.push(screen.colorDepth),e.join("x")}function l(){var e=document.createElement("canvas");if(e.getContext&&e.getContext("2d")){var t=e.getContext("2d"),n="a1b2,#3<!xy> 456.Z";return t.textBaseline="top",t.font='14px "Arial"',t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(125,1,62,20),t.fillStyle="#069",t.fillText(n,2,15),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText(n,4,17),e.toDataURL()}}function u(){var e=navigator.getGamepads?navigator.getGamepads():[];return y.default.chain(e).filter(y.default.identity).map(function(e){return[e.index,e.id].join("|")}).value()}function d(){var e,t,n,i=new Date,a=i.getTimezoneOffset();return i.setDate(1),i.setMonth(1),e=i.getTimezoneOffset(),i.setMonth(6),t=i.getTimezoneOffset(),n=e-t,n?a+"DST"+n:a.toString()}function c(){var e=["Andale Mono","Arial","Arial Black","Arial Hebrew","Arial MT","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Bitstream Vera Sans Mono","Book Antiqua","Bookman Old Style","Calibri","Cambria","Cambria Math","Century","Century Gothic","Century Schoolbook","Comic Sans","Comic Sans MS","Consolas","Courier","Courier New","Garamond","Geneva","Georgia","Helvetica","Helvetica Neue","Impact","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","LUCIDA GRANDE","Lucida Handwriting","Lucida Sans","Lucida Sans Typewriter","Lucida Sans Unicode","Microsoft Sans Serif","Monaco","Monotype Corsiva","MS Gothic","MS Outlook","MS PGothic","MS Reference Sans Serif","MS Sans Serif","MS Serif","MYRIAD","MYRIAD PRO","Palatino","Palatino Linotype","Segoe Print","Segoe Script","Segoe UI","Segoe UI Light","Segoe UI Semibold","Segoe UI Symbol","Tahoma","Times","Times New Roman","Times New Roman PS","Trebuchet MS","Verdana","Wingdings","Wingdings 2","Wingdings 3"],t=["monospace","sans-serif","serif"],n=function(e){var t=document.createElement("span");t.style.fontFamily=e,t.style.fontSize="72px";var n=document.createTextNode("mmmmmmmmmmlli");return t.appendChild(n),t},i=y.default.map(t,n),a=y.default.map(e,function(e){return y.default.map(t,function(t){return n(e+","+t)})}),r=document.createElement("div");r.style.position="absolute",r.style.visibility="hidden",y.default.forEach(y.default.flatten(a).concat(i),function(e){r.appendChild(e)});var o=document.getElementsByTagName("body")[0];o.appendChild(r);var s=function(e){var t=e.offsetHeight;return[e.offsetWidth,t]},l=y.default.map(i,s),u=y.default.map(a,function(e){return y.default.map(e,s)});o.removeChild(r);var d=function(e,n){var i,a,r;for(r=0;r<t.length;r+=1)if(i=u[n][r],a=l[r],i[0]!==a[0]||i[1]!==a[1])return!0;return!1};return y.default.filter(e,d)}function f(){var e=[screen.height===screen.availHeight,screen.height===window.innerHeight,0===o().length,0===(new Date).getTimezoneOffset()];return y.default.filter(e,y.default.identity).length/e.length}function h(e){return(new w.default.SHA256).hex(e)}function p(){var e=E.default;return void 0===e||null===e||""===e||"object"!==(void 0===e?"undefined":m(e))?null:"function"==typeof e.get?e.get("id")||null:e.id?e.id||null:null}var m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g=n(0),v=i(g),_=n(3),y=i(_),b=n(148),w=i(b),k=n(191),j=i(k);n(146);var x,C,S=n(15),E=i(S);x=y.default.memoize(function(){var e,t=a(),n=r(),i=o(),p=u(),m=c(),g={pdc:t.length,pds:t.toString(),npc:n.length,nps:n.toString(),mtc:i.length,mts:i.toString(),fnc:m.length,fns:m.toString(),gpc:p.length,gps:p.toString(),tzo:d(),uas:navigator.userAgent,lan:[navigator.language,navigator.userLanguage,navigator.systemLanguage,navigator.languages].join("|"),cpu:[navigator.platform,navigator.hardwareConcurrency].join("|"),mpi:Math.PI.toString()};return f()<.75&&(e=l(),g.cnv=[e.substr(0,32),e.length,h(e)].join("|"),g.res=s()),g}),C=y.default.memoize(function(){var e=x(),t=["pds","nps","mts","fns","gps","tzo","uas","lan","cpu","cnv","mpi","res"];return h(y.default.chain(t).map(function(t){return e[t]}).map(function(e){return void 0===e?"":e}).map(function(e){return e.toString()}).value().join("\n"))});var T=function(){var e=function(){var e,t;if(window.koala_device_endpoint){try{t=C()}catch(e){t=null}e={partition_key:(0,j.default)(),device_id2:t,visitor_id:(0,j.default)(),ip_address:window.current_ip,user_uid:p()},window.enabled_features&&window.enabled_features.device_components&&(e.components=x()),v.default.ajax({type:"POST",url:window.koala_device_endpoint,data:JSON.stringify(e),contentType:"text/plain; charset=UTF-8"})}};y.default.defer(function(){e()})};window.log_device=T},function(e,t,n){"use strict";var i=n(0);n(0);!function(e){var t=e("meta[name=csrf-token]").attr("content"),n=e("meta[name=csrf-param]").attr("content");e(document).on("click","a[data-method]",function(i){var a=e(this),r=a.prop("href"),o=a.data("method"),s=a.prop("target"),l=e('<form method="post" action="'+r+'"></form>'),u='<input name="_method" value="'+o+'" type="hidden" />';void 0!==n&&void 0!==t&&(u+='<input name="'+n+'" value="'+t+'" type="hidden" />'),s&&l.prop("target",s),l.hide().append(u).appendTo("body"),l[0].submit(),i.preventDefault()}),t&&e.ajaxPrefilter(function(e,n,i){e.crossDomain||i.setRequestHeader("X-CSRF-Token",t)})}(i)},function(e,t,n){var i=n(0);n(0);!function(e){"use strict";e.extend(e.fn.cycle.defaults,{next:"> .cycle-next",nextEvent:"click.cycle",disabledClass:"disabled",prev:"> .cycle-prev",prevEvent:"click.cycle",swipe:!1}),e(document).on("cycle-initialized",function(e,t){if(t.API.getComponent("next").on(t.nextEvent,function(e){e.preventDefault(),t.API.next()}),t.API.getComponent("prev").on(t.prevEvent,function(e){e.preventDefault(),t.API.prev()}),t.swipe){var n=t.swipeVert?"swipeUp.cycle":"swipeLeft.cycle swipeleft.cycle",i=t.swipeVert?"swipeDown.cycle":"swipeRight.cycle swiperight.cycle";t.container.on(n,function(e){t.API.next()}),t.container.on(i,function(){t.API.prev()})}}),e(document).on("cycle-update-view",function(e,t,n,i){if(!t.allowWrap){var a=t.disabledClass,r=t.API.getComponent("next"),o=t.API.getComponent("prev"),s=t._prevBoundry||0,l=void 0!==t._nextBoundry?t._nextBoundry:t.slideCount-1;t.currSlide==l?r.addClass(a).prop("disabled",!0):r.removeClass(a).prop("disabled",!1),t.currSlide===s?o.addClass(a).prop("disabled",!0):o.removeClass(a).prop("disabled",!1)}}),e(document).on("cycle-destroyed",function(e,t){t.API.getComponent("prev").off(t.nextEvent),t.API.getComponent("next").off(t.prevEvent),t.container.off("swipeleft.cycle swiperight.cycle swipeLeft.cycle swipeRight.cycle swipeUp.cycle swipeDown.cycle")})}(i)},function(e,t,n){n(0),n(0);!function(){var e={version:"0.9.0",name:"PluginDetect",addPlugin:function(t,n){t&&e.isString(t)&&n&&e.isFunc(n.getVersion)&&(t=t.replace(/\s/g,"").toLowerCase(),e.Plugins[t]=n,e.isDefined(n.getVersionDone)||(n.installed=null,n.version=null,n.version0=null,n.getVersionDone=null,n.pluginName=t))},uniqueName:function(){return e.name+"998"},openTag:"<",hasOwnPROP:{}.constructor.prototype.hasOwnProperty,hasOwn:function(t,n){var i;try{i=e.hasOwnPROP.call(t,n)}catch(e){}return!!i},rgx:{str:/string/i,num:/number/i,fun:/function/i,arr:/array/i},toString:{}.constructor.prototype.toString,isDefined:function(e){return void 0!==e},isArray:function(t){return e.rgx.arr.test(e.toString.call(t))},isString:function(t){return e.rgx.str.test(e.toString.call(t))},isNum:function(t){return e.rgx.num.test(e.toString.call(t))},isStrNum:function(t){return e.isString(t)&&/\d/.test(t)},isFunc:function(t){return e.rgx.fun.test(e.toString.call(t))},getNumRegx:/[\d][\d\.\_,\-]*/,splitNumRegx:/[\.\_,\-]/g,getNum:function(t,n){var i=e.isStrNum(t)?(e.isDefined(n)?new RegExp(n):e.getNumRegx).exec(t):null;return i?i[0]:null},compareNums:function(t,n,i){var a,r,o,s=parseInt;if(e.isStrNum(t)&&e.isStrNum(n)){if(e.isDefined(i)&&i.compareNums)return i.compareNums(t,n);for(a=t.split(e.splitNumRegx),r=n.split(e.splitNumRegx),o=0;o<Math.min(a.length,r.length);o++){if(s(a[o],10)>s(r[o],10))return 1;if(s(a[o],10)<s(r[o],10))return-1}}return 0},formatNum:function(t,n){var i,a;if(!e.isStrNum(t))return null;for(e.isNum(n)||(n=4),n--,a=t.replace(/\s/g,"").split(e.splitNumRegx).concat(["0","0","0","0"]),i=0;i<4;i++)/^(0+)(.+)$/.test(a[i])&&(a[i]=RegExp.$2),(i>n||!/\d/.test(a[i]))&&(a[i]="0");return a.slice(0,4).join(",")},pd:{getPROP:function(e,t,n){try{e&&(n=e[t])}catch(e){}return n},findNavPlugin:function(t){if(t.dbug)return t.dbug;var n=null;if(window.navigator){var i,a,r,o,s,l,u={Find:e.isString(t.find)?new RegExp(t.find,"i"):t.find,Find2:e.isString(t.find2)?new RegExp(t.find2,"i"):t.find2,Avoid:t.avoid?e.isString(t.avoid)?new RegExp(t.avoid,"i"):t.avoid:0,Num:t.num?/\d/:0},d=navigator.mimeTypes,c=navigator.plugins;if(t.mimes&&d)for(o=e.isArray(t.mimes)?[].concat(t.mimes):e.isString(t.mimes)?[t.mimes]:[],i=0;i<o.length;i++){a=0;try{e.isString(o[i])&&/[^\s]/.test(o[i])&&(a=d[o[i]].enabledPlugin)}catch(e){}if(a&&(r=this.findNavPlugin_(a,u),r.obj&&(n=r.obj),n&&!e.dbug))return n}if(t.plugins&&c){for(s=e.isArray(t.plugins)?[].concat(t.plugins):e.isString(t.plugins)?[t.plugins]:[],i=0;i<s.length;i++){a=0;try{s[i]&&e.isString(s[i])&&(a=c[s[i]])}catch(e){}if(a&&(r=this.findNavPlugin_(a,u),r.obj&&(n=r.obj),n&&!e.dbug))return n}if(l=c.length,e.isNum(l))for(i=0;i<l;i++){a=0;try{a=c[i]}catch(e){}if(a&&(r=this.findNavPlugin_(a,u),r.obj&&(n=r.obj),n&&!e.dbug))return n}}}return n},findNavPlugin_:function(e,t){var n=e.description||"",i=e.name||"",a={};return(!t.Find.test(n)||t.Find2&&!t.Find2.test(i)||t.Num&&!t.Num.test(RegExp.leftContext+RegExp.rightContext))&&(!t.Find.test(i)||t.Find2&&!t.Find2.test(n)||t.Num&&!t.Num.test(RegExp.leftContext+RegExp.rightContext))||t.Avoid&&(t.Avoid.test(n)||t.Avoid.test(i))||(a.obj=e),a},getVersionDelimiter:",",findPlugin:function(t){var n,i={status:-3,plugin:0};return e.isString(t)?1==t.length?(this.getVersionDelimiter=t,i):(t=t.toLowerCase().replace(/\s/g,""),(n=e.Plugins[t])&&n.getVersion?(i.plugin=n,i.status=1,i):i):i}},getPluginFileVersion:function(t,n){var i,a,r,o,s=-1;if(!t)return n;if(t.version&&(i=e.getNum(t.version+"")),!i||!n)return n||i||null;for(a=e.formatNum(n).split(e.splitNumRegx),r=e.formatNum(i).split(e.splitNumRegx),o=0;o<a.length;o++){if(s>-1&&o>s&&"0"!=a[o])return n;if(r[o]!=a[o]&&(s==-1&&(s=o),"0"!=a[o]))return n}return i},AXO:function(){var e;try{e=new window.ActiveXObject}catch(e){}return e?null:window.ActiveXObject}(),getAXO:function(t){var n=null;try{n=new e.AXO(t)}catch(t){e.errObj=t}return n&&(e.browser.ActiveXEnabled=!0),n},browser:{detectPlatform:function(){var t,n=window.navigator?navigator.platform||"":"";if(e.OS=100,n){var i=["Win",1,"Mac",2,"Linux",3,"FreeBSD",4,"iPhone",21.1,"iPod",21.2,"iPad",21.3,"Win.*CE",22.1,"Win.*Mobile",22.2,"Pocket\\s*PC",22.3,"",100];for(t=i.length-2;t>=0;t-=2)if(i[t]&&new RegExp(i[t],"i").test(n)){e.OS=i[t+1];break}}},detectIE:function(){var t,n,i,a,r,o=this,s=document,l=window.navigator?navigator.userAgent||"":"";o.ActiveXFilteringEnabled=!1,o.ActiveXEnabled=!1;try{o.ActiveXFilteringEnabled=!!window.external.msActiveXFilteringEnabled()}catch(e){}for(a=["Msxml2.XMLHTTP","Msxml2.DOMDocument","Microsoft.XMLDOM","TDCCtl.TDCCtl","Shell.UIHelper","HtmlDlgSafeHelper.HtmlDlgSafeHelper","Scripting.Dictionary"],r=["WMPlayer.OCX","ShockwaveFlash.ShockwaveFlash","AgControl.AgControl"],i=a.concat(r),t=0;t<i.length&&(!e.getAXO(i[t])||e.dbug);t++);if(o.ActiveXEnabled&&o.ActiveXFilteringEnabled)for(t=0;t<r.length;t++)if(e.getAXO(r[t])){o.ActiveXFilteringEnabled=!1;break}n=s.documentMode;try{s.documentMode=""}catch(e){}o.isIE=o.ActiveXEnabled,o.isIE=o.isIE||e.isNum(s.documentMode)||new Function("return/*@cc_on!@*/!1")();try{s.documentMode=n}catch(e){}o.verIE=null,o.isIE&&(o.verIE=(e.isNum(s.documentMode)&&s.documentMode>=7?s.documentMode:0)||(/^(?:.*?[^a-zA-Z])??(?:MSIE|rv\s*\:)\s*(\d+\.?\d*)/i.test(l)?parseFloat(RegExp.$1,10):7)),o.betterIE()},betterIE:function(){var t=this,n=document;if(t.verIEtrue=null,t.docModeIE=null,t.isIE){var i,a,r=n.createElement("div"),o=["{45EA75A0-A269-11D1-B5BF-0000F8051515}","{3AF36230-A269-11D1-B5BF-0000F8051515}","{89820200-ECBD-11CF-8B85-00AA005B4383}"];try{r.style.behavior="url(#default#clientcaps)"}catch(e){}for(a=0;a<o.length;a++){try{t.verIEtrue=r.getComponentVersion(o[a],"componentid").replace(/,/g,".")}catch(e){}if(t.verIEtrue&&!e.dbug)break}i=parseFloat(t.verIEtrue||"0",10),t.docModeIE=n.documentMode||(/back/i.test(n.compatMode||"")?5:i)||t.verIE,t.verIE=i||t.docModeIE}},detectNonIE:function(){var t=this,n=window.navigator?navigator:{},i=t.isIE?"":n.userAgent||"",a=n.vendor||"",r=n.product||"";t.isGecko=/Gecko/i.test(r)&&/Gecko\s*\/\s*\d/i.test(i),t.verGecko=t.isGecko?e.formatNum(/rv\s*\:\s*([\.\,\d]+)/i.test(i)?RegExp.$1:"0.9"):null,t.isOpera=/(OPR\s*\/|Opera\s*\/\s*\d.*\s*Version\s*\/|Opera\s*[\/]?)\s*(\d+[\.,\d]*)/i.test(i),t.verOpera=t.isOpera?e.formatNum(RegExp.$2):null,t.isChrome=!t.isOpera&&/(Chrome|CriOS)\s*\/\s*(\d[\d\.]*)/i.test(i),t.verChrome=t.isChrome?e.formatNum(RegExp.$2):null,t.isSafari=!t.isOpera&&!t.isChrome&&(/Apple/i.test(a)||!a)&&/Safari\s*\/\s*(\d[\d\.]*)/i.test(i),t.verSafari=t.isSafari&&/Version\s*\/\s*(\d[\d\.]*)/i.test(i)?e.formatNum(RegExp.$1):null},init:function(){var e=this;e.detectPlatform(),e.detectIE(),e.detectNonIE()}},init:{hasRun:0,library:function(){window[e.name]=e;var t=this,n=document;e.win.init(),e.head=n.getElementsByTagName("head")[0]||n.getElementsByTagName("body")[0]||n.body||null,e.browser.init(),t.hasRun=1}},ev:{addEvent:function(e,t,n){e&&t&&n&&(e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=this.concatFn(n,e["on"+t]))},removeEvent:function(e,t,n){e&&t&&n&&(e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n))},concatFn:function(e,t){return function(){e(),"function"==typeof t&&t()}},handler:function(e,t,n,i,a){return function(){e(t,n,i,a)}},handlerOnce:function(t,n,i,a){return function(){var r=e.uniqueName();t[r]||(t[r]=1,t(n,i,a))}},handlerWait:function(e,t,n,i,a){var r=this;return function(){r.setTimeout(r.handler(t,n,i,a),e)}},setTimeout:function(t,n){e.win&&e.win.unload||setTimeout(t,n)},fPush:function(t,n){e.isArray(n)&&(e.isFunc(t)||e.isArray(t)&&t.length>0&&e.isFunc(t[0]))&&n.push(t)},call0:function(t){var n=e.isArray(t)?t.length:-1;n>0&&e.isFunc(t[0])?t[0](e,n>1?t[1]:0,n>2?t[2]:0,n>3?t[3]:0):e.isFunc(t)&&t(e)},callArray0:function(t){var n,i=this;if(e.isArray(t))for(;t.length;)n=t[0],t.splice(0,1),e.win&&e.win.unload&&t!==e.win.unloadHndlrs||i.call0(n)},call:function(e){var t=this;t.call0(e),t.ifDetectDoneCallHndlrs()},callArray:function(e){var t=this;t.callArray0(e),t.ifDetectDoneCallHndlrs()},allDoneHndlrs:[],ifDetectDoneCallHndlrs:function(){var t,n,i=this;if(i.allDoneHndlrs.length&&(!e.win||e.win.loaded&&!e.win.loadPrvtHndlrs.length&&!e.win.loadPblcHndlrs.length)){if(e.Plugins)for(t in e.Plugins)if(e.hasOwn(e.Plugins,t)&&(n=e.Plugins[t])&&e.isFunc(n.getVersion)&&(3==n.OTF||n.DoneHndlrs&&n.DoneHndlrs.length||n.BIHndlrs&&n.BIHndlrs.length))return;i.callArray0(i.allDoneHndlrs)}}},getVersion:function(t,n,i){var a,r,o=e.pd.findPlugin(t);return o.status<0?null:(a=o.plugin,1!=a.getVersionDone&&(a.getVersion(null,n,i),null===a.getVersionDone&&(a.getVersionDone=1)),r=a.version||a.version0,r=r?r.replace(e.splitNumRegx,e.pd.getVersionDelimiter):r)},hasMimeType:function(t){if(t&&window.navigator&&navigator.mimeTypes){var n,i,a,r,o=navigator.mimeTypes,s=e.isArray(t)?[].concat(t):e.isString(t)?[t]:[];for(r=s.length,a=0;a<r;a++){n=0;try{e.isString(s[a])&&/[^\s]/.test(s[a])&&(n=o[s[a]])}catch(e){}if((i=n?n.enabledPlugin:0)&&(i.name||i.description))return n}}return null},getInfo:function(t,n,i){var a,r=null,o=e.pd.findPlugin(t);return o.status<0?r:(a=o.plugin,e.isFunc(a.getInfo)&&(null===a.getVersionDone&&(e.getVersion?e.getVersion(t,n,i):e.isMinVersion(t,"0",n,i)),r=a.getInfo()),r)},onDetectionDone:function(t,n,i,a){var r,o=e.pd.findPlugin(t);return o.status==-3?-1:(r=o.plugin,e.isArray(r.DoneHndlrs)||(r.DoneHndlrs=[]),1!=r.getVersionDone&&(e.getVersion?e.getVersion(t,i,a):e.isMinVersion(t,"0",i,a)),r.installed!=-.5&&.5!=r.installed?(e.ev.call(n),1):(e.ev.fPush(n,r.DoneHndlrs),0))},codebase:{isDisabled:function(){return e.browser.ActiveXEnabled&&e.isDefined(e.pd.getPROP(document.createElement("object"),"object"))?0:1},isMin:function(e,t){return 0},search:function(t){var n,i=this,a=(t.$$,0);if(n=t.searchHasRun||i.isDisabled()?1:0,t.searchHasRun=1,n)return t.version||null;i.init(t);var r,o,s,l,u,d=t.DIGITMAX,c=99999999,f=[0,0,0,0],h=[0,0,0,0],p=function(e,n){var r,o=[].concat(f);return o[e]=n,r=i.isActiveXObject(t,o.join(",")),r?(a=1,f[e]=n):h[e]=n,r};for(r=0;r<h.length;r++){for(f[r]=Math.floor(t.DIGITMIN[r])||0,l=f.join(","),u=f.slice(0,r).concat([c,c,c,c]).slice(0,f.length).join(","),s=0;s<d.length;s++)e.isArray(d[s])&&(d[s].push(0),d[s][r]>h[r]&&e.compareNums(u,t.Lower[s])>=0&&e.compareNums(l,t.Upper[s])<0&&(h[r]=Math.floor(d[s][r])));for(o=0;o<30;o++){if(h[r]-f[r]<=16){for(s=h[r];s>=f[r]+(r?1:0)&&!p(r,s);s--);break}p(r,Math.round((h[r]+f[r])/2))}if(!a)break;h[r]=f[r]}return a&&(t.version=i.convert(t,f.join(",")).v),t.version||null},emptyNode:function(e){try{e.innerHTML=""}catch(e){}},HTML:[],len:0,onUnload:function(e,t){var n,i,a=t.HTML;for(n=0;n<a.length;n++)(i=a[n])&&(a[n]=0,t.emptyNode(i.span()),i.span=0,i.spanObj=0,i=0);t.iframe=0},init:function(t){var n=this;if(!n.iframe){var i,a=e.DOM;i=a.iframe.insert(0,"$.codebase{ }"),n.iframe=i,a.iframe.write(i," "),a.iframe.close(i)}if(!t.init){t.init=1;var r,o;for(e.ev.fPush([n.onUnload,n],e.win.unloadHndlrs),t.tagA='<object width="1" height="1" style="display:none;" codebase="#version=',o=t.classID||t.$$.classID||"",t.tagB='" '+(/clsid\s*:/i.test(o)?'classid="':'type="')+o+'">'+e.openTag+"/object>",r=0;r<t.Lower.length;r++)t.Lower[r]=e.formatNum(t.Lower[r]),t.Upper[r]=e.formatNum(t.Upper[r])}},isActiveXObject:function(t,n){var i=this,a=0,r=(t.$$,(e.DOM.iframe.doc(i.iframe)||document).createElement("span"));return t.min&&e.compareNums(n,t.min)<=0?1:t.max&&e.compareNums(n,t.max)>=0?0:(r.innerHTML=t.tagA+n+t.tagB,e.pd.getPROP(r.firstChild,"object")&&(a=1),a?(t.min=n,i.HTML.push({spanObj:r,span:i.span})):(t.max=n,r.innerHTML=""),a)},span:function(){return this.spanObj},convert_:function(t,n,i,a){var r=t.convert[n];return r?e.isFunc(r)?e.formatNum(r(i.split(e.splitNumRegx),a).join(",")):i:r},convert:function(t,n,i){var a,r,o,s=this;if(n=e.formatNum(n),r={v:n,x:-1},n)for(a=0;a<t.Lower.length;a++)if((o=s.convert_(t,a,t.Lower[a]))&&e.compareNums(n,i?o:t.Lower[a])>=0&&(!a||e.compareNums(n,i?s.convert_(t,a,t.Upper[a]):t.Upper[a])<0)){r.v=s.convert_(t,a,n,i),r.x=a;break}return r},z:0},win:{disable:function(){this.cancel=!0},cancel:!1,loaded:!1,unload:!1,hasRun:0,init:function(){var t=this;t.hasRun||(t.hasRun=1,/complete/i.test(document.readyState||"")?t.loaded=!0:e.ev.addEvent(window,"load",t.onLoad),e.ev.addEvent(window,"unload",t.onUnload))},loadPrvtHndlrs:[],loadPblcHndlrs:[],unloadHndlrs:[],onUnload:function(){var t=e.win;t.unload||(t.unload=!0,e.ev.removeEvent(window,"load",t.onLoad),e.ev.removeEvent(window,"unload",t.onUnload),e.ev.callArray(t.unloadHndlrs))},onLoad:function(){var t=e.win;t.loaded||t.unload||t.cancel||(t.loaded=!0,e.ev.callArray(t.loadPrvtHndlrs),e.ev.callArray(t.loadPblcHndlrs))}},DOM:{isEnabled:{objectTag:function(){var t=e.browser,n=t.isIE?0:1;return t.ActiveXEnabled&&(n=1),!!n},objectTagUsingActiveX:function(){var t=0;return e.browser.ActiveXEnabled&&(t=1),!!t},objectProperty:function(t){return t&&t.tagName&&e.browser.isIE?/applet/i.test(t.tagName)?!this.objectTag()||e.isDefined(e.pd.getPROP(document.createElement("object"),"object"))?1:0:e.isDefined(e.pd.getPROP(document.createElement(t.tagName),"object"))?1:0:0}},HTML:[],div:null,divID:"plugindetect",divWidth:500,getDiv:function(){return this.div||document.getElementById(this.divID)||null},initDiv:function(){var t,n=this;n.div||(t=n.getDiv(),t?n.div=t:(n.div=document.createElement("div"),n.div.id=n.divID,n.setStyle(n.div,n.getStyle.div()),n.insertDivInBody(n.div)),e.ev.fPush([n.onUnload,n],e.win.unloadHndlrs)),t=0},pluginSize:1,iframeWidth:40,iframeHeight:10,altHTML:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",emptyNode:function(t){var n=this;if(t&&/div|span/i.test(t.tagName||"")){e.browser.isIE&&n.setStyle(t,["display","none"]);try{t.innerHTML=""}catch(e){}}},removeNode:function(e){try{e&&e.parentNode&&e.parentNode.removeChild(e)}catch(e){}},onUnload:function(e,t){var n,i,a,r=t.HTML,o=r.length;if(o)for(i=o-1;i>=0;i--)(a=r[i])&&(r[i]=0,t.emptyNode(a.span()),t.removeNode(a.span()),a.span=0,a.spanObj=0,a.doc=0,a.objectProperty=0);n=t.getDiv(),t.emptyNode(n),t.removeNode(n),a=0,n=0,t.div=0},span:function(){var e=this;return e.spanObj||(e.spanObj=e.doc.getElementById(e.spanId)),e.spanObj||null},width:function(){var t,n,i=this,a=i.span();return t=a&&e.isNum(a.scrollWidth)?a.scrollWidth:-1,n=a&&e.isNum(a.offsetWidth)?a.offsetWidth:-1,a=0,n>0?n:t>0?t:Math.max(n,t)},obj:function(){var e=this.span();return e?e.firstChild||null:null},readyState:function(){var t=this;return e.browser.isIE&&e.isDefined(e.pd.getPROP(t.span(),"readyState"))?e.pd.getPROP(t.obj(),"readyState"):e.UNDEFINED},objectProperty:function(){var t,n=this,i=n.DOM;return i.isEnabled.objectProperty(n)&&(t=e.pd.getPROP(n.obj(),"object")),t},onLoadHdlr:function(e,t){t.loaded=1},getTagStatus:function(t,n,i,a,r,o,s){var l=this;if(!t||!t.span())return-2;var u=t.width(),d=t.obj()?1:0,c=t.readyState(),f=t.objectProperty();if(f)return 1.5;var h=/clsid\s*\:/i,p=i&&h.test(i.outerHTML||"")?i:a&&h.test(a.outerHTML||"")?a:0,m=i&&!h.test(i.outerHTML||"")?i:a&&!h.test(a.outerHTML||"")?a:0,g=t&&h.test(t.outerHTML||"")?p:m;if(!(n&&n.span()&&g&&g.span()))return-2;var v=g.width(),_=n.width(),y=g.readyState();return u<0||v<0||_<=l.pluginSize?0:(s&&!t.pi&&e.isDefined(f)&&e.browser.isIE&&t.tagName==g.tagName&&t.time<=g.time&&u===v&&0===c&&0!==y&&(t.pi=1),v<_||!t.loaded||!n.loaded||!g.loaded?t.pi?-.1:0:u!=_&&d?u!=l.pluginSize||!d||e.isNum(c)&&4!==c?t.pi?-.5:-1:1:t.pi?-.5:-1)},setStyle:function(e,t){var n,i=e.style;if(i&&t)for(n=0;n<t.length;n+=2)try{i[t[n]]=t[n+1]}catch(e){}e=0,i=0},getStyle:{iframe:function(){return this.span()},span:function(t){var n=e.DOM;return t?this.plugin():[].concat(this.Default).concat(["display","inline","fontSize",n.pluginSize+3+"px","lineHeight",n.pluginSize+3+"px"])},div:function(){var t=e.DOM;return[].concat(this.Default).concat(["display","block","width",t.divWidth+"px","height",t.pluginSize+3+"px","fontSize",t.pluginSize+3+"px","lineHeight",t.pluginSize+3+"px","position","absolute","right","9999px","top","-9999px"])},plugin:function(t){var n=e.DOM;return"background-color:transparent;background-image:none;vertical-align:baseline;outline-style:none;border-style:none;padding:0px;margin:0px;visibility:"+(t?"hidden;":"visible;")+"display:inline;font-size:"+(n.pluginSize+3)+"px;line-height:"+(n.pluginSize+3)+"px;"},Default:["backgroundColor","transparent","backgroundImage","none","verticalAlign","baseline","outlineStyle","none","borderStyle","none","padding","0px","margin","0px","visibility","visible"]},insertDivInBody:function(t,n){var i="pd33993399",a=null,r=n?window.top.document:window.document,o=r.getElementsByTagName("body")[0]||r.body;if(!o)try{r.write('<div id="'+i+'">.'+e.openTag+"/div>"),a=r.getElementById(i)}catch(e){}o=r.getElementsByTagName("body")[0]||r.body,o&&(o.insertBefore(t,o.firstChild),a&&o.removeChild(a)),t=0},iframe:{onLoad:function(t,n){e.ev.callArray(t)},insert:function(t,n){var i,a,r=this,o=e.DOM,s=document.createElement("iframe");o.setStyle(s,o.getStyle.iframe()),s.width=o.iframeWidth,s.height=o.iframeHeight,o.initDiv(),i=o.getDiv(),i.appendChild(s);try{r.doc(s).open()}catch(e){}return s[e.uniqueName()]=[],a=e.ev.handlerOnce(e.isNum(t)&&t>0?e.ev.handlerWait(t,r.onLoad,s[e.uniqueName()],n):e.ev.handler(r.onLoad,s[e.uniqueName()],n)),e.ev.addEvent(s,"load",a),s.onload||(s.onload=a),e.ev.addEvent(r.win(s),"load",a),s},addHandler:function(t,n){t&&e.ev.fPush(n,t[e.uniqueName()])},close:function(e){try{this.doc(e).close()}catch(e){}},write:function(e,t){try{this.doc(e).write(t)}catch(e){}},win:function(e){try{return e.contentWindow}catch(e){}return null},doc:function(e){var t;try{t=e.contentWindow.document}catch(e){}try{t||(t=e.contentDocument)}catch(e){}return t||null}},insert:function(t,n,i,a,r,o,s){var l,u,d,c,f,h=this;if(s||(h.initDiv(),s=h.getDiv()),s&&(/div/i.test(s.tagName)&&(c=s.ownerDocument),/iframe/i.test(s.tagName)&&(c=h.iframe.doc(s))),c&&c.createElement||(c=document),e.isDefined(a)||(a=""),e.isString(t)&&/[^\s]/.test(t)){t=t.toLowerCase().replace(/\s/g,""),l=e.openTag+t+" ",l+='style="'+h.getStyle.plugin(o)+'" ';var p=1,m=1;for(f=0;f<n.length;f+=2)/[^\s]/.test(n[f+1])&&(l+=n[f]+'="'+n[f+1]+'" '),/width/i.test(n[f])&&(p=0),/height/i.test(n[f])&&(m=0);if(l+=(p?'width="'+h.pluginSize+'" ':"")+(m?'height="'+h.pluginSize+'" ':""),"embed"==t||"img"==t)l+=" />";else{for(l+=">",f=0;f<i.length;f+=2)/[^\s]/.test(i[f+1])&&(l+=e.openTag+'param name="'+i[f]+'" value="'+i[f+1]+'" />');l+=a+e.openTag+"/"+t+">"}}else t="",l=a;if(u={spanId:"",spanObj:null,span:h.span,loaded:null,tagName:t,outerHTML:l,DOM:h,time:(new Date).getTime(),width:h.width,obj:h.obj,readyState:h.readyState,objectProperty:h.objectProperty,doc:c},s&&s.parentNode)if(/iframe/i.test(s.tagName))h.iframe.addHandler(s,[h.onLoadHdlr,u]),u.loaded=0,u.spanId=e.name+"Span"+h.HTML.length,d='<span id="'+u.spanId+'" style="'+h.getStyle.span(1)+'">'+l+"</span>",h.iframe.write(s,d);else if(/div/i.test(s.tagName)){d=c.createElement("span"),h.setStyle(d,h.getStyle.span()),s.appendChild(d);try{d.innerHTML=l}catch(e){}u.spanObj=d}return d=0,s=0,h.HTML.push(u),u}},file:{any:"fileStorageAny999",valid:"fileStorageValid999",save:function(t,n,i){var a,r=this;t&&e.isDefined(i)&&(t[r.any]||(t[r.any]=[]),t[r.valid]||(t[r.valid]=[]),t[r.any].push(i),(a=r.split(n,i))&&t[r.valid].push(a))},getValidLength:function(e){return e&&e[this.valid]?e[this.valid].length:0},getAnyLength:function(e){return e&&e[this.any]?e[this.any].length:0},getValid:function(e,t){var n=this;return e&&e[n.valid]?n.get(e[n.valid],t):null},getAny:function(e,t){var n=this;return e&&e[n.any]?n.get(e[n.any],t):null},get:function(t,n){var i=t.length-1,a=e.isNum(n)?n:i;return a<0||a>i?null:t[a]},split:function(t,n){var i,a,r=null;return t=t?t.replace(".","\\."):"",a=new RegExp("^(.*[^\\/])("+t+"\\s*)$"),e.isString(n)&&a.test(n)&&(i=RegExp.$1.split("/"),r={name:i[i.length-1],ext:RegExp.$2,full:n},i[i.length-1]="",r.path=i.join("/")),r}},Plugins:{}};e.init.library();var t={setPluginStatus:function(t,n,i){var a=this;a.version=n?e.formatNum(n,3):null,a.installed=a.version?1:i?i>0?.7:-.1:t?0:-1,a.getVersionDone=.7==a.installed||a.installed==-.1||0===a.nav.done?0:1},getVersion:function(t,n){var i,a=this,r=null,o=0;if(n=e.browser.isIE?0:n,o&&!e.dbug||!a.nav.query(n).installed||(o=1),r&&!e.dbug||!a.nav.query(n).version||(r=a.nav.version),i=r?0:a.codebase.isMin(t))return void a.setPluginStatus(0,0,i);r&&!e.dbug||(i=a.codebase.search())&&(o=1,r=i),o&&!e.dbug||!a.axo.query().installed||(o=1),r&&!e.dbug||!a.axo.query().version||(r=a.axo.version),a.setPluginStatus(o,r)},nav:{done:null,installed:0,version:null,result:[0,0],mimeType:["video/quicktime","application/x-quicktimeplayer","image/x-macpaint","image/x-quicktime","application/x-rtsp","application/x-sdp","application/sdp","audio/vnd.qcelp","video/sd-video","audio/mpeg","video/mp4","video/3gpp2","application/x-mpeg","audio/x-m4b","audio/x-aac","video/flc"],find:"QuickTime.*Plug-?in",find2:"QuickTime.*Plug-?in",find3filename:"QuickTime|QT",avoid:"Totem|VLC|RealPlayer|Helix|MPlayer|Windows\\s*Media\\s*Player",plugins:"QuickTime Plug-in",detect:function(t){var n,i,a=this,r={installed:0,version:null,plugin:null};return n=e.pd.findNavPlugin({find:a.find,find2:t?0:a.find2,avoid:t?0:a.avoid,mimes:a.mimeType,plugins:a.plugins}),n&&(r.plugin=n,r.installed=1,i=new RegExp(a.find,"i"),n.name&&i.test(n.name+"")&&(r.version=e.getNum(n.name+""))),r},query:function(t){var n,i,a=this;if(t=t?1:0,null===a.done){if(e.hasMimeType(a.mimeType)){i=a.detect(1),i.installed&&(n=a.detect(0),a.result=[n,n.installed?n:i]);var r,o=a.result[0],s=a.result[1],l=new RegExp(a.avoid,"i"),u=new RegExp(a.find3filename,"i");o=o?o.plugin:0,s=s?s.plugin:0,o||!s||!s.name||s.description&&!/^[\s]*$/.test(s.description+"")||l.test(s.name+"")||(r=(s.filename||"")+"",/^.*[\\\/]([^\\\/]*)$/.test(r)&&(r=RegExp.$1),r&&u.test(r)&&!l.test(r)&&(a.result[0]=a.result[1]))}a.done=a.result[0]===a.result[1]?1:0}return a.result[t]&&(a.installed=a.result[t].installed,a.version=a.result[t].version),a}},codebase:{classID:"clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B",isMin:function(n){var i,a=this,r=0;return a.$$=t,e.isStrNum(n)&&(i=n.split(e.splitNumRegx),i.length>3&&parseInt(i[3],10)>0&&(i[3]="9999"),n=i.join(","),r=e.codebase.isMin(a,n)),r},search:function(){return this.$$=t,e.codebase.search(this)},DIGITMAX:[[12,11,11],[7,60],[7,11,11],0,[7,11,11]],DIGITMIN:[5,0,0,0],Upper:["999","7,60","7,50","7,6","7,5"],Lower:["7,60","7,50","7,6","7,5","0"],convert:[1,function(e,t){return t?[e[0],e[1]+e[2],e[3],"0"]:[e[0],e[1].charAt(0),e[1].charAt(1),e[2]]},1,0,1]},axo:{hasRun:0,installed:0,version:null,progID:["QuickTimeCheckObject.QuickTimeCheck","QuickTimeCheckObject.QuickTimeCheck.1"],progID0:"QuickTime.QuickTime",query:function(){var t,n,i,a=this,r=a.hasRun||!e.browser.ActiveXEnabled;if(a.hasRun=1,r)return a;for(n=0;n<a.progID.length&&(!(t=e.getAXO(a.progID[n]))||(a.installed=1,!(i=e.pd.getPROP(t,"QuickTimeVersion"))||!i.toString||(i=i.toString(16),a.version=parseInt(i.charAt(0)||"0",16)+"."+parseInt(i.charAt(1)||"0",16)+"."+parseInt(i.charAt(2)||"0",16),e.dbug)));n++);return a}}};e.addPlugin("quicktime",t);var n={mimeType:["application/x-java-applet","application/x-java-vm","application/x-java-bean"],mimeType_dummy:"application/dummymimejavaapplet",classID:"clsid:8AD9C840-044E-11D1-B3E9-00805F499D93",classID_dummy:"clsid:8AD9C840-044E-11D1-B3E9-BA9876543210",navigator:{init:function(){var t=this,i=n;t.mimeObj=e.hasMimeType(i.mimeType),t.mimeObj&&(t.pluginObj=t.mimeObj.enabledPlugin)},a:function(){try{return window.navigator.javaEnabled()}catch(e){}return 1}(),javaEnabled:function(){return!!this.a},mimeObj:0,pluginObj:0},OTF:null,info:{pluginObj:null,getPluginObj:function(){var e=this;return null===e.pluginObj&&(e.pluginObj=n.navMime.pluginObj||n.navigator.pluginObj||0),e.pluginObj},getNavPluginName:function(){var e=this.getPluginObj();return e?e.name||"":""},getNavPluginDescription:function(){var e=this.getPluginObj();return e?e.description||"":""},Plugin2Status:0,setPlugin2Status:function(t){e.isNum(t)&&(this.Plugin2Status=t)},getPlugin2Status:function(){var t,n,i,a,r,o=this;return 0===o.Plugin2Status&&(n=/Next.*Generation.*Java.*Plug-?in|Java.*Plug-?in\s*2\s/i,i=/Classic.*Java.*Plug-?in/i,a=o.getNavPluginDescription(),r=o.getNavPluginName(),n.test(a)||n.test(r)?o.setPlugin2Status(1):i.test(a)||i.test(r)?o.setPlugin2Status(-1):e.browser.isIE&&/Sun|Oracle/i.test(o.getVendor())&&(t=o.isMinJre4Plugin2(),t>0?o.setPlugin2Status(1):t<0&&o.setPlugin2Status(-1))),o.Plugin2Status},isMinJre4Plugin2:function(t){var i,a=n,r="",o=a.applet.getResult()[0];return r=1==e.OS?"1,6,0,10":2==e.OS?"1,6,0,12":(e.OS,"1,6,0,10"),t||(t=(o&&!a.applet.isRange(o)?o:0)||a.version,i=a.applet.codebase,t=t||(i.min&&r?i.isMin(r)>0?r:"0,0,0,0":0)),t=e.formatNum(e.getNum(t)),t?e.compareNums(t,r)>=0?1:-1:0},BrowserForbidsPlugin2:function(){var t=e.browser;return e.OS>=20?0:t.isGecko&&e.compareNums(t.verGecko,"1,9,0,0")<0||t.isOpera&&e.compareNums(t.verOpera,"10,50,0,0")<0?1:0},BrowserRequiresPlugin2:function(){var t=e.browser;return e.OS>=20?0:t.isGecko&&e.compareNums(t.verGecko,"1,9,2,0")>=0||t.isChrome||1==e.OS&&t.isOpera&&e.compareNums(t.verOpera,"10,60,0,0")>=0?1:0},VENDORS:["Sun Microsystems Inc.","Apple Computer, Inc.","Oracle Corporation","IBM Corporation"],VENDORS_reg:[/Sun/i,/Apple/i,/Oracle/i,/IBM/i],getNavVendor:function(){var e,t=this,n=t.getNavPluginName(),i=t.getNavPluginDescription(),a="";if(n||i)for(e=0;e<t.VENDORS.length;e++)if(t.VENDORS_reg[e].test(n)||t.VENDORS_reg[e].test(i)){a=t.VENDORS[e];break}return a},OracleMin:"1,7,0,0",OracleOrSun:function(t){var n=this;return n.VENDORS[e.compareNums(e.formatNum(t),n.OracleMin)<0?0:2]},OracleOrApple:function(t){var n=this;return n.VENDORS[e.compareNums(e.formatNum(t),n.OracleMin)<0?1:2]},getVendor:function(){var t,i,a=this,r=n,o=r.vendor||r.applet.getResult()[1]||"";return o||(i=r.DTK.version,t=r.applet.codebase,i=i||t.version||(t.min?t.isMin(a.OracleMin)>0?a.OracleMin:"0,0,0,0":0),i?o=a.OracleOrSun(i):(o=a.getNavVendor()||"")||r.version&&(2==e.OS?o=a.OracleOrApple(r.version):1!=e.OS&&3!=e.OS||(o=a.OracleOrSun(r.version)))),o},isPlugin2InstalledEnabled:function(){var e=this,t=n,i=-1,a=t.installed,r=e.getPlugin2Status(),o=e.BrowserRequiresPlugin2(),s=e.BrowserForbidsPlugin2(),l=e.isMinJre4Plugin2();return null!==a&&a>=-.1&&(r>=3?i=1:r<=-3||(2==r?i=1:r==-2||(o&&r>=0&&l>0?i=1:s&&r<=0&&l<0||(o?i=1:s||(r>0?i=1:r<0||l<0||(i=0)))))),i},result:{getDeploymentToolkitObj:function(){var e=n,t=e.info,i=e.DTK;return i.query(1),t.updateResult(),i.status&&i.HTML?i.HTML.obj():i.status}},updateResult:function(){var t,i=this,a=n,r=a.applet,o=a.installed,s=a.DTK,l=r.results,u=i.result;for(u.DeployTK_versions=[].concat(e.isArray(s.VERSIONS)?s.VERSIONS:[]),u.vendor=i.getVendor(),u.isPlugin2=i.isPlugin2InstalledEnabled(),u.OTF=a.OTF<3?0:3==a.OTF?1:2,u.JavaAppletObj=null,t=0;t<l.length;t++)if(l[t][0]&&r.HTML[t]&&r.HTML[t].obj()){u.JavaAppletObj=r.HTML[t].obj();break}var d=[null,null,null,null];for(t=0;t<l.length;t++)l[t][0]?d[t]=1:null!==l[t][0]?(a.NOTF&&a.NOTF.isAppletActive(t),r.active[t]>0?d[t]=0:r.allowed[t]>=1&&3!=a.OTF&&(r.isDisabled.single(t)||o==-.2||o==-1||r.active[t]<0||3==t&&/Microsoft/i.test(u.vendor))&&(d[t]=-1)):3==t&&l[0][0]?d[t]=0:r.isDisabled.single(t)&&(d[t]=-1);u.objectTag=d[1],u.appletTag=d[2],u.objectTagActiveX=d[3],u.name=i.getNavPluginName(),u.description=i.getNavPluginDescription(),u.All_versions=[].concat(u.DeployTK_versions.length?u.DeployTK_versions:e.isString(a.version)?[a.version]:[]);var c=u.All_versions;for(t=0;t<c.length;t++)c[t]=e.formatNum(e.getNum(c[t]));return u}},getInfo:function(){var e=this.info;return e.updateResult(),e.result},getVerifyTagsDefault:function(){return[1,this.applet.isDisabled.VerifyTagsDefault_1()?0:1,1]},getVersion:function(t,n,i){var a,r=this,o=r.applet,s=r.verify,l=r.navigator,u=null,d=null,c=null;if(null===r.getVersionDone&&(r.OTF=0,l.init(),s&&s.init()),o.setVerifyTagsArray(i),e.file.save(r,".jar",n),0===r.getVersionDone)return void(o.should_Insert_Query_Any()&&(a=o.insert_Query_Any(t),r.setPluginStatus(a[0],a[1],u,t)));u&&!e.dbug||!r.navMime.query().version||(u=r.navMime.version),u&&!e.dbug||!r.navPlugin.query().version||(u=r.navPlugin.version),u&&!e.dbug||!r.DTK.query().version||(u=r.DTK.version),r.nonAppletDetectionOk(u)&&(c=u),r.setPluginStatus(c,d,u,t),o.should_Insert_Query_Any()&&(a=o.insert_Query_Any(t),a[0]&&(c=a[0],d=a[1])),r.setPluginStatus(c,d,u,t)},nonAppletDetectionOk:function(t){var n=this,i=n.navigator,a=e.browser,r=1;return t&&i.javaEnabled()&&(a.isIE||i.mimeObj)||(r=0),r},setPluginStatus:function(t,n,i,a){var r,o=this,s=0,l=o.applet;i=i||o.version0,r=l.isRange(t),r&&(l.setRange(r,a)==t&&(s=r),t=0),o.OTF<3&&(o.installed=s?s>0?.7:-.1:t?1:i?-.2:-1),2==o.OTF&&o.NOTF&&!o.applet.getResult()[0]&&(o.installed=i?-.2:-1),3==o.OTF&&o.installed!=-.5&&.5!=o.installed&&(o.installed=o.NOTF.isJavaActive(1)>=1?.5:-.5),4!=o.OTF||o.installed!=-.5&&.5!=o.installed||(t?o.installed=1:s?o.installed=s>0?.7:-.1:o.NOTF.isJavaActive(1)>=1?i?(o.installed=1,t=i):o.installed=0:o.installed=i?-.2:-1),i&&(o.version0=e.formatNum(e.getNum(i))),t&&!s&&(o.version=e.formatNum(e.getNum(t))),n&&e.isString(n)&&(o.vendor=n),o.vendor||(o.vendor=""),o.verify&&o.verify.isEnabled()?o.getVersionDone=0:1!=o.getVersionDone&&(o.OTF<2?o.getVersionDone=0:o.getVersionDone=o.applet.can_Insert_Query_Any()?0:1)},DTK:{hasRun:0,status:null,VERSIONS:[],version:"",HTML:null,Plugin2Status:null,classID:["clsid:CAFEEFAC-DEC7-0000-0001-ABCDEFFEDCBA","clsid:CAFEEFAC-DEC7-0000-0000-ABCDEFFEDCBA"],mimeType:["application/java-deployment-toolkit","application/npruntime-scriptable-plugin;DeploymentToolkit"],isDisabled:function(t){var n=this;return n.HTML?1:t||e.dbug?0:n.hasRun||!e.DOM.isEnabled.objectTagUsingActiveX()?1:0},query:function(t){var i,a,r,o=this,s=n,l=e.DOM.altHTML,u={},d=null,c=null,f=o.isDisabled(t);if(o.hasRun=1,f)return o;if(o.status=0,e.DOM.isEnabled.objectTagUsingActiveX())for(i=0;i<o.classID.length&&(o.HTML=e.DOM.insert("object",["classid",o.classID[i]],[],l),d=o.HTML.obj(),!e.pd.getPROP(d,"jvms"));i++);else(a=e.hasMimeType(o.mimeType))&&a.type&&(o.HTML=e.DOM.insert("object",["type",a.type],[],l),d=o.HTML.obj());if(d){try{Math.abs(s.info.getPlugin2Status())<2&&(o.Plugin2Status=d.isPlugin2())}catch(e){}null!==o.Plugin2Status&&(o.Plugin2Status?s.info.setPlugin2Status(2):(e.DOM.isEnabled.objectTagUsingActiveX()||s.info.getPlugin2Status()<=0)&&s.info.setPlugin2Status(-2));try{if((r=e.pd.getPROP(d,"jvms"))&&(c=r.getLength(),e.isNum(c)))for(o.status=c>0?1:-1,i=0;i<c;i++)(a=e.getNum(r.get(c-1-i).version))&&(o.VERSIONS.push(a),u["a"+e.formatNum(a)]=1)}catch(e){}o.VERSIONS.length&&(o.version=e.formatNum(o.VERSIONS[0]))}return o}},navMime:{hasRun:0,mimetype:"",version:"",mimeObj:0,pluginObj:0,regexJPI:/^\s*application\/x-java-applet;jpi-version\s*=\s*(\d.*)$/i,isDisabled:function(){var e=this,t=n;return e.hasRun||!t.navigator.mimeObj?1:0},update:function(t){var n=this,i=t?t.enabledPlugin:0,a=t&&n.regexJPI.test(t.type||"")?e.formatNum(e.getNum(RegExp.$1)):0;a&&i&&(i.description||i.name)&&e.compareNums(a,n.version||e.formatNum("0"))>0&&(n.version=a,n.mimeObj=t,n.pluginObj=i,n.mimetype=t.type)},query:function(){var t,i,a,r,o,s,l=this,u=n,d=navigator.mimeTypes,c=l.isDisabled();if(l.hasRun=1,c)return l;if(s=d.length,e.isNum(s))for(t=0;t<s;t++){a=0;try{a=d[t]}catch(e){}l.update(a)}if(!l.version||e.dbug)for(o=e.isArray(u.mimeType)?u.mimeType:[u.mimeType],t=0;t<o.length;t++){a=0;try{a=d[o[t]]}catch(e){}if(r=a?a.enabledPlugin:0,s=r?r.length:null,e.isNum(s))for(i=0;i<s;i++){a=0;try{a=r[i]}catch(e){}l.update(a)}}return l}},navPlugin:{hasRun:0,version:"",getPlatformNum:function(){var t=n,i=0,a=/Java.*TM.*Platform[^\d]*(\d+)[\.,_]?(\d*)\s*U?(?:pdate)?\s*(\d*)/i,r=e.pd.findNavPlugin({find:a,mimes:t.mimeType,plugins:1});return r&&(a.test(r.name||"")||a.test(r.description||""))&&parseInt(RegExp.$1,10)>=5&&(i="1,"+RegExp.$1+","+(RegExp.$2?RegExp.$2:"0")+","+(RegExp.$3?RegExp.$3:"0")),i},getPluginNum:function(){var t,i,a,r,o=this,s=n,l=0;return a=/Java[^\d]*Plug-in/i,r=e.pd.findNavPlugin({find:a,num:1,mimes:s.mimeType,plugins:1,dbug:0}),r&&(t=o.checkPluginNum(r.description,a),i=o.checkPluginNum(r.name,a),l=t&&i?e.compareNums(t,i)>0?t:i:t||i),l||(a=/Java.*\d.*Plug-in/i,(r=e.pd.findNavPlugin({find:a,mimes:s.mimeType,plugins:1,dbug:0}))&&(t=o.checkPluginNum(r.description,a),i=o.checkPluginNum(r.name,a),l=t&&i?e.compareNums(t,i)>0?t:i:t||i)),l},checkPluginNum:function(t,n){var i,a;return i=n.test(t)?e.formatNum(e.getNum(t)):0,i&&e.compareNums(i,e.formatNum("10"))>=0&&(a=i.split(e.splitNumRegx),i=e.formatNum("1,"+(parseInt(a[0],10)-3)+",0,"+a[1])),i&&(e.compareNums(i,e.formatNum("1,3"))<0||e.compareNums(i,e.formatNum("2"))>=0)&&(i=0),i},query:function(){var t,i=this,a=n,r=0,o=i.hasRun||!a.navigator.mimeObj;return i.hasRun=1,o?i:(r&&!e.dbug||(t=i.getPlatformNum())&&(r=t),r&&!e.dbug||(t=i.getPluginNum())&&(r=t),r&&(i.version=e.formatNum(r)),i)}},applet:{codebase:{isMin:function(t){return this.$$=n,e.codebase.isMin(this,t)},search:function(){return this.$$=n,e.codebase.search(this)},DIGITMAX:[[15,128],[6,0,512],0,[1,5,2,256],0,[1,4,1,1],[1,4,0,64],[1,3,2,32]],DIGITMIN:[1,0,0,0],Upper:["999","10","5,0,20","1,5,0,20","1,4,1,20","1,4,1,2","1,4,1","1,4"],Lower:["10","5,0,20","1,5,0,20","1,4,1,20","1,4,1,2","1,4,1","1,4","0"],convert:[function(e,t){return t?[parseInt(e[0],10)>1?"99":parseInt(e[1],10)+3+"",e[3],"0","0"]:["1",parseInt(e[0],10)-3+"","0",e[1]]},function(e,t){return t?[e[1],e[2],e[3]+"0","0"]:["1",e[0],e[1],e[2].substring(0,e[2].length-1||1)]},0,function(e,t){return t?[e[0],e[1],e[2],e[3]+"0"]:[e[0],e[1],e[2],e[3].substring(0,e[3].length-1||1)]},0,1,function(e,t){return t?[e[0],e[1],e[2],e[3]+"0"]:[e[0],e[1],e[2],e[3].substring(0,e[3].length-1||1)]},1]},results:[[null,null],[null,null],[null,null],[null,null]],getResult:function(){var e,t=this,n=t.results,i=[];for(e=n.length-1;e>=0&&(i=n[e],!i[0]);e--);return i=[].concat(i)},DummySpanTagHTML:0,HTML:[0,0,0,0],active:[0,0,0,0],DummyObjTagHTML:0,DummyObjTagHTML2:0,allowed:[1,1,1,1],VerifyTagsHas:function(e){var t,n=this;for(t=0;t<n.allowed.length;t++)if(n.allowed[t]===e)return 1;return 0},saveAsVerifyTagsArray:function(t){var n,i=this;if(e.isArray(t)){for(n=1;n<i.allowed.length;n++)t.length>n-1&&e.isNum(t[n-1])&&(t[n-1]<0&&(t[n-1]=0),t[n-1]>3&&(t[n-1]=3),i.allowed[n]=t[n-1]);i.allowed[0]=i.allowed[3]}},setVerifyTagsArray:function(t){var i=this,a=n;null===a.getVersionDone&&i.saveAsVerifyTagsArray(a.getVerifyTagsDefault()),e.dbug?i.saveAsVerifyTagsArray([3,3,3]):t&&i.saveAsVerifyTagsArray(t)},isDisabled:{single:function(t){var n=this;return n.all()?1:1==t?!e.DOM.isEnabled.objectTag():2==t?n.AppletTag():0===t?e.codebase.isDisabled():3==t?!e.DOM.isEnabled.objectTagUsingActiveX():1},all_:null,all:function(){var t,i=this,a=n,r=a.navigator,o=e.browser;return null===i.all_&&(t=o.isOpera&&e.compareNums(o.verOpera,"13,0,0,0")<0&&!r.javaEnabled()||i.AppletTag()&&!e.DOM.isEnabled.objectTag()||!r.mimeObj&&!o.isIE?1:0,i.all_=t),i.all_},AppletTag:function(){var t=n,i=t.navigator;return e.browser.isIE?!i.javaEnabled():0},VerifyTagsDefault_1:function(){var t=e.browser,n=1;return t.isIE&&!t.ActiveXEnabled&&(n=0),(t.isIE&&t.verIE<9||t.verGecko&&e.compareNums(t.verGecko,e.formatNum("2"))<0||t.isSafari&&(!t.verSafari||e.compareNums(t.verSafari,e.formatNum("4"))<0)||t.isOpera&&e.compareNums(t.verOpera,e.formatNum("11"))<0)&&(n=0),n}},can_Insert_Query:function(e){var t=this,n=t.results[0][0],i=t.getResult()[0];return t.HTML[e]||0===e&&null!==n&&!t.isRange(n)||0===e&&i&&!t.isRange(i)?0:!t.isDisabled.single(e)},can_Insert_Query_Any:function(){var e,t=this;for(e=0;e<t.results.length;e++)if(t.can_Insert_Query(e))return 1;return 0},should_Insert_Query:function(e){var t=this,i=t.allowed,a=n,r=t.getResult()[0];return r=r&&(e>0||!t.isRange(r)),t.can_Insert_Query(e)&&0!==i[e]?3==i[e]||2.8==i[e]&&!r?1:a.nonAppletDetectionOk(a.version0)||2!=i[e]&&(1!=i[e]||r)?0:1:0},should_Insert_Query_Any:function(){var e,t=this;for(e=0;e<t.allowed.length;e++)if(t.should_Insert_Query(e))return 1;return 0},query:function(t){var i,a,r=this,o=n,s=null,l=null,u=r.results,d=r.HTML[t];if(d&&d.obj()&&!u[t][0]&&!o.bridgeDisabled&&(i=d.obj(),a=d.readyState(),!e.isNum(a)||4==a)){try{s=e.getNum(i.getVersion()+""),l=i.getVendor()+"",i.statusbar((e.win.loaded," "))}catch(e){}!s||!e.isStrNum(s)||e.dbug&&o.OTF<3||(u[t]=[s,l],r.active[t]=2)}},isRange:function(e){return/^[<>]/.test(e||"")?">"==e.charAt(0)?1:-1:0},setRange:function(t,n){return(t?t>0?">":"<":"")+(e.isString(n)?n:"")},insertJavaTag:function(t,i,a,r,o){var s=n,l=e.file.getValid(s),u=l.name+l.ext,d=l.path,c=["archive",u,"code","A.class"],f=(r?["width",r]:[]).concat(o?["height",o]:[]),h=["mayscript","true"],p=["scriptable","true","codebase_lookup","false"].concat(h),m=s.navigator,g=!e.browser.isIE&&m.mimeObj&&m.mimeObj.type?m.mimeObj.type:s.mimeType[0];return 1==t?(e.browser.isIE,e.DOM.insert("object",["type",g].concat(f),["codebase",d].concat(c).concat(p),a,s,0,i)):2==t?e.browser.isIE?e.DOM.insert("applet",["alt",a].concat(h).concat(c).concat(f),["codebase",d].concat(p),a,s,0,i):e.DOM.insert("applet",["codebase",d,"alt",a].concat(h).concat(c).concat(f),[].concat(p),a,s,0,i):3==t?e.browser.isIE?e.DOM.insert("object",["classid",s.classID].concat(f),["codebase",d].concat(c).concat(p),a,s,0,i):e.DOM.insert():4==t?e.DOM.insert("embed",["codebase",d].concat(c).concat(["type",g]).concat(p).concat(f),[],a,s,0,i):e.DOM.insert()},insertIframe:function(t){return e.DOM.iframe.insert(99,t)},insert_Query_Any:function(t){var i,a,r=this,o=n,s=e.DOM,l=r.results,u=r.HTML,d=s.altHTML,c=e.file.getValid(o);return r.should_Insert_Query(0)&&(o.OTF<2&&(o.OTF=2),l[0]=[0,0],i=t?r.codebase.isMin(t):r.codebase.search(),i&&(l[0][0]=t?r.setRange(i,t):i),r.active[0]=i?1.5:-1),c?(r.DummySpanTagHTML||(a=r.insertIframe("applet.DummySpanTagHTML"),r.DummySpanTagHTML=s.insert("",[],[],d,0,0,a),s.iframe.close(a)),r.should_Insert_Query(1)&&(o.OTF<2&&(o.OTF=2),a=r.insertIframe("applet.HTML[1]"),u[1]=r.insertJavaTag(1,a,d),s.iframe.close(a),l[1]=[0,0],r.query(1)),r.should_Insert_Query(2)&&(o.OTF<2&&(o.OTF=2),a=r.insertIframe("applet.HTML[2]"),u[2]=r.insertJavaTag(2,a,d),s.iframe.close(a),l[2]=[0,0],r.query(2)),r.should_Insert_Query(3)&&(o.OTF<2&&(o.OTF=2),a=r.insertIframe("applet.HTML[3]"),u[3]=r.insertJavaTag(3,a,d),s.iframe.close(a),l[3]=[0,0],r.query(3)),s.isEnabled.objectTag()&&(r.DummyObjTagHTML||!u[1]&&!u[2]||(a=r.insertIframe("applet.DummyObjTagHTML"),r.DummyObjTagHTML=s.insert("object",["type",o.mimeType_dummy],[],d,0,0,a),s.iframe.close(a)),!r.DummyObjTagHTML2&&u[3]&&(a=r.insertIframe("applet.DummyObjTagHTML2"),r.DummyObjTagHTML2=s.insert("object",["classid",o.classID_dummy],[],d,0,0,a),s.iframe.close(a))),o.NOTF.init(),r.getResult()):r.getResult()}},NOTF:{count:0,count2:0,countMax:25,intervalLength:250,init:function(){var t=this,i=n;i.OTF<3&&t.shouldContinueQuery()&&(i.OTF=3,e.ev.setTimeout(t.onIntervalQuery,t.intervalLength))},allHTMLloaded:function(){var e,t=n.applet,i=[t.DummySpanTagHTML,t.DummyObjTagHTML,t.DummyObjTagHTML2].concat(t.HTML);for(e=0;e<i.length;e++)if(i[e]&&null!==i[e].loaded&&!i[e].loaded)return 0;return 1},shouldContinueQuery:function(){var e,t=this,i=n,a=i.applet,r=0;if(t.allHTMLloaded()){if(t.count-t.count2>2)return r}else t.count2=t.count;for(e=0;e<a.results.length;e++)a.HTML[e]&&!a.results[e][0]&&(a.allowed[e]>=2||1==a.allowed[e]&&!a.getResult()[0])&&(!t.count||t.isAppletActive(e)>=0)&&(r=1);return r},isJavaActive:function(e){var t,i,a=this,r=n,o=-9;for(t=0;t<r.applet.HTML.length;t++)(i=a.isAppletActive(t,e))>o&&(o=i);return o},isAppletActive:function(t,i){var a,r,o=this,s=n,l=s.navigator,u=s.applet,d=u.HTML[t],c=u.active,f=0,h=c[t];if(i||h>=1.5||!d||!d.span())return h;for(r=e.DOM.getTagStatus(d,u.DummySpanTagHTML,u.DummyObjTagHTML,u.DummyObjTagHTML2,o.count),a=0;a<c.length;a++)c[a]>0&&(f=1);return h=1!=r?r:e.browser.isIE||s.version0&&l.javaEnabled()&&l.mimeObj&&("object"==d.tagName||f)?1:0,c[t]=h,h},onIntervalQuery:function(){var t,i=n.NOTF;i.count++,3==n.OTF&&(t=i.queryAllApplets(),i.shouldContinueQuery()||i.queryCompleted(t)),3==n.OTF&&e.ev.setTimeout(i.onIntervalQuery,i.intervalLength)},queryAllApplets:function(){var e,t=n,i=t.applet;for(e=0;e<i.results.length;e++)i.query(e);return i.getResult()},queryCompleted:function(t){var i=this,a=n;a.OTF>=4||(a.OTF=4,i.isJavaActive(),a.setPluginStatus(t[0],t[1],0),e.ev.callArray(a.DoneHndlrs))}}};e.addPlugin("java",n);var i={mimeType:"application/x-shockwave-flash",setPluginStatus:function(t,n){var i,a=this;a.installed=n?1:t?0:-1,a.version=e.formatNum(n),i=a.installed==-1||a.instance.version,i=i||a.axo.version,a.getVersionDone=i?1:0},getVersion:function(t,n){var i=this,a=null,r=0;r&&!e.dbug||!i.navPlugin.query().installed||(r=1),a&&!e.dbug||!i.navPlugin.query().version||(a=i.navPlugin.version),r&&!e.dbug||!i.axo.query().installed||(r=1),a&&!e.dbug||!i.axo.query().version||(a=i.axo.version),(!r&&!a||n||e.dbug)&&i.instance.query().version&&(r=1,a=i.instance.version),i.setPluginStatus(r,a)},navPlugin:{hasRun:0,installed:0,version:null,getNum:function(e){if(!e)return null;var t=/[\d][\d\,\.\s]*[rRdD]{0,1}[\d\,]*/.exec(e);return t?t[0].replace(/[rRdD\.]/g,",").replace(/\s/g,""):null},query:function(){var t,n,a=this,r=i,o=a.hasRun||!e.hasMimeType(r.mimeType);return a.hasRun=1,o?a:(n=e.pd.findNavPlugin({find:"Shockwave.*Flash",mimes:r.mimeType,plugins:["Shockwave Flash"]}),n&&(a.installed=1,n.description&&(t=a.getNum(n.description))),t&&(t=e.getPluginFileVersion(n,t)),t&&(a.version=t),a)}},axo:{hasRun:0,installed:0,version:null,progID:"ShockwaveFlash.ShockwaveFlash",classID:"clsid:D27CDB6E-AE6D-11CF-96B8-444553540000",query:function(){var t,n,i,a=this,r=a.hasRun;if(a.hasRun=1,r)return a;for(n=0;n<10;n++)if(i=e.getAXO(a.progID+(n?"."+n:""))){a.installed=1,t=0;try{t=e.getNum(i.GetVariable("$version")+"")}catch(e){}if(t&&(a.version=t,!e.dbug))break}return a}},instance:{hasRun:0,version:null,HTML:null,isEnabled:function(){var t=this,n=i,a=1;return!t.hasRun&&!e.DOM.isEnabled.objectTagUsingActiveX()&&e.DOM.isEnabled.objectTag()&&e.hasMimeType(n.mimeType)||(a=0),a},query:function(){var t=this,n=i,a=t.isEnabled();if(t.hasRun=1,a){t.HTML=e.DOM.insert("object",["type",n.mimeType],["play","false","menu","false"],"",n);try{t.version=e.getNum(t.HTML.obj().GetVariable("$version")+"")}catch(e){}}return t}}};e.addPlugin("flash",i);var a={getVersion:function(){var t,n=this,i=null;t&&!e.dbug||!n.nav.query().installed||(t=1),i&&!e.dbug||!n.nav.query().version||(i=n.nav.version),t&&!e.dbug||!n.axo.query().installed||(t=1),i&&!e.dbug||!n.axo.query().version||(i=n.axo.version),n.installed=i?1:t?0:-1,n.version=e.formatNum(i)},nav:{hasRun:0,installed:0,version:null,mimeType:"application/x-director",query:function(){var t,n,i=this,a=i.hasRun||!e.hasMimeType(i.mimeType);return i.hasRun=1,a?i:(n=e.pd.findNavPlugin({find:"Shockwave\\s*for\\s*Director",mimes:i.mimeType,plugins:"Shockwave for Director"}),n&&n.description&&(t=e.getNum(n.description+"")),t&&(t=e.getPluginFileVersion(n,t)),n&&(i.installed=1),t&&(i.version=t),i)}},axo:{hasRun:0,installed:null,version:null,progID:["SWCtl.SWCtl","SWCtl.SWCtl.1","SWCtl.SWCtl.7","SWCtl.SWCtl.8","SWCtl.SWCtl.11","SWCtl.SWCtl.12"],classID:"clsid:166B1BCA-3F9C-11CF-8075-444553540000",query:function(){var t,n,i,a,r,o=this,s=!o.hasRun;if(o.hasRun=1,s)for(n=0;n<o.progID.length;n++)if(t=e.getAXO(o.progID[n])){o.installed=1,a="";try{a=t.ShockwaveVersion("")+""}catch(e){}if(/(\d[\d\.\,]*)(?:\s*r\s*(\d+))?/i.test(a)&&(r=RegExp.$2,i=e.formatNum(RegExp.$1),r&&(i=i.split(e.splitNumRegx),i[3]=r,i=i.join(","))),i&&(o.version=i,!e.dbug))break}return o}}};e.addPlugin("shockwave",a);var r={setPluginStatus:function(t,n){var i=this;t&&(i.version=e.formatNum(t)),i.installed=i.version?1:n?0:-1,i.getVersionDone=0===i.installed?0:1},getVersion:function(t,n){var i,a=this,r=null;i&&!e.dbug||!a.nav.query().installed||(i=1),i&&!e.dbug||!a.axo.query().installed||(i=1),r&&!e.dbug||!a.axo.query().version||(r=a.axo.version),(!i&&!r||n||e.dbug)&&a.FirefoxPlugin.query().version&&(i=1,r=a.FirefoxPlugin.version),a.setPluginStatus(r,i)},mimeType:["application/x-ms-wmp","application/asx","application/x-mplayer2","video/x-ms-asf","video/x-ms-wm","video/x-ms-asf-plugin"],find:["Microsoft.*Windows\\s*Media\\s*Player.*Firefox.*Plug-?in","Windows\\s*Media\\s*Player\\s*Plug-?in\\s*Dynamic\\s*Link\\s*Library","Flip4Mac.*Windows\\s*Media.*Plug-?in|Flip4Mac.*WMV.*Plug-?in"],avoid:"Totem|VLC|RealPlayer|Helix",plugins:["Microsoft"+String.fromCharCode(174)+" Windows Media Player Firefox Plugin","Windows Media Player Plug-in Dynamic Link Library"],nav:{hasRun:0,installed:0,query:function(){var t,n=this,i=r,a=n.hasRun||!e.hasMimeType(i.mimeType);return n.hasRun=1,a?n:(t=e.pd.findNavPlugin({find:i.find.join("|"),avoid:i.avoid,mimes:i.mimeType,plugins:i.plugins}),t&&(n.installed=1),n)}},FirefoxPlugin:{hasRun:0,version:null,isDisabled:function(){var t=this,n=r,i=e.browser;return t.hasRun||i.isGecko&&e.compareNums(i.verGecko,e.formatNum("1.8"))<0||i.isOpera&&e.compareNums(i.verOpera,e.formatNum("10"))<0||e.DOM.isEnabled.objectTagUsingActiveX()||!e.hasMimeType(n.mimeType)||!e.pd.findNavPlugin({find:n.find[0],avoid:n.avoid,mimes:n.mimeType,plugins:n.plugins[0]})?1:0},query:function(){var t,n=this,i=r,a=n.isDisabled();return n.hasRun=1,a?n:(t=e.pd.getPROP(e.DOM.insert("object",["type",e.hasMimeType(i.mimeType).type,"data",""],["src",""],"",i).obj(),"versionInfo"),t&&(n.version=e.getNum(t)),n)}},axo:{hasRun:0,installed:null,version:null,progID:["WMPlayer.OCX","WMPlayer.OCX.7"],classID:"clsid:6BF52A52-394A-11D3-B153-00C04F79FAA6",query:function(){var t,n,i,a=this,r=!a.hasRun;if(a.hasRun=1,r)for(n=0;n<a.progID.length&&(!(t=e.getAXO(a.progID[n]))||(a.installed=1,i=e.pd.getPROP(t,"versionInfo",0),i&&(i=e.getNum(i)),!i||(a.version=i,e.dbug)));n++);return a}},result:0,getInfo:function(){var t=this,n=t.installed;return t.result||(t.result={ActiveXPlugin:!!t.axo.version,FirefoxPlugin:!(0!==n&&1!=n||!e.pd.findNavPlugin({find:t.find[0],avoid:t.avoid,mimes:t.mimeType,plugins:t.plugins[0]})),DllPlugin:!(0!==n&&1!=n||!e.pd.findNavPlugin({find:t.find[1],avoid:t.avoid,mimes:t.mimeType,plugins:t.plugins[1]})),Flip4macPlugin:!(0!==n&&1!=n||!e.pd.findNavPlugin({find:t.find[2],avoid:t.avoid,mimes:t.mimeType,plugins:1}))},t.result.Scriptable=!(1!=n&&!t.result.FirefoxPlugin)),t.result}};e.addPlugin("windowsmediaplayer",r);var o={getVersion:function(){var t=this,n=null,i=0;i&&!e.dbug||!t.nav.query().installed||(i=1),n&&!e.dbug||!t.nav.query().version||(n=t.nav.version),i&&!e.dbug||!t.axo.query().installed||(i=1),n&&!e.dbug||!t.axo.query().version||(n=t.axo.version),t.version=e.formatNum(n),t.installed=n?1:i?0:-1},nav:{hasRun:0,installed:0,version:null,mimeType:["application/x-silverlight","application/x-silverlight-2"],query:function(){var t,n,i,a=this,r=a.hasRun||!e.hasMimeType(a.mimeType);return a.hasRun=1,r?a:(i=e.pd.findNavPlugin({find:"Silverlight.*Plug-?in",mimes:a.mimeType,plugins:"Silverlight Plug-In"}),i&&(a.installed=1),i&&i.description&&(n=e.formatNum(e.getNum(i.description+""))),n&&(t=n.split(e.splitNumRegx),parseInt(t[0],10)<2&&parseInt(t[2],10)>=30226&&(t[0]="2"),n=t.join(",")),n&&(a.version=n),a)}},axo:{hasRun:0,installed:0,version:null,progID:"AgControl.AgControl",maxdigit:[20,10,10,100,100,10],mindigit:[0,0,0,0,0,0],IsVersionSupported:function(t,n){var i=this;try{return i.testVersion?e.compareNums(e.formatNum(i.testVersion.join(",")),e.formatNum(n.join(",")))>=0:t.IsVersionSupported(i.format(n))}catch(e){}return 0},format:function(e){var t=this;return e[0]+"."+e[1]+"."+e[2]+t.make2digits(e[3])+t.make2digits(e[4])+"."+e[5]},make2digits:function(e){return(e<10?"0":"")+e},query:function(){var t,n,i=this,a=i.hasRun;if(i.hasRun=1,a)return i;if(n=e.getAXO(i.progID),n&&(i.installed=1),n&&i.IsVersionSupported(n,i.mindigit)){var r,o=[].concat(i.mindigit),s=0;for(t=0;t<i.maxdigit.length;t++){for(r=0;i.maxdigit[t]-i.mindigit[t]>1&&r<20;)r++,s++,o[t]=Math.round((i.maxdigit[t]+i.mindigit[t])/2),i.IsVersionSupported(n,o)?i.mindigit[t]=o[t]:i.maxdigit[t]=o[t];o[t]=i.mindigit[t]}i.version=i.format(o)}return i}}};e.addPlugin("silverlight",o);var s={compareNums:function(t,n){var i,a,r,o,s,l=t.split(e.splitNumRegx),u=n.split(e.splitNumRegx);for(i=0;i<Math.min(l.length,u.length);i++){if(/([\d]+)([a-z]?)/.test(l[i]),a=parseInt(RegExp.$1,10),o=2==i&&RegExp.$2.length>0?RegExp.$2.charCodeAt(0):-1,/([\d]+)([a-z]?)/.test(u[i]),r=parseInt(RegExp.$1,10),s=2==i&&RegExp.$2.length>0?RegExp.$2.charCodeAt(0):-1,a!=r)return a>r?1:-1;if(2==i&&o!=s)return o>s?1:-1}return 0},setPluginStatus:function(t,n,i){var a=this;a.installed=n?1:i?i>0?.7:-.1:t?0:-1,n&&(a.version=e.formatNum(n)),a.getVersionDone=.7==a.installed||a.installed==-.1?0:1},getVersion:function(t){var n,i,a=this,r=null;if(n&&!e.dbug||!a.nav.query().installed||(n=1),r&&!e.dbug||!a.nav.query().version||(r=a.nav.version),n&&!e.dbug||!a.axo.query().installed||(n=1),r&&!e.dbug||!a.axo.query().version||(r=a.axo.version),(!r||e.dbug)&&(i=a.codebase.isMin(t)))return void a.setPluginStatus(0,0,i);r&&!e.dbug||(i=a.codebase.search())&&(n=1,r=i),a.setPluginStatus(n,r,0)},nav:{hasRun:0,installed:0,version:null,mimeType:["application/x-vlc-plugin","application/x-google-vlc-plugin","application/mpeg4-muxcodetable","application/x-matroska","application/xspf+xml","video/divx","video/webm","video/x-mpeg","video/x-msvideo","video/ogg","audio/x-flac","audio/amr","audio/amr"],find:"VLC.*Plug-?in",find2:"VLC|VideoLAN",avoid:"Totem|Helix",plugins:["VLC Web Plugin","VLC Multimedia Plug-in","VLC Multimedia Plugin","VLC multimedia plugin"],query:function(){var t,n,i=this,a=i.hasRun||!e.hasMimeType(i.mimeType);return i.hasRun=1,a?i:(n=e.pd.findNavPlugin({find:i.find,avoid:i.avoid,mimes:i.mimeType,plugins:i.plugins}),n&&(i.installed=1,n.description&&(t=e.getNum(n.description+"","[\\d][\\d\\.]*[a-z]*")),t&&(i.version=t)),i)}},axo:{hasRun:0,installed:0,version:null,progID:"VideoLAN.VLCPlugin",query:function(){var t,n,i=this,a=i.hasRun;return i.hasRun=1,a?i:(t=e.getAXO(i.progID),t&&(i.installed=1,(n=e.getNum(e.pd.getPROP(t,"VersionInfo"),"[\\d][\\d\\.]*[a-z]*"))&&(i.version=n)),i)}},codebase:{classID:"clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921",isMin:function(t){return this.$$=s,e.codebase.isMin(this,t)},search:function(){return this.$$=s,e.codebase.search(this)},DIGITMAX:[[11,11,16]],DIGITMIN:[0,0,0,0],Upper:["999"],Lower:["0"],convert:[1]}};e.addPlugin("vlc",s);var l={OTF:null,setPluginStatus:function(){var t=this,n=t.OTF,i=t.nav.detected,a=t.nav.version,r=t.nav.precision,o=r,s=a,l=i>0,u=t.axo.detected,d=t.axo.version,c=t.axo.precision,f=t.doc.detected,h=t.doc.version,p=t.doc.precision,m=t.doc2.detected,g=t.doc2.version,v=t.doc2.precision;s=g||s||d||h,o=v||o||c||p,l=m>0||l||u>0||f>0,s=s||null,t.version=e.formatNum(s),t.precision=o;var _=-1;if(3==n?_=t.version?.5:-.5:s?_=1:l?_=0:u==-.5||f==-.5?_=-.15:!e.browser.isIE||e.browser.ActiveXEnabled&&!e.browser.ActiveXFilteringEnabled||(_=-1.5),t.installed=_,1!=t.getVersionDone){var y=1;t.verify&&t.verify.isEnabled()||.5==t.installed||t.installed==-.5?y=0:1==t.doc2.isDisabled()&&(y=0),t.getVersionDone=y}},getVersion:function(t,n){var i=this,a=0,r=i.verify;if(null===i.getVersionDone&&(i.OTF=0,r&&r.init()),e.file.save(i,".pdf",n),0===i.getVersionDone)return i.doc2.insertHTMLQuery(),void i.setPluginStatus();a&&!e.dbug||!i.nav.query().version||(a=1),a&&!e.dbug||!i.axo.query().version||(a=1),a&&!e.dbug||!i.doc.query().version||(a=1),i.doc2.insertHTMLQuery(),i.setPluginStatus()},getPrecision:function(t,n,i){if(e.isString(t)){n=n||"",i=i||"";var a,r="\\d+",o=[r,r,r,r];for(a=4;a>0;a--)if(new RegExp(n+o.slice(0,a).join("[\\.]")+i).test(t))return a}return 0},nav:{detected:0,version:null,precision:0,mimeType:["application/pdf","application/vnd.adobe.pdfxml"],find:"Adobe.*PDF.*Plug-?in|Adobe.*Acrobat.*Plug-?in|Adobe.*Reader.*Plug-?in",plugins:["Adobe Acrobat","Adobe Acrobat and Reader Plug-in","Adobe Reader Plugin"],query:function(){var t,n=this,i=null;return n.detected||!e.hasMimeType(n.mimeType)?n:(t=e.pd.findNavPlugin({find:n.find,mimes:n.mimeType,plugins:n.plugins}),n.detected=t?1:-1,t&&(i=e.getNum(t.description)||e.getNum(t.name),i=e.getPluginFileVersion(t,i),i||(i=n.attempt3()),i&&(n.version=i,n.precision=l.getPrecision(i))),n)},attempt3:function(){var t=null;return 1==e.OS&&(e.hasMimeType("application/vnd.adobe.pdfxml")?t="9":e.hasMimeType("application/vnd.adobe.x-mars")?t="8":e.hasMimeType("application/vnd.adobe.xfdf")&&(t="6")),t}},activexQuery:function(t){var n,i,a,r,o="",s={precision:0,version:null};try{t&&(o=t.GetVersions()+"")}catch(e){}if(o&&e.isString(o)&&(n=/\=\s*[\d\.]+/g,r=o.match(n))){for(i=0;i<r.length;i++)(a=e.formatNum(e.getNum(r[i])))&&(!s.version||e.compareNums(a,s.version)>0)&&(s.version=a);s.precision=l.getPrecision(o,"\\=\\s*")}return s},axo:{detected:0,version:null,precision:0,progID:["AcroPDF.PDF","AcroPDF.PDF.1","PDF.PdfCtrl","PDF.PdfCtrl.5","PDF.PdfCtrl.1"],progID_dummy:"AcroDUMMY.DUMMY",query:function(){var t,n,i,a,r,o,s=this,u=l;if(s.detected)return s;for(s.detected=-1,n=e.getAXO(s.progID_dummy),n||(o=e.errObj),r=0;r<s.progID.length;r++)if(n=e.getAXO(s.progID[r])){if(s.detected=1,t=u.activexQuery(n),i=t.version,a=t.precision,!e.dbug&&i)break}else o&&e.errObj&&o!==e.errObj&&o.message!==e.errObj.message&&(s.detected=-.5);return i&&(s.version=i),a&&(s.precision=a),s}},doc:{detected:0,version:null,precision:0,classID:"clsid:CA8A9780-280D-11CF-A24D-444553540000",classID_dummy:"clsid:CA8A9780-280D-11CF-A24D-BA9876543210",DummySpanTagHTML:0,HTML:0,DummyObjTagHTML1:0,DummyObjTagHTML2:0,isDisabled:function(){var t=this,n=0;return t.HTML?n=1:e.dbug||e.DOM.isEnabled.objectTagUsingActiveX()||(n=1),n},query:function(){var t,n,i,a,r,o=this,s=l,u=e.DOM.altHTML;return o.isDisabled()?o:(t=e.DOM.iframe.insert(99,"Adobe Reader"),o.DummySpanTagHTML=e.DOM.insert("",[],[],u,s,1,t),o.HTML=e.DOM.insert("object",["classid",o.classID],[],u,s,1,t),o.DummyObjTagHTML2=e.DOM.insert("object",["classid",o.classID_dummy],[],u,s,1,t),e.DOM.iframe.close(t),r=e.DOM.getTagStatus(o.HTML,o.DummySpanTagHTML,o.DummyObjTagHTML1,o.DummyObjTagHTML2,0,0,1),n=s.activexQuery(o.HTML.obj()),i=n.version,a=n.precision,o.detected=r>0||i?1:r==-.1||r==-.5?-.5:-1,i&&(o.version=i),a&&(o.precision=a),o)}},doc2:{detected:0,version:null,precision:0,classID:"clsid:CA8A9780-280D-11CF-A24D-444553540000",mimeType:"application/pdf",HTML:0,count:0,count2:0,time2:0,intervalLength:50,maxCount:150,isDisabled:function(){var t,n,i,a=this,r=l,o=r.axo,s=r.nav,u=r.doc,d=0;return a.HTML?d=2:e.dbug||(e.DOM.isEnabled.objectTagUsingActiveX()?(t=(s?s.version:0)||(o?o.version:0)||(u?u.version:0)||0,n=(s?s.precision:0)||(o?o.precision:0)||(u?u.precision:0)||0,(!t||!n||n>2||e.compareNums(e.formatNum(t),e.formatNum("11"))<0)&&(d=2)):d=2),d<2&&((i=e.file.getValid(r))&&i.full||(d=1)),d},handlerSet:0,onMessage:function(){var t=this;return function(n){t.version||(t.detected=1,e.isArray(n)&&(n=n[0]),(n=e.getNum(n+""))&&(/[.,_]/.test(n)||(n+="."),n+="00000",/^(\d+)[.,_](\d)(\d\d)(\d\d)/.test(n)&&(n=RegExp.$1+","+RegExp.$2+","+RegExp.$3+","+RegExp.$4),t.version=e.formatNum(n),t.precision=3,l.setPluginStatus()))}},isDefinedMsgHandler:function(e,t){try{return e?e.messageHandler!==t:0}catch(e){}return 1},queryObject:function(){var e=this,t=e.HTML,n=t?t.obj():0;if(n){if(!e.handlerSet&&e.isDefinedMsgHandler(n)){try{n.messageHandler={onMessage:e.onMessage()}}catch(e){}e.handlerSet=1,e.count2=e.count,e.time2=(new Date).getTime()}e.detected||(e.count>3&&!e.handlerSet?e.detected=-1:e.time2&&e.count-e.count2>=e.maxCount&&(new Date).getTime()-e.time2>=e.intervalLength*e.maxCount&&(e.detected=-.5)),e.detected&&e.detected}},insertHTMLQuery:function(){var t,n,i=this,a=l,r=e.DOM.altHTML;return i.isDisabled()?i:(a.OTF<2&&(a.OTF=2),t=e.file.getValid(a).full,n=e.DOM.iframe.insert(0,"Adobe Reader"),e.DOM.iframe.write(n,'<script type="text/javascript"></script>'),i.HTML=e.DOM.insert("object",["data",t].concat(e.browser.isIE?["classid",i.classID]:["type",i.mimeType]),["src",t],r,a,0,n),e.DOM.iframe.addHandler(n,i.onIntervalQuery),a.OTF<3&&i.HTML&&(a.OTF=3),e.DOM.iframe.close(n),i)},onIntervalQuery:function(){var t=l,n=t.doc2;n.count++,3==t.OTF&&(n.queryObject(),n.detected&&n.queryCompleted()),3==t.OTF&&e.ev.setTimeout(n.onIntervalQuery,n.intervalLength)},queryCompleted:function(){var t=l;4!=t.OTF&&(t.OTF=4,t.setPluginStatus(),e.ev.callArray(t.DoneHndlrs))},z:0},getInfo:function(){var e=this;e.setPluginStatus();var t={OTF:e.OTF<3?0:3==e.OTF?1:2,DummyPDFused:!1,version:e.version,precision:e.precision};return 1!=e.doc2.detected&&e.doc2.detected!=-.5||(t.DummyPDFused=!0),t}};e.addPlugin("adobereader",l);var u={mimeType:["audio/x-pn-realaudio-plugin","audio/x-pn-realaudio"],classID:"clsid:CFCDAA03-8BE4-11cf-B84B-0020AFBBCCFA",setPluginStatus:function(t,n){var i,a=this;n&&(a.version=e.formatNum(e.getNum(n))),a.installed=a.version?1:t?0:-1,i=a.installed==-1||a.instance.version,i=i||a.axo.version,a.getVersionDone=i?1:0},navObj:{hasRun:0,installed:null,version:null,find:"RealPlayer.*Plug-?in",avoid:"Totem|QuickTime|Helix|VLC|Download",plugins:["RealPlayer(tm) G2 LiveConnect-Enabled Plug-In (32-bit) ","RealPlayer(tm) G2 LiveConnect-Enabled Plug-In (64-bit) ","RealPlayer Plugin"],query:function(){var t,n=this,i=u,a=!n.hasRun&&e.hasMimeType(i.mimeType);return n.hasRun=1,a&&(t=e.pd.findNavPlugin({find:n.find,avoid:n.avoid,mimes:i.mimeType,plugins:n.plugins}),n.installed=t?1:0,(t=e.getPluginFileVersion(t))&&e.compareNums(e.formatNum(t),e.formatNum("15"))>=0&&(n.version=t)),n}},JS:{hasRun:0,version:null,regStr:"RealPlayer.*Version.*Plug-?in",mimetype:"application/vnd.rn-realplayer-javascript",q1:[[11,0,0],[999],[663],[663],[663],[660],[468],[468],[468],[468],[468],[468],[431],[431],[431],[372],[180],[180],[172],[172],[167],[114],[0]],q3:[[6,0],[12,99],[12,69],[12,69],[12,69],[12,69],[12,69],[12,69],[12,69],[12,69],[12,69],[12,69],[12,46],[12,46],[12,46],[11,3006],[11,2806],[11,2806],[11,2804],[11,2804],[11,2799],[11,2749],[11,2700]],compare:function(e,t){var n,i,a,r=e.length,o=t.length;for(n=0;n<Math.max(r,o);n++){if(i=n<r?e[n]:0,a=n<o?t[n]:0,i>a)return 1;if(i<a)return-1}return 0},convertNum:function(t,n,i){var a,r,o,s=this,l=null;if(!t||!(a=e.formatNum(t)))return l;for(a=a.split(e.splitNumRegx),o=0;o<a.length;o++)a[o]=parseInt(a[o],10);if(0!==s.compare(a.slice(0,Math.min(n[0].length,a.length)),n[0]))return l;if(r=a.length>n[0].length?a.slice(n[0].length):[],s.compare(r,n[1])>0||s.compare(r,n[n.length-1])<0)return l;for(o=n.length-1;o>=1&&1!=o&&(0!==s.compare(n[o],r)||0!==s.compare(n[o],n[o-1]))&&!(s.compare(r,n[o])>=0&&s.compare(r,n[o-1])<0);o--);return i[0].join(".")+"."+i[o].join(".")},isEnabled:function(){var t=this;return!t.hasRun&&1==e.OS&&e.hasMimeType(t.mimetype)?1:0},query:function(){var t,n,i,a=this,r=a.isEnabled();if(a.hasRun=1,r&&(n=e.pd.findNavPlugin({find:a.regStr,mimes:a.mimetype}),n&&(t=e.formatNum(e.getNum(n.description))),t)){var o=t.split(e.splitNumRegx);i=1,a.compare(o,[6,0,12,200])<0?i=-1:a.compare(o,[6,0,12,1739])<=0&&a.compare(o,[6,0,12,857])>=0&&(i=-1),i<0&&(n=a.convertNum(t,a.q3,a.q1),a.version=n?n:t)}return a}},instance:{hasRun:0,version:null,HTML:null,isEnabled:function(){var t=this,n=u,i=1;return e.DOM.isEnabled.objectTag()?e.dbug||(t.hasRun||e.DOM.isEnabled.objectTagUsingActiveX()||!e.hasMimeType(n.mimeType)||e.browser.isGecko&&e.compareNums(e.browser.verGecko,e.formatNum("1,8"))<0||e.browser.isOpera&&e.compareNums(e.browser.verOpera,e.formatNum("10"))<0)&&(i=0):i=0,i},query:function(){var t,n=this,i=u,a=n.isEnabled();if(n.hasRun=1,a){n.HTML=e.DOM.insert("object",["type",i.mimeType[0]],["src","","autostart","false","imagestatus","false","controls","stopbutton"],"",i),t=n.HTML.obj();try{n.version=e.getNum(t.GetVersionInfo())}catch(e){}e.DOM.setStyle(t,["display","none"])}return n}},axo:{hasRun:0,installed:null,version:null,progID:["rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","RealPlayer"],query:function(){var t,n,i,a=this;if(!a.hasRun)for(a.hasRun=1,n=0;n<a.progID.length;n++)if(t=e.getAXO(a.progID[n])){a.installed=1,i=0;try{i=t.GetVersionInfo()+""}catch(e){}if(i&&(a.version=i,!e.dbug))break}return a}},getVersion:function(t,n){var i=this,a=null,r=0;r&&!e.dbug||!i.axo.query().installed||(r=1),a&&!e.dbug||!i.axo.query().version||(a=i.axo.version),r&&!e.dbug||!i.navObj.query().installed||(r=1),a&&!e.dbug||!i.navObj.query().version||(a=i.navObj.version),a&&!e.dbug||!i.JS.query().version||(r=1,a=i.JS.version),(!r&&!a||n||e.dbug)&&i.instance.query().version&&(r=1,a=i.instance.version),i.setPluginStatus(r,a)}};e.addPlugin("realplayer",u);var d={storage:{},codebase:{isMin:function(t){return this.$$=d,e.codebase.isMin(this,t)},search:function(){return this.$$=d,e.codebase.search(this)},classID:"",DIGITMAX:[[100,100,100,0]],DIGITMIN:[0,0,0,0],Upper:["99999"],Lower:["0"],convert:[1]},clone:function(t,n){var i,a,r=this,o=0;if(e.isNum(t)||e.isString(t)||null===t||e.isFunc(t)||t===e||t===e.Plugins||t===r)return t;if(t.window||t.firstChild||t.appendChild)return t;e.isArray(t)?a=[]:t&&(a={});for(i in t)e.hasOwn(t,i)&&(o++,a[i]=r.clone(t[i],i));return a},setPluginStatus:function(t,n,i){var a=this;a.getVersionDone=0,a.version=e.formatNum(n),a.installed=n?1:t?t>0?.7:-.1:i?-3:-1},getVersion:function(t,n,i){var a,r,o,s=this,l=null,u=null,d="";if(e.codebase.isDisabled())return void s.setPluginStatus(0,0);if(!(n&&e.isString(n)&&/[^\s]+/.test(n)))return void s.setPluginStatus(0,0,1);if(n=n.replace(/\s/g,""),d=n.replace(/[\:\-\/]/g,"$"),e.isArray(i)){for(i.length||i.push(0),a=0;a<i.length;a++)if(e.isDefined(i[a])||(i[a]=0),!e.isNum(i[a])||i[a]<0||i[a]>99999999)return void s.setPluginStatus(0,0,1);if(d&&s.storage[d]){for(r=s.storage[d].codebase,o=0,a=0;a<Math.max(i.length,r.DIGITMAX[0].length);a++)if((a<i.length?i[a]:0)>(a<r.DIGITMAX[0].length?r.DIGITMAX[0][a]:0)){o=1;break}if(o&&r.version)for(o=r.version.split(e.splitNumRegx),a=0;a<Math.max(o.length,r.DIGITMAX[0].length);a++)if((a<o.length?o[a]:0)===(a<r.DIGITMAX[0].length?r.DIGITMAX[0][a]:0)){s.storage[d]=null;break}}}else i=[0];d&&!s.storage[d]&&(s.storage[d]={codebase:s.clone(s.codebase)},s.storage[d].codebase.classID=n,e.isArray(i)&&i.length&&(s.storage[d].codebase.DIGITMAX=[[].concat(i)])),t?(l=s.storage[d].codebase.isMin(t),u=s.storage[d].codebase.version):(l=0,u=s.storage[d].codebase.search()),s.setPluginStatus(l,u)}};e.addPlugin("activex",d)}()},,function(e,t,n){(function(i){var a;!function(){function r(e){var t,n,i,a="",r=-1;if(e&&e.length)for(i=e.length;(r+=1)<i;)t=e.charCodeAt(r),n=r+1<i?e.charCodeAt(r+1):0,55296<=t&&t<=56319&&56320<=n&&n<=57343&&(t=65536+((1023&t)<<10)+(1023&n),r+=1),t<=127?a+=String.fromCharCode(t):t<=2047?a+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?a+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(a+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return a}function o(e){var t,n,i,a,r,o,s=[];if(t=n=i=a=r=0,e&&e.length)for(o=e.length,e+="";t<o;)i=e.charCodeAt(t),n+=1,i<128?(s[n]=String.fromCharCode(i),t+=1):i>191&&i<224?(a=e.charCodeAt(t+1),s[n]=String.fromCharCode((31&i)<<6|63&a),t+=2):(a=e.charCodeAt(t+1),r=e.charCodeAt(t+2),s[n]=String.fromCharCode((15&i)<<12|(63&a)<<6|63&r),t+=3);return s.join("")}function s(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function l(e,t){return e<<t|e>>>32-t}function u(e,t){for(var n,i=t?"0123456789ABCDEF":"0123456789abcdef",a="",r=0,o=e.length;r<o;r+=1)n=e.charCodeAt(r),a+=i.charAt(n>>>4&15)+i.charAt(15&n);return a}function d(e){var t,n=32*e.length,i="";for(t=0;t<n;t+=8)i+=String.fromCharCode(e[t>>5]>>>24-t%32&255);return i}function c(e){var t,n=32*e.length,i="";for(t=0;t<n;t+=8)i+=String.fromCharCode(e[t>>5]>>>t%32&255);return i}function f(e){var t,n=8*e.length,i=Array(e.length>>2),a=i.length;for(t=0;t<a;t+=1)i[t]=0;for(t=0;t<n;t+=8)i[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return i}function h(e){var t,n=8*e.length,i=Array(e.length>>2),a=i.length;for(t=0;t<a;t+=1)i[t]=0;for(t=0;t<n;t+=8)i[t>>5]|=(255&e.charCodeAt(t/8))<<24-t%32;return i}function p(e,t){var n,i,a,r,o,s,l,u,d=t.length,c=Array();for(s=Array(Math.ceil(e.length/2)),r=s.length,n=0;n<r;n+=1)s[n]=e.charCodeAt(2*n)<<8|e.charCodeAt(2*n+1);for(;s.length>0;){for(o=Array(),a=0,n=0;n<s.length;n+=1)a=(a<<16)+s[n],i=Math.floor(a/d),a-=i*d,(o.length>0||i>0)&&(o[o.length]=i);c[c.length]=a,s=o}for(l="",n=c.length-1;n>=0;n--)l+=t.charAt(c[n]);for(u=Math.ceil(8*e.length/(Math.log(t.length)/Math.log(2))),n=l.length;n<u;n+=1)l=t[0]+l;return l}function m(e,t){var n,i,a,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o="",s=e.length;for(t=t||"=",n=0;n<s;n+=3)for(a=e.charCodeAt(n)<<16|(n+1<s?e.charCodeAt(n+1)<<8:0)|(n+2<s?e.charCodeAt(n+2):0),i=0;i<4;i+=1)o+=8*n+6*i>8*e.length?t:r.charAt(a>>>6*(3-i)&63);return o}var g;g={VERSION:"1.0.6",Base64:function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="=",n=!0;this.encode=function(i){var a,o,s,l="",u=i.length;for(t=t||"=",i=n?r(i):i,a=0;a<u;a+=3)for(s=i.charCodeAt(a)<<16|(a+1<u?i.charCodeAt(a+1)<<8:0)|(a+2<u?i.charCodeAt(a+2):0),o=0;o<4;o+=1)l+=8*a+6*o>8*u?t:e.charAt(s>>>6*(3-o)&63);return l},this.decode=function(i){var a,r,s,l,u,d,c,f,h,p,m="",g=[];if(!i)return i;a=p=0,i=i.replace(new RegExp("\\"+t,"gi"),"");do{u=e.indexOf(i.charAt(a+=1)),d=e.indexOf(i.charAt(a+=1)),c=e.indexOf(i.charAt(a+=1)),f=e.indexOf(i.charAt(a+=1)),h=u<<18|d<<12|c<<6|f,r=h>>16&255,s=h>>8&255,l=255&h,p+=1,g[p]=64===c?String.fromCharCode(r):64===f?String.fromCharCode(r,s):String.fromCharCode(r,s,l)}while(a<i.length);return m=g.join(""),m=n?o(m):m},this.setPad=function(e){return t=e||t,this},this.setTab=function(t){return e=t||e,this},this.setUTF8=function(e){return"boolean"==typeof e&&(n=e),this}},CRC32:function(e){var t,n,i,a=0,o=0,s=0;for(e=r(e),t=["00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 ","79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 ","84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F ","63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD ","A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC ","51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 ","B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 ","06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 ","E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 ","12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 ","D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 ","33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 ","CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 ","9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E ","7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D ","806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 ","60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA ","AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 ","5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 ","B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 ","05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 ","F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA ","11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 ","D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F ","30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E ","C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D"].join(""),a^=-1,n=0,i=e.length;n<i;n+=1)s=255&(a^e.charCodeAt(n)),o="0x"+t.substr(9*s,8),a=a>>>8^o;return(a^-1)>>>0},MD5:function(e){function t(e){return e=y?r(e):e,c(i(f(e),8*e.length))}function n(e,t){var n,a,o,s,l;for(e=y?r(e):e,t=y?r(t):t,n=f(e),n.length>16&&(n=i(n,8*e.length)),a=Array(16),o=Array(16),l=0;l<16;l+=1)a[l]=909522486^n[l],o[l]=1549556828^n[l];return s=i(a.concat(f(t)),512+8*t.length),c(i(o.concat(s),640))}function i(e,t){var n,i,a,r,l,u=1732584193,c=-271733879,f=-1732584194,p=271733878;for(e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t,n=0;n<e.length;n+=16)i=u,a=c,r=f,l=p,u=o(u,c,f,p,e[n+0],7,-680876936),p=o(p,u,c,f,e[n+1],12,-389564586),f=o(f,p,u,c,e[n+2],17,606105819),c=o(c,f,p,u,e[n+3],22,-1044525330),u=o(u,c,f,p,e[n+4],7,-176418897),p=o(p,u,c,f,e[n+5],12,1200080426),f=o(f,p,u,c,e[n+6],17,-1473231341),c=o(c,f,p,u,e[n+7],22,-45705983),u=o(u,c,f,p,e[n+8],7,1770035416),p=o(p,u,c,f,e[n+9],12,-1958414417),f=o(f,p,u,c,e[n+10],17,-42063),c=o(c,f,p,u,e[n+11],22,-1990404162),u=o(u,c,f,p,e[n+12],7,1804603682),p=o(p,u,c,f,e[n+13],12,-40341101),f=o(f,p,u,c,e[n+14],17,-1502002290),c=o(c,f,p,u,e[n+15],22,1236535329),u=d(u,c,f,p,e[n+1],5,-165796510),p=d(p,u,c,f,e[n+6],9,-1069501632),f=d(f,p,u,c,e[n+11],14,643717713),c=d(c,f,p,u,e[n+0],20,-373897302),u=d(u,c,f,p,e[n+5],5,-701558691),p=d(p,u,c,f,e[n+10],9,38016083),f=d(f,p,u,c,e[n+15],14,-660478335),c=d(c,f,p,u,e[n+4],20,-405537848),u=d(u,c,f,p,e[n+9],5,568446438),p=d(p,u,c,f,e[n+14],9,-1019803690),f=d(f,p,u,c,e[n+3],14,-187363961),c=d(c,f,p,u,e[n+8],20,1163531501),u=d(u,c,f,p,e[n+13],5,-1444681467),p=d(p,u,c,f,e[n+2],9,-51403784),f=d(f,p,u,c,e[n+7],14,1735328473),c=d(c,f,p,u,e[n+12],20,-1926607734),u=h(u,c,f,p,e[n+5],4,-378558),p=h(p,u,c,f,e[n+8],11,-2022574463),f=h(f,p,u,c,e[n+11],16,1839030562),c=h(c,f,p,u,e[n+14],23,-35309556),u=h(u,c,f,p,e[n+1],4,-1530992060),p=h(p,u,c,f,e[n+4],11,1272893353),f=h(f,p,u,c,e[n+7],16,-155497632),c=h(c,f,p,u,e[n+10],23,-1094730640),u=h(u,c,f,p,e[n+13],4,681279174),p=h(p,u,c,f,e[n+0],11,-358537222),f=h(f,p,u,c,e[n+3],16,-722521979),c=h(c,f,p,u,e[n+6],23,76029189),u=h(u,c,f,p,e[n+9],4,-640364487),p=h(p,u,c,f,e[n+12],11,-421815835),f=h(f,p,u,c,e[n+15],16,530742520),c=h(c,f,p,u,e[n+2],23,-995338651),u=g(u,c,f,p,e[n+0],6,-198630844),p=g(p,u,c,f,e[n+7],10,1126891415),f=g(f,p,u,c,e[n+14],15,-1416354905),c=g(c,f,p,u,e[n+5],21,-57434055),u=g(u,c,f,p,e[n+12],6,1700485571),p=g(p,u,c,f,e[n+3],10,-1894986606),f=g(f,p,u,c,e[n+10],15,-1051523),c=g(c,f,p,u,e[n+1],21,-2054922799),u=g(u,c,f,p,e[n+8],6,1873313359),p=g(p,u,c,f,e[n+15],10,-30611744),f=g(f,p,u,c,e[n+6],15,-1560198380),c=g(c,f,p,u,e[n+13],21,1309151649),u=g(u,c,f,p,e[n+4],6,-145523070),p=g(p,u,c,f,e[n+11],10,-1120210379),f=g(f,p,u,c,e[n+2],15,718787259),c=g(c,f,p,u,e[n+9],21,-343485551),u=s(u,i),c=s(c,a),f=s(f,r),p=s(p,l);return Array(u,c,f,p)}function a(e,t,n,i,a,r){return s(l(s(s(t,e),s(i,r)),a),n)}function o(e,t,n,i,r,o,s){return a(t&n|~t&i,e,t,r,o,s)}function d(e,t,n,i,r,o,s){return a(t&i|n&~i,e,t,r,o,s)}function h(e,t,n,i,r,o,s){return a(t^n^i,e,t,r,o,s)}function g(e,t,n,i,r,o,s){return a(n^(t|~i),e,t,r,o,s)}var v=!(!e||"boolean"!=typeof e.uppercase)&&e.uppercase,_=e&&"string"==typeof e.pad?e.pad:"=",y=!e||"boolean"!=typeof e.utf8||e.utf8;this.hex=function(e){return u(t(e),v)},this.b64=function(e){return m(t(e),_)},this.any=function(e,n){return p(t(e),n)},this.raw=function(e){return t(e)},this.hex_hmac=function(e,t){return u(n(e,t),v)},this.b64_hmac=function(e,t){return m(n(e,t),_)},this.any_hmac=function(e,t,i){return p(n(e,t),i)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&(v=e),this},this.setPad=function(e){return _=e||_,this},this.setUTF8=function(e){return"boolean"==typeof e&&(y=e),this}},SHA1:function(e){function t(e){return e=g?r(e):e,d(i(h(e),8*e.length))}function n(e,t){var n,a,o,s,l;for(e=g?r(e):e,t=g?r(t):t,n=h(e),n.length>16&&(n=i(n,8*e.length)),a=Array(16),o=Array(16),s=0;s<16;s+=1)a[s]=909522486^n[s],o[s]=1549556828^n[s];return l=i(a.concat(h(t)),512+8*t.length),d(i(o.concat(l),672))}function i(e,t){var n,i,r,u,d,c,f,h,p=Array(80),m=1732584193,g=-271733879,v=-1732584194,_=271733878,y=-1009589776;for(e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t,n=0;n<e.length;n+=16){for(u=m,d=g,c=v,f=_,h=y,i=0;i<80;i+=1)p[i]=i<16?e[n+i]:l(p[i-3]^p[i-8]^p[i-14]^p[i-16],1),r=s(s(l(m,5),a(i,g,v,_)),s(s(y,p[i]),o(i))),y=_,_=v,v=l(g,30),g=m,m=r;m=s(m,u),g=s(g,d),v=s(v,c),_=s(_,f),y=s(y,h)}return Array(m,g,v,_,y)}function a(e,t,n,i){return e<20?t&n|~t&i:e<40?t^n^i:e<60?t&n|t&i|n&i:t^n^i}function o(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}var c=!(!e||"boolean"!=typeof e.uppercase)&&e.uppercase,f=e&&"string"==typeof e.pad?e.pad:"=",g=!e||"boolean"!=typeof e.utf8||e.utf8;this.hex=function(e){return u(t(e),c)},this.b64=function(e){return m(t(e),f)},this.any=function(e,n){return p(t(e),n)},this.raw=function(e){return t(e)},this.hex_hmac=function(e,t){return u(n(e,t))},this.b64_hmac=function(e,t){return m(n(e,t),f)},this.any_hmac=function(e,t,i){return p(n(e,t),i)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&(c=e),this},this.setPad=function(e){return f=e||f,this},this.setUTF8=function(e){return"boolean"==typeof e&&(g=e),this}},SHA256:function(e){function t(e,t){return e=t?r(e):e,d(_(h(e),8*e.length))}function n(e,t){e=k?r(e):e,t=k?r(t):t;var n,i=0,a=h(e),o=Array(16),s=Array(16);for(a.length>16&&(a=_(a,8*e.length));i<16;i+=1)o[i]=909522486^a[i],s[i]=1549556828^a[i];return n=_(o.concat(h(t)),512+8*t.length),d(_(s.concat(n),768))}function i(e,t){return e>>>t|e<<32-t}function a(e,t){return e>>>t}function o(e,t,n){return e&t^~e&n}function l(e,t,n){return e&t^e&n^t&n}function c(e){return i(e,2)^i(e,13)^i(e,22)}function f(e){return i(e,6)^i(e,11)^i(e,25)}function g(e){return i(e,7)^i(e,18)^a(e,3)}function v(e){return i(e,17)^i(e,19)^a(e,10)}function _(e,t){var n,i,a,r,u,d,h,p,m,_,b,w,k=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],j=new Array(64);for(e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t,m=0;m<e.length;m+=16){for(n=k[0],i=k[1],a=k[2],r=k[3],u=k[4],d=k[5],h=k[6],p=k[7],_=0;_<64;_+=1)j[_]=_<16?e[_+m]:s(s(s(v(j[_-2]),j[_-7]),g(j[_-15])),j[_-16]),b=s(s(s(s(p,f(u)),o(u,d,h)),y[_]),j[_]),w=s(c(n),l(n,i,a)),p=h,h=d,d=u,u=s(r,b),r=a,a=i,i=n,n=s(b,w);k[0]=s(n,k[0]),k[1]=s(i,k[1]),k[2]=s(a,k[2]),k[3]=s(r,k[3]),k[4]=s(u,k[4]),k[5]=s(d,k[5]),k[6]=s(h,k[6]),k[7]=s(p,k[7])}return k}var y,b=!(!e||"boolean"!=typeof e.uppercase)&&e.uppercase,w=e&&"string"==typeof e.pad?e.pad:"=",k=!e||"boolean"!=typeof e.utf8||e.utf8;this.hex=function(e){return u(t(e,k))},this.b64=function(e){return m(t(e,k),w)},this.any=function(e,n){return p(t(e,k),n)},this.raw=function(e){return t(e,k)},this.hex_hmac=function(e,t){return u(n(e,t))},this.b64_hmac=function(e,t){return m(n(e,t),w)},this.any_hmac=function(e,t,i){return p(n(e,t),i)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&(b=e),this},this.setPad=function(e){return w=e||w,this},this.setUTF8=function(e){return"boolean"==typeof e&&(k=e),this},y=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998]},SHA512:function(e){function t(e){return e=w?r(e):e,d(i(h(e),8*e.length))}function n(e,t){e=w?r(e):e,t=w?r(t):t;var n,a=0,o=h(e),s=Array(32),l=Array(32);for(o.length>32&&(o=i(o,8*e.length));a<32;a+=1)s[a]=909522486^o[a],l[a]=1549556828^o[a];return n=i(s.concat(h(t)),1024+8*t.length),d(i(l.concat(n),1536))}function i(e,t){var n,i,r,u=new Array(80),d=new Array(16),h=[new a(1779033703,-205731576),new a(-1150833019,-2067093701),new a(1013904242,-23791573),new a(-1521486534,1595750129),new a(1359893119,-1377402159),new a(-1694144372,725511199),new a(528734635,-79577749),new a(1541459225,327033209)],p=new a(0,0),m=new a(0,0),y=new a(0,0),b=new a(0,0),w=new a(0,0),k=new a(0,0),j=new a(0,0),x=new a(0,0),C=new a(0,0),S=new a(0,0),E=new a(0,0),T=new a(0,0),A=new a(0,0),P=new a(0,0),D=new a(0,0),I=new a(0,0),M=new a(0,0);for(void 0===_&&(_=[new a(1116352408,-685199838),new a(1899447441,602891725),new a(-1245643825,-330482897),new a(-373957723,-2121671748),new a(961987163,-213338824),new a(1508970993,-1241133031),new a(-1841331548,-1357295717),new a(-1424204075,-630357736),new a(-670586216,-1560083902),new a(310598401,1164996542),new a(607225278,1323610764),new a(1426881987,-704662302),new a(1925078388,-226784913),new a(-2132889090,991336113),new a(-1680079193,633803317),new a(-1046744716,-815192428),new a(-459576895,-1628353838),new a(-272742522,944711139),new a(264347078,-1953704523),new a(604807628,2007800933),new a(770255983,1495990901),new a(1249150122,1856431235),new a(1555081692,-1119749164),new a(1996064986,-2096016459),new a(-1740746414,-295247957),new a(-1473132947,766784016),new a(-1341970488,-1728372417),new a(-1084653625,-1091629340),new a(-958395405,1034457026),new a(-710438585,-1828018395),new a(113926993,-536640913),new a(338241895,168717936),new a(666307205,1188179964),new a(773529912,1546045734),new a(1294757372,1522805485),new a(1396182291,-1651133473),new a(1695183700,-1951439906),new a(1986661051,1014477480),new a(-2117940946,1206759142),new a(-1838011259,344077627),new a(-1564481375,1290863460),new a(-1474664885,-1136513023),new a(-1035236496,-789014639),new a(-949202525,106217008),new a(-778901479,-688958952),new a(-694614492,1432725776),new a(-200395387,1467031594),new a(275423344,851169720),new a(430227734,-1194143544),new a(506948616,1363258195),new a(659060556,-544281703),new a(883997877,-509917016),new a(958139571,-976659869),new a(1322822218,-482243893),new a(1537002063,2003034995),new a(1747873779,-692930397),new a(1955562222,1575990012),new a(2024104815,1125592928),new a(-2067236844,-1578062990),new a(-1933114872,442776044),new a(-1866530822,593698344),new a(-1538233109,-561857047),new a(-1090935817,-1295615723),new a(-965641998,-479046869),new a(-903397682,-366583396),new a(-779700025,566280711),new a(-354779690,-840897762),new a(-176337025,-294727304),new a(116418474,1914138554),new a(174292421,-1563912026),new a(289380356,-1090974290),new a(460393269,320620315),new a(685471733,587496836),new a(852142971,1086792851),new a(1017036298,365543100),new a(1126000580,-1676669620),new a(1288033470,-885112138),new a(1501505948,-60457430),new a(1607167915,987167468),new a(1816402316,1246189591)]),i=0;i<80;i+=1)u[i]=new a(0,0);for(e[t>>5]|=128<<24-(31&t),e[31+(t+128>>10<<5)]=t,r=e.length,i=0;i<r;i+=32){for(o(y,h[0]),o(b,h[1]),o(w,h[2]),o(k,h[3]),o(j,h[4]),o(x,h[5]),o(C,h[6]),o(S,h[7]),n=0;n<16;n+=1)u[n].h=e[i+2*n],u[n].l=e[i+2*n+1];for(n=16;n<80;n+=1)s(D,u[n-2],19),l(I,u[n-2],29),c(M,u[n-2],6),T.l=D.l^I.l^M.l,T.h=D.h^I.h^M.h,s(D,u[n-15],1),s(I,u[n-15],8),c(M,u[n-15],7),E.l=D.l^I.l^M.l,E.h=D.h^I.h^M.h,g(u[n],T,u[n-7],E,u[n-16]);for(n=0;n<80;n+=1)A.l=j.l&x.l^~j.l&C.l,A.h=j.h&x.h^~j.h&C.h,s(D,j,14),s(I,j,18),l(M,j,9),T.l=D.l^I.l^M.l,T.h=D.h^I.h^M.h,s(D,y,28),l(I,y,2),l(M,y,7),E.l=D.l^I.l^M.l,E.h=D.h^I.h^M.h,P.l=y.l&b.l^y.l&w.l^b.l&w.l,P.h=y.h&b.h^y.h&w.h^b.h&w.h,v(p,S,T,A,_[n],u[n]),f(m,E,P),o(S,C),o(C,x),o(x,j),f(j,k,p),o(k,w),o(w,b),o(b,y),f(y,p,m);f(h[0],h[0],y),f(h[1],h[1],b),f(h[2],h[2],w),f(h[3],h[3],k),f(h[4],h[4],j),f(h[5],h[5],x),f(h[6],h[6],C),f(h[7],h[7],S)}for(i=0;i<8;i+=1)d[2*i]=h[i].h,d[2*i+1]=h[i].l;return d}function a(e,t){this.h=e,this.l=t}function o(e,t){e.h=t.h,e.l=t.l}function s(e,t,n){e.l=t.l>>>n|t.h<<32-n,e.h=t.h>>>n|t.l<<32-n}function l(e,t,n){e.l=t.h>>>n|t.l<<32-n,e.h=t.l>>>n|t.h<<32-n}function c(e,t,n){e.l=t.l>>>n|t.h<<32-n,e.h=t.h>>>n}function f(e,t,n){var i=(65535&t.l)+(65535&n.l),a=(t.l>>>16)+(n.l>>>16)+(i>>>16),r=(65535&t.h)+(65535&n.h)+(a>>>16),o=(t.h>>>16)+(n.h>>>16)+(r>>>16);e.l=65535&i|a<<16,e.h=65535&r|o<<16}function g(e,t,n,i,a){var r=(65535&t.l)+(65535&n.l)+(65535&i.l)+(65535&a.l),o=(t.l>>>16)+(n.l>>>16)+(i.l>>>16)+(a.l>>>16)+(r>>>16),s=(65535&t.h)+(65535&n.h)+(65535&i.h)+(65535&a.h)+(o>>>16),l=(t.h>>>16)+(n.h>>>16)+(i.h>>>16)+(a.h>>>16)+(s>>>16);e.l=65535&r|o<<16,e.h=65535&s|l<<16}function v(e,t,n,i,a,r){var o=(65535&t.l)+(65535&n.l)+(65535&i.l)+(65535&a.l)+(65535&r.l),s=(t.l>>>16)+(n.l>>>16)+(i.l>>>16)+(a.l>>>16)+(r.l>>>16)+(o>>>16),l=(65535&t.h)+(65535&n.h)+(65535&i.h)+(65535&a.h)+(65535&r.h)+(s>>>16),u=(t.h>>>16)+(n.h>>>16)+(i.h>>>16)+(a.h>>>16)+(r.h>>>16)+(l>>>16);e.l=65535&o|s<<16,e.h=65535&l|u<<16}var _,y=!(!e||"boolean"!=typeof e.uppercase)&&e.uppercase,b=e&&"string"==typeof e.pad?e.pad:"=",w=!e||"boolean"!=typeof e.utf8||e.utf8;this.hex=function(e){return u(t(e))},this.b64=function(e){return m(t(e),b)},this.any=function(e,n){return p(t(e),n)},this.raw=function(e){return t(e)},this.hex_hmac=function(e,t){return u(n(e,t))},this.b64_hmac=function(e,t){return m(n(e,t),b)},this.any_hmac=function(e,t,i){return p(n(e,t),i)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&(y=e),this},this.setPad=function(e){return b=e||b,this},this.setUTF8=function(e){return"boolean"==typeof e&&(w=e),this}},RMD160:function(e){function t(e){return e=v?r(e):e,i(a(f(e),8*e.length))}function n(e,t){e=v?r(e):e,t=v?r(t):t;var n,o,s=f(e),l=Array(16),u=Array(16);for(s.length>16&&(s=a(s,8*e.length)),n=0;n<16;n+=1)l[n]=909522486^s[n],u[n]=1549556828^s[n];return o=a(l.concat(f(t)),512+8*t.length),i(a(u.concat(o),672))}function i(e){var t,n="",i=32*e.length;for(t=0;t<i;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function a(e,t){var n,i,a,r,u,f,h,p,m,g,v,k,j,x,C=1732584193,S=4023233417,E=2562383102,T=271733878,A=3285377520;for(e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t,r=e.length,a=0;a<r;a+=16){for(u=g=C,f=v=S,h=k=E,p=j=T,m=x=A,i=0;i<=79;i+=1)n=s(u,o(i,f,h,p)),n=s(n,e[a+_[i]]),n=s(n,d(i)),n=s(l(n,b[i]),m),u=m,m=p,p=l(h,10),h=f,f=n,n=s(g,o(79-i,v,k,j)),n=s(n,e[a+y[i]]),n=s(n,c(i)),n=s(l(n,w[i]),x),g=x,x=j,j=l(k,10),k=v,v=n;n=s(S,s(h,j)),S=s(E,s(p,x)),E=s(T,s(m,g)),T=s(A,s(u,v)),A=s(C,s(f,k)),C=n}return[C,S,E,T,A]}function o(e,t,n,i){return 0<=e&&e<=15?t^n^i:16<=e&&e<=31?t&n|~t&i:32<=e&&e<=47?(t|~n)^i:48<=e&&e<=63?t&i|n&~i:64<=e&&e<=79?t^(n|~i):"rmd160_f: j out of range"}function d(e){return 0<=e&&e<=15?0:16<=e&&e<=31?1518500249:32<=e&&e<=47?1859775393:48<=e&&e<=63?2400959708:64<=e&&e<=79?2840853838:"rmd160_K1: j out of range"}function c(e){return 0<=e&&e<=15?1352829926:16<=e&&e<=31?1548603684:32<=e&&e<=47?1836072691:48<=e&&e<=63?2053994217:64<=e&&e<=79?0:"rmd160_K2: j out of range"}var h=!(!e||"boolean"!=typeof e.uppercase)&&e.uppercase,g=e&&"string"==typeof e.pad?e.pa:"=",v=!e||"boolean"!=typeof e.utf8||e.utf8,_=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],y=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],b=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],w=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];this.hex=function(e){return u(t(e))},this.b64=function(e){return m(t(e),g)},this.any=function(e,n){return p(t(e),n)},this.raw=function(e){return t(e)},this.hex_hmac=function(e,t){return u(n(e,t))},this.b64_hmac=function(e,t){return m(n(e,t),g)},this.any_hmac=function(e,t,i){return p(n(e,t),i)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&(h=e),this},this.setPad=function(e){return void 0!==e&&(g=e),this},this.setUTF8=function(e){return"boolean"==typeof e&&(v=e),this}}},function(r,o){t,t&&"object"==typeof i&&i&&i.global,void 0!==(a=function(){return g}.call(t,n,t,e))&&(e.exports=a)}()}()}).call(t,n(80))},,function(e,t,n){n(0),n(0);"undefined"==typeof jwplayer&&(jwplayer=function(){if(jwplayer.api)return jwplayer.api.selectPlayer.apply(this,arguments)},jwplayer.version="6.12.4956",jwplayer.vid=document.createElement("video"),jwplayer.audio=document.createElement("audio"),jwplayer.source=document.createElement("source"),function(){var e={},t=Array.prototype,n=Object.prototype,i=t.slice,a=t.concat,r=n.toString,o=n.hasOwnProperty,s=t.map,l=t.forEach,u=t.filter,d=t.every,c=t.some,f=t.indexOf,n=Array.isArray,h=Object.keys,p=function(e){return e instanceof p?e:this instanceof p?void 0:new p(e)},m=p.each=p.forEach=function(t,n,i){if(null==t)return t;if(l&&t.forEach===l)t.forEach(n,i);else if(t.length===+t.length){for(var a=0,r=t.length;a<r;a++)if(n.call(i,t[a],a,t)===e)return}else for(var o=p.keys(t),a=0,r=o.length;a<r;a++)if(n.call(i,t[o[a]],o[a],t)===e)return;return t};p.map=p.collect=function(e,t,n){var i=[];return null==e?i:s&&e.map===s?e.map(t,n):(m(e,function(e,a,r){i.push(t.call(n,e,a,r))}),i)},p.find=p.detect=function(e,t,n){var i;return g(e,function(e,a,r){if(t.call(n,e,a,r))return i=e,!0}),i},p.filter=p.select=function(e,t,n){var i=[];return null==e?i:u&&e.filter===u?e.filter(t,n):(m(e,function(e,a,r){t.call(n,e,a,r)&&i.push(e)}),i)},p.every=p.all=function(t,n,i){n||(n=p.identity);var a=!0;return null==t?a:d&&t.every===d?t.every(n,i):(m(t,function(t,r,o){if(!(a=a&&n.call(i,t,r,o)))return e}),!!a)};var g=p.some=p.any=function(t,n,i){n||(n=p.identity);var a=!1;return null==t?a:c&&t.some===c?t.some(n,i):(m(t,function(t,r,o){if(a||(a=n.call(i,t,r,o)))return e}),!!a)};p.size=function(e){return null==e?0:e.length===+e.length?e.length:p.keys(e).length},p.after=function(e,t){return function(){if(1>--e)return t.apply(this,arguments)}},p.sortedIndex=function(e,t,n,i){n=null==n?p.identity:p.isFunction(n)?n:p.property(n),t=n.call(i,t);for(var a=0,r=e.length;a<r;){var o=a+r>>>1;n.call(i,e[o])<t?a=o+1:r=o}return a},p.find=p.detect=function(e,t,n){var i;return g(e,function(e,a,r){if(t.call(n,e,a,r))return i=e,!0}),i},g=p.some=p.any=function(t,n,i){n||(n=p.identity);var a=!1;return null==t?a:c&&t.some===c?t.some(n,i):(m(t,function(t,r,o){if(a||(a=n.call(i,t,r,o)))return e}),!!a)},p.contains=p.include=function(e,t){return null!=e&&(e.length!==+e.length&&(e=p.values(e)),0<=p.indexOf(e,t))},p.where=function(e,t){return p.filter(e,p.matches(t))},p.difference=function(e){var n=a.apply(t,i.call(arguments,1));return p.filter(e,function(e){return!p.contains(n,e)})},p.without=function(e){return p.difference(e,i.call(arguments,1))},p.indexOf=function(e,t,n){if(null==e)return-1;var i=0,a=e.length;if(n){if("number"!=typeof n)return i=p.sortedIndex(e,t),e[i]===t?i:-1;i=0>n?Math.max(0,a+n):n}if(f&&e.indexOf===f)return e.indexOf(t,n);for(;i<a;i++)if(e[i]===t)return i;return-1},p.partial=function(e){var t=i.call(arguments,1);return function(){for(var n=0,i=t.slice(),a=0,r=i.length;a<r;a++)i[a]===p&&(i[a]=arguments[n++]);for(;n<arguments.length;)i.push(arguments[n++]);return e.apply(this,i)}},p.memoize=function(e,t){var n={};return t||(t=p.identity),function(){var i=t.apply(this,arguments);return p.has(n,i)?n[i]:n[i]=e.apply(this,arguments)}},p.delay=function(e,t){var n=i.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},p.defer=function(e){return p.delay.apply(p,[e,1].concat(i.call(arguments,1)))},p.keys=function(e){if(!p.isObject(e))return[];if(h)return h(e);var t,n=[];for(t in e)p.has(e,t)&&n.push(t);return n},p.pick=function(e){var n={},r=a.apply(t,i.call(arguments,1));return m(r,function(t){t in e&&(n[t]=e[t])}),n},p.isArray=n||function(e){return"[object Array]"==r.call(e)},p.isObject=function(e){return e===Object(e)},m("Arguments Function String Number Date RegExp".split(" "),function(e){p["is"+e]=function(t){return r.call(t)=="[object "+e+"]"}}),p.isArguments(arguments)||(p.isArguments=function(e){return!(!e||!p.has(e,"callee"))}),"function"!=typeof/./&&(p.isFunction=function(e){return"function"==typeof e}),p.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},p.isNaN=function(e){return p.isNumber(e)&&e!=+e},p.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"==r.call(e)},p.isNull=function(e){return null===e},p.isUndefined=function(e){return void 0===e},p.has=function(e,t){return o.call(e,t)},p.identity=function(e){return e},p.constant=function(e){return function(){return e}},p.property=function(e){return function(t){return t[e]}},p.matches=function(e){return function(t){if(t===e)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0}},p.result=function(e,t){if(null!=e){var n=e[t];return p.isFunction(n)?n.call(e):n}},this._=p}.call(jwplayer),function(e){function t(e){return function(){return o(e)}}function n(e,t,n,a,r){return function(){var o,s;if(r)n(e);else{try{if((o=e.responseXML)&&(s=o.firstChild,o.lastChild&&"parsererror"===o.lastChild.nodeName))return void(a&&a("Invalid XML",t,e))}catch(e){}if(o&&s)return n(e);(o=i.parseXML(e.responseText))&&o.firstChild?(e=i.extend({},e,{responseXML:o}),n(e)):a&&a(e.responseText?"Invalid XML":t,t,e)}}}var i=e.utils={},a=e._;i.exists=function(e){switch(typeof e){case"string":return 0<e.length;case"object":return null!==e;case"undefined":return!1}return!0},i.styleDimension=function(e){return e+(0<e.toString().indexOf("%")?"":"px")},i.getAbsolutePath=function(e,t){if(i.exists(t)||(t=document.location.href),i.exists(e)){var n;if(i.exists(e)){n=e.indexOf("://");var a=e.indexOf("?");n=0<n&&(0>a||a>n)}else n=void 0;if(n)return e;n=t.substring(0,t.indexOf("://")+3);var r,a=t.substring(n.length,t.indexOf("/",n.length+1));0===e.indexOf("/")?r=e.split("/"):(r=t.split("?")[0],r=r.substring(n.length+a.length+1,r.lastIndexOf("/")),r=r.split("/").concat(e.split("/")));for(var o=[],s=0;s<r.length;s++)r[s]&&i.exists(r[s])&&"."!==r[s]&&(".."===r[s]?o.pop():o.push(r[s]));return n+a+"/"+o.join("/")}},i.extend=function(){var e=Array.prototype.slice.call(arguments,0);if(1<e.length){for(var t=e[0],n=function(e,n){void 0!==n&&null!==n&&(t[e]=n)},a=1;a<e.length;a++)i.foreach(e[a],n);return t}return null};var r=window.console=window.console||{log:function(){}};i.log=function(){var e=Array.prototype.slice.call(arguments,0);"object"==typeof r.log?r.log(e):r.log.apply(r,e)};var o=a.memoize(function(e){return null!==navigator.userAgent.toLowerCase().match(e)});i.isFF=t(/firefox/i),i.isChrome=t(/chrome/i),i.isIPod=t(/iP(hone|od)/i),i.isIPad=t(/iPad/i),i.isSafari602=t(/Macintosh.*Mac OS X 10_8.*6\.0\.\d* Safari/i),i.isIETrident=function(e){return e?(e=parseFloat(e).toFixed(1),o(RegExp("trident/.+rv:\\s*"+e,"i"))):o(/trident/i)},i.isMSIE=function(e){return e?(e=parseFloat(e).toFixed(1),o(RegExp("msie\\s*"+e,"i"))):o(/msie/i)},i.isIE=function(e){return e?(e=parseFloat(e).toFixed(1),11<=e?i.isIETrident(e):i.isMSIE(e)):i.isMSIE()||i.isIETrident()},i.isSafari=function(){return o(/safari/i)&&!o(/chrome/i)&&!o(/chromium/i)&&!o(/android/i)},i.isIOS=function(e){return o(e?RegExp("iP(hone|ad|od).+\\sOS\\s"+e,"i"):/iP(hone|ad|od)/i)},i.isAndroidNative=function(e){return i.isAndroid(e,!0)},i.isAndroid=function(e,t){return!(t&&o(/chrome\/[123456789]/i)&&!o(/chrome\/18/))&&(e?(i.isInt(e)&&!/\./.test(e)&&(e+="."),o(RegExp("Android\\s*"+e,"i"))):o(/Android/i))},i.isMobile=function(){return i.isIOS()||i.isAndroid()},i.isIframe=function(){return window.frameElement&&"IFRAME"===window.frameElement.nodeName},i.saveCookie=function(e,t){document.cookie="jwplayer."+e+"="+t+"; path=/"},i.getCookies=function(){for(var e={},t=document.cookie.split("; "),n=0;n<t.length;n++){var i=t[n].split("=");0===i[0].indexOf("jwplayer.")&&(e[i[0].substring(9,i[0].length)]=i[1])}return e},i.isInt=function(e){return 0==parseFloat(e)%1},i.typeOf=function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&a.isArray(e)?"array":t},i.translateEventResponse=function(t,n){var a=i.extend({},n);if(t!==e.events.JWPLAYER_FULLSCREEN||a.fullscreen)if("object"==typeof a.data){var r=a.data;delete a.data,a=i.extend(a,r)}else"object"==typeof a.metadata&&i.deepReplaceKeyName(a.metadata,["__dot__","__spc__","__dsh__","__default__"],["."," ","-","default"]);else a.fullscreen="true"===a.message,delete a.message;return i.foreach(["position","duration","offset"],function(e,t){a[t]&&(a[t]=Math.round(1e3*a[t])/1e3)}),a},i.flashVersion=function(){if(i.isAndroid())return 0;var e,t=navigator.plugins;try{if("undefined"!==t&&(e=t["Shockwave Flash"]))return parseInt(e.description.replace(/\D+(\d+)\..*/,"$1"),10)}catch(e){}if(void 0!==window.ActiveXObject)try{if(e=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return parseInt(e.GetVariable("$version").split(" ")[1].split(",")[0],10)}catch(e){}return 0},i.getScriptPath=function(e){for(var t=document.getElementsByTagName("script"),n=0;n<t.length;n++){var i=t[n].src;if(i&&0<=i.indexOf(e))return i.substr(0,i.indexOf(e))}return""},i.deepReplaceKeyName=function(t,n,a){switch(e.utils.typeOf(t)){case"array":for(var r=0;r<t.length;r++)t[r]=e.utils.deepReplaceKeyName(t[r],n,a);break;case"object":i.foreach(t,function(i,r){var o;if(n instanceof Array&&a instanceof Array){if(n.length!==a.length)return;o=n}else o=[n];for(var s=i,l=0;l<o.length;l++)s=s.replace(RegExp(n[l],"g"),a[l]);t[s]=e.utils.deepReplaceKeyName(r,n,a),i!==s&&delete t[i]})}return t};var s=i.pluginPathType={ABSOLUTE:0,RELATIVE:1,CDN:2};i.getPluginPathType=function(e){if("string"==typeof e){e=e.split("?")[0];var t=e.indexOf("://");if(0<t)return s.ABSOLUTE;var n=e.indexOf("/");return e=i.extension(e),!(0>t&&0>n)||e&&isNaN(e)?s.RELATIVE:s.CDN}},i.getPluginName=function(e){return e.replace(/^(.*\/)?([^-]*)-?.*\.(swf|js)$/,"$2")},i.getPluginVersion=function(e){return e.replace(/[^-]*-?([^\.]*).*$/,"$1")},i.isYouTube=function(e,t){return"youtube"===t||/^(http|\/\/).*(youtube\.com|youtu\.be)\/.+/.test(e)},i.youTubeID=function(e){try{return/v[=\/]([^?&]*)|youtu\.be\/([^?]*)|^([\w-]*)$/i.exec(e).slice(1).join("").replace("?","")}catch(e){return""}},i.isRtmp=function(e,t){return 0===e.indexOf("rtmp")||"rtmp"===t},i.foreach=function(e,t){var n,a;for(n in e)"function"===i.typeOf(e.hasOwnProperty)?e.hasOwnProperty(n)&&(a=e[n],t(n,a)):(a=e[n],t(n,a))},i.isHTTPS=function(){return 0===window.location.href.indexOf("https")},i.repo=function(){var t="http://p.jwpcdn.com/"+e.version.split(/\W/).splice(0,2).join("/")+"/";try{i.isHTTPS()&&(t=t.replace("http://","https://ssl."))}catch(e){}return t},i.versionCheck=function(t){t=("0"+t).split(/\W/);var n=e.version.split(/\W/),i=parseFloat(t[0]),a=parseFloat(n[0]);return!(i>a||i===a&&parseFloat("0"+t[1])>parseFloat(n[1]))},i.ajax=function(e,t,a,r){var o,s=!1;if(0<e.indexOf("#")&&(e=e.replace(/#.*$/,"")),e&&0<=e.indexOf("://")&&e.split("/")[2]!==window.location.href.split("/")[2]&&i.exists(window.XDomainRequest))o=new window.XDomainRequest,o.onload=n(o,e,t,a,r),o.ontimeout=o.onprogress=function(){},o.timeout=5e3;else{if(!i.exists(window.XMLHttpRequest))return a&&a("",e,o),o;var l=o=new window.XMLHttpRequest,u=e;o.onreadystatechange=function(){if(4===l.readyState)switch(l.status){case 200:n(l,u,t,a,r)();break;case 404:a("File not found",u,l)}}}o.overrideMimeType&&o.overrideMimeType("text/xml");var d=e,c=o;o.onerror=function(){a("Error loading file",d,c)};try{o.open("GET",e,!0)}catch(e){s=!0}return setTimeout(function(){if(s)a&&a(e,e,o);else try{o.send()}catch(t){a&&a(e,e,o)}},0),o},i.parseXML=function(e){var t;try{if(window.DOMParser){if(t=(new window.DOMParser).parseFromString(e,"text/xml"),t.childNodes&&t.childNodes.length&&"parsererror"===t.childNodes[0].firstChild.nodeName)return}else t=new window.ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)}catch(e){return}return t},i.between=function(e,t,n){return Math.max(Math.min(e,n),t)},i.seconds=function(e){if(a.isNumber(e))return e;e=e.replace(",",".");var t=e.split(":"),n=0;return"s"===e.slice(-1)?n=parseFloat(e):"m"===e.slice(-1)?n=60*parseFloat(e):"h"===e.slice(-1)?n=3600*parseFloat(e):1<t.length?(n=parseFloat(t[t.length-1]),n+=60*parseFloat(t[t.length-2]),3===t.length&&(n+=3600*parseFloat(t[t.length-3]))):n=parseFloat(e),n},i.serialize=function(e){return null===e?null:"true"===e.toString().toLowerCase()||"false"!==e.toString().toLowerCase()&&(isNaN(Number(e))||5<e.length||0===e.length?e:Number(e))},i.addClass=function(e,t){var n=a.isString(e.className)?e.className.split(" "):[],r=a.isArray(t)?t:t.split(" ");a.each(r,function(e){a.contains(n,e)||n.push(e)}),e.className=i.trim(n.join(" "))},i.removeClass=function(e,t){var n=a.isString(e.className)?e.className.split(" "):[],r=a.isArray(t)?t:t.split(" ");e.className=i.trim(a.difference(n,r).join(" "))},i.emptyElement=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},i.indexOf=a.indexOf,i.noop=function(){},i.canCast=function(){var t=e.cast;return!(!t||!a.isFunction(t.available)||!t.available())}}(jwplayer),function(e){function t(e){var t=document.createElement("style");return e&&t.appendChild(document.createTextNode(e)),t.type="text/css",document.getElementsByTagName("head")[0].appendChild(t),t}function n(e,t,n){return o.exists(t)?(n=n?" !important":"","string"==typeof t&&isNaN(t)?/png|gif|jpe?g/i.test(t)&&0>t.indexOf("url")?"url("+t+")":t+n:0===t||"z-index"===e||"opacity"===e?""+t+n:/color/i.test(e)?"#"+o.pad(t.toString(16).replace(/^0x/i,""),6)+n:Math.ceil(t)+"px"+n):""}function i(e,t){for(var n=0;n<e.length;n++){var i,a,r=e[n];if(void 0!==r&&null!==r)for(i in t){a=i,a=a.split("-");for(var o=1;o<a.length;o++)a[o]=a[o].charAt(0).toUpperCase()+a[o].slice(1);a=a.join(""),r.style[a]!==t[i]&&(r.style[a]=t[i])}}}function a(e){var t,n,i,a=s[e].sheet;if(a){t=a.cssRules,n=d[e],i=e;var r=l[i];i+=" { ";for(var o in r)i+=o+": "+r[o]+"; ";if(i+="}",void 0!==n&&n<t.length&&t[n].selectorText===e){if(i===t[n].cssText)return;a.deleteRule(n)}else n=t.length,d[e]=n;try{a.insertRule(i,n)}catch(e){}}}var r,o=e.utils,s={},l={},u=null,d={};o.cssKeyframes=function(e,n){var i=s.keyframes;i||(i=t(),s.keyframes=i);var i=i.sheet,a="@keyframes "+e+" { "+n+" }";try{i.insertRule(a,i.cssRules.length)}catch(e){}a=a.replace(/(keyframes|transform)/g,"-webkit-$1");try{i.insertRule(a,i.cssRules.length)}catch(e){}};var c=o.css=function(e,i,o){l[e]||(l[e]={});var d=l[e];o=o||!1;var c,f,h=!1;for(c in i)f=n(c,i[c],o),""!==f?f!==d[c]&&(d[c]=f,h=!0):void 0!==d[c]&&(delete d[c],h=!0);h&&(s[e]||(i=r&&r.sheet&&r.sheet.cssRules&&r.sheet.cssRules.length||0,(!r||5e4<i)&&(r=t()),s[e]=r),null!==u?u.styleSheets[e]=l[e]:a(e))};c.style=function(t,a,r){if(void 0!==t&&null!==t){void 0===t.length&&(t=[t]);var o,s={};for(o in a)s[o]=n(o,a[o]);if(null===u||r)i(t,s);else{a=(a=t.__cssRules)||{};for(var l in s)a[l]=s[l];t.__cssRules=a,0>e._.indexOf(u.elements,t)&&u.elements.push(t)}}},c.block=function(e){null===u&&(u={id:e,styleSheets:{},elements:[]})},c.unblock=function(e){if(u&&(!e||u.id===e)){for(var t in u.styleSheets)a(t);for(e=0;e<u.elements.length;e++)t=u.elements[e],i(t,t.__cssRules);u=null}},o.clearCss=function(e){for(var t in l)0<=t.indexOf(e)&&delete l[t];for(var n in s)0<=n.indexOf(e)&&a(n)},o.transform=function(e,t){var n={};t=t||"",n.transform=t,n["-webkit-transform"]=t,n["-ms-transform"]=t,n["-moz-transform"]=t,n["-o-transform"]=t,"string"==typeof e?c(e,n):c.style(e,n)},o.dragStyle=function(e,t){c(e,{"-webkit-user-select":t,"-moz-user-select":t,"-ms-user-select":t,"-webkit-user-drag":t,"user-select":t,"user-drag":t})},o.transitionStyle=function(e,t){navigator.userAgent.match(/5\.\d(\.\d)? safari/i)||c(e,{"-webkit-transition":t,"-moz-transition":t,"-o-transition":t,transition:t})},o.rotate=function(e,t){o.transform(e,"rotate("+t+"deg)")},o.rgbHex=function(e){return e=String(e).replace("#",""),3===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),"#"+e.substr(-6)},o.hexToRgba=function(e,t){var n="rgb",i=[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16)];return void 0!==t&&100!==t&&(n+="a",i.push(t/100)),n+"("+i.join(",")+")"}}(jwplayer),function(e){var t=jwplayer._,n=e.foreach,i={mp4:"video/mp4",ogg:"video/ogg",oga:"audio/ogg",vorbis:"audio/ogg",webm:"video/webm",aac:"audio/mp4",mp3:"audio/mpeg",hls:"application/vnd.apple.mpegurl"},a={mp4:i.mp4,f4v:i.mp4,m4v:i.mp4,mov:i.mp4,m4a:i.aac,f4a:i.aac,aac:i.aac,mp3:i.mp3,ogv:i.ogg,ogg:i.ogg,oga:i.vorbis,vorbis:i.vorbis,webm:i.webm,m3u8:i.hls,m3u:i.hls,hls:i.hls},r=e.extensionmap={};n(a,function(e,t){r[e]={html5:t}}),n({flv:"video",f4v:"video",mov:"video",m4a:"video",m4v:"video",mp4:"video",aac:"video",f4a:"video",mp3:"sound",smil:"rtmp",m3u8:"hls",hls:"hls"},function(e,t){r[e]||(r[e]={}),r[e].flash=t}),r.types=i,r.mimeType=function(e){var n;return t.find(i,function(t,i){if(t===e)return n=i,!0}),n},r.extType=function(e){return r.mimeType(a[e])}}(jwplayer.utils),function(e){var t=e.loaderstatus={NEW:0,LOADING:1,ERROR:2,COMPLETE:3};e.scriptloader=function(n){function i(e){s=t.ERROR,o.sendEvent(r.ERROR,e)}function a(e){s=t.COMPLETE,o.sendEvent(r.COMPLETE,e)}var r=jwplayer.events,o=e.extend(this,new r.eventdispatcher),s=t.NEW;this.load=function(){if(s===t.NEW){var o=e.scriptloader.loaders[n];if(o&&2>(s=o.getStatus()))return o.addEventListener(r.ERROR,i),void o.addEventListener(r.COMPLETE,a);var l=document.getElementsByTagName("head")[0]||document.documentElement,u=document.createElement("script"),d=!1;u.onload=u.onreadystatechange=function(e){d||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(d=!0,a(e),u.onload=u.onreadystatechange=null,l&&u.parentNode&&l.removeChild(u))},u.onerror=i,u.src=n,l.insertBefore(u,l.firstChild),s=t.LOADING,e.scriptloader.loaders[n]=this}},this.getStatus=function(){return s}},e.scriptloader.loaders={}}(jwplayer.utils),function(e){e.trim=function(e){return e.replace(/^\s+|\s+$/g,"")},e.pad=function(e,t,n){for(n||(n="0");e.length<t;)e=n+e;return e},e.xmlAttribute=function(e,t){for(var n=0;n<e.attributes.length;n++)if(e.attributes[n].name&&e.attributes[n].name.toLowerCase()===t.toLowerCase())return e.attributes[n].value.toString();return""},e.extension=function(e){if(!e||"rtmp"===e.substr(0,4))return"";var t;return(t=-1<e.indexOf("(format=m3u8-")&&"m3u8")?t:(e=e.substring(e.lastIndexOf("/")+1,e.length).split("?")[0].split("#")[0],-1<e.lastIndexOf(".")?e.substr(e.lastIndexOf(".")+1,e.length).toLowerCase():void 0)},e.stringToColor=function(e){return e=e.replace(/(#|0x)?([0-9A-F]{3,6})$/gi,"$2"),3===e.length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)),parseInt(e,16)}}(jwplayer.utils),function(e){var t="touchmove",n="touchstart";e.touch=function(i){function a(e){e.type===n?(l=!0,d=o(f.DRAG_START,e)):e.type===t?l&&(c||(r(f.DRAG_START,e,d),c=!0),r(f.DRAG,e)):(l&&(c?r(f.DRAG_END,e):(e.cancelBubble=!0,r(f.TAP,e))),l=c=!1,d=null)}function r(e,t,n){u[e]&&(t.preventManipulation&&t.preventManipulation(),t.preventDefault&&t.preventDefault(),t=n?n:o(e,t))&&u[e](t)}function o(e,t){var n=null;if(t.touches&&t.touches.length?n=t.touches[0]:t.changedTouches&&t.changedTouches.length&&(n=t.changedTouches[0]),!n)return null;var i=s.getBoundingClientRect(),n={type:e,target:s,x:n.pageX-window.pageXOffset-i.left,y:n.pageY,deltaX:0,deltaY:0};return e!==f.TAP&&d&&(n.deltaX=n.x-d.x,n.deltaY=n.y-d.y),n}var s=i,l=!1,u={},d=null,c=!1,f=e.touchEvents;return document.addEventListener(t,a),document.addEventListener("touchend",function(e){l&&c&&r(f.DRAG_END,e),l=c=!1,d=null}),document.addEventListener("touchcancel",a),i.addEventListener(n,a),i.addEventListener("touchend",a),this.addEventListener=function(e,t){u[e]=t},this.removeEventListener=function(e){delete u[e]},this}}(jwplayer.utils),function(e){e.touchEvents={DRAG:"jwplayerDrag",DRAG_START:"jwplayerDragStart",DRAG_END:"jwplayerDragEnd",TAP:"jwplayerTap"}}(jwplayer.utils),function(e){e.key=function(t){var n,i,a;this.edition=function(){return a&&a.getTime()<(new Date).getTime()?"invalid":n},this.token=function(){return i},e.exists(t)||(t="");try{t=e.tea.decrypt(t,"36QXq4W@GSBV^teR");var r=t.split("/");(n=r[0])?/^(free|pro|premium|enterprise|ads)$/i.test(n)?(i=r[1],r[2]&&0<parseInt(r[2])&&(a=new Date,a.setTime(String(r[2])))):n="invalid":n="free"}catch(e){n="invalid"}}}(jwplayer.utils),function(e){var t=e.tea={};t.encrypt=function(e,a){if(0==e.length)return"";var r=t.strToLongs(i.encode(e));1>=r.length&&(r[1]=0);for(var o,s=t.strToLongs(i.encode(a).slice(0,16)),l=r.length,u=r[l-1],d=r[0],c=Math.floor(6+52/l),f=0;0<c--;){f+=2654435769,o=f>>>2&3;for(var h=0;h<l;h++)d=r[(h+1)%l],u=(u>>>5^d<<2)+(d>>>3^u<<4)^(f^d)+(s[3&h^o]^u),u=r[h]+=u}return r=t.longsToStr(r),n.encode(r)},t.decrypt=function(e,a){if(0==e.length)return"";for(var r,o=t.strToLongs(n.decode(e)),s=t.strToLongs(i.encode(a).slice(0,16)),l=o.length,u=o[l-1],d=o[0],c=2654435769*Math.floor(6+52/l);0!=c;){r=c>>>2&3;for(var f=l-1;0<=f;f--)u=o[0<f?f-1:l-1],u=(u>>>5^d<<2)+(d>>>3^u<<4)^(c^d)+(s[3&f^r]^u),d=o[f]-=u;c-=2654435769}return o=t.longsToStr(o),o=o.replace(/\0+$/,""),i.decode(o)},t.strToLongs=function(e){for(var t=Array(Math.ceil(e.length/4)),n=0;n<t.length;n++)t[n]=e.charCodeAt(4*n)+(e.charCodeAt(4*n+1)<<8)+(e.charCodeAt(4*n+2)<<16)+(e.charCodeAt(4*n+3)<<24);return t},t.longsToStr=function(e){for(var t=Array(e.length),n=0;n<e.length;n++)t[n]=String.fromCharCode(255&e[n],e[n]>>>8&255,e[n]>>>16&255,e[n]>>>24&255);return t.join("")};var n={code:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e,t){var a,r,o,s,l,u,d=[],c="",f=n.code;if(u=(void 0===t?0:t)?i.encode(e):e,0<(l=u.length%3))for(;3>l++;)c+="=",u+="\0";for(l=0;l<u.length;l+=3)a=u.charCodeAt(l),r=u.charCodeAt(l+1),o=u.charCodeAt(l+2),s=a<<16|r<<8|o,a=s>>18&63,r=s>>12&63,o=s>>6&63,s&=63,d[l/3]=f.charAt(a)+f.charAt(r)+f.charAt(o)+f.charAt(s);return d=d.join(""),d=d.slice(0,d.length-c.length)+c},decode:function(e,t){t=void 0!==t&&t;var a,r,o,s,l,u,d=[],c=n.code;u=t?i.decode(e):e;for(var f=0;f<u.length;f+=4)a=c.indexOf(u.charAt(f)),r=c.indexOf(u.charAt(f+1)),s=c.indexOf(u.charAt(f+2)),l=c.indexOf(u.charAt(f+3)),o=a<<18|r<<12|s<<6|l,a=o>>>16&255,r=o>>>8&255,o&=255,d[f/4]=String.fromCharCode(a,r,o),64==l&&(d[f/4]=String.fromCharCode(a,r)),64==s&&(d[f/4]=String.fromCharCode(a));return s=d.join(""),t?i.decode(s):s}},i={encode:function(e){return e=e.replace(/[\u0080-\u07ff]/g,function(e){return e=e.charCodeAt(0),String.fromCharCode(192|e>>6,128|63&e)}),e=e.replace(/[\u0800-\uffff]/g,function(e){return e=e.charCodeAt(0),String.fromCharCode(224|e>>12,128|e>>6&63,128|63&e)})},decode:function(e){return e=e.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(e){return e=(15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2),String.fromCharCode(e)}),e=e.replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(e){return e=(31&e.charCodeAt(0))<<6|63&e.charCodeAt(1),String.fromCharCode(e)})}}}(jwplayer.utils),function(e){e.events={COMPLETE:"COMPLETE",ERROR:"ERROR",API_READY:"jwplayerAPIReady",JWPLAYER_READY:"jwplayerReady",JWPLAYER_FULLSCREEN:"jwplayerFullscreen",JWPLAYER_RESIZE:"jwplayerResize",JWPLAYER_ERROR:"jwplayerError",JWPLAYER_SETUP_ERROR:"jwplayerSetupError",JWPLAYER_MEDIA_BEFOREPLAY:"jwplayerMediaBeforePlay",JWPLAYER_MEDIA_BEFORECOMPLETE:"jwplayerMediaBeforeComplete",JWPLAYER_MEDIA_BUFFER:"jwplayerMediaBuffer",JWPLAYER_MEDIA_BUFFER_FULL:"jwplayerMediaBufferFull",JWPLAYER_MEDIA_ERROR:"jwplayerMediaError",JWPLAYER_MEDIA_LOADED:"jwplayerMediaLoaded",JWPLAYER_MEDIA_COMPLETE:"jwplayerMediaComplete",JWPLAYER_MEDIA_SEEK:"jwplayerMediaSeek",JWPLAYER_MEDIA_TIME:"jwplayerMediaTime",JWPLAYER_MEDIA_VOLUME:"jwplayerMediaVolume",JWPLAYER_MEDIA_META:"jwplayerMediaMeta",JWPLAYER_MEDIA_MUTE:"jwplayerMediaMute",JWPLAYER_AUDIO_TRACKS:"jwplayerAudioTracks",JWPLAYER_AUDIO_TRACK_CHANGED:"jwplayerAudioTrackChanged",JWPLAYER_MEDIA_LEVELS:"jwplayerMediaLevels",JWPLAYER_MEDIA_LEVEL_CHANGED:"jwplayerMediaLevelChanged",JWPLAYER_CAPTIONS_CHANGED:"jwplayerCaptionsChanged",JWPLAYER_CAPTIONS_LIST:"jwplayerCaptionsList",JWPLAYER_CAPTIONS_LOADED:"jwplayerCaptionsLoaded",JWPLAYER_PLAYER_STATE:"jwplayerPlayerState",state:{BUFFERING:"BUFFERING",IDLE:"IDLE",PAUSED:"PAUSED",PLAYING:"PLAYING"},JWPLAYER_PLAYLIST_LOADED:"jwplayerPlaylistLoaded",JWPLAYER_PLAYLIST_ITEM:"jwplayerPlaylistItem",JWPLAYER_PLAYLIST_COMPLETE:"jwplayerPlaylistComplete",JWPLAYER_DISPLAY_CLICK:"jwplayerViewClick",JWPLAYER_PROVIDER_CLICK:"jwplayerProviderClick",JWPLAYER_VIEW_TAB_FOCUS:"jwplayerViewTabFocus",JWPLAYER_CONTROLS:"jwplayerViewControls",JWPLAYER_USER_ACTION:"jwplayerUserAction",JWPLAYER_INSTREAM_CLICK:"jwplayerInstreamClicked",JWPLAYER_INSTREAM_DESTROYED:"jwplayerInstreamDestroyed",JWPLAYER_AD_TIME:"jwplayerAdTime",JWPLAYER_AD_ERROR:"jwplayerAdError",JWPLAYER_AD_CLICK:"jwplayerAdClicked",JWPLAYER_AD_COMPLETE:"jwplayerAdComplete",JWPLAYER_AD_IMPRESSION:"jwplayerAdImpression",JWPLAYER_AD_COMPANIONS:"jwplayerAdCompanions",JWPLAYER_AD_SKIPPED:"jwplayerAdSkipped",JWPLAYER_AD_PLAY:"jwplayerAdPlay",JWPLAYER_AD_PAUSE:"jwplayerAdPause",JWPLAYER_AD_META:"jwplayerAdMeta",JWPLAYER_CAST_AVAILABLE:"jwplayerCastAvailable",JWPLAYER_CAST_SESSION:"jwplayerCastSession",JWPLAYER_CAST_AD_CHANGED:"jwplayerCastAdChanged"}}(jwplayer),function(e){var t=e.utils;e.events.eventdispatcher=function(n,i){function a(e,n,i){if(e)for(var a=0;a<e.length;a++){var r=e[a];if(r){null!==r.count&&0==--r.count&&delete e[a];try{r.listener(n)}catch(e){t.log('Error handling "'+i+'" event listener ['+a+"]: "+e.toString(),r.listener,n)}}}}var r,o;this.resetEventListeners=function(){r={},o=[]},this.resetEventListeners(),this.addEventListener=function(e,n,i){try{t.exists(r[e])||(r[e]=[]),"string"===t.typeOf(n)&&(n=new Function("return "+n)()),r[e].push({listener:n,count:i||null})}catch(e){t.log("error",e)}return!1},this.removeEventListener=function(e,n){var i;if(r[e]){try{if(void 0===n)return void(r[e]=[]);for(i=0;i<r[e].length;i++)if(r[e][i].listener.toString()===n.toString()){r[e].splice(i,1);break}}catch(e){t.log("error",e)}return!1}},this.addGlobalListener=function(e,n){try{"string"===t.typeOf(e)&&(e=new Function("return "+e)()),o.push({listener:e,count:n||null})}catch(e){t.log("error",e)}return!1},this.removeGlobalListener=function(e){if(e){try{for(var n=o.length;n--;)o[n].listener.toString()===e.toString()&&o.splice(n,1)}catch(e){t.log("error",e)}return!1}},this.sendEvent=function(s,l){t.exists(l)||(l={}),t.extend(l,{id:n,version:e.version,type:s}),i&&t.log(s,l),a(r[s],l,s),a(o,l,s)}}}(window.jwplayer),function(e){var t={},n={};e.plugins=function(){},e.plugins.loadPlugins=function(i,a){return n[i]=new e.plugins.pluginloader(new e.plugins.model(t),a),n[i]},e.plugins.registerPlugin=function(n,i,a,r){var o=e.utils.getPluginName(n);t[o]||(t[o]=new e.plugins.plugin(n)),t[o].registerPlugin(n,i,a,r)}}(jwplayer),function(e){e.plugins.model=function(t){this.addPlugin=function(n){var i=e.utils.getPluginName(n);return t[i]||(t[i]=new e.plugins.plugin(n)),t[i]},this.getPlugins=function(){return t}}}(jwplayer),function(e){var t=jwplayer.utils,n=jwplayer.events;e.pluginmodes={FLASH:0,JAVASCRIPT:1,HYBRID:2},e.plugin=function(i){function a(){switch(t.getPluginPathType(i)){case t.pluginPathType.ABSOLUTE:return i;case t.pluginPathType.RELATIVE:return t.getAbsolutePath(i,window.location.href)}}function r(){d=setTimeout(function(){c=t.loaderstatus.COMPLETE,f.sendEvent(n.COMPLETE)},1e3)}function o(){c=t.loaderstatus.ERROR,f.sendEvent(n.ERROR,{url:i})}var s,l,u,d,c=t.loaderstatus.NEW,f=new n.eventdispatcher;t.extend(this,f),this.load=function(){if(c===t.loaderstatus.NEW)if(0<i.lastIndexOf(".swf"))s=i,c=t.loaderstatus.COMPLETE,f.sendEvent(n.COMPLETE);else if(t.getPluginPathType(i)===t.pluginPathType.CDN)c=t.loaderstatus.COMPLETE,f.sendEvent(n.COMPLETE);else{c=t.loaderstatus.LOADING;var e=new t.scriptloader(a());e.addEventListener(n.COMPLETE,r),e.addEventListener(n.ERROR,o),e.load()}},this.registerPlugin=function(e,i,a,r){d&&(clearTimeout(d),d=void 0),u=i,a&&r?(s=r,l=a):"string"==typeof a?s=a:"function"==typeof a?l=a:!a&&!r&&(s=e),c=t.loaderstatus.COMPLETE,f.sendEvent(n.COMPLETE)},this.getStatus=function(){return c},this.getPluginName=function(){return t.getPluginName(i)},this.getFlashPath=function(){if(s)switch(t.getPluginPathType(s)){case t.pluginPathType.ABSOLUTE:return s;case t.pluginPathType.RELATIVE:return 0<i.lastIndexOf(".swf")?t.getAbsolutePath(s,window.location.href):t.getAbsolutePath(s,a())}return null},this.getJS=function(){return l},this.getTarget=function(){return u},this.getPluginmode=function(){return void 0!==s&&void 0!==l?e.pluginmodes.HYBRID:void 0!==s?e.pluginmodes.FLASH:void 0!==l?e.pluginmodes.JAVASCRIPT:void 0},this.getNewInstance=function(e,t,n){return new l(e,t,n)},this.getURL=function(){return i}}}(jwplayer.plugins),function(e){var t=e.utils,n=e.events,i=e._,a=t.foreach;e.plugins.pluginloader=function(e,r){function o(){c||(c=!0,d=t.loaderstatus.COMPLETE,m.sendEvent(n.COMPLETE))}function s(){if(!p&&((!f||0===i.keys(f).length)&&o(),!c)){var a=e.getPlugins();u=i.after(h,o),t.foreach(f,function(e){e=t.getPluginName(e);var i=a[e];e=i.getJS();var r=i.getTarget(),i=i.getStatus();i===t.loaderstatus.LOADING||i===t.loaderstatus.NEW||(e&&!t.versionCheck(r)&&m.sendEvent(n.ERROR,{message:"Incompatible player version"}),u())})}}function l(e){p||(m.sendEvent(n.ERROR,{message:"File not found"}),e.url&&t.log("File not found",e.url),s())}var u,d=t.loaderstatus.NEW,c=!1,f=r,h=i.size(f),p=!1,m=new n.eventdispatcher;t.extend(this,m),this.setupPlugins=function(n,i,r){var o={length:0,plugins:{}},s=0,l={},u=e.getPlugins();return a(i.plugins,function(e,a){var d=t.getPluginName(e),c=u[d],f=c.getFlashPath(),h=c.getJS(),p=c.getURL();f&&(o.plugins[f]=t.extend({},a),o.plugins[f].pluginmode=c.getPluginmode(),o.length++);try{if(h&&i.plugins&&i.plugins[p]){var m=document.createElement("div");m.id=n.id+"_"+d,m.style.position="absolute",m.style.top=0,m.style.zIndex=s+10,l[d]=c.getNewInstance(n,t.extend({},i.plugins[p]),m),s++,n.onReady(r(l[d],m,!0)),n.onResize(r(l[d],m))}}catch(e){t.log("ERROR: Failed to load "+d+".")}}),n.plugins=l,o},this.load=function(){if(!t.exists(r)||"object"===t.typeOf(r)){d=t.loaderstatus.LOADING,a(r,function(i){t.exists(i)&&(i=e.addPlugin(i),i.addEventListener(n.COMPLETE,s),i.addEventListener(n.ERROR,l))});var i=e.getPlugins();a(i,function(e,t){t.load()})}s()},this.destroy=function(){p=!0,m&&(m.resetEventListeners(),m=null)},this.pluginFailed=l,this.getStatus=function(){return d}}}(jwplayer),function(e){e.parsers={localName:function(e){return e?e.localName?e.localName:e.baseName?e.baseName:"":""},textContent:function(t){return t?t.textContent?e.utils.trim(t.textContent):t.text?e.utils.trim(t.text):"":""},getChildNode:function(e,t){return e.childNodes[t]},numChildren:function(e){return e.childNodes?e.childNodes.length:0}}}(jwplayer),function(e){var t=e.parsers;(t.jwparser=function(){}).parseEntry=function(n,i){for(var a=[],r=[],o=e.utils.xmlAttribute,s=0;s<n.childNodes.length;s++){var l=n.childNodes[s];if("jwplayer"===l.prefix){var u=t.localName(l);"source"===u?(delete i.sources,a.push({file:o(l,"file"),default:o(l,"default"),label:o(l,"label"),type:o(l,"type")})):"track"===u?(delete i.tracks,r.push({file:o(l,"file"),default:o(l,"default"),kind:o(l,"kind"),label:o(l,"label")})):(i[u]=e.utils.serialize(t.textContent(l)),"file"===u&&i.sources&&delete i.sources)}i.file||(i.file=i.link)}if(a.length)for(i.sources=[],s=0;s<a.length;s++)0<a[s].file.length&&(a[s].default="true"===a[s].default,a[s].label.length||delete a[s].label,i.sources.push(a[s]));if(r.length)for(i.tracks=[],s=0;s<r.length;s++)0<r[s].file.length&&(r[s].default="true"===r[s].default,r[s].kind=r[s].kind.length?r[s].kind:"captions",r[s].label.length||delete r[s].label,i.tracks.push(r[s]));return i}}(jwplayer),function(e){var t=jwplayer.utils,n=t.xmlAttribute,i=e.localName,a=e.textContent,r=e.numChildren,o=e.mediaparser=function(){};o.parseGroup=function(e,s){var l,u,d=[];for(u=0;u<r(e);u++)if(l=e.childNodes[u],"media"===l.prefix&&i(l))switch(i(l).toLowerCase()){case"content":n(l,"duration")&&(s.duration=t.seconds(n(l,"duration"))),0<r(l)&&(s=o.parseGroup(l,s)),n(l,"url")&&(s.sources||(s.sources=[]),s.sources.push({file:n(l,"url"),type:n(l,"type"),width:n(l,"width"),label:n(l,"label")}));break;case"title":s.title=a(l);break;case"description":s.description=a(l);break;case"guid":s.mediaid=a(l);break;case"thumbnail":s.image||(s.image=n(l,"url"));break;case"group":o.parseGroup(l,s);break;case"subtitle":var c={};if(c.file=n(l,"url"),c.kind="captions",0<n(l,"lang").length){var f=c;l=n(l,"lang");var h={zh:"Chinese",nl:"Dutch",en:"English",fr:"French",de:"German",it:"Italian",ja:"Japanese",pt:"Portuguese",ru:"Russian",es:"Spanish"};l=h[l]?h[l]:l,f.label=l}d.push(c)}for(s.hasOwnProperty("tracks")||(s.tracks=[]),u=0;u<d.length;u++)s.tracks.push(d[u]);return s}}(jwplayer.parsers),function(e){function t(t){for(var a={},r=0;r<t.childNodes.length;r++){var s=t.childNodes[r],l=o(s);if(l)switch(l.toLowerCase()){case"enclosure":a.file=n.xmlAttribute(s,"url");break;case"title":a.title=i(s);break;case"guid":a.mediaid=i(s);break;case"pubdate":a.date=i(s);break;case"description":a.description=i(s);break;case"link":a.link=i(s);break;case"category":a.tags=a.tags?a.tags+i(s):i(s)}}return a=e.mediaparser.parseGroup(t,a),a=e.jwparser.parseEntry(t,a),new jwplayer.playlist.item(a)}var n=jwplayer.utils,i=e.textContent,a=e.getChildNode,r=e.numChildren,o=e.localName;e.rssparser={},e.rssparser.parse=function(e){for(var n=[],i=0;i<r(e);i++){var s=a(e,i);if("channel"===o(s).toLowerCase())for(var l=0;l<r(s);l++){var u=a(s,l);"item"===o(u).toLowerCase()&&n.push(t(u))}}return n}}(jwplayer.parsers),function(e){var t=e.utils,n=e._;e.playlist=function(t){var i=[];return t=n.isArray(t)?t:[t],n.each(t,function(t){i.push(new e.playlist.item(t))}),i},e.playlist.filterPlaylist=function(e,a){var r=[];return n.each(e,function(e){if(e=t.extend({},e),e.sources=i(e.sources,!1,a),e.sources.length){for(var n=0;n<e.sources.length;n++)e.sources[n].label=e.sources[n].label||n.toString();r.push(e)}}),r};var i=e.playlist.filterSources=function(i,a,r){var o,s=[],l=a?e.embed.flashCanPlay:e.embed.html5CanPlay;if(i)return n.each(i,function(e){if(e&&e.file){var n=t.trim(""+e.file),i=e.type;i||(i=t.extension(n),i=t.extensionmap.extType(i)),e=t.extend({},e,{file:n,type:i})}else e=void 0;e&&l(e.file,e.type,r)&&(o=o||e.type,e.type===o&&s.push(e))}),s}}(jwplayer),function(e){var t=e.item=function(n){var i,a,r=jwplayer.utils,o=r.extend({},t.defaults,n);for(o.tracks=n&&r.exists(n.tracks)?n.tracks:[],0===o.sources.length&&(o.sources=[new e.source(o)]),i=0;i<o.sources.length;i++)a=o.sources[i].default,o.sources[i].default=!!a&&"true"===a.toString(),o.sources[i]=new e.source(o.sources[i]);if(o.captions&&!r.exists(n.tracks)){for(n=0;n<o.captions.length;n++)o.tracks.push(o.captions[n]);delete o.captions}for(i=0;i<o.tracks.length;i++)o.tracks[i]=new e.track(o.tracks[i]);return o};t.defaults={description:void 0,image:void 0,mediaid:void 0,title:void 0,sources:[],tracks:[]}}(jwplayer.playlist),function(e){var t=e.utils,n=e.events,i=e.parsers;e.playlist.loader=function(){function a(t){try{var a=t.responseXML.childNodes;t="";for(var r=0;r<a.length&&(t=a[r],!(8!==t.nodeType));r++);if("xml"===i.localName(t)&&(t=t.nextSibling),"rss"!==i.localName(t))o("Not a valid RSS feed");else{var l=new e.playlist(i.rssparser.parse(t));s.sendEvent(n.JWPLAYER_PLAYLIST_LOADED,{playlist:l})}}catch(e){o()}}function r(e){o(e.match(/invalid/i)?"Not a valid RSS feed":"")}function o(e){s.sendEvent(n.JWPLAYER_ERROR,{message:e?e:"Error loading file"})}var s=new n.eventdispatcher;t.extend(this,s),this.load=function(e){t.ajax(e,a,r)}}}(jwplayer),function(e){var t=jwplayer.utils,n={file:void 0,label:void 0,type:void 0,default:void 0};e.source=function(e){var i=t.extend({},n);return t.foreach(n,function(n){t.exists(e[n])&&(i[n]=e[n],delete e[n])}),i.type&&0<i.type.indexOf("/")&&(i.type=t.extensionmap.mimeType(i.type)),"m3u8"===i.type&&(i.type="hls"),"smil"===i.type&&(i.type="rtmp"),i}}(jwplayer.playlist),function(e){var t=jwplayer.utils,n={file:void 0,label:void 0,kind:"captions",default:!1};e.track=function(e){var i=t.extend({},n);return e||(e={}),t.foreach(n,function(n){t.exists(e[n])&&(i[n]=e[n],delete e[n])}),i}}(jwplayer.playlist),function(e){function t(e,t,i){var a=e.style;a.backgroundColor="#000",a.color="#FFF",a.width=n.styleDimension(i.width),a.height=n.styleDimension(i.height),a.display="table",a.opacity=1,i=document.createElement("p"),a=i.style,a.verticalAlign="middle",a.textAlign="center",a.display="table-cell",a.font="15px/20px Arial, Helvetica, sans-serif",i.innerHTML=t.replace(":",":<br>"),e.innerHTML="",e.appendChild(i)}var n=e.utils,i=e.events,a=e._,r=e.embed=function(o){function s(){if(!w){var t=p.playlist;if(a.isArray(t)){if(0===t.length)return void d();if(!(1!==t.length||t[0].sources&&0!==t[0].sources.length&&t[0].sources[0].file))return void d()}if(!b)if(a.isString(t))h=new e.playlist.loader,h.addEventListener(i.JWPLAYER_PLAYLIST_LOADED,function(e){p.playlist=e.playlist,b=!1,s()}),h.addEventListener(i.JWPLAYER_ERROR,function(e){b=!1,d(e)}),b=!0,h.load(p.playlist);else if(y.getStatus()===n.loaderstatus.COMPLETE){for(t=0;t<p.modes.length;t++){var u=p.modes[t],f=u.type;if(f&&r[f]){var m=n.extend({},p);if(k=new r[f](C,u,m,y,o),k.supportsConfig())return k.addEventListener(i.ERROR,l),k.embed(),n.css("object.jwswf, .jwplayer:focus",{outline:"none"}),n.css(".jw-tab-focus:focus",{outline:"solid 2px #0B7EF4"}),o}}p.fallback?(t="No suitable players found and fallback enabled",c(t,!0),n.log(t),new r.download(C,p,d)):(t="No suitable players found and fallback disabled",c(t,!1),n.log(t))}}}function l(e){f(v+e.message)}function u(e){o.dispatchEvent(i.JWPLAYER_ERROR,{message:"Could not load plugin: "+e.message})}function d(e){f(e&&e.message?"Error loading playlist: "+e.message:v+"No playable sources found")}function c(e,t){clearTimeout(j),j=setTimeout(function(){o.dispatchEvent(i.JWPLAYER_SETUP_ERROR,{message:e,fallback:t})},0)}function f(e){w||(_.parentNode.replaceChild(C,_),p.fallback?(w=!0,t(C,e,p),c(e,!0)):c(e,!1))}var h,p=new r.config(o.config),m=p.width,g=p.height,v="Error loading player: ",_=document.getElementById(o.id),y=e.plugins.loadPlugins(o.id,p.plugins),b=!1,w=!1,k=null,j=-1;p.id=o.id,p.aspectratio?o.config.aspectratio=p.aspectratio:delete o.config.aspectratio;var x=o;n.foreach(p.events,function(e,t){var n=x[e];"function"==typeof n&&n.call(x,t)});var C=document.createElement("div");return C.id=_.id,C.style.width=0<m.toString().indexOf("%")?m:m+"px",C.style.height=0<g.toString().indexOf("%")?g:g+"px",this.embed=function(){w||(y.addEventListener(i.COMPLETE,s),y.addEventListener(i.ERROR,u),y.load())},this.destroy=function(){k&&(k.destroy(),k=null),y&&(y.destroy(),y=null),h&&(h.resetEventListeners(),h=null)},this.errorScreen=f,this};e.embed.errorScreen=t}(jwplayer),function(e){function t(e){if(e.playlist)for(var t=0;t<e.playlist.length;t++)e.playlist[t]=new a(e.playlist[t]);else{var r={};i.foreach(a.defaults,function(t){n(e,r,t)}),r.sources||(e.levels?(r.sources=e.levels,delete e.levels):(t={},n(e,t,"file"),n(e,t,"type"),r.sources=t.file?[t]:[])),e.playlist=[new a(r)]}}function n(e,t,n){i.exists(e[n])&&(t[n]=e[n],delete e[n])}var i=e.utils,a=e.playlist.item;(e.embed.config=function(n){var a={fallback:!0,height:270,primary:"html5",width:480,base:n.base?n.base:i.getScriptPath("jwplayer.js"),aspectratio:""};n=i.extend({},a,e.defaults,n);var a={type:"html5",src:n.base+"jwplayer.html5.js"},r={type:"flash",src:n.base+"jwplayer.flash.swf"};if(n.modes="flash"===n.primary?[r,a]:[a,r],n.listbar&&(n.playlistsize=n.listbar.size,n.playlistposition=n.listbar.position,n.playlistlayout=n.listbar.layout),n.flashplayer&&(r.src=n.flashplayer),n.html5player&&(a.src=n.html5player),t(n),"string"==typeof(r=n.aspectratio)&&i.exists(r)){var o=r.indexOf(":");-1===o?a=0:(a=parseFloat(r.substr(0,o)),r=parseFloat(r.substr(o+1)),a=0>=a||0>=r?0:r/a*100+"%")}else a=0;return-1===n.width.toString().indexOf("%")?delete n.aspectratio:a?n.aspectratio=a:delete n.aspectratio,n}).addConfig=function(e,n){return t(n),i.extend(e,n)}}(jwplayer),function(e){function t(e,t){function i(e,t){a[r].style[e]=t}for(var a=document.querySelectorAll(e),r=0;r<a.length;r++)n.foreach(t,i)}var n=e.utils;e.embed.download=function(e,i,a){function r(e,t,n){return e=document.createElement(e),t&&(e.className="jwdownload"+t),n&&n.appendChild(e),e}var o,s,l=n.extend({},i),u=l.width?l.width:480,d=l.height?l.height:320;i=i.logo?i.logo:{prefix:n.repo(),file:"logo.png",margin:10};var c,f,h,p,m,g;if(f=l.playlist,l=["mp4","aac","mp3"],f&&f.length){for(h=f[0],p=h.sources,f=0;f<p.length;f++)m=p[f],m.file&&(g=m.type||n.extensionmap.extType(n.extension(m.file)),0<=n.indexOf(l,g)?(o=m.file,s=h.image):n.isYouTube(m.file,g)&&(c=m.file));o?(a=o,e&&(o=r("a","display",e),r("div","icon",o),r("div","logo",o),a&&o.setAttribute("href",n.getAbsolutePath(a))),a="#"+e.id+" .jwdownload",e.style.width="",e.style.height="",t(a+"display",{width:n.styleDimension(Math.max(320,u)),height:n.styleDimension(Math.max(180,d)),background:"black center no-repeat "+(s?"url("+s+")":""),backgroundSize:"contain",position:"relative",border:"none",display:"block"}),t(a+"display div",{position:"absolute",width:"100%",height:"100%"}),t(a+"logo",{top:i.margin+"px",right:i.margin+"px",background:"top right no-repeat url("+i.prefix+i.file+")"}),t(a+"icon",{background:"center no-repeat url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAgNJREFUeNrs28lqwkAYB/CZqNVDDj2r6FN41QeIy8Fe+gj6BL275Q08u9FbT8ZdwVfotSBYEPUkxFOoks4EKiJdaDuTjMn3wWBO0V/+sySR8SNSqVRKIR8qaXHkzlqS9jCfzzWcTCYp9hF5o+59sVjsiRzcegSckFzcjT+ruN80TeSlAjCAAXzdJSGPFXRpAAMYwACGZQkSdhG4WCzehMNhqV6vG6vVSrirKVEw66YoSqDb7cqlUilE8JjHd/y1MQefVzqdDmiaJpfLZWHgXMHn8F6vJ1cqlVAkEsGuAn83J4gAd2RZymQygX6/L1erVQt+9ZPWb+CDwcCC2zXGJaewl/DhcHhK3DVj+KfKZrMWvFarcYNLomAv4aPRSFZVlTlcSPA5fDweW/BoNIqFnKV53JvncjkLns/n/cLdS+92O7RYLLgsKfv9/t8XlDn4eDyiw+HA9Jyz2eyt0+kY2+3WFC5hluej0Ha7zQQq9PPwdDq1Et1sNsx/nFBgCqWJ8oAK1aUptNVqcYWewE4nahfU0YQnk4ntUEfGMIU2m01HoLaCKbTRaDgKtaVLk9tBYaBcE/6Artdr4RZ5TB6/dC+9iIe/WgAMYADDpAUJAxjAAAYwgGFZgoS/AtNNTF7Z2bL0BYPBV3Jw5xFwwWcYxgtBP5OkE8i9G7aWGOOCruvauwADALMLMEbKf4SdAAAAAElFTkSuQmCC)"})):c?(i=c,e=r("iframe","",e),e.src="http://www.youtube.com/embed/"+n.youTubeID(i),e.width=u,e.height=d,e.style.border="none"):a()}}}(jwplayer),function(e){var t=e.utils,n=e.events,i={};(e.embed.flash=function(r,o,s,l,u){function d(e,t,n){var i=document.createElement("param");i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)}function c(e,t,n){return function(){try{n&&document.getElementById(u.id+"_wrapper").appendChild(t);var i=document.getElementById(u.id).getPluginConfig("display");"function"==typeof e.resize&&e.resize(i.width,i.height),t.style.left=i.x,t.style.top=i.h}catch(e){}}}function f(e){if(!e)return{};var n={},i=[];return t.foreach(e,function(e,a){var r=t.getPluginName(e);i.push(e),t.foreach(a,function(e,t){n[r+"."+e]=t})}),n.plugins=i.join(","),n}var h=new e.events.eventdispatcher,p=t.flashVersion();t.extend(this,h),this.embed=function(){if(s.id=u.id,10>p)return h.sendEvent(n.ERROR,{message:"Flash version must be 10.0 or greater"}),!1;var e,a,m=r.id,g=u.config.listbar,v=t.extend({},s);if(e=document.getElementById(u.id),e.parentNode.replaceChild(r,e),m+"_wrapper"===r.parentNode.id)e=document.getElementById(m+"_wrapper");else{if(e=document.createElement("div"),a=document.createElement("div"),a.style.display="none",a.id=m+"_aspect",e.id=m+"_wrapper",e.style.position="relative",e.style.display="block",e.style.width=t.styleDimension(v.width),e.style.height=t.styleDimension(v.height),u.config.aspectratio){var _=parseFloat(u.config.aspectratio);a.style.display="block",a.style.marginTop=u.config.aspectratio,e.style.height="auto",e.style.display="inline-block",g&&("bottom"===g.position?a.style.paddingBottom=g.size+"px":"right"===g.position&&(a.style.marginBottom=-1*g.size*(_/100)+"px"))}r.parentNode.replaceChild(e,r),e.appendChild(r),e.appendChild(a)}for(g=l.setupPlugins(u,v,c),0<g.length?t.extend(v,f(g.plugins)):delete v.plugins,void 0!==v["dock.position"]&&"false"===v["dock.position"].toString().toLowerCase()&&(v.dock=v["dock.position"],delete v["dock.position"]),g=v.wmode||(v.height&&40>=v.height?"transparent":"opaque"),a="height width modes events primary base fallback volume".split(" "),_=0;_<a.length;_++)delete v[a[_]];a=t.getCookies(),t.foreach(a,function(e,t){void 0===v[e]&&(v[e]=t)}),a=window.location.href.split("/"),a.splice(a.length-1,1),a=a.join("/"),v.base=a+"/",i[m]=v,t.isMSIE()?(r.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%" id="'+m+'" name="'+m+'" tabindex="0"><param name="movie" value="'+o.src+'"><param name="allowfullscreen" value="true"><param name="allowscriptaccess" value="always"><param name="seamlesstabbing" value="true"><param name="wmode" value="'+g+'"><param name="bgcolor" value="#000000"></object>',e=e.getElementsByTagName("object")[0],e.style.outline="none"):(e=document.createElement("object"),e.setAttribute("type","application/x-shockwave-flash"),e.setAttribute("data",o.src),e.setAttribute("width","100%"),e.setAttribute("height","100%"),e.setAttribute("bgcolor","#000000"),e.setAttribute("id",m),e.setAttribute("name",m),e.className="jwswf",d(e,"allowfullscreen","true"),d(e,"allowscriptaccess","always"),d(e,"seamlesstabbing","true"),d(e,"wmode",g),r.parentNode.replaceChild(e,r)),u.config.aspectratio&&(e.style.position="absolute",e.style.left="0"),u.container=e,u.setPlayer(e,"flash")},this.supportsConfig=function(){if(p){if(!s)return!0;if("string"===t.typeOf(s.playlist))return!0;try{var e=s.playlist[0].sources;if(void 0===e)return!0;for(var n=0;n<e.length;n++)if(e[n].file&&a(e[n].file,e[n].type))return!0}catch(e){}}return!1},this.destroy=function(){}}).getVars=function(e){return i[e]};var a=e.embed.flashCanPlay=function(e,n){if(t.isYouTube(e,n)||t.isRtmp(e,n)||"hls"===n)return!0;var i=t.extensionmap[n?n:t.extension(e)];return!!i&&!!i.flash}}(jwplayer),function(e){var t,n=e.utils,i=n.extensionmap,a=e.events;e.embed.html5=function(i,r,o,s,l){function u(e,t,n){return function(){try{var a=document.querySelector("#"+i.id+" .jwmain");n&&a.appendChild(t),"function"==typeof e.resize&&(e.resize(a.clientWidth,a.clientHeight),setTimeout(function(){e.resize(a.clientWidth,a.clientHeight)},400)),t.left=a.style.left,t.top=a.style.top}catch(e){}}}var d=new a.eventdispatcher;n.extend(this,d),this.embed=function(){if(e.html5){s.setupPlugins(l,o,u),n.emptyElement(i);var t=e.utils.extend({},o);delete t.volume,t=new e.html5.player(t),l.setPlayer(t,"html5")}else this.loadEmbedder()},this.loadEmbedder=function(){t=t||new n.scriptloader(r.src),t.addEventListener(a.ERROR,this.loadError),t.addEventListener(a.COMPLETE,this.embed),t.load()},this.loadError=function(e){this.sendEvent(e.type,{message:"HTML5 player not found"})},this.supportsConfig=function(){if(e.vid.canPlayType)try{if("string"===n.typeOf(o.playlist))return!0;for(var t=o.playlist[0].sources,i=0;i<t.length;i++)if(e.embed.html5CanPlay(t[i].file,t[i].type,o.androidhls))return!0}catch(e){}return!1},this.destroy=function(){t&&(t.resetEventListeners(),t=null)}},e.embed.html5CanPlay=function(t,a,r){if(null!==navigator.userAgent.match(/BlackBerry/i)||n.isIE(9))return!1;if(n.isYouTube(t,a))return!0;var o=n.extension(t);if("hls"===(a=a||i.extType(o)))if(r){if((r=n.isAndroidNative)(2)||r(3)||r("4.0"))return!1;if(n.isAndroid())return!0}else if(n.isAndroid())return!1;if(n.isRtmp(t,a))return!1;if(!(t=i[a]||i[o])||t.flash&&!t.html5)return!1;var s;e:if(t=t.html5){try{s=!!e.vid.canPlayType(t);break e}catch(e){}s=!1}else s=!0;return s}}(jwplayer),function(e){var t=e.embed,n=e.embed.html5CanPlay,i=e.utils,a=e._,r=/\.(js|swf)$/;e.cast=e.cast||{},e.embed=i.extend(function(n){function a(){o="Adobe SiteCatalyst Error: Could not find Media Module"}var o,s=i.repo(),l=i.extend({},e.defaults),u=i.extend({},l,n.config),d=n.config,c=u.plugins,f=u.analytics,h=s+"jwpsrv.js",p=s+"sharing.js",m=s+"related.js",g=s+"gapro.js",l=e.key?e.key:l.key,v=new e.utils.key(l).edition(),c=c?c:{};switch("ads"==v&&u.advertising&&(r.test(u.advertising.client)?c[u.advertising.client]=u.advertising:c[s+u.advertising.client+".js"]=u.advertising),delete d.advertising,d.key=l,u.analytics&&r.test(u.analytics.client)&&(h=u.analytics.client),delete d.analytics,f&&!("ads"===v||"enterprise"===v)&&delete f.enabled,"free"!=v&&f&&!1===f.enabled||(c[h]=f?f:{}),delete c.sharing,delete c.related,v){case"ads":case"enterprise":if(d.sitecatalyst)try{window.s&&window.s.hasOwnProperty("Media")?new e.embed.sitecatalyst(n):a()}catch(e){a()}case"premium":u.related&&(r.test(u.related.client)&&(m=u.related.client),c[m]=u.related),u.ga&&(r.test(u.ga.client)&&(g=u.ga.client),c[g]=u.ga);case"pro":u.sharing&&(r.test(u.sharing.client)&&(p=u.sharing.client),c[p]=u.sharing),u.skin&&(d.skin=u.skin.replace(/^(beelden|bekle|five|glow|modieus|roundster|stormtrooper|vapor)$/i,i.repo()+"skins/$1.xml"))}return d.plugins=c,n.config=d,n=new t(n),o&&n.errorScreen(o),n},e.embed),e.embed.html5CanPlay=function(t,i){var r={file:t,type:i};return!!(e.html5&&e.html5.chooseProvider?e.html5.chooseProvider(r)!==e.html5.VideoProvider:a.any(e.unregisteredProviders,function(e){return e.supports(r)}))||n.apply(this,arguments)}}(jwplayer),function(e){var t=jwplayer.utils;e.sitecatalyst=function(e){function n(e){f.debug&&t.log(e)}function i(e){return e=e.split("/"),e=e[e.length-1],e=e.split("?"),e[0]}function a(){if(!p){p=!0;var e=c.getPosition();n("stop: "+o+" : "+e),s.Media.stop(o,e)}}function r(){m||(a(),m=!0,n("close: "+o),s.Media.close(o),d=!0,u=0)}var o,l,u,d,c=e,f=t.extend({},c.config.sitecatalyst),h={onPlay:function(){if(!d){var e=c.getPosition();p=!1,n("play: "+o+" : "+e),s.Media.play(o,e)}},onPause:a,onBuffer:a,onIdle:r,onPlaylistItem:function(e){try{d=!0,r(),u=0;var n;if(f.mediaName)n=f.mediaName;else{var a=c.getPlaylistItem(e.index);n=a.title?a.title:a.file?i(a.file):a.sources&&a.sources.length?i(a.sources[0].file):""}o=n,l=f.playerName?f.playerName:c.id}catch(e){t.log(e)}},onTime:function(){if(d){var e=c.getDuration();if(-1==e)return;m=p=d=!1,n("open: "+o+" : "+e+" : "+l),s.Media.open(o,e,l),n("play: "+o+" : 0"),s.Media.play(o,0)}if(e=c.getPosition(),3<=Math.abs(e-u)){var t=u;n("seek: "+t+" to "+e),n("stop: "+o+" : "+t),s.Media.stop(o,t),n("play: "+o+" : "+e),s.Media.play(o,e)}u=e},onComplete:r},p=!0,m=!0;t.foreach(h,function(e){c[e](h[e])})}}(jwplayer.embed),function(e){function t(e,t){e[t]&&(e[t]=n.getAbsolutePath(e[t]))}var n=e.utils,i=e._,a=window.location.href;e.cast.setupCastConfig=function(i,r){var o=n.extend({},i.config);o.cast=n.extend({pageUrl:a},r);for(var s="base autostart controls fallback fullscreen width height mobilecontrols modes playlistlayout playlistposition playlistsize primary stretching sharing related ga skin logo listbar events".split(" "),l=s.length;l--;)delete o[s[l]];s=o.plugins,delete o.plugins;for(var u in s)if(s.hasOwnProperty(u)){var d=s[u];if(d.client&&(/[\.\/]/.test(d.client)&&t(d,"client"),-1<d.client.indexOf("vast"))){if(l=o,d=n.extend({},d),d.client="vast",delete d.companiondiv,d.schedule){var c=void 0;for(c in d.schedule)d.schedule.hasOwnProperty(c)&&t(d.schedule[c].ad||d.schedule[c],"tag")}t(d,"tag"),l.advertising=d}}return i.position&&(o.position=i.position),0<i.item&&(o.item=i.item),o.captionLabel=n.getCookies().captionLabel,o.playerVersion=e.version,o},e.cast.setupFlashCastConfig=function(t){var a=t.config;a.playlist=t.getPlaylist();var r;return(r=i.find(a.plugins,function(e,t){return 0<t.indexOf("vast.js")}))?(r.client="vast",r={advertising:r}):r={},a=i.pick(a,"id captionLabel cast key playlist repeat".split(" ")),a.cast.pageUrl=window.location.href,n.extend(a,{playerVersion:e.version,captionLabel:n.getCookies().captionLabel,volume:t.getVolume(),mute:t.getMute(),id:t.id,position:t.getPosition(),item:t.getPlaylistIndex()},r),a}}(window.jwplayer),function(e,t){function n(e,t){e[t]&&(e[t]=a.getAbsolutePath(e[t]))}var i=t.cast,a=t.utils,r=t.events,o=r.state,s={};i.NS="urn:x-cast:com.longtailvideo.jwplayer",i.debug=!1,i.availability=null,i.available=function(t){t=t||i.availability;var n=e.chrome,a="available";return n.cast&&n.cast.ReceiverAvailability&&(a=n.cast.ReceiverAvailability.AVAILABLE),t===a},i.controller=function(l,u){function d(e,t){i.log("send command",e,t);var n={command:e};void 0!==t&&(n.args=t),N.sendMessage(i.NS,n,P,function(e){i.log("error message",e),"Invalid namespace"===e.description&&_()})}function c(e){e=!!i.available(e.availability),O.available!==e&&(O.available=e,m(r.JWPLAYER_CAST_AVAILABLE))}function f(e){i.log("existing session",e),!N&&!H&&(H=e.session,H.addMessageListener(i.NS,h))}function h(e,n){var a=JSON.parse(n);if(!a)throw"Message not proper JSON";if(a.reconcile){H.removeMessageListener(i.NS,h);var o=a.diff,s=H;o.id&&a.appid&&a.pageUrl||(o.id=t().id,a.appid=M.appid,a.pageUrl=L,H=N=null),o.id===l.id&&a.appid===M.appid&&a.pageUrl===L&&(N||(l.jwInstreamState()&&l.jwInstreamDestroy(!0),b(s),u.sendEvent(r.JWPLAYER_PLAYER_STATE,{oldstate:o.oldstate,newstate:o.newstate})),C(a)),H=null}}function p(e){O.active=!!e,e=O;var t;t=N&&N.receiver?N.receiver.friendlyName:"",e.deviceName=t,m(r.JWPLAYER_CAST_SESSION)}function m(e){var t=a.extend({},O);u.sendEvent(e,t)}function g(t){var n=e.chrome;t.code!==n.cast.ErrorCode.CANCEL&&(i.log("Cast Session Error:",t,N),t.code===n.cast.ErrorCode.SESSION_ERROR&&_())}function v(t){var n=e.chrome;t.code!==n.cast.ErrorCode.CANCEL&&(i.log("Cast Session Error:",t,N),t.code===n.cast.ErrorCode.SESSION_ERROR&&_())}function _(){N?(j(),N.stop(k,y),S({item:0}),C({type:"state",diff:{buffer:0,position:0,duration:0}})):k()}function y(e){i.error("Cast Session Stop error:",e,N),k()}function b(n){if(i.log("Session started:",n),N)_(),z=n;else{N=n,N.addMessageListener(i.NS,x),N.addUpdateListener(w),l.jwPause(!0),l.jwSetFullscreen(!1),B=u.getVideo(),D=u.volume,I=u.mute,F=new i.provider(d),F.init(),u.setVideoProvider(F),l.jwPlay=function(e){!1===e?F.pause():F.play()},l.jwPause=function(e){l.jwPlay(!!e)},l.jwLoad=function(e){"number"===a.typeOf(e)&&u.setItem(e),F.load(e)},l.jwPlaylistItem=function(e){"number"===a.typeOf(e)&&u.setItem(e),F.playlistItem(e)},l.jwPlaylistNext=function(){l.jwPlaylistItem(u.item+1)},l.jwPlaylistPrev=function(){l.jwPlaylistItem(u.item-1)},l.jwSetVolume=function(e){a.exists(e)&&(e=0|Math.min(Math.max(0,e),100),T(e)&&(e=Math.max(0,Math.min(e/100,1)),N.setReceiverVolumeLevel(e,E,function(e){i.error("set volume error",e),E()})))},l.jwSetMute=function(e){a.exists(e)||(e=!R.mute),A(e)&&N.setReceiverMuted(!!e,E,function(e){i.error("set muted error",e),E()})},l.jwGetVolume=function(){return 0|R.volume},l.jwGetMute=function(){return!!R.mute},l.jwIsBeforePlay=function(){return!1};var s=l.jwSetCurrentCaptions;l.jwSetCurrentCaptions=function(e){s(e),F.sendCommand("caption",e)},l.jwSkipAd=function(e){$&&($.skipAd(e),e=$.getAdModel(),e.complete=!0,u.sendEvent(r.JWPLAYER_CAST_AD_CHANGED,e))},l.jwClickAd=function(n){if($&&300<$.timeSinceClick()&&($.clickAd(n),u.state!==o.PAUSED)){var i={tag:n.tag};n.sequence&&(i.sequence=n.sequence),n.podcount&&(i.podcount=n.podcount),t(l.id).dispatchEvent(r.JWPLAYER_AD_CLICK,i),e.open(n.clickthrough)}},l.jwPlayAd=l.jwPauseAd=l.jwSetControls=l.jwForceState=l.jwReleaseState=l.jwSetFullscreen=l.jwDetachMedia=l.jwAttachMedia=P;var c=t(l.id).plugins;c.vast&&c.vast.jwPauseAd!==P&&(W={jwPlayAd:c.vast.jwPlayAd,jwPauseAd:c.vast.jwPauseAd},c.vast.jwPlayAd=c.vast.jwPauseAd=P),E(),p(!0),n!==H&&(F.setup(t.cast.setupCastConfig(u,M),u),t.cast.loader.sendDummyMedia(n))}}function w(e){i.log("Cast Session status",e),e?E():(F.sendEvent(r.JWPLAYER_PLAYER_STATE,{oldstate:u.state,newstate:o.BUFFERING}),k())}function k(){if(i.log("_sessionStopped"),N&&(j(),N=null),B){delete l.jwSkipAd,delete l.jwClickAd,l.initializeAPI();var e=t(l.id).plugins;e.vast&&a.extend(e.vast,W),u.volume=D,u.mute=I,u.setVideoProvider(B),u.duration=0,F&&(F.destroy(),F=null),$&&($.destroy(),$=null),u.state!==o.IDLE?a.isIPad()||a.isIPod()?(l.jwStop(!0),B.sendEvent(r.JWPLAYER_PLAYER_STATE,{oldstate:o.BUFFERING,newstate:o.IDLE})):(u.state=o.IDLE,l.jwPlay(!0),l.jwSeek(u.position)):B.sendEvent(r.JWPLAYER_PLAYER_STATE,{oldstate:o.BUFFERING,newstate:o.IDLE}),B=null}p(!1),null!==z&&(b(z),z=null)}function j(){N.removeUpdateListener(w),N.removeMessageListener(i.NS,x)}function x(e,t){var n=JSON.parse(t);if(!n)throw"Message not proper JSON";C(n)}function C(e){if("state"===e.type)$&&(e.diff.newstate||e.diff.position)&&($.destroy(),$=null,u.setVideoProvider(F),u.sendEvent(r.JWPLAYER_CAST_AD_CHANGED,{done:!0})),F.updateModel(e.diff,e.type),S(e.diff);else if("ad"===e.type){null===$&&($=new i.adprovider(i.NS,N),$.init(),u.setVideoProvider($)),$.updateModel(e.diff,e.type);var t=$.getAdModel();e.diff.clickthrough&&(t.onClick=l.jwClickAd),e.diff.skipoffset&&(t.onSkipAd=l.jwSkipAd),u.sendEvent(r.JWPLAYER_CAST_AD_CHANGED,t),e.diff.complete&&$.resetAdModel()}else"connection"===e.type?!0===e.closed&&_():i.error("received unhandled message",e.type,e)}function S(e){void 0!==e.item&&u.item!==e.item&&(u.item=e.item,u.sendEvent(r.JWPLAYER_PLAYLIST_ITEM,{index:u.item}))}function E(){if(N&&N.receiver){var e=N.receiver.volume;if(e){var t=100*e.level|0;A(!!e.muted),T(t)}}}function T(e){var t=R.volume!==e;return t&&(R.volume=e,F.sendEvent(r.JWPLAYER_MEDIA_VOLUME,{volume:e})),t}function A(e){var t=R.mute!==e;return t&&(R.mute=e,F.sendEvent(r.JWPLAYER_MEDIA_MUTE,{mute:e})),t}function P(){}var D,I,M,N=null,O={available:!1,active:!1,deviceName:""},R={volume:null,mute:null},L=a.getAbsolutePath(e.location.href),F=null,$=null,B=null;D=u.volume,I=u.mute;var H=null,z=null,W=null;M=a.extend({},s,u.cast),n(M,"loadscreen"),n(M,"endscreen"),n(M,"logo"),!M.appid||e.cast&&e.cast.receiver||(i.loader.addEventListener("availability",c),i.loader.addEventListener("session",f),i.loader.initialize(M.appid)),this.startCasting=function(){N||l.jwInstreamState()||e.chrome.cast.requestSession(b,g)},this.stopCasting=_,this.openExtension=function(){l.jwInstreamState()||e.chrome.cast.requestSession(b,v)}},i.log=function(){if(i.debug){var e=Array.prototype.slice.call(arguments,0);console.log.apply(console,e)}},i.error=function(){var e=Array.prototype.slice.call(arguments,0);console.error.apply(console,e)}}(window,jwplayer),function(e){function t(e){v.log("existing session",e),!g&&!p&&(p=e.session,p.addMessageListener(v.NS,n))}function n(t,i){var a=JSON.parse(i),r=p;if(!a)throw"Message not proper JSON";a.reconcile&&(p.removeMessageListener(v.NS,n),a.receiverFriendlyName=p.receiver.friendlyName,a.pageUrl&&a.diff.id&&a.appid||(a.pageUrl=j,a.diff.id=e().id,a.appid=h,p=g=null),w[a.diff.id]&&h===a.appid&&a.pageUrl===j&&(f=a.diff.id,h=a.appid,d(f,"jwInstreamDestroy"),o(r),d(f,k.message,a),p=null))}function i(){g&&(g.removeUpdateListener(u),g.removeMessageListener(v.NS,s),g.stop(a.bind(this),l.bind(this)),g=null),d(f,k.cleanup)}function a(){void 0!==m&&null!==m&&(o(m),m=null)}function r(e,t){g.sendMessage(v.NS,{command:e,args:t},_.noop,function(e){v.error("message send error",e)})}function o(t){var n=e(f);g?(i(),m=t):(g=t,g.addMessageListener(v.NS,s),g.addUpdateListener(u),n=e.cast.setupFlashCastConfig(n),p!==g&&(r("setup",n),e.cast.loader.sendDummyMedia(g)),d(f,k.connected,{receiverFriendlyName:t.receiver.friendlyName}))}function s(e,t){if(t){var n=JSON.parse(t);if(!n)throw"Message not proper JSON";d(f,k.message,n)}}function l(e){d(f,k.error,e||{})}function u(e){e?c():i()}function d(t,n,i){i?e(t).callInternal(n,i):e(t).callInternal(n)}function c(){if(g&&g.receiver){var t=g.receiver.volume;if(t){var n=100*t.level|0,t=!!t.muted;e(f).setVolume(n).setMute(t)}}}var f,h,p,m,g,v=e.cast,_=e.utils,y=e._,b=window.chrome||{},w={},k={},j=_.getAbsolutePath(window.location.href);v.NS="urn:x-cast:com.longtailvideo.jwplayer",v.flash={checkAvailability:function(e,n,i){k=i,h=n,w[e]=!0,v.loader.addEventListener("availability",function(t){"available"===t.availability&&d(e,k.available,t)}),v.loader.addEventListener("session",t),v.loader.initialize(n)},startCasting:function(e){f=e,b.cast.requestSession(o.bind(this),l.bind(this))},stopCasting:i,openExtension:function(e){f=e,b.cast.requestSession(o.bind(this),l.bind(this))},mute:function(e){g.setReceiverMuted(e,c,function(e){v.error("set muted error",e)})},volume:function(e){e=Math.max(0,Math.min(e/100,1)),g.setReceiverVolumeLevel(e,c,function(e){v.error("set volume error",e)})},messageReceiver:r,canCastItem:function(t){return y.any(t.levels,function(t){return e.embed.html5CanPlay(t.file,t.type)||"hls"===t.type})}}}(window.jwplayer),function(e,t){function n(e){var n=new t.cast.media.MediaInfo("");n.contentType="video/mp4",n=new t.cast.media.LoadRequest(n),n.autoplay=!1,e.loadMedia(n)}function i(){t&&t.cast&&t.cast.isAvailable&&!d.apiConfig?(d.apiConfig=new t.cast.ApiConfig(new t.cast.SessionRequest(p),s,l,t.cast.AutoJoinPolicy.ORIGIN_SCOPED),t.cast.initialize(d.apiConfig,o,r)):15>h++&&setTimeout(i,1e3)}function a(){u&&(u.resetEventListeners(),u=null)}function r(){d.apiConfig=null}function o(){}function s(e){m.sendEvent("session",{session:e}),e.sendMessage(d.NS,{whoami:1}),0===e.media.length&&n(e)}function l(e){d.availability=e,m.sendEvent("availability",{availability:e})}window.chrome=t;var u,d=e.cast,c=e.utils,f=e.events,h=0,p=null,m=c.extend({initialize:function(e){p=e,null!==d.availability?m.sendEvent("availability",{availability:d.availability}):t&&t.cast?i():u||(u=new c.scriptloader("https://www.gstatic.com/cv/js/sender/v1/cast_sender.js"),u.addEventListener(f.ERROR,a),u.addEventListener(f.COMPLETE,i),u.load())}},new f.eventdispatcher("cast.loader"));e.cast.loader=m,e.cast.loader.sendDummyMedia=n}(window.jwplayer,window.chrome||{}),function(e,t){var n=[],i=e.utils,a=e.events,r=e._,o=0,s=a.state,l="getBuffer getCaptionsList getControls getCurrentCaptions getCurrentQuality getCurrentAudioTrack getDuration getFullscreen getHeight getLockState getMute getPlaylistIndex getSafeRegion getPosition getQualityLevels getState getVolume getWidth isBeforeComplete isBeforePlay releaseState".split(" "),u="playlistNext stop forceState playlistPrev seek setCurrentCaptions setControls setCurrentQuality setVolume setCurrentAudioTrack".split(" "),d={onBufferChange:a.JWPLAYER_MEDIA_BUFFER,onBufferFull:a.JWPLAYER_MEDIA_BUFFER_FULL,onError:a.JWPLAYER_ERROR,onSetupError:a.JWPLAYER_SETUP_ERROR,onFullscreen:a.JWPLAYER_FULLSCREEN,onMeta:a.JWPLAYER_MEDIA_META,onMute:a.JWPLAYER_MEDIA_MUTE,onPlaylist:a.JWPLAYER_PLAYLIST_LOADED,onPlaylistItem:a.JWPLAYER_PLAYLIST_ITEM,onPlaylistComplete:a.JWPLAYER_PLAYLIST_COMPLETE,onReady:a.API_READY,onResize:a.JWPLAYER_RESIZE,onComplete:a.JWPLAYER_MEDIA_COMPLETE,onSeek:a.JWPLAYER_MEDIA_SEEK,onTime:a.JWPLAYER_MEDIA_TIME,onVolume:a.JWPLAYER_MEDIA_VOLUME,onBeforePlay:a.JWPLAYER_MEDIA_BEFOREPLAY,onBeforeComplete:a.JWPLAYER_MEDIA_BEFORECOMPLETE,onDisplayClick:a.JWPLAYER_DISPLAY_CLICK,onControls:a.JWPLAYER_CONTROLS,onQualityLevels:a.JWPLAYER_MEDIA_LEVELS,onQualityChange:a.JWPLAYER_MEDIA_LEVEL_CHANGED,onCaptionsList:a.JWPLAYER_CAPTIONS_LIST,onCaptionsChange:a.JWPLAYER_CAPTIONS_CHANGED,onAdError:a.JWPLAYER_AD_ERROR,onAdClick:a.JWPLAYER_AD_CLICK,onAdImpression:a.JWPLAYER_AD_IMPRESSION,onAdTime:a.JWPLAYER_AD_TIME,onAdComplete:a.JWPLAYER_AD_COMPLETE,onAdCompanions:a.JWPLAYER_AD_COMPANIONS,onAdSkipped:a.JWPLAYER_AD_SKIPPED,onAdPlay:a.JWPLAYER_AD_PLAY,onAdPause:a.JWPLAYER_AD_PAUSE,onAdMeta:a.JWPLAYER_AD_META,onCast:a.JWPLAYER_CAST_SESSION,onAudioTrackChange:a.JWPLAYER_AUDIO_TRACK_CHANGED,onAudioTracks:a.JWPLAYER_AUDIO_TRACKS},c={onBuffer:s.BUFFERING,onPause:s.PAUSED,onPlay:s.PLAYING,onIdle:s.IDLE};e.api=function(o){function f(e,t){i.foreach(e,function(e,n){y[e]=function(e){return t(n,e)}})}function h(e,t){var n="jw"+t.charAt(0).toUpperCase()+t.slice(1);y[t]=function(){var t=g.apply(this,[n].concat(Array.prototype.slice.call(arguments,0)));return e?y:t}}function p(e,t){try{e.jwAddEventListener(t,'function(dat) { jwplayer("'+y.id+'").dispatchEvent("'+t+'", dat); }')}catch(e){if("flash"===y.renderingMode){var n=document.createElement("a");n.href=v.data,n.protocol!==location.protocol&&i.log("Warning: Your site ["+location.protocol+"] and JWPlayer ["+n.protocol+"] are hosted using different protocols")}i.log("Could not add internal listener")}}function m(e,t){return b[e]||(b[e]=[],v&&k&&p(v,e)),b[e].push(t),y}function g(){if(k){if(v){var e=Array.prototype.slice.call(arguments,0),t=e.shift();if("function"==typeof v[t]){switch(e.length){case 6:return v[t](e[0],e[1],e[2],e[3],e[4],e[5]);case 5:return v[t](e[0],e[1],e[2],e[3],e[4]);case 4:return v[t](e[0],e[1],e[2],e[3]);case 3:return v[t](e[0],e[1],e[2]);case 2:return v[t](e[0],e[1]);case 1:return v[t](e[0])}return v[t]()}}return null}j.push(arguments)}var v,_,y=this,b={},w={},k=!1,j=[],x={},C={};return y.container=o,y.id=o.id,y.setup=function(t){if(e.embed){e.api.destroyPlayer(y.id);var n=new e.api(y.container);return e.api.addPlayer(n),n.config=t,n._embedder=new e.embed(n),n._embedder.embed(),n}return y},y.getContainer=function(){return y.container},y.addButton=function(e,t,n,a){try{C[a]=n,g("jwDockAddButton",e,t,'jwplayer("'+y.id+'").callback("'+a+'")',a)}catch(e){i.log("Could not add dock button"+e.message)}},y.removeButton=function(e){g("jwDockRemoveButton",e)},y.callback=function(e){C[e]&&C[e]()},y.getMeta=function(){return y.getItemMeta()},y.getPlaylist=function(){var e=g("jwGetPlaylist");return"flash"===y.renderingMode&&i.deepReplaceKeyName(e,["__dot__","__spc__","__dsh__","__default__"],["."," ","-","default"]),e},y.getPlaylistItem=function(e){return i.exists(e)||(e=y.getPlaylistIndex()),y.getPlaylist()[e]},y.getRenderingMode=function(){return y.renderingMode},y.setFullscreen=function(e){return i.exists(e)?g("jwSetFullscreen",e):g("jwSetFullscreen",!g("jwGetFullscreen")),y},y.setMute=function(e){return i.exists(e)?g("jwSetMute",e):g("jwSetMute",!g("jwGetMute")),y},y.lock=function(){return y},y.unlock=function(){return y},y.load=function(t){return g("jwInstreamDestroy"),e(y.id).plugins.googima&&g("jwDestroyGoogima"),g("jwLoad",t),y},y.playlistItem=function(e){return g("jwPlaylistItem",parseInt(e,10)),y},y.resize=function(e,t){if("flash"!==y.renderingMode)g("jwResize",e,t);else{var n=document.getElementById(y.id+"_wrapper"),a=document.getElementById(y.id+"_aspect");a&&(a.style.display="none"),n&&(n.style.display="block",n.style.width=i.styleDimension(e),n.style.height=i.styleDimension(t))}return y},y.play=function(e){if(e!==t)return g("jwPlay",e),y;e=y.getState();var n=_&&_.getState();return n&&g(n===s.IDLE||n===s.PLAYING||n===s.BUFFERING?"jwInstreamPause":"jwInstreamPlay"),g(e===s.PLAYING||e===s.BUFFERING?"jwPause":"jwPlay"),y},y.pause=function(e){return e===t?(e=y.getState(),g(e===s.PLAYING||e===s.BUFFERING?"jwPause":"jwPlay")):g("jwPause",e),y},y.createInstream=function(){return new e.api.instream(this,v)},y.setInstream=function(e){return _=e},y.loadInstream=function(e,t){return _=y.setInstream(y.createInstream()).init(t),_.loadItem(e),_},y.destroyPlayer=function(){k=!0,g("jwPlayerDestroy")},y.playAd=function(t){var n=e(y.id).plugins;n.vast?n.vast.jwPlayAd(t):g("jwPlayAd",t)},y.pauseAd=function(){var t=e(y.id).plugins;t.vast?t.vast.jwPauseAd():g("jwPauseAd")},f(c,function(e,t){return w[e]||(w[e]=[],m(a.JWPLAYER_PLAYER_STATE,function(t){var n=t.newstate;if(t=t.oldstate,n===e){var i=w[n];if(i)for(var a=0;a<i.length;a++){var r=i[a];"function"==typeof r&&r.call(this,{oldstate:t,newstate:n})}}})),w[e].push(t),y}),f(d,m),i.foreach(l,function(e,t){h(!1,t)}),i.foreach(u,function(e,t){h(!0,t)}),y.remove=function(){this._embedder&&this._embedder.destroy&&this._embedder.destroy(),j=[];var e=1<r.size(r.where(n,{id:y.id}));e||i.clearCss("#"+y.id);var t=document.getElementById(y.id+("flash"===y.renderingMode?"_wrapper":""));if(t){if("html5"===y.renderingMode)y.destroyPlayer();else if(i.isMSIE(8)){var a=document.getElementById(y.id);if(a&&a.parentNode){a.style.display="none";for(var o in a)"function"==typeof a[o]&&(a[o]=null);a.parentNode.removeChild(a)}}e||(e=document.createElement("div"),e.id=y.id,t.parentNode.replaceChild(e,t))}n=r.filter(n,function(e){return e.uniqueId!==y.uniqueId})},y.registerPlugin=function(t,n,i,a){e.plugins.registerPlugin(t,n,i,a)},y.setPlayer=function(e,t){v=e,y.renderingMode=t},y.detachMedia=function(){if("html5"===y.renderingMode)return g("jwDetachMedia")},y.attachMedia=function(e){if("html5"===y.renderingMode)return g("jwAttachMedia",e)},y.getAudioTracks=function(){return g("jwGetAudioTracks")},y.removeEventListener=function(e,t){var n=b[e];if(n)for(var i=n.length;i--;)n[i]===t&&n.splice(i,1)},y.dispatchEvent=function(e,t){var n=b[e];if(n)for(var n=n.slice(0),r=i.translateEventResponse(e,t),o=0;o<n.length;o++){var s=n[o];if("function"==typeof s)try{e===a.JWPLAYER_PLAYLIST_LOADED&&i.deepReplaceKeyName(r.playlist,["__dot__","__spc__","__dsh__","__default__"],["."," ","-","default"]),s.call(this,r)}catch(e){i.log("There was an error calling back an event handler",e)}}},y.dispatchInstreamEvent=function(e){_&&_.dispatchEvent(e,arguments)},y.callInternal=g,y.playerReady=function(e){for(k=!0,v||y.setPlayer(document.getElementById(e.id)),y.container=document.getElementById(y.id),i.foreach(b,function(e){p(v,e)}),m(a.JWPLAYER_PLAYLIST_ITEM,function(){x={}}),m(a.JWPLAYER_MEDIA_META,function(e){i.extend(x,e.metadata)}),m(a.JWPLAYER_VIEW_TAB_FOCUS,function(e){var t=y.getContainer();!0===e.hasFocus?i.addClass(t,"jw-tab-focus"):i.removeClass(t,"jw-tab-focus")}),y.dispatchEvent(a.API_READY);0<j.length;)g.apply(y,j.shift())},y.getItemMeta=function(){return x},y},e.playerReady=function(t){var n=e.api.playerById(t.id);n||(n=e.api.selectPlayer(t.id)),n.playerReady(t)},e.api.selectPlayer=function(t){var a;return i.exists(t)||(t=0),t.nodeType?a=t:"string"==typeof t&&(a=document.getElementById(t)),a?(t=e.api.playerById(a.id))?t:new e.api(a):"number"==typeof t?n[t]:null},e.api.playerById=function(e){for(var t=0;t<n.length;t++)if(n[t].id===e)return n[t];return null},e.api.addPlayer=function(e){for(var t=0;t<n.length;t++)if(n[t]===e)return e;return o++,e.uniqueId=o,n.push(e),e},e.api.destroyPlayer=function(e){e=r.where(n,{id:e}),r.each(e,r.partial(r.result,r,"remove"))}}(window.jwplayer),function(e){var t=e.events,n=e.utils,i=t.state;e.api.instream=function(e,a){function r(t,n){return u[t]||(u[t]=[],a.jwInstreamAddEventListener(t,'function(dat) { jwplayer("'+e.id+'").dispatchInstreamEvent("'+t+'", dat); }')),u[t].push(n),this}function o(e,n){return d[e]||(d[e]=[],r(t.JWPLAYER_PLAYER_STATE,function(t){var n=t.newstate,i=t.oldstate;if(n===e){var a=d[n];if(a)for(var r=0;r<a.length;r++){var o=a[r];"function"==typeof o&&o.call(this,{oldstate:i,newstate:n,type:t.type})}}})),d[e].push(n),this}var s,l,u={},d={},c=this;c.type="instream",c.init=function(){return e.callInternal("jwInitInstream"),c},c.loadItem=function(t,i){s=t,l=i||{},"array"===n.typeOf(t)?e.callInternal("jwLoadArrayInstream",s,l):e.callInternal("jwLoadItemInstream",s,l)},c.removeEvents=function(){u=d={}},c.removeEventListener=function(e,t){var n=u[e];if(n)for(var i=n.length;i--;)n[i]===t&&n.splice(i,1)},c.dispatchEvent=function(e,t){var i=u[e];if(i)for(var i=i.slice(0),a=n.translateEventResponse(e,t[1]),r=0;r<i.length;r++){var o=i[r];"function"==typeof o&&o.call(this,a)}},c.onError=function(e){return r(t.JWPLAYER_ERROR,e)},c.onMediaError=function(e){return r(t.JWPLAYER_MEDIA_ERROR,e)},c.onFullscreen=function(e){return r(t.JWPLAYER_FULLSCREEN,e)},c.onMeta=function(e){return r(t.JWPLAYER_MEDIA_META,e)},c.onMute=function(e){return r(t.JWPLAYER_MEDIA_MUTE,e)},c.onComplete=function(e){return r(t.JWPLAYER_MEDIA_COMPLETE,e)},c.onPlaylistComplete=function(e){return r(t.JWPLAYER_PLAYLIST_COMPLETE,e)},c.onPlaylistItem=function(e){return r(t.JWPLAYER_PLAYLIST_ITEM,e)},c.onTime=function(e){return r(t.JWPLAYER_MEDIA_TIME,e)},c.onBuffer=function(e){return o(i.BUFFERING,e)},c.onPause=function(e){return o(i.PAUSED,e)},c.onPlay=function(e){return o(i.PLAYING,e)},c.onIdle=function(e){return o(i.IDLE,e)},c.onClick=function(e){return r(t.JWPLAYER_INSTREAM_CLICK,e)},c.onInstreamDestroyed=function(e){return r(t.JWPLAYER_INSTREAM_DESTROYED,e)},c.onAdSkipped=function(e){return r(t.JWPLAYER_AD_SKIPPED,e)},c.play=function(e){a.jwInstreamPlay(e)},c.pause=function(e){a.jwInstreamPause(e)},c.hide=function(){e.callInternal("jwInstreamHide")},c.destroy=function(){c.removeEvents(),e.callInternal("jwInstreamDestroy")},c.setText=function(e){a.jwInstreamSetText(e?e:"")},c.getState=function(){return a.jwInstreamState()},c.setClick=function(e){a.jwInstreamClick&&a.jwInstreamClick(e)}}}(jwplayer),function(e){var t=e.api,n=t.selectPlayer,i=e._;t.selectPlayer=function(t){var i=n.apply(this,arguments);return i?i:{registerPlugin:function(t,n,i){"jwpsrv"!==t&&e.plugins.registerPlugin(t,n,i)}}},e.unregisteredProviders=[],t.registerProvider=function(t){e&&e.html5&&i.isFunction(e.html5.registerProvider)?e.html5.registerProvider(t):e.unregisteredProviders.push(t)}}(jwplayer))},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(3),s=i(o),l=n(2),u=i(l),d=n(20),c=i(d),f=n(12),h=n(5);(0,r.default)(function(){(0,r.default)("#js-discovery-expand").click(function(e){e.preventDefault(),(0,r.default)("#NS_discovery_overlay").trigger("discovery_overlay:open")})});var p=function(e){var t=e.data("category"),n=(0,r.default)('.js-discovery-subcat-list[data-category="'+t+'"]');(0,r.default)(".js-discovery-category").removeClass("navy-700_40"),e.removeClass("js-open"),n.addClass("h0 o0p translate-y-3 visibility-hidden").removeClass("h-auto mb2 transition-all transition-delay-100 transition-300"),e.attr("aria-selected",!1),n.attr("aria-hidden",!0)},m=function(e){var t=e.data("category"),n=(0,r.default)('.js-discovery-subcat-list[data-category="'+t+'"]');(0,h.track)("Expanded Discovery Filter",{type:"category",selected_link:t}),(0,r.default)(".js-discovery-category").addClass("navy-700_40"),e.addClass("js-open").removeClass("navy-700_40"),n.addClass("h-auto mb2 transition-all transition-delay-100 transition-300").removeClass("h0 o0p translate-y-3 visibility-hidden"),e.attr("aria-selected",!0),n.attr("aria-hidden",!1)},g=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=(0,r.default)("#js-discovery-expand");t&&(0,h.track)("Closed Discovery Filter"),(0,r.default)("#js-discovery-overlay").scrollTop(0),e.addClass("hide"),(0,r.default)("html").removeClass("clip"),_(e),e.aria_set_hidden(),n.attr("aria-expanded",!1),n.focus()},v=function(e){setTimeout(function(){window.requestAnimationFrame(function(){e.find(".js-col-fade").removeClass("o0p translate-y22"),e.find("#js-discovery-overlay").addClass("bg-grey-100").removeClass("bg-grey-100_0"),e.find("#js-overlay-exit").removeClass("o0p")})},0)},_=function(e){e.find(".js-col-fade").addClass("o0p translate-y22").removeClass("translate-y0"),e.find("#js-discovery-overlay").addClass("bg-grey-100_0").removeClass("bg-grey-100"),e.find("#js-overlay-exit").addClass("o0p"),c.default["not-touchable"]&&(e.find("#js-do-locked-header").removeClass("fixed t0"),e.find("#js-do-content-start").css("margin-top",""))},y=function(e){if(c.default["not-touchable"]){var t=e.find(".js-collection-header"),n=(0,r.default)(t[1]).outerHeight();t.slice(1).each(function(e,t){var i=(0,r.default)(t),a=i.data("offset-top"),o=i.parents(".js-add-fixed-here"),s=o.next(".js-add-padding-here");o.prev(".js-position-marker").offset().top<=a?(o.addClass("fixed").css("top",a),s.css("padding-top",n+"px")):(o.removeClass("fixed").css("top",""),s.css("padding-top","0px"))})}},b=function(e,t,n){var i=e.find("#js-do-content-start");t.addClass("fixed t0"),i.css("margin-top",n+"px")},w=function(e){var t=e.find(".js-categories-container"),n=t.find(".js-discovery-category"),i=parseInt(t.css("padding-top"));n.each(function(e,t){var n=(0,r.default)(t).offset().top-i;(0,r.default)(t).attr("data-offset-mobile",n)})};(0,u.default)("#NS_discovery_overlay",function(e){var t=e.find("#js-overlay-exit"),n=e.find("#js-discovery-overlay");(0,r.default)("#NS_discovery_overlay").on("discovery_overlay:open",function(t){t.preventDefault();var n=(0,r.default)(this),i=(0,r.default)("#js-discovery-expand");(0,h.track)("Viewed Discovery Filters"),n.removeClass("hide"),(0,r.default)("html").addClass("clip"),v(e),y(e),n.aria_set_visible(),i.attr("aria-expanded",!0),(0,r.default)(window).on("keydown",function(t){t.which===f.ESC&&((0,r.default)(window).off("keydown"),g(e))})}),(0,r.default)("#js-discovery-overlay").on("scroll",s.default.debounce(function(){y(e)},2)),(0,r.default)(".js-col-fade").on("transitionend",function(t){if(t.target===this&&"transform"===t.originalEvent.propertyName){var n=e.find(".js-collection-header"),i=(0,r.default)(n[1]).outerHeight(),a=e.find("#js-do-locked-header"),o=a.outerHeight();n.slice(1).each(function(e,t){var n=o+e*i,a=(0,r.default)(t).offset().top-n;(0,r.default)(t).attr("data-offset-top",n),(0,r.default)(t).attr("data-section-start",a)}),c.default["not-touchable"]&&b(e,a,o),w(e),(0,r.default)("#js-do-focusguard-1").focus()}}),(0,r.default)("#NS_discovery_overlay").on("click",function(t){t.preventDefault();var i=e.find(".js-open"),a=i.data("category");if((0,r.default)(t.target).hasClass("js-discovery-category")){var o=(0,r.default)(t.target);return a===o.data("category")?void p(o):(p(i),c.default.touchable&&n.scrollTo(o.data("offset-mobile")),void m(o))}i.length>0&&p(i)}),(0,r.default)(".js-collection-header").on("click",function(){if(c.default["not-touchable"]){var e=(0,r.default)(this).parents("#js-do-locked-header").length>0,t=e?0:(0,r.default)(this).data("section-start");n.scrollTo(t,200)}}),t.on("click",function(t){t.stopPropagation(),t.preventDefault(),g(e)}),(0,r.default)(".js-do-link").on("click",function(e){e.stopPropagation(),(0,h.track)("Selected Discovery Filter",{type:(0,r.default)(this).data("type"),selected_link:(0,r.default)(this).data("selected-link")})}),(0,r.default)(window).on("pageshow",function(t){t.originalEvent.persisted&&g(e,!1)})})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseWithFormat=t.parseWithFormatAndLocale=void 0;var i=function(){function e(e,t){var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=n(6),r=function(e){return e&&e.__esModule?e:{default:e}}(a),o=function(e,t){var n=t.split(e),a=i(n,3),r=a[0];return a[1]+"/"+r+"/"+a[2]},s={l:{de:function(e){return o(".",e)},en:function(e){return e},es:function(e){return o("/",e)},fr:function(e){return o("/",e)}},"l LT":{de:function(e){var t=e.split(" "),n=i(t,2),a=n[0],r=n[1];return o(".",a)+" "+r},en:function(e){return e},es:function(e){var t=e.split(" "),n=i(t,2),a=n[0],r=n[1];return o("/",a)+" "+r},fr:function(e){var t=e.split(" "),n=i(t,2),a=n[0],r=n[1];return o("/",a)+" "+r}}},l=t.parseWithFormatAndLocale=function(e,t,n){return(0,r.default)(s[t][e](n))};t.parseWithFormat=function(e,t){return l(window.I18n.locale,t,e)}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(3),s=i(o),l=n(13),u=n(1),d=i(u),c=n(198),f=i(c),h=n(152);n(9),n(33),n(25),n(34),n(53),n(55),n(30),(0,r.default)(".field.search.location-search").livequery(function(){var e=(0,r.default)(this);e.on("livesearch_selector:select",function(){(0,r.default)(this).siblings("span.input-tip").hide(),(0,r.default)(this).parent().siblings("span.input-tip").hide(),(0,r.default)(this).trigger("shifted")}),e.on("livesearch_selector:unselect",function(){(0,r.default)(this).siblings("span.input-tip").show(),(0,r.default)(this).parent().siblings("span.input-tip").show(),(0,r.default)(this).trigger("shifted")}),e.livesearch_selector({url:e.data("searchUrl"),cancel_copy:"",process_data:function(){return{term:this.$elem.val()}},process_results:function(e){return s.default.map(e.locations,function(e){return[e.short_name,e.id]})}})}),(0,r.default)("input.date").livequery(function(){var e=(0,r.default)(this),t=e.val(),n=e.closest(".js-date-field").find(".js-hidden-calendar-input");n.val(t?(0,l.format)("YYYY-MM-DD",t):""),e.datetime_picker_field({calendar:{allow_deselect:!1,previous_month_text:"<",next_month_text:">"},class_name:"absolute z_top",parse_callback:function(e){var t=(0,h.parseWithFormat)(e,"l");return(0,f.default)(t)?t:void 0},format_callback:function(e){return n.val(e?(0,l.format)("YYYY-MM-DD",e):""),e?(0,l.format)("l",e):""}})}),(0,r.default)("input.datetime").livequery(function(){var e=(0,r.default)(this),t=e.data("options")||{};e.datetime_picker_field(r.default.extend(!0,{calendar:{allow_deselect:!1,previous_month_text:"<",next_month_text:">",time_text:d.default.t("onloads.initializers.forms.Time")},class_name:"absolute z_top",position:e.is(".position_calendar_below")?"bottom":"right",parse_callback:function(e){var t=(0,h.parseWithFormat)(e,"l LT");return(0,f.default)(t)?t:void 0},format_callback:function(t){return e.closest(".js-datetime-field").find(".js-hidden-calendar-input").val(t?(0,l.formatWithLocale)("en","YYYY-MM-DD HH:mm:ss Z",t):""),t?(0,l.format)("l LT",t):""}},t))}),(0,r.default)(".js-calendar-picker").livequery(function(){var e,t=(0,r.default)(this),n=t.find('input[type="hidden"]'),i=t.find(".calendar"),a=i.data("options")||{};i.on("calendar_date_picker:date_selected",function(e,t){t?n.val((0,l.format)("YYYY-MM-DD HH:mm:ss Z",t)):n.val(""),n.trigger("change")}),""!==n.val()&&(e=new Date(n.val())),i.calendar_date_picker(s.default.extend({allow_deselect:!1,previous_month_text:"<",next_month_text:">",time_text:d.default.t("onloads.initializers.forms.Time"),selected_date:e},a)).data("calendar_date_picker")}),(0,r.default)("form ul.js-sortable, form ol.js-sortable, form tbody.js-sortable").livequery(function(){var e=(0,r.default)(this),t=!1;e.find(".move").length&&(t=".move"),e.find(".move").click(function(e){e.preventDefault()}),e.sortable({containment:"document",axis:"y",handle:t,update:function(){e.find("input.position").each(function(e){(0,r.default)(this).val(e+1)})}}),e.closest("form").submit(function(){e.find("input.position").each(function(e){(0,r.default)(this).val(e+1)})})})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);(0,a.default)(function(){(0,a.default)(document).on("mouseover","li.menu-dropdown",function(){(0,a.default)(this).find(".menu-submenu").show()}),(0,a.default)(document).on("mouseout","li.menu-dropdown",function(){(0,a.default)(this).find(".menu-submenu").hide()}),(0,a.default)(document).on("click",".hit-list li",function(){var e=(0,a.default)(this).find("a.target");e.length&&(window.location=e.attr("href"))})})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestId=void 0;var i=n(23),a=function(e){return e&&e.__esModule?e:{default:e}}(i),r=n(10),o=t.requestId=function(e){return a.default.fromNullable(e.documentElement.dataset).chain((0,r.maybeProp)("requestId")).chain(function(e){return a.default.fromNullable("__REQUEST_ID_MIDDLEWARE_SWAP_TOKEN__"===e?null:e)}).getOrElse(null)};window.request_id=o(document)},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);n(9);var r;(0,a.default)(document).on("livesearch:results",function(e,t){var n,i=(0,a.default)(e.target).val();n=t.projects?t.projects.length:t.length,r=(0,a.default)(e.target).attr("data-tracker-name"),"undefined"!=typeof ga&&ga("send","event",r,"Term",i,parseInt(n,10))});var o;(0,a.default)(document).on("livesearch:searching",function(){o=!0}),(0,a.default)(document).on("livesearch:cancel",function(){o&&("undefined"!=typeof ga&&ga("send","event",r,"Cancels"),o=!1)}),(0,a.default)(document).ready(function(){(0,a.default)(".home-editorial-title").on("click",function(){var e=(0,a.default)(this).html();"undefined"!=typeof ga&&ga("send","event","Faux-Category on Homepage Clicks",e)})}),(0,a.default)(document).ready(function(){(0,a.default)(".export").find("a").on("click",function(){"undefined"!=typeof ga&&ga("send","event","Export Reward Report","Download Click")})}),(0,a.default)(document).ready(function(){(0,a.default)("#results_properties").livequery(function(){var e=(0,a.default)(this).children("#number_of_results").text(),t=(0,a.default)(this).children("#term").text();"undefined"!=typeof ga&&ga("send","event","Search Results","Term",t,parseInt(e,10))})}),(0,a.default)(document).ready(function(){(0,a.default)("#pledges_login_or_signup #growl_section .error").livequery(function(){var e=(0,a.default)(this).children(".message").html(),t=(0,a.default)(document).attr("URL");"undefined"!=typeof ga&&ga("send","event","Checkout Login Errors",e,t)}),(0,a.default)("#checkout-signup .fieldset-errors").livequery(function(){var e=(0,a.default)(this).children("ul").children(),t=(0,a.default)(document).attr("URL");a.default.each(e,function(e,n){n=n.innerHTML,"undefined"!=typeof ga&&ga("send","event","Checkout Signup Errors",n,t)})}),(0,a.default)("#sessions_new #growl_section .error").livequery(function(){var e=(0,a.default)(this).children(".message").html(),t=(0,a.default)(document).attr("URL");"undefined"!=typeof ga&&ga("send","event","Regular Login Errors",e,t)}),(0,a.default)("#new_user .fieldset-errors").livequery(function(){var e=(0,a.default)(this).children("ul").children(),t=(0,a.default)(document).attr("URL");a.default.each(e,function(e,n){n=n.innerHTML,"undefined"!=typeof ga&&ga("send","event","Regular Signup Errors",n,t)})})}),(0,a.default)(document).ready(function(){(0,a.default)(".share-box").on("click","a",function(){var e=(0,a.default)(this).attr("data-tracker-name");"undefined"!=typeof ga&&ga("send","event","Sharing",e)}),(0,a.default)("#checkout-project-share").on("click","a",function(){var e=(0,a.default)(this).attr("data-tracker-name");"undefined"!=typeof ga&&ga("send","event","Sharing",e)}),(0,a.default)(document).on("click",".clipster",function(){"undefined"!=typeof ga&&ga("send","event","Sharing","Copied Link")}),(0,a.default)(document).on("fb:loaded",function(){FB.Event.subscribe("edge.create",function(){"undefined"!=typeof ga&&ga("send","event","Sharing","Facebook Like")})})}),(0,a.default)(function(){function e(e){e.addModelListener("TIME","timeStats"),e.addModelListener("STATE","getState")}var t,n,i;(0,a.default)("#video-section object").livequery(function(){t=(0,a.default)(this)[0],n=(0,a.default)(document).attr("URL")}),(0,a.default)(document).on("click","#video-section",function(){n=(0,a.default)(document).attr("URL"),t&&(i="Project Page Video",e(t))}),(0,a.default)(window).on("beforeunload",function(){})}),(0,a.default)(document).on("modal_dialog:opened",function(e){var t=(0,a.default)(e.target),n=t.find(".modal_dialog_head h4").text();"undefined"!=typeof ga&&ga("send","event","Modal Dialog","Opened",n)}),(0,a.default)(document).ready(function(){(0,a.default)(".faq-question a").click(function(){var e=(0,a.default)("body[id]").length?(0,a.default)("body").attr("id"):"No ID",t=(0,a.default)(this).closest(".faq"),n=(0,a.default)(this).find(".question").text();"undefined"==typeof ga||t.hasClass("expanded")||ga("send","event","FAQ","Expanded - "+e,n)})}),(0,a.default)(document).ready(function(){(0,a.default)(document).on("click","a#edit_survey_response",function(){"undefined"!=typeof ga&&ga("send","event","Surveys","Click","Edit Survey Response")})}),(0,a.default)(document).ready(function(){(0,a.default)(document).on("click","ul#admin-menu > li > a",function(){"undefined"!=typeof ga&&ga("send","event","Admin","Nav Click",(0,a.default)(this).text())})}),(0,a.default)(document).ready(function(){var e=0;(0,a.default)(".scissors").on("click",function(){e<2?("undefined"!=typeof ga&&ga("send","event","Scissors","Clicks"),e+=1):"undefined"!=typeof ga&&ga("send","event","Scissors","Chops")})}),(0,a.default)(document).ready(function(){var e=1;(0,a.default)(document).on("infinite_scroll:scrolled_to",function(t,n){if(n>e){var i=window.location.pathname+window.location.search+window.location.hash;"undefined"!=typeof ga&&ga("send","pageview",i),e=n}})})},function(e,t,n){"use strict";var i=(n(0),n(0));!function(){i.fn.composed=function(e,t){var n=i(this);return void 0===n.data("topics")&&n.data("topics",{}),(n.data("topics")[e]||[]).reduce(function(e,t){return t.call(i,e)},t)},i.fn.composable=function(e,t){var n=i(this);return void 0===n.data("topics")&&n.data("topics",{}),n.data("topics")[e]||(n.data("topics")[e]=[]),n.data("topics")[e].push(t),[e,t]}}()},function(e,t,n){"use strict";var i=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(i);n(41);var r=n(0);n(0);!function(e){e.fn.confirm_submit=function(t){return t=t||{},e(this).each(function(){var n=e(this);n.on("submit.confirm_submit",function(i){i.preventDefault();var r=t.copy||a.default.t("library.confirm_submit.Really_buddy"),o='<div class="modal_delete_confirmation"><p class="copy">'+r+'</p><div class="buttons"><a href="#" class="yes btn btn--green">'+(t.yes_copy||a.default.t("library.confirm_submit.Yes"))+'</a><a href="#" class="no btn btn--gray">'+(t.no_copy||a.default.t("library.confirm_submit.No_Thanks"))+"</a></div></div>",s=e.create_modal_dialog(t.title||"Are you sure?",o);n.removeClass("submitting-non-ajax"),s.find("a.yes").on("click",function(e){e.preventDefault(),n.off("submit.confirm_submit"),t.on_confirm_submit&&t.on_confirm_submit(),n[0].submit()}),s.find("a.no").on("click",function(t){t.preventDefault(),e(this).trigger("close")}),s.data("modal_dialog").open()})})}}(r)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(7),r=i(a),o=n(1),s=i(o),l=(n(0),n(0));!function(){l.fn.in_place_editor=function(){return l(this).each(function(){function e(){u.css("fontSize",n.css("fontSize")),n.hide(),i.removeClass("inactive"),u.focus()}function t(){i.addClass("inactive"),n.show()}var n=l(this),i=n.next("form.in_place_editor"),a=i.find(".js-in-place-editor-cancel"),o=n.siblings(".trigger_editor")||n,u=i.find("input.text"),d=!1;o.on("click",function(){e()}),a.on("click",function(){u.val(n.text()),t()}),i.on("submit",function(e){e.preventDefault(),d||(i.addClass("submitting"),d=!0,l.ajax({url:i.attr("action").replace(/(\.\w+)?$/,".js"),data:i.serialize(),type:"POST",complete:function(){i.removeClass("submitting"),d=!1},success:function(){var e=u.val();n.html(e),t(),d=!1,i.siblings(".clipster").data("text",e)},error:function(e){var t=JSON.parse(e.responseText),n="<p>"+s.default.t("library.in_place_editor.Oops_there_was_a_problem_with_your_submission");i.removeClass("submitting"),d=!1,t.errors?(n+=":<br/>"+l.map(t.errors,function(e,t){return t+": "+e}),n+="</p>"):n+=". "+s.default.t("library.in_place_editor.Please_refresh_the_page_before_trying_again")+"</p>",(0,r.default)({error:l(n).html()})}}))})})}}(),function(){l("span.in_place_editor").in_place_editor()}()},function(e,t,n){"use strict";n(48),n(35);var i=n(0);n(0);!function(e){function t(e,t){this.$elem=e,this.options=t,this.total_elements=e.find(t.items).length,e.serialScroll(t),this.bind_events()}e.fn.infinite_carousel=function(n){return n=n||{},e(this).each(function(){var i=e(this).data("infinite_carousel");i||(i=new t(e(this),n),e(this).data("infinite_carousel",i))})},e.extend(t.prototype,{bind_events:function(){var e=this;this.$elem.on("notify.serialScroll",function(t,n){e.total_elements=e.$elem.find(e.options.items).length+1,n+1>=e.total_elements-e.options.step&&e.$elem.trigger("infinite_carousel:last_page")})}})}(i)},function(e,t,n){"use strict";var i=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(i),r=(n(0),n(0));!function(){function e(e){return e.html}function t(e){return e.data("href")||e.prop("href")}function n(n,i,o,s,l){var u=n.mobius(r.extend({url:t(i),dataType:"json",trigger_next:i,load_next_after:o},l)).data("mobius");n.on("mobius:loading_page",function(){var e=n.attr("data-exclude-ids"),t=u.options.perPage||6;e&&u.add_param("exclude_ids[]",e.split(",")),t&&u.add_param("per_page",t),i.prop("disabled",!0),i.data("previousHTML",i.html()),i.html(a.default.t("library.load_more.Loading"))}),n.on("mobius:loaded_page",function(t,n,a){var l=u.options.responseToHTML||e,d=l(a),c=r(d).hide();o.append(c),c.slideDown(),i.html(i.data("previousHTML")),i.prop("disabled",!1),"has_more"in a&&!a.has_more&&s.remove()})}r.fn.loadMore=function(e){r(this).each(function(){var t=r(this),i=t.find(".js-load-more--appendable"),a=t.find(".js-load-more--removable"),o=t.find(".js-load-more--button");a.length||(a=o),n(t,o,i,a,e)})}}()},function(e,t,n){"use strict";var i=n(0);n(0);!function(e){function t(e){var t=e.css("backgroundImage"),n=/[("]([^()"]+)[")]/;try{return n.exec(t)[1]}catch(e){return!1}}e.fn.preload_background_image=function(){return this.each(function(){var n=t(e(this));n&&((new Image).src=n)})}}(i)},function(e,t,n){"use strict";var i=n(0);n(0);!function(e){var t={};e.publish=function(){var n=Array.prototype.slice.call(arguments),i=n.shift();t[i]&&e.each(t[i],function(){this.apply(e,n)})},e.subscribe=function(e,n){return t[e]||(t[e]=[]),t[e].push(n),[e,n]},e.unsubscribe=function(){var n=arguments[0];t[n]&&e.each(t[n],function(e){this===arguments[1]&&t[n].splice(e,1)})}}(i)},function(e,t,n){"use strict";var i=n(0);n(0);!function(e){e.fn.render=function(t){return e(this).each(function(){e(this).data("renderer")(t)}),this},e.fn.define_renderer=function(t){return e(this).data("renderer",t),this}}(i)},function(e,t,n){"use strict";function i(e,t,n){var i=o(e),a=r.default.map(r.default.keys(t),function(e){return"#"+e}).join(", ");i.delegate(a,"change",function(){o(this).trigger("state_change")}),i.delegate(a,"state_change",function(){var e=o(this),i=e.val();r.default.each(t[e[0].id],function(e,t){var a,s=o("#"+t),l=s.add(s.prev("label")),u=s.val(),d=r.default.result(e,i);void 0===s.data("options")&&s.data("options",s.find("option")),r.default.isRegExp(d)&&(d=s.option_values(function(e){return e.match(d)})),r.default.isArray(d)&&(d=r.default.map(d,function(e){return'[value="'+e+'"]'}).join(", ")),d?(a=o(s.data("options")),r.default.isString(d)&&(a=a.filter(d)),n.include_blank&&(a=o("<option>").add(a)),s.html(a),l.show(),s.val()!==u&&s.trigger("change")):(n.default_control(l),s.trigger("change"))})})}var a=n(3),r=function(e){return e&&e.__esModule?e:{default:e}}(a),o=(n(0),n(0));o.fn.option_values=function(e){var t=o(this).first().find("option").map(function(t,n){var i=n.value;return!("function"==typeof e&&!e(i))&&i});return(0,r.default)(t).without(!1)},o.fn.select_machine=function(e,t){var n={default_control:function(e){e.hide()}};return o(this).each(function(){i(this,e,o.extend(n,t))}),this}},function(e,t,n){"use strict";var i=n(3),a=function(e){return e&&e.__esModule?e:{default:e}}(i),r=n(0);n(0);!function(e){e.fn.serialize_without_blank=function(){var t,n=this,i=[];return n.find(":input").each(function(){""!==e.trim(this.value)||this.disabled||(i.push(this),this.disabled=!0)}),t=n.serialize(),a.default.each(i,function(e){e.disabled=!1}),t}}(r)},function(e,t,n){"use strict";var i=n(0);n(0);!function(e){function t(t,n){this.$elem=t,this.options=n,this.$target=this.options.target||t,this.options.sprite_orientation&&"horizontal"===this.options.sprite_orientation?this.offset=this.$target.width():this.offset=this.$target.height(),this.index=0,this.playing=!0,this.options.index_control?this.$index_control_children=this.options.index_control.children():this.$index_control_children=e([]),this.options.should_autoadvance_callback||(this.options.should_autoadvance_callback=function(){return!0}),this.number=this.options.number||this.$index_control_children.length,this.update_offset(),this._attach(),n.play_delay&&this.playing_timer()}e.fn.spriteshow=function(n){return n=n||{},e(this).each(function(){var i=e(this).data("spriteshow");i||(i=new t(e(this),n),e(this).data("spriteshow",i))})},e.extend(t.prototype,{_attach:function(){var t=this;this.$index_control_children.click(function(n){n.preventDefault(),t.set_index(e(this).index()),t.pause()}),this.options.controls&&(this.options.controls.children(".left").click(function(e){e.preventDefault(),t.page_left(),t.pause()}),this.options.controls.children(".right").click(function(e){e.preventDefault(),t.page_right(),t.pause()}),this.options.controls.children(".play-pause").click(function(){t.playing?t.pause():t.play()}))},update_offset:function(){var t=e([]);"fade"===this.options.effect&&(t=this.$target.clone(),this.$target.css("position","absolute"),this.$target.after(t),this.$target.fadeOut(function(){e(this).remove()}),this.$target=t),this.current_offset=this.index*this.offset,this.options.sprite_orientation&&"horizontal"===this.options.sprite_orientation?this.$target.css("background-position","-"+this.current_offset.toString()+"px 0"):this.$target.css("background-position","0 -"+this.current_offset.toString()+"px")},set_index:function(e){this.index=e,this.$index_control_children.removeClass("selected"),this.$index_control_children.filter(":eq("+e.toString()+")").addClass("selected"),this.$target.trigger("spriteshow:index",[e]),this.update_offset()},page_left:function(){var e=this.index-1;e<0&&(e=this.number-1),this.set_index(e)},page_right:function(){var e=this.index+1;e>=this.number&&(e=0,this.options.play_once&&this.pause()),this.set_index(e)},playing_timer:function(){var e=this;this.play_timeout=setTimeout(function(){if(e.playing&&e.options.should_autoadvance_callback()&&e.page_right(),e.options.pause_when_behind_by){var t=(new Date).getTime();e.last_play_date&&Math.abs(e.last_play_date-t-e.options.play_delay)>e.options.pause_when_behind_by?(e.slow_strikes?e.slow_strikes+=1:e.slow_strikes=0,e.slow_strikes>3&&e.pause()):e.slow_strikes=0,e.last_play_date=t}e.playing_timer()},this.options.play_delay)},play:function(){this.playing=!0,this.options.controls&&this.options.controls.children(".play-pause").removeClass("spriteshow-play").addClass("spriteshow-pause")},pause:function(){this.playing=!1,this.options.controls&&this.options.controls.children(".play-pause").removeClass("spriteshow-pause").addClass("spriteshow-play")}})}(i)},function(e,t,n){"use strict";var i=(n(0),n(0));i(function(){i.fn.sync_form=function(e){var t=i(this),n=function(){};if(e=e||{},t.data("updating"))return void t.data("dirty",(t.data("dirty")||[]).concat(e));t.data("updating",!0),i.ajax({type:e.type||t.attr("method"),url:e.url||t.attr("action"),data:e.data||t.serialize(),dataType:"json",global:!1,context:t,beforeSend:e.beforeSend,success:function(a){(e.success||n).apply(this,arguments),t.trigger("form_synced",[a]),t.data("dirty")&&t.data("dirty").length&&setTimeout(function(){for(var e={};i.isEmptyObject(e)&&t.data("dirty").length;)e=t.data("dirty").shift();t.sync_form(e)},100),a.url&&t.attr("action",a.url)},error:e.error,complete:function(){(e.complete||n).apply(this,arguments),t.data("updating",!1)}})}})},function(e,t,n){"use strict";var i=n(0);n(0);!function(e){e.fn.term_form=function(){return this.each(function(){var t=e(this);t.find(".text").on("input keydown paste cut",function(){e.trim(e(this).val())?e("form.term .ss-delete").show():e("form.term .ss-delete").hide()}).trigger("input").on("blur",function(){t.submit()}),t.find(".ss-delete").on("click",function(){e("form.term .text").val("").trigger("input").focus(),t.submit()}),t.find(".text").on("focus",function(){e(this).addClass("focused")}),t.find(".text").on("blur",function(){var t=e(this);t.val()||t.removeClass("focused")})}),this}}(i)},function(e,t,n){"use strict";var i=n(8),a=function(e){return e&&e.__esModule?e:{default:e}}(i),r=n(0);n(0);!function(e){function t(t,n){this.$elem=t,this.val=0,this.options=e.extend({},{frame_count:10,frame_step:40,frame_duration:30,format_numbers:!0,max_digits:5,keyframes:["","0","1","2","3","4","5","6","7","8","9",","],framesets:null},n),this.val=this.$elem.attr("rel"),this.keyframes=this.options.keyframes,this.framesets=this.options.framesets;var i;for(this.framesets||this.init_framesets(),i=0;i<this.options.max_digits;i+=1)this.init_digit(i);this.write(this.val,!0)}e.fn.ticker=function(n){return n=n||{},e(this).each(function(){var i=e(this).data("ticker");i||(i=new t(e(this),n),e(this).data("ticker",i))})},e.extend(t.prototype,{read:function(){return this.val},write:function(t,n){this.val=String(t||""),this.$elem.attr("rel",this.val);var i,r,o,s,l,u,d,c,f=(this.options.format_numbers?a.default.format_number(this.val,{precision:0}):this.val).split(""),h=this.$elem.find(".ticker_digit");for(c=0;c<f.length-h.length;c+=1)this.init_digit(c+h.length);for(h=this.$elem.find(".ticker_digit"),c=0;c<h.length;c+=1){if(i=e(h[c]),r=i.html(),o=f[c]?String(f[c]):"",s=e.inArray(o,this.keyframes),l=this.framesets[s][0],u=e.inArray(i.html(),this.keyframes),d=[],i.html(o).data("tween_id",i.data("tween_id")+1),!o||o===r||n)d=d.concat(l);else for(;u!==s;)d=d.concat(this.framesets[u]),u+=1,u=u>=this.keyframes.length?1:u;this.tween(i.data("tween_id"),i,d)}},init_framesets:function(){var e,t;for(this.framesets=[],e=0;e<this.keyframes.length;e+=1)for(this.framesets.push([]),t=0;t<this.options.frame_count;t+=1)this.framesets[e].push(e*this.options.frame_count*this.options.frame_step+t*this.options.frame_step)},init_digit:function(t){var n=e(this.$elem.find(".ticker_digit").get(t));n.length||(n=e('<span class="ticker_digit">&nbsp;</span>').prependTo(this.$elem)),n.data("tween_id",1)},digit_count:function(){return this.$elem.find(".ticker_digit").length},remove_digit:function(e){e.remove(),this.pad_digits()},tween:function(e,t,n){if(n.length){if(t.data("tween_id")!==e)return!1;var i=this;setTimeout(function(){var a=n.shift();t.css({"background-position":"0px "+-1*a+"px"}),i.tween(e,t,n)},this.options.frame_duration)}}})}(r)},function(e,t,n){n(0),n(0);!function(){"use strict";function e(i){if(!i)throw new Error("No options passed to Waypoint constructor");if(!i.element)throw new Error("No element option passed to Waypoint constructor");if(!i.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+t,this.options=e.Adapter.extend({},e.defaults,i),this.element=this.options.element,this.adapter=new e.Adapter(this.element),this.callback=i.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=e.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=e.Context.findOrCreateByElement(this.options.context),e.offsetAliases[this.options.offset]&&(this.options.offset=e.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),n[this.key]=this,t+=1}var t=0,n={};e.prototype.queueTrigger=function(e){this.group.queueTrigger(this,e)},e.prototype.trigger=function(e){this.enabled&&this.callback&&this.callback.apply(this,e)},e.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete n[this.key]},e.prototype.disable=function(){return this.enabled=!1,this},e.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},e.prototype.next=function(){return this.group.next(this)},e.prototype.previous=function(){return this.group.previous(this)},e.invokeAll=function(e){var t=[];for(var i in n)t.push(n[i]);for(var a=0,r=t.length;a<r;a++)t[a][e]()},e.destroyAll=function(){e.invokeAll("destroy")},e.disableAll=function(){e.invokeAll("disable")},e.enableAll=function(){e.Context.refreshAll();for(var t in n)n[t].enabled=!0;return this},e.refreshAll=function(){e.Context.refreshAll()},e.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},e.viewportWidth=function(){return document.documentElement.clientWidth},e.adapters=[],e.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},e.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=e}(),function(){"use strict";function e(e){window.setTimeout(e,1e3/60)}function t(e){this.element=e,this.Adapter=a.Adapter,this.adapter=new this.Adapter(e),this.key="waypoint-context-"+n,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},e.waypointContextKey=this.key,i[e.waypointContextKey]=this,n+=1,a.windowContext||(a.windowContext=!0,a.windowContext=new t(window)),this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var n=0,i={},a=window.Waypoint,r=window.onload;t.prototype.add=function(e){var t=e.options.horizontal?"horizontal":"vertical";this.waypoints[t][e.key]=e,this.refresh()},t.prototype.checkEmpty=function(){var e=this.Adapter.isEmptyObject(this.waypoints.horizontal),t=this.Adapter.isEmptyObject(this.waypoints.vertical),n=this.element==this.element.window;e&&t&&!n&&(this.adapter.off(".waypoints"),delete i[this.key])},t.prototype.createThrottledResizeHandler=function(){function e(){t.handleResize(),t.didResize=!1}var t=this;this.adapter.on("resize.waypoints",function(){t.didResize||(t.didResize=!0,a.requestAnimationFrame(e))})},t.prototype.createThrottledScrollHandler=function(){function e(){t.handleScroll(),t.didScroll=!1}var t=this;this.adapter.on("scroll.waypoints",function(){t.didScroll&&!a.isTouch||(t.didScroll=!0,a.requestAnimationFrame(e))})},t.prototype.handleResize=function(){a.Context.refreshAll()},t.prototype.handleScroll=function(){var e={},t={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var n in t){var i=t[n],a=i.newScroll>i.oldScroll,r=a?i.forward:i.backward;for(var o in this.waypoints[n]){var s=this.waypoints[n][o];if(null!==s.triggerPoint){var l=i.oldScroll<s.triggerPoint,u=i.newScroll>=s.triggerPoint,d=l&&u,c=!l&&!u;(d||c)&&(s.queueTrigger(r),e[s.group.id]=s.group)}}}for(var f in e)e[f].flushTriggers();this.oldScroll={x:t.horizontal.newScroll,y:t.vertical.newScroll}},t.prototype.innerHeight=function(){return this.element==this.element.window?a.viewportHeight():this.adapter.innerHeight()},t.prototype.remove=function(e){delete this.waypoints[e.axis][e.key],this.checkEmpty()},t.prototype.innerWidth=function(){return this.element==this.element.window?a.viewportWidth():this.adapter.innerWidth()},t.prototype.destroy=function(){var e=[];for(var t in this.waypoints)for(var n in this.waypoints[t])e.push(this.waypoints[t][n]);for(var i=0,a=e.length;i<a;i++)e[i].destroy()},t.prototype.refresh=function(){var e,t=this.element==this.element.window,n=t?void 0:this.adapter.offset(),i={};this.handleScroll(),e={horizontal:{contextOffset:t?0:n.left,contextScroll:t?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:t?0:n.top,contextScroll:t?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var r in e){var o=e[r];for(var s in this.waypoints[r]){var l,u,d,c,f,h=this.waypoints[r][s],p=h.options.offset,m=h.triggerPoint,g=0,v=null==m;h.element!==h.element.window&&(g=h.adapter.offset()[o.offsetProp]),"function"==typeof p?p=p.apply(h):"string"==typeof p&&(p=parseFloat(p),h.options.offset.indexOf("%")>-1&&(p=Math.ceil(o.contextDimension*p/100))),l=o.contextScroll-o.contextOffset,h.triggerPoint=Math.floor(g+l-p),u=m<o.oldScroll,d=h.triggerPoint>=o.oldScroll,c=u&&d,f=!u&&!d,!v&&c?(h.queueTrigger(o.backward),i[h.group.id]=h.group):!v&&f?(h.queueTrigger(o.forward),i[h.group.id]=h.group):v&&o.oldScroll>=h.triggerPoint&&(h.queueTrigger(o.forward),i[h.group.id]=h.group)}}return a.requestAnimationFrame(function(){for(var e in i)i[e].flushTriggers()}),this},t.findOrCreateByElement=function(e){return t.findByElement(e)||new t(e)},t.refreshAll=function(){for(var e in i)i[e].refresh()},t.findByElement=function(e){return i[e.waypointContextKey]},window.onload=function(){r&&r(),t.refreshAll()},a.requestAnimationFrame=function(t){(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||e).call(window,t)},a.Context=t}(),function(){"use strict";function e(e,t){return e.triggerPoint-t.triggerPoint}function t(e,t){return t.triggerPoint-e.triggerPoint}function n(e){this.name=e.name,this.axis=e.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),i[this.axis][this.name]=this}var i={vertical:{},horizontal:{}},a=window.Waypoint;n.prototype.add=function(e){this.waypoints.push(e)},n.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},n.prototype.flushTriggers=function(){for(var n in this.triggerQueues){var i=this.triggerQueues[n],a="up"===n||"left"===n;i.sort(a?t:e);for(var r=0,o=i.length;r<o;r+=1){var s=i[r];(s.options.continuous||r===i.length-1)&&s.trigger([n])}}this.clearTriggerQueues()},n.prototype.next=function(t){this.waypoints.sort(e);var n=a.Adapter.inArray(t,this.waypoints);return n===this.waypoints.length-1?null:this.waypoints[n+1]},n.prototype.previous=function(t){this.waypoints.sort(e);var n=a.Adapter.inArray(t,this.waypoints);return n?this.waypoints[n-1]:null},n.prototype.queueTrigger=function(e,t){this.triggerQueues[t].push(e)},n.prototype.remove=function(e){var t=a.Adapter.inArray(e,this.waypoints);t>-1&&this.waypoints.splice(t,1)},n.prototype.first=function(){return this.waypoints[0]},n.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},n.findOrCreate=function(e){return i[e.axis][e.name]||new n(e)},a.Group=n}(),function(){"use strict";function e(e){this.$element=t(e)}var t=window.jQuery,n=window.Waypoint;t.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(t,n){e.prototype[n]=function(){var e=Array.prototype.slice.call(arguments);return this.$element[n].apply(this.$element,e)}}),t.each(["extend","inArray","isEmptyObject"],function(n,i){e[i]=t[i]}),n.adapters.push({name:"jquery",Adapter:e}),n.Adapter=e}(),function(){"use strict";function e(e){return function(){var n=[],i=arguments[0];return e.isFunction(arguments[0])&&(i=e.extend({},arguments[1]),i.handler=arguments[0]),this.each(function(){var a=e.extend({},i,{element:this});"string"==typeof a.context&&(a.context=e(this).closest(a.context)[0]),n.push(new t(a))}),n}}var t=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=e(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=e(window.Zepto))}()},function(e,t,n){var i=n(0);n(0);!function(e){"use strict";e.extend(e.fn.cycle.defaults,{caption:"> .cycle-caption",captionTemplate:"{{slideNum}} / {{slideCount}}",overlay:"> .cycle-overlay",overlayTemplate:"<div>{{title}}</div><div>{{desc}}</div>",captionModule:"caption"}),e(document).on("cycle-update-view",function(t,n,i,a){if("caption"===n.captionModule){e.each(["caption","overlay"],function(){var e=this,t=i[e+"Template"],r=n.API.getComponent(e);r.length&&t?(r.html(n.API.tmpl(t,i,n,a)),r.show()):r.hide()})}}),e(document).on("cycle-destroyed",function(t,n){var i;e.each(["caption","overlay"],function(){var e=this,t=n[e+"Template"];n[e]&&t&&(i=n.API.getComponent("caption"),i.empty())})})}(i)},function(e,t,n){var i=n(0);n(0);!function(e){"use strict";function t(t,n){var i;if(t._hashFence)return void(t._hashFence=!1);i=window.location.hash.substring(1),t.slides.each(function(a){if(e(this).data("cycle-hash")==i){if(n===!0)t.startingSlide=a;else{var r=t.currSlide<a;t.nextSlide=a,t.API.prepareTx(!0,r)}return!1}})}e(document).on("cycle-pre-initialize",function(n,i){t(i,!0),i._onHashChange=function(){t(i,!1)},e(window).on("hashchange",i._onHashChange)}),e(document).on("cycle-update-view",function(e,t,n){n.hash&&"#"+n.hash!=window.location.hash&&(t._hashFence=!0,window.location.hash=n.hash)}),e(document).on("cycle-destroyed",function(t,n){n._onHashChange&&e(window).off("hashchange",n._onHashChange)})}(i)},function(e,t,n){var i=n(0);n(0);!function(e){"use strict";function t(t,n,i){var a;t.API.getComponent("pager").each(function(){var r=e(this);if(n.pagerTemplate){var o=t.API.tmpl(n.pagerTemplate,n,t,i[0]);a=e(o).appendTo(r)}else a=r.children().eq(t.slideCount-1);a.on(t.pagerEvent,function(e){e.preventDefault(),t.API.page(r,e.currentTarget)})})}function n(e,t){var n=this.opts();if(!n.busy||n.manualTrump){var i=e.children().index(t),a=i,r=n.currSlide<a;n.currSlide!=a&&(n.nextSlide=a,n.API.prepareTx(!0,r),n.API.trigger("cycle-pager-activated",[n,e,t]))}}e.extend(e.fn.cycle.defaults,{pager:"> .cycle-pager",pagerActiveClass:"cycle-pager-active",pagerEvent:"click.cycle",pagerTemplate:"<span>&bull;</span>"}),e(document).on("cycle-bootstrap",function(e,n,i){i.buildPagerLink=t}),e(document).on("cycle-slide-added",function(e,t,i,a){t.pager&&(t.API.buildPagerLink(t,i,a),t.API.page=n)}),e(document).on("cycle-slide-removed",function(t,n,i,a){if(n.pager){n.API.getComponent("pager").each(function(){var t=e(this);e(t.children()[i]).remove()})}}),e(document).on("cycle-update-view",function(t,n,i){var a;n.pager&&(a=n.API.getComponent("pager"),a.each(function(){e(this).children().removeClass(n.pagerActiveClass).eq(n.currSlide).addClass(n.pagerActiveClass)}))}),e(document).on("cycle-destroyed",function(e,t){var n=t.API.getComponent("pager");n&&(n.children().off(t.pagerEvent),t.pagerTemplate&&n.empty())})}(i)},function(e,t,n){var i=n(0);n(0);!function(e){"use strict";e.extend(e.fn.cycle.defaults,{tmplRegex:"{{((.)?.*?)}}"}),e.extend(e.fn.cycle.API,{tmpl:function(t,n){var i=new RegExp(n.tmplRegex||e.fn.cycle.defaults.tmplRegex,"g"),a=e.makeArray(arguments);return a.shift(),t.replace(i,function(t,n){var i,r,o,s,l=n.split(".");for(i=0;i<a.length;i++)if(o=a[i]){if(l.length>1)for(s=o,r=0;r<l.length;r++)o=s,s=s[l[r]]||n;else s=o[n];if(e.isFunction(s))return s.apply(o,a);if(void 0!==s&&null!==s&&s!=n)return s}return n})}})}(i)},,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.stringToMoney=function(e,t){if(!e)return 0;t=i({precision:2},t);var n=Math.max(2,t.precision);return parseFloat(e.replace(/[^0-9.,-]/g,"").replace(new RegExp("[\\.,](\\d{1,"+n+"}$)","g"),".$1").replace(new RegExp("[\\.,](?!\\d{1,"+n+"}$)","g"),""))}},,,,,function(e,t,n){function i(e,t){var n=a(e),i=n.getTime(),r=a(t),o=r.getTime();return i>o?-1:i<o?1:0}var a=n(6);e.exports=i},function(e,t,n){function i(e,t){var n=a(e),i=a(t),s=o(n,i),l=Math.abs(r(n,i));return n.setMonth(n.getMonth()-s*l),s*(l-(o(n,i)===-s))}var a=n(6),r=n(206),o=n(141);e.exports=i},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateResponseStatus=t.makeFetchRequest=t.maybeData=t.normalizeData=void 0;var i=n(10),a=n(23),r=function(e){return e&&e.__esModule?e:{default:e}}(a),o=t.normalizeData=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.profile;return{backers:{totalCount:e.backers_count},canceledAt:e.state_changed_at,category:{name:e.category&&e.category.name,url:e.category&&e.category.urls.web.discover},creator:{imageUrl:e.creator.avatar.thumb,name:e.creator.name,url:e.creator.urls.web.user},deadlineAt:e.deadline,description:e.blurb,friends:l(e),imageUrl:t?e.photo.full:e.photo.ed,isProjectWeLove:e.staff_pick,isProjectOfTheDay:e.potd,name:e.name,projectId:e.id,percentFunded:e.percent_funded||(e.goal?e.pledged/e.goal*100:0),profile:{description:n.blurb,imageUrl:n.feature_image_attributes.image_urls.baseball_card,name:n.name},pledged:{amount:e.pledged,currency:e.currency},slug:e.slug,state:e.state.toUpperCase(),url:e.urls.web.project,weightedScore:e.recommendations_score,rawScore:e.recommendations_raw_score,modelName:e.recommendations_model_name,userIsBacker:e.is_backing,userHasStarred:e.is_starred}},s=(t.maybeData=function(e){return r.default.fromNullable(e.dataset.project).chain(function(e){return(0,i.maybeTry)(function(){return JSON.parse(e)})}).map(o).getOrElse({})},t.makeFetchRequest=function(e){return fetch(e,{method:"GET",credentials:"same-origin"}).then(s).then(function(e){return e.json()})},t.validateResponseStatus=function(e){return 200===e.status?Promise.resolve(e):Promise.reject(e)}),l=function(e){return e.friends&&e.friends.length?e.friends.map(function(e){return{name:e.name,imageUrl:e.avatar.thumb}}):[]}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.initProjectCardTracking=t.trackProjectCards=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(0),s=i(o);n(9);var l=n(5),u=n(10),d=n(23),c=i(d),f=[],h=function(e){(0,l.track)("Viewed Project Card",e.data,{withoutCurrentProject:!0}),e.viewed=!0},p=function(e){var t=(0,s.default)(e.element),n=window.scrollY+window.innerHeight,i=t.offset().top+t.height()/2;return n>i&&i>0&&!e.viewed},m=function(e){var t=(0,s.default)(e).parent(),n=(0,s.default)(e).closest(".js-project-group").find(".js-track-project-card"),i=n.first().parent().siblings().length+1;return{position_in_row:t.index()+1,row_total:t.siblings().length+1,row_number:Math.ceil((n.index((0,s.default)(e))+1)/i)}},g=function(e){return c.default.fromNullable(e.dataset).map(function(e){return["section","model_name","raw_score","weighted_score","project_state","project_pid","project_backers_count","project_percent_raised","project_pledged","user_is_backer","user_has_starred"].reduce(function(t,n){return r({},t,a({},n,e[n]||""))},{})}).map(function(t){return r({},t,m(e))}).getOrElse({})};t.trackProjectCards=function(){f.filter((0,u.compose)(u.isFalse,(0,u.prop)("viewed"))).filter((0,u.compose)(u.isFalse,(0,u.prop)("hidden"))).filter(p).forEach(h)},t.initProjectCardTracking=function(e){e.forEach(function(e){return(0,s.default)(e).livequery(function(){f=f.concat({data:g(this),hidden:(0,s.default)(this).parent().hasClass("hide"),element:this,viewed:!1})})})}},,,,,,function(e,t,n){"use strict";function i(e,t){return r.default.template(e,o)(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.templateSettings=void 0,t.default=i;var a=n(3),r=function(e){return e&&e.__esModule?e:{default:e}}(a),o=t.templateSettings={interpolate:/\{\{(.+?)\}\}/g}},,,,,,function(e,t,n){function i(e,t){var n=a(e),i=a(t);return 12*(n.getFullYear()-i.getFullYear())+(n.getMonth()-i.getMonth())}var a=n(6);e.exports=i},function(e,t,n){function i(e,t,n){var i=n||{},h=a(e,t),p=i.locale,m=l.distanceInWords.localize;p&&p.distanceInWords&&p.distanceInWords.localize&&(m=p.distanceInWords.localize);var g,v,_={addSuffix:Boolean(i.addSuffix),comparison:h};h>0?(g=r(e),v=r(t)):(g=r(t),v=r(e));var y,b=o(v,g),w=v.getTimezoneOffset()-g.getTimezoneOffset(),k=Math.round(b/60)-w;if(k<2)return i.includeSeconds?b<5?m("lessThanXSeconds",5,_):b<10?m("lessThanXSeconds",10,_):b<20?m("lessThanXSeconds",20,_):b<40?m("halfAMinute",null,_):b<60?m("lessThanXMinutes",1,_):m("xMinutes",1,_):0===k?m("lessThanXMinutes",1,_):m("xMinutes",k,_);if(k<45)return m("xMinutes",k,_);if(k<90)return m("aboutXHours",1,_);if(k<u){return m("aboutXHours",Math.round(k/60),_)}if(k<d)return m("xDays",1,_);if(k<c){return m("xDays",Math.round(k/u),_)}if(k<f)return y=Math.round(k/c),m("aboutXMonths",y,_);if((y=s(v,g))<12){return m("xMonths",Math.round(k/c),_)}var j=y%12,x=Math.floor(y/12);return j<3?m("aboutXYears",x,_):j<9?m("overXYears",x,_):m("almostXYears",x+1,_)}var a=n(188),r=n(6),o=n(235),s=n(189),l=n(208),u=1440,d=2520,c=43200,f=86400;e.exports=i},,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectCardContainer=void 0;var r=n(4),o=i(r),s=n(213),l=i(s),u=n(17);t.ProjectCardContainer=function(e){var t=e.includeGrid,n=void 0===t||t,i=e.horizontal,r=void 0!==i&&i,s=e.projects,d=e.refTag,c=s||[].concat(a(Array(6))),f=c.map(function(e,t){var n=r?"col-full":"col-full col-sm-12-24 col-lg-8-24";return o.default.createElement("div",{className:n,key:e?e.slug:t},o.default.createElement(l.default,{horizontal:r,project:e,refTag:d}))}),h=function(){return o.default.createElement(u.Row,{atoms:["flex","flex-wrap"]},f)};return n?o.default.createElement(u.Grid,{atoms:["js-project-group"]},o.default.createElement(h,null)):o.default.createElement(h,null)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=n(4),r=function(e){return e&&e.__esModule?e:{default:e}}(a),o=n(226),s=function(e){var t=e.horizontal,n=void 0!==t&&t,a=e.project,s=e.refTag;return r.default.createElement("div",{className:"js-track-project-card","data-project_pid":a?a.projectId:"","data-section":s,"data-weighted_score":a?a.weightedScore:"","data-raw_score":a?a.rawScore:"","data-model_name":a?a.modelName:"","data-project_state":a?a.state.toLowerCase():"","data-project_backers_count":a?a.backers.totalCount:"","data-project_percent_raised":a?a.percentFunded:"","data-project_pledged":a?a.pledged.amount:"","data-user_is_backer":a?a.userIsBacker:"","data-user_has_starred":a?a.userHasStarred:""},r.default.createElement(o.ProjectCard,i({},a,{horizontal:n,refTag:s})))};t.default=s},,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={canceled:"CANCELED",live:"LIVE",failed:"FAILED",successful:"SUCCESSFUL",started:"STARTED",submitted:"SUBMITTED",suspended:"SUSPENDED",purged:"PURGED"};t.PROJECT_STATES=i},,function(e,t,n){"use strict";var i=n(22),a=function(e){return e&&e.__esModule?e:{default:e}}(i);n(9),(0,a.default)(function(){function e(e){(0,a.default)(e).ksr_video()}a.default.videos_changed=function(){(0,a.default)(".video-player:visible").each(function(){e(this)})},(0,a.default)(document).on("ksr_video:pause_all_videos",function(){(0,a.default)(".video-player").trigger("ksr_video:pause")}),(0,a.default)(".video-player:visible").livequery(function(){e(this)})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectCard=void 0;var a=n(4),r=i(a),o=n(1),s=i(o),l=n(8),u=i(l),d=n(13),c=n(17),f=n(10),h=n(324),p=i(h),m=n(223),g=n(29),v=function(e){var t=e.horizontal,n=e.isProjectWeLove,i=e.isProjectOfTheDay,a=e.projectImage,o=e.projectUrl;return r.default.createElement("div",{className:(0,f.computedClassNames)("relative","self-start",t&&"w50p-sm")},r.default.createElement("a",{href:o,className:"block img-placeholder w100p"},r.default.createElement("div",{className:"img-placeholder bg-grey-400 absolute t0 w100p"}),a&&r.default.createElement("img",{className:(t?"mb2 mb0-sm":"border-grey-400 border-bottom")+" w100p absolute t0",alt:s.default.t("project_card.Project_image"),src:a}),i&&r.default.createElement("div",{className:"bg-ksr-green-700 px2 py1 absolute t0 l5 white type-14 medium"},r.default.createElement(c.Icon,{name:"kickstarter",size:"small",atoms:["fill-white mr2"]}),s.default.t("project_card.Project_of_the_day")),!t&&n&&r.default.createElement("div",{className:"pill bg-ksr-green-700 inline-block ml5 absolute h6 w6 flex items-center justify-center ksr-tooltip b5 shadow-avatar","data-tooltip":s.default.t("project_card.Projects_We_Love")},r.default.createElement(c.Icon,{name:"kickstarter",label:s.default.t("project_card.Projects_We_Love"),size:"medium",atoms:["fill-white"]}))))},_=function(e){var t=e.category,n=e.creator,i=e.description,a=e.horizontal,o=e.name,l=e.profile,u=e.projectUrl,d=e.refTag,h=e.projectState,p=a?"px4-sm":"h30 pt4 px4 px5-md mb1_6";if(!n)return r.default.createElement("div",{className:p});var v=d?(0,f.url)(t.url,{ref:d},null,{noBaseEncode:!0}):t.url,_=d?(0,f.url)(n.url,{ref:d},null,{noBaseEncode:!0}):n.url;return r.default.createElement("div",{className:p},r.default.createElement("div",{className:(0,f.computedClassNames)("type-13","mb2","medium",a&&"hide")},r.default.createElement("a",{className:"navy-600",href:v},t.name)),r.default.createElement("div",{className:"type-16 clamp-3 navy-500 mb3"},r.default.createElement("a",{href:u,className:"navy-700"},l.name||o||u,":")," ",l.description||i),h!==m.PROJECT_STATES.successful&&r.default.createElement("div",{className:"type-13 flex"},r.default.createElement("a",{href:_},r.default.createElement(c.Avatar,{size:4,atoms:["mr2","shadow-avatar"],alt:n.name,imageUrl:n.imageUrl})),r.default.createElement(g.Translate,{atoms:["inline-block"],i18nKey:"project_card.by_creator",i18nTag:"div",by:r.default.createElement("span",{className:"navy-500"},s.default.t("project_card.by")),creatorName:r.default.createElement("a",{href:_,className:"navy-700 medium"},n.name)})))},y=function(e){var t=e.horizontal,n=e.jsEndDate,i=e.percentFunded,a=e.pledged,o=u.default.percent(i,{precision:0}),l={width:Math.min(100,i)+"%"},d=a.currency;return r.default.createElement("div",{className:(0,f.computedClassNames)("pb5-md","pb4","pt3","px5-sm",!t&&"px4")},r.default.createElement("div",{className:"h14-sm pt1_6"},r.default.createElement("div",{className:"rounded bg-navy-400 mb3 w100p"},r.default.createElement("div",{className:"rounded bg-green-400 h1_2",style:l})),r.default.createElement("div",{className:"navy-500"},r.default.createElement("div",{className:"mr2"},r.default.createElement("span",{className:"bold navy-600"},u.default.money(a.amount,{precision:0,currency:d})),r.default.createElement("span",{className:"ml1 normal"},s.default.t("project_card.pledged"))),r.default.createElement("div",{className:"mr2"},r.default.createElement("span",{className:"bold navy-600"},o),r.default.createElement("span",{className:"ml1 normal"},s.default.t("project_card.funded"))),r.default.createElement("div",{className:"ksr_page_timer mr2","data-end_time":n},r.default.createElement("span",{className:"bold navy-600 js-num"},"..."),r.default.createElement("span",{className:"js-text ml1"},"days to go")))))},b=function(e){var t=e.formattedEndDate,n=e.horizontal,i=e.projectState,a=i===m.PROJECT_STATES.canceled?s.default.t("project_card.Funding_canceled"):s.default.t("project_card.Funding_unsuccessful"),o=i===m.PROJECT_STATES.canceled?s.default.t("project_card.Project_canceled_on",{endDate:t}):s.default.t("project_card.Project_ended_on",{endDate:t});return r.default.createElement("div",{className:(0,f.computedClassNames)("pb5-md","pb4","px5-md","px4","mt3",!n&&"border-top border-grey-400")},r.default.createElement("div",{className:"h14 "+(n?"border-top border-grey-400 pt2":"pt3")},r.default.createElement("div",{className:"navy-500"},r.default.createElement("div",{className:"inline-block mt2_3"},r.default.createElement("div",{className:"bold navy-600 mt2"},a),o))))},w=function(e){var t=e.backers,n=e.creator,i=e.horizontal,a=u.default.format_number(t.totalCount,{precision:0});return r.default.createElement("div",{className:"pb5-md pb4 px5-md px4 mt3 "+(!i&&"border-top border-grey-400")},r.default.createElement("div",{className:"h14 "+(i?"border-top border-grey-400 pt2":"pt3")},r.default.createElement("div",{className:"type-13 flex"},r.default.createElement("div",{className:"mt4 flex"},r.default.createElement("a",{href:n.url},r.default.createElement(c.Avatar,{size:4,atoms:["mr2"],alt:n.name,imageUrl:n.imageUrl})),r.default.createElement("div",{className:"inline-block mt2_3 type-13"},r.default.createElement(g.Translate,{atoms:["navy-600 text-ellipsis"],i18nKey:"project_card.by_creator_and_backers",i18nTag:"div",by:r.default.createElement("span",{className:"navy-500"},s.default.t("project_card.by")),creatorName:r.default.createElement("span",{className:"bold"},n.name),backersCount:a}))))))},k=function(e){var t=e.friends,n=t.slice(0,2),i=n.map(function(e){return"<span class='bold'>"+(0,p.default)(e.name.split(" ")[0])+"</span>"}),a=n.map(function(e){return r.default.createElement(c.Avatar,{key:e.imageUrl,size:4,atoms:["mr1"],imageUrl:e.imageUrl})});if(i.length<t.length){var o=t.length-i.length,l=s.default.t("presenters.projects.baseball_card_tall.amount_more",{count:o});i.push("<span class='bold'>"+l+"</span>")}var d=s.default.t("presenters.projects.baseball_card_tall.friends_are_backers",{friends:u.default.to_sentence(i),count:i.length});return r.default.createElement("div",{className:"mt2 flex items-center"},r.default.createElement("div",{className:"mr1 flex items-center"},a),r.default.createElement("div",{className:"type-13",dangerouslySetInnerHTML:{__html:(0,f.unescape)(d)}}))};t.ProjectCard=function(e){var t=e.backers,n=e.canceledAt,i=e.category,a=e.creator,o=e.deadlineAt,s=e.description,l=e.friends,u=void 0===l?[]:l,c=e.horizontal,h=void 0!==c&&c,p=e.imageUrl,g=e.isProjectOfTheDay,j=e.isProjectWeLove,x=e.name,C=e.percentFunded,S=void 0===C?0:C,E=e.pledged,T=e.profile,A=e.refTag,P=e.state,D=e.url,I=P===m.PROJECT_STATES.canceled?n:o,M=I&&1e3*I,N=M&&(0,d.format)("LL",M),O=D&&(A?(0,f.url)(D,{ref:A}):D),R=T&&T.imageUrl||p;return r.default.createElement("div",{className:"mb5"},r.default.createElement("div",{className:"bg-white black rounded relative "+(h?"flex-sm":"shadow-card border-grey-400 border")},r.default.createElement(v,{horizontal:h,isProjectWeLove:j,isProjectOfTheDay:g,projectImage:R,projectUrl:O}),r.default.createElement("div",{className:(0,f.computedClassNames)(h&&"w50p-sm")},r.default.createElement(_,{category:i,creator:a,description:s,horizontal:h,name:x,profile:T,projectUrl:O,refTag:A,projectState:P}),!a&&r.default.createElement("div",{className:"pb5-md pb4 pt3 px5-sm px4"},r.default.createElement("div",{className:"h14-sm pt1_6"})),a&&function(){switch(P){case m.PROJECT_STATES.successful:return r.default.createElement(w,{backers:t,creator:a,horizontal:h});case m.PROJECT_STATES.canceled:case m.PROJECT_STATES.failed:return r.default.createElement(b,{formattedEndDate:N,horizontal:h,projectState:P});default:return r.default.createElement(y,{backers:t,horizontal:h,jsEndDate:M,percentFunded:S,pledged:E})}}())),!h&&u.length>0&&r.default.createElement(k,{friends:u}))}},,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scroller=t.coreScroller=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=n(37),r=(t.coreScroller=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.combineHeight)([".js-site-nav-container",".js-admin-nav-wrap"]);r(i({offset:t},e))},t.scroller=function(e){var t=e.element,n=void 0===t?document.body:t,i=e.to,a=void 0===i?0:i,r=e.duration,s=void 0===r?1e3:r,l=e.easing,u=void 0===l?"easeInOutQuad":l,d=e.offset,c=void 0===d?0:d,f=n.scrollTop,h=a-f-c,p=void 0;return new Promise(function(e){var t=function t(i){p||(p=i);var a=(i-p)/s,r=Math.max(0,Math.min(1,a));n.scrollTop=f+o[u](r)*h,r<1?window.requestAnimationFrame(t):e()};window.requestAnimationFrame(t)})}),o={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}}},,,function(e,t,n){n(0),n(0);!function(e){function t(e){return e=e.toUpperCase(),e=e.substr(4)+e.substr(0,4),e.split("").map(function(e){var t=e.charCodeAt(0);return t>=s&&t<=l?t-s+10:e}).join("")}function n(e){for(var t,n=e;n.length>2;)t=n.slice(0,9),n=parseInt(t,10)%97+n.slice(t.length);return parseInt(n,10)%97}function i(e){var t=e.match(/(.{3})/g).map(function(e){var t,n=e.slice(0,1),i=parseInt(e.slice(1),10);switch(n){case"A":t="0-9A-Za-z";break;case"B":t="0-9A-Z";break;case"C":t="A-Za-z";break;case"F":t="0-9";break;case"L":t="a-z";break;case"U":t="A-Z";break;case"W":t="0-9a-z"}return"(["+t+"]{"+i+"})"});return new RegExp("^"+t.join("")+"$")}function a(e,t,n,i){this.countryCode=e,this.length=t,this.structure=n,this.example=i}function r(e){u[e.countryCode]=e}function o(e){return"string"==typeof e||e instanceof String}Array.prototype.map||(Array.prototype.map=function(e){"use strict";if(void 0===this||null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var i=new Array(n),a=arguments.length>=2?arguments[1]:void 0,r=0;r<n;r++)r in t&&(i[r]=e.call(a,t[r],r,t));return i});var s="A".charCodeAt(0),l="Z".charCodeAt(0);a.prototype._regex=function(){return this._cachedRegex||(this._cachedRegex=i(this.structure))},a.prototype.isValid=function(e){return this.length==e.length&&this.countryCode===e.slice(0,2)&&this._regex().test(e.slice(4))&&1==n(t(e))},a.prototype.toBBAN=function(e,t){return this._regex().exec(e.slice(4)).slice(1).join(t)},a.prototype.fromBBAN=function(e){if(!this.isValidBBAN(e))throw new Error("Invalid BBAN");var i=n(t(this.countryCode+"00"+e)),a=("0"+(98-i)).slice(-2);return this.countryCode+a+e},a.prototype.isValidBBAN=function(e){return this.length-4==e.length&&this._regex().test(e)};var u={};r(new a("AD",24,"F04F04A12","AD1200012030200359100100")),r(new a("AE",23,"F03F16","AE070331234567890123456")),r(new a("AL",28,"F08A16","AL47212110090000000235698741")),r(new a("AT",20,"F05F11","AT611904300234573201")),r(new a("AZ",28,"U04A20","AZ21NABZ00000000137010001944")),r(new a("BA",20,"F03F03F08F02","BA391290079401028494")),r(new a("BE",16,"F03F07F02","BE68539007547034")),r(new a("BG",22,"U04F04F02A08","BG80BNBG96611020345678")),r(new a("BH",22,"U04A14","BH67BMAG00001299123456")),r(new a("BR",29,"F08F05F10U01A01","BR9700360305000010009795493P1")),r(new a("CH",21,"F05A12","CH9300762011623852957")),r(new a("CR",21,"F03F14","CR0515202001026284066")),r(new a("CY",28,"F03F05A16","CY17002001280000001200527600")),r(new a("CZ",24,"F04F06F10","CZ6508000000192000145399")),r(new a("DE",22,"F08F10","DE89370400440532013000")),r(new a("DK",18,"F04F09F01","DK5000400440116243")),r(new a("DO",28,"U04F20","DO28BAGR00000001212453611324")),r(new a("EE",20,"F02F02F11F01","EE382200221020145685")),r(new a("ES",24,"F04F04F01F01F10","ES9121000418450200051332")),r(new a("FI",18,"F06F07F01","FI2112345600000785")),r(new a("FO",18,"F04F09F01","FO6264600001631634")),r(new a("FR",27,"F05F05A11F02","FR1420041010050500013M02606")),r(new a("GB",22,"U04F06F08","GB29NWBK60161331926819")),r(new a("GE",22,"U02F16","GE29NB0000000101904917")),r(new a("GI",23,"U04A15","GI75NWBK000000007099453")),r(new a("GL",18,"F04F09F01","GL8964710001000206")),r(new a("GR",27,"F03F04A16","GR1601101250000000012300695")),r(new a("GT",28,"A04A20","GT82TRAJ01020000001210029690")),r(new a("HR",21,"F07F10","HR1210010051863000160")),r(new a("HU",28,"F03F04F01F15F01","HU42117730161111101800000000")),r(new a("IE",22,"U04F06F08","IE29AIBK93115212345678")),r(new a("IL",23,"F03F03F13","IL620108000000099999999")),r(new a("IS",26,"F04F02F06F10","IS140159260076545510730339")),r(new a("IT",27,"U01F05F05A12","IT60X0542811101000000123456")),r(new a("KW",30,"U04A22","KW81CBKU0000000000001234560101")),r(new a("KZ",20,"F03A13","KZ86125KZT5004100100")),r(new a("LB",28,"F04A20","LB62099900000001001901229114")),r(new a("LI",21,"F05A12","LI21088100002324013AA")),r(new a("LT",20,"F05F11","LT121000011101001000")),r(new a("LU",20,"F03A13","LU280019400644750000")),r(new a("LV",21,"U04A13","LV80BANK0000435195001")),r(new a("MC",27,"F05F05A11F02","MC5811222000010123456789030")),r(new a("MD",24,"U02F18","MD24AG000225100013104168")),r(new a("ME",22,"F03F13F02","ME25505000012345678951")),r(new a("MK",19,"F03A10F02","MK07250120000058984")),r(new a("MR",27,"F05F05F11F02","MR1300020001010000123456753")),r(new a("MT",31,"U04F05A18","MT84MALT011000012345MTLCAST001S")),r(new a("MU",30,"U04F02F02F12F03U03","MU17BOMM0101101030300200000MUR")),r(new a("NL",18,"U04F10","NL91ABNA0417164300")),r(new a("NO",15,"F04F06F01","NO9386011117947")),r(new a("PK",24,"U04A16","PK36SCBL0000001123456702")),r(new a("PL",28,"F08F16","PL61109010140000071219812874")),r(new a("PS",29,"U04A21","PS92PALS000000000400123456702")),r(new a("PT",25,"F04F04F11F02","PT50000201231234567890154")),r(new a("RO",24,"U04A16","RO49AAAA1B31007593840000")),r(new a("RS",22,"F03F13F02","RS35260005601001611379")),r(new a("SA",24,"F02A18","SA0380000000608010167519")),r(new a("SE",24,"F03F16F01","SE4550000000058398257466")),r(new a("SI",19,"F05F08F02","SI56263300012039086")),r(new a("SK",24,"F04F06F10","SK3112000000198742637541")),r(new a("SM",27,"U01F05F05A12","SM86U0322509800000000270100")),r(new a("TN",24,"F02F03F13F02","TN5910006035183598478831")),r(new a("TR",26,"F05A01A16","TR330006100519786457841326")),r(new a("VG",24,"U04F16","VG96VPVG0000012345678901")),r(new a("AO",25,"F21","AO69123456789012345678901")),r(new a("BF",27,"F23","BF2312345678901234567890123")),r(new a("BI",16,"F12","BI41123456789012")),r(new a("BJ",28,"F24","BJ39123456789012345678901234")),r(new a("CI",28,"U01F23","CI17A12345678901234567890123")),r(new a("CM",27,"F23","CM9012345678901234567890123")),r(new a("CV",25,"F21","CV30123456789012345678901")),r(new a("DZ",24,"F20","DZ8612345678901234567890")),r(new a("IR",26,"F22","IR861234568790123456789012")),r(new a("JO",30,"A04F22","JO15AAAA1234567890123456789012")),r(new a("MG",27,"F23","MG1812345678901234567890123")),r(new a("ML",28,"U01F23","ML15A12345678901234567890123")),r(new a("MZ",25,"F21","MZ25123456789012345678901")),r(new a("QA",29,"U04A21","QA30AAAA123456789012345678901")),r(new a("SN",28,"U01F23","SN52A12345678901234567890123")),r(new a("UA",29,"F25","UA511234567890123456789012345"));e.isValid=function(e){if(!o(e))return!1;e=this.electronicFormat(e);var t=u[e.slice(0,2)];return!!t&&t.isValid(e)},e.toBBAN=function(e,t){void 0===t&&(t=" "),e=this.electronicFormat(e);var n=u[e.slice(0,2)];if(!n)throw new Error("No country with code "+e.slice(0,2));return n.toBBAN(e,t)},e.fromBBAN=function(e,t){var n=u[e];if(!n)throw new Error("No country with code "+e);return n.fromBBAN(this.electronicFormat(t))},e.isValidBBAN=function(e,t){if(!o(t))return!1;var n=u[e];return n&&n.isValidBBAN(this.electronicFormat(t))},e.printFormat=function(e,t){return void 0===t&&(t=" "),this.electronicFormat(e).replace(/(.{4})(?!$)/g,"$1"+t)},e.electronicFormat=function(e){return e.replace(/[^a-zA-Z0-9]/g,"").toUpperCase()},e.countries=u}(t)},,,,,,,,,,,function(e,t,n){(function(i){var a,r;!function(o){var s="object"==typeof self&&self.self===self&&self||"object"==typeof i&&i.global===i&&i;a=[n(3),n(0),t],void 0!==(r=function(e,t,n){s.Backbone=o(s,n,e,t)}.apply(t,a))&&(e.exports=r)}(function(e,t,n,i){var a=e.Backbone,r=Array.prototype.slice;t.VERSION="1.3.3",t.$=i,t.noConflict=function(){return e.Backbone=a,this},t.emulateHTTP=!1,t.emulateJSON=!1;var o=function(e,t,i){switch(e){case 1:return function(){return n[t](this[i])};case 2:return function(e){return n[t](this[i],e)};case 3:return function(e,a){return n[t](this[i],l(e,this),a)};case 4:return function(e,a,r){return n[t](this[i],l(e,this),a,r)};default:return function(){var e=r.call(arguments);return e.unshift(this[i]),n[t].apply(n,e)}}},s=function(e,t,i){n.each(t,function(t,a){n[a]&&(e.prototype[a]=o(t,a,i))})},l=function(e,t){return n.isFunction(e)?e:n.isObject(e)&&!t._isModel(e)?u(e):n.isString(e)?function(t){return t.get(e)}:e},u=function(e){var t=n.matches(e);return function(e){return t(e.attributes)}},d=t.Events={},c=/\s+/,f=function(e,t,i,a,r){var o,s=0;if(i&&"object"==typeof i){void 0!==a&&"context"in r&&void 0===r.context&&(r.context=a);for(o=n.keys(i);s<o.length;s++)t=f(e,t,o[s],i[o[s]],r)}else if(i&&c.test(i))for(o=i.split(c);s<o.length;s++)t=e(t,o[s],a,r);else t=e(t,i,a,r);return t};d.on=function(e,t,n){return h(this,e,t,n)};var h=function(e,t,n,i,a){if(e._events=f(p,e._events||{},t,n,{context:i,ctx:e,listening:a}),a){(e._listeners||(e._listeners={}))[a.id]=a}return e};d.listenTo=function(e,t,i){if(!e)return this;var a=e._listenId||(e._listenId=n.uniqueId("l")),r=this._listeningTo||(this._listeningTo={}),o=r[a];if(!o){var s=this._listenId||(this._listenId=n.uniqueId("l"));o=r[a]={obj:e,objId:a,id:s,listeningTo:r,count:0}}return h(e,t,i,this,o),this};var p=function(e,t,n,i){if(n){var a=e[t]||(e[t]=[]),r=i.context,o=i.ctx,s=i.listening;s&&s.count++,a.push({callback:n,context:r,ctx:r||o,listening:s})}return e};d.off=function(e,t,n){return this._events?(this._events=f(m,this._events,e,t,{context:n,listeners:this._listeners}),this):this},d.stopListening=function(e,t,i){var a=this._listeningTo;if(!a)return this;for(var r=e?[e._listenId]:n.keys(a),o=0;o<r.length;o++){var s=a[r[o]];if(!s)break;s.obj.off(t,i,this)}return this};var m=function(e,t,i,a){if(e){var r,o=0,s=a.context,l=a.listeners;if(t||i||s){for(var u=t?[t]:n.keys(e);o<u.length;o++){t=u[o];var d=e[t];if(!d)break;for(var c=[],f=0;f<d.length;f++){var h=d[f];i&&i!==h.callback&&i!==h.callback._callback||s&&s!==h.context?c.push(h):(r=h.listening)&&0==--r.count&&(delete l[r.id],delete r.listeningTo[r.objId])}c.length?e[t]=c:delete e[t]}return e}for(var p=n.keys(l);o<p.length;o++)r=l[p[o]],delete l[r.id],delete r.listeningTo[r.objId]}};d.once=function(e,t,i){var a=f(g,{},e,t,n.bind(this.off,this));return"string"==typeof e&&null==i&&(t=void 0),this.on(a,t,i)},d.listenToOnce=function(e,t,i){var a=f(g,{},t,i,n.bind(this.stopListening,this,e));return this.listenTo(e,a)};var g=function(e,t,i,a){if(i){var r=e[t]=n.once(function(){a(t,r),i.apply(this,arguments)});r._callback=i}return e};d.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),n=Array(t),i=0;i<t;i++)n[i]=arguments[i+1];return f(v,this._events,e,void 0,n),this};var v=function(e,t,n,i){if(e){var a=e[t],r=e.all;a&&r&&(r=r.slice()),a&&_(a,i),r&&_(r,[t].concat(i))}return e},_=function(e,t){var n,i=-1,a=e.length,r=t[0],o=t[1],s=t[2];switch(t.length){case 0:for(;++i<a;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<a;)(n=e[i]).callback.call(n.ctx,r);return;case 2:for(;++i<a;)(n=e[i]).callback.call(n.ctx,r,o);return;case 3:for(;++i<a;)(n=e[i]).callback.call(n.ctx,r,o,s);return;default:for(;++i<a;)(n=e[i]).callback.apply(n.ctx,t);return}};d.bind=d.on,d.unbind=d.off,n.extend(t,d);var y=t.Model=function(e,t){var i=e||{};t||(t={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(i=this.parse(i,t)||{});var a=n.result(this,"defaults");i=n.defaults(n.extend({},a,i),a),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(y.prototype,d,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},matches:function(e){return!!n.iteratee(e,this)(this.attributes)},set:function(e,t,i){if(null==e)return this;var a;if("object"==typeof e?(a=e,i=t):(a={})[e]=t,i||(i={}),!this._validate(a,i))return!1;var r=i.unset,o=i.silent,s=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=n.clone(this.attributes),this.changed={});var u=this.attributes,d=this.changed,c=this._previousAttributes;for(var f in a)t=a[f],n.isEqual(u[f],t)||s.push(f),n.isEqual(c[f],t)?delete d[f]:d[f]=t,r?delete u[f]:u[f]=t;if(this.idAttribute in a&&(this.id=this.get(this.idAttribute)),!o){s.length&&(this._pending=i);for(var h=0;h<s.length;h++)this.trigger("change:"+s[h],this,u[s[h]],i)}if(l)return this;if(!o)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&n.clone(this.changed);var t=this._changing?this._previousAttributes:this.attributes,i={};for(var a in e){var r=e[a];n.isEqual(t[a],r)||(i[a]=r)}return!!n.size(i)&&i},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=n.extend({parse:!0},e);var t=this,i=e.success;return e.success=function(n){var a=e.parse?t.parse(n,e):n;if(!t.set(a,e))return!1;i&&i.call(e.context,t,n,e),t.trigger("sync",t,n,e)},I(this,e),this.sync("read",this,e)},save:function(e,t,i){var a;null==e||"object"==typeof e?(a=e,i=t):(a={})[e]=t,i=n.extend({validate:!0,parse:!0},i);var r=i.wait;if(a&&!r){if(!this.set(a,i))return!1}else if(!this._validate(a,i))return!1;var o=this,s=i.success,l=this.attributes;i.success=function(e){o.attributes=l;var t=i.parse?o.parse(e,i):e;if(r&&(t=n.extend({},a,t)),t&&!o.set(t,i))return!1;s&&s.call(i.context,o,e,i),o.trigger("sync",o,e,i)},I(this,i),a&&r&&(this.attributes=n.extend({},l,a));var u=this.isNew()?"create":i.patch?"patch":"update";"patch"!==u||i.attrs||(i.attrs=a);var d=this.sync(u,this,i);return this.attributes=l,d},destroy:function(e){e=e?n.clone(e):{};var t=this,i=e.success,a=e.wait,r=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(n){a&&r(),i&&i.call(e.context,t,n,e),t.isNew()||t.trigger("sync",t,n,e)};var o=!1;return this.isNew()?n.defer(e.success):(I(this,e),o=this.sync("delete",this,e)),a||r(),o},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||D();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend({},e,{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return!i||(this.trigger("invalid",this,i,n.extend(t,{validationError:i})),!1)}});var b={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};s(y,b,"attributes");var w=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},k={add:!0,remove:!0,merge:!0},j={add:!0,remove:!1},x=function(e,t,n){n=Math.min(Math.max(n,0),e.length);var i,a=Array(e.length-n),r=t.length;for(i=0;i<a.length;i++)a[i]=e[i+n];for(i=0;i<r;i++)e[i+n]=t[i];for(i=0;i<a.length;i++)e[i+r+n]=a[i]};n.extend(w.prototype,d,{model:y,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,j))},remove:function(e,t){t=n.extend({},t);var i=!n.isArray(e);e=i?[e]:e.slice();var a=this._removeModels(e,t);return!t.silent&&a.length&&(t.changes={added:[],merged:[],removed:a},this.trigger("update",this,t)),i?a[0]:a},set:function(e,t){if(null!=e){t=n.extend({},k,t),t.parse&&!this._isModel(e)&&(e=this.parse(e,t)||[]);var i=!n.isArray(e);e=i?[e]:e.slice();var a=t.at;null!=a&&(a=+a),a>this.length&&(a=this.length),a<0&&(a+=this.length+1);var r,o,s=[],l=[],u=[],d=[],c={},f=t.add,h=t.merge,p=t.remove,m=!1,g=this.comparator&&null==a&&t.sort!==!1,v=n.isString(this.comparator)?this.comparator:null;for(o=0;o<e.length;o++){r=e[o];var _=this.get(r);if(_){if(h&&r!==_){var y=this._isModel(r)?r.attributes:r;t.parse&&(y=_.parse(y,t)),_.set(y,t),u.push(_),g&&!m&&(m=_.hasChanged(v))}c[_.cid]||(c[_.cid]=!0,s.push(_)),e[o]=_}else f&&(r=e[o]=this._prepareModel(r,t))&&(l.push(r),this._addReference(r,t),c[r.cid]=!0,s.push(r))}if(p){for(o=0;o<this.length;o++)r=this.models[o],c[r.cid]||d.push(r);d.length&&this._removeModels(d,t)}var b=!1,w=!g&&f&&p;if(s.length&&w?(b=this.length!==s.length||n.some(this.models,function(e,t){return e!==s[t]}),this.models.length=0,x(this.models,s,0),this.length=this.models.length):l.length&&(g&&(m=!0),x(this.models,l,null==a?this.length:a),this.length=this.models.length),m&&this.sort({silent:!0}),!t.silent){for(o=0;o<l.length;o++)null!=a&&(t.index=a+o),r=l[o],r.trigger("add",r,this,t);(m||b)&&this.trigger("sort",this,t),(l.length||d.length||u.length)&&(t.changes={added:l,removed:d,merged:u},this.trigger("update",this,t))}return i?e[0]:e}},reset:function(e,t){t=t?n.clone(t):{};for(var i=0;i<this.models.length;i++)this._removeReference(this.models[i],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return r.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e]||this._byId[this.modelId(e.attributes||e)]||e.cid&&this._byId[e.cid]},has:function(e){return null!=this.get(e)},at:function(e){return e<0&&(e+=this.length),this.models[e]},where:function(e,t){return this[t?"find":"filter"](e)},findWhere:function(e){return this.where(e,!0)},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var i=t.length;return n.isFunction(t)&&(t=n.bind(t,this)),1===i||n.isString(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return this.map(e+"")},fetch:function(e){e=n.extend({parse:!0},e);var t=e.success,i=this;return e.success=function(n){var a=e.reset?"reset":"set";i[a](n,e),t&&t.call(e.context,i,n,e),i.trigger("sync",i,n,e)},I(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};var i=t.wait;if(!(e=this._prepareModel(e,t)))return!1;i||this.add(e,t);var a=this,r=t.success;return t.success=function(e,t,n){i&&a.add(e,n),r&&r.call(n.context,e,t,n)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;t=t?n.clone(t):{},t.collection=this;var i=new this.model(e,t);return i.validationError?(this.trigger("invalid",this,i.validationError,t),!1):i},_removeModels:function(e,t){for(var n=[],i=0;i<e.length;i++){var a=this.get(e[i]);if(a){var r=this.indexOf(a);this.models.splice(r,1),this.length--,delete this._byId[a.cid];var o=this.modelId(a.attributes);null!=o&&delete this._byId[o],t.silent||(t.index=r,a.trigger("remove",a,this,t)),n.push(a),this._removeReference(a,t)}}return n},_isModel:function(e){return e instanceof y},_addReference:function(e,t){this._byId[e.cid]=e;var n=this.modelId(e.attributes);null!=n&&(this._byId[n]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var n=this.modelId(e.attributes);null!=n&&delete this._byId[n],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){if(t){if(("add"===e||"remove"===e)&&n!==this)return;if("destroy"===e&&this.remove(t,i),"change"===e){var a=this.modelId(t.previousAttributes()),r=this.modelId(t.attributes);a!==r&&(null!=a&&delete this._byId[a],null!=r&&(this._byId[r]=t))}}this.trigger.apply(this,arguments)}}),s(w,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models");var C=t.View=function(e){this.cid=n.uniqueId("view"),n.extend(this,n.pick(e,S)),this._ensureElement(),this.initialize.apply(this,arguments)},S=["model","collection","el","id","attributes","className","tagName","events"];n.extend(C.prototype,d,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=n.result(this,"events")),!e)return this;this.undelegateEvents();for(var t in e){var i=e[t];if(n.isFunction(i)||(i=this[i]),i){var a=t.match(/^(\S+)\s*(.*)$/);this.delegate(a[1],a[2],n.bind(i,this))}}return this},delegate:function(e,t,n){return this.$el.on(e+".delegateEvents"+this.cid,t,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,n){return this.$el.off(e+".delegateEvents"+this.cid,t,n),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}}),t.sync=function(e,i,a){var r=E[e];n.defaults(a||(a={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:r,dataType:"json"};if(a.url||(o.url=n.result(i,"url")||D()),null!=a.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(o.contentType="application/json",o.data=JSON.stringify(a.attrs||i.toJSON(a))),a.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),a.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){o.type="POST",a.emulateJSON&&(o.data._method=r);var s=a.beforeSend;a.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",r),s)return s.apply(this,arguments)}}"GET"===o.type||a.emulateJSON||(o.processData=!1);var l=a.error;a.error=function(e,t,n){a.textStatus=t,a.errorThrown=n,l&&l.call(a.context,e,t,n)};var u=a.xhr=t.ajax(n.extend(o,a));return i.trigger("request",i,u,a),u};var E={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var T=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)};n.extend(T.prototype,d,{initialize:function(){},route:function(e,i,a){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(i)&&(a=i,i=""),a||(a=this[i]);var r=this;return t.history.route(e,function(n){var o=r._extractParameters(e,n);r.execute(a,o,i)!==!1&&(r.trigger.apply(r,["route:"+i].concat(o)),r.trigger("route",i,o),t.history.trigger("route",r,i,o))}),this},execute:function(e,t,n){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(/[\-{}\[\]+?.,\\\^$|#\s]/g,"\\$&").replace(/\((.*?)\)/g,"(?:$1)?").replace(/(\(\?)?:\w+/g,function(e,t){return t?e:"([^/?]+)"}).replace(/\*\w+/g,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var i=e.exec(t).slice(1);return n.map(i,function(e,t){return t===i.length-1?e||null:e?decodeURIComponent(e):null})}});var A=t.History=function(){this.handlers=[],this.checkUrl=n.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)};A.started=!1,n.extend(A.prototype,d,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===e.charAt(0)?e.slice(1):e},getFragment:function(e){return null==e&&(e=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),e.replace(/^[#\/]|\s+$/g,"")},start:function(e){if(A.started)throw new Error("Backbone.history has already been started");if(A.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(/^\/+|\/+$/g,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var i=document.body,a=i.insertBefore(this.iframe,i.firstChild).contentWindow;a.document.open(),a.document.close(),a.location.hash="#"+this.fragment}var r=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};if(this._usePushState?r("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?r("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),A.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow)),t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return!!this.matchRoot()&&(e=this.fragment=this.getFragment(e),n.some(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0}))},navigate:function(e,t){if(!A.started)return!1;t&&t!==!0||(t={trigger:!!t}),e=this.getFragment(e||"");var n=this.root;""!==e&&"?"!==e.charAt(0)||(n=n.slice(0,-1)||"/");var i=n+e;if(e=this.decodeFragment(e.replace(/#.*$/,"")),this.fragment!==e){if(this.fragment=e,this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);if(this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var a=this.iframe.contentWindow;t.replace||(a.document.open(),a.document.close()),this._updateHash(a.location,e,t.replace)}}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),t.history=new A;var P=function(e,t){var i,a=this;return i=e&&n.has(e,"constructor")?e.constructor:function(){return a.apply(this,arguments)},n.extend(i,a,t),i.prototype=n.create(a.prototype,e),i.prototype.constructor=i,i.__super__=a.prototype,i};y.extend=w.extend=T.extend=C.extend=A.extend=P;var D=function(){throw new Error('A "url" property or function must be specified')},I=function(e,t){var n=t.error;t.error=function(i){n&&n.call(t.context,e,i,t),e.trigger("error",e,i,t)}};return t})}).call(t,n(80))},,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PixelEvent={COMPLETE_REGISTRATION:"CompleteRegistration",VIEW_CONTENT:"ViewContent"},t.trackPixel=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"undefined"!=typeof fbq&&fbq("track",e,t)}},,,,,,,,,function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);(0,a.default)(function(){(0,a.default)(document).on("click",".ksr-dropdown",function(){var e=(0,a.default)(this);e.toggleClass("open"),setTimeout(function(){(0,a.default)(window).on("click",function(t){(0,a.default)(t.target).closest(e).length||e.removeClass("open")})},0)})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o);n(28),n(9),(0,s.default)(".js-launch-banner",function(e){e.each(function(){function e(){KSR.store.setItem(i,!0)}function t(){n.addClass("banner-hidden")}var n=(0,r.default)(this),i=n.data("id"),a=n.data("one_time");KSR.store.getItem(i)||(n.on("click",".js-close",function(n){e(),t(),n.preventDefault()}),a&&e(),function(){n.removeClass("banner-hidden")}())})})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);n(281),n(9),(0,a.default)(function(){(0,a.default)(".js-lazy-image").livequery(function(){(0,a.default)(this).unveil(500,function(){var e=(0,a.default)('<div class="loader-dots loader-dots--mega loader-dots--inline loader-dots--overlay" />').css("visibility","hidden");(0,a.default)(this).after(e);var t={x:(0,a.default)(this).offset().left+this.clientWidth/2-e.width()/2,y:(0,a.default)(this).offset().top+this.clientHeight/2-e.height()/2};e.css("top",parseInt(t.y)+"px").css("left",parseInt(t.x)+"px").css("visibility","visible"),(0,a.default)(this).load(function(){return e.remove()})})})})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);n(113),n(9),(0,a.default)(function(){(0,a.default)(".js-lazy-video").livequery(function(){var e=this,t=(0,a.default)(this);t.whenNear(500,function(){e.src=t.data("src")})})})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);n(9),(0,a.default)(function(){(0,a.default)(".overlabels .field label.overlabel").livequery(function(){var e=(0,a.default)(this),t=e.siblings("input:not([type=hidden]), textarea, .wym_box");if(t.length||(t=e.parent(".field_with_errors").siblings(".field_with_errors").find("input, textarea")),!t.length)return void e.hide();e.addClass("overlabel-apply"),t.val()&&e.hide(),t.focus(function(){(0,a.default)(this).val()&&e.hide(),e.addClass("field_focused")}).blur(function(){(0,a.default)(this).val()||e.show(),e.removeClass("field_focused")}).on("keydown input change paste cut",function(){var t=(0,a.default)(this);setTimeout(function(){t.val()?e.hide():e.show()},1)}),e.click(function(){t.attr("disabled")||t.focus()})})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(5),s=n(14),l=i(s);!function(){function e(e,t){if(void 0!==e){var n="internal";(0,r.default)("body").is(".widget")&&(n="external"),r.default.ajax({url:e,type:"post",data:{event_type:t,location:n}})}}function t(e){return(0,r.default)("body").is(".widget")||e.closest("#projects_show").length?"Project":e.closest(".school").length?"School":e.closest(".NS_site__homepage_staff_picks").length?"Homepage Editorial":e.closest("#projects_start").length?"Start Project":e.closest("body.posts").length?"Project Post":e.closest("#projects_edit").length?"Project Edit":e.closest("#jobs_index").length?"Jobs Page":e.closest(".activity").length?"Activity":"Other"}function n(e){window.koala_video_progress_endpoint&&(s=setInterval(function(){var t=e.current_position();i(Math.floor(t))},1e3))}function i(e){r.default.ajax({type:"POST",url:window.window.koala_video_progress_endpoint,data:JSON.stringify({project_name:l.default.data.name,project_pid:l.default.data.id,backers_count:l.default.data.backers_count,blurb:l.default.data.blurb,category_name:l.default.data.category.name,comments_count:l.default.data.comments_count,creator_name:l.default.data.creator.name,currency_symbol:l.default.data.currency_symbol,goal:l.default.data.goal,launched_at:l.default.data.launched_at,photo_full:l.default.data.photo.full,photo_thumb:l.default.data.photo.thumb,project_url:l.default.data.urls.web.project,usd_pledged:l.default.data.usd_pledged,video:l.default.data.video,video_playhead_position:e}),contentType:"text/plain; charset=UTF-8"})}function a(e){return function(n){var i=(0,r.default)(n.target),a=t(i),s=i.attr("data-video-name");(0,o.track)(a+" "+e,{video_name:s})}}var s;(0,r.default)(document).on("ksr_video:playing",function(i,a){var s=(0,r.default)(i.target),l=t(s),u=s.data("ksr_video"),d=u.current_position(),c=s.closest(".video-player").attr("data-video-tracker-url"),f=s.attr("data-video-name");n(u),a?(e(c,"start"),(0,o.track)(l+" Video Start",{track_count:s.find("track").length,track_language:s.data("language"),video_name:f})):(0,o.track)(l+" Video Resume",{position:d,video_name:f})}).on("ksr_video:paused",function(e){var n=(0,r.default)(e.target),i=n.data("ksr_video"),a=t(n),l=i.current_position(),u=n.attr("data-video-name");clearInterval(s),(0,o.track)(a+" Video Pause",{position:l,video_name:u})}).on("ksr_video:ended",function(n){var i=(0,r.default)(n.target),a=i.data("ksr_video"),s=t(i),l=a.duration(),u=i.closest(".video-player").attr("data-video-tracker-url"),d=i.attr("data-video-name");e(u,"complete"),(0,o.track)(s+" Video Complete",{duration:l,video_name:d})}).on("ksr_video:change_track",function(e,n){var i=(0,r.default)(e.target),a=t(i),s=i.attr("data-video-name");(0,o.track)(a+" Video Change Track",{track_language:n,video_name:s})}).on("ksr_video:muted",a("Video Mute")).on("ksr_video:unmuted",a("Video Unmute")).on("ksr_video:volume_adjusted",a("Video Volume Adjustment"))}()},,,function(e,t,n){n(0),n(0);(function(){var e,t,n,i,a,r,o,s,l,u,d,c,f,h,p,m,g,v,_,y,b,w,k,j,x=[].slice,C=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};e=window.jQuery||window.Zepto||window.$,e.payment={},e.payment.fn={},e.fn.payment=function(){var t,n;return n=arguments[0],t=2<=arguments.length?x.call(arguments,1):[],e.payment.fn[n].apply(this,t)},a=/(\d{1,4})/g,e.payment.cards=i=[{type:"maestro",patterns:[5018,502,503,506,56,58,639,6220,67],format:a,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"forbrugsforeningen",patterns:[600],format:a,length:[16],cvcLength:[3],luhn:!0},{type:"dankort",patterns:[5019],format:a,length:[16],cvcLength:[3],luhn:!0},{type:"visa",patterns:[4],format:a,length:[13,16],cvcLength:[3],luhn:!0},{type:"mastercard",patterns:[51,52,53,54,55,22,23,24,25,26,27],format:a,length:[16],cvcLength:[3],luhn:!0},{type:"amex",patterns:[34,37],format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:!0},{type:"dinersclub",patterns:[30,36,38,39],format:/(\d{1,4})(\d{1,6})?(\d{1,4})?/,length:[14],cvcLength:[3],luhn:!0},{type:"discover",patterns:[60,64,65,622],format:a,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",patterns:[62,88],format:a,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"jcb",patterns:[35],format:a,length:[16],cvcLength:[3],luhn:!0}],t=function(e){var t,n,a,r,o,s,l,u;for(e=(e+"").replace(/\D/g,""),r=0,s=i.length;r<s;r++)for(t=i[r],u=t.patterns,o=0,l=u.length;o<l;o++)if(a=u[o],n=a+"",e.substr(0,n.length)===n)return t},n=function(e){var t,n,a;for(n=0,a=i.length;n<a;n++)if(t=i[n],t.type===e)return t},f=function(e){var t,n,i,a,r,o;for(i=!0,a=0,n=(e+"").split("").reverse(),r=0,o=n.length;r<o;r++)t=n[r],t=parseInt(t,10),(i=!i)&&(t*=2),t>9&&(t-=9),a+=t;return a%10==0},c=function(e){var t;return null!=e.prop("selectionStart")&&e.prop("selectionStart")!==e.prop("selectionEnd")||!(null==("undefined"!=typeof document&&null!==document&&null!=(t=document.selection)?t.createRange:void 0)||!document.selection.createRange().text)},k=function(e,t){var n,i,a,r,o;try{i=t.prop("selectionStart")}catch(e){e,i=null}if(r=t.val(),t.val(e),null!==i&&t.is(":focus"))return i===r.length&&(i=e.length),r!==e&&(o=r.slice(i-1,+i+1||9e9),n=e.slice(i-1,+i+1||9e9),a=e[i],/\d/.test(a)&&o===a+" "&&n===" "+a&&(i+=1)),t.prop("selectionStart",i),t.prop("selectionEnd",i)},v=function(e){var t,n,i,a,r,o,s,l;for(null==e&&(e=""),i="ï¼ï¼‘ï¼’ï¼“ï¼”ï¼•ï¼–ï¼—ï¼˜ï¼™",a="0123456789",o="",t=e.split(""),s=0,l=t.length;s<l;s++)n=t[s],r=i.indexOf(n),r>-1&&(n=a[r]),o+=n;return o},g=function(t){var n;return n=e(t.currentTarget),setTimeout(function(){var e;return e=n.val(),e=v(e),e=e.replace(/\D/g,""),k(e,n)})},p=function(t){var n;return n=e(t.currentTarget),setTimeout(function(){var t;return t=n.val(),t=v(t),t=e.payment.formatCardNumber(t),k(t,n)})},s=function(n){var i,a,r,o,s,l,u;if(r=String.fromCharCode(n.which),/^\d+$/.test(r)&&(i=e(n.currentTarget),u=i.val(),a=t(u+r),o=(u.replace(/\D/g,"")+r).length,l=16,a&&(l=a.length[a.length.length-1]),!(o>=l||null!=i.prop("selectionStart")&&i.prop("selectionStart")!==u.length)))return s=a&&"amex"===a.type?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/,s.test(u)?(n.preventDefault(),setTimeout(function(){return i.val(u+" "+r)})):s.test(u+r)?(n.preventDefault(),setTimeout(function(){return i.val(u+r+" ")})):void 0},r=function(t){var n,i;if(n=e(t.currentTarget),i=n.val(),8===t.which&&(null==n.prop("selectionStart")||n.prop("selectionStart")===i.length))return/\d\s$/.test(i)?(t.preventDefault(),setTimeout(function(){return n.val(i.replace(/\d\s$/,""))})):/\s\d?$/.test(i)?(t.preventDefault(),setTimeout(function(){return n.val(i.replace(/\d$/,""))})):void 0},m=function(t){var n;return n=e(t.currentTarget),setTimeout(function(){var t;return t=n.val(),t=v(t),t=e.payment.formatExpiry(t),k(t,n)})},l=function(t){var n,i,a;if(i=String.fromCharCode(t.which),/^\d+$/.test(i))return n=e(t.currentTarget),a=n.val()+i,/^\d$/.test(a)&&"0"!==a&&"1"!==a?(t.preventDefault(),setTimeout(function(){return n.val("0"+a+" / ")})):/^\d\d$/.test(a)?(t.preventDefault(),setTimeout(function(){var e,t;return e=parseInt(a[0],10),t=parseInt(a[1],10),t>2&&0!==e?n.val("0"+e+" / "+t):n.val(a+" / ")})):void 0},u=function(t){var n,i,a;if(i=String.fromCharCode(t.which),/^\d+$/.test(i))return n=e(t.currentTarget),a=n.val(),/^\d\d$/.test(a)?n.val(a+" / "):void 0},d=function(t){var n,i,a;if("/"===(a=String.fromCharCode(t.which))||" "===a)return n=e(t.currentTarget),i=n.val(),/^\d$/.test(i)&&"0"!==i?n.val("0"+i+" / "):void 0},o=function(t){var n,i;if(n=e(t.currentTarget),i=n.val(),8===t.which&&(null==n.prop("selectionStart")||n.prop("selectionStart")===i.length))return/\d\s\/\s$/.test(i)?(t.preventDefault(),setTimeout(function(){return n.val(i.replace(/\d\s\/\s$/,""))})):void 0},h=function(t){var n;return n=e(t.currentTarget),setTimeout(function(){var e;return e=n.val(),e=v(e),e=e.replace(/\D/g,"").slice(0,4),k(e,n)})},w=function(e){var t;return!(!e.metaKey&&!e.ctrlKey)||32!==e.which&&(0===e.which||(e.which<33||(t=String.fromCharCode(e.which),!!/[\d\s]/.test(t))))},y=function(n){var i,a,r,o;if(i=e(n.currentTarget),r=String.fromCharCode(n.which),/^\d+$/.test(r)&&!c(i))return o=(i.val()+r).replace(/\D/g,""),a=t(o),a?o.length<=a.length[a.length.length-1]:o.length<=16},b=function(t){var n,i,a;if(n=e(t.currentTarget),i=String.fromCharCode(t.which),/^\d+$/.test(i)&&!c(n))return a=n.val()+i,a=a.replace(/\D/g,""),!(a.length>6)&&void 0},_=function(t){var n,i,a;if(n=e(t.currentTarget),i=String.fromCharCode(t.which),/^\d+$/.test(i)&&!c(n))return a=n.val()+i,a.length<=4},j=function(t){var n,a,r,o,s;if(n=e(t.currentTarget),s=n.val(),o=e.payment.cardType(s)||"unknown",!n.hasClass(o))return a=function(){var e,t,n;for(n=[],e=0,t=i.length;e<t;e++)r=i[e],n.push(r.type);return n}(),n.removeClass("unknown"),n.removeClass(a.join(" ")),n.addClass(o),n.toggleClass("identified","unknown"!==o),n.trigger("payment.cardType",o)},e.payment.fn.formatCardCVC=function(){return this.on("keypress",w),this.on("keypress",_),this.on("paste",h),this.on("change",h),this.on("input",h),this},e.payment.fn.formatCardExpiry=function(){return this.on("keypress",w),this.on("keypress",b),this.on("keypress",l),this.on("keypress",d),this.on("keypress",u),this.on("keydown",o),this.on("change",m),this.on("input",m),this},e.payment.fn.formatCardNumber=function(){return this.on("keypress",w),this.on("keypress",y),this.on("keypress",s),this.on("keydown",r),this.on("keyup",j),this.on("paste",p),this.on("change",p),this.on("input",p),this.on("input",j),this},e.payment.fn.restrictNumeric=function(){return this.on("keypress",w),this.on("paste",g),this.on("change",g),this.on("input",g),this},e.payment.fn.cardExpiryVal=function(){return e.payment.cardExpiryVal(e(this).val())},e.payment.cardExpiryVal=function(e){var t,n,i,a;return a=e.split(/[\s\/]+/,2),t=a[0],i=a[1],2===(null!=i?i.length:void 0)&&/^\d+$/.test(i)&&(n=(new Date).getFullYear(),n=n.toString().slice(0,2),i=n+i),t=parseInt(t,10),i=parseInt(i,10),{month:t,year:i}},e.payment.validateCardNumber=function(e){var n,i;return e=(e+"").replace(/\s+|-/g,""),!!/^\d+$/.test(e)&&(!!(n=t(e))&&(i=e.length,C.call(n.length,i)>=0&&(n.luhn===!1||f(e))))},e.payment.validateCardExpiry=function(t,n){var i,a,r;return"object"==typeof t&&"month"in t&&(r=t,t=r.month,n=r.year),!(!t||!n)&&(t=e.trim(t),n=e.trim(n),!!/^\d+$/.test(t)&&(!!/^\d+$/.test(n)&&(1<=t&&t<=12&&(2===n.length&&(n=n<70?"20"+n:"19"+n),4===n.length&&(a=new Date(n,t),i=new Date,a.setMonth(a.getMonth()-1),a.setMonth(a.getMonth()+1,1),a>i)))))},e.payment.validateCardCVC=function(t,i){var a,r;return t=e.trim(t),!!/^\d+$/.test(t)&&(a=n(i),null!=a?(r=t.length,C.call(a.cvcLength,r)>=0):t.length>=3&&t.length<=4)},e.payment.cardType=function(e){var n;return e?(null!=(n=t(e))?n.type:void 0)||null:null},e.payment.formatCardNumber=function(n){var i,a,r,o;return n=n.replace(/\D/g,""),(i=t(n))?(r=i.length[i.length.length-1],n=n.slice(0,r),i.format.global?null!=(o=n.match(i.format))?o.join(" "):void 0:null!=(a=i.format.exec(n))?(a.shift(),a=e.grep(a,function(e){return e}),a.join(" ")):void 0):n},e.payment.formatExpiry=function(e){var t,n,i,a;return(n=e.match(/^\D*(\d{1,2})(\D+)?(\d{1,4})?/))?(t=n[1]||"",i=n[2]||"",a=n[3]||"",a.length>0?i=" / ":" /"===i?(t=t.substring(0,1),i=""):2===t.length||i.length>0?i=" / ":1===t.length&&"0"!==t&&"1"!==t&&(t="0"+t,i=" / "),t+i+a):""}}).call(this)},function(e,t,n){n(0),n(0);!function(e){e(n(0),n(501))}(function(e,t){e.fn.spin=function(n,i){return this.each(function(){var a=e(this),r=a.data();r.spinner&&(r.spinner.stop(),delete r.spinner),n!==!1&&(n=e.extend({color:i||a.css("color")},e.fn.spin.presets[n]||n),r.spinner=new t(n).spin(this))})},e.fn.spin.presets={tiny:{lines:8,length:2,width:2,radius:3},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}}})},,,,,function(e,t,n){n(0),n(0);!function(e){e.fn.unveil=function(t,n){function i(){var t=u.filter(function(){var t=e(this);if(!t.is(":hidden")){var n=r.scrollTop(),i=n+r.height(),a=t.offset().top;return a+t.height()>=n-o&&a<=i+o}});a=t.trigger("unveil"),u=u.not(a)}var a,r=e(window),o=t||0,s=window.devicePixelRatio>1,l=s?"data-src-retina":"data-src",u=this;return this.one("unveil",function(){var e=this.getAttribute(l);(e=e||this.getAttribute("data-src"))&&(this.setAttribute("src",e),"function"==typeof n&&n.call(this))}),r.scroll(i),r.resize(i),i(),this}}(window.jQuery||window.Zepto)},,,,,,,,,,,,,,,,function(e,t,n){"use strict";n(314),n(315),n(313),n(316),n(317)},,,,function(e,t,n){"use strict";var i=n(22),a=function(e){return e&&e.__esModule?e:{default:e}}(i);(0,a.default)(function(){(0,a.default)(".mobius.click").livequery(function(){function e(){t=i.find("*[data-cursor]:last")}var t,n,i=(0,a.default)(this),r=i.parent().find("a.load_more"),o=i.parent().find(".loading");e(),n=t.length,i.mobius({trigger_next:r,prepend_next:!i.data("mobius_append"),url:i.data("mobius_url")||!1,page_param:n?"cursor":"page",extra_params:i.data("mobius_extra_params"),page_by:function(i){return n?(e(),t.data("cursor")):i?i+1:1}}),i.data("mobius"),i.on("mobius:loading_page",function(){o.show(),r.parent().hide()}),i.on("mobius:loaded_page",function(e,t,n){i.parent().find(".count .current").text(i.find("li.item").length),o.hide(),n.data("last_page")?r.parent().hide():r.parent().show()})}),(0,a.default)(".mobius:not(.click)").livequery(function(){function e(){o=l.find("*[data-cursor]:last")}var t,n,i,r,o,s,l=(0,a.default)(this);l.find(".page").data("last_page")||(e(),s=o.length,t=l.mobius({url:l.data("url"),paused:l.is(".paused"),page_param:s?"cursor":"page",extra_params:l.data("extra_params")||"",page_by:function(t){return s?(e(),o.data("cursor")):t?t+1:1}}).data("mobius"),l.length&&(n=(0,a.default)(".js-mini-footer--sticky"),r=(0,a.default)(".js-mini-footer__links"),r.mouseenter(function(){n.addClass("is-visible")}),n.mouseleave(function(){n.removeClass("is-visible")}),l.on("mobius:loaded_page",function(e,r,o){o.data("last_page")?(t.pause(),l.siblings(".load_more").hide(),i=n.clone(),n.remove()):(t.play(),l.siblings(".load_more").show(),(0,a.default)("body").append(i))})))})})},,function(e,t,n){var i=n(0);n(0);!function(e){function t(e,t){return"function"==typeof e?e.call(t):e}function n(e){for(;e=e.parentNode;)if(e==document)return!0;return!1}function i(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName}function a(){return"tipsyuid"+o++}function r(t,n){this.$element=e(t),this.options=n,this.enabled=!0,this.fixTitle()}var o=0;r.prototype={show:function(){if(n(this.$element[0])&&(!i(this.$element)||this.$element.is(":visible"))){var r;if(this.enabled&&(r=this.getTitle())){var o=this.tip();o.find(".tipsy-inner"+this.options.theme)[this.options.html?"html":"text"](r),o[0].className="tipsy"+this.options.theme,this.options.className&&o.addClass(t(this.options.className,this.$element[0])),o.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var s=e.extend({},this.$element.offset());s=this.$element.parents("svg").size()>0?e.extend(s,this.$element[0].getBBox()):e.extend(s,{width:this.$element[0].offsetWidth||0,height:this.$element[0].offsetHeight||0});var l,u=o[0].offsetWidth,d=o[0].offsetHeight,c=t(this.options.gravity,this.$element[0]);switch(c.charAt(0)){case"n":l={top:s.top+s.height+this.options.offset,left:s.left+s.width/2-u/2};break;case"s":l={top:s.top-d-this.options.offset,left:s.left+s.width/2-u/2};break;case"e":l={top:s.top+s.height/2-d/2,left:s.left-u-this.options.offset};break;case"w":l={top:s.top+s.height/2-d/2,left:s.left+s.width+this.options.offset}}if(2==c.length&&("w"==c.charAt(1)?l.left=s.left+s.width/2-15:l.left=s.left+s.width/2-u+15),o.css(l).addClass("tipsy-"+c+this.options.theme),o.find(".tipsy-arrow"+this.options.theme)[0].className="tipsy-arrow"+this.options.theme+" tipsy-arrow-"+c.charAt(0)+this.options.theme,this.options.fade?(this.options.shadow&&e(".tipsy-inner").css({"box-shadow":"0px 0px "+this.options.shadowBlur+"px "+this.options.shadowSpread+"px rgba(0, 0, 0, "+this.options.shadowOpacity+")","-webkit-box-shadow":"0px 0px "+this.options.shadowBlur+"px "+this.options.shadowSpread+"px rgba(0, 0, 0, "+this.options.shadowOpacity+")"}),o.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity})):o.css({visibility:"visible",opacity:this.options.opacity}),this.options.aria){var f=a();o.attr("id",f),this.$element.attr("aria-describedby",f)}}}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){e(this).remove()}):this.tip().remove(),this.options.aria&&this.$element.removeAttr("aria-describedby")},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("original-title"))&&e.attr("original-title",e.attr("title")||"").removeAttr("title")},getTitle:function(){var e,t=this.$element,n=this.options;return this.fixTitle(),"string"==typeof n.title?e=t.attr("title"==n.title?"original-title":n.title):"function"==typeof n.title&&(e=n.title.call(t[0])),(e=(""+e).replace(/(^\s*|\s*$)/,""))||n.fallback},tip:function(){return this.$tip||(this.$tip=e('<div class="tipsy'+this.options.theme+'"></div>').html('<div class="tipsy-arrow'+this.options.theme+'"></div><div class="tipsy-inner'+this.options.theme+'"></div>').attr("role","tooltip"),this.$tip.data("tipsy-pointee",this.$element[0])),this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}},e.fn.tipsy=function(t){function i(n){var i=e.data(n,"tipsy");return i||(i=new r(n,e.fn.tipsy.elementOptions(n,t)),e.data(n,"tipsy",i)),i}function a(){if(e.fn.tipsy.enabled===!0){var a=i(this);a.hoverState="in",0===t.delayIn?a.show():(a.fixTitle(),setTimeout(function(){"in"==a.hoverState&&n(a.$element)&&a.show()},t.delayIn))}}function o(){var e=i(this);e.hoverState="out",0===t.delayOut?e.hide():setTimeout(function(){"out"!=e.hoverState&&e.$element&&e.$element.is(":visible")||e.hide()},t.delayOut)}if(e.fn.tipsy.enable(),t===!0)return this.data("tipsy");if("string"==typeof t){var s=this.data("tipsy");return s&&s[t](),this}if(t=e.extend({},e.fn.tipsy.defaults,t),t.theme=t.theme&&""!==t.theme?"-"+t.theme:"",t.live||this.each(function(){i(this)}),"manual"!=t.trigger){var l="hover"==t.trigger?"mouseenter mouseover touchstart":"focus",u="hover"==t.trigger?"mouseleave mouseout touchmove touchleave":"blur";if(t.live&&t.live!==!0)e(this).on(l,t.live,a),e(this).on(u,t.live,o);else{if(t.live&&!e.live)throw"Since jQuery 1.9, pass selector as live argument. eg. $(document).tipsy({live: 'a.live'});";var d=t.live?"live":"bind";this[d](l,a)[d](u,o)}}return this},e.fn.tipsy.defaults={aria:!1,className:null,delayIn:0,delayOut:0,fade:!1,shadow:!1,shadowBlur:8,shadowOpacity:1,shadowSpread:0,fallback:"",gravity:"n",html:!1,live:!1,offset:0,opacity:.8,title:"title",trigger:"hover",theme:""},e.fn.tipsy.revalidate=function(){e(".tipsy").each(function(){var t=e.data(this,"tipsy-pointee");t&&n(t)||e(this).remove()})},e.fn.tipsy.enable=function(){e.fn.tipsy.enabled=!0},e.fn.tipsy.disable=function(){e.fn.tipsy.enabled=!1},e.fn.tipsy.elementOptions=function(t,n){return e.metadata?e.extend({},n,e(t).metadata()):n},e.fn.tipsy.autoNS=function(){return e(this).offset().top>e(document).scrollTop()+e(window).height()/2?"s":"n"},e.fn.tipsy.autoWE=function(){return e(this).offset().left>e(document).scrollLeft()+e(window).width()/2?"e":"w"},e.fn.tipsy.autoNWNE=function(){return e(this).offset().left>e(document).scrollLeft()+e(window).width()/2?"ne":"nw"},e.fn.tipsy.autoSWSE=function(){return e(this).offset().left>e(document).scrollLeft()+e(window).width()/2?"se":"sw"},e.fn.tipsy.autoBounds=function(t,n,i){return function(){var a={ns:i[0],ew:i.length>1&&i[1]},r=e(document).scrollTop()+t,o=e(document).scrollLeft()+n,s=e(this);return s.offset().top<r&&(a.ns="n"),s.offset().left<o&&(a.ew="w"),e(window).width()+e(document).scrollLeft()-s.offset().left<n&&(a.ew="e"),e(window).height()+e(document).scrollTop()-s.offset().top<t&&(a.ns="s"),a.ns+(a.ew?a.ew:"")}}}(i)},,,function(e,t,n){"use strict";e.exports=n(476)},,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(3),s=i(o),l=n(2),u=i(l),d=n(1),c=i(d),f=n(5);n(36),n(275),n(63),(0,u.default)("#credit_card_form.js-ksr-stripe",function(e){function t(e){return"string"==typeof e?r.default.trim(e):e}function n(e){var t=e.data("error");void 0!==t&&A.hasOwnProperty(t)&&(e.attr("aria-invalid",!0).closest("li").addClass("invalid").find(".js-error-messages").html("<li>"+A[t]+"</li>"),(0,f.track)("Checkout Error",{type:t,checkout_reward_id:x,checkout_id:S,checkout_is_guest:E}))}function i(e){return/^(450823|450875|450878)/.test(e)?"visa":r.default.payment.cardType(e)}function a(e){return s.default.include(T,e)}function o(e){return r.default.payment.validateCardNumber(e)}function l(e,t){return r.default.payment.validateCardCVC(e,t)}if(0===(0,r.default)("#react-payments-form").length){var u=e.find("form"),d=(0,r.default)("#saving-layer"),h=e.find(".errored"),p=u.find("#name"),m=u.find("#number"),g=u.find("#cvc"),v=u.find("#exp_month"),_=u.find("#exp_year"),y=u.find("#reusable"),b=(0,r.default)("#js-stripe_form"),w=b.find("#stripe_token"),k=b.find("#stripe_reusable"),j=b.find("#payment_type"),x=e.data("checkout-reward-id"),C=parseFloat(e.data("checkout-amount")),S=e.data("checkout-id"),E=""===e.data("checkout-is-guest"),T=u.data("accepted-card-types"),A={name_presence:c.default.t("onloads.views.credit_cards.form.Cardholder_name_must_be_present"),number_presence:c.default.t("onloads.views.credit_cards.form.Card_number_must_be_present"),number_invalid:c.default.t("onloads.views.credit_cards.form.Card_number_format_is_invalid"),type_invalid:c.default.t("onloads.views.credit_cards.form.Card_type_is_not_accepted"),security_code_presence:c.default.t("onloads.views.credit_cards.form.Card_security_code_must_be_present"),security_code_invalid:c.default.t("onloads.views.credit_cards.form.Card_security_code_format_is_invalid"),exp_month_presence:c.default.t("onloads.views.credit_cards.form.Card_expiration_month_must_be_present"),exp_month_invalid:c.default.t("onloads.views.credit_cards.form.Card_expiration_date_must_be_in_the_future"),exp_year_presence:c.default.t("onloads.views.credit_cards.form.Card_expiration_year_must_be_present"),exp_year_invalid:c.default.t("onloads.views.credit_cards.form.Card_expiration_date_must_be_in_the_future"),stripe_timeout:c.default.t("onloads.views.credit_cards.form.Well_this_is_embarrassing_Processing_your_pledge")},P="new";p.validates_presence({error:"name_presence"}),m.validates_presence({error:"number_presence"}),m.validates_custom(function(e){return o(e)},{error:"number_invalid",when:function(){return r.default.trim(m.val()).length>0}}),m.validates_custom(function(e){return a(i(e))},{error:"type_invalid",when:function(){return r.default.trim(m.val()).length>0&&o(m.val())}}),g.validates_presence({error:"security_code_presence"}),g.validates_custom(function(e){return l(e,i(m.val()))},{error:"security_code_invalid",when:function(){return r.default.trim(g.val()).length>0}}),v.validates_presence({error:"exp_month_presence"}),v.validates_custom(function(e){return parseInt(e,10)>=(new Date).getMonth()+1},{error:"exp_month_invalid",when:function(){return parseInt(_.val(),10)<=(new Date).getFullYear()}}),_.validates_presence({error:"exp_year_presence"}),_.validates_custom(function(e){return parseInt(e,10)>=(new Date).getFullYear()},{error:"exp_year_invalid"}),p.add(m).add(g).on("keyup input paste cut",function(){(0,r.default)(this).validate()}).on("blur",function(){n((0,r.default)(this))}),v.on("change",function(){v.validate(),n(v),_.validate(),n(_)}),_.on("change",function(){_.validate(),n(_),v.validate(),n(v)}),u.find(":input").on("validate:valid",function(){(0,r.default)(this).data("error",null).attr("aria-invalid",!1).closest("li").removeClass("invalid")}).on("validate:invalid",function(e,t){(0,r.default)(this).data("error",t)}),m.on("validate:valid",function(){e.find("#js-card_type_list").addClass("selected").find(".js-"+i(m.val())).addClass("selected")}).on("validate:invalid",function(){e.find("#js-card_type_list").removeClass("selected").find("li").removeClass("selected")}),m.payment("formatCardNumber"),g.payment("formatCardCVC"),u.on("submit",function(e){if(e.preventDefault(),u.validate()){h.html("").addClass("hide"),d.show();var i=setTimeout(function(){d.find(".modal_dialog_body").html(A.stripe_timeout),d.removeClass("spinning"),(0,f.track)("Checkout Error",{type:"stripe_timeout",checkout_reward_id:x,checkout_id:S,checkout_is_guest:E}),r.default.ajax({url:"/client_error",type:"post",data:{error:"stripe timeout",url:window.location.toString()}})},3e4);Stripe.setPublishableKey(u.data("public-key")),Stripe.card.createToken({name:t(p.val()),number:t(m.val()),exp_month:t(v.val()),exp_year:t(_.val()),cvc:t(g.val())},function(e,t){t.error?(clearTimeout(i),d.hide(),h.html("<li>"+t.error.message+"</li>").removeClass("hide"),(0,f.track)("Checkout Error",{type:"stripe_token",context:t.error.message,checkout_reward_id:x,checkout_id:S,checkout_is_guest:E})):(w.val(t.id),k.val(y.is(":checked")),j.val("credit_card"),b.submit())})}else u.find(":input").each(function(){n((0,r.default)(this))})}),function(){function e(e){e.preventDefault(),(0,r.default)(".payment_option.selected").find(".account_toggle.radio").length?t=(0,r.default)("#sepa-account-info"):(0,r.default)(".js-credit-card-choice").length||(t=(0,r.default)("#new_card_form").find("form")),(0,f.track)("Submitted Payment Source Form",{type:P,checkout_reward_id:x,checkout_amount:C}),t.submit()}var t=(0,r.default)("#new_card_form").find("form"),n=(0,r.default)(".selected input.card_toggle");(0,r.default)("#credit_card_form .errored").not(".hide").length&&(n=(0,r.default)("#new-card input.card_toggle")),n.length||(n=(0,r.default)("input.card_toggle:first")),(0,r.default)(document).on("change click","input.card_toggle",function(e){e.preventDefault();var n,i=(0,r.default)(this),a=(0,r.default)("#new_card_form");i.is("input.card_toggle")||(i=i.find("input.card_toggle")),n=(0,r.default)("input.card_toggle").not(i),n.prop("checked",!1),i.prop("checked",!0),n.closest(".payment_option").removeClass("selected"),i.closest(".payment_option").addClass("selected"),i.closest("#new-card").length?(a.slideDown(400),t=a.find("form"),P="new"):(a.slideUp(400),t=i.closest("form"),P="stored"),(0,f.track)("Selected Payment Source",{type:P,checkout_reward_id:x,checkout_id:S,checkout_is_guest:E})}),(0,r.default)(document).on("click",".js-pledge-submit",e),n.prop("checked",!0).trigger("change")}()}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a);(0,i(n(2)).default)("#credit_cards_index",function(e){var t=e.find(".js-add-source"),n=e.find(".payment_form");t.on("click",function(){n.removeClass("hide"),(0,r.default)(this).addClass("hide")})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(7),u=i(l),d=n(1),c=i(d),f=n(5);n(36),(0,s.default)("#credit_cards_new",function(e){var t,n=e.find(".js-new-card-form"),i=e.find(".js-credit-card-choice"),a=e.find(".js-edit-ccs"),o=c.default.t("onloads.views.credit_cards.new.This_card_will_not_be_shown_again"),s=c.default.t("onloads.views.credit_cards.new.Edit_credit_cards"),l=c.default.t("onloads.views.credit_cards.new.Cancel"),d=c.default.t("onloads.views.credit_cards.new.Looks_like_something_went_wrong");i.on("click",".js-remove-cc-btn",function(e){t=(0,r.default)(e.delegateTarget)}),(0,r.default)(document).on("click",".js-yes-remove-btn",function(e){e.preventDefault();var a=(0,r.default)(this),s=a.attr("href");r.default.getJSON(s,function(){if((0,r.default)(".modal_dialog").trigger("close.modal_dialog"),t.remove(),(0,u.default)({success:o}),(0,r.default)(".js-credit-card-choice").length){i.find(".js-credit-card-info").first().click()}else(0,r.default)(".js-stored-card-form").html(n),n.show()}).fail(function(){(0,r.default)(".modal_dialog").trigger("close.modal_dialog"),(0,u.default)({error:d})})}),a.on("click",function(e){e.preventDefault(),i.find(".js-remove-cc-btn").toggle(),a.toggleClass("js-editing-inactive"),a.hasClass("js-editing-inactive")?((0,r.default)(this).text(s),(0,f.track)("Collapsed Edit Payment Sources Form")):((0,r.default)(this).text(l),(0,f.track)("Expanded Edit Payment Sources Form"))})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(5),s=n(1),l=i(s),u=n(242),d=i(u);n(36),(0,r.default)(function(){function e(){var e=!0;return(0,r.default)("#sepa-account-info .required :input:not(#sepa_account_number)").each(function(){var t=(0,r.default)(this);r.default.trim(t.val())?t.closest("li").removeClass("invalid"):(t.closest("li").addClass("invalid"),e=!1)}),(0,r.default)("#accept_terms").is(":checked")?(0,r.default)("#accept_terms").closest("li").removeClass("invalid"):((0,r.default)("#accept_terms").closest("li").addClass("invalid"),e=!1),d.default.isValid((0,r.default)("#sepa_account_number").val())&&0===(0,r.default)("#sepa_account_number").val().indexOf("DE")?(0,r.default)("#sepa_account_number").closest("li").removeClass("invalid"):((0,r.default)("#sepa_account_number").closest("li").addClass("invalid"),e=!1),e}function t(){var e=(0,r.default)("#reusable").is(":checked"),t=(0,r.default)("#saving-layer"),n=(0,r.default)("#js-stripe_form");n.find("#stripe_reusable").val(e);var i=c(n,t);Stripe.setPublishableKey(a),Stripe.bankAccount.createToken({country:"DE",account_number:(0,r.default)("#sepa_account_number").val(),currency:"eur",account_holder_name:(0,r.default)("#account_name").val(),address_line1:(0,r.default)("#sepa_address_line1").val(),address_line2:(0,r.default)("#sepa_address_line2").val(),address_city:(0,r.default)("#sepa_address_city").val(),address_zip:(0,r.default)("#sepa_address_zip").val(),usage:"credit_debit"},i)}if(!(0,r.default)("#react-payments-form").length){var n,i=(0,r.default)("#sepa_account_form.js-ksr-stripe"),a=i.find("form").attr("data-public-key"),s=(0,r.default)("#sepa-account-info"),u=s.find(".errored"),f=(0,r.default)("#saving-layer");(0,r.default)(document).on("change click","input.account_toggle",function(){(0,r.default)(this).closest(".payment_option").addClass("selected");var e=(0,r.default)("input.card_toggle");e.closest(".payment_option").removeClass("selected"),e.prop("checked",!1),(0,r.default)("#new_payment_bank_account").slideDown(400,"easeOutQuad"),(0,r.default)("#new_card_form").slideUp(400,"easeOutQuad")}),(0,r.default)(document).on("change click","input.card_toggle",function(){(0,r.default)("input.account_toggle").prop("checked",!1);var e=(0,r.default)("#new_payment_bank_account");(0,r.default)("input.account_toggle").closest(".payment_option").removeClass("selected"),e.slideUp(400,"easeOutQuad")}),(0,r.default)(document).on("click",".sepa-terms__toggle",function(e){e.preventDefault(),(0,r.default)(".sepa-terms__mandate").toggleClass("sepa-terms__mandate--expanded")}),s.on("submit",function(i){if(e()){u.hide(),f.show(),(0,r.default)("input#payment_type").val("bank_account");var a=t()||"";a.length&&(clearTimeout(n),u.html(a),u.show(),(0,o.track)("SEPA error",{error_type:"tokenization_error"})),i.preventDefault(),n=setTimeout(function(){f.find(".modal_dialog_body").html(l.default.t("onloads.views.credit_cards.form.Well_this_is_embarrassing_Processing_your_pledge")),f.removeClass("spinning"),r.default.ajax({url:"/client_error",type:"post",data:{error:"stripe timeout",url:window.location.toString()}})},3e4)}else i.preventDefault()})}});var c=function(e,t){return function(n,i){if(i.error)return t.hide(),(0,o.track)("Stripe Error",{error_message:i.error.message}),i.error.message;e.find("#stripe_token").val(i.id),e.submit()}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(7),u=i(l),d=n(1),c=i(d),f=n(5);n(9),n(65),n(36);var h=n(194),p=n(3),m=i(p);(0,s.default)("body#checkouts_thanks",function(e){(0,r.default)(".short_url",e).click(function(){(0,r.default)(this).select(),(0,f.track)("Checkout Share",{share_type:"copy_link"})}),(0,r.default)(".verifying",e).livequery(function(){r.default.pollster((0,r.default)(this).data("poll_url"),function(e){if("verifying"!==e.state)return window.location.reload(),!0},{delay:2500})}),e.find(".js-facebook-share").click(function(e){if(e.preventDefault(),"undefined"!=typeof FB){r.default.ajax((0,r.default)(this).data("ks-share-url")),(0,f.track)("Checkout Show Share",{share_type:"facebook"});var t=(0,r.default)(this).attr("href");FB.ui({method:"share",href:t,display:"popup"},function(e){e&&void 0===e.error_code?((0,u.default)({success:c.default.t("onloads.views.checkouts.thanks.Facebook_post_was_published")}),(0,f.track)("Checkout Share",{share_type:"facebook"})):(0,u.default)({notice:c.default.t("onloads.views.checkouts.thanks.Facebook_post_was_not_published")})})}}),twttr.ready(function(t){t.events.bind("click",function(){(0,f.track)("Checkout Show Share",{share_type:"twitter"}),r.default.ajax(e.find(".js-twitter-share").data("ks-share-url"))})}),(0,h.initProjectCardTracking)([".js-track-project-card"]),window.onscroll=m.default.debounce(h.trackProjectCards,150)})},,,function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);n(9),function(){function e(e){var t=e.css("line-height");return"normal"===t?1.2*parseInt(e.css("font-size"),10):parseInt(t,10)}function t(e){var t=e.children(":not(.fade)").last(),n=0;n=parseInt(t.css("padding-bottom"),10)+parseInt(t.css("margin-bottom"),10),e.css("margin-bottom",n),t.css("padding-bottom",0),t.css("margin-bottom",0)}function n(t,n){var i=e(t)*n;return t.css("max-height",i+"px"),r(t[0])}function i(e){e.css("max-height",e[0].scrollHeight+"px")}function r(e){return e.clientHeight<e.scrollHeight}function o(e,t){var n=e.parents(":hidden:last"),i=n.attr("style");n.length&&n.show(),t(),n.length&&(void 0===i?n.removeAttr("style"):n.attr("style",i))}(0,a.default)(".js-line-clamp").livequery(function(){var e=(0,a.default)(this),r=(0,a.default)(this).find(".clamped"),s=e.find(".fade,.expand");o(e,function(){t(r),n(r,e.data("lines"))&&(s.show(),s.one("click",function(e){e.preventDefault(),e.stopPropagation(),i(r),s.hide()}))})})}()},,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),r=i(a),o=n(117),s=n(8),l=i(s),u=n(1),d=i(u),c=n(381),f=n(15),h=i(f),p=o.ApplicationModel.extend();p.set_computed_value("post_likes",function(){return this.likes_count<=0?"":d.default.t("library.models.app.likes_count",{count:this.likes_count,formatted_count:l.default.format_number(this.likes_count,{precision:0})})},{changes_on:["likes_count","has_liked"]}),p.set_computed_value("post_likes_namepile",function(){var e,t;if(this.likes_count<=0)return"";if(e=[],e=r.default.map(this.likers,function(e){return'<a href="'+e.urls.web.user+'" title="'+r.default.escape(e.name)+'">'+r.default.escape(e.name)+"</a>"}),this.has_liked){if(1===this.likes_count)return d.default.t("library.models.app.You_like_this_update");void 0===h.default?e.unshift(d.default.t("library.models.app.You")):e.unshift('<a href="'+h.default.data.urls.web.user+'" title="'+d.default.t("library.models.app.You")+'">'+d.default.t("library.models.app.You")+"</a>")}return t=parseInt(this.likes_count,10)-e.length,t>0&&(this.urls&&this.urls.web&&this.urls.web.likes?e.push('<a href="'+this.urls.web.likes+'" title="'+d.default.t("library.models.app.see_names")+'" id="full_namepile">'+d.default.t("library.models.app.other_people_count",{count:t,formatted_count:l.default.format_number(t,{precision:0})})+"</a>"):e.push(d.default.t("library.models.app.other_people_count",{count:t,formatted_count:l.default.format_number(t,{precision:0})}))),d.default.t("library.models.app.names_count_like_this_update",{names:l.default.to_sentence(e),count:this.likes_count,formatted_count:l.default.format_number(this.likes_count,{precision:0})})},{changes_on:["likes_count","likers","has_liked"]}),p.on_initialize(function(){"function"==typeof c.update_record&&this.on_change(function(){(0,c.update_record)("Post",this.get())})}),t.default=p},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);(0,a.default)(function(){var e=(0,a.default)(".toggle_box_nav li"),t=(0,a.default)(".toggle_box_content");e.length&&t.length&&e.on("click",function(){var n=(0,a.default)(this),i=e.index(n);return t.removeClass("current"),e.removeClass("current"),(0,a.default)(t[i]).addClass("current"),n.addClass("current"),!1})})},,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(7),s=i(o),l=n(1),u=i(l);n(9),function(){function e(e){e.data("is-blocking")?(e.text(u.default.t("onloads.views.user_blocks.block_button.Blocked")),e.removeClass("btn btn--text grey-dark btn--small"),e.addClass("btn btn--gray")):(e.text(u.default.t("onloads.views.user_blocks.block_button.Block")),e.removeClass("btn btn--gray"),e.addClass("btn grey-dark btn--small")),e.removeClass("hidden")}function t(e){e.data("is-blocking")&&(e.data("previous-html",e.html()),e.html(u.default.t("onloads.views.user_blocks.block_button.Unblock")))}function n(e){var t=e.data("previous-html");e.data("is-blocking")&&t&&e.html(t)}function i(t){t.data("is-blocking")===!0?(t.data("is-blocking",!1),e(t),t.trigger("ksr:unblock_user")):(t.data("is-blocking",!0),e(t),t.trigger("ksr:block_user"))}(0,r.default)(".js-block-user").livequery(function(){var a=(0,r.default)(this);a.on("click",function(e){var t=a.data("is-blocking"),n=t?a.data("unblock-path"):a.data("block-path");a.prop("disabled",!0),r.default.ajax({url:n,dataType:"json",method:"post"}).success(function(e){200===e.status?i(a):(0,s.default)({error:e.message})}).complete(function(){a.prop("disabled",!1)}),e.preventDefault()}),a.on("mouseenter focus",function(){t(a)}),a.on("mouseleave blur",function(){n(a)}),a.on("ksr:unblock_user",function(){a.addClass("hidden")}),e(a)})}()},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);n(9),(0,a.default)("form:not([data-ksrjson])","submit").livequery(function(e){var t=(0,a.default)(this);t.is(".submitting-non-ajax")?e.preventDefault():t.attr("target")||((0,a.default)(window).on("unload",function(){t.removeClass("submitting-non-ajax")}),t.addClass("submitting-non-ajax"))})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(7),s=i(o),l=n(1),u=i(l);n(9),function(){function e(e){var t=u.default.t("onloads.views.follows.follow_button.Follow"),n=u.default.t("onloads.views.follows.follow_button.Following")+'<svg class="svg-icon__check ml1"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#check"></use></svg>';e.data("is-following")?(e.html(n),e.removeClass("btn--border-green"),e.addClass("btn--green")):(e.html(t),e.removeClass("btn--green"),e.addClass("btn--border-green")),e.removeClass("hidden")}function t(e){e.data("is-following")&&(e.data("previous-html",e.html()),e.html(u.default.t("onloads.views.follows.follow_button.Unfollow")))}function n(e){var t=e.data("previous-html");e.data("is-following")&&t&&e.html(t)}function i(t,n){t.data("is-following")?(t.data("is-following",!1),e(t),n&&t.trigger("ksr:unfollow_user")):(t.data("is-following",!0),e(t),n&&t.trigger("ksr:follow_user"))}function a(e,t,n){(0,r.default)(".js-follow-user").each(function(){(0,r.default)(this).data("is-following")||i((0,r.default)(this),!1)}),e.unbind("click"),e.html(u.default.t("onloads.views.follows.follow_all_button.Following_all")),e.addClass("btn--disabled"),e.trigger("ksr:follow_all",[t,n])}(0,r.default)(".js-follow-all").livequery(function(){var e=(0,r.default)(this);e.on("click",function(){var t=e.data("url"),n=(0,r.default)('<span class="spinner" />').spin("ksr","#000"),i=e.data("type");r.default.ajax({url:t,dataType:"json",method:"post",data:{type:i},beforeSend:function(){e.addClass("btn--disabled"),e.prepend(n)}}).success(function(t){200===t.status?(a(e,t.user_count,t.project_count),(0,s.default)({success:t.message})):(e.removeClass("btn--disabled"),(0,s.default)({success:t.message}))}).complete(function(){n.remove()})})}),(0,r.default)(".js-follow-user").livequery(function(){var a=(0,r.default)(this);a.on("click",function(e){var t=a.data("is-following"),n=t?a.data("unfollow-path"):a.data("follow-path");a.prop("disabled",!0),r.default.ajax({url:n,dataType:"json",method:"post"}).success(function(e){200===e.status?i(a,!0):(0,s.default)({error:e.message})}).complete(function(){a.prop("disabled",!1)}),e.preventDefault()}),a.on("mouseenter focus",function(){t(a)}),a.on("mouseleave blur",function(){n(a)}),a.on("ksr:set_to_follow",function(){a.data("is-following")&&i(a,!0)}),e(a)})}()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(20),s=i(o),l=n(12);n(9),(0,r.default)(function(){function e(e){var i=(0,r.default)(e.currentTarget);if(!i.hasClass("ksr-popover-excluded")){var a=(0,r.default)('.ksr-popover[data-target-id="#'+i.attr("id")+'"]');if(!a.is(".visible"))return t(a),!1;n()}}function t(e){var t=e.data("ksr_popover_override");if("function"!=typeof t||t(e)){(0,r.default)(e.data("targetId")).addClass("ksr-popover-active"),a&&n(),a=e,e.addClass("visible"),(0,r.default)("body").addClass("ksr-popover-visible"),s.default.mobile&&(0,r.default)("body, html").addClass("ksr-mobile-popover-visible"),i(e),(0,r.default)(document).trigger("ksr_popover:opened",{$popover:e})}}function n(e){e=e||{};var t=e.update_focus||!1;if(a){var n=(0,r.default)(a.data("targetId"));n.removeClass("ksr-popover-active"),a.removeClass("visible"),(0,r.default)("body").removeClass("ksr-popover-visible"),(0,r.default)("body, html").removeClass("ksr-mobile-popover-visible"),t&&n.find(".ksr-icon__arrow-down").focus(),(0,r.default)(document).trigger("ksr_popover:closed",{$popover:a}),a=!1}}function i(e){if(!s.default.mobile){var t=e.data("targetId"),n=(0,r.default)(t),i=n.offset().left-32;i-=Math.max(0,i+e.outerWidth()-((0,r.default)(window).width()-32)),i=Math.max(4,i),e.offset({left:i,top:n.offset().top+n.outerHeight()+20}),e.find(".arrow").css({left:n.offset().left-e.offset().left+n.outerWidth()/2})}}var a,o={};(0,r.default)(".ksr-popover").livequery(function(){var t=(0,r.default)(this).data("targetId");o[t]||((0,r.default)(document).on("click",t,e),o[t]=!0)}),(0,r.default)(document).on("click",".ksr-popover .close",function(e){n(),e.preventDefault()}),(0,r.default)(document).on("ksr_popover:reposition",".ksr-popover",function(){i((0,r.default)(this))}),(0,r.default)(document).on("ksr_popover:close",".ksr-popover",function(){n()}),(0,r.default)(document).on("click",function(e){(0,r.default)(e.target).closest(a).length||n()}),(0,r.default)(document).on("keydown",function(e){e.keyCode===l.ESC&&n({update_focus:!0})}),(0,r.default)(document).on("ksr_popover:opened",function(e,t){t.$popover.aria_set_visible().aria_focus_first_element().aria_activate_keyboard_tabindex()}),(0,r.default)(document).on("ksr_popover:closed",function(e,t){t.$popover.aria_set_hidden().aria_deactivate_keyboard_tabindex()})})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i),r=n(5);n(9),(0,a.default)(function(){(0,a.default)(".js-score-tracking a","click").livequery(function(e){var t=(0,a.default)(this),n=t.data("score"),i=t.data("version"),o=t.data("pid"),s=2===e.which||e.metaKey||e.ctrlKey||"_blank"===t.target;i&&(s||e.preventDefault(),(0,r.track)("Rec BBall Card Score click",{"rec-score":n,"rec-version":i,pid:o}),s||setTimeout(function(){window.location=t.attr("href")},50))})})},function(e,t,n){"use strict";function i(e){var t=e.find(".js-block-user").data("is-blocking"),n=e.find(".js-follow-user");t?n.addClass("hidden"):n.removeClass("hidden")}var a=n(0),r=function(e){return e&&e.__esModule?e:{default:e}}(a);n(9),(0,r.default)(".js-social-actions").livequery(function(){var e=(0,r.default)(this);i(e),e.on("ksr:block_user ksr:unblock_user",function(){e.find(".js-follow-user").trigger("ksr:set_to_follow"),i(e)})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a);(0,i(n(2)).default)(".js-nav--subnav",function(e){e.on("change_current",function(e,t){var n=(0,r.default)(this),i=(0,r.default)(t);i.length&&(n.find(".current").removeClass("current"),i.addClass("current"),n.find(".js-nav--subnav__selected-indicator").css({left:i.position().left,width:i.outerWidth()}),(0,r.default)(window).resize(function(){n.find(".js-nav--subnav__selected-indicator").css({left:i.position().left,width:i.outerWidth()})}))});var t=window.location.pathname,n=e.find(".nav--subnav__item__link").filter(function(){return new URL(this.href).pathname===t});e.trigger("change_current",n)})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);n(303),(0,a.default)(function(){(0,a.default)(document).tipsy({gravity:"s",html:!0,live:"a.tip",fade:!0}),(0,a.default)(document).tipsy({gravity:"n",html:!0,live:".tipsy_n",fade:!0}),(0,a.default)(document).tipsy({gravity:"s",html:!0,live:".tipsy_s",fade:!0}),(0,a.default)(document).tipsy({gravity:"se",html:!0,live:".tipsy_se",fade:!0})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a);(0,i(n(2)).default)(".js-could-have-report-project",function(e){var t="#NS_flaggings__new_project form .expandable";e.on("click",t,function(e){e.stopPropagation(),(0,r.default)(this).trigger("ksr_expand:activate")}),e.on("ksr_expand:activate",t,function(e){e.stopPropagation();var t=(0,r.default)(this),n=t.children(".detail");t.children(".choice").find("input.radio").prop("checked",!0),n.show(),t.find("textarea,select,input:not(.radio)").prop("disabled",!1),n.find("textarea").focus(),t.siblings(".expandable").trigger("ksr_expand:deactivate")}).on("ksr_expand:deactivate",t,function(e){e.stopPropagation();var t=(0,r.default)(this);t.children(".detail").hide(),t.find("textarea,select,input:not(.radio)").prop("disabled",!0).blur()})})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);(0,a.default)(function(){(0,a.default)(document).on("change","body#help_copyright form.select_country",function(){(0,a.default)(this).submit()})})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);(0,a.default)(function(){(0,a.default)("body#help_fees form.select_country").on("change",function(){(0,a.default)(this).submit()})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(7),s=i(o),l=n(117),u=n(14),d=i(u);(0,r.default)(function(){function e(){function e(e){var n,a=e.responseText;if("string"==typeof a)try{a=JSON.parse(a)}catch(e){a={}}a.project&&(n=l.Project.find(a.project.id),o=a.poll_interval_override||t(o,n,a.project),n.set(a.project)),i(o)}function t(e,t,n){var i;return t.get("pledged")!==n.pledged||t.get("comments_count")!==n.comments_count?(i=e-Math.ceil((e-u)/2),Math.max(i,u)):(i=e+10,Math.min(i,d))}var i,a=(0,r.default)(this),o=parseInt(a.data("dynamic"),10),s=a.data("poll_url"),u=5,d=60;s&&"number"==typeof o&&!isNaN(o)&&(i=function(t){n[s]=setTimeout(function(){n[s]=r.default.ajax({global:!1,url:s,complete:e})},1e3*t)})(o)}function t(){var e=n[(0,r.default)(this).data("poll_url")];"number"==typeof e?clearTimeout(e):"function"==typeof e.abort&&e.abort()}(0,r.default)(document).on("project_added_to_curated_page",function(e,t){var n=(0,r.default)("#add_to_curated_page_widget .button-curate");n.addClass("on"),n.attr("href",t.edit_url)}),void 0!==d.default&&d.default.on_change("pledged",function(){var e=(0,r.default)("#stats"),t=e[0].className.match(/digits_\d+/),n="digits_"+Math.floor(d.default.get("pledged")).toString().length;t&&t[0]!==n&&e.removeClass(t[0]).addClass(n)}),(0,r.default)(".js-checkout-poller").livequery(function(){var e=(0,r.default)(this),t=(0,r.default)('<span class="spinner" />').spin("ksr","#333");e.append(t),r.default.pollster(e.data("href"),function(t){return"successful"===t.state?(window.location.reload(),!0):"failed"===t.state?((0,s.default)({error:t.state_reason}),e.closest(".notification-message").remove(),!0):void 0},{delay:2500})});var n={};(0,r.default)(".poll[data-dynamic]").livequery(e,t)})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(322),s=i(o);(0,r.default)(function(){(0,r.default)(document).on("click",".NS_post_likes__button button",function(e){e.preventDefault();var t=(0,r.default)(this).closest("form");r.default.ajax({url:t.attr("action"),dataType:"json",type:"POST",success:function(e){if(e.modal&&r.default.create_login_modal(e.data,"post_like"),e.post){(s.default.find(e.post.id)||new s.default({id:e.post.id})).set(e.post)}}})})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(3),r=i(a),o=n(0),s=i(o),l=n(200),u=i(l),d=n(8),c=i(d);(0,s.default)(function(){(0,s.default)(document).on("click",".NS_post_likes__namepile a#full_namepile",function(e){e.preventDefault();var t=(0,s.default)(this);s.default.ajax({url:t.attr("href"),dataType:"json",type:"GET",success:function(e){var n=r.default.map(e.users,function(e){return(0,u.default)('<a href="{{url}}">{{name}}</a>',e)});n=c.default.to_sentence(n),t.parent().html(n+" like this update.")}})})})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);(0,a.default)(function(){(0,a.default)(document).on("change","body#site_privacy form.select_country",function(){(0,a.default)(this).submit()})})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);(0,a.default)(function(){(0,a.default)(document).on("change","body#terms_oct2012 form.select_country",function(){(0,a.default)(this).submit()})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(5);(0,s.default)(".NS_survey_questions__address",function(e){e.find(".country select").change(function(){var t=(0,r.default)(this).closest(".country"),n=t.data("original_country"),i=t.data("original_shipping_amount"),a=(0,r.default)(this).val(),o=(0,r.default)(this).find("option:selected").html(),s=(0,r.default)(this).find("option:selected").data("cost"),u=(0,r.default)("body").attr("id"),d=t.find(".shipping_changed_message"),c=(0,r.default)(".state .select"),f=(0,r.default)(".state .text"),h=(0,r.default)(".state .text_container");c.prop("disabled",!0).addClass("hidden"),f.prop("disabled",!0),h.addClass("hidden"),e.hasClass("is_preview")||(c.hasClass(a)?r.default.each(c,function(){var e=(0,r.default)(this);e.hasClass(a)&&e.prop("disabled",!1).removeClass("hidden")}):(f.prop("disabled",!1),h.removeClass("hidden")),n&&(s>i?(d.show(),d.find(".country-name").html(o),(0,l.track)("Survey Address for Backing with Restricted Shipping",{original_country:n,country:a,original_shipping_amount:i,shipping_amount:s,survey_context:u})):d.hide()))}),e.find(".country select").trigger("change")})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(5);(0,s.default)("body#survey_responses_confirm_address",function(e){var t=(0,r.default)("input.radio#suggested_address");e.length&&(e.on("change",".address_col input.radio",function(){var e=(0,r.default)(this);(0,r.default)(this).closest(".addresses").find(".address_col").each(function(){var e=(0,r.default)(this);e.find("input.radio").is(":checked")?e.find("input[type=hidden]").attr("disabled",!1):e.find("input[type=hidden]").attr("disabled",!0)}),"entered_address"===e.attr("id")?(0,l.track)("Address Entered Selected"):"suggested_address"===e.attr("id")&&(0,l.track)("Suggested Address Selected")}),t&&t.click(),(0,r.default)(".addresses.no_suggestion").length?(0,l.track)("Confirm your Address Page"):(0,l.track)("Select an Address Page"))})},function(e,t,n){"use strict";var i=n(2),a=function(e){return e&&e.__esModule?e:{default:e}}(i),r=n(5);(0,a.default)("body#survey_responses_edit_address",function(e){e.find(".back").click(function(e){e.preventDefault(),window.history.go(-1)}),(0,r.track)("Edit Address Page")})},function(e,t,n){"use strict";var i=n(2),a=function(e){return e&&e.__esModule?e:{default:e}}(i),r=n(5);(0,a.default)("body#survey_responses_new",function(e){var t=e.find("input:hidden#dirty");e.length&&(e.on("keydown","input:text",function(e){13===e.which&&e.preventDefault()}),"0"===t.val()?t.val("1"):(0,r.track)("Back to Survey Response Page"),(0,r.track)("Survey Response Page"))})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(3),s=i(o),l=n(20),u=i(l),d=n(8),c=i(d),f=n(1),h=i(f),p=n(11),m=i(p);n(50),n(203);var g=n(204),v=i(g),_=n(183);!function(){var e=function(e,t){this.reward_data=t,this.id=this.reward_data.id||this.constants.NO_REWARD_ID,this.shipping_rules=this.reward_data.shipping_rules||[],this.pledge_url=t.urls?new m.default(t.urls.api.reward):void 0,this.shipping_enabled=this.reward_data.shipping_enabled||!1,this.index=t.index,this.closed_height=t.closed_height,this.prefilledNoRewardVal=e.data("prefillAmount"),this.el={$rw:e,$select:e.find("select"),$form:e.find("form"),$form_wrapper:e.find(".js-form-wrapper"),$description:e.find("div.pledge__reward-description"),$truncate_link:e.find("a.pledge__reward-description-toggle"),$truncate_link_span:e.find("a.pledge__reward-description-toggle span"),$pledge_input:e.find('input[name="backing[amount]"]'),$radio:e.find(".js-pledge-radio"),$submit:e.find(".js-reward-continue-button"),$continueAndApplePayButtons:e.find(".js-pledge-button")},this.state={is_selected:!1,is_truncated:!1,is_truncate_worthy:this.el.$description.height()>=this.constants.TRUNCATE_HEIGHT,submit_halted:!1,is_shipping_populated:!!this.shipping_rules.length},e.data("reward",this),this.el.$form_wrapper.aria_set_hidden()};e.prototype.constants=Object.freeze({MAX_FETCH_RETRIES:3,FETCH_TIMEOUT:1e3,TRUNCATE_HEIGHT:80,TRUNCATE_LINK_TEXT:h.default.t("library.controllers.reward_controller.More"),UNTRUNCATE_LINK_TEXT:h.default.t("library.controllers.reward_controller.Less"),NO_REWARD_ID:0}),e.prototype.toggle_description_truncation=function(){var e=this.el.$truncate_link.text().trim();if(!this.state.is_truncate_worthy&&!this.state.is_truncated)return void this.el.$truncate_link.addClass("hide");this.state.is_truncated=!this.state.is_truncated,this.el.$description.toggleClass("pledge__reward-description--truncated"),this.el.$description.toggleClass("pledge__reward-description--expanded"),this.el.$truncate_link_span.text(e===this.constants.TRUNCATE_LINK_TEXT?this.constants.UNTRUNCATE_LINK_TEXT:this.constants.TRUNCATE_LINK_TEXT),this.el.$truncate_link.toggleClass("more")},e.prototype.hide_truncation_link=function(){this.el.$truncate_link.addClass("hide")},e.prototype.show_truncation_link=function(){this.el.$truncate_link.removeClass("hide")},e.prototype.toggle_pledge_form=function(){if(this.state.is_selected=!this.state.is_selected,this.toggle_pledge_form_classes(),this.el.$radio.length&&this.toggle_checkout_elements(),this.state.is_selected){this.inject_csrf_token(),this.handle_shipping_rules();var e=(0,r.default)(document).scrollTop();this.preselect_shipping_country(),this.focus_shipping_select(),(0,r.default)(document).scrollTop(e),this.id===this.constants.NO_REWARD_ID&&((0,r.default)(".js-no-reward-form-input").val()||(0,r.default)(".js-no-reward-form-input").val(this.prefilledNoRewardVal).select())}else this.el.$form_wrapper.aria_deactivate_keyboard_tabindex().aria_set_hidden()},e.prototype.toggle_pledge_form_classes=function(){this.el.$rw.toggleClass("pledge--available").toggleClass("pledge--selected"),this.el.$form_wrapper.toggleClass("pledge__checkout--is-visible")},e.prototype.reset_pledge_form=function(){this.el.$pledge_input.hasClass("error")&&(this.el.$pledge_input.removeClass("error"),this.el.$submit.removeClass("btn--disabled").addClass("btn--green"),this.update_pledge_total())},e.prototype.toggle_checkout_elements=function(){this.state.is_selected?this.el.$radio.prop("checked")||(this.el.$radio.prop("checked",!0),this.el.$radio.trigger("change")):this.el.$radio.prop("checked",!1)},e.prototype.handle_shipping_rules=function(){!this.state.is_shipping_populated&&this.shipping_enabled&&(this.show_loader(),this.shipping_rules.length?this.render_reward_select():this.fetch_reward_shipping_rules())},e.prototype.fetch_reward_shipping_rules=function(e){e=e||0,r.default.ajax({url:this.pledge_url,type:"get",dataType:"json",timeout:this.constants.FETCH_TIMEOUT,success:function(e){this.shipping_rules=e.shipping_rules,this.render_reward_select()}.bind(this),error:function(t,n){"timeout"===n&&e<this.constants.MAX_FETCH_RETRIES&&this.fetch_reward_shipping_rules(e+1)}.bind(this)})},e.prototype.show_loader=function(){this.el.$submit.addClass("is-loading").prop("disabled",!0)},e.prototype.hide_loader=function(e){setTimeout(function(){this.el.$submit.removeClass("is-loading").prop("disabled",!1)}.bind(this),e)},e.prototype.render_reward_select=function(){var e={select:this.el.$select,reward:this};this.state.is_selected&&setTimeout(function(){(0,r.default)(document).trigger("render_shipping_select",e),this.state.is_shipping_populated=!0,this.hide_loader(300)}.bind(this),this.transition_duration())},e.prototype.validate=function(){var e=this.is_country_selected(),t=this.is_pledge_high_enough();return this.shipping_enabled&&!e?this.throw_country_error():this.reset_country_error(),t?this.reset_pledge_error():this.throw_pledge_error(),!(!e&&this.shipping_enabled||!t)&&(this.enable_submit_button(),!0)},e.prototype.transition_duration=function(){if(!r.default.support.transitionEvent())return 0;var e=this.el.$form_wrapper.css("transition-duration");return/ms$/.test(e)?parseFloat(e,10)||0:1e3*parseFloat(e,10)||0},e.prototype.focus_shipping_select=function(){this.el.$form_wrapper.aria_activate_keyboard_tabindex().aria_set_visible(),u.default["not-mobile"]?(this.el.$pledge_input.focus(),this.el.$pledge_input.val(this.el.$pledge_input.val())):this.el.$submit.focus()},e.prototype.inject_csrf_token=function(){var e=(0,r.default)("meta[name=csrf-param]").attr("content"),t=(0,r.default)("meta[name=csrf-token]").attr("content");this.el.$form.find("input[name="+e+"]").length||this.el.$form.append((0,r.default)("<input />",{type:"hidden",name:e,value:t}))},e.prototype.preselect_shipping_country=function(){this.el.$select.val()||this.el.$select.val(v.default.get("location_id"))},e.prototype.update_pledge_total=function(e){var t;t=e&&e.amount?e.amount:this.reward_data.minimum;var n=parseInt(this.el.$select.val(),10),i=this.get_shipping_rule(n),a=i.length?parseFloat(i[0].cost):0,r=t+a,o=c.default.format_number(r,{precision:0});this.id===this.constants.NO_REWARD_ID?this.el.$pledge_input.val(""):this.el.$pledge_input.val(o)},e.prototype.get_shipping_rule=function(e){return s.default.filter(this.shipping_rules,function(t){return t.location_id===e})},e.prototype.get_current_pledge_amount=function(){return(0,_.stringToMoney)(this.el.$pledge_input.val())},e.prototype.is_country_selected=function(){return!!this.el.$select.val()},e.prototype.throw_country_error=function(){this.el.$select.parent().addClass("error"),this.disable_submit_button()},e.prototype.reset_country_error=function(){this.el.$select.parent().removeClass("error")},e.prototype.is_pledge_high_enough=function(){var e,t=this.get_current_pledge_amount();if(this.shipping_rules.length){var n=parseInt(this.el.$select.val(),10),i=this.get_shipping_rule(n),a=i.length?parseFloat(i[0].cost):0;e=this.reward_data.minimum+a}else e=this.reward_data.minimum;return t>=e},e.prototype.reset_pledge_error=function(){this.el.$pledge_input.removeClass("error")},e.prototype.throw_pledge_error=function(){this.el.$pledge_input.addClass("error"),this.disable_submit_button()},e.prototype.disable_submit_button=function(){this.el.$submit.removeClass("btn--green").addClass("btn--disabled")},e.prototype.enable_submit_button=function(){this.el.$submit.addClass("btn--green").removeClass("btn--disabled")},window.RewardController=e}()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(){return(0,g.default)(window.location.href)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=i(r),s=n(3),l=i(s),u=n(7),d=i(u),c=n(321),f=i(c),h=n(19),p=i(h),m=n(11),g=i(m);n(85),n(84),n(83);var v=f.default.extend();v.uri=v.prototype.uri=function(){return a()},v.on_initialize(function(e,t,n,i){this.$view=t,this.template=n,i.url?(0,g.default)(i.url).equals(a().clone().query(""))?this.original_uri=a():this.original_uri=(0,g.default)(i.url):this.original_uri=a(),this.current_params="",this.param_change_listeners=[],this.options=i,a().equals(window.location.href)?e&&this.change_params(a().query()):this.set_params(a().query(),!0),this.bind_events()}),v.prototype.on_change_params=function(e){this.param_change_listeners.push(e)},v.prototype.change_params=function(e){this.$view.html((0,p.default)(this.template,this.get())),this.options.mobius_on&&!this.mobius&&(this.mobius=this.init_mobius(this.options.mobius_on)),this.current_params=e,e!==a().query()?history.pushState({params:e},null,this.original_uri.query(e).hash("").toString()):history.replaceState({params:e},null,a().query(e).hash("").toString()),this.mobius&&function(){var t=this.$mobius_context();this.mobius.current_page=1,this.mobius.set_extra_params(e),this.mobius.$elem=this.$mobius_on(),t.get(0)!==this.mobius.options.$context.get(0)&&(this.mobius.options.$context=t,this.mobius.bind_events()),this.get("total_pages")>1?(this.mobius.play(),this.mobius.check_for_more(),(0,o.default)(".mobius_load_more").show()):(this.mobius.pause(),(0,o.default)(".mobius_load_more").hide())}.apply(this),l.default.each(this.param_change_listeners,function(t){"function"==typeof t&&t(e)}),this.change()},v.prototype.set_params=function(e,t){var n=this.original_uri.clone().query(e||!1),i=this;return!(!t&&e===this.current_params)&&(o.default.ajax({url:n.suffix("json").toString(),dataType:"json",success:function(t){i.set(t,{overwrite:!0}),i.change_params(e)},error:function(e){(0,d.default)({error:e.responseText})}}),!0)},v.prototype.bind_events=function(){var e=this;(0,o.default)(window).on("statechange",function(){var t=History.getState().data;t&&"string"==typeof t.params&&e.set_params(t.params)})},v.prototype.$mobius_on=function(){var e=this.$view.find(".mobius_on");return e.length||(e=this.$view),e},v.prototype.$mobius_context=function(){var e=this.$view.find(".mobius_context");return e.length||(e=(0,o.default)(window)),e},v.prototype.init_mobius=function(e){var t=this,n=this.$mobius_on(),i=this.$mobius_context();return this.$view.on("mobius:loaded_page",function(n,i,a){a[e]=t.get(e).concat(a[e]),i>=a.total_pages?(t.mobius.pause(),(0,o.default)(".mobius_load_more").hide()):(t.mobius.play(),(0,o.default)(".mobius_load_more").show()),delete a.params.page,t.set(a,{overwrite:!0})}),n.mobius({dataType:"json",url:this.original_uri.clone().query("").toString(),$context:i,paused:!0}).data("mobius")},window.Location=v,t.default=v},,function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);n(276),function(){a.default.fn.spin.presets.ksr={className:"",lines:8,length:4,width:2,radius:5,speed:2}}()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(5),u=n(37);(0,s.default)(".NS_projects__creator_nav",function(){function e(){(0,r.default)("#creator_nav .js-livestream-link").length&&(0,l.track)("Showed Creator Nav Livestream Link")}var t=(0,r.default)("body");(0,r.default)(".js-expand-creator-nav").on("click",function(n){t.hasClass("creator_nav_visible")?(t.removeClass("creator_nav_visible"),(0,l.track)("Creator Nav Toggle",{toggled_to:"hidden"})):(t.addClass("creator_nav_visible"),(0,l.track)("Creator Nav Toggle",{toggled_to:"visible"}),e()),window.enabled_features.sticky_nav&&(0,u.rebindScroll)(),n.preventDefault()}),t.hasClass("creator_nav_visible")&&e(),(0,l.trackLinks)("#creator_nav a.track","Creator Nav Link Click")})},,,,,function(e,t,n){"use strict";n(21),n(22),n(183),n(70),n(320),n(651),n(652),n(323),n(412),n(380),n(415),n(416),n(325),n(417),n(418),n(419),n(421),n(326),n(327),n(422),n(267),n(328),n(225),n(268),n(269),n(270),n(423),n(301),n(36),n(271),n(185),n(424),n(329),n(425),n(426),n(330),n(120),n(427),n(382),n(331),n(428),n(429),n(332),n(430),n(431),n(272),n(663),n(664),n(665),n(666),n(667),n(668),n(669),n(432),n(670),n(671),n(672),n(673),n(674),n(433),n(675),n(676),n(677),n(678),n(679),n(434),n(680),n(681),n(682),n(683),n(684),n(685),n(686),n(687),n(435),n(436),n(688),n(689),n(437),n(438),n(439),n(440),n(690),n(691),n(697),n(441),n(333),n(442),n(698),n(699),n(700),n(701),n(702),n(334),n(335),n(703),n(704),n(705),n(706),n(707),n(708),n(709),n(710),n(132),n(711),n(712),n(133),n(134),n(135),n(443),n(444),n(713),n(714),n(336),n(445),n(715),n(716),n(717),n(718),n(719),n(720),n(721),n(722),n(723),n(724),n(725),n(726),n(727),n(337),n(338),n(728),n(729),n(730),n(731),n(527),n(512),n(513),n(514),n(383),n(515),n(732),n(516),n(517),n(518),n(519),n(520),n(521),n(522),n(523),n(524),n(526),n(525),n(528),n(530),n(531),n(532),n(733),n(529),n(734),n(735),n(736),n(737),n(738),n(739),n(740),n(741),n(742),n(446),n(743),n(744),n(745),n(747),n(748),n(339),n(749),n(746),n(340),n(750),n(751),n(341),n(342),n(343),n(344),n(752),n(753),n(754),n(755),n(756),n(757),n(758),n(759),n(760),n(761),n(762),n(763),n(764),n(765),n(766),n(767),n(297);n(692),n(693),n(695),n(694),n(696)},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(3),s=i(o),l=n(11),u=i(l),d=n(117),c=n(211),f=i(c);!function(){var e=d.ApplicationModel.extend(),t={},n={};void 0!==window.project_profile_color_defaults&&(n=(0,f.default)(window.project_profile_color_defaults)),e.prototype.COLOR_DEFAULTS=n,e.prototype.publishSuccess=function(){this.syncDiscardState(),this.get("feature_image_attributes._destroy")&&this.replace("feature_image_attributes",{}),this.get("background_image_attributes._destroy")&&this.replace("background_image_attributes",{})},e.prototype.syncDiscardState=function(){this.setDiscardState(this.data)},e.prototype.setDiscardState=function(e){t=r.default.extend(!0,{},e)},e.prototype.discard=function(){this.set(t,{overwrite:!0})},e.prototype.tryFixValidationErrors=function(e){var t=this;e=e||{};var n=e.default_url;["name","blurb","link_text","link_url"].forEach(function(e){var n=t.get(e);n&&t.set(e,n.trim())});var i=this.get("link_url"),a=this.get("link_text");if(!i&&/^http|^www/.test(a)){var r=this.validateURL(a);this.set("link_url",r),this.set("link_text",this.trimURL(r))}else!i&&a?this.set("link_url",n):i&&!/^http/.test(i)&&this.set("link_url","http://"+i)},e.prototype.validateURL=function(e){return/^http/.test(e)?e:"http://"+e},e.prototype.trimURL=function(e){return new u.default(e).hostname()},e.prototype.validate=function(){var e={};return""===this.get("name").trim()&&(e.name=!0),e},e.prototype.data_for_rails=function(){return s.default.reduce(this.data,function(e,t,n){return e["project_profile["+n+"]"]=t,e},{})},e.set_computed_value("background_image_opacity_percent",function(){return 100*this.background_image_opacity},{changes_on:["background_image_opacity"]}),e.set_computed_value("text_color_or_default",function(){return this.text_color?"#"+this.text_color:"#"+e.prototype.COLOR_DEFAULTS.text_color},{changes_on:["text_color"]}),e.set_computed_value("link_text_color_or_default",function(){return this.link_text_color?"#"+this.link_text_color:"#"+e.prototype.COLOR_DEFAULTS.link_text_color},{changes_on:["link_text_color"]}),e.set_computed_value("background_color_or_default",function(){return""!==this.background_color?"#"+this.background_color:this.background_image_attributes.id&&!this.background_image_attributes._destroy?"#"+e.prototype.COLOR_DEFAULTS.background_color_with_image:"#"+e.prototype.COLOR_DEFAULTS.background_color},{changes_on:["background_image_attributes","background_color"]}),e.set_computed_value("link_background_color_or_default",function(){var t=this.link_background_color;return t?"#"+t:"#"+e.prototype.COLOR_DEFAULTS.link_background_color},{changes_on:["link_background_color"]}),window.CurrentProjectProfile=e}()},,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.distance=t.distanceWithLocale=void 0;var a=n(207),r=i(a),o=n(615),s=i(o),l=n(208),u=i(l),d=n(616),c=i(d),f=n(617),h=i(f),p={de:s.default,en:u.default,es:c.default,fr:h.default},m=t.distanceWithLocale=function(e,t,n){return(0,r.default)(t,n,{addSuffix:!0,locale:p[e]})};t.distance=function(e,t){return m(window.I18n.locale,e,t)}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o);n(124),n(9),(0,s.default)(".js-asset-uploads",function(e){var t=e.find(".js-asset-uploads--tracks");e.on("ksr_uploader:uploaded",function(e,n){var i,a=(0,r.default)(this),o=a.data("subtitles-path");o&&0!==t.length&&(t.empty(),i=r.default.ajax({url:o,method:"GET",data:{captionable_id:n.id,captionable_type:n.type}}),i.success(function(e){t.html(e.html)}))}),e.on("ksr_uploader:remove",function(){t.empty()})}),(0,r.default)(".js-asset-uploads--tracks").livequery(function(){(0,r.default)(this).videoTracksEditor()})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);(0,a.default)(function(){"autofocus"in document.createElement("input")||(0,a.default)(".js-auto_focus").first().focus()})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);n(9),(0,a.default)("span.character_counter").livequery(function(){var e=(0,a.default)(this);(0,a.default)(document).on("keyup",e.attr("rel"),function(){e.html(parseInt((0,a.default)(this).attr("maxlength"),10)-(0,a.default)(this).val().length)})})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);(0,a.default)(function(){(0,a.default)(document).on("click",".js-click_select",function(e){var t=document.createRange(),n=window.getSelection();t.setStartBefore(this.firstChild),t.setEndAfter(this.lastChild),n.removeAllRanges(),n.addRange(t),e.preventDefault()})})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);n(457),(0,a.default)(function(){a.default.clipster(".clipster")})},,function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);n(28),(0,a.default)(function(){["history","banner_canada_projects_animated","banner_canada_hide","banner_iphone_animated","banner_iphone_hide","banner_social_animated","banner_social_hide","banner_stripe_build_transition_hide","banner_verified_identity_hide","banner_yir_animated","ppjun2016","yir_banner_hide","yir_launch_banner","yir_takeover_hide","history_v1","video_mode_projects_seen","video_mode_seen"].forEach(function(e){KSR.store.removeItem(e)}),KSR.store.getItem("dismiss_post_funding_onboarding")&&KSR.store.setItem("dismiss_spotlight_onboarding","true"),KSR.store.removeItem("dismiss_post_funding_onboarding")})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(7),s=i(o),l=n(1),u=i(l);n(9),(0,r.default)("form.requires-confirmation","submit").livequery(function(e){var t=(0,r.default)(this);(0,r.default)(this).find("input.confirmation").is(":checked")||(setTimeout(function(){t.removeClass("submitting-non-ajax")},100),(0,s.default)({error:u.default.t("onloads.initializers.form_requires_confirmation.Please_accept_the_Rules")}),e.preventDefault())})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);(0,a.default)(function(){(0,a.default)(document).on("click",".location_list .big_locations li",function(){window.location=(0,a.default)(this).find(".name a").attr("href")})})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i),r=n(5);n(61),(0,a.default)(function(){(0,a.default)(document).on("click",".js-read_more",function(e){var t=(0,a.default)(this).closest(".js-read_more_context"),n=t.data("mixpanel_context"),i=t.find(".js-less"),o=t.find(".js-more");i.addClass("hide"),i.find(".video-player").trigger("ksr_video:pause"),o.removeClass("hide"),a.default.scrollTo(t),n&&(0,r.track)(n+" Read More"),e.preventDefault()}),(0,a.default)(document).on("click",".js-read_less",function(e){var t=(0,a.default)(this).closest(".js-read_more_context"),n=t.data("mixpanel_context"),i=t.find(".js-less"),o=t.find(".js-more");i.removeClass("hide"),o.addClass("hide"),o.find(".video-player").trigger("ksr_video:pause"),a.default.scrollTo(t),n&&(0,r.track)(n+" Read Less"),e.preventDefault()})})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);(0,a.default)(document).on("click",".js-removeable .js-remove",function(){var e=(0,a.default)(this);return!(e.data("confirm")&&!confirm(e.data("confirm")))&&(a.default.post(e.attr("href"),{_method:"delete"},function(){e.parents(".js-removeable").fadeOut(400,function(){(0,a.default)(this).remove()})}),!1)})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);(0,a.default)(document).on("click","input#share_a_link",function(){(0,a.default)("#share_a_link").focus().select()})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);n(123),n(9),(0,a.default)(".sound_player:visible").livequery(function(){(0,a.default)(this).sound_player()})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i),r=n(5);(0,a.default)(function(){(0,a.default)(document).on("click",".js-tabbed-nav-link",function(e){(0,a.default)(".js-tabbed-nav-link").removeClass("is-active"),(0,a.default)(this).addClass("is-active"),(0,a.default)(".js-tabbed-nav-panel").removeClass("is-active"),(0,a.default)(".js-tabbed-nav-panel[data-panel="+(0,a.default)(this).data("panel")+"]").addClass("is-active"),(0,r.track)((0,a.default)(this).closest(".js-tabbed-nav").data("tracking_name"),{toggled_to:(0,a.default)(this).data("panel")}),e.preventDefault()})})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);n(458),(0,a.default)(document).ready(function(){(0,a.default)(".sortable_table").tablesorter({textExtraction:function(e){var t;return t=(0,a.default)(e).closest("td").data("table-value"),void 0!==t?t:e.innerHTML.replace(/[,?!\s,%$]/g,"")}})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a);(0,i(n(2)).default)(".NS_projects__project_share",function(){r.default.getScript("//platform.tumblr.com/v1/share.js")})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);a.default.fn.validate.defaults.on_valid.push(function(e){(0,a.default)(e).removeClass("errored")}),a.default.fn.validate.defaults.on_invalid.push(function(e){(0,a.default)(e).addClass("errored")})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);(0,a.default)(function(){(0,a.default)(document).on("submit",".NS_backer_backing_notes__form",function(){var e=(0,a.default)(this);e.trigger("backer_backing_note:added",[e.data("backing_id"),e.find("textarea").val()])})})},function(e,t,n){"use strict";var i=n(2),a=function(e){return e&&e.__esModule?e:{default:e}}(i);n(28),(0,a.default)("#NS_banners__password_reset",function(e){var t=!1,n=e.closest("li");t=KSR.store.getItem("password_reset_dismissed"),t||n.show(),e.find("a.dismiss").on("click",function(e){KSR.store.setItem("password_reset_dismissed",!0),n.hide(),e.preventDefault()})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(117),s=n(7),l=i(s),u=n(1),d=i(u),c=n(5),f=n(11),h=i(f);n(9);var p=n(14),m=i(p);!function(){(0,r.default)(".js-could-have-comments").length&&(0,r.default)(".load_new_comments").livequery(function(){function e(e){void 0===e&&(e={}),(e.comments_count||m.default.get("comments_count"))-(e.comments_loaded||m.default.get("comments_loaded"))>0?u.show():u.hide()}function t(e,t){var n,i=(0,r.default)(this),a=new h.default(this.href).removeQuery("cursor").addQuery({cursor:e});"asc"===t&&a.addQuery({direction:t}),n=a.toString(),r.default.ajax({url:n,beforeSend:function(){i.addClass("loading")},complete:function(){i.removeClass("loading")},success:function(e){var n="asc"===t?"prepend":"append";"asc"===t&&m.default.set("comments_loaded",e.comments_count),m.default.set("comments_count",e.comments_count),(0,r.default)("ol.list-comments ol.comments:first")[n](e.comments)},error:function(){(0,l.default)({error:d.default.t("onloads.views.comments.list.Sorry_we_couldnt_load_comments_just_now")})}})}var n,i,a,s,u=(0,r.default)(".load_new_comments");u.length&&(n=u.find("a"),i=(0,r.default)(".Project"+m.default.get("id")+'[itemprop="Project[comments_count]"]'),a=r.default.trim(i.text()),a=a.replace(/\D/g,""),m.default.set("comments_count",parseInt(a,10)),(0,r.default)(".latest_comment").livequery(function(){s||(s=!0,m.default.on_change("comments_count",e),m.default.on_change("comments_loaded",e)),m.default.set("comments_loaded",m.default.get("comments_count")),e()}),(0,r.default)(".earliest_comment").livequery(function(){(0,r.default)("a.older_comments").hide()}),(0,r.default)(".comment").livequery(function(){var e,t,n=(0,r.default)(this).find('[itemprop="Comment[created_at]"]'),i={};n.each(function(e,n){var a,o=(0,r.default)(n);if(o.attr("itemprop")&&(a=o.attr("itemprop").match(/Comment\[(\w+)\]/))){var s=o.data("value");i[a[1]]=s.match(/^"/)?JSON.parse(s):s,t||(t=o.attr("class").match(/Comment(\d+)/)[1])}}),e=o.Comment.find(t)||new o.Comment({id:t}),e.set(i)}),n.click(function(e){if(!(0,r.default)(this).hasClass(".loading")){e.preventDefault();var n=(0,r.default)(".comments li:first");(0,c.track)("Project Comment Load New"),m.default.get("comments_count")-m.default.get("comments_loaded")>50?window.location.href=window.location.href:t.call(this,n.attr("id").match(/\d+/)[0],"asc")}}),(0,r.default)(document).on("click",".older_comments",function(e){e.preventDefault();var n=(0,r.default)(".comments li:last");!(0,r.default)(this).hasClass(".loading")&&n.length&&((0,c.track)("Project Comment Load Older"),t.call(this,n.attr("id").match(/\d+/)[0],"desc"))}),(0,r.default)(".comment-moderation, .backer_info","ol.list-comments").livequery(function(){(0,r.default)(this).removeClass("hidden")}),(0,r.default)(document).on("submit","ol.list-comments form.delete_comment",function(e){e.preventDefault();var t=(0,r.default)(this),n=t.closest(".comment");r.default.ajax({url:t.attr("action"),dataType:"json",type:"delete",success:function(){n.hide(),(0,r.default)("#project-edit-nav .preview .count").text(function(e,t){return parseInt(t,10)-1}),(0,r.default)(".NS_comments__comment").length||(0,r.default)(".project_preview_comments").removeClass("has_comments")}})}))})}()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(20),u=i(l);(0,s.default)("#NS_discover__categories",function(e){function t(){var t=e.find("ul.expanded");t.length?e.height(Math.max(a.height(),t.height())):e.height(a.height())}var n=e.find(".categories"),i=e.find(".subcategories_container"),a=e.find(".root-categories");n.find("> li > a").on("click",function(a){var o=(0,r.default)(this),s=o.closest("li"),l=s.data("category")||{},d=l.id||0,c=e.find("#category_"+d+"_subcategories");n.find(".selected").removeClass("selected"),s.addClass("selected"),u.default["not-mobile"]&&t(),i.find("ul.expanded").removeClass("expanded"),c.addClass("expanded"),c.length?(e.addClass("expanded"),c.find("li.subcategory > a").first().trigger("click")):((0,r.default)(document).trigger("discovery:categories:changed",l),e.trigger("ksr_popover:close"),e.removeClass("expanded")),a.preventDefault()}),i.find("li > a").on("click",function(t){var n=(0,r.default)(this),i=n.closest("li"),a=n.closest("ul"),o=i.data("category");a.find(".selected").removeClass("selected"),i.addClass("selected"),(0,r.default)(document).trigger("discovery:categories:changed",o),t.originalEvent?e.trigger("ksr_popover:close"):e.trigger("ksr_popover:reposition"),t.preventDefault()}),e.on("ksr_popover:opened",function(){u.default["not-mobile"]&&t()}),(0,r.default)(document).on("discovery:sentence:changed",function(t,n){n.category_id||(e.removeClass("expanded").find(".selected, .expanded").removeClass("selected expanded"),e.find("li:first").addClass("selected"))}),(0,r.default)(document).on("discovery:categories:load_sample",function(t,n){var i=(n.category||{}).id;e.find("#category_"+i).trigger("click")})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(3),s=i(o),l=n(2),u=i(l),d=n(20),c=i(d),f=n(12);(0,u.default)("#NS_discover__filters",function(e){function t(){var e={};return e.term=a.val(),e.recommended=u.is(".selected"),e.staff_picks=l.is(".selected"),e.starred=d.is(".selected"),e.social=h.is(".selected"),e.backed=p.is(".selected"),e.state=m.find("select").val(),e.goal=g.find("select").val(),e.pledged=v.find("select").val(),e.raised=_.find("select").val(),e.tag_id=(y.find(".selected").data("tag")||{}).id,e}function n(e){a.val(e.term);var t={recommended:u,staff_picks:l,starred:d,social:h,backed:p};s.default.forEach(t,function(t,n){e[n]?t.addClass("selected"):t.removeClass("selected")}),y.find(".selected").removeClass("selected"),y.find("#tag_"+(e.tag_id||0)).addClass("selected"),m.find("select").ksr_val(e.state||""),g.find("select").ksr_val(e.goal||""),v.find("select").ksr_val(e.pledged||""),_.find("select").ksr_val(e.raised||"")}var i,a=e.find(".search_term input"),o=e.find(".featured"),l=o.find(".staff_picks"),u=o.find(".recommended"),d=o.find(".starred"),h=o.find(".social"),p=o.find(".backed"),m=e.find(".states"),g=e.find(".goals"),v=e.find(".pledged"),_=e.find(".raised"),y=e.find(".tags");a.on("cut paste input keydown",function(n){n.keyCode===f.ENTER?(e.trigger("ksr_popover:close"),(0,r.default)(document).trigger("discovery:filters:changed",t())):s.default.indexOf(f.NOT_INPUT,n.keyCode)===-1&&((0,r.default)(document).trigger("discovery:filters:term_changed",t()),e.trigger("ksr_popover:reposition"))}),o.find("li > a").on("click",function(n){(0,r.default)(this).closest("li").toggleClass("selected"),(0,r.default)(document).trigger("discovery:filters:changed",t()),e.trigger("ksr_popover:reposition"),n.preventDefault()}),y.find("li > a").on("click",function(n){var i=(0,r.default)(this),a=i.closest("li");a.siblings(".selected").removeClass("selected"),a.toggleClass("selected"),(0,r.default)(document).trigger("discovery:filters:changed",t()),e.trigger("ksr_popover:reposition"),n.preventDefault()}),e.find("select").on("change",function(){(0,r.default)(document).trigger("discovery:filters:changed",t()),e.trigger("ksr_popover:reposition")}),(0,r.default)(document).on("discovery:sentence:changed",function(e,t){n(t)}),(0,r.default)(document).on("discovery:sentence:term_changed",function(e,t){a.val(t.term)}),(0,r.default)(document).on("discovery:filters:load_sample",function(e,t){n({tag_id:(t.tag||{}).id})}),e.on("ksr_popover:opened",function(){i=a.val()||"",c.default["not-touchable"]&&a.focus()}),e.on("ksr_popover:closed",function(){var n=a.val()||"";r.default.trim(n)!==r.default.trim(i)&&((0,r.default)(document).trigger("discovery:filters:changed",t()),e.trigger("ksr_popover:reposition"))})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(3),s=i(o),l=n(420),u=i(l),d=n(2),c=i(d),f=n(20),h=i(f),p=n(12),m=n(19),g=i(m),v=n(5);(0,c.default)("#NS_discover__locations",function(e){function t(){a&&a.abort(),d.addClass("loading"),clearTimeout(l),l=setTimeout(function(){a=r.default.ajax({url:d.attr("action"),dataType:"json",data:d.serialize(),success:function(t){d.addClass("results_visible"),f.empty(),s.default.each(t.locations,function(e){f.append((0,g.default)("discover/_search_location_li",e))}),e.find("ul.locations").addClass("results_visible"),(0,v.track)("Discover Location Search Results",{discover_location_search_term:c.val(),discover_location_search_hits:t.total_hits})},complete:function(){d.removeClass("loading"),a=!1}})},b)}function n(){i(u.default.get())}function i(e){var t=(0,r.default)((0,g.default)("discover/_location_li",e));_.empty(),m.children("li:not(:first-child)").remove(),m.append(t),y.find("li.selected").removeClass("selected"),t.addClass("selected"),(0,r.default)(document).trigger("discovery:locations:updated",e),(0,r.default)(document).trigger("discovery:locations:changed",e),o&&o.abort(),o=r.default.ajax({url:e.urls.web.location,dataType:"json",success:function(e){_.children().remove(),s.default.each(e.nearby_locations,function(e){_.append((0,g.default)("discover/_location_li",e))}),m.children("li:not(:first-child)").remove(),s.default.each(e.ancestor_locations.reverse(),function(e){m.append((0,g.default)("discover/_location_li",e))}),m.append(t),(0,r.default)(document).trigger("discovery:locations:updated",e)},complete:function(){o=!1}})}var a,o,l,d=e.find("form"),c=d.find("input"),f=d.find("ul.results"),m=e.find(".broader-locations ul"),_=e.find(".nearby-locations ul"),y=e.find(".broader-locations ul, .nearby-locations ul"),b=500;d.on("submit",function(e){e.preventDefault()}),y.on("click","li > a",function(t){var n=(0,r.default)(this),i=n.closest("li"),a=i.data("location")||{};y.find(".selected").removeClass("selected"),i.addClass("selected"),(0,r.default)(document).trigger("discovery:locations:changed",a),e.trigger("ksr_popover:close"),t.preventDefault()}),c.on("blur",function(){setTimeout(function(){d.removeClass("results_visible")},500)}),c.on("cut paste input keydown",function(e){e.keyCode===p.ESC?((0,r.default)(this).val(""),d.removeClass("results_visible")):s.default.indexOf(p.NOT_INPUT,e.keyCode)===-1&&t()}),e.on("ksr_popover:opened",function(){h.default["not-touchable"]&&c.focus()}),e.find(".current_location").on("click",function(e){n(),c.val(""),(0,v.track)("Discovery Current Location Click",{discover_used_html5:!1}),e.preventDefault()}),f.on("click","li > a",function(e){i((0,r.default)(this).closest("li").data("location")||{}),d.removeClass("results_visible"),(0,v.track)("Discover Location Search Click",{discover_location_search_term:c.val()}),e.preventDefault()}),(0,r.default)(document).on("discovery:sentence:changed",function(t,n){e.find(".selected").removeClass("selected"),n.woe_id&&parseInt(n.woe_id,10)>0?e.find("#location_"+n.woe_id).addClass("selected"):e.find("li:first").addClass("selected")}),(0,r.default)(document).on("discovery:locations:load_sample",function(e,t){t.location&&i(t.location),e.preventDefault()})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(3),s=i(o),l=n(2),u=i(l),d=n(1),c=i(d),f=n(12),h=n(19),p=i(h),m=n(5),g=n(11),v=i(g);(0,u.default)("#NS__discover_advanced_sentence",function(e){function t(e,t){return t=t||{},(0,r.default)('<span class="'+s.default.compact(s.default.flatten(["text",t.classes])).join(" ")+'">'+e+"</span>")}function n(e,t){return(0,r.default)('<span class="inline-block mobile-block"></span>').append(e).append(t)}function i(e){var i=(0,r.default)("<div></div>"),o=[],l=[];e=e||a(),e.state=e.state||"all",e.term=r.default.trim(e.term||""),i.append(t(c.default.t("onloads.views.discover.sentence.Show_me"))),"all"===e.state&&0===e.term.length?(i.append(_),i.append(t(c.default.t("onloads.views.discover.sentence.projects"),{classes:["fr-hide","es-hide"]})),_.find("option:first").data("alt-label",c.default.t("onloads.views.discover.sentence.all"))):("all"!==e.state&&i.append(C),e.term.length>0&&i.append(g),i.append(t(c.default.t("onloads.views.discover.sentence.projects_in"),{classes:["fr-hide","es-hide"]})),i.append(_),_.find("option:first").data("alt-label",c.default.t("onloads.views.discover.sentence.All_Categories"))),e.category_id&&parseInt(e.category_id,10)>0?(_.addClass("selected"),_.find("select").ksr_val(e.category_id)):(_.removeClass("selected"),_.find("select").ksr_val("")),C.find("select").ksr_val(e.state),g.find("input").val(e.term),g.find(".term").text(e.term),e.woe_id&&parseInt(e.woe_id,10)>0?(A.addClass("selected"),A.find("select").ksr_val(e.woe_id),i.append(n(t(c.default.t("onloads.views.discover.sentence.from"),{classes:["fr-hide","es-hide"]}),A))):(A.removeClass("selected"),A.find("select").ksr_val("0"),i.append(n(t(c.default.t("onloads.views.discover.sentence.on"),{classes:["fr-hide","es-hide"]}),A))),e.tag_id>0&&(x.find("select").ksr_val(e.tag_id),i.append(n(t(c.default.t("onloads.views.discover.sentence.tagged_with"),{classes:["fr-hide","es-hide"]}),x))),e.recommended&&o.push(y),e.staff_picks&&o.push(b),e.social?o.push(j):j.find("select").ksr_val("1"),e.starred?o.push(w):w.find("select").ksr_val("1"),e.backed?o.push(k):k.find("select").ksr_val("1"),o=s.default.compact(o),o.length>0&&(o[0]===k||o[0]===w?i.append(t(c.default.t("onloads.views.discover.sentence.that"),{classes:["fr-hide","es-hide"]})):i.append(t(c.default.t("onloads.views.discover.sentence.that_are"),{classes:["fr-hide","es-hide"]})),i.append(o)),s.default.isUndefined(e.pledged)||s.default.isNull(e.pledged)||""===e.pledged||(E.find("select").ksr_val(e.pledged),l.push(E)),s.default.isUndefined(e.goal)||s.default.isNull(e.goal)||""===e.goal||(S.find("select").ksr_val(e.goal),l.push(S)),s.default.isUndefined(e.raised)||s.default.isNull(e.raised)||""===e.raised||(T.find("select").ksr_val(e.raised),l.push(T)),l.length>0&&i.append(n(t(c.default.t("onloads.views.discover.sentence.with"),{classes:["fr-hide","es-hide"]}),l)),P.find("select").ksr_val(e.sort),i.append(n(t(c.default.t("onloads.views.discover.sentence.sorted_by")),P)),i.append(I),d.children().detach(),d.empty(),d.html(i)}function a(){var e=(0,v.default)("?"+d.serialize()).query(!0);return e.category_id=e.category_id&&parseInt(e.category_id,10),e.tag_id=e.tag_id&&parseInt(e.tag_id,10),e.woe_id=e.woe_id&&parseInt(e.woe_id,10),e}function o(e){var t={discover_interaction_param:e.param,discover_interaction_action:e.action,discover_interaction_value:e.value};s.default.extend(t,(0,m.namespaceKeys)("discover",a())),(0,m.track)("Discover Sentence Parameter Interaction",t)}function l(){e.css({height:N.outerHeight()}),setTimeout(function(){e.addClass("transition-all-bezier"),M.removeClass("hide"),e.css({height:h.outerHeight()}),O.css({marginTop:-N.outerHeight()})},1),setTimeout(function(){O.addClass("hide"),e.removeClass("transition-all-bezier"),e.css({height:"auto"}),M.aria_set_visible(),O.aria_set_hidden()},1e3)}function u(){e.css({height:h.outerHeight()}),setTimeout(function(){O.removeClass("hide"),e.addClass("transition-all-bezier"),e.css({height:N.outerHeight()}),O.css({marginTop:0})},1),setTimeout(function(){M.addClass("hide"),e.removeClass("transition-all-bezier"),e.css({height:"auto"}),M.aria_set_hidden(),O.aria_set_visible()},1e3)}var d=e.find("form"),h=e.find(".js-sentence"),g=e.find(".filter.search"),_=e.find(".filter.category"),y=e.find(".filter.recommended"),b=e.find(".filter.staff_picks"),w=e.find(".filter.starred"),k=e.find(".filter.backed"),j=e.find(".filter.social"),x=e.find(".filter.tag"),C=e.find(".filter.state"),S=e.find(".filter.goal"),E=e.find(".filter.pledged"),T=e.find(".filter.raised"),A=e.find(".filter.location"),P=e.find(".filter.sorts"),D=e.find(".js-close"),I=e.find(".js-filter-spotlight"),M=(0,r.default)(".js-sentence-container"),N=(0,r.default)(".js-category-hero"),O=(0,r.default)(".NS_discover__hero");(0,r.default)(document).on("discovery:filters:term_changed",function(e,t){r.default.trim(t.term).length&&g.closest(d).length?g.find("input").val(t.term).siblings(".term").text(t.term):i(s.default.extend(a(),{term:t.term}))}),(0,r.default)(document).on("discovery:categories:changed",function(e,t){_.find("select").ksr_val(t.id||0),i(),(0,r.default)(document).trigger("discovery:sentence:changed",a())}),(0,r.default)(document).on("discovery:locations:changed",function(e,t){A.find("select").ksr_val(t.id||0),i(),(0,r.default)(document).trigger("discovery:sentence:changed",a())}),(0,r.default)(document).on("discovery:sorts:changed",function(e,t){P.find("select").ksr_val(t),i(),(0,r.default)(document).trigger("discovery:sentence:changed",a())}),(0,r.default)(document).on("discovery:locations:updated",function(e,t){A.find("select").children().remove(),A.find("select").append((0,p.default)("discover/_location_options",t)),A.find("select").ksr_val(t.id)}),(0,r.default)(document).on("discovery:filters:changed",function(e,t){i(s.default.extend(a(),t)),(0,r.default)(document).trigger("discovery:sentence:changed",a())}),e.find("#filters").on("click",function(e){(0,m.track)("Discovery Add Filter Pressed"),e.preventDefault()}),e.on("change","select",function(){var e=(0,r.default)(this);i(),(0,r.default)(document).trigger("discovery:sentence:changed",a()),o({param:e.attr("name"),action:"change",value:e.val()})}),e.on("click",".filter .ss-delete",function(e){var t=(0,r.default)(this);t.closest(".filter").detach(),i(),(0,r.default)(document).trigger("discovery:sentence:changed",a()),o({param:t.siblings("input").attr("name"),action:"remove"}),e.preventDefault()}),e.on("keypress cut paste input blur",".search span[contenteditable]",function(e){var t=(0,r.default)(this),n=t.siblings("input"),s=r.default.trim(t.text()||"");"blur"===e.type||"focusout"===e.type?(i(),o({param:n.attr("name"),value:n.val(),action:"change"})):"keypress"!==e.type||e.keyCode!==f.ENTER&&e.keyCode!==f.TAB?(n.val(s),(0,r.default)(document).trigger("discovery:sentence:term_changed",a())):(t.blur(),e.preventDefault())}),e.find(".term").on("focus",function(){g.addClass("focused")}).on("blur",function(){g.removeClass("focused")}),(0,r.default)(document).on("discovery:sentence:changed",function(){M.is(":visible")&&D.hide()}),(0,r.default)(document).on("discovery:sentence:load_sample",function(e,t){i(t),(0,r.default)(document).trigger("discovery:sentence:changed",a())}),(0,r.default)(document).on("discovery:sentence:update_params",function(e,t){var n=s.default.extend(a(),t);i(n),(0,r.default)(document).trigger("discovery:sentence:changed",n)}),(0,r.default)(document).on("discovery:sentence:show_sentence",function(){l(),D.hide()}),i(),O.length&&(e.find(".js-sentence-edit").on("click",function(e){l(),e.preventDefault()}),D.on("click",function(e){u(),(0,m.track)("Discover Sentence Close Clicked"),e.preventDefault()}))})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a);(0,i(n(2)).default)("#NS_discover__sorts",function(e){e.find("li > a").on("click",function(t){var n=(0,r.default)(this),i=n.closest("li");e.find(".selected").removeClass("selected"),i.addClass("selected"),(0,r.default)(document).trigger("discovery:sorts:changed",i.data("sort")),e.trigger("ksr_popover:close"),t.preventDefault()}),(0,r.default)(document).on("discovery:sentence:changed",function(t,n){e.find(".selected").removeClass("selected"),e.find('li[data-sort="'+(n.sort||"magic")+'"]').addClass("selected")}),(0,r.default)(document).on("discovery:sorts:load_sample",function(t,n){e.find(".selected").removeClass(),n.sort?e.find('li[data-sort="'+n.sort+'"]').addClass("selected"):e.find('li[data-sort="magic"]').addClass("selected")})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(22),r=i(a),o=n(3),s=i(o),l=n(15),u=i(l),d=n(2),c=i(d),f=n(20),h=i(f),p=n(8),m=i(p),g=n(19),v=i(g),_=n(5),y=n(11),b=i(y);n(85),n(84),n(83);var w=n(306),k=i(w),j=n(4),x=i(j),C=n(212),S=n(29),E=n(193);(0,c.default)("#discover_advanced",function(e){function t(){return s.default.map(D.find(".row > li > .project-card, .js-react-proj-card"),function(e){return(0,r.default)(e).data("pid")})}function n(e){var n=t();return s.default.filter(e,function(e){return s.default.indexOf(n,e.id)===-1})}function i(e){return s.default.map(e,a)}function a(e){return(0,v.default)("discover/_project_baseball_card_li",e,["projects/_baseball_card_tall","projects/_baseball_card_tall_spotlight","projects/_baseball_card_tall_standard"])}function o(e,t){var a=(t||{}).append_results;if(a||(D.children().remove(),L=e.seed,I.show(),D.siblings(".title").find(".count").text(m.default.format_number(e.total_hits,{precision:0})+m.default.pluralize(" project",e.total_hits)).siblings(".category").hide()),e.projects.length>0)if(c(),window.enabled_features.react_discovery_cards){var o=n(e.projects).map(E.normalizeData),l=(0,S.provideTranslations)(window.I18n)(C.ProjectCardContainer),u=x.default.createElement(l,{includeGrid:!1,projects:o}),f=k.default.renderToStaticMarkup(u);D.append(f)}else s.default.chain(n(e.projects)).groupBy(function(e,t){return Math.floor(t/w)}).values().map(i).map(function(e){return(0,r.default)('<div class="row"></div>').append(e)}).each(function(e){return D.append(e)});else I.hide(),a||d()}function l(e,t){t=t||{},R=!0,e=e||(0,b.default)("?"+P.serialize()).query(!0),e.seed=L,e=s.default.pick(e||{},s.default.filter(s.default.keys(e),function(t){return!!e[t]})),p&&p.abort(),t.paging?(e.page=F+1,T.addClass("loading-pagination")):(e.page=F=1,T.addClass("loading")),clearTimeout(g),g=setTimeout(function(){p=r.default.ajax({url:"/discover/advanced?google_chrome_workaround",data:e,dataType:"json",success:function(n){o(n,{append_results:t.paging}),n.projects.length<24&&I.hide(),History.replaceState({},document.title,"/discover/advanced?"+r.default.param(e)),F=e.page},complete:function(e){0!==e.status&&T.removeClass("loading loading-pagination"),p=!1,R=!1}})},O)}function d(){var e=(0,b.default)().query(!0);T.addClass("no_results"),(e.social||e.backed||e.starred)&&s.default.isUndefined(u.default)?(T.find(".requires_login_empty_state").show(),T.find(".general_empty_state").hide()):(T.find(".requires_login_empty_state").hide(),T.find(".general_empty_state").show())}function c(){T.removeClass("no_results")}function f(){var e=y;y=j.scrollTop(),!R&&y>e&&j.height()-y<2e3&&l(void 0,{paging:!0})}var p,g,y,w=4,j=(0,r.default)(document.body),T=e.find("#advanced_container"),A=e.find("#NS_discover__landing"),P=(0,r.default)("#NS__discover_advanced_sentence").find("form"),D=e.find("#projects_list"),I=e.find(".load_more"),M=e.find(".NS_discover__spotlight_projects"),N=e.find(".NS_discover__footer"),O=500,R=!1,L=D.data("seed"),F=1;I.on("click",function(e){e.preventDefault(),y=j.scrollTop(),(0,r.default)(document).on("scroll",f),l(void 0,{paging:!0}),D.children().children().show()}),D.data("term")&&(0,_.trackLinks)(".js-project-group a","Clicked Search Result",{discover_term:D.data("term"),type:"full_search_results"}),e.find(".login, .signup").on("click",function(e){window.location=(0,r.default)(this).data("url")+"?then="+encodeURIComponent(window.location.href),e.preventDefault()}),e.find("li.sample_search a").on("click",function(e){var t=(0,r.default)(this).closest("li").data("sample")||{};t.category_id=(t.category||{}).id,t.location_id=(t.location||{}).id,t.tag_id=(t.tag||{}).id,(0,r.default)(document).trigger("discovery:sentence:load_sample",t),(0,r.default)(document).trigger("discovery:categories:load_sample",t),(0,r.default)(document).trigger("discovery:locations:load_sample",t),(0,r.default)(document).trigger("discovery:sorts:load_sample",t),(0,r.default)(document).trigger("discovery:filters:load_sample",t),(0,r.default)(document).trigger("discovery:sentence:show_sentence",t),A.hide(),M.hide(),N.hide(),(0,_.track)("Discovery Sample Sentence Click",{discover_sample_sentence_ref:t.mp_ref}),e.preventDefault()}),e.on("click",".project-card-wrap .project-meta li a",function(e){var t=(0,r.default)(this).data("location");(0,r.default)(document).trigger("discovery:locations:load_sample",{location:t}),(0,_.track)("Discover Baseball Card Location Clicked"),e.preventDefault()}),(0,r.default)(document).on("discovery:sentence:changed",function(e,t){1===parseInt(t.social,10)?D.addClass("social"):D.removeClass("social"),0===t.category_id?(A.hide(),M.hide()):P.is(":visible")&&(A.remove(),M.remove()),l(t)}),(0,r.default)(document).on("discovery:sentence:term_changed",function(e,t){l(t)}),(0,r.default)(document).on("discovery:hero:select_subcategory",function(){A.hide(),M.hide()}),(0,r.default)(document).on("discovery:hero:unselect_subcategory",function(){A.show(),M.show()}),h.default.mobile||window.enabled_features.sticky_nav||((0,r.default)("#projects_list").waypoint(function(e){"down"===e?(0,r.default)(".js-back-to-top").fadeIn():"up"===e&&(0,r.default)(".js-back-to-top").fadeOut("fast")}),(0,r.default)(".js-back-to-top a").on("click",function(t){r.default.scrollTo(e.find("#NS__discover_advanced_sentence").offset().top,1e3,"easeOutExpo"),t.preventDefault()}));var $=t().length;$||d(),$<8&&I.hide()})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a);(0,i(n(2)).default)(".NS-features__toggle",function(e){e.find(".js-featured-toggle").on("click",function(e){e.preventDefault();var t=(0,r.default)(this),n=t.closest(".NS-features__toggle"),i=t.closest(".featured, .unfeatured");r.default.ajax({type:i.data("method"),url:i.data("url"),data:i.find(":input").serialize(),dataType:"json",success:function(e){n.toggleClass("featured",e.featured),e.remove_featurings_path&&n.find(".featured").data("url",e.remove_featurings_path)},error:function(){growl({error:"Unable to complete your request"})}})})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(22),r=i(a),o=n(2),s=i(o),l=n(1),u=i(l);n(57),(0,s.default)(".NS-forms_categorization_field",function(e){e.each(function(){function e(e){var t=(0,r.default)('<a class="remove" href="#">'+u.default.t("onloads.views.forms.categorization_field.remove")+"</a>");e.append(t)}var t=(0,r.default)(this),n=t.find(".template"),i=t.find("ol.selected");i.find("li").each(function(){e((0,r.default)(this))}),i.on("click","a.remove",function(e){var t=(0,r.default)(this).closest("li"),n=t.find(".destroy");e.preventDefault(),t.fadeOut(function(){n.length?n.val("1"):t.remove()})}),t.find(".new a").on("click",function(e){e.preventDefault(),i.append(n.clone_form_template())})})})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);n(9),(0,a.default)(function(){(0,a.default)(".video_player").livequery(function(){(0,a.default)(this).ksr_video()})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(3),s=i(o),l=n(7),u=i(l),d=n(8),c=i(d);n(276),function(){function e(e,t){var n=e.add(t);n.siblings().removeClass("current_tab"),n.addClass("current_tab"),(0,r.default)(document).trigger("tab")}function t(e){return"string"!=typeof e?"":e.replace(/.$/,function(e){return"e"===e?"able":e+"able"})}function n(e){return"string"!=typeof e?"":e.replace(/.$/,function(e){return"e"===e?"ed":e+"ed"})}function i(e){if("string"!=typeof e)return"";var t=e.match(/\d+/);return t?t[0]:null}(0,r.default)("body.admin").delegate(".tab","click",function(){var t,n=(0,r.default)(this),i=n.attr("class").match(/tab_\d+/),a=n.find("a");i&&(t=(0,r.default)("."+i[0].replace(/tab/,"pane"))),i&&t.length&&(a.length&&""===r.default.trim(t.html())?(n.addClass("submitting"),t.html((0,r.default)('<div class="spinner" />').spin("ksr","#000")),r.default.ajax({url:a.attr("href")+".js",type:"GET",complete:function(i){n.removeClass("submitting"),t.html(i.responseText),e(n,t)}})):e(n,t),history.pushState(null,null,a.attr("href")))}),(0,r.default)("body.admin").delegate(".tab_label a","click",function(e){e.preventDefault()}),(0,r.default)("body.admin").delegate(".expand, .collapse","click",function(e){e.preventDefault(),(0,r.default)(this).add((0,r.default)(this).siblings(".expand, .collapse, .expandable")).toggle()});var a=["user","project","task","backing"];s.default.each(a,function(e){(0,r.default)(document).on("click",".js-"+e+"_notes_hider, .js-"+e+"_notes_shower",function(){(0,r.default)(".js-"+e+"_note").toggle(),(0,r.default)(".js-"+e+"_notes_shower").toggle(),(0,r.default)(".js-"+e+"_notes_hider").toggle()})}),(0,r.default)(".js-admin_notes_expand").one("click",function(e){var t=(0,r.default)(this);e.preventDefault(),r.default.ajax({url:t.prop("href"),type:"GET",dataType:"html",success:function(e){t.closest(".js-notes").find(".expandable.ajax-container").html(e)}})}),(0,r.default)("body.admin").delegate(".batch_action .select_all","click",function(e){e.preventDefault();var t=(0,r.default)(this),n=t.closest(".batch_action"),i=n.parent(),a=i.find("input.checkbox:not([disabled])");if(!a.length)return void(0,u.default)({error:"Nothing to select."});"Select all"===t.text()?(a.prop("checked",!0),t.text("Deselect all")):(a.prop("checked",!1),t.text("Select all"))}),(0,r.default)("body.admin").delegate(".batch_action input.submit","click",function(e){e.preventDefault();var a=(0,r.default)(this),o=a.closest("form"),s=a.closest(".batch_action"),l=s.parent(),d=l.find("input.checkbox:checked"),f=d.map(function(e,t){return i(t.id)}).get(),h=a.attr("name"),p=o.attr("action"),m=s.data("type"),g=s.data("terse_type"),v=m.replace(/s$/,""),_={},y=l.find(".batch_"+h+"_info").data("confirm_url");if(l.find("input.checkbox:not(checked)").each(function(){(0,r.default)(this).parent().removeClass("highlight")}),!d.length)return void(0,u.default)({error:"No "+g+" selected to "+h+"."});var b=[];if(d.each(function(){(0,r.default)(this).hasClass(t(h))?(0,r.default)(this).parent().removeClass("highlight"):(b.push((0,r.default)(this)),(0,r.default)(this).parent().addClass("highlight"))}),b.length)return void(0,u.default)({error:"You selected "+b.length+" "+c.default.pluralize(g,b.length)+" that cannot be "+n(h)+". Please unselect those and try again."});_[m]=f,r.default.ajax({url:y,data:_,type:"get"}).done(function(e){r.default.modal_confirm(function(){r.default.ajax({type:"PUT",url:p,data:_,success:function(){d.each(function(){var e=(0,r.default)(this);e.attr({checked:!1,disabled:!0}),e.closest("."+v).addClass(n(h)).find(".status").html(n(h))}),(0,u.default)({success:"Selected "+g+" were "+n(h)})},error:function(){(0,u.default)({error:"There was a problem "+h+"ing one or more of those "+g+". Please refresh the page and try again."})}})},{title:"Batch "+h,message:e,confirm_text:c.default.capitalize(h)+" "+f.length+" "+c.default.pluralize(g,f.length),cancel_text:"cancel"===h?"never mind":"cancel"})})}),(0,r.default)(document).on("submit",".zendesk_ticket form",function(e){var t=(0,r.default)(this);t.find(".submit").hide(),t.find(".loading").show(),e.preventDefault(),r.default.ajax({url:t.attr("action"),type:"POST",data:t.serialize(),dataType:"JSON",success:function(e){var n="https://kickstarter.zendesk.com/tickets/"+e.id,i=(0,r.default)("<a/>");i.attr("href",n),i.text(n),i.addClass("associated_zendesk_ticket right"),t.closest(".modal_dialog").trigger("close"),(0,u.default)({success:"Ticket sent successfully!"}),(0,r.default)("#send_to_zendesk").append(i)},complete:function(){t.find(".submit").show(),t.find(".loading").hide()}})})}()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(5),s=n(3),l=i(s),u=n(7),d=i(u),c=n(19),f=i(c);(0,r.default)(function(){function e(e){return e.closest("#preview, .render_mustache, .js-message-thread").data("data")}function t(e){var t=e.find('input[type="submit"]');e.addClass("submitting"),t.addClass("btn--disabled")}function n(e){var t=e.find('input[type="submit"]');e.removeClass("submitting"),t.removeClass("btn--disabled")}function i(t){var i="messages";"undefined"!=typeof current_project&&(i="project_messages"),t.closest(".modal_dialog").length&&(i="backer_modal"),"backers_show"===(0,r.default)("body").attr("id")&&(i="backer_page"),"backings_show"!==(0,r.default)("body").attr("id")&&"backings_index"!==(0,r.default)("body").attr("id")||(i="backings_show"),r.default.ajax({url:t.attr("action"),type:t.attr("method"),dataType:"json",data:t.serialize()+"&"+r.default.param({"mp[message_context]":i}),success:function(i){var o=e(t),s=t.closest(a).find("ul.messages");i.errors?l.default.each(l.default.keys(i.errors),function(e){(0,d.default)({error:e+": "+i.errors[e]})}):(s.append((0,f.default)("messages/_show",i)).trigger("message_sent",o?[o.backing?o.backing.id:void 0,s.children().length]:[]),(0,r.default)(document).trigger("resize")),t.get(0).reset(),n(t)}})}var a=".NS_message_threads__show";(0,r.default)(document).on("click",a+" .pledge_details_link",function(e){(0,r.default)(a).find(".pledge_details").toggleClass("visible"),(0,r.default)(document).trigger("resize"),(0,r.default)(this).toggleClass("selected"),(0,o.track)("Message Info Toggle",{text:r.default.trim((0,r.default)(this).text())}),e.preventDefault()}),(0,r.default)(a+":visible").livequery(function(){function t(e){r.default.ajax({url:s.urls.web.read,type:"put"}),i.trigger("message_thread_read",[s]),e&&e.preventDefault()}function n(e){r.default.ajax({url:s.urls.web.unread,type:"put"}),i.trigger("message_thread_unread",[s]),e&&e.preventDefault(),(0,o.track)("Message Read Toggle",{toggled_to:"unread"})}var i=(0,r.default)(this),s=e(i);s.unread_messages_count>0&&t(),(0,r.default)(a+" .mark_as_unread").on("click",n),(0,r.default)(a+" .mark_as_read").on("click",t)}),(0,r.default)(document).on("submit",a+" form.reply",function(e){var n=(0,r.default)(this);n.find('[name="message[body]"]').val()?n.is(".submitting")||(t(n),i(n)):(0,d.default)({error:"Please add a message"}),e.preventDefault()}),(0,r.default)(document).on("focus",a+" form.reply textarea",function(){var e=(0,r.default)(this);e.closest("form.reply").addClass("replying"),e.removeAttr("placeholder")}),(0,r.default)(document).on("click",a+" .respond_link",function(e){(0,r.default)(a+" form.reply textarea").focus(),(0,o.track)("Message Reply Click"),e.preventDefault()})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(3),s=i(o),l=n(8),u=i(l),d=n(1),c=i(d),f=n(19),h=i(f);!function(){(0,r.default)(".NS_site__simple_ticket_form").length&&(0,r.default)(document).on("click","#new_zendesk_ticket input:submit",function(e){e.preventDefault();var t=(0,r.default)(this),n=t.closest("form"),i=n.parent();n.is(".submitting")||(n.addClass("submitting"),t.data("original_text",t.val()),t.val(c.default.t("onloads.views.site.simple_ticket_form.Submitting")),r.default.ajax({type:"POST",data:n.serialize(),url:n.attr("action"),beforeSend:function(){i.find(".success, .error").remove()},complete:function(){n.removeClass("submitting"),t.val(t.data("original_text"))},success:function(){i.html('<h5 class="green">'+c.default.t("onloads.views.site.simple_ticket_form.Thanks_for_the_message_A_member")+"</h5>")},error:function(e){var t=JSON.parse(e.responseText);t=s.default.map(t,function(e,t){var n={base:"",requester:"email",subject:"question",description:"details"}[t]||t;return s.default.map(e,function(e){return s.default.compact([u.default.capitalize(n),e]).join(" ")})}),t=s.default.compact(t),t=s.default.flatten(t),i.prepend((0,h.default)("funnels/_ticket_error",{errors:t}))}}))})}()},,,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(4),r=i(a),o=n(58),s=i(o),l=n(0),u=i(l),d=n(3),c=i(d),f=n(253),h=i(f),p=n(414),m=n(109),g=i(m),v=n(1),_=i(v),y=n(12);n(56),window.VideoTrackView=h.default.View.extend({VIDEO_PAUSE_LENGTH:1e3,PIXELS_PER_SECOND:100,MINIMUM_MILLISECONDS:2e3,NEW_CAPTION_OFFSET:-500,events:{"click .js-timeline":"jumpTimelineEvent","click .js-cue":"pauseEvent","keypress .js-cue-textarea":"autoPauseEvent","keydown .js-cue-textarea":"catchWaywardKeysEvent","keyup .js-cue-textarea":"typeInCueEvent","cut .js-cue-textarea":"cutPasteInCueEvent","paste .js-cue-textarea":"cutPasteInCueEvent","mousemove .js-timeline":"showHoverLineEvent","mouseleave .js-timeline":"hideHoverLineEvent","click .js-save-track":"saveTrackEvent","click .js-destroy-cue":"destroyCueEvent"},initialize:function(){this.model.on("add:cues_attributes",c.default.bind(this.addCue,this)),this.model.on("destroy:cues_attributes",c.default.bind(this.removeCue,this)),this.model.on("add:cues_attributes destroy:cues_attributes",c.default.bind(this.dirty,this)),this.model.on("change:cues_attributes[*]",c.default.bind(this.dirty,this)),this.model.on("change:cues_attributes[*].start_time",c.default.bind(this.adjustCue,this)),this.model.on("change:cues_attributes[*].end_time",c.default.bind(this.adjustCue,this)),this.model.on("reset:cues_attributes",c.default.bind(this.renderCuesOnTimeline,this)),this._initializeDraggableBar(),this._initializeUnsavedNavigation(),this._initializeDocumentListeners(),this.disableSaveButton()},initializeVideo:function(){this.video=new window.CaptioningVideo(this.videoEl()),this.video.importTrackFrom(this.model),this._initializeVideoMetadata()},videoEl:function(){return this.$el.find("video").get(0)},_initializeVideoMetadata:function(){var e=this;this.video.el.readyState>=this.video.el.HAVE_METADATA?this.renderTimeline():this.video.$el.one("loadedmetadata",function(){e.renderTimeline()})},_initializeDraggableBar:function(){var e=this;this.$el.on("mousedown touchstart",".js-non-draggable",function(e){e.stopImmediatePropagation()}),this.$el.draggable_bar(".js-timeline",function(t,n,i){var a,r,o,s=e.$el.find(".js-timeline"),l=(0,u.default)(n),d=l.data("cue-cid")||l.closest("[data-cue-cid]").data("cue-cid"),c=e.model.get("cues_attributes"),f=c.get(d);f&&(e.video.pause(),a=f.get("start_time"),r=t*s.width()+s.scrollLeft()-i,r-=s.width()/2,l.is(".js-cue-handle")&&(r+=l.width()),r=e.xFromTimeline(r),l.is(".js-cue-handle")?(r=e._pointWithinBounds(c.indexOf(f),r),r=Math.max(a+e.MINIMUM_MILLISECONDS,r),f.set("end_time",r)):(o=f.get("end_time")-a,r=e._rangeWithinBounds(c.indexOf(f),r,o),f.set({start_time:r,end_time:r+o})))})},_pointWithinBounds:function(e,t){var n=this.model.get("cues_attributes"),i=n.at(e),a=n.at(e+1);return a&&a.get("start_time")<t&&(t=a.get("start_time")-1),Math.max(t,i.get("start_time")+.5)},_rangeWithinBounds:function(e,t,n){var i=this.model.get("cues_attributes"),a=i.at(e-1),r=i.at(e+1);return n=n||0,r&&r.get("start_time")<t+n&&(t=r.get("start_time")-n-1),a&&a.get("end_time")>t&&(t=a.get("end_time")+1),Math.max(0,Math.min(this.video.duration(),t+n)-n)},_initializeUnsavedNavigation:function(){var e=this;(0,u.default)(window).on("beforeunload.video_tracks",function(){if(e._dirty)return _.default.t("views.video_track.You_have_unsaved_changes")})},_initializeDocumentListeners:function(){var e=this;(0,u.default)(document).on("keydown.video_tracks",function(t){e.handleKeyboardShortcutsFromEvent(t)}).on("keyup.video_tracks",function(t){if(t.which===y.ENTER&&!t.shiftKey){var n,i=e.getCurrentCue();n=i?i.get("end_time")+1:e.video.getCurrentTime(),e.addCueAt(n),t.preventDefault()}})},remove:function(){(0,u.default)(window).off(".video_tracks"),(0,u.default)(document).off(".video_tracks"),h.default.View.prototype.remove.apply(this,arguments)},render:function(){var e,t={track:this.model.toJSON(),encodings:this.model.get("encodings")||{},editProjectPath:this.$el.data("edit-project-path")},n=Math.random().toString(16).substr(2);return e=c.default.clone(t.encodings),e.high&&(e.high+=(e.high.split("?")[1]?"&":"?")+n),e.webm&&(e.webm+=(e.webm.split("?")[1]?"&":"?")+n),t.encodings=e,s.default.render(w(t),this.el),this.initializeVideo(),this},createSpoke:function(e,t){t=t||{};var n=t.level||(e%1e4==0?3:e%5e3==0?2:e%500==0?1:0);return{msecs:e/1e3,x:this.xOnTimeline(e),level:n,displayText:n>1}},renderTimeline:function(){var e,t=this.video.duration(),n=this.xOnTimeline(t),i=this,a=c.default.range(500,t,500),r={};r.timelineEnd=n,r.spokes=c.default.map(a,function(e){return i.createSpoke(e)}),r.spokes.push(this.createSpoke(0,{level:4})),r.spokes.push(this.createSpoke(this.video.duration(),{level:4})),s.default.render(b(r),this.$el.find(".timeline_wrapper").get(0)),e=this.$el.find(".timeline"),this.renderCuesOnTimeline(),this._attachEventsToTimeline(e)},renderCuesOnTimeline:function(){var e=this.model.get("cues_attributes");this.$el.find(".js-timeline__cues").empty(),e.forEach(c.default.bind(this.adjustCue,this)),e.length>0&&this.focusCue(e.first())},_attachEventsToTimeline:function(e){var t=this;this.video.$el.on("timeupdate",function(){var n,i=t.video.getCurrentTime(),a=t.xOnTimeline(i);t.video.paused()||e.scrollLeft(a),t.$(".js-timeline-line").css("left",a+e.width()/2),(n=t.model.get("cues_attributes").find(function(e){return e.get("start_time")<=i&&e.get("end_time")>i}))&&t.focusCue(n)}),this.video.$el.on("play",function(){t.$(".js-timeline").css("overflow-x","hidden")}),this.video.$el.on("pause",function(){t.$(".js-timeline").css("overflow-x","scroll")})},enableSaveButton:function(){this.$(".js-save-track").text(_.default.t("views.video_track.Save")).addClass("btn--green").removeClass("btn--gray").prop("disabled",!1)},disableSaveButton:function(){this.$(".js-save-track").text(_.default.t("views.video_track.Saved")).removeClass("btn--green").addClass("btn--gray").prop("disabled",!0)},dirty:function(){this._dirty=!0,this._saving||this.enableSaveButton()},addCue:function(e){this.adjustCue(e),this.focusCue(e)},removeCue:function(e){this.$cue(e.cid).remove()},adjustCue:function(e){var t=this.$cue(e.cid),n=e.get("start_time"),i=e.get("end_time");t.css("left",Math.floor(this.xOnTimeline(n))),t.width(Math.floor(this.xOnTimeline(i-n)))},$cue:function e(t){var n=this.$(".js-timeline"),e=n.find('[data-cue-cid="'+t+'"]'),i=this.model.get("cues_attributes").get(t);return i?(0===e.length&&(e=n.find(".js-cue-template").clone(),e.removeClass("js-cue-template"),e.addClass("js-cue"),e.attr("data-cue-cid",t),e.find(".js-cue-textarea").val(i.get("body")),e.appendTo(n.find(".js-timeline__cues"))),e.removeClass("hidden"),e):e},cue:function(e){var t=(0,u.default)(e),n=t.data("cue-cid")||t.closest("[data-cue-cid]").data("cue-cid");return this.model.get("cues_attributes").get(n)},autoPause:function(){var e=this;this.video.paused()&&!this.unpauseTimer||(this.video.pause(),this.unsetPauseTimer(),this.unpauseTimer=setTimeout(function(){delete e.unpauseTimer,e.video.play()},this.VIDEO_PAUSE_LENGTH))},unsetPauseTimer:function(){clearTimeout(this.unpauseTimer)},focusCue:function(e){this.showingCue(e)||this.video.setCurrentTime(e.get("start_time")),this.$cue(e.cid).find(":input").focus()},xOnTimeline:function(e){return e*this.PIXELS_PER_SECOND/1e3},xFromTimeline:function(e){return e/this.PIXELS_PER_SECOND*1e3},saveTrack:function(){var e=this.$(".js-save-track"),t=this.$(".js-last-save"),n=this.$(".js-timeline__cues :input"),i=this.model.save(),a=this;i&&(this._saving=!0,this._dirty=!1,this.disableSaveButton(),e.text(_.default.t("views.video_track.Saving")),n.prop("disabled",!0),i.success(function(){a.timedText(t)}).error(function(){e.text(_.default.t("views.video_track.Errored"))}).always(function(){a._saving=!1,a._dirty?a.enableSaveButton():a.disableSaveButton(),n.prop("disabled",!1)}))},focusPreviousCue:function(){var e,t=this.model.get("cues_attributes"),n=this.video.getCurrentTime();(e=c.default.last(t.filter(function(e){return e.get("end_time")<n})))&&this.focusCue(e)},focusNextCue:function(){var e,t=this.model.get("cues_attributes"),n=this.video.getCurrentTime();(e=t.find(function(e){return e.get("start_time")>n}))&&this.focusCue(e)},getCurrentCue:function(){var e=this.model.get("cues_attributes"),t=this.video.getCurrentTime();return e.find(function(e){return e.get("start_time")<=t&&e.get("end_time")>=t})},showingCue:function(e){var t=this.video.getCurrentTime(),n=e.get("start_time"),i=e.get("end_time");return t>=n&&t<i},pointOnTimeline:function(e){var t=this.$(".js-timeline");return e-=t.offset().left,e+=t.scrollLeft(),e-=t.width()/2,this.xFromTimeline(e)},willOverlapCues:function(e,t){return!!this.model.get("cues_attributes").find(function(n){var i=n.get("start_time"),a=n.get("end_time");return i>=e&&i<e+t||a>=e&&a<e+t})},alignWithCursor:function(e,t){var n=this.$(".js-timeline"),i=n.offset().left,a=n.scrollLeft();e.removeClass("hidden"),e.css("left",g.default.pageX(t)-i+a)},addCueAt:function(e,t){var n=this.model.get("cues_attributes");t=t||this.MINIMUM_MILLISECONDS,this.willOverlapCues(e,t)||n.add({start_time:e,end_time:e+t})},jumpTimelineEvent:function(e){var t,n=(0,u.default)(e.target);n.is(".js-timeline")?this.video.setCurrentTime(0):n.is(".js-timeline--area")&&(t=this.pointOnTimeline(g.default.pageX(e)),this.video.setCurrentTime(t))},addCueEvent:function(e){var t=this.pointOnTimeline(g.default.pageX(e));this.addCueAt(t),e.preventDefault()},pauseEvent:function(){this.video.pause()},autoPauseEvent:function(){this.autoPause()},catchWaywardKeysEvent:function(e){e.which===y.BACKSPACE?this.autoPause():e.which!==y.ENTER||e.shiftKey||e.preventDefault()},typeInCueEvent:function(e){var t=this.cue(e.currentTarget);if(e.which!==y.ENTER||e.shiftKey)t.set("body",(0,u.default)(e.currentTarget).val());else{var n=this.video.getCurrentTime(),i=t.get("start_time"),a=n;t.shouldOverrideEndTime&&(n<i&&(a=i,i=n),a+=this.NEW_CAPTION_OFFSET,a-i<this.MINIMUM_MILLISECONDS&&(a=i+this.MINIMUM_MILLISECONDS),t.set({start_time:i,end_time:a})),this.addCueAt(Math.max(t.get("end_time"),a)+1),e.stopPropagation()}e.preventDefault()},cutPasteInCueEvent:function(e){var t=this.cue(e.currentTarget);setTimeout(function(){t.set("body",(0,u.default)(e.currentTarget).val())},0)},destroyCueEvent:function(e){this.cue(e.currentTarget).destroy(),e.preventDefault()},showHoverLineEvent:function(e){var t=this.$(".js-timeline-mouse-line");this.alignWithCursor(t,e)},hideHoverLineEvent:function(){this.$(".js-timeline-mouse-line").addClass("hidden")},saveTrackEvent:function(e){!this._saving&&this._dirty&&this.saveTrack(),e.preventDefault()},handleKeyboardShortcuts:function(e,t){return e===y.ESC?(this.video.paused()?this.video.play():this.video.pause(),this.$(".js-onboarding").addClass("fade-out"),!0):e===y.TAB&&(t?this.focusPreviousCue():this.focusNextCue(),!0)},handleKeyboardShortcutsFromEvent:function(e){return!!this.handleKeyboardShortcuts(e.which,e.shiftKey)&&(e.preventDefault(),!0)},timedText:function(e,t,n){var i=this;t=t||1e3,n=n||new Date,clearTimeout(this.timedTextTimeoutId),this.timedTextTimeoutId=setTimeout(function(){i.timedText(e,t,n)},t),this._renderLastSaved(e,n)},_renderLastSaved:function(e,t){e.text(_.default.t("views.video_track.Saved")+" "+(0,p.distance)(new Date,t))}});var b=function(e){var t=e.spokes,n=e.timelineEnd;return r.default.createElement("div",{className:"timeline relative bg-white clear border-top js-timeline user-select-none"},r.default.createElement("div",{className:"timeline_scroller z1 relative js-timeline--area",style:{width:n}},r.default.createElement("div",{className:"timeline_spokes absolute grey"},t.map(function(e,t){return r.default.createElement("div",{key:t},r.default.createElement("div",{className:"spoke spoke--level-"+e.level+" absolute",style:{bottom:0,left:e.x}}),e.displayText&&r.default.createElement("div",{className:"absolute pl2",style:{bottom:15,left:e.x}},e.msecs,"s"))}),r.default.createElement("div",{className:"spoke end",style:{bottom:0,left:0}}),r.default.createElement("div",{className:"spoke end",style:{bottom:0,left:n}})),r.default.createElement("div",{className:"js-timeline__cues absolute"}),r.default.createElement("div",{className:"js-cue-template timeline_handle z1 absolute bg-white border rounded tiny_type hidden"},r.default.createElement("div",{className:"timeline_drag_handle js-cue-handle absolute"},r.default.createElement("span",{className:"ss-icon ss-navigateright"})),r.default.createElement("div",{className:"js-non-draggable"},r.default.createElement("div",{className:"cue-textarea-wrapper"},r.default.createElement("textarea",{className:"cue-textarea js-cue-textarea",placeholder:_.default.t("video_tracks.Transcribe_and_press_Enter"),maxLength:"200"})),r.default.createElement("div",{className:"caption-actions"},r.default.createElement("a",{href:"javascript:void(0)",className:"js-destroy-cue"},r.default.createElement("div",{className:"ss-icon ss-delete"})))))),r.default.createElement("div",{className:"timeline_hover_line js-timeline-mouse-line absolute hidden"}),r.default.createElement("div",{className:"timeline_line absolute z1 js-timeline-line"}))},w=function(e){var t=e.track,n=e.encodings,i=e.editProjectPath;return r.default.createElement("div",null,r.default.createElement("div",{className:"clearfix mt3 mt5-sm"},r.default.createElement("div",{className:"f5 right mt3 mt5-sm"},r.default.createElement("button",{className:"btn btn--gray button_save_track right js-save-track",disabled:!0},_.default.t("views.video_track.Saved")),r.default.createElement("div",{className:"right mr2 js-last-save mt2 grey-dark"})),r.default.createElement("h2",{className:"mb2"},_.default.t("views.video_track.Language_track",{label:t.label})),r.default.createElement("a",{className:"left mb3 mb5-sm regular blue",href:i},r.default.createElement("span",{className:"ss-icon ss-navigateleft",style:{fontSize:"0.8em"}})," ",_.default.t("views.video_track.Back_to_edit"))),r.default.createElement("div",{className:"container-flex bg-grey-light border rounded mb3 mb10-sm"},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col col-4 mt3 mt5-sm mr2 ml3 ml5-sm"},r.default.createElement("h4",{className:"grey-dark"},_.default.t("views.video_track.Controls")),r.default.createElement("hr",null),r.default.createElement("h5",{className:"grey-dark inline-block mb0"},_.default.t("views.video_track.Play_pause")),r.default.createElement("span",{className:"grey-dark f5 regular inline-block right mb2"},r.default.createElement("span",{className:"border rounded key"},_.default.t("views.video_track.Esc"))),r.default.createElement("hr",{className:"mt2"}),r.default.createElement("h5",{className:"grey-dark inline-block mb0"},_.default.t("views.video_track.Add_caption")),r.default.createElement("span",{className:"grey-dark f5 regular inline-block right mb2"},r.default.createElement("span",{className:"border rounded key"},_.default.t("views.video_track.Enter"))),r.default.createElement("hr",{className:"mt2"}),r.default.createElement("h5",{className:"grey-dark inline-block mb0"},_.default.t("views.video_track.Line_break")),r.default.createElement("span",{className:"grey-dark f5 regular inline-block right mb2"},r.default.createElement("span",{className:"border rounded key"},_.default.t("views.video_track.Shift")),"+",r.default.createElement("span",{className:"border rounded key"},_.default.t("views.video_track.Enter"))),r.default.createElement("hr",{className:"mt2"}),r.default.createElement("h5",{className:"grey-dark inline-block mb0"},_.default.t("views.video_track.Next_caption")),r.default.createElement("span",{className:"grey-dark f5 regular inline-block right mb2"},r.default.createElement("span",{className:"border rounded key"},_.default.t("views.video_track.Tab"))),r.default.createElement("hr",{className:"mt2"}),r.default.createElement("h5",{className:"grey-dark inline-block mb0"},_.default.t("views.video_track.Previous_caption")),r.default.createElement("span",{className:"grey-dark f5 regular inline-block right mb2"},r.default.createElement("span",{className:"border rounded key"},_.default.t("views.video_track.Shift")),"+",r.default.createElement("span",{className:"border rounded key"},_.default.t("views.video_track.Tab"))),r.default.createElement("hr",{className:"mt2"})),r.default.createElement("div",{className:"col col-7 mt3 mt5-sm pb3 pb5-sm ml2"},r.default.createElement("div",{className:"onboarding js-onboarding"},r.default.createElement("div",{className:"onboarding-copy formatted-lists"},r.default.createElement("h3",{className:"mb3 mb5-sm"},_.default.t("views.video_track.Getting_started")),r.default.createElement("ol",null,r.default.createElement("li",{dangerouslySetInnerHTML:{__html:_.default.t("views.video_track.Press_esc_to_play")}}),r.default.createElement("li",null,_.default.t("views.video_track.When_you_type_the_video")),r.default.createElement("li",{dangerouslySetInnerHTML:{__html:_.default.t("views.video_track.When_its_time_to_start_a_new_caption")}})),r.default.createElement("h3",{className:"center mt3 mt7-sm",dangerouslySetInnerHTML:{__html:_.default.t("views.video_track.Press_esc_and_start_typing")}})),r.default.createElement("div",{className:"onboarding-bg"})),r.default.createElement("div",{className:"video-player show-controls-below js-video-player"},r.default.createElement("video",null,n&&r.default.createElement("source",{src:n.high,type:"video/mp4"}),n&&r.default.createElement("source",{src:n.webm,type:"video/webm"})),r.default.createElement("div",{className:"play_button_big play_button_dark absolute-center rounded has_played_hide play_button_big_hide"},r.default.createElement("span",{className:"ss-icon ss-play"}),_.default.t("views.video_track.Play")),r.default.createElement("div",{className:"player_controls white bg-green-dark"},r.default.createElement("div",{className:"left"},r.default.createElement("a",{className:"button button_icon button_dark playpause play mr2"},r.default.createElement("span",{className:"play ss-icon ss-play"}),r.default.createElement("span",{className:"pause ss-icon ss-pause"})),r.default.createElement("span",{className:"time current_time f12 left"},"00:00")),r.default.createElement("div",{className:"right"},r.default.createElement("span",{className:"time total_time f12 left mr2"},"00:00"),r.default.createElement("a",{className:"left button button_icon button_icon_white volume"},r.default.createElement("span",{className:"ss-icon ss-volume icon_volume_nudge"}),r.default.createElement("span",{className:"ss-icon ss-highvolume"})),r.default.createElement("div",{className:"volume_container left"},r.default.createElement("div",{className:"progress_bar progress_bar_dark progress_bg"},r.default.createElement("div",{className:"progress_bar_bg"}),r.default.createElement("div",{className:"progress progress_bar_progress"}),r.default.createElement("div",{className:"progress_handle progress_bar_handle"}))),r.default.createElement("a",{className:"left button button_icon button_icon_white fullscreen"},r.default.createElement("span",{className:"ss-icon ss-expand"}),r.default.createElement("span",{className:"ss-icon ss-contract"}))),r.default.createElement("div",{className:"clip"},r.default.createElement("div",{className:"progress_container pr2 pl2"},r.default.createElement("div",{className:"progress_bar progress_bar_dark progress_bg"},r.default.createElement("div",{className:"progress_bar_bg"}),r.default.createElement("div",{className:"buffer progress_bar_buffer"}),r.default.createElement("div",{className:"progress progress_bar_progress"}),r.default.createElement("div",{className:"progress_handle progress_bar_handle"})))),r.default.createElement("div",{className:"clear"}))))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col col-12 relative"},r.default.createElement("div",{className:"timeline_wrapper"})))))}},,,function(e,t,n){var i=n(0);n(0);!function(e){function t(e,t){t||(t={}),this.text=t.text||e.data("text")||e.text(),this.$elem=e,this.is_on=!1,this.bind()}var n=e('<div id="jquery-clipster-overlay"><div><p>Press âŒ˜C to copy</p><p><textarea></textarea></p></div></div>'),i=n.find("textarea");n.hide(),e(function(){e("body").append(n)}),e.clipster=function(t,n){e(document).on("click",t,function(t){e(this).clipster(n).data("clipster").activate(),t.preventDefault()})},e.fn.clipster=function(n){return this.each(function(){var i=e(this),a=i.data("clipster");a||(a=new t(i,n),i.data("clipster",a))})},t.prototype.bind=function(){var t=this;this.$elem.on("click",function(e){t.activate(),e.preventDefault()}),e(document).on("copy click",function(n){var a=e(n.target);a.closest(t.$elem).length||"click"===n.type&&a.is(i)||t.deactivate()}),e(document).on("keydown",function(e){27===e.which&&t.deactivate()})},t.prototype.activate=function(){this.active||(n.show(),i.val(this.text),i[0].select(),i.focus(),this.active=!0)},t.prototype.deactivate=function(){this.active&&(setTimeout(function(){n.hide()}),this.active=!1)}}(i)},function(e,t,n){var i=n(0);n(0);!function(e){"use strict";e.extend({tablesorter:new function(){function t(){var e=arguments.length>1?Array.prototype.slice.call(arguments):arguments[0];"undefined"!=typeof console&&void 0!==console.log?console.log(e):alert(e)}function n(e,n){t(e+" ("+((new Date).getTime()-n.getTime())+"ms)")}function i(e){for(var t in e)return!1;return!0}function a(t,n,i){if(!n)return"";var a=t.config,r=a.textExtraction,o="";return o="simple"===r?a.supportsTextContent?n.textContent:e(n).text():"function"==typeof r?r(n,t,i):"object"==typeof r&&r.hasOwnProperty(i)?r[i](n,t,i):a.supportsTextContent?n.textContent:e(n).text(),e.trim(o)}function r(e,n,i,r){for(var o,s=j.parsers.length,l=!1,u="",d=!0;""===u&&d;)i++,n[i]?(l=n[i].cells[r],u=a(e,l,r),e.config.debug&&t("Checking if value was empty on row "+i+", column: "+r+': "'+u+'"')):d=!1;for(;--s>=0;)if((o=j.parsers[s])&&"text"!==o.id&&o.is&&o.is(u,e,l))return o;return j.getParserById("text")}function o(e){var i,a,o,s,l,u,d,c,f=e.config,h=f.$tbodies=f.$table.children("tbody:not(."+f.cssInfoBlock+")"),p="";if(0===h.length)return f.debug?t("*Empty table!* Not building a parser cache"):"";if(f.debug&&(c=new Date,t("Detecting parsers for each column")),i=h[0].rows,i[0])for(a=[],o=i[0].cells.length,s=0;s<o;s++)l=f.$headers.filter(":not([colspan])"),l=l.add(f.$headers.filter('[colspan="1"]')).filter('[data-column="'+s+'"]:last'),u=f.headers[s],d=j.getParserById(j.getData(l,u,"sorter")),f.empties[s]=j.getData(l,u,"empty")||f.emptyTo||(f.emptyToBottom?"bottom":"top"),f.strings[s]=j.getData(l,u,"string")||f.stringTo||"max",d||(d=r(e,i,-1,s)),f.debug&&(p+="column:"+s+"; parser:"+d.id+"; string:"+f.strings[s]+"; empty: "+f.empties[s]+"\n"),a.push(d);f.debug&&(t(p),n("Completed detecting parsers",c)),f.parsers=a}function s(i){var r,o,s,l,u,d,c,f,h,p,m=i.tBodies,g=i.config,v=g.parsers,_=[];if(g.cache={},!v)return g.debug?t("*Empty table!* Not building a cache"):"";for(g.debug&&(p=new Date),g.showProcessing&&j.isProcessing(i,!0),c=0;c<m.length;c++)if(g.cache[c]={row:[],normalized:[]},!e(m[c]).hasClass(g.cssInfoBlock)){for(r=m[c]&&m[c].rows.length||0,o=m[c].rows[0]&&m[c].rows[0].cells.length||0,u=0;u<r;++u)if(f=e(m[c].rows[u]),h=[],f.hasClass(g.cssChildRow))g.cache[c].row[g.cache[c].row.length-1]=g.cache[c].row[g.cache[c].row.length-1].add(f);else{for(g.cache[c].row.push(f),d=0;d<o;++d)s=a(i,f[0].cells[d],d),l=v[d].format(s,i,f[0].cells[d],d),h.push(l),"numeric"===(v[d].type||"").toLowerCase()&&(_[d]=Math.max(Math.abs(l)||0,_[d]||0));h.push(g.cache[c].normalized.length),g.cache[c].normalized.push(h)}g.cache[c].colMax=_}g.showProcessing&&j.isProcessing(i),g.debug&&n("Building cache for "+r+" rows",p)}function l(t,a){var r,o,s,l,u,d,c,f,h,p,m,g,v=t.config,_=v.widgetOptions,y=t.tBodies,b=[],w=v.cache;if(!i(w)){for(v.debug&&(g=new Date),h=0;h<y.length;h++)if(u=e(y[h]),u.length&&!u.hasClass(v.cssInfoBlock)){for(d=j.processTbody(t,u,!0),r=w[h].row,o=w[h].normalized,s=o.length,l=s?o[0].length-1:0,c=0;c<s;c++)if(m=o[c][l],b.push(r[m]),!v.appender||v.pager&&(!v.pager.removeRows||!_.pager_removeRows)&&!v.pager.ajax)for(p=r[m].length,f=0;f<p;f++)d.append(r[m][f]);j.processTbody(t,d,!1)}v.appender&&v.appender(t,b),v.debug&&n("Rebuilt table",g),a||v.appender||j.applyWidget(t),e(t).trigger("sortEnd",t),e(t).trigger("updateComplete",t)}}function u(t){var n,i,a,r,o,s,l,u,d,c,f,h,p=[],m={},g=0,v=e(t).find("thead:eq(0), tfoot").children("tr");for(n=0;n<v.length;n++)for(s=v[n].cells,i=0;i<s.length;i++){for(o=s[i],l=o.parentNode.rowIndex,u=l+"-"+o.cellIndex,d=o.rowSpan||1,c=o.colSpan||1,void 0===p[l]&&(p[l]=[]),a=0;a<p[l].length+1;a++)if(void 0===p[l][a]){f=a;break}for(m[u]=f,g=Math.max(f,g),e(o).attr({"data-column":f}),a=l;a<l+d;a++)for(void 0===p[a]&&(p[a]=[]),h=p[a],r=f;r<f+c;r++)h[r]="x"}return t.config.columns=g+1,m}function d(e){return/^d/i.test(e)||1===e}function c(i){var a,r,o,s,l,c,f,p=u(i),m=i.config;m.headerList=[],m.headerContent=[],m.debug&&(f=new Date),s=m.cssIcon?'<i class="'+m.cssIcon+" "+j.css.icon+'"></i>':"",m.$headers=e(i).find(m.selectorHeaders).each(function(t){r=e(this),a=m.headers[t],m.headerContent[t]=e(this).html(),l=m.headerTemplate.replace(/\{content\}/g,e(this).html()).replace(/\{icon\}/g,s),m.onRenderTemplate&&(o=m.onRenderTemplate.apply(r,[t,l]))&&"string"==typeof o&&(l=o),e(this).html('<div class="tablesorter-header-inner">'+l+"</div>"),m.onRenderHeader&&m.onRenderHeader.apply(r,[t]),this.column=p[this.parentNode.rowIndex+"-"+this.cellIndex],this.order=d(j.getData(r,a,"sortInitialOrder")||m.sortInitialOrder)?[1,0,2]:[0,1,2],this.count=-1,this.lockedOrder=!1,c=j.getData(r,a,"lockedOrder")||!1,void 0!==c&&c!==!1&&(this.order=this.lockedOrder=d(c)?[1,1,1]:[0,0,0]),r.addClass(j.css.header+" "+m.cssHeader),m.headerList[t]=this,r.parent().addClass(j.css.headerRow+" "+m.cssHeaderRow),r.attr("tabindex",0)}),h(i),m.debug&&(n("Built headers:",f),t(m.$headers))}function f(e,t,n){var i=e.config;i.$table.find(i.selectorRemove).remove(),o(e),s(e),w(i.$table,t,n)}function h(t){var n,i=t.config;i.$headers.each(function(t,a){n="false"===j.getData(a,i.headers[t],"sorter"),a.sortDisabled=n,e(a)[n?"addClass":"removeClass"]("sorter-false")})}function p(t){var n,i,a,r,o=t.config,s=o.sortList,l=[j.css.sortAsc+" "+o.cssAsc,j.css.sortDesc+" "+o.cssDesc],u=e(t).find("tfoot tr").children().removeClass(l.join(" "));for(o.$headers.removeClass(l.join(" ")),r=s.length,i=0;i<r;i++)if(2!==s[i][1]&&(n=o.$headers.not(".sorter-false").filter('[data-column="'+s[i][0]+'"]'+(1===r?":last":"")),n.length))for(a=0;a<n.length;a++)n[a].sortDisabled||(n.eq(a).addClass(l[s[i][1]]),u.length&&u.filter('[data-column="'+s[i][0]+'"]').eq(a).addClass(l[s[i][1]]))}function m(t){if(t.config.widthFixed&&0===e(t).find("colgroup").length){var n=e("<colgroup>"),i=e(t).width();e(t.tBodies[0]).find("tr:first").children("td:visible").each(function(){n.append(e("<col>").css("width",parseInt(e(this).width()/i*1e3,10)/10+"%"))}),e(t).prepend(n)}}function g(t,n){var i,a,r,o=t.config,s=n||o.sortList;o.sortList=[],e.each(s,function(t,n){i=[parseInt(n[0],10),parseInt(n[1],10)],(r=o.$headers[i[0]])&&(o.sortList.push(i),a=e.inArray(i[1],r.order),r.count=a>=0?a:i[1]%(o.sortReset?3:2))})}function v(e,t){return e&&e[t]?e[t].type||"":""}function _(t,n,i){var a,r,o,s,u,d=t.config,c=!i[d.sortMultiSortKey],f=e(t);if(f.trigger("sortStart",t),n.count=i[d.sortResetKey]?2:(n.count+1)%(d.sortReset?3:2),d.sortRestart&&(r=n,d.$headers.each(function(){this===r||!c&&e(this).is("."+j.css.sortDesc+",."+j.css.sortAsc)||(this.count=-1)})),r=n.column,c){if(d.sortList=[],null!==d.sortForce)for(a=d.sortForce,o=0;o<a.length;o++)a[o][0]!==r&&d.sortList.push(a[o]);if((s=n.order[n.count])<2&&(d.sortList.push([r,s]),n.colSpan>1))for(o=1;o<n.colSpan;o++)d.sortList.push([r+o,s])}else if(d.sortAppend&&d.sortList.length>1&&j.isValueInArray(d.sortAppend[0][0],d.sortList)&&d.sortList.pop(),j.isValueInArray(r,d.sortList))for(o=0;o<d.sortList.length;o++)u=d.sortList[o],s=d.$headers[u[0]],u[0]===r&&(u[1]=s.order[n.count],2===u[1]&&(d.sortList.splice(o,1),s.count=-1));else if((s=n.order[n.count])<2&&(d.sortList.push([r,s]),n.colSpan>1))for(o=1;o<n.colSpan;o++)d.sortList.push([r+o,s]);if(null!==d.sortAppend)for(a=d.sortAppend,o=0;o<a.length;o++)a[o][0]!==r&&d.sortList.push(a[o]);f.trigger("sortBegin",t),setTimeout(function(){p(t),y(t),l(t)},1)}function y(e){var t,a,r,o,s,l,u,d,c,f,h,p,m,g=0,_=e.config,y=_.textSorter||"",b=_.sortList,w=b.length,k=e.tBodies.length;if(!_.serverSideSorting&&!i(_.cache)){for(_.debug&&(f=new Date),a=0;a<k;a++)l=_.cache[a].colMax,u=_.cache[a].normalized,u.length,c=u&&u[0]?u[0].length-1:0,u.sort(function(n,i){for(t=0;t<w;t++){if(s=b[t][0],d=b[t][1],g=0===d,p=g?n:i,m=g?i:n,r=_.string[_.empties[s]||_.emptyTo],""===p[s]&&0!==r)return("boolean"==typeof r?r?-1:1:r||1)*(g?1:-1);if(""===m[s]&&0!==r)return("boolean"==typeof r?r?1:-1:-r||-1)*(g?1:-1);if(o=/n/i.test(v(_.parsers,s)),o&&_.strings[s]?(o="boolean"==typeof _.string[_.strings[s]]?(g?1:-1)*(_.string[_.strings[s]]?-1:1):_.strings[s]?_.string[_.strings[s]]||0:0,h=_.numberSorter?_.numberSorter(p[s],m[s],g,l[s],e):j.sortNumeric(p[s],m[s],o,l[s])):h="function"==typeof y?y(p[s],m[s],g,s,e):"object"==typeof y&&y.hasOwnProperty(s)?y[s](p[s],m[s],g,s,e):j.sortNatural(p[s],m[s]),h)return h}return n[c]-i[c]});_.debug&&n("Sorting on "+b.toString()+" and dir "+d+" time",f)}}function b(e,t){var n=e[0].config;n.pager&&!n.pager.ajax&&e.trigger("updateComplete"),"function"==typeof t&&t(e[0])}function w(e,t,n){t===!1||e[0].isProcessing?b(e,n):e.trigger("sorton",[e[0].config.sortList,function(){b(e,n)}])}function k(t){var n,r,u=t.config,d=u.$table;u.$headers.find(u.selectorSort).add(u.$headers.filter(u.selectorSort)).unbind("mousedown.tablesorter mouseup.tablesorter sort.tablesorter keypress.tablesorter").bind("mousedown.tablesorter mouseup.tablesorter sort.tablesorter keypress.tablesorter",function(n,a){if(!(1!==(n.which||n.button)&&!/sort|keypress/.test(n.type)||"keypress"===n.type&&13!==n.which||"mouseup"===n.type&&a!==!0&&(new Date).getTime()-r>250)){if("mousedown"===n.type)return r=(new Date).getTime(),"INPUT"===n.target.tagName?"":!u.cancelSelection;u.delayInit&&i(u.cache)&&s(t);var o=/TH|TD/.test(this.tagName)?e(this):e(this).parents("th, td").filter(":first"),l=o[0];l.sortDisabled||_(t,l,n)}}),u.cancelSelection&&u.$headers.attr("unselectable","on").bind("selectstart",!1).css({"user-select":"none",MozUserSelect:"none"}),d.unbind("sortReset update updateRows updateCell updateAll addRows sorton appendCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave ".split(" ").join(".tablesorter ")).bind("sortReset.tablesorter",function(e){e.stopPropagation(),u.sortList=[],p(t),y(t),l(t)}).bind("updateAll.tablesorter",function(e,n,i){e.stopPropagation(),j.refreshWidgets(t,!0,!0),j.restoreHeaders(t),c(t),k(t),f(t,n,i)}).bind("update.tablesorter updateRows.tablesorter",function(e,n,i){e.stopPropagation(),h(t),f(t,n,i)}).bind("updateCell.tablesorter",function(n,i,r,o){n.stopPropagation(),d.find(u.selectorRemove).remove();var s,l,c,f=d.find("tbody"),h=f.index(e(i).parents("tbody").filter(":first")),p=e(i).parents("tr").filter(":first");i=e(i)[0],f.length&&h>=0&&(l=f.eq(h).find("tr").index(p),c=i.cellIndex,s=u.cache[h].normalized[l].length-1,u.cache[h].row[t.config.cache[h].normalized[l][s]]=p,u.cache[h].normalized[l][c]=u.parsers[c].format(a(t,i,c),t,i,c),w(d,r,o))}).bind("addRows.tablesorter",function(e,i,r,s){e.stopPropagation();var l,c=i.filter("tr").length,f=[],h=i[0].cells.length,p=d.find("tbody").index(i.parents("tbody").filter(":first"));for(u.parsers||o(t),l=0;l<c;l++){for(n=0;n<h;n++)f[n]=u.parsers[n].format(a(t,i[l].cells[n],n),t,i[l].cells[n],n);f.push(u.cache[p].row.length),u.cache[p].row.push([i[l]]),u.cache[p].normalized.push(f),f=[]}w(d,r,s)}).bind("sorton.tablesorter",function(e,n,a,r){var o=t.config;e.stopPropagation(),d.trigger("sortStart",this),g(t,n),p(t),o.delayInit&&i(o.cache)&&s(t),d.trigger("sortBegin",this),y(t),l(t,r),"function"==typeof a&&a(t)}).bind("appendCache.tablesorter",function(e,n,i){e.stopPropagation(),l(t,i),"function"==typeof n&&n(t)}).bind("applyWidgetId.tablesorter",function(e,n){e.stopPropagation(),j.getWidgetById(n).format(t,u,u.widgetOptions)}).bind("applyWidgets.tablesorter",function(e,n){e.stopPropagation(),j.applyWidget(t,n)}).bind("refreshWidgets.tablesorter",function(e,n,i){e.stopPropagation(),j.refreshWidgets(t,n,i)}).bind("destroy.tablesorter",function(e,n,i){e.stopPropagation(),j.destroy(t,n,i)})}var j=this;j.version="2.13.3",j.parsers=[],j.widgets=[],j.defaults={theme:"default",widthFixed:!1,showProcessing:!1,headerTemplate:"{content}",onRenderTemplate:null,onRenderHeader:null,cancelSelection:!0,dateFormat:"mmddyyyy",sortMultiSortKey:"shiftKey",sortResetKey:"ctrlKey",usNumberFormat:!0,delayInit:!1,serverSideSorting:!1,headers:{},ignoreCase:!0,sortForce:null,sortList:[],sortAppend:null,sortInitialOrder:"asc",sortLocaleCompare:!1,sortReset:!1,sortRestart:!1,emptyTo:"bottom",stringTo:"max",textExtraction:"simple",textSorter:null,numberSorter:null,widgets:[],widgetOptions:{zebra:["even","odd"]},initWidgets:!0,initialized:null,tableClass:"",cssAsc:"",cssDesc:"",cssHeader:"",cssHeaderRow:"",cssProcessing:"",cssChildRow:"tablesorter-childRow",cssIcon:"tablesorter-icon",cssInfoBlock:"tablesorter-infoOnly",selectorHeaders:"> thead th, > thead td",selectorSort:"th, td",selectorRemove:".remove-me",debug:!1,headerList:[],empties:{},strings:{},parsers:[]},j.css={table:"tablesorter",childRow:"tablesorter-childRow",header:"tablesorter-header",headerRow:"tablesorter-headerRow",icon:"tablesorter-icon",info:"tablesorter-infoOnly",processing:"tablesorter-processing",sortAsc:"tablesorter-headerAsc",sortDesc:"tablesorter-headerDesc"},j.log=t,j.benchmark=n,j.construct=function(t){return this.each(function(){var n=this,i=e.extend(!0,{},j.defaults,t);!n.hasInitialized&&j.buildTable&&"TABLE"!==this.tagName&&j.buildTable(n,i),j.setup(n,i)})},j.setup=function(n,i){if(!n||!n.tHead||0===n.tBodies.length||n.hasInitialized===!0)return i.debug?t("stopping initialization! No table, thead, tbody or tablesorter has already been initialized"):"";var a="",r=e(n),l=e.metadata;n.hasInitialized=!1,n.isProcessing=!0,n.config=i,e.data(n,"tablesorter",i),i.debug&&e.data(n,"startoveralltimer",new Date),i.supportsTextContent="x"===e("<span>x</span>")[0].textContent,i.supportsDataObject=function(e){return e[0]=parseInt(e[0],10),e[0]>1||1===e[0]&&parseInt(e[1],10)>=4}(e.fn.jquery.split(".")),i.string={max:1,min:-1,"max+":1,"max-":-1,zero:0,none:0,null:0,top:!0,bottom:!1},/tablesorter\-/.test(r.attr("class"))||(a=""!==i.theme?" tablesorter-"+i.theme:""),i.$table=r.addClass(j.css.table+" "+i.tableClass+a),i.$tbodies=r.children("tbody:not(."+i.cssInfoBlock+")"),i.widgetInit={},c(n),m(n),o(n),i.delayInit||s(n),k(n),i.supportsDataObject&&void 0!==r.data().sortlist?i.sortList=r.data().sortlist:l&&r.metadata()&&r.metadata().sortlist&&(i.sortList=r.metadata().sortlist),j.applyWidget(n,!0),i.sortList.length>0?r.trigger("sorton",[i.sortList,{},!i.initWidgets]):i.initWidgets&&j.applyWidget(n),i.showProcessing&&r.unbind("sortBegin.tablesorter sortEnd.tablesorter").bind("sortBegin.tablesorter sortEnd.tablesorter",function(e){j.isProcessing(n,"sortBegin"===e.type)}),n.hasInitialized=!0,n.isProcessing=!1,i.debug&&j.benchmark("Overall initialization time",e.data(n,"startoveralltimer")),r.trigger("tablesorter-initialized",n),"function"==typeof i.initialized&&i.initialized(n)},j.isProcessing=function(t,n,i){t=e(t);var a=t[0].config,r=i||t.find("."+j.css.header);n?(a.sortList.length>0&&(r=r.filter(function(){return!this.sortDisabled&&j.isValueInArray(parseFloat(e(this).attr("data-column")),a.sortList)})),r.addClass(j.css.processing+" "+a.cssProcessing)):r.removeClass(j.css.processing+" "+a.cssProcessing)},j.processTbody=function(t,n,i){var a;if(i)return t.isProcessing=!0,n.before('<span class="tablesorter-savemyplace"/>'),a=e.fn.detach?n.detach():n.remove();a=e(t).find("span.tablesorter-savemyplace"),n.insertAfter(a),a.remove(),t.isProcessing=!1},j.clearTableBody=function(t){e(t)[0].config.$tbodies.empty()},j.restoreHeaders=function(t){var n=t.config;n.$table.find(n.selectorHeaders).each(function(t){e(this).find(".tablesorter-header-inner").length&&e(this).html(n.headerContent[t])})},j.destroy=function(t,n,i){if(t=e(t)[0],t.hasInitialized){j.refreshWidgets(t,!0,!0);var a=e(t),r=t.config,o=a.find("thead:first"),s=o.find("tr."+j.css.headerRow).removeClass(j.css.headerRow+" "+r.cssHeaderRow),l=a.find("tfoot:first > tr").children("th, td");o.find("tr").not(s).remove(),a.removeData("tablesorter").unbind("sortReset update updateAll updateRows updateCell addRows sorton appendCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave keypress sortBegin sortEnd ".split(" ").join(".tablesorter ")),r.$headers.add(l).removeClass([j.css.header,r.cssHeader,r.cssAsc,r.cssDesc,j.css.sortAsc,j.css.sortDesc].join(" ")).removeAttr("data-column"),s.find(r.selectorSort).unbind("mousedown.tablesorter mouseup.tablesorter keypress.tablesorter"),j.restoreHeaders(t),n!==!1&&a.removeClass(j.css.table+" "+r.tableClass+" tablesorter-"+r.theme),t.hasInitialized=!1,"function"==typeof i&&i(t)}},j.regex={chunk:/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,hex:/^0x[0-9a-f]+$/i},j.sortNatural=function(e,t){if(e===t)return 0;var n,i,a,r,o,s,l,u,d=j.regex;if(d.hex.test(t)){if(i=parseInt(e.match(d.hex),16),r=parseInt(t.match(d.hex),16),i<r)return-1;if(i>r)return 1}for(n=e.replace(d.chunk,"\\0$1\\0").replace(/\\0$/,"").replace(/^\\0/,"").split("\\0"),a=t.replace(d.chunk,"\\0$1\\0").replace(/\\0$/,"").replace(/^\\0/,"").split("\\0"),u=Math.max(n.length,a.length),l=0;l<u;l++){if(o=isNaN(n[l])?n[l]||0:parseFloat(n[l])||0,s=isNaN(a[l])?a[l]||0:parseFloat(a[l])||0,isNaN(o)!==isNaN(s))return isNaN(o)?1:-1;if(typeof o!=typeof s&&(o+="",s+=""),o<s)return-1;if(o>s)return 1}return 0},j.sortText=function(e,t){return e>t?1:e<t?-1:0},j.getTextValue=function(e,t,n){if(n){var i,a=e?e.length:0,r=n+t;for(i=0;i<a;i++)r+=e.charCodeAt(i);return t*r}return 0},j.sortNumeric=function(e,t,n,i){return e===t?0:(isNaN(e)&&(e=j.getTextValue(e,n,i)),isNaN(t)&&(t=j.getTextValue(t,n,i)),e-t)},j.characterEquivalents={a:"Ã¡Ã Ã¢Ã£Ã¤Ä…Ã¥",A:"ÃÃ€Ã‚ÃƒÃ„Ä„Ã…",c:"Ã§Ä‡Ä",C:"Ã‡Ä†ÄŒ",e:"Ã©Ã¨ÃªÃ«Ä›Ä™",E:"Ã‰ÃˆÃŠÃ‹ÄšÄ˜",i:"Ã­Ã¬Ä°Ã®Ã¯Ä±",I:"ÃÃŒÄ°ÃŽÃ",o:"Ã³Ã²Ã´ÃµÃ¶",O:"Ã“Ã’Ã”Ã•Ã–",ss:"ÃŸ",SS:"áºž",u:"ÃºÃ¹Ã»Ã¼Å¯",U:"ÃšÃ™Ã›ÃœÅ®"},j.replaceAccents=function(e){var t,n="[",i=j.characterEquivalents;if(!j.characterRegex){j.characterRegexArray={};for(t in i)"string"==typeof t&&(n+=i[t],j.characterRegexArray[t]=new RegExp("["+i[t]+"]","g"));j.characterRegex=new RegExp(n+"]")}if(j.characterRegex.test(e))for(t in i)"string"==typeof t&&(e=e.replace(j.characterRegexArray[t],t));return e},j.isValueInArray=function(e,t){var n,i=t.length;for(n=0;n<i;n++)if(t[n][0]===e)return!0;return!1},j.addParser=function(e){var t,n=j.parsers.length,i=!0;for(t=0;t<n;t++)j.parsers[t].id.toLowerCase()===e.id.toLowerCase()&&(i=!1);i&&j.parsers.push(e)},j.getParserById=function(e){var t,n=j.parsers.length;for(t=0;t<n;t++)if(j.parsers[t].id.toLowerCase()===e.toString().toLowerCase())return j.parsers[t];return!1},j.addWidget=function(e){j.widgets.push(e)},j.getWidgetById=function(e){var t,n,i=j.widgets.length;for(t=0;t<i;t++)if((n=j.widgets[t])&&n.hasOwnProperty("id")&&n.id.toLowerCase()===e.toLowerCase())return n},j.applyWidget=function(t,i){t=e(t)[0];var a,r,o,s=t.config,l=s.widgetOptions,u=[];s.debug&&(a=new Date),s.widgets.length&&(s.widgets=e.grep(s.widgets,function(t,n){return e.inArray(t,s.widgets)===n}),e.each(s.widgets||[],function(e,t){(o=j.getWidgetById(t))&&o.id&&(o.priority||(o.priority=10),u[e]=o)}),u.sort(function(e,t){return e.priority<t.priority?-1:e.priority===t.priority?0:1}),e.each(u,function(n,a){a&&(!i&&s.widgetInit[a.id]||(a.hasOwnProperty("options")&&(l=t.config.widgetOptions=e.extend(!0,{},a.options,l),s.widgetInit[a.id]=!0),a.hasOwnProperty("init")&&a.init(t,a,s,l)),!i&&a.hasOwnProperty("format")&&a.format(t,s,l,!1))})),s.debug&&(r=s.widgets.length,n("Completed "+(i===!0?"initializing ":"applying ")+r+" widget"+(1!==r?"s":""),a))},j.refreshWidgets=function(n,i,a){n=e(n)[0];var r,o=n.config,s=o.widgets,l=j.widgets,u=l.length;for(r=0;r<u;r++)l[r]&&l[r].id&&(i||e.inArray(l[r].id,s)<0)&&(o.debug&&t("Refeshing widgets: Removing "+l[r].id),l[r].hasOwnProperty("remove")&&(l[r].remove(n,o,o.widgetOptions),o.widgetInit[l[r].id]=!1));a!==!0&&j.applyWidget(n,i)},j.getData=function(t,n,i){var a,r,o="",s=e(t);return s.length?(a=!!e.metadata&&s.metadata(),r=" "+(s.attr("class")||""),void 0!==s.data(i)||void 0!==s.data(i.toLowerCase())?o+=s.data(i)||s.data(i.toLowerCase()):a&&void 0!==a[i]?o+=a[i]:n&&void 0!==n[i]?o+=n[i]:" "!==r&&r.match(" "+i+"-")&&(o=r.match(new RegExp("\\s"+i+"-([\\w-]+)"))[1]||""),e.trim(o)):""},j.formatFloat=function(t,n){if("string"!=typeof t||""===t)return t;var i;return t=(n&&n.config?n.config.usNumberFormat!==!1:void 0===n||n)?t.replace(/,/g,""):t.replace(/[\s|\.]/g,"").replace(/,/g,"."),/^\s*\([.\d]+\)/.test(t)&&(t=t.replace(/^\s*\(([.\d]+)\)/,"-$1")),i=parseFloat(t),isNaN(i)?e.trim(t):i},j.isDigit=function(e){return!isNaN(e)||/^[\-+(]?\d+[)]?$/.test(e.toString().replace(/[,.'"\s]/g,""))}}});var t=e.tablesorter;e.fn.extend({tablesorter:t.construct}),t.addParser({id:"text",is:function(){return!0},format:function(n,i){var a=i.config;return n&&(n=e.trim(a.ignoreCase?n.toLocaleLowerCase():n),n=a.sortLocaleCompare?t.replaceAccents(n):n),n},type:"text"}),t.addParser({id:"digit",is:function(e){return t.isDigit(e)},format:function(n,i){var a=t.formatFloat((n||"").replace(/[^\w,. \-()]/g,""),i);return n&&"number"==typeof a?a:n?e.trim(n&&i.config.ignoreCase?n.toLocaleLowerCase():n):n},type:"numeric"}),t.addParser({id:"currency",is:function(e){return/^\(?\d+[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]|[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]\d+\)?$/.test((e||"").replace(/[,. ]/g,""))},format:function(n,i){var a=t.formatFloat((n||"").replace(/[^\w,. \-()]/g,""),i);return n&&"number"==typeof a?a:n?e.trim(n&&i.config.ignoreCase?n.toLocaleLowerCase():n):n},type:"numeric"}),t.addParser({id:"ipAddress",is:function(e){return/^\d{1,3}[\.]\d{1,3}[\.]\d{1,3}[\.]\d{1,3}$/.test(e)},format:function(e,n){var i,a=e?e.split("."):"",r="",o=a.length;for(i=0;i<o;i++)r+=("00"+a[i]).slice(-3);return e?t.formatFloat(r,n):e},type:"numeric"}),t.addParser({id:"url",is:function(e){return/^(https?|ftp|file):\/\//.test(e)},format:function(t){return t?e.trim(t.replace(/(https?|ftp|file):\/\//,"")):t},type:"text"}),t.addParser({id:"isoDate",is:function(e){return/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/.test(e)},format:function(e,n){return e?t.formatFloat(""!==e?new Date(e.replace(/-/g,"/")).getTime()||"":"",n):e},type:"numeric"}),t.addParser({id:"percent",is:function(e){return/(\d\s*?%|%\s*?\d)/.test(e)&&e.length<15},format:function(e,n){return e?t.formatFloat(e.replace(/%/g,""),n):e},type:"numeric"}),t.addParser({id:"usLongDate",is:function(e){return/^[A-Z]{3,10}\.?\s+\d{1,2},?\s+(\d{4})(\s+\d{1,2}:\d{2}(:\d{2})?(\s+[AP]M)?)?$/i.test(e)||/^\d{1,2}\s+[A-Z]{3,10}\s+\d{4}/i.test(e)},format:function(e,n){return e?t.formatFloat(new Date(e.replace(/(\S)([AP]M)$/i,"$1 $2")).getTime()||"",n):e},type:"numeric"}),t.addParser({id:"shortDate",is:function(e){return/(^\d{1,2}[\/\s]\d{1,2}[\/\s]\d{4})|(^\d{4}[\/\s]\d{1,2}[\/\s]\d{1,2})/.test((e||"").replace(/\s+/g," ").replace(/[\-.,]/g,"/"))},format:function(e,n,i,a){if(e){var r=n.config,o=r.headerList[a],s=o.dateFormat||t.getData(o,r.headers[a],"dateFormat")||r.dateFormat;e=e.replace(/\s+/g," ").replace(/[\-.,]/g,"/"),"mmddyyyy"===s?e=e.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$1/$2"):"ddmmyyyy"===s?e=e.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$2/$1"):"yyyymmdd"===s&&(e=e.replace(/(\d{4})[\/\s](\d{1,2})[\/\s](\d{1,2})/,"$1/$2/$3"))}return e?t.formatFloat(new Date(e).getTime()||"",n):e},type:"numeric"}),t.addParser({id:"time",is:function(e){return/^(([0-2]?\d:[0-5]\d)|([0-1]?\d:[0-5]\d\s?([AP]M)))$/i.test(e)},format:function(e,n){return e?t.formatFloat(new Date("2000/01/01 "+e.replace(/(\S)([AP]M)$/i,"$1 $2")).getTime()||"",n):e},type:"numeric"}),t.addParser({id:"metadata",is:function(){return!1},format:function(t,n,i){var a=n.config,r=a.parserMetadataName?a.parserMetadataName:"sortValue";return e(i).metadata()[r]},type:"numeric"}),t.addWidget({id:"zebra",priority:90,format:function(n,i,a){var r,o,s,l,u,d,c,f=new RegExp(i.cssChildRow,"i"),h=i.$tbodies;for(i.debug&&(d=new Date),c=0;c<h.length;c++)r=h.eq(c),r.children("tr").length>1&&(l=0,o=r.children("tr:visible"),o.each(function(){s=e(this),f.test(this.className)||l++,u=l%2==0,s.removeClass(a.zebra[u?1:0]).addClass(a.zebra[u?0:1])}));i.debug&&t.benchmark("Applying Zebra widget",d)},remove:function(t,n,i){var a,r,o=n.$tbodies,s=(i.zebra||["even","odd"]).join(" ");for(a=0;a<o.length;a++)r=e.tablesorter.processTbody(t,o.eq(a),!0),r.children().removeClass(s),e.tablesorter.processTbody(t,r,!1)}})}(i)},,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(786),a=n(478),r=n(790);i.inject();var o={renderToString:a.renderToString,renderToStaticMarkup:a.renderToStaticMarkup,version:r};e.exports=o},function(e,t,n){"use strict";var i={isBatchingUpdates:!1,batchedUpdates:function(e){}};e.exports=i},function(e,t,n){"use strict";function i(e,t){var n;try{return p.injection.injectBatchingStrategy(f),n=h.getPooled(t),v++,n.perform(function(){var i=g(e,!0),a=c.mountComponent(i,n,null,l(),m,0);return t||(a=d.addChecksumToMarkup(a)),a},null)}finally{v--,h.release(n),v||p.injection.injectBatchingStrategy(u)}}function a(e){return s.isValidElement(e)||o("46"),i(e,!1)}function r(e){return s.isValidElement(e)||o("47"),i(e,!0)}var o=n(86),s=n(307),l=n(784),u=n(785),d=(n(229),n(788)),c=n(305),f=n(477),h=n(789),p=n(243),m=n(312),g=n(535),v=(n(24),0);e.exports={renderToString:a,renderToStaticMarkup:r}},,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var i,a;!function(r,o){"object"==typeof e&&e.exports?e.exports=o():(i=o,void 0!==(a="function"==typeof i?i.call(t,n,t,e):i)&&(e.exports=a))}(0,function(){"use strict";function e(e,t){var n,i=document.createElement(e||"div");for(n in t)i[n]=t[n];return i}function t(e){for(var t=1,n=arguments.length;t<n;t++)e.appendChild(arguments[t]);return e}function n(e,t,n,i){var a=["opacity",t,~~(100*e),n,i].join("-"),r=.01+n/i*100,o=Math.max(1-(1-e)/t*(100-r),e),s=l.substring(0,l.indexOf("Animation")).toLowerCase(),d=s&&"-"+s+"-"||"";return c[a]||(u.insertRule("@"+d+"keyframes "+a+"{0%{opacity:"+o+"}"+r+"%{opacity:"+e+"}"+(r+.01)+"%{opacity:1}"+(r+t)%100+"%{opacity:"+e+"}100%{opacity:"+o+"}}",u.cssRules.length),c[a]=1),a}function i(e,t){var n,i,a=e.style;if(t=t.charAt(0).toUpperCase()+t.slice(1),void 0!==a[t])return t;for(i=0;i<d.length;i++)if(n=d[i]+t,void 0!==a[n])return n}function a(e,t){for(var n in t)e.style[i(e,n)||n]=t[n];return e}function r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)void 0===e[i]&&(e[i]=n[i])}return e}function o(e,t){return"string"==typeof e?e:e[t%e.length]}function s(e){this.opts=r(e||{},s.defaults,f)}var l,u,d=["webkit","Moz","ms","O"],c={},f={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};if(s.defaults={},r(s.prototype,{spin:function(t){this.stop();var n=this,i=n.opts,r=n.el=e(null,{className:i.className});if(a(r,{position:i.position,width:0,zIndex:i.zIndex,left:i.left,top:i.top}),t&&t.insertBefore(r,t.firstChild||null),r.setAttribute("role","progressbar"),n.lines(r,n.opts),!l){var o,s=0,u=(i.lines-1)*(1-i.direction)/2,d=i.fps,c=d/i.speed,f=(1-i.opacity)/(c*i.trail/100),h=c/i.lines;!function e(){s++;for(var t=0;t<i.lines;t++)o=Math.max(1-(s+(i.lines-t)*h)%c*f,i.opacity),n.opacity(r,t*i.direction+u,o,i);n.timeout=n.el&&setTimeout(e,~~(1e3/d))}()}return n},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(i,r){function s(t,n){return a(e(),{position:"absolute",width:r.scale*(r.length+r.width)+"px",height:r.scale*r.width+"px",background:t,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/r.lines*d+r.rotate)+"deg) translate("+r.scale*r.radius+"px,0)",borderRadius:(r.corners*r.scale*r.width>>1)+"px"})}for(var u,d=0,c=(r.lines-1)*(1-r.direction)/2;d<r.lines;d++)u=a(e(),{position:"absolute",top:1+~(r.scale*r.width/2)+"px",transform:r.hwaccel?"translate3d(0,0,0)":"",opacity:r.opacity,animation:l&&n(r.opacity,r.trail,c+d*r.direction,r.lines)+" "+1/r.speed+"s linear infinite"}),r.shadow&&t(u,a(s("#000","0 0 4px #000"),{top:"2px"})),t(i,t(u,s(o(r.color,d),"0 0 1px rgba(0,0,0,.1)")));return i},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}}),"undefined"!=typeof document){u=function(){var n=e("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}();var h=a(e("group"),{behavior:"url(#default#VML)"});!i(h,"transform")&&h.adj?function(){function n(t,n){return e("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)}u.addRule(".spin-vml","behavior:url(#default#VML)"),s.prototype.lines=function(e,i){function r(){return a(n("group",{coordsize:d+" "+d,coordorigin:-u+" "+-u}),{width:d,height:d})}function s(e,s,l){t(f,t(a(r(),{rotation:360/i.lines*e+"deg",left:~~s}),t(a(n("roundrect",{arcsize:i.corners}),{width:u,height:i.scale*i.width,left:i.scale*i.radius,top:-i.scale*i.width>>1,filter:l}),n("fill",{color:o(i.color,e),opacity:i.opacity}),n("stroke",{opacity:0}))))}var l,u=i.scale*(i.length+i.width),d=2*i.scale*u,c=-(i.width+i.length)*i.scale*2+"px",f=a(r(),{position:"absolute",top:c,left:c});if(i.shadow)for(l=1;l<=i.lines;l++)s(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=i.lines;l++)s(l);return t(e,f)},s.prototype.opacity=function(e,t,n,i){var a=e.firstChild;i=i.shadow&&i.lines||0,a&&t+i<a.childNodes.length&&(a=a.childNodes[t+i],a=a&&a.firstChild,(a=a&&a.firstChild)&&(a.opacity=n))}}():l=i(h,"animation")}return s})},,,,,,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(7),u=i(l);(0,s.default)("#admin-menu",function(e){var t=function(t,n){return r.default.ajax({url:t,data:{project:{ksr_rating:n}},type:"PUT",dataType:"JSON"}).then(function(){e.find(".rating .ss-star").removeClass("selected"),e.find(".rating .ss-star").slice(0,n).addClass("selected")})};(0,r.default)(document).on("keydown",function(n){if(n.ctrlKey){var i,a;n.which>=49&&n.which<=53&&(i=n.which-48,a=e.find(".rating a")[0].href,t(a,i).then(function(){(0,u.default)({info:i+"â˜…"})}))}}),e.find(".rating a").on("click",function(n){n.preventDefault(),t(this.href,(0,r.default)(this).data("rating")),e.trigger("ksr_admin:nav_open")})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(7),u=i(l),d=n(14),c=i(d);(0,s.default)(".NS-projects__admin_keyboard_control",function(e){(0,r.default)(document).on("keydown",function(t){if(t.ctrlKey){var n=e.find("#project_moderated_state"),i=e.find("form"),a="";switch(t.which){case 65:if("submitted"===c.default.get("state"))return;a="acceptable";break;case 84:a="tolerated";break;default:return}n.val(a),r.default.ajax({url:i.attr("action"),type:i.attr("method"),dataType:"json",data:i.serialize(),success:function(){(0,u.default)({info:a})}}),(0,r.default)("#admin-nav-wrap span.moderation_status").text(a.substring(0,3))}})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(3),s=i(o),l=n(2),u=i(l),d=n(1),c=i(d);(0,u.default)(".js-project-community-content",function(e){function t(){(0,r.default)(".js-more-backers").fadeOut()}function n(){(0,r.default)(".js-more-backers").attr("disabled","disabled")}function i(){(0,r.default)(".js-more-backers").removeAttr("disabled")}function a(e,t){var n=e.clone();return n.find(".js-founding-backer-avatar img").removeAttr("src"),n.find(".js-founding-backer-avatar img").attr("src",t.avatar),n.find(".js-founding-backer-name").text(t.name),n.find(".js-founding-backer-backings").text(c.default.t("views.community_section.Backed_x_projects",{count:t.backings})),n}function o(e){return r.default.getJSON(FOUNDING_BACKERS_URL,{page:e}).then(function(e){if(e.length<4)return 0;var t=e.length<8?4:8,n=(0,r.default)(".js-founding-backers"),i=(0,r.default)(".js-founding-backer:first"),o=(0,s.default)(t).times(function(t){var n=e[t];return a(i,n)});return n.empty().append(o),t})}e.on("click",".js-hero-scroll",function(e){r.default.scrollTo((0,r.default)(".js-community-locations").offset().top-45,400),e.preventDefault()});var l=1;e.on("click",".js-more-backers",function(){l+=1,l>25&&(l=1),n(),o(l).then(function(e){0===e&&2===l?t():0===e&&(l=1,o(l))}).always(function(){i()})})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a);(0,i(n(2)).default)(".js-could-have-report-project",function(e){e.on("click","#js-report_issue_link",function(e){var t=(0,r.default)(this);e.preventDefault(),r.default.ajax({url:t.prop("href"),type:"GET",success:function(e){var n=(0,r.default)(e);t.closest(".ajax-container").html(n),n.slideDown()}})})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o);n(63),n(36),(0,s.default)(".NS_projects__greenlit",function(e){function t(e){var t=e.attr("class"),n=e.attr("id"),i=e.data("title");e.modal_dialog({class_name:t,id:n,title:i})}var n=(0,r.default)("#review_modal");e.find(".js-continue-to-launch").click(function(e){e.preventDefault(),(0,r.default)("#content-wrap").find("#finished").hide(),(0,r.default)(this).trigger("project_edit:toggle_tab",["launch"])}),e.find(".button_preview").click(function(e){e.preventDefault(),(0,r.default)(this).trigger("project_edit:toggle_tab",["preview"])}),e.find(".button_review").click(function(e){e.preventDefault(),t(n)}),(0,r.default)(".NS_projects__greenlit_modal").on("submit","form",function(e){var t=(0,r.default)(this);if(e.preventDefault(),!t.validate())return!1;r.default.ajax({type:"PUT",url:(0,r.default)("#project-edit-nav .finished").data("submit_for_review_url"),data:t.serialize(),success:function(){t.trigger("close"),(0,r.default)("#saving-layer").show(),window.location.reload(!0)}})})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a);(0,i(n(2)).default)(".NS_projects__project_nav .js-load-project-help_wanted",function(){(0,r.default)(document).on("click",".js-btn",function(){var e=(0,r.default)(this).closest(".js-skill");e.find(".js-skill-textarea").toggle(),e.find(".js-btn").toggle()})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(8),u=i(l),d=n(7),c=i(d),f=n(1),h=i(f),p=n(14),m=i(p);(0,s.default)(".NS_projects__hero_funding",function(e){function t(){var t=e.find(".video-player"),n=i.height(),a=t.height(),o=Math.abs(n-a)<=1;i.length&&n>0&&(o||e.find(".video-player").animate({height:n,maxHeight:screen.height},300,"easeOutExpo",function(){(0,r.default)(document).trigger("ksr:video_player_resize")}),i.css({minHeight:0}))}function n(){var t=e.find(".ksr_page_timer.poll");if(t.length){var i=window.ksr_page_clock,a=new Date(t.data("end_time")),r=a-i.get_remote_time();if(r>0){var o=Math.min(r,2147483647);setTimeout(n,o)}else e.find(".js-hide-unless-campaign-running").addClass("hidden")}}var i=e.find(".video-player .poster");t(),(0,r.default)(document).on("resize",function(){t()}),(0,r.default)("#project_share.js-disabled").on("click",function(e){(0,c.default)({error:h.default.t("onloads.views.projects.hero_funding.Sharing_is_disabled_until_your_project_is_launched")}),e.preventDefault()}),m.default.listen("state",function(t){var n=t.state;e.find(".js-campaign-state").addClass("hidden"),e.find(".js-campaign-state__"+n).removeClass("hidden")}),"live"===m.default.get("state")&&n(),m.default.listen("state_changed_at",function(t){e.find(".js-state_changed_at").text(u.default.time_ago_in_words(t.state_changed_at))})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(3),s=i(o),l=n(20),u=i(l),d=n(5),c=n(37),f=n(239),h=n(11),p=i(h);n(114),(0,r.default)(function(){function e(e,n){var o=".js-project-"+n+"-content",s=_.find(o);i(e,n),t(n),_.find(".js-project-content").removeClass("visible").fadeOut(200,function(){(0,r.default)(this).empty(),window.setTimeout(function(){s.fadeIn()},200)}),r.default.ajax({url:e,cache:!1,success:function(e){s.html(e),a(),(0,r.default)(document).trigger("projectnav:"+n)}})}function t(e){var t=v.find(".js-load-project-"+e);y.removeClass("is-active"),t.addClass("is-active"),n()}function n(){var e=v.find("a.is-active");e.length?v.find(".js-selected-indicator").show().css({left:(0,r.default)(".js-project-nav-scroll").scrollLeft()+e.position().left+parseInt(e.css("marginLeft")||0,10)+parseInt(e.css("paddingLeft")||0,10),width:e.width()}):v.find(".js-selected-indicator").hide()}function i(e,t){window.history&&window.history.replaceState?window.history.replaceState(null,null,e):window.location.hash=t}function a(){(0,f.coreScroller)({to:_.position().top,easing:"easeOutQuint",duration:200})}function o(t,n){t.preventDefault(),e((0,r.default)(t.target).attr("href"),"faqs"),(0,d.track)("Clicked"+n+"FAQ",{context:(0,r.default)(t.target).data("context")})}function l(e,t,n){if(!w[e]&&!h(t)){var i=n?t.height():0;return(0,r.default)(this).scrollTop()+(0,r.default)(this).height()>=m(t)+i}}function h(e){return 0===e.length||e.is(":hidden")}function m(e){return e.offset().top}function g(e,t){(0,d.track)("Viewed Project Page Section",{context:e,page_pixel_length:(0,r.default)(document).height(),pixel_position:t}),w[e]=!0}var v=(0,r.default)(".NS_projects__project_nav"),_=(0,r.default)(".NS_projects__content"),y=v.find(".js-load-project-content");if(v.length&&_.length){if((0,r.default)(window).on("resize",s.default.debounce(n,100)),function(){var e=window.location.pathname.replace(/\/\d*$/,""),t=s.default.map(y,function(e){return e.pathname.split("/").pop()});t.push("posts");var n=e.split("/").pop();s.default.contains(t,n)&&!window.location.hash&&a()}(),y.on("click",function(t){var n=(0,r.default)(this);if(t.preventDefault(),(0,p.default)(n.prop("href")).pathname()!==(0,p.default)(window.location).pathname()){var i=n.attr("data-content");e(n.attr("href"),i)}}),_.on("click",".js-faq-link",function(e){o(e,"Check")}),_.on("click",".js-add-faq-link",function(e){o(e,"Post")}),u.default["not-touchable"]){var b=skrollr.init({forceHeight:!1});(0,r.default)(document).one("ksr:video_player_resize",function(){b.refresh()})}(0,r.default)(document).resize(function(){n()});var w={about:!1,risks:!1,last_rewards:!1,recs:!1},k=s.default.debounce(function(){l("about",(0,r.default)(".js-project-nav"))&&g("about",m((0,r.default)(".js-project-nav"))),l("last_rewards",(0,r.default)(".js-project-rewards"),!0)&&g("last_rewards",m((0,r.default)(".js-project-rewards"))+(0,r.default)(".js-project-rewards").height()),l("risks",(0,r.default)(".js-risks"))&&g("risks",m((0,r.default)(".js-risks"))),l("recommended",(0,r.default)(".js-recs"))&&g("recommended",m((0,r.default)(".js-recs")))},1e3);if((0,r.default)(document).scroll(k),n(),u.default["not-touchable"]){var j=(0,r.default)("body"),x=(0,r.default)(".creator-nav");(0,c.setupScrollLocking)({element:".js-project-nav",offsets:[".js-admin-nav-wrap"],styles:function(){return{onLock:{width:j.hasClass("creator_nav_visible")?"calc(100% - "+x.width()+"px)":"100%",right:0},offLock:{width:"100%"}}}})}}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(3),r=i(a),o=n(2),s=i(o),l=n(0),u=i(l),d=n(20),c=i(d),f=n(14),h=i(f),p=n(15),m=i(p),g=n(5);n(379),(0,s.default)(".NS_projects__rewards_list",function(){function e(e,n){if(p=0,"live"!==h.default.get("state")&&n.preventDefault(),!f&&!e.state.is_selected){var a=t(),r=0;a.length>0&&a[0].index<e.index&&(r=a[0].el.$rw.height()-a[0].closed_height);var o=e.el.$rw.offset().top-r-y;(0,u.default)(document).scrollTo(o,100),i(),e.toggle_pledge_form(),e.state.is_truncate_worthy&&(e.toggle_description_truncation(),e.el.$truncate_link.removeClass("hide")),(0,g.track)("Checkout Reward Click",{checkout_reward_id:e.id,checkout_amount:e.reward_data.minimum})}}function t(){return r.default.filter(l,function(e){return e.state.is_selected===!0})}function n(e){return r.default.filter(h.default.get("rewards"),function(t){return t.id===e})}function i(){var e=t();if(e.length){var n=e[0];n.toggle_pledge_form(),n.state.is_truncated&&n.toggle_description_truncation(),n.el.$truncate_link.addClass("hide"),n.reset_pledge_form(),n.reset_pledge_error(),n.reset_country_error()}}function a(){d=(0,u.default)(".js-reward-available"),window.rewards=d.map(function(e,t){var i=(0,u.default)(t),a=i.data("rewardId"),r=n(a)[0];return r.closed_height=i.height(),r.index=i.index(),new window.RewardController(i,r)}).get(),d.on("change","select",function(e){var t=(0,u.default)(e.delegateTarget).data("reward");t.shipping_rules.length&&(t.update_pledge_total(),t.reset_pledge_error()),t.validate()}),d.on("click",function(t){e((0,u.default)(this).data("reward"),t)}),d.on("submit","form",function(e){var t=(0,u.default)(e.delegateTarget).data("reward"),n=t.validate();return t.state.submit_halted=!n,t.state.submit_halted&&(0,u.default)(e.target).removeClass("submitting-non-ajax"),n&&(0,g.track)("Checkout Reward Continue Click"),n}),d.on("blur input",'input[name="backing[amount]"]',function(e){(0,u.default)(e.delegateTarget).data("reward").validate()}),d.on("click",".js-desc-toggle",function(e){var t=(0,u.default)(e.delegateTarget).data("reward");e.preventDefault(),t.toggle_description_truncation()})}var o,s;void 0!==m.default&&(o=m.default.get("id")===h.default.get("creator.id"),s=h.default.get("is_backing"));var l,d,f=s||o,p=0,v=!c.default["not-mobile"],_=(0,u.default)(".js-project-nav").height(),y=20;v||(y+=_),(0,u.default)(document).on("click",function(){3===(p+=1)&&(i(),p=0)}),(0,u.default)(document).on("projectnav:rewards projectnav:description",function(){a()}),a()})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(7),u=i(l),d=n(1),c=i(d),f=n(5);(0,s.default)(".NS_projects__project_share",function(e){e.find(".js-facebook-share").click(function(e){if(e.preventDefault(),(0,f.track)("Project Show Share",{share_type:"facebook"}),"undefined"!=typeof FB){var t=(0,r.default)(this).attr("href");FB.ui({method:"share",href:t,display:"popup"},function(e){e&&void 0===e.error_code?((0,u.default)({success:c.default.t("onloads.views.projects.share.Facebook_post_was_published")}),(0,f.track)("Project Share",{share_type:"facebook",facebook_post_id:e.post_id,share_url:t})):(0,u.default)({notice:c.default.t("onloads.views.projects.share.Facebook_post_was_not_published")})})}}),e.find(".js-pinterest-share").click(function(){(0,f.track)("Project Show Share",{share_type:"pinterest"});var e="https://assets.pinterest.com/js/pinmarklet.js?r="+99999999*Math.random();(0,r.default)("<script type='text/javascript' charset='UTF-8' src="+e+"/></script>").appendTo("body")}),twttr.ready(function(e){e.events.bind("click",function(){(0,f.track)("Project Show Share",{share_type:"twitter"})})}),(0,r.default)(".js-tumblr-share").on("click",function(e){(0,f.track)("Project Show Share",{share_type:"tumblr"}),e.preventDefault()}),e.find(".js-embed-share").on("click",function(e){(0,f.track)("Project Show Share",{share_type:"embed"}),e.preventDefault()})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(5);n(28),(0,s.default)(".NS_projects__spotlight_onboarding",function(e){function t(){e.addClass("dismissed"),(0,r.default)("html,body").css("overflow","auto"),KSR.store.setItem("dismiss_spotlight_onboarding",!0),(0,l.track)("Spotlight Onboarding Hide")}KSR.store.isSupported()&&(KSR.store.getItem("dismiss_spotlight_onboarding")||(e.removeClass("dismissed"),(0,r.default)("html,body").css("overflow","hidden"),(0,l.track)("Spotlight Onboarding Show")),e.find(".js-close").on("click",function(e){t(),e.preventDefault()}))})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(5);(0,s.default)(".js-project-description-content, #description",function(e){e.find(".js-open-supporting-material-modal").on("click",function(t){(0,l.track)("Viewed Prototype Gallery Tooltip"),e.find(".supporting-material-modal").fadeIn(200),(0,r.default)("body,html").addClass("supporting-material-modal-open"),t.preventDefault()}),e.find(".js-close-supporting-material-modal").on("click",function(e){(0,r.default)(this).closest(".supporting-material-modal").fadeOut(200),(0,r.default)("body,html").removeClass("supporting-material-modal-open"),e.preventDefault()})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o);n(36),(0,s.default)(".js-could-have-post-media",function(e){e.on("click",".js-post-media-link",function(e){var t=(0,r.default)(".js-post-media-content"),n=t.find(".js-image"),i=t.find(".js-link");n.html(""),i.text(""),n.append('<img src="'+(0,r.default)(this).data("large-image")+'" />'),i.text((0,r.default)(this).data("post-title")),i.attr("href",(0,r.default)(this).data("post-link")),(0,r.default)("#post_media").modal_dialog(),e.preventDefault()})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a);(0,i(n(2)).default)("#country-select",function(e){e.livequery(function(){var t=(0,r.default)(this);t.find("a.btn--green").on("click",function(e){t.find("form").submit(),e.preventDefault()}),t.find("select#country").on("change",function(){var n=(0,r.default)(this).val().toLowerCase();t.find(".country").hide(),t.find("."+n).show(),e.removeClass().addClass(n)}).trigger("change")})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(22),r=i(a),o=n(2),s=i(o);n(301),(0,s.default)("body#projects_dashboard",function(){var e=(0,r.default)("#projects_dashboard #activity").find(".mobius").data("mobius");if(void 0===e)return!1;e.current_page=0,(0,r.default)(document).on("click","#projects_dashboard .activity-filters a",function(t){var n=(0,r.default)(this);n.closest(".activity-filters").find("a").removeClass("current"),n.addClass("current"),r.default.ajax({type:"get",dataType:"html",url:n.attr("href"),success:function(t){var i=(0,r.default)(t).find(".mobius").children();(0,r.default)("#activity .mobius").html(i).trigger("mobius:loaded_page",[1,i]),e.clear_extra_params(),e.add_param("cat",n.data("filter")),e.current_page=1}}),t.preventDefault()})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(5),u=n(14),d=i(u);(0,s.default)(".NS_projects_view_fees",function(){(0,r.default)(".js-view-fees").on("click",function(){(0,l.track)("Viewed Fees Breakdown",{project_pid:d.default.data.id})})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(22),r=i(a),o=n(2),s=i(o),l=n(5),u=n(239);(0,s.default)("#projects_learn",function(){function e(e){var t=(0,r.default)(".js-tools").find("video").get(0);t&&t.pause(),e.find("video").length&&e.find("video")[0].play()}var t=0,n=!1,i=function(e){return function(t){t.preventDefault(),(0,r.default)(t.target).closest(".categories").find(".js-category-link").removeClass("selected"),(0,r.default)(t.target).addClass("selected");var i=(0,r.default)(t.target).data("name"),a=(0,r.default)(e).find('[data-name="'+i+'"]');(0,r.default)(e).find(".category").removeClass("block"),a.addClass("block");var o=(0,r.default)(e).find("video").get(0);o&&o.pause(),e.includes("desktop")&&(0,u.coreScroller)({to:(0,r.default)(".js-desktop-categories").offset().top,duration:500}),n&&(0,l.track)("Learn More Project Category Select",{category_name:(0,r.default)(t.target).text()}),n=!0}};(0,r.default)(".js-mobile-categories .js-category-link").on("click",i(".js-mobile-interstitials")),(0,r.default)(".js-desktop-categories .js-category-link").on("click",i(".js-desktop-interstitials")),(0,r.default)(".js-mobile-categories li:first .js-category-link").get(0).click(),(0,r.default)(".js-desktop-interstitials").find(".close").on("click",function(e){(0,r.default)(".js-desktop-categories").find(".js-category-link").removeClass("selected"),(0,r.default)(".js-desktop-interstitials").find(".category").removeClass("block"),e.preventDefault()}),(0,r.default)(".js-tools .right_side").on("cycle-after",function(n,i,a,o){var s=(0,r.default)(o);t>0&&(0,l.track)("Learn More Project Tool Select",{slide_description:s.attr("data-slide-description")}),t+=1,e(s)}),(0,r.default)(".js-quotes").find(".mirror").each(function(){(0,r.default)(this).html((0,r.default)(this).closest(".quote-box").find(".relative").html())}),(0,r.default)(".js-quotes").waypoint(function(){return(0,r.default)(".js-quotes").addClass("loaded")},{offset:150}),(0,r.default)(".js-ctas .js-play-button").on("click",function(e){e.preventDefault(),(0,r.default)(this).closest("section").addClass("video-expanded"),(0,r.default)(this).closest("section").find(".video-player").trigger("ksr_video:play")}),(0,r.default)(".js-ctas .close").on("click",function(e){e.preventDefault(),(0,r.default)(this).closest("section").removeClass("video-expanded"),(0,r.default)(this).closest("section").find(".video-player").trigger("ksr_video:pause")})})},function(e,t,n){"use strict";var i=n(2),a=function(e){return e&&e.__esModule?e:{default:e}}(i),r=n(5);(0,a.default)(".projects_livestreams",function(){(0,r.trackLinks)(".js-create-livestream","Clicked Create Livestream")})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);(0,a.default)(function(){var e=(0,a.default)("#projects_rules"),t=(0,a.default)("#project-edit-nav",e),n=(0,a.default)("#continue input[type=checkbox]",e),i=(0,a.default)("#continue input[type=submit]",e);e.length&&((0,a.default)(".modal_dialog, .modal_dialog .modal_dialog_content, .modal_dialog .modal_dialog_inner").preload_background_image(),t.find("#steps-nav .first a").addClass("selected"),t.find("a").click(function(e){e.preventDefault()}),n.on("change",function(){(0,a.default)(this).is(":checked")?(0,a.default)(this).siblings("label").addClass("selected").removeClass("unselected"):(0,a.default)(this).siblings("label").addClass("unselected").removeClass("selected"),0===n.not(":checked").length?i.removeClass("disabled"):i.addClass("disabled")}),i.on("click",function(){return 0===n.not(":checked").length?((0,a.default)("#saving-layer").show(),!0):("undefined"!=typeof ga&&ga("send","event","Our Rules","Disabled Continue Click",""),!1)}))})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(22),o=i(r),s=n(2),l=i(s),u=n(319),d=n(258),c=n(5),f=n(11),h=i(f),p=n(14),m=i(p);(0,l.default)("#projects_show",function(e){function t(e,t){var i,a=[];for(var r in n)r===t?i=n[r]:a.push(n[r]);e.removeClass(a.join(" ")),e.addClass(i)}var n={live:"aspect-ratio--16x9",replay:"aspect-ratio--4x1-lg aspect-ratio--3x1-md aspect-ratio--7x3-sm aspect-ratio--5x3",countdown:"aspect-ratio--2x1-lg aspect-ratio--5x3-md aspect-ratio--5x4-sm aspect-ratio--5x6"};(0,o.default)("#verifying-pledge.modal_dialog .remote_modal_dialog",e).click(function(){(0,o.default)(this).parents("div#verifying-pledge").trigger("close.modal_dialog")}),location.hash&&setTimeout(function(){(0,o.default)(location.hash).find(".faq-question a").click()},500),(0,o.default)("body").is(".touchable")&&(e.on("modal_dialog:opened",function(){(0,o.default)("video").length&&window.Touch&&((0,o.default)("#video-section",e).css("visibility","hidden"),(0,o.default)("video")[0].pause())}),e.on("close.modal_dialog",function(){(0,o.default)("#video-section",e).css("visibility","visible")}));var i=(0,u.read_cookie)("edit_survey_response");i&&o.default.open_remote_modal_dialog(h.default.decode(i),{class_name:"backings-info__modal",remote_modal_dialog_contents_loaded:function(){(0,u.destroy_cookie)("edit_survey_response",h.default.parse(window.location.href).path)},dataType:"html",beforeSend:function(e){e.setRequestHeader("Accept","text/javascript, */*")}}),(0,o.default)(document).on("click",".js-view_your_pledge",function(){var e=m.default.get("backing"),t=e?e.urls.web.backing:null;o.default.open_remote_modal_dialog((0,h.default)(t).addQuery("ref","reward_view_pledge").addQuery("clicked_reward","true").suffix("js").toString(),{id:(0,o.default)(this).attr("data-modal-id"),class_name:"backings-info__modal",dataType:"html"})}),e.find(".js-livestream-notice").on("click",function(e){e.preventDefault(),o.default.scrollTo((0,o.default)("#huzza_livestream"),"easeOutExp")}),window.addEventListener("message",function(n){if(["https://huzza.io","https://live.kickstarter.com",window.location.origin].indexOf(n.origin)!==-1&&"object"===a(n.data)&&"huzza_state_change"===n.data.type){var i=n.data.value;t(e.find(".js-livestream-ratio"),i),"live"===i?e.find(".js-livestream-notice").removeClass("hidden"):"replay"!==i&&"countdown"!==i||e.find(".js-livestream-notice").addClass("hidden")}},!1);var r=1;(0,o.default)(window).resize(function(){r>0&&((0,c.track)("Window Resize Start"),r-=1)}),(0,o.default)(document).on("ksr_popover:opened",function(){(0,o.default)(".ksr-popover.visible").parent(".NS_projects__project_share")&&(0,c.track)("Project Show Share Sheet")}),e.find(".js-launched").length>0&&(0,d.trackPixel)(d.PixelEvent.COMPLETE_REGISTRATION)})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(258),u=n(5),d=n(15),c=i(d);(0,s.default)(".NS_projects_start",function(){var e=(0,r.default)("#category_select");(0,r.default)(".category_select_el").on("change",function(){e.addClass("valid"),(0,r.default)("input.text").hasClass("valid")&&e.hasClass("valid")&&((0,r.default)(".js-project-start-button").removeClass("btn--gray"),(0,r.default)(".js-project-start-button").addClass("btn--green"))}),(0,r.default)("input.text").on("blur",function(){var t=(0,r.default)(this);t.val()?t.addClass("valid"):t.removeClass("valid"),(0,r.default)("input.text").hasClass("valid")&&e.hasClass("valid")&&((0,r.default)(".js-project-start-button").removeClass("btn--gray"),(0,r.default)(".js-project-start-button").addClass("btn--green"))}),(0,r.default)("#project_country").on("change",function(){var e=(0,r.default)(this),t=e.val();(0,u.track)("Project Country Changed",{changed_from:e.data("project-country"),changed_to:t}),e.data("project-country",t)}),(0,r.default)(".ksr-popover").find("ul a").on("click",function(t){e.find("select").ksr_val((0,r.default)(this).attr("data-id")),e.find("select").trigger("change"),(0,r.default)(this).closest(".ksr-popover").removeClass("visible"),e.addClass("category-id-"+(0,r.default)(this).attr("data-id")),t.preventDefault()}),(0,r.default)(".js-permanent-residence").hover(function(e){void 0!==c.default&&(0,u.track)("Hovered Start Page Permanent Residence",{user_uid:c.default.data.id}),e.preventDefault()}),(0,l.trackPixel)(l.PixelEvent.VIEW_CONTENT,{content_name:"start-step-1",content_category:"start-funnel"})})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i),r=n(5);(0,a.default)(function(){(0,a.default)(document).on("click","ul.faqs_alt li .question",function(e){(0,a.default)(this).parent("li").toggleClass("expanded"),(0,r.track)("FAQ Toggle",{question:(0,a.default)(this).text().trim()}),e.preventDefault()})})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i),r={mailcheck:{threshold:2,defaultDomains:["yahoo.com","google.com","hotmail.com","gmail.com","me.com","aol.com","mac.com","live.com","comcast.net","googlemail.com","msn.com","facebook.com","verizon.net","sbcglobal.net","att.net","gmx.com","mail.com","ymail.com","hotmail.co.uk","yahoo.co.uk","live.co.uk"],defaultTopLevelDomains:["co.uk","com","net","org","info","edu","gov","mil"],whitelistRegexes:[/ymail.com/,/yahoo\.co\./,/yahoo\.com\./,/hotmail\.co\./,/hotmail\.com\./],run:function(e){e.domains=e.domains||r.mailcheck.defaultDomains,e.topLevelDomains=e.topLevelDomains||r.mailcheck.defaultTopLevelDomains,e.distanceFunction=e.distanceFunction||r.sift3Distance,e.ignoreTLDs=e.ignoreTLDs||!1;var t=r.mailcheck.suggest(encodeURI(e.email),e.domains,e.topLevelDomains,e.distanceFunction,e.ignoreTLDs);t?e.suggested&&e.suggested(t):e.empty&&e.empty()},suggest:function(e,t,n,i,a){e=e.toLowerCase();var r,o,s,l,u=this.splitEmail(e),d=this.findClosestDomain(u.domain,t,i);for(s=0;s<this.whitelistRegexes.length;s+=1)if(l=this.whitelistRegexes[s],l.exec(u.domain))return!1;if(d){if(d!==u.domain)return{address:u.address,domain:d,full:u.address+"@"+d}}else if(!a&&(r=this.findClosestDomain(u.topLevelDomain,n),u.domain&&r&&r!==u.topLevelDomain))return o=u.domain,d=o.substring(0,o.lastIndexOf(u.topLevelDomain))+r,{address:u.address,domain:d,full:u.address+"@"+d};return!1},findClosestDomain:function(e,t,n){var i,a,r=99,o=null;if(!e||!t)return!1;for(n||(n=this.sift3Distance),a=0;a<t.length;a+=1){if(e===t[a])return e;i=n(e,t[a]),i<r&&(r=i,o=t[a])}return r<=this.threshold&&null!==o&&o},sift3Distance:function(e,t){var n,i=0,a=0,r=0,o=0;if(null===e||0===e.length)return null===t||0===t.length?0:t.length;if(null===t||0===t.length)return e.length;for(;i+a<e.length&&i+r<t.length;){if(e.charAt(i+a)===t.charAt(i+r))o+=1;else for(a=0,r=0,n=0;n<5;n+=1){if(i+n<e.length&&e.charAt(i+n)===t.charAt(i)){a=n;break}if(i+n<t.length&&e.charAt(i)===t.charAt(i+n)){r=n;break}}i+=1}return(e.length+t.length)/2-o},splitEmail:function(e){var t,n,i,a=e.split("@"),r="";if(a.length<2)return!1;for(t=0;t<a.length;t+=1)if(""===a[t])return!1;if(n=a.pop(),i=n.split("."),0===i.length)return!1;if(1===i.length)r=i[0];else{for(t=1;t<i.length;t+=1)r+=i[t]+".";i.length>=2&&(r=r.substring(0,r.length-1))}return{topLevelDomain:r,domain:n,address:a.join("@")}}}};!function(e){e.fn.mailcheck=function(e){var t,n,i=this;e.suggested&&(t=e.suggested,e.suggested=function(e){t(i,e)}),e.empty&&(n=e.empty,e.empty=function(){n.call(null,i)}),e.email=this.val(),r.mailcheck.run(e)}}(a.default)},function(e,t,n){"use strict";function i(e){return Math.round(e.getTime()/1e3)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},,,,,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o);n(63),n(9),(0,s.default)(".NS_accounts__edit",function(e){function t(){return(0,r.default)(n+" :input:not(.optional)").validates_presence(),(0,r.default)(n+" #account_street_address_postal_code").validates_postal_code(),1===(0,r.default)(n+' input[name="account[type]"][value="business"]:checked').length&&((0,r.default)(n+" input.required_business").validates_presence(),(0,r.default)(n+' input[name="account[business_id]"]').validates_business_id()),(0,r.default)(n).validate()}var n="#project_account_form";(0,r.default)(document).on("phone_number:added",function(){0===(0,r.default)(".needs_verification:visible").length&&e.closest(".collapsed").removeClass("collapsed")}),(0,r.default)(".NS_accounts__edit").livequery(function(){var e=(0,r.default)(this);e.on("blur",".errored",function(){t()}),e.on("submit",n,function(n){var i=(0,r.default)(this),a=(0,r.default)("#account_errors"),o=(0,r.default)('<div class="spinner" />').spin("ksr","#fff");n.preventDefault(),t()&&(i.after(o),r.default.ajax({type:i.attr("method"),url:i.attr("action"),dataType:"json",data:i.serialize(),success:function(t){a.addClass("hide").removeClass("flash-error"),e.closest("#account-setup-panel").html(t.data),(0,r.default)(window).trigger("project_edit:check_all_panels_for_completion")},error:function(e){void 0!==e.responseJSON.error&&(a.removeClass("hide").addClass("flash-error"),a.find("ul").html("<li>"+e.responseJSON.error+"</li>"),void 0!==e.responseJSON.state_reason&&a.find("ul").html("<li>"+e.responseJSON.state_reason+"</li>"),r.default.scrollTo(a))},beforeSend:function(){(0,r.default)(".js-account-form-submit").prop("disabled",!0),e.addClass("loading")},complete:function(){(0,r.default)(".js-account-form-submit").prop("disabled",!1),e.removeClass("loading"),o.remove()}}))}),e.on("change",'input[name="account[type]"]',function(){var t=e.find("#business_id_section");(0,r.default)("#account_type_business").is(":checked")?t.show():(t.hide(),t.find(":input").each(function(){(0,r.default)(this).data("validations",[])}))})})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(7),s=i(o),l=n(1),u=i(l);n(9),n(65),(0,r.default)(function(){function e(){(0,r.default)("#account-setup-panel").trigger("project_build:refresh")}(0,r.default)("#account-setup-panel .NS_accounts__edit .account-pending").livequery(function(){r.default.pollster((0,r.default)(this).attr("data-url"),function(t){var n=t.identity.state;if("passed"===n)(0,s.default)({success:u.default.t("onloads.views.accounts.processing_state.Your_identity_and_banking_information_has_been_approved")});else{if("failed"!==n)return!1;(0,s.default)({error:u.default.t("onloads.views.accounts.processing_state.We_need_more_information_to_verify_your_identity")})}return e(),!0})})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a);(0,i(n(2)).default)("body#accounts_edit",function(){var e=(0,r.default)("#edit-account-form");(0,r.default)(".js-stripe_form").on("submit",function(t){t.preventDefault();var n=(0,r.default)(t.target),i={};n.find("input[type=submit]").attr("disabled","disabled"),n.find(".js-stripe_input").each(function(){var e=(0,r.default)(this);i[e.data("stripe")]=e.val()}),r.default.ajaxSetup({headers:{Authorization:"Bearer "+n.data("stripe-public-key")}}),r.default.post("https://api.stripe.com/v1/tokens",{pii:i}).done(function(t){e.find("#account_personal_id_token").val(t.id),e.submit()}).fail(function(e){n.find("input[type=submit]").attr("disabled",null),n.find(".errored").text(e.responseJSON.error.message).removeClass("hide")})})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(3),s=i(o),l=n(8),u=i(l),d=n(19),c=i(d);(0,r.default)(function(){var e={};(0,r.default)(".NS-activity-card-_backing").livequery(function(){var t=(0,r.default)(this),n=t.data("project_id"),i=t.data("user"),a=e[n]||[],o=[i];s.default.each(a,function(e){e.$div.hide(),o.push(e.user)}),o.length>1&&(t.find(".js-backers").html(u.default.to_sentence(s.default.map(o,function(e){return'<a href="'+e.urls.web.user+'" class="link-green-dark bold">'+e.name+"</a>"}))),t.find(".js-avatar").replaceWith((0,c.default)("activity/card/_backing_avatars",{backers:s.default.sample(o,3)}))),a.push({$div:t,user:i}),e[n]=a})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(5);(0,s.default)("body#activity_index",function(e){function t(e){var t=e.find(".timeline_header:first"),i=t.data("time_bucket");n.indexOf(i)===-1&&(n.push(i),t.find(".timeline_header_name:first").css({display:"block"}))}var n=[];(0,r.default)(".dashboard_activities .activity",e).livequery(function(){t((0,r.default)(this))}),(0,r.default)(document).on("click",".NS_post_likes__button form .js-like",function(){(0,l.track)("Activity Like")})})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);(0,a.default)(function(){(0,a.default)(document).on("click",".activity_mini_comment .excerpt a",function(e){e.preventDefault();var t=(0,a.default)(this),n=t.parents("blockquote.excerpt"),i=n.siblings("blockquote.everything");n.hide(),i.css("display","inline")})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(19),u=i(l);(0,s.default)(".NS-assets__list",function(e){var t=new window.AssetsListController(e.data("assets"),e.data("assets_list_options"));e.on("assets_list:item_added",function(e,n){t.add_item(n)}),e.define_renderer(function(t){e.html(t.map(function(t,n){var i=t.get();i.item_index=n;var a=(0,u.default)(e.data("assets_list_options").item_template,i,["assets/_fields_template"]),o=(0,r.default)(a);return o.on("click",".js-asset-destroy",function(e){e.preventDefault(),t.set("_destroy",!0)}),o}))}),t.attach(e)})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(1),u=i(l),d=n(5);(0,s.default)("body#backer_report_index",function(e){function t(e,t){t.closest(n).addClass("generating"),r.default.pollster(e,function(e){return e.email_url&&(0,r.default)(n+" a.email_me").attr("href",e.email_url).show(),e.uploaded||"completed"===e.state?((0,r.default)(n+" .progress .bar").width("100%"),(0,r.default)(n+" .success a.download").attr("href",e.download_url),(0,r.default)(n).removeClass("generating").addClass("success"),!0):(void 0!==e.percent&&(0,r.default)(n+" .progress .bar").width(e.percent+"%"),!1)},{delay:500,continue_on_error:!0})}var n=".NS-backer_report_export";e.on("submit",n+" form",function(e){var n=(0,r.default)(this),i=n.find(".report_type select").val(),a=n.find(".select.report_type").data("all_reports_url"),o=n.find(".report_format select").val();e.preventDefault(),i&&("all"===i?((0,d.track)("Backer Report Export",{export_type:"all"}),r.default.ajax({type:"post",url:a,data:{report_format:o},dataType:"json",success:function(e){t(e.poll_url,n)}})):((0,d.track)("Backer Report Export",{export_type:"tier"}),r.default.ajax({type:"get",url:i,data:{new:"true",report_format:o},dataType:"json",success:function(e){t(e.poll_url,n)}})))}),e.on("click",n+" a.email_me",function(e){e.preventDefault();var t=(0,r.default)(this);r.default.ajax({url:t.attr("href"),type:"post",dataType:"json",success:function(e){e&&200!==e.status?this.error():(0,r.default)(n+" .email_me_container").empty().html(u.default.t("onloads.views.backer_report.export.Well_send_you_an_email_when_this_report_is_ready"))},error:function(){(0,r.default)(n+" .email_me_container").empty().html(u.default.t("onloads.views.backer_report.export.There_was_an_error_requesting_the_email"))}})}),e.on("click",n+" a.reset",function(e){(0,d.track)("Backer Report Another Export"),(0,r.default)(n).removeClass("generating").removeClass("success"),(0,r.default)(n+" .email_me_container").empty().html(u.default.t("onloads.views.backer_report.export.Email_me_when_ready")),(0,r.default)(n+" .bar").css("width","0%"),e.preventDefault()}),e.on("click",n+" .js-export-warning--continue",function(e){e.preventDefault();var t=(0,r.default)(this).closest(n),i=t.find(".js-export-warning"),a=t.find(".js-export-form");i.hide(),a.show()})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(3),s=i(o),l=n(7),u=i(l),d=n(1),c=i(d),f=n(12),h=n(380),p=i(h),m=n(19),g=i(m),v=n(211),_=i(v),y=n(5),b=n(11),w=i(b);n(28),n(85),n(84),n(83),(0,r.default)(function(){function e(){return(0,w.default)(window.location)}function t(){(0,r.default)("form.term").term_form().bind("submit",function(e){e.preventDefault();var t=(0,r.default)(this);l.set_params(t.serialize_without_blank()),(0,y.track)("Backer Report Search",{term:t.find(":input").val()})})}function n(){var e=(0,r.default)(".dropdown a.selected"),t={};e.each(function(){var e=(0,r.default)(this);s.default.extend(t,(0,w.default)(e.attr("href")).query(!0))}),l.set_params(r.default.param(t),!0)}function i(e){e.is(".selected")||((0,r.default)("#main tbody tr").removeClass("selected"),e.addClass("selected"),m=!0,(0,r.default)(".NS_backers__info:visible").trigger("close").length&&e.find(".backer a").click(),m=!1,e.index()>e.parent().children().length-10&&!l.mobius.paused&&l.mobius.load_next())}function a(){var e=(0,r.default)("#main tbody tr.selected");i(e.length?e.next():(0,r.default)("#main tbody tr:first"))}function o(){var e=(0,r.default)("#main tbody tr.selected");i(e.length?e.prev():(0,r.default)("#main tbody tr:last"))}if(window.backers){var l,d=[],h=e(),m=!1,v=h.query(!0).show_responses||KSR.store.getItem("backer_report_show_responses");l=new p.default(null,(0,r.default)("#main"),"backer_report/_index",{mobius_on:"backers"}),(0,y.track)("Backer Report View"),s.default.has(h.query(!0),"show_responses")&&KSR.store.setItem("backer_report_show_responses",h.query(!0).show_responses),"string"==typeof v&&(v="true"===v),l.on_change_params(function(){d=[],t(),function(){var t=e().query(!0).reward_id,n=(0,r.default)(".NS-backer_report__header .remote_modal_dialog");if(t&&n.length>0){var i=(0,w.default)(n.attr("href")).removeSearch("reward_id").addSearch("reward_id",t);n.attr("href",i)}}(),(0,r.default)("form.term .text").trigger("keydown"),l.get("params.reward_id")||"dropped"===l.get("params.status")||((0,r.default)("#reward, #reward_message, ul.dropdown li.all").remove(),(0,r.default)(".reward_tiers .title > span.reward b").text(c.default.t("onloads.views.backer_report.index.All_rewards")));var n=(0,r.default)("#main input[name=note]:visible, #main input[name=note_not]:visible");n.focus(),n.val(n.val()),l.change()}),(0,r.default)(document).on("click","#main table th",function(t){var n,i=(0,r.default)(this).data("sort"),a=e(),o=a.search(!0);i&&(t.preventDefault(),"asc"===o.asc_or_desc&&o.sort_by===i?(n="desc",a.removeSearch("asc_or_desc").addSearch("asc_or_desc",n)):(n="asc",a.removeSearch("asc_or_desc").addSearch("asc_or_desc",n)),a.removeSearch("sort_by").addSearch("sort_by",i),(0,y.track)("Backer Report Sort",{selected_sort:i,selected_order:n}),l.set_params(a.query()))}),l.on_change(function(){var e=(0,r.default)("#main");s.default.each(this.get("backers"),function(t){s.default.contains(d,t.id)||(d.push(t.id),t.project_is_successful="successful"===l.get("project.state"),t.showMessages=l.get("showMessages"),t.showRewards=l.get("showRewards"),t.show_responses=v,t.disputed_filter_enabled="true"===l.get("params.disputed"),t.dispute_status=l.get("dispute_statuses")[t.id],e.find("table tbody").append((0,g.default)("backer_report/_row",t)))})}),(0,r.default)(window).on("statechange",function(){var e=History.getState().data;e&&("string"==typeof e.params&&l.set_params(e.params),"string"==typeof e.modal_url?r.default.open_remote_modal_dialog(e.modal_url):(m=!0,(0,r.default)(".modal_dialog:has(.NS_backers__info):visible").trigger("close"),m=!1))}),(0,r.default)(window).on("set_params",function(e,t){l.set_params(t)}),(0,r.default)(document).on("click","#main .dropdown a",function(e){var t=(0,r.default)(this),i=t.closest(".dropdown"),a=i.closest(".ksr-dropdown");i.find("a").removeClass("selected"),t.addClass("selected"),n(),e.preventDefault(),a.hasClass("reward_tiers")?(0,y.track)("Backer Report Reward Filter",{selected_tier:r.default.trim((0,r.default)(this).find("b").text())}):a.hasClass("views")&&(0,y.track)("Backer Report Views Filter",{selected_tier:r.default.trim((0,r.default)("#main .reward_tiers .title b").text()),selected_view:r.default.trim((0,r.default)(this).find("span").text())})}),(0,r.default)(document).on("keyup","form.aggregations input[name=note], form.aggregations input[name=note_not]",function(e){13===e.which&&(0,r.default)(this).trigger("change")}),(0,r.default)(document).on("click","#main table tbody tr a",function(){i((0,r.default)(this).closest("tr"))}),(0,r.default)(window).on("backer_completed",function(e,t,n){(0,r.default)("#main table tbody tr td.completed a, .NS_backers__info a.completed_toggle").filter("[data-backer_id="+t+"]").toggleClass("completed",n)}),(0,r.default)(window).on("creator_backing_note:added",function(e,t,n){(0,r.default)("#main table tbody tr[data-backing_id="+t+"] td.notes a").text(n)}),(0,r.default)(window).on("message_sent",function(e,t,n){(0,r.default)("#main table tbody tr[data-backing_id="+t+"] td.actions a").html('<span class="ss-icon ss-mail"></span> ('+n+")")}),(0,r.default)(window).on("modal_dialog:opened",function(t){var n=(0,r.default)(t.target),i=n.data("modal_dialog");History.busy()||History.pushState({modal_url:i.remote_url},null,e().hash("").toString())}),(0,r.default)(window).on("modal_dialog:remote_dialog_loaded",function(e){var t=(0,r.default)(e.target),n=t.data("modal_dialog"),i=n.$elem.find("div[data-backing_id]").data("backing_id"),s=(0,r.default)('tr[data-backing_id="'+i+'"]'),l=s.prev("tr"),u=s.next("tr"),d=t.find(".NS_backers__info");u.length&&(0,r.default)('<a class="next btn btn--dark-green btn--large" href="#"><span class="ss-icon ss-navigateright"></span></a>').click(function(e){e.preventDefault(),a(),(0,y.track)("Backer Info Modal Next",{event_type:"click"})}).prependTo(d.find(".controls")),l.length&&(0,r.default)('<a class="prev btn btn--dark-green btn--large" href="#"><span class="ss-icon ss-navigateleft"></span></a>').click(function(e){e.preventDefault(),o(),(0,y.track)("Backer Info Modal Previous",{event_type:"click"})}).prependTo(d.find(".controls"))}),(0,r.default)(window).on("closed.modal_dialog",function(){if(!m){var e=r.default.param(l.get("params")),t=h.clone();History.pushState({params:e},null,t.query(e).hash("").toString())}}),(0,r.default)(window).on("keydown",function(e){if(!(0,r.default)(e.target).is(":input"))switch(e.keyCode){case f.J:case f.RIGHT:a(),(0,y.track)("Backer Info Modal Next",{event_type:"keyboard"});break;case f.K:case f.LEFT:o(),(0,y.track)("Backer Info Modal Previous",{event_type:"keyboard"});break;case f.ENTER:(0,r.default)(".NS_backers__info:visible").trigger("close").length||(0,r.default)("#main tbody tr.selected td.backer a").click();break;case f.ESC:(0,r.default)(".NS_backers__info:visible").trigger("close")}}),(0,r.default)(window).on("message_thread_read",function(e,t){(0,r.default)("#backer_report_backing_"+t.backing.id+" .notification-indicator").removeClass("notification-indicator--active")}),(0,r.default)(window).on("message_thread_unread",function(e,t){(0,r.default)("#backer_report_backing_"+t.backing.id+" .notification-indicator").addClass("notification-indicator--active")}),(0,r.default)(".NS_message_batches__new").livequery(function(){var e=(0,r.default)(".NS_message_batches__new"),t=e.find("form");t.find("textarea").validates_presence(),t.on("submit",function(n){n.preventDefault(),t.validate()&&((0,y.track)("Message Tier Sent"),r.default.ajax({url:t.attr("action"),type:t.attr("method"),data:t.serialize(),dataType:"json",success:function(){e.find("textarea").val(""),t.hide(),e.find(".success").show()},error:function(e){(0,u.default)({error:e.statusText})}}))})}),l.set((0,_.default)(window.backers)),l.change_params(h.query()),window.backers=l}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(1),s=i(o),l=n(5);(0,r.default)(function(){var e=".NS_backers__info";(0,r.default)(document).on("click",e+" .pledge .reward_details",function(e){e.preventDefault();var t=(0,r.default)(this).closest(".pledge");t.find(".description").toggle(),t.find(".description_short").toggle(),t.trigger("resize")}),(0,r.default)(document).on("click",e+" a.completed_toggle, #backer_report_index #main table tbody tr td.completed a",function(e){var t,n=(0,r.default)(this),i=n.is(".completed");r.default.ajax({url:n.attr("href"),type:"put",dataType:"json",data:{"backer[completed]":!i},success:function(e){n.trigger("backer_completed",[n.data("backer_id"),!i,e.completed_at]),n.toggleClass("completed",!i),e.completed_at&&n.find("span.date").text(e.completed_at)}}),n.closest(".modal_dialog").length?t="backer_modal":n.closest("td.completed").length&&(t="backer_row"),i?(0,l.track)("Rewards Sent Unchecked",{context:t}):(0,l.track)("Rewards Sent Checked",{context:t}),e.preventDefault()}),(0,r.default)(document).on("click",e+" .tab-nav a",function(t){t.preventDefault();var n=(0,r.default)(this).attr("rel"),i=(0,r.default)("."+n);(0,r.default)(e+" .panel").hide(),i.show(),(0,r.default)(".tab-nav li").removeClass("selected"),(0,r.default)(this).closest("li").addClass("selected"),(0,l.track)("Backings Show Toggle Tab",{toggled_to:n})}),(0,r.default)(document).on("ksr_json:complete",e+" .messages_panel",function(){var e=(0,r.default)(this),t=e.find(".message").length+1;e.trigger("message_sent",[e.data("backing-id"),t])}),(0,r.default)(document).on("message_sent",e+" .messages_panel",function(t,n,i){(0,r.default)(this).closest(e).find(".messages_link").html(s.default.t("onloads.views.backers.info.Messages_count",{count:i}))})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(1),s=i(o);(0,r.default)(function(){var e=".NS_backings__info";(0,r.default)(document).on("message_sent",e+" .messages_panel",function(t,n,i){(0,r.default)(this).closest(e).find(".messages_link").html(s.default.t("onloads.views.backings.info.Messages_count",{count:i}))}),(0,r.default)(document).on("click",e+" .js-backing-complete form",function(t){var n=(0,r.default)(this),i=n.find("label.with_data"),a=n.find(".checkbox"),o=!i.data("completed");t.preventDefault(),r.default.ajax({url:n.attr("action"),data:{"backing[backer_completed]":o},dataType:"json",type:"PUT",success:function(t){n.trigger("backer_completed",[n.closest(e).data("backing_id"),t.backing.completed_at]),a.prop("checked",o),i.data("completed",o)}})})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(19),r=i(a),o=n(0),s=i(o),l=n(3),u=i(l),d=n(117),c=n(39),f=i(c),h=n(71),p=i(h),m=n(2),g=i(m),v=n(8),_=i(v),y=n(12),b=n(5),w=n(11),k=i(w),j=n(10),x=n(653),C=i(x);n(85),n(84),n(83),(0,g.default)("#backings_index",function(e){function t(){return(0,k.default)(History.getState().url)}function n(e){return e.closest("section").data("collection_state")}function i(e){return e.closest("section").find("table")}function a(t){e.find("#backing_"+t.get("id")).each(function(){var e=(0,s.default)(this),i=n(e);e.replaceWith(o(t,i))})}function o(e,t){return(0,r.default)("backings/_row_"+t,(0,f.default)(s.default.extend({},e.get())))}function l(e,t){return(0,r.default)("backings/_"+t,(0,p.default)(s.default.extend({},e)),["backings/_row_"+t])}function c(e){i(e).removeClass("table_loading")}function h(e){i(e).addClass("table_loading")}function m(e){return i(e).hasClass("table_loading")}function g(e){m(e)||e.is(".selected")||((0,s.default)("#main tbody tr").removeClass("selected"),e.addClass("selected"),E=!0,(0,s.default)(".NS_backings__info:visible").trigger("close").length&&e.find("a.more").click(),E=!1)}function v(){var e=(0,s.default)("#main tbody tr.selected");g(e.length?e.next():(0,s.default)("#main tbody tr:first"))}function w(){var e=(0,s.default)("#main tbody tr.selected");g(e.length?e.prev():(0,s.default)("#main tbody tr:last"))}var x,S=["active","collected","uncollected"],E=!1,T=t();e.on("backer_completed",function(e,t,n){var i=d.Backing.find(t);i.set("completed_at",n),a(i)});var A=!1;e.on("click","a.backer_completed_at",function(e){e.preventDefault(),setTimeout(function(){A=!0,e.target.checked=!e.target.checked,(0,s.default)(e.target).change()},0)}),e.on("change","a.backer_completed_at input.checkbox",function(e){if(!A)return void e.preventDefault();A=!1;var t=(0,s.default)(this),n=t.closest("a"),i=t.is(":checked");m(t)||s.default.ajax({url:n.attr("href"),data:{"backing[backer_completed]":i},dataType:"json",type:"PUT",success:function(e){e.backing&&n.trigger("backer_completed",[e.backing.id,e.backing.completed_at])}})}),e.on("message_sent",function(e,t,n){var i=d.Backing.find(t);i.set("messages",{count:n,last_activity_at:(0,C.default)(new Date)}),a(i)}),e.on("click","#main table tbody tr",function(e){var t=(0,s.default)(this),n=(0,s.default)(e.target);if(m(t))return void e.preventDefault();n.closest("input, label, a.more, a.messages").length>0||((0,b.track)("Backings Show Modal",{how_triggered:"row"}),t.find("td a.more").click())}),e.on("click","a.more span.ss-icon",function(){(0,b.track)("Backings Show Modal",{how_triggered:"icon"})}),e.on("click","table th.sortable",function(e){var t=(0,s.default)(this),i=t.closest("table"),a=n(t),r=t.hasClass("asc")?"asc":"desc",l=Math.min(i.find("tbody tr").length,150),f=t.data("sort"),p=(0,k.default)(i.data("url"));e.preventDefault(),(0,b.track)("Backings "+_.default.capitalize(a)+" Sort",{selected_sort:f}),p.addSearch({direction:r,sort:f,page:1,per_page:l}),x&&x.abort(),x=s.default.ajax({url:p.toString(),dataType:"json",beforeSend:function(){h(t)},complete:function(){c(t),x=void 0},success:function(e){var n;n=u.default.map(e.backings,function(e){return o(new d.Backing(e),a)}),i.find("tbody").html(n),i.data({sort:f,direction:r}),i.find("th").not(t).removeClass("active asc").addClass("desc"),t.addClass("active").removeClass(r).addClass("desc"===r?"asc":"desc"),i.find("tbody tr").length<e.total&&t.closest("section").find("a.show_more_backings").show()}})}),(0,s.default)(document).on("click","a.show_more_backings",function(e){var t=(0,s.default)(this),a=i(t),r=n(t),l=a.data("sort");e.preventDefault(),m(t)||((0,b.track)("Backings "+_.default.capitalize(r)+" More",{selected_sort:l}),x&&x.abort(),x=s.default.ajax({url:a.data("url"),data:{direction:a.data("direction"),page:Math.floor(a.find("tbody tr").length/150)+1,per_page:150,sort:l},beforeSend:function(){t.addClass("loading")},complete:function(){t.removeClass("loading"),x=void 0},success:function(e){var i,r=n(t),s=a.find("tbody tr").length,l=0;s<150&&(l=s),i=u.default.chain(e.backings).rest(l).map(function(e){return o(new d.Backing(e),r)}).value(),a.find("tbody").append(i),a.find("tbody tr").length>=e.total&&t.hide()}}))}),(0,s.default)(window).on("statechange",function(){var e=History.getState().data;e&&("string"==typeof e.modal_url?s.default.open_remote_modal_dialog(e.modal_url):(E=!0,(0,s.default)(".modal_dialog:has(.NS_backings__info):visible").trigger("close"),E=!1))}),e.on("click","#main table tbody tr a.remote_modal_dialog",function(){g((0,s.default)(this).closest("tr"))}),(0,s.default)(window).on("modal_dialog:opened",function(e){var n=(0,s.default)(e.target),i=n.data("modal_dialog");History.busy()||History.pushState({modal_url:i.remote_url},null,t().hash("").toString())}),(0,s.default)(window).on("modal_dialog:remote_dialog_loaded",function(t){var n=(0,s.default)(t.target),i=n.data("modal_dialog"),a=i.$elem.find("div[data-backing_id]").data("backing_id"),r=e.find("#backing_"+a),o=r.prev("tr"),l=r.next("tr"),u=n.find(".NS_backings__info");l.length&&(0,s.default)('<a class="next btn btn--dark-green btn--large" href="#"><span class="ss-icon ss-navigateright"></span></a>').click(function(e){e.preventDefault(),v()}).prependTo(u.find(".controls")),o.length&&(0,s.default)('<a class="prev btn btn--dark-green btn--large" href="#"><span class="ss-icon ss-navigateleft"></span></a>').click(function(e){e.preventDefault(),w()}).prependTo(u.find(".controls"))}),(0,s.default)(window).on("closed.modal_dialog",function(){if(!E){var e=T.clone();History.pushState(null,null,e.hash("").toString())}}),(0,s.default)(window).on("keydown",function(e){if(!(0,s.default)(e.target).is(":input"))switch(e.keyCode){case y.J:case y.RIGHT:v();break;case y.K:case y.LEFT:w();break;case y.ENTER:(0,s.default)(".NS_backings__info:visible").trigger("close").length||(0,s.default)("#main tbody tr.selected td a.more").click()}}),u.default.each(S,function(e){var t=JSON.parse((0,j.unescape)(window[e]));t.backings=u.default.map(t.backings,function(e){return new d.Backing(e)}),(0,s.default)("#"+e).append(l(t,e))})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o);n(112),n(111),(0,s.default)("body#blog_posts_category",function(e){var t,n;t=(0,r.default)("#sidebar",e),t.sticky_bar({parent:t.closest("#content")}),n=(0,r.default)(".mobius",e),(0,r.default)("div.load_more",e).show(),(0,r.default)("div.pagination",e).hide(),n.persistent_paging()})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);(0,a.default)(".NS_blogs__blog_header .js-show-blog-search").on("click",function(e){e.preventDefault(),(0,a.default)(".js-blog-search").addClass("is-visible"),(0,a.default)(".js-blog-search input.text").focus()}),(0,a.default)(".NS_blogs__blog_header .js-blog-search input.text").on("blur",function(){(0,a.default)(".js-blog-search").removeClass("is-visible")})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a);(0,i(n(2)).default)("body#claims_new",function(){(0,r.default)(".js-not-contacted").on("click",function(){(0,r.default)(".js-not-contacted-message").show(),(0,r.default)(".js-claim-info").hide(),(0,r.default)(".js-owner-section").hide(),(0,r.default)(".js-yes-contacted").hide()}),(0,r.default)(".js-contacted").on("click",function(){(0,r.default)(".js-not-contacted-message").hide(),(0,r.default)(".js-claim-info").show()}),(0,r.default)(".js-type-owner").on("click",function(){(0,r.default)(".js-trademark-section").length?((0,r.default)(".js-none-of-the-above-error").hide(),(0,r.default)(".js-trademark-section").show(),(0,r.default)(".js-contacted").prop("checked",!1),(0,r.default)(".js-not-contacted").prop("checked",!1),(0,r.default)(".js-not-contacted-message").hide(),(0,r.default)(".js-claim-info").hide(),(0,r.default)(".js-owner-name").hide(),(0,r.default)(".js-owner-name-text").val(""),(0,r.default)(".js-owner-name").hide()):((0,r.default)(".js-none-of-the-above-error").hide(),(0,r.default)(".js-not-contacted-message").hide(),(0,r.default)(".js-claim-info").show(),(0,r.default)(".js-owner-name").hide(),(0,r.default)(".js-owner-name-text").val(""))}),(0,r.default)(".js-type-representative").on("click",function(){(0,r.default)(".js-trademark-section").length?((0,r.default)(".js-none-of-the-above-error").hide(),(0,r.default)(".js-trademark-section").show(),(0,r.default)(".js-contacted").prop("checked",!1),(0,r.default)(".js-not-contacted").prop("checked",!1),(0,r.default)(".js-not-contacted-message").hide(),(0,r.default)(".js-owner-name").show(),(0,r.default)(".js-claim-info").hide(),(0,r.default)(".js-owner-name").show()):((0,r.default)(".js-none-of-the-above-error").hide(),(0,r.default)(".js-not-contacted-message").hide(),(0,r.default)(".js-claim-info").show(),(0,r.default)(".js-owner-name").show())}),(0,r.default)(".js-type-none").on("click",function(){(0,r.default)(".js-trademark-section").length?((0,r.default)(".js-none-of-the-above-error").show(),(0,r.default)(".js-trademark-section").hide(),(0,r.default)(".js-not-contacted-message").hide(),(0,r.default)(".js-claim-info").hide()):((0,r.default)(".js-none-of-the-above-error").show(),(0,r.default)(".js-claim-info").hide())})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(1),s=i(o),l=n(70),u=i(l);n(36),(0,r.default)(function(){var e=".NS_comments__comment";(0,r.default)(".js-could-have-comments").length&&((0,r.default)(document).on("click",e+" a.report_spam",function(e){e.preventDefault();var t=(0,r.default)(this),n=this,i=t.closest(".comment");r.default.modal_confirm(function(){return u.default.get(t.data("url"),"post",i.find(".ajax-container"),n)},{message:s.default.t("onloads.views.comments.comment.We_review_all_reports_with_care_but_please_keep_in_mind"),title:s.default.t("onloads.views.comments.comment.Report_this_comment_to_Kickstarter"),confirm_text:s.default.t("onloads.views.comments.comment.Yes_report_as_spam")})}),(0,r.default)(document).on("ksr_json:complete",e+" .spam_reported",function(e,t){var n=(0,r.default)(this).closest(".comment"),i=n.find(".report_spam");i.hide(),200!==t.status||i.is(".admin")||n.find(".body").hide()}))})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(3),s=i(o),l=n(7),u=i(l),d=n(1),c=i(d),f=n(14),h=i(f);(0,r.default)(function(){(0,r.default)("body").on("DOMNodeInserted","form#new_comment",function(){function e(){var e=t.closest(".js-comments").find(".list-comments li.comment:first");if(h.default&&h.default.get("comments_loaded")&&e.length)return parseInt(e.attr("id").match(/\d+/)[0],10)}var t=(0,r.default)(this);t.on("click",":submit",function(n){if(h.default&&h.default.get("comments_loaded")&&h.default.get("comments_count")-h.default.get("comments_loaded")>50)return!0;n.preventDefault();var i=t.find("input.submit"),a=i.val(),o=e(),l=s.default.reduce(t.serializeArray(),function(e,t){return e[t.name]=t.value,e},{});o&&(l.cursor=o),i.hasClass("disabled")||(i.addClass("disabled"),i.val(c.default.t("onloads.views.comments.form.Posting")),r.default.ajax({type:t.attr("method"),url:t.attr("action"),dataType:"json",data:l,success:function(e){var n=t.closest(".js-comments"),i=n.find(".list-comments"),a=n.find("header");s.default.isArray(e.flash)&&s.default.isArray(e.flash[0])&&(e.flash=s.default.object(e.flash)),(0,u.default)(e.flash),e.html&&(t.each(function(){void 0!==this.reset&&this.reset()}),i.length||(i=(0,r.default)('<ol class="list-comments click"><li class="page"><ol class="comments"></ol></li></ol>'),a.length?a.after(i):n.append(i)),e.comments_count&&h.default&&h.default.get("comments_loaded")&&(h.default.set("comments_loaded",h.default.get("comments_loaded")+(0,r.default)(e.html).length),h.default.set("comments_count",e.comments_count)),(0,r.default)("#project-edit-nav .preview .count").text(function(e,t){return parseInt(t,10)+1}),i.closest(".project_preview_comments").addClass("has_comments"),(0,r.default)("body#proposals_show").length?i.append(e.html):i.find(".page ol.comments").prepend(e.html))},complete:function(){i.removeClass("disabled"),i.val(a)}}))})})})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);(0,a.default)(function(){(0,a.default)(document).on("submit","#beneficiary_container form.beneficiary_reset",function(e){var t=(0,a.default)(this),n=(0,a.default)('<div class="spinner" />').spin("ksr","#fff");t.closest("#beneficiary_container").append(n),a.default.ajax({type:t.attr("method"),url:t.attr("action"),data:t.serialize(),dataType:"html",success:function(e){t.closest("#account-setup-panel").html(e)}}),e.preventDefault()})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a);(0,i(n(2)).default)("body#country_signups_netherlands",function(e){function t(){var e=(0,r.default)(window).height()-(0,r.default)("#header-wrap").height(),t=(0,r.default)(window).width(),i=t/e;n.css({height:e,"min-height":"660px"}),i<1.777777?n.find("video").css({height:e,width:"auto",left:"50%",top:0,"margin-top":0,"margin-left":-n.find("video").width()/2}):(n.find("video").css({height:"auto",width:t,left:0,"margin-left":0,top:"50%","margin-top":-n.find("video").height()/2}),e<620&&n.find("video").css({"margin-top":-360}))}var n=e.find(".video-banner");(0,r.default)(document).resize(function(){t()}),t()})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(194),u=n(3),d=i(u);(0,s.default)("body.country_signups",function(){(0,r.default)("input#signup_email").validates_presence().validates_email(),(0,r.default)("form#new_signup").on("submit",function(e){var t=(0,r.default)(this);if(e.preventDefault(),!t.validate())return(0,r.default)("#signup_email").addClass("errored"),(0,r.default)(".error_message").show(),!1;r.default.ajax({url:t.attr("action"),data:t.serialize(),type:t.attr("method"),dataType:"json",success:function(){(0,r.default)(".error_message").hide(),(0,r.default)(".submitting").hide(),(0,r.default)(".submitted").show()},error:function(){t.find("#signup_email").addClass("errored")}})}),(0,l.initProjectCardTracking)([".js-track-project-card"]),window.onscroll=d.default.debounce(l.trackProjectCards,150)})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);(0,a.default)(function(){(0,a.default)(document).on("submit",".NS_creator_backing_notes__form",function(){var e=(0,a.default)(this);"undefined"!=typeof ga&&ga("send","event","Backing Notes","Save",(0,a.default)("body").attr("id")),e.trigger("creator_backing_note:added",[e.data("backing_id"),e.find("textarea").val()])})})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);(0,a.default)(".NS-curated_page_projects-new").livequery(function(){var e=(0,a.default)(this),t=e.find("form.curated_pages_form"),n=parseInt((0,a.default)("div.blurb .character_counter .number:first",e).text(),10);(0,a.default)(".blurb textarea",e).validates_max_length().validates_presence(),(0,a.default)(".blurb",e).on("validate:invalid",function(){(0,a.default)(this).addClass("errored")}),(0,a.default)(document).on("validate:valid",".blurb, .meta h1",function(){(0,a.default)(this).removeClass("errored")}),(0,a.default)("div.blurb",e).on("keypress cut paste input",function(){var e=(0,a.default)(this),t=e.find("textarea").val().length,i=n-t;e.find("textarea").validate(),e.find(".character_counter .number").text(i)}),e.find(".save").click(function(){var e=t.find(".buttons .loading");(0,a.default)("div.blurb textarea").validate()&&(e.show(),a.default.ajax({type:t.attr("method"),url:t.attr("action"),data:t.serialize(),dataType:"json",global:!1,success:function(n){t.trigger("close.modal_dialog"),t.trigger("project_added_to_curated_page",[n]),e.hide()}}))}),e.find(".cancel").click(function(){(0,a.default)(this).trigger("close.modal_dialog")})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a);(0,i(n(2)).default)("#curated_pages_reorder",function(e){function t(){(0,r.default)(".js-project").each(function(e){(0,r.default)(this).find("input.text").val(e+1)})}(0,r.default)(".js-project input.text").on("blur",function(){var e=(0,r.default)(this),n=parseInt(e.val(),10),i=e.closest(".js-project");isNaN(n)||((0,r.default)(".js-project").not(i).eq(n-1).before(i),t())}).on("focus",function(){this.select()}),e.find("form ol").sortable({containment:"document",tolerance:"pointer",items:"> li",stop:t})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(1),s=i(o);(0,r.default)(function(){var e=(0,r.default)("#curated_pages_show"),t="#curated_pages_show form.curated_pages_form",n=(0,r.default)(t);n.length&&(!function(){function i(e){var t=e.siblings(".value"),n=e.children("span.add_prompt");if(!t.siblings("textarea:visible, input:visible").length)return""===r.default.trim(t.text())?(n.show(),e.addClass("empty")):(n.hide(),e.removeClass("empty")),e}function a(){var e=(0,r.default)(".curated_page_project:visible:not(.new)"),t=e.length-e.find("div.blurb.errored").length;return""!==r.default.trim((0,r.default)("#curated_page_title:not(:visible)").val())&&(""!==r.default.trim((0,r.default)("#curated_page_description:not(:visible)").val())&&!(t<1))}function o(){var e=(0,r.default)(".submit.launch, #add_shortcut_url");a()?e.removeAttr("disabled").removeClass("disabled"):e.attr("disabled",!0).addClass("disabled")}function l(e){var t=(0,r.default)('<div class="buttons"></div>'),n=e.val(),i=(0,r.default)('<div class="save btn btn--green btn--small">'+s.default.t("onloads.views.curated_pages.show.Save")+"</div>"),a=(0,r.default)('<div class="cancel btn btn--gray btn--small">'+s.default.t("onloads.views.curated_pages.show.Cancel")+"</div>"),o=(0,r.default)('<span class="loading icon-loading-small"></span>');return i.click(function(){e.trigger("close")}),a.click(function(){e.val(n),e.trigger("close")}),o.hide(),t.append(i),t.append(a),t.append(o),t}function u(e){var t={};e.data("livesearch_result")?(t.html=e.data("livesearch_result").html,t.id=e.data("livesearch_result").id):(t.html=e.data("html"),t.id=+e.data("id")),console.assert(t.html.length),console.assert(t.id);var n=(0,r.default)(t.html).find(".project-card").parent().html();return console.assert(n.length),t.card=n,t}var d,c=(0,r.default)("#main.published"),f=(0,r.default)(".project-card-list.live",e),h=(0,r.default)(".tools .delete").closest("form"),p=!!c.length,m=(0,r.default)(".find_projects .project-results ul.result_list",e).clone(),g=(0,r.default)(".find_projects .project-results div.instructions",e).clone(),v=!!m.length;(0,r.default)(document).on("form_synced","form.header_form",function(e,t){var n,a=(0,r.default)(this);t.curated_page&&t.curated_page.description&&(n=a.find(".description .value").html(t.curated_page.description),i(n.siblings(".edit_prompt")))}),(0,r.default)(document).on("form_synced",".curated_page_project > form",function(e,t){var n,a=(0,r.default)(this);t.curated_page_project&&t.curated_page_project.blurb&&(n=a.find(".blurb .value").html(t.curated_page_project.blurb),i(n.siblings(".edit_prompt")))}),e.on("click",".value:not(.image), .edit_prompt",function(){function e(t){t.target===n[0]||(0,r.default)(t.target).is("a.cancel, a.save")||(0,r.default)(document).off("click",e)}var t=(0,r.default)(this),n=(0,r.default)(this).siblings("input, textarea");n.is(":visible")||(n.show().focus(),n.parent().append(l(n)),setTimeout(function(){(0,r.default)(document).on("click",e)},100),t.is(".empty")?t.find(".add_prompt").hide():t.hide(),t.siblings(".value").hide(),t.trigger("field_opened"))}),(0,r.default)(".edit_prompt",n).each(function(){i((0,r.default)(this))}),e.on("close","input:not(.not_edit_in_place), textarea",function(){function e(){a.show(),p||n.show(),t.siblings(".buttons").remove(),t.hide(),t.trigger("field_closed")}var t=(0,r.default)(this),n=t.siblings(".edit_prompt"),a=t.siblings(".value");if(!t.validate())return void t.focus();t.is("textarea")?(t.siblings(".buttons").find(".loading").css("display","inline-block"),t.closest("form").sync_form({success:function(t){t.valid&&e()},complete:function(){t.siblings(".buttons").find(".loading").hide()}})):(a.text(t.val()),i(n),e(),t.closest("form").sync_form())}),(0,r.default)(document).on("keydown",t+" input:not(.not_edit_in_place)",function(e){13===e.keyCode&&(e.preventDefault(),(0,r.default)(this).trigger("close")),27===e.keyCode&&(e.preventDefault(),(0,r.default)(this).siblings(".buttons").find(".cancel").click())}),(0,r.default)(document).on("click",".curated_page_project a.remove",function(e){e.preventDefault();var t,n,i=(0,r.default)(this),a=i.closest("form"),s=parseInt(a.find("input.project_id").val(),10);m.find("li").each(function(){(0,r.default)(this).attr("data-id")===s&&(0,r.default)(this).show()}),a.sync_form({type:"delete",success:function(){n&&i.closest(".curated_page_project").remove(),t=!0}}),i.closest(".curated_page_project").fadeOut(function(){o(),t&&(0,r.default)(this).remove(),n=!0})}),(0,r.default)(".blurb textarea, .meta .description textarea").livequery(function(){(0,r.default)(this).validates_max_length().validates_presence()}),(0,r.default)("#curated_page_title").data("validations",[[function(e){return!(!e.length&&p)}]]),(0,r.default)(document).on("field_opened",".blurb",function(){(0,r.default)(this).find(".label").show(),(0,r.default)(this).find(".character_counter").show()}),(0,r.default)(document).on("field_closed",".blurb",function(){(0,r.default)(this).find(".label").hide(),(0,r.default)(this).find(".character_counter").hide()}),(0,r.default)(document).on("field_opened",".meta .description",function(){(0,r.default)(this).find(".character_counter").show()}),(0,r.default)(document).on("field_closed",".meta .description",function(){(0,r.default)(this).find(".character_counter").hide()}),(0,r.default)(document).on("validate:invalid",".blurb, .meta h1, .meta .description",function(){(0,r.default)(this).addClass("errored")}),(0,r.default)(document).on("validate:valid",".blurb, .meta h1, .meta .description",function(){(0,r.default)(this).removeClass("errored")}),(0,r.default)(document).on("keypress cut paste input field_opened","div.blurb, .meta .description",function(e){var t=(0,r.default)(this),n=t.find("textarea").val().length,i=parseInt(t.find("textarea").data("maxlength"),10)-n;"field_opened"!==e.type&&t.find("textarea").validate(),t.find(".character_counter .number").text(i)}),(0,r.default)(document).on("form_synced",".curated_page_project",function(e,t){var n=(0,r.default)(this),i=n.find("form");t.valid&&(i.attr("action",t.url),i.attr("method","put"),i.find("#curated_page_project_id").val(t.curated_page_project.id),n.css("border","0"))}),(0,r.default)(document).on("click",".image a.remove",function(e){e.preventDefault();var t=(0,r.default)(this);r.default.ajax({url:t.attr("href"),type:"delete",dataType:"text",contentType:"application/x-www-form-urlencoded",success:function(e){t.closest(".image").find("img").attr("src",e)}})}),e.on("click",".add_project",function(){var e=(0,r.default)(this).closest(".curated_page_project").find(".find_projects");e.show(),e.find(".input-search").focus()}),(0,r.default)(document).on("livesearch:soft_select livesearch:unselect",".find_projects .project-results ul.result_list li",function(e){var t=(0,r.default)(this),n=t.closest(".curated_page_project").find(".project");console.assert(n.length);var i=n.children(".add_project");console.assert(i.length);var a,o=n.find(".project-card");if("livesearch:soft_select"===e.type){a=u(t);var s=(0,r.default)(a.card);i.hide(),o.remove(),n.append(s)}else console.assert(o),o.remove(),i.show()}),(0,r.default)(document).on("livesearch:selected",".find_projects .project-results ul.result_list li",function(e){e.preventDefault();var t=(0,r.default)(this),n=u(t),i=(0,r.default)('<div class="curated_page_project">'+n.html+"</div>"),a=t.closest(".curated_page_project");console.assert(a.length);var o,s;t.trigger("livesearch:unselect"),m.find("li").each(function(){(0,r.default)(this).attr("data-id")===n.id&&(0,r.default)(this).hide()}),v?(a.find("ul.result_list").replaceWith(m.clone()),a.find(".project-results > h2").text("My Backed Projects"),d.bind_results()):(a.find("ul.result_list").empty().before(g.clone()),a.find(".project-results > h2").text("Adding Projects")),d.livesearch.last_search=!1,a.find("input.input-search").val("").blur(),o=a.find("input.exclude"),s="",f.children(".curated_page_project").each(function(){var e=(0,r.default)(this).find("input.project_id").val();e&&(s+=e+",")}),s+=i.find("input.project_id").val(),o.val(s),a.hide(),a.after(i),i.find(".blurb .value").click()}),(0,r.default)(document).on("livesearch:results",".find_projects",function(){(0,r.default)(this).find(".project-results > h2").text("Search Results"),(0,r.default)(this).find(".project-results > .instructions").remove()}),(0,r.default)(".find_projects input.input-search").livequery(function(){var e=(0,r.default)(this),t=(0,r.default)(this).siblings("input.exclude"),n=e.siblings(".ss-search");d=e.livesearch_input_dropdown({url:e.data("livesearch-url"),serialize:e.add(t),cancel_copy:"",client_side_cache:!1,update_input:!1,return_name_from_result:function(e){return e.name}}).data("livesearch.input_dropdown"),e.on("livesearch:searching",function(){n.removeClass("ss-search").addClass("icon-loading-small")}),e.on("livesearch:results livesearch:ajax_error",function(){n.removeClass("icon-loading-small").addClass("ss-search")})}),(0,r.default)(document).on("form_synced",o),o(),p&&((0,r.default)(document).on("mouseenter",".curated_page_project, .image.value",function(){(0,r.default)(this).find("a.remove").show()}).on("mouseleave",".curated_page_project, .image.value",function(){(0,r.default)(this).find("a.remove").hide()}),(0,r.default)(document).on("mouseenter",".project-card-list.live .value, .value ~ textarea, .value ~ input",function(){(0,r.default)(this).siblings(".edit_prompt").show()}).on("mouseleave",".value, .value ~ textarea, .value ~ input",function(){(0,r.default)(this).siblings(".edit_prompt:not(.empty)").hide()})),(0,r.default)(document).on("click","#new_root_slug .cancel",function(e){e.preventDefault(),(0,r.default)(this).trigger("close.modal_dialog")}),(0,r.default)(document).on("submit","#new_root_slug",function(e){e.preventDefault();var t=(0,r.default)(this),n=t.find(".shortcut.url");n.addClass("processing"),n.removeClass("invalid"),n.find(".error_message").text(""),r.default.ajax({url:t.attr("action"),type:t.attr("method"),data:t.serialize(),dataType:"json",success:function(e){if(n.removeClass("processing"),e.valid){t.trigger("close.modal_dialog");var i=(0,r.default)(".tools .launch");i.length&&i.closest("form").submit(),(0,r.default)("#add_shortcut_url").replaceWith('<a class="btn btn--red shortcut_url" href="'+e.url+'">'+e.url+"</a>")}else t.removeClass("submitting-non-ajax"),n.addClass("invalid"),n.find(".error_message").text(e.errors.slug[0])}})}),h.confirm_submit({title:s.default.t("onloads.views.curated_pages.show.Delete_your_Curated_Page"),copy:s.default.t("onloads.views.curated_pages.show.Are_you_sure_you_want_to_delete_your_current_Curated_Page"),yes_copy:s.default.t("onloads.views.curated_pages.show.Yes_delete"),no_copy:s.default.t("onloads.views.curated_pages.show.Nevermind")})}(),(0,r.default)(".js-add_project").on("click",function(e){var t=(0,r.default)(".new");console.assert(t.length),t.is(":visible")?t.hide():t.show().find(".add_project").click(),e.preventDefault()}))})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o);n(111),n(112);var l=n(194),u=n(3),d=i(u);(0,s.default)("body.discover",function(e){(0,l.initProjectCardTracking)([".js-track-project-card"]),window.onscroll=d.default.debounce(l.trackProjectCards,150);var t,n=(0,r.default)(".mobius",e);n.length&&(t=(0,r.default)("#sidebar",e),t.sticky_bar({parent:t.closest("#content")}),(0,r.default)("div.load_more",e).show(),(0,r.default)("div.pagination",e).hide(),n.persistent_paging())})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(5);(0,s.default)(".NS_discover__hero",function(e){function t(){r.default.each(a,function(){var e=(0,r.default)(this);e.height(e.find("a").outerHeight(!0))}),r.default.each(o,function(){var e=(0,r.default)(this);e.find("a.current").closest(".js-category").addClass("has-children-is-current"),e.closest(a).width(e.find("a.current .js-name-prop").outerWidth()),e.css({marginTop:-e.find("a.current").position().top,opacity:1})})}function n(){e.find(".js-discover-hero-subtitle").show()}var i=e.data("category"),a=e.find(".js-interactive-title"),o=e.find(".js-interactive-title-group"),s=e.find(".js-interactive-title-content-fade"),u=(0,r.default)("#NS__discover_advanced_sentence");a.length&&(window.setTimeout(function(){t(),n()},300),a.find("a").on("click",function(e){var t=(0,r.default)(this);return t.parents(".js-react-overlay-enabled").length>0?(e.preventDefault(),void(0,r.default)("#js-overlay-explore-button")[0].click()):t.parents(".js-discovery-overlay-enabled").length>0?(e.preventDefault(),void(0,r.default)("#js-discovery-expand").click()):((0,r.default)(".interactive-title-group-visible").length||(t.closest(a).find(".js-interactive-title-content-fade").fadeIn(300),u.removeClass("clip"),e.preventDefault()),a.not(t.closest(a)).addClass("other-interactive-title-group-visible"),t.closest(a).addClass("interactive-title-group-visible"),void(0,l.track)("Discover Switch Modal",{modal_type:t.closest(a).data("modal_type")}))}),(0,r.default)(document).on("keyup",function(e){27===e.keyCode&&(0,r.default)(".interactive-title-group-visible").length&&s.click()}),s.on("click",function(e){var t=(0,r.default)(this),n=t.closest(a);a.not(n).removeClass("other-interactive-title-group-visible"),n.removeClass("interactive-title-group-visible"),t.fadeOut(200),u.addClass("clip"),(0,l.track)("Discover Switch Modal Close"),e.preventDefault()}),(0,r.default)(document).resize(function(){t()})),e.find("a.subcategory").on("click",function(t){var n=(0,r.default)(this),i=n.data();n.hasClass("current")?(n.removeClass("current"),(0,r.default)(document).trigger("discovery:hero:unselect_subcategory",i),(0,l.track)("Discover Subcategory Deselected",(0,l.namespaceKeys)("discover_category",i)),(0,r.default)(document).trigger("discovery:sentence:update_params",{category_id:i.parent_id||i.id})):(n.siblings().removeClass("current"),n.addClass("current"),(0,r.default)(document).trigger("discovery:hero:select_subcategory",i),(0,r.default)(document).trigger("discovery:sentence:update_params",{category_id:i.id}),(0,l.track)("Discover Subcategory Selected",(0,l.namespaceKeys)("discover_category",i))),(0,r.default)(document).scrollTop()<e.offset().top&&r.default.scrollTo(e.offset().top,300,"easeOutExpo"),t.preventDefault()}),(0,r.default)(".js-refine-and-sort").on("click",function(){i&&(0,l.track)("Discover Refine Search Clicked",(0,l.namespaceKeys)("discover_category",i))})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(2),r=i(a),o=n(3),s=i(o),l=n(5),u=n(4),d=i(u),c=n(306),f=i(c),h=n(19),p=i(h),m=n(212),g=n(29),v=n(193);(0,r.default)("#NS_discover__landing",function(e){var t=e.data("category"),n=e.find(".js-load-more");n.loadMore({default_page:0,perPage:12,responseToHTML:function(e){if(window.enabled_features.react_discovery_cards){var t=e.projects.map(v.normalizeData),n=(0,g.provideTranslations)(window.I18n)(m.ProjectCardContainer),i=d.default.createElement(n,{includeGrid:!1,projects:t});return f.default.renderToStaticMarkup(i)}var a=s.default.groupBy(e.projects,function(e,t){return Math.floor(t/3)}),r={projects:s.default.values(a),columnClass:"col-4 mb2"};return(0,p.default)("projects/_baseball_card_grid",r,["projects/_baseball_card_tall","projects/_baseball_card_tall_spotlight","projects/_baseball_card_tall_standard"])}}),n.on("mobius:loading_page",function(){(0,l.track)("Discover Category See More Clicked",s.default.extend((0,l.namespaceKeys)("discover_category",t),{discover_module_type:n.data("type")}))})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(3),s=i(o),l=n(2),u=i(l),d=n(20),c=i(d),f=n(5);n(114),(0,u.default)("body#discover_index",function(e){function t(t){t=t||{},g=!0,h.cycle({autoHeight:0,timeout:0,slides:".slide",speed:600,fx:"scrollHorz",startingSlide:t.starting_slide||h.children().length-1,next:e.find(".js-next"),prev:e.find(".js-previous"),allowWrap:!1,log:!1})}function n(){g=!1,h.cycle("destroy")}function i(){var e=(0,r.default)(window).width();g&&e<m?n():!g&&e>=m&&t()}function a(){var e=d.find(".js-adjective").eq(_);d.find(".js-adjective").removeClass("active"),e.addClass("active"),u.css({height:e.outerHeight(!0),width:e.find("span").width()}),d.css({top:-e.position().top})}function o(){_+=1,_>=d.find(".js-adjective").length&&(_=0),a()}var l,u=e.find(".js-adjectives-container"),d=e.find(".js-adjectives-list"),h=e.find(".slides"),p=e.find(".js-potd"),m=640,g=!1,v=!0,_=6;h.on("cycle-before",function(e,i){v&&2===i.nextSlide&&r.default.ajax({url:p.data("potds"),data:{page:parseInt(h.children().length/10+1,10)},dataType:"json",success:function(e){v=10===e.results.length,n();var i=h.children().length;s.default.each(e.results,function(e){h.prepend(e)}),t({starting_slide:h.children().length-i+2})}})}),h.on("cycle-next",function(e,t){(0,f.track)("Discover POTD Next Clicked",{discover_potd_slide:h.children().length-1-t.nextSlide})}),h.on("cycle-prev",function(e,t){(0,f.track)("Discover POTD Previous Clicked",{discover_potd_slide:t.slideCount-1-t.nextSlide})}),c.default["not-touchable"]&&skrollr.init({forceHeight:!1}),(0,r.default)(document).resize(function(){i(),a()}),window.setTimeout(function(){u.removeClass("opacity-0"),a()},500),i(),function(){clearInterval(l),l=setInterval(function(){o()},5e3)}()})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a);(0,i(n(2)).default)("body.email_previews",function(e){e.find("#index").on("change",function(){this.submit()}),e.find("#show").on("submit",function(t){t.preventDefault(),e.find("#email_preview").attr("src",(0,r.default)(t.target).attr("action")+"?"+(0,r.default)(t.target).serialize())})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a);(0,i(n(2)).default)("body.events",function(){(0,r.default)(".js-scroll_to").on("click",function(e){e.preventDefault(),r.default.scrollTo((0,r.default)(this).attr("href"),1e3)})})},function(e,t,n){"use strict";var i=n(2),a=function(e){return e&&e.__esModule?e:{default:e}}(i);n(114),(0,a.default)("body#events_blockparty.not-touchable",function(){skrollr.init()})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(5),u=n(11),d=i(u);(0,s.default)("body#events_filmfest2014",function(){var e=document.location.protocol+"//",t=function(t,n){var i={},a=(0,r.default)('iframe[src*="embed.vhx.tv"]');void 0===n&&(n=null),i=JSON.stringify({method:t,params:n}),a.length&&a[0].contentWindow.postMessage(i,e+"embed.vhx.tv")},n={play:function(){t("play")},pause:function(){t("pause")},seekTo:function(e){void 0===e&&(e=null),t("seekTo",e)}};(0,r.default)(window).on("message",function(t){var n;if(t.originalEvent.origin===e+"embed.vhx.tv")switch(n=JSON.parse(t.originalEvent.data),n.event_type){case"start":(0,l.track)("2014 Kickstarter Film Festival Start Program");break;case"play":(0,l.track)("2014 Kickstarter Film Festival Play Program");break;case"pause":(0,l.track)("2014 Kickstarter Film Festival Pause Program");break;case"finish":(0,l.track)("2014 Kickstarter Film Festival Finish Program");break;case"fullscreen":(0,l.track)("2014 Kickstarter Film Festival Fullscreen Program")}}),(0,l.trackLinks)(".download_booklet","2014 Kickstarter Film Festival Download Booklet"),(0,r.default)(".js-open_video").on("click",function(e){var t=(0,r.default)(this),i=t.closest("section");i.find(".js-content").fadeOut(600,function(){i.closest("section").find(".js-video").fadeIn(function(){var e=(0,d.default)(),t=(0,r.default)('<iframe width="100%" height="auto" frameborder="0" webkitallowfullscreen="" src="//embed.vhx.tv/videos/8138?parent_url='+e.protocol()+"://"+e.host()+'" mozallowfullscreen="" id="host_player" class="video" allowfullscreen=""></iframe>');(0,r.default)(this).find(".videowrapper").html(t),t.on("load",function(){n.play()})})}),e.preventDefault()}),(0,r.default)(".js-video_close").on("click",function(e){var t=(0,r.default)(this),i=t.closest("section");i.find(".js-video").fadeOut(600,function(){i.closest("section").find(".js-content").fadeIn()}),n.pause(),e.preventDefault()})})},function(e,t,n){"use strict";var i=n(2),a=function(e){return e&&e.__esModule?e:{default:e}}(i),r=n(5);(0,a.default)("body#events_filmfest2014_brooklyn",function(){(0,r.trackLinks)(".download_booklet","2014 Kickstarter Film Festival Download Booklet")})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(2),r=i(a),o=n(0),s=i(o);(0,r.default)("#events_fourth_birthday",function(){(0,s.default)("#the_right_way").hover(function(){(0,s.default)("body").addClass("reveal")},function(){(0,s.default)("body").removeClass("reveal")}),function(e){(0,s.default)(e).each(function(){(new Image).src=this})}(["https://d3mlfyygrfdi2i.cloudfront.net/5429/rsvp-awful.gif"])})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(22),r=i(a),o=n(2),s=i(o),l=n(20),u=i(l),d=n(5);n(114),(0,s.default)("#faqs_show",function(e){function t(e){i.removeClass("current"),a.find('a[data-name-short="'+e+'"]').addClass("current")}var n=e.find(".sidebar"),i=(0,r.default)(".subcat").find("a"),a=e.find("a.anchor.current").siblings(".subcat-list"),o=e.find(".js-category"),s=!1;n.sticky_bar({parent:n.closest(".main")}),i.on("click",function(){var e=(0,r.default)(this).data("name-short");s=!0,t(e),r.default.scrollTo("#"+e,800,{onAfter:function(){s=!1}})}),o.add(i).on("click",function(){var e=(0,r.default)(this).data("name-full");(0,d.track)("Viewed "+e)}),n.find("a.anchor.current").siblings(".subcat-list").find("li:first-child a").addClass("current"),(0,r.default)(".list-faqs > li").waypoint(function(){s||t((0,r.default)(".list-faqs > li").attr("id"))}),u.default["not-touchable"]&&skrollr.init({forceHeight:!1})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o);n(65),(0,s.default)(".NS-social--follow-friends",function(e){r.default.pollster(window.location.href,function(t){return 200===t.status&&(e.html(t.html),!0)},{delay:1e3})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(20),u=i(l),d=n(8),c=i(d);n(114),(0,s.default)(".NS-friends",function(e){var t=e.data("follows_count"),n=e.data("follows_backings_count"),i=e.find(".js-friend-count"),a=e.find(".js-backed-projects-count");e.on("ksr:follow_user",function(e){t+=1,n+=(0,r.default)(e.target).closest(".js-backer-count").data("backed_projects"),i.text(c.default.format_number(t,{precision:0})),a.text(c.default.format_number(n,{precision:0})),t>0&&(0,r.default)(".js-friends-tout").removeClass("friends-tout--no-friends")}),e.on("ksr:unfollow_user ksr:block_user",function(e){t-=1,n-=(0,r.default)(e.target).closest(".js-backer-count").data("backed_projects"),i.text(c.default.format_number(t,{precision:0})),a.text(c.default.format_number(n,{precision:0})),t<=0&&(0,r.default)(".js-friends-tout").addClass("friends-tout--no-friends")}),e.on("ksr:follow_all",function(e,r,o){t+=parseInt(r,10),n+=parseInt(o,10),i.text(c.default.format_number(t,{precision:0})),a.text(c.default.format_number(n,{precision:0}))}),(0,r.default)(document).on("mobius:loaded_page",function(){(0,r.default)(document).trigger("shifted")}),u.default["not-touchable"]&&skrollr.init({forceHeight:!1})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(1),u=i(l);(0,s.default)(".NS_guest_checkouts__new",function(e){function t(e,t){var n=(0,r.default)(t).data("error");return void 0!==n&&null!==n}function n(e,t){var n=(0,r.default)(t),i=n.data("error");o.hasOwnProperty(i)&&n.addClass("atomic-form-v1-error").closest("div").find(".js-error-message").removeClass("hide h0").addClass("inline-block mb4").text(o[i])}function i(e,t){(0,r.default)(t).removeClass("atomic-form-v1-error").data("error",null).closest("div").find(".js-error-message").addClass("hide h0").removeClass("inline-block mb4")}function a(e,t){t.find(":input").each(i),e.find("input[type=submit]").removeClass("bttn-grey").addClass("bttn-green"),t.find("input[type=submit]").addClass("bttn-grey").removeClass("bttn-green")}var o={email_invalid:u.default.t("guest_checkouts.new.Your_email_is_invalid"),email_presence:u.default.t("guest_checkouts.new.Your_email_must_be_present"),password_presence:u.default.t("guest_checkouts.new.Your_password_must_be_present"),previous_backer:u.default.t("guest_checkouts.new.You_have_already_backed_this_project"),registered_user:u.default.t("guest_checkouts.new.This_email_has_already_been_taken_Try_logging_in")},s=e.find("#user_login_form :input, #user_registration_form :input");s.filter("[type=email]").validates_email({error:"email_invalid"}).validates_presence({error:"email_presence"}),s.filter("[type=password]").validates_presence({error:"password_presence"}),s.on("paste keyup cut change input click",function(e){setTimeout(function(){var n=(0,r.default)(e.target);n.validate();var i=n.closest("form").find(":input").filter(t).length<1;n.closest("form").find("input[type=submit]").attr("disabled",i?null:"disabled")},0)}).on("blur",function(){(0,r.default)(this).each(n)}).on("validate:valid",function(){(0,r.default)(this).each(i)}).on("validate:invalid",function(e,t){(0,r.default)(this).data("error",t)});var l=e.find("#user_registration_form");l.on("submit",function(e){e.preventDefault();var t=(0,r.default)(this);t.validate()?r.default.ajax({url:t.attr("action"),method:t.attr("method"),data:t.serialize(),success:function(e){window.location.href=window.location.pathname.replace(location.pathname,e.redirect_path)},error:function(e){t.find("input[type=email]").trigger("validate:invalid",e.responseJSON.error).each(n)}}):t.find(":input").each(n)}),l.find(":input").on("focus",function(){a(l,d)});var d=e.find("#user_login_form");d.on("submit",function(e){(0,r.default)(this).validate()||(e.preventDefault(),(0,r.default)(this).find(":input").each(n))}),d.find(":input").on("focus",function(){a(d,l)})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(2),r=i(a),o=n(20),s=i(o),l=n(5);n(114),(0,r.default)("#happening_layouts_show",function(e){var t=e.find(".js-load-more");t.loadMore(),t.on("mobius:loading_page",function(){(0,l.track)("Happening See More Click")}),s.default["not-touchable"]&&skrollr.init({forceHeight:!1})})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);n(30),function(){var e=(0,a.default)("body.faqs").find(window.location.hash),t=(0,a.default)("#term.help");e.length&&!e.find(".subcat").length&&e.animate({backgroundColor:"#ffffc9"},{duration:2e3,complete:function(){(0,a.default)(this).animate({backgroundColor:"#ffffff"},{duration:2500})}}),(0,a.default)(".NS_help__search_box").livequery(function(){(0,a.default)(this).livesearch_pretty_input_dropdown({input_can_submit_on_enter:!0,file_extension:"json",ignore_history:!1})}),(0,a.default)(document).on("livesearch:selected","#js-search .results li",function(e,t){t&&t[1]&&(window.location.href=t[1])}),(0,a.default)(document).on("click","body.help form.search .submit",function(){(0,a.default)(this).closest("form").submit()}),(0,a.default)(document).on("livesearch:revealed_results","#term.help",function(){(0,a.default)(this).addClass("expanded"),(0,a.default)(this).parents("#js-search").children(".submit").addClass("expanded")}),(0,a.default)(document).on("livesearch:close_results","#term.help",function(){(0,a.default)(this).removeClass("expanded"),(0,a.default)(this).parents("#js-search").children(".submit").removeClass("expanded")}),(0,a.default)("body.help").click(function(e){var n=(0,a.default)(e.target);n.is("#term")||n.closest("#js-search").length||t.trigger("livesearch:close_results")}),t.on("focus",function(){var e=t.data("livesearch");e&&e.search_xhr&&4===e.search_xhr.readyState&&t.trigger("livesearch:reveal_results")})}()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(2),r=i(a),o=n(20),s=i(o);n(114),(0,r.default)("body#help_images",function(){s.default["not-touchable"]&&skrollr.init({forceHeight:!1})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(1),u=i(l);(0,s.default)("#help_stats",function(){function e(e){e.find(".category_row").slideToggle("fast"),e.find(".default_sort").toggleClass("tablesorter-headerDesc"),e.closest("table").toggleClass("collapsed"),e.find(".arrow").toggleClass("flipped"),e.hasClass("collapsed")?(e.find(".details").text(u.default.t("onloads.views.help.stats.See_Categories")),ga("send","event","Help Stats","Collapsed",e.attr("name"))):(e.find(".details").text(u.default.t("onloads.views.help.stats.Hide_Categories")),ga("send","event","Help Stats","Expanded",e.attr("name")))}function t(e){var t=e.offset(),n=e.closest("table, .explanation").offset(),i=o.width(),a=o.height(),r=parseInt(o.css("padding-right").replace("px",""),10);e.closest(".explanation").length&&(t.left=t.left-50),o.css({position:"absolute",left:t.left-i-(r-1)+90,top:n.top-a-20}),o.find(".nipple").css({left:i+5,top:a+12,position:"absolute"})}function n(){o.fadeIn("fast")}function i(){o.fadeOut("fast")}function a(e,a,s){void 0!==s?(o.find(".content").html('<span class="num date">'+a+"</span>"+s),t((0,r.default)(e)),n()):i()}var o=(0,r.default)(".bubble");(0,r.default)(".toggle_details").click(function(){e((0,r.default)(this).closest("table"))}),(0,r.default)("th").click(function(){var t=(0,r.default)(this).closest("table");t.hasClass("collapsed")&&e(t)}),(0,r.default)("td, th").hover(function(){var e=(0,r.default)(this).closest("table").find("th").eq((0,r.default)(this).index()),t=e.data("header-explanation");a(this,e.html().replace("<br>"," "),t)}),(0,r.default)(".explanation").hover(function(){var e=(0,r.default)(this),t=e.find("[data-header-explanation]"),n=t.data("header-explanation");a(t,e.find("p").text(),n)}),(0,r.default)("table, .explanation").mouseleave(function(){i()})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(7),s=i(o),l=n(1),u=i(l);n(9),(0,r.default)(function(){function e(){(0,r.default)("#account-setup-panel").trigger("project_build:refresh")}(0,r.default)("#account-setup-panel .identity-verification .identity-documents-pending").livequery(function(){r.default.pollster((0,r.default)(this).attr("data-url"),function(t){var n=t.documents[t.documents.length-1],i=t.user_identity_name,a=n.identity;switch(n.state){case"pending":return!1;case"successful":if(!a)return!1;switch(a.state){case"started":return!1;case"passed":return!!i&&((0,s.default)({success:u.default.t("onloads.views.identity_documents.processing_state.Your_identity_documents_have_been_approved")}),e(),!0);case"failed":return(0,s.default)({error:u.default.t("onloads.views.identity_documents.processing_state.Your_Identity_documents_were_not_approved_We_will_email_you")}),e(),!0}break;case"failed":return(0,s.default)({error:u.default.t("onloads.views.identity_documents.processing_state.Your_Identity_documents_were_not_approved_We_will_email_you")}),e(),!0}})})})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);n(36),(0,a.default)(function(){(0,a.default)(document).on("click","#account-setup-panel a.document-form-link",function(e){a.default.open_remote_modal_dialog((0,a.default)(this).attr("href"),{id:"jumio-modal",class_name:"identity-document",do_not_cache:!0,prevent_close:!0}),e.preventDefault()})})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);(0,a.default)(function(){var e=(0,a.default)("#projects_edit");e.length&&(e.on("click",".jumio-modal-close",function(e){e.preventDefault(),(0,a.default)(this).trigger("allow_close.modal_dialog"),(0,a.default)(this).trigger("close.modal_dialog")}),(0,a.default)(document).on("before_close.modal_dialog",".modal_dialog.identity-document",function(){(0,a.default)("#account-setup-panel").trigger("project_build:refresh")}))})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(22),r=i(a),o=n(2),s=i(o);n(106),n(105),n(51),(0,s.default)("#js-identity-verification",function(e){function t(e){c.addClass("flash-error").html("<li>"+e+"</li>").removeClass("hide")}var n=e.find("form"),i=n.data("stripe-upload-url"),a=n.data("public-key"),o=n.data("id-post-url"),s=n.data("provider-key"),l=e.find("#js-identity-document-upload"),u=e.find("#js-processing-state"),d=(0,r.default)("#saving-layer"),c=(0,r.default)("#account_errors"),f=!0;n.fileupload({url:i,sequentialUploads:!0,formData:{key:a,purpose:"identity_document"}}).bind("fileuploadadd",function(e,n){c.addClass("hide"),d.show(),n.files[0].size>8e6?(t("Maximum file is 8MB.  Please try a smaller file."),d.hide(),f=!1):f=!0,1==f&&n.submit().success(function(e){r.default.ajax({type:"POST",url:o,data:{provider_key:s,foreign_key:e.id}}).done(function(){l.hide(),u.show(),d.hide()})})}).bind("fileuploadfail",function(){return t("Sorry!  Your file upload failed.  Please try your upload again.")}),n.on("submit",function(e){e.preventDefault(),(0,r.default)("#js-hidden-file-upload").click()})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a);(0,i(n(2)).default)("body.identity_documents",function(){(0,r.default)(document).on("click","#identity_documents_thanks a.jumio-modal-close-from-iframe",function(e){e.preventDefault(),window.top.postMessage(JSON.stringify({close_jumio_modal:!0}),"*")})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(37),u=n(12);(0,s.default)(".NS_layouts__admin_navigation",function(e){function t(){var e=(0,r.default)("#admin_wrap");0!==d.offsetParent().scrollTop()&&d.offsetParent().animate({scrollTop:0},"slow","easeInOutQuad"),d.trigger("opened"),d.slideDown(function(){s.height(e.height()),window.enabled_features.sticky_nav&&(0,l.rebindScroll)()})}function n(){d.slideUp(function(){window.enabled_features.sticky_nav&&(0,l.rebindScroll)()})}function i(){d.is(":hidden")?t():n()}var a=(0,r.default)("a.open_panel",e),o=(0,r.default)("#admin_panel"),s=(0,r.default)("#admin-nav-prop"),d=(0,r.default)("#admin_panel_wrap");e.on("ksr_admin:nav_open",function(){d.is(":hidden")&&i()}),a.click(function(e){i(),e.preventDefault()}),(0,r.default)(window).on("keydown",function(e){if(e.which===u.SPACE&&!(0,r.default)(e.target).is(":input")&&!(0,r.default)(e.target).is("[contenteditable]"))if(d.is(":visible")){var t,n=o.find("details[open]").add("#running-board-wrap"),a=0;n.each(function(e){window.scrollY>=this.offsetTop-s.height()&&(a=e)}),t=a===n.length-1?n.get(0):n.get(a+1),t&&window.scrollTo(0,t.offsetTop-s.height()),e.preventDefault()}else i()}),"#admin_panel"===window.location.hash&&(r.default.fx.off=!0,i(),r.default.fx.off=!1)})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(1),u=i(l),d=n(5),c=n(319);(0,s.default)(".js-language-banner",function(e){var t=void 0!==u.default.locale?u.default.locale:void 0;e.find(".js-yes").on("click",function(){(0,c.write_cookie)("dismiss_language_banner","1"),(0,d.track)("Language Banner Yes",{lang:t})}),e.find(".js-no").on("click",function(n){n.preventDefault();var i=(0,r.default)(n.currentTarget).closest("form");r.default.ajax({method:i.attr("method"),url:i.attr("action"),data:i.serialize()}),e.addClass("is-hidden"),(0,c.write_cookie)("dismiss_language_banner","1"),(0,d.track)("Language Banner No",{lang:t})}),e.removeClass("is-hidden"),(0,d.track)("Language Banner View",{lang:t})})},function(e,t,n){"use strict";var i=n(22),a=function(e){return e&&e.__esModule?e:{default:e}}(i);n(190),function(){(0,a.default)(function(){(0,a.default)("#learn_more_panel").livequery(function(){function e(){(0,a.default)("#learn_more_dialog_content").removeClass("page0 page1 page2 page3").addClass("page"+i)}function t(e,t){"undefined"!=typeof ga&&ga("send","event","Homepage Events",e,t)}var n=(0,a.default)(this),i=0;n.closest(".modal_dialog").attr("id","learn_more_modal"),n.serialScroll({items:".panel",lazy:!0,lock:!1,step:1,cycle:!1,duration:500}),e(),n.on("click",".next",function(){n.trigger("next"),i+=1,t("Learn more modal next"),e()}),n.on("click",".prev",function(){n.trigger("prev"),i-=1,t("Learn more modal previous"),e()}),n.closest(".modal_dialog").on("modal_dialog:opened",function(){a.default.fx.off=!0,n.trigger("goto",[i]),a.default.fx.off=!1})})})}()},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);(0,a.default)(function(){var e=".ksr_toggle";(0,a.default)(e).length&&((0,a.default)(e+" a").on("click",function(t){var n=(0,a.default)(this);n.closest(e).find("a").removeClass("selected"),n.addClass("selected"),n.closest(e).find(".bg").css({left:n.position().left}),t.preventDefault()}),(0,a.default)(e+" a.selected").click(),(0,a.default)(e+" .bg").addClass("show"))})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(11),u=i(l);(0,s.default)("body.profile",function(){function e(e){e=e||(0,r.default)(".mobius"),e.each(function(){var e=(0,r.default)(this).data("mobius");if(e){e.clear_extra_params();for(var n in t)t.hasOwnProperty(n)&&e.add_param(n,t[n])}})}(0,r.default)("body#users_show").length&&void 0!==history.pushState&&history.pushState(null,null,window.location.pathname);var t=(0,u.default)().query(!0);e(),(0,r.default)(".mobius").livequery(function(){e((0,r.default)(this))})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(211),s=i(o),l=n(5),u=n(3),d=i(u),c=n(129),f=i(c),h=n(11),p=i(h),m=n(19),g=i(m);n(85),n(84),n(83),(0,r.default)(function(){function e(){(0,r.default)("form.term").term_form().on("submit",function(e){e.preventDefault();var t=(0,r.default)(this);h.set_params(t.serialize_without_blank())&&(0,l.track)("Message Inbox Search",{selected_project:r.default.trim((0,r.default)("#content .projects .title b").text()),term:t.find("input#term").val()})})}function t(e){u=(0,r.default)("#preview"),u.html((0,g.default)("message_threads/_show",e,"messages/_show")).data("data",e),o=(0,r.default)(a),c=o.find(".messages_container");var t=(0,r.default)("form.reply"),n=(0,r.default)(a).find(".respond_shortcut");(0,r.default)("#message_threads").removeClass("full_width"),setTimeout(function(){(0,r.default)("#preview_container").fadeIn(function(){if(i(),(0,r.default)("#content ul.threads").height()>u.height()&&(0,r.default)("#preview").simple_sticky_bar(),e.messages.length>1){var t=(0,r.default)(a+" ul.messages li:last-child .message");c.scrollTo(t)}})},250),c.scroll(function(){var e=(0,r.default)(this),i=t.position()||{top:0};e.height()-i.top+220<=0?n.removeClass("hidden"):n.addClass("hidden")}).scroll(),(0,l.track)("Message Thread View")}function n(){var e=(0,r.default)(".dropdown a.selected"),t={};e.each(function(){var e=(0,r.default)(this);d.default.extend(t,(0,p.default)(e.attr("href")).query(!0))}),h.set_params(r.default.param(t),!0)}function i(){if(u.length){var e,t=u.get(0).offsetTop-(0,r.default)(window).scrollTop(),n=(0,r.default)(window).height(),i=o.find(".backing").height();t<0&&(t=0),e=n-i-t,c.height(e),u.css("margin-bottom",(0,r.default)(window).height()-e-60),o.trigger("shifted"),(0,r.default)(a+" ul.messages").height()>=c.height()?(0,r.default)(a+" .respond").removeClass("hidden"):(0,r.default)(a+" .respond").addClass("hidden")}}if((0,r.default)("#message_threads_index, #message_threads_show").length&&window.threads){var a=".NS_message_threads__show",o=(0,r.default)(a),u=(0,r.default)([]),c=(0,r.default)([]);(0,l.track)("Message Inbox View");var h=new Location((0,s.default)(window.threads),(0,r.default)("#content"),"message_threads/_index",{url:(0,r.default)("#content").data("message_threads_url"),mobius_on:"message_threads"});h.on_change(function(e){var t=(0,r.default)("#content ul.threads"),n=!(!this.get("params")||!this.get("params.debug"));d.default.each(e.message_threads||this.get("message_threads"),function(e){n||delete e.debug,e.id&&t.append((0,g.default)("message_threads/_row",e))})}),h.change(),e(),h.on_change_params(e),(0,r.default)(document).on("change","form.params",function(e){e.preventDefault();var t=(0,r.default)(this);h.set_params(t.serialize_without_blank())}),(0,r.default)(document).on("click","li.thread > a",function(e){var t=(0,r.default)(this),n=t.data("api_url");n&&(r.default.ajax({url:(0,f.default)(n),dataType:"json",success:function(e){(0,r.default)("li.thread").removeClass("selected"),t.closest("li.thread").addClass("selected"),History.pushState({selected_thread:e},null,"undefined"!=typeof current_project?e.urls.web.project_message_thread:e.urls.web.message_thread)}}),e.preventDefault())}),(0,r.default)(window).on("statechange",function(){var e=History.getState().data;e&&void 0!==e.selected_thread&&t(e.selected_thread)}),window.selected_thread&&t((0,s.default)(window.selected_thread)),h.get("params.flag")&&(0,r.default)(".message_"+h.get("params.flag")+" .report-spam a").click(),(0,r.default)(document).on("click","#content .dropdown a",function(e){var t=(0,r.default)(this),i=t.closest(".dropdown"),a=i.closest(".ksr-dropdown");i.find("a").removeClass("selected"),t.addClass("selected"),n(),a.hasClass("projects")?(0,l.track)("Message Inbox Project Filter",{selected_project:r.default.trim((0,r.default)(this).text())}):a.hasClass("views")&&(0,l.track)("Message Inbox Views Filter",{selected_project:r.default.trim((0,r.default)("#content .projects .title b").text()),selected_view:r.default.trim((0,r.default)(this).text())}),e.preventDefault()}),(0,r.default)(document).on("message_thread_read",function(e,t){(0,r.default)("#thread_"+t.id).removeClass("unread")}),(0,r.default)(document).on("message_thread_unread",function(e,t){(0,r.default)("#thread_"+t.id).addClass("unread")}),(0,r.default)(document).on("scroll",i),(0,r.default)(document).on("focus",a+" #message_body",function(){c.animate({scrollTop:(0,r.default)("ul.messages").height()+60},1200,"easeOutExpo")}),(0,r.default)(document).add(window).resize(function(){i()}),window.threads=h}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(70),s=i(o);!function(e){e(document).on("click",".message .report-spam a",function(t){t.preventDefault();var n=e(this),i=this,a=n.closest(".message"),r=a.clone(),o=e('<p class="flagged_message"><em class="spam_reported"></em></p>');r.find("span.report-spam").remove(),e.modal_confirm(function(){return a.find(".body").before(o),s.default.get(n.data("url"),"post",o.find("em"),i)},{message:r.html(),confirm_text:"Report message as spam",title:"Report this message to Kickstarter"})}),e(document).on("ksr_json:complete",".message .spam_reported",function(t,n){var i=e(this).closest(".message"),a=i.find(".report-spam");n.modal||(a.hide(),200!==n.status||a.is(".admin")||i.find(".body").hide())})}(r.default)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(2),r=i(a),o=n(0),s=i(o),l=n(20),u=i(l),d=n(1),c=i(d),f=n(5);(0,r.default)(".NS_mobile__universal_app_hero",function(e){function t(){var e=(0,s.default)(".js-ipad-inner"),t=.81836*o.outerWidth(),i=.86634*o.outerHeight(),a=(0,s.default)(".js-ipad-inner-content"),r=(0,s.default)(".js-ipad-inner-content > div");e.css({width:t,height:i,left:(o.outerWidth()-t)/2,top:(o.outerHeight()-i)/2}),a.css({width:t*r.length}),r.css({width:t,height:i}),n()}function n(){var e=(0,s.default)(".js-iphone-container"),t=(0,s.default)(".js-iphone-frame"),n=(0,s.default)(".js-iphone-inner"),i=(0,s.default)(".js-iphone-inner-content"),a=(0,s.default)(".js-iphone-inner-content > div");(0,s.default)(window).width()<(0,s.default)(".js-device-container").width()+.35*t.outerWidth()?e.css({right:0}):e.css({right:-(.35*t.outerWidth())}),t.css({height:.8141*o.outerHeight(),right:-(.35*t.outerWidth())});var r=.86585*t.outerWidth(),l=.7537*t.outerHeight();n.css({width:r,height:l,left:(t.outerWidth()-r)/2,top:(t.outerHeight()-l)/2}),i.css({width:r*a.length}),a.css({width:r,height:l}),(0,s.default)(".js-iphone-video").css({width:r,height:l})}function i(){(0,s.default)(".js-ipad-inner-content").css({marginLeft:-(100*l)+"%"}),(l+=1)>=(0,s.default)(".js-ipad-inner-content > div").length&&(l=0)}function a(){(0,s.default)(".js-iphone-inner-content").css({marginLeft:-(100*d)+"%"}),(d+=1)>=(0,s.default)(".js-iphone-inner-content > div").length&&(d=0)}var r,o=(0,s.default)(".js-ipad-frame"),l=1,d=1,h=(0,s.default)(".js-form-message",e),p=!1;(0,s.default)(document).on("submit","#send_mobile_link_form",function(e){e.preventDefault();var t=(0,s.default)(this);p||(p=!0,s.default.ajax({type:"post",url:"/mobile/send_link",dataType:"json",data:{email_or_phone:t.find("#email_or_phone").val()},success:function(e){e.success?(h.show().removeClass("error").html(e.success),t.remove()):e.error&&h.show().addClass("error").html(e.error)},complete:function(){p=!1}}))}),(0,s.default)(document).on("closed.modal_dialog","#send_mobile_link_dialog",function(t){t.preventDefault(),(0,s.default)("#send_mobile_link_form",e).length||h.html(c.default.t("onloads.views.mobile.universal_app_hero.You_should_already_have_a_link_from_us"))}),u.default["not-ios"]&&(0,s.default)(".js-get-the-app-button").on("click",function(e){(0,f.track)("Mobile Promo Reveal Form"),(0,s.default)(".js-get-the-app-button-container").css({marginTop:-(0,s.default)(this).outerHeight()}),setTimeout(function(){(0,s.default)(".js-get-the-app-form-container").find("input[type=text]").focus()},600),e.preventDefault()}),(0,s.default)(document).resize(function(){t()}),setTimeout(function(){t(),e.removeClass("loading")},500),function(){clearInterval(r),r=setInterval(function(){i(),a()},5e3)}()})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(20),u=i(l),d=n(7),c=i(d),f=n(1),h=i(f),p=n(5);(0,s.default)("body#mobile_index",function(){function e(){var e=(0,r.default)(".js-tablet"),n=(0,r.default)(".js-tablet-item"),i=(0,r.default)(".js-tablet-screenshots"),a=.875*(0,r.default)(".js-device-container").outerWidth();.75*(0,r.default)(window).width()<=640?(0,r.default)(".js-device-container").css({width:"100%",height:Math.round(.65625*(0,r.default)(".js-device-container").width())}):(0,r.default)(".js-device-container").css({width:640,height:Math.round(420)}),e.css({width:a}),i.css({width:"100"*n.length+"%"}),n.css({width:100/n.length+"%"}),t()}function t(){var e=(0,r.default)(".js-phone"),t=(0,r.default)(".js-phone-item"),n=(0,r.default)(".js-phone-screenshots");e.css({height:.78*(0,r.default)(".js-tablet").outerHeight(),width:Math.round(.78*(0,r.default)(".js-tablet").outerHeight()*.5625)}),n.css({width:"100"*t.length+"%"}),t.css({width:100/t.length+"%"})}function n(){(0,r.default)(".js-tablet-screenshots").css({marginLeft:-(100*s)+"%"}),(s+=1)>=(0,r.default)(".js-tablet-item").length&&(s=0)}function i(){(0,r.default)(".js-phone-screenshots").css({marginLeft:-(100*l)+"%"}),(l+=1)>=(0,r.default)(".js-phone-item").length&&(l=0)}var a,o=(0,r.default)(".js-device-container"),s=1,l=1,d=!1;(0,r.default)(document).on("submit",".js-send-mobile-link-form",function(e){e.preventDefault();var t=(0,r.default)(this);""===t.find(".js-email-or-phone").val()?(0,c.default)({error:h.default.t("onloads.views.mobile.index.phone_cant_be_blank")}):d||(d=!0,r.default.ajax({type:"post",url:"/mobile/send_link",dataType:"json",data:{email_or_phone:t.find(".js-email-or-phone").val(),platform:t.find(".js-platform").val()},success:function(e){e.success?(t.closest(".js-get-the-app-form-container").find(".js-form-message").show().removeClass("error"),t.closest(".js-get-the-app-form-container").find(".js-form-text").html(e.success),t.closest(".js-get-the-app-form-container").find(".js-form-retry").hide(),t.hide()):e.error&&(t.closest(".js-get-the-app-form-container").find(".js-form-message").show().addClass("error"),t.closest(".js-get-the-app-form-container").find(".js-form-text").html(e.error))},complete:function(){d=!1}}))}),u.default["not-ios"]&&((0,r.default)(".js-get-the-app-button").on("click",function(e){var t=(0,r.default)(this).closest(".js-get-the-app-container");(0,p.track)("Mobile Promo Reveal Form"),t.find(".js-get-the-app-button-container").css({marginTop:-(0,r.default)(this).outerHeight()}),t.addClass("is-open"),setTimeout(function(){t.find(".js-get-the-app-form-container").find("input[type=text]").focus()},600),e.preventDefault()}),(0,r.default)(".js-email-or-phone").on("focusout",function(){var e=(0,r.default)(this).closest(".js-get-the-app-container");""===(0,r.default)(this).val()&&e.is(".is-open")&&(e.find(".js-get-the-app-button-container").css({marginTop:0}),e.removeClass("is-open"),(0,p.track)("Mobile Promo Close Form"))}),(0,r.default)(".js-form-retry").on("click",function(e){var t=(0,r.default)(this).closest(".js-get-the-app-container");t.find(".js-get-the-app-button-container").css({marginTop:-(0,r.default)(".js-get-the-app-button").outerHeight()}),t.removeClass("is-open"),t.find(".js-form-text").html(""),t.find(".js-form-message").hide(),(0,p.track)("Mobile Promo Form Retry"),e.preventDefault()})),(0,r.default)(document).resize(function(){e()}),setTimeout(function(){e(),o.removeClass("is-loading")},1400),function(){clearInterval(a),a=setInterval(function(){n(),i()},5e3)}()})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(2),r=i(a),o=n(0),s=i(o);(0,r.default)("body#newsletters_index",function(e){function t(e){var n=e.data("frame")||0,i=e.data("timeout");e.data("animating")&&(e.find("img").hide(),e.find("img").eq(n).show(),e.data("frame",n<2?n+1:0),i&&clearTimeout(i),i=setTimeout(function(){t(e)},200),e.data("timeout",i))}e.find("li.newsletter-item").on("mouseenter",function(){(0,s.default)(this).data("animating",!0),t((0,s.default)(this))}).on("mouseleave",function(){(0,s.default)(this).data("animating",!1)})})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);(0,a.default)(function(){(0,a.default)(document).on("submit","ol.admin-notes form",function(){var e,t=(0,a.default)("#admin-menu .note_count"),n=t.text().match(/^(\d+)/);n&&(e=parseInt(n[1],10),t.text(e+1+" notes"))})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(3),r=i(a),o=n(0),s=i(o),l=n(1),u=i(l),d=n(12),c=n(7),f=i(c);(0,s.default)(function(){function e(){(0,s.default)(a+" .verification_error").html("").addClass("hide"),(0,s.default)(".field_with_errors").children().unwrap()}function t(){var e=(0,s.default)(".js-country");e.closest(a).find("#phone_number").attr("placeholder",function(){var t=u.default.countries[e.val().toLowerCase()];return t&&t.phone_example?"Ex: "+t.phone_example:""})}function n(t){var n=(0,s.default)(t.target).closest(a),i=n.find("#phone_number"),o=n.find("input.radio[name=verify]:checked").val(),l=n.find(".js-country").val();if("sms"!==o&&"call"!==o)return!1;s.default.ajax({type:"put",url:"/profile/phone_number/send_verification",dataType:"json",data:{method:o,number:i.val(),country:l},success:function(t){e(),r.default.isUndefined(t.error)?(n.find(".token").val(""),n.find(".highlight strong").html(t.number+".").end().find(".phone_section, .options_section").addClass("hide").end().find(".code_section").removeClass("hide").trigger("shifted").find(".js-sms_show, .js-call_show").addClass("hide").filter(".js-"+o+"_show").removeClass("hide").end().end().end()):(i.wrap('<div class="field_with_errors" />').focus(),n.find(".phone_section .verification_error").html(t.error).removeClass("hide").trigger("shifted"))},beforeSend:function(){n.addClass("loading").trigger("shifted")},complete:function(){n.removeClass("loading").trigger("shifted")}}),t.preventDefault()}function i(t){if("keypress"!==t.type||t.which===d.ENTER){var n=(0,s.default)(this),i=n.closest(a),o=i.find("#token"),l=i.find(".js-country").val();s.default.ajax({type:"post",url:"/profile/phone_number/verify",dataType:"json",data:{token:o.val(),country:l},success:function(t){if(e(),r.default.isUndefined(t.error)){if(!r.default.isUndefined(t.html)){var n=(0,s.default)(t.html),a=i.closest(".NS-phone_numbers__verify"),l=i.closest(".NS-two_factor_authentication_show").find(".js-change_number");a.length?(a.replaceWith(n),n.trigger("phone_number:added")):l.length?(window.location.reload(!0),(0,f.default)({success:"Your two factor authentication phone fallback number has changed"})):i.trigger("phone_number:added")}}else o.wrap('<div class="field_with_errors" />').focus(),i.find(".code_section .verification_error").html(t.error).removeClass("hide").trigger("shifted")},beforeSend:function(){i.addClass("loading")},complete:function(){i.removeClass("loading")}}),t.preventDefault()}}var a=".NS-phone_numbers__edit";(0,s.default)(document).on("click",a+" #resend_token",function(){(0,s.default)(this).closest(a).find(".code_section").addClass("hide").end().find(".phone_section, .options_section").removeClass("hide").trigger("shifted")}),(0,s.default)(document).on("change",a+" .js-country",t),(0,s.default)(a).livequery(t),(0,s.default)(document).on("click","#send_verification",n),(0,s.default)(document).on("keypress",a+" #phone_number",function(e){e.which===d.ENTER&&n(e)}),(0,s.default)(document).on("click",a+" #verify_code",i),(0,s.default)(document).on("keypress",a+" #token",i),(0,s.default)(document).on("click",a+" #change_number",function(e){var t=(0,s.default)(this);s.default.ajax({type:"get",url:"/profile/phone_number/edit",dataType:"json",success:function(e){r.default.isUndefined(e.html)||t.closest(a).replaceWith(e.html)}}),e.preventDefault()})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(2),r=i(a),o=n(0),s=i(o),l=n(5);(0,r.default)(".pledges__checkout_faqs",function(e){e.on("click",".faq-question a",function(e){var t=(0,s.default)(this).closest(".faq");t.toggleClass("expanded"),(0,l.track)("Toggled Pledge Checkout FAQ",{pledge_faq_question:t.find(".question").text()}),e.preventDefault()}),(0,s.default)("body#pledges_edit").length&&setTimeout(function(){(0,s.default)(".faqs li#change_my_pledge_amount").addClass("expanded"),(0,s.default)(".faqs li#change_my_reward_selection").addClass("expanded"),(0,s.default)(".faqs li#cancel_my_pledge").length&&(0,s.default)(".faqs li#cancel_my_pledge").addClass("expanded")},800)})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}n(379);var a=n(2),r=i(a),o=n(0),s=i(o),l=n(3),u=i(l),d=n(20),c=i(d),f=n(204),h=i(f),p=n(14),m=i(p),g=n(12),v=n(183);(0,r.default)(".pledges__checkout_rewards",function(e){function t(e){if(p=0,!e.state.is_selected){_&&l(!1);var t=a(),i=0;t.length>0&&t[0].index<e.index&&(i=t[0].el.$rw.height()-t[0].closed_height);var r=e.el.$rw.offset().top-i-b;(0,s.default)(document).scrollTo(r,100),o(),e.toggle_pledge_form(),e.state.is_truncate_worthy&&(e.toggle_description_truncation(),e.el.$truncate_link.removeClass("hide")),n(e)}}function n(e){var t=e.get_shipping_rule(h.default.get("location_id"));t=t.length?t[0]:null,h.default.set({reward:e.reward_data,shipping_rule:t})}function i(e){h.default.set({amount:e})}function a(){return u.default.filter(w,function(e){return e.state.is_selected===!0})}function r(){(0,s.default)(".submitting-non-ajax").removeClass("submitting-non-ajax"),(0,s.default)(".js-desc-toggle").addClass("hide")}function o(){var e=a();if(e.length){var t=e[0];t.toggle_pledge_form(),t.reset_pledge_form(),t.state.is_truncated&&t.toggle_description_truncation(),t.hide_truncation_link()}}function l(e){(0,s.default)(w).each(function(t,n){if(n.el.$radio.prop("checked"))return n.el.$rw.click(),r(),e&&h.default.set({reward:this.reward_data}),void(_=!1)})}var d=e.find(".js-reward-available"),f=d.length,p=0,_=!1,y=!c.default["not-mobile"],b=y?20:100,w=new Array(f);w=d.map(function(e,t){var n=(0,s.default)(t),i=n.data("reward")||m.default.get("rewards")[0],a=i.id===h.default.get("reward").id,r=a?h.default.get("net_amount"):null;i.closed_height=n.height(),i.index=n.index();var o=new window.RewardController(n,i);return(o.shipping_enabled||a)&&o.update_pledge_total({amount:r}),o}).get(),d.on("change","radio",function(){(0,s.default)(this).click()}),d.on("keydown",function(e){if(e.keyCode===g.ESC){var t=(0,s.default)(e.delegateTarget);t.data("reward").state.is_selected&&(o(),t.find('input[type="radio"]').focus())}}),d.on("keydown",'input[type="radio"]',function(e){e.keyCode===g.ENTER&&(e.preventDefault(),(0,s.default)(this).click())}),d.on("click",function(e){t((0,s.default)(e.currentTarget).data("reward"))}),d.on("keyup",'input[name="backing[amount]"]',function(){i((0,v.stringToMoney)((0,s.default)(this).val()))}),d.on("click",".js-desc-toggle",function(e){e.preventDefault(),(0,s.default)(e.delegateTarget).data("reward").toggle_description_truncation()}),d.on("submit","form",function(e){var t=(0,s.default)(e.delegateTarget).data("reward"),n=t.validate();if(t.state.submit_halted=!n,t.state.submit_halted&&r(),n){var i=t.get_current_pledge_amount();h.default.set("amount",i),_=!0,p=0}return n}),d.on("blur input",'input[name="backing[amount]"]',function(e){var t=(0,s.default)(e.delegateTarget).data("reward"),n=t.get_current_pledge_amount();t.validate(),h.default.set("amount",n)}),d.on("change blur",'select[name="backing[location_id]"]',function(e){var t=(0,s.default)(this),n=(0,s.default)(e.delegateTarget).data("reward"),i=parseInt(t.val(),10),a=n.get_shipping_rule(i);isNaN(i)||h.default.set("location_id",i),h.default.set("shipping_rule",a[0]),n.shipping_enabled&&n.update_pledge_total(),n.validate()}),(0,s.default)(document).on("click",function(){3===(p+=1)&&(o(),p=0)}),(0,s.default)("#confirm-adjust-pledge").on("click",function(){p=0}),void 0!==h.default&&h.default.on_change("shipping_rule",function(){var e=h.default.get("shipping_rule"),t=e?parseFloat(e.cost):0;h.default.set("shipping_amount",t)}),l(!0),(0,s.default)(window).on("pageshow",function(e){y&&e.originalEvent.persisted&&r()})})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);(0,a.default)(function(){(0,a.default)(".NS_pledges__no_ship").livequery(function(){var e=(0,a.default)(this),t=(0,a.default)("form.NS_pledges__form, form.manage_pledge"),n=t.find(".fields_and_submit"),i=t.closest(".modal_dialog"),r=i.data("modal_dialog");e.find("a.override").click(function(e){e.preventDefault(),(0,a.default)(this).trigger("close"),t.data("override",!0),t.removeClass("submitting-non-ajax"),t.find("#backing_location_id").val(null),t.submit()}),e.find("a.btn--green").click(function(t){t.preventDefault(),(0,a.default)(this).trigger("close"),r&&(e.hide(),n.show(),i.find("h1").show())})})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(204),s=i(o),l=n(14),u=i(l),d=n(2),c=i(d),f=n(8),h=i(f),p=n(1),m=i(p);(0,c.default)(".NS_pledges__shipping_select",function(){function e(e,a){n={},i.length||(i=e.clone());var o=i.clone();(0,r.default)(a.shipping_rules).each(function(e,t){n[t.location_id]=t}),o.find('option:not([value=""])').each(t),e.html(o.html()),e.val(s.default.get("location_id")),e.val(e.val()).trigger("change")}function t(){var e,t=(0,r.default)(this),i=t.val(),a=n[i];return a?(e=parseFloat(a.cost),t.text(e>0?m.default.t("onloads.views.pledges.checkout_shipping.location_name_and_shipping_amount",{name:t.data("name"),amount:h.default.money(e,{precision:0,currency:u.default.get("currency")})}):t.data(name))):t.remove(),t}var n,i=(0,r.default)();(0,r.default)(document).on("render_shipping_select",function(t,n){e(n.select,n.reward)})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(3),s=i(o),l=n(1),u=i(l),d=n(204),c=i(d),f=n(14),h=i(f),p=n(15),m=i(p),g=n(8),v=i(g),_=n(2),y=i(_),b=n(5),w=n(23),k=i(w),j=n(10),x=n(183);(0,y.default)("body#pledges_edit",function(e){function t(e){var t=N[e],n=t.labelText;if(t.changed){var i=v.default.money(c.default.get(e),D),r=v.default.money(M[e],D);t.$new.html(i),t.$old.html(r),n+=" "+B,o(e)}else t.$old.html(A()),a(e);$&&t.$label.html(n)}function n(){var e=N.converted_amount;if(N.amount.changed){var t=c.default.get("amount")*h.default.get("static_usd_rate"),n=v.default.money(t,I);e.$new.html(n),e.$container.removeClass("hide")}else e.$container.addClass("hide")}function i(){var e=N.reward;if(e.changed){var t;t=c.default.get("reward").id?v.default.paragraphize(c.default.get("reward").description):P(),e.$description.html(t),e.$display_title.html(c.default.get("reward").title_for_backing_tier),l()}else e.$description.html(A()),d()}function a(e){N[e].$new.addClass("hide"),E=N[e].$icon.attr("class")+" hide",N[e].$icon.attr("class",E)}function o(e){N[e].$new.removeClass("hide"),E=N[e].$icon.attr("class").replace(/hide/g,""),N[e].$icon.attr("class",E)}function l(){N.reward.$description.parent().removeClass("pledge__detail-comparison__old").addClass("pledge__reward-description-wrap")}function d(){N.reward.$description.parent().addClass("pledge__detail-comparison__old").removeClass("pledge__reward-description-wrap")}function f(){N.reward.$truncate_link.parent().addClass("hide")}function p(){N.reward.$truncate_link.parent().removeClass("hide")}function g(){N.reward.$description.addClass("pledge__reward-description--truncated").removeClass("pledge__reward-description--expanded"),N.reward.$truncate_link.text("More"),N.reward.$truncate_link.parent().addClass("more")}function _(){N.reward.$description.removeClass("pledge__reward-description--truncated").addClass("pledge__reward-description--expanded"),N.reward.$truncate_link.text("Less"),N.reward.$truncate_link.parent().removeClass("more")}function y(){S.removeClass("submitting-non-ajax"),(0,r.default)(document).off("submit",C),S.submit()}var w=e.find("#confirm-adjust-pledge"),C=e.selector+" form.manage_pledge";if((0,r.default)(C).length){var S,E="",T=["net_amount","shipping_amount","amount"],A=function(){return u.default.t("onloads.views.pledges.edit.No_change")},P=function(){return u.default.t("onloads.views.pledges.edit.No_thanks_I_just_want_to_help_the_project")},D={type:"truncate_zeros",currency:h.default.get("currency")},I={type:"truncate_zeros",currency:"USD"},M=s.default.clone(c.default.get()),N={reward:{$display_title:w.find("#js-pledge__reward-title"),$description:w.find("#js-pledge__reward-description"),$truncate_link:w.find("#js-modal-desc-toggle span"),changed:!1},net_amount:{$old:w.find("#js-confirm-adjust-pledge-amount__old"),$new:w.find("#js-confirm-adjust-pledge-amount__new"),$icon:w.find("#js-pledge__detail-comparison__icon"),$label:w.find("#js-pledge__detail-label__pledge"),labelText:u.default.t("onloads.views.pledges.edit.Pledge_amount"),changed:!1},shipping_amount:{$old:w.find("#js-confirm-adjust-shipping-amount__old"),$new:w.find("#js-confirm-adjust-shipping-amount__new"),$icon:w.find("#js-shipping__detail-comparison__icon"),$label:w.find("#js-pledge__detail-label__shipping"),labelText:u.default.t("onloads.views.pledges.edit.Shipping"),changed:!1},amount:{$old:w.find("#js-confirm-adjust-total-amount__old"),$new:w.find("#js-confirm-adjust-total-amount__new"),$icon:w.find("#js-total__detail-comparison__icon"),$label:w.find("#js-pledge__detail-label__total"),labelText:u.default.t("onloads.views.pledges.edit.Total"),changed:!1},converted_amount:{$container:w.find("#js-confirm-adjust-total-converted-amount"),$new:w.find("#js-confirm-adjust-total-converted-amount__new"),changed:!1}},O=e.hasClass("convert-currency"),R=k.default.fromNullable(m.default).chain(function(e){return k.default.fromNullable(e.get("location"))}).chain((0,j.maybeProp)("country")).getOrElse(null),L=h.default.get("country")!==R,F=h.default.get("currency_symbol")===u.default.t("number.currency.format.unit"),$=L&&F,B=u.default.t("onloads.views.pledges.edit.in_currency",{currency:h.default.get("currency")});void 0!==c.default&&(c.default.on_change("reward",function(e){N.reward.changed=e.reward.id!==M.reward.id}),c.default.on_change("shipping_amount",function(e){N.shipping_amount.changed=e.shipping_amount!==M.shipping_amount}),c.default.on_change("amount",function(e){N.net_amount.changed=c.default.get("net_amount")!==M.net_amount,N.amount.changed=e.amount!==M.amount})),(0,r.default)(document).on("submit",C,function(e){e.preventDefault(),S=(0,r.default)(e.target),i(),r.default.each(T,function(e,n){t(n)}),O&&n(),w.modal_dialog().find(".js-confirm-yes").focus(),N.reward.$description.prop("scrollHeight")<80?f():p()}),(0,r.default)(".flash-error").livequery(function(){var e,t=(0,x.stringToMoney)((0,r.default)(".text#backing_amount").attr("value"));e=void 0!==(0,r.default)(".radio:checked").attr("alt")?(0,x.stringToMoney)((0,r.default)(".radio:checked").attr("alt")):null,(0,b.track)("Errored Pledge Selection",{pledge_tier_amount:parseInt(e,10),pledge_error_text:(0,r.default)(this).text(),pledge_input_amount:parseInt(t,10)})}),(0,r.default)(document).on("click","body#pledges_edit #js-modal-desc-toggle",function(e){e.preventDefault(),(0,r.default)(e.currentTarget).hasClass("more")?_():g()}),(0,r.default)(document).on("click","body#pledges_edit .js-confirm-yes",function(e){e.preventDefault(),y()}),(0,r.default)(document).on("before_close.modal_dialog",function(){S.removeClass("submitting-non-ajax"),g()})}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(14),s=i(o),l=n(2),u=i(l),d=n(5);(0,u.default)("body#pledges_new",function(){(0,d.track)("Viewed Pledge Checkout Page"),(0,r.default)("a.show_all_rewards").click(function(e){(0,r.default)(this).parents(".checkout_rewards").find("li:hidden").show(),(0,r.default)(this).parents(".checkout_rewards").removeClass("clicked_reward"),(0,r.default)(this).parents(".show_all").hide(),e.preventDefault(),(0,r.default)(document).trigger("shifted"),(0,d.track)("Expanded Rewards")}),(0,r.default)(".flash-error").livequery(function(){var e,t=parseInt((0,r.default)(".text#backing_amount").attr("value").replace(/[^0-9\.]/,""),10);e=void 0!==(0,r.default)(".radio:checked").attr("alt")?parseInt((0,r.default)(".radio:checked").attr("alt").replace(/[^0-9\.]/,""),10):null,(0,d.track)("Errored Pledge Selection",{pledge_tier_amount:parseInt(e,10),pledge_error_text:(0,r.default)(this).text(),pledge_input_amount:parseInt(t,10)})}),location.search.indexOf("edit_from_interstitial=shipping")!==-1?(0,d.track)("Clicked Edit Shipping",{shipping_enabled:(0,r.default)(".radio:checked").parent().data("shipping_enabled"),project_country:s.default.get("country")}):location.search.indexOf("edit_from_interstitial=amount")!==-1&&(0,d.track)("Clicked Edit Amount",{shipping_enabled:(0,r.default)(".radio:checked").parent().data("shipping_enabled"),project_country:s.default.get("country")})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(5);(0,i(n(2)).default)("body#posts_edit",function(e){var t;(0,r.default)(document).on("click",".wym_tools li a",function(){(0,o.track)("Editor Tool Click",{tool_clicked:(0,r.default)(this).attr("title"),context:"post_edit_body"})}),e.find(".notification_toggle a").on("click",function(){e.find(".radio_message").removeClass("visible"),e.find("."+(0,r.default)(this).attr("data-backers")+"_message").addClass("visible")}),e.find(".ksr_toggle a.all_backers").on("click",function(){t=e.find(".select_backers_message input:checkbox:not(:checked)"),t.prop("checked",!0),(0,o.track)("Update Notifications Toggle",{toggled_to:"all_backers"})}),e.find(".ksr_toggle a.select_backers").on("click",function(){t&&t.prop("checked",!1),(0,o.track)("Update Notifications Toggle",{toggled_to:"select_tiers"})}),e.find(".ksr_toggle a.public").on("click",function(){e.find("#post_public").val("1"),(0,o.track)("Update Visibility Toggle",{toggled_to:"anyone"})}),e.find(".ksr_toggle a.private").on("click",function(){e.find("#post_public").val("0"),(0,o.track)("Update Visibility Toggle",{toggled_to:"backers_only"})}),e.find(".email_notifications input.checkbox").on("change",function(){(0,o.track)("Update Tier Notification Change",{toggled_to:(0,r.default)(this).is(":checked")?"checked":"unchecked",selected_reward_id:(0,r.default)(this).data("reward-id"),selected_reward_minimum:(0,r.default)(this).data("reward-minimum")})})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a);(0,i(n(2)).default)(".NS-project_faqs__edit",function(e){function t(){i.find("li.js-faq:not(.deleted) input.position").each(function(e,t){(0,r.default)(t).val(e+1)})}var n=(0,r.default)("#faq-template").children().clone(),i=e.find("ul.faqs");e.on("click","form .js-link-to-new-question",function(){var e=n.clone_form_template();return e.find(".js-delete").val(0),e.removeClass("hidden").appendTo(i),t(),!1}),e.on("click",".js-delete",function(){var e=(0,r.default)(this).closest("li.js-faq").find("input.js-delete").attr("id");(0,r.default)(".js-faq-delete-modal").find(".js-mark-to-delete").data("delete-input",e)}),(0,r.default)(".js-faq-delete-modal").on("click",".js-mark-to-delete",function(e){e.preventDefault();var t=(0,r.default)(this).closest(".js-faq-delete-modal"),n=(0,r.default)(this).data("delete-input"),i=(0,r.default)("#"+n),a=i.closest("li.js-faq");return i.val(1),a.addClass("deleted").fadeOut("slow"),t.trigger("close"),!1}),i.sortable({containment:".NS-project_faqs__edit",placeholder:"project-faq-placeholder",handle:".js-move",axis:"y",tolerance:"pointer",items:"li.js-faq",start:function(e,t){(0,r.default)(".project-faq-placeholder").css("height",t.item.height()+"px"),t.item.addClass("reordering")},stop:function(e,t){t.item.removeClass("reordering")},update:t})})},function(e,t,n){"use strict";var i=n(2),a=function(e){return e&&e.__esModule?e:{default:e}}(i),r=n(5);(0,a.default)(".NS_project_profiles__project_link",function(e){e.find(".js-profile-link").on("click",function(){(0,r.track)("Spotlight Hero Link Click")})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(5);(0,s.default)(".js-project-description-content, #description",function(){function e(e){(0,r.default)(".js-carousel-thumbnail").removeClass("cycle-slide-active"),(0,r.default)(".js-carousel-thumbnail:eq("+e+")").addClass("cycle-slide-active")}function t(e,t){var n=Math.floor(t/s)*s;e.trigger("goto",n)}function n(){return(0,r.default)(".cycle-slide-active .js-slide-media .video-player")}function i(){var e=n(),t=(0,r.default)(".cycle-slide-active .js-slide-media");e.height(t.height()).width(t.width())}function a(){n().trigger("ksr_video:pause")}function o(e){var t=(0,r.default)(".js-prototype-gallery-slide:eq("+e+")").data("slide-id");(0,l.track)("Viewed Prototype Gallery Slide",{slide_id:t})}var s=5,u=(0,r.default)(".js-open-supporting-material");u.click(function(){(0,r.default)("html").css("overflow","hidden")}),window.location.hash.indexOf("prototype-slide-")!==-1&&u.click(),(0,r.default)("#NS_project_supporting_material_showcase__show").livequery(function(){(0,r.default)(document).trigger("ksr_video:pause_all_videos");var n=(0,r.default)(this).closest(".modal_dialog");n.on("before_close.modal_dialog",function(){(0,r.default)(".js-prototype-slideshow").cycle("destroy"),window.location.hash="",(0,r.default)(window).off("resize.projectSupportingMaterials"),(0,r.default)("html").css("overflow","visible")}),(0,r.default)(window).on("hashchange",function(){""===window.location.hash&&n.trigger("close.modal_dialog")});var u=(0,r.default)(".js-prototype-carousel");(0,r.default)(".js-carousel-thumbnail").length>s?(u.serialScroll({items:".js-carousel-thumbnail",lock:!1,step:s,cycle:!1,duration:500}),(0,r.default)(".prototype-carousel__next").click(function(){u.trigger("next")}),(0,r.default)(".prototype-carousel__previous").click(function(){u.trigger("prev")})):(0,r.default)(".js-prototype-carousel-pager").addClass("hide"),u.on("click",".js-carousel-thumbnail",function(){window.location.hash=(0,r.default)(this).data("slide-hash"),(0,l.track)("Selected Prototype Gallery Thumbnail")}),(0,r.default)(".js-prototype-gallery-pager").click(function(){(0,l.track)("Advanced Prototype Gallery Carousel")});var d=(0,r.default)(".js-prototype-slideshow");d.on("cycle-before",function(){a()}),d.on("cycle-after",function(n,a){e(a.nextSlide),t(u,a.nextSlide),o(a.nextSlide),i()}),d.on("cycle-post-initialize",function(n,a){e(a.currSlide),t(u,a.currSlide),o(a.currSlide),i(),(0,r.default)(window).on("resize.projectSupportingMaterials",i)}),d.cycle()})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(5);(0,s.default)(".js-project-faqs-content",function(e){e.on("click",".js-faq-question-toggle",function(e){e.preventDefault();var t=(0,r.default)(this).closest(".js-faq"),n=t.find(".js-faq-answer"),i=(0,r.default)(this).data("faq_id"),a=t.find(".js-arrow-icon");t.hasClass("js-expanded")?(0,l.track)("Clicked Project FAQ Question",{context:"collapsed",which:i}):(0,l.track)("Clicked Project FAQ Question",{context:"expanded",which:i}),t.toggleClass("js-expanded"),a.toggleClass("rotate-90"),n.toggleClass("hide")}),e.on("click",".js-ask-a-question",function(){(0,l.track)("Clicked Ask Question")}),(0,r.default)("body").on("click",".js-submit-question",function(){(0,l.track)("Submitted Ask Question")}),e.on("click",".js-edit-faqs",function(){(0,l.track)("Edited FAQ Question")})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(1),r=i(a),o=n(2),s=i(o),l=n(8),u=i(l),d=n(14),c=i(d);(0,s.default)(".NS_campaigns__stats",function(e){c.default.listen("backers_count",function(t){var n=t.backers_count;e.find(".js-backers_count").text(u.default.format_number(n,{precision:0})),e.find(".js-backers_word").text(1===parseInt(n)?r.default.t("project_stats.backer"):r.default.t("project_stats.backers"))}),c.default.listen("pledged",function(t){e.find(".js-pledged").text(u.default.shorter_money(t.pledged,{currency:c.default.get("currency")}))}),c.default.listen("usd_pledged",function(t){e.find(".js-usd_pledged").text(u.default.shorter_money(t.usd_pledged,{currency:"USD"}))})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a);(0,i(n(2)).default)(".refund_checkouts_form",function(e){e.on("change","select#refund_checkout_amount",function(){var e=(0,r.default)(this),t=e.closest("li").find(".refund_amount_wrapper"),n=t.find("input#refund_checkout_amount"),i=!1;""===e.val()?(t.addClass("partial"),i=!0):t.removeClass("partial"),n.prop("disabled",!n.is(":visible")),i&&n.focus()}).trigger("change"),r.default.inArray((0,r.default)("input#refund_checkout_amount").val(),[(0,r.default)("select#refund_checkout_amount").val(),""])===-1&&e.find("select#refund_checkout_amount").val("").trigger("change")})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a);(0,i(n(2)).default)("#stored_card_form",function(e){var t=e.find(".selected input.card_toggle");t.length||(t=(0,r.default)("input.card_toggle:first")),(0,r.default)(document).on("change click","input.card_toggle",function(e){e.preventDefault();var t=(0,r.default)(this);(0,r.default)("input.card_toggle").not(t).closest(".payment_option").removeClass("selected"),t.closest(".payment_option").addClass("selected"),"click"===e.type&&setTimeout(function(){t.prop("checked",!0)},0)}),t.prop("checked",!0).trigger("change")})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(1),s=i(o);(0,r.default)(function(){var e=(0,r.default)("#saving-layer");(0,r.default)("body").append(e),(0,r.default)(document).on("submit","body.refund_checkouts_new_card #credit_card_form form",function(){e.show(),setTimeout(function(){e.find(".modal_dialog_body").html(s.default.t("onloads.views.refund_checkouts.new_card.Well_this_is_embarrassing_Processing_your_pledge")),e.removeClass("spinning")},12e4)})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(5);(0,s.default)(".NS_site__about_subnav",function(){(0,r.default)(".js-about-link").click(function(){(0,l.track)("About KSR Subnav About Click")}),(0,r.default)(".js-charter-link").click(function(){(0,l.track)("About KSR Subnav Charter Click")}),(0,r.default)(".js-press-link").click(function(){(0,l.track)("About KSR Subnav Press Click")}),(0,r.default)(".js-jobs-link").click(function(){(0,l.track)("About KSR Subnav Jobs Click")}),(0,r.default)(".js-team-link").click(function(){(0,l.track)("About KSR Subnav Team Click")}),(0,r.default)(".js-stats-link").click(function(){(0,l.track)("About KSR Subnav Stats Click")}),(0,r.default)(".js-happening-link").click(function(){(0,l.track)("About KSR Subnav Happening Click")})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(11),u=i(l);(0,s.default)(".NS_site__founding_story",function(e){function t(t,o){i.closest(n).toggleClass("expand-inline__container--show"),(0,r.default)(".js-read-hide").toggle(),o||("the-full-story"===a.fragment()?(history.replaceState({},document.title,a.fragment("").toString()),r.default.scrollTo(e)):history.replaceState({},document.title,a.fragment("the-full-story").toString()))}var n=(0,r.default)(".js-expand-inline__container"),i=(0,r.default)(".js-expand-inline__button"),a=(0,u.default)();i.click(t),"the-full-story"===a.fragment()&&(t(null,!0),r.default.scrollTo(e))})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(129),u=i(l),d=n(19),c=i(d);(0,s.default)(".NS_site__homepage_social",function(e){function t(e,t){"undefined"!=typeof ga&&ga("send","event","Homepage Events",e,t)}function n(e,t){var n=e;return n.urls.web.project=e.urls.web.project+"?ref="+t,n.baseball_card_size="tall-big",(0,r.default)('<div class="project col col-4 mobile-scroll-row-item">'+(0,c.default)("projects/_baseball_card_tall",n,["projects/_baseball_card_tall_spotlight","projects/_baseball_card_tall_standard"])+"</div>")}e.find(".js-slider").each(function(){function i(){s&&r.default.ajax({url:(0,u.default)(s),type:"get",dataType:"json",success:function(e){var t=o.find(".project-list");if(o.find(".js-slider").removeClass("loading"),!e.projects.length)return void o.find(".js-slider").addClass("no-projects");r.default.each(e.projects,function(){var e=this;t.append(n(e,l))})}})}function a(){window.scrollY+1.5*(0,r.default)(window).height()<=o.offset().top||((0,r.default)(window).unbind("scroll",a),t("Social Module","Load"),i(),o.find("p.no-content").hide(),o.find(".js-slider").show())}var o=(0,r.default)(this).closest(e),s=o.data("url"),l=o.data("ref");window.api_oauth_token&&(0,r.default)(window).on("scroll",a)}),(0,r.default)(".js-facebook-login").click(function(){t("Social Module","Facebook connect")})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(21),s=i(o);(0,i(n(2)).default)(".NS_site__homepage_staff_picks",function(){function e(e,t){"undefined"!=typeof ga&&ga("send","event","Homepage Events",e,t)}function t(e,t){n.scrollTo(e,t,{axis:"y"}),n.find(".video-player").trigger("ksr_video:pause"),(0,r.default)("body").is(".touchable")&&(n.find(".project-video").hide(),e.find(".project-video").show()),i.find(".nav li").removeClass("selected").eq(e.index()).addClass("selected"),n.find(".project").removeClass("selected").eq(e.index()).addClass("selected")}var n=(0,r.default)(".js-projects-slider"),i=(0,r.default)(".js-category-nav");i.find(".nav li a.link").click(function(i){e("Category select",(0,r.default)(this).text()),s.default.msie&&s.default.version<8||(t(n.find(".project").eq((0,r.default)(this).parent().index()),350),i.preventDefault())}),s.default.msie&&s.default.version<8||(n.find(".project").show(),t(n.find(".project.potd"),0)),(0,r.default)(".project-image .video-player").click(function(){(0,r.default)(this).parent().siblings(".project-badge").fadeOut("slow")}),(0,r.default)(document).on("resize",function(){s.default.msie&&s.default.version<8||t(n.find(".selected").eq((0,r.default)(this).parent().index()),350)})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(129),u=i(l),d=n(19),c=i(d);(0,s.default)(".js-project-cards-module",function(e){function t(e){return i&&(e.ref=i,e.urls.web.project+="?ref="+i),e.baseball_card_size="tall-big",(0,r.default)('<div class="project col col-4 mobile-scroll-row-item">'+(0,c.default)("projects/_baseball_card_tall",e,["projects/_baseball_card_tall_spotlight","projects/_baseball_card_tall_standard"])+"</div>")}var n=e.data("url"),i=e.data("ref");n&&e.find(".js-slider").each(function(){var i=(0,r.default)(this);i.show(),r.default.ajax({url:(0,u.default)(n),type:"get",success:function(n){var a=i.find(".js-project-list");if(i.find(".js-slider").removeClass("loading"),!n.projects.length)return void e.hide();r.default.each(n.projects,function(){var e=this;a.append(t(e))})},error:function(){e.hide()}})})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(22),r=i(a),o=n(2),s=i(o),l=n(12),u=n(5),d=n(3),c=i(d);(0,s.default)(".NS_site__projects_hero",function(e){function t(){var t=e.find("video").get(0);e.height(Math.round(.75*((0,r.default)(window).height()-(0,r.default)("#header-wrap").height()))),t&&t.play()}function n(e){var t=e.closest(".js-cycle-slide"),n=t.siblings().length+1,i=t.index()+1;return{classname:c.default.uniqueId("js-hero-link-"),data:{title:t.data("title"),position:i+" of "+n,selected_link:e.attr("href")}}}function i(t){var n=e.find(".pager");n.removeClass("light-theme dark-theme"),n.addClass(t.attr("data-theme"))}var a=e.find(".hero-slide").first();(0,r.default)(".js-cycle-slide a").each(function(){var e=n((0,r.default)(this));(0,r.default)(this).addClass(e.classname),(0,u.trackLinks)("."+e.classname,"Clicked Homepage Hero",e.data)}),e.find(".slides").on("cycle-before",function(e,t,n,a){var o=(0,r.default)(a),s=(0,r.default)(n);i(o);var l=o.find("video").get(0),u=s.find("video").get(0);l&&setTimeout(function(){return l.play()},500),u&&setTimeout(function(){return u.pause()},500)});var o=(0,r.default)(".js-video-modal"),s=(0,r.default)(".cycle-slideshow"),d=s.find("video").get(0),f=o.find("video");(0,r.default)(".js-trigger-video-modal").on("click",function(e){e.preventDefault(),f.trigger("ksr_video:play"),o.addClass("visibility-visible o100p"),s.cycle("pause"),d.pause()});var h=function(){f.trigger("ksr_video:pause"),o.removeClass("visibility-visible o100p"),s.cycle("resume"),d.play()};o.on("click",function(){h()}),o.find(".video-player").on("click",function(e){e.stopPropagation()}),(0,r.default)(document).resize(function(){t()}),(0,r.default)(".js-track-video-hero").on("click",function(){(0,u.track)("Clicked Video in Carousel")}),(0,r.default)(document).on("keydown",function(e){e.keyCode===l.LEFT&&s.cycle("prev"),e.keyCode===l.RIGHT&&s.cycle("next"),e.keyCode===l.ESC&&h()}),t(),i(a),e.removeClass("loading")})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(8),u=i(l),d=n(1),c=i(d),f=n(129),h=i(f),p=n(19),m=i(p);(0,s.default)(".NS_site__social_tout",function(e){function t(){r.default.ajax({url:(0,h.default)(e.data("url")),type:"get",success:function(t){var n=t.remotely_followed_count,i=t.remotely_followed.users;n>0&&(e.find(".js-friend-count").html(c.default.t("onloads.views.site.social_tout.Count_of_your_friends_are_on_kickstarter",{count:n,formatted_count:u.default.format_number(n,{precision:0})})),e.find(".js-avatar-pile").html((0,m.default)("activity/card/_backing_avatars",{backers:i})))}})}function n(){window.scrollY+1.5*(0,r.default)(window).height()<=e.offset().top||((0,r.default)(window).unbind("scroll",n),t())}window.api_oauth_token&&(0,r.default)(window).on("scroll",n)})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(5);(0,s.default)("body#site_about",function(){(0,r.default)(".js-charter-link").click(function(){(0,l.trackLinks)("About KSR About Charter Click")}),(0,r.default)(".js-stats-link").click(function(){(0,l.trackLinks)("About KSR About Stats Click")}),(0,r.default)(".js-team-link").click(function(){(0,l.trackLinks)("About KSR About Team Click")}),(0,r.default)(".js-jobs-link").click(function(){(0,l.trackLinks)("About KSR About Jobs Click")}),(0,r.default)(".js-toggle-founding-story").click(function(){(0,l.trackLinks)("About KSR About Founding Story Toggle")}),(0,r.default)(".js-press-link").click(function(){(0,l.trackLinks)("About KSR About Press Click")}),(0,r.default)(".js-start-link").click(function(){(0,l.trackLinks)("Clicked Start Project",{context:"about"})})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a);(0,i(n(2)).default)("body#site_fulfillment_report",function(){(0,r.default)(".js-fulfillment-report-expand").on("click",function(e){var t=(0,r.default)(this).closest(".fulfillment-report-sidebar");t.is(".is-expanded")?(t.find(".js-fulfillment-report__expandable-content").hide(),t.removeClass("is-expanded")):(t.find(".js-fulfillment-report__expandable-content").fadeIn(),t.addClass("is-expanded")),e.preventDefault()}),(0,r.default)(".js-facebook").on("click",function(e){e.preventDefault(),window.open((0,r.default)(this).attr("href"),"popupWindow","width=600,height=600,scrollbars=yes")})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(2),r=i(a),o=n(194),s=n(3),l=i(s);(0,r.default)("body#site_index",function(){(0,o.initProjectCardTracking)([".js-track-project-card"]),window.onscroll=l.default.debounce(o.trackProjectCards,150)})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(5);(0,s.default)("body#jobs_index",function(){(0,r.default)(".js-current-openings").click(function(){r.default.scrollTo((0,r.default)((0,r.default)(this).attr("href")),{duration:3e3}),(0,l.track)("About KSR Jobs Current Openings Click")}),(0,r.default)(".js-charter-link").click(function(){(0,l.track)("About KSR Jobs Charter Click")}),(0,r.default)(".js-team-link").click(function(){(0,l.track)("About KSR Jobs Team Click")}),(0,r.default)(".js-job-section a").click(function(){(0,l.track)("About KSR Jobs Posting Click")})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(5);(0,s.default)("body#site_press",function(){(0,r.default)(".js-stats-button").click(function(){(0,l.track)("About KSR Press Stats Button Click")}),(0,r.default)(".js-faq-list input").click(function(){(0,l.track)("About KSR Press FAQ Item Click")}),(0,r.default)(".js-toggle-founding-story").click(function(){(0,l.track)("About KSR Press Founding Story Toggle")})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(20),u=i(l);n(114),(0,s.default)("body#site_spotlight",function(){u.default["not-touchable"]&&window.setTimeout(function(){skrollr.init({forceHeight:!1})},1e3),(0,r.default)(".js-explore-bar").on("click",function(e){(0,r.default)("html, body").animate({scrollTop:(0,r.default)("#js-spotlight-projects").offset().top},500,"easeOutExpo"),e.preventDefault()})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(5);(0,s.default)(".NS_spotlight_projects__carousel",function(e){function t(){(0,r.default)(window).width()<o?n.cycle("destroy"):n.cycle({autoHeight:0,timeout:0,slides:".project-group",speed:600,fx:"scrollHorz",pager:".dots",next:".next",prev:".previous",log:!1})}var n=e.find(".featured-projects-list"),i=e.find(".next"),a=e.find(".previous"),o=640;n.on("cycle-after cycle-before",function(e,t){1===t.slideNum?(i.addClass("visible"),a.removeClass("visible")):t.slideNum===t.slideCount?(a.addClass("visible"),i.removeClass("visible")):(a.addClass("visible"),i.addClass("visible")),"cycle-after"===e.type&&(0,l.track)("Watch Cycle Featured Projects")}),(0,r.default)(document).resize(function(){t()}),t()})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(5);(0,s.default)("body#spotlight_projects_index",function(e){var t,n;e.hasClass("spotlight_projects_watch")?(t="Watch",n="iTunes"):(t="Play",n="Steam"),(0,r.default)(".share-link").on("click",function(e){var n=(0,r.default)(window).height()/2-250,i=(0,r.default)(window).width()/2-250;window.open((0,r.default)(this).attr("href"),"name","height=500, width=500, top="+n+", left="+i),(0,l.track)(t+" Page Share"),e.preventDefault()}),(0,l.trackLinks)("a.js-service-more",t+" Click "+n+" More Link"),(0,l.trackLinks)("a.track-service",t+" Click "+n+" Link"),(0,l.trackLinks)("a.track-official",t+" Click Official Site Link"),(0,r.default)(".published_projects").on("click","a.more",function(e){var t=(0,r.default)(this),n=(0,r.default)(".published_projects"),i=t.attr("href");t.remove(),r.default.ajax({url:i,method:"GET",data:"format=js",dataType:"html",success:function(e){n.append(e)}}),e.preventDefault()})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(7),u=i(l),d=n(1),c=i(d),f=n(12),h=n(5);(0,s.default)("body#survey_editability_edit",function(e){var t=(0,r.default)("form#disable_survey_editability_form",e),n=(0,r.default)("#send_editable_address_preview",e),i=(0,r.default)("form#enable_survey_editability_form",e),a=t.find("#disable_confirm_text").html(),o=i.find("#enable_confirm_text").html();(0,r.default)("input:text",e).on("keydown",function(e){e.which===f.ENTER&&e.preventDefault()}),n.on("click",function(e){e.preventDefault();var t=(0,r.default)(this);t.data("loading")||(t.data("loading",!0),r.default.post(t.attr("href"),{},function(e,n){"success"===n&&((0,u.default)({success:c.default.t("onloads.views.surveys.editability_form.A_preview_has_been_sent_to_your_email_address")}),t.data("loading",!1))})),(0,h.track)("Survey Editability Deadline Preview Sent")}),t.confirm_submit({title:c.default.t("onloads.views.surveys.editability_form.Just_to_confirm"),copy:a,yes_copy:c.default.t("onloads.views.surveys.editability_form.Send_notifications_now"),no_copy:c.default.t("onloads.views.surveys.editability_form.Cancel")}),i.confirm_submit({title:c.default.t("onloads.views.surveys.editability_form.Just_to_confirm"),copy:o,yes_copy:c.default.t("onloads.views.surveys.editability_form.Allow_changes_now"),no_copy:c.default.t("onloads.views.surveys.editability_form.Cancel")})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(1),u=i(l),d=n(12),c=n(5);(0,s.default)("body#surveys_form",function(e){function t(){var e=_.find("input.keep_box:checked").closest(".js-fieldset:not(.template)");v.empty(),e.each(function(){v.append((0,r.default)(this).find("div.preview").children().clone())})}function n(e,t){var n=Object.keys(w).find(function(t){return e.parent().hasClass(t)});e.find("li .js-prompt-label").text(t||w[n])}function i(e,t,n){e.find(".js-choice-group").each(function(){(0,r.default)(this).find('.js-choice:not(".js-no-response") label').eq(t).text(n||u.default.t("onloads.views.surveys.form.Choice_number",{number:t+1}))})}function a(e){var a=(0,r.default)(e),o=a.val(),s=a.closest(".js-fieldset"),l=s.find(".preview");if(a.is("#survey_intro"))l.find(".survey_intro").text(o);else if(a.is(".question_choice")){var u=a.closest("li.field").index();i(l,u,o)}else n(l,o);g(s),t()}function o(e){e.confirm_submit({copy:u.default.t("onloads.views.surveys.form.You_can_only_send_a_survey_once_per_reward_tier_so_make_sure"),title:u.default.t("onloads.views.surveys.form.Please_confirm"),yes_copy:u.default.t("onloads.views.surveys.form.Send_survey_now"),no_copy:u.default.t("onloads.views.surveys.form.Edit_survey"),on_confirm_submit:function(){e.find("#sending").val("1")}})}function s(){y.find(".question:not(.template)").each(function(e){(0,r.default)(this).find(".position").val(e+1)}),t()}function l(){var e=_.find('.js-add-question[data-template="address"]');y.find(".question.address").is(":visible")?e.addClass("hidden"):e.removeClass("hidden")}function f(e,t){var n=e.find(".preview"),i=n.find('.js-choice-group[data-template="choices"]'),a=n.find('.js-choice-group[data-template="checkboxes"]'),r=n.find(".js-helper-text");"checkboxes"==t&&(i.addClass("hide"),m(e,"hide"),a.removeClass("hide"),r.removeClass("hide")),"choices"==t&&(h(e)&&m(e,"show"),i.removeClass("hide"),a.addClass("hide"),r.addClass("hide"))}function h(e){return e.find('.js-optional input[type="checkbox"]').prop("checked")}function p(e){return e.find('input[type="hidden"].js-template').val()}function m(e,t){var n=e.find(".preview"),i=e.find(".field.js-optional-choice"),a=n.find(".js-choice.js-no-response");"hide"==t&&(a.addClass("hide"),i.addClass("hide")),"show"==t&&(a.removeClass("hide"),i.removeClass("hide"))}function g(e){var t=e.find(".preview"),n=t.find(".js-optional-label");h(e)?("choices"==p(e)&&m(e,"show"),n.removeClass("hide")):(m(e,"hide"),n.addClass("hide"))}var v=(0,r.default)("#preview",e),_=(0,r.default)("form#survey_form",e),y=(0,r.default)("ul.questions",e),b=(0,r.default)("#saving-layer",e),w={other:u.default.t("onloads.views.surveys.form.Text_question"),choices:u.default.t("onloads.views.surveys.form.Multiple_choice_question"),checkboxes:u.default.t("onloads.views.surveys.form.Multiple_choice_question")},k={containment:"document",tolerance:"pointer",items:".question.draggable",stop:s};y.sortable(k),e.on("click",".address.question .keep_box.checkbox",function(){(0,r.default)(this).is(":checked")?(0,r.default)(".editability",e).show():(0,r.default)(".editability",e).hide()}),(0,r.default)(".leftcol .textarea:visible, .leftcol .text:visible",e).each(function(){a(this)}),e.on("keyup cut paste",".leftcol .text, .leftcol .textarea",function(){a(this)}),e.on("click",".js-add-question",function(e){e.preventDefault();var n=(0,r.default)("ul.questions"),i=(0,r.default)(this).data("template"),a=n.children(".template."+i),o=a.clone_form_template();g(o),o.css("display","block"),n.append(o),l(),s(),(0,r.default)(this).parent(".js-options").toggleClass("hide"),o.find("input.checkbox.keep_box").prop("checked",!0),o.find("input.checkbox.editable_ends_at").prop("disabled",!1),t()}),e.on("click",".js-add-question-choice",function(e){e.preventDefault();var n=(0,r.default)(this).closest("li.question"),i=n.find("ol.choice_fields"),a=i.find('li:not(".js-optional-choice")').last(),o=a.clone().insertAfter(a),s=o.find("input.question_choice"),l=n.find(".preview"),d=i.find('li:not(".js-optional-choice")').length,c=u.default.t("onloads.views.surveys.form.Choice_number",{number:d});s.prop({placeholder:c,"aria-label":c}),o.find(".js-delete-choice").show().andSelf().find("input").val("").focus(),l.find(".js-choice-group").each(function(){var e=(0,r.default)(this).find('.js-choice:not(".js-no-response")').last();e.clone().insertAfter(e).val("").find("label").text(o.find("label").text()).andSelf().find("input").val("")}),t()}),e.on("click",".js-delete-question",function(e){e.preventDefault();var t=(0,r.default)(this),n=t.closest(".question"),i=n.find(".keep_box.checkbox");i.is(":checked")?i.prop("checked",!1):i.prop("checked",!0),n.hide(),n.find("input.checkbox.editable_ends_at").prop("disabled",!0),l(),s()}),e.on("click",".js-delete-choice",function(e){e.preventDefault();var n=(0,r.default)(this).closest("li.field"),i=n.closest("li.question"),a=i.find(".preview"),o=n.parent().children();a.find(".js-choice-group").each(function(){(0,r.default)(this).find(".js-choice").eq(n.index()).remove()}),n.remove(),o.filter(":visible").each(function(e){(0,r.default)(this).prop({placeholder:u.default.t("onloads.views.surveys.form.Choice_number",{number:e+1}),"aria-label":u.default.t("onloads.views.surveys.form.Choice_number",{number:e+1})})}),t()}),e.on("click",".js-multiple-responses",function(){var e=(0,r.default)(this).closest("li.question"),n=e.find('input[type="hidden"].js-template'),i=(0,r.default)(this).prop("checked")?"checkboxes":"choices";n.val(i),f(e,i),t()}),e.on("click",'.js-optional input[type="checkbox"]',function(){g((0,r.default)(this).closest("li.question")),t()}),e.on("click","#survey_save",function(n){n.preventDefault(),(0,c.track)("Survey Save"),b.show(),r.default.ajax({url:_.attr("action"),type:_.find('[name="_method"]').val(),data:_.serialize(),complete:function(){b.hide(),t()},success:function(t){var n=(0,r.default)(t.data);(0,r.default)(".modal_dialog").remove(),(0,r.default)("#main_content").replaceWith(n),v=(0,r.default)("#preview",e),_=(0,r.default)("form#survey_form",e),y=(0,r.default)("ul.questions",e),b=(0,r.default)("#saving-layer"),o(_),y.sortable(k)},error:function(){window.location.reload(!0)}})}),e.on("keydown","form#survey_form",function(t){if(t.keyCode===d.ENTER&&!(0,r.default)(t.target).is("textarea"))return t.preventDefault(),(0,r.default)("#survey_save",e).trigger("click"),!1}),o(_)})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(2),s=i(o),l=n(7),u=i(l),d=n(5);(0,s.default)("body#two_factor_authentication_confirm",function(e){e.find(".js-resend_code").on("click",function(e){(0,d.track)("Two-factor Authentication Resend Code"),r.default.ajax({dataType:"json",success:function(e){(0,u.default)(e)}}),e.preventDefault()}),e.find("#remember").on("change",function(){(0,d.track)("Two-factor Authentication Remember Changed")}),e.find(".js-use_fallback").on("click",function(t){var n=(0,r.default)(this);r.default.ajax({url:n.attr("action"),method:n.attr("method"),success:function(t){n.hide(),e.find(".js-resend_phone").removeClass("hide"),(0,u.default)({success:t.success})}}),t.preventDefault()})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(7),s=i(o);(0,r.default)(function(){function e(){(0,r.default)(".NS-phone_numbers__edit").is(":visible")?(0,r.default)(t).find(".js-back:not(.edit-back-button)").hide():(0,r.default)(t).find(".js-back").show()}var t=".NS-two_factor_authentication_new";(0,r.default)(document).on("click",t+" .js-confirmation .js-next",function(e){(0,r.default)(t+" .js-confirmation").addClass("hide"),(0,r.default)(t+" .js-setup").removeClass("hide").trigger("resize"),e.preventDefault()}),(0,r.default)(document).on("click",t+" .js-auth_method .js-next",function(n){var i=(0,r.default)(this),a=i.closest(t),o=a.find(".js-auth_method");a.find(".js-setup").removeClass("hide").trigger("resize"),"phone"===o.find("input:checked").val()?a.find(".js-devices").removeClass("hide"):a.find(".js-qr_code").removeClass("hide"),a.trigger("resize"),e(),o.addClass("hide"),n.preventDefault()}),(0,r.default)(document).on("click",t+" .js-qr_code .js-back",function(n){var i=(0,r.default)(this).closest(t);i.find(".js-qr_code").addClass("hide"),i.find(".js-auth_method").removeClass("hide"),i.find(".js-setup").removeClass("hide").trigger("resize"),e(),n.preventDefault()}),(0,r.default)(document).on("click",t+" .js-devices .js-back",function(n){var i=(0,r.default)(this).closest(t);i.find(".js-devices").addClass("hide"),i.find(".js-auth_method").removeClass("hide"),i.find(".js-setup").removeClass("hide").trigger("resize"),e(),n.preventDefault()}),(0,r.default)(document).on("phone_number:added",t,function(e){(0,r.default)(e.target).closest("form").submit()}),(0,r.default)(document).on("click",t+" a.js-enable_edit_phone",function(n){var i=(0,r.default)(this),a=i.closest(t);a.find(".js-edit_phone").removeClass("hide"),a.find(".js-previous_phone").addClass("hide"),a.find(".js-submit").addClass("hide"),a.find(".opt_out").addClass("hide"),a.trigger("resize"),e(),n.preventDefault()}),(0,r.default)(document).on("submit",t+" form.js-method",function(e){var n=(0,r.default)(this),i=n.closest(t);r.default.ajax({url:n.attr("action"),type:n.attr("method"),data:n.serialize(),dataType:"json",success:function(e){e.success?"app"===e.otp_delivery_method?(i.find(".js-qr_code").addClass("hide"),i.find(".js-otp_fallback").removeClass("hide"),i.find(".edit-back-button").addClass("hide")):window.location.reload(!0):(0,s.default)(e)}}),e.preventDefault()})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(7),s=i(o);(0,r.default)(function(){var e=".NS-two_factor_authentication_show";(0,r.default)(document).on("click",e+" .js-manage_phone_fallback",function(){(0,r.default)(this).closest(e).find(".js-tfa_manage").addClass("hide"),(0,r.default)(e).find(".js-edit_phone").removeClass("hide"),function(){(0,r.default)(".NS-phone_numbers__edit").is(":visible")&&((0,r.default)(e).find(".intro").hide(),(0,r.default)(e).find(".disable").removeClass("hide"),(0,r.default)(e).find(".edit-back-button").html("Nevermind"),(0,r.default)(e).on("click",".edit-back-button",function(){window.location.reload(!0)}))}()}),(0,r.default)(document).on("phone_number:added",e,function(){var t=(0,r.default)(this).closest(e),n=t.find(".js-manage_phone_fallback").data("url");n&&r.default.ajax({url:n,type:"POST",dataType:"json",success:function(e){e.success?((0,s.default)({success:e.success}),window.location.reload(!0,800)):(0,s.default)({error:e.error})}})})})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i),r=n(5);(0,a.default)(function(){function e(){var e=(0,a.default)('div[id="forgot-password"]');e.removeClass("current"),e.siblings("#login, #verify").addClass("current"),(0,a.default)(".modal_dialog #facebook, .modal_dialog #verify").show()}function t(t){var n=(0,a.default)(t).closest(".current");n.is("#verify")||n.removeClass("current"),(0,a.default)("#login-signup #forgot-password").addClass("current"),(0,a.default)(".modal_dialog #facebook, .modal_dialog #verify").hide(),(0,a.default)(document).one("closed.modal_dialog",e)}(0,r.trackLinks)(".js-switch-to-signup","Login to Signup Switch"),(0,a.default)(document).on("click","#retry-forgot-password",function(e){var n=this.href,i=(0,a.default)('div[id="forgot-password"]');t(this),a.default.ajax({url:n,dataType:"html",success:function(e){i=(0,a.default)(e).replaceAll(i),i.addClass("current")}}),e.preventDefault()}),(0,a.default)(document).on("click","#login-signup a.link_to_forgot-password-dialog",function(e){e.preventDefault(),t(this),(0,a.default)(document).on("jGrowl.close_200","form#reset",function(){(0,a.default)(".modal_dialog").trigger("close.modal_dialog")})}),(0,a.default)(document).on("form-submit-notify","#forgot-password #reset",e);var n=(0,a.default)("#user_sessions_new, #users_new");n.length&&((0,a.default)(".current",n).find("input:visible:first").focus(),(0,a.default)("#user_weekly_newsletter").change(function(){(0,a.default)(this).is(":checked")?(0,r.track)("Checked Newsletter"):(0,r.track)("Unchecked Newsletter")}),(0,a.default)(".fieldset-errors").livequery(function(){if(""!==a.default.trim((0,a.default)(".fieldset-errors").text())){var e=(0,a.default)(".fieldset-errors h2").text(),t=(0,a.default)(".fieldset-errors li").text();(0,r.track)("Errored User Signup",{error_type:e,error_text:t})}}),(0,a.default)("input",n).focus(function(){(0,a.default)("#login, #signup").removeClass("current"),(0,a.default)(this).closest("#login, #signup").addClass("current")}))})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(1),s=i(o),l=n(5);(0,r.default)(function(){(0,l.trackLinks)(".js-switch-to-login","Signup to Login Switch"),(0,r.default)(document).on("blur","#new_user input#user_email",function(){(0,r.default)(this).mailcheck({suggested:function(e,t){var n=(0,r.default)('<div class="mailcheck_suggestion f5 grey-dark mb1">'+s.default.t("onloads.views.users.new.Did_you_mean",{suggestion:t.full})+"</div>");e.siblings(".mailcheck_suggestion").remove(),n.find("a").on("click",function(n){n.preventDefault(),e.val(t.full)}),e.before(n),n.slideDown(),"undefined"!=typeof ga&&ga("send","event","Regular Signup Errors","Invalid domain or TLD detected",e.val())},ignoreTLDs:!0})})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a);(0,i(n(2)).default)(".NS_users__profile",function(){(0,r.default)("#profile_tools .js-profile-share-link").click(function(e){(0,r.default)("#profile_tools .share_hover").toggle(),e.preventDefault()}),(0,r.default)("a.twitter").click(function(e){window.open((0,r.default)(this).attr("href"),"twTweet","top=100,left=100,width=600px,height=400px,location=no,menubar=no,toolbar=no,scrollbars=yes"),e.preventDefault()}),(0,r.default)("a.facebook").click(function(e){window.open((0,r.default)(this).attr("href"),"fbShare","top=100,left=100,width=640px,height=350px,location=no,menubar=no,toolbar=no,scrollbars=yes"),e.preventDefault()})})},function(e,t,n){"use strict";var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);(0,a.default)(function(){(0,a.default)(".NS-users-_urls_fields").livequery(function(){var e=(0,a.default)(this),t=(0,a.default)("div.new.template",e);t.on("click","a.add",function(n){n.preventDefault();var i=t.find("input.text"),r=t.clone_form_template(),o=r.find("input.keep_box");if(""===i.val())return void r.remove();r.addClass("field-selected"),r.find("a.add").remove(),r.find("span.value").text(i.val()),i.trigger("dirty"),o.val(0).prop("checked",!0),i.val(""),(0,a.default)("div.urls",e).append(r),r.trigger("shifted")}),e.on("click",".url .remove a",function(e){e.preventDefault();var t=(0,a.default)(this),n=t.closest("div.url");t.siblings(".checkbox").prop("checked",!1),n.trigger("dirty"),n.trigger("shifted"),n.hide()}),t.find("input.text").on("keypress",function(e){13===(e.keyCode||e.which)&&(e.preventDefault(),t.find("a.add").click())})})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a);(0,i(n(2)).default)("#users_edit_account",function(e){var t=!1;e.find("a.change_password_toggle").on("click",function(n){n.preventDefault();var i=(0,r.default)("li.change_password",e);t?(i.fadeOut(),i.find("input").prop("disabled",!0),i.find("input").val(""),t=!1):(i.fadeIn(),i.find("input").prop("disabled",!1),i.first().find("input").focus(),t=!0)})})},function(e,t,n){"use strict";var i=n(2),a=function(e){return e&&e.__esModule?e:{default:e}}(i);n(79),(0,a.default)("body#users_edit_profile",function(e){e.find("input.file").ksr_uploader()})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a);(0,i(n(2)).default)("body#users_watched_projects",function(e){e.on("click","a.js-unstar",function(e){e.preventDefault();var t=(0,r.default)(this);r.default.ajax({url:t.attr("href"),type:"DELETE",dataType:"json",success:function(){var e=t.closest(".project");e.fadeOut(function(){var t=e.closest(".section");t.find(".project:visible").length||t.remove()})}})}),e.on("click","a.potd",function(e){e.preventDefault();var t=(0,r.default)(this);r.default.ajax({url:t.attr("href"),type:"post",dataType:"json",success:function(){window.location.reload()}})})})},function(e,t,n){"use strict";var i=n(2),a=function(e){return e&&e.__esModule?e:{default:e}}(i);n(454),(0,a.default)(".NS_video_tracks__caption_video",function(){var e=new window.VideoTrack(window.videoTrackJSON);new window.VideoTrackView({model:e,el:"#video_track"}).render()})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(14),s=i(o);(0,r.default)(function(){(0,r.default)(document).on("click",".js-unwatch a",function(e){var t=(0,r.default)(this);e.preventDefault(),s.default.set("is_starred",!1),r.default.ajax({url:t.attr("href"),dataType:"json",type:"DELETE"})})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(3),s=i(o),l=n(7),u=i(l),d=n(14),c=i(d);(0,r.default)(function(){(0,r.default)(document).on("click",".js-watch a",function(e){var t=(0,r.default)(this);e.preventDefault(),c.default.set("is_starred",!0),r.default.ajax({url:t.attr("href"),dataType:"json",type:"POST",success:function(e){e.modal&&(r.default.create_login_modal(e.data,"star_project"),c.default.set("is_starred",!1)),e.flash&&(0,u.default)(s.default.map(e.flash,function(e){return e[e.length-1]}))}})})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),r=i(a),o=n(19),s=i(o),l=n(5);(0,r.default)(function(){(0,r.default)(".widget_show").livequery(function(){function e(e,t){var n=(0,s.default)("widgets/_video_embed_code",{width:e,height:t,path:o});a.find("input#width").val(e),a.find("input#height").val(t),i.find("textarea").val(n)}var t=(0,r.default)(this),n=t.find(".size form"),i=t.find(".video .code"),a=n.find(".custom"),o=i.data("path");e(480,Math.ceil(270)),n.find("input.radio").on("change",function(){var t=(0,r.default)("input.radio:checked"),a=t.closest("label");n.find("label").removeClass("selected"),a.addClass("selected"),e(a.data("width"),a.data("height")),i.find("textarea").select(),t.is("#widget-size_size-custom")&&a.find("input.text").val("").eq(0).select()}),a.find("input").on("keyup input cut paste",function(t){var n=(0,r.default)(t.target),i=a.find("input#width").val(),o=a.find("input#height").val();n.is("#width")?o=Math.ceil(i/(16/9)):i=Math.ceil(o*(16/9)),e(i,o)}),t.find("#video_embed").on("click",function(){(0,l.track)("Project Share",{share_type:"video_embed"})}),t.find("#widget_embed").on("click",function(){(0,l.track)("Project Share",{share_type:"widget_embed"})}),t.find("#shortlink_embed").on("click",function(){(0,l.track)("Project Share",{share_type:"shortlink_embed"})})})})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){n(78),e.exports=n(388)}],[1709]);
//# sourceMappingURL=base.175a17c9d2b6e3d8f3eb.js.map