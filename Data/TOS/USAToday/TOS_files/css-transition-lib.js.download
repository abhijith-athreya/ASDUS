!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(n){return window.CSSAnimate=e(n),window.CSSAnimate}):window.CSSAnimate=e(window.jQuery||window.Zepto||window.$)}(function(e){"use strict";function n(e){var n,t=document.createElement("p").style,i=["ms","O","Moz","Webkit"];if(""===t[e])return e;for(e=e.charAt(0).toUpperCase()+e.slice(1),n=i.length;n--;)if(""===t[i[n]+e])return i[n]+e}function t(e){var n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};return n[e]}var i=function(e){this.transitionCssName=e,this.transitionEndName=t(e)};return i.prototype={animate:function(n,t,i,s,r,a){var o=this;return n=e(n),0===n.length?(console.error("tried animating null or empty jquery object"),e.Deferred().reject()):e.when.apply(e,e.map(n,function(n){return o.transitionCssName?o.cssTransition(e(n),t,i,s,r,a):o.jQuery(e(n),t,i,s,r,a)}))},cssTransition:function(n,t,i,s,r,a){var o;return"opacity"===t&&"none"===n.css("display")&&(s=0),this._isDocumentHidden()?(n.css(t,i),e.Deferred().resolve()):(0!==s&&40>s&&(s=40),r=this._normalizeEasing(r,this._easingMap),o=e.camelCase(t),i=this._getCssNumber(o,i),a=a?" "+a+"ms":"",this._transition(n,t,o,i,s,r,a))},jQuery:function(n,t,i,s,r,a){if(this._isDocumentHidden())return n.css(t,i),e.Deferred().resolve();var o={};return r=this._normalizeEasing(r,this._invert(this._easingMap)),o[t]=i,e.Deferred(function(e){var u="proganimate"+t;n.stop(u,!0),0===s?(n.css(t,i),setTimeout(function(){e.resolve()},1)):n.delay(a||0,u).animate(o,{duration:s,easing:r,queue:u,done:function(){n.css(t,i),e.resolve()},fail:function(){e.reject()}}).dequeue(u)}).promise()},stop:function(n,t){var i=e.camelCase(t),s=window.getComputedStyle(n[0]).getPropertyValue(t);return n.stop("proganimate"+t,!0),this._failPreviousTransition(n,i)&&(n[0].style[i]=s),s},_easingMap:{easeInQuad:"ease-in",easeInSine:"ease-in",easeInCubic:"ease-in",easeInQuart:"ease-in",easeInQuint:"ease-in",easeInExpo:"ease-in",easeInCirc:"ease-in",easeInBack:"ease-in",easeInElastic:"ease-in",easeInBounce:"ease-in",easeOutQuad:"ease-out",easeOutSine:"ease-out",easeOutCubic:"ease-out",easeOutQuart:"ease-out",easeOutQuint:"ease-out",easeOutExpo:"ease-out",easeOutCirc:"ease-out",easeOutBack:"ease-out",easeOutElastic:"ease-out",easeOutBounce:"ease-out",easeInOutQuad:"ease-in-out",easeInOutSine:"ease-in-out",easeInOutCubic:"ease-in-out",easeInOutQuart:"ease-in-out",easeInOutQuint:"ease-in-out",easeInOutExpo:"ease-in-out",easeInOutCirc:"ease-in-out",easeInOutBack:"ease-in-out",easeInOutElastic:"ease-in-out",easeInOutBounce:"ease-in-out",swing:"ease-in-out"},_normalizeEasing:function(e,n){var t;return e=e||"linear",t=n[e],t?e=t:-1===e.indexOf("cubic-bezier")||n.swing?this._invert(n)[e]||(e="linear"):e="swing",e},_transition:function(n,t,i,s,r,a,o){var u,c=e.Deferred(),d=this._getCurrentValue(n,i,t);return this._shouldDoTransition(n,i,t,d,s,r)?(u=t+" "+r+"ms "+a+" "+o,c=this._doTransition(n,i,t,s,u)):setTimeout(function(){c.resolve()},1),c.promise()},_doTransition:function(n,t,i,s,r){var a=n[0].style,o=this;return this._getAnimationDeferred(n,t,i,"2d",function(e){o._triggerTransition(e,n,t,i,s,r)}).then(function(){return s.replace(/[ ]+/g,"")===a[t].replace(/[ ]+/g,"")?e.Deferred().resolve():e.Deferred().reject()})},_getAnimationDeferred:function(n,t,i,s,r){var a=this;return e.Deferred(function(e){var o=a._failPreviousTransition(n,t,!0);setTimeout(function(){o&&o.cleanup(),"pending"===e.state()&&r(e)},20),n.data("transition-animate-"+t+"-defer",{promise:e,animationType:s,cleanup:function(){a._removeTransition(n[0].style,i)}})}).always(function(e){n.removeData("transition-animate-"+t+"-defer"),e||a._removeTransition(n[0].style,i)})},_removeTransition:function(n,t){var i=n[this.transitionCssName];i=i||"",i=i.replace(new RegExp(t+" \\w+ [\\w-]+(\\s*\\([^\\)]*\\))?"),""),n[this.transitionCssName]=e.trim(i.replace(/^[ ,]+/,"").replace(/[ ,]+$/,"").replace(/,[ ]+,/,""))},_triggerTransition:function(e,n,t,i,s,r){var a=n[0].style;this._registerTransitionEndListener(n,e,i),this._setupTransition(a,i,r),a[t]=s},_failPreviousTransition:function(e,n,t){var i=e.data("transition-animate-"+n+"-defer");return i?(i.promise.reject(t),i):void 0},_setupTransition:function(e,n,t){var i=e[this.transitionCssName];i?i+=","+t:i=t,e[this.transitionCssName]=i},_getCurrentValue:function(e,n,t){var i=e[0].style,s=i[n]||e.css(t);return"auto"!==s&&s||(i[n]=this._getCssNumber(n,0),s="0"),s},_shouldDoTransition:function(e,n,t,i,s,r){var a=e[0].style;return 0===r?(this._failPreviousTransition(e,n),a[n]=s,!1):this._canAnimate(i,s)?i:(this._failPreviousTransition(e,n),!1)},_canAnimate:function(e,n){return"0"===e.replace(/[ a-z%]+/g,"")&&"0"===n.replace(/[ a-z%]+/g,"")?!1:e.replace(/[ ]/g,"")!==n.replace(/[ ]/g,"")},_getCssNumber:function(n,t){return e.cssNumber[n]||!this._isNumber(t)&&t.match(/[a-z%]/)?t+"":t+"px"},_registerTransitionEndListener:function(n,t,i){if(this.transitionEndName){var s=n[0],r=this.transitionEndName,a=function(e){e.target!==s||i&&e.propertyName!==i||(this.removeEventListener(r,a),t.resolve(),a=null)};return s.addEventListener(r,a),t.promise()}return e.Deferred.reject()},_invert:function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[e[t]]=t);return n},_isNumber:function(e){return"[object Number]"===Object.prototype.toString.call(e)},_isDocumentHidden:function(){return document.hidden||document.webkitHidden||document.mozHidden||document.msHidden||document.oHidden}},new i(n("transition"))});
//# sourceMappingURL=css-transition-lib.js.map