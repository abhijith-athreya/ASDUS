/*!
 * Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW)
 * wet-boew.github.io/wet-boew/License-en.html / wet-boew.github.io/wet-boew/Licence-fr.html
 * v4.0.26-development - 2017-05-31
 *
 */!function(a,b,c){"use strict";var d,e="wb-data-json",f="wb-json",g=["[data-json-after]","[data-json-append]","[data-json-before]","[data-json-prepend]","[data-json-replace]","[data-json-replacewith]","[data-"+f+"]"],h=["after","append","before","prepend","val"],i=/(href|src|data-*|pattern|min|max|step)/,j=/(checked|selected|disabled|required|readonly|multiple)/,k=g.length,l=g.join(","),m="wb-init."+e,n="wb-update."+e,o="wb-contentupdated",p=e+"-queue",q=c.doc,r=function(b){var d,g=c.init(b,e,l);if(g){var h,i,j,k,m,n=["before","replace","replacewith","after","append","prepend"],o=n.length,q=[];for(d=a(g),j=0;j!==o;j+=1)h=n[j],null!==(m=g.getAttribute("data-json-"+h))&&q.push({type:h,url:m});if((i=c.getData(d,f))&&i.url)q.push(i);else if(i&&a.isArray(i))for(o=i.length,j=0;j!==o;j+=1)q.push(i[j]);for(d.data(p,q),o=q.length,j=0;j!==o;j+=1)k=q[j],s(g,k.url,j,k.nocache,k.nocachekey);c.ready(d,e)}},s=function(d,f,g,h,i){var j,k=a(d),l={url:f,refId:g,nocache:h,nocachekey:i},m=b[e];!m||"http"!==f.substr(0,4)&&"//"!==f.substr(0,2)||(j=c.getUrlParts(f),c.pageUrlParts.protocol===j.protocol&&c.pageUrlParts.host===j.host||Modernizr.cors&&!m.forceCorsFallback||"function"==typeof m.corsFallback&&(l.dataType="jsonp",l.jsonp="callback",l=m.corsFallback(l))),k.trigger({type:"json-fetch.wb",fetch:l})},t=function(b){var c,d=b.target,f=a(d),g=f.data(p),k=b.fetch,l=g[k.refId],m=l.type,n=l.prop||l.attr,q=l.showempty,r=k.response,s=typeof r;if(q||"undefined"!==s){if(q&&"undefined"===s&&(r=""),c=jQuery.ajaxSettings.cache,jQuery.ajaxSettings.cache=!0,m)if("replace"===m)f.html(r);else if("replacewith"===m)f.replaceWith(r);else if("addclass"===m)f.addClass(r);else if("removeclass"===m)f.removeClass(r);else if("prop"===m&&n&&j.test(n))f.prop(n,r);else if("attr"===m&&n&&i.test(n))f.attr(n,r);else{if("function"!=typeof f[m]||-1===h.indexOf(m))throw e+" do not support type: "+m;f[m](r)}else m="template",u(d,l,r);jQuery.ajaxSettings.cache=c,f.trigger(o,{"json-type":m,content:r})}},u=function(b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q=c.mapping,r=q.length,s=c.filter||[],t=c.filternot||[],u=c.queryall,w=c.tobeclone,x=b.className,y=b,z=c.source?document.querySelector(c.source):b.querySelector("template");if(a.isArray(d)||(d=[d]),f=d.length,"TABLE"===b.tagName&&q&&-1!==x.indexOf("wb-tables.inited")&&"string"==typeof q[0]){for(p=a(b).dataTable({retrieve:!0}).api(),e=0;e<f;e+=1)if(g=d[e],v(g,s,t)){for(j="/"+e,o=[],h=0;h<r;h+=1)o.push(jsonpointer.get(d,j+q[h]));p.row.add(o)}return void p.draw()}if(z)for(c.appendto&&(y=a(c.appendto).get(0)),e=0;e<f;e+=1)if(g=d[e],v(g,s,t)){if(j="/"+e,k=w?z.content.querySelector(w).cloneNode(!0):z.content.cloneNode(!0),u)for(l=k.querySelectorAll(u),h=0;h<r;h+=1)i=q[h],m=l[h],"string"==typeof i?o=jsonpointer.get(d,j+i):(i.attr&&(m=m.getAttributeNode(i.attr)),n=m.textContent||"",o=jsonpointer.get(d,j+i.value),i.placeholder&&(o=n.replace(i.placeholder,o))),m.textContent=o;else for(h=0;h<r;h+=1)i=q[h],m=i.selector?k.querySelector(i.selector):k,i.attr&&(m=m.getAttributeNode(i.attr)),n=m.textContent||"",o=jsonpointer.get(d,j+i.value),i.placeholder&&(o=n.replace(i.placeholder,o)),m.textContent=o;y.appendChild(k)}},v=function(a,b,c){var d,e,f,g=b.length,h=c.length,i=!1;if(g||h){for(d=0;d<g;d+=1)if(e=b[d],f=w(jsonpointer.get(a,e.path),e.value),e.optional)i=i||f;else{if(!f)return!1;i=!0}if(g&&!i)return!1;for(d=0;d<h;d+=1)if(e=c[d],(f=w(jsonpointer.get(a,e.path),e.value))&&!e.optional||f&&e.optional)return!1}return!0},w=function(b,c){switch(typeof b){case"undefined":return!1;case"boolean":case"string":case"number":return b===c;case"object":if(null===b)return null===c;if(a.isArray(b)){if(a.isArray(c)||b.length!==c.length)return!1;for(var d=0,e=b.length;d<e;d++)if(!w(b[d],c[d]))return!1;return!0}var f=x(c),g=f.length;if(x(b).length!==g)return!1;for(var d=0;d<g;d++)if(!w(b[d],c[d]))return!1;return!0;default:return!1}},x=function(b){if(a.isArray(b)){for(var c=new Array(b.length),d=0;d<c.length;d++)c[d]=""+d;return c}if(Object.keys)return Object.keys(b);var c=[];for(var e in b)b.hasOwnProperty(e)&&c.push(e);return c},y=function(b){var c=b.target,d=a(c),e=d.data(p),f=e.length,g=b["wb-json"];if(!g.url||!g.type&&!g.source)throw"Data JSON update not configured properly";e.push(g),d.data(p,e),s(c,g.url,f)};q.on("json-failed.wb",l,function(){throw"Bad JSON Fetched from url in "+e}),Modernizr.load({test:"content"in document.createElement("template"),nope:"site!deps/template"+c.getMode()+".js"}),q.on("timerpoke.wb "+m+" "+n+" json-fetched.wb",l,function(a){if(a.currentTarget===a.target)switch(a.type){case"timerpoke":case"wb-init":r(a);break;case"wb-update":y(a);break;default:t(a)}return!0});for(d=0;d!==k;d+=1)c.add(g[d])}(jQuery,window,wb),function(a,b,c){"use strict";var d="wb-template",e="template",f="wb-init."+d,g=c.doc,h=function(f){var g=c.init(f,d,e);if(g&&!g.content){var h,i,j=g;for(h=j.childNodes,i=b.createDocumentFragment();h[0];)i.appendChild(h[0]);j.content=i,c.ready(a(g),d)}};g.on("timerpoke.wb "+f,e,h),c.add(e)}(jQuery,document,wb),function(a,b,c){"use strict";var d="wb-fieldflow",e="."+d,f=d+"-form",g=d+"-sub",h=d+"-init",i="."+h,j=d+c.getId(),k="[name^="+j+"]",l=d+"-label",m=d+"-header",n="."+f,o="wb-init"+e,p="draw"+e,q="action"+e,r="submit"+e,s="submited"+e,t="ready"+e,u="clean"+e,v="reset"+e,w="createctrl"+e,x=d+"-register",y=d+"-hdnfld",z=d+"-config",A=d+"-push",B=d+"-submit",C=d+"-action",D=d+"-origin",E="data-"+d+"-source",F=d+"-flagoptvalue",G=c.doc,H={toggle:{stateOn:"visible",stateOff:"hidden"},i18n:{en:{btn:"Continue",defaultsel:"Make your selection...",required:"required"},fr:{btn:"Allez",defaultsel:"Sélectionnez dans la liste...",required:"obligatoire"}},action:"ajax",prop:"url"},I=[["redir","query","ajax","addClass","removeClass","removeClass","append","tblfilter","toggle"].join("."+q+" ")+"."+q,["ajax","toggle","redir","addClass","removeClass"].join("."+r+" ")+"."+r,["tblfilter",d].join("."+p+" ")+"."+p,["select","checkbox","radio"].join("."+w+" ")+"."+w].join(" "),J=function(b){var g,h,i,j,k,l=c.init(b,d,e);if(l){g=a(l),h=l.id,H.i18n[c.lang]&&(H.i18n=H.i18n[c.lang]),i=c.getData(g,d),i&&i.i18n&&(i.i18n=a.extend({},H.i18n,i.i18n)),j=a.extend({},H,i),g.data(z,j),k=j.i18n,String.prototype.startsWith||(String.prototype.startsWith=function(a,b){return b=b||0,this.substr(b,a.length)===a});var m,n,o,q=c.getId();if(j.noForm){for(m="<div class='mrgn-tp-md'><div id='"+q+"'></div></div>",n=l.parentElement;"FORM"!==n.nodeName;)n=n.parentElement;a(n.parentElement).addClass(f)}else m="<div class='wb-frmvld "+f+"'><form><div id='"+q+"'>",m=m+'</div><input type="submit" value="'+k.btn+'" class="btn btn-primary mrgn-bttm-md" /> </form></div>';g.addClass("hidden"),m=a(m),g.after(m),j.noForm||(n=m.find("form"),m.trigger("wb-init.wb-frmvld")),o=a(n),K(o,x,h),j.outputctnrid||(j.outputctnrid=q),j.source||(j.source=l),j.srctype||(j.srctype=d),j.inline=!!j.inline,g.trigger(j.srctype+"."+p,j),j.unhideelm&&a(j.unhideelm).removeClass("hidden"),j.hideelm&&a(j.hideelm).addClass("hidden"),c.ready(g,d),j.ext&&(j.form=o.get(0),g.trigger(j.ext+"."+t,j))}},K=function(a,b,c,d){var e=a.data(b);return e&&!d||(e=[]),e.push(c),a.data(b,e)},L=function(a,b){var c=b.form,d=b.url;d&&c.setAttribute("action",d)},M=function(a,b){var c=b.$selElm,d=b.name,e=b.value;d&&b.provEvt.setAttribute("name",d),e&&c.val(e),c.attr("data-"+F,F)},N=function(b,c){var d,e=c.provEvt;c.live?(c.container||(d=a("<div></div>"),a(e.parentNode).append(d),c.container=d.get(0)),a(b.target).trigger("ajax."+r,c)):(c.preventSubmit=!0,K(a(e),B,c))},O=function(b,d){var e,f,g,h=d.clean;d.container?e=a(d.container):(f=c.getId(),e=a("<div id='"+f+"'></div>"),a(d.form).append(e),h="#"+f),h&&a(d.origin).one(u,function(){a(h).empty()}),d.trigger&&e.attr("data-trigger-wet","true"),g=d.type?d.type:"replace",e.attr("data-ajax-"+g,d.url),e.one("wb-contentupdated",function(b,d){var e=b.currentTarget,f=e.getAttribute("data-trigger-wet");e.removeAttribute("data-ajax-"+d["ajax-type"]),f&&(a(e).find(c.allSelectors).addClass("wb-init").filter(":not(#"+e.id+" .wb-init .wb-init)").trigger("timerpoke.wb"),e.removeAttribute("data-trigger-wet"))}),e.trigger("wb-update.wb-data-ajax")},P=function(b,c){var d=a(c.origin),e=a(b.target).data(z),f=c.toggle;f&&"string"==typeof f&&(f={selector:f}),f=a.extend({},f,e.toggle),d.addClass("wb-toggle"),d.trigger("toggle.wb-toggle",f),f.type="off",d.one(u,function(){d.addClass("wb-toggle"),d.trigger("toggle.wb-toggle",f),d.removeClass("wb-toggle")})},Q=function(b,c){if(b.namespace===q){var e=c.srctype?c.srctype:d;if(c.container=c.provEvt.parentNode.id,!c.source)throw"A source is required to append a field flow control.";a(b.currentTarget).trigger(e+"."+p,c)}},R=function(b,c){if(b.namespace===q){var d,e=c.source,f=a(e).dataTable({retrieve:!0}).api(),g=c.column,h=parseInt(g,10),i=!!c.regex,j=!c.smart||!!c.smart,k=!c.caseinsen||!!c.caseinsen;g=!0===h?h:g,d=f.column(g),d.search(c.value,i,j,k).draw(),a(c.provEvt).one(u,function(){d.search("").draw()})}},S=function(b,c){if(b.namespace===p){var d,e,f,g,h,i,j,k,l,m,n,o,q,r=c.column,s=c.csvextract,t=c.source,u=a(t),v=[],x=c.label,y=c.defaultselectedlabel,z=c.lblselector,A=c.fltrseq?c.fltrseq:[],B=c.limit?c.limit:10;if(!u.hasClass("wb-tables-inited"))return u.one("wb-ready.wb-tables",function(){a(b.target).trigger("tblfilter."+p,c)}),!1;if(e=u.dataTable({retrieve:!0}).api(),e.rows({search:"applied"}).data().length<=B)return!0;if(q=c.renderas?c.renderas:"select",!r&&A.length){if(l=A.shift(),!l.column)throw"Column is undefined in the filter sequence";r=l.column,s=l.csvextract,y=l.defaultselectedlabel,x=l.label,z=l.lblselector}if(d=e.column(r,{search:"applied"}),s)for(f=d.data(),h=0,i=f.length;h!==i;h+=1)v=v.concat(f[h].split(","));else for(f=d.nodes(),h=0,i=f.length;h!==i;h+=1)for(g=a(f[h]).find("li"),j=0,k=g.length;j!==k;j+=1)v.push(a(g[j]).text());v=v.sort().filter(function(a,b,c){return!b||a!==c[b-1]});var C=b.target,D=a(C),E=[],F=c.actions?c.actions:[];for(A.length&&(m=A[0],o={action:"append",srctype:"tblfilter",source:t,renderas:m.renderas?m.renderas:q,fltrseq:A,limit:B}),h=0,i=v.length;h!==i;h+=1)l=v[h],n={label:l,actions:[{action:"tblfilter",source:t,column:r,value:l}]},o&&n.actions.push(o),E.push(n);x||(x=d.header().textContent),c.outputctnrid||(c.outputctnrid=c.provEvt.parentElement.id),D.trigger(q+"."+w,{actions:F,source:u.get(0),outputctnrid:c.outputctnrid,label:x,defaultselectedlabel:y,lblselector:z,items:E,inline:c.inline})}},T=function(b,e){if(b.namespace===p){var f,h,i,j,k,n,o,q=b.target,r=a(q),s=a(e.source),t=s.get(0),u=e.lblselector||"."+l,v=e.itmselector||"ul:first() > li";s.hasClass(g)&&(f=c.getData(s,d),s.data(z,f),e=a.extend({},e,f)),n=e.actions||[],o=e.renderas?e.renderas:"select",t.id||(t.id=c.getId()),i=s.children().first(),i.hasClass(m)?(j=i.html(),v="."+m+" + "+v):(h=i.find(u),j=h.length?h.html():s.find("> p").html(),u=null),k=W(s.find(v)),e.outputctnrid||(e.outputctnrid=e.provEvt.parentElement.id),r.trigger(o+"."+w,{actions:n,source:t,attributes:e.attributes,outputctnrid:e.outputctnrid,label:j,lblselector:u,defaultselectedlabel:e.defaultselectedlabel,required:!e.isoptional,noreqlabel:e.noreqlabel,items:k,inline:e.inline})}},U=function(b,d){var e,f,g,i,k,l,m,n,o,p=d.outputctnrid,q=a("#"+p),r=d.actions,s=d.lblselector,t=!!d.required,u=!d.noreqlabel,v=d.items,w=b.target,y=a(w),B=d.source,C=d.attributes,F=y.data(z).i18n,G=c.getId(),H="<label for='"+G+"'",I="</span>",J=d.defaultselectedlabel?d.defaultselectedlabel:F.defaultsel;if(t&&u&&(H+=" class='required'",I+=" <strong class='required'>("+F.required+")</strong>"),H+="><span class='field-name'>",I+="</label>",s?(e=a("<div>"+d.label+"</div>"),f=e.find(s),f.html(H+f.html()+I)):e=a(H+d.label+I),g="<select id='"+G+"' name='"+j+G+"' class='full-width form-control mrgn-bttm-md "+h+"' data-"+D+"='"+w.id+"' "+E+"='"+B.id+"'",t&&(g+=" required"),C&&"object"==typeof C)for(k in C)C.hasOwnProperty(k)&&(g+=" "+k+"='"+C[k]+"'");for(g+="><option value=''>"+J+"</option>",k=0,l=v.length;k!==l;k+=1)if(o=v[k],o.group){for(g+="<optgroup label='"+o.label+"'>",n=o.group.length,m=0;m!==n;m+=1)g+=X(o.group[m]);g+="</optgroup>"}else g+=X(o);g+="</select>",i=a(g),q.append(e).append(i),r&&r.length>0&&i.data(A,r),K(y,x,G)},V=function(b,d){var e,f,g,i,k,l,m,n,o,p=d.outputctnrid,q=d.actions,r=d.lblselector,s=!!d.required,t=!d.noreqlabel,u=d.items,v=b.target,w=a(v),y=d.source,B=w.data(z).i18n,C=d.attributes,F=c.getId(),G="<legend class='h5 ",H="</span>",I="<fieldset id='"+F+"' data-"+D+"='"+v.id+"' "+E+"='"+y.id+"' class='"+h+" mrgn-bttm-md'",J="",L=d.typeRadCheck,M=d.inline,N=j+F;if(C&&"object"==typeof C)for(k in C)C.hasOwnProperty(k)&&(I+=" "+k+"='"+C[k]+"'");for(e=a(I+"></fieldset>"),s&&t&&(G+=" required",H+=" <strong class='required'>("+B.required+")</strong>"),G+="'>",H+="</legend>",r?(g=a("<div>"+d.label+"</div>"),f=g.find(r),e.append(G+f.html()+H).append(f.nextAll()),i=f.prevAll()):e.append(a(G+d.label+H)),k=0,l=u.length;k!==l;k+=1)if(o=u[k],o.group)for(J+="<p>"+o.label+"</p>",n=o.group.length,m=0;m!==n;m+=1)J+=Z(o.group[m],N,L,M,s);else J+=Z(o,N,L,M,s);e.append(J),a("#"+p).append(e),i&&e.before(i),q&&q.length>0&&e.data(A,q),K(w,x,F)},W=function(b,e){var f,h,i,j,k,m,n,o,p,q,r,s,t,u=b.get(),v=u.length,w=[];for(f=0;f!==v;f+=1){if(h=u[f],j="",k=null,i="",p=h.firstChild,o=h.childNodes,n=o.length,!p)throw"You have a markup error, There may be an empyt <li> elements in your list.";for(t=[],"A"===p.nodeName&&(j=p.getAttribute("href"),i=a(p).html(),n=1,t.push({action:"redir",url:j})),m=1;m!==n;m+=1){if(q=o[m],r=a(q),r.hasClass(g)){s=q.id||c.getId(),q.id=s,j=d+"-"+s,t.push({action:"append",srctype:d,source:"#"+s});break}if("UL"===q.nodeName){if(e)throw"Recursive error, please check your code";k=W(r.children(),!0)}r.hasClass(l)&&(i=r.html())}i||(i=p.nodeValue),h.id||(h.id=c.getId()),w.push({bind:h.id,label:i,actions:t,group:k})}return w},X=function(a){var b=a.label,c="<option value='"+b+"'";return c+=Y(a),c+=">"+b+"</option>"},Y=function(a){var b="",c={};return c.bind=a.bind||"",c.actions=a.actions||[],b+=" data-"+d+"='"+JSON.stringify(c)+"'"},Z=function(a,b,d,e,f){var g=a.label,h=c.getId(),i=e?"-inline":"",j=" for='"+h+"'><input id='"+h+"' type='"+d+"' name='"+b+"' value='"+g+"'";return j=e?"<label class='"+d+i+"'"+j:"<div class='"+d+"'><label"+j,j+=Y(a),f&&(j+=" required='required'"),j+=" /> "+g+"</label>",e||(j+="</div>"),j};G.on(v,e+", ."+g,function(b){var c,d,e,f,g,h,i,j,k=b.target,l=[];if(k===b.currentTarget&&(c=a(k),(d=c.data(z))&&d.reset))for(e=d.reset,a.isArray(e)?l=e:l.push(e),g=l.length,f=0;f!==g;f+=1)h=l[f],(i=h.action)&&(j=h.live,!1!==j&&(h.live=!0),c.trigger(i+"."+q,h))}),G.on("change",n+" "+i,function(e){var f,g,h,i,j,k,l,m,n=e.currentTarget,o=a(n),p=o.nextAll(),r=a("#"+n.getAttribute("data-"+D)),s=a("#"+n.getAttribute(E)),t=r.data(x),w=o.find(":checked",o),y=o.get(0).form;if(i=p.length){for(h=i;0!==h;h-=1)(l=p[h])&&(m=t.indexOf(l.id),m>-1&&t.splice(m,1),a("#"+l.getAttribute(E)).trigger(v).trigger(u),a(l).trigger(u));r.data(x,t),p.remove()}s.trigger(v).trigger(u),o.trigger(u),o.data(B,[]);var F,G,H,I,J,K,L,M,N,O,P=[],Q=[],R=[];for(F=r.data(z),G=s.data(z),G&&F&&(F=a.extend({},F,G)),w.length&&w.val()&&F&&F.default&&(g=F.default,a.isArray(g)?P=g:P.push(g)),J=F.action,K=F.prop,C=F.actionData||{},g=o.data(A),g&&(P=P.concat(g)),h=0,i=w.length;h!==i;h+=1)if(f=w.get(h),(H=c.getData(f,d))&&(N=H.bind,P=P.concat(H.actions),N&&(O=b.getElementById(N),I=O.getAttribute("data-"+d)))){if(I.startsWith("{")||I.startsWith("[")){try{g=JSON.parse(I)}catch(b){a.error("Bad JSON object "+I)}a.isArray(g)||(g=[g])}else g={},g.action=J,g[K]=I,g=a.extend(!0,{},C,g),g=[g];P=P.concat(g)}if(!P.length)return!0;for(h=0,i=P.length;h!==i;h+=1)j=P[h],k=j.target,k&&k!==N?R.push(j):Q.push(j);for(L=F.base||{},M=R.length,h=0,i=Q.length;h!==i;h+=1)j=a.extend({},L,Q[h]),j.origin=s.get(0),j.provEvt=n,j.$selElm=w,j.form=y,M&&(j.actions=R),r.trigger(j.action+"."+q,j);return!0}),G.on("submit",n+" form",function(b){var c,d,e,f,g,h,i,j,l,m,n,o,p,q,t,v=b.currentTarget,w=a(v),A=w.data(x),C=w.data(y)||[],E=A?A.length:0,F=[],G=[],H=!1;for(E&&(e=a("#"+A[E-1]),f=e.data(x),a("#"+f[f.length-1]).trigger(u),e.trigger(u)),d=0;d!==E;d+=1)for(e=a("#"+A[d]),g=e.data(x),m=g.length,l=0;l!==m;l+=1)if(h=a("#"+g[l]),i=a("#"+h.data(D)),G.push(i),q=h.data(B))for(n=0,o=q.length;n!==o;n+=1)p=q[n],p.form=v,e.trigger(p.action+"."+r,p),F.push({$elm:e,data:p}),H=H||p.preventSubmit,t=p.provEvt;if(!H){for(w.find(k).removeAttr("name"),E=C.length,d=0;d!==E;d+=1)a(C[d]).remove();C=[];var I,J,K,L,M,N,O;if((I=w.attr("action"))&&(J=I.indexOf("?"))>0){for(K=I.substring(J+1),O=K.split("&"),E=O.length,d=0;d!==E;d+=1)L=O[d],M=L,L.indexOf("=")>0&&(N=L.split("=",2),M=N[0],L=N[1]),c=a("<input type='hidden' name='"+M+"' value='"+L+"' />"),w.append(c),C.push(c.get(0));w.data(y,C)}}for(E=G.length,d=0;d!==E;d+=1)i=G[d],j=i.data(z),j.action&&F.push({$elm:i,data:j});for(E=F.length,d=0;d!==E;d+=1)p=F[d],p.data.lastProvEvt=t,p.$elm.trigger(p.data.action+"."+s,p.data);if(H)return b.preventDefault(),b.stopPropagation?b.stopImmediatePropagation():b.cancelBubble=!0,!1}),G.on("keyup",n+" select",function(b){if(-1!==navigator.userAgent.indexOf("Gecko"))return!(!b.keyCode||1!==b.keyCode&&9!==b.keyCode&&16!==b.keyCode&&!b.altKey&&!b.ctrlKey)||(a(b.target).trigger("change"),!0)}),G.on(I,e,function(b,c){var e=b.type;switch(b.namespace){case p:switch(e){case d:T(b,c);break;case"tblfilter":S(b,c)}break;case w:switch(e){case"select":U(b,c);break;case"checkbox":c.typeRadCheck="checkbox",V(b,c);break;case"radio":c.typeRadCheck="radio",V(b,c)}break;case q:switch(e){case"append":Q(b,c);break;case"redir":K(a(c.provEvt),B,c,!0);break;case"ajax":N(b,c);break;case"tblfilter":R(b,c);break;case"toggle":c.live?P(b,c):(c.preventSubmit=!0,K(a(c.provEvt),B,c));break;case"addClass":if(!c.source||!c.class)return;c.live?a(c.source).addClass(c.class):(c.preventSubmit=!0,K(a(c.provEvt),B,c));break;case"removeClass":if(!c.source||!c.class)return;c.live?a(c.source).removeClass(c.class):(c.preventSubmit=!0,K(a(c.provEvt),B,c));break;case"query":M(b,c)}break;case r:switch(e){case"redir":L(b,c);break;case"ajax":O(b,c);break;case"toggle":P(b,c);break;case"addClass":a(c.source).addClass(c.class);break;case"removeClass":a(c.source).removeClass(c.class)}}}),G.on("timerpoke.wb "+o,e,function(a){switch(a.type){case"timerpoke":case"wb-init":J(a)}return!0}),c.add(e)}(jQuery,document,wb),function(a,b){"use strict";var c=b.doc,d="json-fetch",e=d+".wb",f={},g={},h=function(b,c,d,e,f,g){if(!window.jsonpointer)return setTimeout(function(){h(b,c,d,e,f,g)},100),!1;g&&(d=jsonpointer.get(d,g)),a("#"+b).trigger({type:"json-fetched.wb",fetch:{response:d,status:e,xhr:f,refId:c}},this)};c.on(e,function(c){var d,e,i,j,k,l,m=c.element||c.target,n=c.fetch,o=n.url.split("#"),p=o[0],q=n.nocache,r=n.nocachekey||b.cacheBustKey||"wbCacheBust",s=o[1]||!1,t=n.refId;if(m===c.target||c.currentTarget===c.target){if(m.id||(m.id=b.getId()),k=m.id,s){if(i=s.split("/"),j=i[0],91===j.charCodeAt(0))return void a("#"+k).trigger({type:"postpone.wb-jsonmanager",postpone:{callerId:k,refId:t,dsname:j,selector:s.substring(j.length)}});n.url=p}q&&(d="nocache"===q?b.guid():b.sessionGUID(),e=r+"="+d,p=-1!==p.indexOf("?")?p+"&"+e:p+"?"+e,n.url=p),Modernizr.load({load:"site!deps/jsonpointer"+b.getMode()+".js",complete:function(){if(!n.nocache){if(l=f[p])return void h(k,t,l,"success",void 0,s);if(g[p])return void g[p].push({callerId:k,refId:t,selector:s});g[p]=[]}a.ajax(n).done(function(a,b,c){var d,e,i,j;if(!n.nocache)try{f[p]=a}catch(a){return}if(h(k,t,a,b,c,s),g[p])for(j=g[p],e=j.length,d=0;d!==e;d+=1)i=j[d],h(i.callerId,i.refId,a,b,c,i.selector)}).fail(function(b,c,d){a("#"+k).trigger({type:"json-failed.wb",fetch:{xhr:b,status:c,error:d,refId:t}},this)},this)}})}})}(jQuery,wb),function(a,b,c){"use strict";function d(a,b,c,d){var e=a.data(b);return e&&!d||(e=[]),e.push(c),a.data(b,e)}var e="wb-jsonmanager",f="[data-"+e+"]",g="wb-init."+e,h="postpone."+e,j="patches."+e,k=[],l={},m={},n={},o=c.doc,p={ops:[{name:"wb-count",fn:function(b,c,d){var e=b[c],f=0;a.isArray(e)&&(f=e.length),jsonpatch.apply(d,[{op:"add",path:this.set,value:f}])}},{name:"wb-first",fn:function(b,c,d){var e=b[c];a.isArray(e)&&0!==e.length&&jsonpatch.apply(d,[{op:"add",path:this.set,value:e[0]}])}},{name:"wb-last",fn:function(b,c,d){var e=b[c];a.isArray(e)&&0!==e.length&&jsonpatch.apply(d,[{op:"add",path:this.set,value:e[e.length-1]}])}},{name:"wb-nbtolocal",fn:function(a,c,d){var e=a[c],f=this.locale||b.wb.lang,g=this.suffix||"",h=this.prefix||"";"string"==typeof e&&(e=parseFloat(e),isNaN(e))||jsonpatch.apply(d,[{op:"replace",path:this.path,value:h+e.toLocaleString(f)+g}])}},{name:"wb-toDateISO",fn:function(a,b,d){this.set?jsonpatch.apply(d,[{op:"add",path:this.set,value:c.date.toDateISO(a[b])}]):jsonpatch.apply(d,[{op:"replace",path:this.path,value:c.date.toDateISO(a[b])}])}},{name:"wb-toDateTimeISO",fn:function(a,b,d){this.set?jsonpatch.apply(d,[{op:"add",path:this.set,value:c.date.toDateISO(a[b],!0)}]):jsonpatch.apply(d,[{op:"replace",path:this.path,value:c.date.toDateISO(a[b],!0)}])}}],opsArray:[{name:"wb-toDateISO",fn:function(a){var b,c=this.set,d=this.path,e=a.length;for(b=0;b!==e;b+=1)c?jsonpatch.apply(a,[{op:"wb-toDateISO",set:"/"+b+c,path:"/"+b+d}]):jsonpatch.apply(a,[{op:"wb-toDateISO",path:"/"+b+d}])}},{name:"wb-toDateTimeISO",fn:function(a){var b,c=this.set,d=this.path,e=a.length;for(b=0;b!==e;b+=1)c?jsonpatch.apply(a,[{op:"wb-toDateTimeISO",set:"/"+b+c,path:"/"+b+d}]):jsonpatch.apply(a,[{op:"wb-toDateTimeISO",path:"/"+b+d}])}}],opsRoot:[],settings:{}},q=function(a,b,c,d){a.after('<p lang="en"><strong>JSON Manager Debug</strong> ('+b+')</p><ul lang="en"><li>JSON: <pre><code>'+JSON.stringify(c)+"</code></pre></li><li>Patches: <pre><code>"+JSON.stringify(d)+"</code></pre>")},r=function(d){var g,h,i,j,l,m,n,o,q,r=c.init(d,e,f),s=b[e]||{};r&&(g=a(r),Modernizr.load({load:"site!deps/json-patch"+c.getMode()+".js",complete:function(){var b=c.getData(g,e);if(!p.registered){if(h=p.ops.concat(s.ops||[]),i=p.opsArray.concat(s.opsArray||[]),j=p.opsRoot.concat(s.opsRoot||[]),h.length)for(l=0,m=h.length;l!==m;l++)n=h[l],jsonpatch.registerOps(n.name,n.fn);if(i.length)for(l=0,m=i.length;l!==m;l++)n=i[l],jsonpatch.registerOpsArray(n.name,n.fn);if(j.length)for(l=0,m=j.length;l!==m;l++)n=j[l],jsonpatch.registerOpsRoot(n.name,n.fn);p.settings=a.extend({},p.settings,s.settings||{}),p.registered=!0}if(!(q=b.name)||q in k)throw"Dataset name must be unique";k.push(q),o=b.url,o?g.trigger({type:"json-fetch.wb",fetch:{url:o,nocache:b.nocache,nocachekey:b.nocachekey}}):c.ready(g,e)}}))};c.ie&&(Number.prototype.toLocaleString=function(a){var b=this.toString().split("."),c=b[0],d=b[1],e=c.length,f=e%3||3,g=c.substr(0,f),h="fr"===a,j=h?" ":",";for(i=f;i<e;i+=3)g=g+j+c.substr(i,3);return d.length&&(g=h?g+","+d:g+"."+d),g}),o.on("json-failed.wb",f,function(b){var d,f=b.target;f===b.currentTarget&&(d=a(f),d.addClass("jsonfail"),c.ready(d,e))}),o.on("json-fetched.wb",f,function(b){var d,f,g,h,i,j,k,o,p,r=b.target,s=a(r),t=b.fetch.response,u=a.isArray(t);if(r===b.currentTarget){d=c.getData(s,e),f="["+d.name+"]",p=d.patches||[],a.isArray(p)||(p=[p]),t=u?a.extend([],t):a.extend({},t),p.length&&(u&&d.wraproot&&(j={},j[d.wraproot]=t,t=j),jsonpatch.apply(t,p)),d.debug&&q(s,"initEvent",t,p);try{l[f]=t}catch(a){return}if(m[f]=d,!d.wait&&n[f])for(k=n[f],i=k.length,h=0;h!==i;h+=1){if(j=k[h],o=j.selector,o.length)try{g=jsonpointer.get(t,o)}catch(a){throw f+" - JSON selector not found: "+o}else g=t;a("#"+j.callerId).trigger({type:"json-fetched.wb",fetch:{response:g,status:"200",refId:j.refId,xhr:null}},this)}c.ready(s,e)}}),o.on(j,f,function(b){var d,f,g,h,i,j,k,m,o,p=b.target,r=a(p),s=b.patches,t=!!b.cumulative;if(p===b.currentTarget&&a.isArray(s)){if(!(d=c.getData(r,e)))return!0;if(f="["+d.name+"]",!n[f])throw"Applying patched on undefined dataset name: "+f;for(g=l[f],t||(g=a.extend(a.isArray(g)?[]:{},g)),jsonpatch.apply(g,s),d.debug&&q(r,"patchesEvent",g,s),i=n[f],k=i.length,j=0;j!==k;j+=1){if(m=i[j],o=m.selector,o.length)try{h=jsonpointer.get(g,o)}catch(a){throw f+" - JSON selector not found: "+o}else h=g;a("#"+m.callerId).trigger({type:"json-fetched.wb",fetch:{response:h,status:"200",refId:m.refId,xhr:null}},this)}}}),o.on(h,function(b){var c,d=b.postpone,e=d.dsname,f=d.callerId,g=d.refId,h=d.selector;if(n[e]||(n[e]=[]),n[e].push({callerId:f,refId:g,selector:h}),l[e]&&!m[e].wait){if(c=l[e],h.length)try{c=jsonpointer.get(c,h)}catch(a){throw e+" - JSON selector not found: "+h}a("#"+f).trigger({type:"json-fetched.wb",fetch:{response:c,status:"200",refId:g,xhr:null}},this)}}),o.on("op.action.wb-fieldflow",".wb-fieldflow",function(b,c){c.op&&(c.preventSubmit=!0,d(a(c.provEvt),"wb-fieldflow-submit",c))}),o.on("op.submit.wb-fieldflow",".wb-fieldflow",function(b,c){var d,e=c.op,f=c.source;if(!e)return!0;a.isArray(e)?d=e:(d=[],d.push(e)),a(f).trigger({type:"patches.wb-jsonmanager",patches:d})}),o.on("timerpoke.wb "+g,f,r),c.add(f)}(jQuery,window,wb),function(a,b,c){"use strict";var d,e="wb-urlmapping",f="[data-"+e+"]",g="wb-init."+e,h="action."+e,i="domapping."+e,j=c.doc,k={op:"move",path:"{base}",from:"{base}/{qval}"},l=function(b){var g,h=c.init(b,e,f);h&&(g=a(h),d||(d=h),c.ready(g,e),c.isReady?g.trigger(i):j.one("wb-ready.wb",function(){g.trigger(i)}))},m=function(b,c,d){var e,f,g,i,j,k,l,m;for(d=a.isArray(d)?a.extend([],d):[d],f=d.length,e=0;e!==f;e+=1)if(g=a.extend({},d[e]),i=g.action){if(j=g.match,m=g.default,l=!1,j&&!m)throw"'match' and 'default' property need to be set";if(m&&c.length&&"string"==typeof j)try{k=new RegExp(j),l=k.exec(c),l=l||m}catch(a){}!g.qval&&l&&(g.qval=l),b.trigger(i+"."+h,g)}return!0},n=function(b,c,d){var e,f,g,h=b.length,i=[];for(d||(d="/"),e=0;e!==h;e+=1)f=b[e],g=a.extend({},f),f.path&&(g.path=o(f.path,c,d)),f.from&&(g.from=o(f.from,c,d)),f.value&&(g.value=o(f.value,c,d)),i.push(g);return i},o=function(a,b,c){return b?c?a.replace(/\{qval\}/,b).replace(/\{base\}/,c):a.replace(/\{qval\}/,b):a};j.on(i,f,function(d){var f,g,h,i,j,k,l=d.target,n=a(l),o=encodeURI(decodeURI(b.location.search.replace(/^\?/,""))).replace(/'/g,"%27").split("&"),p=o.length,q=a.extend({},b[e]||{},c.getData(n,e));for(f=0;f!==p&&(null===(g=o[f])||(h=g.split("="),i=decodeURI(h[0]),j=decodeURI(h[1]),"object"!=typeof(k=q[g]||q[i])||(m(n,j,k),q.multiplequery)));f+=1);}),j.on("patch."+h,f,function(b,c){var d=c.source,e=c.patches,f=c.base||"/",g=!!c.cumulative,h=c.qval;e||(e=[k],g=!0),a.isArray(e)||(e=[e]),e=n(e,h,f),a(d).trigger({type:"patches.wb-jsonmanager",patches:e,cumulative:g})}),j.on("ajax."+h,f,function(b,e){var f,g,h;e.container?f=a(e.container):(g=c.getId(),f=a("<div id='"+g+"'></div>"),a(b.target).after(f)),e.trigger&&b.target===d&&f.attr("data-trigger-wet","true"),h=e.type?e.type:"replace",f.attr("data-ajax-"+h,o(e.url,e.qval)),f.one("wb-contentupdated",function(b,d){var e=b.currentTarget,f=e.getAttribute("data-trigger-wet");e.removeAttribute("data-ajax-"+d["ajax-type"]),f&&(a(e).find(c.allSelectors).addClass("wb-init").filter(":not(#"+e.id+" .wb-init .wb-init)").trigger("timerpoke.wb"),e.removeAttribute("data-trigger-wet"))}),f.trigger("wb-update.wb-data-ajax")}),j.on("addClass."+h,f,function(b,c){c.source&&c.class&&a(c.source).addClass(c.class)}),j.on("removeClass."+h,f,function(b,c){c.source&&c.class&&a(c.source).removeClass(c.class)}),j.on("tblfilter."+h,f,function(b,c){if(b.namespace===h){var d,e=b.target,f=a(c.source||e),g=c.column,i=parseInt(g,10),j=!!c.regex,k=!c.smart||!!c.smart,l=!c.caseinsen||!!c.caseinsen;if("TABLE"!==f.get(0).nodeName)throw"Table filtering can only applied on table";d=f.dataTable({retrieve:!0}).api(),g=!0===i?i:g,d.column(g).search(o(c.value,c.qval),j,k,l).draw()}}),j.on("timerpoke.wb "+g,f,l),c.add(f)}(jQuery,window,wb),function(a,b,c){"use strict";var d=c.doc,e="#wb-srch-q",f=a(e),g=a("#"+f.attr("list")),h=function(b){b.length>0&&a(this).trigger({type:"ajax-fetch.wb",fetch:{url:c.pageUrlParts.protocol+"//clients1.google.com/complete/search?client=partner&sugexp=gsnos%2Cn%3D13&gs_rn=25&gs_ri=partner&partnerid="+window.encodeURIComponent("008724028898028201144:knjjdikrhq0+lang:"+c.lang)+"&types=t&ds=cse&cp=3&gs_id=b&hl="+c.lang+"&q="+encodeURI(b),dataType:"jsonp",jsonp:"callback"}})};d.on("change keyup",e,function(a){var b=a.target,c=a.target.value,d=a.which;switch(a.type){case"change":h.call(b,c);break;case"keyup":a.ctrlKey||a.altKey||a.metaKey||(32===d||d>47&&d<91||d>95&&d<112||d>159&&d<177||d>187&&d<223)&&h.call(b,c)}}),d.on("ajax-fetched.wb",e,function(a){var b,d,e=a.fetch.response[1],h=e.length,i="";for(g.empty(),b=0;b<h;b+=1)d=e[b],i+='<option label="'+d[0]+'" value="'+d[0]+'"></option>';c.ielt10&&(i="<select>"+i+"</select>"),g.append(i),f.trigger("wb-update.wb-datalist")}),window["wb-data-ajax"]={corsFallback:function(a){return a.url=a.url.replace(".html",".htmlp"),a}},a("[data-reveal]").change(function(){var b=a(this),c=b.attr("data-reveal");b.find(c);return b.is(":checked")?a(c).removeClass("hide"):a(c).addClass("hide")})}(jQuery,document,wb);