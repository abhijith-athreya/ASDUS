/*! 204-21-RELEASE 2016-04-11 */
function __trcCopyProps(a,b,c){for(d in a)b[d]=a[d];if(c)for(var d in c)b[d]=c[d];return b}function __trcFromError(a){return TRC.Browser.ie?a.message+"["+a.number+": "+a.name+"]":a.message?a.message+(a.fileName?a.fileName+":"+a.lineNumber:""):a}function __trcClientTimestamp(){var a=new Date,b=a.getHours(),c=a.getMinutes(),d=a.getSeconds()+a.getMilliseconds()/1e3;return(10>b?"0":"")+b+":"+(10>c?"0":"")+c+":"+(10>d?"0":"")+d.toFixed(3)}function __trcLog(a,b){if(TRC.pConsole("page",TRC.modDebug.getType(a),b,b),"0"==a&&TRC.pConsole("errors",TRC.modDebug.getType(a),b,b),!(window.trc_debug_level<a)){var c=Array.prototype.slice.call(arguments,2);c.length>0&&(b+="("+c.join(",")+")"),"object"==typeof window.console&&console.log(b),(document.cookie.search("taboola-debug")>0||a<=window.trc_debug_level)&&TRC.modDebug.logMessageToServer(a,b)}}function __trcError(a,b){__trcLog(0,a+(b?": "+__trcFromError(b):"")),b&&b.stack&&"undefined"!=typeof window.console&&console.trace&&console.trace()}function __trcDebug(){var a=Array.prototype.slice.call(arguments);a.unshift(3),__trcLog.apply(null,a)}function __trcInfo(){var a=Array.prototype.slice.call(arguments);a.unshift(2),__trcLog.apply(null,a)}function __trcWarn(){var a=Array.prototype.slice.call(arguments);a.unshift(1),__trcLog.apply(null,a)}function __trcDOMWalker(a,b){for(b(a),a=a.firstChild;a;)arguments.callee(a,b),a=a.nextSibling}function __trcPurgeEventHandlers(a){try{__trcDOMWalker(a,function(a){for(var b in a)"function"==typeof a[b]&&(a[b]=null)})}catch(b){}}function __trcJSONify(a){function b(a){return'"'+a.replace(/[\s\S]/g,function(a){switch(a){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}return a})+'"'}function c(a){for(var b=[],c=0;c<a.length;c++)b[c]=__trcJSONify(a[c]);return b}function d(a){var c=[];for(var d in a)a.hasOwnProperty(d)&&c.push(b(d)+":"+__trcJSONify(a[d]));return c}return a instanceof Array?"["+c(a).join(",")+"]":a instanceof Object?"{"+d(a).join(",")+"}":null===a?"null":"string"==typeof a?b(a):"undefined"==typeof a?"undefined":a.toString()}function __trcUnJSONify(text){try{return eval("("+String(text)+")")}catch(e){throw new Error("JSON parse error - invalid input!")}}function __trcGetMargins(a){var b=parseInt(document.trcGetCurrentStyle(a,"margin-bottom")),c=parseInt(document.trcGetCurrentStyle(a,"margin-top"));return(isNaN(c)?0:c)+(isNaN(b)?0:b)}function __trcAttachResize(a,b){a.attachEvent?a.attachEvent("onresize",b):("object"!=typeof a.resizeInt&&(a.resizeInt={}),a.resizeInt[b]=TRC.Interval.set(function(a){return"undefined"==typeof a.sourceWidth||"undefined"==typeof a.sourceHeight?(a.sourceWidth=a.clientWidth,void(a.sourceHeight=a.clientHeight)):a.sourceWidth!=a.clientWidth||a.sourceHeight!=a.clientHeight?(delete a.sourceWidth,delete a.clientWidth,void b.apply(a)):void 0},250,a))}function __trcDetachResize(a,b){if(TRC.Browser.ie)a.detachEvent("onresize",b);else{"object"!=typeof a.resizeInt&&(a.resizeInt={});try{a.resizeInt[b]&&TRC.Interval.clear(a.resizeInt[b]),delete a.resizeInt[b]}catch(c){}}}function __trcTrim(a){return a.replace(/^\s+|\s+$/g,"")}function __trcGetElementsByClass(a,b,c){var d,e,f,g=[],h=new RegExp("(^|\\s)"+a+"(\\s|$)");for(c=c||document,b=b||"*",d=c.getElementsByTagName(b),e=d.length,f=0;e>f;f++)h.test(d[f].className)&&g.push(d[f]);return g}function __trcToArray(a,b){var c;for(c in a)a.hasOwnProperty(c)&&b.push([c,a[c]])}Gettext=function(a){return{gettext:function(){return""},strargs:function(){return""}}},Gettext.strargs=function(){return""},function(a,b,c){"use strict";var d,e=b.createElement("div"),f=b.createElement("div"),g=function(a,b){return a.classList?a.classList.add(b):(c.dom.removeClass(a,b),void(a.className+=" "+b))},h=function(a){var b=a.which||a.keyCode;27===b&&o()},i=function(a){var b=a.target||a.srcElement;(b===f||"trc_close_modal"===b.id)&&(c.dom.stopEvent(a),o())},j=function(a){/http(s)?:\/\/www\.taboola\.com/.test(a.origin)&&a.data&&1025===+a.data&&o()},k=function(a){var b=[];return b.push("<a id=trc_close_modal class=trc_modal_close>&times;</a>"),b.push('<iframe class=trc_modal_frame scrolling=no frameborder=0 allowTransparency=true src="'),b.push(a),b.push('"></iframe>'),b.join("")},l=function(a,b){for(;a.tagName.toUpperCase()!==b.toUpperCase();)a=a.parentNode;return a},m=function(b){a.showModalDialog(b.href,"","dialogHeight: 550px; dialogWidth: 660px")},n=function(g){var n=l(g.target||g.srcElement,"A");return g&&c.dom.stopEvent(g),c.Browser.ieUpto(7)?m(n):(d||v(),e.innerHTML=k(n.href),c.dom.removeClass(f,"trc_modal_hidden"),c.dom.removeClass(e,"trc_modal_hidden"),c.dom.on(b,"keyup",h),c.dom.on(b,"click",i),c.dom.on(b.getElementById("trc_close_modal"),"click",i),void c.dom.on(a,"message",j))},o=function(){g(f,"trc_modal_hidden"),g(e,"trc_modal_hidden"),c.dom.off(b,"keyup",h),c.dom.off(b,"click",i),c.dom.off(b.getElementById("trc_close_modal"),"click",i),c.dom.off(a,"message",j)},p=function(a){var c=b.createElement("div");return c.id="tbl-aug-"+Math.floor(2147483648*Math.random()).toString(36),r+="#"+c.id+" ",a&&a.appendChild(c),c},q=function(a){var b=[];return b.push(a+'.trc_modal_dialog { width:660px; height:550px; box-shadow: black 0 0 18px 0;font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; padding:12px;border:2px solid #417cc3;border-radius:10px;position:fixed;z-index:99999;background:#f7f9fc;top:50%;left:50%;margin-top:-250px;margin-left:-330px;-moz-box-sizing: content-box; -webkit-box-sizing: content-box;box-sizing: content-box;}'),b.push(a+".trc_modal_mask {z-index:1040;position:fixed;top:0;left:0;right:0;bottom:0;background:#000;opacity:0.5;filter: alpha(opacity=50);}"),b.push(a+".trc_modal_close {font-family:sans-serif!important;width:30px!important;height:30px!important;font-size: 30px!important;font-weight: bold!important;line-height: 28px!important;color: #fff!important;text-shadow: 0 1px 0 #000;opacity: 0.9;filter: alpha(opacity=90);background: #417cc3;padding: 0;cursor: pointer;border: 0;-webkit-appearance: none;text-align: center;border-radius: 15px!important;position:absolute!important;top: -13px;right: -13px;text-decoration: none!important;z-index: 9;}"),b.push(a+".trc_modal_close:hover {text-decoration: none!important;opacity: 1!important;filter: alpha(opacity=100)!important;}"),b.push(a+".trc_modal_hidden {display:none!important;}"),b.push(a+".trc_modal_frame {width: 100%!important;height: 550px!important;}"),b.join("")},r="",s=p(),t=p(s),u=p(t),v=function(){f.className="trc_modal_mask trc_modal_hidden",e.className="trc_modal_dialog trc_modal_hidden",u.appendChild(f),u.appendChild(e),b.body.appendChild(s),c.dom.injectStyle(q(r)),d=!0};c.aboutUs={open:n,close:o}}(window,document,TRC),function(){function a(){return b||(b=document.getElementsByClassName("trc_rbox_container")[0]),b}TRC.amp=amp={};var b;amp.setAMPmodule=function(a){a.manualVisibilityTrigger=!0,a.disableReadMore=!0,a.slider=!1;var b=this.sendAMPResize,c=a.global["amp-neg-threshold"]||5,d=a.global["amp-pos-threshold"]||100,e=a.global["amp-debounce-time"]||200,f="undefined"!=typeof a.amp_disable_resize?a.amp_disable_resize:a.global["amp-disable-resize"],g="function"==typeof a.global["amp-onrender"]?a.global["amp-onrender"]:function(){return!0},h=TRC.URL.prototype.getParameter;window.trc_debug_level=h.call(document.referrer,"taboola-debug"),TRC.eventDelegator.subscribe("onrender",function(a){var h={negative:c,positive:d};return g(a)?void(f||(window.context.onResizeSuccess(function(a){__trcDebug("resize success - "+a)}),window.context.onResizeDenied(function(a){__trcDebug("resize denied - "+a)}),b(h,TRC.lastVisibleRects?TRC.lastVisibleRects:null),TRC.listen("visible::"+a.placement,TRC.util.debounce(b.trcBind(this,h),e,!1,this)))):!1})},amp.sendAMPResize=function(b,c){var d=c?c.boundingClientRect.height:TRC.dom.getWindowHeight(),e=a().scrollHeight,f=d-e,g=0>f?b.negative:b.positive;__trcDebug("AMP dif = "+f),Math.abs(f)>=g&&window.context.requestResize(void 0,e)}}(),function(a,b){TRC.aspect={before:function(a,b,c,d){var e=a[b];a[b]=function(){return d&&(a[b]=e),c.apply(this,arguments),e.apply(this,arguments)}},after:function(a,b,c,d){var e=a[b];a[b]=function(){d&&(a[b]=e);var f=e.apply(this,arguments);return c.apply(this,arguments),f}}}}(window,document),function(a,b){var c=TRC.PROTOCOL,d=TRC.AutoPlaylistController=function(a,c,d,e,f,g,h){return this.animationDelay=25,this.videoData=f,this.rbox=a,this.publisher=c,this.lightbox=d,this.videoDoneHandler=null,this.autoPlayContainer=e,this.gt=this.rbox.trc.gt,this.listId=g,this.container=b.createElement("div"),this.countdownBox=null,this.counterBox=null,this.countdownTimer=null,this.playlistRecommendation=null,this.playlistItemBox=b.createElement("div"),this.autoplayTime="undefined"==typeof h?5:h,this.active=-1!=this.autoplayTime,this.isRender=!1,this.createPlayer(),this};d.prototype.videoDone=function(a){"none"==this.countdownBox.style.display&&this.checkContainerVisibility()&&("block"==this.container.style.display||this.lightbox||(null==this.playlistItemBox.firstChild&&this.getPlaylistItem("n"),this.showNextUp()),function(a){if(0>=a)return this.log("playlist",{ri:this.reqId,sd:this.sesData,ui:this.userData,pi:this.videoData.id,pt:"video",li:this.listId}),void this.activateNextUp("n");for(var b=""+a--;b.length<2;)b="0"+b;this.counterBox.innerHTML=Gettext.strargs(this.gt.gettext("in %1 Seconds"),[b]),this.countdownTimer=TRC.Timeout.set(arguments.callee.trcBind(this,a),1e3)}.trcBind(this,this.autoplayTime)(),this.autoplayTime>0&&this.showCountdown())},d.prototype.getScreenPosition=function(){return Math.max(b.documentElement.scrollTop,b.body.scrollTop)},d.prototype.autoPlayerLinkTargetSupport=function(c){function d(c){var d;return b.createEvent?(d=b.createEvent("MouseEvent"),d.initMouseEvent("click",!0,!0,a,0,0,0,0,0,!1,!1,!1,!1,0,null)):(d=b.createEventObject(),d.button=1),d}"undefined"!=typeof c?this.playlistRecommendation.link.onclick(c,"playlist"):this.playlistRecommendation.link.onclick(d(this.playlistRecommendation),"playlist")},d.prototype.activateNextUp=function(a,b){this.countdownTimer&&(TRC.Timeout.clear(this.countdownTimer),this.countdownTimer=null),TRC.pageManager.storePublisherValue(this.publisher,"auto-play-intent",(new Date).getTime()+":"+this.playlistRecommendation.id+":"+a),this.videoData=this.playlistRecommendation,this.lightbox?(this.createPlayer(),this.getPlaylistItem(a)):this.autoPlayerLinkTargetSupport(b),"none"!=this.countdownBox.style.display&&this.hideCountdown(),this.hideNextUp(),this.playlistItemBox.removeChild(this.playlistItemBox.firstChild)},d.prototype.showNextUp=function(){this.container.style.display="block",this.container.style.opacity=1,this.log("visible",{ri:this.reqId,sd:this.sesData,ui:this.userData,pi:this.videoData.id,pt:"video",li:this.listId}),TRC.Browser.ie&&(this.container.style.marginLeft=(this.container.parentNode.offsetWidth-this.container.clientWidth)/2+"px")},d.prototype.hideNextUp=function(){this.container.style.display="none",this.container.style.opacity=0},d.prototype.animValueSet=function(a,b,c,d){switch(d){case"size":a[b]=c+"px";break;case"opacity":a.filter="alpha(opacity="+(c+100)+")",a[b]=c;break;default:a[b]=c}},d.prototype.animCall=function(a,b,c,d,e,f){"undefined"==typeof f&&(f="size");var g=parseInt(b/this.animationDelay),h=parseFloat(c[d]),i=(a-h)/g*5;this.animValueSet(c,d,h+i,f),b-this.animationDelay>0?TRC.Timeout.set(arguments.callee.trcBind(this,a,b-this.animationDelay,c,d),this.animationDelay):(this.animValueSet(c,d,a,f),"function"==typeof e&&e())},d.prototype.showCountdown=function(){var a=this.countdownBox.parentNode,b=Math.max(a.clientWidth,a.offsetWidth);this.countdownBox.style.display="inline";var c=Math.max(a.clientWidth,a.offsetWidth);a.style.width=b+"px",this.animCall(c,750,a.style,"width")},d.prototype.hideCountdown=function(){this.countdownBox.style.display="none",this.countdownBox.parentNode.style.width="auto"},d.prototype.checkContainerVisibility=function(){return this.autoPlayContainer.playerbox.offsetTop>=this.getScreenPosition()?!0:!1},d.prototype.createPlayer=function(){if(this.lightbox){if("undefined"!=typeof this.autoPlayContainer.playerbox)for(;this.autoPlayContainer.playerbox.childNodes.length>0;)this.autoPlayContainer.playerbox.removeChild(this.autoPlayContainer.playerbox.firstChild);this.autoPlayContainer.createEmbedIframe(this.rbox,this.autoPlayContainer.playerbox,this.videoData),"function"==typeof this.autoPlayContainer.setTitle&&this.autoPlayContainer.setTitle(this.videoData.title)}},d.prototype.close=function(){this.videoDoneHandler&&this.videoDoneHandler.remove(),"function"==typeof this.videoData.lightboxClosed&&this.videoData.lightboxClosed()},d.prototype.render=function(a){if(this.active){this.isRender=!0,this.getPlaylistItem("s"),this.videoDoneHandler=TRC.listen("videoDone",this.videoDone.trcBind(this)),a.appendChild(this.container),this.container.className="trc_autoplaylist-box",this.container.style.display="none",this.container.appendChild(this.genHeader()),this.container.appendChild(this.playlistItemBox);var c=b.createElement("div");c.style.clear="both",this.container.appendChild(c),this.container.onmouseover=function(){this.log("explore",{ri:this.reqId,sd:this.sesData,ui:this.userData,pi:this.videoData.id,pt:"video",li:this.listId})}.trcBind(this),null!=this.playlistRecommendation&&this.showNextUp()}},d.prototype.genPlaylistURL=function(a,b){var d={};d.autoplaylist={placement:"autoplaylist",origin:this.listId.replace(/^rbox-/,""),"list-size":1,"item-id":this.videoData.id},a&&(d.autoplaylist.intent=a);var e=this.rbox.trc.formatTRCRequest(d,"video");return e.cb=this.rbox.trc.genCallback(b),c+"//"+this.rbox.domain+"/"+this.publisher+"/trc/3/json?tim="+encodeURIComponent(__trcClientTimestamp())+(this.rbox.trc.trcByPass?"&trc_skip_failover=yes&":"&")+encodeURIComponent(__trcJSONify(e))+TRC.pageManager.additionalDispatchParams()},d.prototype.getPlaylistItem=function(a){if(!this.lightbox)return void TRC.Timeout.set(this.getPlaylistItemFromRBox.trcBind(this),0);var b=this.genPlaylistURL(a,function(a){if(!(a&&a.trc&&a.trc.vl&&a.trc.vl.length&&a.trc.vl[0].v))return void this.hideNextUp();this.reqId=a.trc.vl[0].req,this.sesData=a.trc.sd,this.userData=a.trc.ui,TRC.pageManager.storePublisherValue(this.publisher,"session-data",this.sesData),TRC.pageManager.storeValue("user-id",this.userData);var b=a.trc.vl[0].v;this.playlistRecommendation=b.length?b[0]:b,this.playlistItemBox.appendChild(this.drawVideoBox(this.playlistRecommendation)),this.countdownBox&&this.showNextUp()}.trcBind(this));this.rbox.trc.loadExternal(b,"js",function(){this.playlistRecommendation||this.hideNextUp()})},d.prototype.getPlaylistItemFromRBox=function(a){null!=this.playlistItemBox.firstChild&&this.playlistItemBox.removeChild(this.playlistItemBox.firstChild);for(var b=0,c=0;c<this.rbox.recommendationList.length-1;c++)if("video"==this.rbox.recommendationList[c].type&&this.rbox.recommendationList[c]!=this.playlistRecommendation){b=c;break}this.playlistRecommendation=this.rbox.recommendationList[b],this.playlistItemBox.appendChild(this.drawVideoBox(this.playlistRecommendation))},d.prototype.genBlock=function(a,c,d){var e=b.createElement(c?c:"div");for(p in a)if("string"==typeof a[p])e[p]=a[p];else if("object"==typeof a[p])for(p1 in a[p])e[p][p1]=a[p][p1];return"string"==typeof d&&e.appendChild(b.createTextNode(d)),e},d.prototype.drawVideoBox=function(a){var b=this.genBlock({className:"videobox nextup"}),c=this.genBlock({className:"thumbblock",style:{cssFloat:"left",styleFloat:"left",display:"block"}},"span");b.appendChild(c),c.appendChild(this.genBlock({className:"thumbnail",style:{height:"29px",width:"39px",display:"block",backgroundImage:"url('"+a.thumbnail+"')"}},"span")),c.appendChild(this.genBlock({className:"thumbnail-overlay",style:{height:"29px",width:"39px",display:"block",marginTop:"-29px"}},"span"));var d=this.genBlock({style:{display:"block"},className:"video-label-box"},"span");return b.appendChild(d),d.appendChild(this.genBlock({className:"video-label video-title"},"span",a.title)),b.onclick=function(a){this.log("click",{ri:this.reqId,sd:this.sesData,ui:this.userData,pi:this.videoData.id,pt:"video",li:this.listId}),this.activateNextUp("s",a)}.trcBind(this),b},d.prototype.genHeader=function(){var a=b.createElement("span");return a.className="trc-next-up-header",a.appendChild(b.createTextNode(this.gt.gettext("Next Up:")+" ")),this.countdownBox=b.createElement("span"),a.appendChild(this.countdownBox),this.countdownBox.className="trc-next-up-countdown",this.counterBox=b.createElement("span"),this.countdownBox.appendChild(this.counterBox),this.countdownBox.style.display="none",a},d.prototype.log=function(a,b,d){var e=a+":"+b.li+b.ii+b.ri;if(this.ev||(this.ev={}),this.ev[e])return void this.ev[e]++;this.ev[e]=1;try{var f=c+"//"+this.rbox.domain+"/"+this.rbox.trc["normalize-log-param"]("publisher",this.publisher)+"/log/3/"+encodeURIComponent(a)+"?"+(Tthis.rbox.trc.trcByPass?"trc_skip_failover=yes&":"");for(name in b){var g="_"==name.charAt(0)?name.substr(1):name;"undefined"!=typeof b[name]&&null!=b[name]&&(this.rbox.trc["normalize-log-param"](g,b[name]),f+=encodeURIComponent(g)+"="+encodeURIComponent(b[name])+"&")}f+="id="+parseInt(1e4*Math.random());var h=new Image;h.src=f}catch(i){__trcError("Error in sending auto playlist event",i)}}}(window,document),function(a,b){var c=function(){this.dom=b.getElementById?1:!1,this.dom&&((b.importNode?0:1)||(this.dom=2),(b.normalizeDocument?0:1)||(this.dom=3));var c=this.opera=a.opera?9:!1;if(this.opera&&((navigator.geolocation?0:1)||(this.opera=10),(a.opera.version?0:1)||(this.opera=parseFloat(a.opera.version()))),this.ie=function(){return navigator.userAgent.match(/Trident/)&&/rv:11.0/i.test(navigator.userAgent)?11:"object"!=typeof b.all||c?!1:"CSS1Compat"!=b.compatMode?6:a.XMLHttpRequest?Object.defineProperty?"object"!=typeof DOMImplementation||"function"!=typeof DOMImplementation.prototype.createDocument?8:a.msMatchMedia?10:9:7:6}(),this.webkit=(a.openDatabase?!0:!1)&&!this.opera,this.chrome=this.webkit&&a.chrome?!0:!1,this.safari=this.webkit&&!this.chrome,this.safari&&((b.compareDocumentPosition?0:1)||(this.safari=4),(navigator.registerContentHandler?0:1)||(this.safari=5),(a.matchMedia?0:1)||(this.safari=6)),this.firefox=!!navigator.userAgent.match(/firefox/i),this.firefox){try{"function"==typeof b.createElement("canvas").getContext&&(this.firefox=1.5)}catch(d){}"object"==typeof a.globalStorage&&(this.firefox=2),(b.elementFromPoint?0:1)||(this.firefox=3),(b.querySelector?0:1)||(this.firefox=3.5),(b.getElementsByTagName("head")[0].mozMatchesSelector?0:1)||(this.firefox=3.6),(a.Uint8Array?0:1)||(this.firefox=4),(Function.prototype.isGenerator?0:1)||(this.firefox=5),(a.matchMedia?0:1)||(this.firefox=6),(a.FileReader&&a.FileReader.prototype.readAsArrayBuffer?0:1)||(this.firefox=7),(b.head&&b.head.insertAdjacentHTML?0:1)||(this.firefox=8)}for(var e=["firefox","chrome","safari","webkit","khtml","ie","opera"],f=0;f<e.length;f++)!function(a,b){a[b+"Upto"]=function(a){return this[b]&&("number"!=typeof this[b]||this[b]<=a)},a[b+"Atleast"]=function(a){return this[b]&&("number"!=typeof this[b]||this[b]>=a)}}(this,e[f]);return this.compatibility={lineClamp:function(){return"undefined"!=typeof b.createElement("div").style.webkitLineClamp}(),cssTransforms:function(){for(var a=b.createElement("div"),c=["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"],d=0;d<c.length;d++)if("undefined"!=typeof a.style[c[d]])return!0;return!1}()},this},d=function(){this.isTouchDevice="ontouchstart"in window,this.deviceType=function(){var a=navigator.userAgent.match(/iPhone|iPod|iPad/i);return a?a[0]:"other"}()};TRC.Browser=new c,TRC.Device=new d}(window,document),TRC.css=TRC.css||{},TRC.css.utils=function(a){function b(a,b){var c,d,e,g,h=a.indexOf("@media")>=0?a.split("{")[0]+"{":"";return a=h?a.substring(a.indexOf("{")+1):a,c=a.split("{"),d=c.length>1?c[0].split("."):a.split("."),g=d.length,2>g?h+a:(e=d[1],__trcTrim(e)===r?h+a:(b[__trcTrim(e)]?(f(1),d[0]="#"+b[__trcTrim(e)].cssDivsArr.join(" #")+" "+d[0]):(f(p),d[0]=i(d.join("."))+d[0]),c.length>1?(c[0]=d.join("."),h+c.join("{")):h+d.join(".")))}function c(a,c){var e=a.split(","),f=e.length,i="";if(h()>l&&(i=m,__trcDebug("Number of augmented css rules before Split : "+h()),g(0)),null===c)return d(2>f?a:e,i);if(2>f)return i+b(a,c);for(var j=0;f>j&&(e[j]=b(e[j],c),!(e[j].indexOf("{")>=0&&f-1>j));j++);return i+e.join(",")}function d(a,b){var c=a.length;if("string"==typeof a)return f(1),b+a;for(var d=0;c>d&&(f(1),!(a[d].indexOf("{")>=0&&c-1>d));d++);return b+a.join(",")}function e(a,b){var d=a.split("}"),e=d.length;if(2>e)return c(a,b);for(var f=0;e>f;f++)d[f]=c(d[f],b);return d.join("}")}function f(a){o+=a}function g(a){o=a}function h(){return o}function i(a){return j(!1,!1).replace(new RegExp("{class}","gm"),a)}function j(a,b){var c;if("object"==typeof a){q="";for(var d in a)"string"==typeof d&&""!==d&&(c="#"+a[d].cssDivsArr.join(" #")+" ",q=q+c+" "+n),p++;return q="#"+b.iframe.join(" #")+" "+n+"#"+b.topDiv.join(" #")+" "+n+q.slice(0,q.length-n.length)}return q}var k,l=4040,m=" style_split",n="{class},",o=0,p=0,q="",r="vidiscovery-note";return k={setStyleTextIdPrefix:function(a,b,c){b&&j(b,c);var d=e(a,b);return __trcDebug("Number of augmented css rules left : "+h()),g(0),d},setStyleElements:function(a){var b=a.split(m),c=b.length;c>1&&TRC.pConsole("page","debug","splitting css","");for(var d=0;c>d;d++)TRC.dom.injectStyle(b[d])},setStyleToElements:function(a,b,c){try{var d=[],e=b.split(","),f=[];"Array"==__trcTypeOf(a)?d=a:d.push(a);for(var g=0,h=d.length;h>g;g++){var i=0;for(e.length;i<len;i++)"inline"===c&&(f=syles[i].split(":"),d[g].style[__trcTrim(f[0])]=__trcTrim(f[1]))}}catch(j){__trcError("Error in TRC.css.utils.setStyleToElements "+j.message)}},setStyleProperty:function(a,b,c,d){var e=a.style.cssText;e+=";"+b+":"+c+(d?"!important":""),a.style.cssText=e},generateCssRuleWithVendorPrefixes:function(a,b){for(var c=[" -webkit-","-moz-","-ms-","-o-"],d="{property}: {value};",e=d.replace("{property}",a).replace("{value}",b),f=[],g=0;g<c.length;g++)f.push(c[g]+e);return f.push(e),f.join(" ")},escape:function(){return window.CSS&&window.CSS.escape||function(a){var b=function(a){this.message=a};b.prototype=new Error,b.prototype.name="InvalidCharacterError";for(var c,d=String(a),e=d.length,f=-1,g="",h=d.charCodeAt(0);++f<e;){if(c=d.charCodeAt(f),0==c)throw new b("Invalid character: the input contains U+0000.");g+=c>=1&&31>=c||127==c||0==f&&c>=48&&57>=c||1==f&&c>=48&&57>=c&&45==h?"\\"+c.toString(16)+" ":c>=128||45==c||95==c||c>=48&&57>=c||c>=65&&90>=c||c>=97&&122>=c?d.charAt(f):"\\"+d.charAt(f)}return g}}()},a._trcIsUTactive&&(k.classSplit=b,k.multiRuleSplit=c,k.ruleSplit=e,k.addRuleCounter=f,k.getCssIdsTemplate=j),k}(window),TRC.css.responsive=function(){function a(a,b){var c=TRC.Browser.ieUpto(7)?99:99.99;return(c-a*b)/a}function b(b,c,d,e,f,g){var h=a(b,d),i="rtl"===g?"right":"left",j="."+c+" .videoCube{width: "+h+"%; position: relative; float: "+i+"; margin: 0 0 "+d+"% 0; margin-"+i+": "+d+"%;}";f?e.push(TRC.css.utils.setStyleTextIdPrefix(j,TRC.modesCache,TRC.lightBoxCssReset)):e.push(j)}function c(a,b,c,e,f,g){var h="rtl"===g?"right":"left",i="rtl"===g?"left":"right",j=" .trc_rbox_div .videoCube {width: "+(1==a.cells?"100":"48")+"%;}",k=" .trc_header_left_column {width: "+(1==a.cells?"100":"48")+"%;}",l=" .trc_header_right_column {display: "+(1==a.cells?"none":"inline")+";}",m="."+b+" .trc_rbox_div div.videoCube:nth-of-type(-n+"+a.rows+"){float:"+h+";clear:"+h+";}",n="."+b+" .trc_rbox_div div.videoCube:nth-of-type(n+"+(a.rows+1)+"){float:none;clear:"+i+";margin-"+h+":auto;}";f?d(a,b,c,e,g):e?(c.push(TRC.css.utils.setStyleTextIdPrefix(n,TRC.modesCache,TRC.lightBoxCssReset)),c.push(TRC.css.utils.setStyleTextIdPrefix(m,TRC.modesCache,TRC.lightBoxCssReset))):(c.push(n),c.push(m)),e?(c.push(TRC.css.utils.setStyleTextIdPrefix("."+b+j,TRC.modesCache,TRC.lightBoxCssReset)),c.push(TRC.css.utils.setStyleTextIdPrefix("."+b+k,TRC.modesCache,TRC.lightBoxCssReset)),c.push(TRC.css.utils.setStyleTextIdPrefix("."+b+l,TRC.modesCache,TRC.lightBoxCssReset))):(c.push("."+b+j),c.push("."+b+k),c.push("."+b+l))}function d(a,b,c,d,e){var f,g,h,i="rtl"===e?"right":"left",j="rtl"===e?"left":"right",k=a.rows*a.cells-a.rows;for(f=1;f<=a.rows;f++)g="."+b+" .trc_rbox_div .videoCube_"+f+"_child{float:"+i+";clear:"+i+";}",d?c.push(TRC.css.utils.setStyleTextIdPrefix(g,TRC.modesCache,TRC.lightBoxCssReset)):c.push(g);for(f=a.rows+1;k>=f;f++)h="."+b+".trc_rbox_div  .videoCube_"+f+"_child{float:none;clear:"+j+";margin-"+i+":auto;}",d?c.push(TRC.css.utils.setStyleTextIdPrefix(h,TRC.modesCache,TRC.lightBoxCssReset)):c.push(h)}function e(a,b,c,d,e,f){var h=a.rows*a.cells,i="."+b+" div.videoCube:nth-of-type(-n+"+h+"){display:block;visibility:visible;}",j="."+b+" div.videoCube:nth-of-type(n+"+(h+1)+"){display:none;visibility:hidden;}";e?g(c,d,h,b,f):f?(c.push(TRC.css.utils.setStyleTextIdPrefix(i,TRC.modesCache,TRC.lightBoxCssReset)),c.push(TRC.css.utils.setStyleTextIdPrefix(j,TRC.modesCache,TRC.lightBoxCssReset))):(c.push(i),c.push(j))}function f(a,c,d,e,f,g){var i="rtl"===g?"right":"left",j="."+c+" .trc_rbox_outer .videoCube .video-label-box {height:auto;}",k="."+c+" .trc_rbox_outer .videoCube {margin-bottom:10px;}",l="."+c+" .trc_rbox_outer{margin-"+i+":-"+a.margin+"%;}",m=a.rows*a.cells;1==a.cells&&(e?h(d,c,f,m):f?(d.push(TRC.css.utils.setStyleTextIdPrefix(j,TRC.modesCache,TRC.lightBoxCssReset)),d.push(TRC.css.utils.setStyleTextIdPrefix(k,TRC.modesCache,TRC.lightBoxCssReset))):(d.push(j),d.push(k))),f?d.push(TRC.css.utils.setStyleTextIdPrefix(l,TRC.modesCache,TRC.lightBoxCssReset)):d.push(l),d.push("."+c+" .videoCube_aspect{padding-bottom:"+a.ratio+"%; width: 100%;}"),b(a.cells,c,a.margin,d,f,g)}function g(a,b,c,d,e){var f;for(f=1;c>=f;f++)e?a.push(TRC.css.utils.setStyleTextIdPrefix("."+d+" .videoCube_"+f+"_child{display:block;visibility:visible;}",TRC.modesCache,TRC.lightBoxCssReset)):a.push("."+d+" .videoCube_"+f+"_child{display:block;visibility:visible;}");for(f=c+1;b>=f;f++)e?a.push(TRC.css.utils.setStyleTextIdPrefix("."+d+" .videoCube_"+f+"_child{display:none;visibility:hidden;}",TRC.modesCache,TRC.lightBoxCssReset)):a.push("."+d+" .videoCube_"+f+"_child{display:none;visibility:hidden;}")}function h(a,b,c,d){for(var e,f,g=1;d>=g;g++)e="."+b+" .videoCube_"+g+"_child .video-label-box {height:auto;}",f="."+b+" .videoCube_"+g+"_child{margin-bottom:10px;}",c?(a.push(TRC.css.utils.setStyleTextIdPrefix(e,TRC.modesCache,TRC.lightBoxCssReset)),a.push(TRC.css.utils.setStyleTextIdPrefix(f,TRC.modesCache,TRC.lightBoxCssReset))):(a.push(e),a.push(f))}var i;return i={rulesToCssText:function(a,b,d,g,h,i){var j,k,l,m,n=[],o=TRC.Browser.ieUpto(8);for(j=0;k=b[j];j++)o||(l="undefined"!=typeof k.min||"undefined"!=typeof k.max,l&&n.push("@media screen and "),"undefined"!=typeof k.min&&(n.push("(min-width: "+k.min+"px) "),k.max&&n.push("and ")),"undefined"!=typeof k.max&&n.push("(max-width: "+k.max+"px) "),l&&n.push("{")),m=a+(o?"_rule"+j:""),h?c(k,m,n,g,o,i):f(k,m,n,o,g,i),e(k,m,n,d,o,g),!o&&l&&n.push("} ");return n.join("")},getRulePercentageWidth:a}}(),function(){TRC.DaisyChain=function(a,b){var c,d,e,f,g={},h="finish",i="active",j=0,k=0,l=TRC.text,m=i;this.renderInIframe=function(a,b){var c=a.contentWindow||a.contentDocument,d=b.trc.tag;return c.document&&(c=c.document),this.setOuterIframeStyle(a,d),this.runTagInIframe(c,a,b),this.resetStyleInIframe(c),a},this.setOuterIframeStyle=function(a,b){a.style.width=b.w||"0px",a.style.height=b.h||"0px"},this.resetStyleInIframe=function(a){var b=a.createElement("style"),c="body { margin: 0px }";b.type="text/css",b.styleSheet?b.styleSheet.cssText=c:b.appendChild(a.createTextNode(c)),a.getElementsByTagName("head")[0].appendChild(b)},this.runTagInIframe=function(a,b,c){a.open(),a.write(this.normalizeTag(b,c)),a.close()},this.normalizeTag=function(b,c){var d=a.global["normalize-provider-tag"];return"function"==typeof d?d(c.trc.tag.js,c,b,l.htmlUnescape):l.htmlUnescape(c.trc.tag.js)},this.createIframe=function(){var a=document.createElement("iframe");return a.style.border=a.frameBorder=a.border="0",a.scrolling="no",b.container.appendChild(a),a},this.addToChain=function(a,b){var c=b||a.trc.tag.pr;g[c]=a,j++,TRC.pConsole("mediation","debug","pushing in daisy chain ",a,"object")},this.renderAd=function(a){var b,d;try{return e&&TRC.Timeout.clear(e),m==h?(TRC.pConsole("mediation","info","passback rejected - daisy chain finished"),__trcWarn("passback rejected - daisy chain finished- "+c),!1):(this.incrementPriority(),(b=g[c])?(this.renderNextAd(b,a),!0):(j>k&&__trcError("Error in DaisyChain.renderAd - non continuous priority flaw - "+c),m=h,!1))}catch(i){return d=b&&b.trc.tag?b.trc.tag.jsid:c,__trcError("Error in DaisyChain.renderAd - "+d,i),f||(f=!0,this.renderAd()),!1}},this.renderNextAd=function(a,b){k++,a.trc.tag?this.renderScript(a):this.renderTaboola(a,b)},this.incrementPriority=function(){c?c++:c=1},this.renderTaboola=function(c,d){TRC.pConsole("mediation","debug","rendering taboola"),this.removeIframe(),b.response=c,m=h,d?d.loadScriptCallback(b.response):a.internalDrawRBox(b)},this.renderScript=function(b){var c=b.trc.tag;e=this.setDeferredAvailableEvent(c.uip,c.ri,a.global["mediation-tag-timeout"]||1e3),TRC.pConsole("mediation","debug","rendering script : "+c.jsid,e,"string"),d?this.renderInIframe(d,b):(d=this.createIframe(),this.renderInIframe(d,b))},this.setDeferredAvailableEvent=function(b,c,d){return TRC.Timeout.set(function(){m=h,a.sendEvent("available",{ri:c,uip:b},null,!0),TRC.pConsole("mediation","debug","send available on placement : "+b)},d)},this.removeIframe=function(){d&&d.parentElement.removeChild(d)},TRC.pConsole("mediation","info","starting daisy chain on placement : "+b.placement)}}(),TRC.modDebug=function(a,b){function c(a){TRC.net.fireSimpleHttpRequest(a)}function d(a){switch(a){case 0:return"error";case 1:return"warn";case 2:return"info";case 3:return"debug";case 4:return"map";default:return}}function e(b,c,e){return i.timeStamp+escape(e)+"&"+i.type+escape(d(b))+"&"+i.message+escape(c)+(trc_debug_level>1?"&"+i.debugLevel+trc_debug_level:"")+"&"+i.id+Math.floor(1e4*Math.random())+(a.TRC.version?"&cv="+a.TRC.version:"")}var f,g=TRC.PROTOCOL,h=2,i={timeStamp:"tim=",type:"type=",message:"msg=",debugLevel:"llvl=",id:"id="},j=function(){var a={};return{setMessageCache:function(b){a[b]?a[b]+=1:a[b]=1},getMessageCount:function(b){return a[b]?a[b]:0}}}();return f={logMessageToServer:function(b,d){if(j.setMessageCache(d),j.getMessageCount(d)<=h){var f=a.TRCImpl&&TRCImpl.domain?TRCImpl.domain:"trc.taboola.com",i=a.TRCImpl?TRCImpl["normalize-log-param"]("publisher",TRC.publisherId):TRC.publisherId,k=g+"//"+f+"/"+i+"/log/2/debug?"+e(b,d,__trcClientTimestamp());c(k)}},getType:d},a._trcIsUTactive&&(f.getType=d,f.messageCache=j,f.getLogParams=e),f}(window,document),function(a,b){TRC.DeepLinking={isAppStoreURL:function(a,b){var c=/^(market|itms-apps|ms-windows-store)\:\/\//,d=b&&new RegExp(b);return c.test(a)||!!b&&d.test(a)},openDeepLink:function(a){var b=document.createElement("iframe");return b.src=a,b.className="tbl-deep-link",b.height=0,b.width=0,document.body.appendChild(b),b}}}(window,document),function(a,b){function c(a){try{if(f&&(TRC.Browser.ieUpto(10)?b.detachEvent("onreadystatechange",f):(b.removeEventListener("DOMContentLoaded",arguments.callee,!1),TRC.Interval.clear(f))),TRC.dom.isReady)return;TRC.dom.isReady=!0,TRC.dom.onReady=function(a){a()};for(var c=0;c<e.length;c++)e[c]()}catch(d){__trcError("Error in DOMReady processing",d)}}function d(){return a.pageXOffset||b.body.scrollLeft}var e=[],f=null,g=!1;TRC.dom={isReady:!1,onReady:function(a,b){return b?void TRC.Timeout.set(a,10):void e.push(a)},init:function(){if(!g){if(g=!0,b.readyState&&/loaded|complete/.test(b.readyState))return void c(!0);if(TRC.Browser.ieUpto(10)){var d=b.createElement("div");!function(){try{d.doScroll("left")}catch(a){return void(d.to=TRC.Timeout.set(arguments.callee,10))}c()}(),b.attachEvent("onreadystatechange",f=function(){
/loaded|complete/.test(b.readyState)&&(TRC.Timeout.clear(d.to),c())})}else{if(/interactive/.test(b.readyState))return void c(!0);b.addEventListener("DOMContentLoaded",c,!1),f=TRC.Interval.set(function(){/loaded|complete|interactive/.test(b.readyState)&&c()},10)}var e=a.onload;a.onload=function(){if(c(),e)try{e()}catch(a){}}}},on:function(){return a.addEventListener?function(a,b,c){a.addEventListener(b,c,!1)}:a.attachEvent?function(a,b,c){a.attachEvent("on"+b,c)}:void(el["on"+sType]=fn)}(),off:function(){return a.removeEventListener?function(a,b,c){a.removeEventListener(b,c,!1)}:a.detachEvent?function(a,b,c){a.detachEvent("on"+b,c)}:void(el["on"+sType]=fn)}(),isAncestor:function(a,b,c){for(b=c?b:b.parentNode;b&&b!==a&&9!=b.nodeType;)b=b.parentNode;return a===b},injectStyle:function(a,c){var d=document.createElement("style"),c=c||b;d.type="text/css",c.head.appendChild(d),d.styleSheet?d.styleSheet.cssText=a:d.appendChild(document.createTextNode(a)),this.injectStyleOverflowFix(a),TRC.styleInjected=!0},injectStyleOverflowFix:function(a){if(TRC.Browser.ie&&31==document.styleSheets.length){var c=document.getElementById("trc_rbox_css_loaded");if(null==c&&(c=document.createElement("div"),c.id="trc_rbox_css_loaded",b.body.appendChild(c)),"hidden"!=document.trcGetCurrentStyle(c,"overflow")){var d=a.split("}"),e=null;try{for(var f=0;f<document.styleSheets.length;f++){var g=document.styleSheets[f];if(d.length+g.rules.length<=4096){e=g;break}}null!=e&&(e.cssText+=a)}catch(h){__trcError("Error in injectStyleOverflowFix processing",h)}}}},swapElements:function(a,b,c){return c&&TRC.dom.purgeEventHandlers(a),a.parentNode.replaceChild(b,a),b},iterateOnNode:function(a,b){for(b(a),a=a.firstChild;a;)arguments.callee(a,b),a=a.nextSibling},purgeEventHandlers:function(a){try{TRC.dom.iterateOnNode(a,function(a){for(var b in a)"function"==typeof a[b]&&(a[b]=null)})}catch(b){__trcError("TRC.dom.purgeEventHandlers : ",b.message)}},clearInnerElements:function(a){for(var b;b=a.firstChild;)this.purgeEventHandlers(b),a.removeChild(b)},stopEvent:function(a){return a.cancelBubble=!0,a.returnValue=!1,a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),!1},addClass:function(a,b){a.className+=" "+b+" "},removeClass:function(a,b){var c;return a.classList?a.classList.remove(b):(c=new RegExp("s*"+b,"g"),void(a.className=a.className.replace(c,"")))},getWindowWidth:function(){return window.innerWidth?this.getWindowWidth=function(){return window.innerWidth}:0!=document.documentElement.clientWidth?this.getWindowWidth=function(){return document.documentElement.clientWidth}:this.getWindowWidth=function(){return document.body.clientWidth},this.getWindowWidth()},getWindowHeight:function(){return window.innerHeight?this.getWindowHeight=function(){return window.innerHeight}:0!=document.documentElement.clientHeight?this.getWindowHeight=function(){return document.documentElement.clientHeight}:this.getWindowHeight=function(){return document.body.clientHeight},this.getWindowHeight()},getPageVerticalScroll:function(){return a.pageYOffset||b.body.scrollTop},getViewportVerticalRange:function(){var a=this.getPageVerticalScroll(),b=a+this.getWindowHeight();return{min:a,max:b}},getViewportHorizontalRange:function(){var a=d(),b=a+this.getWindowWidth();return{min:a,max:b}},getElementRect:function(a){return a.getBoundingClientRect()},isInIframe:function(b){try{return a.top===a.self?!1:!0}catch(c){return"boolean"==typeof b?b:!1}},createAugmentingContainers:function(a,b){for(var c,d=[],e=null,f=0;a>f;f++)c=this.createAugmentingContainer(e),e=c,d.push(c);return b&&d[a-1].appendChild(b),d},createAugmentingContainer:function(a){var c=b.createElement("div");return c.id="tbl-aug-"+Math.floor(2147483648*Math.random()).toString(36),a&&a.appendChild(c),c},generateAugmentationPrefix:function(a){for(var b="",c=0;c<a.length;c++)b+="#"+a[c].id+" ";return b},isHighDensity:function(){var a=window.matchMedia&&(window.matchMedia("only screen and (min-resolution: 124dpi), only screen and (min-resolution: 1.3dppx), only screen and (min-resolution: 48.8dpcm)").matches||window.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (min--moz-device-pixel-ratio: 1.3), only screen and (min-device-pixel-ratio: 1.3)").matches)||window.devicePixelRatio&&window.devicePixelRatio>1.3;return function(){return a}}(),isRetina:function(){var a=(window.matchMedia&&(window.matchMedia("only screen and (min-resolution: 192dpi), only screen and (min-resolution: 2dppx), only screen and (min-resolution: 75.6dpcm)").matches||window.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (min--moz-device-pixel-ratio: 2), only screen and (min-device-pixel-ratio: 2)").matches)||window.devicePixelRatio&&window.devicePixelRatio>2)&&/(iPad|iPhone|iPod)/g.test(navigator.userAgent);return function(){return a}}(),isSmartPhone:function(){var a=window.matchMedia&&window.matchMedia(" only screen and (min-device-width : 320px) and (max-device-width : 480px)").matches||/(iPhone|iPod)/g.test(navigator.userAgent);return function(){return a}}(),isTablet:function(){var a=window.matchMedia&&window.matchMedia(" only screen and (min-device-width : 768px) and (max-device-width : 1024px)").matches||/(iPhone|iPod)/g.test(navigator.userAgent);return function(){return a}}(),isDesktop:function(){return!(this.isTablet()||this.isSmartPhone())}}}(window,document),TRC.eventDelegator=function(a,b){function c(a,b){var c;i[a]&&(c=i[a]._all,d(c,b?b:""),b&&i[a][b.container.id]&&(c=i[a][b.container.id],d(c,b)))}function d(a,b){if(a){var c,d=a.length;for(c=0;d>c;c++)try{a[c]instanceof Function&&setTimeout(function(a,b){return function(){a(b)}}(a[c],b),0)}catch(e){__trcError("executeHandlers",e)}}}function e(a,b){var c;if(!b)return void setTimeout(a,0);for(c in b)try{a instanceof Function&&setTimeout(function(a,b){return function(){a(b)}}(a,b[c]),0)}catch(d){__trcError("executeHandlers",d)}}function f(a){i[a]=[],i[a]._all=[]}function g(a,b){i[a][b]=[]}var h,i=[],j={},k={subscribe:function(a,b,c){i[a]||f(a),c?(i[a][c]||g(a,c),i[a][c].push(b),j[a]&&j[a][c]&&e(b,{mode:j[a][c]})):(i[a]._all.push(b),j[a]&&e(b,j[a]))},dispatch:function(a,b){j[a]=j[a]||{},b?j[a][b.container.id]=b:j[a]._all={},c(a,b?b:null)},resetEvents:function(){j={}}};if(a._trcIsUTactive&&(k.processDelegatorsStack=c,k.executeHandlers=d,k.executePreviousEvents=e,k.delegatorsStack=i,k.eventsStack=j),TRC.subscriptionRegister)for(;TRC.subscriptionRegister.length;)h=TRC.subscriptionRegister.shift(),k.subscribe(h.event,h.handler,h.container);return k}(window,document),function(a,b){function c(a){return{detail:a}}function d(a){return"api::"+a}function e(a,b){TRC.dispatch(d(a),c(b))}TRC.EventsAPI={dispatchVisible:function(){},dispatchClick:function(a,b){var c,d=TRC.TRCParser;a=a||{},c=new TRC.ItemParser(a),b=b||{},e("click",{slot:c.getSlot(),id:c.getId(),type:c.getType(),title:c.getTitle(),url:c.getUrl(),linkTarget:c.getLinkTarget(),mode:d.parseModeName(b),placement:d.parsePlacementName(b),baseMode:d.parseBaseModeName(b),variant:d.parseTestVariant(b),itemCount:d.getItemCount(b)})},dispatchRender:function(a,b){var c=TRC.TRCParser,a=a||{},d={mode:c.parseModeName(a),placement:c.parsePlacementName(a),baseMode:c.parseBaseModeName(a),variant:c.parseTestVariant(a),itemCount:c.getItemCount(a)};b&&(d.container=b.container,d.items=b.apiData),e("render",d)},dispatchNoContent:function(a,b){var c={reason:a};b&&(c.placement=b),e("nocontent",c)},listen:function(a,b){TRC.listen(d(a),b,!0)}}}(window,document),function(a,b){function c(a){"undefined"==typeof g[a]&&(g[a]=[])}function d(a,b){c(a),g[a].forEach(function(c,d){return b==c.id?void g[a].splice(d,1):void 0})}var e,f,g={},h=0;return TRC.listen=function(a,b,e){if("object"==typeof a&&a.length)return a.forEach(function(a){TRC.listen(a,b)}),null;c(a);var f={id:h++,handler:b,eventName:a,sync:e,remove:function(){d(this.eventName,this.id)}};return g[a].push(f),f},TRC.dispatch=function(a,b){c(a);var d=e(a,b);g[a].forEach(function(a){if(a.sync)try{a.handler.call(this,d)}catch(b){}else f(function(){a.handler.call(this,d)}.trcBind(this))}.trcBind(this))},b.addEventListener&&b.dispatchEvent?(b.addEventListener("trcFakeEvents",function(a){a.cx()},!1),e=function(a,c){var d=b.createEvent("Event");return d.initEvent(a,!1,!1),"object"==typeof c?__trcCopyProps(c,d):d.data=c,d},void(f=function(a){var c=e("trcFakeEvents");c.cx=a,b.dispatchEvent(c)})):(b.documentElement.attachEvent("onpropertychange",function(a){"trcFakeEvents"==a.propertyName&&a.cx()}),e=function(a,c){var d;return c&&c.generator&&"ceo"===c.generator?(c.type=a,c):(d=b.createEventObject(),d.generator="ceo",d.type=a,"object"==typeof c?__trcCopyProps(c,d):d.data=c,d)},void(f=function(a){var c=e("trcFakeEvents");c.cx=a,c.propertyName="trcFakeEvents",b.documentElement.fireEvent("onpropertychange",c)}))}(window,document),function(a){var b=TRC.ExpandAnimationManager=function(b){this.rbox=b,this.container=b.container,this.trcContainer=this.container._trc_container,TRC.css.utils.setStyleElements(this.createCSS()),this.trcContainer.className+=" trc_expandable",this.throttledExpandScrollHandler=this.scrollHandler.trcBind(this).trcThrottle(10),TRC.dom.on(a,"scroll",this.throttledExpandScrollHandler)};b.prototype.scrollHandler=function(){this.rbox.isInViewPort(this.container,0)?this.trcContainer.wasOutOfViewPort&&(this.trcContainer.className+=" trc_show",TRC.dom.off(window,"scroll",this.throttledExpandScrollHandler)):this.trcContainer.wasOutOfViewPort=!0},b.prototype.createCSS=function(){for(var a=[],b="#"+TRC.css.utils.escape(this.container.id),c=this.rbox.trc.getProperty(this.rbox.mode_name,"expand-animation-duration"),d=this.rbox.trc.getProperty(this.rbox.mode_name,"expand-animation-max-height"),e=[b+" .trc_rbox_container.trc_expandable {"+TRC.css.utils.generateCssRuleWithVendorPrefixes("transition-duration",c+"ms")+"}",b+" .trc_rbox_container.trc_expandable.trc_show { max-height: "+d+"px;}"],f=0;f<e.length;f++)this.rbox.trc.cssReset?a.push(TRC.css.utils.setStyleTextIdPrefix(e[f],TRC.modesCache,TRC.lightBoxCssReset)):a.push(e[f]);return a.join("")}}(window),function(a,b){TRC.clickFraudDetect=function(a,b){function c(){try{var a="&p4="+(new Date).getTime();b.loadScript(f+g+a,"js",null,null,!0)}catch(c){__trcError("reportClick: Error in click fraud detection",c)}}var d="136373f5436373f5230353",e="502",f="//flx502.lporirxe.com/flp/flcpmin.js?qid="+d+"&cid="+e,g="&p1="+a.pubId;return a.enabled?modObject.reportClick=c:modObject.reportClick=function(){},modObject}}(window,document),TRC.util=function(a,b){var c={isType:function(a,b){return b=b.charAt(0).toUpperCase()+b.substr(1),Object.prototype.toString.call(a)=="[object "+b+"]"},hasKeys:function(a){var b;if(this.isType(a,"object"))if(Object.keys&&!Object.propertyIsEnumerable("keys")){if(Object.keys(a).length>0)return!0}else for(b in a)if(a.hasOwnProperty(b))return!0;return!1},copyProperties:function(a,b,c){var d;if(this.isType(c,"Array")){d=c.length;for(var e=0;d>e;e++)b[c[e]]=a[c[e]]?a[c[e]]:void 0;return!0}return!1},getRandomIds:function(a){for(var b=0;b<a.len;b++)a.arr[b]=a.prefix+Math.floor(Math.random()*Math.pow(10,a.strength)+1)+a.suffix},getHtmlDecodeText:function(){var a=b.createElement("div");return function(b){return b&&"string"==typeof b?(a.innerHTML=encodeURI(b),b=a.textContent||a.innerText,a.innerHTML="",decodeURI(b)):""}}(),isEmptyString:function(a){return!a||/^\s*$/.test(a)},keys:function(){"use strict";if(Object.keys)return function(a){return"object"==typeof a||"function"==typeof a&&null!==a?Object.keys(a):[]};var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length;return function(e){if("object"!=typeof e&&("function"!=typeof e||null===e))return[];var f,g,h=[];for(f in e)a.call(e,f)&&h.push(f);if(b)for(g=0;d>g;g++)a.call(e,c[g])&&h.push(c[g]);return h}}(),merge:function(a){"use strict";if(void 0===a||null===a||a.constructor!==Object)return null;for(var b=TRC.util,c=1;c<arguments.length;c++){var d=arguments[c];if(void 0!==d&&null!==d&&d.constructor===Object)for(var e,f=b.keys(d),g=0,h=f.length;h>g;g++)e=f[g],a[e]=d[e]}return a},debounce:function(a,b,c,d){var e;return function(){var f=d||window,g=arguments,h=function(){e=null,c||a.apply(f,g)},i=c&&!e;clearTimeout(e),e=setTimeout(h,b),i&&a.apply(f,g)}}};return c}(window,document),"undefined"==typeof Array.prototype.push&&(Array.prototype.push=function(){for(var a=0;a<arguments.length;a++)this[this.length]=arguments[a]}),"undefined"==typeof Array.prototype.indexOf&&(Array.prototype.indexOf=function(a,b){"number"!=typeof b&&(b=0);for(var c=b;c<this.length;c++)if(this[c]==a)return c;return-1}),"undefined"==typeof Array.prototype.forEach&&(Array.prototype.forEach=function(a){var b=this.length;if("function"!=typeof a)throw new TypeError;for(var c=arguments[1],d=0;b>d;d++)d in this&&a.call(c,this[d],d,this)}),"undefined"==typeof document.getElementsByClassName&&(document.getElementsByClassName=function(a){var b=[];elms=document.getElementsByTagName("*");var c=a.split(/ +/);a:for(var d=0;d<elms.length;d++){for(var e=elms[d].className.split(/ +/),f=0;f<c.length;f++)if(e.indexOf(c[f])<0)continue a;b.push(elms[d])}return b}),"undefined"==typeof document.trcGetCurrentStyle&&(document.trcGetCurrentStyle=function(a,b,c){return"string"==typeof a&&(a=document.getElementById(a)),window.getComputedStyle?window.getComputedStyle(a,c).getPropertyValue(b):(b=b.replace(/-(\w)/,function(a,b){return b.toUpperCase()}),a.currentStyle[b])}),"undefined"==typeof document.trcGetParentByClassName&&(document.trcGetParentByClassName=function(a,b){return a?a.className.split(/\s+/).indexOf(b)>=0?a:document.trcGetParentByClassName(a.parentNode,b):null}),"undefined"==typeof document.trcGetChildByClassName&&(document.trcGetChildByClassName=function(a,b){return a?a.className.split(/\s+/).indexOf(b)>=0?a:document.trcGetChildByClassName(a.firstChild,b):null}),"undefined"==typeof Function.prototype.trcBind&&(Function.prototype.trcBind=function(a){var b=this,c=Array.prototype.slice.call(arguments,1);return function(){var d=c.concat(Array.prototype.slice.call(arguments,0));return b.apply(a,d)}}),"undefined"==typeof Function.prototype.trcThrottle&&(Function.prototype.trcThrottle=function(a){var b,c=this;return function(){var d=arguments;b&&clearTimeout(b),b=setTimeout(function(){c.apply(c,d)},a)}}),"undefined"==typeof document.head&&(document.head=document.getElementsByTagName("head")[0]),TRC.GoogleAds=function(){return"object"==typeof window.console&&console.log("TRC.GoogleAds is Deprecated"),{draw:function(){}}},TRC.math=TRC.math||function(a,b){function c(a,b,c){return"undefined"==typeof c||0===+c?Math[a](b):(b=+b,c=+c,isNaN(b)||"number"!=typeof c||c%1!==0?NaN:(b=b.toString().split("e"),b=Math[a](+(b[0]+"e"+(b[1]?+b[1]-c:-c))),b=b.toString().split("e"),+(b[0]+"e"+(b[1]?+b[1]+c:c))))}return{roundByDecimal:function(a,b){var c=a/b,d=c.toFixed(0),e=c-d;return d*b+b*Math.round(e)},round10:function(a,b){return c("round",a,b)}}}(window,document),function(){function a(a){this._data=a}a.prototype.getId=function(){return this._data.id},a.prototype.getLinkTarget=function(){return this._data.linkTarget},a.prototype.getUrl=function(){return this._data.url},a.prototype.getTitle=function(){return this._data.title},a.prototype.getType=function(){var a=this._data;return a["is-syndicated"]?"sponsored":a["is-in-network"]?"exchange":a["is-native"]?"native":"organic"},a.prototype.getSlot=function(){return this._data.itemIndex},TRC.ItemParser=a}(),function(win,doc){var LightBoxManager=TRC.LightBoxManager=function(a,b,c,d,e){if(this.animationLength=300,this.fps="number"==typeof e?e:TRC.Browser.firefoxUpto(3.5)?20:45,this.listId=c,this.direction="undefined"!=typeof d?d:"ltr",this.origCoords=[0,0],this.cover=null,this.cssResetTopElements={},this.lightbox_container=null,this.whitebox=null,this.whitebox_header=null,this.playerbox=null,this.playerContainer=null,this.animationLoop=null,this.animationEvents=[],this.whiteboxSizeHandler=null,this.position_fixed_works=!1,this.closeButton=null,this.player_width=0,this.player_height=0,this.scalingLock=!1,this.additionalElements={},this.displayTitle=a,this.elementsHaveBeenAdded=!1,b&&"number"==typeof b.clientX?this.origCoords=[b.clientX,b.clientY]:this.origCoords=[this.getScreenWidth()/2,100],TRC.Browser.ie){var f=this.GetZoomFactor();this.origCoords=[Math.round((this.origCoords[0]-doc.documentElement.clientLeft)/f),Math.round((this.origCoords[1]-doc.documentElement.clientTop)/f)]}return this.createLightbox(),this.lightbox_container.style.cursor="wait",this};LightBoxManager.prototype.GetZoomFactor=function(){if(!doc.body.getBoundingClientRect)return 1;var a=doc.body.getBoundingClientRect(),b=a.right-a.left,c=doc.body.offsetWidth;return Math.round(b/c*100)/100},LightBoxManager.prototype.addElements=function(a){"object"!=typeof a&&(a={bottom:a});for(p in a)this.additionalElements[p]||(this.additionalElements[p]=[]),this.additionalElements[p].push(a[p])},LightBoxManager.prototype.createEmbedIframe=function(a,b,c){var d=TRC.baseDomain+"publisher."+a.trc.version+".js",e={};__trcCopyProps(c,e),delete e.link;try{var f=doc.createElement("iframe");f.frameBorder=f.border="0",f.scrolling="no",f.id="_trcLightIframeObj";var g=TRC.Browser.ie&&doc.domain!=win.location.hostname;g&&(f.src='javascript:"<script>window.onload=function(){document.write(\\"<script>document.domain=\''+doc.domain+'\';<\\"+\\"/script>\\");document.close();};</script>"'),b.appendChild(f);var h=f.contentDocument?f.contentDocument:f.contentWindow.document;h.write('<html><head><style>BODY,IFRAME{border:0;margin:0;padding:0;}</style><script type="text/javascript" src="'+d+'" charset="UTF-8"></script></head><body><script>'+(doc.domain!=win.location.hostname?'document.domain="'+doc.domain+'";':"")+"var recomendation = "+__trcJSONify(e)+';var embed_loaded = false;</script><div id="embed-code-container"></div><script>var MAX_RETRIES_BEFORE_NOTICE = 100, MAX_NOTIFICATIONS = 2, numRetries = 0, numNotifications = 0;var loadPlayer = function(){if(window.trc_properties && trc_properties.global["syndication-embed-code"]){var parent_iframe = window.parent.document.getElementById("_trcLightIframeObj");var cont = document.getElementById("embed-code-container");if(!window.embed_loaded){var affiliate = (typeof trc_properties.global["syndicator-affiliate-id"] != "undefined")?trc_properties.global["syndicator-affiliate-id"]:null;embed_code = trc_properties.global["syndication-embed-code"];if(typeof embed_code == "function"){embed_code(cont,recomendation,affiliate);window.embed_loaded = true;}}var obj = cont.getElementsByTagName("object")[0] ? cont.getElementsByTagName("object")[0] : (cont.getElementsByTagName("iframe")[0] ? cont.getElementsByTagName("iframe")[0] : cont.getElementsByTagName("video")[0]);if(parent_iframe!=null && obj!=null) {window.clearInterval(window.checkInt);parent_iframe.parentNode.style.width = parent_iframe.style.width =  Math.max(obj.offsetWidth, obj.width)+"px";parent_iframe.parentNode.style.height = parent_iframe.style.height = Math.max(obj.offsetHeight,obj.height)+"px";}else if (numNotifications < MAX_NOTIFICATIONS && numRetries >= MAX_RETRIES_BEFORE_NOTICE && typeof console != "undefined") {console.log("Notice: LightgBoxManager.createEmbedIframe - video object or parent iframe could not be located. Still trying");numNotifications++;numRetries = 0;}numRetries++;}};window.checkInt = window.setInterval(loadPlayer,100);	</script></body></html>'),TRC.Timeout.set(function(){try{h.close()}catch(a){}},TRC.Browser.ie?3e3:0)}catch(i){return}},LightBoxManager.prototype.renderElements=function(){function a(a,b){var c=doc.createElement("div");switch(a){case"left":c.style.cssFloat=c.style.styleFloat="left";break;case"right":c.style.cssFloat=c.style.styleFloat="left"}"bottom"==a?this.playerbox.parentNode.appendChild(c):this.playerbox.parentNode.insertBefore(c,this.playerBox);try{"function"==typeof b?b(c):"function"==typeof b.render&&b.render(c)}catch(b){__trcError("Error in lightbox sub-element rendering",b)}}this.elementsHaveBeenAdded=!0,"top"in this.additionalElements&&this.additionalElements.top.forEach(a.trcBind(this,"top")),"left"in this.additionalElements&&this.additionalElements.left.forEach(a.trcBind(this,"left")),"right"in this.additionalElements&&this.additionalElements.right.forEach(a.trcBind(this,"right")),"bottom"in this.additionalElements&&this.additionalElements.bottom.forEach(a.trcBind(this,"bottom"))},LightBoxManager.prototype.createLightbox=function(){var width=this.getScreenWidth();this.createCoverIframe(),this.lightbox_container=doc.createElement("div"),this.lightbox_container.style.width=width+"px",this.lightbox_container.style.left="0px",this.lightbox_container.style.top="0px",this.lightbox_container.className="trc_lightbox_base trc_lightbox "+this.listId,this.lightbox_container.onclick=this.close.trcBind(this);var inner_div=doc.createElement("div");with(inner_div.style.display="block",inner_div.className="trc_lightbox_overlay",inner_div.style.width=width+"px",inner_div.style.left="0px",inner_div.style.top="0px",this.lightbox_container.appendChild(inner_div),inner_div=doc.createElement("div"),inner_div.style.display="block",inner_div.className="trc_lightbox_transparent",inner_div.style.width=width+"px",inner_div.style.left="0px",inner_div.style.top="0px",this.lightbox_container.appendChild(inner_div),TRCImpl.cssReset?this.setCssResetDivs(this.lightbox_container,"topDiv"):doc.body.appendChild(this.lightbox_container),this.whitebox=doc.createElement("div"),this.whitebox.className="trc_whitebox",this.whitebox.style.visibility="hidden",this.whitebox.onclick=function(a){a||(a=win.event),a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},inner_div.appendChild(this.whitebox),this.playerbox=doc.createElement("div"),this.playerbox.style.width="0px",this.playerContainer=doc.createElement("div"),this.playerContainer.appendChild(this.playerbox),this.playerContainer.style)width="0px",height="0px",overflow="hidden";with(this.whitebox.appendChild(this.playerContainer),inner_div.style)marginTop="30px",position="fixed";this.position_fixed_works=30===inner_div.offsetTop,this.position_fixed_works||(inner_div.style.position="absolute"),this.lightbox_container.style.height=this.lightbox_container.firstChild.style.height=this.getScreenHeight()+"px"},LightBoxManager.prototype.createCoverIframe=function(){with(this.cover=doc.createElement("iframe"),this.cover.style)width=this.getScreenWidth()+"px",height=this.getScreenHeight()+"px",border=0;this.cover.scrolling="no",this.cover.className="trc_cover_iframe",TRCImpl.cssReset?this.setCssResetDivs(this.cover,"iframe"):doc.body.appendChild(this.cover)},LightBoxManager.prototype.setCssResetDivs=function(a,b){for(var c,d=a,e=TRC.lightBoxCssReset[b].length,f=e-1;f>=0;f--)c=doc.createElement("div"),c.id=TRC.lightBoxCssReset[b][f],c.appendChild(d),d=c;doc.body.appendChild(d),this.cssResetTopElements[b]=d},LightBoxManager.prototype.createHeader=function(a,b){var c=doc.createElement("div");if(c.id="trc_lightbox_header",c.style.display="none","undefined"!=typeof b&&""!=b){var d=doc.createElement("div");d.id="branding_div_lightbox";var e=doc.createElement("img");e.id="branding_img_lightbox",e.src=b,d.style.styleFloat=d.style.cssFloat="ltr"==this.direction?"right":"left",e.style.display="none",d.appendChild(e),c.appendChild(d)}var f=doc.createElement("div");this.displayTitle?f.innerHTML=a:(f.innerHTML="",f.style.height="22px"),c.appendChild(f),c.titlebox=f,this.whitebox_header=c,this.whitebox.insertBefore(c,this.whitebox.firstChild)},LightBoxManager.prototype.setTitle=function(a){this.displayTitle?this.whitebox_header.titlebox.innerHTML=a:this.whitebox_header.titlebox.innerHTML=" "},LightBoxManager.prototype.createLightboxCloseButton=function(){this.closeButton=doc.createElement("div"),this.closeButton.className="trc_whiteboxCloseButton",this.closeButton.innerHTML="x",this.closeButton.onclick=this.close.trcBind(this),this.whitebox.insertBefore(this.closeButton,this.whitebox.firstChild)},LightBoxManager.prototype.startAnimate=function(a,b){var c=function(){for(var c=0;c<a.length;c++)if(!a[c].done)return;b()};a.forEach(function(a){a.elm=a[0],a.prop=a[1],a.cur=a[2],a.end=a[3],a.unit=a[4],a.dur=a[5],a.done=!1,a.steps=Math.ceil(this.fps*a.dur/1e3),a.stepSize=(a.end-a.cur)/a.steps,a.step=0,this.animationEvents.push((a.frameHandler=function(){switch(this.cur+=this.stepSize,this.stepSize*(this.cur-this.end)>0&&(this.cur=this.end),this.prop){case"opacity":this.elm[this.prop]=this.cur,this.elm.filter="alpha(opacity="+100*this.cur+")";break;default:this.elm[this.prop]=this.cur+this.unit}return++this.step>this.steps?(this.done=!0,c(),!0):!1}).trcBind(a))},this)},LightBoxManager.prototype.animationMainLoop=function(){this.animationEvents.forEach(function(a,b,c){null!=a&&a()&&(c[b]=null)})},LightBoxManager.prototype.getScreenWidth=function(){return doc.body.scrollWidth},LightBoxManager.prototype.getScreenHeight=function(){return Math.max(doc.body.scrollHeight,doc.documentElement.scrollHeight)},LightBoxManager.prototype.getLeftMargin=function(){return(this.getScreenWidth()-this.playerContainer.scrollWidth)/2},LightBoxManager.prototype.getScreenPosition=function(){return Math.max(doc.documentElement.scrollTop,doc.body.scrollTop)},LightBoxManager.prototype.fixSyndicatorLogo=function(){if(!this.scalingLock&&"none"!=this.whitebox_header.style.display){var branding_img=this.whitebox_header.getElementsByTagName("img");if(branding_img.length>0)with(branding_img[0].style)height=this.whitebox_header.titlebox.scrollHeight+"px",width="auto",display="block";this.whitebox_header.style.width=this.player_width+"px"}},LightBoxManager.prototype.animateOpening=function(){with(this.scalingLock=!0,this.playerContainer.style.visibility="hidden",this.whitebox.style)width="10px",height="10px",marginLeft=this.origCoords[0]-5+"px",marginTop=this.origCoords[1]-5+"px",visibility="visible";var playerW=this.playerContainer.scrollWidth,playerH=this.playerContainer.scrollHeight;this.startAnimate([[this.whitebox.style,"width",10,playerW,"px",this.animationLength],[this.whitebox.style,"height",10,playerH,"px",this.animationLength],[this.whitebox.style,"marginLeft",this.origCoords[0]-5,this.getLeftMargin(),"px",this.animationLength],[this.whitebox.style,"marginTop",this.origCoords[1]-5,30,"px",this.animationLength]],function(){this.createLightboxCloseButton(),this.whitebox_header.style.display="block",this.scalingLock=!1,this.player_width=playerW-.2,this.player_height=playerH-.2,this.playerContainer.style.visibility="visible";var a=document.body.scrollTop;TRC.Browser.webkit&&(document.body.scrollTop+=20),TRC.Timeout.set(function(){document.body.scrollTop=a},1e3)}.trcBind(this))},LightBoxManager.prototype.resizeWhitebox=function(){return this.scalingLock?void 0:0==this.player_width?void this.animateOpening():void((this.player_width<this.playerContainer.scrollWidth||this.player_height<this.playerContainer.scrollHeight)&&(this.scalingLock=!0,this.startAnimate([[this.playerContainer.style,"width",this.player_width,this.playerContainer.scrollWidth,"px",300],[this.playerContainer.style,"height",this.player_height,this.playerContainer.scrollHeight,"px",300],[this.whitebox.style,"width",this.player_width,this.playerContainer.scrollWidth,"px",300],[this.whitebox.style,"height",this.player_height+this.whitebox_header.clientHeight,this.playerContainer.scrollHeight+this.whitebox_header.clientHeight,"px",300]],function(){this.scalingLock=!1,this.elementsHaveBeenAdded||this.renderElements()}.trcBind(this)),this.player_width=Math.max(this.player_width,this.playerContainer.scrollWidth),this.player_height=Math.max(this.player_height,this.playerContainer.scrollHeight)))},LightBoxManager.prototype.open=function(){TRC.pageManager.pushState(),this.lightbox_container.style.cursor="auto",this.animationLoop=TRC.Interval.set(this.animationMainLoop.trcBind(this),Math.floor(1e3/this.fps)),this.whiteboxSizeHandler=function(){return this.playerContainer.scrollHeight>0&&this.playerContainer.scrollWidth>0&&"0px"!=this.playerbox.style.width?(this.lightbox_container.style.height=this.lightbox_container.firstChild.style.height=this.getScreenHeight()+"px",this.position_fixed_works||(this.whitebox.parentNode.style.top=this.getScreenPosition()+30+"px"),this.fixSyndicatorLogo(),this.resizeWhitebox(),!1):!1}.trcBind(this),this.animationEvents.push(this.whiteboxSizeHandler),this.position_fixed_works||(doc.documentElement.addEventListener?doc.documentElement.addEventListener("scroll",this.whiteboxSizeHandler,!1):doc.documentElement.attachEvent("onscroll",this.whiteboxSizeHandler))},LightBoxManager.prototype.close=function(){this.lightbox_container.onclick=function(){},this.closeButton.onclick=function(){};for(var a in this.additionalElements)this.additionalElements[a].forEach(function(a){"object"==typeof a&&"function"==typeof a.close&&a.close()});TRC.Timeout.set(this.realClose.trcBind(this),500)},LightBoxManager.prototype.realClose=function(){for(var a=this.getLeftMargin(),b=this.playerContainer.getElementsByTagName("object"),c=0;b&&c<b.length;c++){var d=b[c],e=doc.body.appendChild(doc.createElement("div"));e.style.display="none",d.style.display="none",d.parentNode.removeChild(d),e.appendChild(d),TRC.Timeout.set(function(){d.movie="//dummy",d.parentNode.removeChild(d),e.parentNode.removeChild(e)},250)}this.whitebox.removeChild(this.playerContainer),this.whitebox.removeChild(this.whitebox_header),this.position_fixed_works||null==this.whiteboxSizeHandler||(doc.documentElement.addEventListener?doc.documentElement.addEventListener("scroll",this.whiteboxSizeHandler,!1):doc.documentElement.attachEvent("onscroll",this.whiteboxSizeHandler)),this.startAnimate([[this.whitebox.style,"width",this.whitebox.clientWidth,0,"px",this.animationLength],[this.whitebox.style,"height",this.whitebox.clientHeight,0,"px",this.animationLength],[this.whitebox.style,"marginLeft",a,this.getScreenWidth()/2,"px",this.animationLength],[this.whitebox.style,"marginTop",30,this.whitebox.clientHeight/2,"px",this.animationLength],[this.whitebox.style,"opacity",1,0,"",this.animationLength]],function(){doc.body.removeChild(TRCImpl.cssReset?this.cssResetTopElements.topDiv:this.lightbox_container),doc.body.removeChild(TRCImpl.cssReset?this.cssResetTopElements.iframe:this.cover),TRC.Interval.clear(this.animationLoop),this.animationLoop=null,TRC.pageManager.popState()}.trcBind(this)),"function"==typeof win.trc_lightboxClose&&win.trc_lightboxClose()}}(window,document),function(a,b){var c={source:"|v|h|c|t|s|p|o|video|home|category|text|search|photo|other",target:"|v|p|t|m|video|photo|text|mix|"},d="v",e=function(a,b){return a=a.toLowerCase(),-1!==c[b].indexOf("|"+a+"|")?a.substr(0,1):(__trcError('illegal parameter "'+a+'" was passed to trc_ListOriginBuilder method: "set'+b.substr(0,1).toUpperCase()+b.substr(1)+'" \nUsing "video" instead'),"v")},f=TRC.ListOriginBuilder=function(a,b){this.setSource(a||d),this.setTarget(b||"v")};f.prototype.setSource=function(a){d=e(a,"source")},f.prototype.getSource=function(){return d},f.prototype.setTarget=function(a){this.target=e(a,"target")},f.prototype.getTarget=function(){return this.target},f.prototype.toString=function(){return(d+"2"+this.target).replace(/v2v/,"blended")}}(window,document),TRC.net=function(a,b){var c={},d=[],e={loadScript:function(a,c,d,e,f){var g=b.getElementsByTagName("script")[0],h=null;if("js"==c)h=b.createElement("script"),h.type="text/javascript",h.src=a,h.charset="UTF-8",e?h.setAttribute("defer","defer"):f&&h.setAttribute("async","async");else{if("css"!=c)throw new Error("External reference loaded must be of type 'js' or 'css'!");h=b.createElement("link"),h.rel="stylesheet",h.type="text/css",h.href=a}return"function"==typeof d&&(h.addEventListener?(h.addEventListener("load",d,!1),
h.addEventListener("error",d,!1)):h.onreadystatechange=function(){("loaded"==h.readyState||"complete"==h.readyState)&&d.apply(h)}),g.parentNode.insertBefore(h,g),h},checkLoadJsCssFile:function(a,b,d){var e=a.replace(new RegExp("^.*/([^/]+)$"),"$1");try{return"undefined"==typeof c[e]?(c[e]=TRC.net.loadScript(a,b,d),"css"==b&&(c.css=1)):"function"==typeof d&&TRC.Timeout.set(function(){d.apply(c[e])},0),c[e]}catch(f){__trcError("Error trying to load "+a,f)}},fireSimpleHttpRequest:function(a){var b=new Image;b.src=a,d.push(b)}};return e}(window,document),function(a,b){function c(b){if(a.DOMParser){var c=new DOMParser;return c.parseFromString(b,"text/xml")}if(xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),xmlDoc.async=!1,xmlDoc.validateOnParse=!1,!xmlDoc.loadXML(b))throw"XMLParsing failed";return xmlDoc}function d(){function a(){var a=new Array;for(var d in c)c.hasOwnProperty(d)&&null!=c[d]&&(a[a.length]=escape(d)+"="+escape(c[d]));var e=new Date((new Date).getTime()+31536e6);document.cookie=b+"="+escape(a.join("|"))+";path=/;expires="+e.toUTCString()}for(var b="trc_cookie_storage",c=new Object,d=document.cookie.split(/;\s+/),e=0;e<d.length;e++){var f=TRC.text.lsplit(d[e],"=",2),g=unescape(f[0]),h=unescape(f[1]);if(g==b){for(var i=h.split("|"),j=0;j<i.length;j++){var f=i[j].split("=");c[unescape(f[0])]=unescape(f[1])}break}}return this.getValue=function(a){return c.hasOwnProperty(a)?c[a]:null},this.setValue=function(b,d){c[b]=d,a()},this.removeKey=function(a){var b=new Date((new Date).getTime()-31536e6);document.cookie=a+"=0;path=/;expires="+b.toUTCString(),delete c[a]},this}function e(a){var b=a||{};return this.getValue=function(a){return b[a]?b[a]:null},this.setValue=function(a,c){b[a]=c},this.removeKey=function(a){delete b[a]},this.getData=function(){return b},this}function f(b){return this.getValue=function(c){return a[b+"Storage"].getItem(c)},this.setValue=function(c,d){try{a[b+"Storage"].setItem(c,d)}catch(e){}},this.removeKey=function(c){try{a[b+"Storage"].removeItem(c)}catch(d){}},this}function g(b){var c=a[b+"Storage"],d=(new Date).getTime()+"",e="_taboolaStorageDetection";try{if(c.setItem(e,d),c.getItem(e)==d)return c.removeItem(e),c}catch(f){}return null}function h(b){try{if(a.localStorage instanceof Storage&&TRC.useStorageDetection&&g(b))return new f(b)}catch(c){return null}}a.TRC=a.TRC||{};var i,j=!1,k=function(){return this.publisher_id=null,this.item_id=null,this.page_id=null,this.state={},this.stateStack=[],this.getLocalStorageImplementation=function(b,c){if(null!=this.state.privateStorageImpl&&"strict-w3c-storage"!=b)return this.state.privateStorageImpl;var f=a.TRCImpl?a.TRCImpl.global:{};switch(b=b||(f["local-storage-usage"]?f["local-storage-usage"]:"prefer-w3c-storage")){case"strict-w3c-storage":return h("session"===c?"session":"local");case"prefer-w3c-storage":var g=h("local");if(g)return this.state.privateStorageImpl=g;case"prefer-cookies":try{if(document.cookie="trc;0",-1===document.cookie.indexOf("trc;0"))return this.state.privateStorageImpl=new d}catch(i){}default:return this.state.privateStorageImpl=new e}},this.getDummyStorage=function(a){return new e(a)},this.trcParseParams=function(a){if(a&&!owner.item_id)for(var b=a.split("&"),c=0;c<b.length;c++){var d=TRC.text.lsplit(b[c],"=",2);switch(unescape(d[0])){case"item_id":owner.item_id=unescape(d[1]);break;case"publisher_id":owner.publisher_id=unescape(d[1])}}},this.trcGetPublisherParams=function(){for(var a=document.getElementsByTagName("script"),b=0;b<a.length;b++){var c=a[b].src.split("taboola(syndication)?.com/libtrc/")[1];if(c&&a[b].src.search(/taboola(syndication)?.com.*page_management/)>=0){c=c.split("?")[0];var d=c.split("/");owner.page_id=d[0],d.length>2&&(owner.page_id+="/"+d[1]),owner.trcParseParams(a[b].src.split("?")[1])}}},this.getPageData=function(){var b;try{b=a.top,b.TRC=b.TRC||{},b.TRC||(b=a)}catch(c){b=a}return b.taboola_view_id||(b.taboola_view_id=(new Date).getTime()),b.taboola_view_id},this.storeValue=function(a,b){this.storePublisherValue("taboola global",a,b)},this.removeKey=function(a){this.removePublisherKey("taboola global",a)},this.getValue=function(a){return this.getPublisherValue("taboola global",a)},this.storePublisherValue=function(a,b,c){null!=c&&void 0!=c&&this.getLocalStorageImplementation().setValue(a+":"+b,c)},this.getPublisherValue=function(a,b){return this.getLocalStorageImplementation().getValue(a+":"+b)},this.removePublisherKey=function(a,b){return this.getLocalStorageImplementation().removeKey(a+":"+b)},this.sortByLength=function(a,b){return a.domain.lenth-b.domain.length},this.setDomainConfiguration=function(a){try{var b=c(a);if("domains"!=b.documentElement.tagName||b.getElementsByTagName("domain").length<1)throw"Invalid configuration document: "+a;var d=b.getElementsByTagName("domain");this.state.m_publisherDomains={host:[],path:[],query:[]};for(var e=0;e<d.length;e++){var f=d[e],g=this.state.m_publisherDomains[f.getAttribute("type")];if(!(g instanceof Array))throw"Invalid domain type in configuration: "+f.getAttribute("type");g.push({domain:f.text?f.text:f.textContent,keep:f.getAttribute("keep")?!0:!1,staging:f.getAttribute("staging")?!0:!1})}}catch(h){this.state.m_publisherDomains={}}},this.matchOn=function(a,b,c){if(!a||a.length<1)return[];if(a.matching)return a.matching.slice(0);a.matching=[];for(var d=0;d<a.length;d++)b(c,a[d].domain)&&a.matching.push(a[d]);return a.matching.slice(0)},this.getMatchingHosts=function(){return this.matchOn(this.state.m_publisherDomains.host,function(a,b){return a.slice(a.length-b.split(".").length).join(".")==b},a.location.host.split("."))},this.getMatchingPaths=function(){return this.matchOn(this.state.m_publisherDomains.path,function(a,b){return a.slice(0,b.split("/").length).join("/")==b},a.location.pathname.split("/"))},this.getMatchingQuery=function(){return this.matchOn(this.state.m_publisherDomains.query,function(a,b){for(var c=b.split("&"),d=0;d<c.length;d++){for(var e=c[d].split("="),f=!1,g=0;g<a.length;g++){var h=a[g].split("=");f=f||unescape(e[0])==unescape(h[0])&&unescape(e[1])==unescape(h[1])}if(!f)return!1}return!0},a.location.search.replace(/^\?/,"").split("&"))},this.isEmbeddedView=function(){return this.state.m_publisherDomains.host&&this.state.m_publisherDomains.host.length&&this.getMatchingHosts().length<=0&&a.location.host.search(/taboola\w*.com$/)<0},this.isStagingView=function(){return this.isEmbeddedView()?!1:function(){for(var a=0;a<arguments.length;a++)if(function(a){for(;a.length>0;)if(a.shift().staging)return!0}(arguments[a]))return!0;return!1}(this.getMatchingHosts(),this.getMatchingPaths(),this.getMatchingQuery())},this.fixRecommendationURL=function(b){function c(a,b){for(var c=a.substring(1).split("/").reverse(),d=b.substring(1).split("/"),e="",f=0;f<d.length&&f<c.length;f++)for(var g=0;g<c.length;g++){if(0>f-g){e="/"+d.slice(0,f+1).join("/");break}if(c[g]!=d[f-g])break}return b.substring(e.length)}function d(a){for(var b={},c=0;c<a.length;c++)kv=TRC.text.lsplit(a[c],"=",2),b[kv[0]]=kv[1];return b}var e;try{e=new TRC.URL(b)}catch(f){return b}var g=this.getMatchingHosts().sort(this.sortByLength);if(g.length<1)return b;for(;g.length>0&&!g[0].keep;)g.shift();g.length>0&&(e.host=a.location.host);for(var h=this.getMatchingPaths().sort(this.sortByLength);h.length>0&&!h[0].keep;)h.shift();h.length>0&&(e.pathname=h[0].domain+c(h[0].domain,e.pathname));var i=this.getMatchingQuery(),j=e.search.replace(/^\?/,"").split("&");""==j[0]&&j.shift();for(var k=0;k<i.length;k++){for(var l=d(i[k].domain.split("&")),k=0;k<j.length;k++){var m=TRC.text.lsplit(j[k],"=",2).shift(),n=l[m];"undefined"!=typeof n&&(j[k]=m+"="+n,delete l[m])}for(var m in l)j.push(m+"="+l[m])}return e.search=j.length>0?"?"+j.join("&"):"",e.toString()},this.additionalDispatchParams=function(){return null==this.state.moreDispatchParams&&(this.state.moreDispatchParams=this.getCurrentURL().filtered),0==this.state.moreDispatchParams.length?"":"&"+this.state.moreDispatchParams.join("&")},this.getForceTrcCache=function(){return j},this.getCurrentURL=function(){var b=new TRC.URL(a.location.href),c=[],d=[];b.search.replace(/^\?/,"").split(/&/).forEach(function(a){a&&(0==a.search("trc_")||"taboola-debug"==a?(j=new Boolean(a.match(/trc_cache/)).valueOf(),d.push(a)):c.push(a))}),b.search=c.length>0?"?"+c.join("&"):"";var e=new String(b.toString());return e.filtered=d,e},this.initState=function(){"undefined"==typeof this.state&&(this.state={}),this.state.privateStorageImpl=null,this.state.m_publisherDomains={host:[],path:[],query:[]},this.state.moreDispatchParams=null},this.pushState=function(){this.stateStack.push(this.state),delete this.state,this.initState()},this.popState=function(){this.stateStack.length>0&&(this.state=this.stateStack.pop())},this.initState(),this};k.getPageData=function(){return i.getPageData()},k.storeValue=function(a,b){return i.storeValue(a,b)},k.storePublisherValue=function(a,b,c){return i.storePublisherValue(a,b,c)},k.getValue=function(a){return i.getValue(a)},k.getPublisherValue=function(a,b){return i.getPublisherValue(a,b)},k.setDomainConfiguration=function(a){return i.setDomainConfiguration(a)},k.isEmbeddedView=function(){return i.isEmbeddedView()},k.isStagingView=function(){return i.isStagingView()},k.fixRecommendationURL=function(a){return i.fixRecommendationURL(a)},k.additionalDispatchParams=function(){return i.additionalDispatchParams()},k.getCurrentURL=function(){return i.getCurrentURL()},k.pushState=function(){return i.pushState()},k.popState=function(){return i.popState()},TRC.pageManager=i=TRC.pageManager||new k,a.PageManager=a.PageManager||k}(window,document),function(a,b){var c;TRC.bcFlashPlayerBootstrap=function(b){if("object"==typeof a.brightcove&&a.TRCImpl&&TRCImpl.modes)for(var d in a.brightcove.instances)try{var e=a.brightcove.getExperience(d);if(!e.getModule(APIModules.EXPERIENCE).getReady()){"undefined"==typeof c&&(c="onTemplateLoaded",TRC.regsiterForTemplateLoaded(c));continue}if(brightcove.getExperience(d).getModule(APIModules.VIDEO_PLAYER))return void TRC.my_onTemplateLoaded(d)}catch(f){}TRC.Timeout.set(arguments.callee,500)},TRC.bcFlashPlayerExpHandler=function(b){function c(b){if(!a.TRCImpl){var d=arguments;return void TRC.Timeout.set(function(){c.apply(a,d)},100)}var e=modVP.getCurrentVideo();e&&TRCImpl.playVideo({id:1==TRCImpl["brightcove-uses-reference"]?e.referenceId:e.id})}if(!(b in a.brightcove.instances))return!1;var d=a.brightcove.getExperience(b);return"object"!=typeof d?!1:(modVP=d.getModule(APIModules.VIDEO_PLAYER),TRCImpl.getProperty(null,"read-paused-bcplayer")&&d.getModule(APIModules.EXPERIENCE).addEventListener(BCExperienceEvent.CONTENT_LOAD,c),modVP.addEventListener(BCVideoEvent.VIDEO_START,c),modVP.addEventListener(BCMediaEvent.COMPLETE,function(){TRC.dispatch("videoDone",{videoid:a.trc_video_id})}),(modVP.isPlaying()||TRCImpl.getProperty(null,"read-paused-bcplayer"))&&c(null),!0)}}(window,document),function(a,b){TRC.modVP=null;var c=!1,d=!1,e=100,f=0,g=100,h=!1,i=!1,j=!1;TRC.brightcove_support=function(){if(!d&&!c){if("undefined"!=typeof brightcove){if(j||(h=TRC.isBCSmartPlayer(),j=!0),h&&brightcove.api&&brightcove.api.modules.APIModules)i=!0;else if(h){if(e>f)return void TRC.Timeout.set(TRC.brightcove_support,g)}else if("undefined"==typeof APIModules)return void TRC.net.loadScript("//admin.brightcove.com/js/APIModules_all.js","js",function(){TRC.brightcove_support()})}else if(e>f)return void TRC.Timeout.set(TRC.brightcove_support,g);d||(h?TRC.bcSmartPlayerBootstrap():TRC.bcFlashPlayerBootstrap(),c=!0,f++)}},TRC.my_onTemplateLoaded=function(b){return d?void 0:a.TRCImpl?void(d=i?TRC.bcSmartPlayerExpHandler(b):TRC.bcFlashPlayerExpHandler(b)):void TRC.Timeout.set(arguments.callee.trcBind(null,b),100)},TRC.brightcove_playVideo=function(a){var b=a.search(/video/)>=0?a.split("video")[1]:a;return null==modVP?!1:(modVP.loadVideo(b,TRCImpl["brightcove-uses-reference"]?"referenceId":"id"),scroll(0,0),!0)},TRC.regsiterForTemplateLoaded=function(b){var c=null;"function"==typeof a[b]&&(c=a[b]),a[b]=function(a){TRC.my_onTemplateLoaded(a),null!=c&&c(a)}},TRC.brightcoveMedia={reset:function(){TRC.modVP=null,c=!1,d=!1,f=0,h=!1,i=!1,j=!1}}}(window,document),function(a,b){var c,d=!1;TRC.bcSmartPlayerBootstrap=function(){if(!d){if("object"==typeof a.brightcove&&a.TRCImpl&&TRCImpl.modes)for(var b in a.brightcove.experienceObjects)try{var e=a.brightcove.api.getExperience(b);if(e)e.getModule(a.brightcove.api.modules.APIModules.EXPERIENCE).getReady(function(f){f&&e.getModule(a.brightcove.api.modules.APIModules.VIDEO_PLAYER)?(d=f,TRC.my_onTemplateLoaded(b)):"undefined"==typeof c&&(c=a.brightcove.experienceObjects[b].params.templateLoadHandler,TRC.regsiterForTemplateLoaded(c))});else if(TRC.bcFlashPlayerExpHandler(b))return}catch(f){}TRC.Timeout.set(TRC.bcSmartPlayerBootstrap,500)}},TRC.bcSmartPlayerExpHandler=function(b){var c=a.brightcove.api,d=c.modules.APIModules,e=c.events,f=function(a){a&&TRCImpl.playVideo({id:1==TRCImpl["brightcove-uses-reference"]?a.referenceId:a.id})},g=function(b){if(!a.TRCImpl){var c=arguments;return void TRC.Timeout.set(function(){g.apply(a,c)},100)}modVP.getCurrentVideo(f)};if(!(b in a.brightcove.experienceObjects))return!1;var h=c.getExperience(b);return"object"!=typeof h?!1:(modVP=h.getModule(d.VIDEO_PLAYER),TRCImpl.getProperty(null,"read-paused-bcplayer")&&h.getModule(d.EXPERIENCE).addEventListener(e.ExperienceEvent.TEMPLATE_READY,function(a){h.getModule(d.EXPERIENCE).removeEventListener(e.ExperienceEvent.TEMPLATE_READY,arguments.callee),modVP.getCurrentVideo(f)}),modVP.addEventListener(e.MediaEvent.BEGIN,g),modVP.addEventListener(e.MediaEvent.COMPLETE,function(){TRC.dispatch("videoDone",{videoid:a.trc_video_id})}),TRCImpl.getProperty(null,"read-paused-bcplayer")?g(null):modVP.getIsPlaying(function(a){a&&g(null)}),!0)},TRC.isBCSmartPlayer=function(){if(brightcove&&brightcove.api&&brightcove.api.modules.APIModules)return!0;for(var a=document.getElementsByClassName("BrightcoveExperience"),b=0;b<a.length;b++){var c=a[b];if(c.data&&-1!=c.data.toLowerCase().indexOf("includeapi=true"))return!0;for(var d=c.getElementsByTagName("param"),e=0;e<d.length;e++){var f=d[e];if(f.name&&f.value&&"includeapi"==f.name.toLowerCase()&&"true"==f.value.toLowerCase())return!0}}return!1}}(window,document),function(a,b){function c(a,b,c){return"object"!=typeof c&&(c={data:c}),c.player_id=a,TRC.dispatch("kaltura_"+b,c),c}function d(b,d,e){var f,g,h,i="playerPaused playerUpdateNewAsset playerProgress hasOpenedFullScreen hasCloseFullScreen captureThumbnailSuccess captureThumbnailFailed endEntrySession".split(" ");if(a.trc_video_id){trc_video_id=null;try{delete a.trc_video_id}catch(j){}}g=e+b+"playerPlayed",a[g]=function(a){h=!0,a=c(b,"playerPlayed",a);var e=__trcCopyProps(a,{});e.id=d.evaluate("{entry.id}")||d.evaluate("{mediaProxy.entry.id}"),TRCImpl.playVideo(e)},d.addJsListener("playerPlayed",g),f=e+b+"playerPlayEnd",a[f]=function(a){a=c(b,"playerPlayEnd",a),a.videoid=trc_video_id,TRC.dispatch("videoDone",a)},d.addJsListener("playerPlayEnd",f),f=e+b+"playerUpdatePlayhead",a[f]=function(d){h||a[g](d),c(b,"playerUpdatePlayhead",d)},d.addJsListener("playerPlayEnd",f),i.forEach(function(f,g,h){var i=e+b+f;a[i]=c.trcBind(this,b,f),d.addJsListener(f,i)})}var e,f="onKalturaPlayerReady",g=500,h=0,i=function(){return Math.floor(2147483648*Math.random()).toString(36)},j=function(a){return a=a.replace(/\s|\r|\n/g,""),a.substr(0,15)+a.length+a.substr(a.length-15)};TRC.kaltura_support=function(){var c,k,l,m,n,o,p,q,r;if(!TRC.kaltura_API&&!e){if(c="undefined"!=typeof TRCImpl.global["player-global-reference"]?TRCImpl.global["player-global-reference"]:TRCImpl.video_player_reference,k="trc_cb_"+i()+"handleKalturaEvent",c){if(r=a[c],r&&"string"==typeof r&&(r=b.getElementById(r)),!r||!r.addJsListener)return h+=1,void(g>h?setTimeout(TRC.kaltura_support.trcBind(TRC),20):__trcError("TRC.kaltura_support: can not find a player. reference: '"+c+"', retry: "+h+" times."));TRC.kaltura_API=r,d(r.id,TRC.kaltura_API,k)}else window.KWidget?KWidget.addReadyCallback(function(a){TRC.kaltura_API||(TRC.kaltura_API=b.getElementById(a),d(a,TRC.kaltura_API,k))}):!function(b){playerCallbackRescan=TRCImpl.global["player-callback-rescan"],l=TRCImpl.video_player_callback||f,m=a[l],n=m?j(m.toString()):null,o=j(b.toString()),a[l]=b,!m&&playerCallbackRescan&&(q=setTimeout(function(){var c=a[l];h+=1,c&&j(c.toString())!==o?(m=c,n=j(c.toString()),a[l]=b):100>h&&(q=setTimeout(arguments.callee.trcBind(this,b),20))},20))}(function(a){if(!p){if(q&&(clearTimeout(q),q=null),p=!0,m&&j(m.toString())==n){try{m(a)}catch(c){}m=null}p=!1,TRC.kaltura_API||(TRC.kaltura_API=b.getElementById(a),d(a,TRC.kaltura_API,k))}});e=!0}},TRC.kaltura_playVideo=function(a){return TRC.kaltura_API?(TRC.kaltura_API.insertMedia?TRC.kaltura_API.insertMedia("-1",a,"true"):TRC.kaltura_API.sendNotification&&TRC.kaltura_API.sendNotification("changeMedia",{entryId:a}),scroll(0,0),!0):!1}}(window,document),function(a,b){var c=TRC.ooyala_API=null;TRC.ooyala_support=function(){if(!TRC.ooyala_API){var b=function(a){for(var b=0;b<a.length;b++)if(a[b].src){var c=a[b].src.match(new RegExp("ooyala\\.com/player\\.js.*callback=([^&]+)"));if(c&&c.length>1)return c[1]}return!1}(document.getElementsByTagName("script"));if(0==b&&a.OOYALA_PLAYER_JS&&(b=a.OOYALA_PLAYER_JS.customerCallbackName),0==b)return void __trcWarn("Ooyala link_target set, but no Ooyala player with JS API found!");var d=null;if(TRC.ooyala_API=c=function(){if(null!=d)return d;var a=document.getElementsByClassName("OoyalaVideoPlayer");return null!=a&&a.length>0?d=a[0]:void 0},a.trc_video_id){trc_video_id=null;try{delete a.trc_video_id}catch(e){}}var f=!1,g=function(a,b,c){"object"!=typeof c&&(c={data:c}),c.player_id=a,f||(f=!0),TRC.dispatch("ooyala_"+b,c)},h=b.split(".");b=h.pop();for(var i=a;h.length&&i;){var j=h.shift();i="object"!=typeof i[j]?i[j]={}:i[j]}var k="function"==typeof i[b]?i[b]:null;i[b]=function(){try{g.apply(a,arguments)}catch(b){}null!=k&&k.apply(a,arguments)},i[b].trc=!0,TRC.listen(["ooyala_startContentDownload","ooyala_stateChanged"],function(a){if(null!=c()&&("ooyala_stateChanged"!=a.type||"playing"==a.state)){var b=__trcCopyProps(a,{});b.id=c().getCurrentItem().embedCode,TRCImpl.playVideo(b)}}),TRC.listen(["ooyala_currentItemEmbedCodeChanged","ooyala_embedCodeChanged"],function(b){if(a.trc_video_id){var c=__trcCopyProps(b,{});c.id=b.embedCode,TRCImpl.playVideo(c)}}),TRC.listen("ooyala_playComplete",function(a){TRC.dispatch("videoDone",{videoid:trc_video_id,player_id:a.player_id})})}},TRC.ooyala_playVideo=function(a){return c?(c().setQueryStringParameters({embedCode:a,autoplay:1}),scroll(0,0),!0):!1}}(window,document),function(a,b){var c=TRC.PostRenderQueue=function(){return this.backend=[],this};c.prototype.pushBack=function(a,b){__trcDebug("postRenderQueue.pushBack("+a+")"),this.backend.push({name:a,func:b})},c.prototype.pushFront=function(a,b){__trcDebug("postRenderQueue.pushFront("+a+")"),this.backend.unshift({name:a,func:b})},c.prototype.popFront=function(){if(0==this.backend.length)return null;var a=this.backend.shift();return"function"==typeof a?{name:"unknown",func:a}:a}}(window,document),function(){TRC.RboxMap=function(){var a,b=7,c="13",d="trc_map",e={},f=!1;return this.isValidForMapping=function(a){var e,f,g,h,i=(new Date).getTime(),j=864e5*b;if(a){if(e=a.getValue(d),!e)return!0;if(h=e.split(";"),f=h[0],g=h[1],c>g)return a.removeKey(d),!0;if(i-f>j)return a.removeKey(d),!0}return!1},this.setStorage=function(){var b=(new Date).getTime();try{a.setValue(d,b+";"+c)}catch(e){}},this.init=function(){try{return a=TRC.pageManager.getLocalStorageImplementation("strict-w3c-storage","local"),this.isValidForMapping(a)?this:{disabled:!0}}catch(b){return{disabled:!0}}},this.sendDebugMap=function(a){try{f||(f=!0,this.setStorage()),e[a]?e[a]++:(e[a]=1,TRC.modDebug.logMessageToServer(4,a))}catch(b){}},this.init()}}(window.document),!function(a,b){function c(a,b,c){c=c||"en";var d={caption:a&&a.caption||b&&b.caption||o[c]&&decodeURIComponent(o[c])||"Read More",boxSelector:a&&a.boxSelector||b&&b.boxSelector||null,threshold:a&&a.threshold||b&&b.threshold||1100,backgroundColor:a&&a.backgroundColor||b&&b.backgroundColor||"#fff",minimizedSize:a&&a.minimizedSize||b&&b.minimizedSize||800,scrollSize:a&&a.scrollSize||b&&b.scrollSize||800,buttonTop:a&&a.buttonTop||b&&b.buttonTop||48,buttonBottom:a&&a.buttonBottom||b&&b.buttonBottom||28,divTop:a&&a.divTop||b&&b.divTop||38,gradient:a&&a.gradient||b&&b.gradient||40};return d}function d(a){var b=a.backgroundColor;return"."+l+" {max-height:inherit}."+l+".tbl-forkorts-article-active  {max-height:"+a.minimizedSize+"px;overflow: hidden;position: relative;}.tbl-read-more-btn {display: inline-block!important;margin: "+a.buttonTop+"px 0 "+a.buttonBottom+"px !important;line-height: 38px!important;text-align: center!important;white-space: nowrap!important;vertical-align: middle!important;-ms-touch-action: manipulation;touch-action: manipulation;cursor: pointer!important;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;background-image: none!important;border: 1px solid #93abbc!important;color: #326891!important;background-color: #edf2f5!important;border-color: #2e6da4;height: 38px!important;width: 250px!important;font-size: 15px!important;font-weight: bold!important;border-radius: 3px!important;font-family: sans-serif!important;}.tbl-read-more-btn:hover {background-color: #bed0dc!important;border-color: #7399b3!important;color: #326891!important;}.tbl-read-more-box {position: absolute;z-index: 4;left: 0;right:0;bottom: 0;display: none;text-align: center;padding: "+a.divTop+"px 12px 12px;background: -moz-linear-gradient(top,  rgba(255,255,255,0) 0%,  "+b+"  "+a.gradient+"%,  "+b+"  100%);background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(255,255,255,0)), color-stop(50%, "+b+" ), color-stop(100%, "+b+" ));background: -webkit-linear-gradient(top,  rgba(255,255,255,0) 0%, "+b+"  "+a.gradient+"%, "+b+"  100%);background: -o-linear-gradient(top,  rgba(255,255,255,0) 0%, "+b+"  "+a.gradient+"%, "+b+"  100%);background: -ms-linear-gradient(top,  rgba(255,255,255,0) 0%, "+b+"  "+a.gradient+"%, "+b+"  100%);background: linear-gradient(to bottom,  rgba(255,255,255,0) 0%, "+b+"  "+a.gradient+"%, "+b+"  100%);filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00ffffff', endColorstr='"+b+"',GradientType=0 );}."+l+"-active .tbl-read-more-box{display:block;}"}function e(){return a.pageYOffset||b.documentElement.scrollTop||b.body.scrollTop}function f(a){var c=b.querySelector("."+l);a.preventDefault(),a.stopPropagation(),c.classList.remove(l+"-active"),this.sendEvent("readmore",{},null,!0)}function g(a,c){var d=b.createElement("div");return d.className="tbl-read-more-box",d.innerHTML="<a id ='"+n+"_"+c+"' class='tbl-read-more-btn' href='#'>"+a.caption+"</a>",d}function h(b,c){var d=a.trc_debug_level;a.trc_debug_level=3,__trcDebug("Read More : "+b+" - "+c),a.trc_debug_level=d}function i(c,d){var e=c.context||d.context;"parent"===e&&(a=a.parent,b=a.parent.document),"top"===e&&(a=a.top,b=a.top.document)}function j(a,c){var d=c||"kortWidgetCssStyle",e=b.querySelector("#"+d);e&&e.parentNode.removeChild(e),e=b.createElement("div"),e.id=d,e.innerHTML=["&shy;","<style>",a,"</style>"].join(""),b.documentElement.appendChild(e)}function k(k){try{TRC.tlf&&console.time("init Read More");var o,p=c(k.readMorePageConfig,k.readMoreConfig,k.trc.language),q=k.isReadMoreDebug;i(k.readMorePageConfig,k.readMoreConfig),a.matchMedia&&p.boxSelector?(o=b.querySelector(p.boxSelector),o?b.querySelector("."+l)!==o?o.offsetHeight>=p.threshold&&e()<p.scrollSize?(j(d(p)),o.className+=m,o.appendChild(g(p,k.id)),b.querySelector("#"+n+"_"+k.id).addEventListener("click",f.trcBind(k),!1)):q&&h("dimensions exception",k.mode_name):q&&h("box content already in use",k.mode_name):q&&h("box content not detected",k.mode_name)):q&&h("no box selector defined",k.mode_name),TRC.tlf&&console.timeEnd("init Read More")}catch(r){__trcError("Error read more init",r)}}var l="tbl-forkorts-article",m=" "+l+" "+l+"-active",n="tbl-read-more-box-btn",o={de:"Weiterlesen",el:"%CE%94%CE%B9%CE%B1%CE%B2%CE%AC%CF%83%CF%84%CE%B5%20%CE%A0%CE%B5%CF%81%CE%B9%CF%83%CF%83%CF%8C%CF%84%CE%B5%CF%81%CE%B1",en:"Read%20More",es:"Leer%20M%C3%A1s",fr:"Lire%20La%20Suite",he:"%D7%A7%D7%A8%D7%90%20%D7%A2%D7%95%D7%93",hi:"%E0%A4%94%E0%A4%B0%20%E0%A4%AA%E0%A4%A2%E0%A4%BC%E0%A5%87%E0%A4%82",it:"Per%20saperne%20di%20pi%C3%B9",jp:"%E7%B6%9A%E3%81%8D%E3%82%92%E8%AA%AD%E3%82%80",ko:"%EC%9E%90%EC%84%B8%ED%9E%88%EB%B3%B4%EA%B8%B0",nl:"Lees%20Meer",pt:"Leia%20Mais",ru:"%D1%87%D0%B8%D1%82%D0%B0%D1%82%D1%8C%20%D0%B4%D0%B0%D0%BB%D0%B5%D0%B5",ta:"%E0%AE%AE%E0%AF%87%E0%AE%B2%E0%AF%81%E0%AE%AE%E0%AF%8D%20%E0%AE%AA%E0%AE%9F%E0%AE%BF%E0%AE%95%E0%AF%8D%E0%AE%95",th:"%E0%B8%AD%E0%B9%88%E0%B8%B2%E0%B8%99%E0%B9%80%E0%B8%9E%E0%B8%B4%E0%B9%88%E0%B8%A1%E0%B9%80%E0%B8%95%E0%B8%B4%E0%B8%A1"};TRC.setReadMore=k}(window,document),function(a,b){var c="trc_slider",d=c+"_animate",e="vertical",f="horizontal",g="top",h="bottom",i="left",j="right",k=44,l=TRC.SliderManager=function(l){var m,n=b.createElement("div"),o=TRC.dom.createAugmentingContainers(3,n),p=TRC.dom.generateAugmentationPrefix(o);switch(this.rbox=l,this.sliderContainer=n,this.accumulatedScroll=0,this.scrollRefElement=l.trc.getFunction(l.mode_name,"slider-scroll-ref-element"),this.slideFrom=l.trc.getProperty(l.mode_name,"slider-slide-from"),this.minEffectiveScrollSize=l.trc.getProperty(l.mode_name,"slider-min-effective-scroll-size"),this.transitionDuration=l.trc.getProperty(l.mode_name,"slider-transition-duration"),this.transitionDelay=l.trc.getProperty(l.mode_name,"slider-transition-delay"),this.backgroundColor=l.trc.getProperty(l.mode_name,"slider-background-color"),this.closeBtnFontSize=l.trc.getProperty(l.mode_name,"slider-close-btn-font-size"),this.closeBtnSize=l.trc.getProperty(l.mode_name,"slider-close-btn-size"),this.closeBtnColor=l.trc.getProperty(l.mode_name,"slider-close-btn-color"),this.sliderZIndex=parseInt(l.trc.getProperty(l.mode_name,"slider-z-index"),10),this.lastScrollTop=this.getScrollTop(),this.closeBtnNeedsTouchPadding=TRC.Device.isTouchDevice&&parseInt(this.closeBtnSize,10)<k,this.slideFrom){case g:case h:this.slideDirection=e;break;case i:case j:this.slideDirection=f}TRC.dom.injectStyle(this.createCSS(p)),TRC.dom.addClass(this.sliderContainer,c),this.createCloseBtn(),this.sliderContainer.appendChild(this.closeBtn),this.closeBtnNeedsTouchPadding?(this.sliderContainer.appendChild(this.closeBtnTouchPadding),m=this.closeBtnTouchPadding):m=this.closeBtn,this.sliderContainer.appendChild(l.outermostContainer),b.body.appendChild(o[0]),TRC.eventDelegator.subscribe("onrender",function(){this.slideOut(),TRC.dom.on(this.scrollRefElement,"scroll",this.sliderScrollHandler.trcBind(this).trcThrottle(10)),(/(iPad|iPhone|iPod touch);.*CPU.*OS (4|5|6|7)_\d/.test(navigator.userAgent)||/CriOS/.test(navigator.userAgent))&&(TRC.dom.on(a,"touchstart",this.sliderScrollHandler.trcBind(this)),TRC.dom.on(a,"touchend",this.sliderScrollHandler.trcBind(this)),TRC.dom.on(a,"touchmove",this.sliderScrollHandler.trcBind(this))),setTimeout(function(){TRC.dom.addClass(this.sliderContainer,d)}.trcBind(this),0)}.trcBind(this),l.container.id),TRC.dom.on(m,"click",this.closeClickHandler.trcBind(this))};l.prototype.sliderScrollHandler=function(){var c,d,e=this.getScrollTop(),f="up",g="down",h=b.body.scrollHeight-(a.innerHeight||b.documentElement.clientHeight),i=function(){var b=10;return TRC.Device.isTouchDevice&&Math.abs(Math.round(this.sliderContainer.clientWidth)-Math.round(a.innerWidth))>b};return i.trcBind(this)()?(this.slideOut(),!0):(e>this.lastScrollTop?c=g:e<this.lastScrollTop&&(c=f),void(e>=0&&(this.scrollRefElement!==a||h>=e)&&(this.lastScrollDir!=c&&(this.accumulatedScroll=0),d=c==g?-1:1,this.accumulatedScroll+=(this.lastScrollTop-e)*d,this.accumulatedScroll>=this.minEffectiveScrollSize&&(c==f?this.sliderShown||this.slideIn():c==g&&this.slideOut()),this.lastScrollTop=e,this.lastScrollDir=c,clearTimeout(this.scrollAccumulationTimer),this.scrollAccumulationTimer=setTimeout(function(){this.accumulatedScroll=0}.trcBind(this),200))))},l.prototype.getScrollTop=function(){return this.scrollRefElement===a?TRC.dom.getPageVerticalScroll()||document.documentElement.scrollTop:this.scrollRefElement.scrollTop},l.prototype.closeClickHandler=function(){TRC.dom.addClass(this.sliderContainer,"trc_user_closed"),this.rbox.sendEvent("close",{},null,!0)},l.prototype.createCSS=function(a){var b=[],c=TRC.css.utils.generateCssRuleWithVendorPrefixes,d=this.slideDirection==e?"translateY":"translateX",f=-1!=[h,j].indexOf(this.slideFrom)?"100%":"-100%";return b.push(a+".trc_slider {position: fixed; z-index: "+this.sliderZIndex+";}"),b.push(a+".trc_slider .trc_related_container {padding: 5px 5px 0; }"),b.push(a+".trc_slider.trc_user_closed {display: none;}"),b.push(a+".trc_slider_close_btn { font-family: Arial, helvetica, sans-serif; float: right; font-size: "+this.closeBtnFontSize+"; font-weight: bold; height: "+this.closeBtnSize+"; width: "+this.closeBtnSize+"; line-height: "+this.closeBtnSize+"; vertical-align: baseline; text-align: center; color: "+this.closeBtnColor+"; background-color: "+this.backgroundColor+"; }"),this.slideFrom==g&&b.push(a+".trc_slider_close_btn {position: absolute; right: 0; top: 0; z-index: "+(this.sliderZIndex+1)+"; }"),this.closeBtnNeedsTouchPadding&&b.push(a+".trc_slider_close_touch_padding {position: absolute; right: 0; top: 0; height: "+k+"px; width: "+k+"px; z-index: "+(this.sliderZIndex+2)+"; }"),TRC.Browser.compatibility.cssTransforms&&(b.push(a+".trc_slider {"+this.slideFrom+": 0;"+c("transform",d+"("+f+")")+"}"),b.push(a+".trc_slider.trc_slide_in {"+c("transform",d+"(0)")+"}"),b.push(a+".trc_slider.trc_slider_animate { "+c("transition-duration",this.transitionDuration+"ms")+c("transition-delay",this.transitionDelay+"ms")+c("transition-property","transform")+"}"),b.push("@media only screen and (max-device-width: 600px) and (orientation: landscape) {"+a+".trc_slider.trc_slide_in {"+c("transform",d+"("+f+")")+"}}")),this.slideDirection==e?b.push(a+".trc_slider {width: 100%; left: 50%; margin-left: -50%; }"):b.push(a+".trc_slider { bottom: 0; }"),b.push(a+".trc_slider .trc_related_container {background-color: "+this.backgroundColor+"; }"),b.join("")},l.prototype.createCloseBtn=function(){this.closeBtn=b.createElement("div"),this.closeBtn.innerHTML="&times;",TRC.dom.addClass(this.closeBtn,"trc_slider_close_btn"),this.closeBtnNeedsTouchPadding&&(this.closeBtnTouchPadding=b.createElement("div"),TRC.dom.addClass(this.closeBtnTouchPadding,"trc_slider_close_touch_padding"))},l.prototype.slideIn=function(){TRC.Browser.compatibility.cssTransforms?/trc_slide_in/.test(this.sliderContainer.className)||TRC.dom.addClass(this.sliderContainer,"trc_slide_in"):this.sliderContainer.style[this.slideFrom]="0px",this.sliderShown=!0},l.prototype.slideOut=function(){var a=this.slideDirection==f?"clientWidth":"clientHeight";TRC.Browser.compatibility.cssTransforms?TRC.dom.removeClass(this.sliderContainer,"trc_slide_in"):this.sliderContainer.style[this.slideFrom]="-"+this.sliderContainer[a]+"px",this.sliderShown=!1}}(window,document),function(a,b){TRC.SpotlightLoader={load:function(a){this.shouldLoad(a)&&(this.loadedScript?TRC.dispatch("trc_afterRboxDraw"):(__trcDebug("Detected Spotlight Administrator("+a.trc.pi+")"),TRC.backstageDomainPrefix=a.trc.bdp,this.loadedScript=TRC.URL.prototype.switchProtocol.call(TRC.getBackstageUrl()+"resources/js/1.1.0/spotlight.js",TRC.PROTOCOL),TRC.Manager.prototype.loadExternal(this.loadedScript,"js")))},shouldLoad:function(a){return!(!b.querySelectorAll||TRC.Device.isTouchDevice||!a||!a.trc||"1"!=a.trc.sl)},registerOnMainContainer:function(a,b){a&&this.shouldLoad(b)&&a.setAttribute("data-spotlight-publisher-id",b.trc.pi)}}}(window,document),function(a,b){TRC.text={replaceAll:function(a,b,c,d){var e;return"undefined"!=typeof b&&"undefined"!=typeof c&&b!==c?(e=new RegExp(b,"gi"),a.replace(e,"function"==typeof c&&"object"==typeof d?c.trcBind(d):c)):a;
},lsplit:function(a,b,c){var d=a.split(b);return d.slice(0,c-1).concat(d.length>=c?d.slice(c-1).join(b):[])},parseCSV:function(a){for(var b=a.split(","),c=[];b.length;){var d=b.shift();if('"'==d[0]){do{if('"'==d.slice(1).replace(/""/g,"").slice(-1))break;d+=","+b.shift()}while(b.length);c.push(d.slice(1,d.length-1).replace(/""/g,'"'))}else c.push(d)}return c},toStringList:function(a){if(!a)return[];if(!(a instanceof Array))return[""+a];var b=[];return a.forEach(function(a){a&&b.push(""+a)}),b},htmlUnescape:function(a){return String(a).replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&#34;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},encodeHTML:function(a){return"string"==typeof a&&a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}}}(window,document),function(a,b){TRC.TrcCache=function(a,b){var c,d=TRC.pageManager,e=a.storageType||"session",f=d.getLocalStorageImplementation("strict-w3c-storage",e),g=0,h=a.cacheSize||5,i=a.ttl||12e5,j=a.cacheName||"trc_cache";return f?(this.extractKey=function(a){for(var b=a.it,c=a.ii,d=b+"="+c,e=[],f=0;f<a.r.length;f++)e.push(","+a.r[f].uip+"="+a.r[f].uim);return this.sortByPlacements(e),d+=e.join()},this.cacheResponse=function(a,b){TRC.tlf&&console.time("in cacheResponse");var d=this.setCacheResponse(a,b);return g>h&&this.removeToLimit(),f.setValue(j,__trcJSONify(c.getData())),TRC.tlf&&console.timeEnd("in cacheResponse"),d},this.setCacheResponse=function(a,b){var e=(new Date).getTime();try{c.setValue(a,{s:e,r:b,vi:d.getPageData()}),g++,this.setCacheClean(a)}catch(f){return!1}return!0},this.getCacheResponse=function(a){TRC.tlf&&console.time("in getCacheResponse");var b=c.getValue(a);return b&&!this.isOverTtl(c.getValue(a).s)?(TRC.tlf&&console.timeEnd("in getCacheResponse"),{response:c.getValue(a).r,viewId:c.getValue(a).vi}):(TRC.tlf&&console.timeEnd("in getCacheResponse"),null)},this.isOverTtl=function(a){var b=(new Date).getTime();return b-a>i?!0:!1},this.setCacheClean=function(a){TRC.Timeout.set(function(){TRC.tlf&&console.time("in setCacheClean"),c.removeKey(a),f.setValue(j,__trcJSONify(c.getData())),TRC.tlf&&console.timeEnd("in setCacheClean")},i)},this.cleanCache=function(a){for(var b,d=a||TRC.util.keys(c.getData()),e=0;e<d.length;e++)b=d[e],this.isOverTtl(c.getValue(b).s)&&this.removeKey(b);f.setValue(j,__trcJSONify(c.getData()))},this.removeKey=function(a){c.getValue(a)&&(c.removeKey(a),g--)},this.getTrcCache=function(){var a=f.getValue(j)||{};try{if(a)return d.getDummyStorage(__trcUnJSONify(a))}catch(b){return d.getDummyStorage()}},this.removeToLimit=function(a){a=a||TRC.util.keys(c.getData());var b,d=g-h;this.sortByStamp(a);for(var e=0;d>e;e++)b=a.shift(),this.removeKey(b)},this.sortByPlacements=function(a){for(var b,c,d=1;d<=a.length-1;++d){for(b=a[d],c=d;c>0&&a[c-1]>=b;)a[c]=a[c-1],--c;a[c]=b}},this.sortByStamp=function(a){for(var b,d,e,f=1;f<=a.length-1;++f)for(b=c.getValue(a[f]).s,e=f;e>0&&c.getValue(a[e-1]).s>=d;)d=a[e],a[e]=this.keys[e-1],a[e]=d,--e},this.init=function(){TRC.tlf&&console.time("in init cache trc");var a;return b?void f.removeKey(j):(c=this.getTrcCache(),a=TRC.util.keys(c.getData()),g=a.length,this.cleanCache(a),g>h&&this.removeToLimit(a),void(TRC.tlf&&console.timeEnd("in init cache trc")))},this.isValidCache=!0,void this.init()):{isValidCache:!1}}}(window,document),function(a,b){TRC.TRCParser={parseModeName:function(a){return a.mode||null},parsePlacementName:function(a){return a.placement||null},parseABModeName:function(a,b){var c=this.parseTestVariant(b);return null===c?null:"ab_"+a+"_"+c},parseBaseModeName:function(a){if("object"!=typeof a)return null;var b=a["video-list"];return"object"==typeof b&&b["base-mode"]?b["base-mode"]:null},parseTestVariant:function(a){var b;return"object"!=typeof a?null:(b=a["video-list"],a.uvpw&&"object"==typeof b&&b["test-variant"]?b["test-variant"]:"undefined"==typeof a["test-variant"]?null:a["test-variant"])},IsBaseModeAndABModeExist:function(a){var b=this.parseBaseModeName(a),c=this.parseTestVariant(a);return b&&c?!0:!1},parseBaseModeAndABModeName:function(a){var b=this.parseTestVariant(a),c=this.parseBaseModeName(a);return null!==c&&null!==b?"ab_"+c+"_"+b:null},getItemCount:function(a){return a["video-list"].video.length},hasVariantMismatch:function(a){var b=a["test-variant"],c=a["video-list"]["test-variant"];return b&&c?b!==c:!1}}}(window,document),function(a,b){var c=TRC.Manager=function(c,e){var f=500;return this.numOfResetCssDivs=3,this.eventLogger=[],this.eventCounter={},this.NO_CONTENT={noItems:"NO_ITEMS",mute:"MUTE",error:"ERROR",timeOut:"TIMEOUT"},this.reset=function(){this.reset=!0,this.daisyChainReset();for(var b in TRC.callbacks)TRC.callbacks.hasOwnProperty(b)&&b.search("recommendations")>=0&&(TRC.callbacks[b]=function(){});this.preloadRequestLoader&&(TRC.Timeout.clear(this.preloadRequestLoader.timeout),this.preloadRequestLoader.parentNode.removeChild(this.preloadRequestLoader),this.preloadRequestLoader=null);try{delete a.trc_video_id,delete a.trc_article_id,delete a.trc_item_url,delete a.trc_testmode,delete a.trc_adPlayer}catch(c){a.trc_video_id=null,a.trc_article_id=null,a.trc_item_url=null,a.trc_testmode=null,a.trc_adPlayer=null}for(var d in this.boxes)if(this.boxes.hasOwnProperty(d)){if(this.boxes[d].container)for(this.boxes[d].container.className=this.boxes[d].container.className.replace(" trc_related_container",""),delete this.boxes[d].container._trc_container,delete this.boxes[d].container._trc_anonbox;this.boxes[d].container.hasChildNodes();)this.boxes[d].container.removeChild(this.boxes[d].container.lastChild);TRC.Timeout.reset(),TRC.Interval.reset(),delete this.boxes[d]}},this.renderRBox=function(a,b){var c=document.trcGetParentByClassName(a.getContainer(),"trc_rbox_container");c.style.display="block",a.load(function(){c.style.display="none"},b)},this.getConfig=function(b,c){return"undefined"!=typeof b[c]?b[c]:"undefined"!=typeof a["trc_"+c]&&null!=a["trc_"+c]?b[c]=a["trc_"+c]:"undefined"!=typeof this[c]&&null!=this[c]?b[c]=this[c]:b[c]=this[c]},this.getItemId=function(){var b=this.itemid;return a.trc_video_id||""==a.trc_video_id?b=a.trc_video_id:(a.trc_article_id||""==a.trc_article_id)&&(b=a.trc_article_id),""==b&&(b=this.getAutoItemMeta("item-id",null,this.urlPreNormalizer,this["normalize-item-id"])),this.itemid=b},this.getReferrer=function(){var a="";if(this.referrer)return this.referrer;this.referrer=function(){for(var a=document.head.getElementsByTagName("link"),b=0;b<a.length;b++)if("referrer"==a[b].rel)return a[b].href;return null}();try{a=decodeURI(top.window.document.referrer)}catch(b){a="",__trcDebug("TRC.Manager.getReferrer : rendering in cross domain iframe")}return this.referrer=this.referrer?this.referrer:a&&!/https?:\/\/(\w+)\.taboola(syndication)?\.com/.test(a)?a.substr(0,400):a.split("?")[0]},this.getListSize=function(a){return a.visible?this.calculateAutoListSize(a):0},this.getExtraResponsiveRecom=function(a){var b=this.getProperty(a.mode_name,"responsive-extra-columns"),c=this.getProperty(a.mode_name,"rows");return b?b*(c?c:1):0},this.getResponsiveRecommendations=function(b){var c,d,e,f,g=0,h="function"==typeof a.matchMedia;c=this.getMatchMediaRuleMaxWidth(b,h);for(var i=0,j=b.length;j>i;i++)f=b[i],d=f.cells*f.rows,e=h&&(a.matchMedia("(min-width: "+f.minWidth+"px)"+(isNaN(f.maxWidth)?"":" and (max-width: "+f.maxWidth+"px)")).matches||a.matchMedia("screen and (min-height: "+f.minWidth+"px)"+(isNaN(f.maxWidth)?"":" and (max-height: "+f.maxWidth+"px)")+" and (orientation: portrait)").matches),(isNaN(c)||f.minWidth<=c||0>c||e)&&d>g&&(g=d);return{listSize:g,rule:g?f:null}},this.getMatchMediaRuleMaxWidth=function(b,c){var d,e;if(!c)return screen.width;for(var f=0,g=b.length;g>f;f++)if(e=b[f],d=a.matchMedia("screen and (min-device-width: "+e.minWidth+"px)"+(isNaN(e.maxWidth)?"":" and (max-device-width: "+e.maxWidth+"px)")),d.matches)return e.maxWidth},this.calculateAutoListSize=function(a){var b,c,d=this.getProperty(a.mode_name,"list-size"),e=0,f=this.getProperty(a.mode_name,"responsive-rules"),g=null;if(this.getProperty(a.mode_name,"mode-is-responsive")){if(f&&f.length)return g=this.getResponsiveRecommendations(f),a.matched_rule=g.rule,g.listSize;e=this.getExtraResponsiveRecom(a)}if(c=d+e,a.autoSize=this.getProperty(a.mode_name,"auto-size"),!a.autoSize)return a.autoSize=!1,c;if(b=Math.floor(a.container.clientWidth>0?a.container.clientWidth:a.container.offsetWidth),0==b)return a.autoSize=!1,c;for(var h=this.getProperty(a.mode_name,"auto-size-rules"),i=0;i<h.length;i++)parseInt(h[i].minWc)<=b&&b<=parseInt(h[i].maxWc)&&(a.AutoSizeRule=h[i]);return a.AutoSizeRule?(a.rows=this.getProperty(a.mode_name,"rows"),a.rows<=1?this.modes[a.mode_name]["list-size"]=a.AutoSizeRule.n+e:this.modes[a.mode_name]["list-size"]=a.AutoSizeRule.n*a.rows+e):0},this.calculateAutoSizeParameters=function(a){var b,c;if(this.calculateAutoListSize(a),a.AutoSizeRule)for(var d=Math.floor(a.container.clientWidth>0?a.container.clientWidth:a.container.offsetWidth),e=a.AutoSizeRule.minWsRange;e<=a.AutoSizeRule.maxWsRange;e++)if(b=(d-(a.AutoSizeRule.n-1)*e)/a.AutoSizeRule.n,c=parseInt(b),c==b){a.AutoSizeRule.Wi=b,a.AutoSizeRule.Ws=e;break}},this.getItemUrl=function(){var b=this.itemurl;return(a.trc_item_url||null==this.itemurl)&&(b=this.getAutoItemMeta("item-url",null,this.urlPreNormalizer,this["normalize-item-url"])),this.itemurl=b},this.urlPreNormalizer=function(b,c){var d,e=this["prenormalize-"+b];if(!e)return c;(e["truncate-at"]||[]).forEach(function(a){var b=c.search(a);b>=0&&(c=c.substr(0,b))});var f=new a.TRC.URL(c);for(var g in e)if(e.hasOwnProperty(g)){if(!e[g])continue;switch(g){case"host":delete f.host;break;case"trailing-dirsep":for(;"/"==f.pathname.substr(f.pathname.length-1);)f.pathname=f.pathname.substr(0,f.pathname.length-1);break;case"query":var h=[],i=f.search.replace(/^\?/,"").split("&");d=e[g],"string"==typeof d&&(d=new RegExp(d));var j=function(){return d instanceof Array?function(a){for(var b=0;b<d.length;b++)if(a==d[b])return!0;return!1}:d instanceof RegExp?d.test.trcBind(d):function(){return!1}}();i.forEach(function(a){j(decodeURIComponent(a.split("=")[0]))&&h.push(a)}),f.search=(h.length?"?":"")+h.join("&");break;case"fragment":var k=f.hash.replace(/^#/,"");d=e[g],"string"==typeof d&&(d=new RegExp(d)),f.hash="",d instanceof RegExp&&d.test(k)?f.hash="#"+k:d instanceof Array&&d.forEach(function(a){k.search(a)>=0&&(f.hash="#"+k)})}}return f.pathname||(f.pathname="/"),"item-id"==b?f.toString().toLowerCase():f.toString()},this.genCallback=function(a){var b="recommendations_"+(TRC.callbacks.auto_gen_callback_seq=TRC.callbacks.auto_gen_callback_seq+1||1);return TRC.callbacks[b]=a,"TRC.callbacks."+b},this.formatTRCRequest=function(a,b){try{var c=new this.GlobalRequetParams;return this.setGlobalParmas(c,b),this.setGlobalParamsDecorators(c),c.setPlacementsParamsArray(this.getPlacementsRequestParams(a,c)),TRC.pConsole("recommendations","debug","hook : normalize-request-param",this["normalize-request-param"].toString(),"string"),c.setAll(this["normalize-request-param"](c.getAll(),null)),this.setNewPlacementsInRequest(a,c),TRC.pConsole("recommendations","info","formatted request",c.getAll(),"object"),c.getAll()}catch(d){__trcError("TRC.formatTRCRequest",d)}},this.setGlobalParmas=function(a,b){var c=a;c.setItemId(this.getItemId()),c.setTemplate(TRC.pageTemplate),c.setItemType(b||this.getItemType()),c.setSessionData(TRC.pageManager.getPublisherValue(TRC.publisherId,"session-data")),c.setUserId(TRC.pageManager.getValue("user-id")),c.setViewId(TRC.pageManager.getPageData()),c.setClientVersion(this.version),c.setPublisherVersion(this.getPublisherVersion()),c.setItemUrl(this.getItemUrl())},this.setNewPlacementsInRequest=function(a,b){var c,d,e=b.getPlacementsParamsArray();if(a)for(var f=0,g=e.length;g>f;f++)c=e[f].uip,d=e[f].orig_uip,a[c]||(a[c]=a[d],a[d]=a[c],a[d].new_uip=c)},this.setRequestMetaData=function(a){var b={};this.tags&&this.tags.length&&(b.k=this.tags.join(","));for(var c in this.metadata)this.metadata.hasOwnProperty(c)&&this.metadata[c]&&(b[this.parseMetaName(c)]=this.metadata[c]);TRC.util.hasKeys(b)&&a.setMetaData(b)},this.parseMetaName=function(a){switch(a){case"user":return"u";case"uploader":return"U";case"content-rating":return"c";case"publish-date":return"t";case"duration":return"d";case"category":return"x";case"v":case"r":default:return a}},this.getPlacementsRequestParams=function(a,b){for(var c,d,e,f=[],g=TRC.util.keys(a),h=0;h<g.length;h++)e=g[h],d=a[e],d.placement&&(this.setModeGlobalParamsDecorators(b,d),c=this.createNewPlacementParams(d,a[e]),c.setAll(this["normalize-request-param"](c.getAll(),d.mode_name)),f.push(c.getAll()));return f},this.createNewPlacementParams=function(a,b){var c=new this.PlacementParams;return c.setListId(a.list_id||"rbox-"+(a.visible?a.origin.toString():"tracking")),c.setListSize(this.getListSize(a)),c.setUIMode(this.computeUIM(b)),c.setUIPlacement(a.placement),c.setOriginalUIPlacement(a.placement),this.setPlacementParamsDecorators(c,a),c},this.setPlacementParamsDecorators=function(a,b){var c=this.getProperty(b.mode_name,"required-attributes");"string"==typeof c&&"none"!=c&&a.setRequiredAttr(c),b.dfp&&b.dfp.campaign_id&&a.setNativeCampaignID(b.dfp.campaign_id),b.category&&a.setAllowedCategories(b.category),this.enablePlacementGeometry&&this.addGeometryPlacementData(a,b.container),b.exclude&&a.setExclusions(TRC.text.toStringList(b.exclude))},this.addGeometryPageData=function(a,b){try{TRC.tlf&&console.time("page geometry"),a.setArticlePos(this.getGeometryPageData(b)),a.setBrowserWidth(TRC.dom.getWindowWidth()),a.setScreenWidth(window.screen.availWidth),a.setScreenHeight(window.screen.availHeight),TRC.tlf&&console.timeEnd("page geometry")}catch(c){a.bad=-5}},this.addGeometryPlacementData=function(a,b){try{TRC.tlf&&console.time("mode geometry - "+a.getAll().uim),a.setContainerPos(this.getPosFromDocTop(b,"top")),a.setContainerWidth(this.getModeWidth(b)),TRC.tlf&&console.timeEnd("mode geometry - "+a.getAll().uim)}catch(c){a.cd=-5}},this.getModeWidth=function(a){return a.getBoundingClientRect().width},this.getGeometryPageData=function(a){var c,d;switch(!0){case"function"!=typeof b.querySelector:return-4;case"string"==typeof a:return this.computeGeometryPageData(a);case a instanceof Array&&a.length>0:for(d=0;d<a.length;d++)if(c=this.computeGeometryPageData(a),c>-1)return c;return-2;default:return-1}},this.computeGeometryPageData=function(a){try{var c=b.querySelector(a);return c?this.getPosFromDocTop(c,"bottom"):-2}catch(d){return-3}},this.getPosFromDocTop=function(a,b){return a.getBoundingClientRect()[b]+TRC.dom.getPageVerticalScroll()},this.setGlobalParamsDecorators=function(b){TRC.pageManager.getValue("past-exclusions")&&b.setPastExclusions(TRC.pageManager.getValue("past-exclusions")),this.excludedItems&&b.setExclusions(TRC.text.toStringList(this.excludedItems)),a.trc_testmode&&b.enableTrcTesMode(),this.getReferrer()&&b.setReferrer(this.referrer),TRC.rtbUserIds&&this.setRTBUserId(TRC.rtbUserIds,b),this.enablePageGeometry&&this.addGeometryPageData(b,this.global["page-geometry-selectors"]),this.setRequestMetaData(b)},this.setModeGlobalParamsDecorators=function(a,b){this.setPlayerGlobalParams(a,b),0==b.origin.toString().indexOf("h2")&&a.setItemId("_homepage_")},this.setPlayerGlobalParams=function(a,b){a.setItemId(b.item_id),a.setItemType(b.item_type),a.setItemUrl(b.item_url)},this.computeUIM=function(a){var b=a.mode_name,c=this.global["disable-network-uim"]||"undefined"==typeof TRC.networkId?"":":pub="+TRC.networkId,d=TRC.blocker.blockedState>-2&&this.global["use-abp-uim"]?":abp="+TRC.blocker.blockedState:"",e=this.global["use-calibration-uim"]&&this.getProperty(b,"mode-is-responsive")?this.computeCalbUIM(a):"";return b+c+d+e},this.computeCalbUIM=function(a){if(!a.matched_rule)return"";var b=TRC.implClasses.TRCRBox,c=this.modes[a.mode_name],d=a.matched_rule,e="none"!=c["thumbnail-position"]&&c["thumbnail-position"]||void 0,f=e?TRC.math.round10(b.prototype.getRuleAspectRatio(d,"ratio")||b.prototype.getThumbAspectRatio(c,"ratio")||b.prototype.DEFAULT_THUMB_RATIO,-1):void 0,g=e?this.caclculateThumbnailWidth(a.container,d):void 0;return":type=responsive,rows="+d.rows+",cells="+d.cells+",thumb-pos="+e+(e&&"none"!=e?",thumb-ratio="+f+",thumb-width="+g:"")},this.caclculateThumbnailWidth=function(a,b){var c,d=TRC.css.responsive.getRulePercentageWidth(b.cells,b.margin.h)/100,e=50;return a&&d?(c=parseInt(a.clientWidth>0?a.clientWidth:a.offsetWidth,10),TRC.math.roundByDecimal(c*d,e)):null},this.setRTBUserId=function(a,b){var c,d=TRC.util.keys(a);for(c=0;c<d.length;c++)a[d[c]].ui&&b.setRtui(a[d[c]])},this.dispatchLoadRequest=function(a){if(!(TRC.isKilled&&TRC.isKilled()||!TRC.util.hasKeys(a))){var b,c,d=this.getProperty(null,"timeout")||8e3,e=!1;if(this.preloadRequest=a,null==this.getItemId())return void(this.delayedDispatchLoadRequest=this.dispatchLoadRequest.trcBind(this,a));this.delayedDispatchLoadRequest=null;try{if(b=this.formatTRCRequest(this.preloadRequest),TRC.utm.push((new Date).getTime()-TRC.utm.start),this.isValidForCache(b.it)&&(e=this.activateTrcCache(b,this.trcCache,this.trcCacheItemType,this.handleLoadResponse,this)))return;b.cb=this.genCallback(this.handleLoadResponse.trcBind(this,b.cacheKey)),c=this.createRequestUrl(b),this.preloadRequestLoader=this.loadExternal(c,"js",this.handleLoadResponseFailure.trcBind(this),!0),this.preloadRequestLoader.timeout=TRC.Timeout.set(this.abortLoadRequest.trcBind(this,!0),d),TRC.pConsole("","time","dispatch recommendation request","")}catch(f){__trcError("TRC.dispatchLoadRequest: Error in request processing",f)}}},this.isValidForCache=function(a){return this.trcCache&&this.trcCache.isValidCache&&this.trcCacheItemType[a]&&(""===this.trcParams||TRC.pageManager.getForceTrcCache())?!0:!1},this.activateTrcCache=function(a,b,c,d,e){if(!a.r&&!a.r.length)return!1;var f=b.extractKey(a),g=b.getCacheResponse(f);if(g&&g.response){if("c"===c[a.it])return this.setCachedResponse(g,d,e),!0;"d"===c[a.it]&&(a.cache=1,a.cacheKey=f)}else a.cacheKey=f;return!1},this.setCachedResponse=function(a,b,c){a.response.cached=!0,a.response.cachedViewId=a.viewId,TRC.Timeout.set(b.trcBind(c,null,a.response,!0),0),TRC.pConsole("recommendations","warn","using cached recommendations","")},this.createRequestUrl=function(b){delete b.cacheKey;var c="";b.cache&&(c="&cache=1",delete b.cache);var e=d+"//"+this.domain+"/"+encodeURIComponent(TRC.publisherId)+"/trc/3/json?tim="+encodeURIComponent(__trcClientTimestamp())+(this.trcByPass?"&trc_skip_failover=yes&":"&")+"data="+encodeURIComponent(__trcJSONify(b))+this.getOptOut()+TRC.pageManager.additionalDispatchParams()+c+(a.trc_debug_level>1?"&llvl="+a.trc_debug_level:"");return e},this.abortLoadRequest=function(a){var b;this.preloadRequestLoader&&(this.preloadRequestLoader.parentNode.removeChild(this.preloadRequestLoader),this.preloadRequestLoader=null),a?TRC.EventsAPI.dispatchNoContent(TRCImpl.NO_CONTENT.timeOut):TRC.EventsAPI.dispatchNoContent(TRCImpl.NO_CONTENT.error);for(b in this.preloadRequest)if(this.preloadRequest.hasOwnProperty(b)){if(b.search("rbox-tracking")>=0)continue;a&&(a=!1,__trcWarn("TRC.abortLoadRequest: pv3 timeout"));var c=this.preloadRequest[b];delete this.preloadRequest[b],c.loadRBoxRequestFailed=!0,this.internalDrawRBox(c)}},this.getOptOut=function(){return this.userOptOut?"&user.opt_out=true":""},this.handleLoadResponseFailure=function(){null!=this.preloadRequestLoader&&(TRC.Timeout.clear(this.preloadRequestLoader.timeout),__trcError("Server did not respond to loadRBox"),this.abortLoadRequest())},this.isActivePlacementData=function(a,b){return a.new_uip?b===a.new_uip?!0:!1:!0},this.handleLoadResponse=function(a,b,c){try{TRC.tlf&&console.timeStamp("start handleLoadResponse(pv3)"),TRC.tlf&&console.time("in handleLoadResponse"),TRC.pConsole("recommendations","info","recommendations response",b,b.trc.verbose?"verbose":"object"),TRC.pConsole("","time","recommendations loaded","");var d;if(TRC.utm.push((new Date).getTime()-TRC.utm.start),this.preloadRequestLoader&&TRC.Timeout.clear(this.preloadRequestLoader.timeout),b&&b.trc&&b.trc.ui&&(this.watchedItem=b.trc.wi,this.globaleRequestId=b.trc.vl&&b.trc.vl.length?b.trc.vl[0].ri:null,TRC.eventDelegator.dispatch("user_id_ready")),!(b&&b.trc&&b.trc.vl&&b.trc.vl.length))return __trcError("Invalid response from server: "+b),void this.abortLoadRequest();b.trc.tc&&!TRC.taboolaConsole&&TRC.Manager.prototype.loadExternal("http://c2.taboola.com/console/console_loader.js","js"),TRC.pageManager.storePublisherValue(TRC.publisherId,"session-data",b.trc.sd),b.trc.DNT&&"TRUE"===b.trc.DNT.toUpperCase()?TRC.pageManager.removeKey("user-id"):TRC.pageManager.storeValue("user-id",b.trc.ui),a&&this.trcCache.cacheResponse(a,b,TRC.pageManager.state.moreDispatchParams),this.parseResponse(b,c);for(var e in this.preloadRequest)if(this.preloadRequest.hasOwnProperty(e)){if(d=this.preloadRequest[e],1!=d.pv2&&null==d.response&&!d.dc&&e.search("rbox-tracking")<0){__trcWarn("Server did not provide response for '"+e+'"!');var f=d;delete this.preloadRequest[e],__trcDebug("Recovering internalDrawRBox("+e+")"),this.internalDrawRBox(f)}this.isActivePlacementData(d,e)&&1!=d.pv2&&d.dc&&d.dc.renderAd()}this.preloadRequestLoader&&(this.preloadRequestLoader.parentNode.removeChild(this.preloadRequestLoader),this.preloadRequestLoader=null);try{TRC.SpotlightLoader.load(b)}catch(g){__trcError("Error while trying to load Spotlight")}TRC.tlf&&console.timeEnd("in handleLoadResponse"),TRC.tlf&&console.timeStamp("end handleLoadResponse")}catch(g){__trcError("Error in TRC.handleLoadResponse : ",g)}},this.parseResponse=function(a,b){var c,d,e,f,g;for(e=0;e<a.trc.vl.length;e++)f=a.trc.vl[e],c=f.dc?f.dc:f.uip,d=this.preloadRequest[c],c.search("rbox-tracking")>=0?d.response=this.formatPlacementRecommendations(a,e):"undefined"!=typeof d?(d.isCache=b,g=this.formatPlacementRecommendations(a,e),f.dc&&("tbl"!==f.typ||1!=f.pr||!f.v||f.v.length<1)?(d.dc||(d.dc=new TRC.DaisyChain(this,d),this.daisyChains.push(d.dc)),d.dc.addToChain(g,f.pr)):d.response=g,d.response&&(d.dc&&delete d.dc,d.pv2||"undefined"==typeof d.container||this.internalDrawRBox(d))):__trcWarn("Invalid placement in server response",c)},this.formatPlacementRecommendations=function(a,b){var c=a.trc.vl[b],d=this.preloadRequest[c.uip]||{},e={trc:{req:c.ri,"session-id":a.trc.si,"session-data":a.trc.sd,"user-id":a.trc.ui,"watched-item":a.trc.wi,"country-code":a.trc.cc,"test-variant":a.trc.t,uvpw:a.trc.uvpw,placement:c.uip,mode:d.mode,DNT:a.trc.DNT,cpb:a.trc.cpb,sl:a.trc.sl,pi:a.trc.pi,bdp:a.trc.bdp,ppb:c.ppb}};return a.cached&&(e.cached=!0,e.cachedViewId=a.cachedViewId),c.dc&&"tbl"!==c.typ?e.trc.tag=c:e.trc["video-list"]={video:c.v,"base-mode":c.m,"test-variant":c.t,"properties-override":c.po},e},this.loadSpotlight=function(){document.querySelectorAll&&(this.spotlightLoaded?TRC.dispatch("trc_afterRboxDraw"):(this.spotlightLoaded=TRC.URL.prototype.switchProtocol.call(TRC.getBackstageUrl()+"resources/js/1.1.0/spotlight.js",d),this.loadExternal(this.spotlightLoaded,"js")))},this.setCssDivsIds=function(a,b){var c=4;for(var d in a)a.hasOwnProperty(d)&&(a[d].cssDivsArr=[],d&&TRC.util.getRandomIds({arr:a[d].cssDivsArr,len:b,strength:c,prefix:"t",suffix:"_r"}))},this.setLBCssDivsIds=function(a,b){var c=4;TRC.util.getRandomIds({arr:a.iframe,len:b,strength:c,prefix:"t",suffix:"_r"}),TRC.util.getRandomIds({arr:a.topDiv,len:b,strength:c,prefix:"t",suffix:"_r"})},this.getModesCache=function(){if(TRC.modesCache)return TRC.modesCache;TRC.modesCache={};for(var a in this.modes)this.modes.hasOwnProperty(a)&&(TRC.modesCache[a]={});return TRC.modesCache},this.init=function(b){TRC.tlf&&console.timeStamp("init TRCImpl");var c,d=TRC.URL.prototype.getParameter.call(location.href,"trc_css-isolation")||TRC.pageManager.getValue("trc_css-isolation"),g=TRC.URL.prototype.getParameter.call(location.href,"trc_abp");__trcCopyProps(b,this),e.framework&&"amp"===e.framework&&TRC.amp&&TRC.amp.setAMPmodule(this),this.boxes={},this.daisyChains=[],this.unique_placement_count={},this.tags=[],this.metadata={},this.cssReset="yes"===d||"no"!==d&&this.global["css-isolation"]!==!1?!0:!1,this.trcRequestDelay=this.global["trc-request-delay"]||f,this.trcByPass=this["trc-skip-failover"]===!0?!0:!1,this.enablePageGeometry=this.global["has-page-geometry"],this.enablePlacementGeometry=this.global["has-mode-geometry"],d&&TRC.pageManager.storeValue("trc_css-isolation",d),this.configForPostEvent={available:this.global["send-avail-as-post"],visible:this.global["send-event-as-post"],explore:this.global["send-explore-as-post"]},this.configForGetEvent={available:this.global["send-avail-as-get"],visible:this.global["send-visible-as-get"],explore:this.global["send-explore-as-get"]},this.isDeferredAvailable=this.global["enable-deferred-available"],this.trcParams=TRC.pageManager.additionalDispatchParams(),this.trcCacheClean=this.global["clean-trc-cache"],this.trcCache=this.global["enable-trc-cache"]?new TRC.TrcCache(this.global["trc-cache-conf"]||{}):null,this.trcCacheItemType=this.global["trc-cache-it"],this.disableReadMore=this.global["enable-read-more"]===!1||this.disableReadMore===!1,TRC.getBackstageUrl=function(){var a=TRC.backstageDomainPrefix||"backstage";return this["backstage-domain-url"]||"https://"+a+".taboola.com/backstage/"}.trcBind(this),g?this.setABPEmulation(g):this.global["abp-detection-enabled"]?TRC.blocker.blockedState=TRC.blocker.getBlockedState(this.global["abp-detection-class-names"]||["banner_ad","sponsored_ad"]):TRC.blocker.blockedState=TRC.blocker.states.ABP_DETECTION_DISABLED,c=this.defaults.style+this.global.style,TRC.blocker.blockedState>0&&this.global["switch-abp-class"]&&(c=TRC.text.replaceAll(c,"\\."+TRC.SYNDICATED_CLASS_NAME+"|\\."+TRC.SPONSORED_CONTAINER_CLASS_NAME,function(a){return"."+this[a.slice(1)]},this.global["switch-abp-class"])),TRC.styleInjected||(this.cssReset?(this.setLBCssDivsIds(TRC.lightBoxCssReset={iframe:[],topDiv:[]},this.numOfResetCssDivs),this.setCssDivsIds(this.getModesCache(),this.numOfResetCssDivs),TRC.css.utils.setStyleElements(TRC.css.utils.setStyleTextIdPrefix(c,TRC.modesCache,TRC.lightBoxCssReset)),__trcInfo("CSS Isolation is active")):this.global["css-ie-split"]&&TRC.Browser.ieUpto(9)?TRC.css.utils.setStyleElements(TRC.css.utils.setStyleTextIdPrefix(c,null,TRC.lightBoxCssReset)):TRC.dom.injectStyle(c)),TRC.pageManager.setDomainConfiguration(this.global["publisher-domains"]),this.domain=this.global["requests-domain"]?this.global["requests-domain"]:"trc.taboola.com",this.origin instanceof Array||(this.origin=[this.origin]),null!=this.userMetadata?this.metadata.user=__trcJSONify(this.userMetadata):"undefined"==typeof a.trc_user_id?this.metadata.user=this["get-user"]():this.metadata.user=a.trc_user_id,TRC.util.hasKeys(this["trc-network-mapping"])&&(TRC.networkId=TRC.publisherId,this.shiftPublisherId(this["trc-network-mapping"])),this.clickFraud=new TRC.clickFraudDetect({enabled:this.global["enable-clkfraud-detection"],pubId:TRC.publisherId},TRC.net);try{TRC.pConsole("page","debug","Hook : publisher_start",this["publisher-start"].toString()),this["publisher-start"]()}catch(h){__trcError("Error running publisher-start",h)}this.metadata.uploader=this["get-creator"](),this.tags=this["get-tags"]();try{this.metadata.v=this["get-views"](),this.metadata.r=this["get-rating"](),this.metafields.split(",").forEach(function(a){a&&(this.metadata[a]=this["get-"+a]?this["get-"+a]():this.readMetaTag(a))}.trcBind(this))}catch(h){}this.gt=new Gettext({domain:"rbox",locale_data:this.global.locale}),a.trc_testmode=!!a.trc_testmode||TRC.pageManager.isStagingView(),setTimeout(this.setupOVP.trcBind(this),0),this.init=function(){},TRC.isInteractive=!1,TRC.isPageLoaded=!1,this.trcCacheClean&&!this.trcCache&&(this.trcCache=new TRC.TrcCache({},!0),this.trcCache=null),this.setInteractiveHandlers(),this.setPageOnloadHandlers()},this.setABPEmulation=function(a){TRC.blocker.blockedState=a,this.global["abp-detection-enabled"]=!0,this.global["use-abp-uim"]=!0,TRC.pConsole("page","warn","emulating Ad Blocker Plus detection.")},this.setInteractiveHandlers=function(){var c,d=TRC.EVENT_PAGE_INTERACTIVE,e=["resize","scroll"],f=["scroll","mousedown","keydown","touchstart"],g=function(c){var h;if(c=c||window.event,!TRC.Browser.ie||"resize"!==c.type||null!=c.srcElement){for(h=0;h<e.length;h++)TRC.dom.off(a,e[h],g);for(h=0;h<f.length;h++)TRC.dom.off(b,f[h],g);TRC.isInteractive=!0,TRC.dispatch(d)}};for(c=0;c<e.length;c++)TRC.dom.on(a,e[c],g);for(c=0;c<f.length;c++)TRC.dom.on(b,f[c],g)},this.setPageOnloadHandlers=function(){var b=TRC.EVENT_PAGE_LOAD,c=function(){TRC.dom.off(a,"load",c),TRC.isPageLoaded=!0,TRC.dispatch(b)};TRC.dom.on(a,"load",c)},this.pollTillContainerAvailable=function(a,b){var c=1e3,d=40,e=this,f=a.container,g=function(){e.internalDrawRBox(a)};if(b="undefined"==typeof b?c:b,TRC.pConsole("page","debug","in pollTillContainerAvailable : retry coutn = "+b),a.player||a.slider===!0||TRC.dom.isReady)return TRC.pConsole("page","debug","in pollTillContainerAvailable : player - calling 'TRC.dom.onReady'"),TRC.dom.onReady(g);try{a.container=this.ensureValidContainer(a.container,!0)}catch(h){}return a.container?this.internalDrawRBox(a):(a.container=f,b--?(b=TRC.dom.isReady?Math.min(b,1):b,TRC.Timeout.set(function(){e.pollTillContainerAvailable.call(e,a,b)},d),null):(TRC.pConsole("page","debug","in pollTillContainerAvailable : container - "+a.container+" not found, no more retries"),TRC.dom.onReady(g)))},this.countTrcContainerMissingError=0,this.ensureValidContainer=function(a,b){var c="trc_related_container",d=TRC.dom.isInIframe(!0)?" trc_in_iframe":"";if("string"==typeof a&&(a=document.getElementById(a),b&&!a))return null;if("object"!=typeof a&&(a=null),null!=a){if(a.className.match(c))return a;for(;a.hasChildNodes();)a.removeChild(a.firstChild);return a.className+=" "+c+" trc_spotlight_widget"+d,a}if(null!=(a=document.getElementById(c)))return a.className.search(c)<=0&&(a.className+=" "+c+" trc_spotlight_widget"+d),a;if(!document.body)return null;for(var e=null,f=document.body.getElementsByTagName("script"),g=0;g<f.length;g++)if(!f[g].src&&/TRC\.drawRBox\(/.test(f[g].innerHTML)){e=f[g];break}if(!e||!e.parentNode)return this.countTrcContainerMissingError<2&&(this.countTrcContainerMissingError+=1,__trcError("Didn't manage to find TRC container for R-Box ("+this.countTrcContainerMissingError+") "+(TRC.dom.isReady?"(Document is Ready)":"")+"!")),null;var h=document.createElement("div");return h.id=h.className=c+" trc_spotlight_widget"+d,e.parentNode.insertBefore(h,e),h},this.getPublisherVersion=function(){try{if(TRC.baseDomain.search(TRC.publisherId)>=0){var a=TRC.baseDomain.split("/");if(""==a[a.length-1]&&a.pop(),a[a.length-1]!=TRC.publisherId)return a[a.length-1]}}catch(b){}return"default"},this.getItemType=function(){switch(TRC.listOrigin.getSource()){case"h":return"home";case"c":return"category";case"t":return"text";case"s":return"search";case"p":return"photo";case"o":return"other";case"v":default:return"video"}},this.playVideo=function(b){var c,d=!1;try{TRC.dispatch("videoPlaying",b)}catch(e){__trcError("Problem in playVideo:videoPlaying",e)}if("undefined"!=typeof b.id&&a.trc_video_id!=b.id){var f=TRC.listOrigin.getSource();if("undefined"==typeof b.url&&(a.trc_video_id||"v"!=f?b.url=null:(b.url=this.getAutoItemMeta("item-url",null,this.urlPreNormalizer,this["normalize-item-url"]),this.trc_url_auto_detection=b.id)),a.trc_video_id=b.id,a.trc_item_url=b.url,null!=this.delayedDispatchLoadRequest&&(this.delayedDispatchLoadRequest(),d=!0),0!=a.TRC.trc_drawRBox){var g=0;for(var h in this.boxes)if(this.boxes.hasOwnProperty(h)){if(!/(rbox-blended|rplayer|rbox-v2)/.test(this.boxes[h].getListId()))continue;this.boxes[h].updateRecommendations("video")&&g++}if(1>g&&!d){var i={};c=this.computeRBoxOptions({mode:"rbox-tracking",item_id:b.id,item_url:b.url,item_type:"video",visible:!1}),delete c.container,i[c.placement]=c,this.dispatchLoadRequest(i)}}}},this.setUser=function(a){this.userMetadata=a,TRC.pConsole("page","info","user meta data ",a,"object");
},this.getUIInstance=function(b){var c=this.getProperty(b,"impl-class");return c&&c in a.TRC.implClasses?a.TRC.implClasses[c]:TRC.implClasses.TRCRBox},this.calculatePlacement=function(a){if(a.mode_name.search("rbox-tracking")>=0)return a.mode_name;var b=a.mode_name+(a.category?"!"+a.category:"");return"undefined"!=typeof this.unique_placement_count[b]&&(b+="#"+ ++this.unique_placement_count[b]),b},this.computeRBoxOptions=function(b){return"string"==typeof b&&(b={mode_name:b}),b.pubOpts?b:(b.pubOpts=__trcCopyProps(b,{}),a.trc_testmode=!!a.trc_testmode||!!b.testmode,b.tracking=(this.tracking?this.tracking:"")+(b.tracking?b.tracking:""),b.target_type=b.target_type||this.target_type||this.getProperty(b.mode_name,"target_type")||"video",b.origin=new TRC.ListOriginBuilder(TRC.listOrigin.getSource(),b.target_type),b.mode_name=!!b.mode&&b.mode||!!b.mode_name&&b.mode_name||!!a.trc_mode_name&&a.trc_mode_name||"rbox-"+b.origin.toString(),b.mode_name=b.mode_name.replace(/\s+/g,""),b.category=!!b.category&&b.category,b.link_target=b.link_target||this.link_target||this.getProperty(b.mode_name,"link-target")||"normal","undefined"==typeof b.placement&&(b.placement=this.calculatePlacement(b)),this.unique_placement_count[b.placement]=0,b.visible="boolean"==typeof b.visible?b.visible:!this.invisible,"string"==typeof b.autoplaybox&&(b.autoplaybox=document.getElementById(b.autoplaybox)),!b.player&&b.slider!==!0&&b.visible&&(b.original_container=b.container,b.container=this.ensureValidContainer(b.container)),this.setupOVP(b),b.response=null,b.computed=!0,b)},this.listenToPlayer=function(a,b){var c,d="trc_related_container";c=TRC.listen("videoPlaying",function(e){var f,g=document.getElementById(e.player_id);return g?void(TRC.dom.isAncestor(b,g,!0)?(c.remove(),TRC.listen("videoPlaying",function(a){a.player_id===b.player_id?f.style.left="-999999em":__trcError("TRC.listenToPlayer: wrong player_id was used for videoPlaying")}),b.player_id=e.player_id,a.container&&("string"==typeof a.container&&(a.container=document.getElementById(a.container)),f=a.container),f||(a.container=f=document.createElement("div")),f.className=d+" trc-inplayer-rbox",f.style.left="-999999em",f.style.width=g.offsetWidth+"px",f.style.marginTop="-"+g.offsetHeight+"px",TRC.Browser.ieUpto(6)&&(b.style.position="absolute"),b.appendChild(f),TRC.kaltura_API&&TRC.Browser.firefox&&(delete TRC.kaltura_API,TRC.kaltura_support()),a.getListId=function(){return"rplayer-after"},a.list_id=a.getListId(),a.loaded=!0,this.internalDrawRBox(a)):__trcError("TRC.listenToPlayer: object with player_id wasn't found in playerContainer that was passed")):void __trcError("TRC.listenToPlayer: wrong player_id was passed")}.trcBind(this)),TRC.listen("videoDone",function(c){var d=a.container;return d?void(c.player_id===b.player_id?d.style.left="0":__trcError("TRC.listenToPlayer: wrong player_id was used for videoDone")):void __trcError("TRC.listenToPlayer:videoDone mainContainer wasn't found")}),TRC.ooyala_API&&(TRC.listen("ooyala_stateChanged",function(c){var d=a.container;d&&(c.player_id===b.player_id?d.style.left="-999999em":__trcError("TRC.listenToPlayer: wrong player_id was used for ooyala_stateChanged"))}),TRC.listen("ooyala_activePanelChanged",function(c){var d=a.container;d&&(c.player_id===b.player_id?d.style.left="more"===c.activePanel||"info"===c.activePanel?"0":"-999999em":__trcError("TRC.listenToPlayer: wrong player_id was used for ooyala_activePanelChanged"))}))},this.internalDrawRBox=function(c){var d,e;if(c=this.computeRBoxOptions(c),c.player){var f=c.player;return delete c.player,void this.listenToPlayer(c,document.getElementById(f))}if(c.slider===!0&&(c.container=document.createElement("div"),c.container.id="trc_rbox_slider_"+Math.floor(2147483648*Math.random()).toString(36),c.container.className="trc_related_container",this.cssReset&&b.body.appendChild(c.container)),d=c.container){if(c.visible||(d.style.display="none"),c.spotlight&&d.setAttribute("data-spotlight-publisher-id",c["spotlight-publisher-id"]),null==c.response&&this.loadCalled&&"undefined"!=typeof this.preloadRequest[c.placement]&&(c.response=this.preloadRequest[c.placement].response,__trcCopyProps(c,this.preloadRequest[c.placement]),null==c.response))return void(this.preloadRequest[c.placement].container=c.container);try{TRC.SpotlightLoader.registerOnMainContainer(d,c.response)}catch(g){__trcError("Error while trying to register Spotlight data on main container")}var h=new(this.getUIInstance(c.mode_name))(c.origin.toString(),c,this);this.boxes[h.id]=h,d._trc_container||(d._trc_container=document.createElement("div"),d._trc_container.className="trc_rbox_container",d._trc_anonbox=document.createElement("div"),d._trc_container.appendChild(d._trc_anonbox),d.appendChild(d._trc_container),this.cssReset&&"rbox-tracking"!==h.mode_name?(e=b.createElement("div"),TRC.dom.swapElements(d,e,!1),h.outermostContainer=this.createCssResetContainers(d,h.mode_name),TRC.dom.swapElements(e,h.outermostContainer,!1),TRC.pConsole("page","info","CSS reset is enabled on all widgets")):h.outermostContainer=d),h.render(d._trc_anonbox),this.renderRBox(h,c),a.TRC.trc_drawRBox=!0}},this.createCssResetContainers=function(a,b){for(var c,d=TRC.modesCache[b]?TRC.modesCache[b].cssDivsArr:[],e=d.length,f=a,g=e-1;g>=0;g--)c=document.createElement("div"),c.id=d[g],c.className="trc_isolation",c.appendChild(f),f=c;return f},this.daisyChainReset=function(){var a,b=this.daisyChains.length;for(a=0;b>a;a++)this.daisyChains[a].removeIframe()},this.loadRBox=function(){function a(a,b){a[b.placement]=b,this.internalDrawRBox(b)}var b,c=Array.prototype.slice.call(arguments),d={},e=40;if(!(c.length<1))try{if(this.loadCalled)throw new Error("loadRBox() may only be called once!");c[0]instanceof Array&&(c=c[0]),this.till_request_count=0;for(var f=0;f<c.length;f++)c[f].player||c[f].slider===!0||this.till_request_count++;for(;c.length;)if(b=this.computeRBoxOptions(__trcCopyProps(c.shift(),{})),b.player||b.slider===!0)TRC.Timeout.set(a.trcBind(this,d,b),0);else{if(d[b.placement])throw new Error("Placement '"+b.placement+"' is not unique in loadRBox()!");d[b.placement]=b,function(a,b,c){if(a.container&&1===a.container.nodeType)this.till_request_count--;else{if(!TRC.dom.isReady)return!a.player&&a.slider!==!0&&a.visible&&(a.container=this.ensureValidContainer(a.original_container)),void TRC.Timeout.set(arguments.callee.trcBind(this,a,b,c),b);this.error("Invalid container provided for request "+a.placement+" ("+a.container+")!"),delete c[a.placement],this.till_request_count--}this.till_request_count<=0&&(this.loadCalled=!0,this.dispatchLoadRequest(c))}.trcBind(this,b,e,d)()}}catch(g){throw __trcError("Error in loadRBox()",g),g}},this.parseLoaderParams(e),TRC.dom.init(),this.init(c),this},d=TRC.PROTOCOL;c.prototype["list-size"]=0,c.prototype.MAX_RETRY=2,c.prototype.drawInterface=!1,c.prototype.delayedDispatchLoadRequest=null,c.prototype.invisible=!1,c.prototype.excludedItems=null,c.prototype.boxes={},c.prototype.itemid=null,c.prototype.itemurl=null,c.prototype.tags=[],c.prototype.metadata={},c.prototype.gt={},c.prototype.userMetadata=null,c.prototype.loadCalled=!1,c.prototype.unique_placement_count={},c.prototype.trc_url_auto_detection=null,c.prototype.shiftPublisherId=function(b){var c,d,e,f,g,h,i=TRC.URL.prototype.getParameter.call(location.href,"taboola_sim_domain")||TRC.URL.prototype.getParameter.call(location.href,"fakeurl"),j=a.trc_item_url?new TRC.URL(a.trc_item_url):null,k=(i||(j?j.host:null)||location.host).toLowerCase(),l=(i||(j?j.href:null)||location.href).toLowerCase(),m=b[k],n="/",o=["m","mobile","www2","www3"];if(!m){for(__trcToArray(b,c=[]),c.sort(function(a,b){return a[0].length>b[0].length?-1:a[0].length<b[0].length?1:0}),d=0,e=c.length;e>d;d++)if(f=c[d][0].toLowerCase(),f.indexOf(n)>0){if(l.match(f)){m=c[d][1];break}if(f.indexOf("www.")>-1&&l.match(f.replace("www.",""))){m=c[d][1];break}}else if(k.match(f)){m=c[d][1];break}if(!m&&k.indexOf("www.")<0){for(d=0,e=o.length;e>d&&(g=new RegExp("(https://|http://|^)"+o[d]+"."),h=k.replace(g,"www."),!(m=b[h]));d++);m||(h="www."+k,m=b[h])}}TRC.publisherId=m?m:"unknown-site-on-"+TRC.publisherId,TRC.pConsole("page","info","in 'Network-Solution' : publisher-id was set to - "+TRC.publisherId,"")},c.prototype.getProperty=function(a,b,c){return c&&c.hasOwnProperty(b)&&"undefined"!=typeof c[b]?c[b]:"undefined"==typeof this.modes||"undefined"==typeof this.modes[a]||"undefined"==typeof this.modes[a][b]?this[b]:this.modes[a][b]},c.prototype.getFunction=function(a,b){var c=Array.prototype.slice.call(arguments,2),d=this.getProperty(a,b);return"function"==typeof d?(TRC.pConsole(a,"debug","Hook : "+b,d.toString(),"function"),d.apply(this,c)):void 0},c.prototype.readMetaTag=function(a){for(var b=document.head.getElementsByTagName("meta"),c=null,d=0;d<b.length;d++)if(b[d].name){if(b[d].name.toLowerCase()=="item-"+a.toLowerCase())return b[d].content;b[d].name.toLowerCase()==a.toLowerCase()&&(c=b[d].content)}return c},c.prototype.get_intent=function(){var b=a.location.href,c=TRC.pageManager.getPublisherValue(TRC.publisherId,"auto-play-intent");if(null!=c){var d=c.split(":");if(parseInt(d[0])>(new Date).getTime()-3e4&&d[1]==this.getItemId())return"undefined"!=typeof d[2]?d[2]:"n"}return b.search(this.getItemId())>=0?"s":"u"},c.prototype["get-creator"]=function(){return this.readMetaTag("uploader")||this.readMetaTag("creator")},c.prototype["get-tags"]=function(){},TRC.implClasses=TRC.implClasses||{},c.prototype.logTrcEvent=function(b,c,d,e){var f=!1;if(c.tim=__trcClientTimestamp(),c.id=parseInt(1e4*Math.random()),c.llvl=a.trc_debug_level,this.global["tmp-disable-cv"]||(c.cv=this.version),!TRC.isKilled||!TRC.isKilled()){if(this.configForPostEvent[b])try{this.logPostTrcEvent(b,this.global["send-full-list"]&&d?__trcCopyProps(c,{},d):c)}catch(g){f=!0,__trcError("Error in sending post event",g)}(f||this.configForGetEvent[b]!==!1||this.configForPostEvent[b]!==!0)&&((this.configForGetEvent[b]===!1||f)&&(c.fbe=1),this.logGetTrcEvent(b,c,e))}},c.prototype.logGetTrcEvent=function(a,b,c){TRC.tlf&&console.time("in logGetTrcEvent - "+a);var e,f,g,h,i,j;for(e in b)b.hasOwnProperty(e)&&(b[e]=this["normalize-log-param"](e,b[e]));f=this["normalize-log-param"]("publisher",TRC.publisherId),a=this["normalize-log-param"]("type",a);try{g=d+"//"+this.domain+"/"+f+"/log/3/"+escape(a)+"?",g+=this.trcByPass?"trc_skip_failover=yes&":"";for(h in b)b.hasOwnProperty(h)&&(i="_"==h.charAt(0)?h.substr(1):h,"undefined"!=typeof b[h]&&null!=b[h]&&(g+=0==h.indexOf("unescape-")?h.replace("unescape-","")+"="+b[h]+"&":escape(i)+"="+escape(b[h])+"&"));j=new Image,this.eventLogger.push(j),c&&(j.onload=j.onerror=function(){if("function"==typeof c)try{c()}catch(a){__trcError("Error in event callback",a)}return!0}),j.src=g}catch(k){__trcError("Error in sending event",k)}TRC.tlf&&console.timeEnd("in logGetTrcEvent - "+a)},c.prototype.logPostTrcEvent=function(a,c){TRC.tlf&&console.time("in logPostTrcEvent - "+a);var e,f,g=this["normalize-log-param"]("publisher",TRC.publisherId),a=this["normalize-log-param"]("type",a),h="tb-trc-transportFrame-"+c.id,i=this.getTransportForm(h),j=document.getElementById(h);for(var k in c)c.hasOwnProperty(k)&&(e=b.createElement("input"),e.name=("_"==k.charAt(0)?k.substr(1):k).replace(/unescape-/g,""),e.type="hidden",e.value=this["normalize-log-param"](k,c[k]),i.appendChild(e));if(!j)throw new Error("post iframe can be created");TRC.Browser.ie&&(f=j.contentDocument?j.contentDocument:j.contentWindow.document,f.write(""),f.close()),i.action=d+"//"+this.domain+"/"+g+"/log/3/"+escape(a)+(this.trcByPass?"?trc_skip_failover=yes":""),i.submit(),TRC.tlf&&console.timeEnd("in logPostTrcEvent - "+a)},c.prototype.getTransportForm=function(a){var c,d;return d=b.createElement("form"),d.className="trc-hidden",d.target=a,d.style.display="none",d.method="post",b.body.appendChild(d),c=b.createElement("span"),c.innerHTML='<iframe class="trc-hidden" id="'+a+'" name="'+a+'" width="0" height="0" style="display:none"></iframe>',b.body.appendChild(c),d},c.prototype.log1=function(a,b,c,d,e){var f=a+":"+(e?e:b.li+b.ii)+b.ri;return b.ii&&b.it&&(f=a+":"+b.li+b.ii+b.ri),this.eventCounter[f]?void this.eventCounter[f]++:(this.logTrcEvent(a,b,c,d),void(this.eventCounter[f]=1))},c.prototype.loadExternal=function(){return TRC.net.loadScript.apply(null,arguments)},c.prototype.parseLoaderParams=function(b){for(var c in b)if(b.hasOwnProperty(c)){var d=b[c];if("unknown"==d)continue;switch("auto"==d&&(d=""),c){case"visible":this.invisible=!("boolean"==typeof d?d:"false"!=d);break;case"video":a.trc_video_id=d,TRC.listOrigin.setSource("v");break;case"url":a.trc_item_url=d;break;case"article":a.trc_article_id=d,TRC.listOrigin.setSource("t");break;case"category":a.trc_article_id=d,TRC.listOrigin.setSource("c");break;case"home":a.trc_article_id=d,TRC.listOrigin.setSource("h");break;case"search":a.trc_article_id=d,TRC.listOrigin.setSource("s");break;case"photo":a.trc_article_id=d,TRC.listOrigin.setSource("p");break;case"other":a.trc_article_id=d,TRC.listOrigin.setSource("o");break;case"link_target":this.link_target=d;break;case"video_source":this.video_source=d;break;case"callback":this.video_player_callback=d;break;case"player_reference":this.video_player_reference=d;break;case"target_type":TRC.listOrigin.setTarget(this.target_type=d);break;case"exclude":this.excludedItems=d instanceof Array?d:[d];break;case"tracking":this.tracking=d;break;case"referrer":this.referrer=d;break;case"amp_disable_resize":this.amp_disable_resize=d;case"user_opt_out":d&&"false"!=d&&"0"!=d?this.userOptOut=!0:this.userOptOut=!1}}},c.prototype.setupOVP=function(a){switch(a=a||{},this.getConfig(a,"video_source")||this.getConfig(a,"link_target")){case"brightcove":TRC.brightcove_support();break;case"ooyala":TRC.ooyala_support();break;case"kaltura":TRC.kaltura_support()}},c.prototype.getItemByMetaValue=function(a){for(var b=document.head.getElementsByTagName("meta"),c=0;c<b.length;c++)if(b[c].name==a)return b[c].content;return null},c.prototype.getItemByCanonicalValue=function(a,b){for(var c=document.head.getElementsByTagName("link"),d=0;d<c.length;d++)if("canonical"==c[d].rel)return b.call(this,a,c[d].href);return null},c.prototype.getItemByOgValue=function(a,b){for(var c=document.head.getElementsByTagName("meta"),d=0;d<c.length;d++)if("og:url"==c[d].getAttribute("property")&&c[d].content.length>5)return b.call(this,a,c[d].content);return null},c.prototype.getItemByLocationValue=function(a,b){return b.call(this,a,TRC.pageManager.getCurrentURL().toString())},c.prototype.getItemByParamUrl=function(b,c){return!a.trc_item_url||"item-id"!=b&&"item-url"!=b?null:c.call(this,b,a.trc_item_url)},c.prototype.getAutoItemMeta=function(b,c,d,e){var f,g,h,i=["paramUrl","meta","canonical","og","location"],j={paramUrl:"getItemByParamUrl",meta:"getItemByMetaValue",canonical:"getItemByCanonicalValue",og:"getItemByOgValue",location:"getItemByLocationValue"},k=this.global["url-extract-order"]?this.global["url-extract-order"]:i,l=0;for(k.push("location"),c=c?d.call(this,b,c):null;l<k.length&&TRC.util.isEmptyString(c);){g=k[l],f=this[j[k[l]]];try{c=f?f.call(this,b,d):null}catch(m){if(!this.global["tmp-catch-item-url-err"])throw new Error(m.message);c=""}l++}return"item-url"==b&&"getItemByParamUrl"==g?c:(h="getItemByLocationValue"!=g,c=e?e.call(this,c,a.trc_video_id?"video":"text",h):c)},c.prototype.sendEvent=function(a,b,c,d,e,f){var g=!1,h={ri:this.globaleRequestId,sd:TRC.pageManager.getPublisherValue(TRC.publisherId,"session-data"),ui:TRC.pageManager.getValue("user-id"),pi:this.getItemId(),wi:this.watchedItem?this.watchedItem:null,pt:this.getItemType(),vi:TRC.pageManager.getPageData()},i=function(){g||(g=!0,e&&e())};__trcCopyProps(b,h),d?(this.log1(a,h,c,i,this.placement),TRC.pConsole("page","info","event type : "+a+" - this event will be sent only once for the widget",h,"object")):(this.logTrcEvent(a,h,c,i),TRC.pConsole("page","info","sending event type : "+a,h,"object")),"number"==typeof f&&TRC.Timeout.set(i,f)},c.prototype.GlobalRequetParams=function(){var a={id:parseInt(1e3*Math.random())};this.setItemId=function(b){b&&(a.ii=b)},this.setTemplate=function(b){b&&(a.tmpl=b)},this.setItemType=function(b){b&&(a.it=b)},this.setSessionData=function(b){a.sd=b},this.setUserId=function(b){a.ui=b},this.setViewId=function(b){a.vi=b},this.setClientVersion=function(b){a.cv=b},this.setPublisherVersion=function(b){a.uiv=b},this.setItemUrl=function(b){b&&(a.u=b)},this.setPlacementsParamsArray=function(b){a.r=b},this.getPlacementsParamsArray=function(){return a.r},this.setPastExclusions=function(b){a.px=b},this.setScreenHeight=function(b){a.sh=b},this.setScreenWidth=function(b){a.sw=b},this.setBrowserWidth=function(b){a.bw=b},this.setArticlePos=function(b){a.bad=b},this.setExclusions=function(b){a.ex=b},this.enableTrcTesMode=function(){a.y=!0},this.setReferrer=function(b){a.e=b},this.setMetaData=function(b){a.m=b},this.getId=function(){return a.id},this.setAll=function(b){b&&(a=b)},this.getAll=function(){return a},this.setRtui=function(b){a.rtui=a.rtui||[],"object"==typeof b&&a.rtui.push(b)}},c.prototype.PlacementParams=function(){var a={};this.setListId=function(b){a.li=b},this.setListSize=function(b){a.s=b},this.setUIMode=function(b){a.uim=b},this.setUIPlacement=function(b){a.uip=b},this.setContainerPos=function(b){a.cd=b},this.setContainerWidth=function(b){a.mw=b},this.setOriginalUIPlacement=function(b){a.orig_uip=b},this.setRequiredAttr=function(b){a.ra=b},this.setAllowedCategories=function(b){a.ac=b},this.setNativeCampaignID=function(b){a.nvcid=b},this.setExclusions=function(b){a.ex=b},this.setAll=function(b){a=b},this.getAll=function(){return a}},c.prototype.log=__trcLog,c.prototype.error=__trcError,c.prototype.warn=__trcWarn,c.prototype.info=__trcInfo,c.prototype.debug=__trcDebug,TRC.EVENT_PAGE_INTERACTIVE="trcPageInteractive",TRC.EVENT_PAGE_LOAD="trcPageLoad"}(window,document),function(win,doc){TRC.implClasses=TRC.implClasses||{};var TRCRBox=TRC.implClasses.TRCRBox=function(a,b,c){return this.fixHeight=b.height,this.MIN_VISIBLE_ITMES=2,this.domain=c.domain,this.origin=a,this.header=!1,this.id="trc_"+Math.floor(1e5*Math.random()),this.response=this.request=null,__trcCopyProps(b,this),this.loaded=this.loaded?this.loaded:!1,this.element=null,this.listContainer=null,this.retryCount=0,this.drawList=!1,this.forceItemType=!1,this.trc=c,this.util=TRC.util,this.timeoutId=null,this.errorHandler="",this.boxes=[],this.visible_boxes={},this.synd_visible_boxes={},this.network_visible_boxes={},this.native_visible_boxes={},this.recommendationList=null,this.autoPlayer=null,this.use_cdn=this.trc.getProperty(this.mode_name,"use-cdn-recommendations",this.propertiesOverride)===!0,this.postRenderQueue=new TRC.PostRenderQueue,this.pager=null,this.src=null,this.fullEventItemsHash={},this.isCssImportant=this.trc.getProperty(this.mode_name,"use-css-important",this.propertiesOverride),this.publisher=TRC.publisherId,this.auto_scroll_interval=null,this.auto_scroll=null,this.smallIOSDevice=this.trc["small-ios-device"]||"iPhone|iPod",this.isSmallIOS=this.smallIOSDevice.indexOf(TRC.Device.deviceType)>=0?!0:!1,this.iosLinkTarget=this.trc.getProperty(this.mode_name,"ios-sc-link-target-mode",this.propertiesOverride)||this.trc.global["ios-sc-link-target"],this.defaultLinkTarget=this.trc.global["link-target-conf"]||{NAV:"_self",NT:"_blank",SP:"_blank"},this.linkTargetConf=this.isSmallIOS&&this.iosLinkTarget?this.iosLinkTarget:this.trc["link-target-conf"],this.ntHandlerEnabled=this.trc.global["publisher-onclick-nt-enabled"],this.organicRedirParam=this.trc.global["organic-redirect-param"],this.shiftRedirOnclick=this.trc.global["shift-redir-onclick"],this.manualVisibility=(b.manualVisibilityTrigger||this.trc.manualVisibilityTrigger)&&this.trc.global["enable-manual-visible"]?!0:!1,this.useRedirect=this.trc.global["enable-organic-redirect"],this.useRedirectOnLink=this.trc.global["use-redirect-on-link"],this.adcItemTypes=this.trc.global["adchoice-item-types"]||{"is-organic":!1,"is-in-network":!1,"is-syndicated":!0,"is-native":!0},this.sendClickPiggyBack=this.trc.global["send-pb-in-click"],this.sendModeDebugData=this.trc.global["send-debug-mode"],this.lazyImageLoadMethdos={PAGE_LOAD:"regLazyImageLoadOnPageLoad",PAGE_INTERACTIVE:"regLazyImageLoadOnPageInteractive",RBOX_VISIBLE:"regLazyImageLoadOnRboxVisibile"},this.reqParams={"item-type":this.trc.getItemType(),"item-id":this.trc.getItemId()},this.apiData=[],this.resetVisibilityData=function(){this.visible_boxes={},this.synd_visible_boxes={},this.network_visible_boxes={},this.native_visible_boxes={}},this},IMAGE_LAZY_SRC_DATA_NAME="data-img-src",IMAGE_URL_PREFIX="https://images.taboola.com/taboola/image/fetch/f_jpg%2Cq_80%2Ch_{h}%2Cw_{w}%2Cc_fill%2Cg_faces%2Ce_sharpen/",protocol=TRC.PROTOCOL;TRCRBox.prototype.DEFAULT_THUMB_RATIO=.8,TRCRBox.prototype.genRBoxURL=function(a,b){if(a=a||null,win.trc_testmode)return this.getRetryUrl("static-preview");var c={};return c[this.placement]=this,this.formatedTRCRequest=b||this.trc.formatTRCRequest(c,this.forceItemType),this.formatedTRCRequest.cb=this.trc.genCallback(this.loadScriptCallback.trcBind(this,a)),this.trc.createRequestUrl(this.formatedTRCRequest)},TRCRBox.prototype.getListId=function(){return this.visible?"rbox-"+this.origin:"rbox-tracking"},TRCRBox.prototype.getItemType=function(){return this.forceItemType?this.forceItemType:this.trc.getItemType()},TRCRBox.prototype.generateRDiv=function(){var a=document.createElement("div");return a.id=this.getListId(),a.className="trc_rbox_div trc_rbox_border_elm","none"!=this.element.style.display&&(a.style.display="none"),a.style.overflowX="hidden",a.style.overflowY="hidden",a},TRCRBox.prototype.generateHeader=function(a){var b=document.createElement("div"),c=document.createElement("span"),d=this.trc.getProperty(this.mode_name,"header",this.propertiesOverride),e=this.trc.getProperty(this.mode_name,"header-right",this.propertiesOverride),f="No Header"!=e;return b.id=this.id.replace("trc_","trc_header_"),b.className="trc_rbox_header trc_rbox_border_elm",c.className="trc_rbox_header_span",b.ext=document.createElement("div"),b.ext.className="trc_header_ext",b.appendChild(b.ext),f?(this.generateHeaderPart(c,d,"trc_header_left_column trc_header_left_part"),this.generateHeaderPart(c,e,"trc_header_right_column trc_header_right_part")):c.innerHTML="No Header"!=d?d:"",b.titleBox=c,b.appendChild(c),a&&a.appendChild(b),b},TRCRBox.prototype.generateHeaderPart=function(a,b,c){var d=document.createElement("span");d.className="trc_inner_header "+(c||""),d.innerHTML=b,a.appendChild(d)},TRCRBox.prototype.render=function(a){var b=this.trc.getProperty(this.mode_name,"auto-scroll",this.propertiesOverride);this.element=document.createElement("div"),this.element.id=this.id.replace("trc_","trc_wrapper_"),this.element.className="trc_rbox "+this.mode_name,this.element.style.overflow="hidden","undefined"!=typeof b&&"none"!=b&&(this.element.onmouseover=function(){null!=this.auto_scroll_interval&&TRC.Interval.clear(this.auto_scroll_interval)},this.element.onmouseout=function(){"function"==typeof this.auto_scroll&&(null!=this.auto_scroll_interval&&TRC.Interval.clear(this.auto_scroll_interval),this.auto_scroll_interval=TRC.Interval.set(this.auto_scroll,parseInt(b)))}),a.appendChild(this.element),this.element.style.display="none",this.trc.getProperty(this.mode_name,"has-expand-animation",this.propertiesOverride)===!0&&new TRC.ExpandAnimationManager(this)},TRCRBox.prototype.generateVisibleParts=function(){if(null==this.listContainer){this.header=this.generateHeader(),"object"==typeof this.header&&this.element.appendChild(this.header);var a=document.createElement("div");a.id=this.id.replace("trc_","outer_"),a.className="trc_rbox_outer",a.style.overflow="hidden",this.listContainer=this.generateRDiv(),a.appendChild(this.listContainer),this.element.appendChild(a),this.element.style.display="block",this.trc.global["disclosure-enabled"]===!0?this.addTaboolaLogo():this.addTaboolaLogoNoDisclosure()}},TRCRBox.prototype.getRetryUrl=function(a){var b=protocol+"//cdn.taboola.com/libtrc/"+TRC.publisherId+"/";return"preview"==a?b+"trc-"+a+".js":b+"trc-"+this.getListId()+"-"+a+".js"},TRCRBox.prototype.check_preview_size_error=function(a,b){var c=b.trc["video-list"].video;return c instanceof Array||(c=[c]),a!=this.getRetryUrl("preview")&&c.length<10?(this.src=this.getRetryUrl("preview"),!0):!1},TRCRBox.prototype.setTargetItemsList=function(a,b,c){for(var d=0,e=b.length;e>d;d++)a[b[d]["item-id"]]={tii:b[d]["item-id"],tipt:this.getProviderType(b[d]),tit:b[d].type,tids:c}},TRCRBox.prototype.getJsonTargetItemsList=function(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(a[b]);return c},TRCRBox.prototype.PostData=function(){var a={};this.setFullItemlist=function(b){"object"==typeof b?a.fil=__trcJSONify(b):"string"==typeof b&&(a.fil=b)},this.setScreenHeight=function(b){a.sh=b},this.setScreenWidth=function(b){a.sw=b},this.setBrowserWidth=function(b){a.bw=b},this.setArticlePos=function(b){a.bad=b},this.setContainerPos=function(b){a.cd=b},this.setContainerWidth=function(b){a.mw=b},this.getAll=function(){return a}},TRCRBox.prototype.getProviderType=function(a,b){return a["is-syndicated"]?b?"sponsored":"SP":a["is-in-network"]?b?"exchange":"NT":a["is-native"]?b?"native":"NAV":b?"organic":"RC"},TRCRBox.prototype.setApiItemsData=function(a){this.apiData.push({url:a.url,slot:a.itemIndex,id:a.id,type:this.getProviderType(a,!0),title:a.title})},TRCRBox.prototype.isReadMoreDevice=function(a){for(var b=a.split("|"),c={smart_phone:TRC.dom.isSmartPhone(),tablet:TRC.dom.isTablet(),desktop:TRC.dom.isDesktop()},d=0;d<b.length;d++){if("all"===b[d])return!0;if(c[b[d]])return!0}return!1},TRCRBox.prototype.getReadMoreConfig=function(){var a=this.trc.getProperty(this.mode_name,"read-more-config",this.propertiesOverride)||{};return a.boxSelector=this.trc.getProperty(this.mode_name,"read-more-box-selector",this.propertiesOverride),a.threshold=this.trc.getProperty(this.mode_name,"read-more-threshold",this.propertiesOverride),a.minimizedSize=this.trc.getProperty(this.mode_name,"read-more-minimized-size",this.propertiesOverride),a.caption=this.trc.getProperty(this.mode_name,"read-more-caption",this.propertiesOverride),a},TRCRBox.prototype.loadScriptCallback=function(a,b){var c,d,e,f,g,h,i,j,k="TRCRBox.loadScriptCallback(retry="+this.retryCount+")",l=b.trc,m=this.response&&this.response.trc.DNT&&"TRUE"===this.response.trc.DNT.toUpperCase(),n=this.trc.global["has-userx"],o=TRC.TRCParser,p=TRC.Device.isTouchDevice,q=null;this.sendModeDebugData&&(q=this.getModeDebugData("object")),__trcDebug("Enter "+k),this.abortRequest(),this.utm=this.requestTime&&[this.requestTime,(new Date).getTime()-TRC.utm.start];var r=win.trc_testmode?!0:!1;if(a&&this.trc.trcCache.cacheResponse(a,b,TRC.pageManager.state.moreDispatchParams),l.vl&&l.vl.length)return TRC.tlf&&console.timeStamp("start loadScriptCallback(pv2)"),this.timeoutId&&(TRC.Timeout.clear(this.timeoutId),this.timeoutId=null),this.trc.parseResponse(b),void(this.trc.preloadRequest[this.placement].dc?this.trc.preloadRequest[this.placement].dc.renderAd(this):this.loadScriptCallback(null,this.trc.preloadRequest[this.placement].response));if(!l||!l["video-list"]||!l["video-list"].video)return __trcError("Exit "+k+": pv2 format error"),void TRC.EventsAPI.dispatchNoContent(this.trc.NO_CONTENT.noItems,this.placement);if(r&&this.check_preview_size_error(this.src,b))return __trcDebug("Exit "+k+": preview with not enough items"),void this.getData();if(TRC.pageManager.storePublisherValue(TRC.publisherId,"session-data",l["session-data"]),b.trc.DNT&&"TRUE"===b.trc.DNT.toUpperCase()?TRC.pageManager.removeKey("user-id"):TRC.pageManager.storeValue("user-id",l["user-id"]),"rbox-tracking"!=this.getListId()&&"undefined"==typeof this.trc.modes[this.mode_name])return void __trcError("TRCRBox.loadScriptCallback: Mode name '"+this.mode_name+"' doesn't exist in configuration file ");if(this.drawList)return void __trcWarn("Exit "+k+": got another response after already drawing");if(this.response=b,this.response.cached&&(this.cachedViewId=this.response.cachedViewId),this.setTargetItemsList(this.fullEventItemsHash,l["video-list"].video,"a"),j=new this.PostData,j.setFullItemlist(this.getJsonTargetItemsList(this.fullEventItemsHash)),l["video-list"].video.length<1&&"rbox-tracking"!=this.getListId())return __trcWarn("Exit "+k+": no items in response - "+this.mode_name),TRC.EventsAPI.dispatchRender(l),this.abortRendering(),this.trc.isDeferredAvailable?TRC.Timeout.set(this.sendEvent.trcBind(this,"available",this.util.merge(this.createUtmParam(),{df:1}),this.util.merge(j.getAll(),q),!0),0):this.sendEvent("available",this.createUtmParam(),this.util.merge(j.getAll(),q),!0),void TRC.EventsAPI.dispatchNoContent(this.trc.NO_CONTENT.noItems,this.placement);this.trc.isDeferredAvailable?this.postRenderQueue.pushBack("available",this.sendEvent.trcBind(this,"available",this.util.merge(this.createUtmParam(),{df:1}),this.util.merge(j.getAll(),q),!0)):this.sendEvent("available",this.createUtmParam(),this.util.merge(j.getAll(),q),!0),this.recommendationList=l["video-list"].video,this.itemsTypes=this.getItemsTypesList(this.recommendationList),this.hasSyndicatedContent=this.hasSyndicated(this.itemsTypes),this.privacyId=this.getPrivacyId(this.recommendationList),this.orig_name=this.mode_name,this.orig_placement=this.placement,this.sendExternalTracking(this.getAllExternalTrackingURLsList().i),o.IsBaseModeAndABModeExist(l)?(e=o.parseBaseModeAndABModeName(l),this.changeModeName(e,!0,"base mode named: "+e+" has no configuration. using fallback - "+this.mode_name)):(f=o.parseBaseModeName(l))?(TRC.pConsole(this.mode_name,"info","base mode = "+f),this.changeModeName(f,!0,"base mode - "+f+": has no configuration. using fallback - "+this.mode_name)):(d=o.parseTestVariant(l))&&(TRC.pConsole(this.mode_name,"info","test variant = "+d,c),c=o.parseABModeName(this.mode_name,l),this.changeModeName(c,!1,"variant -  "+d+" : has no configuration. using fallback - "+this.mode_name),o.hasVariantMismatch(l)&&this.trc.global["send-variant-warning"]&&__trcWarn("UI variant mismatch detected for publisher={pub}, page type={page}, UI mode={mode}, pacement={placement}. Using header variant resulted with variant={header}, Using per widget variant resulted with variant={widget}.".replace("{pub}",TRC.publisherId).replace("{page}",this.trc.getItemType()).replace("{mode}",this.mode_name).replace("{placement}",this.placement).replace("{header}",b&&b["test-variant"]||"").replace("{widget}",b&&b["video-list"]&&b["video-list"]["test-variant"]||""))),this.propertiesOverride=l["video-list"]["properties-override"],g=this.trc.getProperty(this.mode_name,"auto-size",this.propertiesOverride),h="none"!=this.trc.getProperty(this.mode_name,"thumbnail-position",this.propertiesOverride),i=this.trc.getProperty(this.mode_name,"mode-has-userx",this.propertiesOverride),this.useNativeLineClamp=TRC.Browser.compatibility.lineClamp&&!this.trc.getProperty(this.mode_name,"details-inline-with-title",this.propertiesOverride)&&this.trc.getProperty(this.mode_name,"use-browser-line-clamp",this.propertiesOverride),this.isWCTextLinks="autowidget-template-text-links"==this.trc.getProperty(this.mode_name,"widget-creator-layout",this.propertiesOverride),this.isResponsive=this.trc.getProperty(this.mode_name,"mode-is-responsive",this.propertiesOverride),TRC.pConsole(this.mode_name,"info","has user X = "+i,""),__trcDebug("Exit "+k+": success"),this.drawList=!0,this.hasReadMore=this.trc.disableReadMore===!0?!1:this.trc.getProperty(this.mode_name,"enable-read-more",this.propertiesOverride),this.isReadMoreDebug=this.trc.global["read-more-debug"]||this.trc["read-more-debug"],this.readMorePageConfig=this.read_more||{},this.readMoreConfig=this.getReadMoreConfig(),this.callPreRenderHooks(),this.hasReadMore&&this.isReadMoreDevice(this.trc["read-more-devices"])&&TRC.setReadMore(this),this.isResponsive&&!this.isWCTextLinks?(this.generateResponsiveOuters(this.element),this.drawResponsiveList(l)):(g&&this.container&&0==this.container.clientWidth&&(this.container.style.width="100%"),
this.generateVisibleParts(),this.drawListBody(l));try{TRC.SpotlightLoader.registerOnMainContainer(this.container,b),TRC.SpotlightLoader.load(this.response)}catch(s){__trcError("Error while trying to load Spotlight")}if(i&&n&&h&&!m&&!TRC.Browser.ieUpto(8)&&!p&&!TRC.SpotlightLoader.loadedScript){if(!TRC.userX.isInitialized)try{TRC.userX.init(this.trc.language)}catch(s){__trcDebug("failed to init Taboola Choice")}try{TRC.userX.initForMode(this)}catch(s){__trcDebug("failed to init Taboola Choice for mode "+this.mode_name)}}this.slider!==!0&&this.trc.getProperty(this.mode_name,"slider",this.propertiesOverride)!==!0||this.trc.slider===!1||new TRC.SliderManager(this)},TRCRBox.prototype.callPreRenderHooks=function(){var a=this.trc.getProperty(this.mode_name,"mode-start"),b=this.trc["mode-pub-start"];try{"function"==typeof b&&b(this,this.container),"function"==typeof a&&a(this,this.container)}catch(c){__trcError("Error in pre rendered hooks - "+c.message)}},TRCRBox.prototype.changeModeName=function(a,b,c){"undefined"!=typeof this.trc.modes[a]?(this.trc.cssReset&&this.switchCSSResetDivIds(this.mode_name,a),this.mode_name=a,this.element.className="trc_rbox "+this.mode_name):this.trc.global["send-variant-warning"]&&(b?__trcWarn(c):__trcDebug(c))},TRCRBox.prototype.switchCSSResetDivIds=function(a,b){var c=TRC.modesCache[a]?TRC.modesCache[a].cssDivsArr:[],d=TRC.modesCache[b]?TRC.modesCache[b].cssDivsArr:[],e=c.length;try{for(var f=0;e>f;f++)doc.getElementById(c[f]).id=d[f]}catch(g){__trcError("TRCRBox.prototype.switchCSSResetDivs : ",g.message)}},TRCRBox.prototype.loadFailureHandler=function(){TRC.pConsole(this.mode_name,"debug","handleing TRC request failure","");var a="TRCRBox.loadFailureHandler(retry="+this.retryCount+")";if(__trcDebug("Enter "+a),!this.request)return void __trcDebug("Exit "+a+": request was aborted");if("object"==typeof window.trc_json_response)return __trcWarn("Exit "+a+": old style response"),this.loadScriptCallback(null,window.trc_json_response),void delete window.trc_json_response;if(this.abortRequest(),this.response||this.dc)return void __trcDebug("Exit "+a+": response already received");if(win.trc_testmode)this.src=this.getRetryUrl("preview"),__trcDebug("Exit "+a+": preview");else{if(!this.use_cdn)return __trcError("Aborting on error due to use-cdn=false",null),void this.abortRendering();this.src=this.getRetryUrl("error"),__trcWarn("Exit "+a+": retrying with "+this.src.split("/")[2].split(".")[0].toUpperCase())}this.getData()},TRCRBox.prototype.abortRequest=function(){this.timeoutId&&(TRC.Timeout.clear(this.timeoutId),this.timeoutId=null),this.request&&(this.request.parentNode.removeChild(this.request),this.request=null)},TRCRBox.prototype.sendRequest=function(){var a="TRCRBox.sendRequest(retry="+this.retryCount+")";if(__trcDebug("Enter "+a),this.response)return __trcDebug("Exit "+a+": already have response"),void this.loadScriptCallback(null,this.response);if(this.loadRBoxRequestFailed){if(!this.use_cdn)return __trcError("loadRBox failed and not using CDN, aborting."),void this.abortRendering();this.retryCount++,this.src=this.getRetryUrl("error")}var b=this.trc.getProperty(this.mode_name,"timeout",this.propertiesOverride)||8e3;this.timeoutId=TRC.Timeout.set(function(){return this.timeoutHappened=this.timeoutHappened+1||1,this.use_cdn?(this.abortRequest(),this.src=this.getRetryUrl("timeout"),__trcWarn("Called TRCRBox.sendRequest.timeout("+this.timeoutHappened+"): retrying with "+this.src.split("/")[2].split(".")[0].toUpperCase()),void this.getData()):void __trcError("Timedout waiting for server but not aborting")}.trcBind(this),b),this.response=null;try{if(this.requestTime=(new Date).getTime()-TRC.utm.start,this.trc.isValidForCache(this.formatedTRCRequest.it)){var c=this.trc.activateTrcCache(this.formatedTRCRequest,this.trc.trcCache,this.trc.trcCacheItemType,this.loadScriptCallback,this);if(c)return;this.src=this.genRBoxURL(this.formatedTRCRequest.cacheKey,this.formatedTRCRequest)}this.request=this.trc.loadExternal(this.src,"js",this.loadFailureHandler.trcBind(this),!0)}catch(d){return void __trcError("Exit "+a+": error in loadExternal",d)}__trcDebug("Exit "+a+": success")},TRCRBox.prototype.abortRendering=function(){var a="TRCRBox.abortRendering(retry="+this.retryCount+")";switch(__trcDebug("Called "+a),this.drawList=!0,typeof this.errorHandler){case"string":return void(null!=this.listContainer&&this.listContainer.appendChild(document.createTextNode("Error getting recommendations: "+this.errorHandler)));case"function":return void this.errorHandler()}},TRCRBox.prototype.getData=function(){this.loaded=!0,this.retryCount++;var a="TRCRBox.getData(retry="+this.retryCount+")";return __trcDebug("Enter "+a),this.cdnEventHandler||(this.cdnEventHandler=TRC.listen("staticRecommendationsReceived",function(a){this.response||this.loadScriptCallback(null,a.response)}.trcBind(this))),this.retryCount>this.trc.MAX_RETRY?(__trcError("Exit "+a+": max retry - last call was to "+this.src.split("/")[2].split(".")[0].toUpperCase()),void this.abortRendering()):(TRC.dom.onReady(this.sendRequest.trcBind(this),TRC.Browser.ie?!1:!0),void __trcDebug("Exit "+a+": success"))},TRCRBox.prototype.getContainer=function(){return this.element.parentNode},TRCRBox.prototype.sendEvent=function(a,b,c,d,e,f){var g=!1,h={ri:this.response?this.response.trc.req:null,sd:TRC.pageManager.getPublisherValue(TRC.publisherId,"session-data"),ui:TRC.pageManager.getValue("user-id"),pi:this.trc.getItemId(),wi:this.response?this.response.trc["watched-item"]:null,pt:this.getItemType(),vi:this.cachedViewId||TRC.pageManager.getPageData(),li:this.getListId()},i=function(){g||(g=!0,e&&e())};this.response.cached&&(h.cache="1"),(this.trc.global["tmp-use-pb-params"]&&this.trc.configForPostEvent[a]||"click"===a&&this.sendClickPiggyBack)&&(this.response.trc&&this.response.trc.ppb&&(b.ppb=this.response.trc.ppb),this.response.trc&&this.response.trc.cpb&&(b.cpb=this.response.trc.cpb)),"click"==a&&"nt"==b.prt&&(h={}),__trcCopyProps(b,h),d?this.trc.log1(a,h,c,i,this.placement):this.trc.logTrcEvent(a,h,c,i),TRC.pConsole(this.mode_name,"info","sending event type : "+a,h,"object"),"number"==typeof f&&TRC.Timeout.set(i,f)},TRCRBox.prototype.load=function(a,b){if(!this.loaded){this.trc.preloadRequest=this.trc.preloadRequest||{},"object"==typeof b&&"undefined"==typeof this.trc.preloadRequest[b.placement]&&(b.pv2=!0,this.trc.preloadRequest[b.placement]=b);var c=this.trc.getItemId(),d="undefined"!=typeof c&&null!=c&&0!=c.length;d?(this.src=this.genRBoxURL(),this.errorHandler=a,this.getData()):this.loaded=!0}},TRCRBox.prototype.updateRecommendations=function(a){return this.retryCount=0,this.drawList=!1,this.loadRBoxRequestFailed=!1,this.response=null,this.forceItemType=a,this.reqParams={"item-type":this.trc.getItemType(),"item-id":this.trc.getItemId()},this.timeoutId&&(TRC.Timeout.clear(this.timeoutId),this.timeoutId=null),this.loaded=!1,this.trc.renderRBox(this),!0},TRCRBox.prototype.isVisible=function(a,b){function c(a,b){return!a.parentNode||a.parentNode==document.documentElement&&a!=b?!1:a==b||c(a.parentNode,b)}if(b)return this.isAMPvisible(b);a=a?a:this.container;var d=a.getBoundingClientRect(),e=d.left+Math.round((d.right-d.left)/2),f=d.top+Math.round((d.bottom-d.top)/2),g="CSS1Compat"===document.compatMode&&document.documentElement.clientWidth||document.body.clientWidth,h="CSS1Compat"===document.compatMode&&document.documentElement.clientHeight||document.body.clientHeight,i=TRC.Browser.operaUpto(10.1)||TRC.Browser.safariUpto(4)?document.elementFromPoint(e+document.body.scrollLeft,f+document.body.scrollTop):document.elementFromPoint(e,f);return e>0&&g>e&&f>0&&h>f&&i&&c(i,a)},TRCRBox.prototype.isAMPvisible=function(a){var b=a.intersectionRect.width*a.intersectionRect.height,c=a.boundingClientRect.width*a.boundingClientRect.height;return b>Math.trunc(c/2)?!0:!1},TRCRBox.prototype.visible_items_collection=function(a){var b,c,d,e=0;for(b=0;b<this.boxes.length;b++)c=this.boxes[b].video_data,d=this.fullEventItemsHash[c["item-id"]],a||this.isVisible(this.boxes[b],null)?(c["is-syndicated"]?this.pushVisibleItem(this.synd_visible_boxes,c,this.visibilityArr,"is-syndicated"):c["is-in-network"]?this.pushVisibleItem(this.network_visible_boxes,c,this.visibilityArr,"is-in-network"):c["is-native"]?this.pushVisibleItem(this.native_visible_boxes,c,this.visibilityArr,"is-native"):this.pushVisibleItem(this.visible_boxes,c,this.visibilityArr,"is-organic"),d.tids="vp",e++):"vp"!=d.tids&&(d.tids="nvp");return e},TRCRBox.prototype.pushVisibleItem=function(a,b,c,d){a[b["item-id"]]={id:b["item-id"],type:b.type,publisher:b.publisher}},TRCRBox.prototype.clearChilds=function(a){for(;a.hasChildNodes();)a.removeChild(a.lastChild)},TRCRBox.prototype.hasSyndicated=function(a){for(var b,c=0;b=a[c];c++)if(b["is-syndicated"]||b["is-in-network"]||b["is-native"])return!0;return!1},TRCRBox.prototype.rePositionDurationElement=function(a,b,c){TRC.Browser.ieUpto(6)?(a.style.marginLeft=b/2-3+"px",a.style.top=c/2-15+"px"):7===TRC.Browser.ie?(a.style.left=b-3+"px",a.style.top=c-15+"px"):(a.style.marginLeft=b-3+"px",a.style.top=c-15+"px")},TRCRBox.prototype.getFirstVideoItem=function(a){var b,c=a.boxes,d=null;for(b=0;b<c.length;b++)if(!c[b].isSyndicated){d=c[b].video_data;break}return d},TRCRBox.prototype.hasDuration=function(){for(var a,b=this.trc.getProperty(this.mode_name,"detail-order",this.propertiesOverride).split(","),c=0;a=b[c];c++)if("duration"==a)return!0;return!1},TRCRBox.prototype.cleanStyleDimensions=function(a){var b=null;try{__trcDOMWalker(a,function(a){a.style.cssText&&(a.style.width="",a.style.height=""),-1!==(a.className+"").indexOf("video-duration")&&(b=a)})}catch(c){}return b},TRCRBox.prototype.createBillboard=function(){var a=__trcGetElementsByClass("trc_rbox_outer","div",this.element)[0];if(!a)return null;var b=document.createElement("div");return this.billboard=b,b.className="trc_billboard",b.style.width="auto",a.parentNode.insertBefore(b,a),a.style.clear="both",b},TRCRBox.prototype.checkForBlocking=function(){var a,b,c,d,e,f,g,h,i="",j=[],k=[],l=[];for(a=0;b=this.boxes[a];a++){try{e=b.video_data["is-in-network"]||b.video_data["is-native"],e||(d=b.video_data["is-syndicated"])}catch(m){}f=e?k:d?l:j,b&&1===b.nodeType&&b.childNodes.length?(g=document.trcGetCurrentStyle(b,"-moz-binding"),c=document.trcGetCurrentStyle(b,"orphans"),h=document.trcGetCurrentStyle(b,"visibility"),"hidden"!=h&&("none"==document.trcGetCurrentStyle(b,"display")?("4321"==document.trcGetCurrentStyle(b,"orphans")&&(i=i||"adblockplus"),f.push(1)):g&&"none"!=g&&(i=i||"adblockplus",f.push(1)))):f.push(1)}(j.length||l.length||k.length)&&__trcWarn("blocked:"+j.length+"-"+k.length+"-"+l.length+"-"+(i||"unknown"))},TRCRBox.prototype.createEmbedThumb=function(a){var b,c,d,e=this["player-container-id"]&&document.getElementById(this["player-container-id"]),f=this.trc.getProperty(this.mode_name,"player-detail-order",this.propertiesOverride),g=document.createElement("DIV"),h=this.trc.getProperty(this.mode_name,"render-player-info",this.propertiesOverride),i=this,j=this.trc.getProperty(this.mode_name,"player-thumbnail-height",this.propertiesOverride)||300,k=this.trc.getProperty(this.mode_name,"player-thumbnail-width",this.propertiesOverride)||400;return(a=a||this.getFirstVideoItem(this))?(e=e||this.createBillboard())?(e.innerHTML="",e.className+=" "+this.mode_name,e.hasDuration=this.hasDuration(),g.style.height="100%",g.style.cssFloat="left",g.className="playerCube",e.appendChild(g),b=this.drawVideoBox(a,e.hasDuration,f,"top"),g.appendChild(b),d=b.getElementsByTagName("A"),h?b.fixTextOverflow():d[1]&&d[1].parentNode.removeChild(d[1]),void(b.thumb&&b.img&&b.img_src&&(b.thumb.appendChild(b.img),b.img.onload=function(){var a=h?k:b.clientWidth,c=h||this.billboard?j:b.clientHeight;b.img.offsetWidth+b.img.offsetHeight?this.FixVideoImage(a,c,b.img):TRC.Timeout.set(function(){a=h?k:b.clientWidth,c=h||this.billboard?j:b.clientHeight,i.FixVideoImage(a,c,b.img)},10)}.trcBind(this),c=this.cleanStyleDimensions(b),b.style.marginLeft="0",b.style.width="auto",b.style.height="100%",b.style.cssFloat="none",b.style.styleFloat="none",b.thumb.style.width=h||this.billboard?k+"px":"100%",b.thumb.style.height=h||this.billboard?j+"px":"100%",b.thumb.style.marginRight="0",b.thumb.style.position="relative",this.setImageLoad(b.img,b,this.getThumbnailURL(a,b.thumb.offsetWidth,b.thumb.offsetHeight),100,b.thumb,this.trc.global["thumb-lazy-load-switch"]),TRC.Browser.ieUpto(6)&&(b.onmouseover=function(){this.className+=" playerCube_hover"},b.onmouseout=function(){this.className=this.className.replace(/\b\s+playerCube_hover\b/g,"")}),e.videoBlock=d[0],d[0].onclick=function(b){var c=this.trc.getProperty(this.mode_name,"player-embed-code",this.propertiesOverride);return b=b||event,"function"==typeof c&&e&&!win.trc_testmode?this.playInsideHostingContainer(a,c,e):win.open(a.logger_url),b.preventDefault&&b.preventDefault(),b.returnValue=!1}.trcBind(this),b.visCheckDone=!0,c&&this.rePositionDurationElement(c,b.thumb.clientWidth,b.thumb.clientHeight)))):void __trcError("Can't find container element for createEmbedThumb!"):void __trcError("outerbox.js: video item was not found")},TRCRBox.prototype.setImageLoad=function(a,b,c,d,e,f){var g=null,h=!1;if(this.imageOptimizePrefix||(this.imageOptimizePrefix=this.getImageOptimizationUrl()))if(h=this.isHiddenItem(b),g=this.getContainerDim(e,b,h))c=this.getImageOptimizePrefix(c,this.imageOptimizePrefix,g)+(this.trc.global["tmp-image-utf8-encode"]?encodeURIComponent(c):escape(c));else if(d)return void TRC.Timeout.set(this.setImageLoad.trcBind(this,a,b,c,d--,e,f),50);b.img_src=c=TRC.URL.prototype.switchProtocol.call(c,protocol),f?this.setLazyImageLoad(a,c):a.src=c},TRCRBox.prototype.getImageOptimizationUrl=function(){var a,b=this.trc.getProperty(this.mode_name,"image-url-prefix",this.propertiesOverride)||this.trc.global["image-url-prefix"]||IMAGE_URL_PREFIX,c=this.trc.global["images-host"],d=this.trc.getProperty(this.mode_name,"images-radius",this.propertiesOverride);return c&&c.length>2&&(a=new TRC.URL(b),a.host=c,b=a.toString()),this.trc.getProperty(this.mode_name,"use-dpr-images",this.propertiesOverride)&&TRC.dom.isHighDensity()&&(b=b.replace(/fetch\//,"fetch/dpr_2.0%2C")),d&&"0"!=d&&(b=b.replace(/f_jpg(%2C)?/,""),b=b.replace(/fetch\//,"fetch/f_png%2Cr_"+d+"%2C")),b},TRCRBox.prototype.isHiddenItem=function(a){return"none"===doc.trcGetCurrentStyle(a,"display",null)},TRCRBox.prototype.getContainerDim=function(a,b,c){var d,e,f=100;if(c){if(this.cachedImageDim)return this.cachedImageDim}else if(d=TRC.dom.getElementRect(a),e=Math.ceil(d.right-d.left))return f=Math.ceil(d.bottom-d.top||this.getAspectHeight(b)||e*this.getThumbAspectRatio(this.trc.modes[this.mode_name],"ratio")||f),this.cachedImageDim={width:e,height:f};return null},TRCRBox.prototype.getAspectHeight=function(a){var b;return a.thumbnail_aspect?(b=TRC.dom.getElementRect(a.thumbnail_aspect),b.bottom-b.top):0},TRCRBox.prototype.getImageOptimizePrefix=function(a,b,c){var d=this.trc.getProperty(this.mode_name,"image-size-factor",this.propertiesOverride)||1,e=this.trc.getProperty(this.mode_name,"image-min-width",this.propertiesOverride)||110,f=this.trc.getProperty(this.mode_name,"image-size-round",this.propertiesOverride)||10,g=this.trc.getProperty(this.mode_name,"image-max-ratio",this.propertiesOverride)||5,h=Math.ceil(Math.max(c.width*d,e)/f)*f,i=c.height/c.width,j=Math.ceil(h*c.height/c.width),k=this.isInNormalDimension(h)?h:Math.min(this.trc.getProperty(this.mode_name,"image-max-dimension",this.propertiesOverride),Math.ceil(this.trc.getProperty(this.mode_name,"image-max-dimension",this.propertiesOverride)*i)),l=this.isInNormalDimension(j)?j:Math.ceil(k*Math.min(i,g));return b=b.replace("{w}",Math.ceil(k).toString()).replace("{h}",Math.ceil(l).toString())},TRCRBox.prototype.isInNormalDimension=function(a){var b=this.trc.getProperty(this.mode_name,"image-min-dimension",this.propertiesOverride)||100,c=this.trc.getProperty(this.mode_name,"image-max-dimension",this.propertiesOverride)||600;return a>b-1&&c+1>a},TRCRBox.prototype.setLazyImageLoad=function(a,b){a.setAttribute(IMAGE_LAZY_SRC_DATA_NAME,b)},TRCRBox.prototype.setLazyImageLoadMethod=function(){var a,b=this.trc.global["thumb-lazy-load-method"]?this.trc.global["thumb-lazy-load-method"].split(","):[],c=0,d=b.length;for(a=0;d>a;a++)this.lazyImageLoadMethdos[b[a]]&&(c=1,this[this.lazyImageLoadMethdos[b[a]]]());if(!c)for(a in this.lazyImageLoadMethdos)this.lazyImageLoadMethdos.hasOwnProperty(a)&&this[this.lazyImageLoadMethdos[a]]()},TRCRBox.prototype.regLazyImageLoadOnPageInteractive=function(){var a=TRC.EVENT_PAGE_INTERACTIVE;TRC.listen(a,this.lazyImageLoader.trcBind(this)),TRC.isInteractive&&TRC.dispatch(a,void 0)},TRCRBox.prototype.regLazyImageLoadOnPageLoad=function(){var a=TRC.EVENT_PAGE_LOAD;TRC.listen(a,this.lazyImageLoader.trcBind(this)),TRC.isPageLoaded&&TRC.dispatch(a,void 0)},TRCRBox.prototype.regLazyImageLoadOnRboxVisibile=function(){var a=this.trc.global["thumb-lazy-load-space"]||100;this.isInViewPort(this.container,a)&&this.lazyImageLoader.trcBind(this)},TRCRBox.prototype.isInViewPort=function(a,b){var c=this.getMinViewPortOffsets(this.container);return!(0>c&&Math.abs(c)>b)},TRCRBox.prototype.lazyImageLoader=function(){var a,b,c=this.thumbnailImageStack||this.container.getElementsByTagName("img"),d=c.length;if(this.imagesLazyLoaded)this.imagesLazyLoaded=!0;else for(a=0;d>a;a++)b=c[a].getAttribute(IMAGE_LAZY_SRC_DATA_NAME),b&&(c[a].src=b)},TRCRBox.prototype.createUtmParam=function(){return{utm:TRC.utm.join(",")+(this.utm?","+this.utm.join(","):"")}},TRCRBox.prototype.getMinViewPortOffsets=function(a){var b=TRC.visibility.getViewPortOffsets(a);return b.verticalOffset<0&&b.horizontalOffset<0?Math.max(b.verticalOffset,b.horizontalOffset):Math.min(b.verticalOffset,b.horizontalOffset)},TRCRBox.prototype.drawListBody=function(trc){function autoHeight(elm){var oldVal=parseInt(document.trcGetCurrentStyle(elm,"height"));if(isNaN(oldVal))return!0;var p=document.createElement("span");with(p.style)display="block",height="10px",width="10px";elm.appendChild(p);var newVal=parseInt(document.trcGetCurrentStyle(elm,"height"));return elm.removeChild(p),newVal!=oldVal}function setHeight(a,b){a.style.height=b+"px";for(var c=0;a.clientHeight>b;)a.style.height=b-++c+"px"}if(TRC.tlf&&console.timeStamp("start mode - "+this.mode_name),TRC.tlf&&console.group("mode - "+this.mode_name),TRC.tlf&&console.time("mode rendering"),"object"==typeof trc){if(this.element.offsetTop<=0&&this.element.offsetWidth<=0)return void TRC.Timeout.set(this.drawListBody.trcBind(this,trc),1e3);win._tblConsole=win._tblConsole||[],TRC.pConsole(this.mode_name,"debug","start drawing widget","");var listContainer=this.listContainer;this.boxes=[];var internalc_width=0,TRCobj=this.trc;if(this.navigationType=TRCobj.getProperty(this.mode_name,"navigation-type",this.propertiesOverride),this.trc.calculateAutoSizeParameters(this),this.element.className+=this.autoSize?" trc-auto-size":"",this.isWCTextLinks){var trc_container=doc.trcGetParentByClassName(this.getContainer(),"trc_related_container");if(TRC.dom.addClass(trc_container,"trc_tl"),this.isClassFilter=TRC.Browser.ieUpto(8),this.isClassFilter?TRC.listen("IE_ClassShift",this.fixWCTextLinksVideoBoxes.trcBind(this)):TRC.dom.on(win,"resize",this.fixWCTextLinksVideoBoxes.trcBind(this).trcThrottle(500)),TRC.listen("videoCubeChange",this.fixWCTextLinksVideoBoxes.trcBind(this)),this.isResponsive){var TEXT_LINKS_RESP_CSS_NAME="trc_tl_responsive";TRC.dom.addClass(trc_container,TEXT_LINKS_RESP_CSS_NAME+" "+TEXT_LINKS_RESP_CSS_NAME+"_"+this.id),this.setResponsiveRules(TEXT_LINKS_RESP_CSS_NAME+"_"+this.id,this.recommendationList.length)}}var has_duration_label=!1,detail_order=this.trc.getProperty(this.mode_name,"detail-order",this.propertiesOverride),orientation=this.orientation=this.trc.getProperty(this.mode_name,"orientation",this.propertiesOverride);detail_order=detail_order.split(",");for(var j=0;j<detail_order.length;j++)"duration"==detail_order[j]&&(has_duration_label=!0);var explore_delay=0;this.exploreTimeoutId=null,"undefined"!=typeof this.trc.global&&(explore_delay=this.trc.global["explore-delay"]?this.trc.global["explore-delay"]:explore_delay);var self=this;this.container.onmouseover=function(a){var b=null;win.event?b=win.event.srcElement:a&&(b=a.target),b!=this.container&&null!=this.exploreTimeoutId||b==this.container&&null!=this.exploreTimeoutId||(this.exploreTimeoutId=TRC.Timeout.set(function(){this.exploreTimeoutId&&(TRC.Timeout.clear(this.exploreTimeoutId),this.exploreTimeoutId=null),this.sendEvent("explore",{},null,!0,null,null)}.trcBind(this),explore_delay))}.trcBind(this),0!=explore_delay&&(this.container.onmouseout=function(a){a=a||win.event;var b=this.container.getBoundingClientRect();a.clientX>=b.left&&a.clientX<b.right&&a.clientY>=b.top&&a.clientY<b.bottom||this.exploreTimeoutId&&(TRC.Timeout.clear(this.exploreTimeoutId),this.exploreTimeoutId=null)}.trcBind(this));var internalc=document.createElement("div");for(internalc.id="internal_"+this.id;listContainer.firstChild;)listContainer.removeChild(listContainer.firstChild);listContainer.appendChild(internalc),("none"==listContainer.style.display||"none"==listContainer.parentNode.style.display)&&(this.listContainer.style.display="block",this.listContainer.parentNode.style.display="block");var trcmeta={};__trcCopyProps(trc,trcmeta),delete trcmeta["video-list"],internalc.meta=trcmeta,this.firstVideo=null;var listSize=this.isResponsive?this.recommendationList.length:TRCobj.getProperty(this.mode_name,"list-size",this.propertiesOverride);listSize=Math.min(listSize,this.recommendationList.length),"horizontal"==orientation?(listContainer.style.overflowY="hidden",listContainer.style.overflowX="auto",internalc.style.width="5000px"):(listContainer.style.overflowX="hidden",listContainer.style.overflowY="auto");for(var i=0;listSize>i;i++){TRC.tlf&&0==i&&console.time("item rendering");var cur=this.recommendationList[i];cur.itemIndex=i,null==this.firstVideo&&"video"==cur.type&&(this.firstVideo=cur);try{this.trc.getFunction(this.mode_name,"item-data-filter",cur);var box=this.drawVideoBox(cur,has_duration_label);if(i>=this.recommendationList.length/2&&this.isWCTextLinks&&!this.isResponsive&&(box.className+=" trc_tl_right_col"),"vertical"==orientation){var clear_div=document.createElement("div");clear_div.style.clear="both",box.appendChild(clear_div)}if(internalc.appendChild(box),"scrolling"!=this.navigationType){var thumbnail_position=this.trc.getProperty(this.mode_name,"thumbnail-position",this.propertiesOverride);if(this.rows>1&&this.autoSize&&("top"==thumbnail_position||"bottom"==thumbnail_position)&&(this.itemMaxHeight=this.itemMaxHeight?this.itemMaxHeight<box.clientHeight?box.clientHeight:this.itemMaxHeight:box.clientHeight),box.offsetHeight>listContainer.offsetHeight){var diff=box.offsetHeight-listContainer.offsetHeight;box.style.height=parseInt(document.trcGetCurrentStyle(box,"height"))-diff+"px"}internalc.removeChild(box)}else{box.fixTextOverflow(),"undefined"==typeof box.image_div?box.thumb.appendChild(box.img):(box.thumb.appendChild(box.image_div),box.image_div.appendChild(box.img)),this.trc.global["use-delay-image-load"]?TRC.Timeout.set(this.setImageLoad.trcBind(this,box.img,box,box.img_src,100,box.thumb,this.trc.global["thumb-lazy-load-switch"]),10):this.setImageLoad(box.img,box,box.img_src,100,box.thumb,this.trc.global["thumb-lazy-load-switch"]);var mrg_right=parseInt(document.trcGetCurrentStyle(box,"margin-right"));internalc_width=box.clientWidth+box.offsetLeft+(isNaN(mrg_right)?0:mrg_right),"horizontal"==orientation&&autoHeight(box)&&setHeight(box,listContainer.offsetHeight)}this.boxes.push(box)}catch(e){__trcError("Error in drawVideoBox",e)}TRC.tlf&&0==i&&console.timeEnd("item rendering")}if("scrolling"!=TRCobj.getProperty(this.mode_name,"navigation-type",this.propertiesOverride)){internalc.style.width="auto";var pagerDiv=self.drawPager(),auto=TRCobj.getProperty(self.mode_name,"auto-scroll",this.propertiesOverride);"undefined"!=typeof auto&&"undefined"!=typeof pagerDiv&&null!=pagerDiv&&"none"!=auto&&(self.auto_scroll=function(){var a=0;for(i=0;i<pagerDiv.pages.length;i++)if(pagerDiv.pages[i]==pagerDiv.current&&i!=pagerDiv.pages.length-1){a=++i;break}pagerDiv.pages[a].page_switch()},null!=self.auto_scroll_interval&&TRC.Interval.clear(self.auto_scroll_interval),self.auto_scroll_interval=TRC.Interval.set(self.auto_scroll,parseInt(auto)))}else internalc.style.width=internalc_width+"px",TRC.Browser.ieUpto(6)&&1.1*listContainer.parentNode.parentNode.clientWidth<listContainer.clientWidth&&(listContainer.style.width="99%"),function(a){if(!(listContainer["client"+a]+1>=listContainer["scroll"+a])){if(TRC.Browser.ie&&TRC.Browser.ie<8)return listContainer.style[a.toLowerCase()]=internalc["client"+a]+18+"px",void("Width"==a&&(this.element.style.width=listContainer.style[a.toLowerCase()]));var b=Math.floor(Math.max(1,listContainer["scroll"+a]-listContainer["client"+a]));b-=Math.max(0,listContainer["scroll"+a]-listContainer.parentNode["scroll"+a]);var c=parseInt(listContainer.style[a.toLowerCase()]),d=Math.max(listContainer["scroll"+a],isNaN(c)?0:c)+b+"px";listContainer.style[a.toLowerCase()]=d,"Width"==a&&(this.element.style.width=d),this.postRenderQueue.pushFront("adapt to scrollbar",arguments.callee.trcBind(this,a))}}.call(this,"horizontal"==TRCobj.getProperty(this.mode_name,"orientation",this.propertiesOverride)?"Height":"Width"),TRCobj.getProperty(this.mode_name,"shade-scroll",this.propertiesOverride)&&this.postRenderQueue.pushBack("drawShade",function(a){this.drawShade(a)}.trcBind(this,orientation)),listContainer.onscroll=function(){this.sendEvent("explore",{},null,!0),this.check_visibility()}.trcBind(this),this.check_visibility();this.boxes[0].className+=" trc-first-recommendation trc-spotlight-first-recommendation",this.hasSyndicatedContent&&this.postRenderQueue.pushBack("syndication hint icon",this.addSyndicationHintIcon.trcBind(this,internalc)),"embed"===this.link_target&&this.postRenderQueue.pushBack("createEmbedThumb",this.createEmbedThumb.trcBind(this)),this.postRenderQueue.pushBack("list-suffix,publisher-end",function(a){this.trc.getFunction(this.mode_name,"list-suffix",a,this),this.trc["publisher-end"](this.id)}.trcBind(this,internalc)),this.postRenderQueue.pushBack("checkForBlocking",this.checkForBlocking.trcBind(this)),this.postRender(),this.trc.global["thumb-lazy-load-switch"]&&this.setLazyImageLoadMethod(),TRC.eventDelegator.dispatch("onrender",{name:this.mode_name,container:this.container,placement:this.orig_placement}),TRC.EventsAPI.dispatchRender(trc,this);var visible_delay=0;this.visibleTimeoutId=null,"undefined"!=typeof this.trc.global&&(visible_delay=this.trc.global["visible-delay"]?this.trc.global["visible-delay"]:visible_delay),this.setVisibility(this.manualVisibility,this.trc.global["enable-deferred-visible"],this.trc.global["visible-defer-timeout"],visible_delay,internalc);var active=this.trc.getProperty(this.mode_name,"auto-advance",this.propertiesOverride);-1!=active&&"undefined"!=typeof active&&(null==this.autoPlayer?this.autoPlayer=this.startAutoPlayManager(this.firstVideo,active):this.autoPlayer.getPlaylistItem("n")),TRC.tlf&&console.timeEnd("mode rendering"),TRC.tlf&&console.groupEnd()}},TRCRBox.prototype.postRender=function(a){if(a){var b=this.postRenderQueue.popFront();if(null==b)return void __trcDebug("TRCRBox.postRender: finished");try{b.func.call(this),TRC.pConsole(this.mode_name,"debug","executing postRender functions - see info",b.func.toString())}catch(c){__trcError("Error in TRCRBox.postRender while executing "+b.name,c)}}TRC.Timeout.set(this.postRender.trcBind(this,!0),0)},TRCRBox.prototype.addSyndicationHintIcon=function(a){var b,c=this.trc.getProperty(this.mode_name,"syndicated-attribution",this.propertiesOverride),d=this.trc.getProperty(this.mode_name,"syndicated-attribution-tooltip",this.propertiesOverride),e=this.trc.getProperty(this.mode_name,"syndicated-attribution-position",this.propertiesOverride),f=document.createElement("a"),g=/\btrc_rbox\b/;for(f.href=TRC.PROTOCOL+"//popup.taboola.com/"+(this.trc.language||"en")+"/?"+this.getAttributionLinkParams(),f.rel="nofollow",f.appendChild(document.createTextNode(c)),f.title=d,f.style.display="block",f.className="whatsThisSyndicated a-"+e,f.target="_blank";!g.test(a.className);)a=a.parentNode;b=f.cloneNode(!0),b.className+=" trc_mobile_attribution_link",f.className+=" trc_desktop_attribution_link",a.appendChild(f),a.appendChild(b),"absolute"!==a.style.position&&(a.style.position="relative"),TRC.dom.on(f,"click",function(a){return TRC.aboutUs.open(a||event)||!1})},TRCRBox.prototype.drawShade=function(a){if(!(TRC.Browser.ie&&TRC.Browser.ie<=6)){var b=this.listContainer["client"+("vertical"==a?"Width":"Height")]+"px",c=this.listContainer["client"+("vertical"==a?"Height":"Width")]+this.listContainer["client"+("vertical"==a?"Top":"Left")]-10+"px",d=document.createElement("div");d.className=a+"-start-shade",d.style["vertical"==a?"width":"height"]=b,d.style["margin"+("vertical"==a?"Top":"Left")]=this.listContainer["client"+("vertical"==a?"Top":"Left")]+"px";var e=document.createElement("div");e.className=a+"-end-shade",e.style["vertical"==a?"width":"height"]=b,this.listContainer.parentNode.insertBefore(d,this.listContainer),this.listContainer.parentNode.insertBefore(e,this.listContainer),e.style["margin"+("vertical"==a?"Top":"Left")]=c,e.style.backgroundRepeat=d.style.backgroundRepeat="repeat-"+("vertical"==a?"x":"y")}},TRCRBox.prototype.drawPager=function(){function a(){var a=[],c=0,d=0;if("none"==this.navigationType)return[{start_index:0,end_index:this.boxes.length}];for(b=0;b<this.boxes.length;b++){var e=this.boxes[b];l.appendChild(e),e.fixTextOverflow(!0),"vertical"==k?l.offsetHeight-5>=j.clientHeight&&(l.removeChild(e),a[c++]={start_index:d,end_index:d>b-1?d:b-1},d=b-1>=d?b--:b,this.clearChilds(l)):1.1*j.clientHeight<j.scrollHeight&&(l.removeChild(e),a[c++]={start_index:d,end_index:d>=b-1?d:b-1},d=b-1>=d?b--:b,this.clearChilds(l))}return a[c]={start_index:d,end_index:b-1},this.clearChilds(l),a}var b,c=this.trc,d=c.getProperty(this.mode_name,"pager-type-style",this.propertiesOverride),e=c.getProperty(this.mode_name,"cyclical-paging",this.propertiesOverride),f=c.getProperty(this.mode_name,"pager-position",this.propertiesOverride),g=c.getProperty(this.mode_name,"pager-button-location",this.propertiesOverride),h=c.getProperty(this.mode_name,"pager-button-style",this.propertiesOverride),i=this.mode_name,j=this.listContainer,k=c.getProperty(i,"orientation",this.propertiesOverride),l=j.firstChild;this.rows=c.getProperty(i,"rows",this.propertiesOverride),this.clearChilds(l),j.style.overflowX="hidden",j.style.overflowY="hidden";var m=a.call(this),n=document.createElement("div");if(n.style.clear="both",!this.autoSize){for(;this.rows>1&&!(m.length>=this.rows);)this.rows--;if(this.rows>1)for(var o=[],p=0;p<m.length;p++)this.boxes[m[p].start_index].className+=" trc-first-in-row",(p+1)%this.rows==0&&o.push({start_index:m[p+1-this.rows].start_index,end_index:m[p].end_index});o&&(j.style.height="auto",m=o)}for(b=m[0].start_index;b<=m[0].end_index;b++)if(!(b>=this.boxes.length)){var q=this.boxes[b];l.appendChild(q);try{null!=q.img_src&&("undefined"==typeof q.image_div?q.thumb.appendChild(q.img):(q.thumb.appendChild(q.image_div),q.image_div.appendChild(q.img)),this.setImageLoad(q.img,q,q.img_src,100,q.thumb,this.trc.global["thumb-lazy-load-switch"]),q.img_src=null)}catch(r){__trcError("Pager thumbnail images fixing errors",r)}q.fixTextOverflow()}l.appendChild(n);var s=this.pager;if(null!=s)try{s.parentNode.removeChild(s)}catch(r){}var t=m.length;if(1>=t||"none"==this.navigationType)return this.check_visibility(),null;var u=document.createElement("div");u.style.position="absolute",u.style.width=j.clientWidth/2+"px";var v=document.createElement("div");u.appendChild(v),j.parentNode.appendChild(u),v.id="trc_pager_"+this.id,v.className="trc_pager",v.current=null,v.pages=[],v.curPage=0;var w=j.clientWidth,x=document.createElement("div");
x.id="pager_prev_"+this.id,x.className="trc_pager_prev","sides"==g?(x.style.width="auto",x.style.paddingTop=(j.clientHeight-x.clientHeight)/2+"px",x.style.position="absolute",x.style["ltr"==c.direction?"left":"right"]="0px",j.parentNode.insertBefore(x,j)):v.appendChild(x),x.onclick=function(){v.curPage>0?v.pages[v.curPage-1].onclick():e&&v.pages[v.pages.length-1].onclick()};var y=document.createElement("div");y.id="pager_next_"+this.id,y.className="trc_pager_next",y.onclick=function(){v.curPage+1<v.pages.length?v.pages[v.curPage+1].onclick():e&&v.pages[0].onclick()};var z=TRC.URL.prototype.switchProtocol.call(c.getProperty(this.mode_name,"pager-button-inactive-image",this.propertiesOverride),protocol),A=TRC.URL.prototype.switchProtocol.call(c.getProperty(this.mode_name,"pager-button-active-image",this.propertiesOverride),protocol),B=TRC.URL.prototype.switchProtocol.call(c.getProperty(this.mode_name,"pager-button-hover-image",this.propertiesOverride),protocol);if("none"!=g)if("image"==h)""!=z?(x.image=document.createElement("img"),"sides"==g&&(x.image.onload=function(){j.style.paddingLeft=j.style.paddingRight=this.clientWidth+"px"}),x.image.src=z,x.appendChild(x.image),y.image=document.createElement("img"),"sides"==g&&(y.image.onload=function(){j.style.paddingLeft=j.style.paddingRight=this.clientWidth+"px",this.style["ltr"==c.direction?"left":"right"]=w-this.clientWidth+"px"}),y.image.src=z,y.appendChild(y.image),x.onmouseover=function(){this.before_image=this.image.src,B!=this.image.src&&(this.image.src=B)},x.onmouseout=function(){"undefined"!=typeof this.before_image&&this.before_image!=this.image.src&&(this.image.src=this.before_image)},y.onmouseover=function(){this.before_image=this.image.src,B!=this.image.src&&(this.image.src=B)},y.onmouseout=function(){"undefined"!=typeof this.before_image&&this.before_image!=this.image.src&&(this.image.src=this.before_image)}):(x.innerHTML="&lt;",y.innerHTML="&gt;");else{var C=h.split("|");x.innerHTML=C[0],y.innerHTML=C[1]}else x.style.display="none",y.style.display="none";var D=document.createElement("div");D.className="trc_pager_pages",v.appendChild(D);var E=c.getProperty(this.mode_name,"pager-style-active-image",this.propertiesOverride),F=c.getProperty(this.mode_name,"pager-style-inactive-image",this.propertiesOverride),G=c.getProperty(this.mode_name,"pager-style-hover-image",this.propertiesOverride);for(b=0;t>b;b++){var H=document.createElement("div");switch(d){case"none":H.innerHTML="",D.style.cssText="display:none !important;";break;case"numbers":H.innerHTML=""+(b+1);break;case"counter":var I=document.createElement("span");I.className="trc_pager_counter",I.innerHTML=Gettext.strargs(c.gt.gettext("%1 of %2"),[b+1,v.pages.length]),H.appendChild(I),D.className.search("trc_pager_counter")<0&&(D.className+=" trc_pager_counter");break;case"bullets":H.innerHTML='<span style="font-weight: bold;">&bull;</span>';break;case"image":""!=E?(H.inner_img=document.createElement("img"),H.inner_img.src=F,H.appendChild(H.inner_img)):H.innerHTML=""+(b+1)}H.className="trc_pager_unselected",D.appendChild(H),H.index=b;var J=this;H.page_switch=function(){try{l.removeChild(n)}catch(a){}if(null!=v.current){for("image"==d&&""!=F&&(H.inner_img.src=F),v.current.className="trc_pager_unselected",b=m[v.curPage].start_index;b<=m[v.curPage].end_index;b++)b<J.boxes.length&&l.removeChild(J.boxes[b]);for(b=m[this.index].start_index;b<=m[this.index].end_index;b++)if(!(b>=J.boxes.length)){var f=J.boxes[b];if(b===m[this.index].start_index&&(f.className+=" trc-spotlight-first-recommendation"),l.appendChild(f),"undefined"!=typeof f.img&&null!=f.img_src&&(f.video_data.ad_load_count=(new Date).getTime(),"undefined"==typeof f.image_div?f.thumb.appendChild(f.img):(f.thumb.appendChild(f.image_div),f.image_div.appendChild(f.img)),f.img.src=f.img_src,f.img_src=null),null!=f.spnoverlay){var h=f.spnoverlay,i=h.firstChild,j=h.lastChild,k=j[(j.clientHeight>0?"client":"scroll")+"Height"];i.style.width=j[(j.clientWidth>0?"client":"scroll")+"Width"]+"px",h.style.height=i.style.height=Math.max(k,parseInt(i.style.height))+"px",f.spnoverlay=null}f.fixTextOverflow(),J.postRender()}}if(l.appendChild(n),v.current=this,"image"==d&&""!=E&&(H.inner_img.src=E),this.className="trc_pager_selected",v.curPage=this.index,"undefined"!=typeof y&&(this.index+1>=v.pages.length&&!e?(""!=z&&"none"!=g&&(y.image.src=z),y.className="trc_pager_next pager_disabled"):(""!=A&&"none"!=g&&(y.image.src=A),y.className="trc_pager_next pager_enabled")),"undefined"!=typeof x&&(this.index<=0&&!e?(""!=z&&"none"!=g&&(x.image.src=z),x.className="trc_pager_prev pager_disabled"):(""!=A&&"none"!=g&&(x.image.src=A),x.className="trc_pager_prev pager_enabled")),"counter"==d){var o=document.createElement("div");for(o.appendChild(document.createTextNode(Gettext.strargs(c.gt.gettext("%1 of %2"),[this.index+1,v.pages.length])));D.firstChild;)D.removeChild(D.firstChild);D.appendChild(o)}J.check_visibility(),TRC.dispatch("trc_afterRboxDraw")},H.onclick=function(){this.page_switch(),0!=this.index&&J.sendEvent("explore",{},null,!0)},H.onmouseover=function(){"image"==d&&""!=G&&(this.prev_img=this.inner_img.src,this.inner_img.src=G)},H.onmouseout=function(){"image"==d&&"undefined"!=typeof this.prev_img&&(this.inner_img.src=this.prev_img)},v.pages.push(H)}if("sides"==g?(y.style.width="auto",y.style.paddingTop=(j.clientHeight-y.clientHeight)/2+"px",y.style.position="absolute",j.parentNode.insertBefore(y,j),j.style.paddingLeft=j.style.paddingRight=y.clientWidth+"px",y.style["ltr"==this.trc.direction?"left":"right"]=w+y.clientWidth+"px"):v.appendChild(y),v.pages[0].onclick(),this.pager=v,"center"==f){v.style.position="absolute",v.style.cssFloat="none",v.style.styleFloat="none",v.style.display="block";var K=v.clientWidth;v.style.width=K+2+"px",v.style.position="relative";var L=(j.clientWidth-K)/2;v.parentNode.style.width=K+2+L+"px",v.style.marginLeft=L+"px"}else if("header"==f&&this.header.ext){v.parentNode.removeChild(v),v.className+=" in_trc_header";var M=document.createElement("div");M.appendChild(v),M.id=v.id,v.id="";var N=document.createElement("div");N.style.clear="left",M.appendChild(N),this.header.titleBox.innerHTML||(this.header.titleBox.innerHTML="&nbsp;"),this.header.ext.appendChild(M)}return v},TRCRBox.prototype.check_visibility=function(){for(var a=0;a<this.boxes.length;a++){var b=this.boxes[a];this.itemMaxHeight&&(b.style.height=this.itemMaxHeight+"px")}},TRCRBox.prototype.startAutoPlayManager=function(a,b){if("object"!=typeof this.autoplaybox||!TRC.AutoPlaylistController)return null;var c=this.autoplaybox,d=document.createElement("div");c.playerbox=d,c.appendChild(d);var e=new TRC.AutoPlaylistController(this,this.publisher,null,c,a,this.listContainer.id,b);return e.render(d),e},TRCRBox.prototype.playInsideHostingContainer=function(a,b,c){var d,f,g,h,i=this.trc.getProperty(this.mode_name,"render-player-info",this.propertiesOverride),j=this.trc.getProperty(this.mode_name,"player-detail-order",this.propertiesOverride);c.videoBlock?("A"===c.videoBlock.tagName.toUpperCase()&&(d=this.trc.getProperty(this.mode_name,"player-thumbnail-height",this.propertiesOverride)||300,c.videoBlock.parentNode.replaceChild(h=document.createElement("DIV"),c.videoBlock),c.videoBlock=h,c.videoBlock.style.height=i?d+"px":"",c.videoBlock.style.overflow="hidden",i&&(c.videoBlock.style.width=(this.trc.getProperty(this.mode_name,"player-thumbnail-width",this.propertiesOverride)||400)+"px",c.videoBlock.style.height=(this.trc.getProperty(this.mode_name,"player-thumbnail-height",this.propertiesOverride)||300)+"px")),__trcPurgeEventHandlers(c.videoBlock),c.videoBlock.innerHTML="",g=c.getElementsByTagName("A")[0],b.apply(null,[c.videoBlock,a]),i&&(f=this.drawVideoBox(a,c.hasDuration,j,"top"),__trcPurgeEventHandlers(g),g.parentNode.replaceChild(f.getElementsByTagName("A")[1],g)),this.sendEvent("click",{ii:a["item-id"],it:a.type},null),this.sendExternalTracking(this.getItemExternalTrackingURLsList(a).c)):__trcError("Error opening autoPlayContainer",e)},TRCRBox.prototype.openPlayer=function(a,b,c){var d=this.publisher,e="",f=this.trc.global[e+"auto-advance"];"undefined"==typeof f&&(f=-1);var g=this.trc.global["syndicator-affiliate-id"];"undefined"==typeof g&&(g=null),"function"==typeof window.trc_lightboxOpen&&window.trc_lightboxOpen();try{var h=new TRC.LightBoxManager(this.trc.getProperty(this.mode_name,"lightbox-display-title",this.propertiesOverride),c,this.listContainer.id,this.trc.direction);h.createHeader(a.title),h.addElements({bottom:new TRC.AutoPlaylistController(this,d,!0,h,a,"rbox-lightbox",f)}),h.open(),this.sendEvent("click",{ii:a["item-id"],it:a.type},null),this.sendExternalTracking(this.getItemExternalTrackingURLsList(a).c)}catch(i){__trcError("Error opening autoPlayContainer",i)}},TRCRBox.prototype.findElement=function(a,b,c,d){"undefined"==typeof b&&(b=document),"undefined"==typeof c&&(c="*");for(var e=b.getElementsByTagName(c),f=0;f<e.length;f++)if(a(e[f]))return e[f];return d},TRCRBox.prototype.findElements=function(a,b,c){for(var d=[],e=0;a&&e<a.length;e++){var f=a[e],g=this.findElement(function(a){return a.className.search(f)>=0},b,"span");g&&(c&&(g=g.cloneNode(!0)),d.push(g))}return d},TRCRBox.prototype.findFlash=function(a){var b=this.findElement(a,document,"embed");return b?b:this.findElement(a,document,"object")},TRCRBox.prototype.pauseVideo=function(a){var b=this.findFlash(function(a){return"function"==typeof a.pauseVideo});try{b&&b.pauseVideo(a)}catch(c){__trcError("Error in pauseVideo",c)}"function"==typeof window.trc_pauseVideo&&window.trc_pauseVideo(a)},TRCRBox.prototype.playVideoAd=function(a,b,c,d){TRC.rboxMap&&TRC.rboxMap.sendDebugMap("trcrboxui Player playVideoAd");var e=this.findFlash(function(a){return"function"==typeof a.playVideoAd});try{e&&e.playVideoAd(a.title,a["display-url"],a["landing-url"],a.url,b,c,a["item-id"],d)}catch(f){__trcError("Error in playVideoAd",f)}},TRCRBox.prototype.getLinkTarget=function(a,b,c){var d;return d=b?b[a]||c[a]:c[a],d||(d="_blank"),d},TRCRBox.prototype.addPiggyBackParams=function(a){return a?a+"&ppb="+this.response.trc.ppb+"&cpb="+this.response.trc.cpb:void 0},TRCRBox.prototype.addModeDebugData=function(a){return a+encodeURI(this.getModeDebugData("string"))},TRCRBox.prototype.getModeDebugData=function(a,b){try{var c=this.response.trc["test-variant"];if("string"===a){var d="&cmn="+this.mode_name,e="&cpn="+this.placement,f="",g="",h="";return c!==b&&(f="&omn="+this.orig_name,g="&opn="+this.orig_placement,h="&vn="+c),d+e+f+g+h}var i={};return i.cmn=this.mode_name,i.cpn=this.placement,c!==b&&(i.omn=this.orig_name,i.opn=this.orig_placement,i.vn=c),i}catch(j){}},TRCRBox.prototype.createVideoLink=function(a,b){var c,d=document.createElement("a"),e=this.trc.global["publisher-onclick-nt-enabled"]&&a["is-in-network"],e=this.ntHandlerEnabled&&a["is-in-network"],f=this.sendClickPiggyBack?this.addPiggyBackParams(a.logger_url):a.logger_url,g=this.trc.global["disable-stop-propagation"]===!0?!1:!0;return this.sendModeDebugData&&(f=this.addModeDebugData(f)),e&&(a.hasNtClckHnadler=!0),d.title=TRC.util.getHtmlDecodeText(b),a.link_target=this.link_target,a.isSyndicated&&!e?(d.href=a.url,d.rel="nofollow",c=this.getLinkTarget(this.getProviderType(a),this.linkTargetConf,this.defaultLinkTarget),d.logger_url=f.replace("&url=","&redir=")+(a["is-in-network"]?"&prt=nt":"")+(a["is-native"]?"&prt=nav":""),d.target=c,this.trc.global["touchstart-enabled"]===!0&&TRC.dom.on(d,"touchstart",function(a){d.href=d.logger_url,d.isTouchPropagation=1,g&&a.stopPropagation()}),d.onmousedown=function(a){return a=a||event,(a.target||a.srcElement).target=c,d.isTouchPropagation?!0:void(d.href=d.logger_url)},d.onclick=function(){if(this.trc.clickFraud.reportClick(),this.sendExternalTracking(this.getItemExternalTrackingURLsList(a).c),this.trc.global["deep-linking-enabled"]&&TRC.DeepLinking.isAppStoreURL(a.url,this.trc.global["additional-deep-links-regex"]))try{return TRC.DeepLinking.openDeepLink(d.logger_url),!1}catch(b){}return d.isTouchPropagation?!0:(this.shiftRedirOnclick&&(d.href=d.logger_url),this.pauseVideo("link"),TRC.Browser.ieUpto(7)?(this.clickLink(d.href,d.target),!1):!0)}.trcBind(this)):(d.href=a.url,"blank"!=this.link_target?d.target="_parent":(d.target="_blank",d.onmousedown=function(a){a=a||event,(a.target||a.srcElement).target="_blank"}),a["is-in-network"]&&(a.scParams.prt="nt"),this.organicRedirParam&&(f=f.replace("&url=","&"+this.organicRedirParam+"=")),this.useRedirect&&this.useRedirectOnLink&&(d.href=f),d.onmousedown=function(){d.href=f},d.onclick=this.videoLinkClickHandler.trcBind(this,a,d,f)),this.trc.global["events-api-click-enabled"]&&TRC.dom.on(d,"click",function(b){var c=d.target;a.linkTarget=c,"_blank"===c?setTimeout(function(){TRC.EventsAPI.dispatchClick(a,this.response.trc)}.trcBind(this),0):TRC.EventsAPI.dispatchClick(a,this.response.trc)}.trcBind(this)),d},TRCRBox.prototype.videoLinkClickHandler=function(){var a=2e3,b=function(a,b,c){TRC.rboxMap&&TRC.rboxMap.sendDebugMap("trcrboxui openLightbox");var d=a.trc.global["syndication-embed-code"];return"function"!=typeof d||win.trc_testmode?win.open(b.logger_url):a.openPlayer(b,d,c),!1},c=function(a,b){TRC.rboxMap&&TRC.rboxMap.sendDebugMap("trcrboxui openEmbedbox");var c=a.trc.getProperty(a.mode_name,"player-embed-code",this.propertiesOverride),d=a["player-container-id"],e=a.billboard||document.getElementById(d);return"function"==typeof c&&e&&!win.trc_testmode?a.playInsideHostingContainer(b,c,e):win.open(b.logger_url),!1},d=function(a,b,c,d){return"video"==b.type&&a.pauseVideo("link"),c.target="_blank",TRC.Browser.ieUpto(7)||d?TRC.Browser.firefoxUpto(8)?!0:(a.clickLink(c.href,c.target),!1):(c.href=b.url,a.sendEvent("click",{ii:b["item-id"],it:b.type},null,!1),!0)},e=function(a,b){switch(a){case"brightcove":return TRC.brightcove_playVideo(b);case"ooyala":return TRC.ooyala_playVideo(b);case"kaltura":return TRC.kaltura_playVideo(b)}return!1},f=function(a){var b=a.link_target;if("local"===b){if("function"==typeof window.trc_videoSelected)return void window.trc_videoSelected.call(window,a.id,a.url);b=this.trc.video_source}e(b,a.id)||this.clickLink(a.url)};return function(e,g,h,i){i=i||event;var j=e.link_target,k=!1,l=this.useRedirect;if("embed"!==j&&this.sendExternalTracking(this.getItemExternalTrackingURLsList(e).c),"lightbox"===j&&this.trc.global)return b(this,e,i);switch(j){case"embed":k=c(this,e);break;case"blank":(i.target||i.srcElement).target="_blank",l&&(g.href=h),k=d(this,e,g,l);break;default:if(l&&"local"!=e.link_target&&"function"!=typeof this.onclick&&"function"!=typeof this.trc.onclick){if(TRC.Browser.ieUpto(7))return this.clickLink(g.href,g.target),!1;this.shiftRedirOnclick&&(g.href=h),k=!0}else this.sendEvent("click",e.hasNtClckHnadler?e.scParams:{ii:e["item-id"],it:e.type},null,!1,this.publisherClickHandler.trcBind(this,e,f.trcBind(this,e,!1)),a)}return e.url!=e.original_url&&__trcDebug("url:"+e.original_url+", changed to:"+e.url+", on page:"+win.location.href),k||(i.cancelBubble=!0,i.stopPropagation&&i.stopPropagation()),k}}(),TRCRBox.prototype.clickLink=function(a,b){TRC.Browser.firefoxUpto(8)&&(win.location.href=a);var c=document.createElement("a");if(c.href=a,c.target=b?b:"_parent",c.style.visibility="hidden",document.body.appendChild(c),c.click)return void c.click();var d=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window,button:0});c.dispatchEvent(d)},TRCRBox.prototype.publisherClickHandler=function(a,b){var c=__trcCopyProps(a,{});delete c["item-id"],delete c.link;try{if("function"==typeof this.onclick&&!this.onclick.call(this.pubOpts,c))return!1;if("function"==typeof this.trc.onclick&&!this.trc.onclick.call(this.pubOpts,c))return!1}catch(d){__trcError("Publisher 'onclick' handler had an error",d)}return b(this)},TRCRBox.prototype.add_span=function(a,b,c){var d=document.createElement("span");return null!=a&&(d.className=a),null!=b&&("object"==typeof b?d.appendChild(b):d.innerHTML=b),"undefined"!=typeof c&&c.appendChild(d),d},TRCRBox.prototype.genBidiLabel=function(a,b,c){function d(a){var b="A-Za-z--------",c="---",d=a.match(new RegExp("^[^"+b+c+"]*(?:(["+b+"]+)|(["+c+"]+))"));if(!d)return null;if(d[2]){var e=document.createElement("bde");return e.dir="rtl",e.innerHTML=a,e}return null}TRC.rboxMap&&TRC.rboxMap.sendDebugMap("trcrboxui genBidiLabel");var e,f=!1,g=d(b);return null==g?g=b:f=!0,e=this.add_span("video-label "+c,g,a),e.isRTL=f,e},TRCRBox.prototype.buildLabelBox=function(a,b,c){var d,e;for(d=0;d<c.length;d++)switch(e=c[d]){case"title":this.genBidiLabel(a,b.title,"video-title");break;case"uploader":"undefined"!=typeof b.uploader&&this.add_span("video-label video-uploader",this.formatData("uploader",b.uploader),a);break;case"category":"undefined"!=typeof b.category&&this.add_span("video-label video-category",this.formatData("category",decodeURIComponent(b.category.split(";")[0].split("//")[0])),a);break;case"views":this.add_span("video-label video-views",this.formatData("views",b.views),a);break;case"rating":this.add_span("video-label video-rating",this.formatData("rating",b.rating),a);break;case"description":var f=this.genBidiLabel(a,b.description,"video-description");f.title='"Description: '+this.removeHtmlTags(b.description)+'"';break;case"duration":"undefined"!=typeof b.duration&&""!=b.duration&&this.add_span("video-label video-duration-detail",this.formatData("duration",b.duration),a);break;case"branding":b["branding-text"]?this.add_span("branding",this.formatData("syndicator",b["branding-text"]),a):b["branding-url"]&&this.add_span("branding","<img src='"+b["branding-url"]+"'>",a);break;case"url":break;default:"undefined"!=typeof b[e]&&b[e]&&this.add_span("video-label video-"+e,this.formatData(e,b[e]),a)}},TRCRBox.prototype.FixVideoImage=function(a,b,c){var d=TRC.css.utils;if(0==c.height||0==c.width||!c.complete||TRC.Browser.ieUpto(6))return d.setStyleProperty(c,"width",a+"px",this.isCssImportant),d.setStyleProperty(c,"height",b+"px",this.isCssImportant),void(c.style.visibility="visible");var e=a/b,f=c.width/c.height;if(e>f){var g=Math.floor(a/f),h=Math.floor((b-g)/2);d.setStyleProperty(c,"width",a+"px",this.isCssImportant),0!=h&&(TRC.Browser.ieAtleast(8)?(c.style.position="relative",d.setStyleProperty(c,"top",h+"px",this.isCssImportant)):d.setStyleProperty(c,"margin-top",h+"px",this.isCssImportant))}else{var i=Math.floor(b*f),j=Math.floor((a-i)/2);d.setStyleProperty(c,"height",b+"px",this.isCssImportant),0!=j&&(TRC.Browser.ieAtleast(8)?(c.style.position="relative","ltr"==this.trc.direction?d.setStyleProperty(c,"left",j+"px",this.isCssImportant):d.setStyleProperty(c,"left",-1*j+"px",this.isCssImportant)):"ltr"==this.trc.direction?d.setStyleProperty(c,"margin-left",j+"px",this.isCssImportant):d.setStyleProperty(c,"margin-right",j+"px",this.isCssImportant))}c.style.visibility="visible"},TRCRBox.prototype.drawThumbnailLink=function(a,b,c,d,e){var f;b||"video"==c.type&&"undefined"!=typeof c.duration&&""!=c.duration&&"0"!=c.duration&&(f=this.genDuration(c.duration));var g=this.createVideoLink(c,d);TRC.dom.addClass(g,"item-thumbnail-href"),"undefined"!=typeof c["thumbnail-clickable"]&&"false"==c["thumbnail-clickable"]&&(g.title="",g.style.cursor="default",g.onclick=function(){return!1});var h=this.trc.getProperty(this.mode_name,"thumbnail-height",this.propertiesOverride),i=this.trc.getProperty(this.mode_name,"thumbnail-width",this.propertiesOverride),j=document.createElement("span");j.className="thumbBlock","undefined"!=typeof h&&(j.style.height=h+"px"),"undefined"!=typeof i&&(j.style.width=i+"px");var k=document.createElement("img");k.style.visibility="hidden";var l=this.add_span("thumbnail-overlay",null,j);TRC.Browser.ieUpto(6)&&(l.style.display="none");var m=this.trc.getProperty(this.mode_name,"emblem",this.propertiesOverride),n=null;if(null==m||"null"==m||TRC.Browser.ie&&!TRC.Browser.ieAtleast(7)||(n=this.add_span("thumbnail-emblem",null,j),n.style.backgroundImage="url("+m+")"),"undefined"!=typeof h&&(l.style.height=h+"px",null!=n&&(n.style.height=h+"px")),"undefined"!=typeof i&&(l.style.width=i+"px",null!=n&&(n.style.width=i+"px")),k.onerror=this.imageOnErrorHandler.trcBind(this,k,c),k.onload=function(a){a.complete?this.FixVideoImage(i,h,a):TRC.Timeout.set(arguments.callee.trcBind(this,a),1e3)}.trcBind(this,k),7===TRC.Browser.ie&&(a.image_div=document.createElement("div")),c.isSyndicated){var o=document.createElement("span");if(o.className="branding",c["branding-text"])o.appendChild(document.createTextNode(this.formatData("syndicator",c["branding-text"])));else if(c["branding-url"]){var p=document.createElement("img");p.src=c["branding-url"],o.appendChild(p)}j.style.position="relative",j.appendChild(o);var q=document.createElement("span"),r=this.trc.getProperty(this.mode_name,"syndicated-static-text",this.propertiesOverride),s=this.trc.getProperty(this.mode_name,"syndicated-static-text-position",this.propertiesOverride);q.className="static-text "+s,r&&q.appendChild(document.createTextNode(r)),j.appendChild(q)}if(a.thumb=j,a.img=k,a.img_src=this.getThumbnailURL(c,i,h),f){var t=document.createElement("div");t.className="video-duration video-duration-detail",t.style.left=0,"undefined"!=typeof i&&(TRC.Browser.ieUpto(6)?(t.style.marginLeft=i/2-3+"px",t.style.top=h/2-15+"px"):7===TRC.Browser.ie?(t.style.left=i-3+"px",t.style.top=h-15+"px"):(t.style.marginLeft=i-3+"px",t.style.top=h-15+"px")),t.appendChild(f);var u=this.genDuration(c.duration);u.style.opacity=1,u.style.filter="alpha(opacity=100)",u.style.backgroundColor="transparent",t.appendChild(u),j.appendChild(t)}switch(g.appendChild(j),e){case"bottom":j.style.cssFloat="none",j.style.styleFloat="none",j.style.display="block",j.style.width=i+"px";break;case"top":case"under":j.style.cssFloat="none",j.style.styleFloat="none",j.style.display="block",j.style.width=i+"px";break;case"end":j.style.cssFloat="right",j.style.styleFloat="right"}return g},TRCRBox.prototype.imageOnErrorHandler=function(a,b){var c,d=a.src,e=this.trc.global["images-host"]?this.trc.global["images-host"]:"images.taboola.com",f=d.search(/\Shttp\S/),g=d.match(/\Staboola(\S+)?.com\/thumbnails\S/)?!0:!1;f>5&&g?(d=TRC.URL.prototype.switchProtocol.call(d.indexOf(e)>-1?unescape(unescape(d.slice(f+1))):unescape(d.slice(f+1)),protocol),__trcWarn("Failed to load taboola CDN thumbnail "+a.src+" for item="+b["item-id"]+", loading direct thumbnail instead : "+d)):f>5&&d.indexOf(e)>-1?(d=TRC.URL.prototype.switchProtocol.call(unescape(d.slice(f+1)),protocol),__trcWarn("Failed to load thumbnail "+a.src+" for item="+b["item-id"]+", loading "+d+" thumbnail instead")):(c=TRC.URL.prototype.switchProtocol.call(this.trc.getProperty(this.mode_name,"default-thumbnail",this.propertiesOverride),protocol),d="undefined"!=c?c:"",a.onerror=null,__trcWarn("Failed to load thumbnail "+a.src+" for item="+b["item-id"]+", loading default thumbnail instead")),a.src=d},TRCRBox.prototype.drawVideoBox=function(a,b,c,d){var e="";a=__trcCopyProps(a,{}),a.isSyndicated=a["is-syndicated"]||a["is-in-network"]||a["is-native"],a.isPhoto="photo"===a.type,a.isText="text"===a.type,this.setApiItemsData(a),a.tags="string"==typeof a.tags?TRC.text.parseCSV(a.tags):[];var f=document.createElement("div");f.rbox=this;var g=f.thumbnail_position=d||this.trc.getProperty(this.mode_name,"thumbnail-position",this.propertiesOverride);f.video_data=a,f.setAttribute("data-item-id",a["item-id"]),f.setAttribute("data-item-title",a.title),f.setAttribute("data-item-thumb",this.getThumbnailURL(a,100,80)),f.setAttribute("data-item-syndicated",!!a.isSyndicated),this.setVideoBoxClassName(f),this.autoSize&&this.setAutoDimantions(f);var h=a.url;if(0==h.search(/\w{3,4}:\/\/(\w+)\.taboola(syndication)?.com/))for(var i=h.split(/[\?&]/),j=0;j<i.length;j++)if("url"==i[j].split("=")[0]){h=decodeURIComponent(i[j].split("=")[1]);break}if(!a.isSyndicated){if(a.original_url=h,h=this.trc.getFunction(this.mode_name,"change-url",h,f,this.tracking),h==a.original_url&&this.tracking){var k=h.split("#");h=k[0]+(k[0].search("\\?")>=0?"&":"?")+this.tracking+(k[1]?"#"+k[1]:"")}"function"==typeof TRC.pageManager&&(h=TRC.pageManager.fixRecommendationURL(h))}a.url=h;var l={pi:this.trc.getItemId(),ri:this.response.trc.req,sd:TRC.pageManager.getPublisherValue(TRC.publisherId,"session-data"),ui:TRC.pageManager.getValue("user-id"),it:a.type,ii:a["item-id"],pt:this.getItemType(),li:this.listContainer.id,url:h,p:a.isSyndicated?a.publisher:"",vi:this.cachedViewId||TRC.pageManager.getPageData(),r:Math.floor(100*Math.random())};a.scParams=l;var m=[];for(var n in l)l.hasOwnProperty(n)&&l[n]&&(this.trc["normalize-log-param"](n,l[n]),m.push(encodeURIComponent(n)+"="+encodeURIComponent(l[n])));a.logger_url=protocol+"//"+this.domain+"/"+encodeURIComponent(this.trc["normalize-log-param"]("publisher",TRC.publisherId))+"/log/3/click?"+m.join("&"),e+=a.title;var o=this.createVideoLink(a,e);TRC.dom.addClass(o,"item-label-href"),a.link=o;var p=document.createElement("span");if(p.style.display="block",p.className="video-label-box",o.appendChild(p),f.labelsBox=p,f.appendChild(o),"none"!=g){var q=this.drawThumbnailLink(f,b,a,e,g);if("under"==g){var r=this.trc.getProperty(this.mode_name,"thumbnail-height",this.propertiesOverride);q.title=o.title="",f.insertBefore(q,o),f.style.position="relative",f.style.height=r+"px";var s=document.createElement("span");s.className="label-box-overlay",o.className+="video-labels-anchor",e=this.findElement(function(a){return a.className.search("title")>=0},f.labelsBox,"span",null),TRC.Browser.ieUpto(8)&&!TRC.Browser.ieUpto(7)&&(o.className+=" ie8fix"),f.labelsBox.appendChild(s),a.thumbUnder=!0}else"bottom"==g?f.appendChild(q):f.insertBefore(q,o)}var t=c||this.trc.getProperty(this.mode_name,"detail-order"+(a.isSyndicated?"-syndicated":""),this.propertiesOverride);t=t.split(","),this.buildLabelBox(p,a,t),f.fixTextOverflow=this.fixBoxTitleAndDesc.trcBind(this,a,p),TRC.Browser.ieUpto(6)&&(f.onmouseover=function(){this.className+=" videoCube_hover"},f.onmouseout=function(){this.className=this.className.replace(/\b\s+videoCube_hover\b/g,"")});try{this.trc.getFunction(this.mode_name,"item-renderer",f,f.video_data)}catch(u){__trcError("Error in itemRenderer",u)}return f},TRCRBox.prototype.setAutoDimantions=function(a){if(this.AutoSizeRule){var b=this.AutoSizeRule.Ws+"px";this.rows>1&&(a.style.marginBottom=b),this.boxes.length%this.AutoSizeRule.n==0&&(b=0),"rtl"==this.trc.direction?a.style.marginRight=b:a.style.marginLeft=b,a.style.width=this.AutoSizeRule.Wi+"px";var c=this.trc.getProperty(this.mode_name,"thumbnail-height",this.propertiesOverride),d=this.trc.getProperty(this.mode_name,"thumbnail-width",this.propertiesOverride),e=c/d;this.trc.modes[this.mode_name]["thumbnail-width"]=this.AutoSizeRule.Wi,this.trc.modes[this.mode_name]["thumbnail-height"]=Math.round(this.AutoSizeRule.Wi*e)}},TRCRBox.prototype.getRuleAspectRatio=function(a,b){return a.virtualThumbWidth&&a.virtualThumbHeight&&!isNaN(a.virtualThumbWidth)&&!isNaN(a.virtualThumbHeight)?"ratio"==b?a.virtualThumbHeight/a.virtualThumbWidth:a.virtualThumbHeight/a.virtualThumbWidth*100:!1},TRCRBox.prototype.getThumbAspectRatio=function(a,b){try{var c=a["thumbnail-height"]/a["thumbnail-width"];return"ratio"==b?c:Math.round(100*c)}catch(d){return __trcWarn("getThumbAspectRatio",d.message),null}},TRCRBox.prototype.getThumbnailURL=function(a,b,c){if(TRC.rboxMap&&TRC.rboxMap.sendDebugMap("trcrboxui getThumbnailURL"),"undefined"==typeof a["thumb-size"])return a.thumbnail;for(var d=[{w:a["thumb-size"].split("x")[0],h:a["thumb-size"].split("x")[1],u:a.thumbnail}],e=1;"undefined"!=typeof a["thumb-size-"+e];e++)d.push({w:a["thumb-size-"+e].split("x")[0],h:a["thumb-size-"+e].split("x")[1],u:a["thumbnail-"+e]});d=d.sort(function(a,b){return a.w*a.h-b.w*b.h});for(var f=0;f<d.length;f++)if(b*c<=d[f].w*d[f].h)return d[f].u;return d.pop().u},TRCRBox.prototype.addTaboolaLogoNoDisclosure=function(){TRC.rboxMap&&TRC.rboxMap.sendDebugMap("trcrboxui addTaboolaLogoNoDisclosure");var a,b=this.trc.attribution,c=this.trc.getProperty(this.mode_name,"attribution-text",this.propertiesOverride),d=TRC.URL.prototype.switchProtocol.call(this.trc.getProperty(this.mode_name,"logo-image",this.propertiesOverride),protocol),e=this.trc.getProperty(this.mode_name,"attribution-position",this.propertiesOverride),f=["template=colorbox","taboola_utm_source="+this.publisher,"taboola_utm_medium=bytaboola","taboola_utm_content="+this.mode_name+":"+this.placement+":"+(this.trc["test-variant"]||"")],g="//www.taboola.com/popup?"+f.join("&");if(0!=b&&"none"!==e){var h=document.createElement("div");h.className="logoDiv",h.innerHTML="&nbsp;","rtl"==this.trc["attribution-disclosure-direction"]?(h.style.cssFloat="left",h.style.styleFloat="left"):(h.style.cssFloat="right",h.style.styleFloat="right");var i=document.createElement("a");i.href=g,i.rel="nofollow",i.target="_blank",h.appendChild(i),"top"==e?"object"==typeof this.header&&this.header.ext.appendChild(h):this.element.appendChild(h);var j=document.createElement("div"),k="clear:both; _height:1px; _overflow:hidden;";if("string"==typeof j.style.cssText?j.style.cssText=k:j.setAttribute("style",k),this.element.appendChild(j),"string"!=typeof d||null!=c&&""!=c&&"null"!=c)i.innerHTML+=c,a=i.cloneNode(!0),i.className+=" trc_desktop_attribution_link",a.className+=" trc_mobile_attribution_link",h.appendChild(a),i.onclick=function(a){return TRC.aboutUs.open(a||event)||!1};else if(TRC.Browser.ieUpto(6)){TRC.rboxMap&&TRC.rboxMap.sendDebugMap("trcrboxui addTaboolaLogoNoDisclosure ie6");var l=document.createElement("span");l.style.width="45px",l.style.height="11px",l.backgroundImage="none",l.style.display="block",l.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+d+'")',i.appendChild(l)}else{var m=document.createElement("img");m.src=d,m.style.border="0",i.appendChild(m)}}},TRCRBox.prototype.addTaboolaLogo=function(){this.renderAdchoicesLink(this.getAdchoiceConfig(),this.itemsTypes,this.adcItemTypes),this.renderAttributionLink(),this.renderDisclosureLink(),this.addClearingDiv(),this.addWidgetContentType()},TRCRBox.prototype.renderAttributionLink=function(){var a="<span>"+this.trc.getProperty(this.mode_name,"attribution-text",this.propertiesOverride)+"</span>",b=this.trc.getProperty(this.mode_name,"attribution-position",this.propertiesOverride),c=this.trc.attribution&&"none"!=b,d=this.trc.getProperty(this.mode_name,"hide-attribution-when-no-place",this.propertiesOverride),e=this.trc["attribution-disclosure-direction"];c&&("top"===b?this.isContainerNarrowForAttribution()?d||this.generateLinksBox(this.getWidgetFooter(),a,e,"attribution",null,"bottom"):this.generateLinksBox(this.header.ext,a,e,"attribution",null,"top"):this.generateLinksBox(this.getWidgetFooter(),a,e,"attribution",null,"bottom"))},TRCRBox.prototype.isContainerNarrowForAttribution=function(){var a=this.trc.getProperty(this.mode_name,"min-width-for-attribution",this.propertiesOverride),b=this.container.clientWidth||this.container.offsetWidth;return b&&a>b},TRCRBox.prototype.adcHoverHandler=function(a,b){var c=__trcGetElementsByClass("trc_adc_b_logo",null,a)[0];b?c.style.display="inline-block":c.style.display="none"},TRCRBox.prototype.isAdchoicesEnabled=function(a,b,c){return a?"off"==a.status?!1:this.isAdchoiceItemTypes(b,c)?!0:!1:!1},TRCRBox.prototype.isAdchoiceItemTypes=function(a,b){for(var c in a)if(b[c])return!0;return!1},TRCRBox.prototype.getAdchoiceConfig=function(){var a=this.trc.getProperty(this.mode_name,"adchoice-position",this.propertiesOverride);return{status:this.trc.global["has-adchoice"]&&"none"!==a?"on":"off",position:a,url:this.trc.getProperty(this.mode_name,"adchoice-target-url",this.propertiesOverride)||this.trc.global["adchoice-url"],enableBig:this.trc.getProperty(this.mode_name,"adchoice-large",this.propertiesOverride)}},TRCRBox.prototype.getAdchoicesPosition=function(a,b){var c="top";return"auto"===a?(c="none"===b?c:b,this.isContainerNarrowForAttribution()&&(c="bottom")):c=a,c},TRCRBox.prototype.renderAdchoicesLink=function(a,b,c){if(this.hasAdChoicesLogo=this.isAdchoicesEnabled(a,b,c),
this.hasAdChoicesLogo){var d,e='<span class="trc_adc_wrapper"><span class="trc_adc_s_logo"></span>'+(a.enableBig?'<span class="trc_adc_b_logo"></span>':"")+"&nbsp;</span>",f=this.getAdchoicesPosition(a.position,this.trc.getProperty(this.mode_name,"attribution-position",this.propertiesOverride)),g=a.url||null,h=this.trc["attribution-disclosure-direction"];d="top"===f?this.generateLinksBox(this.header.ext,e,h,"adc",null,"top",g):this.generateLinksBox(this.getWidgetFooter(),e,h,"adc",null,f,g),a.enableBig&&(d.onmouseover=function(){TRCRBox.prototype.adcHoverHandler(this,!0)},d.onmouseout=function(){TRCRBox.prototype.adcHoverHandler(this,!1)})}},TRCRBox.prototype.generateLinksBox=function(a,b,c,d,e,f,g){var h,i,j=document.createElement("div"),k=["trc_desktop_"+d+"_link","trc_mobile_"+d+"_link"],l=TRC.PROTOCOL+"//popup.taboola.com/"+(this.trc.language||"en")+"/?"+this.getAttributionLinkParams(),m=g||l,n=function(a){return TRC.aboutUs.open(a)||!1};if(a){for(h=0;h<k.length;h++)i=document.createElement("a"),i.className=k[h]+" trc_attribution_position_"+(f||"bottom"),i.rel="nofollow",i.innerHTML=b,i.href=m,i.target="_blank",this.hasAdChoicesLogo&&(i.innerHTML+='<span class="trc_logos_v_align">&nbsp;</span>'),h||(i.onclick=n),j.appendChild(i);return"rtl"===c&&(j.style.cssFloat=j.style.styleFloat="left"),j.className="logoDiv link-"+d+" "+(e?" attribution-disclosure-link-"+e:""),a.appendChild(j),j}},TRCRBox.prototype.getAttributionLinkParams=function(){var a=["template=colorbox","taboola_utm_source="+this.publisher,"taboola_utm_medium=bytaboola","taboola_utm_content="+this.mode_name+":"+this.placement+":"+(this.trc["test-variant"]||"")];return this.privacyId&&a.push("plink="+this.privacyId),a.join("&")},TRCRBox.prototype.addWidgetContentType=function(){var a=this.getWidgetContentType(this.itemsTypes);this.element.className+=" "+("sponsored"===a&&TRC.blocker.blockedState>0&&this.trc.global["switch-abp-class"]?this.trc.global["switch-abp-class"]["trc-content-sponsored"]:"trc-content-"+a)+" "},TRCRBox.prototype.getWidgetContentType=function(a){var b=a["is-syndicated"]||a["is-in-network"]||a["is-native"];return b&&a["is-organic"]?"hybrid":b?"sponsored":"organic"},TRCRBox.prototype.getItemsTypesList=function(a){for(var b,c={},d=0;b=a[d];d++)b["is-syndicated"]?c["is-syndicated"]=!0:b["is-in-network"]?c["is-in-network"]=!0:b["is-native"]?c["is-native"]=!0:c["is-organic"]=!0,b["is-adc"]&&(c["is-adc"]=!0);return c},TRCRBox.prototype.getPrivacyId=function(a){for(var b,c=0;b=a[c];c++)if(b.plink)return b.plink;return null},TRCRBox.prototype.getWidgetFooter=function(){return this.footer||(this.footer=document.createElement("div"),this.footer.className="trc-widget-footer",this.element.appendChild(this.footer)),this.footer},TRCRBox.prototype.renderDisclosureLink=function(){var a,b=this.trc.getProperty(this.mode_name,"min-width-for-disclosure",this.propertiesOverride),c=this.trc.getProperty(this.mode_name,"hide-disclosure-when-no-place",this.propertiesOverride),d="<span>"+this.trc.getProperty(this.mode_name,"disclosure-link-text-sponsored",this.propertiesOverride)+"</span>",e="<span>"+this.trc.getProperty(this.mode_name,"disclosure-link-text-hybrid",this.propertiesOverride)+"</span>",f=this.trc.getProperty(this.mode_name,"disclosure-position",this.propertiesOverride),g=this.trc["attribution-disclosure-direction"];"none"!=f&&(a=this.container.clientWidth||this.container.offsetWidth,"bottom"!=f&&this.isHeaderExtContainerAvailable()&&(!a||a>=b)?(this.generateLinksBox(this.header.ext,d,g,"disclosure","sponsored","top"),this.generateLinksBox(this.header.ext,e,g,"disclosure","hybrid","top")):c||(this.generateLinksBox(this.getWidgetFooter(),d,g,"disclosure","sponsored","bottom"),this.generateLinksBox(this.getWidgetFooter(),e,g,"disclosure","hybrid","bottom")))},TRCRBox.prototype.isHeaderExtContainerAvailable=function(){return this.header.ext&&"No Header"!=this.trc.getProperty(this.mode_name,"header",this.propertiesOverride)},TRCRBox.prototype.addClearingDiv=function(){this.element.appendChild(document.createElement("div")).className="trc_clearer"},TRCRBox.prototype.genDuration=function(a){TRC.rboxMap&&TRC.rboxMap.sendDebugMap("trcrboxui genDuration");var b=this.formatDuration(a),c=document.createElement("dt");c.style.position="absolute",c.style.overflow="hidden",c.style.height="auto",c.style.width="auto",c.style.zIndex=48,c.style.right=0;var d=document.createElement("div");return d.style.zIndex=50,d.style.paddingLeft="4px",d.style.paddingRight="4px",d.innerHTML=b,c.appendChild(d),c},TRCRBox.prototype.fixBoxTitleAndDesc=function(a,b,c){if(!c)return void this.postRenderQueue.pushBack("fixBoxTitleAndDesc",this.fixBoxTitleAndDesc.trcBind(this,a,b,!0));try{var d=this.trc.getProperty(this.mode_name,"details-inline-with-title",this.propertiesOverride),e=d?d.split(","):[],f=this.findElement(function(a){return a.className.search("title")>=0},b,"span",null);e&&e.length&&f&&"inline"==document.trcGetCurrentStyle(f,"display")&&(f.style.display="inline-block"),f.inlineDetailsElements=this.setupInlineDetails(e,b),this.fixBoxOverflow(f,a.title,!1,"false"!=a["truncate-title"],e,b),a.thumbUnder&&(a.link.style.fontSize=b.font+"px"),e&&e.length&&(f.style.display="inline"),this.fixBoxOverflow(this.findElement(function(a){return a.className.search("description")>=0},b,"span",null),a.description,!0,!0,null,null)}catch(g){__trcError("Problem in fixBoxTitleAndDesc",g)}},TRCRBox.prototype.fixBoxOverflow=function(a,b,c,d,e,f){if(null!=a&&!(this.useNativeLineClamp&&this.setupBoxLineClamp(a)||a.clientHeight<=0||a.clientWidth<=0)){"undefined"==typeof d&&(d=!0);var g=!1;a.parentNode.font=this.getFontSize(a);var h=a.innerHTML;a.innerHTML="";var i=this.add_span(null,"H",a),j=Math.max(i.offsetHeight,i.clientHeight),k=Math.max(0,a.scrollHeight-a.clientHeight);for(a.removeChild(i),a.innerHTML=h,this.addInlineElementsForMeasure(a.inlineDetailsElements,a,!0),a.inlineDetailsElementsHTML=a.innerHTML.replace(h,""),b=b.replace(/^\s+|\s+$/g,"");a.clientHeight+k+j/2<a.scrollHeight&&b.length;)if(g=!0,d)b=this.truncateOverflowingText(a,b,c),a.innerHTML+=a.inlineDetailsElementsHTML;else{var l=this.decreaseOverflowingTextFontSize(a);if(!l)break}this.hideClonedElementsAfterMeasure(e,f),TRC.Browser.ie&&!g&&(a.style.height="auto")}},TRCRBox.prototype.setupBoxLineClamp=function(a){TRC.dom.removeClass(a,"trc_ellipsis");var b=parseInt(document.trcGetCurrentStyle(a,"line-height"),10),c=parseInt(document.trcGetCurrentStyle(a,"height"),10),d=b&&c?Math.round(c/b).toString():null;return!d||a.isRTL||"rtl"==document.trcGetCurrentStyle(a,"direction")?!1:(TRC.dom.addClass(a,"trc_ellipsis"),TRC.css.utils.setStyleProperty(a,"-webkit-line-clamp",d,!1),a.parentNode.font=this.getFontSize(a),!0)},TRCRBox.prototype.setupInlineDetails=function(a,b){for(var c=this.findElements(a,b),d=!1,e=0;a&&e<a.length;e++)"branding"==a[e]&&(d=!0);if(a.length&&!d){var f=this.findElement(function(a){return a.className.search("branding")>=0},b,"span",null);f&&(f.style.display="block")}for(var g=0;c&&g<c.length;g++){var h=c[g];h.style.display="inline-block",h.style.verticalAlign=TRC.Browser.ieUpto(7)?"baseline":"middle"}return c},TRCRBox.prototype.truncateOverflowingText=function(a,b,c){b=c&&b.search(/\s/)>=0?b.replace(/\s+\S+$/,""):b.substr(0,b.length-1);var d=a.getElementsByTagName("bde");return a.inlineDetailsElementsHTML&&d.length&&(a.innerHTML=a.innerHTML.replace(a.inlineDetailsElementsHTML,"")),a.getElementsByTagName("span").length>0&&a.removeChild(a.getElementsByTagName("span")[0]),(d.length>0?d[0]:a).innerHTML=b,this.add_span(null,"&hellip;",a),b},TRCRBox.prototype.decreaseOverflowingTextFontSize=function(a){TRC.rboxMap&&TRC.rboxMap.sendDebugMap("trcrboxui decreaseOverflowingTextFontSize");var b=this.getFontSize(a);if(parseInt(b)<=9)return!1;b=parseInt(b)-1;var c="font-size: "+b+"px!important; line-height: "+1.25*b+"px!important;";return"string"==typeof a.style.cssText?a.style.cssText=c:a.setAttribute("style",c),!0},TRCRBox.prototype.addInlineElementsForMeasure=function(a,b,c){for(var d,e,f,g=0;a&&g<a.length;g++)d=a[g],e=this.findElement(function(a){return a.className.search(d)>=0&&a.parentNode===b},b),!e&&d&&(f=document.createElement("span"),f.className="trc_inline_detail_spacer",f.innerHTML=TRC.Browser.ieUpto(8)?"&nbsp;":" ",b.appendChild(f),b.appendChild(c?d.cloneNode(!0):d))},TRCRBox.prototype.hideClonedElementsAfterMeasure=function(a,b){for(var c,d,e=0;a&&e<a.length;e++)c=a[e],d=this.findElement(function(a){return a.className.search(c)>=0&&a.parentNode===b},b,"span"),d&&(d.style.display="none")},TRCRBox.prototype.removeTagsEntities=function(a){var b=new RegExp("<[^>]*>$");return b.test(a)||(b=new RegExp("&w+;$"),b.test(a))?a.replace(b,""):a},TRCRBox.prototype.removeHtmlTags=function(a){return a.replace(new RegExp("<[^>]+>","g"),"")},TRCRBox.prototype.formatData=function(a,b){var c=this.trc.getProperty(this.mode_name,"format-"+a,this.propertiesOverride);return c=c||"%s","function"==typeof c?c.call(this,b):((a.search("duration")>=0||a.search("Duration")>=0)&&(b=this.formatDuration(b)),"undefined"==typeof b&&(b=""),c.replace(new RegExp("%\\w"),'<dt style="display:inline">'+b+"</dt>"))},TRCRBox.prototype.formatDuration=function(a){TRC.rboxMap&&TRC.rboxMap.sendDebugMap("trcrboxui formatDuration");var b=parseInt(a/3600);b>=1?a%=3600:b=0;var c=parseInt(a/60),d=parseInt(a%60);return"number"!=typeof b||"number"!=typeof c||"number"!=typeof d||isNaN(b)||isNaN(c)||isNaN(d)||1>a?"":(b>=1?b+":":"")+(10>c?"0":"")+c+":"+(10>d?"0":"")+d},TRCRBox.prototype.formatNumber=function(a){return"undefined"==typeof a?"":this.trc.getFunction(this.mode_name,"format-number",a)},TRCRBox.prototype.dateFormatISO=function(a){TRC.rboxMap&&TRC.rboxMap.sendDebugMap("trcrboxui dateFormatISO");var b=new Date(1e3*parseInt(a)),c=b.getFullYear(),d=b.getMonth()+1,e=b.getDate();return 10>e&&(e="0"+e),10>d&&(d="0"+d),c+"-"+d+"-"+e},TRCRBox.prototype.dateFormatAmerican=function(a){TRC.rboxMap&&TRC.rboxMap.sendDebugMap("trcrboxui dateFormatAmerican");var b=new Date(1e3*parseInt(a)),c=b.getFullYear(),d=b.getMonth()+1,e=b.getDate();return d+"/"+e+"/"+c},TRCRBox.prototype.dateFormatEuropean=function(a){TRC.rboxMap&&TRC.rboxMap.sendDebugMap("trcrboxui dateFormatEuropean");var b=new Date(1e3*parseInt(a)),c=b.getFullYear(),d=b.getMonth()+1,e=b.getDate();return e+"/"+d+"/"+c},TRCRBox.prototype.dateFormatDays=function(a){TRC.rboxMap&&TRC.rboxMap.sendDebugMap("trcrboxui dateFormatDays");var b=new Date,c=" months ago",d=b.getFullYear(),e=b.getMonth(),f=new Date;("undefined"!=typeof a||0!=parseInt(a))&&(f=new Date(1e3*parseInt(a)));var g=f.getFullYear(),h=f.getMonth(),i=12*d+e-(12*g+h);if(0==i){var j=b.getDate(),k=f.getDate();i=j-k,c=1>=i?" day ago":" days ago"}else 1==i&&(c=" month ago");return i+c},TRCRBox.prototype.ratingStars=function(a,b){if(TRC.rboxMap&&TRC.rboxMap.sendDebugMap("trcrboxui ratingStars"),b>5&&(b=Math.floor(b/2)),"undefined"==typeof a)return"";for(var c=document.createElement("span"),d=0;b>d;d++){var e=document.createElement("img");e.style.width="16px",e.style.height="16px",e.style.display="inline";var f=protocol+"//cdn.taboola.com/taboola/star-on.png",g=protocol+"//cdn.taboola.com/taboola/star-off.png";d<parseInt(a)?e.src=f:e.src=g,c.appendChild(e)}return c},TRCRBox.prototype.getFontSize=function(a){for(var b=0,c=!1,d=document.trcGetCurrentStyle(a,"font-size"),e=["px","pt","em","ch"];!c&&b<e.length;){if(d.indexOf(e[b])){switch(d=parseInt(d),e[b]){case"px":break;case"pt":d/=.75;break;case"em":case"ch":d=10*d}c=!0}b++}return d},TRCRBox.prototype.sendExploreEvent=function(){this.exploreTimeoutId&&(TRC.Timeout.clear(this.exploreTimeoutId),this.exploreTimeoutId=null),this.sendEvent("explore",{},null,!0)},TRCRBox.prototype.onMouseOverExploreTrackerHandler=function(a,b){b=b||win.event;var c=b.target||b.srcElement;c!=this.container&&null!=this.exploreTimeoutId||c==this.container&&null!=this.exploreTimeoutId||(this.exploreTimeoutId=TRC.Timeout.set(this.sendExploreEvent.trcBind(this),a))},TRCRBox.prototype.setExploreTracker=function(){var a=0;this.exploreTimeoutId=null,"undefined"!=typeof this.trc.global&&(a=this.trc.global["explore-delay"]?this.trc.global["explore-delay"]:a),this.container.onmouseover=this.onMouseOverExploreTrackerHandler.trcBind(this,a),0!=a&&(this.container.onmouseout=this.onMouseOutExploreTrackerHandler.trcBind(this))},TRCRBox.prototype.onMouseOutExploreTrackerHandler=function(a){a=a||win.event;var b=this.container.getBoundingClientRect();a.clientX>=b.left&&a.clientX<b.right&&a.clientY>=b.top&&a.clientY<b.bottom||this.exploreTimeoutId&&(TRC.Timeout.clear(this.exploreTimeoutId),this.exploreTimeoutId=null)},TRCRBox.prototype.resetBoxes=function(){this.boxes=[]},TRCRBox.prototype.setResponsiveRules=function(a,b){var c=this.trc.getProperty(this.mode_name,"responsive-rules",this.propertiesOverride);c?this.setOnStandardResponsiveRules(a,b,c):this.setOnAutoSizeResponsiveRules(a,b,this.trc.getProperty(this.mode_name,"auto-size-rules",this.propertiesOverride))},TRCRBox.prototype.setOnStandardResponsiveRules=function(a,b,c){var d,e=this.trc.getProperty(this.mode_name,"rows",this.propertiesOverride),f=1;try{d=this.responsiveRules=[];for(var g=0,h=c.length;h>g;g++)d[g]={rows:c[g].rows||e||f,cells:c[g].cells,min:c[g].minWidth,max:c[g].maxWidth,margin:c[g].margin.h,ratio:this.getRuleAspectRatio(c[g])||this.getThumbAspectRatio(this.trc.modes[this.mode_name])||100*this.DEFAULT_THUMB_RATIO},this.isClassFilter&&this.pushResponsiveIERules(a+"_rule"+g,d[g].min);TRC.css.utils.setStyleElements(TRC.css.responsive.rulesToCssText(a,this.responsiveRules,b,this.trc.cssReset,this.isWCTextLinks,this.trc.direction)),this.isClassFilter&&this.setResponsiveIEClassShift(a)}catch(i){__trcError("Error in setOnStandardResponsiveRules : ",i.message)}},TRCRBox.prototype.setOnAutoSizeResponsiveRules=function(a,b,c){var d,e=TRC.dom.getWindowWidth(),f=this.container.clientWidth>0?this.container.clientWidth:this.container.offsetWidth,g=e/f,h=this.trc.getProperty(this.mode_name,"rows",this.propertiesOverride),i=1;try{d=this.responsiveRules=[];for(var j=0,k=c.length;k>j;j++)d[j]={rows:c[j].rows||h||i,cells:c[j].n,min:g*c[j].minWc,margin:Math.round((c[j].maxWsRange+c[j].minWsRange)/2)/f*100,ratio:this.getThumbAspectRatio(this.trc.modes[this.mode_name])||c[j].ratio||100*this.DEFAULT_THUMB_RATIO},this.isClassFilter&&this.pushResponsiveIERules(a+"_rule"+j,d[j].min);TRC.css.utils.setStyleElements(TRC.css.responsive.rulesToCssText(a,this.responsiveRules,b,this.trc.cssReset,!1,this.trc.direction)),this.isClassFilter&&this.setResponsiveIEClassShift(a)}catch(l){__trcError("Error in setOnAutoSizeResponsiveRules : ",l.message)}},TRCRBox.prototype.setResponsiveIEClassShift=function(a){var b=this.getResponsiveIEClassShift(a).trcBind(this);b(),TRC.dom.on(win,"resize",b.trcThrottle(50))},TRCRBox.prototype.getResponsiveIEClassShift=function(a){var b=a,c="IE_ClassShift",d=TRC.dom.getWindowWidth,e=d();return function(){var a,f,g="",h=-1,i=d();for(a in this.responsiveIERules)this.responsiveIERules.hasOwnProperty(a)&&(f=parseInt(a),f>h&&i>=f&&(g=this.responsiveIERules[a],h=f));b!==g&&(this.container.className=this.container.className.replace(b,g),b=g),Math.abs(e-i)>1&&(TRC.dispatch(c),e=i)}},TRCRBox.prototype.pushResponsiveIERules=function(a,b){TRC.util.isType(this.responsiveIERules,"Array")||(this.responsiveIERules={},this.pushResponsiveIERules=function(a,b){this.responsiveIERules[b]=a},this.pushResponsiveIERules(a,b))},TRCRBox.prototype.setMetaAttribute=function(a){a.meta={},__trcCopyProps(this.trc,a.meta),delete a.meta["video-list"]},TRCRBox.prototype.drawResponsiveList=function(a){TRC.tlf&&console.timeStamp("start mode - "+this.mode_name),TRC.tlf&&console.group("mode - "+this.mode_name),TRC.tlf&&console.time("mode rendering");var b=this.listContainer,c=document.createElement("div"),d=this.recommendationList.length,e=0,f=doc.trcGetParentByClassName(this.getContainer(),"trc_related_container"),g="trc_elastic";TRC.pConsole(this.mode_name,"debug","start drawing responsive mode - see info",this.trc.getProperty(this.mode_name,"responsive-rules",this.propertiesOverride),"object"),this.isClassFilter=TRC.Browser.ieUpto(8),this.orientation=this.trc.getProperty(this.mode_name,"orientation",this.propertiesOverride),TRC.dom.addClass(f,g+" "+g+"_"+this.id),this.resetBoxes(),c.id="internal_"+this.id,TRC.dom.clearInnerElements(b),b.appendChild(c),this.setExploreTracker(),this.setMetaAttribute(c),this.firstVideo=null,this.setResponsiveRules(g+"_"+this.id,d),this.pasreRecommendationList(d,this.hasDuration(),c),this.isClassFilter?TRC.listen("IE_ClassShift",this.fixResponsiveVideoBoxes.trcBind(this)):(TRC.dom.on(win,"resize",this.fixResponsiveVideoBoxes.trcBind(this).trcThrottle(500)),TRC.listen("videoCubeChange",this.fixResponsiveVideoBoxes.trcBind(this))),TRC.dom.addClass(this.boxes[0],"trc-first-recommendation trc-spotlight-first-recommendation"),"embed"===this.link_target&&this.postRenderQueue.pushBack("createEmbedThumb",this.createEmbedThumb.trcBind(this)),this.postRenderQueue.pushBack("list-suffix,publisher-end",function(a){this.trc.getFunction(this.mode_name,"list-suffix",a,this),this.trc["publisher-end"](this.id)}.trcBind(this,c)),this.postRenderQueue.pushBack("checkForBlocking",this.checkForBlocking.trcBind(this)),this.postRender(),this.trc.global["thumb-lazy-load-switch"]&&this.setLazyImageLoadMethod(),TRC.eventDelegator.dispatch("onrender",{name:this.mode_name,container:this.container,placement:this.orig_placement}),TRC.EventsAPI.dispatchRender(a,this),this.visibleTimeoutId=null,"undefined"!=typeof this.trc.global&&(e=this.trc.global["visible-delay"]?this.trc.global["visible-delay"]:e),this.setVisibility(this.manualVisibility,this.trc.global["enable-deferred-visible"],this.trc.global["visible-defer-timeout"],e,c),TRC.tlf&&console.timeEnd("mode rendering"),TRC.tlf&&console.groupEnd()},TRCRBox.prototype.setVisibility=function(a,b,c,d,e){a?TRC.listen("visible::"+this.orig_placement,this.getEventVisibility.trcBind(this,e)):b?TRC.Timeout.set(this.enableVisibility.trcBind(this,d,e),c||"0"):this.enableVisibility(d,e)},TRCRBox.prototype.getEventVisibility=function(a,b){this.isVisible(this.container,b)&&(this.visible_items_collection(!1),this.sendVisibility(a))},TRCRBox.prototype.getRecomDirectURL=function(a){if(0==a.search(/\w{3,4}:\/\/(\w+)\.taboola(syndication)?.com/))for(var b=a.split(/[\?&]/),c=0,d=b.length;d>c;c++)if("url"==b[c].split("=")[0])return decodeURIComponent(b[c].split("=")[1]);return a},TRCRBox.prototype.getURLHashParts=function(a){return a[0]+(a[0].search("\\?")>=0?"&":"?")+this.tracking+(a[1]?"#"+a[1]:"")},TRCRBox.prototype.createVideoBoxDirectURL=function(a){var b,c=a.video_data,d=c.url;try{d=this.getRecomDirectURL(d),c.isSyndicated||(c.original_url=d,d=this.trc.getFunction(this.mode_name,"change-url",d,a,this.tracking),d==c.original_url&&this.tracking&&(b=d.split("#"),d=this.getURLHashParts(b)),"function"==typeof TRC.pageManager&&(d=TRC.pageManager.fixRecommendationURL(d))),c.url=d,a.directURL=d}catch(e){__trcError("Error in createVideoBoxDirectURL",e)}},TRCRBox.prototype.createVideoBoxClickUrl=function(a,b){var c={pi:this.trc.getItemId(),ri:this.response.trc.req,sd:TRC.pageManager.getPublisherValue(TRC.publisherId,"session-data"),ui:TRC.pageManager.getValue("user-id"),it:a.type,ii:a["item-id"],pt:this.getItemType(),li:this.listContainer.id,url:b,vi:this.cachedViewId||TRC.pageManager.getPageData(),p:a.isSyndicated?a.publisher:"",r:Math.floor(100*Math.random())},d=[];for(var e in c)c.hasOwnProperty(e)&&c[e]&&(this.trc["normalize-log-param"](e,c[e]),d.push(encodeURIComponent(e)+"="+encodeURIComponent(c[e])));return protocol+"//"+this.domain+"/"+encodeURIComponent(this.trc["normalize-log-param"]("publisher",TRC.publisherId))+"/log/3/click?"+d.join("&")},TRCRBox.prototype.fixResponsiveBoxTitleAndDesc=function(a){var b=a.labelsBox,c=a.video_data,d=a.link,e=this.findElement(function(a){return a.className.search("title")>=0},b,"span",null),f=this.findElement(function(a){return a.className.search("description")>=0},b,"span",null),g=this.findElement(function(a){return a.className.search("label-box-overlay")>=0},b,"span",null),h=function(){c.thumbUnder&&b.font&&(d.style.fontSize=b.font+"px")};try{e.innerHTML=a.getAttribute("data-item-title"),setTimeout(function(){this.fixBoxOverflow(e,a.getAttribute("data-item-title"),!1,"false"!=c["truncate-title"]),TRC.Browser.ieUpto(8)&&g&&(g.style.height="99%",g.style.height="100%"),h()}.trcBind(this),0),f&&setTimeout(function(){this.fixBoxOverflow(f,c.description,!0,!0)}.trcBind(this),0)}catch(i){__trcError("Problem in fixResponsiveBoxTitleAndDesc",i)}},TRCRBox.prototype.createVideoBoxLabels=function(a){var b=document.createElement("span");return this.setVideoBoxLabelsClass(b),a.appendChild(b),b},TRCRBox.prototype.setVideoBoxLabelsClass=function(a){a.className="video-label-box"},TRCRBox.prototype.createThumbBlockHolder=function(a,b,c){var d=doc.createElement("div");d.className="thumbBlock_holder",b.appendChild(d),this.createVideoBoxThumbBlock(a,d,c),this.createVideoBoxAspect(d,a)},TRCRBox.prototype.createVideoBoxAspect=function(a,b){var c=document.createElement("div");c.className="videoCube_aspect",a.appendChild(c),b.thumbnail_aspect=c},TRCRBox.prototype.drawVideoBoxThumbnailLink=function(a,b,c,d){var e;return a.img_src=this.getThumbnailURL(c,this.trc.getProperty(this.mode_name,"thumbnail-width",this.propertiesOverride),this.trc.getProperty(this.mode_name,"thumbnail-height",this.propertiesOverride)),e=this.createVideoLink(c,d),TRC.dom.addClass(e,"item-thumbnail-href"),this.createThumbBlockHolder(a,e,b),e},TRCRBox.prototype.createVideoBoxThumbBlock=function(a,b,c){var d=document.createElement("span"),e="",f=a.video_data;c||"video"!=f.type||"undefined"==typeof f.duration||""==f.duration||"0"==f.duration||(e=this.genDuration(f.duration)),d.className="thumbBlock",a.thumbBlock=d,""!=e&&this.createDurationBlock(d,e,f.duration),b.appendChild(d)},TRCRBox.prototype.setVideoBoxImageHandlers=function(a,b,c){a.onerror=this.responsiveImageOnErrorHandler.trcBind(this,a,b,c),a.onload=this.responsiveImageOnLoadHandler.trcBind(this,a,b,c)},TRCRBox.prototype.responsiveImageOnErrorHandler=function(a,b,c){var d,e=a.src,f=this.trc.global["images-host"]?this.trc.global["images-host"]:"images.taboola.com",g=e.search(/\Shttp\S/),h=e.match(/\Staboola(\S+)?.com\/thumbnails\S/)?!0:!1;return g>5&&h&&!TRC.Browser.ie?(e=TRC.URL.prototype.switchProtocol.call(e.indexOf(f)>-1?unescape(unescape(e.slice(g+1))):unescape(e.slice(g+1)),protocol),__trcWarn("Failed to load taboola CDN thumbnail "+a.src+" for item="+c["item-id"]+", loading direct thumbnail instead : "+e),void(b.img_src=a.src=e)):(g>5&&e.indexOf(f)>-1?(e=TRC.URL.prototype.switchProtocol.call(unescape(e.slice(g+1)),protocol),__trcWarn("Failed to load thumbnail "+a.src+" for item="+c["item-id"]+", loading "+e+" thumbnail instead")):(d=this.trc.getProperty(this.mode_name,"default-thumbnail",this.propertiesOverride),e=TRC.URL.prototype.switchProtocol.call("undefined"!=d?d:"",protocol),a.onerror=null,__trcWarn("Failed to load thumbnail "+a.src+" for item="+c["item-id"]+", loading default thumbnail instead")),void(TRC.Browser.ieUpto(8)?(a.src=e,null==a.onerror&&TRC.Timeout.set(this.fixResponsiveVideoImage.trcBind(this,b,a,!0),500)):b.thumbBlock.style.backgroundImage="URL("+e+")"))},TRCRBox.prototype.responsiveImageOnLoadHandler=function(a,b,c){a&&a.complete?this.appendVideoBoxImage(b):TRC.Browser.ieUpto(8)?(this.appendVideoBoxImage(b),this.fixResponsiveVideoImage(b,a,!1),TRC.listen("IE_ClassShift",this.fixResponsiveVideoImage.trcBind(this,b,a).trcBind(this))):TRC.Timeout.set(arguments.callee.trcBind(this,b.thumbBlock,a),50)},TRCRBox.prototype.fixResponsiveVideoImage=function(a,b,c){var d;if(this.imageOptimizePrefix)return b.style.visibility="visible",b.style.width="100%",void(b.style.height="100%");var e,f,g,h,i,j=7==TRC.Browser.ie?a.thumbBlock.getBoundingClientRect():null,k=a.thumbBlock,l=j?j.right-j.left:k.clientWidth,m=j?j.bottom-j.top:k.clientHeight,n=this.isCssImportant,o=TRC.css.utils;if(0==m||0==l||0==b.height)return void(c||TRC.Timeout.set(this.fixResponsiveVideoImage.trcBind(this,a,b,!0),500));try{e=l/m,f=this.getImageAspectRatio(b),e>f?(g=Math.floor(l/f),h=Math.floor((m-g)/2),o.setStyleProperty(b,"width",l+"px",n),0!=h&&(TRC.Browser.ieAtleast(8)?(b.style.position="relative",o.setStyleProperty(b,"top",h+"px",n)):o.setStyleProperty(b,"margin-top",h+"px",n))):(d=Math.floor(m*f),i=Math.floor((l-d)/2),o.setStyleProperty(b,"height",m+"px",n),0!=i&&(TRC.Browser.ieAtleast(8)?(b.style.position="relative","ltr"==this.trc.direction?o.setStyleProperty(b,"left",i+"px",n):o.setStyleProperty(b,"left",-1*i+"px",n)):"ltr"==this.trc.direction?o.setStyleProperty(b,"margin-left",i+"px",n):o.setStyleProperty(b,"margin-right",i+"px",n))),b.style.visibility="visible"}catch(p){alert(p.message),__trcError("Error in fixResponsiveVideoImage : ",p.message)}},TRCRBox.prototype.getImageAspectRatio=function(a){return a.trcRatio||(a.trcRatio=a.width/a.height),a.trcRatio},TRCRBox.prototype.createVideoBoxImageLoader=function(a){var b,c,d,e=TRC.Browser.ieUpto(8)?doc.createElement("img"):new Image,f=a.video_data,g=a.thumbBlock;this.trc.global["thumb-lazy-load-switch"]&&this.updateThumbnailStack(e),e.style.visibility="hidden",7===TRC.Browser.ie&&(a.image_div=document.createElement("div")),TRC.Browser.ieUpto(8)&&(a.img=e),this.setVideoBoxImageHandlers(e,a,f),this.trc.global["use-delay-image-load"]?TRC.Timeout.set(this.setImageLoad.trcBind(this,e,a,a.img_src,100,g,this.trc.global["thumb-lazy-load-switch"]),10):this.setImageLoad(e,a,a.img_src,100,g,this.trc.global["thumb-lazy-load-switch"]),TRC.Browser.ieUpto(6)||(b=this.add_span("thumbnail-overlay",null,g)),c=this.trc.getProperty(this.mode_name,"emblem",this.propertiesOverride),null==c||"null"==c||TRC.Browser.ie&&!TRC.Browser.ieUpto(7)||(d=this.add_span("thumbnail-emblem",null,g),d.style.backgroundImage="url("+c+")"),f.isSyndicated&&this.addVideoBoxBranding(g,f)},TRCRBox.prototype.updateThumbnailStack=function(a){this.thumbnailImageStack=this.thumbnailImageStack||[],this.thumbnailImageStack.push(a)},TRCRBox.prototype.addVideoBoxBranding=function(a,b){var c=document.createElement("span"),d=document.createElement("span"),e=this.trc.getProperty(this.mode_name,"syndicated-static-text",this.propertiesOverride),f=this.trc.getProperty(this.mode_name,"syndicated-static-text-position",this.propertiesOverride);c.className="branding",b["branding-text"]?c.appendChild(document.createTextNode(this.formatData("syndicator",b["branding-text"]))):b["branding-url"]&&this.createBrandingImage(c,b["branding-url"]),a.appendChild(c),d.className="static-text "+f,e&&d.appendChild(document.createTextNode(e)),a.appendChild(d)},TRCRBox.prototype.createBrandingImage=function(a,b){var c=doc.createElement("img");c.src=b,a.appendChild(c)},TRCRBox.prototype.createDurationBlock=function(a,b,c){var d=document.createElement("div"),e=this.genDuration(c);d.className="video-duration video-duration-detail",d.appendChild(b),e.style.opacity=1,e.style.filter="alpha(opacity=100)",e.style.backgroundColor="transparent",d.appendChild(e),a.appendChild(d)},TRCRBox.prototype.createVideoBoxLabelOverlay=function(a){var b=document.createElement("span");b.className="label-box-overlay",a.appendChild(b)},TRCRBox.prototype.createVideoBoxThumbLink=function(a,b){try{var c=a.video_data,d=a.thumbnail_position,e=this.drawVideoBoxThumbnailLink(a,b,c,a.getAttribute("data-item-title"));"under"===d?(e.title=a.link.title="",a.insertBefore(e,a.link),TRC.dom.addClass(a.link,"video-labels-anchor"),this.findElement(function(a){return a.className.search("title")>=0},a.labelsBox,"span",null),8==TRC.Browser.ie&&TRC.dom.addClass(a.link,"ie8fix"),this.createVideoBoxLabelOverlay(a.labelsBox),c.thumbUnder=!0):"bottom"===d?a.appendChild(e):a.insertBefore(e,a.link)}catch(f){__trcError("Error in createVideoBoxThumbLink",f)}},TRCRBox.prototype.setVideoBoxDataAttr=function(a,b){a.setAttribute("data-item-id",b["item-id"]),a.setAttribute("data-item-title",b.title),a.setAttribute("data-item-thumb",this.getThumbnailURL(b,100,80)),a.setAttribute("data-item-syndicated",!!b.isSyndicated)},TRCRBox.prototype.getThumbnailPosition=function(a,b){return b||this.trc.getProperty(this.mode_name,"thumbnail-position",this.propertiesOverride)},TRCRBox.prototype.drawResponsiveVideoBox=function(a,b,c,d,e,f){var g=document.createElement("div");try{return b=__trcCopyProps(b,{},{isSyndicated:b["is-syndicated"]||b["is-in-network"]||b["is-native"],isPhoto:"photo"===b.type,isText:"text"===b.type,tags:"string"==typeof b.tags?TRC.text.parseCSV(b.tags):[]}),this.setApiItemsData(b),this.createResponsiveVideoBox(g,b,e,f),"none"!==g.thumbnail_position&&this.createVideoBoxThumbLink(g,c),this.createResponsiveLabelBox(g),TRC.Browser.ieUpto(6)&&this.setOmouseEffects_IE6(g),this.trc.getFunction(this.mode_name,"item-renderer",g,g.video_data),a.appendChild(g),this.fixResponsiveBoxTitleAndDesc(g),this.boxes.push(g),this.createVideoBoxImageLoader(g),g}catch(h){__trcError("Error in drawResponsiveVideoBox",h)}return null},TRCRBox.prototype.createResponsiveLabelBox=function(a){this.buildLabelBox(a.labelsBox,a.video_data,a.detail_order)},TRCRBox.prototype.createResponsiveVideoBox=function(a,b,c,d){a.rbox=this,a.video_data=b,a.thumbnail_position=this.getThumbnailPosition(b,d?d:null),this.setVideoBoxDataAttr(a,b),this.setVideoBoxClassName(a),this.createVideoBoxDirectURL(a),b.logger_url=this.createVideoBoxClickUrl(a.video_data,a.directURL),a.setAttribute("data-item-title",b.title),this.createVideoBoxVideoLink(a),this.setVideoBoxDetailOrder(a,c?c:null)},TRCRBox.prototype.setVideoBoxClassName=function(a){var b=0,c=this.isResponsive,d=this.trc.getProperty(this.mode_name,"orientation",this.propertiesOverride),e=TRC.blocker.blockedState>0&&this.trc.global["switch-abp-class"]?this.trc.global["switch-abp-class"].syndicatedItem:TRC.SYNDICATED_CLASS_NAME;this.setVideoBoxClassName=function(a){var f=a.video_data;a.className="videoCube trc_spotlight_item origin-"+f.origin+" thumbnail_"+a.thumbnail_position+(f.isSyndicated?" "+e:"")+(f["is-in-network"]?" inNetworkItem":"")+(f["is-native"]?" tabNativeItem":"")+(f.isPhoto?" photoItem":"")+(f.isText?" textItem":"")+" "+(c?"videoCube_"+(b+=1)+"_child":d)},this.setVideoBoxClassName(a)},TRCRBox.prototype.setVideoBoxDetailOrder=function(a,b){var c=b||this.trc.getProperty(this.mode_name,"detail-order"+(a.video_data.isSyndicated?"-syndicated":""),this.propertiesOverride);a.detail_order=c.split(",")},TRCRBox.prototype.setOmouseEffects_IE6=function(a){a.onmouseover=function(){TRC.dom.addClass(this," videoCube_hover")},a.onmouseout=function(){this.className=this.className.replace(/\b\s+videoCube_hover\b/g,"")}},TRCRBox.prototype.createVideoBoxVideoLink=function(a){var b=a.video_data,c=a.getAttribute("data-item-title"),d=this.createVideoLink(b,c);a.labelsBox=this.createVideoBoxLabels(d),a.appendChild(d),a.link=d,TRC.dom.addClass(d,"item-label-href")},TRCRBox.prototype.appendVideoBoxImage=function(a){try{(null!=a.img_src||this.trc.global["thumb-lazy-load-switch"])&&("undefined"==typeof a.image_div?TRC.Browser.ieUpto(8)?(a.thumbBlock.appendChild(a.img),a.img.style.visibility="visible"):a.thumbBlock.style.backgroundImage="URL("+a.img_src+")":(a.thumbBlock.appendChild(a.image_div),a.image_div.appendChild(a.img),a.img.style.visibility="visible"))}catch(b){__trcError("Pager thumbnail images fixing errors",b)}},TRCRBox.prototype.pasreRecommendationList=function(a,b,c){var d,e;this.stopBoxRendering=!1;for(var f=0;a>f;f++){TRC.tlf&&0==f&&console.time("item rendering"),d=this.recommendationList[f],d.itemIndex=f,null==this.firstVideo&&"video"==d.type&&(this.firstVideo=d);try{this.trc.getFunction(this.mode_name,"item-data-filter",d),this.fixHeight&&!this.stopBoxRendering?(e=this.drawResponsiveVideoBox(c,d,b,this.orientation),this.stopBoxRendering=this.hasMaxHeightExploitation(parseInt(document.trcGetCurrentStyle(this.container,"height"),10),this.fixHeight),this.stopBoxRendering&&this.safeRemoveItem(e)):this.fixHeight||this.drawResponsiveVideoBox(c,d,b,this.orientation,null,null);
}catch(g){__trcError("Error in pasreRecommendationList",g)}TRC.tlf&&0==f&&console.timeEnd("item rendering")}},TRCRBox.prototype.safeRemoveItem=function(a){var b=a.parentNode;TRC.dom.clearInnerElements(a),b.removeChild(a)},TRCRBox.prototype.hasMaxHeightExploitation=function(a,b){return a>=b},TRCRBox.prototype.fixResponsiveVideoBoxes=function(){for(var a=this.boxes,b=0,c=a.length;c>b;b++)this.fixResponsiveBoxTitleAndDesc(a[b])},TRCRBox.prototype.fixWCTextLinksVideoBoxes=function(){for(var a=this.boxes,b=0,c=a.length;c>b;b++)a[b].labelsBox.firstChild.innerHTML=a[b].video_data.title,a[b].fixTextOverflow(!0)},TRCRBox.prototype.createSponsoredOverlay=function(a){var b=doc.createElement("span");b.className="trc_sponsored_overlay",a.appendChild(b)},TRCRBox.prototype.setSponsoredOverlayClass=function(a,b){b.className="thumbnail"==a?"trc_sponsored_overlay_base":"trc_sponsored_overlay_base round"},TRCRBox.prototype.genrateResponsiveSponsoredLabel=function(a,b){var c=this.trc.getProperty(this.mode_name,"sponsored-location",this.propertiesOverride);if(c.match(/^thumbnail/)){var d=document.createElement("span");try{this.setSponsoredOverlayClass(c,d),this.createSponsoredOverlay(d),b.appendChild(d),a.spnoverlay=d}catch(e){__trcError("Error while generating sponsored label",e)}}},TRCRBox.prototype.generateResponsiveOuters=function(a){if(null==this.listContainer){this.header=this.generateHeader(a);var b=doc.createElement("div");b.id=this.id.replace("trc_","outer_"),b.className="trc_rbox_outer",this.generateResponsiveRBoxDiv(b),a.appendChild(b),this.trc.global["disclosure-enabled"]===!0?this.addTaboolaLogo():this.addTaboolaLogoNoDisclosure(),a.style.display="block"}},TRCRBox.prototype.generateResponsiveRBoxDiv=function(a){var b=doc.createElement("div");b.id=this.getListId(),b.className="trc_rbox_div trc_rbox_border_elm",a.appendChild(b),this.listContainer=b},TRCRBox.prototype.isVisibleWidget=function(a){return this.visible_items_collection(!1)>=a||this.isVisible(this.container,null)?!0:!1},TRCRBox.prototype.sendVisibility=function(a){var b,c=null,d=new this.PostData,e=[],f=[],g=[],h=[],i=[],j=[],k=[],l=[],m=[],n=[],o=[];for(b in this.visible_boxes)this.visible_boxes.hasOwnProperty(b)&&(e.push(this.visible_boxes[b].id),g.push(this.visible_boxes[b].type));for(b in this.synd_visible_boxes)this.synd_visible_boxes.hasOwnProperty(b)&&(f.push(this.synd_visible_boxes[b].id),h.push(this.synd_visible_boxes[b].type),k.push(this.synd_visible_boxes[b].publisher));for(b in this.network_visible_boxes)this.network_visible_boxes.hasOwnProperty(b)&&(i.push(this.network_visible_boxes[b].id),j.push(this.network_visible_boxes[b].type),l.push(this.network_visible_boxes[b].publisher));for(b in this.native_visible_boxes)this.native_visible_boxes.hasOwnProperty(b)&&(m.push(this.native_visible_boxes[b].id),n.push(this.native_visible_boxes[b].type),o.push(this.native_visible_boxes[b].publisher));return e.length>0||f.length>0||i.length>0||m.length>0?(TRC.pConsole(this.mode_name,"info","sending visible event",""),d.setFullItemlist(this.getJsonTargetItemsList(this.fullEventItemsHash)),this.trc.enablePageGeometry&&this.trc.addGeometryPageData(d,this.trc.global["page-geometry-selectors"]),this.trc.enablePlacementGeometry&&this.trc.addGeometryPlacementData(d,this.container),this.sendModeDebugData&&(c=this.getModeDebugData("object")),this.sendEvent("visible",{il:e.join(","),sil:f.join(","),ilt:g.join(","),navil:m.join(","),silt:h.join(","),ntil:i.join(","),ntilt:j.join(","),navilt:n.join(","),niltp:l.join(","),siltp:k.join(","),naviltp:o.join(",")},this.util.merge(d.getAll(),c),!0),this.sendExternalTracking(this.getAllExternalTrackingURLsList().vi),void this.trc.getFunction(this.mode_name,"after-visible",a,this)):void 0},TRCRBox.prototype.enableVisibility=function(a,b){if(TRC.tlf&&console.time("vsibility - "+this.mode_name),this.resetVisibilityData(),this.isVisibleWidget(this.MIN_VISIBLE_ITMES)){var c=arguments.callee;this.visibleTimeoutId=TRC.Timeout.set(function(){return this.visibleTimeoutId&&(TRC.Timeout.clear(this.visibleTimeoutId),this.visibleTimeoutId=null),this.isVisibleWidget(this.MIN_VISIBLE_ITMES)?void this.sendVisibility(b):void TRC.Timeout.set(c.trcBind(this),1e3)}.trcBind(this),a)}else TRC.Timeout.set(arguments.callee.trcBind(this),1e3);TRC.tlf&&console.timeEnd("vsibility - "+this.mode_name)},TRCRBox.prototype.sendExternalTracking=function(a){var b,c=this.generatePixelsMarkup(a),d=!TRC.Browser.ieUpto(8);try{c&&(d&&(d=this.appendPixelsToIFrame(c)),d||(b=doc.createElement("span"),b.innerHTML=c,doc.body.appendChild(b)))}catch(e){__trcError("Error in TRCRBox.sendExternalTracking")}},TRCRBox.prototype.appendPixelsToIFrame=function(a){var b,c,d,e="trc-pixel-iframe-"+parseInt(1e4*Math.random(),10),f=!1;if(a){try{b=doc.createElement("span"),b.innerHTML='<iframe class="trc-hidden" id="'+e+'" name="'+e+'" width="0" height="0" style="display:none"></iframe>',doc.body.appendChild(b),c=doc.getElementById(e),d=c.contentDocument?c.contentDocument:c.contentWindow.document,d.body.innerHTML=a,f=!0,d.close()}catch(g){__trcDebug("Failed to create IFrame for external tracking")}return f}},TRCRBox.prototype.generatePixelsMarkup=function(a){for(var b,c="",d=0;a&&d<a.length;d++)b=TRC.text.encodeHTML(a[d]),b&&(c+='<img width="0" height="0" src="'+TRC.URL.prototype.switchProtocol.call(b,protocol)+'">');return c},TRCRBox.prototype.getAllExternalTrackingURLsList=function(){var a,b=this.recommendationList;try{if(!this.externalTrackingURLsList){this.externalTrackingURLsList={};for(var c=0;b&&c<b.length;c++){a=this.getItemExternalTrackingURLsList(b[c]);for(var d in a)a.hasOwnProperty(d)&&(this.externalTrackingURLsList[d]||(this.externalTrackingURLsList[d]=[]),this.externalTrackingURLsList[d]=this.externalTrackingURLsList[d].concat(a[d]))}}return this.externalTrackingURLsList}catch(e){return __trcError("Error in TRCRBox.getAllExternalTrackingURLsList"),{}}},TRCRBox.prototype.getItemExternalTrackingURLsList=function(a){var b,c,d,e=a["item-id"],f=a.itp,g={};if(!e)return __trcDebug("Item does not have id. External tracking pixel will not be sent if defined"),[];try{if(this.externalTrackingURLsListByItemId||(this.externalTrackingURLsListByItemId={}),!this.externalTrackingURLsListByItemId[e]){for(var h=0;f&&h<f.length;h++)b=f[h],c=b.t,d=b.u,c&&d&&(g[c]||(g[c]=[]),g[c].push(d));this.externalTrackingURLsListByItemId[e]=g}return this.externalTrackingURLsListByItemId[e]}catch(i){return __trcError("Error in TRCRBox.getItemExternalTrackingURLsList"),[]}}}(window,document),function(a,b){var c=TRC.URL=function(a){var b=TRC.text.lsplit;if(!a)throw new Error("Invalid URL!");this.href=a;var c=b(a,"#",2);return this.hash=c.length>1?"#"+c.pop():"",a=c[0],c=b(a,"?",2),this.search=c.length>1?"?"+c.pop():"",a=c[0],c=b(a,"://",2),this.protocol=c.length>1?c.shift()+":":"",a=c[0],c=b(a,"/",2),this.pathname=c.length>1?"/"+c.pop():"/",a=c[0],c=b(a,"@",2),this.auth=c.length>1?c.shift():"",a=c[0],c=b(a,":",2),this.port=c.length>1?parseInt(c.pop()):0,this.host=c[0],this},d={"http:":1,"https:":1};c.prototype.toString=function(a){return(this.host?this.protocol+"//"+(this.auth?this.auth+"@":"")+this.host+(this.port?":"+this.port:""):"")+this.pathname+this.search+(a?"":this.hash||"")},c.prototype.switchProtocol=function(a){var b,c=this instanceof TRC.URL?this:new TRC.URL(this);return d[a]&&(c.protocol=a),b=c.toString(!1),b.length>1?b:""},c.prototype.getParameter=function(a){var b=this instanceof TRC.URL?this:new TRC.URL(this);params=b.search.substr(1).split(/&/);for(var c=0;c<params.length;c++){var d=params[c].split(new RegExp("="),2);if(unescape(d[0])==a)return unescape(d[1])}return null}}(window,document),function(a,b,c){"use strict";var d,e,f={en:{popover:{title:{removed:"Removed!",scRemoved:"Sponsored link removed",thankYou:"Thank You!"},content:{questionnaire:{tellUsWhy:"Tell us why?",options:{uninteresting:"Uninteresting",misleading:"Misleading",offensive:"Offensive",repetitive:"Repetitive",other:"Other"}},approval:"We will try not to show you this content anymore."}},removeBtn:{title:"Remove this item"},undoBtn:{label:"Undo"}},de:{popover:{title:{removed:"Beitrag entfernt",scRemoved:"Gesponserter Beitrag entfernt",thankYou:"Vielen Dank"},content:{questionnaire:{tellUsWhy:"Warum wollten Sie das nicht sehen?",options:{uninteresting:"Interessiert mich nicht",misleading:"Finde ich irrefhrend",offensive:"Der Inhalt ist anstig",repetitive:"Ich kenne den Beitrag schon",other:"Andere Grnde"}},approval:"Wir bemhen uns, Ihnen diesen Inhalt nicht noch einmal anzuzeigen."}},removeBtn:{title:"Ich mchte das nicht sehen"},undoBtn:{label:"Beitrag nicht entfernen"}},fr:{popover:{title:{removed:"Supprim!",scRemoved:"Lien sponsoris supprim",thankYou:"Merci!"},content:{questionnaire:{tellUsWhy:"Quelle est la raison?",options:{uninteresting:"Inintressant",misleading:"Trompeur",offensive:"Offusquant",repetitive:"Rptitif",other:"Autre"}},approval:"Nous essaierons de ne plus vous montrer ce type de contenu  l'avenir."}},removeBtn:{title:"Supprimer ce contenu"},undoBtn:{label:"Annuler"}},it:{popover:{title:{removed:"Rimosso!",scRemoved:"Link sponsorizzato rimosso",thankYou:"Grazie!"},content:{questionnaire:{tellUsWhy:"Ci puoi dire il motivo?",options:{uninteresting:"Non mi interessa",misleading:"Non  coerente",offensive:"E offensivo",repetitive:"E ripetuto",other:"Altro"}},approval:"Cercheremo di non mostrarti pi questo contenuto"}},removeBtn:{title:"Rimuovi questo elemento"},undoBtn:{label:"Annulla"}},jp:{popover:{title:{removed:"!",scRemoved:"",thankYou:""},content:{questionnaire:{tellUsWhy:"",options:{uninteresting:"",misleading:"",offensive:"",repetitive:"",other:""}},approval:""}},removeBtn:{title:""},undoBtn:{label:""}},pt:{popover:{title:{removed:"Removido!",scRemoved:"Link patrocinado removido",thankYou:"Obrigado!"},content:{questionnaire:{tellUsWhy:"Diga-nos porqu",options:{uninteresting:"Desinteressante",misleading:"Enganador",offensive:"Ofensivo",repetitive:"Repetitivo",other:"Outra razo"}},approval:"Vamos tentar no mostrar-lhe este contedo."}},removeBtn:{title:"Remover este item"},undoBtn:{label:"Desfazer"}}},g=8e3,h=4e3,i=-1,j=function(a){var b=a.which||a.keyCode;27===b&&v()},k=function(a){var b=a.target||a.srcElement;c.dom.isAncestor(c.userX.popover,b,!0)||v()},l=function(a){var b=[];return b.push(".trc_popover_aug_container { position: static;}"),b.push(a+".trc_popover {position: absolute; font-family: Arial, Helvetica, sans-serif; font-size: 12px; line-height: 16px; color: #000000; cursor: default; position: absolute; top: 0; right: 0; z-index: 12000; width: 180px; padding: 1px; text-align: left; white-space: normal; background-color: #ffffff; border: 1px solid #ccc; border: 1px solid rgba(0, 0, 0, 0.2); -webkit-border-radius: 6px; -moz-border-radius: 6px; border-radius: 6px; -webkit-box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2); -moz-box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2); box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2); -webkit-background-clip: padding-box; -moz-background-clip: padding; background-clip: padding-box;-moz-box-sizing: content-box; -webkit-box-sizing: content-box; box-sizing: content-box;}"),b.push(a+".trc_popover iframe{width: 100%;}"),b.push(a+".trc_popover .trc_popover_arrow, .trc_popover .trc_popover_arrow:after { position: absolute; display: block; width: 0; height: 0; border-color: transparent; border-style: solid; }"),b.push(a+".trc_popover .trc_popover_arrow { border-width: 11px; }"),b.push(a+'.trc_popover .trc_popover_arrow:after { border-width: 10px; content: "";}'),b.push(a+".trc_popover.trc_bottom { margin-top: 10px; }"),b.push(a+".trc_popover.trc_bottom .trc_popover_arrow { top: -11px; right: 11px; margin-left: -11px; border-bottom-color: #999; border-bottom-color: rgba(0, 0, 0, 0.25); border-top-width: 0; }"),b.push(a+".trc_popover.trc_bottom .trc_popover_arrow:after { top: 1px; margin-left: -10px; border-bottom-color: #ffffff; border-top-width: 0; }"),c.Browser.ieUpto(8)?(b.push(a+".trc_popover_fade.trc_in { visibility: visible;}"),b.push(a+".trc_popover_fade { visibility: hidden;}"),b.push(a+'.trc_popover_fade.trc_in .trc_popover_arrow:after { content: " ";}')):(b.push(a+".trc_popover_fade.trc_in { visibility: visible; opacity: 1; filter: alpha(opacity=100); transition-delay: 0s, 0s; -moz-transition-delay: 0s, 0s; -webkit-transition-delay: 0s, 0s; -o-transition-delay: 0s, 0s; -ms-transition-delay: 0s, 0s;}"),b.push(a+".trc_popover_fade { visibility: hidden; opacity: 0; filter: alpha(opacity=0); transition: opacity 500ms 0s, visibility 0s 500ms; -webkit-transition: opacity 500ms 0s, visibility 0s 500ms;  -moz-transition: opacity 500ms 0s, visibility 0s 500ms; -o-transition: opacity 500ms 0s, visibility 0s 500ms; -ms-transition: opacity 500ms 0s, visibility 0s 500ms;}")),b.join("")},m=function(){var a=[];return a.push("html {overflow: hidden;}"),a.push("body {display: inline-block; width: 100%; margin: 0; padding: 0; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-size: 12px; color: #000000;}"),a.push(".trc_popover_title_wrapper {padding: 8px 14px; margin: 0; font-weight: bold; background-color: #f7f7f7; border-bottom: 1px solid #ebebeb; -webkit-border-radius: 5px 5px 0 0; -moz-border-radius: 5px 5px 0 0; border-radius: 5px 5px 0 0; }"),a.push(".trc_popover_title { width: 100%; display: inline-block; vertical-align: middle;}"),a.push(".trc_popover_title_text { float: left;}"),a.push(".trc_popover_content_wrapper { display: inline-block; float: left; padding: 9px 14px; }"),a.push(".trc_popover_content { width: 100%; }"),a.push(".trc_question_container .trc_question_title { margin: 0 0 3px;}"),a.push(".trc_question_container input[type=radio] { float: left; cursor: pointer; margin: 3px 4px 0 5px;}"),a.push(".trc_popover_content_wrapper .trc_question_container label{ float: left; clear: left; width: 100%; cursor: pointer; line-height: 20px; text-align: left;}"),c.Browser.ie&&(a.push("div.trc_question_container input[type=radio] { margin: 0 2px 0 0;}"),8==c.Browser.ie&&a.push("div.trc_question_container input[type=radio] { margin-top: 1px;}")),a.join("")},n=function(e){TRC.tlf&&console.time("init userx");for(var g=c.dom.createAugmentingContainers(3,null),h=c.dom.generateAugmentationPrefix(g),i=0;i<g.length;i++)g[i].className="trc_popover_aug_container";b.body.appendChild(g[0]),c.dom.injectStyle(l(h)),c.userX.popover=s(g[2]),TRC.dom.on(a,"resize",A),d=f[e||"en"]||f.en,c.userX.isInitialized=!0,TRC.tlf&&console.timeEnd("init userx")},o=function(a){for(var b=0;b<a.boxes.length;b++)p(a.boxes[b])},p=function(a){var e=b.trcGetCurrentStyle(a,"position"),f=b.createElement("div"),g=b.createElement("div"),h=b.createElement("div");e&&"static"!==e||(a.style.position="relative"),c.dom.addClass(f,"trc_user_exclude_btn"),f.setAttribute("title",d.removeBtn.title),f.onclick=function(b){G(b,a)}.trcBind(a.rbox),a.appendChild(f),c.dom.addClass(h,"trc_exclude_overlay trc_fade"),a.appendChild(h),c.dom.addClass(g,"trc_undo_btn"),g.innerHTML=d.undoBtn.label,g.onclick=function(b){I(b,a)}.trcBind(this),a.appendChild(g),c.dom.addClass(a,"trc_excludable")},q=function(a){var b=document.createElement("iframe");return b.frameBorder=b.border="0",b.scrolling="no",b.src="javascript:void(0)",b.style.width="100%",a.appendChild(b)},r=function(a,b,c){var d=a.contentDocument?a.contentDocument:a.contentWindow.document;d.write(b),setTimeout(function(){try{d.close(),c&&c()}catch(a){}},0)},s=function(a){var d,e=b.createElement("div"),f=b.createElement("div");return c.dom.addClass(e,"trc_popover trc_popover_fade trc_bottom"),c.dom.addClass(f,"trc_popover_arrow"),e.appendChild(f),a.appendChild(e),e.trcContentIFrame=d=q(e),c.dom.on(b,"keyup",j),c.dom.on(b,"click",k),c.dom.on(e,"mouseover",C),c.dom.on(e,"mouseout",D),r(d,t(),function(){var a=d.contentDocument||d.contentWindow.document;a.TRC=c,c.dom.injectStyle(m(),a)}),e},t=function(){var a={open:"<script>",close:"</script>"},b=[];return b.push("<!doctype html>"),b.push("<body>"),document.domain!==location.hostname&&(b.push(a.open),b.push("document.domain='"+document.domain+"';"),b.push(a.close)),b.push(a.open),b.push("document.head = document.head || document.getElementsByTagName('head')[0];"),b.push(a.close),b.push('<div class=" trc_popover_title_wrapper ">'),b.push('<div class=" trc_popover_title " id="title">'),b.push('<span class=" trc_popover_title_text "></span>'),b.push("</div>"),b.push("</div>"),b.push('<div class=" trc_popover_content_wrapper ">'),b.push('<div id="content" class=" trc_popover_content "></div>'),b.push("</div>"),b.push("</body>"),b.join("\n")},u=function(a,b,d){var f=c.userX.popover,g=f.trcContentIFrame,h=g.contentDocument||g.contentWindow.document,i=h.getElementById("content"),j=c.Browser.ieUpto(8);a=a||f.videoCube,f.anchor&&c.dom.removeClass(f.anchor,"trc_anchor"),f.videoCube=a,g.style.height=(j?h.body.scrollHeight:h.body.offsetHeight)+"px",c.dom.addClass(f,"trc_in"),b=b||a,f.anchor=b,9==c.Browser.ie&&(f.style.display="block"),z(),C(),d&&(e=new B(v,d)),j&&(i.className=i.className),f.isVisible=!0},v=function(){var a=c.userX.popover,b=a.trcContentIFrame,d=(b.contentDocument||b.contentWindow.document).getElementById("content");c.dom.removeClass(a,"trc_in"),a.anchor&&c.dom.removeClass(a.anchor,"trc_anchor"),c.Browser.ieUpto(8)&&(d.className=d.className),9==c.Browser.ie&&(a.style.display="none"),a.isVisible=!1,C()},w=function(a){var b=c.userX.popover,d=b.trcContentIFrame,e=(d.contentDocument||d.contentWindow.document).getElementById("content");if(e.innerHTML="","string"==typeof a)return void(e.innerHTML=a);try{e.appendChild(a)}catch(f){e.innerHTML=a.outerHTML}},x=function(a){var b=c.userX.popover,d=b.trcContentIFrame,e=(d.contentDocument||d.contentWindow.document).getElementById("title");e.innerHTML=a},y=function(a){var b={},d=function(a){var b=0;if("string"==typeof a&&null!=a&&""!=a){var c=a.indexOf("px");b=c>=0?parseInt(a.substring(0,c),10):1}return b},e=function(a){var b={};if(b.left=0,b.top=0,b.right=0,b.bottom=0,window.getComputedStyle){var c=window.getComputedStyle(a,null);b.left=parseInt(c.borderLeftWidth.slice(0,-2),10),b.top=parseInt(c.borderTopWidth.slice(0,-2),10),b.right=parseInt(c.borderRightWidth.slice(0,-2),10),b.bottom=parseInt(c.borderBottomWidth.slice(0,-2),10)}else b.left=d(a.style.borderLeftWidth),b.top=d(a.style.borderTopWidth),b.right=d(a.style.borderRightWidth),b.bottom=d(a.style.borderBottomWidth);return b};if(b.x=0,b.y=0,null!==a)if(a.getBoundingClientRect){var f=document.documentElement,g=a.getBoundingClientRect(),h=c.Browser.ie,i=h||window.scrollX==f.scrollLeft||"undefined"==typeof window.scrollX?f.scrollLeft:window.scrollX,j=h||window.scrollY==f.scrollTop||"undefined"==typeof window.scrollY?f.scrollTop:window.scrollY;b.x=g.left+i,b.y=g.top+j}else{b.x=a.offsetLeft,b.y=a.offsetTop;for(var k=a.parentNode,l=a.offsetParent,m=null;null!=l;){b.x+=l.offsetLeft,b.y+=l.offsetTop;var n=l.tagName.toLowerCase();if((c.Browser.ieUpto(8)&&"table"!=n||(c.Browser.firefoxAtleast(3)||c.Browser.chrome)&&"td"==n)&&(m=e(l),b.x+=m.left,b.y+=m.top),l!=document.body&&l!=document.documentElement&&(b.x-=l.scrollLeft,b.y-=l.scrollTop),!c.Browser.ie&&!c.Browser.opera||c.Browser.ieAtleast(8))for(;l!=k&&null!==k;)b.x-=k.scrollLeft,b.y-=k.scrollTop,(c.Browser.firefoxUpto(3)||c.Browser.webkit)&&(m=e(k),b.x+=m.left,b.y+=m.top),k=k.parentNode;k=l.parentNode,l=l.offsetParent}}return b},z=function(){var a,b,d,e=c.userX.popover,f=e&&e.videoCube&&e.videoCube.rbox.findElement(function(a){return a.className.search("trc_popover_arrow")>=0},e,"div"),g=e&&e.anchor;g&&f&&(c.dom.addClass(g,"trc_anchor"),a=y(g),b=a.x-e.offsetWidth+g.offsetWidth/2+f.clientLeft+f.offsetWidth/2+1,d=a.y+g.offsetHeight,0>b?(f.style.right=e.offsetWidth-a.x-f.offsetWidth/2-g.offsetWidth/2+"px",b=0):f.style.right=null,e.style.left=b+"px",e.style.top=d+"px")},A=function(){var a=c.userX&&c.userX.popover;a&&a.isVisible&&(TRC.Browser.ieUpto(8)?c.dom.getWindowWidth()!=i&&setTimeout(function(){z(),i=c.dom.getWindowWidth()},0):z())},B=function(a,b){var c,d,e=b;this.pause=function(){clearTimeout(c),e-=new Date-d},this.resume=function(){d=new Date,c=setTimeout(a,e)},this.resume()},C=function(){e&&e.pause&&e.pause()},D=function(){e&&e.resume&&e.resume()},E=function(){var a,e,f=b.createElement("div"),g=b.createElement("div"),h=d.popover.content.questionnaire.options,i=c.Browser.ieUpto(8)?"onclick":"onchange";c.dom.addClass(f,"trc_question_container"),g.innerHTML=d.popover.content.questionnaire.tellUsWhy,c.dom.addClass(g,"trc_question_title"),f.appendChild(g);for(var j in h)h.hasOwnProperty(j)&&(a=b.createElement("label"),e=b.createElement("input"),e.setAttribute("type","radio"),e.setAttribute("name","excludeReason"),e.setAttribute("value",j),e.setAttribute(i,"this.checked = true; TRC.userX.explainExclude(event, TRC.userX.popover.videoCube, 400); "),a.appendChild(e),a.innerHTML+=h[j],f.appendChild(a));return f},F=function(a){var b=a&&a.video_data,c={};return b?(c.ii=b&&b["item-id"],c.prt="rc",b["is-syndicated"]&&(c.prt="sc"),b["is-in-network"]&&(c.prt="nt"),b["is-native"]&&(c.prt="nav"),c.p=b.publisher||"",TRC.pageManager.getValue("past-exclusions")&&(c.px=TRC.pageManager.getValue("past-exclusions")),c):(__trcWarn("No video data have been found for user exclude event request params. aborting."),!1)},G=function(a,b){a=a||event;var d=F(b);return b&&"true"==b.getAttribute("data-excluded")||!d?(__trcDebug("No recommendation to exclude. Not sending exclude event."),c.dom.stopEvent(a)):(b.rbox.sendEvent("exclude",d,null,!1),H(b),c.dom.stopEvent(a))},H=function(a){var b=a.rbox.findElement(function(a){return a.className.search("trc_undo_btn")>=0},a,"div"),e=a&&a.video_data["is-syndicated"]?d.popover.title.scRemoved:d.popover.title.removed;c.userX.popover.videoCube=a,c.pageManager.storeValue("past-exclusions",1),x(e),w(E()),u(a,b,g),a.setAttribute("data-excluded","true"),c.dom.addClass(a,"trc_user_excluded")},I=function(a,b){a=a||event;var d=F(b);return b&&b.getAttribute("data-excluded")&&d?(b.rbox.sendEvent("excludeundo",d,null,!1),J(b),c.dom.stopEvent(a)):(__trcDebug("No recommendation to unexclude. Not sending exclude-undo event."),c.dom.stopEvent(a))},J=function(a){a.removeAttribute("data-excluded"),c.dom.removeClass(a,"trc_user_excluded"),v()},K=function(a,b,c){a=a||event;var d=a.target||a.srcElement,e=F(b);C(),b&&b.getAttribute("data-excluded")&&e?(e.xr=d.getAttribute("value"),b.rbox.sendEvent("excludeexplain",e,null,!1)):__trcDebug("No recommendation exclude to explain. Not sending exclude-explain event."),c?setTimeout(function(){L()},c):L()},L=function(){var a=c.userX.popover,b=c.Browser.ieUpto(9)?0:250;v(),c.dom.addClass(a.anchor,"trc_anchor"),setTimeout(function(){x(d.popover.title.thankYou),w(d.popover.content.approval),u(a.videoCube,a.anchor,h)},b)};c.userX={init:n,initForMode:o,explainExclude:K,locale:"en",isInitialized:!1}}(window,document,TRC),TRC.visibility=TRC.visibility||{},TRC.visibility=function(a,b){function c(a){var b=TRC.dom.getViewportVerticalRange(),c=TRC.dom.getElementRect(a);return c.top<0?Math.max(c.top,c.bottom):b.max-c.top-b.min}function d(a){var b=TRC.dom.getViewportHorizontalRange(),c=TRC.dom.getElementRect(a);return c.left<0?Math.max(c.left,c.right):b.max-c.left-b.min}return modObject={getViewPortOffsets:function(a){var b=c(a),e=d(a);return{verticalOffset:b,horizontalOffset:e}}},a._trcIsUTactive&&(modObject.getVerticalVPShift=c,modObject.getHorizontalVPShift=d),modObject}(window,document),function(win,doc){function initRboxMapping(){TRC.rboxUsageOn&&(TRC.rboxMap=new TRC.RboxMap,TRC.rboxMap.disabled&&(TRC.rboxMap=null))}var protocol=TRC.PROTOCOL,getParameter=TRC.URL.prototype.getParameter,taboolaConsole=getParameter.call(location.href,"trc_console");win.trc_debug_level=getParameter.call(location.href,"taboola-debug"),TRC.tlf=!!getParameter.call(location.href,"taboola-perf"),taboolaConsole&&"yes"===taboolaConsole.toLowerCase()&&(TRC.taboolaConsole=!0,TRC.Manager.prototype.loadExternal("http://c2.taboola.com/console/console_loader.js","js")),isNaN(parseInt(win.trc_debug_level))&&(trc_debug_level=1),TRC.callbacks={cdnRecommendations:function(a){TRC.dispatch("staticRecommendationsReceived",{response:a})},mute:function(){var a,b=TRCImpl.boxes;if(TRCImpl.preloadRequestLoader=null,TRC.Timeout.reset(),b)for(a in b)b[a].request=null;TRC.EventsAPI.dispatchNoContent(TRCImpl.NO_CONTENT.mute),TRC.pConsole("warning - mute!","warn","server returned mute","")}},TRC.trc_drawRBox=!1,TRC.listOrigin=new TRC.ListOriginBuilder,TRC.baseDomain=TRC.baseDomain||protocol+"//cdn.taboola.com/libtrc/"+TRC.publisherId+"/",TRC.prototype=TRC.prototype||{},TRC.Interval=function(){var intervals={};return{set:function(callback,interval){var aArgs=Array.prototype.slice.call(arguments,2),intervalId=win.setInterval(function(){callback instanceof Function?callback.apply(null,aArgs):eval(callback)},interval);return intervals[intervalId.toString()]=1,intervalId},clear:function(a){a&&(win.clearInterval(a),delete intervals[a.toString()])},reset:function(){for(intervalId in intervals)win.clearInterval(intervalId),delete intervals[intervalId.toString()]}}}(),TRC.Timeout=function(){var a={};return{set:function(b,c){var d=win.setTimeout(function(){delete a[d.toString()],b()},c);return a[d.toString()]=1,d},clear:function(b){b&&(win.clearTimeout(b),delete a[b.toString()])},reset:function(){var b;for(b in a)win.clearTimeout(b),delete a[b.toString()]}}}(),TRC.trcReady=function(){var a;return function(){try{TRC.pConsole("page","debug","libtrc : calling TRC.ready",""),TRC.implLoaded=!0,initRboxMapping();var b=TRC.ready({style:".trc_rbox_container{direction:ltr;text-align:left}.trc_rbox_header{border-style:solid;border-width:0}.in_trc_header{position:relative!important;float:right;margin:0}#trc_rbox_css_loaded{overflow:hidden;width:0;height:0}.trc_rbox{margin-top:0}.trc_rbox_div{margin:0 0 3px;direction:ltr;padding:0;box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;-webkit-box-sizing:border-box;overflow:auto;position:relative;width:auto;*width:auto;border:solid #CCC 1px}.loading-animation span{display:block}.videoCube{zoom:1;cursor:pointer;float:none;overflow:hidden;box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;-webkit-box-sizing:border-box}div.videoCube:hover,.videoCube_hover{cursor:pointer}.videoCube span.video-title:hover,.videoCube_hover span.video-title{text-decoration:underline}.videoCube a{text-decoration:none;border:0;color:#000;cursor:pointer}.videoCube a:hover,.videoCube_hover a,.videoCube a:link,.videoCube a{text-decoration:none!important;outline:0}.videoCube a .thumbBlock{float:left;display:block;overflow:hidden!important}.videoCube a img,.videoCube img{border:0;_border:0;display:block;margin:0;height:auto;width:auto}.videoCube .video-label{display:block;overflow:hidden}.videoCube .video-title{width:auto!important;white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}.videoCube .video-duration a{}.videoCube .video-duration{height:0;float:left;position:relative;color:#fff;font-size:11px}.videoCube .video-duration dt{border-radius:4px;-moz-border-radius:4px;-webkit-border-radius:4px;background-color:#000;opacity:.6;filter:alpha(opacity=60)}.videoCube span.video-label.trc_ellipsis{position:relative;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical}.sponsored-default .video-description{font-weight:400;color:#000;font-size:9px;max-height:22px;*height:22px;overflow:hidden;line-height:9px}.video-duration.video-duration-detail div{color:#fff}.sponsored-default{background-color:#f7f6c6;padding-bottom:0!important}.trc_rbox .sponsored{position:relative;display:block;overflow:visible;height:auto;width:auto;padding-right:0;text-align:right;font-size:9px}.sponsored-url{white-space:nowrap;float:left;overflow:hidden;width:98%;height:auto;margin-top:0;margin-left:1px;padding-bottom:2px;color:green;font-size:9px;text-decoration:underline}.sponsored-default .video-title{height:26px;font-size:11px;line-height:13px;max-height:26px;*height:26px}.sponsored-default .thumbBlock img{}.sponsored-default .thumbBlock{text-align:center;background-color:transparent}.trc_rbox_div{height:410px}.videoCube{direction:ltr;font-size:11px;margin:0;color:#000;border-width:0}.videoCube.vertical:first-child{border-top:0;margin-top:0}.videoCube.horizontal:first-child{border-left:0;margin-left:0}.trc_rbox .trc_rbox_div .videoCube.vertical{_margin-top:expression(this.previousSibling==null?'0':'default')}.trc_rbox .trc_rbox_div .videoCube.horizontal{_margin-left:expression(this.previousSibling==null?'0':'default')}div.videoCube:hover,.videoCube_hover{background-color:#EBF0FF;color:#000}.videoCube .thumbBlock{margin-right:5px;margin-left:1px;border-style:solid}.videoCube a img,.videoCube img{border-color:#ececec}.videoCube .overlayImg{}.videoCube .video-label-box{margin-left:81px}.videoCube .video-label dt{font-weight:700}.videoCube .video-title{height:auto;margin-bottom:3px;white-space:normal}.videoCube .trc_inline_detail_spacer{display:inline-block;white-space:pre}.sponsored-default{padding-bottom:0}.loading-animation{font-family:sans;font-size:1.5em;text-align:center;color:gray;height:100%}.trc_rbox_header{font-family:Arial,Helvetica,sans-serif;font-size:12px;font-weight:700;text-decoration:none;color:#000}.trc_header_right_part{position:absolute;left:50%;top:0}.branding_div{overflow:visible;float:right}.branding_div img{height:20px}.trc_pager div{float:left;font-family:sans;cursor:pointer;margin-left:2px;margin-right:2px}.trc_pager_prev,.trc_pager_next{}.trc_pager{font-weight:400}.trc_pager_pages{display:block!important}.trc_related_container div.horizontal{float:left;box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;-webkit-box-sizing:border-box}.trc_related_container div.vertical{}.trc_related_container DIV.videoCube.thumbnail_top .thumbBlock,.trc_related_container DIV.videoCube.thumbnail_bottom .thumbBlock{float:none}@media screen and (-webkit-min-device-pixel-ratio:0){.sponsored-url{margin-top:2px}}.vidiscovery-note{display:none}.pager_disabled{cursor:auto}.videoCube .thumbBlock .trc_sponsored_overlay_base{display:block;width:auto;margin-left:0;position:absolute;color:#fff!important}.videoCube .thumbBlock .trc_sponsored_overlay{filter:alpha(opacity=60);opacity:.6;display:block;position:absolute;*left:0}.videoCube .thumbBlock .trc_sponsored_overlay_base .sponsored{position:relative;display:block;overflow:visible;width:auto;text-align:center;padding:0 5px;margin-top:0}.videoCube .thumbBlock .trc_sponsored_overlay_base.round .trc_sponsored_overlay{border-radius:4px;-moz-border-radius:4px;-webkit-border-radius:4px}.videoCube .thumbBlock .trc_sponsored_overlay_base.round{margin-left:4px}.thumbnail-emblem{background-color:transparent;background-repeat:no-repeat;position:absolute;z-index:50}.playerCube .thumbnail-overlay,.videoCube .thumbnail-overlay{position:absolute;background-color:transparent;background-repeat:no-repeat;z-index:50}.videoCube:hover .thumbnail-overlay,.videoCube_hover .thumbnail-overlay{position:absolute;background-color:transparent;background-repeat:no-repeat;z-index:50}.thumbnail_bottom{padding-bottom:8px}.trc_pager_next img,trc_pager_next pager_disabled img,trc_pager_next:hover img{-moz-transform:scaleX(-1);-o-transform:scaleX(-1);-webkit-transform:scaleX(-1);transform:scaleX(-1);filter:FlipH;-ms-filter:\"FlipH\"}.trc_cover_iframe{position:absolute;z-index:100000;top:0;left:0;background:#000;opacity:.4;filter:alpha(opacity=40);border:0}.trc_lightbox_base{z-index:100001;position:fixed}.trc_lightbox_overlay{background-color:transparent;position:absolute;z-index:100002}.trc_lightbox_transparent{position:absolute;z-index:100003}#trc_lightbox_header{font-family:\"Trebuchet MS\",Helvetica,sans-serif}.trc_whitebox{background-color:#fff;position:relative;z-index:100004;padding:0 20px 20px;margin:0 auto;border:2px solid #000;-moz-box-shadow:3px 3px 20px #000;-webkit-box-shadow:3px 3px 20px #000;box-shadow:3px 3px 20px #000;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box;-moz-border-radius:5px;-webkit-border-radius:5px;border-radius:5px}.trc_whiteboxCloseButton{width:32px;height:32px;border:0;position:absolute;right:-16px;top:-14px;cursor:pointer;background:url(//cdn.taboola.com/taboola-generic/close.png) no-repeat top left transparent;color:#fff;color:transparent;font-size:0}.trc_related_container .logoDiv{font-family:Arial,Helvetica,sans-serif;white-space:nowrap;font-size:9px}.trc_related_container .logoDiv a{font-size:9px;text-decoration:none!important;color:#000;margin-right:1px;vertical-align:text-bottom}.logoDiv a span:hover{text-decoration:underline}.trc_rbox_header .logoDiv{font-size:1em}.trc_related_container .vertical-start-shade{background-image:url(//cdn.taboola.com/taboola-generic/shade-down.png);height:10px;width:auto;position:absolute;z-index:5}.trc_related_container .vertical-end-shade{background-image:url(//cdn.taboola.com/taboola-generic/shade-up.png);height:10px;width:auto;position:absolute;z-index:5}.trc_related_container .horizontal-start-shade{background-image:url(//cdn.taboola.com/taboola-generic/shade-right.png);height:auto;width:10px;position:absolute;z-index:5}.trc_related_container .horizontal-end-shade{background-image:url(//cdn.taboola.com/taboola-generic/shade-left.png);height:auto;width:10px;position:absolute;z-index:5}.trc_rbox_container.trc_expandable{overflow:hidden;max-height:0;transition-property:max-height;-webkit-transition-property:max-height;-moz-transition-property:max-height;-o-transition-property:max-height;-webkit-transform:translateZ(0);-moz-transform:translateZ(0);-ms-transform:translateZ(0);-o-transform:translateZ(0);transform:translateZ(0)}DIV.trc_autoplaylist-box{margin:6px auto 0;border:0;-moz-border-radius:5px;-webkit-border-radius:5px;border-radius:5px;padding:4px;font-family:\"Trebuchet MS\",Helvetica,sans-serif;width:320px;background:#191919;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#191919', endColorstr='#393939');-ms-filter:\"progid:DXImageTransform.Microsoft.gradient(startColorstr=#191919, endColorstr=#393939)\";background:-webkit-gradient(linear,left top,left bottom,from(#191919),to(#393939));background:-moz-linear-gradient(top,#191919,#393939);background:linear-gradient(top,#191919,#393939)}DIV.trc_autoplaylist-box .trc-next-up-header{font-size:14px;color:#CCC;float:left;line-height:31px;margin:0 4px 0 6px;overflow:hidden;white-space:nowrap}DIV.trc_autoplaylist-box .trc-next-up-countdown{color:#fff;font-weight:700;font-size:15px;padding-left:4px}DIV.trc_autoplaylist-box .nextup{cursor:pointer}DIV.trc_autoplaylist-box .nextup .thumbblock{border:solid #FEFEFE 1px;margin-right:10px}DIV.trc_autoplaylist-box:hover .nextup .thumbblock SPAN.thumbnail-overlay{background-image:url(//cdn.taboola.com/taboola-generic/lightbox-overlay.png)}DIV.trc_autoplaylist-box .nextup .video-label-box{color:#fff;font-weight:700;font-size:12px;line-height:14px}.trc-syndication-link{text-decoration:none;color:inherit}.playerCube{width:100%;height:100%;position:relative;cursor:pointer}.playerCube .thumbnail-overlay{width:100%;height:100%;top:0;left:0;position:absolute}.trc_related_container .whatsThisSyndicated{position:absolute;cursor:pointer}.trc_related_container .whatsThisSyndicated.a-bottom-right,.trc_related_container .static-text.bottom-right{bottom:0;right:0}.trc_related_container .whatsThisSyndicated.a-top-right,.trc_related_container .static-text.top-right{top:0;right:0}.trc_related_container .whatsThisSyndicated.a-bottom-left,.trc_related_container .static-text.bottom-left{bottom:0;left:0}.trc_related_container .whatsThisSyndicated.a-top-left,.trc_related_container .static-text.top-left{top:0;left:0}.trc_related_container .videoCube .thumbBlock .branding{position:absolute;bottom:0;z-index:1;width:100%;margin:0;padding:5px 0;text-align:center}.syndicatedItem .branding{margin:0}.trc_related_container .videoCube .thumbBlock .static-text{position:absolute;z-index:1;margin:0;padding:5px;background-color:#000;color:#fff;display:block;font-family:Arial,Helvetica,sans-serif;font-size:10px;font-weight:400;text-align:left;text-decoration:none;opacity:.7}.trc_related_container .static-text.top{width:100%;top:0;padding:5px 0}.trc_related_container .static-text.bottom{width:100%;bottom:0;padding:2px 0}.trc-inplayer-rbox{background:#333;background:rgba(30,30,30,.9);*background:#333;bottom:0;position:absolute;height:300px;text-align:center}.trc-inplayer-rbox .trc_rbox_container{margin:50px auto 0;width:640px}.trc_rbox.trc-auto-size{width:100%;height:100%}.videoCube.thumbnail_under .thumbBlock{margin-left:0;margin-right:0}.videoCube.thumbnail_under .label-box-overlay{width:100%;height:100%;position:absolute;background:#000;opacity:.75;filter:alpha(opacity=75);top:0;_display:none}.videoCube.thumbnail_under .video-labels-anchor{width:100%;height:auto;position:absolute;z-index:1;left:0;bottom:0;min-height:2.58em;max-height:2.58em;padding-top:2px;padding-bottom:2px;_background-color:#CECECE;-webkit-transition:all .2s linear;-moz-transition:all .2s linear;-ms-transition:all .2s linear;-o-transition:all .2s linear;transition:all .2s linear;line-height:1.25em}.videoCube.thumbnail_under .video-labels-anchor span.video-title,.videoCube.thumbnail_under .video-labels-anchor span.branding{position:relative;z-index:1;padding:0 3px;margin:0}.videoCube.thumbnail_under .video-title{min-height:2.58em}.videoCube.thumbnail_under:hover .video-labels-anchor{opacity:1;max-height:6.45em}.trc-auto-size .trc_rbox_outer .trc_rbox_div{height:auto;width:auto}.trc-auto-size .trc_rbox_div .videoCube{height:auto}.trc-auto-size .trc_rbox_div .videoCube.trc-first-recommendation{margin-top:0}.trc_rbox .trc_rbox_outer .trc_rbox_div .videoCube.trc-first-in-row{margin-left:0}.trc_related_container .trc_elastic{font-size:13px;line-height:18px;color:#333;background-color:#fff;box-shadow:#666 0 0 0 4px;margin:20px}.trc_elastic .trc_rbox{width:auto}.trc_elastic .videoCube{overflow:hidden}.trc_elastic .videoCube .thumbBlock{display:block;background-color:transparent;background-position:center center;background-repeat:no-repeat;background-size:cover;position:absolute;display:inline-block;top:0;right:0;bottom:0;left:0;margin-left:0;margin-right:0}.trc_elastic .thumbBlock_holder{position:relative;width:100%}.trc_elastic .thumbnail_start .thumbBlock_holder{float:left;margin-right:10px}.trc_elastic .videoCube_aspect{width:1px}.trc_elastic .trc_rbox .trc_rbox_div{height:auto}.trc_elastic .video-label-box{display:block}.trc_user_exclude_btn{background:url(//cdn.taboola.com/libtrc/static/thumbnails/f539211219b796ffbb49949997c764f0.png) no-repeat scroll 0 0 transparent;width:12px;height:12px;position:absolute;right:2px;top:2px;z-index:9000;cursor:pointer;visibility:hidden}.trc_undo_btn{font-family:Arial,Helvetica,sans-serif;font-size:11px;line-height:14px;font-weight:400;color:#36C;text-decoration:underline;cursor:pointer;position:absolute;right:2px;top:2px;padding:0 1px;z-index:11000;visibility:hidden}.videoCube:hover .trc_user_exclude_btn,.videoCube_hover .trc_user_exclude_btn,.trc_user_excluded.videoCube:hover .trc_undo_btn,.trc_user_excluded.videoCube_hover .trc_undo_btn,.trc_undo_btn.trc_anchor{visibility:visible}.videoCube.trc_user_excluded .trc_user_exclude_btn{visibility:hidden}.trc_fade{opacity:0;filter:alpha(opacity=0);visibility:hidden;transition:opacity 500ms 0s,visibility 0s 500ms;-webkit-transition:opacity 500ms 0s,visibility 0s 500ms;-moz-transition:opacity 500ms 0s,visibility 0s 500ms;-o-transition:opacity 500ms 0s,visibility 0s 500ms;-ms-transition:opacity 500ms 0s,visibility 0s 500ms}.trc_fade.trc_in,.trc_user_excluded .trc_exclude_overlay{visibility:visible;opacity:1;filter:alpha(opacity=100);transition-delay:0s,0s;-moz-transition-delay:0s,0s;-webkit-transition-delay:0s,0s;-o-transition-delay:0s,0s;-ms-transition-delay:0s,0s}.trc_excludable .trc_exclude_overlay{position:absolute;z-index:10000;top:0;left:0;width:100%;height:100%;cursor:default;background-color:#fff}.videoCube.trc_excludable .trc_exclude_overlay.trc_fade{filter:alpha(opacity=80)\\9}.videoCube.trc_user_excluded .trc_exclude_overlay{visibility:visible;opacity:.8;filter:alpha(opacity=80)}.videoCube.trc_user_excluded .thumbBlock{filter:url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'><filter id='grayscale'><feColorMatrix type='matrix' values='0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0' /></filter></svg>#grayscale\");filter:gray;-webkit-filter:grayscale(100%)}.videoCube.trc_user_excluded:hover a .video-label-box .video-title,.videoCube_hover.trc_user_excluded a .video-label-box .video-title{text-decoration:none}.videoCube.trc_user_excluded a .video-label-box *,.videoCube.trc_user_excluded:hover a .video-label-box *,.videoCube_hover.trc_user_excluded a .video-label-box *{color:#000;overflow:hidden;-webkit-transition:color 500ms 0s;-moz-transition:color 500ms 0s;-ms-transition:color 500ms 0s;-o-transition:color 500ms 0s;transition:color 500ms 0s}.videoCube.trc_user_excluded a .video-label-box .label-box-overlay{background-color:#BBB;-webkit-transition:background-color 500ms 0s;-moz-transition:background-color 500ms 0s;-ms-transition:background-color 500ms 0s;-o-transition:background-color 500ms 0s;transition:background-color 500ms 0s}.videoCube.thumbnail_under.trc_user_excluded .video-labels-anchor,.videoCube.thumbnail_under.trc_user_excluded:hover .video-labels-anchor{max-height:none;-webkit-transition:none;-moz-transition:none;-ms-transition:none;-o-transition:none;transition:none}.trc_related_container .trc_clearer{clear:both;height:0;overflow:hidden;font-size:0;line-height:0;visibility:hidden}.link-adc{float:right!important}.trc-widget-footer .link-adc a .trc_adc_wrapper,.trc_header_ext .link-adc a .trc_adc_wrapper{vertical-align:baseline;height:15px;width:19px;display:inline-block;position:relative}.trc-widget-footer .link-adc a .trc_adc_s_logo,.trc_header_ext .link-adc a .trc_adc_s_logo,.trc-widget-footer .link-adc a .trc_adc_b_logo,.trc_header_ext .link-adc a .trc_adc_b_logo{vertical-align:middle;height:15px;display:inline-block;margin-top:-1px}.trc-widget-footer .link-adc a .trc_adc_s_logo,.trc_header_ext .link-adc a .trc_adc_s_logo{width:19px;background:url(//cdn.taboola.com/libtrc/static/thumbnails/3aadbb71016ecd7a194bbe2791777e9a.png) no-repeat!important}.trc-widget-footer .link-adc a .trc_adc_b_logo,.trc_header_ext .link-adc a .trc_adc_b_logo{width:77px;background:#fff url(//cdn.taboola.com/libtrc/static/thumbnails/0781f9c5a8637d1e162874f157460048.png) no-repeat!important;right:-1px;display:none;position:absolute}.trc_mobile_disclosure_link,.trc_mobile_attribution_link,.trc_mobile_adc_link{display:none}.trc_desktop_disclosure_link,.trc_desktop_attribution_link,.trc_desktop_adc_link{display:inline}@media screen and (max-width:767px){.trc_mobile_disclosure_link{display:inline}.trc_mobile_attribution_link{display:inline}.trc_mobile_adc_link{display:inline}.trc_desktop_disclosure_link{display:none}.trc_desktop_attribution_link{display:none}.trc_desktop_adc_link{display:none}}.trc_in_iframe .trc_mobile_attribution_link,.trc_in_iframe .trc_mobile_disclosure_link{display:inline}.trc_in_iframe .trc_desktop_attribution_link,.trc_in_iframe .trc_desktop_disclosure_link{display:none}.trc_related_container .logoDiv,.trc_related_container .trc_header_ext .logoDiv{float:right}.trc_related_container .logoDiv+.logoDiv{margin-right:2px}.trc_related_container .attribution-disclosure-link-sponsored,.trc_related_container .attribution-disclosure-link-hybrid{display:none}.trc_related_container .trc-content-sponsored .attribution-disclosure-link-sponsored{display:block}.trc_related_container .trc-content-hybrid .attribution-disclosure-link-hybrid{display:block}.trc_related_container .trc-widget-footer:hover a span,.trc_related_container .trc_header_ext:hover a span{text-decoration:underline!important}.logoDiv a span.trc_logos_v_align{display:inline-block!important;font-size:15px!important;line-height:1em!important;width:0!important}.trc_related_container .trc_header_ext:hover a span.trc_logos_v_align,.trc_related_container .trc_header_ext:hover a span.trc_adc_wrapper,.trc_related_container .trc-widget-footer:hover a span.trc_logos_v_align,.trc_related_container .trc-widget-footer:hover a span.trc_adc_wrapper{text-decoration:none!important}.trc_related_container{clear:both}"
});if(!b.invisible)return;TRC.dom.onReady(function(){a?(a.innerHTML="",a.style.display="none"):(a=doc.createElement("div"),doc.body.appendChild(a).style.display="none"),b.internalDrawRBox({mode:"rbox-tracking",container:a})})}catch(c){__trcError("Error in libtrc initialization",c)}}}(),TRC.pConsole("","time","impl file loaded",""),TRC.utm.push((new Date).getTime()-TRC.utm.start),TRC.tlf&&console.timeStamp("call trcReady"),TRC.trcReady()}(window,document);