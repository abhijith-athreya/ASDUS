define(["jquery","exports","underscore","backbone","baseview","utils","state","site-manager","modules/carousel/carousel-autosize"],function(e,t,i,s,o,n,a,l,r){var c=r.extend({initialize:function(t){i.bindAll(this,"handleKeyPress","close"),t=e.extend({scrollerColor:"dark"},t),this.$body=n.get("body"),this.$doc=n.get("document"),this.carousel=t.carousel,this.parent=t.parent,a.registerFullScreenView(this),l.getHeader().setClosedFixed(!0),l.scrollTop(0),this.$doc.on("keydown."+this.cid,this.handleKeyPress),this.$body.on("click."+this.cid,".close",this.close),this.launch(),r.prototype.initialize.call(this,t)},close:function(t){t&&t.preventDefault(),l.getHeader().restoreLastState(),this.animate(this.$el.parent(),"opacity",0,300,"ease-in-out").done(i.bind(function(){this.destroy(!0),a.clearFullScreenView().done(i.bind(function(){if(this.carousel){var t=e(".thumbs li",this.parent);t.eq(this.index).click()}},this))},this))},destroy:function(e){this.$doc.off("."+this.cid),this.$body.off("."+this.cid),e&&this.$el.parent().remove(),r.prototype.destroy.call(this,!1)},launch:function(){var t=e('<article class="gallery fullscreen" style="opacity: 0"><a class="close" href="#"></a><div class="ui-film fullscreen"></div></article>'),i=this.parent.clone();i.find(".viewport").removeClass("hover");var s=i.find(".partner-placement");if(s.length){var o=s.attr("id")+"_fs";s.attr("id",o).attr("data-slot-id",o)}t.append(i),this.$body.append(t),this.animate(t,"opacity",1,300,"ease-in-out"),this.setElement(i)},handleKeyPress:function(e){return 37===e.keyCode?(this.prevSlide(),!1):39===e.keyCode?(this.nextSlide(),!1):27===e.keyCode?(this.close(),!1):void 0}});return c});
//# sourceMappingURL=carousel-fullscreen.js.map