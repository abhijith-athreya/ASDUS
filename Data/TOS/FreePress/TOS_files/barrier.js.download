define(["jquery"],function(e){var t=function(t,i,n){e.extend(this,e.Deferred()),n&&(this.reject=this.resolve);var r=setTimeout(e.proxy(function(){this.reject()},this),i);t.then(e.proxy(function(){this.resolve.apply(this,arguments)},this),e.proxy(function(){this.reject.apply(this,arguments)},this)).always(function(){clearTimeout(r)})},i=function(){this.init()};return i.prototype={init:function(){this._processes=[],this._waiting=[]},add:function(e,i,n){return i?void this._addToQueue(this._processes,new t(e,i,n)):void console.error("Invalid Barrier, timeoutMS required")},cancel:function(t){e.each(this._waiting,function(e,t){t.reject()}),this._waiting=[],t&&(e.each(this._processes.slice(0),function(e,t){t.reject()}),this._processes=[])},wait:function(){var t=this._processes;return t.length?this._addToQueue(this._waiting,e.Deferred(function(i){e.when.apply(e,t).then(function(){i.resolve.apply(i,arguments)},function(){i.reject.apply(i,arguments)})})):e.Deferred().resolve()},_addToQueue:function(t,i){return t.push(i),i.always(e.proxy(function(){return this._removeFromQueue(t,i)},this))},_removeFromQueue:function(t,i){var n=e.inArray(i,t);return-1!==n?(t.splice(n,1),!0):!1}},i});
//# sourceMappingURL=barrier.js.map