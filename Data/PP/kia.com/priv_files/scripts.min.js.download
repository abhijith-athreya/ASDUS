function Serie(){this.id="";this.key="";this.name="";this.year="";this.compareImg="";this.panorama={exterior:{frames:"20",x:"0",y:"90",z:"0"},interior:{frames:"72",x:"0",y:"90",z:"0"},pattern:"90-xx-0.jpg"}}function emptyObj(obj){for(var key in obj)delete obj[key]}function _BaseObject(id,name){null===id&&(id=Math.floor(Math.random()*Number.MAX_VALUE));null===name&&(name=id);this.id=id+"";this.name=name}function List(){this.collection=[]}function RulesSet(){this.options=new List;this.packages=new List;this.colors=new List}function Rules(){this.drill=!0;this.deny=new RulesSet;this.include=new RulesSet;this.require=new RulesSet;this.requireOr=new RulesSet}function CompareSet(){RulesSet.call(this);this.rules=new Rules}function Color(id,name){_BaseObject.call(this,id,name);this.baseHex="";this.highHex="";this.order=0;this.price=0}function ExteriorColor(id,name){Color.call(this,id,name);this.selected=!1;this.interior=new List;this.rules=new Rules;this.checking=!1;this.dependencies=null}function Fabric(id,name,texture){_BaseObject.call(this,id,name);this.file=name.toLowerCase().replace(/\s/gi,"-");if(null!==texture&&void 0!==texture)this.texture=window.contentURI+texture;else{var nId=parseInt(id,10)%2+1;nId=Math.random()<.5?1:2;this.texture=window.staticURI+"/img/fabrics/"+nId+".png";this.texture=window.staticURI+"/img/fabrics/default.png"}}function InteriorColor(id,name){Color.call(this,id,name);this.selected=!1;this.fabric=new _BaseObject(0,"");this.rules=new Rules;this.checking=!1;this.dependencies=null}function Feature(desc,bMobile){this.description=desc;this.showInMobile=bMobile}function TrimOption(id,name){_BaseObject.call(this,id,name);this.price=0;this.type="";this.attribute="";this.ndx=0}function Model(id,name){_BaseObject.call(this,id,name);this.msrp=0;this.destCharge=0;this.color="#FFF";this.colors=[];this.features=[];this.options=[];this.featureInfo=[];this.drive="FWD"}function Trim(id,name){_BaseObject.call(this,id,name);this.attributes=new List;this.msrp=0;this.selected=!1;this.thumbnail="";this.imageSet="";this.models=new List}function Price(){this.msrp=0;this.model=0;this.destination=0;this.color={exterior:0,interior:0};this.packages=new List;this.options=new List;this.packagesTotal=0;this.optionsTotal=0;this.monthly=0}function CalculatorOptions(){this.rate={min:0,max:30,value:1.9};this.down=0;this.tradeIn=0;this.months={min:12,max:72,value:48,delta:12}}function BaseOption(id,name){_BaseObject.call(this,id,name);this.description="";this.disclaimer="";this.altText="";this.images=[];this.highlight=!1;this.showDetails=!1}function ModelOption(id,name){BaseOption.call(this,id,name);this.selected=!1;this.optionCode="";this.price=0;this.rules=new Rules;this.detailImagePath="";this.detailImageSmallPath=""}function ModelPackage(id,name){ModelOption.call(this,id,name);this.showDetails=!1;this.options=[];this.features=[]}function InfoBox(opt_opts){opt_opts=opt_opts||{};google.maps.OverlayView.apply(this,arguments);this.content_=opt_opts.content||"";this.disableAutoPan_=opt_opts.disableAutoPan||!1;this.maxWidth_=opt_opts.maxWidth||0;this.pixelOffset_=opt_opts.pixelOffset||new google.maps.Size(0,0);this.position_=opt_opts.position||new google.maps.LatLng(0,0);this.zIndex_=opt_opts.zIndex||null;this.boxClass_=opt_opts.boxClass||"infoBox";this.boxStyle_=opt_opts.boxStyle||{};this.closeBoxMargin_=opt_opts.closeBoxMargin||"2px";this.closeBoxURL_=opt_opts.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif";""===opt_opts.closeBoxURL&&(this.closeBoxURL_="");this.infoBoxClearance_=opt_opts.infoBoxClearance||new google.maps.Size(1,1);"undefined"==typeof opt_opts.visible&&("undefined"==typeof opt_opts.isHidden?opt_opts.visible=!0:opt_opts.visible=!opt_opts.isHidden);this.isHidden_=!opt_opts.visible;this.alignBottom_=opt_opts.alignBottom||!1;this.pane_=opt_opts.pane||"floatPane";this.enableEventPropagation_=opt_opts.enableEventPropagation||!1;this.div_=null;this.closeListener_=null;this.moveListener_=null;this.contextListener_=null;this.eventListeners_=null;this.fixedWidthSet_=null}function RichMarker(opt_options){var options=opt_options||{};this.ready_=!1;this.dragging_=!1;void 0==opt_options.visible&&(opt_options.visible=!0);void 0==opt_options.shadow&&(opt_options.shadow="7px -3px 5px rgba(88,88,88,0.7)");void 0==opt_options.anchor&&(opt_options.anchor=RichMarkerPosition.BOTTOM);this.setValues(options)}var requirejs,require,define;!function(global){function isFunction(it){return"[object Function]"===ostring.call(it)}function isArray(it){return"[object Array]"===ostring.call(it)}function each(ary,func){if(ary){var i;for(i=0;i<ary.length&&(!ary[i]||!func(ary[i],i,ary));i+=1);}}function eachReverse(ary,func){if(ary){var i;for(i=ary.length-1;i>-1&&(!ary[i]||!func(ary[i],i,ary));i-=1);}}function hasProp(obj,prop){return hasOwn.call(obj,prop)}function getOwn(obj,prop){return hasProp(obj,prop)&&obj[prop]}function eachProp(obj,func){var prop;for(prop in obj)if(hasProp(obj,prop)&&func(obj[prop],prop))break}function mixin(target,source,force,deepStringMixin){source&&eachProp(source,function(value,prop){if(force||!hasProp(target,prop))if(deepStringMixin&&"string"!=typeof value){target[prop]||(target[prop]={});mixin(target[prop],value,force,deepStringMixin)}else target[prop]=value});return target}function bind(obj,fn){return function(){return fn.apply(obj,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(err){throw err}function getGlobal(value){if(!value)return value;var g=global;each(value.split("."),function(part){g=g[part]});return g}function makeError(id,msg,err,requireModules){var e=new Error(msg+"\nhttp://requirejs.org/docs/errors.html#"+id);e.requireType=id;e.requireModules=requireModules;err&&(e.originalError=err);return e}function newContext(contextName){function trimDots(ary){var i,part;for(i=0;ary[i];i+=1){part=ary[i];if("."===part){ary.splice(i,1);i-=1}else if(".."===part){if(1===i&&(".."===ary[2]||".."===ary[0]))break;if(i>0){ary.splice(i-1,2);i-=2}}}}function normalize(name,baseName,applyMap){var pkgName,pkgConfig,mapValue,nameParts,i,j,nameSegment,foundMap,foundI,foundStarMap,starI,baseParts=baseName&&baseName.split("/"),normalizedBaseParts=baseParts,map=config.map,starMap=map&&map["*"];if(name&&"."===name.charAt(0))if(baseName){normalizedBaseParts=getOwn(config.pkgs,baseName)?baseParts=[baseName]:baseParts.slice(0,baseParts.length-1);name=normalizedBaseParts.concat(name.split("/"));trimDots(name);pkgConfig=getOwn(config.pkgs,pkgName=name[0]);name=name.join("/");pkgConfig&&name===pkgName+"/"+pkgConfig.main&&(name=pkgName)}else 0===name.indexOf("./")&&(name=name.substring(2));if(applyMap&&map&&(baseParts||starMap)){nameParts=name.split("/");for(i=nameParts.length;i>0;i-=1){nameSegment=nameParts.slice(0,i).join("/");if(baseParts)for(j=baseParts.length;j>0;j-=1){mapValue=getOwn(map,baseParts.slice(0,j).join("/"));if(mapValue){mapValue=getOwn(mapValue,nameSegment);if(mapValue){foundMap=mapValue;foundI=i;break}}}if(foundMap)break;if(!foundStarMap&&starMap&&getOwn(starMap,nameSegment)){foundStarMap=getOwn(starMap,nameSegment);starI=i}}if(!foundMap&&foundStarMap){foundMap=foundStarMap;foundI=starI}if(foundMap){nameParts.splice(0,foundI,foundMap);name=nameParts.join("/")}}return name}function removeScript(name){isBrowser&&each(scripts(),function(scriptNode){if(scriptNode.getAttribute("data-requiremodule")===name&&scriptNode.getAttribute("data-requirecontext")===context.contextName){scriptNode.parentNode.removeChild(scriptNode);return!0}})}function hasPathFallback(id){var pathConfig=getOwn(config.paths,id);if(pathConfig&&isArray(pathConfig)&&pathConfig.length>1){removeScript(id);pathConfig.shift();context.require.undef(id);context.require([id]);return!0}}function splitPrefix(name){var prefix,index=name?name.indexOf("!"):-1;if(index>-1){prefix=name.substring(0,index);name=name.substring(index+1,name.length)}return[prefix,name]}function makeModuleMap(name,parentModuleMap,isNormalized,applyMap){var url,pluginModule,suffix,nameParts,prefix=null,parentName=parentModuleMap?parentModuleMap.name:null,originalName=name,isDefine=!0,normalizedName="";if(!name){isDefine=!1;name="_@r"+(requireCounter+=1)}nameParts=splitPrefix(name);prefix=nameParts[0];name=nameParts[1];if(prefix){prefix=normalize(prefix,parentName,applyMap);pluginModule=getOwn(defined,prefix)}if(name)if(prefix)normalizedName=pluginModule&&pluginModule.normalize?pluginModule.normalize(name,function(name){return normalize(name,parentName,applyMap)}):normalize(name,parentName,applyMap);else{normalizedName=normalize(name,parentName,applyMap);nameParts=splitPrefix(normalizedName);prefix=nameParts[0];normalizedName=nameParts[1];isNormalized=!0;url=context.nameToUrl(normalizedName)}suffix=!prefix||pluginModule||isNormalized?"":"_unnormalized"+(unnormalizedCounter+=1);return{prefix:prefix,name:normalizedName,parentMap:parentModuleMap,unnormalized:!!suffix,url:url,originalName:originalName,isDefine:isDefine,id:(prefix?prefix+"!"+normalizedName:normalizedName)+suffix}}function getModule(depMap){var id=depMap.id,mod=getOwn(registry,id);mod||(mod=registry[id]=new context.Module(depMap));return mod}function on(depMap,name,fn){var id=depMap.id,mod=getOwn(registry,id);if(!hasProp(defined,id)||mod&&!mod.defineEmitComplete){mod=getModule(depMap);mod.error&&"error"===name?fn(mod.error):mod.on(name,fn)}else"defined"===name&&fn(defined[id])}function onError(err,errback){var ids=err.requireModules,notified=!1;if(errback)errback(err);else{each(ids,function(id){var mod=getOwn(registry,id);if(mod){mod.error=err;if(mod.events.error){notified=!0;mod.emit("error",err)}}});notified||req.onError(err)}}function takeGlobalQueue(){if(globalDefQueue.length){apsp.apply(defQueue,[defQueue.length-1,0].concat(globalDefQueue));globalDefQueue=[]}}function cleanRegistry(id){delete registry[id];delete enabledRegistry[id]}function breakCycle(mod,traced,processed){var id=mod.map.id;if(mod.error)mod.emit("error",mod.error);else{traced[id]=!0;each(mod.depMaps,function(depMap,i){var depId=depMap.id,dep=getOwn(registry,depId);if(dep&&!mod.depMatched[i]&&!processed[depId])if(getOwn(traced,depId)){mod.defineDep(i,defined[depId]);mod.check()}else breakCycle(dep,traced,processed)});processed[id]=!0}}function checkLoaded(){var map,modId,err,usingPathFallback,waitInterval=1e3*config.waitSeconds,expired=waitInterval&&context.startTime+waitInterval<(new Date).getTime(),noLoads=[],reqCalls=[],stillLoading=!1,needCycleCheck=!0;if(!inCheckLoaded){inCheckLoaded=!0;eachProp(enabledRegistry,function(mod){map=mod.map;modId=map.id;if(mod.enabled){map.isDefine||reqCalls.push(mod);if(!mod.error)if(!mod.inited&&expired)if(hasPathFallback(modId)){usingPathFallback=!0;stillLoading=!0}else{noLoads.push(modId);removeScript(modId)}else if(!mod.inited&&mod.fetched&&map.isDefine){stillLoading=!0;if(!map.prefix)return needCycleCheck=!1}}});if(expired&&noLoads.length){err=makeError("timeout","Load timeout for modules: "+noLoads,null,noLoads);err.contextName=context.contextName;return onError(err)}needCycleCheck&&each(reqCalls,function(mod){breakCycle(mod,{},{})});expired&&!usingPathFallback||!stillLoading||!isBrowser&&!isWebWorker||checkLoadedTimeoutId||(checkLoadedTimeoutId=setTimeout(function(){checkLoadedTimeoutId=0;checkLoaded()},50));inCheckLoaded=!1}}function callGetModule(args){hasProp(defined,args[0])||getModule(makeModuleMap(args[0],null,!0)).init(args[1],args[2])}function removeListener(node,func,name,ieName){node.detachEvent&&!isOpera?ieName&&node.detachEvent(ieName,func):node.removeEventListener(name,func,!1)}function getScriptData(evt){var node=evt.currentTarget||evt.srcElement;removeListener(node,context.onScriptLoad,"load","onreadystatechange");removeListener(node,context.onScriptError,"error");return{node:node,id:node&&node.getAttribute("data-requiremodule")}}function intakeDefines(){var args;takeGlobalQueue();for(;defQueue.length;){args=defQueue.shift();if(null===args[0])return onError(makeError("mismatch","Mismatched anonymous define() module: "+args[args.length-1]));callGetModule(args)}}var inCheckLoaded,Module,context,handlers,checkLoadedTimeoutId,config={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},registry={},enabledRegistry={},undefEvents={},defQueue=[],defined={},urlFetched={},requireCounter=1,unnormalizedCounter=1;handlers={require:function(mod){return mod.require?mod.require:mod.require=context.makeRequire(mod.map)},exports:function(mod){mod.usingExports=!0;return mod.map.isDefine?mod.exports?mod.exports:mod.exports=defined[mod.map.id]={}:void 0},module:function(mod){return mod.module?mod.module:mod.module={id:mod.map.id,uri:mod.map.url,config:function(){var c,pkg=getOwn(config.pkgs,mod.map.id);c=pkg?getOwn(config.config,mod.map.id+"/"+pkg.main):getOwn(config.config,mod.map.id);return c||{}},exports:defined[mod.map.id]}}};Module=function(map){this.events=getOwn(undefEvents,map.id)||{};this.map=map;this.shim=getOwn(config.shim,map.id);this.depExports=[];this.depMaps=[];this.depMatched=[];this.pluginMaps={};this.depCount=0};Module.prototype={init:function(depMaps,factory,errback,options){options=options||{};if(!this.inited){this.factory=factory;errback?this.on("error",errback):this.events.error&&(errback=bind(this,function(err){this.emit("error",err)}));this.depMaps=depMaps&&depMaps.slice(0);this.errback=errback;this.inited=!0;this.ignore=options.ignore;options.enabled||this.enabled?this.enable():this.check()}},defineDep:function(i,depExports){if(!this.depMatched[i]){this.depMatched[i]=!0;this.depCount-=1;this.depExports[i]=depExports}},fetch:function(){if(!this.fetched){this.fetched=!0;context.startTime=(new Date).getTime();var map=this.map;if(!this.shim)return map.prefix?this.callPlugin():this.load();context.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return map.prefix?this.callPlugin():this.load()}))}},load:function(){var url=this.map.url;if(!urlFetched[url]){urlFetched[url]=!0;context.load(this.map.id,url)}},check:function(){if(this.enabled&&!this.enabling){var err,cjsModule,id=this.map.id,depExports=this.depExports,exports=this.exports,factory=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){this.defining=!0;if(this.depCount<1&&!this.defined){if(isFunction(factory)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{exports=context.execCb(id,factory,depExports,exports)}catch(e){err=e}else exports=context.execCb(id,factory,depExports,exports);if(this.map.isDefine){cjsModule=this.module;cjsModule&&void 0!==cjsModule.exports&&cjsModule.exports!==this.exports?exports=cjsModule.exports:void 0===exports&&this.usingExports&&(exports=this.exports)}if(err){err.requireMap=this.map;err.requireModules=this.map.isDefine?[this.map.id]:null;err.requireType=this.map.isDefine?"define":"require";return onError(this.error=err)}}else exports=factory;this.exports=exports;if(this.map.isDefine&&!this.ignore){defined[id]=exports;req.onResourceLoad&&req.onResourceLoad(context,this.map,this.depMaps)}cleanRegistry(id);this.defined=!0}this.defining=!1;if(this.defined&&!this.defineEmitted){this.defineEmitted=!0;this.emit("defined",this.exports);this.defineEmitComplete=!0}}}else this.fetch()}},callPlugin:function(){var map=this.map,id=map.id,pluginMap=makeModuleMap(map.prefix);this.depMaps.push(pluginMap);on(pluginMap,"defined",bind(this,function(plugin){var load,normalizedMap,normalizedMod,name=this.map.name,parentName=this.map.parentMap?this.map.parentMap.name:null,localRequire=context.makeRequire(map.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized){plugin.normalize&&(name=plugin.normalize(name,function(name){return normalize(name,parentName,!0)})||"");normalizedMap=makeModuleMap(map.prefix+"!"+name,this.map.parentMap);on(normalizedMap,"defined",bind(this,function(value){this.init([],function(){return value},null,{enabled:!0,ignore:!0})}));normalizedMod=getOwn(registry,normalizedMap.id);if(normalizedMod){this.depMaps.push(normalizedMap);this.events.error&&normalizedMod.on("error",bind(this,function(err){this.emit("error",err)}));normalizedMod.enable()}}else{load=bind(this,function(value){this.init([],function(){return value},null,{enabled:!0})});load.error=bind(this,function(err){this.inited=!0;err=err||{};this.error=err;err.requireModules=[id];eachProp(registry,function(mod){0===mod.map.id.indexOf(id+"_unnormalized")&&cleanRegistry(mod.map.id)});onError(err)});load.fromText=bind(this,function(text,textAlt){var moduleName=map.name,moduleMap=makeModuleMap(moduleName),hasInteractive=useInteractive;textAlt&&(text=textAlt);hasInteractive&&(useInteractive=!1);getModule(moduleMap);hasProp(config.config,id)&&(config.config[moduleName]=config.config[id]);try{req.exec(text)}catch(e){return onError(makeError("fromtexteval","fromText eval for "+id+" failed: "+e,e,[id]))}hasInteractive&&(useInteractive=!0);this.depMaps.push(moduleMap);context.completeLoad(moduleName);localRequire([moduleName],load)});plugin.load(map.name,localRequire,load,config)}}));context.enable(pluginMap,this);this.pluginMaps[pluginMap.id]=pluginMap},enable:function(){enabledRegistry[this.map.id]=this;this.enabled=!0;this.enabling=!0;each(this.depMaps,bind(this,function(depMap,i){var id,mod,handler;if("string"==typeof depMap){depMap=makeModuleMap(depMap,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap);this.depMaps[i]=depMap;handler=getOwn(handlers,depMap.id);if(handler){this.depExports[i]=handler(this);return}this.depCount+=1;on(depMap,"defined",bind(this,function(depExports){this.defineDep(i,depExports);this.check()}));this.errback&&on(depMap,"error",bind(this,this.errback))}id=depMap.id;mod=registry[id];hasProp(handlers,id)||!mod||mod.enabled||context.enable(depMap,this)}));eachProp(this.pluginMaps,bind(this,function(pluginMap){var mod=getOwn(registry,pluginMap.id);mod&&!mod.enabled&&context.enable(pluginMap,this)}));this.enabling=!1;this.check()},on:function(name,cb){var cbs=this.events[name];cbs||(cbs=this.events[name]=[]);cbs.push(cb)},emit:function(name,evt){each(this.events[name],function(cb){cb(evt)});"error"===name&&delete this.events[name]}};context={config:config,contextName:contextName,registry:registry,defined:defined,urlFetched:urlFetched,defQueue:defQueue,Module:Module,makeModuleMap:makeModuleMap,nextTick:req.nextTick,onError:onError,configure:function(cfg){cfg.baseUrl&&"/"!==cfg.baseUrl.charAt(cfg.baseUrl.length-1)&&(cfg.baseUrl+="/");var pkgs=config.pkgs,shim=config.shim,objs={paths:!0,config:!0,map:!0};eachProp(cfg,function(value,prop){if(objs[prop])if("map"===prop){config.map||(config.map={});mixin(config[prop],value,!0,!0)}else mixin(config[prop],value,!0);else config[prop]=value});if(cfg.shim){eachProp(cfg.shim,function(value,id){isArray(value)&&(value={deps:value});!value.exports&&!value.init||value.exportsFn||(value.exportsFn=context.makeShimExports(value));shim[id]=value});config.shim=shim}if(cfg.packages){each(cfg.packages,function(pkgObj){var location;pkgObj="string"==typeof pkgObj?{name:pkgObj}:pkgObj;location=pkgObj.location;pkgs[pkgObj.name]={name:pkgObj.name,location:location||pkgObj.name,main:(pkgObj.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}});config.pkgs=pkgs}eachProp(registry,function(mod,id){mod.inited||mod.map.unnormalized||(mod.map=makeModuleMap(id))});(cfg.deps||cfg.callback)&&context.require(cfg.deps||[],cfg.callback)},makeShimExports:function(value){function fn(){var ret;value.init&&(ret=value.init.apply(global,arguments));return ret||value.exports&&getGlobal(value.exports)}return fn},makeRequire:function(relMap,options){function localRequire(deps,callback,errback){var id,map,requireMod;options.enableBuildCallback&&callback&&isFunction(callback)&&(callback.__requireJsBuild=!0);if("string"==typeof deps){if(isFunction(callback))return onError(makeError("requireargs","Invalid require call"),errback);if(relMap&&hasProp(handlers,deps))return handlers[deps](registry[relMap.id]);if(req.get)return req.get(context,deps,relMap,localRequire);map=makeModuleMap(deps,relMap,!1,!0);id=map.id;return hasProp(defined,id)?defined[id]:onError(makeError("notloaded",'Module name "'+id+'" has not been loaded yet for context: '+contextName+(relMap?"":". Use require([])")))}intakeDefines();context.nextTick(function(){intakeDefines();requireMod=getModule(makeModuleMap(null,relMap));requireMod.skipMap=options.skipMap;requireMod.init(deps,callback,errback,{enabled:!0});checkLoaded()});return localRequire}options=options||{};mixin(localRequire,{isBrowser:isBrowser,toUrl:function(moduleNamePlusExt){var ext,index=moduleNamePlusExt.lastIndexOf("."),segment=moduleNamePlusExt.split("/")[0],isRelative="."===segment||".."===segment;if(-1!==index&&(!isRelative||index>1)){ext=moduleNamePlusExt.substring(index,moduleNamePlusExt.length);moduleNamePlusExt=moduleNamePlusExt.substring(0,index)}return context.nameToUrl(normalize(moduleNamePlusExt,relMap&&relMap.id,!0),ext,!0)},defined:function(id){return hasProp(defined,makeModuleMap(id,relMap,!1,!0).id)},specified:function(id){id=makeModuleMap(id,relMap,!1,!0).id;return hasProp(defined,id)||hasProp(registry,id)}});relMap||(localRequire.undef=function(id){takeGlobalQueue();var map=makeModuleMap(id,relMap,!0),mod=getOwn(registry,id);delete defined[id];delete urlFetched[map.url];delete undefEvents[id];if(mod){mod.events.defined&&(undefEvents[id]=mod.events);cleanRegistry(id)}});return localRequire},enable:function(depMap){var mod=getOwn(registry,depMap.id);mod&&getModule(depMap).enable()},completeLoad:function(moduleName){var found,args,mod,shim=getOwn(config.shim,moduleName)||{},shExports=shim.exports;takeGlobalQueue();for(;defQueue.length;){args=defQueue.shift();if(null===args[0]){args[0]=moduleName;if(found)break;found=!0}else args[0]===moduleName&&(found=!0);callGetModule(args)}mod=getOwn(registry,moduleName);if(!found&&!hasProp(defined,moduleName)&&mod&&!mod.inited){if(!(!config.enforceDefine||shExports&&getGlobal(shExports)))return hasPathFallback(moduleName)?void 0:onError(makeError("nodefine","No define call for "+moduleName,null,[moduleName]));callGetModule([moduleName,shim.deps||[],shim.exportsFn])}checkLoaded()},nameToUrl:function(moduleName,ext,skipExt){var paths,pkgs,pkg,pkgPath,syms,i,parentModule,url,parentPath;if(req.jsExtRegExp.test(moduleName))url=moduleName+(ext||"");else{paths=config.paths;pkgs=config.pkgs;syms=moduleName.split("/");for(i=syms.length;i>0;i-=1){parentModule=syms.slice(0,i).join("/");pkg=getOwn(pkgs,parentModule);parentPath=getOwn(paths,parentModule);if(parentPath){isArray(parentPath)&&(parentPath=parentPath[0]);syms.splice(0,i,parentPath);break}if(pkg){pkgPath=moduleName===pkg.name?pkg.location+"/"+pkg.main:pkg.location;syms.splice(0,i,pkgPath);break}}url=syms.join("/");url+=ext||(/\?/.test(url)||skipExt?"":".js");url=("/"===url.charAt(0)||url.match(/^[\w\+\.\-]+:/)?"":config.baseUrl)+url}return config.urlArgs?url+((-1===url.indexOf("?")?"?":"&")+config.urlArgs):url},load:function(id,url){req.load(context,id,url)},execCb:function(name,callback,args,exports){return callback.apply(exports,args)},onScriptLoad:function(evt){if("load"===evt.type||readyRegExp.test((evt.currentTarget||evt.srcElement).readyState)){interactiveScript=null;var data=getScriptData(evt);context.completeLoad(data.id)}},onScriptError:function(evt){var data=getScriptData(evt);return hasPathFallback(data.id)?void 0:onError(makeError("scripterror","Script error for: "+data.id,evt,[data.id]))}};context.require=context.makeRequire();return context}function getInteractiveScript(){if(interactiveScript&&"interactive"===interactiveScript.readyState)return interactiveScript;eachReverse(scripts(),function(script){return"interactive"===script.readyState?interactiveScript=script:void 0});return interactiveScript}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.8",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=!("undefined"==typeof window||!navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs;requirejs=void 0}if("undefined"!=typeof require&&!isFunction(require)){cfg=require;require=void 0}req=requirejs=function(deps,callback,errback,optional){var context,config,contextName=defContextName;if(!isArray(deps)&&"string"!=typeof deps){config=deps;if(isArray(callback)){deps=callback;callback=errback;errback=optional}else deps=[]}config&&config.context&&(contextName=config.context);context=getOwn(contexts,contextName);context||(context=contexts[contextName]=req.s.newContext(contextName));config&&context.configure(config);return context.require(deps,callback,errback)};req.config=function(config){return req(config)};req.nextTick="undefined"!=typeof setTimeout?function(fn){setTimeout(fn,4)}:function(fn){fn()};require||(require=req);req.version=version;req.jsExtRegExp=/^\/|:|\?|\.js$/;req.isBrowser=isBrowser;s=req.s={contexts:contexts,newContext:newContext};req({});each(["toUrl","undef","defined","specified"],function(prop){req[prop]=function(){var ctx=contexts[defContextName];return ctx.require[prop].apply(ctx,arguments)}});if(isBrowser){head=s.head=document.getElementsByTagName("head")[0];baseElement=document.getElementsByTagName("base")[0];baseElement&&(head=s.head=baseElement.parentNode)}req.onError=defaultOnError;req.createNode=function(config,moduleName,url){var node=config.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");node.type=config.scriptType||"text/javascript";node.charset="utf-8";node.async=!0;return node};req.load=function(context,moduleName,url){var node,config=context&&context.config||{};if(isBrowser){node=req.createNode(config,moduleName,url);node.setAttribute("data-requirecontext",context.contextName);node.setAttribute("data-requiremodule",moduleName);if(!node.attachEvent||node.attachEvent.toString&&node.attachEvent.toString().indexOf("[native code")<0||isOpera){node.addEventListener("load",context.onScriptLoad,!1);node.addEventListener("error",context.onScriptError,!1)}else{useInteractive=!0;node.attachEvent("onreadystatechange",context.onScriptLoad)}node.src=url;currentlyAddingScript=node;baseElement?head.insertBefore(node,baseElement):head.appendChild(node);currentlyAddingScript=null;return node}if(isWebWorker)try{importScripts(url);context.completeLoad(moduleName)}catch(e){context.onError(makeError("importscripts","importScripts failed for "+moduleName+" at "+url,e,[moduleName]))}};isBrowser&&eachReverse(scripts(),function(script){head||(head=script.parentNode);dataMain=script.getAttribute("data-main");if(dataMain){mainScript=dataMain;if(!cfg.baseUrl){src=mainScript.split("/");mainScript=src.pop();subPath=src.length?src.join("/")+"/":"./";cfg.baseUrl=subPath}mainScript=mainScript.replace(jsSuffixRegExp,"");req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain);cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript];return!0}});define=function(name,deps,callback){var node,context;if("string"!=typeof name){callback=deps;deps=name;name=null}if(!isArray(deps)){callback=deps;deps=null}if(!deps&&isFunction(callback)){deps=[];if(callback.length){callback.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(match,dep){deps.push(dep)});deps=(1===callback.length?["require"]:["require","exports","module"]).concat(deps)}}if(useInteractive){node=currentlyAddingScript||getInteractiveScript();if(node){name||(name=node.getAttribute("data-requiremodule"));context=contexts[node.getAttribute("data-requirecontext")]}}(context?context.defQueue:globalDefQueue).push([name,deps,callback])};define.amd={jQuery:!0};req.exec=function(text){return eval(text)};req(cfg)}}(this);!function(window,undefined){function isArraylike(obj){var length=obj.length,type=jQuery.type(obj);return jQuery.isWindow(obj)?!1:1===obj.nodeType&&length?!0:"array"===type||"function"!==type&&(0===length||"number"==typeof length&&length>0&&length-1 in obj)}function createOptions(options){var object=optionsCache[options]={};jQuery.each(options.match(core_rnotwhite)||[],function(_,flag){object[flag]=!0});return object}function internalData(elem,name,data,pvt){if(jQuery.acceptData(elem)){var thisCache,ret,internalKey=jQuery.expando,getByName="string"==typeof name,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:elem[internalKey]&&internalKey;if(id&&cache[id]&&(pvt||cache[id].data)||!getByName||data!==undefined){id||(isNode?elem[internalKey]=id=core_deletedIds.pop()||jQuery.guid++:id=internalKey);if(!cache[id]){cache[id]={};isNode||(cache[id].toJSON=jQuery.noop)}("object"==typeof name||"function"==typeof name)&&(pvt?cache[id]=jQuery.extend(cache[id],name):cache[id].data=jQuery.extend(cache[id].data,name));thisCache=cache[id];if(!pvt){thisCache.data||(thisCache.data={});thisCache=thisCache.data}data!==undefined&&(thisCache[jQuery.camelCase(name)]=data);if(getByName){ret=thisCache[name];null==ret&&(ret=thisCache[jQuery.camelCase(name)])}else ret=thisCache;return ret}}}function internalRemoveData(elem,name,pvt){if(jQuery.acceptData(elem)){var i,l,thisCache,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[jQuery.expando]:jQuery.expando;if(cache[id]){if(name){thisCache=pvt?cache[id]:cache[id].data;if(thisCache){if(jQuery.isArray(name))name=name.concat(jQuery.map(name,jQuery.camelCase));else if(name in thisCache)name=[name];else{name=jQuery.camelCase(name);name=name in thisCache?[name]:name.split(" ")}for(i=0,l=name.length;l>i;i++)delete thisCache[name[i]];if(!(pvt?isEmptyDataObject:jQuery.isEmptyObject)(thisCache))return}}if(!pvt){delete cache[id].data;if(!isEmptyDataObject(cache[id]))return}isNode?jQuery.cleanData([elem],!0):jQuery.support.deleteExpando||cache!=cache.window?delete cache[id]:cache[id]=null}}}function dataAttr(elem,key,data){if(data===undefined&&1===elem.nodeType){var name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();data=elem.getAttribute(name);if("string"==typeof data){try{data="true"===data?!0:"false"===data?!1:"null"===data?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data}catch(e){}jQuery.data(elem,key,data)}else data=undefined}return data}function isEmptyDataObject(obj){var name;for(name in obj)if(("data"!==name||!jQuery.isEmptyObject(obj[name]))&&"toJSON"!==name)return!1;return!0}function returnTrue(){return!0}function returnFalse(){return!1}function sibling(cur,dir){do cur=cur[dir];while(cur&&1!==cur.nodeType);return cur}function winnow(elements,qualifier,keep){qualifier=qualifier||0;if(jQuery.isFunction(qualifier))return jQuery.grep(elements,function(elem,i){var retVal=!!qualifier.call(elem,i,elem);return retVal===keep});if(qualifier.nodeType)return jQuery.grep(elements,function(elem){return elem===qualifier===keep});if("string"==typeof qualifier){var filtered=jQuery.grep(elements,function(elem){return 1===elem.nodeType});if(isSimple.test(qualifier))return jQuery.filter(qualifier,filtered,!keep);qualifier=jQuery.filter(qualifier,filtered)}return jQuery.grep(elements,function(elem){return jQuery.inArray(elem,qualifier)>=0===keep})}function createSafeFragment(document){var list=nodeNames.split("|"),safeFrag=document.createDocumentFragment();if(safeFrag.createElement)for(;list.length;)safeFrag.createElement(list.pop());return safeFrag}function findOrAppend(elem,tag){return elem.getElementsByTagName(tag)[0]||elem.appendChild(elem.ownerDocument.createElement(tag))}function disableScript(elem){
var attr=elem.getAttributeNode("type");elem.type=(attr&&attr.specified)+"/"+elem.type;return elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);match?elem.type=match[1]:elem.removeAttribute("type");return elem}function setGlobalEval(elems,refElements){for(var elem,i=0;null!=(elem=elems[i]);i++)jQuery._data(elem,"globalEval",!refElements||jQuery._data(refElements[i],"globalEval"))}function cloneCopyEvent(src,dest){if(1===dest.nodeType&&jQuery.hasData(src)){var type,i,l,oldData=jQuery._data(src),curData=jQuery._data(dest,oldData),events=oldData.events;if(events){delete curData.handle;curData.events={};for(type in events)for(i=0,l=events[type].length;l>i;i++)jQuery.event.add(dest,type,events[type][i])}curData.data&&(curData.data=jQuery.extend({},curData.data))}}function fixCloneNodeIssues(src,dest){var nodeName,e,data;if(1===dest.nodeType){nodeName=dest.nodeName.toLowerCase();if(!jQuery.support.noCloneEvent&&dest[jQuery.expando]){data=jQuery._data(dest);for(e in data.events)jQuery.removeEvent(dest,e,data.handle);dest.removeAttribute(jQuery.expando)}if("script"===nodeName&&dest.text!==src.text){disableScript(dest).text=src.text;restoreScript(dest)}else if("object"===nodeName){dest.parentNode&&(dest.outerHTML=src.outerHTML);jQuery.support.html5Clone&&src.innerHTML&&!jQuery.trim(dest.innerHTML)&&(dest.innerHTML=src.innerHTML)}else if("input"===nodeName&&manipulation_rcheckableType.test(src.type)){dest.defaultChecked=dest.checked=src.checked;dest.value!==src.value&&(dest.value=src.value)}else"option"===nodeName?dest.defaultSelected=dest.selected=src.defaultSelected:("input"===nodeName||"textarea"===nodeName)&&(dest.defaultValue=src.defaultValue)}}function getAll(context,tag){var elems,elem,i=0,found=typeof context.getElementsByTagName!==core_strundefined?context.getElementsByTagName(tag||"*"):typeof context.querySelectorAll!==core_strundefined?context.querySelectorAll(tag||"*"):undefined;if(!found)for(found=[],elems=context.childNodes||context;null!=(elem=elems[i]);i++)!tag||jQuery.nodeName(elem,tag)?found.push(elem):jQuery.merge(found,getAll(elem,tag));return tag===undefined||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],found):found}function fixDefaultChecked(elem){manipulation_rcheckableType.test(elem.type)&&(elem.defaultChecked=elem.checked)}function vendorPropName(style,name){if(name in style)return name;for(var capName=name.charAt(0).toUpperCase()+name.slice(1),origName=name,i=cssPrefixes.length;i--;){name=cssPrefixes[i]+capName;if(name in style)return name}return origName}function isHidden(elem,el){elem=el||elem;return"none"===jQuery.css(elem,"display")||!jQuery.contains(elem.ownerDocument,elem)}function showHide(elements,show){for(var display,elem,hidden,values=[],index=0,length=elements.length;length>index;index++){elem=elements[index];if(elem.style){values[index]=jQuery._data(elem,"olddisplay");display=elem.style.display;if(show){values[index]||"none"!==display||(elem.style.display="");""===elem.style.display&&isHidden(elem)&&(values[index]=jQuery._data(elem,"olddisplay",css_defaultDisplay(elem.nodeName)))}else if(!values[index]){hidden=isHidden(elem);(display&&"none"!==display||!hidden)&&jQuery._data(elem,"olddisplay",hidden?display:jQuery.css(elem,"display"))}}}for(index=0;length>index;index++){elem=elements[index];elem.style&&(show&&"none"!==elem.style.display&&""!==elem.style.display||(elem.style.display=show?values[index]||"":"none"))}return elements}function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){for(var i=extra===(isBorderBox?"border":"content")?4:"width"===name?1:0,val=0;4>i;i+=2){"margin"===extra&&(val+=jQuery.css(elem,extra+cssExpand[i],!0,styles));if(isBorderBox){"content"===extra&&(val-=jQuery.css(elem,"padding"+cssExpand[i],!0,styles));"margin"!==extra&&(val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles))}else{val+=jQuery.css(elem,"padding"+cssExpand[i],!0,styles);"padding"!==extra&&(val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles))}}return val}function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=!0,val="width"===name?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),isBorderBox=jQuery.support.boxSizing&&"border-box"===jQuery.css(elem,"boxSizing",!1,styles);if(0>=val||null==val){val=curCSS(elem,name,styles);(0>val||null==val)&&(val=elem.style[name]);if(rnumnonpx.test(val))return val;valueIsBorderBox=isBorderBox&&(jQuery.support.boxSizingReliable||val===elem.style[name]);val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles)+"px"}function css_defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];if(!display){display=actualDisplay(nodeName,doc);if("none"===display||!display){iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(doc.documentElement);doc=(iframe[0].contentWindow||iframe[0].contentDocument).document;doc.write("<!doctype html><html><body>");doc.close();display=actualDisplay(nodeName,doc);iframe.detach()}elemdisplay[nodeName]=display}return display}function actualDisplay(name,doc){var elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=jQuery.css(elem[0],"display");elem.remove();return display}function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj))jQuery.each(obj,function(i,v){traditional||rbracket.test(prefix)?add(prefix,v):buildParams(prefix+"["+("object"==typeof v?i:"")+"]",v,traditional,add)});else if(traditional||"object"!==jQuery.type(obj))add(prefix,obj);else for(name in obj)buildParams(prefix+"["+name+"]",obj[name],traditional,add)}function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if("string"!=typeof dataTypeExpression){func=dataTypeExpression;dataTypeExpression="*"}var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(core_rnotwhite)||[];if(jQuery.isFunction(func))for(;dataType=dataTypes[i++];)if("+"===dataType[0]){dataType=dataType.slice(1)||"*";(structure[dataType]=structure[dataType]||[]).unshift(func)}else(structure[dataType]=structure[dataType]||[]).push(func)}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){function inspect(dataType){var selected;inspected[dataType]=!0;jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);if("string"==typeof dataTypeOrTransport&&!seekingTransport&&!inspected[dataTypeOrTransport]){options.dataTypes.unshift(dataTypeOrTransport);inspect(dataTypeOrTransport);return!1}return seekingTransport?!(selected=dataTypeOrTransport):void 0});return selected}var inspected={},seekingTransport=structure===transports;return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")}function ajaxExtend(target,src){var deep,key,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src)src[key]!==undefined&&((flatOptions[key]?target:deep||(deep={}))[key]=src[key]);deep&&jQuery.extend(!0,target,deep);return target}function ajaxHandleResponses(s,jqXHR,responses){var firstDataType,ct,finalDataType,type,contents=s.contents,dataTypes=s.dataTypes,responseFields=s.responseFields;for(type in responseFields)type in responses&&(jqXHR[responseFields[type]]=responses[type]);for(;"*"===dataTypes[0];){dataTypes.shift();ct===undefined&&(ct=s.mimeType||jqXHR.getResponseHeader("Content-Type"))}if(ct)for(type in contents)if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}if(dataTypes[0]in responses)finalDataType=dataTypes[0];else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}firstDataType||(firstDataType=type)}finalDataType=finalDataType||firstDataType}if(finalDataType){finalDataType!==dataTypes[0]&&dataTypes.unshift(finalDataType);return responses[finalDataType]}}function ajaxConvert(s,response){var conv2,current,conv,tmp,converters={},i=0,dataTypes=s.dataTypes.slice(),prev=dataTypes[0];s.dataFilter&&(response=s.dataFilter(response,s.dataType));if(dataTypes[1])for(conv in s.converters)converters[conv.toLowerCase()]=s.converters[conv];for(;current=dataTypes[++i];)if("*"!==current){if("*"!==prev&&prev!==current){conv=converters[prev+" "+current]||converters["* "+current];if(!conv)for(conv2 in converters){tmp=conv2.split(" ");if(tmp[1]===current){conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]];if(conv){if(conv===!0)conv=converters[conv2];else if(converters[conv2]!==!0){current=tmp[0];dataTypes.splice(i--,0,current)}break}}}if(conv!==!0)if(conv&&s["throws"])response=conv(response);else try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}prev=current}return{state:"success",data:response}}function createStandardXHR(){try{return new window.XMLHttpRequest}catch(e){}}function createActiveXHR(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function createFxNow(){setTimeout(function(){fxNow=undefined});return fxNow=jQuery.now()}function createTweens(animation,props){jQuery.each(props,function(prop,value){for(var collection=(tweeners[prop]||[]).concat(tweeners["*"]),index=0,length=collection.length;length>index;index++)if(collection[index].call(animation,prop,value))return})}function Animation(elem,properties,options){var result,stopped,index=0,length=animationPrefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function(){if(stopped)return!1;for(var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;length>index;index++)animation.tweens[index].run(percent);deferred.notifyWith(elem,[animation,percent,remaining]);if(1>percent&&length)return remaining;deferred.resolveWith(elem,[animation]);return!1},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(!0,{specialEasing:{}},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);animation.tweens.push(tween);return tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped)return this;stopped=!0;for(;length>index;index++)animation.tweens[index].run(1);gotoEnd?deferred.resolveWith(elem,[animation,gotoEnd]):deferred.rejectWith(elem,[animation,gotoEnd]);return this}}),props=animation.props;propFilter(props,animation.opts.specialEasing);for(;length>index;index++){result=animationPrefilters[index].call(animation,elem,props,animation.opts);if(result)return result}createTweens(animation,props);jQuery.isFunction(animation.opts.start)&&animation.opts.start.call(elem,animation);jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue}));return animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}function propFilter(props,specialEasing){var value,name,index,easing,hooks;for(index in props){name=jQuery.camelCase(index);easing=specialEasing[name];value=props[index];if(jQuery.isArray(value)){easing=value[1];value=props[index]=value[0]}if(index!==name){props[name]=value;delete props[index]}hooks=jQuery.cssHooks[name];if(hooks&&"expand"in hooks){value=hooks.expand(value);delete props[name];for(index in value)if(!(index in props)){props[index]=value[index];specialEasing[index]=easing}}else specialEasing[name]=easing}}function defaultPrefilter(elem,props,opts){var prop,index,length,value,dataShow,toggle,tween,hooks,oldfire,anim=this,style=elem.style,orig={},handled=[],hidden=elem.nodeType&&isHidden(elem);if(!opts.queue){hooks=jQuery._queueHooks(elem,"fx");if(null==hooks.unqueued){hooks.unqueued=0;oldfire=hooks.empty.fire;hooks.empty.fire=function(){hooks.unqueued||oldfire()}}hooks.unqueued++;anim.always(function(){anim.always(function(){hooks.unqueued--;jQuery.queue(elem,"fx").length||hooks.empty.fire()})})}if(1===elem.nodeType&&("height"in props||"width"in props)){opts.overflow=[style.overflow,style.overflowX,style.overflowY];"inline"===jQuery.css(elem,"display")&&"none"===jQuery.css(elem,"float")&&(jQuery.support.inlineBlockNeedsLayout&&"inline"!==css_defaultDisplay(elem.nodeName)?style.zoom=1:style.display="inline-block")}if(opts.overflow){style.overflow="hidden";jQuery.support.shrinkWrapBlocks||anim.always(function(){style.overflow=opts.overflow[0];style.overflowX=opts.overflow[1];style.overflowY=opts.overflow[2]})}for(index in props){value=props[index];if(rfxtypes.exec(value)){delete props[index];toggle=toggle||"toggle"===value;if(value===(hidden?"hide":"show"))continue;handled.push(index)}}length=handled.length;if(length){dataShow=jQuery._data(elem,"fxshow")||jQuery._data(elem,"fxshow",{});"hidden"in dataShow&&(hidden=dataShow.hidden);toggle&&(dataShow.hidden=!hidden);hidden?jQuery(elem).show():anim.done(function(){jQuery(elem).hide()});anim.done(function(){var prop;jQuery._removeData(elem,"fxshow");for(prop in orig)jQuery.style(elem,prop,orig[prop])});for(index=0;length>index;index++){prop=handled[index];tween=anim.createTween(prop,hidden?dataShow[prop]:0);orig[prop]=dataShow[prop]||jQuery.style(elem,prop);if(!(prop in dataShow)){dataShow[prop]=tween.start;if(hidden){tween.end=tween.start;tween.start="width"===prop||"height"===prop?1:0}}}}}function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}function genFx(type,includeWidth){var which,attrs={height:type},i=0;includeWidth=includeWidth?1:0;for(;4>i;i+=2-includeWidth){which=cssExpand[i];attrs["margin"+which]=attrs["padding"+which]=type}includeWidth&&(attrs.opacity=attrs.width=type);return attrs}function getWindow(elem){return jQuery.isWindow(elem)?elem:9===elem.nodeType?elem.defaultView||elem.parentWindow:!1}var readyList,rootjQuery,core_strundefined=typeof undefined,document=window.document,location=window.location,_jQuery=window.jQuery,_$=window.$,class2type={},core_deletedIds=[],core_version="1.9.1",core_concat=core_deletedIds.concat,core_push=core_deletedIds.push,core_slice=core_deletedIds.slice,core_indexOf=core_deletedIds.indexOf,core_toString=class2type.toString,core_hasOwn=class2type.hasOwnProperty,core_trim=core_version.trim,jQuery=function(selector,context){return new jQuery.fn.init(selector,context,rootjQuery)},core_pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,core_rnotwhite=/\S+/g,rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rquickExpr=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,rvalidchars=/^[\],:{}\s]*$/,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rvalidescape=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,rvalidtokens=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return letter.toUpperCase()},completed=function(event){if(document.addEventListener||"load"===event.type||"complete"===document.readyState){detach();jQuery.ready()}},detach=function(){if(document.addEventListener){document.removeEventListener("DOMContentLoaded",completed,!1);window.removeEventListener("load",completed,!1)}else{document.detachEvent("onreadystatechange",completed);window.detachEvent("onload",completed)}};jQuery.fn=jQuery.prototype={jquery:core_version,constructor:jQuery,init:function(selector,context,rootjQuery){var match,elem;if(!selector)return this;if("string"==typeof selector){match="<"===selector.charAt(0)&&">"===selector.charAt(selector.length-1)&&selector.length>=3?[null,selector,null]:rquickExpr.exec(selector);if(!match||!match[1]&&context)return!context||context.jquery?(context||rootjQuery).find(selector):this.constructor(context).find(selector);if(match[1]){context=context instanceof jQuery?context[0]:context;jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,!0));if(rsingleTag.test(match[1])&&jQuery.isPlainObject(context))for(match in context)jQuery.isFunction(this[match])?this[match](context[match]):this.attr(match,context[match]);return this}elem=document.getElementById(match[2]);if(elem&&elem.parentNode){if(elem.id!==match[2])return rootjQuery.find(selector);this.length=1;this[0]=elem}this.context=document;this.selector=selector;return this}if(selector.nodeType){this.context=this[0]=selector;this.length=1;return this}if(jQuery.isFunction(selector))return rootjQuery.ready(selector);if(selector.selector!==undefined){this.selector=selector.selector;this.context=selector.context}return jQuery.makeArray(selector,this)},selector:"",length:0,size:function(){return this.length},toArray:function(){return core_slice.call(this)},get:function(num){return null==num?this.toArray():0>num?this[this.length+num]:this[num]},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);ret.prevObject=this;ret.context=this.context;return ret},each:function(callback,args){return jQuery.each(this,callback,args)},ready:function(fn){jQuery.ready.promise().done(fn);return this},slice:function(){return this.pushStack(core_slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var len=this.length,j=+i+(0>i?len:0);return this.pushStack(j>=0&&len>j?[this[j]]:[])},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},end:function(){return this.prevObject||this.constructor(null)},push:core_push,sort:[].sort,splice:[].splice};jQuery.fn.init.prototype=jQuery.fn;jQuery.extend=jQuery.fn.extend=function(){var src,copyIsArray,copy,name,options,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=!1;if("boolean"==typeof target){deep=target;target=arguments[1]||{};i=2}"object"==typeof target||jQuery.isFunction(target)||(target={});if(length===i){target=this;--i}for(;length>i;i++)if(null!=(options=arguments[i]))for(name in options){src=target[name];copy=options[name];if(target!==copy)if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))){if(copyIsArray){copyIsArray=!1;clone=src&&jQuery.isArray(src)?src:[]}else clone=src&&jQuery.isPlainObject(src)?src:{};target[name]=jQuery.extend(deep,clone,copy)}else copy!==undefined&&(target[name]=copy)}return target};jQuery.extend({noConflict:function(deep){window.$===jQuery&&(window.$=_$);deep&&window.jQuery===jQuery&&(window.jQuery=_jQuery);return jQuery},isReady:!1,readyWait:1,holdReady:function(hold){hold?jQuery.readyWait++:jQuery.ready(!0)},ready:function(wait){if(wait===!0?!--jQuery.readyWait:!jQuery.isReady){if(!document.body)return setTimeout(jQuery.ready);jQuery.isReady=!0;if(!(wait!==!0&&--jQuery.readyWait>0)){readyList.resolveWith(document,[jQuery]);jQuery.fn.trigger&&jQuery(document).trigger("ready").off("ready")}}},isFunction:function(obj){return"function"===jQuery.type(obj)},isArray:Array.isArray||function(obj){return"array"===jQuery.type(obj)},isWindow:function(obj){return null!=obj&&obj==obj.window},isNumeric:function(obj){return!isNaN(parseFloat(obj))&&isFinite(obj)},type:function(obj){return null==obj?String(obj):"object"==typeof obj||"function"==typeof obj?class2type[core_toString.call(obj)]||"object":typeof obj},isPlainObject:function(obj){if(!obj||"object"!==jQuery.type(obj)||obj.nodeType||jQuery.isWindow(obj))return!1;try{if(obj.constructor&&!core_hasOwn.call(obj,"constructor")&&!core_hasOwn.call(obj.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var key;for(key in obj);return key===undefined||core_hasOwn.call(obj,key)},isEmptyObject:function(obj){var name;for(name in obj)return!1;return!0},error:function(msg){throw new Error(msg)},parseHTML:function(data,context,keepScripts){if(!data||"string"!=typeof data)return null;if("boolean"==typeof context){keepScripts=context;context=!1}context=context||document;var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];if(parsed)return[context.createElement(parsed[1])];parsed=jQuery.buildFragment([data],context,scripts);scripts&&jQuery(scripts).remove();return jQuery.merge([],parsed.childNodes)},parseJSON:function(data){if(window.JSON&&window.JSON.parse)return window.JSON.parse(data);if(null===data)return data;if("string"==typeof data){data=jQuery.trim(data);if(data&&rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,"")))return new Function("return "+data)()}jQuery.error("Invalid JSON: "+data)},parseXML:function(data){var xml,tmp;if(!data||"string"!=typeof data)return null;try{if(window.DOMParser){tmp=new DOMParser;xml=tmp.parseFromString(data,"text/xml")}else{xml=new ActiveXObject("Microsoft.XMLDOM");xml.async="false";xml.loadXML(data)}}catch(e){xml=undefined}xml&&xml.documentElement&&!xml.getElementsByTagName("parsererror").length||jQuery.error("Invalid XML: "+data);return xml},noop:function(){},globalEval:function(data){data&&jQuery.trim(data)&&(window.execScript||function(data){window.eval.call(window,data)})(data)},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function(obj,callback,args){var value,i=0,length=obj.length,isArray=isArraylike(obj);if(args)if(isArray)for(;length>i;i++){value=callback.apply(obj[i],args);if(value===!1)break}else for(i in obj){value=callback.apply(obj[i],args);if(value===!1)break}else if(isArray)for(;length>i;i++){value=callback.call(obj[i],i,obj[i]);if(value===!1)break}else for(i in obj){value=callback.call(obj[i],i,obj[i]);if(value===!1)break}return obj},trim:core_trim&&!core_trim.call("\ufeff")?function(text){return null==text?"":core_trim.call(text)}:function(text){return null==text?"":(text+"").replace(rtrim,"")},makeArray:function(arr,results){var ret=results||[];null!=arr&&(isArraylike(Object(arr))?jQuery.merge(ret,"string"==typeof arr?[arr]:arr):core_push.call(ret,arr));return ret},inArray:function(elem,arr,i){var len;if(arr){if(core_indexOf)return core_indexOf.call(arr,elem,i);len=arr.length;i=i?0>i?Math.max(0,len+i):i:0;for(;len>i;i++)if(i in arr&&arr[i]===elem)return i}return-1},merge:function(first,second){var l=second.length,i=first.length,j=0;if("number"==typeof l)for(;l>j;j++)first[i++]=second[j];else for(;second[j]!==undefined;)first[i++]=second[j++];first.length=i;return first},grep:function(elems,callback,inv){var retVal,ret=[],i=0,length=elems.length;inv=!!inv;for(;length>i;i++){retVal=!!callback(elems[i],i);inv!==retVal&&ret.push(elems[i])}return ret},map:function(elems,callback,arg){var value,i=0,length=elems.length,isArray=isArraylike(elems),ret=[];if(isArray)for(;length>i;i++){value=callback(elems[i],i,arg);null!=value&&(ret[ret.length]=value)}else for(i in elems){value=callback(elems[i],i,arg);null!=value&&(ret[ret.length]=value)}return core_concat.apply([],ret)},guid:1,proxy:function(fn,context){var args,proxy,tmp;if("string"==typeof context){tmp=fn[context];context=fn;fn=tmp}if(!jQuery.isFunction(fn))return undefined;args=core_slice.call(arguments,2);proxy=function(){return fn.apply(context||this,args.concat(core_slice.call(arguments)))};proxy.guid=fn.guid=fn.guid||jQuery.guid++;return proxy},access:function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,length=elems.length,bulk=null==key;if("object"===jQuery.type(key)){chainable=!0;for(i in key)jQuery.access(elems,fn,i,key[i],!0,emptyGet,raw)}else if(value!==undefined){chainable=!0;jQuery.isFunction(value)||(raw=!0);if(bulk)if(raw){fn.call(elems,value);fn=null}else{bulk=fn;fn=function(elem,key,value){return bulk.call(jQuery(elem),value)}}if(fn)for(;length>i;i++)fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)))}return chainable?elems:bulk?fn.call(elems):length?fn(elems[0],key):emptyGet},now:function(){return(new Date).getTime()}});jQuery.ready.promise=function(obj){if(!readyList){readyList=jQuery.Deferred();if("complete"===document.readyState)setTimeout(jQuery.ready);else if(document.addEventListener){document.addEventListener("DOMContentLoaded",completed,!1);window.addEventListener("load",completed,!1)}else{document.attachEvent("onreadystatechange",completed);window.attachEvent("onload",completed);var top=!1;try{top=null==window.frameElement&&document.documentElement}catch(e){}top&&top.doScroll&&!function doScrollCheck(){if(!jQuery.isReady){try{top.doScroll("left")}catch(e){return setTimeout(doScrollCheck,50)}detach();jQuery.ready()}}()}}return readyList.promise(obj)};jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()});rootjQuery=jQuery(document);var optionsCache={};jQuery.Callbacks=function(options){options="string"==typeof options?optionsCache[options]||createOptions(options):jQuery.extend({},options);var firing,memory,fired,firingLength,firingIndex,firingStart,list=[],stack=!options.once&&[],fire=function(data){memory=options.memory&&data;fired=!0;firingIndex=firingStart||0;firingStart=0;firingLength=list.length;firing=!0;for(;list&&firingLength>firingIndex;firingIndex++)if(list[firingIndex].apply(data[0],data[1])===!1&&options.stopOnFalse){memory=!1;break}firing=!1;list&&(stack?stack.length&&fire(stack.shift()):memory?list=[]:self.disable())},self={add:function(){if(list){var start=list.length;!function add(args){jQuery.each(args,function(_,arg){var type=jQuery.type(arg);"function"===type?options.unique&&self.has(arg)||list.push(arg):arg&&arg.length&&"string"!==type&&add(arg)})}(arguments);if(firing)firingLength=list.length;else if(memory){firingStart=start;fire(memory)}}return this},remove:function(){list&&jQuery.each(arguments,function(_,arg){for(var index;(index=jQuery.inArray(arg,list,index))>-1;){list.splice(index,1);if(firing){firingLength>=index&&firingLength--;firingIndex>=index&&firingIndex--}}});return this},has:function(fn){return fn?jQuery.inArray(fn,list)>-1:!(!list||!list.length)},empty:function(){list=[];return this},disable:function(){list=stack=memory=undefined;return this},disabled:function(){return!list},lock:function(){stack=undefined;memory||self.disable();return this},locked:function(){return!stack},fireWith:function(context,args){args=args||[];args=[context,args.slice?args.slice():args];!list||fired&&!stack||(firing?stack.push(args):fire(args));return this},fire:function(){self.fireWith(this,arguments);return this},fired:function(){return!!fired}};return self};jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state="pending",promise={state:function(){return state},always:function(){deferred.done(arguments).fail(arguments);return this},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var action=tuple[0],fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);returned&&jQuery.isFunction(returned.promise)?returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify):newDefer[action+"With"](this===promise?newDefer.promise():this,fn?[returned]:arguments)})});fns=null}).promise()},promise:function(obj){return null!=obj?jQuery.extend(obj,promise):promise}},deferred={};promise.pipe=promise.then;jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add;stateString&&list.add(function(){state=stateString},tuples[1^i][2].disable,tuples[2][2].lock);deferred[tuple[0]]=function(){deferred[tuple[0]+"With"](this===deferred?promise:this,arguments);return this};deferred[tuple[0]+"With"]=list.fireWith});promise.promise(deferred);func&&func.call(deferred,deferred);return deferred},when:function(subordinate){var progressValues,progressContexts,resolveContexts,i=0,resolveValues=core_slice.call(arguments),length=resolveValues.length,remaining=1!==length||subordinate&&jQuery.isFunction(subordinate.promise)?length:0,deferred=1===remaining?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this;values[i]=arguments.length>1?core_slice.call(arguments):value;values===progressValues?deferred.notifyWith(contexts,values):--remaining||deferred.resolveWith(contexts,values)}};if(length>1){progressValues=new Array(length);progressContexts=new Array(length);resolveContexts=new Array(length);for(;length>i;i++)resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)?resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,progressValues)):--remaining}remaining||deferred.resolveWith(resolveContexts,resolveValues);return deferred.promise()}});jQuery.support=function(){var support,all,a,input,select,fragment,opt,eventName,isSupported,i,div=document.createElement("div");div.setAttribute("className","t");div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";all=div.getElementsByTagName("*");a=div.getElementsByTagName("a")[0];if(!all||!a||!all.length)return{};select=document.createElement("select");opt=select.appendChild(document.createElement("option"));input=div.getElementsByTagName("input")[0];a.style.cssText="top:1px;float:left;opacity:.5";support={getSetAttribute:"t"!==div.className,leadingWhitespace:3===div.firstChild.nodeType,tbody:!div.getElementsByTagName("tbody").length,htmlSerialize:!!div.getElementsByTagName("link").length,style:/top/.test(a.getAttribute("style")),hrefNormalized:"/a"===a.getAttribute("href"),opacity:/^0.5/.test(a.style.opacity),cssFloat:!!a.style.cssFloat,checkOn:!!input.value,optSelected:opt.selected,enctype:!!document.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==document.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===document.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1};input.checked=!0;support.noCloneChecked=input.cloneNode(!0).checked;select.disabled=!0;support.optDisabled=!opt.disabled;try{delete div.test}catch(e){support.deleteExpando=!1}input=document.createElement("input");input.setAttribute("value","");support.input=""===input.getAttribute("value");input.value="t";input.setAttribute("type","radio");support.radioValue="t"===input.value;input.setAttribute("checked","t");input.setAttribute("name","t");fragment=document.createDocumentFragment();fragment.appendChild(input);support.appendChecked=input.checked;support.checkClone=fragment.cloneNode(!0).cloneNode(!0).lastChild.checked;if(div.attachEvent){div.attachEvent("onclick",function(){support.noCloneEvent=!1});div.cloneNode(!0).click()}for(i in{submit:!0,change:!0,focusin:!0}){div.setAttribute(eventName="on"+i,"t");support[i+"Bubbles"]=eventName in window||div.attributes[eventName].expando===!1}div.style.backgroundClip="content-box";div.cloneNode(!0).style.backgroundClip="";support.clearCloneStyle="content-box"===div.style.backgroundClip;jQuery(function(){var container,marginDiv,tds,divReset="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",body=document.getElementsByTagName("body")[0];if(body){container=document.createElement("div");container.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px";body.appendChild(container).appendChild(div);div.innerHTML="<table><tr><td></td><td>t</td></tr></table>";tds=div.getElementsByTagName("td");tds[0].style.cssText="padding:0;margin:0;border:0;display:none";
isSupported=0===tds[0].offsetHeight;tds[0].style.display="";tds[1].style.display="none";support.reliableHiddenOffsets=isSupported&&0===tds[0].offsetHeight;div.innerHTML="";div.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;";support.boxSizing=4===div.offsetWidth;support.doesNotIncludeMarginInBodyOffset=1!==body.offsetTop;if(window.getComputedStyle){support.pixelPosition="1%"!==(window.getComputedStyle(div,null)||{}).top;support.boxSizingReliable="4px"===(window.getComputedStyle(div,null)||{width:"4px"}).width;marginDiv=div.appendChild(document.createElement("div"));marginDiv.style.cssText=div.style.cssText=divReset;marginDiv.style.marginRight=marginDiv.style.width="0";div.style.width="1px";support.reliableMarginRight=!parseFloat((window.getComputedStyle(marginDiv,null)||{}).marginRight)}if(typeof div.style.zoom!==core_strundefined){div.innerHTML="";div.style.cssText=divReset+"width:1px;padding:1px;display:inline;zoom:1";support.inlineBlockNeedsLayout=3===div.offsetWidth;div.style.display="block";div.innerHTML="<div></div>";div.firstChild.style.width="5px";support.shrinkWrapBlocks=3!==div.offsetWidth;support.inlineBlockNeedsLayout&&(body.style.zoom=1)}body.removeChild(container);container=div=tds=marginDiv=null}});all=select=fragment=opt=a=input=null;return support}();var rbrace=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,rmultiDash=/([A-Z])/g;jQuery.extend({cache:{},expando:"jQuery"+(core_version+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(elem){elem=elem.nodeType?jQuery.cache[elem[jQuery.expando]]:elem[jQuery.expando];return!!elem&&!isEmptyDataObject(elem)},data:function(elem,name,data){return internalData(elem,name,data)},removeData:function(elem,name){return internalRemoveData(elem,name)},_data:function(elem,name,data){return internalData(elem,name,data,!0)},_removeData:function(elem,name){return internalRemoveData(elem,name,!0)},acceptData:function(elem){if(elem.nodeType&&1!==elem.nodeType&&9!==elem.nodeType)return!1;var noData=elem.nodeName&&jQuery.noData[elem.nodeName.toLowerCase()];return!noData||noData!==!0&&elem.getAttribute("classid")===noData}});jQuery.fn.extend({data:function(key,value){var attrs,name,elem=this[0],i=0,data=null;if(key===undefined){if(this.length){data=jQuery.data(elem);if(1===elem.nodeType&&!jQuery._data(elem,"parsedAttrs")){attrs=elem.attributes;for(;i<attrs.length;i++){name=attrs[i].name;if(!name.indexOf("data-")){name=jQuery.camelCase(name.slice(5));dataAttr(elem,name,data[name])}}jQuery._data(elem,"parsedAttrs",!0)}}return data}return"object"==typeof key?this.each(function(){jQuery.data(this,key)}):jQuery.access(this,function(value){if(value===undefined)return elem?dataAttr(elem,key,jQuery.data(elem,key)):null;this.each(function(){jQuery.data(this,key,value)})},null,value,arguments.length>1,null,!0)},removeData:function(key){return this.each(function(){jQuery.removeData(this,key)})}});jQuery.extend({queue:function(elem,type,data){var queue;if(elem){type=(type||"fx")+"queue";queue=jQuery._data(elem,type);data&&(!queue||jQuery.isArray(data)?queue=jQuery._data(elem,type,jQuery.makeArray(data)):queue.push(data));return queue||[]}},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type)};if("inprogress"===fn){fn=queue.shift();startLength--}hooks.cur=fn;if(fn){"fx"===type&&queue.unshift("inprogress");delete hooks.stop;fn.call(elem,next,hooks)}!startLength&&hooks&&hooks.empty.fire()},_queueHooks:function(elem,type){var key=type+"queueHooks";return jQuery._data(elem,key)||jQuery._data(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){jQuery._removeData(elem,type+"queue");jQuery._removeData(elem,key)})})}});jQuery.fn.extend({queue:function(type,data){var setter=2;if("string"!=typeof type){data=type;type="fx";setter--}return arguments.length<setter?jQuery.queue(this[0],type):data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type);"fx"===type&&"inprogress"!==queue[0]&&jQuery.dequeue(this,type)})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},delay:function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){--count||defer.resolveWith(elements,[elements])};if("string"!=typeof type){obj=type;type=undefined}type=type||"fx";for(;i--;){tmp=jQuery._data(elements[i],type+"queueHooks");if(tmp&&tmp.empty){count++;tmp.empty.add(resolve)}}resolve();return defer.promise(obj)}});var nodeHook,boolHook,rclass=/[\t\r\n]/g,rreturn=/\r/g,rfocusable=/^(?:input|select|textarea|button|object)$/i,rclickable=/^(?:a|area)$/i,rboolean=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,ruseDefault=/^(?:checked|selected)$/i,getSetAttribute=jQuery.support.getSetAttribute,getSetInput=jQuery.support.input;jQuery.fn.extend({attr:function(name,value){return jQuery.access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})},prop:function(name,value){return jQuery.access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function(name){name=jQuery.propFix[name]||name;return this.each(function(){try{this[name]=undefined;delete this[name]}catch(e){}})},addClass:function(value){var classes,elem,cur,clazz,j,i=0,len=this.length,proceed="string"==typeof value&&value;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))});if(proceed){classes=(value||"").match(core_rnotwhite)||[];for(;len>i;i++){elem=this[i];cur=1===elem.nodeType&&(elem.className?(" "+elem.className+" ").replace(rclass," "):" ");if(cur){j=0;for(;clazz=classes[j++];)cur.indexOf(" "+clazz+" ")<0&&(cur+=clazz+" ");elem.className=jQuery.trim(cur)}}}return this},removeClass:function(value){var classes,elem,cur,clazz,j,i=0,len=this.length,proceed=0===arguments.length||"string"==typeof value&&value;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))});if(proceed){classes=(value||"").match(core_rnotwhite)||[];for(;len>i;i++){elem=this[i];cur=1===elem.nodeType&&(elem.className?(" "+elem.className+" ").replace(rclass," "):"");if(cur){j=0;for(;clazz=classes[j++];)for(;cur.indexOf(" "+clazz+" ")>=0;)cur=cur.replace(" "+clazz+" "," ");elem.className=value?jQuery.trim(cur):""}}}return this},toggleClass:function(value,stateVal){var type=typeof value,isBool="boolean"==typeof stateVal;return jQuery.isFunction(value)?this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)}):this.each(function(){if("string"===type)for(var className,i=0,self=jQuery(this),state=stateVal,classNames=value.match(core_rnotwhite)||[];className=classNames[i++];){state=isBool?state:!self.hasClass(className);self[state?"addClass":"removeClass"](className)}else if(type===core_strundefined||"boolean"===type){this.className&&jQuery._data(this,"__className__",this.className);this.className=this.className||value===!1?"":jQuery._data(this,"__className__")||""}})},hasClass:function(selector){for(var className=" "+selector+" ",i=0,l=this.length;l>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>=0)return!0;return!1},val:function(value){var ret,hooks,isFunction,elem=this[0];if(arguments.length){isFunction=jQuery.isFunction(value);return this.each(function(i){var val,self=jQuery(this);if(1===this.nodeType){val=isFunction?value.call(this,i,self.val()):value;null==val?val="":"number"==typeof val?val+="":jQuery.isArray(val)&&(val=jQuery.map(val,function(value){return null==value?"":value+""}));hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];hooks&&"set"in hooks&&hooks.set(this,val,"value")!==undefined||(this.value=val)}})}if(elem){hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()];if(hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined)return ret;ret=elem.value;return"string"==typeof ret?ret.replace(rreturn,""):null==ret?"":ret}}});jQuery.extend({valHooks:{option:{get:function(elem){var val=elem.attributes.value;return!val||val.specified?elem.value:elem.text}},select:{get:function(elem){for(var value,option,options=elem.options,index=elem.selectedIndex,one="select-one"===elem.type||0>index,values=one?null:[],max=one?index+1:options.length,i=0>index?max:one?index:0;max>i;i++){option=options[i];if((option.selected||i===index)&&(jQuery.support.optDisabled?!option.disabled:null===option.getAttribute("disabled"))&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){value=jQuery(option).val();if(one)return value;values.push(value)}}return values},set:function(elem,value){var values=jQuery.makeArray(value);jQuery(elem).find("option").each(function(){this.selected=jQuery.inArray(jQuery(this).val(),values)>=0});values.length||(elem.selectedIndex=-1);return values}}},attr:function(elem,name,value){var hooks,notxml,ret,nType=elem.nodeType;if(elem&&3!==nType&&8!==nType&&2!==nType){if(typeof elem.getAttribute===core_strundefined)return jQuery.prop(elem,name,value);notxml=1!==nType||!jQuery.isXMLDoc(elem);if(notxml){name=name.toLowerCase();hooks=jQuery.attrHooks[name]||(rboolean.test(name)?boolHook:nodeHook)}if(value===undefined){if(hooks&&notxml&&"get"in hooks&&null!==(ret=hooks.get(elem,name)))return ret;typeof elem.getAttribute!==core_strundefined&&(ret=elem.getAttribute(name));return null==ret?undefined:ret}if(null!==value){if(hooks&&notxml&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined)return ret;elem.setAttribute(name,value+"");return value}jQuery.removeAttr(elem,name)}},removeAttr:function(elem,value){var name,propName,i=0,attrNames=value&&value.match(core_rnotwhite);if(attrNames&&1===elem.nodeType)for(;name=attrNames[i++];){propName=jQuery.propFix[name]||name;rboolean.test(name)?!getSetAttribute&&ruseDefault.test(name)?elem[jQuery.camelCase("default-"+name)]=elem[propName]=!1:elem[propName]=!1:jQuery.attr(elem,name,"");elem.removeAttribute(getSetAttribute?name:propName)}},attrHooks:{type:{set:function(elem,value){if(!jQuery.support.radioValue&&"radio"===value&&jQuery.nodeName(elem,"input")){var val=elem.value;elem.setAttribute("type",value);val&&(elem.value=val);return value}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(elem&&3!==nType&&8!==nType&&2!==nType){notxml=1!==nType||!jQuery.isXMLDoc(elem);if(notxml){name=jQuery.propFix[name]||name;hooks=jQuery.propHooks[name]}return value!==undefined?hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined?ret:elem[name]=value:hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:elem[name]}},propHooks:{tabIndex:{get:function(elem){var attributeNode=elem.getAttributeNode("tabindex");return attributeNode&&attributeNode.specified?parseInt(attributeNode.value,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:undefined}}}});boolHook={get:function(elem,name){var prop=jQuery.prop(elem,name),attr="boolean"==typeof prop&&elem.getAttribute(name),detail="boolean"==typeof prop?getSetInput&&getSetAttribute?null!=attr:ruseDefault.test(name)?elem[jQuery.camelCase("default-"+name)]:!!attr:elem.getAttributeNode(name);return detail&&detail.value!==!1?name.toLowerCase():undefined},set:function(elem,value,name){value===!1?jQuery.removeAttr(elem,name):getSetInput&&getSetAttribute||!ruseDefault.test(name)?elem.setAttribute(!getSetAttribute&&jQuery.propFix[name]||name,name):elem[jQuery.camelCase("default-"+name)]=elem[name]=!0;return name}};getSetInput&&getSetAttribute||(jQuery.attrHooks.value={get:function(elem,name){var ret=elem.getAttributeNode(name);return jQuery.nodeName(elem,"input")?elem.defaultValue:ret&&ret.specified?ret.value:undefined},set:function(elem,value,name){if(!jQuery.nodeName(elem,"input"))return nodeHook&&nodeHook.set(elem,value,name);elem.defaultValue=value}});if(!getSetAttribute){nodeHook=jQuery.valHooks.button={get:function(elem,name){var ret=elem.getAttributeNode(name);return ret&&("id"===name||"name"===name||"coords"===name?""!==ret.value:ret.specified)?ret.value:undefined},set:function(elem,value,name){var ret=elem.getAttributeNode(name);ret||elem.setAttributeNode(ret=elem.ownerDocument.createAttribute(name));ret.value=value+="";return"value"===name||value===elem.getAttribute(name)?value:undefined}};jQuery.attrHooks.contenteditable={get:nodeHook.get,set:function(elem,value,name){nodeHook.set(elem,""===value?!1:value,name)}};jQuery.each(["width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{set:function(elem,value){if(""===value){elem.setAttribute(name,"auto");return value}}})})}if(!jQuery.support.hrefNormalized){jQuery.each(["href","src","width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{get:function(elem){var ret=elem.getAttribute(name,2);return null==ret?undefined:ret}})});jQuery.each(["href","src"],function(i,name){jQuery.propHooks[name]={get:function(elem){return elem.getAttribute(name,4)}}})}jQuery.support.style||(jQuery.attrHooks.style={get:function(elem){return elem.style.cssText||undefined},set:function(elem,value){return elem.style.cssText=value+""}});jQuery.support.optSelected||(jQuery.propHooks.selected=jQuery.extend(jQuery.propHooks.selected,{get:function(elem){var parent=elem.parentNode;if(parent){parent.selectedIndex;parent.parentNode&&parent.parentNode.selectedIndex}return null}}));jQuery.support.enctype||(jQuery.propFix.enctype="encoding");jQuery.support.checkOn||jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={get:function(elem){return null===elem.getAttribute("value")?"on":elem.value}}});jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]=jQuery.extend(jQuery.valHooks[this],{set:function(elem,value){return jQuery.isArray(value)?elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0:void 0}})});var rformElems=/^(?:input|select|textarea)$/i,rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;jQuery.event={global:{},add:function(elem,types,handler,data,selector){var tmp,events,t,handleObjIn,special,eventHandle,handleObj,handlers,type,namespaces,origType,elemData=jQuery._data(elem);if(elemData){if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;selector=handleObjIn.selector}handler.guid||(handler.guid=jQuery.guid++);(events=elemData.events)||(events=elemData.events={});if(!(eventHandle=elemData.handle)){eventHandle=elemData.handle=function(e){return typeof jQuery===core_strundefined||e&&jQuery.event.triggered===e.type?undefined:jQuery.event.dispatch.apply(eventHandle.elem,arguments)};eventHandle.elem=elem}types=(types||"").match(core_rnotwhite)||[""];t=types.length;for(;t--;){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;special=jQuery.event.special[type]||{};handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn);if(!(handlers=events[type])){handlers=events[type]=[];handlers.delegateCount=0;special.setup&&special.setup.call(elem,data,namespaces,eventHandle)!==!1||(elem.addEventListener?elem.addEventListener(type,eventHandle,!1):elem.attachEvent&&elem.attachEvent("on"+type,eventHandle))}if(special.add){special.add.call(elem,handleObj);handleObj.handler.guid||(handleObj.handler.guid=handler.guid)}selector?handlers.splice(handlers.delegateCount++,0,handleObj):handlers.push(handleObj);jQuery.event.global[type]=!0}elem=null}},remove:function(elem,types,handler,selector,mappedTypes){var j,handleObj,tmp,origCount,t,events,special,handlers,type,namespaces,origType,elemData=jQuery.hasData(elem)&&jQuery._data(elem);if(elemData&&(events=elemData.events)){types=(types||"").match(core_rnotwhite)||[""];t=types.length;for(;t--;){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(type){special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;handlers=events[type]||[];tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)");origCount=j=handlers.length;for(;j--;){handleObj=handlers[j];if((mappedTypes||origType===handleObj.origType)&&(!handler||handler.guid===handleObj.guid)&&(!tmp||tmp.test(handleObj.namespace))&&(!selector||selector===handleObj.selector||"**"===selector&&handleObj.selector)){handlers.splice(j,1);handleObj.selector&&handlers.delegateCount--;special.remove&&special.remove.call(elem,handleObj)}}if(origCount&&!handlers.length){special.teardown&&special.teardown.call(elem,namespaces,elemData.handle)!==!1||jQuery.removeEvent(elem,type,elemData.handle);delete events[type]}}else for(type in events)jQuery.event.remove(elem,type+types[t],handler,selector,!0)}if(jQuery.isEmptyObject(events)){delete elemData.handle;jQuery._removeData(elem,"events")}}},trigger:function(event,data,elem,onlyHandlers){var handle,ontype,cur,bubbleType,special,tmp,i,eventPath=[elem||document],type=core_hasOwn.call(event,"type")?event.type:event,namespaces=core_hasOwn.call(event,"namespace")?event.namespace.split("."):[];cur=tmp=elem=elem||document;if(3!==elem.nodeType&&8!==elem.nodeType&&!rfocusMorph.test(type+jQuery.event.triggered)){if(type.indexOf(".")>=0){namespaces=type.split(".");type=namespaces.shift();namespaces.sort()}ontype=type.indexOf(":")<0&&"on"+type;event=event[jQuery.expando]?event:new jQuery.Event(type,"object"==typeof event&&event);event.isTrigger=!0;event.namespace=namespaces.join(".");event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;event.result=undefined;event.target||(event.target=elem);data=null==data?[event]:jQuery.makeArray(data,[event]);special=jQuery.event.special[type]||{};if(onlyHandlers||!special.trigger||special.trigger.apply(elem,data)!==!1){if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){bubbleType=special.delegateType||type;rfocusMorph.test(bubbleType+type)||(cur=cur.parentNode);for(;cur;cur=cur.parentNode){eventPath.push(cur);tmp=cur}tmp===(elem.ownerDocument||document)&&eventPath.push(tmp.defaultView||tmp.parentWindow||window)}i=0;for(;(cur=eventPath[i++])&&!event.isPropagationStopped();){event.type=i>1?bubbleType:special.bindType||type;handle=(jQuery._data(cur,"events")||{})[event.type]&&jQuery._data(cur,"handle");handle&&handle.apply(cur,data);handle=ontype&&cur[ontype];handle&&jQuery.acceptData(cur)&&handle.apply&&handle.apply(cur,data)===!1&&event.preventDefault()}event.type=type;if(!onlyHandlers&&!event.isDefaultPrevented()&&(!special._default||special._default.apply(elem.ownerDocument,data)===!1)&&("click"!==type||!jQuery.nodeName(elem,"a"))&&jQuery.acceptData(elem)&&ontype&&elem[type]&&!jQuery.isWindow(elem)){tmp=elem[ontype];tmp&&(elem[ontype]=null);jQuery.event.triggered=type;try{elem[type]()}catch(e){}jQuery.event.triggered=undefined;tmp&&(elem[ontype]=tmp)}return event.result}}},dispatch:function(event){event=jQuery.event.fix(event);var i,ret,handleObj,matched,j,handlerQueue=[],args=core_slice.call(arguments),handlers=(jQuery._data(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};args[0]=event;event.delegateTarget=this;if(!special.preDispatch||special.preDispatch.call(this,event)!==!1){handlerQueue=jQuery.event.handlers.call(this,event,handlers);i=0;for(;(matched=handlerQueue[i++])&&!event.isPropagationStopped();){event.currentTarget=matched.elem;j=0;for(;(handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped();)if(!event.namespace_re||event.namespace_re.test(handleObj.namespace)){event.handleObj=handleObj;event.data=handleObj.data;ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args);if(ret!==undefined&&(event.result=ret)===!1){event.preventDefault();event.stopPropagation()}}}special.postDispatch&&special.postDispatch.call(this,event);return event.result}},handlers:function(event,handlers){var sel,handleObj,matches,i,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&(!event.button||"click"!==event.type))for(;cur!=this;cur=cur.parentNode||this)if(1===cur.nodeType&&(cur.disabled!==!0||"click"!==event.type)){matches=[];for(i=0;delegateCount>i;i++){handleObj=handlers[i];sel=handleObj.selector+" ";matches[sel]===undefined&&(matches[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>=0:jQuery.find(sel,this,null,[cur]).length);matches[sel]&&matches.push(handleObj)}matches.length&&handlerQueue.push({elem:cur,handlers:matches})}delegateCount<handlers.length&&handlerQueue.push({elem:this,handlers:handlers.slice(delegateCount)});return handlerQueue},fix:function(event){if(event[jQuery.expando])return event;var i,prop,copy,type=event.type,originalEvent=event,fixHook=this.fixHooks[type];fixHook||(this.fixHooks[type]=fixHook=rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?this.keyHooks:{});copy=fixHook.props?this.props.concat(fixHook.props):this.props;event=new jQuery.Event(originalEvent);i=copy.length;for(;i--;){prop=copy[i];event[prop]=originalEvent[prop]}event.target||(event.target=originalEvent.srcElement||document);3===event.target.nodeType&&(event.target=event.target.parentNode);event.metaKey=!!event.metaKey;return fixHook.filter?fixHook.filter(event,originalEvent):event},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){null==event.which&&(event.which=null!=original.charCode?original.charCode:original.keyCode);return event}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var body,eventDoc,doc,button=original.button,fromElement=original.fromElement;if(null==event.pageX&&null!=original.clientX){eventDoc=event.target.ownerDocument||document;doc=eventDoc.documentElement;body=eventDoc.body;event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}!event.relatedTarget&&fromElement&&(event.relatedTarget=fromElement===event.target?original.toElement:fromElement);event.which||button===undefined||(event.which=1&button?1:2&button?3:4&button?2:0);return event}},special:{load:{noBubble:!0},click:{trigger:function(){if(jQuery.nodeName(this,"input")&&"checkbox"===this.type&&this.click){this.click();return!1}}},focus:{trigger:function(){if(this!==document.activeElement&&this.focus)try{this.focus();return!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===document.activeElement&&this.blur){this.blur();return!1}},delegateType:"focusout"},beforeunload:{postDispatch:function(event){event.result!==undefined&&(event.originalEvent.returnValue=event.result)}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:!0,originalEvent:{}});bubble?jQuery.event.trigger(e,null,elem):jQuery.event.dispatch.call(elem,e);e.isDefaultPrevented()&&event.preventDefault()}};jQuery.removeEvent=document.removeEventListener?function(elem,type,handle){elem.removeEventListener&&elem.removeEventListener(type,handle,!1)}:function(elem,type,handle){var name="on"+type;if(elem.detachEvent){typeof elem[name]===core_strundefined&&(elem[name]=null);elem.detachEvent(name,handle)}};jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event))return new jQuery.Event(src,props);if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=src.defaultPrevented||src.returnValue===!1||src.getPreventDefault&&src.getPreventDefault()?returnTrue:returnFalse}else this.type=src;props&&jQuery.extend(this,props);this.timeStamp=src&&src.timeStamp||jQuery.now();this[jQuery.expando]=!0};jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue;if(e){e.stopPropagation&&e.stopPropagation();e.cancelBubble=!0}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue;this.stopPropagation()}};jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;if(!related||related!==target&&!jQuery.contains(target,related)){event.type=handleObj.origType;ret=handleObj.handler.apply(this,arguments);event.type=fix}return ret}}});jQuery.support.submitBubbles||(jQuery.event.special.submit={setup:function(){if(jQuery.nodeName(this,"form"))return!1;jQuery.event.add(this,"click._submit keypress._submit",function(e){var elem=e.target,form=jQuery.nodeName(elem,"input")||jQuery.nodeName(elem,"button")?elem.form:undefined;if(form&&!jQuery._data(form,"submitBubbles")){jQuery.event.add(form,"submit._submit",function(event){event._submit_bubble=!0});jQuery._data(form,"submitBubbles",!0)}})},postDispatch:function(event){if(event._submit_bubble){delete event._submit_bubble;this.parentNode&&!event.isTrigger&&jQuery.event.simulate("submit",this.parentNode,event,!0)}},teardown:function(){if(jQuery.nodeName(this,"form"))return!1;jQuery.event.remove(this,"._submit")}});jQuery.support.changeBubbles||(jQuery.event.special.change={setup:function(){if(rformElems.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type){jQuery.event.add(this,"propertychange._change",function(event){"checked"===event.originalEvent.propertyName&&(this._just_changed=!0)});jQuery.event.add(this,"click._change",function(event){this._just_changed&&!event.isTrigger&&(this._just_changed=!1);jQuery.event.simulate("change",this,event,!0)})}return!1}jQuery.event.add(this,"beforeactivate._change",function(e){var elem=e.target;if(rformElems.test(elem.nodeName)&&!jQuery._data(elem,"changeBubbles")){jQuery.event.add(elem,"change._change",function(event){!this.parentNode||event.isSimulated||event.isTrigger||jQuery.event.simulate("change",this.parentNode,event,!0)});jQuery._data(elem,"changeBubbles",!0)}})},handle:function(event){var elem=event.target;return this!==elem||event.isSimulated||event.isTrigger||"radio"!==elem.type&&"checkbox"!==elem.type?event.handleObj.handler.apply(this,arguments):void 0},teardown:function(){jQuery.event.remove(this,"._change");return!rformElems.test(this.nodeName)}});jQuery.support.focusinBubbles||jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var attaches=0,handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),!0)};jQuery.event.special[fix]={setup:function(){0===attaches++&&document.addEventListener(orig,handler,!0)},teardown:function(){0===--attaches&&document.removeEventListener(orig,handler,!0)}}});jQuery.fn.extend({on:function(types,selector,data,fn,one){var type,origFn;if("object"==typeof types){if("string"!=typeof selector){data=data||selector;selector=undefined}for(type in types)this.on(type,selector,data,types[type],one);return this}if(null==data&&null==fn){fn=selector;data=selector=undefined}else if(null==fn)if("string"==typeof selector){fn=data;data=undefined}else{fn=data;data=selector;selector=undefined}if(fn===!1)fn=returnFalse;else if(!fn)return this;if(1===one){origFn=fn;fn=function(event){jQuery().off(event);return origFn.apply(this,arguments)};fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)}return this.each(function(){jQuery.event.add(this,types,fn,data,selector)})},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj){handleObj=types.handleObj;jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler);return this}if("object"==typeof types){for(type in types)this.off(type,selector,types[type]);return this}if(selector===!1||"function"==typeof selector){fn=selector;selector=undefined}fn===!1&&(fn=returnFalse);return this.each(function(){jQuery.event.remove(this,types,fn,selector)})},bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return 1===arguments.length?this.off(selector,"**"):this.off(types,selector||"**",fn)},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){var elem=this[0];return elem?jQuery.event.trigger(type,data,elem,!0):void 0}});!function(window,undefined){function isNative(fn){return rnative.test(fn+"")}function createCache(){var cache,keys=[];return cache=function(key,value){keys.push(key+=" ")>Expr.cacheLength&&delete cache[keys.shift()];return cache[key]=value}}function markFunction(fn){fn[expando]=!0;return fn}function assert(fn){var div=document.createElement("div");try{return fn(div)}catch(e){return!1}finally{div=null}}function Sizzle(selector,context,results,seed){var match,elem,m,nodeType,i,groups,old,nid,newContext,newSelector;(context?context.ownerDocument||context:preferredDoc)!==document&&setDocument(context);context=context||document;results=results||[];if(!selector||"string"!=typeof selector)return results;if(1!==(nodeType=context.nodeType)&&9!==nodeType)return[];if(!documentIsXML&&!seed){if(match=rquickExpr.exec(selector))if(m=match[1]){if(9===nodeType){elem=context.getElementById(m);if(!elem||!elem.parentNode)return results;if(elem.id===m){results.push(elem);return results}}else if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m){results.push(elem);return results}}else{if(match[2]){push.apply(results,slice.call(context.getElementsByTagName(selector),0));return results}if((m=match[3])&&support.getByClassName&&context.getElementsByClassName){push.apply(results,slice.call(context.getElementsByClassName(m),0));return results}}if(support.qsa&&!rbuggyQSA.test(selector)){old=!0;nid=expando;newContext=context;newSelector=9===nodeType&&selector;if(1===nodeType&&"object"!==context.nodeName.toLowerCase()){groups=tokenize(selector);(old=context.getAttribute("id"))?nid=old.replace(rescape,"\\$&"):context.setAttribute("id",nid);nid="[id='"+nid+"'] ";
i=groups.length;for(;i--;)groups[i]=nid+toSelector(groups[i]);newContext=rsibling.test(selector)&&context.parentNode||context;newSelector=groups.join(",")}if(newSelector)try{push.apply(results,slice.call(newContext.querySelectorAll(newSelector),0));return results}catch(qsaError){}finally{old||context.removeAttribute("id")}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}function siblingCheck(a,b){var cur=b&&a,diff=cur&&(~b.sourceIndex||MAX_NEGATIVE)-(~a.sourceIndex||MAX_NEGATIVE);if(diff)return diff;if(cur)for(;cur=cur.nextSibling;)if(cur===b)return-1;return a?1:-1}function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&elem.type===type}}function createPositionalPseudo(fn){return markFunction(function(argument){argument=+argument;return markFunction(function(seed,matches){for(var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;i--;)seed[j=matchIndexes[i]]&&(seed[j]=!(matches[j]=seed[j]))})})}function tokenize(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached)return parseOnly?0:cached.slice(0);soFar=selector;groups=[];preFilters=Expr.preFilter;for(;soFar;){if(!matched||(match=rcomma.exec(soFar))){match&&(soFar=soFar.slice(match[0].length)||soFar);groups.push(tokens=[])}matched=!1;if(match=rcombinators.exec(soFar)){matched=match.shift();tokens.push({value:matched,type:match[0].replace(rtrim," ")});soFar=soFar.slice(matched.length)}for(type in Expr.filter)if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match)))){matched=match.shift();tokens.push({value:matched,type:type,matches:match});soFar=soFar.slice(matched.length)}if(!matched)break}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)}function toSelector(tokens){for(var i=0,len=tokens.length,selector="";len>i;i++)selector+=tokens[i].value;return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&"parentNode"===dir,doneName=done++;return combinator.first?function(elem,context,xml){for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)return matcher(elem,context,xml)}:function(elem,context,xml){var data,cache,outerCache,dirkey=dirruns+" "+doneName;if(xml){for(;elem=elem[dir];)if((1===elem.nodeType||checkNonElements)&&matcher(elem,context,xml))return!0}else for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements){outerCache=elem[expando]||(elem[expando]={});if((cache=outerCache[dir])&&cache[0]===dirkey){if((data=cache[1])===!0||data===cachedruns)return data===!0}else{cache=outerCache[dir]=[dirkey];cache[1]=matcher(elem,context,xml)||cachedruns;if(cache[1]===!0)return!0}}}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){for(var i=matchers.length;i--;)if(!matchers[i](elem,context,xml))return!1;return!0}:matchers[0]}function condense(unmatched,map,filter,context,xml){for(var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=null!=map;len>i;i++)if((elem=unmatched[i])&&(!filter||filter(elem,context,xml))){newUnmatched.push(elem);mapped&&map.push(i)}return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){postFilter&&!postFilter[expando]&&(postFilter=setMatcher(postFilter));postFinder&&!postFinder[expando]&&(postFinder=setMatcher(postFinder,postSelector));return markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=!preFilter||!seed&&selector?elems:condense(elems,preMap,preFilter,context,xml),matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;matcher&&matcher(matcherIn,matcherOut,context,xml);if(postFilter){temp=condense(matcherOut,postMap);postFilter(temp,[],context,xml);i=temp.length;for(;i--;)(elem=temp[i])&&(matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem))}if(seed){if(postFinder||preFilter){if(postFinder){temp=[];i=matcherOut.length;for(;i--;)(elem=matcherOut[i])&&temp.push(matcherIn[i]=elem);postFinder(null,matcherOut=[],temp,xml)}i=matcherOut.length;for(;i--;)(elem=matcherOut[i])&&(temp=postFinder?indexOf.call(seed,elem):preMap[i])>-1&&(seed[temp]=!(results[temp]=elem))}}else{matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut);postFinder?postFinder(null,results,matcherOut,xml):push.apply(results,matcherOut)}})}function matcherFromTokens(tokens){for(var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,!0),matchAnyContext=addCombinator(function(elem){return indexOf.call(checkContext,elem)>-1},implicitRelative,!0),matchers=[function(elem,context,xml){return!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml))}];len>i;i++)if(matcher=Expr.relative[tokens[i].type])matchers=[addCombinator(elementMatcher(matchers),matcher)];else{matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches);if(matcher[expando]){j=++i;for(;len>j&&!Expr.relative[tokens[j].type];j++);return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1)).replace(rtrim,"$1"),matcher,j>i&&matcherFromTokens(tokens.slice(i,j)),len>j&&matcherFromTokens(tokens=tokens.slice(j)),len>j&&toSelector(tokens))}matchers.push(matcher)}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){var matcherCachedRuns=0,bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,expandContext){var elem,j,matcher,setMatched=[],matchedCount=0,i="0",unmatched=seed&&[],outermost=null!=expandContext,contextBackup=outermostContext,elems=seed||byElement&&Expr.find.TAG("*",expandContext&&context.parentNode||context),dirrunsUnique=dirruns+=null==contextBackup?1:Math.random()||.1;if(outermost){outermostContext=context!==document&&context;cachedruns=matcherCachedRuns}for(;null!=(elem=elems[i]);i++){if(byElement&&elem){j=0;for(;matcher=elementMatchers[j++];)if(matcher(elem,context,xml)){results.push(elem);break}if(outermost){dirruns=dirrunsUnique;cachedruns=++matcherCachedRuns}}if(bySet){(elem=!matcher&&elem)&&matchedCount--;seed&&unmatched.push(elem)}}matchedCount+=i;if(bySet&&i!==matchedCount){j=0;for(;matcher=setMatchers[j++];)matcher(unmatched,setMatched,context,xml);if(seed){if(matchedCount>0)for(;i--;)unmatched[i]||setMatched[i]||(setMatched[i]=pop.call(results));setMatched=condense(setMatched)}push.apply(results,setMatched);outermost&&!seed&&setMatched.length>0&&matchedCount+setMatchers.length>1&&Sizzle.uniqueSort(results)}if(outermost){dirruns=dirrunsUnique;outermostContext=contextBackup}return unmatched};return bySet?markFunction(superMatcher):superMatcher}function multipleContexts(selector,contexts,results){for(var i=0,len=contexts.length;len>i;i++)Sizzle(selector,contexts[i],results);return results}function select(selector,context,results,seed){var i,tokens,token,type,find,match=tokenize(selector);if(!seed&&1===match.length){tokens=match[0]=match[0].slice(0);if(tokens.length>2&&"ID"===(token=tokens[0]).type&&9===context.nodeType&&!documentIsXML&&Expr.relative[tokens[1].type]){context=Expr.find.ID(token.matches[0].replace(runescape,funescape),context)[0];if(!context)return results;selector=selector.slice(tokens.shift().value.length)}i=matchExpr.needsContext.test(selector)?0:tokens.length;for(;i--;){token=tokens[i];if(Expr.relative[type=token.type])break;if((find=Expr.find[type])&&(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&context.parentNode||context))){tokens.splice(i,1);selector=seed.length&&toSelector(tokens);if(!selector){push.apply(results,slice.call(seed,0));return results}break}}}compile(selector,match)(seed,context,documentIsXML,results,rsibling.test(selector));return results}function setFilters(){}var i,cachedruns,Expr,getText,isXML,compile,hasDuplicate,outermostContext,setDocument,document,docElem,documentIsXML,rbuggyQSA,rbuggyMatches,matches,contains,sortOrder,expando="sizzle"+-new Date,preferredDoc=window.document,support={},dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),strundefined=typeof undefined,MAX_NEGATIVE=1<<31,arr=[],pop=arr.pop,push=arr.push,slice=arr.slice,indexOf=arr.indexOf||function(elem){for(var i=0,len=this.length;len>i;i++)if(this[i]===elem)return i;return-1},whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),operators="([*^$|!~]?=)",attributes="\\["+whitespace+"*("+characterEncoding+")"+whitespace+"*(?:"+operators+whitespace+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+identifier+")|)|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+attributes.replace(3,8)+")*)|.*)\\)|)",rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([\\x20\\t\\r\\n\\f>+~])"+whitespace+"*"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+characterEncoding+")"),CLASS:new RegExp("^\\.("+characterEncoding+")"),NAME:new RegExp("^\\[name=['\"]?("+characterEncoding+")['\"]?\\]"),TAG:new RegExp("^("+characterEncoding.replace("w","w*")+")"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),needsContext:new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rsibling=/[\x20\t\r\n\f]*[+~]/,rnative=/^[^{]+\{\s*\[native code/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rescape=/'|\\/g,rattributeQuotes=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,runescape=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,funescape=function(_,escaped){var high="0x"+escaped-65536;return high!==high?escaped:0>high?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,1023&high|56320)};try{slice.call(preferredDoc.documentElement.childNodes,0)[0].nodeType}catch(e){slice=function(i){for(var elem,results=[];elem=this[i++];)results.push(elem);return results}}isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?"HTML"!==documentElement.nodeName:!1};setDocument=Sizzle.setDocument=function(node){var doc=node?node.ownerDocument||node:preferredDoc;if(doc===document||9!==doc.nodeType||!doc.documentElement)return document;document=doc;docElem=doc.documentElement;documentIsXML=isXML(doc);support.tagNameNoComments=assert(function(div){div.appendChild(doc.createComment(""));return!div.getElementsByTagName("*").length});support.attributes=assert(function(div){div.innerHTML="<select></select>";var type=typeof div.lastChild.getAttribute("multiple");return"boolean"!==type&&"string"!==type});support.getByClassName=assert(function(div){div.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";if(!div.getElementsByClassName||!div.getElementsByClassName("e").length)return!1;div.lastChild.className="e";return 2===div.getElementsByClassName("e").length});support.getByName=assert(function(div){div.id=expando+0;div.innerHTML="<a name='"+expando+"'></a><div name='"+expando+"'></div>";docElem.insertBefore(div,docElem.firstChild);var pass=doc.getElementsByName&&doc.getElementsByName(expando).length===2+doc.getElementsByName(expando+0).length;support.getIdNotName=!doc.getElementById(expando);docElem.removeChild(div);return pass});Expr.attrHandle=assert(function(div){div.innerHTML="<a href='#'></a>";return div.firstChild&&typeof div.firstChild.getAttribute!==strundefined&&"#"===div.firstChild.getAttribute("href")})?{}:{href:function(elem){return elem.getAttribute("href",2)},type:function(elem){return elem.getAttribute("type")}};if(support.getIdNotName){Expr.find.ID=function(id,context){if(typeof context.getElementById!==strundefined&&!documentIsXML){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}};Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}}}else{Expr.find.ID=function(id,context){if(typeof context.getElementById!==strundefined&&!documentIsXML){var m=context.getElementById(id);return m?m.id===id||typeof m.getAttributeNode!==strundefined&&m.getAttributeNode("id").value===id?[m]:undefined:[]}};Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=typeof elem.getAttributeNode!==strundefined&&elem.getAttributeNode("id");return node&&node.value===attrId}}}Expr.find.TAG=support.tagNameNoComments?function(tag,context){return typeof context.getElementsByTagName!==strundefined?context.getElementsByTagName(tag):void 0}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if("*"===tag){for(;elem=results[i++];)1===elem.nodeType&&tmp.push(elem);return tmp}return results};Expr.find.NAME=support.getByName&&function(tag,context){return typeof context.getElementsByName!==strundefined?context.getElementsByName(name):void 0};Expr.find.CLASS=support.getByClassName&&function(className,context){return typeof context.getElementsByClassName===strundefined||documentIsXML?void 0:context.getElementsByClassName(className)};rbuggyMatches=[];rbuggyQSA=[":focus"];if(support.qsa=isNative(doc.querySelectorAll)){assert(function(div){div.innerHTML="<select><option selected=''></option></select>";div.querySelectorAll("[selected]").length||rbuggyQSA.push("\\["+whitespace+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)");div.querySelectorAll(":checked").length||rbuggyQSA.push(":checked")});assert(function(div){div.innerHTML="<input type='hidden' i=''/>";div.querySelectorAll("[i^='']").length&&rbuggyQSA.push("[*^$]="+whitespace+"*(?:\"\"|'')");div.querySelectorAll(":enabled").length||rbuggyQSA.push(":enabled",":disabled");div.querySelectorAll("*,:x");rbuggyQSA.push(",.*:")})}(support.matchesSelector=isNative(matches=docElem.matchesSelector||docElem.mozMatchesSelector||docElem.webkitMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector))&&assert(function(div){support.disconnectedMatch=matches.call(div,"div");matches.call(div,"[s!='']:x");rbuggyMatches.push("!=",pseudos)});rbuggyQSA=new RegExp(rbuggyQSA.join("|"));rbuggyMatches=new RegExp(rbuggyMatches.join("|"));contains=isNative(docElem.contains)||docElem.compareDocumentPosition?function(a,b){var adown=9===a.nodeType?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!(!bup||1!==bup.nodeType||!(adown.contains?adown.contains(bup):a.compareDocumentPosition&&16&a.compareDocumentPosition(bup)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};sortOrder=docElem.compareDocumentPosition?function(a,b){var compare;if(a===b){hasDuplicate=!0;return 0}return(compare=b.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(b))?1&compare||a.parentNode&&11===a.parentNode.nodeType?a===doc||contains(preferredDoc,a)?-1:b===doc||contains(preferredDoc,b)?1:0:4&compare?-1:1:a.compareDocumentPosition?-1:1}:function(a,b){var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(a===b){hasDuplicate=!0;return 0}if(!aup||!bup)return a===doc?-1:b===doc?1:aup?-1:bup?1:0;if(aup===bup)return siblingCheck(a,b);cur=a;for(;cur=cur.parentNode;)ap.unshift(cur);cur=b;for(;cur=cur.parentNode;)bp.unshift(cur);for(;ap[i]===bp[i];)i++;return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0};hasDuplicate=!1;[0,0].sort(sortOrder);support.detectDuplicates=hasDuplicate;return document};Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)};Sizzle.matchesSelector=function(elem,expr){(elem.ownerDocument||elem)!==document&&setDocument(elem);expr=expr.replace(rattributeQuotes,"='$1']");if(support.matchesSelector&&!documentIsXML&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&!rbuggyQSA.test(expr))try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&11!==elem.document.nodeType)return ret}catch(e){}return Sizzle(expr,document,null,[elem]).length>0};Sizzle.contains=function(context,elem){(context.ownerDocument||context)!==document&&setDocument(context);return contains(context,elem)};Sizzle.attr=function(elem,name){var val;(elem.ownerDocument||elem)!==document&&setDocument(elem);documentIsXML||(name=name.toLowerCase());return(val=Expr.attrHandle[name])?val(elem):documentIsXML||support.attributes?elem.getAttribute(name):((val=elem.getAttributeNode(name))||elem.getAttribute(name))&&elem[name]===!0?name:val&&val.specified?val.value:null};Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)};Sizzle.uniqueSort=function(results){var elem,duplicates=[],i=1,j=0;hasDuplicate=!support.detectDuplicates;results.sort(sortOrder);if(hasDuplicate){for(;elem=results[i];i++)elem===results[i-1]&&(j=duplicates.push(i));for(;j--;)results.splice(duplicates[j],1)}return results};getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(1===nodeType||9===nodeType||11===nodeType){if("string"==typeof elem.textContent)return elem.textContent;for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem)}else if(3===nodeType||4===nodeType)return elem.nodeValue}else for(;node=elem[i];i++)ret+=getText(node);return ret};Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){match[1]=match[1].replace(runescape,funescape);match[3]=(match[4]||match[5]||"").replace(runescape,funescape);"~="===match[2]&&(match[3]=" "+match[3]+" ");return match.slice(0,4)},CHILD:function(match){match[1]=match[1].toLowerCase();if("nth"===match[1].slice(0,3)){match[3]||Sizzle.error(match[0]);match[4]=+(match[4]?match[5]+(match[6]||1):2*("even"===match[3]||"odd"===match[3]));match[5]=+(match[7]+match[8]||"odd"===match[3])}else match[3]&&Sizzle.error(match[0]);return match},PSEUDO:function(match){var excess,unquoted=!match[5]&&match[2];if(matchExpr.CHILD.test(match[0]))return null;if(match[4])match[2]=match[4];else if(unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,!0))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)){match[0]=match[0].slice(0,excess);match[2]=unquoted.slice(0,excess)}return match.slice(0,3)}},filter:{TAG:function(nodeName){if("*"===nodeName)return function(){return!0};nodeName=nodeName.replace(runescape,funescape).toLowerCase();return function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test(elem.className||typeof elem.getAttribute!==strundefined&&elem.getAttribute("class")||"")})},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);if(null==result)return"!="===operator;if(!operator)return!0;result+="";return"="===operator?result===check:"!="===operator?result!==check:"^="===operator?check&&0===result.indexOf(check):"*="===operator?check&&result.indexOf(check)>-1:"$="===operator?check&&result.slice(-check.length)===check:"~="===operator?(" "+result+" ").indexOf(check)>-1:"|="===operator?result===check||result.slice(0,check.length+1)===check+"-":!1}},CHILD:function(type,what,argument,first,last){var simple="nth"!==type.slice(0,3),forward="last"!==type.slice(-4),ofType="of-type"===what;return 1===first&&0===last?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,outerCache,node,diff,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType;if(parent){if(simple){for(;dir;){node=elem;for(;node=node[dir];)if(ofType?node.nodeName.toLowerCase()===name:1===node.nodeType)return!1;start=dir="only"===type&&!start&&"nextSibling"}return!0}start=[forward?parent.firstChild:parent.lastChild];if(forward&&useCache){outerCache=parent[expando]||(parent[expando]={});cache=outerCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=cache[0]===dirruns&&cache[2];node=nodeIndex&&parent.childNodes[nodeIndex];for(;node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop();)if(1===node.nodeType&&++diff&&node===elem){outerCache[type]=[dirruns,nodeIndex,diff];break}}else if(useCache&&(cache=(elem[expando]||(elem[expando]={}))[type])&&cache[0]===dirruns)diff=cache[1];else for(;node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop();)if((ofType?node.nodeName.toLowerCase()===name:1===node.nodeType)&&++diff){useCache&&((node[expando]||(node[expando]={}))[type]=[dirruns,diff]);if(node===elem)break}diff-=last;return diff===first||diff%first===0&&diff/first>=0}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);if(fn[expando])return fn(argument);if(fn.length>1){args=[pseudo,pseudo,"",argument];return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){for(var idx,matched=fn(seed,argument),i=matched.length;i--;){idx=indexOf.call(seed,matched[i]);seed[idx]=!(matches[idx]=matched[i])}}):function(elem){return fn(elem,0,args)}}return fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){for(var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;i--;)(elem=unmatched[i])&&(seed[i]=!(matches[i]=elem))}):function(elem,context,xml){input[0]=elem;matcher(input,null,xml,results);return!results.pop()}}),has:markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),contains:markFunction(function(text){return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}}),lang:markFunction(function(lang){ridentifier.test(lang||"")||Sizzle.error("unsupported lang: "+lang);lang=lang.replace(runescape,funescape).toLowerCase();return function(elem){var elemLang;do if(elemLang=documentIsXML?elem.getAttribute("xml:lang")||elem.getAttribute("lang"):elem.lang){elemLang=elemLang.toLowerCase();return elemLang===lang||0===elemLang.indexOf(lang+"-")}while((elem=elem.parentNode)&&1===elem.nodeType);return!1}}),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:function(elem){return elem.disabled===!1},disabled:function(elem){return elem.disabled===!0},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return"input"===nodeName&&!!elem.checked||"option"===nodeName&&!!elem.selected},selected:function(elem){elem.parentNode&&elem.parentNode.selectedIndex;return elem.selected===!0},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling)if(elem.nodeName>"@"||3===elem.nodeType||4===elem.nodeType)return!1;return!0},parent:function(elem){return!Expr.pseudos.empty(elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&"button"===elem.type||"button"===name},text:function(elem){var attr;return"input"===elem.nodeName.toLowerCase()&&"text"===elem.type&&(null==(attr=elem.getAttribute("type"))||attr.toLowerCase()===elem.type)},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[0>argument?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){for(var i=0;length>i;i+=2)matchIndexes.push(i);return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){for(var i=1;length>i;i+=2)matchIndexes.push(i);return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=0>argument?argument+length:argument;--i>=0;)matchIndexes.push(i);return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=0>argument?argument+length:argument;++i<length;)matchIndexes.push(i);return matchIndexes})}};for(i in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Expr.pseudos[i]=createInputPseudo(i);for(i in{submit:!0,reset:!0})Expr.pseudos[i]=createButtonPseudo(i);compile=Sizzle.compile=function(selector,group){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){group||(group=tokenize(selector));i=group.length;for(;i--;){cached=matcherFromTokens(group[i]);cached[expando]?setMatchers.push(cached):elementMatchers.push(cached)}cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers))}return cached};Expr.pseudos.nth=Expr.pseudos.eq;Expr.filters=setFilters.prototype=Expr.pseudos;Expr.setFilters=new setFilters;setDocument();Sizzle.attr=jQuery.attr;jQuery.find=Sizzle;jQuery.expr=Sizzle.selectors;jQuery.expr[":"]=jQuery.expr.pseudos;jQuery.unique=Sizzle.uniqueSort;jQuery.text=Sizzle.getText;jQuery.isXMLDoc=Sizzle.isXML;jQuery.contains=Sizzle.contains}(window);var runtil=/Until$/,rparentsprev=/^(?:parents|prev(?:Until|All))/,isSimple=/^.[^:#\[\.,]*$/,rneedsContext=jQuery.expr.match.needsContext,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};jQuery.fn.extend({find:function(selector){var i,ret,self,len=this.length;if("string"!=typeof selector){self=this;return this.pushStack(jQuery(selector).filter(function(){for(i=0;len>i;i++)if(jQuery.contains(self[i],this))return!0}))}ret=[];for(i=0;len>i;i++)jQuery.find(selector,this[i],ret);ret=this.pushStack(len>1?jQuery.unique(ret):ret);ret.selector=(this.selector?this.selector+" ":"")+selector;return ret},has:function(target){var i,targets=jQuery(target,this),len=targets.length;return this.filter(function(){for(i=0;len>i;i++)if(jQuery.contains(this,targets[i]))return!0})},not:function(selector){return this.pushStack(winnow(this,selector,!1))},filter:function(selector){return this.pushStack(winnow(this,selector,!0))},is:function(selector){return!!selector&&("string"==typeof selector?rneedsContext.test(selector)?jQuery(selector,this.context).index(this[0])>=0:jQuery.filter(selector,this).length>0:this.filter(selector).length>0)},closest:function(selectors,context){for(var cur,i=0,l=this.length,ret=[],pos=rneedsContext.test(selectors)||"string"!=typeof selectors?jQuery(selectors,context||this.context):0;l>i;i++){cur=this[i];for(;cur&&cur.ownerDocument&&cur!==context&&11!==cur.nodeType;){if(pos?pos.index(cur)>-1:jQuery.find.matchesSelector(cur,selectors)){ret.push(cur);break}cur=cur.parentNode}}return this.pushStack(ret.length>1?jQuery.unique(ret):ret)},index:function(elem){return elem?"string"==typeof elem?jQuery.inArray(this[0],jQuery(elem)):jQuery.inArray(elem.jquery?elem[0]:elem,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(selector,context){var set="string"==typeof selector?jQuery(selector,context):jQuery.makeArray(selector&&selector.nodeType?[selector]:selector),all=jQuery.merge(this.get(),set);return this.pushStack(jQuery.unique(all))},addBack:function(selector){return this.add(null==selector?this.prevObject:this.prevObject.filter(selector))}});jQuery.fn.andSelf=jQuery.fn.addBack;jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&11!==parent.nodeType?parent:null},parents:function(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until);runtil.test(name)||(selector=until);selector&&"string"==typeof selector&&(ret=jQuery.filter(selector,ret));ret=this.length>1&&!guaranteedUnique[name]?jQuery.unique(ret):ret;this.length>1&&rparentsprev.test(name)&&(ret=ret.reverse());return this.pushStack(ret)}});jQuery.extend({filter:function(expr,elems,not){not&&(expr=":not("+expr+")");return 1===elems.length?jQuery.find.matchesSelector(elems[0],expr)?[elems[0]]:[]:jQuery.find.matches(expr,elems)},dir:function(elem,dir,until){for(var matched=[],cur=elem[dir];cur&&9!==cur.nodeType&&(until===undefined||1!==cur.nodeType||!jQuery(cur).is(until));){1===cur.nodeType&&matched.push(cur);cur=cur[dir]}return matched},sibling:function(n,elem){for(var r=[];n;n=n.nextSibling)1===n.nodeType&&n!==elem&&r.push(n);return r}});var nodeNames="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",rinlinejQuery=/ jQuery\d+="(?:null|\d+)"/g,rnoshimcache=new RegExp("<(?:"+nodeNames+")[\\s/>]","i"),rleadingWhitespace=/^\s+/,rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,manipulation_rcheckableType=/^(?:checkbox|radio)$/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:jQuery.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},safeFragment=createSafeFragment(document),fragmentDiv=safeFragment.appendChild(document.createElement("div"));wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;jQuery.fn.extend({text:function(value){return jQuery.access(this,function(value){return value===undefined?jQuery.text(this):this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(value))},null,value,arguments.length)},wrapAll:function(html){if(jQuery.isFunction(html))return this.each(function(i){
jQuery(this).wrapAll(html.call(this,i))});if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&wrap.insertBefore(this[0]);wrap.map(function(){for(var elem=this;elem.firstChild&&1===elem.firstChild.nodeType;)elem=elem.firstChild;return elem}).append(this)}return this},wrapInner:function(html){return jQuery.isFunction(html)?this.each(function(i){jQuery(this).wrapInner(html.call(this,i))}):this.each(function(){var self=jQuery(this),contents=self.contents();contents.length?contents.wrapAll(html):self.append(html)})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){jQuery.nodeName(this,"body")||jQuery(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(elem){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(elem)})},prepend:function(){return this.domManip(arguments,!0,function(elem){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(elem,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this)})},after:function(){return this.domManip(arguments,!1,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this.nextSibling)})},remove:function(selector,keepData){for(var elem,i=0;null!=(elem=this[i]);i++)if(!selector||jQuery.filter(selector,[elem]).length>0){keepData||1!==elem.nodeType||jQuery.cleanData(getAll(elem));if(elem.parentNode){keepData&&jQuery.contains(elem.ownerDocument,elem)&&setGlobalEval(getAll(elem,"script"));elem.parentNode.removeChild(elem)}}return this},empty:function(){for(var elem,i=0;null!=(elem=this[i]);i++){1===elem.nodeType&&jQuery.cleanData(getAll(elem,!1));for(;elem.firstChild;)elem.removeChild(elem.firstChild);elem.options&&jQuery.nodeName(elem,"select")&&(elem.options.length=0)}return this},clone:function(dataAndEvents,deepDataAndEvents){dataAndEvents=null==dataAndEvents?!1:dataAndEvents;deepDataAndEvents=null==deepDataAndEvents?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return jQuery.access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined)return 1===elem.nodeType?elem.innerHTML.replace(rinlinejQuery,""):undefined;if("string"==typeof value&&!rnoInnerhtml.test(value)&&(jQuery.support.htmlSerialize||!rnoshimcache.test(value))&&(jQuery.support.leadingWhitespace||!rleadingWhitespace.test(value))&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;l>i;i++){elem=this[i]||{};if(1===elem.nodeType){jQuery.cleanData(getAll(elem,!1));elem.innerHTML=value}}elem=0}catch(e){}}elem&&this.empty().append(value)},null,value,arguments.length)},replaceWith:function(value){var isFunc=jQuery.isFunction(value);isFunc||"string"==typeof value||(value=jQuery(value).not(this).detach());return this.domManip([value],!0,function(elem){var next=this.nextSibling,parent=this.parentNode;if(parent){jQuery(this).remove();parent.insertBefore(elem,next)}})},detach:function(selector){return this.remove(selector,!0)},domManip:function(args,table,callback){args=core_concat.apply([],args);var first,node,hasScripts,scripts,doc,fragment,i=0,l=this.length,set=this,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||!(1>=l||"string"!=typeof value||jQuery.support.checkClone)&&rchecked.test(value))return this.each(function(index){var self=set.eq(index);isFunction&&(args[0]=value.call(this,index,table?self.html():undefined));self.domManip(args,table,callback)});if(l){fragment=jQuery.buildFragment(args,this[0].ownerDocument,!1,this);first=fragment.firstChild;1===fragment.childNodes.length&&(fragment=first);if(first){table=table&&jQuery.nodeName(first,"tr");scripts=jQuery.map(getAll(fragment,"script"),disableScript);hasScripts=scripts.length;for(;l>i;i++){node=fragment;if(i!==iNoClone){node=jQuery.clone(node,!0,!0);hasScripts&&jQuery.merge(scripts,getAll(node,"script"))}callback.call(table&&jQuery.nodeName(this[i],"table")?findOrAppend(this[i],"tbody"):this[i],node,i)}if(hasScripts){doc=scripts[scripts.length-1].ownerDocument;jQuery.map(scripts,restoreScript);for(i=0;hasScripts>i;i++){node=scripts[i];rscriptType.test(node.type||"")&&!jQuery._data(node,"globalEval")&&jQuery.contains(doc,node)&&(node.src?jQuery.ajax({url:node.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):jQuery.globalEval((node.text||node.textContent||node.innerHTML||"").replace(rcleanScript,"")))}}fragment=first=null}}return this}});jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){for(var elems,i=0,ret=[],insert=jQuery(selector),last=insert.length-1;last>=i;i++){elems=i===last?this:this.clone(!0);jQuery(insert[i])[original](elems);core_push.apply(ret,elems.get())}return this.pushStack(ret)}});jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var destElements,node,clone,i,srcElements,inPage=jQuery.contains(elem.ownerDocument,elem);if(jQuery.support.html5Clone||jQuery.isXMLDoc(elem)||!rnoshimcache.test("<"+elem.nodeName+">"))clone=elem.cloneNode(!0);else{fragmentDiv.innerHTML=elem.outerHTML;fragmentDiv.removeChild(clone=fragmentDiv.firstChild)}if(!(jQuery.support.noCloneEvent&&jQuery.support.noCloneChecked||1!==elem.nodeType&&11!==elem.nodeType||jQuery.isXMLDoc(elem))){destElements=getAll(clone);srcElements=getAll(elem);for(i=0;null!=(node=srcElements[i]);++i)destElements[i]&&fixCloneNodeIssues(node,destElements[i])}if(dataAndEvents)if(deepDataAndEvents){srcElements=srcElements||getAll(elem);destElements=destElements||getAll(clone);for(i=0;null!=(node=srcElements[i]);i++)cloneCopyEvent(node,destElements[i])}else cloneCopyEvent(elem,clone);destElements=getAll(clone,"script");destElements.length>0&&setGlobalEval(destElements,!inPage&&getAll(elem,"script"));destElements=srcElements=node=null;return clone},buildFragment:function(elems,context,scripts,selection){for(var j,elem,contains,tmp,tag,tbody,wrap,l=elems.length,safe=createSafeFragment(context),nodes=[],i=0;l>i;i++){elem=elems[i];if(elem||0===elem)if("object"===jQuery.type(elem))jQuery.merge(nodes,elem.nodeType?[elem]:elem);else if(rhtml.test(elem)){tmp=tmp||safe.appendChild(context.createElement("div"));tag=(rtagName.exec(elem)||["",""])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;tmp.innerHTML=wrap[1]+elem.replace(rxhtmlTag,"<$1></$2>")+wrap[2];j=wrap[0];for(;j--;)tmp=tmp.lastChild;!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(elem)&&nodes.push(context.createTextNode(rleadingWhitespace.exec(elem)[0]));if(!jQuery.support.tbody){elem="table"!==tag||rtbody.test(elem)?"<table>"!==wrap[1]||rtbody.test(elem)?0:tmp:tmp.firstChild;j=elem&&elem.childNodes.length;for(;j--;)jQuery.nodeName(tbody=elem.childNodes[j],"tbody")&&!tbody.childNodes.length&&elem.removeChild(tbody)}jQuery.merge(nodes,tmp.childNodes);tmp.textContent="";for(;tmp.firstChild;)tmp.removeChild(tmp.firstChild);tmp=safe.lastChild}else nodes.push(context.createTextNode(elem))}tmp&&safe.removeChild(tmp);jQuery.support.appendChecked||jQuery.grep(getAll(nodes,"input"),fixDefaultChecked);i=0;for(;elem=nodes[i++];)if(!selection||-1===jQuery.inArray(elem,selection)){contains=jQuery.contains(elem.ownerDocument,elem);tmp=getAll(safe.appendChild(elem),"script");contains&&setGlobalEval(tmp);if(scripts){j=0;for(;elem=tmp[j++];)rscriptType.test(elem.type||"")&&scripts.push(elem)}}tmp=null;return safe},cleanData:function(elems,acceptData){for(var elem,type,id,data,i=0,internalKey=jQuery.expando,cache=jQuery.cache,deleteExpando=jQuery.support.deleteExpando,special=jQuery.event.special;null!=(elem=elems[i]);i++)if(acceptData||jQuery.acceptData(elem)){id=elem[internalKey];data=id&&cache[id];if(data){if(data.events)for(type in data.events)special[type]?jQuery.event.remove(elem,type):jQuery.removeEvent(elem,type,data.handle);if(cache[id]){delete cache[id];deleteExpando?delete elem[internalKey]:typeof elem.removeAttribute!==core_strundefined?elem.removeAttribute(internalKey):elem[internalKey]=null;core_deletedIds.push(id)}}}}});var iframe,getStyles,curCSS,ralpha=/alpha\([^)]*\)/i,ropacity=/opacity\s*=\s*([^)]*)/,rposition=/^(top|right|bottom|left)$/,rdisplayswap=/^(none|table(?!-c[ea]).+)/,rmargin=/^margin/,rnumsplit=new RegExp("^("+core_pnum+")(.*)$","i"),rnumnonpx=new RegExp("^("+core_pnum+")(?!px)[a-z%]+$","i"),rrelNum=new RegExp("^([+-])=("+core_pnum+")","i"),elemdisplay={BODY:"block"},cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:0,fontWeight:400},cssExpand=["Top","Right","Bottom","Left"],cssPrefixes=["Webkit","O","Moz","ms"];jQuery.fn.extend({css:function(name,value){return jQuery.access(this,function(elem,name,value){var len,styles,map={},i=0;if(jQuery.isArray(name)){styles=getStyles(elem);len=name.length;for(;len>i;i++)map[name[i]]=jQuery.css(elem,name[i],!1,styles);return map}return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)},show:function(){return showHide(this,!0)},hide:function(){return showHide(this)},toggle:function(state){var bool="boolean"==typeof state;return this.each(function(){(bool?state:isHidden(this))?jQuery(this).show():jQuery(this).hide()})}});jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return""===ret?"1":ret}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":jQuery.support.cssFloat?"cssFloat":"styleFloat"},style:function(elem,name,value,extra){if(elem&&3!==elem.nodeType&&8!==elem.nodeType&&elem.style){var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(style,origName));hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(value===undefined)return hooks&&"get"in hooks&&(ret=hooks.get(elem,!1,extra))!==undefined?ret:style[name];type=typeof value;if("string"===type&&(ret=rrelNum.exec(value))){value=(ret[1]+1)*ret[2]+parseFloat(jQuery.css(elem,name));type="number"}if(!(null==value||"number"===type&&isNaN(value))){"number"!==type||jQuery.cssNumber[origName]||(value+="px");jQuery.support.clearCloneStyle||""!==value||0!==name.indexOf("background")||(style[name]="inherit");if(!(hooks&&"set"in hooks&&(value=hooks.set(elem,value,extra))===undefined))try{style[name]=value}catch(e){}}}},css:function(elem,name,extra,styles){var num,val,hooks,origName=jQuery.camelCase(name);name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(elem.style,origName));hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];hooks&&"get"in hooks&&(val=hooks.get(elem,!0,extra));val===undefined&&(val=curCSS(elem,name,styles));"normal"===val&&name in cssNormalTransform&&(val=cssNormalTransform[name]);if(""===extra||extra){num=parseFloat(val);return extra===!0||jQuery.isNumeric(num)?num||0:val}return val},swap:function(elem,options,callback,args){var ret,name,old={};for(name in options){old[name]=elem.style[name];elem.style[name]=options[name]}ret=callback.apply(elem,args||[]);for(name in options)elem.style[name]=old[name];return ret}});if(window.getComputedStyle){getStyles=function(elem){return window.getComputedStyle(elem,null)};curCSS=function(elem,name,_computed){var width,minWidth,maxWidth,computed=_computed||getStyles(elem),ret=computed?computed.getPropertyValue(name)||computed[name]:undefined,style=elem.style;if(computed){""!==ret||jQuery.contains(elem.ownerDocument,elem)||(ret=jQuery.style(elem,name));if(rnumnonpx.test(ret)&&rmargin.test(name)){width=style.width;minWidth=style.minWidth;maxWidth=style.maxWidth;style.minWidth=style.maxWidth=style.width=ret;ret=computed.width;style.width=width;style.minWidth=minWidth;style.maxWidth=maxWidth}}return ret}}else if(document.documentElement.currentStyle){getStyles=function(elem){return elem.currentStyle};curCSS=function(elem,name,_computed){var left,rs,rsLeft,computed=_computed||getStyles(elem),ret=computed?computed[name]:undefined,style=elem.style;null==ret&&style&&style[name]&&(ret=style[name]);if(rnumnonpx.test(ret)&&!rposition.test(name)){left=style.left;rs=elem.runtimeStyle;rsLeft=rs&&rs.left;rsLeft&&(rs.left=elem.currentStyle.left);style.left="fontSize"===name?"1em":ret;ret=style.pixelLeft+"px";style.left=left;rsLeft&&(rs.left=rsLeft)}return""===ret?"auto":ret}}jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){return computed?0===elem.offsetWidth&&rdisplayswap.test(jQuery.css(elem,"display"))?jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)}):getWidthOrHeight(elem,name,extra):void 0},set:function(elem,value,extra){var styles=extra&&getStyles(elem);return setPositiveNumber(elem,value,extra?augmentWidthOrHeight(elem,name,extra,jQuery.support.boxSizing&&"border-box"===jQuery.css(elem,"boxSizing",!1,styles),styles):0)}}});jQuery.support.opacity||(jQuery.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:elem.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":computed?"1":""},set:function(elem,value){var style=elem.style,currentStyle=elem.currentStyle,opacity=jQuery.isNumeric(value)?"alpha(opacity="+100*value+")":"",filter=currentStyle&&currentStyle.filter||style.filter||"";style.zoom=1;if((value>=1||""===value)&&""===jQuery.trim(filter.replace(ralpha,""))&&style.removeAttribute){style.removeAttribute("filter");if(""===value||currentStyle&&!currentStyle.filter)return}style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):filter+" "+opacity}});jQuery(function(){jQuery.support.reliableMarginRight||(jQuery.cssHooks.marginRight={get:function(elem,computed){return computed?jQuery.swap(elem,{display:"inline-block"},curCSS,[elem,"marginRight"]):void 0}});!jQuery.support.pixelPosition&&jQuery.fn.position&&jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]={get:function(elem,computed){if(computed){computed=curCSS(elem,prop);return rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed}}}})});if(jQuery.expr&&jQuery.expr.filters){jQuery.expr.filters.hidden=function(elem){return elem.offsetWidth<=0&&elem.offsetHeight<=0||!jQuery.support.reliableHiddenOffsets&&"none"===(elem.style&&elem.style.display||jQuery.css(elem,"display"))};jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem)}}jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){for(var i=0,expanded={},parts="string"==typeof value?value.split(" "):[value];4>i;i++)expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];return expanded}};rmargin.test(prefix)||(jQuery.cssHooks[prefix+suffix].set=setPositiveNumber)});var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!manipulation_rcheckableType.test(type))}).map(function(i,elem){var val=jQuery(this).val();return null==val?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}});jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():null==value?"":value;s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)};traditional===undefined&&(traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional);if(jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){add(this.name,this.value)});else for(prefix in a)buildParams(prefix,a[prefix],traditional,add);return s.join("&").replace(r20,"+")};jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)}});jQuery.fn.hover=function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)};var ajaxLocParts,ajaxLocation,ajax_nonce=jQuery.now(),ajax_rquery=/\?/,rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,_load=jQuery.fn.load,prefilters={},transports={},allTypes="*/".concat("*");try{ajaxLocation=location.href}catch(e){ajaxLocation=document.createElement("a");ajaxLocation.href="";ajaxLocation=ajaxLocation.href}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[];jQuery.fn.load=function(url,params,callback){if("string"!=typeof url&&_load)return _load.apply(this,arguments);var selector,response,type,self=this,off=url.indexOf(" ");if(off>=0){selector=url.slice(off,url.length);url=url.slice(0,off)}if(jQuery.isFunction(params)){callback=params;params=undefined}else params&&"object"==typeof params&&(type="POST");self.length>0&&jQuery.ajax({url:url,type:type,dataType:"html",data:params}).done(function(responseText){response=arguments;self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText)}).complete(callback&&function(jqXHR,status){self.each(callback,response||[jqXHR.responseText,status,jqXHR])});return this};jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}});jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;callback=data;data=undefined}return jQuery.ajax({url:url,type:method,dataType:type,data:data,success:callback})}});jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":window.String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;if(2!==state){state=2;timeoutTimer&&clearTimeout(timeoutTimer);transport=undefined;responseHeadersString=headers||"";jqXHR.readyState=status>0?4:0;responses&&(response=ajaxHandleResponses(s,jqXHR,responses));if(status>=200&&300>status||304===status){if(s.ifModified){modified=jqXHR.getResponseHeader("Last-Modified");modified&&(jQuery.lastModified[cacheURL]=modified);modified=jqXHR.getResponseHeader("etag");modified&&(jQuery.etag[cacheURL]=modified)}if(204===status){isSuccess=!0;statusText="nocontent"}else if(304===status){isSuccess=!0;statusText="notmodified"}else{isSuccess=ajaxConvert(s,response);statusText=isSuccess.state;success=isSuccess.data;error=isSuccess.error;isSuccess=!error}}else{error=statusText;if(status||!statusText){statusText="error";0>status&&(status=0)}}jqXHR.status=status;jqXHR.statusText=(nativeStatusText||statusText)+"";isSuccess?deferred.resolveWith(callbackContext,[success,statusText,jqXHR]):deferred.rejectWith(callbackContext,[jqXHR,statusText,error]);jqXHR.statusCode(statusCode);statusCode=undefined;fireGlobals&&globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error]);completeDeferred.fireWith(callbackContext,[jqXHR,statusText]);if(fireGlobals){globalEventContext.trigger("ajaxComplete",[jqXHR,s]);--jQuery.active||jQuery.event.trigger("ajaxStop")}}}if("object"==typeof url){options=url;url=undefined}options=options||{};var parts,i,cacheURL,responseHeadersString,timeoutTimer,fireGlobals,transport,responseHeaders,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(2===state){if(!responseHeaders){responseHeaders={};for(;match=rheaders.exec(responseHeadersString);)responseHeaders[match[1].toLowerCase()]=match[2]}match=responseHeaders[key.toLowerCase()]}return null==match?null:match},getAllResponseHeaders:function(){return 2===state?responseHeadersString:null},setRequestHeader:function(name,value){var lname=name.toLowerCase();if(!state){name=requestHeadersNames[lname]=requestHeadersNames[lname]||name;requestHeaders[name]=value}return this},overrideMimeType:function(type){state||(s.mimeType=type);return this},statusCode:function(map){var code;if(map)if(2>state)for(code in map)statusCode[code]=[statusCode[code],map[code]];else jqXHR.always(map[jqXHR.status]);return this},abort:function(statusText){var finalText=statusText||strAbort;transport&&transport.abort(finalText);done(0,finalText);return this}};deferred.promise(jqXHR).complete=completeDeferred.add;jqXHR.success=jqXHR.done;jqXHR.error=jqXHR.fail;s.url=((url||s.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//");s.type=options.method||options.type||s.method||s.type;s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(core_rnotwhite)||[""];if(null==s.crossDomain){parts=rurl.exec(s.url.toLowerCase());s.crossDomain=!(!parts||parts[1]===ajaxLocParts[1]&&parts[2]===ajaxLocParts[2]&&(parts[3]||("http:"===parts[1]?80:443))==(ajaxLocParts[3]||("http:"===ajaxLocParts[1]?80:443)))}s.data&&s.processData&&"string"!=typeof s.data&&(s.data=jQuery.param(s.data,s.traditional));inspectPrefiltersOrTransports(prefilters,s,options,jqXHR);if(2===state)return jqXHR;fireGlobals=s.global;fireGlobals&&0===jQuery.active++&&jQuery.event.trigger("ajaxStart");s.type=s.type.toUpperCase();s.hasContent=!rnoContent.test(s.type);cacheURL=s.url;if(!s.hasContent){if(s.data){cacheURL=s.url+=(ajax_rquery.test(cacheURL)?"&":"?")+s.data;delete s.data}s.cache===!1&&(s.url=rts.test(cacheURL)?cacheURL.replace(rts,"$1_="+ajax_nonce++):cacheURL+(ajax_rquery.test(cacheURL)?"&":"?")+"_="+ajax_nonce++)}if(s.ifModified){jQuery.lastModified[cacheURL]&&jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL]);jQuery.etag[cacheURL]&&jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL])}(s.data&&s.hasContent&&s.contentType!==!1||options.contentType)&&jqXHR.setRequestHeader("Content-Type",s.contentType);jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+("*"!==s.dataTypes[0]?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers)jqXHR.setRequestHeader(i,s.headers[i]);if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===!1||2===state))return jqXHR.abort();strAbort="abort";for(i in{success:1,error:1,complete:1})jqXHR[i](s[i]);transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR);if(transport){jqXHR.readyState=1;fireGlobals&&globalEventContext.trigger("ajaxSend",[jqXHR,s]);s.async&&s.timeout>0&&(timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")},s.timeout));try{state=1;transport.send(requestHeaders,done)}catch(e){if(!(2>state))throw e;done(-1,e)}}else done(-1,"No Transport");return jqXHR},getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script")},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")}});jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(text){jQuery.globalEval(text);return text}}});jQuery.ajaxPrefilter("script",function(s){s.cache===undefined&&(s.cache=!1);if(s.crossDomain){s.type="GET";s.global=!1}});jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,head=document.head||jQuery("head")[0]||document.documentElement;return{send:function(_,callback){script=document.createElement("script");script.async=!0;s.scriptCharset&&(script.charset=s.scriptCharset);script.src=s.url;script.onload=script.onreadystatechange=function(_,isAbort){if(isAbort||!script.readyState||/loaded|complete/.test(script.readyState)){script.onload=script.onreadystatechange=null;script.parentNode&&script.parentNode.removeChild(script);script=null;isAbort||callback(200,"success")}};head.insertBefore(script,head.firstChild)},abort:function(){script&&script.onload(undefined,!0)}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+ajax_nonce++;this[callback]=!0;return callback}});jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=s.jsonp!==!1&&(rjsonp.test(s.url)?"url":"string"==typeof s.data&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(s.data)&&"data");if(jsonProp||"jsonp"===s.dataTypes[0]){callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback;jsonProp?s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName):s.jsonp!==!1&&(s.url+=(ajax_rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName);s.converters["script json"]=function(){responseContainer||jQuery.error(callbackName+" was not called");return responseContainer[0]};s.dataTypes[0]="json";overwritten=window[callbackName];window[callbackName]=function(){responseContainer=arguments};jqXHR.always(function(){window[callbackName]=overwritten;if(s[callbackName]){s.jsonpCallback=originalSettings.jsonpCallback;oldCallbacks.push(callbackName)}responseContainer&&jQuery.isFunction(overwritten)&&overwritten(responseContainer[0]);responseContainer=overwritten=undefined});return"script"}});var xhrCallbacks,xhrSupported,xhrId=0,xhrOnUnloadAbort=window.ActiveXObject&&function(){var key;for(key in xhrCallbacks)xhrCallbacks[key](undefined,!0)};jQuery.ajaxSettings.xhr=window.ActiveXObject?function(){return!this.isLocal&&createStandardXHR()||createActiveXHR()}:createStandardXHR;xhrSupported=jQuery.ajaxSettings.xhr();jQuery.support.cors=!!xhrSupported&&"withCredentials"in xhrSupported;xhrSupported=jQuery.support.ajax=!!xhrSupported;xhrSupported&&jQuery.ajaxTransport(function(s){if(!s.crossDomain||jQuery.support.cors){var callback;return{send:function(headers,complete){var handle,i,xhr=s.xhr();s.username?xhr.open(s.type,s.url,s.async,s.username,s.password):xhr.open(s.type,s.url,s.async);if(s.xhrFields)for(i in s.xhrFields)xhr[i]=s.xhrFields[i];s.mimeType&&xhr.overrideMimeType&&xhr.overrideMimeType(s.mimeType);s.crossDomain||headers["X-Requested-With"]||(headers["X-Requested-With"]="XMLHttpRequest");try{for(i in headers)xhr.setRequestHeader(i,headers[i])}catch(err){}xhr.send(s.hasContent&&s.data||null);callback=function(_,isAbort){var status,responseHeaders,statusText,responses;try{if(callback&&(isAbort||4===xhr.readyState)){callback=undefined;if(handle){xhr.onreadystatechange=jQuery.noop;xhrOnUnloadAbort&&delete xhrCallbacks[handle]}if(isAbort)4!==xhr.readyState&&xhr.abort();else{responses={};status=xhr.status;responseHeaders=xhr.getAllResponseHeaders();"string"==typeof xhr.responseText&&(responses.text=xhr.responseText);try{statusText=xhr.statusText}catch(e){statusText=""}status||!s.isLocal||s.crossDomain?1223===status&&(status=204):status=responses.text?200:404}}}catch(firefoxAccessException){isAbort||complete(-1,firefoxAccessException)}responses&&complete(status,statusText,responses,responseHeaders)};if(s.async)if(4===xhr.readyState)setTimeout(callback);else{handle=++xhrId;if(xhrOnUnloadAbort){if(!xhrCallbacks){xhrCallbacks={};jQuery(window).unload(xhrOnUnloadAbort)}xhrCallbacks[handle]=callback}xhr.onreadystatechange=callback}else callback()},abort:function(){callback&&callback(undefined,!0)}}}});var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([+-])=|)("+core_pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(prop,value){var end,unit,tween=this.createTween(prop,value),parts=rfxnum.exec(value),target=tween.cur(),start=+target||0,scale=1,maxIterations=20;if(parts){end=+parts[2];unit=parts[3]||(jQuery.cssNumber[prop]?"":"px");if("px"!==unit&&start){start=jQuery.css(tween.elem,prop,!0)||end||1;do{scale=scale||".5";start/=scale;jQuery.style(tween.elem,prop,start+unit)}while(scale!==(scale=tween.cur()/target)&&1!==scale&&--maxIterations)}tween.unit=unit;tween.start=start;tween.end=parts[1]?start+(parts[1]+1)*end:end}return tween}]};jQuery.Animation=jQuery.extend(Animation,{tweener:function(props,callback){if(jQuery.isFunction(props)){callback=props;props=["*"]}else props=props.split(" ");for(var prop,index=0,length=props.length;length>index;index++){prop=props[index];tweeners[prop]=tweeners[prop]||[];tweeners[prop].unshift(callback)}},prefilter:function(callback,prepend){prepend?animationPrefilters.unshift(callback):animationPrefilters.push(callback)}});jQuery.Tween=Tween;Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem;this.prop=prop;this.easing=easing||"swing";this.options=options;this.start=this.now=this.cur();this.end=end;this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];this.options.duration?this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration):this.pos=eased=percent;this.now=(this.end-this.start)*eased+this.start;this.options.step&&this.options.step.call(this.elem,this.now,this);hooks&&hooks.set?hooks.set(this):Tween.propHooks._default.set(this);return this}};Tween.prototype.init.prototype=Tween.prototype;Tween.propHooks={_default:{get:function(tween){var result;if(null!=tween.elem[tween.prop]&&(!tween.elem.style||null==tween.elem.style[tween.prop]))return tween.elem[tween.prop];result=jQuery.css(tween.elem,tween.prop,"");return result&&"auto"!==result?result:0},set:function(tween){jQuery.fx.step[tween.prop]?jQuery.fx.step[tween.prop](tween):tween.elem.style&&(null!=tween.elem.style[jQuery.cssProps[tween.prop]]||jQuery.cssHooks[tween.prop])?jQuery.style(tween.elem,tween.prop,tween.now+tween.unit):tween.elem[tween.prop]=tween.now}}};Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){tween.elem.nodeType&&tween.elem.parentNode&&(tween.elem[tween.prop]=tween.now);
}};jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return null==speed||"boolean"==typeof speed?cssFn.apply(this,arguments):this.animate(genFx(name,!0),speed,easing,callback)}});jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);doAnimation.finish=function(){anim.stop(!0)};(empty||jQuery._data(this,"finish"))&&anim.stop(!0)};doAnimation.finish=doAnimation;return empty||optall.queue===!1?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop;stop(gotoEnd)};if("string"!=typeof type){gotoEnd=clearQueue;clearQueue=type;type=undefined}clearQueue&&type!==!1&&this.queue(type||"fx",[]);return this.each(function(){var dequeue=!0,index=null!=type&&type+"queueHooks",timers=jQuery.timers,data=jQuery._data(this);if(index)data[index]&&data[index].stop&&stopQueue(data[index]);else for(index in data)data[index]&&data[index].stop&&rrun.test(index)&&stopQueue(data[index]);for(index=timers.length;index--;)if(timers[index].elem===this&&(null==type||timers[index].queue===type)){timers[index].anim.stop(gotoEnd);dequeue=!1;timers.splice(index,1)}(dequeue||!gotoEnd)&&jQuery.dequeue(this,type)})},finish:function(type){type!==!1&&(type=type||"fx");return this.each(function(){var index,data=jQuery._data(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;data.finish=!0;jQuery.queue(this,type,[]);hooks&&hooks.cur&&hooks.cur.finish&&hooks.cur.finish.call(this);for(index=timers.length;index--;)if(timers[index].elem===this&&timers[index].queue===type){timers[index].anim.stop(!0);timers.splice(index,1)}for(index=0;length>index;index++)queue[index]&&queue[index].finish&&queue[index].finish.call(this);delete data.finish})}});jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}});jQuery.speed=function(speed,easing,fn){var opt=speed&&"object"==typeof speed?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};opt.duration=jQuery.fx.off?0:"number"==typeof opt.duration?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default;(null==opt.queue||opt.queue===!0)&&(opt.queue="fx");opt.old=opt.complete;opt.complete=function(){jQuery.isFunction(opt.old)&&opt.old.call(this);opt.queue&&jQuery.dequeue(this,opt.queue)};return opt};jQuery.easing={linear:function(p){return p},swing:function(p){return.5-Math.cos(p*Math.PI)/2}};jQuery.timers=[];jQuery.fx=Tween.prototype.init;jQuery.fx.tick=function(){var timer,timers=jQuery.timers,i=0;fxNow=jQuery.now();for(;i<timers.length;i++){timer=timers[i];timer()||timers[i]!==timer||timers.splice(i--,1)}timers.length||jQuery.fx.stop();fxNow=undefined};jQuery.fx.timer=function(timer){timer()&&jQuery.timers.push(timer)&&jQuery.fx.start()};jQuery.fx.interval=13;jQuery.fx.start=function(){timerId||(timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval))};jQuery.fx.stop=function(){clearInterval(timerId);timerId=null};jQuery.fx.speeds={slow:600,fast:200,_default:400};jQuery.fx.step={};jQuery.expr&&jQuery.expr.filters&&(jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length});jQuery.fn.offset=function(options){if(arguments.length)return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)});var docElem,win,box={top:0,left:0},elem=this[0],doc=elem&&elem.ownerDocument;if(doc){docElem=doc.documentElement;if(!jQuery.contains(docElem,elem))return box;typeof elem.getBoundingClientRect!==core_strundefined&&(box=elem.getBoundingClientRect());win=getWindow(doc);return{top:box.top+(win.pageYOffset||docElem.scrollTop)-(docElem.clientTop||0),left:box.left+(win.pageXOffset||docElem.scrollLeft)-(docElem.clientLeft||0)}}};jQuery.offset={setOffset:function(elem,options,i){var position=jQuery.css(elem,"position");"static"===position&&(elem.style.position="relative");var curTop,curLeft,curElem=jQuery(elem),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),calculatePosition=("absolute"===position||"fixed"===position)&&jQuery.inArray("auto",[curCSSTop,curCSSLeft])>-1,props={},curPosition={};if(calculatePosition){curPosition=curElem.position();curTop=curPosition.top;curLeft=curPosition.left}else{curTop=parseFloat(curCSSTop)||0;curLeft=parseFloat(curCSSLeft)||0}jQuery.isFunction(options)&&(options=options.call(elem,i,curOffset));null!=options.top&&(props.top=options.top-curOffset.top+curTop);null!=options.left&&(props.left=options.left-curOffset.left+curLeft);"using"in options?options.using.call(elem,props):curElem.css(props)}};jQuery.fn.extend({position:function(){if(this[0]){var offsetParent,offset,parentOffset={top:0,left:0},elem=this[0];if("fixed"===jQuery.css(elem,"position"))offset=elem.getBoundingClientRect();else{offsetParent=this.offsetParent();offset=this.offset();jQuery.nodeName(offsetParent[0],"html")||(parentOffset=offsetParent.offset());parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",!0);parentOffset.left+=jQuery.css(offsetParent[0],"borderLeftWidth",!0)}return{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",!0),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var offsetParent=this.offsetParent||document.documentElement;offsetParent&&!jQuery.nodeName(offsetParent,"html")&&"static"===jQuery.css(offsetParent,"position");)offsetParent=offsetParent.offsetParent;return offsetParent||document.documentElement})}});jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top=/Y/.test(prop);jQuery.fn[method]=function(val){return jQuery.access(this,function(elem,method,val){var win=getWindow(elem);if(val===undefined)return win?prop in win?win[prop]:win.document.documentElement[method]:elem[method];win?win.scrollTo(top?jQuery(win).scrollLeft():val,top?val:jQuery(win).scrollTop()):elem[method]=val},method,val,arguments.length,null)}});jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||"boolean"!=typeof margin),extra=defaultExtra||(margin===!0||value===!0?"margin":"border");return jQuery.access(this,function(elem,type,value){var doc;if(jQuery.isWindow(elem))return elem.document.documentElement["client"+name];if(9===elem.nodeType){doc=elem.documentElement;return Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])}return value===undefined?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:undefined,chainable,null)}})});window.jQuery=window.$=jQuery;"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return jQuery})}(window);define("gmaps",[],function(){return google.maps});window.Modernizr=function(window,document,undefined){function setCss(str){mStyle.cssText=str}function setCssAll(str1,str2){return setCss(prefixes.join(str1+";")+(str2||""))}function is(obj,type){return typeof obj===type}function contains(str,substr){return!!~(""+str).indexOf(substr)}function testProps(props,prefixed){for(var i in props){var prop=props[i];if(!contains(prop,"-")&&mStyle[prop]!==undefined)return"pfx"==prefixed?prop:!0}return!1}function testDOMProps(props,obj,elem){for(var i in props){var item=obj[props[i]];if(item!==undefined)return elem===!1?props[i]:is(item,"function")?item.bind(elem||obj):item}return!1}function testPropsAll(prop,prefixed,elem){var ucProp=prop.charAt(0).toUpperCase()+prop.slice(1),props=(prop+" "+cssomPrefixes.join(ucProp+" ")+ucProp).split(" ");if(is(prefixed,"string")||is(prefixed,"undefined"))return testProps(props,prefixed);props=(prop+" "+domPrefixes.join(ucProp+" ")+ucProp).split(" ");return testDOMProps(props,prefixed,elem)}function webforms(){Modernizr.input=function(props){for(var i=0,len=props.length;len>i;i++)attrs[props[i]]=!!(props[i]in inputElem);attrs.list&&(attrs.list=!(!document.createElement("datalist")||!window.HTMLDataListElement));return attrs}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "));Modernizr.inputtypes=function(props){for(var bool,inputElemType,defaultView,i=0,len=props.length;len>i;i++){inputElem.setAttribute("type",inputElemType=props[i]);bool="text"!==inputElem.type;if(bool){inputElem.value=smile;inputElem.style.cssText="position:absolute;visibility:hidden;";if(/^range$/.test(inputElemType)&&inputElem.style.WebkitAppearance!==undefined){docElement.appendChild(inputElem);defaultView=document.defaultView;bool=defaultView.getComputedStyle&&"textfield"!==defaultView.getComputedStyle(inputElem,null).WebkitAppearance&&0!==inputElem.offsetHeight;docElement.removeChild(inputElem)}else/^(search|tel)$/.test(inputElemType)||(bool=/^(url|email)$/.test(inputElemType)?inputElem.checkValidity&&inputElem.checkValidity()===!1:inputElem.value!=smile)}inputs[props[i]]=!!bool}return inputs}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var featureName,hasOwnProp,version="2.6.2",Modernizr={},enableClasses=!0,docElement=document.documentElement,mod="modernizr",modElem=document.createElement(mod),mStyle=modElem.style,inputElem=document.createElement("input"),smile=":)",toString={}.toString,prefixes=" -webkit- -moz- -o- -ms- ".split(" "),omPrefixes="Webkit Moz O ms",cssomPrefixes=omPrefixes.split(" "),domPrefixes=omPrefixes.toLowerCase().split(" "),ns={svg:"http://www.w3.org/2000/svg"},tests={},inputs={},attrs={},classes=[],slice=classes.slice,injectElementWithStyles=function(rule,callback,nodes,testnames){var style,ret,node,docOverflow,div=document.createElement("div"),body=document.body,fakeBody=body||document.createElement("body");if(parseInt(nodes,10))for(;nodes--;){node=document.createElement("div");node.id=testnames?testnames[nodes]:mod+(nodes+1);div.appendChild(node)}style=["&#173;",'<style id="s',mod,'">',rule,"</style>"].join("");div.id=mod;(body?div:fakeBody).innerHTML+=style;fakeBody.appendChild(div);if(!body){fakeBody.style.background="";fakeBody.style.overflow="hidden";docOverflow=docElement.style.overflow;docElement.style.overflow="hidden";docElement.appendChild(fakeBody)}ret=callback(div,rule);if(body)div.parentNode.removeChild(div);else{fakeBody.parentNode.removeChild(fakeBody);docElement.style.overflow=docOverflow}return!!ret},testMediaQuery=function(mq){var matchMedia=window.matchMedia||window.msMatchMedia;if(matchMedia)return matchMedia(mq).matches;var bool;injectElementWithStyles("@media "+mq+" { #"+mod+" { position: absolute; } }",function(node){bool="absolute"==(window.getComputedStyle?getComputedStyle(node,null):node.currentStyle).position});return bool},isEventSupported=function(){function isEventSupported(eventName,element){element=element||document.createElement(TAGNAMES[eventName]||"div");eventName="on"+eventName;var isSupported=eventName in element;if(!isSupported){element.setAttribute||(element=document.createElement("div"));if(element.setAttribute&&element.removeAttribute){element.setAttribute(eventName,"");isSupported=is(element[eventName],"function");is(element[eventName],"undefined")||(element[eventName]=undefined);element.removeAttribute(eventName)}}element=null;return isSupported}var TAGNAMES={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return isEventSupported}(),_hasOwnProperty={}.hasOwnProperty;hasOwnProp=is(_hasOwnProperty,"undefined")||is(_hasOwnProperty.call,"undefined")?function(object,property){return property in object&&is(object.constructor.prototype[property],"undefined")}:function(object,property){return _hasOwnProperty.call(object,property)};Function.prototype.bind||(Function.prototype.bind=function(that){var target=this;if("function"!=typeof target)throw new TypeError;var args=slice.call(arguments,1),bound=function(){if(this instanceof bound){var F=function(){};F.prototype=target.prototype;var self=new F,result=target.apply(self,args.concat(slice.call(arguments)));return Object(result)===result?result:self}return target.apply(that,args.concat(slice.call(arguments)))};return bound});tests.flexbox=function(){return testPropsAll("flexWrap")};tests.flexboxlegacy=function(){return testPropsAll("boxDirection")};tests.canvas=function(){var elem=document.createElement("canvas");return!(!elem.getContext||!elem.getContext("2d"))};tests.canvastext=function(){return!(!Modernizr.canvas||!is(document.createElement("canvas").getContext("2d").fillText,"function"))};tests.webgl=function(){return!!window.WebGLRenderingContext};tests.touch=function(){var bool;"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch?bool=!0:injectElementWithStyles(["@media (",prefixes.join("touch-enabled),("),mod,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(node){bool=9===node.offsetTop});return bool};tests.geolocation=function(){return"geolocation"in navigator};tests.postmessage=function(){return!!window.postMessage};tests.websqldatabase=function(){return!!window.openDatabase};tests.indexedDB=function(){return!!testPropsAll("indexedDB",window)};tests.hashchange=function(){return isEventSupported("hashchange",window)&&(document.documentMode===undefined||document.documentMode>7)};tests.history=function(){return!(!window.history||!history.pushState)};tests.draganddrop=function(){var div=document.createElement("div");return"draggable"in div||"ondragstart"in div&&"ondrop"in div};tests.websockets=function(){return"WebSocket"in window||"MozWebSocket"in window};tests.rgba=function(){setCss("background-color:rgba(150,255,150,.5)");return contains(mStyle.backgroundColor,"rgba")};tests.hsla=function(){setCss("background-color:hsla(120,40%,100%,.5)");return contains(mStyle.backgroundColor,"rgba")||contains(mStyle.backgroundColor,"hsla")};tests.multiplebgs=function(){setCss("background:url(https://),url(https://),red url(https://)");return/(url\s*\(.*?){3}/.test(mStyle.background)};tests.backgroundsize=function(){return testPropsAll("backgroundSize")};tests.borderimage=function(){return testPropsAll("borderImage")};tests.borderradius=function(){return testPropsAll("borderRadius")};tests.boxshadow=function(){return testPropsAll("boxShadow")};tests.textshadow=function(){return""===document.createElement("div").style.textShadow};tests.opacity=function(){setCssAll("opacity:.55");return/^0.55$/.test(mStyle.opacity)};tests.cssanimations=function(){return testPropsAll("animationName")};tests.csscolumns=function(){return testPropsAll("columnCount")};tests.cssgradients=function(){var str1="background-image:",str2="gradient(linear,left top,right bottom,from(#9f9),to(white));",str3="linear-gradient(left top,#9f9, white);";setCss((str1+"-webkit- ".split(" ").join(str2+str1)+prefixes.join(str3+str1)).slice(0,-str1.length));return contains(mStyle.backgroundImage,"gradient")};tests.cssreflections=function(){return testPropsAll("boxReflect")};tests.csstransforms=function(){return!!testPropsAll("transform")};tests.csstransforms3d=function(){var ret=!!testPropsAll("perspective");ret&&"webkitPerspective"in docElement.style&&injectElementWithStyles("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(node,rule){ret=9===node.offsetLeft&&3===node.offsetHeight});return ret};tests.csstransitions=function(){return testPropsAll("transition")};tests.fontface=function(){var bool;injectElementWithStyles('@font-face {font-family:"font";src:url("https://")}',function(node,rule){var style=document.getElementById("smodernizr"),sheet=style.sheet||style.styleSheet,cssText=sheet?sheet.cssRules&&sheet.cssRules[0]?sheet.cssRules[0].cssText:sheet.cssText||"":"";bool=/src/i.test(cssText)&&0===cssText.indexOf(rule.split(" ")[0])});return bool};tests.generatedcontent=function(){var bool;injectElementWithStyles(["#",mod,"{font:0/0 a}#",mod,':after{content:"',smile,'";visibility:hidden;font:3px/1 a}'].join(""),function(node){bool=node.offsetHeight>=3});return bool};tests.video=function(){var elem=document.createElement("video"),bool=!1;try{if(bool=!!elem.canPlayType){bool=new Boolean(bool);bool.ogg=elem.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"");bool.h264=elem.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"");bool.webm=elem.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")}}catch(e){}return bool};tests.audio=function(){var elem=document.createElement("audio"),bool=!1;try{if(bool=!!elem.canPlayType){bool=new Boolean(bool);bool.ogg=elem.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"");bool.mp3=elem.canPlayType("audio/mpeg;").replace(/^no$/,"");bool.wav=elem.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"");bool.m4a=(elem.canPlayType("audio/x-m4a;")||elem.canPlayType("audio/aac;")).replace(/^no$/,"")}}catch(e){}return bool};tests.localstorage=function(){try{localStorage.setItem(mod,mod);localStorage.removeItem(mod);return!0}catch(e){return!1}};tests.sessionstorage=function(){try{sessionStorage.setItem(mod,mod);sessionStorage.removeItem(mod);return!0}catch(e){return!1}};tests.webworkers=function(){return!!window.Worker};tests.applicationcache=function(){return!!window.applicationCache};tests.svg=function(){return!!document.createElementNS&&!!document.createElementNS(ns.svg,"svg").createSVGRect};tests.inlinesvg=function(){var div=document.createElement("div");div.innerHTML="<svg/>";return(div.firstChild&&div.firstChild.namespaceURI)==ns.svg};tests.smil=function(){return!!document.createElementNS&&/SVGAnimate/.test(toString.call(document.createElementNS(ns.svg,"animate")))};tests.svgclippaths=function(){return!!document.createElementNS&&/SVGClipPath/.test(toString.call(document.createElementNS(ns.svg,"clipPath")))};for(var feature in tests)if(hasOwnProp(tests,feature)){featureName=feature.toLowerCase();Modernizr[featureName]=tests[feature]();classes.push((Modernizr[featureName]?"":"no-")+featureName)}Modernizr.input||webforms();Modernizr.addTest=function(feature,test){if("object"==typeof feature)for(var key in feature)hasOwnProp(feature,key)&&Modernizr.addTest(key,feature[key]);else{feature=feature.toLowerCase();if(Modernizr[feature]!==undefined)return Modernizr;test="function"==typeof test?test():test;"undefined"!=typeof enableClasses&&enableClasses&&(docElement.className+=" "+(test?"":"no-")+feature);Modernizr[feature]=test}return Modernizr};setCss("");modElem=inputElem=null;Modernizr._version=version;Modernizr._prefixes=prefixes;Modernizr._domPrefixes=domPrefixes;Modernizr._cssomPrefixes=cssomPrefixes;Modernizr.mq=testMediaQuery;Modernizr.hasEvent=isEventSupported;Modernizr.testProp=function(prop){return testProps([prop])};Modernizr.testAllProps=testPropsAll;Modernizr.testStyles=injectElementWithStyles;docElement.className=docElement.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(enableClasses?" js "+classes.join(" "):"");return Modernizr}(this,this.document);!function(a,b,c){function d(a){return"[object Function]"==o.call(a)}function e(a){return"string"==typeof a}function f(){}function g(a){return!a||"loaded"==a||"complete"==a||"uninitialized"==a}function h(){var a=p.shift();q=1,a?a.t?m(function(){("c"==a.t?B.injectCss:B.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):q=0}function i(a,c,d,e,f,i,j){function k(b){if(!o&&g(l.readyState)&&(u.r=o=1,!q&&h(),l.onload=l.onreadystatechange=null,b)){"img"!=a&&m(function(){t.removeChild(l)},50);for(var d in y[c])y[c].hasOwnProperty(d)&&y[c][d].onload()}}var j=j||B.errorTimeout,l=b.createElement(a),o=0,r=0,u={t:d,s:c,e:f,a:i,x:j};1===y[c]&&(r=1,y[c]=[]),"object"==a?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,r)},p.splice(e,0,u),"img"!=a&&(r||2===y[c]?(t.insertBefore(l,s?null:n),m(k,j)):y[c].push(l))}function j(a,b,c,d,f){return q=0,b=b||"j",e(a)?i("c"==b?v:u,a,b,this.i++,c,d,f):(p.splice(this.i++,0,a),1==p.length&&h()),this}function k(){var a=B;return a.loader={load:j,i:0},a}var A,B,l=b.documentElement,m=a.setTimeout,n=b.getElementsByTagName("script")[0],o={}.toString,p=[],q=0,r="MozAppearance"in l.style,s=r&&!!b.createRange().compareNode,t=s?l:n.parentNode,l=a.opera&&"[object Opera]"==o.call(a.opera),l=!!b.attachEvent&&!l,u=r?"object":l?"script":"img",v=l?"script":u,w=Array.isArray||function(a){return"[object Array]"==o.call(a)},x=[],y={},z={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}};B=function(a){function b(a){var e,f,g,a=a.split("!"),b=x.length,c=a.pop(),d=a.length,c={url:c,origUrl:c,prefixes:a};for(f=0;d>f;f++)g=a[f].split("="),(e=z[g.shift()])&&(c=e(c,g));for(f=0;b>f;f++)c=x[f](c);return c}function g(a,e,f,g,h){var i=b(a),j=i.autoCallback;i.url.split(".").pop().split("?").shift(),i.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]),i.instead?i.instead(a,e,f,g,h):(y[i.url]?i.noexec=!0:y[i.url]=1,f.load(i.url,i.forceCSS||!i.forceJS&&"css"==i.url.split(".").pop().split("?").shift()?"c":c,i.noexec,i.attrs,i.timeout),(d(e)||d(j))&&f.load(function(){k(),e&&e(i.origUrl,h,g),j&&j(i.origUrl,h,g),y[i.url]=2})))}function h(a,b){function c(a,c){if(a){if(e(a))c||(j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}),g(a,j,b,0,h);else if(Object(a)===a)for(n in m=function(){var c,b=0;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(n)&&(!c&&!--m&&(d(j)?j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}:j[n]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),l()}}(k[n])),g(a[n],j,b,n,h))}else!c&&l()}var m,n,h=!!a.test,i=a.load||a.both,j=a.callback||f,k=j,l=a.complete||f;c(h?a.yep:a.nope,!!i),i&&c(i)}var i,j,l=this.yepnope.loader;if(e(a))g(a,0,l,0);else if(w(a))for(i=0;i<a.length;i++)j=a[i],e(j)?g(j,0,l,0):w(j)?B(j):Object(j)===j&&h(j,l);else Object(a)===a&&h(a,l)},B.addPrefix=function(a,b){z[a]=b},B.addFilter=function(a){x.push(a)},B.errorTimeout=1e4,null==b.readyState&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",A=function(){b.removeEventListener("DOMContentLoaded",A,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var l,o,k=b.createElement("script"),e=e||B.errorTimeout;k.src=a;for(o in d)k.setAttribute(o,d[o]);c=j?h:c||f,k.onreadystatechange=k.onload=function(){!l&&g(k.readyState)&&(l=1,c(),k.onload=k.onreadystatechange=null)},m(function(){l||(l=1,c(1))},e),i?k.onload():n.parentNode.insertBefore(k,n)},a.yepnope.injectCss=function(a,c,d,e,g,i){var j,e=b.createElement("link"),c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d)e.setAttribute(j,d[j]);g||(n.parentNode.insertBefore(e,n),m(c,0))}}(this,document);Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};window.matchMedia||(window.matchMedia=function(win){"use strict";var _doc=win.document,_viewport=_doc.documentElement,_queries=[],_queryID=0,_type="",_features={},_typeExpr=/\s*(only|not)?\s*(screen|print|[a-z\-]+)\s*(and)?\s*/i,_mediaExpr=/^\s*\(\s*(-[a-z]+-)?(min-|max-)?([a-z\-]+)\s*(:?\s*([0-9]+(\.[0-9]+)?|portrait|landscape)(px|em|dppx|dpcm|rem|%|in|cm|mm|ex|pt|pc|\/([0-9]+(\.[0-9]+)?))?)?\s*\)\s*$/,_timer=0,_matches=function(media){var mql=-1!==media.indexOf(",")&&media.split(",")||[media],mqIndex=mql.length-1,mqLength=mqIndex,mq=null,negateType=null,negateTypeFound="",negateTypeIndex=0,negate=!1,type="",exprListStr="",exprList=null,exprIndex=0,exprLength=0,expr=null,prefix="",length="",unit="",value="",feature="",match=!1;if(""===media)return!0;do{mq=mql[mqLength-mqIndex];negate=!1;negateType=mq.match(_typeExpr);if(negateType){negateTypeFound=negateType[0];negateTypeIndex=negateType.index}if(!negateType||-1===mq.substring(0,negateTypeIndex).indexOf("(")&&(negateTypeIndex||!negateType[3]&&negateTypeFound!==negateType.input))match=!1;else{exprListStr=mq;negate="not"===negateType[1];if(!negateTypeIndex){type=negateType[2];exprListStr=mq.substring(negateTypeFound.length)}match=type===_type||"all"===type||""===type;exprList=-1!==exprListStr.indexOf(" and ")&&exprListStr.split(" and ")||[exprListStr];exprIndex=exprList.length-1;exprLength=exprIndex;if(match&&exprIndex>=0&&""!==exprListStr)do{expr=exprList[exprIndex].match(_mediaExpr);if(!expr||!_features[expr[3]]){match=!1;break}prefix=expr[2];length=expr[5];value=length;unit=expr[7];feature=_features[expr[3]];unit&&(value="px"===unit?Number(length):"em"===unit||"rem"===unit?16*length:expr[8]?(length/expr[8]).toFixed(2):"dppx"===unit?96*length:"dpcm"===unit?.3937*length:Number(length));match="min-"===prefix&&value?feature>=value:"max-"===prefix&&value?value>=feature:value?feature===value:!!feature;if(!match)break}while(exprIndex--);if(match)break}}while(mqIndex--);return negate?!match:match},_setFeature=function(){var w=win.innerWidth||_viewport.clientWidth,h=win.innerHeight||_viewport.clientHeight,dw=win.screen.width,dh=win.screen.height,c=win.screen.colorDepth,x=win.devicePixelRatio;_features.width=w;_features.height=h;_features["aspect-ratio"]=(w/h).toFixed(2);_features["device-width"]=dw;_features["device-height"]=dh;_features["device-aspect-ratio"]=(dw/dh).toFixed(2);_features.color=c;_features["color-index"]=Math.pow(2,c);_features.orientation=h>=w?"portrait":"landscape";_features.resolution=x&&96*x||win.screen.deviceXDPI||96;_features["device-pixel-ratio"]=x||1},_watch=function(){clearTimeout(_timer);_timer=setTimeout(function(){var query=null,qIndex=_queryID-1,qLength=qIndex,match=!1;if(qIndex>=0){_setFeature();do{query=_queries[qLength-qIndex];if(query){match=_matches(query.mql.media);if(match&&!query.mql.matches||!match&&query.mql.matches){query.mql.matches=match;if(query.listeners)for(var i=0,il=query.listeners.length;il>i;i++)query.listeners[i]&&query.listeners[i].call(win,query.mql)}}}while(qIndex--)}},10)},_init=function(){var head=_doc.getElementsByTagName("head")[0],style=_doc.createElement("style"),info=null,typeList=["screen","print","speech","projection","handheld","tv","braille","embossed","tty"],typeIndex=0,typeLength=typeList.length,cssText="#mediamatchjs { position: relative; z-index: 0; }",eventPrefix="",addEvent=win.addEventListener||(eventPrefix="on")&&win.attachEvent;style.type="text/css";style.id="mediamatchjs";head.appendChild(style);info=win.getComputedStyle&&win.getComputedStyle(style)||style.currentStyle;for(;typeLength>typeIndex;typeIndex++)cssText+="@media "+typeList[typeIndex]+" { #mediamatchjs { z-index: "+typeIndex+" } }";style.styleSheet?style.styleSheet.cssText=cssText:style.textContent=cssText;_type=typeList[1*info.zIndex||0];head.removeChild(style);_setFeature();addEvent(eventPrefix+"resize",_watch);addEvent(eventPrefix+"orientationchange",_watch)};_init();return function(media){var id=_queryID,mql={matches:!1,media:media,addListener:function(listener){_queries[id].listeners||(_queries[id].listeners=[]);listener&&_queries[id].listeners.push(listener)},removeListener:function(listener){var query=_queries[id],i=0,il=0;if(query){il=query.listeners.length;for(;il>i;i++)query.listeners[i]===listener&&query.listeners.splice(i,1)}}};if(""===media){mql.matches=!0;return mql}mql.matches=_matches(media);_queryID=_queries.push({mql:mql,listeners:null});return mql}}(window));!function($){$.hisrc={bandwidth:null,connectionTestResult:null,connectionKbps:null,connectionType:null,devicePixelRatio:null};$.hisrc.defaults={useTransparentGif:!1,backgroundSize:"cover",autoLoadBackground:!0,transparentGifSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAMz/AAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",minKbpsForHighBandwidth:window.minKbpsForHighBandwidth?window.minKbpsForHighBandwidth:300,speedTestUri:"http://"+location.host+"/us/static/img/js-speedtest.jpg",speedTestKB:10,speedTestExpireMinutes:30,forcedBandwidth:!1};$.hisrc.speedTest=function(){$(window).hisrc()};$.fn.hisrc=function(options){var settings=$.extend({},$.hisrc.defaults,options),$els=$(this),connection=navigator.connection||{type:0},isSlowConnection=3==connection.type||4==connection.type||/^[23]g$/.test(connection.type),debug=window.location.href.indexOf("debug")>0;$.hisrc.devicePixelRatio=1;void 0!==window.devicePixelRatio&&($.hisrc.devicePixelRatio=window.devicePixelRatio);debug&&$("body").append("hisrc devicePixelRatio="+$.hisrc.devicePixelRatio+"<br />");var speedConnectionStatus,speedTestUri=settings.speedTestUri,STATUS_LOADING="loading",STATUS_COMPLETE="complete",LOCAL_STORAGE_KEY="fsjs",initSpeedTest=function(){debug&&$("body").append("initSpeedTest 1<br />");if(!speedConnectionStatus){debug&&$("body").append("before forcedBandwidth<br />");if(settings.forcedBandwidth){$.hisrc.bandwidth=settings.forcedBandwidth;$.hisrc.connectionTestResult="forced";speedConnectionStatus=STATUS_COMPLETE;$els.trigger("speedTestComplete.hisrc")}else{debug&&$("body").append("before devicePixelRatio = 1<br />");if(1!==$.hisrc.devicePixelRatio){debug&&$("body").append("before connectionType<br />");$.hisrc.connectionType=connection.type;if(isSlowConnection){$.hisrc.connectionTestResult="connTypeSlow";speedConnectionStatus=STATUS_COMPLETE;$els.trigger("speedTestComplete.hisrc")}else{debug&&$("body").append("check local storage for speed test result<br />");try{var fsData=JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY));if(null!==fsData&&(new Date).getTime()<fsData.exp){$.hisrc.bandwidth=fsData.bw;$.hisrc.connectionKbps=fsData.kbps;$.hisrc.connectionTestResult="localStorage";speedConnectionStatus=STATUS_COMPLETE;$els.trigger("speedTestComplete.hisrc");return}}catch(e){}debug&&$("body").append("before setting image url<br /><br />");var endTime,startTime,speedTestTimeoutMS,speedTestImg=document.createElement("img");speedTestImg.onload=function(){debug&&$("body").append("fire image onload<br />");endTime=(new Date).getTime();var duration=(endTime-startTime)/1e3;debug&&$("body").append("duration="+duration+"<br />");duration=0===duration?1:duration;debug&&$("body").append("duration after compare ="+duration+"<br />");$.hisrc.connectionKbps=1024*settings.speedTestKB*8/duration/1024;$.hisrc.bandwidth=$.hisrc.connectionKbps>=settings.minKbpsForHighBandwidth?"high":"low";debug&&$("body").append("connectionKbps="+$.hisrc.connectionKbps+" /bandwidth="+$.hisrc.bandwidth+" /minKbpsForHighBandwidth="+settings.minKbpsForHighBandwidth+"<br />");speedTestComplete("networkSuccess")};speedTestImg.onerror=function(){debug&&$("body").append("image error <br />");speedTestComplete("networkError",5)};speedTestImg.onabort=function(){debug&&$("body").append("image abort <br />");speedTestComplete("networkAbort",5)};startTime=(new Date).getTime();speedConnectionStatus=STATUS_LOADING;"https:"===document.location.protocol&&(speedTestUri=speedTestUri.replace("http:","https:"));speedTestImg.src=speedTestUri+"?r="+Math.random();debug&&$("body").append("test url:"+speedTestImg.src+"<br />");speedTestTimeoutMS=8*settings.speedTestKB/settings.minKbpsForHighBandwidth*1e3+350;setTimeout(function(){debug&&$("body").append("slow connection, fire complete before image download finished<br />");speedTestComplete("networkSlow")},speedTestTimeoutMS)}}else{$.hisrc.connectionTestResult="skip";speedConnectionStatus=STATUS_COMPLETE;$els.trigger("speedTestComplete.hisrc");
}}}},speedTestComplete=function(connTestResult,expireMinutes){if(speedConnectionStatus!==STATUS_COMPLETE){speedConnectionStatus=STATUS_COMPLETE;$.hisrc.connectionTestResult=connTestResult;try{expireMinutes||(expireMinutes=settings.speedTestExpireMinutes);var fsDataToSet={kbps:$.hisrc.connectionKbps,bw:$.hisrc.bandwidth,exp:(new Date).getTime()+6e4*expireMinutes};localStorage.setItem(LOCAL_STORAGE_KEY,JSON.stringify(fsDataToSet))}catch(e){}$els.trigger("speedTestComplete.hisrc")}},setImageSource=function($el,src,elType){debug&&$("body").append("setImageSource src="+src+" / elType="+elType+"<br />");if(settings.useTransparentGif||"IMG"!=elType){"IMG"==elType&&$el.attr("src",settings.transparentGifSrc);"IMG"==elType||settings.autoLoadBackground?$el.css("max-height","100%").css("max-width","100%").css("background",'url("'+src+'") no-repeat center center').css({"-webkit-background-size":settings.backgroundSize,"-moz-background-size":settings.backgroundSize,"-o-background-size":settings.backgroundSize,"background-size":settings.backgroundSize}):$el.attr("data-src",src)}else $el.attr("src",src)},checkScreenMinWidth=function(minWidth){var isMatched=!1;Modernizr.mq("only all")?isMatched=Modernizr.mq("(min-width: "+minWidth+"px)"):$(window).width()>=minWidth&&(isMatched=!0);return isMatched};$els.each(function(){var $el=$(this),elType=this.nodeName,src="src";"IMG"!==elType&&(src="data-src");$el.data("m1src")||$el.data("m1src",$el.attr(src));!$el.attr("width")&&$el.width()>0&&$el.attr("width",$el.width());!$el.attr("height")&&$el.height()>0&&$el.attr("height",$el.height());$el.on("speedTestComplete.hisrc",function(){if(speedConnectionStatus===STATUS_COMPLETE){if(isSlowConnection)setImageSource($el,$el.data("m1src"),elType);else{debug&&$("body").append("devicePixelRatio="+$.hisrc.devicePixelRatio+" / bandwidth="+$.hisrc.bandwidth+" / minWidth 961="+checkScreenMinWidth(961)+" / minWidth(500)="+checkScreenMinWidth(500)+"<br />");$.hisrc.devicePixelRatio>1&&"high"===$.hisrc.bandwidth?checkScreenMinWidth(961)?setImageSource($el,$el.data("1x"),elType):setImageSource($el,$el.data("2x"),elType):Modernizr.touch?checkScreenMinWidth(500)?setImageSource($el,$el.data("2x"),elType):setImageSource($el,$el.data("m1src"),elType):setImageSource($el,$el.data("1x"),elType)}$el.off("speedTestComplete.hisrc")}})});initSpeedTest();return $els}}(jQuery);!function($){$.fn.responsiveImage=function(additionalOptions){function windowResize(){if($(window).width()>prevScreenWidth){prevScreenWidth=$(window).width();getImageVersion();$images.each(function(){replaceImage($(this))})}}function getImageVersion(){if(options.cssDomObject){var dom=$(options.cssDomObject).get(0);imageVersion=dom.currentStyle?options.defaultImageVersion:window.getComputedStyle(dom,":after").getPropertyValue("content");imageVersion=imageVersion.replace(/"|'/g,"");imageVersion.length<1&&(imageVersion=options.defaultImageVersion)}else imageVersion=options.defaultImageVersion}function replaceImage($tag){var $img=$tag,newSrc=$img.attr(imageVersion);newSrc&&newSrc.length>0||(newSrc=options.defaultImageVersion);var img=new Image;$(img).on("load",function(){setSource($img,newSrc)});img.src=newSrc}function setSource($tag,src){var $img=$tag;if(options.delayLoadingAttribute.length>0&&$img.hasClass("delay-loading"))$img.attr(options.delayLoadingAttribute,src);else{if("IMG"==$img.prop("tagName")){$img.attr("src",src);options.delayLoadingAttribute.length>0&&$img.attr(options.delayLoadingAttribute,src)}else $img.css({"background-image":"url('"+src+"')"});"function"==typeof options.callback&&options.callback.call($img.get(0))}}var imageVersion,timer,$images,options={cssDomObject:null,delayLoadingAttribute:"",srcAttribute:"src",defaultImageVersion:"data-img-480",callback:!1},prevScreenWidth=0;options=$.extend(options,additionalOptions);getImageVersion();$images=$(this);$(window).on("resize.responsiveImage load.responsiveImage",function(){timer&&window.clearTimeout(timer);timer=window.setTimeout(function(){windowResize()},200)}).resize();return this}}(jQuery);!function(window,document,undefined){"use strict";function minErr(module){return function(){var message,i,code=arguments[0],prefix="["+(module?module+":":"")+code+"] ",template=arguments[1],templateArgs=arguments,stringify=function(obj){return isFunction(obj)?obj.toString().replace(/ \{[\s\S]*$/,""):isUndefined(obj)?"undefined":isString(obj)?obj:JSON.stringify(obj)};message=prefix+template.replace(/\{\d+\}/g,function(match){var arg,index=+match.slice(1,-1);if(index+2<templateArgs.length){arg=templateArgs[index+2];return isFunction(arg)?arg.toString().replace(/ ?\{[\s\S]*$/,""):isUndefined(arg)?"undefined":isString(arg)?arg:toJson(arg)}return match});message=message+"\nhttp://errors.angularjs.org/"+version.full+"/"+(module?module+"/":"")+code;for(i=2;i<arguments.length;i++)message=message+(2==i?"?":"&")+"p"+(i-2)+"="+encodeURIComponent(stringify(arguments[i]));return new Error(message)}}function isArrayLike(obj){if(null==obj||isWindow(obj))return!1;var length=obj.length;return 1===obj.nodeType&&length?!0:isArray(obj)||!isFunction(obj)&&(0===length||"number"==typeof length&&length>0&&length-1 in obj)}function forEach(obj,iterator,context){var key;if(obj)if(isFunction(obj))for(key in obj)"prototype"!=key&&"length"!=key&&"name"!=key&&obj.hasOwnProperty(key)&&iterator.call(context,obj[key],key);else if(obj.forEach&&obj.forEach!==forEach)obj.forEach(iterator,context);else if(isArrayLike(obj))for(key=0;key<obj.length;key++)iterator.call(context,obj[key],key);else for(key in obj)obj.hasOwnProperty(key)&&iterator.call(context,obj[key],key);return obj}function sortedKeys(obj){var keys=[];for(var key in obj)obj.hasOwnProperty(key)&&keys.push(key);return keys.sort()}function forEachSorted(obj,iterator,context){for(var keys=sortedKeys(obj),i=0;i<keys.length;i++)iterator.call(context,obj[keys[i]],keys[i]);return keys}function reverseParams(iteratorFn){return function(value,key){iteratorFn(key,value)}}function nextUid(){for(var digit,index=uid.length;index;){index--;digit=uid[index].charCodeAt(0);if(57==digit){uid[index]="A";return uid.join("")}if(90!=digit){uid[index]=String.fromCharCode(digit+1);return uid.join("")}uid[index]="0"}uid.unshift("0");return uid.join("")}function setHashKey(obj,h){h?obj.$$hashKey=h:delete obj.$$hashKey}function extend(dst){var h=dst.$$hashKey;forEach(arguments,function(obj){obj!==dst&&forEach(obj,function(value,key){dst[key]=value})});setHashKey(dst,h);return dst}function int(str){return parseInt(str,10)}function inherit(parent,extra){return extend(new(extend(function(){},{prototype:parent})),extra)}function noop(){}function identity($){return $}function valueFn(value){return function(){return value}}function isUndefined(value){return"undefined"==typeof value}function isDefined(value){return"undefined"!=typeof value}function isObject(value){return null!=value&&"object"==typeof value}function isString(value){return"string"==typeof value}function isNumber(value){return"number"==typeof value}function isDate(value){return"[object Date]"==toString.apply(value)}function isArray(value){return"[object Array]"==toString.apply(value)}function isFunction(value){return"function"==typeof value}function isRegExp(value){return"[object RegExp]"==toString.apply(value)}function isWindow(obj){return obj&&obj.document&&obj.location&&obj.alert&&obj.setInterval}function isScope(obj){return obj&&obj.$evalAsync&&obj.$watch}function isFile(obj){return"[object File]"===toString.apply(obj)}function isElement(node){return node&&(node.nodeName||node.on&&node.find)}function map(obj,iterator,context){var results=[];forEach(obj,function(value,index,list){results.push(iterator.call(context,value,index,list))});return results}function includes(array,obj){return-1!=indexOf(array,obj)}function indexOf(array,obj){if(array.indexOf)return array.indexOf(obj);for(var i=0;i<array.length;i++)if(obj===array[i])return i;return-1}function arrayRemove(array,value){var index=indexOf(array,value);index>=0&&array.splice(index,1);return value}function copy(source,destination){if(isWindow(source)||isScope(source))throw ngMinErr("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(destination){if(source===destination)throw ngMinErr("cpi","Can't copy! Source and destination are identical.");if(isArray(source)){destination.length=0;for(var i=0;i<source.length;i++)destination.push(copy(source[i]))}else{var h=destination.$$hashKey;forEach(destination,function(value,key){delete destination[key]});for(var key in source)destination[key]=copy(source[key]);setHashKey(destination,h)}}else{destination=source;source&&(isArray(source)?destination=copy(source,[]):isDate(source)?destination=new Date(source.getTime()):isRegExp(source)?destination=new RegExp(source.source):isObject(source)&&(destination=copy(source,{})))}return destination}function shallowCopy(src,dst){dst=dst||{};for(var key in src)src.hasOwnProperty(key)&&"$$"!==key.substr(0,2)&&(dst[key]=src[key]);return dst}function equals(o1,o2){if(o1===o2)return!0;if(null===o1||null===o2)return!1;if(o1!==o1&&o2!==o2)return!0;var length,key,keySet,t1=typeof o1,t2=typeof o2;if(t1==t2&&"object"==t1){if(!isArray(o1)){if(isDate(o1))return isDate(o2)&&o1.getTime()==o2.getTime();if(isRegExp(o1)&&isRegExp(o2))return o1.toString()==o2.toString();if(isScope(o1)||isScope(o2)||isWindow(o1)||isWindow(o2)||isArray(o2))return!1;keySet={};for(key in o1)if("$"!==key.charAt(0)&&!isFunction(o1[key])){if(!equals(o1[key],o2[key]))return!1;keySet[key]=!0}for(key in o2)if(!keySet.hasOwnProperty(key)&&"$"!==key.charAt(0)&&o2[key]!==undefined&&!isFunction(o2[key]))return!1;return!0}if(!isArray(o2))return!1;if((length=o1.length)==o2.length){for(key=0;length>key;key++)if(!equals(o1[key],o2[key]))return!1;return!0}}return!1}function concat(array1,array2,index){return array1.concat(slice.call(array2,index))}function sliceArgs(args,startIndex){return slice.call(args,startIndex||0)}function bind(self,fn){var curryArgs=arguments.length>2?sliceArgs(arguments,2):[];return!isFunction(fn)||fn instanceof RegExp?fn:curryArgs.length?function(){return arguments.length?fn.apply(self,curryArgs.concat(slice.call(arguments,0))):fn.apply(self,curryArgs)}:function(){return arguments.length?fn.apply(self,arguments):fn.call(self)}}function toJsonReplacer(key,value){var val=value;/^\$+/.test(key)?val=undefined:isWindow(value)?val="$WINDOW":value&&document===value?val="$DOCUMENT":isScope(value)&&(val="$SCOPE");return val}function toJson(obj,pretty){return"undefined"==typeof obj?undefined:JSON.stringify(obj,toJsonReplacer,pretty?"  ":null)}function fromJson(json){return isString(json)?JSON.parse(json):json}function toBoolean(value){if(value&&0!==value.length){var v=lowercase(""+value);value=!("f"==v||"0"==v||"false"==v||"no"==v||"n"==v||"[]"==v)}else value=!1;return value}function startingTag(element){element=jqLite(element).clone();try{element.html("")}catch(e){}var TEXT_NODE=3,elemHtml=jqLite("<div>").append(element).html();try{return element[0].nodeType===TEXT_NODE?lowercase(elemHtml):elemHtml.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(match,nodeName){return"<"+lowercase(nodeName)})}catch(e){return lowercase(elemHtml)}}function tryDecodeURIComponent(value){try{return decodeURIComponent(value)}catch(e){}}function parseKeyValue(keyValue){var key_value,key,obj={};forEach((keyValue||"").split("&"),function(keyValue){if(keyValue){key_value=keyValue.split("=");key=tryDecodeURIComponent(key_value[0]);if(isDefined(key)){var val=isDefined(key_value[1])?tryDecodeURIComponent(key_value[1]):!0;obj[key]?isArray(obj[key])?obj[key].push(val):obj[key]=[obj[key],val]:obj[key]=val}}});return obj}function toKeyValue(obj){var parts=[];forEach(obj,function(value,key){isArray(value)?forEach(value,function(arrayValue){parts.push(encodeUriQuery(key,!0)+(arrayValue===!0?"":"="+encodeUriQuery(arrayValue,!0)))}):parts.push(encodeUriQuery(key,!0)+(value===!0?"":"="+encodeUriQuery(value,!0)))});return parts.length?parts.join("&"):""}function encodeUriSegment(val){return encodeUriQuery(val,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function encodeUriQuery(val,pctEncodeSpaces){return encodeURIComponent(val).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,pctEncodeSpaces?"%20":"+")}function angularInit(element,bootstrap){function append(element){element&&elements.push(element)}var appElement,module,elements=[element],names=["ng:app","ng-app","x-ng-app","data-ng-app"],NG_APP_CLASS_REGEXP=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;forEach(names,function(name){names[name]=!0;append(document.getElementById(name));name=name.replace(":","\\:");if(element.querySelectorAll){forEach(element.querySelectorAll("."+name),append);forEach(element.querySelectorAll("."+name+"\\:"),append);forEach(element.querySelectorAll("["+name+"]"),append)}});forEach(elements,function(element){if(!appElement){var className=" "+element.className+" ",match=NG_APP_CLASS_REGEXP.exec(className);if(match){appElement=element;module=(match[2]||"").replace(/\s+/g,",")}else forEach(element.attributes,function(attr){if(!appElement&&names[attr.name]){appElement=element;module=attr.value}})}});appElement&&bootstrap(appElement,module?[module]:[])}function bootstrap(element,modules){var doBootstrap=function(){element=jqLite(element);if(element.injector()){var tag=element[0]===document?"document":startingTag(element);throw ngMinErr("btstrpd","App Already Bootstrapped with this Element '{0}'",tag)}modules=modules||[];modules.unshift(["$provide",function($provide){$provide.value("$rootElement",element)}]);modules.unshift("ng");var injector=createInjector(modules);injector.invoke(["$rootScope","$rootElement","$compile","$injector","$animate",function(scope,element,compile,injector,animate){scope.$apply(function(){element.data("$injector",injector);compile(element)(scope)});animate.enabled(!0)}]);return injector},NG_DEFER_BOOTSTRAP=/^NG_DEFER_BOOTSTRAP!/;if(window&&!NG_DEFER_BOOTSTRAP.test(window.name))return doBootstrap();window.name=window.name.replace(NG_DEFER_BOOTSTRAP,"");angular.resumeBootstrap=function(extraModules){forEach(extraModules,function(module){modules.push(module)});doBootstrap()}}function snake_case(name,separator){separator=separator||"_";return name.replace(SNAKE_CASE_REGEXP,function(letter,pos){return(pos?separator:"")+letter.toLowerCase()})}function bindJQuery(){jQuery=window.jQuery;if(jQuery){jqLite=jQuery;extend(jQuery.fn,{scope:JQLitePrototype.scope,controller:JQLitePrototype.controller,injector:JQLitePrototype.injector,inheritedData:JQLitePrototype.inheritedData});JQLitePatchJQueryRemove("remove",!0,!0,!1);JQLitePatchJQueryRemove("empty",!1,!1,!1);JQLitePatchJQueryRemove("html",!1,!1,!0)}else jqLite=JQLite;angular.element=jqLite}function assertArg(arg,name,reason){if(!arg)throw ngMinErr("areq","Argument '{0}' is {1}",name||"?",reason||"required");return arg}function assertArgFn(arg,name,acceptArrayAnnotation){acceptArrayAnnotation&&isArray(arg)&&(arg=arg[arg.length-1]);assertArg(isFunction(arg),name,"not a function, got "+(arg&&"object"==typeof arg?arg.constructor.name||"Object":typeof arg));return arg}function getter(obj,path,bindFnToScope){if(!path)return obj;for(var key,keys=path.split("."),lastInstance=obj,len=keys.length,i=0;len>i;i++){key=keys[i];obj&&(obj=(lastInstance=obj)[key])}return!bindFnToScope&&isFunction(obj)?bind(lastInstance,obj):obj}function setupModuleLoader(window){function ensure(obj,name,factory){return obj[name]||(obj[name]=factory())}return ensure(ensure(window,"angular",Object),"module",function(){var modules={};return function(name,requires,configFn){requires&&modules.hasOwnProperty(name)&&(modules[name]=null);return ensure(modules,name,function(){function invokeLater(provider,method,insertMethod){return function(){invokeQueue[insertMethod||"push"]([provider,method,arguments]);return moduleInstance}}if(!requires)throw minErr("$injector")("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",name);var invokeQueue=[],runBlocks=[],config=invokeLater("$injector","invoke"),moduleInstance={_invokeQueue:invokeQueue,_runBlocks:runBlocks,requires:requires,name:name,provider:invokeLater("$provide","provider"),factory:invokeLater("$provide","factory"),service:invokeLater("$provide","service"),value:invokeLater("$provide","value"),constant:invokeLater("$provide","constant","unshift"),animation:invokeLater("$animateProvider","register"),filter:invokeLater("$filterProvider","register"),controller:invokeLater("$controllerProvider","register"),directive:invokeLater("$compileProvider","directive"),config:config,run:function(block){runBlocks.push(block);return this}};configFn&&config(configFn);return moduleInstance})}})}function publishExternalAPI(angular){extend(angular,{bootstrap:bootstrap,copy:copy,extend:extend,equals:equals,element:jqLite,forEach:forEach,injector:createInjector,noop:noop,bind:bind,toJson:toJson,fromJson:fromJson,identity:identity,isUndefined:isUndefined,isDefined:isDefined,isString:isString,isFunction:isFunction,isObject:isObject,isNumber:isNumber,isElement:isElement,isArray:isArray,$$minErr:minErr,version:version,isDate:isDate,lowercase:lowercase,uppercase:uppercase,callbacks:{counter:0}});angularModule=setupModuleLoader(window);try{angularModule("ngLocale")}catch(e){angularModule("ngLocale",[]).provider("$locale",$LocaleProvider)}angularModule("ng",["ngLocale"],["$provide",function($provide){$provide.provider("$compile",$CompileProvider).directive({a:htmlAnchorDirective,input:inputDirective,textarea:inputDirective,form:formDirective,script:scriptDirective,select:selectDirective,style:styleDirective,option:optionDirective,ngBind:ngBindDirective,ngBindHtml:ngBindHtmlDirective,ngBindTemplate:ngBindTemplateDirective,ngClass:ngClassDirective,ngClassEven:ngClassEvenDirective,ngClassOdd:ngClassOddDirective,ngCsp:ngCspDirective,ngCloak:ngCloakDirective,ngController:ngControllerDirective,ngForm:ngFormDirective,ngHide:ngHideDirective,ngIf:ngIfDirective,ngInclude:ngIncludeDirective,ngInit:ngInitDirective,ngNonBindable:ngNonBindableDirective,ngPluralize:ngPluralizeDirective,ngRepeat:ngRepeatDirective,ngShow:ngShowDirective,ngStyle:ngStyleDirective,ngSwitch:ngSwitchDirective,ngSwitchWhen:ngSwitchWhenDirective,ngSwitchDefault:ngSwitchDefaultDirective,ngOptions:ngOptionsDirective,ngTransclude:ngTranscludeDirective,ngModel:ngModelDirective,ngList:ngListDirective,ngChange:ngChangeDirective,required:requiredDirective,ngRequired:requiredDirective,ngValue:ngValueDirective}).directive(ngAttributeAliasDirectives).directive(ngEventDirectives);$provide.provider({$anchorScroll:$AnchorScrollProvider,$animate:$AnimateProvider,$browser:$BrowserProvider,$cacheFactory:$CacheFactoryProvider,$controller:$ControllerProvider,$document:$DocumentProvider,$exceptionHandler:$ExceptionHandlerProvider,$filter:$FilterProvider,$interpolate:$InterpolateProvider,$http:$HttpProvider,$httpBackend:$HttpBackendProvider,$location:$LocationProvider,$log:$LogProvider,$parse:$ParseProvider,$rootScope:$RootScopeProvider,$q:$QProvider,$sce:$SceProvider,$sceDelegate:$SceDelegateProvider,$sniffer:$SnifferProvider,$templateCache:$TemplateCacheProvider,$timeout:$TimeoutProvider,$window:$WindowProvider,$$urlUtils:$$UrlUtilsProvider})}])}function jqNextId(){return++jqId}function camelCase(name){return name.replace(SPECIAL_CHARS_REGEXP,function(_,separator,letter,offset){return offset?letter.toUpperCase():letter}).replace(MOZ_HACK_REGEXP,"Moz$1")}function JQLitePatchJQueryRemove(name,dispatchThis,filterElems,getterIfNoArguments){function removePatch(param){var set,setIndex,setLength,element,childIndex,childLength,children,list=filterElems&&param?[this.filter(param)]:[this],fireEvent=dispatchThis;if(!getterIfNoArguments||null!=param)for(;list.length;){set=list.shift();for(setIndex=0,setLength=set.length;setLength>setIndex;setIndex++){element=jqLite(set[setIndex]);fireEvent?element.triggerHandler("$destroy"):fireEvent=!fireEvent;for(childIndex=0,childLength=(children=element.children()).length;childLength>childIndex;childIndex++)list.push(jQuery(children[childIndex]))}}return originalJqFn.apply(this,arguments)}var originalJqFn=jQuery.fn[name];originalJqFn=originalJqFn.$original||originalJqFn;removePatch.$original=originalJqFn;jQuery.fn[name]=removePatch}function JQLite(element){if(element instanceof JQLite)return element;if(!(this instanceof JQLite)){if(isString(element)&&"<"!=element.charAt(0))throw jqLiteMinErr("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new JQLite(element)}if(isString(element)){var div=document.createElement("div");div.innerHTML="<div>&#160;</div>"+element;div.removeChild(div.firstChild);JQLiteAddNodes(this,div.childNodes);var fragment=jqLite(document.createDocumentFragment());fragment.append(this)}else JQLiteAddNodes(this,element)}function JQLiteClone(element){return element.cloneNode(!0)}function JQLiteDealoc(element){JQLiteRemoveData(element);for(var i=0,children=element.childNodes||[];i<children.length;i++)JQLiteDealoc(children[i])}function JQLiteOff(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("offargs","jqLite#off() does not support the `selector` argument");var events=JQLiteExpandoStore(element,"events"),handle=JQLiteExpandoStore(element,"handle");handle&&(isUndefined(type)?forEach(events,function(eventHandler,type){removeEventListenerFn(element,type,eventHandler);delete events[type]}):forEach(type.split(" "),function(type){if(isUndefined(fn)){removeEventListenerFn(element,type,events[type]);delete events[type]}else arrayRemove(events[type]||[],fn)}))}function JQLiteRemoveData(element,name){var expandoId=element[jqName],expandoStore=jqCache[expandoId];if(expandoStore){if(name){delete jqCache[expandoId].data[name];return}if(expandoStore.handle){expandoStore.events.$destroy&&expandoStore.handle({},"$destroy");JQLiteOff(element)}delete jqCache[expandoId];element[jqName]=undefined}}function JQLiteExpandoStore(element,key,value){var expandoId=element[jqName],expandoStore=jqCache[expandoId||-1];if(!isDefined(value))return expandoStore&&expandoStore[key];if(!expandoStore){element[jqName]=expandoId=jqNextId();expandoStore=jqCache[expandoId]={}}expandoStore[key]=value}function JQLiteData(element,key,value){var data=JQLiteExpandoStore(element,"data"),isSetter=isDefined(value),keyDefined=!isSetter&&isDefined(key),isSimpleGetter=keyDefined&&!isObject(key);data||isSimpleGetter||JQLiteExpandoStore(element,"data",data={});if(isSetter)data[key]=value;else{if(!keyDefined)return data;if(isSimpleGetter)return data&&data[key];extend(data,key)}}function JQLiteHasClass(element,selector){return(" "+element.className+" ").replace(/[\n\t]/g," ").indexOf(" "+selector+" ")>-1}function JQLiteRemoveClass(element,cssClasses){cssClasses&&forEach(cssClasses.split(" "),function(cssClass){element.className=trim((" "+element.className+" ").replace(/[\n\t]/g," ").replace(" "+trim(cssClass)+" "," "))})}function JQLiteAddClass(element,cssClasses){cssClasses&&forEach(cssClasses.split(" "),function(cssClass){JQLiteHasClass(element,cssClass)||(element.className=trim(element.className+" "+trim(cssClass)))})}function JQLiteAddNodes(root,elements){if(elements){elements=elements.nodeName||!isDefined(elements.length)||isWindow(elements)?[elements]:elements;for(var i=0;i<elements.length;i++)root.push(elements[i])}}function JQLiteController(element,name){return JQLiteInheritedData(element,"$"+(name||"ngController")+"Controller")}function JQLiteInheritedData(element,name,value){element=jqLite(element);9==element[0].nodeType&&(element=element.find("html"));for(;element.length;){if((value=element.data(name))!==undefined)return value;element=element.parent()}}function getBooleanAttrName(element,name){var booleanAttr=BOOLEAN_ATTR[name.toLowerCase()];return booleanAttr&&BOOLEAN_ELEMENTS[element.nodeName]&&booleanAttr}function createEventHandler(element,events){var eventHandler=function(event,type){event.preventDefault||(event.preventDefault=function(){event.returnValue=!1});event.stopPropagation||(event.stopPropagation=function(){event.cancelBubble=!0});event.target||(event.target=event.srcElement||document);if(isUndefined(event.defaultPrevented)){var prevent=event.preventDefault;event.preventDefault=function(){event.defaultPrevented=!0;prevent.call(event)};event.defaultPrevented=!1}event.isDefaultPrevented=function(){return event.defaultPrevented||0==event.returnValue};forEach(events[type||event.type],function(fn){fn.call(element,event)});if(8>=msie){event.preventDefault=null;event.stopPropagation=null;event.isDefaultPrevented=null}else{delete event.preventDefault;delete event.stopPropagation;delete event.isDefaultPrevented}};eventHandler.elem=element;return eventHandler}function hashKey(obj){var key,objType=typeof obj;"object"==objType&&null!==obj?"function"==typeof(key=obj.$$hashKey)?key=obj.$$hashKey():key===undefined&&(key=obj.$$hashKey=nextUid()):key=obj;return objType+":"+key}function HashMap(array){forEach(array,this.put,this)}function annotate(fn){var $inject,fnText,argDecl,last;if("function"==typeof fn){if(!($inject=fn.$inject)){$inject=[];if(fn.length){fnText=fn.toString().replace(STRIP_COMMENTS,"");argDecl=fnText.match(FN_ARGS);forEach(argDecl[1].split(FN_ARG_SPLIT),function(arg){arg.replace(FN_ARG,function(all,underscore,name){$inject.push(name)})})}fn.$inject=$inject}}else if(isArray(fn)){last=fn.length-1;assertArgFn(fn[last],"fn");$inject=fn.slice(0,last)}else assertArgFn(fn,"fn",!0);return $inject}function createInjector(modulesToLoad){function supportObject(delegate){return function(key,value){if(!isObject(key))return delegate(key,value);forEach(key,reverseParams(delegate))}}function provider(name,provider_){(isFunction(provider_)||isArray(provider_))&&(provider_=providerInjector.instantiate(provider_));if(!provider_.$get)throw $injectorMinErr("pget","Provider '{0}' must define $get factory method.",name);return providerCache[name+providerSuffix]=provider_}function factory(name,factoryFn){return provider(name,{$get:factoryFn})}function service(name,constructor){return factory(name,["$injector",function($injector){return $injector.instantiate(constructor)}])}function value(name,value){return factory(name,valueFn(value))}function constant(name,value){providerCache[name]=value;instanceCache[name]=value}function decorator(serviceName,decorFn){var origProvider=providerInjector.get(serviceName+providerSuffix),orig$get=origProvider.$get;origProvider.$get=function(){var origInstance=instanceInjector.invoke(orig$get,origProvider);return instanceInjector.invoke(decorFn,null,{$delegate:origInstance})}}function loadModules(modulesToLoad){var runBlocks=[];forEach(modulesToLoad,function(module){if(!loadedModules.get(module)){loadedModules.put(module,!0);try{if(isString(module)){var moduleFn=angularModule(module);runBlocks=runBlocks.concat(loadModules(moduleFn.requires)).concat(moduleFn._runBlocks);for(var invokeQueue=moduleFn._invokeQueue,i=0,ii=invokeQueue.length;ii>i;i++){var invokeArgs=invokeQueue[i],provider=providerInjector.get(invokeArgs[0]);provider[invokeArgs[1]].apply(provider,invokeArgs[2])}}else isFunction(module)?runBlocks.push(providerInjector.invoke(module)):isArray(module)?runBlocks.push(providerInjector.invoke(module)):assertArgFn(module,"module")}catch(e){isArray(module)&&(module=module[module.length-1]);e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack);throw $injectorMinErr("modulerr","Failed to instantiate module {0} due to:\n{1}",module,e.stack||e.message||e)}}});return runBlocks}function createInternalInjector(cache,factory){function getService(serviceName){if(cache.hasOwnProperty(serviceName)){if(cache[serviceName]===INSTANTIATING)throw $injectorMinErr("cdep","Circular dependency found: {0}",path.join(" <- "));return cache[serviceName]}try{path.unshift(serviceName);cache[serviceName]=INSTANTIATING;return cache[serviceName]=factory(serviceName)}finally{path.shift()}}function invoke(fn,self,locals){var length,i,key,args=[],$inject=annotate(fn);for(i=0,length=$inject.length;length>i;i++){key=$inject[i];if("string"!=typeof key)throw $injectorMinErr("itkn","Incorrect injection token! Expected service name as string, got {0}",key);args.push(locals&&locals.hasOwnProperty(key)?locals[key]:getService(key))}fn.$inject||(fn=fn[length]);switch(self?-1:args.length){case 0:return fn();case 1:return fn(args[0]);case 2:return fn(args[0],args[1]);case 3:return fn(args[0],args[1],args[2]);case 4:return fn(args[0],args[1],args[2],args[3]);case 5:return fn(args[0],args[1],args[2],args[3],args[4]);case 6:return fn(args[0],args[1],args[2],args[3],args[4],args[5]);case 7:return fn(args[0],args[1],args[2],args[3],args[4],args[5],args[6]);case 8:return fn(args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7]);case 9:return fn(args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7],args[8]);case 10:return fn(args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7],args[8],args[9]);default:return fn.apply(self,args)}}function instantiate(Type,locals){var instance,returnedValue,Constructor=function(){};Constructor.prototype=(isArray(Type)?Type[Type.length-1]:Type).prototype;instance=new Constructor;returnedValue=invoke(Type,instance,locals);return isObject(returnedValue)?returnedValue:instance}return{invoke:invoke,instantiate:instantiate,get:getService,annotate:annotate,has:function(name){return providerCache.hasOwnProperty(name+providerSuffix)||cache.hasOwnProperty(name)}}}var INSTANTIATING={},providerSuffix="Provider",path=[],loadedModules=new HashMap,providerCache={$provide:{provider:supportObject(provider),factory:supportObject(factory),service:supportObject(service),value:supportObject(value),constant:supportObject(constant),decorator:decorator}},providerInjector=providerCache.$injector=createInternalInjector(providerCache,function(){throw $injectorMinErr("unpr","Unknown provider: {0}",path.join(" <- "))}),instanceCache={},instanceInjector=instanceCache.$injector=createInternalInjector(instanceCache,function(servicename){var provider=providerInjector.get(servicename+providerSuffix);return instanceInjector.invoke(provider.$get,provider)});forEach(loadModules(modulesToLoad),function(fn){instanceInjector.invoke(fn||noop)});return instanceInjector}function $AnchorScrollProvider(){var autoScrollingEnabled=!0;this.disableAutoScrolling=function(){autoScrollingEnabled=!1};this.$get=["$window","$location","$rootScope",function($window,$location,$rootScope){function getFirstAnchor(list){var result=null;forEach(list,function(element){result||"a"!==lowercase(element.nodeName)||(result=element)});return result}function scroll(){var elm,hash=$location.hash();hash?(elm=document.getElementById(hash))?elm.scrollIntoView():(elm=getFirstAnchor(document.getElementsByName(hash)))?elm.scrollIntoView():"top"===hash&&$window.scrollTo(0,0):$window.scrollTo(0,0)}var document=$window.document;autoScrollingEnabled&&$rootScope.$watch(function(){return $location.hash()},function(){$rootScope.$evalAsync(scroll)});return scroll}]}function Browser(window,document,$log,$sniffer){function completeOutstandingRequest(fn){try{fn.apply(null,sliceArgs(arguments,1))}finally{outstandingRequestCount--;if(0===outstandingRequestCount)for(;outstandingRequestCallbacks.length;)try{outstandingRequestCallbacks.pop()()}catch(e){$log.error(e)}}}function startPoller(interval,setTimeout){!function check(){forEach(pollFns,function(pollFn){pollFn()});pollTimeout=setTimeout(check,interval)}()}function fireUrlChange(){if(lastBrowserUrl!=self.url()){lastBrowserUrl=self.url();forEach(urlChangeListeners,function(listener){listener(self.url())})}}var self=this,rawDocument=document[0],location=window.location,history=window.history,setTimeout=window.setTimeout,clearTimeout=window.clearTimeout,pendingDeferIds={};self.isMock=!1;
var outstandingRequestCount=0,outstandingRequestCallbacks=[];self.$$completeOutstandingRequest=completeOutstandingRequest;self.$$incOutstandingRequestCount=function(){outstandingRequestCount++};self.notifyWhenNoOutstandingRequests=function(callback){forEach(pollFns,function(pollFn){pollFn()});0===outstandingRequestCount?callback():outstandingRequestCallbacks.push(callback)};var pollTimeout,pollFns=[];self.addPollFn=function(fn){isUndefined(pollTimeout)&&startPoller(100,setTimeout);pollFns.push(fn);return fn};var lastBrowserUrl=location.href,baseElement=document.find("base"),replacedUrl=null;self.url=function(url,replace){if(url){if(lastBrowserUrl==url)return;lastBrowserUrl=url;if($sniffer.history)if(replace)history.replaceState(null,"",url);else{history.pushState(null,"",url);baseElement.attr("href",baseElement.attr("href"))}else if(replace){location.replace(url);replacedUrl=url}else{location.href=url;replacedUrl=null}return self}return replacedUrl||location.href.replace(/%27/g,"'")};var urlChangeListeners=[],urlChangeInit=!1;self.onUrlChange=function(callback){if(!urlChangeInit){$sniffer.history&&jqLite(window).on("popstate",fireUrlChange);$sniffer.hashchange?jqLite(window).on("hashchange",fireUrlChange):self.addPollFn(fireUrlChange);urlChangeInit=!0}urlChangeListeners.push(callback);return callback};self.baseHref=function(){var href=baseElement.attr("href");return href?href.replace(/^https?\:\/\/[^\/]*/,""):""};var lastCookies={},lastCookieString="",cookiePath=self.baseHref();self.cookies=function(name,value){var cookieLength,cookieArray,cookie,i,index;if(!name){if(rawDocument.cookie!==lastCookieString){lastCookieString=rawDocument.cookie;cookieArray=lastCookieString.split("; ");lastCookies={};for(i=0;i<cookieArray.length;i++){cookie=cookieArray[i];index=cookie.indexOf("=");if(index>0){var name=unescape(cookie.substring(0,index));lastCookies[name]===undefined&&(lastCookies[name]=unescape(cookie.substring(index+1)))}}}return lastCookies}if(value===undefined)rawDocument.cookie=escape(name)+"=;path="+cookiePath+";expires=Thu, 01 Jan 1970 00:00:00 GMT";else if(isString(value)){cookieLength=(rawDocument.cookie=escape(name)+"="+escape(value)+";path="+cookiePath).length+1;cookieLength>4096&&$log.warn("Cookie '"+name+"' possibly not set or overflowed because it was too large ("+cookieLength+" > 4096 bytes)!")}};self.defer=function(fn,delay){var timeoutId;outstandingRequestCount++;timeoutId=setTimeout(function(){delete pendingDeferIds[timeoutId];completeOutstandingRequest(fn)},delay||0);pendingDeferIds[timeoutId]=!0;return timeoutId};self.defer.cancel=function(deferId){if(pendingDeferIds[deferId]){delete pendingDeferIds[deferId];clearTimeout(deferId);completeOutstandingRequest(noop);return!0}return!1}}function $BrowserProvider(){this.$get=["$window","$log","$sniffer","$document",function($window,$log,$sniffer,$document){return new Browser($window,$document,$log,$sniffer)}]}function $CacheFactoryProvider(){this.$get=function(){function cacheFactory(cacheId,options){function refresh(entry){if(entry!=freshEnd){staleEnd?staleEnd==entry&&(staleEnd=entry.n):staleEnd=entry;link(entry.n,entry.p);link(entry,freshEnd);freshEnd=entry;freshEnd.n=null}}function link(nextEntry,prevEntry){if(nextEntry!=prevEntry){nextEntry&&(nextEntry.p=prevEntry);prevEntry&&(prevEntry.n=nextEntry)}}if(cacheId in caches)throw minErr("$cacheFactory")("iid","CacheId '{0}' is already taken!",cacheId);var size=0,stats=extend({},options,{id:cacheId}),data={},capacity=options&&options.capacity||Number.MAX_VALUE,lruHash={},freshEnd=null,staleEnd=null;return caches[cacheId]={put:function(key,value){var lruEntry=lruHash[key]||(lruHash[key]={key:key});refresh(lruEntry);if(!isUndefined(value)){key in data||size++;data[key]=value;size>capacity&&this.remove(staleEnd.key);return value}},get:function(key){var lruEntry=lruHash[key];if(lruEntry){refresh(lruEntry);return data[key]}},remove:function(key){var lruEntry=lruHash[key];if(lruEntry){lruEntry==freshEnd&&(freshEnd=lruEntry.p);lruEntry==staleEnd&&(staleEnd=lruEntry.n);link(lruEntry.n,lruEntry.p);delete lruHash[key];delete data[key];size--}},removeAll:function(){data={};size=0;lruHash={};freshEnd=staleEnd=null},destroy:function(){data=null;stats=null;lruHash=null;delete caches[cacheId]},info:function(){return extend({},stats,{size:size})}}}var caches={};cacheFactory.info=function(){var info={};forEach(caches,function(cache,cacheId){info[cacheId]=cache.info()});return info};cacheFactory.get=function(cacheId){return caches[cacheId]};return cacheFactory}}function $TemplateCacheProvider(){this.$get=["$cacheFactory",function($cacheFactory){return $cacheFactory("templates")}]}function $CompileProvider($provide){var hasDirectives={},Suffix="Directive",COMMENT_DIRECTIVE_REGEXP=/^\s*directive\:\s*([\d\w\-_]+)\s+(.*)$/,CLASS_DIRECTIVE_REGEXP=/(([\d\w\-_]+)(?:\:([^;]+))?;?)/,aHrefSanitizationWhitelist=/^\s*(https?|ftp|mailto|file):/,imgSrcSanitizationWhitelist=/^\s*(https?|ftp|file):|data:image\//,EVENT_HANDLER_ATTR_REGEXP=/^(on[a-z]*|formaction)$/;this.directive=function registerDirective(name,directiveFactory){if(isString(name)){assertArg(directiveFactory,"directiveFactory");if(!hasDirectives.hasOwnProperty(name)){hasDirectives[name]=[];$provide.factory(name+Suffix,["$injector","$exceptionHandler",function($injector,$exceptionHandler){var directives=[];forEach(hasDirectives[name],function(directiveFactory){try{var directive=$injector.invoke(directiveFactory);isFunction(directive)?directive={compile:valueFn(directive)}:!directive.compile&&directive.link&&(directive.compile=valueFn(directive.link));directive.priority=directive.priority||0;directive.name=directive.name||name;directive.require=directive.require||directive.controller&&directive.name;directive.restrict=directive.restrict||"A";directives.push(directive)}catch(e){$exceptionHandler(e)}});return directives}])}hasDirectives[name].push(directiveFactory)}else forEach(name,reverseParams(registerDirective));return this};this.aHrefSanitizationWhitelist=function(regexp){if(isDefined(regexp)){aHrefSanitizationWhitelist=regexp;return this}return aHrefSanitizationWhitelist};this.imgSrcSanitizationWhitelist=function(regexp){if(isDefined(regexp)){imgSrcSanitizationWhitelist=regexp;return this}return imgSrcSanitizationWhitelist};this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document","$sce","$$urlUtils","$animate",function($injector,$interpolate,$exceptionHandler,$http,$templateCache,$parse,$controller,$rootScope,$document,$sce,$$urlUtils,$animate){function compile($compileNodes,transcludeFn,maxPriority,ignoreDirective){$compileNodes instanceof jqLite||($compileNodes=jqLite($compileNodes));forEach($compileNodes,function(node,index){3==node.nodeType&&node.nodeValue.match(/\S+/)&&($compileNodes[index]=node=jqLite(node).wrap("<span></span>").parent()[0])});var compositeLinkFn=compileNodes($compileNodes,transcludeFn,$compileNodes,maxPriority,ignoreDirective);return function(scope,cloneConnectFn){assertArg(scope,"scope");for(var $linkNode=cloneConnectFn?JQLitePrototype.clone.call($compileNodes):$compileNodes,i=0,ii=$linkNode.length;ii>i;i++){var node=$linkNode[i];(1==node.nodeType||9==node.nodeType)&&$linkNode.eq(i).data("$scope",scope)}safeAddClass($linkNode,"ng-scope");cloneConnectFn&&cloneConnectFn($linkNode,scope);compositeLinkFn&&compositeLinkFn(scope,$linkNode,$linkNode);return $linkNode}}function safeAddClass($element,className){try{$element.addClass(className)}catch(e){}}function compileNodes(nodeList,transcludeFn,$rootElement,maxPriority,ignoreDirective){function compositeLinkFn(scope,nodeList,$rootElement,boundTranscludeFn){var nodeLinkFn,childLinkFn,node,childScope,childTranscludeFn,i,ii,n,stableNodeList=[];for(i=0,ii=nodeList.length;ii>i;i++)stableNodeList.push(nodeList[i]);for(i=0,n=0,ii=linkFns.length;ii>i;n++){node=stableNodeList[n];nodeLinkFn=linkFns[i++];childLinkFn=linkFns[i++];if(nodeLinkFn){if(nodeLinkFn.scope){childScope=scope.$new(isObject(nodeLinkFn.scope));jqLite(node).data("$scope",childScope)}else childScope=scope;childTranscludeFn=nodeLinkFn.transclude;childTranscludeFn||!boundTranscludeFn&&transcludeFn?nodeLinkFn(childLinkFn,childScope,node,$rootElement,function(transcludeFn){return function(cloneFn){var transcludeScope=scope.$new();transcludeScope.$$transcluded=!0;return transcludeFn(transcludeScope,cloneFn).on("$destroy",bind(transcludeScope,transcludeScope.$destroy))}}(childTranscludeFn||transcludeFn)):nodeLinkFn(childLinkFn,childScope,node,undefined,boundTranscludeFn)}else childLinkFn&&childLinkFn(scope,node.childNodes,undefined,boundTranscludeFn)}}for(var nodeLinkFn,childLinkFn,directives,attrs,linkFnFound,linkFns=[],i=0;i<nodeList.length;i++){attrs=new Attributes;directives=collectDirectives(nodeList[i],[],attrs,0==i?maxPriority:undefined,ignoreDirective);nodeLinkFn=directives.length?applyDirectivesToNode(directives,nodeList[i],attrs,transcludeFn,$rootElement,null,[],[]):null;childLinkFn=nodeLinkFn&&nodeLinkFn.terminal||!nodeList[i].childNodes||!nodeList[i].childNodes.length?null:compileNodes(nodeList[i].childNodes,nodeLinkFn?nodeLinkFn.transclude:transcludeFn);linkFns.push(nodeLinkFn);linkFns.push(childLinkFn);linkFnFound=linkFnFound||nodeLinkFn||childLinkFn}return linkFnFound?compositeLinkFn:null}function collectDirectives(node,directives,attrs,maxPriority,ignoreDirective){var match,className,nodeType=node.nodeType,attrsMap=attrs.$attr;switch(nodeType){case 1:addDirective(directives,directiveNormalize(nodeName_(node).toLowerCase()),"E",maxPriority,ignoreDirective);for(var attr,name,nName,ngAttrName,value,nAttrs=node.attributes,j=0,jj=nAttrs&&nAttrs.length;jj>j;j++){var attrStartName,attrEndName,index;attr=nAttrs[j];if(!msie||msie>=8||attr.specified){name=attr.name;ngAttrName=directiveNormalize(name);NG_ATTR_BINDING.test(ngAttrName)&&(name=ngAttrName.substr(6).toLowerCase());if(-1!=(index=ngAttrName.lastIndexOf("Start"))&&index==ngAttrName.length-5){attrStartName=name;attrEndName=name.substr(0,name.length-5)+"end";name=name.substr(0,name.length-6)}nName=directiveNormalize(name.toLowerCase());attrsMap[nName]=name;attrs[nName]=value=trim(msie&&"href"==name?decodeURIComponent(node.getAttribute(name,2)):attr.value);getBooleanAttrName(node,nName)&&(attrs[nName]=!0);addAttrInterpolateDirective(node,directives,value,nName);addDirective(directives,nName,"A",maxPriority,ignoreDirective,attrStartName,attrEndName)}}className=node.className;if(isString(className)&&""!==className)for(;match=CLASS_DIRECTIVE_REGEXP.exec(className);){nName=directiveNormalize(match[2]);addDirective(directives,nName,"C",maxPriority,ignoreDirective)&&(attrs[nName]=trim(match[3]));className=className.substr(match.index+match[0].length)}break;case 3:addTextInterpolateDirective(directives,node.nodeValue);break;case 8:try{match=COMMENT_DIRECTIVE_REGEXP.exec(node.nodeValue);if(match){nName=directiveNormalize(match[1]);addDirective(directives,nName,"M",maxPriority,ignoreDirective)&&(attrs[nName]=trim(match[2]))}}catch(e){}}directives.sort(byPriority);return directives}function groupScan(node,attrStart,attrEnd){var nodes=[],depth=0;if(attrStart&&node.hasAttribute&&node.hasAttribute(attrStart)){do{if(!node)throw $compileMinErr("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",attrStart,attrEnd);if(1==node.nodeType){node.hasAttribute(attrStart)&&depth++;node.hasAttribute(attrEnd)&&depth--}nodes.push(node);node=node.nextSibling}while(depth>0)}else nodes.push(node);return jqLite(nodes)}function groupElementsLinkFnWrapper(linkFn,attrStart,attrEnd){return function(scope,element,attrs,controllers){element=groupScan(element[0],attrStart,attrEnd);return linkFn(scope,element,attrs,controllers)}}function applyDirectivesToNode(directives,compileNode,templateAttrs,transcludeFn,jqCollection,ignoreDirective,preLinkFns,postLinkFns){function addLinkFns(pre,post,attrStart,attrEnd){if(pre){attrStart&&(pre=groupElementsLinkFnWrapper(pre,attrStart,attrEnd));pre.require=directive.require;preLinkFns.push(pre)}if(post){attrStart&&(post=groupElementsLinkFnWrapper(post,attrStart,attrEnd));post.require=directive.require;postLinkFns.push(post)}}function getControllers(require,$element){var value,retrievalMethod="data",optional=!1;if(isString(require)){for(;"^"==(value=require.charAt(0))||"?"==value;){require=require.substr(1);"^"==value&&(retrievalMethod="inheritedData");optional=optional||"?"==value}value=$element[retrievalMethod]("$"+require+"Controller");if(!value&&!optional)throw $compileMinErr("ctreq","Controller '{0}', required by directive '{1}', can't be found!",require,directiveName);return value}if(isArray(require)){value=[];forEach(require,function(require){value.push(getControllers(require,$element))})}return value}function nodeLinkFn(childLinkFn,scope,linkNode,$rootElement,boundTranscludeFn){var attrs,$element,i,ii,linkFn,controller;attrs=compileNode===linkNode?templateAttrs:shallowCopy(templateAttrs,new Attributes(jqLite(linkNode),templateAttrs.$attr));$element=attrs.$$element;if(newIsolateScopeDirective){var LOCAL_REGEXP=/^\s*([@=&])(\??)\s*(\w*)\s*$/,parentScope=scope.$parent||scope;forEach(newIsolateScopeDirective.scope,function(definition,scopeName){var lastValue,parentGet,parentSet,match=definition.match(LOCAL_REGEXP)||[],attrName=match[3]||scopeName,optional="?"==match[2],mode=match[1];scope.$$isolateBindings[scopeName]=mode+attrName;switch(mode){case"@":attrs.$observe(attrName,function(value){scope[scopeName]=value});attrs.$$observers[attrName].$$scope=parentScope;attrs[attrName]&&(scope[scopeName]=$interpolate(attrs[attrName])(parentScope));break;case"=":if(optional&&!attrs[attrName])return;parentGet=$parse(attrs[attrName]);parentSet=parentGet.assign||function(){lastValue=scope[scopeName]=parentGet(parentScope);throw $compileMinErr("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",attrs[attrName],newIsolateScopeDirective.name)};lastValue=scope[scopeName]=parentGet(parentScope);scope.$watch(function(){var parentValue=parentGet(parentScope);parentValue!==scope[scopeName]&&(parentValue!==lastValue?lastValue=scope[scopeName]=parentValue:parentSet(parentScope,parentValue=lastValue=scope[scopeName]));return parentValue});break;case"&":parentGet=$parse(attrs[attrName]);scope[scopeName]=function(locals){return parentGet(parentScope,locals)};break;default:throw $compileMinErr("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",newIsolateScopeDirective.name,scopeName,definition)}})}controllerDirectives&&forEach(controllerDirectives,function(directive){var controllerInstance,locals={$scope:scope,$element:$element,$attrs:attrs,$transclude:boundTranscludeFn};controller=directive.controller;"@"==controller&&(controller=attrs[directive.name]);controllerInstance=$controller(controller,locals);$element.data("$"+directive.name+"Controller",controllerInstance);directive.controllerAs&&(locals.$scope[directive.controllerAs]=controllerInstance)});for(i=0,ii=preLinkFns.length;ii>i;i++)try{linkFn=preLinkFns[i];linkFn(scope,$element,attrs,linkFn.require&&getControllers(linkFn.require,$element))}catch(e){$exceptionHandler(e,startingTag($element))}childLinkFn&&childLinkFn(scope,linkNode.childNodes,undefined,boundTranscludeFn);for(i=0,ii=postLinkFns.length;ii>i;i++)try{linkFn=postLinkFns[i];linkFn(scope,$element,attrs,linkFn.require&&getControllers(linkFn.require,$element))}catch(e){$exceptionHandler(e,startingTag($element))}}for(var directive,directiveName,$template,transcludeDirective,controllerDirectives,linkFn,directiveValue,terminalPriority=-Number.MAX_VALUE,newScopeDirective=null,newIsolateScopeDirective=null,templateDirective=null,$compileNode=templateAttrs.$$element=jqLite(compileNode),childTranscludeFn=transcludeFn,i=0,ii=directives.length;ii>i;i++){directive=directives[i];var attrStart=directive.$$start,attrEnd=directive.$$end;attrStart&&($compileNode=groupScan(compileNode,attrStart,attrEnd));$template=undefined;if(terminalPriority>directive.priority)break;if(directiveValue=directive.scope){newScopeDirective=newScopeDirective||directive;if(!directive.templateUrl){assertNoDuplicate("isolated scope",newIsolateScopeDirective,directive,$compileNode);if(isObject(directiveValue)){safeAddClass($compileNode,"ng-isolate-scope");newIsolateScopeDirective=directive}safeAddClass($compileNode,"ng-scope")}}directiveName=directive.name;if(!directive.templateUrl&&directive.controller){directiveValue=directive.controller;controllerDirectives=controllerDirectives||{};assertNoDuplicate("'"+directiveName+"' controller",controllerDirectives[directiveName],directive,$compileNode);controllerDirectives[directiveName]=directive}if(directiveValue=directive.transclude){assertNoDuplicate("transclusion",transcludeDirective,directive,$compileNode);transcludeDirective=directive;terminalPriority=directive.priority;if("element"==directiveValue){$template=groupScan(compileNode,attrStart,attrEnd);$compileNode=templateAttrs.$$element=jqLite(document.createComment(" "+directiveName+": "+templateAttrs[directiveName]+" "));compileNode=$compileNode[0];replaceWith(jqCollection,jqLite(sliceArgs($template)),compileNode);childTranscludeFn=compile($template,transcludeFn,terminalPriority,ignoreDirective&&ignoreDirective.name)}else{$template=jqLite(JQLiteClone(compileNode)).contents();$compileNode.html("");childTranscludeFn=compile($template,transcludeFn)}}if(directive.template){assertNoDuplicate("template",templateDirective,directive,$compileNode);templateDirective=directive;directiveValue=isFunction(directive.template)?directive.template($compileNode,templateAttrs):directive.template;directiveValue=denormalizeTemplate(directiveValue);if(directive.replace){ignoreDirective=directive;$template=jqLite("<div>"+trim(directiveValue)+"</div>").contents();compileNode=$template[0];if(1!=$template.length||1!==compileNode.nodeType)throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",directiveName,"");replaceWith(jqCollection,$compileNode,compileNode);var newTemplateAttrs={$attr:{}};directives=directives.concat(collectDirectives(compileNode,directives.splice(i+1,directives.length-(i+1)),newTemplateAttrs));mergeTemplateAttributes(templateAttrs,newTemplateAttrs);ii=directives.length}else $compileNode.html(directiveValue)}if(directive.templateUrl){assertNoDuplicate("template",templateDirective,directive,$compileNode);templateDirective=directive;directive.replace&&(ignoreDirective=directive);nodeLinkFn=compileTemplateUrl(directives.splice(i,directives.length-i),$compileNode,templateAttrs,jqCollection,childTranscludeFn,preLinkFns,postLinkFns);ii=directives.length}else if(directive.compile)try{linkFn=directive.compile($compileNode,templateAttrs,childTranscludeFn);isFunction(linkFn)?addLinkFns(null,linkFn,attrStart,attrEnd):linkFn&&addLinkFns(linkFn.pre,linkFn.post,attrStart,attrEnd)}catch(e){$exceptionHandler(e,startingTag($compileNode))}if(directive.terminal){nodeLinkFn.terminal=!0;terminalPriority=Math.max(terminalPriority,directive.priority)}}nodeLinkFn.scope=newScopeDirective&&newScopeDirective.scope;nodeLinkFn.transclude=transcludeDirective&&childTranscludeFn;return nodeLinkFn}function addDirective(tDirectives,name,location,maxPriority,ignoreDirective,startAttrName,endAttrName){if(name===ignoreDirective)return null;var match=null;if(hasDirectives.hasOwnProperty(name))for(var directive,directives=$injector.get(name+Suffix),i=0,ii=directives.length;ii>i;i++)try{directive=directives[i];if((maxPriority===undefined||maxPriority>directive.priority)&&-1!=directive.restrict.indexOf(location)){startAttrName&&(directive=inherit(directive,{$$start:startAttrName,$$end:endAttrName}));tDirectives.push(directive);match=directive}}catch(e){$exceptionHandler(e)}return match}function mergeTemplateAttributes(dst,src){var srcAttr=src.$attr,dstAttr=dst.$attr,$element=dst.$$element;forEach(dst,function(value,key){if("$"!=key.charAt(0)){src[key]&&(value+=("style"===key?";":" ")+src[key]);dst.$set(key,value,!0,srcAttr[key])}});forEach(src,function(value,key){if("class"==key){safeAddClass($element,value);dst["class"]=(dst["class"]?dst["class"]+" ":"")+value}else if("style"==key)$element.attr("style",$element.attr("style")+";"+value);else if("$"!=key.charAt(0)&&!dst.hasOwnProperty(key)){dst[key]=value;dstAttr[key]=srcAttr[key]}})}function compileTemplateUrl(directives,$compileNode,tAttrs,$rootElement,childTranscludeFn,preLinkFns,postLinkFns){var afterTemplateNodeLinkFn,afterTemplateChildLinkFn,linkQueue=[],beforeTemplateCompileNode=$compileNode[0],origAsyncDirective=directives.shift(),derivedSyncDirective=extend({},origAsyncDirective,{templateUrl:null,transclude:null,replace:null}),templateUrl=isFunction(origAsyncDirective.templateUrl)?origAsyncDirective.templateUrl($compileNode,tAttrs):origAsyncDirective.templateUrl;$compileNode.html("");$http.get($sce.getTrustedResourceUrl(templateUrl),{cache:$templateCache}).success(function(content){var compileNode,tempTemplateAttrs,$template;content=denormalizeTemplate(content);if(origAsyncDirective.replace){$template=jqLite("<div>"+trim(content)+"</div>").contents();compileNode=$template[0];if(1!=$template.length||1!==compileNode.nodeType)throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",origAsyncDirective.name,templateUrl);tempTemplateAttrs={$attr:{}};replaceWith($rootElement,$compileNode,compileNode);collectDirectives(compileNode,directives,tempTemplateAttrs);mergeTemplateAttributes(tAttrs,tempTemplateAttrs)}else{compileNode=beforeTemplateCompileNode;$compileNode.html(content)}directives.unshift(derivedSyncDirective);afterTemplateNodeLinkFn=applyDirectivesToNode(directives,compileNode,tAttrs,childTranscludeFn,$compileNode,origAsyncDirective,preLinkFns,postLinkFns);forEach($rootElement,function(node,i){node==compileNode&&($rootElement[i]=$compileNode[0])});afterTemplateChildLinkFn=compileNodes($compileNode[0].childNodes,childTranscludeFn);for(;linkQueue.length;){var scope=linkQueue.shift(),beforeTemplateLinkNode=linkQueue.shift(),linkRootElement=linkQueue.shift(),controller=linkQueue.shift(),linkNode=$compileNode[0];if(beforeTemplateLinkNode!==beforeTemplateCompileNode){linkNode=JQLiteClone(compileNode);replaceWith(linkRootElement,jqLite(beforeTemplateLinkNode),linkNode)}afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,linkNode,$rootElement,controller)}linkQueue=null}).error(function(response,code,headers,config){throw $compileMinErr("tpload","Failed to load template: {0}",config.url)});return function(ignoreChildLinkFn,scope,node,rootElement,controller){if(linkQueue){linkQueue.push(scope);linkQueue.push(node);linkQueue.push(rootElement);linkQueue.push(controller)}else afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,node,rootElement,controller)}}function byPriority(a,b){return b.priority-a.priority}function assertNoDuplicate(what,previousDirective,directive,element){if(previousDirective)throw $compileMinErr("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",previousDirective.name,directive.name,what,startingTag(element))}function addTextInterpolateDirective(directives,text){var interpolateFn=$interpolate(text,!0);interpolateFn&&directives.push({priority:0,compile:valueFn(function(scope,node){var parent=node.parent(),bindings=parent.data("$binding")||[];bindings.push(interpolateFn);safeAddClass(parent.data("$binding",bindings),"ng-binding");scope.$watch(interpolateFn,function(value){node[0].nodeValue=value})})})}function getTrustedContext(node,attrNormalizedName){return"xlinkHref"==attrNormalizedName||"IMG"!=nodeName_(node)&&("src"==attrNormalizedName||"ngSrc"==attrNormalizedName)?$sce.RESOURCE_URL:void 0}function addAttrInterpolateDirective(node,directives,value,name){var interpolateFn=$interpolate(value,!0);if(interpolateFn){if("multiple"===name&&"SELECT"===nodeName_(node))throw $compileMinErr("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",startingTag(node));directives.push({priority:100,compile:valueFn(function(scope,element,attr){var $$observers=attr.$$observers||(attr.$$observers={});if(EVENT_HANDLER_ATTR_REGEXP.test(name))throw $compileMinErr("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");interpolateFn=$interpolate(attr[name],!0,getTrustedContext(node,name));if(interpolateFn){attr[name]=interpolateFn(scope);($$observers[name]||($$observers[name]=[])).$$inter=!0;(attr.$$observers&&attr.$$observers[name].$$scope||scope).$watch(interpolateFn,function(value){attr.$set(name,value)})}})})}}function replaceWith($rootElement,elementsToRemove,newNode){var i,ii,firstElementToRemove=elementsToRemove[0],removeCount=elementsToRemove.length,parent=firstElementToRemove.parentNode;if($rootElement)for(i=0,ii=$rootElement.length;ii>i;i++)if($rootElement[i]==firstElementToRemove){$rootElement[i++]=newNode;for(var j=i,j2=j+removeCount-1,jj=$rootElement.length;jj>j;j++,j2++)jj>j2?$rootElement[j]=$rootElement[j2]:delete $rootElement[j];$rootElement.length-=removeCount-1;break}parent&&parent.replaceChild(newNode,firstElementToRemove);var fragment=document.createDocumentFragment();fragment.appendChild(firstElementToRemove);newNode[jqLite.expando]=firstElementToRemove[jqLite.expando];for(var k=1,kk=elementsToRemove.length;kk>k;k++){var element=elementsToRemove[k];jqLite(element).remove();fragment.appendChild(element);delete elementsToRemove[k]}elementsToRemove[0]=newNode;elementsToRemove.length=1}var Attributes=function(element,attr){this.$$element=element;this.$attr=attr||{}};Attributes.prototype={$normalize:directiveNormalize,$addClass:function(classVal){classVal&&classVal.length>0&&$animate.addClass(this.$$element,classVal)},$removeClass:function(classVal){classVal&&classVal.length>0&&$animate.removeClass(this.$$element,classVal)},$set:function(key,value,writeAttr,attrName){function tokenDifference(str1,str2){var values=[],tokens1=str1.split(/\s+/),tokens2=str2.split(/\s+/);outer:for(var i=0;i<tokens1.length;i++){for(var token=tokens1[i],j=0;j<tokens2.length;j++)if(token==tokens2[j])continue outer;values.push(token)}return values}if("class"==key){value=value||"";var current=this.$$element.attr("class")||"";this.$removeClass(tokenDifference(current,value).join(" "));this.$addClass(tokenDifference(value,current).join(" "))}else{var normalizedVal,nodeName,booleanKey=getBooleanAttrName(this.$$element[0],key);if(booleanKey){this.$$element.prop(key,value);attrName=booleanKey}this[key]=value;if(attrName)this.$attr[key]=attrName;else{attrName=this.$attr[key];attrName||(this.$attr[key]=attrName=snake_case(key,"-"))}nodeName=nodeName_(this.$$element);if(("A"===nodeName&&"href"===key||"IMG"===nodeName&&"src"===key)&&(!msie||msie>=8)){normalizedVal=$$urlUtils.resolve(value);""!==normalizedVal&&("href"===key&&!normalizedVal.match(aHrefSanitizationWhitelist)||"src"===key&&!normalizedVal.match(imgSrcSanitizationWhitelist))&&(this[key]=value="unsafe:"+normalizedVal)}writeAttr!==!1&&(null===value||value===undefined?this.$$element.removeAttr(attrName):this.$$element.attr(attrName,value))}var $$observers=this.$$observers;$$observers&&forEach($$observers[key],function(fn){try{fn(value)}catch(e){$exceptionHandler(e)}})},$observe:function(key,fn){var attrs=this,$$observers=attrs.$$observers||(attrs.$$observers={}),listeners=$$observers[key]||($$observers[key]=[]);listeners.push(fn);$rootScope.$evalAsync(function(){listeners.$$inter||fn(attrs[key])});return fn}};var startSymbol=($document[0].createElement("a"),$interpolate.startSymbol()),endSymbol=$interpolate.endSymbol(),denormalizeTemplate="{{"==startSymbol||"}}"==endSymbol?identity:function(template){return template.replace(/\{\{/g,startSymbol).replace(/}}/g,endSymbol)},NG_ATTR_BINDING=/^ngAttr[A-Z]/;return compile}]}function directiveNormalize(name){return camelCase(name.replace(PREFIX_REGEXP,""))}function $ControllerProvider(){var controllers={},CNTRL_REG=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(name,constructor){isObject(name)?extend(controllers,name):controllers[name]=constructor};this.$get=["$injector","$window",function($injector,$window){return function(expression,locals){var instance,match,constructor,identifier;if(isString(expression)){match=expression.match(CNTRL_REG),constructor=match[1],identifier=match[3];expression=controllers.hasOwnProperty(constructor)?controllers[constructor]:getter(locals.$scope,constructor,!0)||getter($window,constructor,!0);assertArgFn(expression,constructor,!0)}instance=$injector.instantiate(expression,locals);if(identifier){if(!locals||"object"!=typeof locals.$scope)throw minErr("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",constructor||expression.name,identifier);locals.$scope[identifier]=instance}return instance}}]}function $DocumentProvider(){this.$get=["$window",function(window){return jqLite(window.document)}]}function $ExceptionHandlerProvider(){this.$get=["$log",function($log){return function(exception,cause){$log.error.apply($log,arguments)}}]}function parseHeaders(headers){var key,val,i,parsed={};if(!headers)return parsed;forEach(headers.split("\n"),function(line){i=line.indexOf(":");key=lowercase(trim(line.substr(0,i)));val=trim(line.substr(i+1));key&&(parsed[key]?parsed[key]+=", "+val:parsed[key]=val)});return parsed}function headersGetter(headers){var headersObj=isObject(headers)?headers:undefined;return function(name){headersObj||(headersObj=parseHeaders(headers));return name?headersObj[lowercase(name)]||null:headersObj}}function transformData(data,headers,fns){if(isFunction(fns))return fns(data,headers);forEach(fns,function(fn){data=fn(data,headers)});return data}function isSuccess(status){return status>=200&&300>status}function $HttpProvider(){var JSON_START=/^\s*(\[|\{[^\{])/,JSON_END=/[\}\]]\s*$/,PROTECTION_PREFIX=/^\)\]\}',?\n/,CONTENT_TYPE_APPLICATION_JSON={"Content-Type":"application/json;charset=utf-8"},defaults=this.defaults={transformResponse:[function(data){if(isString(data)){data=data.replace(PROTECTION_PREFIX,"");JSON_START.test(data)&&JSON_END.test(data)&&(data=fromJson(data))}return data}],transformRequest:[function(d){return isObject(d)&&!isFile(d)?toJson(d):d}],headers:{common:{Accept:"application/json, text/plain, */*"},post:CONTENT_TYPE_APPLICATION_JSON,put:CONTENT_TYPE_APPLICATION_JSON,patch:CONTENT_TYPE_APPLICATION_JSON},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},interceptorFactories=this.interceptors=[],responseInterceptorFactories=this.responseInterceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector","$$urlUtils",function($httpBackend,$browser,$cacheFactory,$rootScope,$q,$injector,$$urlUtils){function $http(requestConfig){function transformResponse(response){var resp=extend({},response,{data:transformData(response.data,response.headers,config.transformResponse)});return isSuccess(response.status)?resp:$q.reject(resp)}function mergeHeaders(config){function execHeaders(headers){var headerContent;forEach(headers,function(headerFn,header){if(isFunction(headerFn)){headerContent=headerFn();null!=headerContent?headers[header]=headerContent:delete headers[header]}})}var defHeaderName,lowercaseDefHeaderName,reqHeaderName,defHeaders=defaults.headers,reqHeaders=extend({},config.headers);defHeaders=extend({},defHeaders.common,defHeaders[lowercase(config.method)]);execHeaders(defHeaders);execHeaders(reqHeaders);defaultHeadersIteration:for(defHeaderName in defHeaders){lowercaseDefHeaderName=lowercase(defHeaderName);for(reqHeaderName in reqHeaders)if(lowercase(reqHeaderName)===lowercaseDefHeaderName)continue defaultHeadersIteration;reqHeaders[defHeaderName]=defHeaders[defHeaderName]}return reqHeaders}var config={transformRequest:defaults.transformRequest,transformResponse:defaults.transformResponse},headers=mergeHeaders(requestConfig);extend(config,requestConfig);config.headers=headers;config.method=uppercase(config.method);
var xsrfValue=$$urlUtils.isSameOrigin(config.url)?$browser.cookies()[config.xsrfCookieName||defaults.xsrfCookieName]:undefined;xsrfValue&&(headers[config.xsrfHeaderName||defaults.xsrfHeaderName]=xsrfValue);var serverRequest=function(config){headers=config.headers;var reqData=transformData(config.data,headersGetter(headers),config.transformRequest);isUndefined(config.data)&&forEach(headers,function(value,header){"content-type"===lowercase(header)&&delete headers[header]});isUndefined(config.withCredentials)&&!isUndefined(defaults.withCredentials)&&(config.withCredentials=defaults.withCredentials);return sendReq(config,reqData,headers).then(transformResponse,transformResponse)},chain=[serverRequest,undefined],promise=$q.when(config);forEach(reversedInterceptors,function(interceptor){(interceptor.request||interceptor.requestError)&&chain.unshift(interceptor.request,interceptor.requestError);(interceptor.response||interceptor.responseError)&&chain.push(interceptor.response,interceptor.responseError)});for(;chain.length;){var thenFn=chain.shift(),rejectFn=chain.shift();promise=promise.then(thenFn,rejectFn)}promise.success=function(fn){promise.then(function(response){fn(response.data,response.status,response.headers,config)});return promise};promise.error=function(fn){promise.then(null,function(response){fn(response.data,response.status,response.headers,config)});return promise};return promise}function createShortMethods(names){forEach(arguments,function(name){$http[name]=function(url,config){return $http(extend(config||{},{method:name,url:url}))}})}function createShortMethodsWithData(name){forEach(arguments,function(name){$http[name]=function(url,data,config){return $http(extend(config||{},{method:name,url:url,data:data}))}})}function sendReq(config,reqData,reqHeaders){function done(status,response,headersString){cache&&(isSuccess(status)?cache.put(url,[status,response,parseHeaders(headersString)]):cache.remove(url));resolvePromise(response,status,headersString);$rootScope.$$phase||$rootScope.$apply()}function resolvePromise(response,status,headers){status=Math.max(status,0);(isSuccess(status)?deferred.resolve:deferred.reject)({data:response,status:status,headers:headersGetter(headers),config:config})}function removePendingReq(){var idx=indexOf($http.pendingRequests,config);-1!==idx&&$http.pendingRequests.splice(idx,1)}var cache,cachedResp,deferred=$q.defer(),promise=deferred.promise,url=buildUrl(config.url,config.params);$http.pendingRequests.push(config);promise.then(removePendingReq,removePendingReq);(config.cache||defaults.cache)&&config.cache!==!1&&"GET"==config.method&&(cache=isObject(config.cache)?config.cache:isObject(defaults.cache)?defaults.cache:defaultCache);if(cache){cachedResp=cache.get(url);if(isDefined(cachedResp)){if(cachedResp.then){cachedResp.then(removePendingReq,removePendingReq);return cachedResp}isArray(cachedResp)?resolvePromise(cachedResp[1],cachedResp[0],copy(cachedResp[2])):resolvePromise(cachedResp,200,{})}else cache.put(url,promise)}isUndefined(cachedResp)&&$httpBackend(config.method,url,reqData,done,reqHeaders,config.timeout,config.withCredentials,config.responseType);return promise}function buildUrl(url,params){if(!params)return url;var parts=[];forEachSorted(params,function(value,key){if(null!=value&&value!=undefined){isArray(value)||(value=[value]);forEach(value,function(v){isObject(v)&&(v=toJson(v));parts.push(encodeUriQuery(key)+"="+encodeUriQuery(v))})}});return url+(-1==url.indexOf("?")?"?":"&")+parts.join("&")}var defaultCache=$cacheFactory("$http"),reversedInterceptors=[];forEach(interceptorFactories,function(interceptorFactory){reversedInterceptors.unshift(isString(interceptorFactory)?$injector.get(interceptorFactory):$injector.invoke(interceptorFactory))});forEach(responseInterceptorFactories,function(interceptorFactory,index){var responseFn=isString(interceptorFactory)?$injector.get(interceptorFactory):$injector.invoke(interceptorFactory);reversedInterceptors.splice(index,0,{response:function(response){return responseFn($q.when(response))},responseError:function(response){return responseFn($q.reject(response))}})});$http.pendingRequests=[];createShortMethods("get","delete","head","jsonp");createShortMethodsWithData("post","put");$http.defaults=defaults;return $http}]}function $HttpBackendProvider(){this.$get=["$browser","$window","$document",function($browser,$window,$document){return createHttpBackend($browser,XHR,$browser.defer,$window.angular.callbacks,$document[0],$window.location.protocol.replace(":",""))}]}function createHttpBackend($browser,XHR,$browserDefer,callbacks,rawDocument,locationProtocol){function jsonpReq(url,done){var script=rawDocument.createElement("script"),doneWrapper=function(){rawDocument.body.removeChild(script);done&&done()};script.type="text/javascript";script.src=url;msie?script.onreadystatechange=function(){/loaded|complete/.test(script.readyState)&&doneWrapper()}:script.onload=script.onerror=doneWrapper;rawDocument.body.appendChild(script);return doneWrapper}return function(method,url,post,callback,headers,timeout,withCredentials,responseType){function timeoutRequest(){status=-1;jsonpDone&&jsonpDone();xhr&&xhr.abort()}function completeRequest(callback,status,response,headersString){var protocol=(url.match(SERVER_MATCH)||["",locationProtocol])[1];timeoutId&&$browserDefer.cancel(timeoutId);jsonpDone=xhr=null;status="file"==protocol?response?200:404:status;status=1223==status?204:status;callback(status,response,headersString);$browser.$$completeOutstandingRequest(noop)}var status;$browser.$$incOutstandingRequestCount();url=url||$browser.url();if("jsonp"==lowercase(method)){var callbackId="_"+(callbacks.counter++).toString(36);callbacks[callbackId]=function(data){callbacks[callbackId].data=data};var jsonpDone=jsonpReq(url.replace("JSON_CALLBACK","angular.callbacks."+callbackId),function(){callbacks[callbackId].data?completeRequest(callback,200,callbacks[callbackId].data):completeRequest(callback,status||-2);delete callbacks[callbackId]})}else{var xhr=new XHR;xhr.open(method,url,!0);forEach(headers,function(value,key){value&&xhr.setRequestHeader(key,value)});xhr.onreadystatechange=function(){if(4==xhr.readyState){var responseHeaders=xhr.getAllResponseHeaders(),simpleHeaders=["Cache-Control","Content-Language","Content-Type","Expires","Last-Modified","Pragma"];if(!responseHeaders){responseHeaders="";forEach(simpleHeaders,function(header){var value=xhr.getResponseHeader(header);value&&(responseHeaders+=header+": "+value+"\n")})}completeRequest(callback,status||xhr.status,xhr.responseType?xhr.response:xhr.responseText,responseHeaders)}};withCredentials&&(xhr.withCredentials=!0);responseType&&(xhr.responseType=responseType);xhr.send(post||"")}if(timeout>0)var timeoutId=$browserDefer(timeoutRequest,timeout);else timeout&&timeout.then&&timeout.then(timeoutRequest)}}function $InterpolateProvider(){var startSymbol="{{",endSymbol="}}";this.startSymbol=function(value){if(value){startSymbol=value;return this}return startSymbol};this.endSymbol=function(value){if(value){endSymbol=value;return this}return endSymbol};this.$get=["$parse","$exceptionHandler","$sce",function($parse,$exceptionHandler,$sce){function $interpolate(text,mustHaveExpression,trustedContext){for(var startIndex,endIndex,fn,exp,index=0,parts=[],length=text.length,hasInterpolation=!1,concat=[];length>index;)if(-1!=(startIndex=text.indexOf(startSymbol,index))&&-1!=(endIndex=text.indexOf(endSymbol,startIndex+startSymbolLength))){index!=startIndex&&parts.push(text.substring(index,startIndex));parts.push(fn=$parse(exp=text.substring(startIndex+startSymbolLength,endIndex)));fn.exp=exp;index=endIndex+endSymbolLength;hasInterpolation=!0}else{index!=length&&parts.push(text.substring(index));index=length}if(!(length=parts.length)){parts.push("");length=1}if(trustedContext&&parts.length>1)throw $interpolateMinErr("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",text);if(!mustHaveExpression||hasInterpolation){concat.length=length;fn=function(context){try{for(var part,i=0,ii=length;ii>i;i++){if("function"==typeof(part=parts[i])){part=part(context);part=trustedContext?$sce.getTrusted(trustedContext,part):$sce.valueOf(part);null==part||part==undefined?part="":"string"!=typeof part&&(part=toJson(part))}concat[i]=part}return concat.join("")}catch(err){var newErr=$interpolateMinErr("interr","Can't interpolate: {0}\n{1}",text,err.toString());$exceptionHandler(newErr)}};fn.exp=text;fn.parts=parts;return fn}}var startSymbolLength=startSymbol.length,endSymbolLength=endSymbol.length;$interpolate.startSymbol=function(){return startSymbol};$interpolate.endSymbol=function(){return endSymbol};return $interpolate}]}function $LocaleProvider(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"",posSuf:"",negPre:"(",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(num){return 1===num?"one":"other"}}}}function encodePath(path){for(var segments=path.split("/"),i=segments.length;i--;)segments[i]=encodeUriSegment(segments[i]);return segments.join("/")}function matchUrl(url,obj){var match=SERVER_MATCH.exec(url);obj.$$protocol=match[1];obj.$$host=match[3];obj.$$port=int(match[5])||DEFAULT_PORTS[match[1]]||null}function matchAppUrl(url,obj){var match=PATH_MATCH.exec(url);obj.$$path=decodeURIComponent(match[1]);obj.$$search=parseKeyValue(match[3]);obj.$$hash=decodeURIComponent(match[5]||"");obj.$$path&&"/"!=obj.$$path.charAt(0)&&(obj.$$path="/"+obj.$$path)}function beginsWith(begin,whole,otherwise){return 0==whole.indexOf(begin)?whole.substr(begin.length):otherwise}function stripHash(url){var index=url.indexOf("#");return-1==index?url:url.substr(0,index)}function stripFile(url){return url.substr(0,stripHash(url).lastIndexOf("/")+1)}function serverBase(url){return url.substring(0,url.indexOf("/",url.indexOf("//")+2))}function LocationHtml5Url(appBase,basePrefix){this.$$html5=!0;basePrefix=basePrefix||"";var appBaseNoFile=stripFile(appBase);this.$$parse=function(url){var parsed={};matchUrl(url,parsed);var pathUrl=beginsWith(appBaseNoFile,url);if(!isString(pathUrl))throw $locationMinErr("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',url,appBaseNoFile);matchAppUrl(pathUrl,parsed);extend(this,parsed);this.$$path||(this.$$path="/");this.$$compose()};this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash;this.$$absUrl=appBaseNoFile+this.$$url.substr(1)};this.$$rewrite=function(url){var appUrl,prevAppUrl;if((appUrl=beginsWith(appBase,url))!==undefined){prevAppUrl=appUrl;return(appUrl=beginsWith(basePrefix,appUrl))!==undefined?appBaseNoFile+(beginsWith("/",appUrl)||appUrl):appBase+prevAppUrl}return(appUrl=beginsWith(appBaseNoFile,url))!==undefined?appBaseNoFile+appUrl:appBaseNoFile==url+"/"?appBaseNoFile:void 0}}function LocationHashbangUrl(appBase,hashPrefix){var appBaseNoFile=stripFile(appBase);matchUrl(appBase,this);this.$$parse=function(url){var withoutBaseUrl=beginsWith(appBase,url)||beginsWith(appBaseNoFile,url),withoutHashUrl="#"==withoutBaseUrl.charAt(0)?beginsWith(hashPrefix,withoutBaseUrl):this.$$html5?withoutBaseUrl:"";if(!isString(withoutHashUrl))throw $locationMinErr("ihshprfx",'Invalid url "{0}", missing hash prefix "{1}".',url,hashPrefix);matchAppUrl(withoutHashUrl,this);this.$$compose()};this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash;this.$$absUrl=appBase+(this.$$url?hashPrefix+this.$$url:"")};this.$$rewrite=function(url){return stripHash(appBase)==stripHash(url)?url:void 0}}function LocationHashbangInHtml5Url(appBase,hashPrefix){this.$$html5=!0;LocationHashbangUrl.apply(this,arguments);var appBaseNoFile=stripFile(appBase);this.$$rewrite=function(url){var appUrl;return appBase==stripHash(url)?url:(appUrl=beginsWith(appBaseNoFile,url))?appBase+hashPrefix+appUrl:appBaseNoFile===url+"/"?appBaseNoFile:void 0}}function locationGetter(property){return function(){return this[property]}}function locationGetterSetter(property,preprocess){return function(value){if(isUndefined(value))return this[property];this[property]=preprocess(value);this.$$compose();return this}}function $LocationProvider(){var hashPrefix="",html5Mode=!1;this.hashPrefix=function(prefix){if(isDefined(prefix)){hashPrefix=prefix;return this}return hashPrefix};this.html5Mode=function(mode){if(isDefined(mode)){html5Mode=mode;return this}return html5Mode};this.$get=["$rootScope","$browser","$sniffer","$rootElement",function($rootScope,$browser,$sniffer,$rootElement){function afterLocationChange(oldUrl){$rootScope.$broadcast("$locationChangeSuccess",$location.absUrl(),oldUrl)}var $location,LocationMode,appBase,baseHref=$browser.baseHref(),initialUrl=$browser.url();if(html5Mode){appBase=serverBase(initialUrl)+(baseHref||"/");LocationMode=$sniffer.history?LocationHtml5Url:LocationHashbangInHtml5Url}else{appBase=stripHash(initialUrl);LocationMode=LocationHashbangUrl}$location=new LocationMode(appBase,"#"+hashPrefix);$location.$$parse($location.$$rewrite(initialUrl));$rootElement.on("click",function(event){if(!event.ctrlKey&&!event.metaKey&&2!=event.which){for(var elm=jqLite(event.target);"a"!==lowercase(elm[0].nodeName);)if(elm[0]===$rootElement[0]||!(elm=elm.parent())[0])return;var absHref=elm.prop("href"),rewrittenUrl=$location.$$rewrite(absHref);if(absHref&&!elm.attr("target")&&rewrittenUrl&&!event.isDefaultPrevented()){event.preventDefault();if(rewrittenUrl!=$browser.url()){$location.$$parse(rewrittenUrl);$rootScope.$apply();window.angular["ff-684208-preventDefault"]=!0}}}});$location.absUrl()!=initialUrl&&$browser.url($location.absUrl(),!0);$browser.onUrlChange(function(newUrl){if($location.absUrl()!=newUrl){if($rootScope.$broadcast("$locationChangeStart",newUrl,$location.absUrl()).defaultPrevented){$browser.url($location.absUrl());return}$rootScope.$evalAsync(function(){var oldUrl=$location.absUrl();$location.$$parse(newUrl);afterLocationChange(oldUrl)});$rootScope.$$phase||$rootScope.$digest()}});var changeCounter=0;$rootScope.$watch(function(){var oldUrl=$browser.url(),currentReplace=$location.$$replace;if(!changeCounter||oldUrl!=$location.absUrl()){changeCounter++;$rootScope.$evalAsync(function(){if($rootScope.$broadcast("$locationChangeStart",$location.absUrl(),oldUrl).defaultPrevented)$location.$$parse(oldUrl);else{$browser.url($location.absUrl(),currentReplace);afterLocationChange(oldUrl)}})}$location.$$replace=!1;return changeCounter});return $location}]}function $LogProvider(){var debug=!0,self=this;this.debugEnabled=function(flag){if(isDefined(flag)){debug=flag;return this}return debug};this.$get=["$window",function($window){function formatError(arg){arg instanceof Error&&(arg.stack?arg=arg.message&&-1===arg.stack.indexOf(arg.message)?"Error: "+arg.message+"\n"+arg.stack:arg.stack:arg.sourceURL&&(arg=arg.message+"\n"+arg.sourceURL+":"+arg.line));return arg}function consoleLog(type){var console=$window.console||{},logFn=console[type]||console.log||noop;return logFn.apply?function(){var args=[];forEach(arguments,function(arg){args.push(formatError(arg))});return logFn.apply(console,args)}:function(arg1,arg2){logFn(arg1,arg2)}}return{log:consoleLog("log"),info:consoleLog("info"),warn:consoleLog("warn"),error:consoleLog("error"),debug:function(){var fn=consoleLog("debug");return function(){debug&&fn.apply(self,arguments)}}()}}]}function ensureSafeMemberName(name,fullExpression){if("constructor"===name)throw $parseMinErr("isecfld",'Referencing "constructor" field in Angular expressions is disallowed! Expression: {0}',fullExpression);return name}function ensureSafeObject(obj,fullExpression){if(obj&&obj.constructor===obj)throw $parseMinErr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",fullExpression);return obj}function lex(text,csp){function is(chars){return-1!=chars.indexOf(ch)}function was(chars){return-1!=chars.indexOf(lastCh)}function peek(i){var num=i||1;return index+num<text.length?text.charAt(index+num):!1}function isNumber(ch){return ch>="0"&&"9">=ch}function isWhitespace(ch){return" "==ch||"\r"==ch||"	"==ch||"\n"==ch||"\x0B"==ch||""==ch}function isIdent(ch){return ch>="a"&&"z">=ch||ch>="A"&&"Z">=ch||"_"==ch||"$"==ch}function isExpOperator(ch){return"-"==ch||"+"==ch||isNumber(ch)}function throwError(error,start,end){end=end||index;var colStr=isDefined(start)?"s "+start+"-"+index+" ["+text.substring(start,end)+"]":" "+end;throw $parseMinErr("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",error,colStr,text)}function readNumber(){for(var number="",start=index;index<text.length;){var ch=lowercase(text.charAt(index));if("."==ch||isNumber(ch))number+=ch;else{var peekCh=peek();if("e"==ch&&isExpOperator(peekCh))number+=ch;else if(isExpOperator(ch)&&peekCh&&isNumber(peekCh)&&"e"==number.charAt(number.length-1))number+=ch;else{if(!isExpOperator(ch)||peekCh&&isNumber(peekCh)||"e"!=number.charAt(number.length-1))break;throwError("Invalid exponent")}}index++}number=1*number;tokens.push({index:start,text:number,json:!0,fn:function(){return number}})}function readIdent(){for(var lastDot,peekIndex,methodName,ch,ident="",start=index;index<text.length;){ch=text.charAt(index);if("."!=ch&&!isIdent(ch)&&!isNumber(ch))break;"."==ch&&(lastDot=index);ident+=ch;index++}if(lastDot){peekIndex=index;for(;peekIndex<text.length;){ch=text.charAt(peekIndex);if("("==ch){methodName=ident.substr(lastDot-start+1);ident=ident.substr(0,lastDot-start);index=peekIndex;break}if(!isWhitespace(ch))break;peekIndex++}}var token={index:start,text:ident};if(OPERATORS.hasOwnProperty(ident))token.fn=token.json=OPERATORS[ident];else{var getter=getterFn(ident,csp,text);token.fn=extend(function(self,locals){return getter(self,locals)},{assign:function(self,value){return setter(self,ident,value,text)}})}tokens.push(token);if(methodName){tokens.push({index:lastDot,text:".",json:!1});tokens.push({index:lastDot+1,text:methodName,json:!1})}}function readString(quote){var start=index;index++;for(var string="",rawString=quote,escape=!1;index<text.length;){var ch=text.charAt(index);rawString+=ch;if(escape){if("u"==ch){var hex=text.substring(index+1,index+5);hex.match(/[\da-f]{4}/i)||throwError("Invalid unicode escape [\\u"+hex+"]");index+=4;string+=String.fromCharCode(parseInt(hex,16))}else{var rep=ESCAPE[ch];string+=rep?rep:ch}escape=!1}else if("\\"==ch)escape=!0;else{if(ch==quote){index++;tokens.push({index:start,text:rawString,string:string,json:!0,fn:function(){return string}});return}string+=ch}index++}throwError("Unterminated quote",start)}for(var token,ch,tokens=[],index=0,json=[],lastCh=":";index<text.length;){ch=text.charAt(index);if(is("\"'"))readString(ch);else if(isNumber(ch)||is(".")&&isNumber(peek()))readNumber();else if(isIdent(ch)){readIdent();was("{,")&&"{"==json[0]&&(token=tokens[tokens.length-1])&&(token.json=-1==token.text.indexOf("."))}else if(is("(){}[].,;:?")){tokens.push({index:index,text:ch,json:was(":[,")&&is("{[")||is("}]:,")});is("{[")&&json.unshift(ch);is("}]")&&json.shift();index++}else{if(isWhitespace(ch)){index++;continue}var ch2=ch+peek(),ch3=ch2+peek(2),fn=OPERATORS[ch],fn2=OPERATORS[ch2],fn3=OPERATORS[ch3];if(fn3){tokens.push({index:index,text:ch3,fn:fn3});index+=3}else if(fn2){tokens.push({index:index,text:ch2,fn:fn2});index+=2}else if(fn){tokens.push({index:index,text:ch,fn:fn,json:was("[,:")&&is("+-")});index+=1}else throwError("Unexpected next character ",index,index+1)}lastCh=ch}return tokens}function parser(text,json,$filter,csp){function throwError(msg,token){throw $parseMinErr("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",token.text,msg,token.index+1,text,text.substring(token.index))}function peekToken(){if(0===tokens.length)throw $parseMinErr("ueoe","Unexpected end of expression: {0}",text);return tokens[0]}function peek(e1,e2,e3,e4){if(tokens.length>0){var token=tokens[0],t=token.text;if(t==e1||t==e2||t==e3||t==e4||!e1&&!e2&&!e3&&!e4)return token}return!1}function expect(e1,e2,e3,e4){var token=peek(e1,e2,e3,e4);if(token){json&&!token.json&&throwError("is not valid json",token);tokens.shift();return token}return!1}function consume(e1){expect(e1)||throwError("is unexpected, expecting ["+e1+"]",peek())}function unaryFn(fn,right){return extend(function(self,locals){return fn(self,locals,right)},{constant:right.constant})}function ternaryFn(left,middle,right){return extend(function(self,locals){return left(self,locals)?middle(self,locals):right(self,locals)},{constant:left.constant&&middle.constant&&right.constant})}function binaryFn(left,fn,right){return extend(function(self,locals){return fn(self,locals,left,right)},{constant:left.constant&&right.constant})}function statements(){for(var statements=[];;){tokens.length>0&&!peek("}",")",";","]")&&statements.push(filterChain());if(!expect(";"))return 1==statements.length?statements[0]:function(self,locals){for(var value,i=0;i<statements.length;i++){var statement=statements[i];statement&&(value=statement(self,locals))}return value}}}function _filterChain(){for(var token,left=expression();;){if(!(token=expect("|")))return left;left=binaryFn(left,token.fn,filter())}}function filter(){for(var token=expect(),fn=$filter(token.text),argsFn=[];;){if(!(token=expect(":"))){var fnInvoke=function(self,locals,input){for(var args=[input],i=0;i<argsFn.length;i++)args.push(argsFn[i](self,locals));return fn.apply(self,args)};return function(){return fnInvoke}}argsFn.push(expression())}}function expression(){return assignment()}function _assignment(){var right,token,left=ternary();if(token=expect("=")){left.assign||throwError("implies assignment but ["+text.substring(0,token.index)+"] can not be assigned to",token);right=ternary();return function(scope,locals){return left.assign(scope,right(scope,locals),locals)}}return left}function ternary(){var middle,token,left=logicalOR();if(!(token=expect("?")))return left;middle=ternary();if(token=expect(":"))return ternaryFn(left,middle,ternary());throwError("expected :",token)}function logicalOR(){for(var token,left=logicalAND();;){if(!(token=expect("||")))return left;left=binaryFn(left,token.fn,logicalAND())}}function logicalAND(){var token,left=equality();(token=expect("&&"))&&(left=binaryFn(left,token.fn,logicalAND()));return left}function equality(){var token,left=relational();(token=expect("==","!=","===","!=="))&&(left=binaryFn(left,token.fn,equality()));return left}function relational(){var token,left=additive();(token=expect("<",">","<=",">="))&&(left=binaryFn(left,token.fn,relational()));return left}function additive(){for(var token,left=multiplicative();token=expect("+","-");)left=binaryFn(left,token.fn,multiplicative());return left}function multiplicative(){for(var token,left=unary();token=expect("*","/","%");)left=binaryFn(left,token.fn,unary());return left}function unary(){var token;return expect("+")?primary():(token=expect("-"))?binaryFn(ZERO,token.fn,unary()):(token=expect("!"))?unaryFn(token.fn,unary()):primary()}function primary(){var primary;if(expect("(")){primary=filterChain();consume(")")}else if(expect("["))primary=arrayDeclaration();else if(expect("{"))primary=object();else{var token=expect();primary=token.fn;primary||throwError("not a primary expression",token);token.json&&(primary.constant=primary.literal=!0)}for(var next,context;next=expect("(","[",".");)if("("===next.text){primary=functionCall(primary,context);context=null}else if("["===next.text){context=primary;primary=objectIndex(primary)}else if("."===next.text){context=primary;primary=fieldAccess(primary)}else throwError("IMPOSSIBLE");return primary}function _fieldAccess(object){var field=expect().text,getter=getterFn(field,csp,text);return extend(function(scope,locals,self){return getter(self||object(scope,locals),locals)},{assign:function(scope,value,locals){return setter(object(scope,locals),field,value,text)}})}function _objectIndex(obj){var indexFn=expression();consume("]");return extend(function(self,locals){var v,p,o=obj(self,locals),i=indexFn(self,locals);if(!o)return undefined;v=ensureSafeObject(o[i],text);if(v&&v.then){p=v;if(!("$$v"in v)){p.$$v=undefined;p.then(function(val){p.$$v=val})}v=v.$$v}return v},{assign:function(self,value,locals){var key=indexFn(self,locals);return ensureSafeObject(obj(self,locals),text)[key]=value}})}function _functionCall(fn,contextGetter){var argsFn=[];if(")"!=peekToken().text)do argsFn.push(expression());while(expect(","));consume(")");return function(scope,locals){for(var args=[],context=contextGetter?contextGetter(scope,locals):scope,i=0;i<argsFn.length;i++)args.push(argsFn[i](scope,locals));var fnPtr=fn(scope,locals,context)||noop,v=fnPtr.apply?fnPtr.apply(context,args):fnPtr(args[0],args[1],args[2],args[3],args[4]);if(v&&v.then){var p=v;if(!("$$v"in v)){p.$$v=undefined;p.then(function(val){p.$$v=val})}v=v.$$v}return v}}function arrayDeclaration(){var elementFns=[],allConstant=!0;if("]"!=peekToken().text)do{var elementFn=expression();elementFns.push(elementFn);elementFn.constant||(allConstant=!1)}while(expect(","));consume("]");return extend(function(self,locals){for(var array=[],i=0;i<elementFns.length;i++)array.push(elementFns[i](self,locals));return array},{literal:!0,constant:allConstant})}function object(){var keyValues=[],allConstant=!0;if("}"!=peekToken().text)do{var token=expect(),key=token.string||token.text;consume(":");var value=expression();keyValues.push({key:key,value:value});value.constant||(allConstant=!1)}while(expect(","));consume("}");return extend(function(self,locals){for(var object={},i=0;i<keyValues.length;i++){var keyValue=keyValues[i];object[keyValue.key]=keyValue.value(self,locals)}return object},{literal:!0,constant:allConstant})}var value,ZERO=valueFn(0),tokens=lex(text,csp),assignment=_assignment,functionCall=_functionCall,fieldAccess=_fieldAccess,objectIndex=_objectIndex,filterChain=_filterChain;if(json){assignment=logicalOR;functionCall=fieldAccess=objectIndex=filterChain=function(){throwError("is not valid json",{text:text,index:0})};value=primary()}else value=statements();0!==tokens.length&&throwError("is an unexpected token",tokens[0]);value.literal=!!value.literal;value.constant=!!value.constant;return value}function setter(obj,path,setValue,fullExp){for(var key,element=path.split("."),i=0;element.length>1;i++){key=ensureSafeMemberName(element.shift(),fullExp);var propertyObj=obj[key];if(!propertyObj){propertyObj={};obj[key]=propertyObj}obj=propertyObj;if(obj.then){"$$v"in obj||!function(promise){promise.then(function(val){promise.$$v=val})}(obj);obj.$$v===undefined&&(obj.$$v={});obj=obj.$$v}}key=ensureSafeMemberName(element.shift(),fullExp);obj[key]=setValue;return setValue}function cspSafeGetterFn(key0,key1,key2,key3,key4,fullExp){ensureSafeMemberName(key0,fullExp);ensureSafeMemberName(key1,fullExp);ensureSafeMemberName(key2,fullExp);ensureSafeMemberName(key3,fullExp);ensureSafeMemberName(key4,fullExp);return function(scope,locals){var promise,pathVal=locals&&locals.hasOwnProperty(key0)?locals:scope;if(null===pathVal||pathVal===undefined)return pathVal;pathVal=pathVal[key0];if(pathVal&&pathVal.then){if(!("$$v"in pathVal)){promise=pathVal;promise.$$v=undefined;promise.then(function(val){promise.$$v=val})}pathVal=pathVal.$$v}if(!key1||null===pathVal||pathVal===undefined)return pathVal;pathVal=pathVal[key1];if(pathVal&&pathVal.then){if(!("$$v"in pathVal)){promise=pathVal;promise.$$v=undefined;promise.then(function(val){promise.$$v=val})}pathVal=pathVal.$$v}if(!key2||null===pathVal||pathVal===undefined)return pathVal;pathVal=pathVal[key2];if(pathVal&&pathVal.then){if(!("$$v"in pathVal)){promise=pathVal;promise.$$v=undefined;promise.then(function(val){promise.$$v=val})}pathVal=pathVal.$$v}if(!key3||null===pathVal||pathVal===undefined)return pathVal;pathVal=pathVal[key3];if(pathVal&&pathVal.then){if(!("$$v"in pathVal)){promise=pathVal;promise.$$v=undefined;promise.then(function(val){promise.$$v=val})}pathVal=pathVal.$$v}if(!key4||null===pathVal||pathVal===undefined)return pathVal;pathVal=pathVal[key4];if(pathVal&&pathVal.then){if(!("$$v"in pathVal)){promise=pathVal;promise.$$v=undefined;promise.then(function(val){promise.$$v=val})}pathVal=pathVal.$$v}return pathVal}}function getterFn(path,csp,fullExp){if(getterFnCache.hasOwnProperty(path))return getterFnCache[path];var fn,pathKeys=path.split("."),pathKeysLength=pathKeys.length;if(csp)fn=6>pathKeysLength?cspSafeGetterFn(pathKeys[0],pathKeys[1],pathKeys[2],pathKeys[3],pathKeys[4],fullExp):function(scope,locals){var val,i=0;do{val=cspSafeGetterFn(pathKeys[i++],pathKeys[i++],pathKeys[i++],pathKeys[i++],pathKeys[i++],fullExp)(scope,locals);locals=undefined;scope=val}while(pathKeysLength>i);return val};else{var code="var l, fn, p;\n";forEach(pathKeys,function(key,index){ensureSafeMemberName(key,fullExp);code+="if(s === null || s === undefined) return s;\nl=s;\ns="+(index?"s":'((k&&k.hasOwnProperty("'+key+'"))?k:s)')+'["'+key+'"];\nif (s && s.then) {\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v=v;});\n}\n s=s.$$v\n}\n'});code+="return s;";fn=Function("s","k",code);fn.toString=function(){return code}}return getterFnCache[path]=fn}function $ParseProvider(){var cache={};this.$get=["$filter","$sniffer",function($filter,$sniffer){return function(exp){switch(typeof exp){case"string":return cache.hasOwnProperty(exp)?cache[exp]:cache[exp]=parser(exp,!1,$filter,$sniffer.csp);case"function":return exp;default:return noop}}}]}function $QProvider(){this.$get=["$rootScope","$exceptionHandler",function($rootScope,$exceptionHandler){return qFactory(function(callback){$rootScope.$evalAsync(callback)},$exceptionHandler)}]}function qFactory(nextTick,exceptionHandler){function defaultCallback(value){return value}function defaultErrback(reason){return reject(reason)}function all(promises){var deferred=defer(),counter=0,results=isArray(promises)?[]:{};forEach(promises,function(promise,key){counter++;ref(promise).then(function(value){if(!results.hasOwnProperty(key)){results[key]=value;--counter||deferred.resolve(results)}},function(reason){results.hasOwnProperty(key)||deferred.reject(reason)})});0===counter&&deferred.resolve(results);return deferred.promise}var defer=function(){var value,deferred,pending=[];deferred={resolve:function(val){if(pending){var callbacks=pending;pending=undefined;value=ref(val);callbacks.length&&nextTick(function(){for(var callback,i=0,ii=callbacks.length;ii>i;i++){callback=callbacks[i];value.then(callback[0],callback[1],callback[2])}})}},reject:function(reason){deferred.resolve(reject(reason))},notify:function(progress){if(pending){var callbacks=pending;pending.length&&nextTick(function(){for(var callback,i=0,ii=callbacks.length;ii>i;i++){callback=callbacks[i];callback[2](progress)}})}},promise:{then:function(callback,errback,progressback){var result=defer(),wrappedCallback=function(value){try{result.resolve((isFunction(callback)?callback:defaultCallback)(value))}catch(e){result.reject(e);exceptionHandler(e)}},wrappedErrback=function(reason){try{result.resolve((isFunction(errback)?errback:defaultErrback)(reason));
}catch(e){result.reject(e);exceptionHandler(e)}},wrappedProgressback=function(progress){try{result.notify((isFunction(progressback)?progressback:defaultCallback)(progress))}catch(e){exceptionHandler(e)}};pending?pending.push([wrappedCallback,wrappedErrback,wrappedProgressback]):value.then(wrappedCallback,wrappedErrback,wrappedProgressback);return result.promise},"catch":function(callback){return this.then(null,callback)},"finally":function(callback){function makePromise(value,resolved){var result=defer();resolved?result.resolve(value):result.reject(value);return result.promise}function handleCallback(value,isResolved){var callbackOutput=null;try{callbackOutput=(callback||defaultCallback)()}catch(e){return makePromise(e,!1)}return callbackOutput&&isFunction(callbackOutput.then)?callbackOutput.then(function(){return makePromise(value,isResolved)},function(error){return makePromise(error,!1)}):makePromise(value,isResolved)}return this.then(function(value){return handleCallback(value,!0)},function(error){return handleCallback(error,!1)})}}};return deferred},ref=function(value){return value&&isFunction(value.then)?value:{then:function(callback){var result=defer();nextTick(function(){result.resolve(callback(value))});return result.promise}}},reject=function(reason){return{then:function(callback,errback){var result=defer();nextTick(function(){try{result.resolve((isFunction(errback)?errback:defaultErrback)(reason))}catch(e){result.reject(e);exceptionHandler(e)}});return result.promise}}},when=function(value,callback,errback,progressback){var done,result=defer(),wrappedCallback=function(value){try{return(isFunction(callback)?callback:defaultCallback)(value)}catch(e){exceptionHandler(e);return reject(e)}},wrappedErrback=function(reason){try{return(isFunction(errback)?errback:defaultErrback)(reason)}catch(e){exceptionHandler(e);return reject(e)}},wrappedProgressback=function(progress){try{return(isFunction(progressback)?progressback:defaultCallback)(progress)}catch(e){exceptionHandler(e)}};nextTick(function(){ref(value).then(function(value){if(!done){done=!0;result.resolve(ref(value).then(wrappedCallback,wrappedErrback,wrappedProgressback))}},function(reason){if(!done){done=!0;result.resolve(wrappedErrback(reason))}},function(progress){done||result.notify(wrappedProgressback(progress))})});return result.promise};return{defer:defer,reject:reject,when:when,all:all}}function $RootScopeProvider(){var TTL=10,$rootScopeMinErr=minErr("$rootScope");this.digestTtl=function(value){arguments.length&&(TTL=value);return TTL};this.$get=["$injector","$exceptionHandler","$parse","$browser",function($injector,$exceptionHandler,$parse,$browser){function Scope(){this.$id=nextUid();this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this["this"]=this.$root=this;this.$$destroyed=!1;this.$$asyncQueue=[];this.$$postDigestQueue=[];this.$$listeners={};this.$$isolateBindings={}}function beginPhase(phase){if($rootScope.$$phase)throw $rootScopeMinErr("inprog","{0} already in progress",$rootScope.$$phase);$rootScope.$$phase=phase}function clearPhase(){$rootScope.$$phase=null}function compileToFn(exp,name){var fn=$parse(exp);assertArgFn(fn,name);return fn}function initWatchVal(){}Scope.prototype={constructor:Scope,$new:function(isolate){var Child,child;if(isolate){child=new Scope;child.$root=this.$root;child.$$asyncQueue=this.$$asyncQueue;child.$$postDigestQueue=this.$$postDigestQueue}else{Child=function(){};Child.prototype=this;child=new Child;child.$id=nextUid()}child["this"]=child;child.$$listeners={};child.$parent=this;child.$$watchers=child.$$nextSibling=child.$$childHead=child.$$childTail=null;child.$$prevSibling=this.$$childTail;if(this.$$childHead){this.$$childTail.$$nextSibling=child;this.$$childTail=child}else this.$$childHead=this.$$childTail=child;return child},$watch:function(watchExp,listener,objectEquality){var scope=this,get=compileToFn(watchExp,"watch"),array=scope.$$watchers,watcher={fn:listener,last:initWatchVal,get:get,exp:watchExp,eq:!!objectEquality};if(!isFunction(listener)){var listenFn=compileToFn(listener||noop,"listener");watcher.fn=function(newVal,oldVal,scope){listenFn(scope)}}if("string"==typeof watchExp&&get.constant){var originalFn=watcher.fn;watcher.fn=function(newVal,oldVal,scope){originalFn.call(this,newVal,oldVal,scope);arrayRemove(array,watcher)}}array||(array=scope.$$watchers=[]);array.unshift(watcher);return function(){arrayRemove(array,watcher)}},$watchCollection:function(obj,listener){function $watchCollectionWatch(){newValue=objGetter(self);var newLength,key;if(isObject(newValue))if(isArrayLike(newValue)){if(oldValue!==internalArray){oldValue=internalArray;oldLength=oldValue.length=0;changeDetected++}newLength=newValue.length;if(oldLength!==newLength){changeDetected++;oldValue.length=oldLength=newLength}for(var i=0;newLength>i;i++)if(oldValue[i]!==newValue[i]){changeDetected++;oldValue[i]=newValue[i]}}else{if(oldValue!==internalObject){oldValue=internalObject={};oldLength=0;changeDetected++}newLength=0;for(key in newValue)if(newValue.hasOwnProperty(key)){newLength++;if(oldValue.hasOwnProperty(key)){if(oldValue[key]!==newValue[key]){changeDetected++;oldValue[key]=newValue[key]}}else{oldLength++;oldValue[key]=newValue[key];changeDetected++}}if(oldLength>newLength){changeDetected++;for(key in oldValue)if(oldValue.hasOwnProperty(key)&&!newValue.hasOwnProperty(key)){oldLength--;delete oldValue[key]}}}else if(oldValue!==newValue){oldValue=newValue;changeDetected++}return changeDetected}function $watchCollectionAction(){listener(newValue,oldValue,self)}var oldValue,newValue,self=this,changeDetected=0,objGetter=$parse(obj),internalArray=[],internalObject={},oldLength=0;return this.$watch($watchCollectionWatch,$watchCollectionAction)},$digest:function(){var watch,value,last,watchers,length,dirty,next,current,logIdx,logMsg,asyncQueue=this.$$asyncQueue,postDigestQueue=this.$$postDigestQueue,ttl=TTL,target=this,watchLog=[];beginPhase("$digest");do{dirty=!1;current=target;for(;asyncQueue.length;)try{current.$eval(asyncQueue.shift())}catch(e){$exceptionHandler(e)}do{if(watchers=current.$$watchers){length=watchers.length;for(;length--;)try{watch=watchers[length];if(watch&&(value=watch.get(current))!==(last=watch.last)&&!(watch.eq?equals(value,last):"number"==typeof value&&"number"==typeof last&&isNaN(value)&&isNaN(last))){dirty=!0;watch.last=watch.eq?copy(value):value;watch.fn(value,last===initWatchVal?value:last,current);if(5>ttl){logIdx=4-ttl;watchLog[logIdx]||(watchLog[logIdx]=[]);logMsg=isFunction(watch.exp)?"fn: "+(watch.exp.name||watch.exp.toString()):watch.exp;logMsg+="; newVal: "+toJson(value)+"; oldVal: "+toJson(last);watchLog[logIdx].push(logMsg)}}}catch(e){$exceptionHandler(e)}}if(!(next=current.$$childHead||current!==target&&current.$$nextSibling))for(;current!==target&&!(next=current.$$nextSibling);)current=current.$parent}while(current=next);if(dirty&&!ttl--){clearPhase();throw $rootScopeMinErr("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",TTL,toJson(watchLog))}}while(dirty||asyncQueue.length);clearPhase();for(;postDigestQueue.length;)try{postDigestQueue.shift()()}catch(e){$exceptionHandler(e)}},$destroy:function(){if($rootScope!=this&&!this.$$destroyed){var parent=this.$parent;this.$broadcast("$destroy");this.$$destroyed=!0;parent.$$childHead==this&&(parent.$$childHead=this.$$nextSibling);parent.$$childTail==this&&(parent.$$childTail=this.$$prevSibling);this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling);this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling);this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null}},$eval:function(expr,locals){return $parse(expr)(this,locals)},$evalAsync:function(expr){$rootScope.$$phase||$rootScope.$$asyncQueue.length||$browser.defer(function(){$rootScope.$$asyncQueue.length&&$rootScope.$digest()});this.$$asyncQueue.push(expr)},$$postDigest:function(expr){this.$$postDigestQueue.push(expr)},$apply:function(expr){try{beginPhase("$apply");return this.$eval(expr)}catch(e){$exceptionHandler(e)}finally{clearPhase();try{$rootScope.$digest()}catch(e){$exceptionHandler(e);throw e}}},$on:function(name,listener){var namedListeners=this.$$listeners[name];namedListeners||(this.$$listeners[name]=namedListeners=[]);namedListeners.push(listener);return function(){namedListeners[indexOf(namedListeners,listener)]=null}},$emit:function(name,args){var namedListeners,i,length,empty=[],scope=this,stopPropagation=!1,event={name:name,targetScope:scope,stopPropagation:function(){stopPropagation=!0},preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1},listenerArgs=concat([event],arguments,1);do{namedListeners=scope.$$listeners[name]||empty;event.currentScope=scope;for(i=0,length=namedListeners.length;length>i;i++)if(namedListeners[i])try{namedListeners[i].apply(null,listenerArgs);if(stopPropagation)return event}catch(e){$exceptionHandler(e)}else{namedListeners.splice(i,1);i--;length--}scope=scope.$parent}while(scope);return event},$broadcast:function(name,args){var listeners,i,length,target=this,current=target,next=target,event={name:name,targetScope:target,preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1},listenerArgs=concat([event],arguments,1);do{current=next;event.currentScope=current;listeners=current.$$listeners[name]||[];for(i=0,length=listeners.length;length>i;i++)if(listeners[i])try{listeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}else{listeners.splice(i,1);i--;length--}if(!(next=current.$$childHead||current!==target&&current.$$nextSibling))for(;current!==target&&!(next=current.$$nextSibling);)current=current.$parent}while(current=next);return event}};var $rootScope=new Scope;return $rootScope}]}function $SceDelegateProvider(){this.SCE_CONTEXTS=SCE_CONTEXTS;var resourceUrlWhitelist=["self"],resourceUrlBlacklist=[];this.resourceUrlWhitelist=function(value){arguments.length&&(resourceUrlWhitelist=value);return resourceUrlWhitelist};this.resourceUrlBlacklist=function(value){arguments.length&&(resourceUrlBlacklist=value);return resourceUrlBlacklist};this.$get=["$log","$document","$injector","$$urlUtils",function($log,$document,$injector,$$urlUtils){function matchUrl(matcher,parsedUrl){return"self"===matcher?$$urlUtils.isSameOrigin(parsedUrl):!!parsedUrl.href.match(matcher)}function isResourceUrlAllowedByPolicy(url){var i,n,parsedUrl=$$urlUtils.resolve(url.toString(),!0),allowed=!1;for(i=0,n=resourceUrlWhitelist.length;n>i;i++)if(matchUrl(resourceUrlWhitelist[i],parsedUrl)){allowed=!0;break}if(allowed)for(i=0,n=resourceUrlBlacklist.length;n>i;i++)if(matchUrl(resourceUrlBlacklist[i],parsedUrl)){allowed=!1;break}return allowed}function generateHolderType(base){var holderType=function(trustedValue){this.$$unwrapTrustedValue=function(){return trustedValue}};base&&(holderType.prototype=new base);holderType.prototype.valueOf=function(){return this.$$unwrapTrustedValue()};holderType.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()};return holderType}function trustAs(type,trustedValue){var constructor=byType.hasOwnProperty(type)?byType[type]:null;if(!constructor)throw $sceMinErr("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",type,trustedValue);if(null===trustedValue||trustedValue===undefined||""===trustedValue)return trustedValue;if("string"!=typeof trustedValue)throw $sceMinErr("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",type);return new constructor(trustedValue)}function valueOf(maybeTrusted){return maybeTrusted instanceof trustedValueHolderBase?maybeTrusted.$$unwrapTrustedValue():maybeTrusted}function getTrusted(type,maybeTrusted){if(null===maybeTrusted||maybeTrusted===undefined||""===maybeTrusted)return maybeTrusted;var constructor=byType.hasOwnProperty(type)?byType[type]:null;if(constructor&&maybeTrusted instanceof constructor)return maybeTrusted.$$unwrapTrustedValue();if(type===SCE_CONTEXTS.RESOURCE_URL){if(isResourceUrlAllowedByPolicy(maybeTrusted))return maybeTrusted;throw $sceMinErr("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",maybeTrusted.toString())}if(type===SCE_CONTEXTS.HTML)return htmlSanitizer(maybeTrusted);throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")}var htmlSanitizer=function(html){throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")};$injector.has("$sanitize")&&(htmlSanitizer=$injector.get("$sanitize"));var trustedValueHolderBase=generateHolderType(),byType={};byType[SCE_CONTEXTS.HTML]=generateHolderType(trustedValueHolderBase);byType[SCE_CONTEXTS.CSS]=generateHolderType(trustedValueHolderBase);byType[SCE_CONTEXTS.URL]=generateHolderType(trustedValueHolderBase);byType[SCE_CONTEXTS.JS]=generateHolderType(trustedValueHolderBase);byType[SCE_CONTEXTS.RESOURCE_URL]=generateHolderType(byType[SCE_CONTEXTS.URL]);return{trustAs:trustAs,getTrusted:getTrusted,valueOf:valueOf}}]}function $SceProvider(){var enabled=!0;this.enabled=function(value){arguments.length&&(enabled=!!value);return enabled};this.$get=["$parse","$document","$sceDelegate",function($parse,$document,$sceDelegate){if(enabled&&msie){var documentMode=$document[0].documentMode;if(documentMode!==undefined&&8>documentMode)throw $sceMinErr("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 9 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.")}var sce=copy(SCE_CONTEXTS);sce.isEnabled=function(){return enabled};sce.trustAs=$sceDelegate.trustAs;sce.getTrusted=$sceDelegate.getTrusted;sce.valueOf=$sceDelegate.valueOf;enabled||(sce.trustAs=sce.getTrusted=function(type,value){return value},sce.valueOf=identity);sce.parseAs=function(type,expr){var parsed=$parse(expr);return parsed.literal&&parsed.constant?parsed:function(self,locals){return sce.getTrusted(type,parsed(self,locals))}};var parse=sce.parseAs,getTrusted=sce.getTrusted,trustAs=sce.trustAs;angular.forEach(SCE_CONTEXTS,function(enumValue,name){var lName=lowercase(name);sce[camelCase("parse_as_"+lName)]=function(expr){return parse(enumValue,expr)};sce[camelCase("get_trusted_"+lName)]=function(value){return getTrusted(enumValue,value)};sce[camelCase("trust_as_"+lName)]=function(value){return trustAs(enumValue,value)}});return sce}]}function $SnifferProvider(){this.$get=["$window","$document",function($window,$document){var vendorPrefix,match,eventSupport={},android=int((/android (\d+)/.exec(lowercase(($window.navigator||{}).userAgent))||[])[1]),boxee=/Boxee/i.test(($window.navigator||{}).userAgent),document=$document[0]||{},vendorRegex=/^(Moz|webkit|O|ms)(?=[A-Z])/,bodyStyle=document.body&&document.body.style,transitions=!1,animations=!1;if(bodyStyle){for(var prop in bodyStyle)if(match=vendorRegex.exec(prop)){vendorPrefix=match[0];vendorPrefix=vendorPrefix.substr(0,1).toUpperCase()+vendorPrefix.substr(1);break}vendorPrefix||(vendorPrefix="WebkitOpacity"in bodyStyle&&"webkit");transitions=!!("transition"in bodyStyle||vendorPrefix+"Transition"in bodyStyle);animations=!!("animation"in bodyStyle||vendorPrefix+"Animation"in bodyStyle);if(android&&(!transitions||!animations)){transitions=isString(document.body.style.webkitTransition);animations=isString(document.body.style.webkitAnimation)}}return{history:!(!$window.history||!$window.history.pushState||4>android||boxee),hashchange:"onhashchange"in $window&&(!document.documentMode||document.documentMode>7),hasEvent:function(event){if("input"==event&&9==msie)return!1;if(isUndefined(eventSupport[event])){var divElm=document.createElement("div");eventSupport[event]="on"+event in divElm}return eventSupport[event]},csp:document.securityPolicy?document.securityPolicy.isActive:!1,vendorPrefix:vendorPrefix,transitions:transitions,animations:animations}}]}function $TimeoutProvider(){this.$get=["$rootScope","$browser","$q","$exceptionHandler",function($rootScope,$browser,$q,$exceptionHandler){function timeout(fn,delay,invokeApply){var timeoutId,deferred=$q.defer(),promise=deferred.promise,skipApply=isDefined(invokeApply)&&!invokeApply;timeoutId=$browser.defer(function(){try{deferred.resolve(fn())}catch(e){deferred.reject(e);$exceptionHandler(e)}finally{delete deferreds[promise.$$timeoutId]}skipApply||$rootScope.$apply()},delay);promise.$$timeoutId=timeoutId;deferreds[timeoutId]=deferred;return promise}var deferreds={};timeout.cancel=function(promise){if(promise&&promise.$$timeoutId in deferreds){deferreds[promise.$$timeoutId].reject("canceled");delete deferreds[promise.$$timeoutId];return $browser.defer.cancel(promise.$$timeoutId)}return!1};return timeout}]}function $$UrlUtilsProvider(){this.$get=[function(){function resolve(url,parse){var href=url;if(11>=msie){urlParsingNode.setAttribute("href",href);href=urlParsingNode.href}urlParsingNode.setAttribute("href",href);return parse?{href:urlParsingNode.href,protocol:urlParsingNode.protocol,host:urlParsingNode.host}:urlParsingNode.href}var urlParsingNode=document.createElement("a"),originUrl=resolve(window.location.href,!0);return{resolve:resolve,isSameOrigin:function(requestUrl){var parsed="string"==typeof requestUrl?resolve(requestUrl,!0):requestUrl;return parsed.protocol===originUrl.protocol&&parsed.host===originUrl.host}}}]}function $WindowProvider(){this.$get=valueFn(window)}function $FilterProvider($provide){function register(name,factory){return $provide.factory(name+suffix,factory)}var suffix="Filter";this.register=register;this.$get=["$injector",function($injector){return function(name){return $injector.get(name+suffix)}}];register("currency",currencyFilter);register("date",dateFilter);register("filter",filterFilter);register("json",jsonFilter);register("limitTo",limitToFilter);register("lowercase",lowercaseFilter);register("number",numberFilter);register("orderBy",orderByFilter);register("uppercase",uppercaseFilter)}function filterFilter(){return function(array,expression,comperator){if(!isArray(array))return array;var predicates=[];predicates.check=function(value){for(var j=0;j<predicates.length;j++)if(!predicates[j](value))return!1;return!0};switch(typeof comperator){case"function":break;case"boolean":if(1==comperator){comperator=function(obj,text){return angular.equals(obj,text)};break}default:comperator=function(obj,text){text=(""+text).toLowerCase();return(""+obj).toLowerCase().indexOf(text)>-1}}var search=function(obj,text){if("string"==typeof text&&"!"===text.charAt(0))return!search(obj,text.substr(1));switch(typeof obj){case"boolean":case"number":case"string":return comperator(obj,text);case"object":switch(typeof text){case"object":return comperator(obj,text);default:for(var objKey in obj)if("$"!==objKey.charAt(0)&&search(obj[objKey],text))return!0}return!1;case"array":for(var i=0;i<obj.length;i++)if(search(obj[i],text))return!0;return!1;default:return!1}};switch(typeof expression){case"boolean":case"number":case"string":expression={$:expression};case"object":for(var key in expression)"$"==key?!function(){if(expression[key]){var path=key;predicates.push(function(value){return search(value,expression[path])})}}():!function(){if("undefined"!=typeof expression[key]){var path=key;predicates.push(function(value){return search(getter(value,path),expression[path])})}}();break;case"function":predicates.push(expression);break;default:return array}for(var filtered=[],j=0;j<array.length;j++){var value=array[j];predicates.check(value)&&filtered.push(value)}return filtered}}function currencyFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(amount,currencySymbol){isUndefined(currencySymbol)&&(currencySymbol=formats.CURRENCY_SYM);return formatNumber(amount,formats.PATTERNS[1],formats.GROUP_SEP,formats.DECIMAL_SEP,2).replace(/\u00A4/g,currencySymbol)}}function numberFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(number,fractionSize){return formatNumber(number,formats.PATTERNS[0],formats.GROUP_SEP,formats.DECIMAL_SEP,fractionSize)}}function formatNumber(number,pattern,groupSep,decimalSep,fractionSize){if(isNaN(number)||!isFinite(number))return"";var isNegative=0>number;number=Math.abs(number);var numStr=number+"",formatedText="",parts=[],hasExponent=!1;if(-1!==numStr.indexOf("e")){var match=numStr.match(/([\d\.]+)e(-?)(\d+)/);if(match&&"-"==match[2]&&match[3]>fractionSize+1)numStr="0";else{formatedText=numStr;hasExponent=!0}}if(hasExponent)fractionSize>0&&number>-1&&1>number&&(formatedText=number.toFixed(fractionSize));else{var fractionLen=(numStr.split(DECIMAL_SEP)[1]||"").length;isUndefined(fractionSize)&&(fractionSize=Math.min(Math.max(pattern.minFrac,fractionLen),pattern.maxFrac));var pow=Math.pow(10,fractionSize);number=Math.round(number*pow)/pow;var fraction=(""+number).split(DECIMAL_SEP),whole=fraction[0];fraction=fraction[1]||"";var pos=0,lgroup=pattern.lgSize,group=pattern.gSize;if(whole.length>=lgroup+group){pos=whole.length-lgroup;for(var i=0;pos>i;i++){(pos-i)%group===0&&0!==i&&(formatedText+=groupSep);formatedText+=whole.charAt(i)}}for(i=pos;i<whole.length;i++){(whole.length-i)%lgroup===0&&0!==i&&(formatedText+=groupSep);formatedText+=whole.charAt(i)}for(;fraction.length<fractionSize;)fraction+="0";fractionSize&&"0"!==fractionSize&&(formatedText+=decimalSep+fraction.substr(0,fractionSize))}parts.push(isNegative?pattern.negPre:pattern.posPre);parts.push(formatedText);parts.push(isNegative?pattern.negSuf:pattern.posSuf);return parts.join("")}function padNumber(num,digits,trim){var neg="";if(0>num){neg="-";num=-num}num=""+num;for(;num.length<digits;)num="0"+num;trim&&(num=num.substr(num.length-digits));return neg+num}function dateGetter(name,size,offset,trim){offset=offset||0;return function(date){var value=date["get"+name]();(offset>0||value>-offset)&&(value+=offset);0===value&&-12==offset&&(value=12);return padNumber(value,size,trim)}}function dateStrGetter(name,shortForm){return function(date,formats){var value=date["get"+name](),get=uppercase(shortForm?"SHORT"+name:name);return formats[get][value]}}function timeZoneGetter(date){var zone=-1*date.getTimezoneOffset(),paddedZone=zone>=0?"+":"";paddedZone+=padNumber(Math[zone>0?"floor":"ceil"](zone/60),2)+padNumber(Math.abs(zone%60),2);return paddedZone}function ampmGetter(date,formats){return date.getHours()<12?formats.AMPMS[0]:formats.AMPMS[1]}function dateFilter($locale){function jsonStringToDate(string){var match;if(match=string.match(R_ISO8601_STR)){var date=new Date(0),tzHour=0,tzMin=0,dateSetter=match[8]?date.setUTCFullYear:date.setFullYear,timeSetter=match[8]?date.setUTCHours:date.setHours;if(match[9]){tzHour=int(match[9]+match[10]);tzMin=int(match[9]+match[11])}dateSetter.call(date,int(match[1]),int(match[2])-1,int(match[3]));var h=int(match[4]||0)-tzHour,m=int(match[5]||0)-tzMin,s=int(match[6]||0),ms=Math.round(1e3*parseFloat("0."+(match[7]||0)));timeSetter.call(date,h,m,s,ms);return date}return string}var R_ISO8601_STR=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(date,format){var fn,match,text="",parts=[];format=format||"mediumDate";format=$locale.DATETIME_FORMATS[format]||format;isString(date)&&(date=NUMBER_STRING.test(date)?int(date):jsonStringToDate(date));isNumber(date)&&(date=new Date(date));if(!isDate(date))return date;for(;format;){match=DATE_FORMATS_SPLIT.exec(format);if(match){parts=concat(parts,match,1);format=parts.pop()}else{parts.push(format);format=null}}forEach(parts,function(value){fn=DATE_FORMATS[value];text+=fn?fn(date,$locale.DATETIME_FORMATS):value.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return text}}function jsonFilter(){return function(object){return toJson(object,!0)}}function limitToFilter(){return function(input,limit){if(!isArray(input)&&!isString(input))return input;limit=int(limit);if(isString(input))return limit?limit>=0?input.slice(0,limit):input.slice(limit,input.length):"";var i,n,out=[];limit>input.length?limit=input.length:limit<-input.length&&(limit=-input.length);if(limit>0){i=0;n=limit}else{i=input.length+limit;n=input.length}for(;n>i;i++)out.push(input[i]);return out}}function orderByFilter($parse){return function(array,sortPredicate,reverseOrder){function comparator(o1,o2){for(var i=0;i<sortPredicate.length;i++){var comp=sortPredicate[i](o1,o2);if(0!==comp)return comp}return 0}function reverseComparator(comp,descending){return toBoolean(descending)?function(a,b){return comp(b,a)}:comp}function compare(v1,v2){var t1=typeof v1,t2=typeof v2;if(t1==t2){if("string"==t1){v1=v1.toLowerCase();v2=v2.toLowerCase()}return v1===v2?0:v2>v1?-1:1}return t2>t1?-1:1}if(!isArray(array))return array;if(!sortPredicate)return array;sortPredicate=isArray(sortPredicate)?sortPredicate:[sortPredicate];sortPredicate=map(sortPredicate,function(predicate){var descending=!1,get=predicate||identity;if(isString(predicate)){if("+"==predicate.charAt(0)||"-"==predicate.charAt(0)){descending="-"==predicate.charAt(0);predicate=predicate.substring(1)}get=$parse(predicate)}return reverseComparator(function(a,b){return compare(get(a),get(b))},descending)});for(var arrayCopy=[],i=0;i<array.length;i++)arrayCopy.push(array[i]);return arrayCopy.sort(reverseComparator(comparator,reverseOrder))}}function ngDirective(directive){isFunction(directive)&&(directive={link:directive});directive.restrict=directive.restrict||"AC";return valueFn(directive)}function FormController(element,attrs){function toggleValidCss(isValid,validationErrorKey){validationErrorKey=validationErrorKey?"-"+snake_case(validationErrorKey,"-"):"";element.removeClass((isValid?INVALID_CLASS:VALID_CLASS)+validationErrorKey).addClass((isValid?VALID_CLASS:INVALID_CLASS)+validationErrorKey)}var form=this,parentForm=element.parent().controller("form")||nullFormCtrl,invalidCount=0,errors=form.$error={},controls=[];form.$name=attrs.name||attrs.ngForm;form.$dirty=!1;form.$pristine=!0;form.$valid=!0;form.$invalid=!1;parentForm.$addControl(form);element.addClass(PRISTINE_CLASS);toggleValidCss(!0);form.$addControl=function(control){controls.push(control);control.$name&&!form.hasOwnProperty(control.$name)&&(form[control.$name]=control)};form.$removeControl=function(control){control.$name&&form[control.$name]===control&&delete form[control.$name];forEach(errors,function(queue,validationToken){form.$setValidity(validationToken,!0,control)});arrayRemove(controls,control)};form.$setValidity=function(validationToken,isValid,control){var queue=errors[validationToken];if(isValid){if(queue){arrayRemove(queue,control);if(!queue.length){invalidCount--;if(!invalidCount){toggleValidCss(isValid);form.$valid=!0;form.$invalid=!1}errors[validationToken]=!1;toggleValidCss(!0,validationToken);parentForm.$setValidity(validationToken,!0,form)}}}else{invalidCount||toggleValidCss(isValid);if(queue){if(includes(queue,control))return}else{errors[validationToken]=queue=[];invalidCount++;toggleValidCss(!1,validationToken);parentForm.$setValidity(validationToken,!1,form)}queue.push(control);form.$valid=!1;form.$invalid=!0}};form.$setDirty=function(){element.removeClass(PRISTINE_CLASS).addClass(DIRTY_CLASS);form.$dirty=!0;form.$pristine=!1;parentForm.$setDirty()};form.$setPristine=function(){element.removeClass(DIRTY_CLASS).addClass(PRISTINE_CLASS);form.$dirty=!1;form.$pristine=!0;forEach(controls,function(control){control.$setPristine()})}}function isEmpty(value){return isUndefined(value)||""===value||null===value||value!==value}function textInputType(scope,element,attr,ctrl,$sniffer,$browser){var listener=function(){var value=element.val();toBoolean(attr.ngTrim||"T")&&(value=trim(value));ctrl.$viewValue!==value&&scope.$apply(function(){ctrl.$setViewValue(value)})};if($sniffer.hasEvent("input"))element.on("input",listener);else{var timeout,deferListener=function(){timeout||(timeout=$browser.defer(function(){listener();timeout=null}))};element.on("keydown",function(event){var key=event.keyCode;91===key||key>15&&19>key||key>=37&&40>=key||deferListener()});element.on("change",listener);$sniffer.hasEvent("paste")&&element.on("paste cut",deferListener)}ctrl.$render=function(){element.val(isEmpty(ctrl.$viewValue)?"":ctrl.$viewValue)};var patternValidator,match,pattern=attr.ngPattern,validate=function(regexp,value){if(isEmpty(value)||regexp.test(value)){ctrl.$setValidity("pattern",!0);return value}ctrl.$setValidity("pattern",!1);return undefined};if(pattern){match=pattern.match(/^\/(.*)\/([gim]*)$/);if(match){pattern=new RegExp(match[1],match[2]);patternValidator=function(value){return validate(pattern,value)}}else patternValidator=function(value){var patternObj=scope.$eval(pattern);if(!patternObj||!patternObj.test)throw minErr("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",pattern,patternObj,startingTag(element));return validate(patternObj,value)};ctrl.$formatters.push(patternValidator);ctrl.$parsers.push(patternValidator)}if(attr.ngMinlength){var minlength=int(attr.ngMinlength),minLengthValidator=function(value){if(!isEmpty(value)&&value.length<minlength){ctrl.$setValidity("minlength",!1);return undefined}ctrl.$setValidity("minlength",!0);return value};ctrl.$parsers.push(minLengthValidator);ctrl.$formatters.push(minLengthValidator)}if(attr.ngMaxlength){var maxlength=int(attr.ngMaxlength),maxLengthValidator=function(value){if(!isEmpty(value)&&value.length>maxlength){ctrl.$setValidity("maxlength",!1);return undefined}ctrl.$setValidity("maxlength",!0);return value};ctrl.$parsers.push(maxLengthValidator);ctrl.$formatters.push(maxLengthValidator)}}function numberInputType(scope,element,attr,ctrl,$sniffer,$browser){textInputType(scope,element,attr,ctrl,$sniffer,$browser);ctrl.$parsers.push(function(value){var empty=isEmpty(value);if(empty||NUMBER_REGEXP.test(value)){ctrl.$setValidity("number",!0);return""===value?null:empty?value:parseFloat(value)}ctrl.$setValidity("number",!1);return undefined});ctrl.$formatters.push(function(value){return isEmpty(value)?"":""+value});if(attr.min){var min=parseFloat(attr.min),minValidator=function(value){if(!isEmpty(value)&&min>value){ctrl.$setValidity("min",!1);return undefined}ctrl.$setValidity("min",!0);return value};ctrl.$parsers.push(minValidator);ctrl.$formatters.push(minValidator)}if(attr.max){var max=parseFloat(attr.max),maxValidator=function(value){if(!isEmpty(value)&&value>max){ctrl.$setValidity("max",!1);return undefined}ctrl.$setValidity("max",!0);return value};ctrl.$parsers.push(maxValidator);ctrl.$formatters.push(maxValidator)}ctrl.$formatters.push(function(value){if(isEmpty(value)||isNumber(value)){ctrl.$setValidity("number",!0);return value}ctrl.$setValidity("number",!1);return undefined})}function urlInputType(scope,element,attr,ctrl,$sniffer,$browser){textInputType(scope,element,attr,ctrl,$sniffer,$browser);var urlValidator=function(value){if(isEmpty(value)||URL_REGEXP.test(value)){ctrl.$setValidity("url",!0);return value}ctrl.$setValidity("url",!1);return undefined};ctrl.$formatters.push(urlValidator);ctrl.$parsers.push(urlValidator)}function emailInputType(scope,element,attr,ctrl,$sniffer,$browser){textInputType(scope,element,attr,ctrl,$sniffer,$browser);var emailValidator=function(value){if(isEmpty(value)||EMAIL_REGEXP.test(value)){ctrl.$setValidity("email",!0);return value}ctrl.$setValidity("email",!1);return undefined};ctrl.$formatters.push(emailValidator);ctrl.$parsers.push(emailValidator)}function radioInputType(scope,element,attr,ctrl){isUndefined(attr.name)&&element.attr("name",nextUid());element.on("click",function(){element[0].checked&&scope.$apply(function(){ctrl.$setViewValue(attr.value)})});ctrl.$render=function(){var value=attr.value;element[0].checked=value==ctrl.$viewValue};attr.$observe("value",ctrl.$render)}function checkboxInputType(scope,element,attr,ctrl){var trueValue=attr.ngTrueValue,falseValue=attr.ngFalseValue;isString(trueValue)||(trueValue=!0);
isString(falseValue)||(falseValue=!1);element.on("click",function(){scope.$apply(function(){ctrl.$setViewValue(element[0].checked)})});ctrl.$render=function(){element[0].checked=ctrl.$viewValue};ctrl.$formatters.push(function(value){return value===trueValue});ctrl.$parsers.push(function(value){return value?trueValue:falseValue})}function classDirective(name,selector){name="ngClass"+name;return function(){return{restrict:"AC",link:function(scope,element,attr){function ngClassWatchAction(newVal){if(selector===!0||scope.$index%2===selector){oldVal&&!equals(newVal,oldVal)&&removeClass(oldVal);addClass(newVal)}oldVal=copy(newVal)}function removeClass(classVal){attr.$removeClass(flattenClasses(classVal))}function addClass(classVal){attr.$addClass(flattenClasses(classVal))}function flattenClasses(classVal){if(isArray(classVal))return classVal.join(" ");if(isObject(classVal)){var classes=[];forEach(classVal,function(v,k){v&&classes.push(k)});return classes.join(" ")}return classVal}var oldVal=undefined;scope.$watch(attr[name],ngClassWatchAction,!0);attr.$observe("class",function(value){ngClassWatchAction(scope.$eval(attr[name]))});"ngClass"!==name&&scope.$watch("$index",function($index,old$index){var mod=1&$index;mod!==old$index&1&&(mod===selector?addClass(scope.$eval(attr[name])):removeClass(scope.$eval(attr[name])))})}}}}var lowercase=(Object.prototype.hasOwnProperty,function(string){return isString(string)?string.toLowerCase():string}),uppercase=function(string){return isString(string)?string.toUpperCase():string},manualLowercase=function(s){return isString(s)?s.replace(/[A-Z]/g,function(ch){return String.fromCharCode(32|ch.charCodeAt(0))}):s},manualUppercase=function(s){return isString(s)?s.replace(/[a-z]/g,function(ch){return String.fromCharCode(-33&ch.charCodeAt(0))}):s};if("i"!=="I".toLowerCase()){lowercase=manualLowercase;uppercase=manualUppercase}var msie,jqLite,jQuery,angularModule,nodeName_,slice=[].slice,push=[].push,toString=Object.prototype.toString,ngMinErr=minErr("ng"),angular=(window.angular,window.angular||(window.angular={})),uid=["0","0","0"];msie=int((/msie (\d+)/.exec(lowercase(navigator.userAgent))||[])[1]);isNaN(msie)&&(msie=int((/trident\/.*; rv:(\d+)/.exec(lowercase(navigator.userAgent))||[])[1]));noop.$inject=[];identity.$inject=[];var trim=function(){return String.prototype.trim?function(value){return isString(value)?value.trim():value}:function(value){return isString(value)?value.replace(/^\s*/,"").replace(/\s*$/,""):value}}();nodeName_=9>msie?function(element){element=element.nodeName?element:element[0];return element.scopeName&&"HTML"!=element.scopeName?uppercase(element.scopeName+":"+element.nodeName):element.nodeName}:function(element){return element.nodeName?element.nodeName:element[0].nodeName};var SNAKE_CASE_REGEXP=/[A-Z]/g,version={full:"1.2.0-rc.2",major:1,minor:2,dot:0,codeName:"barehand-atomsplitting"},jqCache=JQLite.cache={},jqName=JQLite.expando="ng-"+(new Date).getTime(),jqId=1,addEventListenerFn=window.document.addEventListener?function(element,type,fn){element.addEventListener(type,fn,!1)}:function(element,type,fn){element.attachEvent("on"+type,fn)},removeEventListenerFn=window.document.removeEventListener?function(element,type,fn){element.removeEventListener(type,fn,!1)}:function(element,type,fn){element.detachEvent("on"+type,fn)},SPECIAL_CHARS_REGEXP=/([\:\-\_]+(.))/g,MOZ_HACK_REGEXP=/^moz([A-Z])/,jqLiteMinErr=minErr("jqLite"),JQLitePrototype=JQLite.prototype={ready:function(fn){function trigger(){if(!fired){fired=!0;fn()}}var fired=!1;if("complete"===document.readyState)setTimeout(trigger);else{this.on("DOMContentLoaded",trigger);JQLite(window).on("load",trigger)}},toString:function(){var value=[];forEach(this,function(e){value.push(""+e)});return"["+value.join(", ")+"]"},eq:function(index){return jqLite(index>=0?this[index]:this[this.length+index])},length:0,push:push,sort:[].sort,splice:[].splice},BOOLEAN_ATTR={};forEach("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(value){BOOLEAN_ATTR[lowercase(value)]=value});var BOOLEAN_ELEMENTS={};forEach("input,select,option,textarea,button,form,details".split(","),function(value){BOOLEAN_ELEMENTS[uppercase(value)]=!0});forEach({data:JQLiteData,inheritedData:JQLiteInheritedData,scope:function(element){return JQLiteInheritedData(element,"$scope")},controller:JQLiteController,injector:function(element){return JQLiteInheritedData(element,"$injector")},removeAttr:function(element,name){element.removeAttribute(name)},hasClass:JQLiteHasClass,css:function(element,name,value){name=camelCase(name);if(!isDefined(value)){var val;if(8>=msie){val=element.currentStyle&&element.currentStyle[name];""===val&&(val="auto")}val=val||element.style[name];8>=msie&&(val=""===val?undefined:val);return val}element.style[name]=value},attr:function(element,name,value){var lowercasedName=lowercase(name);if(BOOLEAN_ATTR[lowercasedName]){if(!isDefined(value))return element[name]||(element.attributes.getNamedItem(name)||noop).specified?lowercasedName:undefined;if(value){element[name]=!0;element.setAttribute(name,lowercasedName)}else{element[name]=!1;element.removeAttribute(lowercasedName)}}else if(isDefined(value))element.setAttribute(name,value);else if(element.getAttribute){var ret=element.getAttribute(name,2);return null===ret?undefined:ret}},prop:function(element,name,value){if(!isDefined(value))return element[name];element[name]=value},text:function(){function getText(element,value){var textProp=NODE_TYPE_TEXT_PROPERTY[element.nodeType];if(isUndefined(value))return textProp?element[textProp]:"";element[textProp]=value}var NODE_TYPE_TEXT_PROPERTY=[];if(9>msie){NODE_TYPE_TEXT_PROPERTY[1]="innerText";NODE_TYPE_TEXT_PROPERTY[3]="nodeValue"}else NODE_TYPE_TEXT_PROPERTY[1]=NODE_TYPE_TEXT_PROPERTY[3]="textContent";getText.$dv="";return getText}(),val:function(element,value){if(isUndefined(value)){if("SELECT"===nodeName_(element)&&element.multiple){var result=[];forEach(element.options,function(option){option.selected&&result.push(option.value||option.text)});return 0===result.length?null:result}return element.value}element.value=value},html:function(element,value){if(isUndefined(value))return element.innerHTML;for(var i=0,childNodes=element.childNodes;i<childNodes.length;i++)JQLiteDealoc(childNodes[i]);element.innerHTML=value}},function(fn,name){JQLite.prototype[name]=function(arg1,arg2){var i,key;if((2==fn.length&&fn!==JQLiteHasClass&&fn!==JQLiteController?arg1:arg2)===undefined){if(isObject(arg1)){for(i=0;i<this.length;i++)if(fn===JQLiteData)fn(this[i],arg1);else for(key in arg1)fn(this[i],key,arg1[key]);return this}for(var value=fn.$dv,jj=value==undefined?Math.min(this.length,1):this.length,j=0;jj>j;j++){var nodeValue=fn(this[j],arg1,arg2);value=value?value+nodeValue:nodeValue}return value}for(i=0;i<this.length;i++)fn(this[i],arg1,arg2);return this}});forEach({removeData:JQLiteRemoveData,dealoc:JQLiteDealoc,on:function onFn(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");var events=JQLiteExpandoStore(element,"events"),handle=JQLiteExpandoStore(element,"handle");events||JQLiteExpandoStore(element,"events",events={});handle||JQLiteExpandoStore(element,"handle",handle=createEventHandler(element,events));forEach(type.split(" "),function(type){var eventFns=events[type];if(!eventFns){if("mouseenter"==type||"mouseleave"==type){var contains=document.body.contains||document.body.compareDocumentPosition?function(a,b){var adown=9===a.nodeType?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!(!bup||1!==bup.nodeType||!(adown.contains?adown.contains(bup):a.compareDocumentPosition&&16&a.compareDocumentPosition(bup)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};events[type]=[];var eventmap={mouseleave:"mouseout",mouseenter:"mouseover"};onFn(element,eventmap[type],function(event){var target=this,related=event.relatedTarget;(!related||related!==target&&!contains(target,related))&&handle(event,type)})}else{addEventListenerFn(element,type,handle);events[type]=[]}eventFns=events[type]}eventFns.push(fn)})},off:JQLiteOff,replaceWith:function(element,replaceNode){var index,parent=element.parentNode;JQLiteDealoc(element);forEach(new JQLite(replaceNode),function(node){index?parent.insertBefore(node,index.nextSibling):parent.replaceChild(node,element);index=node})},children:function(element){var children=[];forEach(element.childNodes,function(element){1===element.nodeType&&children.push(element)});return children},contents:function(element){return element.childNodes||[]},append:function(element,node){forEach(new JQLite(node),function(child){(1===element.nodeType||11===element.nodeType)&&element.appendChild(child)})},prepend:function(element,node){if(1===element.nodeType){var index=element.firstChild;forEach(new JQLite(node),function(child){element.insertBefore(child,index)})}},wrap:function(element,wrapNode){wrapNode=jqLite(wrapNode)[0];var parent=element.parentNode;parent&&parent.replaceChild(wrapNode,element);wrapNode.appendChild(element)},remove:function(element){JQLiteDealoc(element);var parent=element.parentNode;parent&&parent.removeChild(element)},after:function(element,newElement){var index=element,parent=element.parentNode;forEach(new JQLite(newElement),function(node){parent.insertBefore(node,index.nextSibling);index=node})},addClass:JQLiteAddClass,removeClass:JQLiteRemoveClass,toggleClass:function(element,selector,condition){isUndefined(condition)&&(condition=!JQLiteHasClass(element,selector));(condition?JQLiteAddClass:JQLiteRemoveClass)(element,selector)},parent:function(element){var parent=element.parentNode;return parent&&11!==parent.nodeType?parent:null},next:function(element){if(element.nextElementSibling)return element.nextElementSibling;for(var elm=element.nextSibling;null!=elm&&1!==elm.nodeType;)elm=elm.nextSibling;return elm},find:function(element,selector){return element.getElementsByTagName(selector)},clone:JQLiteClone,triggerHandler:function(element,eventName,eventData){var eventFns=(JQLiteExpandoStore(element,"events")||{})[eventName];eventData=eventData||{preventDefault:noop,stopPropagation:noop};forEach(eventFns,function(fn){fn.call(element,eventData)})}},function(fn,name){JQLite.prototype[name]=function(arg1,arg2,arg3){for(var value,i=0;i<this.length;i++)if(value==undefined){value=fn(this[i],arg1,arg2,arg3);value!==undefined&&(value=jqLite(value))}else JQLiteAddNodes(value,fn(this[i],arg1,arg2,arg3));return value==undefined?this:value};JQLite.prototype.bind=JQLite.prototype.on;JQLite.prototype.unbind=JQLite.prototype.off});HashMap.prototype={put:function(key,value){this[hashKey(key)]=value},get:function(key){return this[hashKey(key)]},remove:function(key){var value=this[key=hashKey(key)];delete this[key];return value}};var FN_ARGS=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,FN_ARG_SPLIT=/,/,FN_ARG=/^\s*(_?)(\S+?)\1\s*$/,STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,$injectorMinErr=minErr("$injector"),$animateMinErr=minErr("$animate"),$AnimateProvider=["$provide",function($provide){this.$$selectors={};this.register=function(name,factory){var key=name+"-animation";if(name&&"."!=name.charAt(0))throw $animateMinErr("notcsel","Expecting class selector starting with '.' got '{0}'.",name);this.$$selectors[name.substr(1)]=key;$provide.factory(key,factory)};this.$get=["$timeout",function($timeout){return{enter:function(element,parent,after,done){var afterNode=after&&after[after.length-1],parentNode=parent&&parent[0]||afterNode&&afterNode.parentNode,afterNextSibling=afterNode&&afterNode.nextSibling||null;forEach(element,function(node){parentNode.insertBefore(node,afterNextSibling)});done&&$timeout(done,0,!1)},leave:function(element,done){element.remove();done&&$timeout(done,0,!1)},move:function(element,parent,after,done){this.enter(element,parent,after,done)},addClass:function(element,className,done){className=isString(className)?className:isArray(className)?className.join(" "):"";element.addClass(className);done&&$timeout(done,0,!1)},removeClass:function(element,className,done){className=isString(className)?className:isArray(className)?className.join(" "):"";element.removeClass(className);done&&$timeout(done,0,!1)},enabled:noop}}]}],$compileMinErr=minErr("$compile");$CompileProvider.$inject=["$provide"];var PREFIX_REGEXP=/^(x[\:\-_]|data[\:\-_])/i,XHR=window.XMLHttpRequest||function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e1){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e2){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e3){}throw minErr("$httpBackend")("noxhr","This browser does not support XMLHttpRequest.")},$interpolateMinErr=minErr("$interpolate"),SERVER_MATCH=/^([^:]+):\/\/(\w+:{0,1}\w*@)?(\{?[\w\.-]*\}?)(:([0-9]+))?(\/[^\?#]*)?(\?([^#]*))?(#(.*))?$/,PATH_MATCH=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,DEFAULT_PORTS={http:80,https:443,ftp:21},$locationMinErr=minErr("$location");LocationHashbangInHtml5Url.prototype=LocationHashbangUrl.prototype=LocationHtml5Url.prototype={$$html5:!1,$$replace:!1,absUrl:locationGetter("$$absUrl"),url:function(url,replace){if(isUndefined(url))return this.$$url;var match=PATH_MATCH.exec(url);match[1]&&this.path(decodeURIComponent(match[1]));(match[2]||match[1])&&this.search(match[3]||"");this.hash(match[5]||"",replace);return this},protocol:locationGetter("$$protocol"),host:locationGetter("$$host"),port:locationGetter("$$port"),path:locationGetterSetter("$$path",function(path){return"/"==path.charAt(0)?path:"/"+path}),search:function(search,paramValue){switch(arguments.length){case 0:return this.$$search;case 1:if(isString(search))this.$$search=parseKeyValue(search);else{if(!isObject(search))throw $locationMinErr("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");this.$$search=search}break;default:paramValue==undefined||null==paramValue?delete this.$$search[search]:this.$$search[search]=paramValue}this.$$compose();return this},hash:locationGetterSetter("$$hash",identity),replace:function(){this.$$replace=!0;return this}};var $parseMinErr=minErr("$parse"),OPERATORS={"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:noop,"+":function(self,locals,a,b){a=a(self,locals);b=b(self,locals);return isDefined(a)?isDefined(b)?a+b:a:isDefined(b)?b:undefined},"-":function(self,locals,a,b){a=a(self,locals);b=b(self,locals);return(isDefined(a)?a:0)-(isDefined(b)?b:0)},"*":function(self,locals,a,b){return a(self,locals)*b(self,locals)},"/":function(self,locals,a,b){return a(self,locals)/b(self,locals)},"%":function(self,locals,a,b){return a(self,locals)%b(self,locals)},"^":function(self,locals,a,b){return a(self,locals)^b(self,locals)},"=":noop,"===":function(self,locals,a,b){return a(self,locals)===b(self,locals)},"!==":function(self,locals,a,b){return a(self,locals)!==b(self,locals)},"==":function(self,locals,a,b){return a(self,locals)==b(self,locals)},"!=":function(self,locals,a,b){return a(self,locals)!=b(self,locals)},"<":function(self,locals,a,b){return a(self,locals)<b(self,locals)},">":function(self,locals,a,b){return a(self,locals)>b(self,locals)},"<=":function(self,locals,a,b){return a(self,locals)<=b(self,locals)},">=":function(self,locals,a,b){return a(self,locals)>=b(self,locals)},"&&":function(self,locals,a,b){return a(self,locals)&&b(self,locals)},"||":function(self,locals,a,b){return a(self,locals)||b(self,locals)},"&":function(self,locals,a,b){return a(self,locals)&b(self,locals)},"|":function(self,locals,a,b){return b(self,locals)(self,locals,a(self,locals))},"!":function(self,locals,a){return!a(self,locals)}},ESCAPE={n:"\n",f:"\f",r:"\r",t:"	",v:"\x0B","'":"'",'"':'"'},getterFnCache={},$sceMinErr=minErr("$sce"),SCE_CONTEXTS={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"};$FilterProvider.$inject=["$provide"];currencyFilter.$inject=["$locale"];numberFilter.$inject=["$locale"];var DECIMAL_SEP=".",DATE_FORMATS={yyyy:dateGetter("FullYear",4),yy:dateGetter("FullYear",2,0,!0),y:dateGetter("FullYear",1),MMMM:dateStrGetter("Month"),MMM:dateStrGetter("Month",!0),MM:dateGetter("Month",2,1),M:dateGetter("Month",1,1),dd:dateGetter("Date",2),d:dateGetter("Date",1),HH:dateGetter("Hours",2),H:dateGetter("Hours",1),hh:dateGetter("Hours",2,-12),h:dateGetter("Hours",1,-12),mm:dateGetter("Minutes",2),m:dateGetter("Minutes",1),ss:dateGetter("Seconds",2),s:dateGetter("Seconds",1),sss:dateGetter("Milliseconds",3),EEEE:dateStrGetter("Day"),EEE:dateStrGetter("Day",!0),a:ampmGetter,Z:timeZoneGetter},DATE_FORMATS_SPLIT=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,NUMBER_STRING=/^\d+$/;dateFilter.$inject=["$locale"];var lowercaseFilter=valueFn(lowercase),uppercaseFilter=valueFn(uppercase);orderByFilter.$inject=["$parse"];var htmlAnchorDirective=valueFn({restrict:"E",compile:function(element,attr){if(8>=msie){attr.href||attr.name||attr.$set("href","");element.append(document.createComment("IE fix"))}return function(scope,element){element.on("click",function(event){element.attr("href")||event.preventDefault()})}}}),ngAttributeAliasDirectives={};forEach(BOOLEAN_ATTR,function(propName,attrName){if("multiple"!=propName){var normalized=directiveNormalize("ng-"+attrName);ngAttributeAliasDirectives[normalized]=function(){return{priority:100,compile:function(){return function(scope,element,attr){scope.$watch(attr[normalized],function(value){attr.$set(attrName,!!value)})}}}}}});forEach(["src","srcset","href"],function(attrName){var normalized=directiveNormalize("ng-"+attrName);ngAttributeAliasDirectives[normalized]=function(){return{priority:99,link:function(scope,element,attr){attr.$observe(normalized,function(value){if(value){attr.$set(attrName,value);msie&&element.prop(attrName,attr[attrName])}})}}}});var nullFormCtrl={$addControl:noop,$removeControl:noop,$setValidity:noop,$setDirty:noop,$setPristine:noop};FormController.$inject=["$element","$attrs","$scope"];var formDirectiveFactory=function(isNgForm){return["$timeout",function($timeout){var formDirective={name:"form",restrict:"E",controller:FormController,compile:function(){return{pre:function(scope,formElement,attr,controller){if(!attr.action){var preventDefaultListener=function(event){event.preventDefault?event.preventDefault():event.returnValue=!1};addEventListenerFn(formElement[0],"submit",preventDefaultListener);formElement.on("$destroy",function(){$timeout(function(){removeEventListenerFn(formElement[0],"submit",preventDefaultListener)},0,!1)})}var parentFormCtrl=formElement.parent().controller("form"),alias=attr.name||attr.ngForm;alias&&setter(scope,alias,controller,alias);parentFormCtrl&&formElement.on("$destroy",function(){parentFormCtrl.$removeControl(controller);alias&&setter(scope,alias,undefined,alias);extend(controller,nullFormCtrl)})}}}};return isNgForm?extend(copy(formDirective),{restrict:"EAC"}):formDirective}]},formDirective=formDirectiveFactory(),ngFormDirective=formDirectiveFactory(!0),URL_REGEXP=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,EMAIL_REGEXP=/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,6}$/,NUMBER_REGEXP=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,inputType={text:textInputType,number:numberInputType,url:urlInputType,email:emailInputType,radio:radioInputType,checkbox:checkboxInputType,hidden:noop,button:noop,submit:noop,reset:noop},inputDirective=["$browser","$sniffer",function($browser,$sniffer){return{restrict:"E",require:"?ngModel",link:function(scope,element,attr,ctrl){ctrl&&(inputType[lowercase(attr.type)]||inputType.text)(scope,element,attr,ctrl,$sniffer,$browser)}}}],VALID_CLASS="ng-valid",INVALID_CLASS="ng-invalid",PRISTINE_CLASS="ng-pristine",DIRTY_CLASS="ng-dirty",NgModelController=["$scope","$exceptionHandler","$attrs","$element","$parse",function($scope,$exceptionHandler,$attr,$element,$parse){function toggleValidCss(isValid,validationErrorKey){validationErrorKey=validationErrorKey?"-"+snake_case(validationErrorKey,"-"):"";$element.removeClass((isValid?INVALID_CLASS:VALID_CLASS)+validationErrorKey).addClass((isValid?VALID_CLASS:INVALID_CLASS)+validationErrorKey)}this.$viewValue=Number.NaN;this.$modelValue=Number.NaN;this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$pristine=!0;this.$dirty=!1;this.$valid=!0;this.$invalid=!1;this.$name=$attr.name;var ngModelGet=$parse($attr.ngModel),ngModelSet=ngModelGet.assign;if(!ngModelSet)throw minErr("ngModel")("nonassign","Expression '{0}' is non-assignable. Element: {1}",$attr.ngModel,startingTag($element));this.$render=noop;var parentForm=$element.inheritedData("$formController")||nullFormCtrl,invalidCount=0,$error=this.$error={};$element.addClass(PRISTINE_CLASS);toggleValidCss(!0);this.$setValidity=function(validationErrorKey,isValid){if($error[validationErrorKey]!==!isValid){if(isValid){$error[validationErrorKey]&&invalidCount--;if(!invalidCount){toggleValidCss(!0);this.$valid=!0;this.$invalid=!1}}else{toggleValidCss(!1);this.$invalid=!0;this.$valid=!1;invalidCount++}$error[validationErrorKey]=!isValid;toggleValidCss(isValid,validationErrorKey);parentForm.$setValidity(validationErrorKey,isValid,this)}};this.$setPristine=function(){this.$dirty=!1;this.$pristine=!0;$element.removeClass(DIRTY_CLASS).addClass(PRISTINE_CLASS)};this.$setViewValue=function(value){this.$viewValue=value;if(this.$pristine){this.$dirty=!0;this.$pristine=!1;$element.removeClass(PRISTINE_CLASS).addClass(DIRTY_CLASS);parentForm.$setDirty()}forEach(this.$parsers,function(fn){value=fn(value)});if(this.$modelValue!==value){this.$modelValue=value;ngModelSet($scope,value);forEach(this.$viewChangeListeners,function(listener){try{listener()}catch(e){$exceptionHandler(e)}})}};var ctrl=this;$scope.$watch(function(){var value=ngModelGet($scope);if(ctrl.$modelValue!==value){var formatters=ctrl.$formatters,idx=formatters.length;ctrl.$modelValue=value;for(;idx--;)value=formatters[idx](value);if(ctrl.$viewValue!==value){ctrl.$viewValue=value;ctrl.$render()}}})}],ngModelDirective=function(){return{require:["ngModel","^?form"],controller:NgModelController,link:function(scope,element,attr,ctrls){var modelCtrl=ctrls[0],formCtrl=ctrls[1]||nullFormCtrl;formCtrl.$addControl(modelCtrl);element.on("$destroy",function(){formCtrl.$removeControl(modelCtrl)})}}},ngChangeDirective=valueFn({require:"ngModel",link:function(scope,element,attr,ctrl){ctrl.$viewChangeListeners.push(function(){scope.$eval(attr.ngChange)})}}),requiredDirective=function(){return{require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){attr.required=!0;var validator=function(value){if(!attr.required||!isEmpty(value)&&value!==!1){ctrl.$setValidity("required",!0);return value}ctrl.$setValidity("required",!1)};ctrl.$formatters.push(validator);ctrl.$parsers.unshift(validator);attr.$observe("required",function(){validator(ctrl.$viewValue)})}}}},ngListDirective=function(){return{require:"ngModel",link:function(scope,element,attr,ctrl){var match=/\/(.*)\//.exec(attr.ngList),separator=match&&new RegExp(match[1])||attr.ngList||",",parse=function(viewValue){var list=[];viewValue&&forEach(viewValue.split(separator),function(value){value&&list.push(trim(value))});return list};ctrl.$parsers.push(parse);ctrl.$formatters.push(function(value){return isArray(value)?value.join(", "):undefined})}}},CONSTANT_VALUE_REGEXP=/^(true|false|\d+)$/,ngValueDirective=function(){return{priority:100,compile:function(tpl,tplAttr){return CONSTANT_VALUE_REGEXP.test(tplAttr.ngValue)?function(scope,elm,attr){attr.$set("value",scope.$eval(attr.ngValue))}:function(scope,elm,attr){scope.$watch(attr.ngValue,function(value){attr.$set("value",value)})}}}},ngBindDirective=ngDirective(function(scope,element,attr){element.addClass("ng-binding").data("$binding",attr.ngBind);scope.$watch(attr.ngBind,function(value){element.text(value==undefined?"":value)})}),ngBindTemplateDirective=["$interpolate",function($interpolate){return function(scope,element,attr){var interpolateFn=$interpolate(element.attr(attr.$attr.ngBindTemplate));element.addClass("ng-binding").data("$binding",interpolateFn);attr.$observe("ngBindTemplate",function(value){element.text(value)})}}],ngBindHtmlDirective=["$sce",function($sce){return function(scope,element,attr){element.addClass("ng-binding").data("$binding",attr.ngBindHtml);scope.$watch(attr.ngBindHtml,function(value){element.html($sce.getTrustedHtml(value)||"")})}}],ngClassDirective=classDirective("",!0),ngClassOddDirective=classDirective("Odd",0),ngClassEvenDirective=classDirective("Even",1),ngCloakDirective=ngDirective({compile:function(element,attr){attr.$set("ngCloak",undefined);element.removeClass("ng-cloak")}}),ngControllerDirective=[function(){return{scope:!0,controller:"@"}}],ngCspDirective=["$sniffer",function($sniffer){return{priority:1e3,compile:function(){$sniffer.csp=!0}}}],ngEventDirectives={};forEach("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur".split(" "),function(name){var directiveName=directiveNormalize("ng-"+name);ngEventDirectives[directiveName]=["$parse",function($parse){return function(scope,element,attr){var fn=$parse(attr[directiveName]);element.on(lowercase(name),function(event){scope.$apply(function(){fn(scope,{$event:event})})})}}]});var ngIfDirective=["$animate",function($animate){return{transclude:"element",priority:1e3,terminal:!0,restrict:"A",compile:function(element,attr,transclude){return function($scope,$element,$attr){var childElement,childScope;$scope.$watch($attr.ngIf,function(value){if(childElement){$animate.leave(childElement);childElement=undefined}if(childScope){childScope.$destroy();childScope=undefined}if(toBoolean(value)){childScope=$scope.$new();transclude(childScope,function(clone){childElement=clone;$animate.enter(clone,$element.parent(),$element)})}})}}}}],ngIncludeDirective=["$http","$templateCache","$anchorScroll","$compile","$animate","$sce",function($http,$templateCache,$anchorScroll,$compile,$animate,$sce){return{restrict:"ECA",terminal:!0,transclude:"element",compile:function(element,attr,transclusion){var srcExp=attr.ngInclude||attr.src,onloadExp=attr.onload||"",autoScrollExp=attr.autoscroll;return function(scope,$element){var currentScope,currentElement,changeCounter=0,cleanupLastIncludeContent=function(){if(currentScope){currentScope.$destroy();currentScope=null}if(currentElement){$animate.leave(currentElement);currentElement=null}};scope.$watch($sce.parseAsResourceUrl(srcExp),function(src){var thisChangeId=++changeCounter;if(src){$http.get(src,{cache:$templateCache}).success(function(response){if(thisChangeId===changeCounter){var newScope=scope.$new();transclusion(newScope,function(clone){cleanupLastIncludeContent();currentScope=newScope;currentElement=clone;currentElement.html(response);$animate.enter(currentElement,null,$element);$compile(currentElement.contents())(currentScope);!isDefined(autoScrollExp)||autoScrollExp&&!scope.$eval(autoScrollExp)||$anchorScroll();currentScope.$emit("$includeContentLoaded");scope.$eval(onloadExp)})}}).error(function(){thisChangeId===changeCounter&&cleanupLastIncludeContent()});scope.$emit("$includeContentRequested")}else cleanupLastIncludeContent()})}}}}],ngInitDirective=ngDirective({compile:function(){return{pre:function(scope,element,attrs){scope.$eval(attrs.ngInit)}}}}),ngNonBindableDirective=ngDirective({terminal:!0,priority:1e3}),ngPluralizeDirective=["$locale","$interpolate",function($locale,$interpolate){var BRACE=/{}/g;return{restrict:"EA",link:function(scope,element,attr){var numberExp=attr.count,whenExp=attr.$attr.when&&element.attr(attr.$attr.when),offset=attr.offset||0,whens=scope.$eval(whenExp)||{},whensExpFns={},startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),isWhen=/^when(Minus)?(.+)$/;forEach(attr,function(expression,attributeName){isWhen.test(attributeName)&&(whens[lowercase(attributeName.replace("when","").replace("Minus","-"))]=element.attr(attr.$attr[attributeName]))});forEach(whens,function(expression,key){whensExpFns[key]=$interpolate(expression.replace(BRACE,startSymbol+numberExp+"-"+offset+endSymbol))});scope.$watch(function(){var value=parseFloat(scope.$eval(numberExp));if(isNaN(value))return"";value in whens||(value=$locale.pluralCat(value-offset));return whensExpFns[value](scope,element,!0)},function(newVal){element.text(newVal)})}}}],ngRepeatDirective=["$parse","$animate",function($parse,$animate){var NG_REMOVED="$$NG_REMOVED",ngRepeatMinErr=minErr("ngRepeat");return{transclude:"element",priority:1e3,terminal:!0,compile:function(element,attr,linker){return function($scope,$element,$attr){var trackByExp,trackByExpGetter,trackByIdFn,trackByIdArrayFn,trackByIdObjFn,lhs,rhs,valueIdentifier,keyIdentifier,expression=$attr.ngRepeat,match=expression.match(/^\s*(.+)\s+in\s+(.*?)\s*(\s+track\s+by\s+(.+)\s*)?$/),hashFnLocals={$id:hashKey};if(!match)throw ngRepeatMinErr("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",expression);lhs=match[1];rhs=match[2];trackByExp=match[4];if(trackByExp){trackByExpGetter=$parse(trackByExp);trackByIdFn=function(key,value,index){keyIdentifier&&(hashFnLocals[keyIdentifier]=key);hashFnLocals[valueIdentifier]=value;hashFnLocals.$index=index;return trackByExpGetter($scope,hashFnLocals)}}else{trackByIdArrayFn=function(key,value){return hashKey(value)};trackByIdObjFn=function(key){return key}}match=lhs.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/);if(!match)throw ngRepeatMinErr("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",lhs);valueIdentifier=match[3]||match[1];keyIdentifier=match[2];var lastBlockMap={};$scope.$watchCollection(rhs,function(collection){var index,length,nextNode,arrayLength,childScope,key,value,trackById,collectionKeys,block,previousNode=$element[0],nextBlockMap={},nextBlockOrder=[];if(isArrayLike(collection)){collectionKeys=collection;trackByIdFn=trackByIdFn||trackByIdArrayFn}else{trackByIdFn=trackByIdFn||trackByIdObjFn;collectionKeys=[];for(key in collection)collection.hasOwnProperty(key)&&"$"!=key.charAt(0)&&collectionKeys.push(key);collectionKeys.sort()}arrayLength=collectionKeys.length;length=nextBlockOrder.length=collectionKeys.length;for(index=0;length>index;index++){key=collection===collectionKeys?index:collectionKeys[index];value=collection[key];trackById=trackByIdFn(key,value,index);if(lastBlockMap.hasOwnProperty(trackById)){block=lastBlockMap[trackById];delete lastBlockMap[trackById];nextBlockMap[trackById]=block;nextBlockOrder[index]=block}else{if(nextBlockMap.hasOwnProperty(trackById)){forEach(nextBlockOrder,function(block){block&&block.startNode&&(lastBlockMap[block.id]=block)});throw ngRepeatMinErr("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}",expression,trackById)}nextBlockOrder[index]={id:trackById};nextBlockMap[trackById]=!1}}for(key in lastBlockMap)if(lastBlockMap.hasOwnProperty(key)){block=lastBlockMap[key];$animate.leave(block.elements);forEach(block.elements,function(element){element[NG_REMOVED]=!0});block.scope.$destroy()}for(index=0,length=collectionKeys.length;length>index;index++){key=collection===collectionKeys?index:collectionKeys[index];value=collection[key];block=nextBlockOrder[index];if(block.startNode){childScope=block.scope;nextNode=previousNode;do nextNode=nextNode.nextSibling;while(nextNode&&nextNode[NG_REMOVED]);block.startNode==nextNode||$animate.move(block.elements,null,jqLite(previousNode));previousNode=block.endNode}else childScope=$scope.$new();childScope[valueIdentifier]=value;keyIdentifier&&(childScope[keyIdentifier]=key);childScope.$index=index;childScope.$first=0===index;childScope.$last=index===arrayLength-1;childScope.$middle=!(childScope.$first||childScope.$last);childScope.$odd=!(childScope.$even=index%2==0);block.startNode||linker(childScope,function(clone){$animate.enter(clone,null,jqLite(previousNode));
previousNode=clone;block.scope=childScope;block.startNode=clone[0];block.elements=clone;block.endNode=clone[clone.length-1];nextBlockMap[block.id]=block})}lastBlockMap=nextBlockMap})}}}}],ngShowDirective=["$animate",function($animate){return function(scope,element,attr){scope.$watch(attr.ngShow,function(value){$animate[toBoolean(value)?"removeClass":"addClass"](element,"ng-hide")})}}],ngHideDirective=["$animate",function($animate){return function(scope,element,attr){scope.$watch(attr.ngHide,function(value){$animate[toBoolean(value)?"addClass":"removeClass"](element,"ng-hide")})}}],ngStyleDirective=ngDirective(function(scope,element,attr){scope.$watch(attr.ngStyle,function(newStyles,oldStyles){oldStyles&&newStyles!==oldStyles&&forEach(oldStyles,function(val,style){element.css(style,"")});newStyles&&element.css(newStyles)},!0)}),ngSwitchDirective=["$animate",function($animate){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(scope,element,attr,ngSwitchController){var selectedTranscludes,selectedElements,watchExpr=attr.ngSwitch||attr.on,selectedScopes=[];scope.$watch(watchExpr,function(value){for(var i=0,ii=selectedScopes.length;ii>i;i++){selectedScopes[i].$destroy();$animate.leave(selectedElements[i])}selectedElements=[];selectedScopes=[];if(selectedTranscludes=ngSwitchController.cases["!"+value]||ngSwitchController.cases["?"]){scope.$eval(attr.change);forEach(selectedTranscludes,function(selectedTransclude){var selectedScope=scope.$new();selectedScopes.push(selectedScope);selectedTransclude.transclude(selectedScope,function(caseElement){var anchor=selectedTransclude.element;selectedElements.push(caseElement);$animate.enter(caseElement,anchor.parent(),anchor)})})}})}}}],ngSwitchWhenDirective=ngDirective({transclude:"element",priority:500,require:"^ngSwitch",compile:function(element,attrs,transclude){return function(scope,element,attr,ctrl){ctrl.cases["!"+attrs.ngSwitchWhen]=ctrl.cases["!"+attrs.ngSwitchWhen]||[];ctrl.cases["!"+attrs.ngSwitchWhen].push({transclude:transclude,element:element})}}}),ngSwitchDefaultDirective=ngDirective({transclude:"element",priority:500,require:"^ngSwitch",compile:function(element,attrs,transclude){return function(scope,element,attr,ctrl){ctrl.cases["?"]=ctrl.cases["?"]||[];ctrl.cases["?"].push({transclude:transclude,element:element})}}}),ngTranscludeDirective=ngDirective({controller:["$transclude",function($transclude){this.$transclude=$transclude}],link:function($scope,$element,$attrs,controller){controller.$transclude(function(clone){$element.html("");$element.append(clone)})}}),scriptDirective=["$templateCache",function($templateCache){return{restrict:"E",terminal:!0,compile:function(element,attr){if("text/ng-template"==attr.type){var templateUrl=attr.id,text=element[0].text;$templateCache.put(templateUrl,text)}}}}],ngOptionsDirective=valueFn({terminal:!0}),selectDirective=["$compile","$parse",function($compile,$parse){var NG_OPTIONS_REGEXP=/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w\d]*)|(?:\(\s*([\$\w][\$\w\d]*)\s*,\s*([\$\w][\$\w\d]*)\s*\)))\s+in\s+(.*?)(?:\s+track\s+by\s+(.*?))?$/,nullModelCtrl={$setViewValue:noop};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function($element,$scope,$attrs){var nullOption,unknownOption,self=this,optionsMap={},ngModelCtrl=nullModelCtrl;self.databound=$attrs.ngModel;self.init=function(ngModelCtrl_,nullOption_,unknownOption_){ngModelCtrl=ngModelCtrl_;nullOption=nullOption_;unknownOption=unknownOption_};self.addOption=function(value){optionsMap[value]=!0;if(ngModelCtrl.$viewValue==value){$element.val(value);unknownOption.parent()&&unknownOption.remove()}};self.removeOption=function(value){if(this.hasOption(value)){delete optionsMap[value];ngModelCtrl.$viewValue==value&&this.renderUnknownOption(value)}};self.renderUnknownOption=function(val){var unknownVal="? "+hashKey(val)+" ?";unknownOption.val(unknownVal);$element.prepend(unknownOption);$element.val(unknownVal);unknownOption.prop("selected",!0)};self.hasOption=function(value){return optionsMap.hasOwnProperty(value)};$scope.$on("$destroy",function(){self.renderUnknownOption=noop})}],link:function(scope,element,attr,ctrls){function Single(scope,selectElement,ngModelCtrl,selectCtrl){ngModelCtrl.$render=function(){var viewValue=ngModelCtrl.$viewValue;if(selectCtrl.hasOption(viewValue)){unknownOption.parent()&&unknownOption.remove();selectElement.val(viewValue);""===viewValue&&emptyOption.prop("selected",!0)}else isUndefined(viewValue)&&emptyOption?selectElement.val(""):selectCtrl.renderUnknownOption(viewValue)};selectElement.on("change",function(){scope.$apply(function(){unknownOption.parent()&&unknownOption.remove();ngModelCtrl.$setViewValue(selectElement.val())})})}function Multiple(scope,selectElement,ctrl){var lastView;ctrl.$render=function(){var items=new HashMap(ctrl.$viewValue);forEach(selectElement.find("option"),function(option){option.selected=isDefined(items.get(option.value))})};scope.$watch(function(){if(!equals(lastView,ctrl.$viewValue)){lastView=copy(ctrl.$viewValue);ctrl.$render()}});selectElement.on("change",function(){scope.$apply(function(){var array=[];forEach(selectElement.find("option"),function(option){option.selected&&array.push(option.value)});ctrl.$setViewValue(array)})})}function Options(scope,selectElement,ctrl){function render(){var optionGroupName,optionGroup,option,existingParent,existingOptions,existingOption,groupLength,length,groupIndex,index,selected,lastElement,element,label,optionGroups={"":[]},optionGroupNames=[""],modelValue=ctrl.$modelValue,values=valuesFn(scope)||[],keys=keyName?sortedKeys(values):values,locals={},selectedSet=!1;if(multiple)if(trackFn&&isArray(modelValue)){selectedSet=new HashMap([]);for(var trackIndex=0;trackIndex<modelValue.length;trackIndex++){locals[valueName]=modelValue[trackIndex];selectedSet.put(trackFn(scope,locals),modelValue[trackIndex])}}else selectedSet=new HashMap(modelValue);for(index=0;length=keys.length,length>index;index++){locals[valueName]=values[keyName?locals[keyName]=keys[index]:index];optionGroupName=groupByFn(scope,locals)||"";if(!(optionGroup=optionGroups[optionGroupName])){optionGroup=optionGroups[optionGroupName]=[];optionGroupNames.push(optionGroupName)}if(multiple)selected=selectedSet.remove(trackFn?trackFn(scope,locals):valueFn(scope,locals))!=undefined;else{if(trackFn){var modelCast={};modelCast[valueName]=modelValue;selected=trackFn(scope,modelCast)===trackFn(scope,locals)}else selected=modelValue===valueFn(scope,locals);selectedSet=selectedSet||selected}label=displayFn(scope,locals);label=label===undefined?"":label;optionGroup.push({id:trackFn?trackFn(scope,locals):keyName?keys[index]:index,label:label,selected:selected})}multiple||(nullOption||null===modelValue?optionGroups[""].unshift({id:"",label:"",selected:!selectedSet}):selectedSet||optionGroups[""].unshift({id:"?",label:"",selected:!0}));for(groupIndex=0,groupLength=optionGroupNames.length;groupLength>groupIndex;groupIndex++){optionGroupName=optionGroupNames[groupIndex];optionGroup=optionGroups[optionGroupName];if(optionGroupsCache.length<=groupIndex){existingParent={element:optGroupTemplate.clone().attr("label",optionGroupName),label:optionGroup.label};existingOptions=[existingParent];optionGroupsCache.push(existingOptions);selectElement.append(existingParent.element)}else{existingOptions=optionGroupsCache[groupIndex];existingParent=existingOptions[0];existingParent.label!=optionGroupName&&existingParent.element.attr("label",existingParent.label=optionGroupName)}lastElement=null;for(index=0,length=optionGroup.length;length>index;index++){option=optionGroup[index];if(existingOption=existingOptions[index+1]){lastElement=existingOption.element;existingOption.label!==option.label&&lastElement.text(existingOption.label=option.label);existingOption.id!==option.id&&lastElement.val(existingOption.id=option.id);lastElement[0].selected!==option.selected&&lastElement.prop("selected",existingOption.selected=option.selected)}else{""===option.id&&nullOption?element=nullOption:(element=optionTemplate.clone()).val(option.id).attr("selected",option.selected).text(option.label);existingOptions.push(existingOption={element:element,label:option.label,id:option.id,selected:option.selected});lastElement?lastElement.after(element):existingParent.element.append(element);lastElement=element}}index++;for(;existingOptions.length>index;)existingOptions.pop().element.remove()}for(;optionGroupsCache.length>groupIndex;)optionGroupsCache.pop()[0].element.remove()}var match;if(!(match=optionsExp.match(NG_OPTIONS_REGEXP)))throw minErr("ngOptions")("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",optionsExp,startingTag(selectElement));var displayFn=$parse(match[2]||match[1]),valueName=match[4]||match[6],keyName=match[5],groupByFn=$parse(match[3]||""),valueFn=$parse(match[2]?match[1]:valueName),valuesFn=$parse(match[7]),track=match[8],trackFn=track?$parse(match[8]):null,optionGroupsCache=[[{element:selectElement,label:""}]];if(nullOption){$compile(nullOption)(scope);nullOption.removeClass("ng-scope");nullOption.remove()}selectElement.html("");selectElement.on("change",function(){scope.$apply(function(){var optionGroup,key,value,optionElement,index,groupIndex,length,groupLength,collection=valuesFn(scope)||[],locals={};if(multiple){value=[];for(groupIndex=0,groupLength=optionGroupsCache.length;groupLength>groupIndex;groupIndex++){optionGroup=optionGroupsCache[groupIndex];for(index=1,length=optionGroup.length;length>index;index++)if((optionElement=optionGroup[index].element)[0].selected){key=optionElement.val();keyName&&(locals[keyName]=key);if(trackFn)for(var trackIndex=0;trackIndex<collection.length;trackIndex++){locals[valueName]=collection[trackIndex];if(trackFn(scope,locals)==key)break}else locals[valueName]=collection[key];value.push(valueFn(scope,locals))}}}else{key=selectElement.val();if("?"==key)value=undefined;else if(""==key)value=null;else if(trackFn)for(var trackIndex=0;trackIndex<collection.length;trackIndex++){locals[valueName]=collection[trackIndex];if(trackFn(scope,locals)==key){value=valueFn(scope,locals);break}}else{locals[valueName]=collection[key];keyName&&(locals[keyName]=key);value=valueFn(scope,locals)}}ctrl.$setViewValue(value)})});ctrl.$render=render;scope.$watch(render)}if(ctrls[1]){for(var emptyOption,selectCtrl=ctrls[0],ngModelCtrl=ctrls[1],multiple=attr.multiple,optionsExp=attr.ngOptions,nullOption=!1,optionTemplate=jqLite(document.createElement("option")),optGroupTemplate=jqLite(document.createElement("optgroup")),unknownOption=optionTemplate.clone(),i=0,children=element.children(),ii=children.length;ii>i;i++)if(""==children[i].value){emptyOption=nullOption=children.eq(i);break}selectCtrl.init(ngModelCtrl,nullOption,unknownOption);if(multiple&&(attr.required||attr.ngRequired)){var requiredValidator=function(value){ngModelCtrl.$setValidity("required",!attr.required||value&&value.length);return value};ngModelCtrl.$parsers.push(requiredValidator);ngModelCtrl.$formatters.unshift(requiredValidator);attr.$observe("required",function(){requiredValidator(ngModelCtrl.$viewValue)})}optionsExp?Options(scope,element,ngModelCtrl):multiple?Multiple(scope,element,ngModelCtrl):Single(scope,element,ngModelCtrl,selectCtrl)}}}}],optionDirective=["$interpolate",function($interpolate){var nullSelectCtrl={addOption:noop,removeOption:noop};return{restrict:"E",priority:100,compile:function(element,attr){if(isUndefined(attr.value)){var interpolateFn=$interpolate(element.text(),!0);interpolateFn||attr.$set("value",element.text())}return function(scope,element,attr){var selectCtrlName="$selectController",parent=element.parent(),selectCtrl=parent.data(selectCtrlName)||parent.parent().data(selectCtrlName);selectCtrl&&selectCtrl.databound?element.prop("selected",!1):selectCtrl=nullSelectCtrl;interpolateFn?scope.$watch(interpolateFn,function(newVal,oldVal){attr.$set("value",newVal);newVal!==oldVal&&selectCtrl.removeOption(oldVal);selectCtrl.addOption(newVal)}):selectCtrl.addOption(attr.value);element.on("$destroy",function(){selectCtrl.removeOption(attr.value)})}}}}],styleDirective=valueFn({restrict:"E",terminal:!0});bindJQuery();publishExternalAPI(angular);jqLite(document).ready(function(){angularInit(document,bootstrap)})}(window,document);angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\\:form{display:block;}</style>');!function(window,angular,undefined){"use strict";var $resourceMinErr=angular.$$minErr("$resource");angular.module("ngResource",["ng"]).factory("$resource",["$http","$parse","$q",function($http,$parse,$q){function encodeUriSegment(val){return encodeUriQuery(val,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function encodeUriQuery(val,pctEncodeSpaces){return encodeURIComponent(val).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,pctEncodeSpaces?"%20":"+")}function Route(template,defaults){this.template=template;this.defaults=defaults||{};this.urlParams={}}function ResourceFactory(url,paramDefaults,actions){function extractParams(data,actionParams){var ids={};actionParams=extend({},paramDefaults,actionParams);forEach(actionParams,function(value,key){isFunction(value)&&(value=value());ids[key]=value&&value.charAt&&"@"==value.charAt(0)?getter(data,value.substr(1)):value});return ids}function defaultResponseInterceptor(response){return response.resource}function Resource(value){copy(value||{},this)}var route=new Route(url);actions=extend({},DEFAULT_ACTIONS,actions);forEach(actions,function(action,name){var hasBody=/^(POST|PUT|PATCH)$/i.test(action.method);Resource[name]=function(a1,a2,a3,a4){var data,success,error,params={};switch(arguments.length){case 4:error=a4;success=a3;case 3:case 2:if(!isFunction(a2)){params=a1;data=a2;success=a3;break}if(isFunction(a1)){success=a1;error=a2;break}success=a2;error=a3;case 1:isFunction(a1)?success=a1:hasBody?data=a1:params=a1;break;case 0:break;default:throw $resourceMinErr("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var isInstanceCall=data instanceof Resource,value=isInstanceCall?data:action.isArray?[]:new Resource(data),httpConfig={},responseInterceptor=action.interceptor&&action.interceptor.response||defaultResponseInterceptor,responseErrorInterceptor=action.interceptor&&action.interceptor.responseError||undefined;forEach(action,function(value,key){"params"!=key&&"isArray"!=key&&"interceptor"!=key&&(httpConfig[key]=copy(value))});httpConfig.data=data;route.setUrlParams(httpConfig,extend({},extractParams(data,action.params||{}),params),action.url);var promise=$http(httpConfig).then(function(response){var data=response.data,promise=value.$promise;if(data){if(angular.isArray(data)!=!!action.isArray)throw $resourceMinErr("badcfg","Error in resource configuration. Expected response to contain an {0} but got an {1}",action.isArray?"array":"object",angular.isArray(data)?"array":"object");if(action.isArray){value.length=0;forEach(data,function(item){value.push(new Resource(item))})}else{copy(data,value);value.$promise=promise}}value.$resolved=!0;(success||noop)(value,response.headers);response.resource=value;return response},function(response){value.$resolved=!0;(error||noop)(response);return $q.reject(response)}).then(responseInterceptor,responseErrorInterceptor);if(!isInstanceCall){value.$promise=promise;value.$resolved=!1;return value}return promise};Resource.prototype["$"+name]=function(params,success,error){if(isFunction(params)){error=success;success=params;params={}}var result=Resource[name](params,this,success,error);return result.$promise||result}});Resource.bind=function(additionalParamDefaults){return ResourceFactory(url,extend({},paramDefaults,additionalParamDefaults),actions)};return Resource}var DEFAULT_ACTIONS={get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}},noop=angular.noop,forEach=angular.forEach,extend=angular.extend,copy=angular.copy,isFunction=angular.isFunction,getter=function(obj,path){return $parse(path)(obj)};Route.prototype={setUrlParams:function(config,params,actionUrl){var val,encodedVal,self=this,url=actionUrl||self.template,urlParams=self.urlParams={};forEach(url.split(/\W/),function(param){!new RegExp("^\\d+$").test(param)&&param&&new RegExp("(^|[^\\\\]):"+param+"(\\W|$)").test(url)&&(urlParams[param]=!0)});url=url.replace(/\\:/g,":");params=params||{};forEach(self.urlParams,function(_,urlParam){val=params.hasOwnProperty(urlParam)?params[urlParam]:self.defaults[urlParam];if(angular.isDefined(val)&&null!==val){encodedVal=encodeUriSegment(val);url=url.replace(new RegExp(":"+urlParam+"(\\W|$)","g"),encodedVal+"$1")}else url=url.replace(new RegExp("(/?):"+urlParam+"(\\W|$)","g"),function(match,leadingSlashes,tail){return"/"==tail.charAt(0)?tail:leadingSlashes+tail})});url=url.replace(/\/+$/,"");url=url.replace(/\/\.(?=\w+($|\?))/,".");config.url=url.replace(/\/\\\./,"/.");forEach(params,function(value,key){if(!self.urlParams[key]){config.params=config.params||{};config.params[key]=value}})}};return ResourceFactory}])}(window,window.angular);!function(window,angular,undefined){"use strict";function inherit(parent,extra){return extend(new(extend(function(){},{prototype:parent})),extra)}function $RouteProvider(){function pathRegExp(path,opts){var insensitive=opts.caseInsensitiveMatch,ret={originalPath:path,regexp:path},keys=ret.keys=[];path=path.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?|\*])?/g,function(_,slash,key,option){var optional="?"===option?option:null,star="*"===option?option:null;keys.push({name:key,optional:!!optional});slash=slash||"";return""+(optional?"":slash)+"(?:"+(optional?slash:"")+(star&&"(.+)?"||"([^/]+)?")+")"+(optional||"")}).replace(/([\/$\*])/g,"\\$1");ret.regexp=new RegExp("^"+path+"$",insensitive?"i":"");return ret}var routes={};this.when=function(path,route){routes[path]=extend({reloadOnSearch:!0},route,path&&pathRegExp(path,route));if(path){var redirectPath="/"==path[path.length-1]?path.substr(0,path.length-1):path+"/";routes[redirectPath]=extend({redirectTo:path},pathRegExp(redirectPath,route))}return this};this.otherwise=function(params){this.when(null,params);return this};this.$get=["$rootScope","$location","$routeParams","$q","$injector","$http","$templateCache","$sce",function($rootScope,$location,$routeParams,$q,$injector,$http,$templateCache,$sce){function switchRouteMatcher(on,route){var keys=route.keys,params={};if(!route.regexp)return null;var m=route.regexp.exec(on);if(!m)return null;for(var i=1,len=m.length;len>i;++i){var key=keys[i-1],val="string"==typeof m[i]?decodeURIComponent(m[i]):m[i];key&&val&&(params[key.name]=val)}return params}function updateRoute(){var next=parseRoute(),last=$route.current;if(next&&last&&next.$$route===last.$$route&&equals(next.pathParams,last.pathParams)&&!next.reloadOnSearch&&!forceReload){last.params=next.params;copy(last.params,$routeParams);$rootScope.$broadcast("$routeUpdate",last)}else if(next||last){forceReload=!1;$rootScope.$broadcast("$routeChangeStart",next,last);$route.current=next;next&&next.redirectTo&&(isString(next.redirectTo)?$location.path(interpolate(next.redirectTo,next.params)).search(next.params).replace():$location.url(next.redirectTo(next.pathParams,$location.path(),$location.search())).replace());$q.when(next).then(function(){if(next){var template,templateUrl,locals=extend({},next.resolve);forEach(locals,function(value,key){locals[key]=isString(value)?$injector.get(value):$injector.invoke(value)});if(isDefined(template=next.template))isFunction(template)&&(template=template(next.params));else if(isDefined(templateUrl=next.templateUrl)){isFunction(templateUrl)&&(templateUrl=templateUrl(next.params));templateUrl=$sce.getTrustedResourceUrl(templateUrl);if(isDefined(templateUrl)){next.loadedTemplateUrl=templateUrl;template=$http.get(templateUrl,{cache:$templateCache}).then(function(response){return response.data})}}isDefined(template)&&(locals.$template=template);return $q.all(locals)}}).then(function(locals){if(next==$route.current){if(next){next.locals=locals;copy(next.params,$routeParams)}$rootScope.$broadcast("$routeChangeSuccess",next,last)}},function(error){next==$route.current&&$rootScope.$broadcast("$routeChangeError",next,last,error)})}}function parseRoute(){var params,match;forEach(routes,function(route,path){if(!match&&(params=switchRouteMatcher($location.path(),route))){match=inherit(route,{params:extend({},$location.search(),params),pathParams:params});match.$$route=route}});return match||routes[null]&&inherit(routes[null],{params:{},pathParams:{}})}function interpolate(string,params){var result=[];forEach((string||"").split(":"),function(segment,i){if(0===i)result.push(segment);else{var segmentMatch=segment.match(/(\w+)(.*)/),key=segmentMatch[1];result.push(params[key]);result.push(segmentMatch[2]||"");delete params[key]}});return result.join("")}var forceReload=!1,$route={routes:routes,reload:function(){forceReload=!0;$rootScope.$evalAsync(updateRoute)}};$rootScope.$on("$locationChangeSuccess",updateRoute);return $route}]}function $RouteParamsProvider(){this.$get=function(){return{}}}function ngViewFactory($route,$anchorScroll,$compile,$controller,$animate){return{restrict:"ECA",terminal:!0,priority:1e3,transclude:"element",compile:function(element,attr,linker){return function(scope,$element,attr){function cleanupLastView(){if(currentScope){currentScope.$destroy();currentScope=null}if(currentElement){$animate.leave(currentElement);currentElement=null}}function update(){var locals=$route.current&&$route.current.locals,template=locals&&locals.$template;if(template){var newScope=scope.$new();linker(newScope,function(clone){cleanupLastView();clone.html(template);$animate.enter(clone,null,$element);var link=$compile(clone.contents()),current=$route.current;currentScope=current.scope=newScope;currentElement=clone;if(current.controller){locals.$scope=currentScope;var controller=$controller(current.controller,locals);current.controllerAs&&(currentScope[current.controllerAs]=controller);clone.data("$ngControllerController",controller);clone.contents().data("$ngControllerController",controller)}link(currentScope);currentScope.$emit("$viewContentLoaded");currentScope.$eval(onloadExp);$anchorScroll()})}else cleanupLastView()}var currentScope,currentElement,onloadExp=attr.onload||"";scope.$on("$routeChangeSuccess",update);update()}}}}var copy=angular.copy,equals=angular.equals,extend=angular.extend,forEach=angular.forEach,isDefined=angular.isDefined,isFunction=angular.isFunction,isString=angular.isString,ngRouteModule=(angular.element,angular.noop,angular.toJson,angular.module("ngRoute",["ng"]).provider("$route",$RouteProvider));ngRouteModule.provider("$routeParams",$RouteParamsProvider);ngRouteModule.directive("ngView",ngViewFactory);ngViewFactory.$inject=["$route","$anchorScroll","$compile","$controller","$animate"]}(window,window.angular);!function(window,angular,undefined){"use strict";function makeSwipeDirective(directiveName,direction,eventName){ngTouch.directive(directiveName,["$parse","$swipe",function($parse,$swipe){var MAX_VERTICAL_DISTANCE=75,MAX_VERTICAL_RATIO=.3,MIN_HORIZONTAL_DISTANCE=30;return function(scope,element,attr){function validSwipe(coords){if(!startCoords)return!1;var deltaY=Math.abs(coords.y-startCoords.y),deltaX=(coords.x-startCoords.x)*direction;return valid&&MAX_VERTICAL_DISTANCE>deltaY&&deltaX>0&&deltaX>MIN_HORIZONTAL_DISTANCE&&MAX_VERTICAL_RATIO>deltaY/deltaX}var startCoords,valid,swipeHandler=$parse(attr[directiveName]);$swipe.bind(element,{start:function(coords){startCoords=coords;valid=!0},cancel:function(){valid=!1},end:function(coords){validSwipe(coords)&&scope.$apply(function(){element.triggerHandler(eventName);swipeHandler(scope)})}})}}])}var ngTouch=angular.module("ngTouch",[]);ngTouch.factory("$swipe",[function(){function getCoordinates(event){var touches=event.touches&&event.touches.length?event.touches:[event],e=event.changedTouches&&event.changedTouches[0]||event.originalEvent&&event.originalEvent.changedTouches&&event.originalEvent.changedTouches[0]||touches[0].originalEvent||touches[0];return{x:e.clientX,y:e.clientY}}var MOVE_BUFFER_RADIUS=10;return{bind:function(element,eventHandlers){var totalX,totalY,startCoords,lastPos,active=!1;element.on("touchstart mousedown MSPointerDown",function(event){startCoords=getCoordinates(event);active=!0;totalX=0;totalY=0;lastPos=startCoords;eventHandlers.start&&eventHandlers.start(startCoords)});element.on("touchcancel",function(event){active=!1;eventHandlers.cancel&&eventHandlers.cancel()});element.on("touchmove mousemove MSPointerMove",function(event){if(active&&startCoords){var coords=getCoordinates(event);totalX+=Math.abs(coords.x-lastPos.x);totalY+=Math.abs(coords.y-lastPos.y);lastPos=coords;if(!(MOVE_BUFFER_RADIUS>totalX&&MOVE_BUFFER_RADIUS>totalY))if(totalY>totalX){active=!1;eventHandlers.cancel&&eventHandlers.cancel()}else{event.preventDefault();eventHandlers.move&&eventHandlers.move(coords)}}});element.on("touchend mouseup MSPointerUp",function(event){if(active){active=!1;eventHandlers.end&&eventHandlers.end(getCoordinates(event))}})}}}]);ngTouch.config(["$provide",function($provide){$provide.decorator("ngClickDirective",["$delegate",function($delegate){$delegate.shift();return $delegate}])}]);ngTouch.directive("ngClick",["$parse","$timeout","$rootElement",function($parse,$timeout,$rootElement){function hit(x1,y1,x2,y2){return Math.abs(x1-x2)<CLICKBUSTER_THRESHOLD&&Math.abs(y1-y2)<CLICKBUSTER_THRESHOLD}function checkAllowableRegions(touchCoordinates,x,y){for(var i=0;i<touchCoordinates.length;i+=2)if(hit(touchCoordinates[i],touchCoordinates[i+1],x,y)){touchCoordinates.splice(i,i+2);return!0}return!1}function onClick(event){if(!(Date.now()-lastPreventedTime>PREVENT_DURATION)){var touches=event.touches&&event.touches.length?event.touches:[event],x=touches[0].clientX,y=touches[0].clientY;if(!(1>x&&1>y||checkAllowableRegions(touchCoordinates,x,y))){event.stopPropagation();event.preventDefault();event.target&&event.target.blur()}}}function onTouchStart(event){var touches=event.touches&&event.touches.length?event.touches:[event],x=touches[0].clientX,y=touches[0].clientY;touchCoordinates.push(x,y);$timeout(function(){for(var i=0;i<touchCoordinates.length;i+=2)if(touchCoordinates[i]==x&&touchCoordinates[i+1]==y){touchCoordinates.splice(i,i+2);return}},PREVENT_DURATION,!1)}function preventGhostClick(x,y){if(!touchCoordinates){$rootElement[0].addEventListener("click",onClick,!0);$rootElement[0].addEventListener("touchstart",onTouchStart,!0);touchCoordinates=[]}lastPreventedTime=Date.now();checkAllowableRegions(touchCoordinates,x,y)}var lastPreventedTime,touchCoordinates,TAP_DURATION=750,MOVE_TOLERANCE=12,PREVENT_DURATION=2500,CLICKBUSTER_THRESHOLD=25,ACTIVE_CLASS_NAME="ng-click-active";return function(scope,element,attr){function resetState(){tapping=!1;element.removeClass(ACTIVE_CLASS_NAME)}var tapElement,startTime,touchStartX,touchStartY,clickHandler=$parse(attr.ngClick),tapping=!1;element.on("touchstart MSPointerDown",function(event){tapping=!0;tapElement=event.target?event.target:event.srcElement;3==tapElement.nodeType&&(tapElement=tapElement.parentNode);element.addClass(ACTIVE_CLASS_NAME);startTime=Date.now();var touches=event.touches&&event.touches.length?event.touches:[event],e=touches[0].originalEvent||touches[0];touchStartX=e.clientX;touchStartY=e.clientY});element.on("touchmove MSPointerMove",function(event){resetState()});element.on("touchcancel",function(event){resetState()});element.on("touchend MSPointerUp",function(event){var diff=Date.now()-startTime,touches=event.changedTouches&&event.changedTouches.length?event.changedTouches:event.touches&&event.touches.length?event.touches:[event],e=touches[0].originalEvent||touches[0],x=e.clientX,y=e.clientY,dist=Math.sqrt(Math.pow(x-touchStartX,2)+Math.pow(y-touchStartY,2));if(tapping&&TAP_DURATION>diff&&MOVE_TOLERANCE>dist){preventGhostClick(x,y);tapElement&&tapElement.blur();angular.isDefined(attr.disabled)&&attr.disabled!==!1||element.triggerHandler("click",event)}resetState()});element.onclick=function(event){};element.on("click",function(event){scope.$apply(function(){clickHandler(scope,{$event:event})})});element.on("mousedown",function(event){element.addClass(ACTIVE_CLASS_NAME)});element.on("mousemove mouseup",function(event){element.removeClass(ACTIVE_CLASS_NAME)})}}]);makeSwipeDirective("ngSwipeLeft",-1,"swipeleft");makeSwipeDirective("ngSwipeRight",1,"swiperight")}(window,window.angular);!function(window,angular,undefined){"use strict";function nextUid(){for(var digit,index=uid.length;index;){index--;digit=uid[index].charCodeAt(0);if(57==digit){uid[index]="A";return uid.join("")}if(90!=digit){uid[index]=String.fromCharCode(digit+1);return uid.join("")}uid[index]="0"}uid.unshift("0");return uid.join("")}function getBlockElements(block){if(block.startNode===block.endNode)return $(block.startNode);var element=block.startNode,elements=[element];do{element=element.nextSibling;if(!element)break;elements.push(element)}while(element!==block.endNode);return $(elements)}function hashKey(obj){var key,objType=typeof obj;"object"==objType&&null!==obj?"function"==typeof(key=obj.$$hashKey)?key=obj.$$hashKey():key===undefined&&(key=obj.$$hashKey=nextUid()):key=obj;return objType+":"+key}function isArrayLike(obj){if(null==obj)return!1;var length=obj.length;return 1===obj.nodeType&&length?!0:angular.isArray(obj)||!angular.isFunction(obj)&&(0===length||"number"==typeof length&&length>0&&length-1 in obj)}var kiaRepeatPatch=angular.module("kiaRepeatPatch",[]),uid=["0","0","0"];kiaRepeatPatch.directive("kiaNgRepeat",["$parse","$animate",function($parse,$animate){var NG_REMOVED="$$NG_REMOVED";return{transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(element,attr,linker){return function($scope,$element,$attr){var trackByExp,trackByExpGetter,trackByIdExpFn,trackByIdArrayFn,trackByIdObjFn,lhs,rhs,valueIdentifier,keyIdentifier,expression=$attr.kiaNgRepeat,match=expression.match(/^\s*(.+)\s+in\s+(.*?)\s*(\s+track\s+by\s+(.+)\s*)?$/),hashFnLocals={$id:hashKey};if(!match)throw new Error("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",expression);lhs=match[1];rhs=match[2];trackByExp=match[4];if(trackByExp){trackByExpGetter=$parse(trackByExp);trackByIdExpFn=function(key,value,index){keyIdentifier&&(hashFnLocals[keyIdentifier]=key);hashFnLocals[valueIdentifier]=value;hashFnLocals.$index=index;return trackByExpGetter($scope,hashFnLocals)}}else{trackByIdArrayFn=function(key,value){return hashKey(value)};trackByIdObjFn=function(key){return key}}match=lhs.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/);if(!match)throw new Error("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",lhs);valueIdentifier=match[3]||match[1];keyIdentifier=match[2];var lastBlockMap={};$scope.$watchCollection(rhs,function(collection){var index,length,nextNode,arrayLength,childScope,key,value,trackById,trackByIdFn,collectionKeys,block,elementsToRemove,previousNode=$element[0],nextBlockMap={},nextBlockOrder=[];if(isArrayLike(collection)){collectionKeys=collection;trackByIdFn=trackByIdExpFn||trackByIdArrayFn}else{trackByIdFn=trackByIdExpFn||trackByIdObjFn;collectionKeys=[];for(key in collection)collection.hasOwnProperty(key)&&"$"!=key.charAt(0)&&collectionKeys.push(key);collectionKeys.sort()}arrayLength=collectionKeys.length;length=nextBlockOrder.length=collectionKeys.length;for(index=0;length>index;index++){key=collection===collectionKeys?index:collectionKeys[index];value=collection[key];trackById=trackByIdFn(key,value,index);
if(lastBlockMap.hasOwnProperty(trackById)){block=lastBlockMap[trackById];delete lastBlockMap[trackById];nextBlockMap[trackById]=block;nextBlockOrder[index]=block}else{if(nextBlockMap.hasOwnProperty(trackById)){angular.forEach(nextBlockOrder,function(block){block&&block.startNode&&(lastBlockMap[block.id]=block)});throw new Error("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}",expression,trackById)}nextBlockOrder[index]={id:trackById};nextBlockMap[trackById]=!1}}for(key in lastBlockMap)if(lastBlockMap.hasOwnProperty(key)){block=lastBlockMap[key];elementsToRemove=getBlockElements(block);$animate.leave(elementsToRemove);angular.forEach(elementsToRemove,function(element){element[NG_REMOVED]=!0});block.scope.$destroy()}for(index=0,length=collectionKeys.length;length>index;index++){key=collection===collectionKeys?index:collectionKeys[index];value=collection[key];block=nextBlockOrder[index];nextBlockOrder[index-1]&&(previousNode=nextBlockOrder[index-1].endNode);if(block.startNode){childScope=block.scope;nextNode=previousNode;do nextNode=nextNode.nextSibling;while(nextNode&&nextNode[NG_REMOVED]);block.startNode!=nextNode&&$animate.move(getBlockElements(block),null,$(previousNode));previousNode=block.endNode}else childScope=$scope.$new();childScope[valueIdentifier]=value;keyIdentifier&&(childScope[keyIdentifier]=key);childScope.$index=index;childScope.$first=0===index;childScope.$last=index===arrayLength-1;childScope.$middle=!(childScope.$first||childScope.$last);childScope.$odd=!(childScope.$even=0===(1&index));block.startNode||linker(childScope,function(clone){clone[clone.length++]=document.createComment(" end ngRepeat: "+expression+" ");$animate.enter(clone,null,$(previousNode));previousNode=clone;block.scope=childScope;block.startNode=previousNode&&previousNode.endNode?previousNode.endNode:clone[0];block.endNode=clone[clone.length-1];nextBlockMap[block.id]=block})}lastBlockMap=nextBlockMap})}}}}])}(window,window.angular);angular.module("ui.config",[]).value("ui.config",{});angular.module("ui.filters",["ui.config"]);angular.module("ui.directives",["ui.config"]);angular.module("ui",["ui.filters","ui.directives","ui.config"]);angular.module("ui.directives").directive("uiAnimate",["ui.config","$timeout",function(uiConfig,$timeout){var options={};angular.isString(uiConfig.animate)?options["class"]=uiConfig.animate:uiConfig.animate&&(options=uiConfig.animate);return{restrict:"A",link:function($scope,element,attrs){var opts={};if(attrs.uiAnimate){opts=$scope.$eval(attrs.uiAnimate);angular.isString(opts)&&(opts={"class":opts})}opts=angular.extend({"class":"ui-animate"},options,opts);element.addClass(opts["class"]);$timeout(function(){element.removeClass(opts["class"])},20,!1)}}}]);angular.module("ui.directives").directive("uiCalendar",["ui.config","$parse",function(uiConfig,$parse){uiConfig.uiCalendar=uiConfig.uiCalendar||{};return{require:"ngModel",restrict:"A",link:function(scope,elm,attrs,$timeout){function update(){scope.calendar=elm.html("");var view=scope.calendar.fullCalendar("getView");view&&(view=view.name);var expression,options={defaultView:view,eventSources:sources};expression=attrs.uiCalendar?scope.$eval(attrs.uiCalendar):{};angular.extend(options,uiConfig.uiCalendar,expression);scope.calendar.fullCalendar(options)}var sources=scope.$eval(attrs.ngModel),tracker=0,getSources=function(){var equalsTracker=scope.$eval(attrs.equalsTracker);tracker=0;angular.forEach(sources,function(value,key){angular.isArray(value)&&(tracker+=value.length)});return angular.isNumber(equalsTracker)?tracker+sources.length+equalsTracker:tracker+sources.length};update();scope.$watch(getSources,function(newVal,oldVal){update()})}}}]);angular.module("ui.directives").directive("uiCodemirror",["ui.config","$timeout",function(uiConfig,$timeout){"use strict";var events=["cursorActivity","viewportChange","gutterClick","focus","blur","scroll","update"];return{restrict:"A",require:"ngModel",link:function(scope,elm,attrs,ngModel){var options,opts,onChange,deferCodeMirror,codeMirror;if("textarea"!==elm[0].type)throw new Error("uiCodemirror3 can only be applied to a textarea element");options=uiConfig.codemirror||{};opts=angular.extend({},options,scope.$eval(attrs.uiCodemirror));onChange=function(aEvent){return function(instance,changeObj){var newValue=instance.getValue();if(newValue!==ngModel.$viewValue){ngModel.$setViewValue(newValue);scope.$apply()}"function"==typeof aEvent&&aEvent(instance,changeObj)}};deferCodeMirror=function(){codeMirror=CodeMirror.fromTextArea(elm[0],opts);codeMirror.on("change",onChange(opts.onChange));for(var aEvent,i=0,n=events.length;n>i;++i){aEvent=opts["on"+events[i].charAt(0).toUpperCase()+events[i].slice(1)];void 0!==aEvent&&"function"==typeof aEvent&&codeMirror.on(events[i],aEvent)}ngModel.$formatters.push(function(value){if(angular.isUndefined(value)||null===value)return"";if(angular.isObject(value)||angular.isArray(value))throw new Error("ui-codemirror cannot use an object or an array as a model");return value});ngModel.$render=function(){codeMirror.setValue(ngModel.$viewValue)};attrs.uiRefresh&&scope.$watch(attrs.uiRefresh,function(newVal,oldVal){newVal!==oldVal&&$timeout(codeMirror.refresh)})};$timeout(deferCodeMirror)}}}]);angular.module("ui.directives").directive("uiCurrency",["ui.config","currencyFilter",function(uiConfig,currencyFilter){var options={pos:"ui-currency-pos",neg:"ui-currency-neg",zero:"ui-currency-zero"};uiConfig.currency&&angular.extend(options,uiConfig.currency);return{restrict:"EAC",require:"ngModel",link:function(scope,element,attrs,controller){var opts,renderview,value;opts=angular.extend({},options,scope.$eval(attrs.uiCurrency));renderview=function(viewvalue){var num;num=1*viewvalue;element.toggleClass(opts.pos,num>0);element.toggleClass(opts.neg,0>num);element.toggleClass(opts.zero,0===num);""===viewvalue?element.text(""):element.text(currencyFilter(num,opts.symbol));return!0};controller.$render=function(){value=controller.$viewValue;element.val(value);renderview(value)}}}}]);angular.module("ui.directives").directive("uiDate",["ui.config",function(uiConfig){"use strict";var options;options={};angular.isObject(uiConfig.date)&&angular.extend(options,uiConfig.date);return{require:"?ngModel",link:function(scope,element,attrs,controller){var getOptions=function(){return angular.extend({},uiConfig.date,scope.$eval(attrs.uiDate))},initDateWidget=function(){var opts=getOptions();if(controller){var updateModel=function(){scope.$apply(function(){var date=element.datepicker("getDate");element.datepicker("setDate",element.val());controller.$setViewValue(date);element.blur()})};if(opts.onSelect){var userHandler=opts.onSelect;opts.onSelect=function(value,picker){updateModel();scope.$apply(function(){userHandler(value,picker)})}}else opts.onSelect=updateModel;element.bind("change",updateModel);controller.$render=function(){var date=controller.$viewValue;if(angular.isDefined(date)&&null!==date&&!angular.isDate(date))throw new Error("ng-Model value must be a Date object - currently it is a "+typeof date+" - use ui-date-format to convert it from a string");element.datepicker("setDate",date)}}element.datepicker("destroy");element.datepicker(opts);controller&&controller.$render()};scope.$watch(getOptions,initDateWidget,!0)}}}]).directive("uiDateFormat",["ui.config",function(uiConfig){var directive={require:"ngModel",link:function(scope,element,attrs,modelCtrl){var dateFormat=attrs.uiDateFormat||uiConfig.dateFormat;if(dateFormat){modelCtrl.$formatters.push(function(value){return angular.isString(value)?$.datepicker.parseDate(dateFormat,value):void 0});modelCtrl.$parsers.push(function(value){return value?$.datepicker.formatDate(dateFormat,value):void 0})}else{modelCtrl.$formatters.push(function(value){return angular.isString(value)?new Date(value):void 0});modelCtrl.$parsers.push(function(value){return value?value.toISOString():void 0})}}};return directive}]);angular.module("ui.directives").directive("uiEvent",["$parse",function($parse){return function(scope,elm,attrs){var events=scope.$eval(attrs.uiEvent);angular.forEach(events,function(uiEvent,eventName){var fn=$parse(uiEvent);elm.bind(eventName,function(evt){var params=Array.prototype.slice.call(arguments);params=params.splice(1);scope.$apply(function(){fn(scope,{$event:evt,$params:params})})})})}}]);angular.module("ui.directives").directive("uiIf",[function(){return{transclude:"element",priority:1e3,terminal:!0,restrict:"A",compile:function(element,attr,transclude){return function(scope,element,attr){var childElement,childScope;scope.$watch(attr.uiIf,function(newValue){if(childElement){childElement.remove();childElement=void 0}if(childScope){childScope.$destroy();childScope=void 0}if(newValue){childScope=scope.$new();transclude(childScope,function(clone){childElement=clone;element.after(clone)})}})}}}}]);angular.module("ui.directives").directive("uiJq",["ui.config","$timeout",function(uiConfig,$timeout){return{restrict:"A",compile:function(tElm,tAttrs){if(!angular.isFunction(tElm[tAttrs.uiJq]))throw new Error('ui-jq: The "'+tAttrs.uiJq+'" function does not exist');var options=uiConfig.jq&&uiConfig.jq[tAttrs.uiJq];return function(scope,elm,attrs){function callPlugin(){$timeout(function(){elm[attrs.uiJq].apply(elm,linkOptions)},0,!1)}var linkOptions=[];if(attrs.uiOptions){linkOptions=scope.$eval("["+attrs.uiOptions+"]");angular.isObject(options)&&angular.isObject(linkOptions[0])&&(linkOptions[0]=angular.extend({},options,linkOptions[0]))}else options&&(linkOptions=[options]);attrs.ngModel&&elm.is("select,input,textarea")&&elm.on("change",function(){elm.trigger("input")});attrs.uiRefresh&&scope.$watch(attrs.uiRefresh,function(newVal){callPlugin()});callPlugin()}}}}]);angular.module("ui.directives").factory("keypressHelper",["$parse",function($parse){var keysByCode={8:"backspace",9:"tab",13:"enter",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete"},capitaliseFirstLetter=function(string){return string.charAt(0).toUpperCase()+string.slice(1)};return function(mode,scope,elm,attrs){var params,combinations=[];params=scope.$eval(attrs["ui"+capitaliseFirstLetter(mode)]);angular.forEach(params,function(v,k){var combination,expression;expression=$parse(v);angular.forEach(k.split(" "),function(variation){combination={expression:expression,keys:{}};angular.forEach(variation.split("-"),function(value){combination.keys[value]=!0});combinations.push(combination)})});elm.bind(mode,function(event){var altPressed=event.metaKey||event.altKey,ctrlPressed=event.ctrlKey,shiftPressed=event.shiftKey,keyCode=event.keyCode;"keypress"===mode&&!shiftPressed&&keyCode>=97&&122>=keyCode&&(keyCode-=32);angular.forEach(combinations,function(combination){var mainKeyPressed=combination.keys[keysByCode[event.keyCode]]||combination.keys[event.keyCode.toString()]||!1,altRequired=combination.keys.alt||!1,ctrlRequired=combination.keys.ctrl||!1,shiftRequired=combination.keys.shift||!1;mainKeyPressed&&altRequired==altPressed&&ctrlRequired==ctrlPressed&&shiftRequired==shiftPressed&&scope.$apply(function(){combination.expression(scope,{$event:event})})})})}}]);angular.module("ui.directives").directive("uiKeydown",["keypressHelper",function(keypressHelper){return{link:function(scope,elm,attrs){keypressHelper("keydown",scope,elm,attrs)}}}]);angular.module("ui.directives").directive("uiKeypress",["keypressHelper",function(keypressHelper){return{link:function(scope,elm,attrs){keypressHelper("keypress",scope,elm,attrs)}}}]);angular.module("ui.directives").directive("uiKeyup",["keypressHelper",function(keypressHelper){return{link:function(scope,elm,attrs){keypressHelper("keyup",scope,elm,attrs)}}}]);!function(){function bindMapEvents(scope,eventsStr,googleObject,element){angular.forEach(eventsStr.split(" "),function(eventName){var $event={type:"map-"+eventName};google.maps.event.addListener(googleObject,eventName,function(evt){element.triggerHandler(angular.extend({},$event,evt));scope.$$phase||scope.$apply()})})}function mapOverlayDirective(directiveName,events){app.directive(directiveName,[function(){return{restrict:"A",link:function(scope,elm,attrs){scope.$watch(attrs[directiveName],function(newObject){bindMapEvents(scope,events,newObject,elm)})}}}])}var app=angular.module("ui.directives");app.directive("uiMap",["ui.config","$parse",function(uiConfig,$parse){google.maps.visualRefresh=!0;var mapEvents="bounds_changed center_changed click dblclick drag dragend dragstart heading_changed idle maptypeid_changed mousemove mouseout mouseover projection_changed resize rightclick tilesloaded tilt_changed zoom_changed",options=uiConfig.map||{};return{restrict:"A",link:function(scope,elm,attrs){var opts=angular.extend({},options,scope.$eval(attrs.uiOptions)),map=new google.maps.Map(elm[0],opts),model=$parse(attrs.uiMap);model.assign(scope,map);bindMapEvents(scope,mapEvents,map,elm)}}}]);app.directive("uiMapInfoWindow",["ui.config","$parse","$compile",function(uiConfig,$parse,$compile){var infoBoxEvents="closeclick content_change domready position_changed zindex_changed",options=uiConfig.mapInfoWindow||{};return{link:function(scope,elm,attrs){var opts=angular.extend({},options,scope.$eval(attrs.uiOptions));opts.content=elm[0];var model=$parse(attrs.uiMapInfoWindow),infoBox=model(scope);if("undefined"==typeof infoBox){infoBox=new InfoBox(opts);model.assign(scope,infoBox)}bindMapEvents(scope,infoBoxEvents,infoBox,elm);elm.replaceWith('<div style="display:none"></div>');var _open=infoBox.open;infoBox.open=function(a1,a2,a3,a4,a5,a6){$compile(elm.contents())(scope);_open.call(infoBox,a1,a2,a3,a4,a5,a6)}}}}]);mapOverlayDirective("uiMapMarker","animation_changed click clickable_changed cursor_changed dblclick drag dragend draggable_changed dragstart flat_changed icon_changed mousedown mouseout mouseover mouseup position_changed rightclick shadow_changed shape_changed title_changed visible_changed zindex_changed");mapOverlayDirective("uiMapPolyline","click dblclick mousedown mousemove mouseout mouseover mouseup rightclick");mapOverlayDirective("uiMapPolygon","click dblclick mousedown mousemove mouseout mouseover mouseup rightclick");mapOverlayDirective("uiMapRectangle","bounds_changed click dblclick mousedown mousemove mouseout mouseover mouseup rightclick");mapOverlayDirective("uiMapCircle","center_changed click dblclick mousedown mousemove mouseout mouseover mouseup radius_changed rightclick");mapOverlayDirective("uiMapGroundOverlay","click dblclick")}();angular.module("ui.directives").directive("uiMask",[function(){return{require:"ngModel",link:function($scope,element,attrs,controller){controller.$render=function(){var value=controller.$viewValue||"";element.val(value);element.mask($scope.$eval(attrs.uiMask))};controller.$parsers.push(function(value){var isValid=element.isMaskValid()||angular.isUndefined(element.isMaskValid())&&element.val().length>0;controller.$setValidity("mask",isValid);return isValid?value:void 0});element.bind("keyup",function(){$scope.$apply(function(){controller.$setViewValue(element.mask())})})}}}]);angular.module("ui.directives").directive("uiReset",["ui.config",function(uiConfig){var resetValue=null;void 0!==uiConfig.reset&&(resetValue=uiConfig.reset);return{require:"ngModel",link:function(scope,elm,attrs,ctrl){var aElement;aElement=angular.element('<a class="ui-reset" />');elm.wrap('<span class="ui-resetwrap" />').after(aElement);aElement.bind("click",function(e){e.preventDefault();scope.$apply(function(){attrs.uiReset?ctrl.$setViewValue(scope.$eval(attrs.uiReset)):ctrl.$setViewValue(resetValue);ctrl.$render()})})}}}]);angular.module("ui.directives").directive("uiRoute",["$location","$parse",function($location,$parse){return{restrict:"AC",compile:function(tElement,tAttrs){var useProperty;if(tAttrs.uiRoute)useProperty="uiRoute";else if(tAttrs.ngHref)useProperty="ngHref";else{if(!tAttrs.href)throw new Error("uiRoute missing a route or href property on "+tElement[0]);useProperty="href"}return function($scope,elm,attrs){function staticWatcher(newVal){(hash=newVal.indexOf("#"))>-1&&(newVal=newVal.substr(hash+1));watcher=function(){modelSetter($scope,$location.path().indexOf(newVal)>-1)};watcher()}function regexWatcher(newVal){(hash=newVal.indexOf("#"))>-1&&(newVal=newVal.substr(hash+1));watcher=function(){var regexp=new RegExp("^"+newVal+"$",["i"]);modelSetter($scope,regexp.test($location.path()))};watcher()}var modelSetter=$parse(attrs.ngModel||attrs.routeModel||"$uiRoute").assign,watcher=angular.noop;switch(useProperty){case"uiRoute":attrs.uiRoute?regexWatcher(attrs.uiRoute):attrs.$observe("uiRoute",regexWatcher);break;case"ngHref":attrs.ngHref?staticWatcher(attrs.ngHref):attrs.$observe("ngHref",staticWatcher);break;case"href":staticWatcher(attrs.href)}$scope.$on("$routeChangeSuccess",function(){watcher()})}}}}]);angular.module("ui.directives").directive("uiScrollfix",["$window",function($window){"use strict";return{link:function(scope,elm,attrs){var top=elm.offset().top;attrs.uiScrollfix?"-"===attrs.uiScrollfix.charAt(0)?attrs.uiScrollfix=top-attrs.uiScrollfix.substr(1):"+"===attrs.uiScrollfix.charAt(0)&&(attrs.uiScrollfix=top+parseFloat(attrs.uiScrollfix.substr(1))):attrs.uiScrollfix=top;angular.element($window).on("scroll.ui-scrollfix",function(){var offset;if(angular.isDefined($window.pageYOffset))offset=$window.pageYOffset;else{var iebody=document.compatMode&&"BackCompat"!==document.compatMode?document.documentElement:document.body;offset=iebody.scrollTop}!elm.hasClass("ui-scrollfix")&&offset>attrs.uiScrollfix?elm.addClass("ui-scrollfix"):elm.hasClass("ui-scrollfix")&&offset<attrs.uiScrollfix&&elm.removeClass("ui-scrollfix")})}}}]);angular.module("ui.directives").directive("uiSelect2",["ui.config","$timeout",function(uiConfig,$timeout){var options={};uiConfig.select2&&angular.extend(options,uiConfig.select2);return{require:"?ngModel",compile:function(tElm,tAttrs){var watch,repeatOption,repeatAttr,isSelect=tElm.is("select"),isMultiple=void 0!==tAttrs.multiple;if(tElm.is("select")){repeatOption=tElm.find("option[ng-repeat], option[data-ng-repeat]");if(repeatOption.length){repeatAttr=repeatOption.attr("ng-repeat")||repeatOption.attr("data-ng-repeat");watch=jQuery.trim(repeatAttr.split("|")[0]).split(" ").pop()}}return function(scope,elm,attrs,controller){var opts=angular.extend({},options,scope.$eval(attrs.uiSelect2));if(isSelect){delete opts.multiple;delete opts.initSelection}else isMultiple&&(opts.multiple=!0);if(controller){controller.$render=function(){isSelect?elm.select2("val",controller.$modelValue):isMultiple?controller.$modelValue?angular.isArray(controller.$modelValue)?elm.select2("data",controller.$modelValue):elm.select2("val",controller.$modelValue):elm.select2("data",[]):angular.isObject(controller.$modelValue)?elm.select2("data",controller.$modelValue):elm.select2("val",controller.$modelValue)};watch&&scope.$watch(watch,function(newVal,oldVal,scope){newVal&&$timeout(function(){elm.select2("val",controller.$viewValue);elm.trigger("change")})});if(!isSelect){elm.bind("change",function(){scope.$apply(function(){controller.$setViewValue(elm.select2("data"))})});if(opts.initSelection){var initSelection=opts.initSelection;opts.initSelection=function(element,callback){initSelection(element,function(value){controller.$setViewValue(value);callback(value)})}}}}attrs.$observe("disabled",function(value){elm.select2(value&&"disable"||"enable")});attrs.ngMultiple&&scope.$watch(attrs.ngMultiple,function(newVal){elm.select2(opts)});elm.val(scope.$eval(attrs.ngModel));$timeout(function(){elm.select2(opts);opts.initSelection||isSelect||controller.$setViewValue(elm.select2("data"))})}}}}]);angular.module("ui.directives").directive("uiShow",[function(){return function(scope,elm,attrs){scope.$watch(attrs.uiShow,function(newVal,oldVal){newVal?elm.addClass("ui-show"):elm.removeClass("ui-show")})}}]).directive("uiHide",[function(){return function(scope,elm,attrs){scope.$watch(attrs.uiHide,function(newVal,oldVal){newVal?elm.addClass("ui-hide"):elm.removeClass("ui-hide")})}}]).directive("uiToggle",[function(){return function(scope,elm,attrs){scope.$watch(attrs.uiToggle,function(newVal,oldVal){newVal?elm.removeClass("ui-hide").addClass("ui-show"):elm.removeClass("ui-show").addClass("ui-hide")})}}]);angular.module("ui.directives").directive("uiSortable",["ui.config",function(uiConfig){return{require:"?ngModel",link:function(scope,element,attrs,ngModel){var onReceive,onRemove,onStart,onUpdate,opts,_receive,_remove,_start,_update;opts=angular.extend({},uiConfig.sortable,scope.$eval(attrs.uiSortable));if(ngModel){ngModel.$render=function(){element.sortable("refresh")};onStart=function(e,ui){ui.item.sortable={index:ui.item.index()}};onUpdate=function(e,ui){ui.item.sortable.resort=ngModel};onReceive=function(e,ui){ui.item.sortable.relocate=!0;ngModel.$modelValue.splice(ui.item.index(),0,ui.item.sortable.moved)};onRemove=function(e,ui){1===ngModel.$modelValue.length?ui.item.sortable.moved=ngModel.$modelValue.splice(0,1)[0]:ui.item.sortable.moved=ngModel.$modelValue.splice(ui.item.sortable.index,1)[0]};onStop=function(e,ui){if(ui.item.sortable.resort&&!ui.item.sortable.relocate){var end,start;start=ui.item.sortable.index;end=ui.item.index();end>start&&end--;ui.item.sortable.resort.$modelValue.splice(end,0,ui.item.sortable.resort.$modelValue.splice(start,1)[0])}(ui.item.sortable.resort||ui.item.sortable.relocate)&&scope.$apply()};_start=opts.start;opts.start=function(e,ui){onStart(e,ui);"function"==typeof _start&&_start(e,ui)};_stop=opts.stop;opts.stop=function(e,ui){onStop(e,ui);"function"==typeof _stop&&_stop(e,ui)};_update=opts.update;opts.update=function(e,ui){onUpdate(e,ui);"function"==typeof _update&&_update(e,ui)};_receive=opts.receive;opts.receive=function(e,ui){onReceive(e,ui);"function"==typeof _receive&&_receive(e,ui)};_remove=opts.remove;opts.remove=function(e,ui){onRemove(e,ui);"function"==typeof _remove&&_remove(e,ui)}}element.sortable(opts)}}}]);angular.module("ui.directives").directive("uiTinymce",["ui.config",function(uiConfig){uiConfig.tinymce=uiConfig.tinymce||{};return{require:"ngModel",link:function(scope,elm,attrs,ngModel){var expression,options={onchange_callback:function(inst){if(inst.isDirty()){inst.save();ngModel.$setViewValue(elm.val());scope.$$phase||scope.$apply()}},handle_event_callback:function(e){if(this.isDirty()){this.save();ngModel.$setViewValue(elm.val());scope.$$phase||scope.$apply()}return!0},setup:function(ed){ed.onSetContent.add(function(ed,o){if(ed.isDirty()){ed.save();ngModel.$setViewValue(elm.val());scope.$$phase||scope.$apply()}})}};expression=attrs.uiTinymce?scope.$eval(attrs.uiTinymce):{};angular.extend(options,uiConfig.tinymce,expression);setTimeout(function(){elm.tinymce(options)})}}}]);angular.module("ui.directives").directive("uiValidate",function(){return{restrict:"A",require:"ngModel",link:function(scope,elm,attrs,ctrl){var validateFn,watch,validators={},validateExpr=scope.$eval(attrs.uiValidate);if(validateExpr){angular.isString(validateExpr)&&(validateExpr={validator:validateExpr});angular.forEach(validateExpr,function(expression,key){validateFn=function(valueToValidate){if(scope.$eval(expression,{$value:valueToValidate})){ctrl.$setValidity(key,!0);return valueToValidate}ctrl.$setValidity(key,!1)};validators[key]=validateFn;ctrl.$formatters.push(validateFn);ctrl.$parsers.push(validateFn)});if(attrs.uiValidateWatch){watch=scope.$eval(attrs.uiValidateWatch);angular.isString(watch)?scope.$watch(watch,function(){angular.forEach(validators,function(validatorFn,key){validatorFn(ctrl.$modelValue)})}):angular.forEach(watch,function(expression,key){scope.$watch(expression,function(){validators[key](ctrl.$modelValue)})})}}}}});angular.module("ui.filters").filter("format",function(){return function(value,replace){if(!value)return value;var token,target=value.toString();if(void 0===replace)return target;if(!angular.isArray(replace)&&!angular.isObject(replace))return target.split("$0").join(replace);token=angular.isArray(replace)&&"$"||":";angular.forEach(replace,function(value,key){target=target.split(token+key).join(value)});return target}});angular.module("ui.filters").filter("highlight",function(){return function(text,search,caseSensitive){if(search||angular.isNumber(search)){text=text.toString();search=search.toString();return caseSensitive?text.split(search).join('<span class="ui-match">'+search+"</span>"):text.replace(new RegExp(search,"gi"),'<span class="ui-match">$&</span>')}return text}});angular.module("ui.filters").filter("inflector",function(){function ucwords(text){return text.replace(/^([a-z])|\s+([a-z])/g,function($1){return $1.toUpperCase()})}function breakup(text,separator){return text.replace(/[A-Z]/g,function(match){return separator+match})}var inflectors={humanize:function(value){return ucwords(breakup(value," ").split("_").join(" "))},underscore:function(value){return value.substr(0,1).toLowerCase()+breakup(value.substr(1),"_").toLowerCase().split(" ").join("_")},variable:function(value){value=value.substr(0,1).toLowerCase()+ucwords(value.split("_").join(" ")).substr(1).split(" ").join("");return value}};return function(text,inflector,separator){if(inflector!==!1&&angular.isString(text)){inflector=inflector||"humanize";return inflectors[inflector](text)}return text}});angular.module("ui.filters").filter("unique",function(){return function(items,filterOn){if(filterOn===!1)return items;if((filterOn||angular.isUndefined(filterOn))&&angular.isArray(items)){var newItems=[],extractValueToCompare=function(item){return angular.isObject(item)&&angular.isString(filterOn)?item[filterOn]:item};angular.forEach(items,function(item){for(var isDuplicate=!1,i=0;i<newItems.length;i++)if(angular.equals(extractValueToCompare(newItems[i]),extractValueToCompare(item))){isDuplicate=!0;break}isDuplicate||newItems.push(item)});items=newItems}return items}});(function(){function n(n){function t(t,r,e,u,i,o){for(;i>=0&&o>i;i+=n){var a=u?u[i]:i;e=r(e,t[a],a,t)}return e}return function(r,e,u,i){e=b(e,i,4);var o=!k(r)&&m.keys(r),a=(o||r).length,c=n>0?0:a-1;return arguments.length<3&&(u=r[o?o[c]:c],c+=n),t(r,e,u,o,c,a)}}function t(n){return function(t,r,e){r=x(r,e);for(var u=O(t),i=n>0?0:u-1;i>=0&&u>i;i+=n)if(r(t[i],i,t))return i;return-1}}function r(n,t,r){return function(e,u,i){var o=0,a=O(e);if("number"==typeof i)n>0?o=i>=0?i:Math.max(i+a,o):a=i>=0?Math.min(i+1,a):i+a+1;else if(r&&i&&a)return i=r(e,u),e[i]===u?i:-1;if(u!==u)return i=t(l.call(e,o,a),m.isNaN),i>=0?i+o:-1;for(i=n>0?o:a-1;i>=0&&a>i;i+=n)if(e[i]===u)return i;return-1}}function e(n,t){var r=I.length,e=n.constructor,u=m.isFunction(e)&&e.prototype||a,i="constructor";for(m.has(n,i)&&!m.contains(t,i)&&t.push(i);r--;)i=I[r],i in n&&n[i]!==u[i]&&!m.contains(t,i)&&t.push(i)}var u=this,i=u._,o=Array.prototype,a=Object.prototype,c=Function.prototype,f=o.push,l=o.slice,s=a.toString,p=a.hasOwnProperty,h=Array.isArray,v=Object.keys,g=c.bind,y=Object.create,d=function(){},m=function(n){return n instanceof m?n:this instanceof m?void(this._wrapped=n):new m(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=m),exports._=m):u._=m,m.VERSION="1.8.3";var b=function(n,t,r){if(void 0===t)return n;switch(null==r?3:r){case 1:return function(r){return n.call(t,r)};case 2:return function(r,e){return n.call(t,r,e)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,i){return n.call(t,r,e,u,i)}}return function(){return n.apply(t,arguments)}},x=function(n,t,r){return null==n?m.identity:m.isFunction(n)?b(n,t,r):m.isObject(n)?m.matcher(n):m.property(n)};m.iteratee=function(n,t){return x(n,t,1/0)};var _=function(n,t){return function(r){var e=arguments.length;if(2>e||null==r)return r;for(var u=1;e>u;u++)for(var i=arguments[u],o=n(i),a=o.length,c=0;a>c;c++){var f=o[c];t&&void 0!==r[f]||(r[f]=i[f])}return r}},j=function(n){if(!m.isObject(n))return{};if(y)return y(n);d.prototype=n;var t=new d;return d.prototype=null,t},w=function(n){return function(t){return null==t?void 0:t[n]}},A=Math.pow(2,53)-1,O=w("length"),k=function(n){var t=O(n);return"number"==typeof t&&t>=0&&A>=t};m.each=m.forEach=function(n,t,r){t=b(t,r);var e,u;if(k(n))for(e=0,u=n.length;u>e;e++)t(n[e],e,n);else{var i=m.keys(n);for(e=0,u=i.length;u>e;e++)t(n[i[e]],i[e],n)}return n},m.map=m.collect=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=Array(u),o=0;u>o;o++){var a=e?e[o]:o;i[o]=t(n[a],a,n)}return i},m.reduce=m.foldl=m.inject=n(1),m.reduceRight=m.foldr=n(-1),m.find=m.detect=function(n,t,r){var e;return e=k(n)?m.findIndex(n,t,r):m.findKey(n,t,r),void 0!==e&&-1!==e?n[e]:void 0},m.filter=m.select=function(n,t,r){var e=[];return t=x(t,r),m.each(n,function(n,r,u){t(n,r,u)&&e.push(n)}),e},m.reject=function(n,t,r){return m.filter(n,m.negate(x(t)),r)},m.every=m.all=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(!t(n[o],o,n))return!1}return!0},m.some=m.any=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(t(n[o],o,n))return!0}return!1},m.contains=m.includes=m.include=function(n,t,r,e){return k(n)||(n=m.values(n)),("number"!=typeof r||e)&&(r=0),m.indexOf(n,t,r)>=0},m.invoke=function(n,t){var r=l.call(arguments,2),e=m.isFunction(t);return m.map(n,function(n){var u=e?t:n[t];return null==u?u:u.apply(n,r)})},m.pluck=function(n,t){return m.map(n,m.property(t))},m.where=function(n,t){return m.filter(n,m.matcher(t))},m.findWhere=function(n,t){return m.find(n,m.matcher(t))},m.max=function(n,t,r){var e,u,i=-1/0,o=-1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],e>i&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(u>o||u===-1/0&&i===-1/0)&&(i=n,o=u)});return i},m.min=function(n,t,r){var e,u,i=1/0,o=1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],i>e&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(o>u||1/0===u&&1/0===i)&&(i=n,o=u)});return i},m.shuffle=function(n){for(var t,r=k(n)?n:m.values(n),e=r.length,u=Array(e),i=0;e>i;i++)t=m.random(0,i),t!==i&&(u[i]=u[t]),u[t]=r[i];return u},m.sample=function(n,t,r){return null==t||r?(k(n)||(n=m.values(n)),n[m.random(n.length-1)]):m.shuffle(n).slice(0,Math.max(0,t))},m.sortBy=function(n,t,r){return t=x(t,r),m.pluck(m.map(n,function(n,r,e){return{value:n,index:r,criteria:t(n,r,e)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||void 0===r)return 1;if(e>r||void 0===e)return-1}return n.index-t.index}),"value")};var F=function(n){return function(t,r,e){var u={};return r=x(r,e),m.each(t,function(e,i){var o=r(e,i,t);n(u,e,o)}),u}};m.groupBy=F(function(n,t,r){m.has(n,r)?n[r].push(t):n[r]=[t]}),m.indexBy=F(function(n,t,r){n[r]=t}),m.countBy=F(function(n,t,r){m.has(n,r)?n[r]++:n[r]=1}),m.toArray=function(n){return n?m.isArray(n)?l.call(n):k(n)?m.map(n,m.identity):m.values(n):[]},m.size=function(n){return null==n?0:k(n)?n.length:m.keys(n).length},m.partition=function(n,t,r){t=x(t,r);var e=[],u=[];return m.each(n,function(n,r,i){(t(n,r,i)?e:u).push(n)}),[e,u]},m.first=m.head=m.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:m.initial(n,n.length-t)},m.initial=function(n,t,r){return l.call(n,0,Math.max(0,n.length-(null==t||r?1:t)))},m.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:m.rest(n,Math.max(0,n.length-t))},m.rest=m.tail=m.drop=function(n,t,r){return l.call(n,null==t||r?1:t)},m.compact=function(n){return m.filter(n,m.identity)};var S=function(n,t,r,e){for(var u=[],i=0,o=e||0,a=O(n);a>o;o++){var c=n[o];if(k(c)&&(m.isArray(c)||m.isArguments(c))){t||(c=S(c,t,r));var f=0,l=c.length;for(u.length+=l;l>f;)u[i++]=c[f++]}else r||(u[i++]=c)}return u};m.flatten=function(n,t){return S(n,t,!1)},m.without=function(n){return m.difference(n,l.call(arguments,1))},m.uniq=m.unique=function(n,t,r,e){m.isBoolean(t)||(e=r,r=t,t=!1),null!=r&&(r=x(r,e));for(var u=[],i=[],o=0,a=O(n);a>o;o++){
var c=n[o],f=r?r(c,o,n):c;t?(o&&i===f||u.push(c),i=f):r?m.contains(i,f)||(i.push(f),u.push(c)):m.contains(u,c)||u.push(c)}return u},m.union=function(){return m.uniq(S(arguments,!0,!0))},m.intersection=function(n){for(var t=[],r=arguments.length,e=0,u=O(n);u>e;e++){var i=n[e];if(!m.contains(t,i)){for(var o=1;r>o&&m.contains(arguments[o],i);o++);o===r&&t.push(i)}}return t},m.difference=function(n){var t=S(arguments,!0,!0,1);return m.filter(n,function(n){return!m.contains(t,n)})},m.zip=function(){return m.unzip(arguments)},m.unzip=function(n){for(var t=n&&m.max(n,O).length||0,r=Array(t),e=0;t>e;e++)r[e]=m.pluck(n,e);return r},m.object=function(n,t){for(var r={},e=0,u=O(n);u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},m.findIndex=t(1),m.findLastIndex=t(-1),m.sortedIndex=function(n,t,r,e){r=x(r,e,1);for(var u=r(t),i=0,o=O(n);o>i;){var a=Math.floor((i+o)/2);r(n[a])<u?i=a+1:o=a}return i},m.indexOf=r(1,m.findIndex,m.sortedIndex),m.lastIndexOf=r(-1,m.findLastIndex),m.range=function(n,t,r){null==t&&(t=n||0,n=0),r=r||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=Array(e),i=0;e>i;i++,n+=r)u[i]=n;return u};var E=function(n,t,r,e,u){if(!(e instanceof t))return n.apply(r,u);var i=j(n.prototype),o=n.apply(i,u);return m.isObject(o)?o:i};m.bind=function(n,t){if(g&&n.bind===g)return g.apply(n,l.call(arguments,1));if(!m.isFunction(n))throw new TypeError("Bind must be called on a function");var r=l.call(arguments,2),e=function(){return E(n,e,t,this,r.concat(l.call(arguments)))};return e},m.partial=function(n){var t=l.call(arguments,1),r=function(){for(var e=0,u=t.length,i=Array(u),o=0;u>o;o++)i[o]=t[o]===m?arguments[e++]:t[o];for(;e<arguments.length;)i.push(arguments[e++]);return E(n,r,this,this,i)};return r},m.bindAll=function(n){var t,r,e=arguments.length;if(1>=e)throw new Error("bindAll must be passed function names");for(t=1;e>t;t++)r=arguments[t],n[r]=m.bind(n[r],n);return n},m.memoize=function(n,t){var r=function(e){var u=r.cache,i=""+(t?t.apply(this,arguments):e);return m.has(u,i)||(u[i]=n.apply(this,arguments)),u[i]};return r.cache={},r},m.delay=function(n,t){var r=l.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},m.defer=m.partial(m.delay,m,1),m.throttle=function(n,t,r){var e,u,i,o=null,a=0;r||(r={});var c=function(){a=r.leading===!1?0:m.now(),o=null,i=n.apply(e,u),o||(e=u=null)};return function(){var f=m.now();a||r.leading!==!1||(a=f);var l=t-(f-a);return e=this,u=arguments,0>=l||l>t?(o&&(clearTimeout(o),o=null),a=f,i=n.apply(e,u),o||(e=u=null)):o||r.trailing===!1||(o=setTimeout(c,l)),i}},m.debounce=function(n,t,r){var e,u,i,o,a,c=function(){var f=m.now()-o;t>f&&f>=0?e=setTimeout(c,t-f):(e=null,r||(a=n.apply(i,u),e||(i=u=null)))};return function(){i=this,u=arguments,o=m.now();var f=r&&!e;return e||(e=setTimeout(c,t)),f&&(a=n.apply(i,u),i=u=null),a}},m.wrap=function(n,t){return m.partial(t,n)},m.negate=function(n){return function(){return!n.apply(this,arguments)}},m.compose=function(){var n=arguments,t=n.length-1;return function(){for(var r=t,e=n[t].apply(this,arguments);r--;)e=n[r].call(this,e);return e}},m.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},m.before=function(n,t){var r;return function(){return--n>0&&(r=t.apply(this,arguments)),1>=n&&(t=null),r}},m.once=m.partial(m.before,2);var M=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];m.keys=function(n){if(!m.isObject(n))return[];if(v)return v(n);var t=[];for(var r in n)m.has(n,r)&&t.push(r);return M&&e(n,t),t},m.allKeys=function(n){if(!m.isObject(n))return[];var t=[];for(var r in n)t.push(r);return M&&e(n,t),t},m.values=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},m.mapObject=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=u.length,o={},a=0;i>a;a++)e=u[a],o[e]=t(n[e],e,n);return o},m.pairs=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},m.invert=function(n){for(var t={},r=m.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},m.functions=m.methods=function(n){var t=[];for(var r in n)m.isFunction(n[r])&&t.push(r);return t.sort()},m.extend=_(m.allKeys),m.extendOwn=m.assign=_(m.keys),m.findKey=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=0,o=u.length;o>i;i++)if(e=u[i],t(n[e],e,n))return e},m.pick=function(n,t,r){var e,u,i={},o=n;if(null==o)return i;m.isFunction(t)?(u=m.allKeys(o),e=b(t,r)):(u=S(arguments,!1,!1,1),e=function(n,t,r){return t in r},o=Object(o));for(var a=0,c=u.length;c>a;a++){var f=u[a],l=o[f];e(l,f,o)&&(i[f]=l)}return i},m.omit=function(n,t,r){if(m.isFunction(t))t=m.negate(t);else{var e=m.map(S(arguments,!1,!1,1),String);t=function(n,t){return!m.contains(e,t)}}return m.pick(n,t,r)},m.defaults=_(m.allKeys,!0),m.create=function(n,t){var r=j(n);return t&&m.extendOwn(r,t),r},m.clone=function(n){return m.isObject(n)?m.isArray(n)?n.slice():m.extend({},n):n},m.tap=function(n,t){return t(n),n},m.isMatch=function(n,t){var r=m.keys(t),e=r.length;if(null==n)return!e;for(var u=Object(n),i=0;e>i;i++){var o=r[i];if(t[o]!==u[o]||!(o in u))return!1}return!0};var N=function(n,t,r,e){if(n===t)return 0!==n||1/n===1/t;if(null==n||null==t)return n===t;n instanceof m&&(n=n._wrapped),t instanceof m&&(t=t._wrapped);var u=s.call(n);if(u!==s.call(t))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":return+n!==+n?+t!==+t:0===+n?1/+n===1/t:+n===+t;case"[object Date]":case"[object Boolean]":return+n===+t}var i="[object Array]"===u;if(!i){if("object"!=typeof n||"object"!=typeof t)return!1;var o=n.constructor,a=t.constructor;if(o!==a&&!(m.isFunction(o)&&o instanceof o&&m.isFunction(a)&&a instanceof a)&&"constructor"in n&&"constructor"in t)return!1}r=r||[],e=e||[];for(var c=r.length;c--;)if(r[c]===n)return e[c]===t;if(r.push(n),e.push(t),i){if(c=n.length,c!==t.length)return!1;for(;c--;)if(!N(n[c],t[c],r,e))return!1}else{var f,l=m.keys(n);if(c=l.length,m.keys(t).length!==c)return!1;for(;c--;)if(f=l[c],!m.has(t,f)||!N(n[f],t[f],r,e))return!1}return r.pop(),e.pop(),!0};m.isEqual=function(n,t){return N(n,t)},m.isEmpty=function(n){return null==n?!0:k(n)&&(m.isArray(n)||m.isString(n)||m.isArguments(n))?0===n.length:0===m.keys(n).length},m.isElement=function(n){return!(!n||1!==n.nodeType)},m.isArray=h||function(n){return"[object Array]"===s.call(n)},m.isObject=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},m.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(n){m["is"+n]=function(t){return s.call(t)==="[object "+n+"]"}}),m.isArguments(arguments)||(m.isArguments=function(n){return m.has(n,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(m.isFunction=function(n){return"function"==typeof n||!1}),m.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},m.isNaN=function(n){return m.isNumber(n)&&n!==+n},m.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"===s.call(n)},m.isNull=function(n){return null===n},m.isUndefined=function(n){return void 0===n},m.has=function(n,t){return null!=n&&p.call(n,t)},m.noConflict=function(){return u._=i,this},m.identity=function(n){return n},m.constant=function(n){return function(){return n}},m.noop=function(){},m.property=w,m.propertyOf=function(n){return null==n?function(){}:function(t){return n[t]}},m.matcher=m.matches=function(n){return n=m.extendOwn({},n),function(t){return m.isMatch(t,n)}},m.times=function(n,t,r){var e=Array(Math.max(0,n));t=b(t,r,1);for(var u=0;n>u;u++)e[u]=t(u);return e},m.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},m.now=Date.now||function(){return(new Date).getTime()};var B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},T=m.invert(B),R=function(n){var t=function(t){return n[t]},r="(?:"+m.keys(n).join("|")+")",e=RegExp(r),u=RegExp(r,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,t):n}};m.escape=R(B),m.unescape=R(T),m.result=function(n,t,r){var e=null==n?void 0:n[t];return void 0===e&&(e=r),m.isFunction(e)?e.call(n):e};var q=0;m.uniqueId=function(n){var t=++q+"";return n?n+t:t},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var K=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\u2028|\u2029/g,L=function(n){return"\\"+z[n]};m.template=function(n,t,r){!t&&r&&(t=r),t=m.defaults({},t,m.templateSettings);var e=RegExp([(t.escape||K).source,(t.interpolate||K).source,(t.evaluate||K).source].join("|")+"|$","g"),u=0,i="__p+='";n.replace(e,function(t,r,e,o,a){return i+=n.slice(u,a).replace(D,L),u=a+t.length,r?i+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":e?i+="'+\n((__t=("+e+"))==null?'':__t)+\n'":o&&(i+="';\n"+o+"\n__p+='"),t}),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var o=new Function(t.variable||"obj","_",i)}catch(a){throw a.source=i,a}var c=function(n){return o.call(this,n,m)},f=t.variable||"obj";return c.source="function("+f+"){\n"+i+"}",c},m.chain=function(n){var t=m(n);return t._chain=!0,t};var P=function(n,t){return n._chain?m(t).chain():t};m.mixin=function(n){m.each(m.functions(n),function(t){var r=m[t]=n[t];m.prototype[t]=function(){var n=[this._wrapped];return f.apply(n,arguments),P(this,r.apply(m,n))}})},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=o[n];m.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==n&&"splice"!==n||0!==r.length||delete r[0],P(this,r)}}),m.each(["concat","join","slice"],function(n){var t=o[n];m.prototype[n]=function(){return P(this,t.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return m})}).call(this);!function(ng,_){"use strict";function propGetterFactory(prop){return function(obj){return obj[prop]}}var underscoreModule=ng.module("angular-underscore",[]),utilsModule=ng.module("angular-underscore/utils",[]),filtersModule=ng.module("angular-underscore/filters",[]);_._=_;_.each(["min","max","sortedIndex"],function(fnName){_[fnName]=_.wrap(_[fnName],function(fn){var args=_.toArray(arguments).slice(1);_.isString(args[2])?args[2]=propGetterFactory(args[2]):_.isString(args[1])&&(args[1]=propGetterFactory(args[1]));return fn.apply(_,args)})});ng.injector(["ng"]).invoke(["$filter",function($filter){_.filter=_.select=_.wrap($filter("filter"),function(filter,obj,exp,comparator){_.isArray(obj)||(obj=_.toArray(obj));return filter(obj,exp,comparator)});_.reject=function(obj,exp){if(_.isString(exp))return _.filter(obj,"!"+exp);var diff=_.bind(_.difference,_,obj);return diff(_.filter(obj,exp))}}]);_.each(_.methods(_),function(methodName){function register($rootScope){$rootScope[methodName]=_.bind(_[methodName],_)}_.each([underscoreModule,utilsModule,ng.module("angular-underscore/utils/"+methodName,[])],function(module){module.run(["$rootScope",register])})});var adapList=[["map","collect"],["reduce","inject","foldl"],["reduceRight","foldr"],["find","detect"],["filter","select"],"where","findWhere","reject","invoke","pluck","max","min","sortBy","groupBy","indexBy","countBy","shuffle","sample","toArray","size",["first","head","take"],"initial","last",["rest","tail","drop"],"compact","flatten","without","partition","union","intersection","difference",["uniq","unique"],"zip","object","indexOf","lastIndexOf","sortedIndex","keys","values","pairs","invert",["functions","methods"],"pick","omit","tap","identity","uniqueId","escape","unescape","result","template"];_.each(adapList,function(filterNames){_.isArray(filterNames)||(filterNames=[filterNames]);var filter=_.bind(_[filterNames[0]],_),filterFactory=function(){return filter};_.each(filterNames,function(filterName){_.each([underscoreModule,filtersModule,ng.module("angular-underscore/filters/"+filterName,[])],function(module){module.filter(filterName,filterFactory)})})})}(angular,_);angular.module("app",["ngResource","ngRoute","ngTouch","ngCookies","localization","externalConstants","ui","resolver","kiaRepeatPatch","angular-underscore"]);angular.module("app").config(["$compileProvider",function($compileProvider){$compileProvider.aHrefSanitizationWhitelist(/^\s*(https?|mailto|file|tel):/)}]);angular.module("app").controller("bodyController",["$log","$document","$scope","$rootScope","$location","$window","tealiumService",function($log,$document,$scope,$rootScope,$location,$window,tealiumService){function activate(){if("true"===$location.search().modal){$rootScope.isModal=!0;lastlink=decodeURIComponent($location.search().url);$location.replace();$location.search("url",null);$location.search("modal",null)}$("body").removeClass("page-load");$document.bind("keydown",keyboardHandler);$window.addEventListener("scroll",checkScroll)}function keyboardHandler(e){27===e.which&&$rootScope.isModal?goBackHistory():$rootScope.$broadcast("keydown:"+e.which,e)}function checkScroll(e){var w=angular.element(window),d=angular.element(document),footer=angular.element($(".main-footer")),st=window.pageYOffset,cao_widget_id="#iCoder_POP1141877261",currentWidth=window.innerWidth||document.documentElement.clientWidth;768>currentWidth&&!$(cao_widget_id).children().first().is("table")&&(st+w.height()<d.height()-footer.height()?$(cao_widget_id).is(":hidden")&&$(cao_widget_id).fadeIn():$(cao_widget_id).is(":visible")&&$(cao_widget_id).fadeOut())}function goBackHistory(){window.location=lastlink}var lastlink,vm=this;$rootScope.isModal=!1;$rootScope.$on("$routeChangeSuccess",function(event,current,previous){previous&&previous.params&&"landing-page"===previous.params.level2&&tealiumService.updateDL()});vm.goBackHistory=goBackHistory;activate()}]);angular.module("app").factory("kiaEvents",[function(){return{SERVICES:{SUCCESS:"Success"},GLOBAL:{BODY_CLICKED:"kia.global.bodyClicked",TOGGLE_BODY_SCROLL:"kia.global.toggleBodyScroll",CALCULATE_PAYMENT:"kia.global.calculatePayment",CALCULATE_PAYMENT_UPDATED:"kia.global.calculatePayment.updated",CLOSE_CALCULATOR:"kia.global.closePaymentCalculator",CLOSE_NAVIGATION:"kia.global.closeNavigation",DEALER_SELECTED:"kia.global.dealerSelected",DEALER_UPDATE:"kia.global.dealerUpdate",GHOST_NAV:{ON:"kia.global.ghost.on",OFF:"kia.global.ghost.off"},WRAPFIELD_RESET:"kia.global.wrapFieldReset",WRAPFIELD_BLUR:"kia.global.wrapFieldBlur",PAGE_LOAD:"kia.global.page.load",CONSTANTS_LOADED:"externalResourcesUpdates",CONTACT_AT_ONCE_PROVIDER_ID:34,CONTACT_AT_ONCE_MAKE:"Kia",CONTACT_AT_ONCE_GENERAL_MERCHANT:"KiaConcierge",CLOSE_SHOP_NAVIGATION:"kia.global.closeShopNavigation"},RESPONSIVE:{ORIENTATION_CHANGE:"kia.reponsive.orientation.change",SETUP320:"kia.reponsive.setup320",SETUP480:"kia.reponsive.setup480",SETUP640:"kia.reponsive.setup640",SETUP680:"kia.reponsive.setup680",SETUP700:"kia.reponsive.setup700",SETUP759:"kia.reponsive.setup759",SETUP760:"kia.reponsive.setup760",SETUP768:"kia.reponsive.setup768",SETUP825:"kia.reponsive.setup825",SETUP1024:"kia.reponsive.setup1024",SETUP1150:"kia.reponsive.setup1150",SETUP980:"kia.reponsive.setup980",SETUP1320:"kia.reponsive.setup1320",MATCH320:"kia.reponsive.match320",MATCH480:"kia.reponsive.match480",MATCH568:"kia.reponsive.match568",MATCH640:"kia.reponsive.match640",MATCH680:"kia.reponsive.match680",MATCH700:"kia.reponsive.match700",MATCH759:"kia.responsive.match759",MATCH760:"kia.responsive.match760",MATCH768:"kia.reponsive.match768",MATCH980:"kia.reponsive.match980",MATCH825:"kia.reponsive.match825",MATCH1024:"kia.reponsive.match1024",MATCH1150:"kia.reponsive.match1150",MATCH1320:"kia.reponsive.match1320",UNMATCH320:"kia.responsive.unmatch320",UNMATCH480:"kia.responsive.unmatch480",UNMATCH568:"kia.responsive.unmatch568",UNMATCH640:"kia.responsive.unmatch640",UNMATCH680:"kia.responsive.unmatch680",UNMATCH700:"kia.responsive.unmatch700",UNMATCH759:"kia.responsive.unmatch759",UNMATCH760:"kia.responsive.unmatch760",UNMATCH768:"kia.responsive.unmatch768",UNMATCH825:"kia.reponsive.unmatch825",UNMATCH980:"kia.responsive.unmatch980",UNMATCH1024:"kia.responsive.unmatch1024",UNMATCH1150:"kia.responsive.unmatch1150",UNMATCH1320:"kia.responsive.unmatch1320"},DL:{DEALER_SELECTED:"kia.dealer.locator.selected",DEALER_UNSELECTED:"kia.dealer.locator.unselected",OPEN_FILTER_MENU:"kia.dealer.locator.open.filter.menu",CLOSE_FILTER_MENU:"kia.dealer.locator.close.filter.menu",CLOSE_FILTER_MENU_FILTER:"kia.dealer.locator.close.filter.menu.filter",DEALER_FILTER_ACTION:"kia.dealer.locator.filterby"},DI:{MOBILE_HANDLER:"kia.dealer.inventory.mobile.handler",MOBILE_CLOSE:"kia.dealer.inventory.mobile.close"},FEATURES:{SHOW_SUBCATEGORY:"features.show.subcategory",MARK_SELECTED_DETAIL:"features.selected.detail",FILTER_TRIM:"features.filter.trim",FIX_COL:"features.fix.column",SHOW_MOBILE_DETAIL:"features.show.mobile.detail"},GMAP:{OPEN_INFOBOX:"kia.gmap.show.infobox",CLOSE_INFOBOX:"kia.gmap.close.infobox"},ZIPCODE:{SUBMIT:"kia.zipform.submit.zipcode",ERROR:"kia.zipform.error",VALIDATE:"kia.zipform.validate",VALID:"kia.zipform.valid",NOT_VALID:"kia.zipform.notvalid",FOCUS:"kia.zipform.focus",UNFOCUS:"kia.zipform.unfocus",EDITMODE_OFF:"kia.zipform.editmode.off",EDITMODE_ON:"kia.zipform.editmode.on"},OFFERS:{FILTER:"kia.offers.filter",RESET_FILTER:"kia.offers.reset.filter"},COMPARE:{REMOVE_COMPETITOR:"kia.compare.remove.competitor",ADD_COMPETITOR:"kia.compare.add.competitor",SHOW_CATEGORY:"kia.compare.show.category",REQUEST_ADD_COMPETITOR:"kia.compare.request.add.competitor",REQUEST_CHANGE_TRIM:"kia.compare.request.change.trim",CLOSE_SELECT_VEHICLE:"kia.compare.close.select.vehicle",CLOSE_CHANGE_TRIM:"kia.compare.close.change.trim",SHOW_MOBILE_GALLERY:"kia.compare.show.mobile.gallery",CLOSE_MOBILE_GALLERY:"kia.compare.close.mobile.gallery",RESET_GALLERY:"kia.compare.reset.gallery"},BNP:{SUCCESS:"kia.bnp.success",ERROR:"kia.bnp.error",FAILURE:"kia.bnp.failure",DEPENDENCIES_YES:"kia.bnp.dependencies.yes",DEPENDENCIES_NO:"kia.bnp.dependencies.no",PACKAGE_DETAIL_SHOW:"kia.bnp.packagedetail.show",PACKAGE_DETAIL_CLOSE:"kia.bnp.packagedetail.close",PACKAGES_PACKAGE_SELECTED:"kia.bnp.packages.package.selected",PACKAGES_PACKAGE_UNSELECTED:"kia.bnp.packages.package.unselected"},LIGHTBOX:{OPEN:"kia.lightbox.open",CLOSE:"kia.lightbox.close",CHANGE_PLATFORM:"kia.lightbox.change.platform",UPDATE_POSITION:"kia.lightbox.update.position"},EXPERIENCE:{SWIPE:"kia.experience.swipe",RELOAD:"kia.experience.story.reload"},LOADER:{SHOW:"kia.loader.show",HIDE:"kia.loader.hide"},TRIM:{SELECTED:"kia.trim.selected"},HOMEPAGE:{ANIMATION_STOP:"kia.homepage.animation.stop",ANIMATION_RESUME:"kia.homepage.animation.resume",SWIPE:"kia.homepage.car.swipe",CAR_CHANGE_START:"kia.homepage.car.change.start",CAR_CHANGE_END:"kia.homepage.car.change.end",PROMO_CHANGE_END:"kia.homepage.promo.change.end",PROMO_LOADED:"kia.homepage.promo.loaded",URL_UPDATED:"kia.homepage.url.updated"},COLLAPSIBLE:{CLOSE:"kia.collapsible.collapse",OPEN:"kia.collapsible.expand"},CONTENTTEMPLATE:{PANEL_RESIZE:"kia.contenttemplate.panel.resize",ACCORDION_OPEN:"kia.contenttemplate.accordion.open",ACCORDION_CLOSE:"kia.contenttemplate.accordion.close"},ANALYTICS:{OFFERS_CONFIRMATION:"kia.analytics.offers.confirmation",TRADEINAPPRAISAL_CONFIRMATION:"kia.analytics.tradeinappraisal.success.confirmation",QUICKQUOTE_SUCCESS_CONFIRMATION:"kia.analytics.quickquote.success.confirmation",BROCHURE_SUCCESS_CONFIRMATION:"kia.analytics.brochure.success.confirmation",PAYMENT_CALCULATOR_CONFIRMATION:"kia.analytics.payment.calculator.confirmation",DEALER_LOCATOR_CONFIRMATION:"kia.analytics.dealer.locator.confirmation",BNP_SUCCESS_CONFIRMATION:"kia.analytics.bnp.success.confirmation",BNP_COLORS_CONFIRMATION:"kia.analytics.bnp.colors.confirmation",BNP_PACKAGES_CONFIRMATION:"kia.analytics.bnp.packages.confirmation",BNP_OPTIONS_CONFIRMATION:"kia.analytics.bnp.options.confirmation",EXPERIENCE_PAGE_CONFIRMATION:"kia.analytics.experience.page.confirmation",COMPARE_REQUEST_ADD_COMPETITOR:"kia.analytics.compare.request.add.competitor",OFFERS_FILTER:"kia.analytics.offers.filter",GLOBAL_DEALER_SELECTED:"kia.analytics.global.dealer.selected",ZIPCODE_ERROR:"kia.analytics.zipcode.error",ZIPCODE_SUBMIT:"kia.analytics.zipcode.submit",ZIPCODE_VALID:"kia.analytics.zipcode.valid",DEALER_FILTER_ACTION:"kia.analytics.dealer.filter.action",EXPERIENCE_SWIPE:"kia.analytics.experience.swipe",TRIM_SELECTED:"kia.analytics.trim.selected",BNP_TRIM_CONFIRMATION:"kia.analytics.bnp.trim.confirmation",BNP_COMPARE_VEHICLE:"kia.analytics.bnp.compare.vehicle",DL_GET_DIRECTIONS:"kia.analytics.dl.get.directions",DL_DEALER_EXIT:"kia.analytics.dl.dealer.exit",DL_DEALER_CHAT:"kia.analytics.dl.dealer.chat",BROCHURE_DOWNLOAD:"kia.analytics.brochure.download",EXPERIENCE_SCROLL:"kia.analytics.experience.scroll",EXPERIENCE_USE_NAV:"kia.analytics.experience.use.nav",INVENTORY_SELECT_MODEL:"kia.analytics.inventory.select.model",INVENTORY_SELECT_VEHICLE:"kia.analytics.inventory.select.vehicle",OFFERS_SELECT:"kia.analytics.offers.select",QUICKQUOTE_SELECT_DEALER:"kia.analytics.quickquote.select.dealer",QUICKQUOTE_CONTACT_INFO:"kia.analytics.quickquote.contact.info",TESTDRIVE_SUCCESS:"kia.analytics.testdrive.success",TESTDRIVE_CONTACT_INFO:"kia.analytics.testdrive.contact.info",TESTDRIVE_SELECT_DEALER:"kia.analytics.testdrive.select.dealer",UPDATES_COMPLETE:"kia.analytics.updates.complete",ERROR_ERROR404:"kia.analytics.error.error404",ERROR_GENERIC:"kia.analytics.error.generic",ERROR_ERROR500:"kia.analytics.error.error500",BNP_GET_LINK:"kia.analytics.bnp.get.link",BNP_PRINT_SUMMARY:"kia.analytics.bnp.print.summary",BNP_VIEW_INTERIOR:"kia.analytics.bnp.view.interior",SEARCH_RESULTS_CONFIRMATION:"kia.analytics.search.results.confirmation",BLUETOOTH_GET_STARTED:"kia.analytics.bluetooth.get.started",BLUETOOTH_SELECT_VEHICLE:"kia.analytics.bluetooth.select.vehicle",BLUETOOTH_SELECT_AUDIO_SYSTEM:"kia.analytics.bluetooth.select.audio.system",BLUETOOTH_SELECT_DEVICE:"kia.analytics.bluetooth.select.device",SAFETY_RECALL_SEARCH:"kia.analytics.owners.recalls.search",HOME_ANNOUNCEMENT:"kia.analytics.home.announcement.click"},PAGINATION:{GOTO:"kia.pagination.goto"},SHOP:{TOGGLE_MOBILE_SHOP_MENU:"kia.shop.toggle.mobile.shop.menu",ENABLE_SLIDER_SHOP_HEADER:"kia.shop.enable.slider.shop.header"}}}]);!function(global){"use strict";function each(collection,fn){var cont,i=0,length=collection.length;for(i;length>i;i++){cont=fn(collection[i],i);if(cont===!1)break}}function isArray(target){return"[object Array]"===Object.prototype.toString.apply(target)}function isFunction(target){return"function"==typeof target}function QueryHandler(options){this.options=options;!options.deferSetup&&this.setup()}function MediaQuery(query,isUnconditional){this.query=query;this.isUnconditional=isUnconditional;this.handlers=[];this.mql=matchMedia(query);var self=this;this.listener=function(mql){self.mql=mql;self.assess()};this.mql.addListener(this.listener)}function MediaQueryDispatch(){if(!matchMedia)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={};this.browserIsIncapable=!matchMedia("only all").matches}var matchMedia=global.matchMedia;QueryHandler.prototype={setup:function(){this.options.setup&&this.options.setup();this.initialised=!0},on:function(){!this.initialised&&this.setup();this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(target){return this.options===target||this.options.match===target}};MediaQuery.prototype={addHandler:function(handler){var qh=new QueryHandler(handler);this.handlers.push(qh);this.matches()&&qh.on()},removeHandler:function(handler){var handlers=this.handlers;each(handlers,function(h,i){if(h.equals(handler)){h.destroy();return!handlers.splice(i,1)}})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){each(this.handlers,function(handler){handler.destroy()});this.mql.removeListener(this.listener);this.handlers.length=0},assess:function(){var action=this.matches()?"on":"off";each(this.handlers,function(handler){handler[action]()})}};MediaQueryDispatch.prototype={register:function(q,options,shouldDegrade){var queries=this.queries,isUnconditional=shouldDegrade&&this.browserIsIncapable;queries[q]||(queries[q]=new MediaQuery(q,isUnconditional));isFunction(options)&&(options={match:options});isArray(options)||(options=[options]);each(options,function(handler){queries[q].addHandler(handler)});return this},unregister:function(q,handler){var query=this.queries[q];if(query)if(handler)query.removeHandler(handler);else{query.clear();delete this.queries[q]}return this}};global.enquire=global.enquire||new MediaQueryDispatch}(this);angular.module("app").directive("responsiveHandler",["kiaEvents","$log","$rootScope",function(kiaEvents,$log,$rootScope){return{restrict:"A",prority:999,link:function(scope,element,attrs){var BREAK_POINTS={MOBILE:"320px",MOBILE_H:"480px",MEDIUM:"680px",TABLET_P:"768px",TABLET_H:"1024px",DESKTOP_H:"1320px",LARGE:"1100px",S4_CUSTOM_PORTRAIT:"640px",DL_CUSTOM_PORTRAIT:"825px",DL_CUSTOM_LANDSCAPE:"568px",BNP_CUSTOM:"980px",BNP_PACKAGES_CUSTOM:"1150px",TEMPLATE_PANEL_SMALL:"759px",TEMPLATE_PANEL_LARGE:"760px",MOBILE_HEADER:"700px"};$(window).on("orientationchange",function(e){scope.$broadcast(kiaEvents.RESPONSIVE.ORIENTATION_CHANGE,e)});enquire.register("screen and (max-width: "+BREAK_POINTS.MOBILE+")",{setup:function(){scope.$broadcast(kiaEvents.RESPONSIVE.SETUP320)},match:function(){scope.$broadcast(kiaEvents.RESPONSIVE.MATCH320)},unmatch:function(){scope.$broadcast(kiaEvents.RESPONSIVE.UNMATCH320)}});enquire.register("screen and (max-width: "+BREAK_POINTS.MOBILE_H+")",{setup:function(){scope.$broadcast(kiaEvents.RESPONSIVE.SETUP480)},match:function(){scope.$broadcast(kiaEvents.RESPONSIVE.MATCH480)},unmatch:function(){scope.$broadcast(kiaEvents.RESPONSIVE.UNMATCH480)}});enquire.register("screen and (max-width: "+BREAK_POINTS.MOBILE_HEADER+")",{setup:function(){$rootScope.$broadcast(kiaEvents.RESPONSIVE.SETUP700)},match:function(){$rootScope.$broadcast(kiaEvents.RESPONSIVE.MATCH700)},unmatch:function(){$rootScope.$broadcast(kiaEvents.RESPONSIVE.UNMATCH700)}});enquire.register("screen and (max-width: "+BREAK_POINTS.MEDIUM+")",{setup:function(){scope.$broadcast(kiaEvents.RESPONSIVE.SETUP680)},match:function(){scope.$broadcast(kiaEvents.RESPONSIVE.MATCH680)},unmatch:function(){scope.$broadcast(kiaEvents.RESPONSIVE.UNMATCH680)}});enquire.register("screen and (max-width: "+BREAK_POINTS.TABLET_P+")",{setup:function(){scope.$broadcast(kiaEvents.RESPONSIVE.SETU768)},match:function(){scope.$broadcast(kiaEvents.RESPONSIVE.MATCH768)},unmatch:function(){scope.$broadcast(kiaEvents.RESPONSIVE.UNMATCH768)}});enquire.register("screen and (max-width: "+BREAK_POINTS.TABLET_H+")",{setup:function(){scope.$broadcast(kiaEvents.RESPONSIVE.SETU1024)},match:function(){scope.$broadcast(kiaEvents.RESPONSIVE.MATCH1024)},unmatch:function(){scope.$broadcast(kiaEvents.RESPONSIVE.UNMATCH1024)}});enquire.register("screen and (max-width: "+BREAK_POINTS.DESKTOP_H+")",{setup:function(){scope.$broadcast(kiaEvents.RESPONSIVE.SETUP1320)},match:function(){scope.$broadcast(kiaEvents.RESPONSIVE.MATCH1320)},unmatch:function(){scope.$broadcast(kiaEvents.RESPONSIVE.UNMATCH1320)}});enquire.register("screen and (max-width: "+BREAK_POINTS.DL_CUSTOM_PORTRAIT+")",{setup:function(){scope.$broadcast(kiaEvents.RESPONSIVE.SETU825)},match:function(){scope.$broadcast(kiaEvents.RESPONSIVE.MATCH825)},unmatch:function(){scope.$broadcast(kiaEvents.RESPONSIVE.UNMATCH825)}});enquire.register("screen and (max-width: "+BREAK_POINTS.DL_CUSTOM_LANDSCAPE+")",{match:function(){scope.$broadcast(kiaEvents.RESPONSIVE.MATCH568)},unmatch:function(){scope.$broadcast(kiaEvents.RESPONSIVE.UNMATCH568)}});enquire.register("screen and (max-width: "+BREAK_POINTS.BNP_CUSTOM+")",{setup:function(){scope.$broadcast(kiaEvents.RESPONSIVE.SETUP980)},match:function(){scope.$broadcast(kiaEvents.RESPONSIVE.MATCH980)},unmatch:function(){scope.$broadcast(kiaEvents.RESPONSIVE.UNMATCH980)}});enquire.register("screen and (max-width: "+BREAK_POINTS.S4_CUSTOM_PORTRAIT+")",{setup:function(){scope.$broadcast(kiaEvents.RESPONSIVE.SETUP640)},match:function(){scope.$broadcast(kiaEvents.RESPONSIVE.MATCH640)},unmatch:function(){scope.$broadcast(kiaEvents.RESPONSIVE.UNMATCH640)}});enquire.register("screen and (min-width: "+BREAK_POINTS.MEDIUM+") and (max-width: "+BREAK_POINTS.BNP_PACKAGES_CUSTOM+")",{setup:function(){scope.$broadcast(kiaEvents.RESPONSIVE.SETUP1150)},match:function(){scope.$broadcast(kiaEvents.RESPONSIVE.MATCH1150)},unmatch:function(){scope.$broadcast(kiaEvents.RESPONSIVE.UNMATCH1150)}});enquire.register("screen and (min-width: "+BREAK_POINTS.MOBILE_H+") and (max-width: "+BREAK_POINTS.TEMPLATE_PANEL_SMALL+")",{setup:function(){scope.$broadcast(kiaEvents.RESPONSIVE.SETUP759)},match:function(){scope.$broadcast(kiaEvents.RESPONSIVE.MATCH759)},unmatch:function(){scope.$broadcast(kiaEvents.RESPONSIVE.UNMATCH759)}});enquire.register("screen and (min-width: "+BREAK_POINTS.TEMPLATE_PANEL_LARGE+")",{setup:function(){scope.$broadcast(kiaEvents.RESPONSIVE.SETUP760)},match:function(){scope.$broadcast(kiaEvents.RESPONSIVE.MATCH760)},unmatch:function(){scope.$broadcast(kiaEvents.RESPONSIVE.UNMATCH760)}})}}}]);angular.module("app").factory("messageService",["$log","$rootScope",function($log,$rootScope){var publish,subscribe;publish=function(name,parameters){parameters.timeStamp=new Date;return $rootScope.$broadcast(name,parameters)};subscribe=function(name,listener){return $rootScope.$on(name,listener)};return{publish:publish,subscribe:subscribe}}]);angular.module("app").factory("lightboxService",["$log","$http","messageService","kiaEvents",function($log,$http,messageService,kiaEvents){var creates,open,close,status,exist,get,swap,boxesList=new List,openList=new List;creates=function(id){boxesList.set(id,!1,!0)};open=function(id,bUpdate){!exist(id);boxesList.set(id,!0,!0);openList.push(id,!0);bUpdate!==!0&&messageService.publish(kiaEvents.LIGHTBOX.OPEN,{id:id});return!0};close=function(id,bUpdate){boxesList.set(id,!1,!0);openList.remove(id);bUpdate!==!0&&messageService.publish(kiaEvents.LIGHTBOX.CLOSE,{id:id});return!1};swap=function(id,bUpdate){exist(id)&&status(id)?close(id,bUpdate):open(id,bUpdate)};status=function(id){return boxesList.get(id)};get=function(id){return boxesList.getElementByKey(id)};exist=function(id){return null!==boxesList.getElementByKey(id)};return{creates:creates,open:open,close:close,status:status,exist:exist,get:get,swap:swap,opened:openList}}]);var lightboxMode={MODAL:"modal",TOOLTIP:"tooltip"},isMobile=function(){var sUserAgent=""+(navigator.userAgent||navigator.vendor||window.opera);sUserAgent=sUserAgent.toLowerCase();return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i.test(sUserAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(sUserAgent.substr(0,4))?!0:!1;
},isAndroidBrowser=function(){var nua=navigator.userAgent,is_android=nua.indexOf("Mozilla")>-1&&nua.indexOf("Android ")>-1&&nua.indexOf("AppleWebKit")>-1;return is_android};angular.module("app").directive("lightbox",["$log","safeApply","$document","$rootScope","lightboxService","messageService","kiaEvents",function($log,safeApply,$document,$rootScope,lightboxService,messageService,kiaEvents){return{restrict:"A",replace:!0,transclude:!0,scope:{id:"@",open:"=",handlerId:"@",align:"@",valign:"@",offset:"@",type:"@",outsideClose:"@",title:"@"},templateUrl:window.staticURI+"/views/directives/lightbox.html",controller:function($scope){$scope.fixClass=isMobile();$scope.ready=!1;$scope._scroll=0;lightboxService.exist($scope.id)||lightboxService.creates($scope.id);if(void 0===$scope.open){var obj=lightboxService.get($scope.id);$scope.openBind=obj.value}else $scope.openBind=$scope.open;void 0===$scope.offset?$scope._offset={top:0,left:0}:$scope._offset=$scope.offset;$scope.position={top:$scope._offset.top+"px",left:$scope._offset.left+"px"};$scope.initialized=!1;$scope.platform="desktop";$scope.newPlatform=!1;$scope.changePlatform=function(platform){safeApply($scope,function(){$scope.platform=platform;$scope.updateLightboxContainerClass();$scope.updateWrapperClass();$scope.updatePosition()})};$scope.$on(kiaEvents.LIGHTBOX.CHANGE_PLATFORM,function(event,platform){$("html").addClass("lightbox-mobile-mode");$scope.newPlatform=!0});$scope.$on(kiaEvents.RESPONSIVE.MATCH680,function(event){$scope.changePlatform("mobile")});$scope.$on(kiaEvents.RESPONSIVE.UNMATCH680,function(event){$scope.changePlatform("desktop")});if($document.find("#lightbox-container").length<=0){var containerDiv=document.createElement("div");containerDiv.id="lightbox-container";$document.find("body").append(containerDiv)}$scope.lightboxContainer=$document.find("#lightbox-container");$scope.updateLightboxContainerClass=function(){"mobile"===$scope.platform?$scope.lightboxContainer.hasClass("mobile-container")||$scope.lightboxContainer.addClass("mobile-container"):$scope.lightboxContainer.removeClass("mobile-container")};$scope.updateLightboxContainerClass()},link:function(scope,element,attrs){scope.boxClass={vertical:"none",horizontal:"none"};scope.handlerObj=$("#"+scope.handlerId);var stopTouch=function(event){event.stopPropagation();event.preventDefault()};scope.getVerticalOffset=function(align,offset){var contentHeight=element.find(".lightbox-box").outerHeight(),handlerHeight=scope.handlerObj.outerHeight(),nOffset=0;scope.boxClass.vertical=align;switch(align){case"top":nOffset=offset-contentHeight;break;case"bottom":nOffset=offset+handlerHeight;break;case"center":nOffset=offset+(handlerHeight-contentHeight)/2;break;default:nOffset=offset+handlerHeight+contentHeight>=$document.height()?scope.getVerticalOffset("top",offset):scope.getVerticalOffset("bottom",offset)}if(nOffset+contentHeight>$document.height()){nOffset=$document.height()-contentHeight;scope.boxClass.vertical="none"}if(0>nOffset){nOffset=0;scope.boxClass.vertical="none"}return nOffset};scope.getHorizontalOffset=function(align,offset){var docWidth=scope.lightboxContainer.outerWidth(),contentWidth=element.find(".lightbox-box").outerWidth(),handlerWidth=scope.handlerObj.outerWidth(),nOffset=(element.find(".lightbox-box").outerWidth(!0)-element.find(".lightbox-box").outerWidth(),0);scope.boxClass.horizontal=align;switch(align){case"left":nOffset=offset+handlerWidth/2;break;case"right":nOffset=offset+handlerWidth/2-contentWidth;break;case"center":nOffset=offset+(handlerWidth-contentWidth)/2;break;default:nOffset=offset+handlerWidth/2+contentWidth>=docWidth?offset+(handlerWidth+contentWidth)/2>=docWidth?scope.getHorizontalOffset("right",offset):scope.getHorizontalOffset("center",offset):scope.getHorizontalOffset("left",offset)}if(nOffset+contentWidth>=docWidth){nOffset=docWidth-contentWidth-10;scope.boxClass.horizontal="none"}if(0>nOffset){nOffset=10;scope.boxClass.horizontal="none"}return nOffset};scope.updatePosition=function(){if(scope.initialized&&scope.openBind){scope.handlerId&&(scope.handlerObj=$("#"+scope.handlerId));var oCSS=(element.find(".lightbox-scroll").outerHeight()-element.find(".lightbox-scroll").height(),{marginLeft:"",marginTop:""}),nMaxHeight=$(window).height();if("mobile"===scope.platform||$("html").hasClass("lightbox-mobile-mode")){element.find(".lightbox-content").css({maxHeight:""});scope.boxClass.horizontal="none";scope.boxClass.vertical="none"}else{if(scope.type!==lightboxMode.MODAL){var handlerPosition=scope.handlerObj.offset();if(scope.handlerObj.is("input")&&"uniform"===scope.handlerObj.attr("ui-jq")){handlerPosition.top+=scope.handlerObj.outerHeight();handlerPosition.left+=scope.handlerObj.outerWidth()}if(scope.handlerObj.parents(".ui-scrollfix-ghost").length>0){element.hasClass("lightbox-fixed")||element.addClass("lightbox-fixed");handlerPosition.top=handlerPosition.top-$(window).scrollTop()}else element.removeClass("lightbox-fixed");if(handlerPosition){scope.position.top=scope.getVerticalOffset(scope.valign,handlerPosition.top);scope.position.left=scope.getHorizontalOffset(scope.align,handlerPosition.left)}else{scope.position.top=0;scope.position.left=0}scope.position.top+=scope._offset.top;if($document.width()<=screenSize.smart){scope.position.left="50%";oCSS.marginLeft=-element.find(".lightbox-box").outerWidth()/2}else{scope.position.left+=scope._offset.left;scope.position.left+="px"}}else{scope.position.top="50%";scope.position.left="50%";scope.boxClass.horizontal="none";element.find(".lightbox-content").css({maxHeight:.9*nMaxHeight-element.find(".lightbox-header").height()+"px"});oCSS.marginLeft=-element.find(".lightbox-box").outerWidth()/2;oCSS.marginTop=-element.find(".lightbox-box").outerHeight()/2.5}oCSS.top=scope.position.top;oCSS.left=scope.position.left}scope.checkHeaderHeight();element.find(".lightbox-box").css(oCSS);scope.ready=!0}};scope.updateWrapperClass=function(bForce){$rootScope.$broadcast("setresize.tl",!0);var bResetSleep=!0,obj=$("html");scope.fixClass&&!obj.hasClass("lightbox-fix")&&obj.addClass("lightbox-fix");if(lightboxService.opened.length()){if(scope.openBind){if("mobile"===scope.platform||$("html").hasClass("lightbox-mobile-mode")){if(bForce){bResetSleep=!1;setTimeout(function(){window.scrollTo(0,0);obj.addClass("block-body");$rootScope.$broadcast("setresize.tl",!1)},1200)}else obj.addClass("block-body");element.find(".lightbox-content").length>0&&(element.find(".lightbox-content")[0].scrollTop=0)}if(!obj.hasClass("lightbox-"+scope.platform+"-open")){obj.addClass("lightbox-"+scope.platform+"-open");"mobile"===scope.platform?obj.removeClass("lightbox-desktop-open"):obj.removeClass("lightbox-mobile-open")}scope.type===lightboxMode.MODAL?obj.hasClass("lightbox-modal-open")||obj.addClass("lightbox-modal-open"):obj.removeClass("lightbox-modal-open")}}else{obj.removeClass("block-body");if(scope.newPlatform){bResetSleep=!1;setTimeout(function(){obj.removeClass("lightbox-mobile-mode");$rootScope.$broadcast("setresize.tl",!1)},1200);scope.newPlatform=!1}if(bForce){bResetSleep=!1;setTimeout(function(){obj.removeClass("lightbox-mobile-open");obj.removeClass("lightbox-desktop-open");obj.removeClass("lightbox-modal-open");$rootScope.$broadcast("setresize.tl",!1)},1200)}else{obj.removeClass("lightbox-mobile-open");obj.removeClass("lightbox-desktop-open");obj.removeClass("lightbox-modal-open")}}bResetSleep&&$rootScope.$broadcast("setresize.tl",!1)};scope.checkHeaderHeight=function(){var mobileMode="mobile"===scope.platform||$("html").hasClass("lightbox-mobile-mode");scope.openBind&&(mobileMode?element.find(".lightbox-box").css({"padding-top":element.find(".lightbox-header").outerHeight()+"px"}):element.find(".lightbox-box").css({"padding-top":""}))};scope.show=function(){scope.updatePosition()};scope.hide=function(bForce){scope.updateWrapperClass(bForce)};scope.close=function(bOnBlocker){if(!bOnBlocker||scope.outsideClose!==!1&&"false"!==scope.outsideClose){lightboxService.close(scope.id);$rootScope.$broadcast("closingLightbox",!0)}};element.on("resize.lightbox",function(evt){safeApply(scope,function(){scope.updatePosition()})});element.find(".lightbox-content").bind("resize.lightbox",function(){safeApply(scope,function(){scope.updatePosition()})});scope.$watch("open",function(){void 0!==scope.open&&(scope.open?lightboxService.open(scope.id):lightboxService.close(scope.id))});scope.update=function(bStatus){var mobileMode="mobile"===scope.platform||$("html").hasClass("lightbox-mobile-mode");if(scope.openBind!==bStatus){scope.ready=!1;if(scope.initialized){scope.openBind=bStatus;scope.checkHeaderHeight();if(bStatus)if(mobileMode){scope._scroll=$(document).scrollTop();element.find(".lightbox-scroll").on("touchmove",function(event){});if(scope.fixClass){element.find(".lightbox-header").on("touchmove",stopTouch);element.find(".lightbox-blocker").on("touchstart",stopTouch)}}else{if(scope.type===lightboxMode.MODAL){element.find(".lightbox-scroll").on("touchmove",function(event){});element.find(".lightbox-blocker").on("touchstart",stopTouch)}scope._scroll=0}if(scope.openBind){scope.show();element.css({zIndex:lightboxService.opened.length()});mobileMode?scope.updateWrapperClass(!0):scope.updateWrapperClass();lightboxService.open(scope.id,!0);try{angular.element(document).find("iframe").each(function(){isMobile()?$(this).attr("src",$(this).attr("src")+""):this.contentWindow.postMessage(JSON.stringify({event:"command",func:"stopVideo",args:""}),"*")})}catch(ev){}}else if(mobileMode){if(0===lightboxService.opened.length()){scope.hide(!0);setTimeout(function(){safeApply(scope,function(){window.scrollTo(0,scope._scroll);scope._scroll=0})},0);lightboxService.close(scope.id,!0)}element.find(".lightbox-header").off("touchmove");element.find(".lightbox-blocker").off("touchstart")}else{lightboxService.close(scope.id,!0);scope.hide()}}else{scope.attachBox();setTimeout(function(){safeApply(scope,function(){scope.update(bStatus)})},300)}}};messageService.subscribe(kiaEvents.LIGHTBOX.OPEN,function(event,data){if(data.id===scope.id){void 0!==scope.open&&(scope.open=!0);scope.update(!0)}});messageService.subscribe(kiaEvents.LIGHTBOX.CLOSE,function(event,data){if(data.id===scope.id){void 0!==scope.open&&(scope.open=!1);scope.update(!1)}});messageService.subscribe(kiaEvents.GLOBAL.GHOST_NAV.ON,function(data,args){safeApply(scope,function(){scope.updatePosition()})});messageService.subscribe(kiaEvents.GLOBAL.GHOST_NAV.OFF,function(data,args){safeApply(scope,function(){scope.updatePosition()})});messageService.subscribe(kiaEvents.LIGHTBOX.UPDATE_POSITION,function(data,args){safeApply(scope,function(){scope.updatePosition()})});scope.attachBox=function(){if(!scope.initialized){scope.lightboxContainer.children("#"+scope.id).remove();scope.lightboxContainer.append(element);scope.initialized=!0}};scope.$watch("handlerId",function(){if(scope.handlerId&&""!==scope.handlerId){scope.handlerObj=$("#"+scope.handlerId);scope.updatePosition()}})}}}]);require(["image!"+window.staticURI+"/img/inventory/sprites-inventory.png"]);angular.module("app").directive("lightboxLink",["safeApply","lightboxService",function(safeApply,lightboxService){return{restrict:"A",replace:!1,link:function(scope,element,attrs){element.on("click",function(e){safeApply(scope,function(){lightboxService.swap(attrs.lightboxLink)})})}}}]);angular.module("app").directive("hideIfZero",["$log",function($log){return{restrict:"A",link:function(scope,element,attributes){function hideElementIfZero(){0===parseInt(attributes.hideIfZero,10)||""===attributes.hideIfZero?$(element).hide():$(element).show()}attributes.$observe("hideIfZero",hideElementIfZero)}}}]);angular.module("app").directive("altText",["$log",function($log){return{restrict:"A",link:function(scope,element,attributes){function altTextHelper(){var valueOneCondition,valueTwoCondition;valueOneCondition=""===attributes.valueOne||0===parseInt(attributes.valueOne,10);valueTwoCondition=""===attributes.valueTwo||0===parseInt(attributes.valueTwo,10);"SHOW-BOTH"===attributes.action?valueOneCondition&&valueTwoCondition?$(element).show():$(element).hide():"SHOW-ONE"===attributes.action&&(!valueOneCondition||valueOneCondition&&valueTwoCondition?$(element).hide():$(element).show())}$(element).hide();attributes.$observe("valueOne",altTextHelper);attributes.$observe("valueTwo",altTextHelper)}}}]);angular.module("app").directive("popupWindow",["$window","kiaEvents",function($window,kiaEvents){return{restrict:"A",scope:{},link:function(scope,element,attrs){var url=attrs.href;element.bind("click",function(e){"L1"===attrs.placement?scope.$emit(kiaEvents.GLOBAL.CLOSE_NAVIGATION):"shopNav"===attrs.placement&&scope.$emit(kiaEvents.GLOBAL.CLOSE_SHOP_NAVIGATION);e.preventDefault();e.stopPropagation();$window.open(url,"","height=500,width=600,left=50,top=50,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no, status=yes")})}}}]);angular.module("app").directive("googleAdwordsConversion",["$window","$location",function($window,$location){return{restrict:"A",scope:{conversionId:"@cid",conversionLabel:"@clabel",trackUrl:"@"},priority:1,link:function(scope,element,attrs){function goog_snippet_vars(){w.google_conversion_id=scope.conversionId;w.google_conversion_label=scope.conversionLabel;w.google_remarketing_only=!1}function goog_report_conversion(url){goog_snippet_vars();w.google_conversion_format="3";var opt=new Object;opt.onload_callback=function(){"undefined"!=typeof url&&(w.location=url)};var conv_handler=w.google_trackConversion;"function"==typeof conv_handler&&conv_handler(opt)}var w=$window,url=scope.trackUrl;element.bind("click",function(){scope.conversionId=Number(scope.conversionId);goog_report_conversion(url)})}}}]);angular.module("app").controller("navigationController",["$log","$scope","$routeParams","kiaEvents","localize","navigationModel","kianService","safeApply","$rootScope","$window","$timeout",function($log,$scope,$routeParams,kiaEvents,localize,navigationModel,kianService,safeApply,$rootScope,$window,$timeout){function resetShopHeader(){$scope.showMobileShopheader=!1}function setScrollableFlag(event,value){disableScroll=value}var onVehicleNavigation,onVehicleNavigationFail,previousOffSet=0,minOffSetRequired=70;$scope.selectedSubMenuId="";var overlayFlag=!1,disableScroll=!1;$scope.testingapp="testing";$scope.cars=[];$scope.shopSeries="";$scope.shopSeriesYear="";$scope.isShopMenuOpen=!1;$scope.showMobileShopheader=!1;$scope.enableMobileShopheader=!1;$scope.isOverLayVisible=function(){return!$scope.mobile&&overlayFlag};$scope.closeOverlay=function(){safeApply($scope,function(){overlayFlag=!1;$scope.selectedSubMenuId=""})};onVehicleNavigation=function(data){navigationModel.update(data.result);$scope.cars=navigationModel.getData();$scope.$broadcast("kia.nav.update.scroll")};onVehicleNavigationFail=function(data){};$scope.toggleMobileShopMenu=function(event){$scope.isShopMenuOpen=!$scope.isShopMenuOpen;$rootScope.$broadcast(kiaEvents.SHOP.TOGGLE_MOBILE_SHOP_MENU)};$scope.$on(kiaEvents.SHOP.ENABLE_SLIDER_SHOP_HEADER,function(event,data){$scope.enableMobileShopheader=!0;$scope.sanitizedSeries=data.modelName.trim().replace(/\s/g,"-").toLowerCase();$scope.shopSeries=data.modelName;$scope.shopSeriesYear=data.modelYear});$rootScope.$on("$routeChangeStart",resetShopHeader);$scope.$on(kiaEvents.RESPONSIVE.UNMATCH700,resetShopHeader);$scope.$on(kiaEvents.RESPONSIVE.MATCH700,resetShopHeader);$scope.$on(kiaEvents.GLOBAL.TOGGLE_BODY_SCROLL,setScrollableFlag);$scope.$on("kia.sm.nav.toggleSubMenu",function(event,type,id){if($scope.mobile)return!1;if(id!==$scope.selectedSubMenuId){$scope.selectedSubMenuId=id;overlayFlag=!0}else{$scope.selectedSubMenuId="";overlayFlag=!1}});$scope.$on(kiaEvents.GLOBAL.CLOSE_NAVIGATION,function(event){$scope.closeOverlay()});angular.element($window).on("scroll.ui-scrollfix",function(){!$scope.enableMobileShopheader&&$window.Modernizr.mq("only screen and (max-width: 700px)")&&$scope.isShopMenuOpen||$timeout(function(){var _scrollPosition=$window.pageYOffset;if(!disableScroll){_scrollPosition>previousOffSet&&_scrollPosition>minOffSetRequired?$scope.showMobileShopheader=!0:previousOffSet>_scrollPosition&&($scope.showMobileShopheader=!1);previousOffSet=_scrollPosition}})})}]);angular.module("app").directive("navigationInteraction",["$log","kiaEvents","$location","$timeout","$window",function($log,kiaEvents,$location,$timeout,$window){return{restrict:"A",replace:!0,priority:99,link:function(scope,element,attrs){var defaultSearchDivHeight,currentPrimaryOption="",currentTheme="";scope.searchON=!1;scope.submenuOpen=!1;scope.currentSubmenuId="";scope.expand=!1;scope.mobile=!1;scope.showLightSubmenu=!1;scope.searchBlur=!1;scope.isOwnersHeader=!1;scope.searchContent="";scope.currentCar="";scope.expandMobileMenu=function(ignoreScroll){if(!ignoreScroll||scope.expand){var ignoreScrollbar=ignoreScroll||!1;scope.expand=!scope.expand;element.find(".logo.owners").is(":visible")?scope.isOwnersHeader=!0:scope.isOwnersHeader=!1;scope.expand?$timeout(function(){ignoreScrollbar||$("body").addClass("hide-scroll-bar");element.addClass("show-scroll-bar").find(".vehicle-menu-selector").addClass("overflowable");scope.$emit(kiaEvents.GLOBAL.TOGGLE_BODY_SCROLL,scope.expand)},100):$timeout(function(){$("body").removeClass("hide-scroll-bar");element.removeClass("show-scroll-bar").find(".vehicle-menu-selector").removeClass("overflowable");scope.$emit(kiaEvents.GLOBAL.TOGGLE_BODY_SCROLL,scope.expand)},100)}};scope.submitSearch=function(){$window.location=$window.baseURI+"/search?q="+scope.searchContent+"&r=10";scope.searchContent="";scope.closeSearch()};scope.showSearch=function(){scope.closeSubmenu();if(scope.searchON){scope.closeSearch();return!1}void 0===defaultSearchDivHeight&&(defaultSearchDivHeight=element.find(".search-container").height());scope.searchON=!0;scope.expand=!0;scope.subemenuOpen=!0;$timeout(function(){element.find(".search-container").addClass("search-open");element.find(".search-container").height(element.find(".header-submenu-search").height()+20);element.find(".vehicle-menu-selector").addClass("overflowable");element.find(".search-field").focus().blur()},20);element.find(".search").addClass("selected")};scope.closeSearch=function(){scope.expand=!1;scope.submenuOpen=!1;scope.searchON=!1;element.find(".search-container").removeClass("search-open");element.find(".search").removeClass("selected");element.find(".search-container").height(defaultSearchDivHeight);scope.closeSubmenu()};scope.clearSearch=function(){scope.searchContent="";element.find(".search-field").focus().blur()};scope.$on("kia.nav.update.selected",function(event,id){element.find(".header-primary-nav ul li").removeClass("selected");element.find("[submenu-id="+id+"]").addClass("selected")});scope.$on("kia.nav.update.title",function(event,label){scope.currentCar=label});scope.$on("kia.nav.expandMobileMenu",function(event){scope.expandMobileMenu()});scope.$on(kiaEvents.GLOBAL.CLOSE_NAVIGATION,function(event){scope.expandMobileMenu(!0)});scope.$on("kia.nav.hide.submenu",function(event){scope.closeSubmenu()});scope.$on("kia.nav.show.submenu",function(event,type,id,option){scope.searchON&&scope.closeSearch();if(scope.mobile){scope.expand=!0;return!1}if(id===scope.currentSubmenuId)return!1;currentPrimaryOption=option;$timeout(function(){element.find(".header-subcontent").height(element.find("[data-id="+id+"]").height());element.find(".vehicle-menu-selector").addClass("overflowable")},50);scope.expand=!0;scope.currentSubmenuId=id;scope.submenuOpen=!0;"0"===scope.currentSubmenuId&&$timeout(function(){scope.$broadcast("kia.nav.update.scroll")},10)});scope.$on("kia.nav.show.mobile.submenu",function(event,type,id,option,linkTitle){var subMenuItem=option.find(".nav-sub-tree"),submenuItems=$(".nav-sub-tree");if(option.hasClass("close")){subMenuItem.slideUp();option.removeClass("close")}else{option.siblings(".close").removeClass("close");submenuItems.slideUp();option.addClass("close");subMenuItem.slideDown()}});scope.closeSubmenu=function(){if(!scope.searchON){element.find(".vehicles-link").removeClass("mobile-selected");if(scope.mobile)return!1;if(scope.submenuOpen){scope.expand=!1;scope.submenuOpen=!1;scope.currentSubmenuId=""}element.find(".vehicle-menu-selector").removeClass("overflowable");element.find(".header-subcontent").css("height","0px")}};scope.switchTheme=function(theme){""!==currentTheme?element.removeClass(currentTheme).addClass(theme):element.addClass(theme);currentTheme=theme};scope.$on(kiaEvents.RESPONSIVE.MATCH680,function(event){scope.mobile=!0;element.find(".header-subcontent").addClass("fix-height");scope.closeSubmenu();scope.$broadcast("nav.update.mobile",!0)});scope.$on(kiaEvents.RESPONSIVE.UNMATCH680,function(){scope.mobile=!1;scope.$broadcast("nav.update.mobile",!1);if(scope.submenuOpen){scope.expand=!1;element.find(".vehicles-link").removeClass("mobile-selected");scope.submenuOpen=!1;scope.currentSubmenuId="";element.find(".vehicle-menu-selector").removeClass("overflowable");scope.apply()}element.find(".search-container").removeClass("fix-height")});$(".main-wrapper").on("click",function(){if(scope.searchON){scope.closeSearch();scope.$apply()}if(scope.submenuOpen){scope.expand=!1;element.find(".vehicles-link").removeClass("mobile-selected");scope.submenuOpen=!1;scope.currentSubmenuId=""}});$("header").on("click",function(event){event.stopPropagation()})}}}]);angular.module("app").directive("linkable",["$log","kiaEvents","$window","lightboxService","$rootScope",function($log,kiaEvents,$window,$lightboxService,$rootScope){return{restrict:"A",replace:!0,scope:{link:"@"},link:function(scope,element,attrs){scope.golink=function(external,newTab){newTab?$window.open(scope.link,"_blank"):$window.location=scope.link};scope.parentCategory=function(){scope.$emit("kia.nav.expandMobileMenu");window.scrollTo(0,0);setTimeout(function(){$rootScope.$broadcast("kia.content.templates.show.sidebar");$lightboxService.close("navigation-menu-lightbox")},750)}}}}]);angular.module("app").directive("primaryOption",["$log","$window","kiaEvents","localize",function($log,$window,kiaEvents,localize){return{restrict:"A",replace:!0,priority:0,scope:{type:"@",submenuId:"@",link:"@",linkTitle:"@",mobile:"=",selectedSubMenu:"@"},link:function(scope,element,attrs){scope.$on("nav.update.mobile",function(event,value){scope.mobile=value});scope.$on("localizeResourcesUpdates",function(){scope.offers=localize.getLocalizedString("label.navSecondary.shopping.offers");scope.dealers=localize.getLocalizedString("label.general.dealerInventory.title");scope.research=localize.getLocalizedString("label.general.research.title");scope.shop=localize.getLocalizedString("label.general.shop.title");scope.finance=localize.getLocalizedString("label.general.finance.title");scope.whykia=localize.getLocalizedString("label.general.whykia.title");scope.technology=localize.getLocalizedString("label.general.technology.title");scope.vehicles=localize.getLocalizedString("label.general.vehicles.title")});scope.showSubmenu=function($event,isVehicleNav){var subMenuLength=$($event.currentTarget).find("ul").length;if(subMenuLength>0){if(scope.mobile){$event.preventDefault();return}scope.$emit("kia.sm.nav.toggleSubMenu",scope.type,scope.submenuId,element,scope.linkTitle)}else scope.$emit("kia.nav.hide.submenu")};scope.isSubMenuVisible=function(subMenuId){return scope.submenuId===scope.selectedSubMenu};scope.markOption=function($event,isVehicleNav){""===$.trim($(".header-subcontent > div[submenu-id="+scope.submenuId+"]").html())?$window.location=scope.link:Modernizr&&Modernizr.touch?element.addClass("mobile-selected"):scope.golink()};scope.hideSubmenu=function(){};scope.golink=function(){!scope.mobile||scope.linkTitle.toLowerCase()!==scope.shop.toLowerCase()&&scope.linkTitle.toLowerCase()!==scope.research.toLowerCase()&&scope.linkTitle.toLowerCase()!==scope.finance.toLowerCase()&&scope.linkTitle.toLowerCase()!==scope.whykia.toLowerCase()&&scope.linkTitle.toLowerCase()!==scope.vehicles.toLowerCase()&&scope.linkTitle.toLowerCase()!==scope.technology.toLowerCase()?$window.location=scope.link:scope.$emit("kia.nav.show.mobile.submenu",scope.type,scope.submenuId,element,scope.linkTitle)}}}}]);angular.module("app").directive("primarySubmenu",["$log","kiaEvents","$location",function($log,kiaEvents,$location){return{restrict:"A",replace:!0,priority:0,scope:{primarySubmenu:"=",cars:"=",submenuId:"@"},link:function(scope,element,attrs){scope.id=scope.submenuId;var items=element.find("nav").length,percent=100/items+"%";element.find("nav").addClass("child-enabled");element.find("nav").css("width",percent)}}}]);angular.module("app").directive("vehicleNavigation",["$log","kiaEvents","$location","$timeout","navigationModel",function($log,kiaEvents,$location,$timeout,navigationModel){return{restrict:"A",replace:!0,link:function(scope,element,attrs){scope.$on("kia.nav.update.scroll",function(evt){});scope.initScroll=function(){var scrollWidth=230*navigationModel.getCarsLength()+52*navigationModel.getCategoriesLength();element.find(".vehicle-slider").width(scrollWidth)}}}}]);angular.module("app").directive("carIterator",["kiaEvents",function(kiaEvents){return{restrict:"A",link:function(scope,element,attrs){scope.$last&&scope.initScroll()}}}]);angular.module("app").directive("shopNavDirective",["kiaEvents","$rootScope","$window","safeApply",function(kiaEvents,$rootScope,$window,safeApply){return{restrict:"A",link:function(scope,elm,attr){function closeShopMenu($event,clickEvent){if(!$window.Modernizr.mq("only screen and (max-width: 767px)")){var inShopNavMenu=0!==$(clickEvent.target).closest(".shop-navigation-menu").length,inShopButton=0!==$(clickEvent.target).closest(".shop-button").length;inShopNavMenu||inShopButton||safeApply(scope,function(){scope.showShopMenu=!1;toggleScroll()})}}function resetShopMenu(){scope.showShopMenu=!1;$("body").removeClass("hide-scroll-bar");$rootScope.$broadcast(kiaEvents.GLOBAL.TOGGLE_BODY_SCROLL,scope.showShopMenu)}function toggleScroll(){if($window.Modernizr.mq("only screen and (max-width: 767px)")){$("body").toggleClass("hide-scroll-bar");$rootScope.$broadcast(kiaEvents.GLOBAL.TOGGLE_BODY_SCROLL,scope.showShopMenu)}}scope.showShopMenu=!1;var isMobileHeader=!1;scope.toggleShopMenu=function(event){safeApply(scope,function(){scope.showShopMenu=!scope.showShopMenu});toggleScroll()};$("body").click(function(event){$rootScope.$emit(kiaEvents.GLOBAL.BODY_CLICKED,event)});$("header").click(function(event){$rootScope.$emit(kiaEvents.GLOBAL.BODY_CLICKED,event)});scope.$on(kiaEvents.SHOP.TOGGLE_MOBILE_SHOP_MENU,function(event){scope.toggleShopMenu(event)});angular.element(document).ready(function(){isMobileHeader=$("#mobile-header").is(":visible")});$rootScope.$on(kiaEvents.GLOBAL.BODY_CLICKED,closeShopMenu);scope.$on(kiaEvents.GLOBAL.CLOSE_SHOP_NAVIGATION,resetShopMenu);scope.$on(kiaEvents.RESPONSIVE.UNMATCH700,resetShopMenu);scope.$on(kiaEvents.RESPONSIVE.MATCH700,resetShopMenu)}}}]);angular.module("app").directive("shopHelper",["kiaEvents","$rootScope",function(kiaEvents,$rootScope){return{restrict:"A",scope:{modelName:"@",modelYear:"@"},link:function(scope,elm,attr){scope.modelName&&scope.modelYear&&$rootScope.$broadcast(kiaEvents.SHOP.ENABLE_SLIDER_SHOP_HEADER,{modelName:scope.modelName,modelYear:scope.modelYear})}}}]);angular.module("app").directive("activeLinksDirective",["$rootScope","$location",function($rootScope,$location){return{restrict:"A",link:function(scope,elm,attr){scope.isActiveLink=function(link){var locationUrl=$location.absUrl();return locationUrl.indexOf(link)>-1}}}}]);angular.module("app").directive("langClass",["$log","safeApply",function($log,safeApply){return{restrict:"A",replace:!0,link:function(scope,element,attrs){element.addClass("lang-"+window.lang)}}}]);angular.module("app").factory("navigationModel",["$log","$window",function($log,$window){var cars,update,getData,categoriesLength,getCategoriesLength,getCarsLength;update=function(data){cars=[];categoriesLength=data.length;for(var i=0;categoriesLength>i;i++)for(var c=data[i].cars.length,j=0;c>j;j++){var loopCar=data[i].cars[j];loopCar.tail=!1;loopCar.series=loopCar.series?loopCar.series:"No Data";loopCar.thumb=$window.contentURI+loopCar.thumb;0===j&&(loopCar.categoryTitle=data[i].title);j===c-1&&(loopCar.tail=!0);cars.push(loopCar)}};getData=function(){return cars};getCategoriesLength=function(){return categoriesLength};getCarsLength=function(){return cars.length};return{update:update,getData:getData,getCategoriesLength:getCategoriesLength,getCarsLength:getCarsLength}}]);!function(window,angular,undefined){"use strict";angular.module("ngCookies",["ng"]).factory("$$kiaCookieWriter",["$browser","$document","$log",function($browser,$document,$log){function buildCookieString(name,value,options){var path,expires;options=options||{};expires=options.expires;path=angular.isDefined(options.path)?options.path:cookiePath;if(angular.isUndefined(value)){expires="Thu, 01 Jan 1970 00:00:00 GMT";value=""}angular.isString(expires)&&(expires=new Date(expires));var str=encodeURIComponent(name)+"="+encodeURIComponent(value);str+=path?";path="+path:"";str+=options.domain?";domain="+options.domain:"";str+=expires?";expires="+expires.toUTCString():"";str+=options.secure?";secure":"";var cookieLength=str.length+1;cookieLength>4096&&$log.warn("Cookie '"+name+"' possibly not set or overflowed because it was too large ("+cookieLength+" > 4096 bytes)!");return str}var cookiePath=$browser.baseHref(),rawDocument=$document[0];return function(name,value,options){rawDocument.cookie=buildCookieString(name,value,options)}}]).factory("$$kiaCookieReader",["$browser","$document","$log",function($browser,$document,$log){function safeGetCookie(rawDocument){try{return rawDocument.cookie||""}catch(e){return""}}function safeDecodeURIComponent(str){try{return decodeURIComponent(str)}catch(e){return str}}var rawDocument=$document[0]||{},lastCookies={},lastCookieString="",isUndefined=angular.isUndefined;return function(){var cookieArray,cookie,i,index,name,currentCookieString=safeGetCookie(rawDocument);if(currentCookieString!==lastCookieString){lastCookieString=currentCookieString;cookieArray=lastCookieString.split("; ");lastCookies={};for(i=0;i<cookieArray.length;i++){cookie=cookieArray[i];index=cookie.indexOf("=");if(index>0){name=safeDecodeURIComponent(cookie.substring(0,index));isUndefined(lastCookies[name])&&(lastCookies[name]=safeDecodeURIComponent(cookie.substring(index+1)))}}}return lastCookies}}]).factory("$cookieStore",["$$kiaCookieReader","$$kiaCookieWriter",function($$kiaCookieReader,$$cookieWriter){function calcOptions(options){return options?angular.extend({},defaults,options):defaults}var defaults=this.defaults={};return{get:function(key){return $$kiaCookieReader()[key]},put:function(key,value,options){$$cookieWriter(key,value,calcOptions(options))},remove:function(key){$$cookieWriter(key,undefined,calcOptions(options))}}}])}(window,window.angular);angular.module("app").factory("cookieService",["$log","$rootScope","$cookieStore",function($log,$rootScope,$cookieStore){return{cookie:function(name,value,options){var cookie,opts;opts=options||{};if(void 0!==value){if(opts.expires&&"number"==typeof opts.expires){var days=options.expires,t=options.expires=new Date;t.setDate(t.getDate()+days)}cookie=$cookieStore.put(name,value,opts)}else cookie=$cookieStore.get(name);return cookie},removeCookie:function(name,options){return $cookieStore.remove(name)}}}]);angular.module("app").factory("zipCodeCookie",["$log","$rootScope","cookieService","kiaEvents",function($log,$rootScope,cookieService,kiaEvents){return{set:function(value){cookieService.cookie("user-zipcode",value,{expires:3650,path:"/us/",domain:""});$rootScope.$emit(kiaEvents.ANALYTICS.ZIPCODE_VALID,value)},get:function(){return cookieService.cookie("user-zipcode")}}}]);angular.module("app").factory("JDPowerService",["$log","$http",function($log,$http){var url,getURL,pixel,timestamp,devPx=240,prodPx=251;pixel="dev"===window.staticEnvironment?devPx:prodPx;
getURL=function(page,model){$http.defaults.useXDomain=!0;timestamp=Date.now();url="http://a02.korrelate.net/a/e/d2a.ads?et=a&ago=332&ao=334&px="+pixel+"&r="+timestamp+"&lvl="+model+"&av1="+page;return url};return{getURL:getURL}}]);!function($){"use strict";$(function(){$.support.transition=function(){var transitionEnd=function(){var name,el=document.createElement("bootstrap"),transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(name in transEndEventNames)if(void 0!==el.style[name])return transEndEventNames[name];return!1}();return transitionEnd&&{end:transitionEnd}}()})}(window.jQuery);!function($){"use strict";var Carousel=function(element,options){this.$element=$(element);this.$indicators=this.$element.find(".carousel-indicators");this.options=options;"hover"==this.options.pause&&this.$element.on("mouseenter",$.proxy(this.pause,this)).on("mouseleave",$.proxy(this.cycle,this))};Carousel.prototype={cycle:function(e){e||(this.paused=!1);this.interval&&clearInterval(this.interval);this.options.interval&&!this.paused&&(this.interval=setInterval($.proxy(this.next,this),this.options.interval));return this},getActiveIndex:function(){this.$active=this.$element.find(".item.active");this.$items=this.$active.parent().children();return this.$items.index(this.$active)},to:function(pos){var activeIndex=this.getActiveIndex(),that=this;if(!(pos>this.$items.length-1||0>pos)){if(this.options.showTransitionItems&&1!=Math.abs(pos-activeIndex)&&pos-activeIndex!=0&&$.support.transition){this.looping.inLoop=!0;this.looping.toPos=pos;return this.loopTo()}return this.sliding?this.$element.one("slid",function(){that.to(pos)}):activeIndex==pos?this.pause().cycle():this.slide(pos>activeIndex?"next":"prev",$(this.$items[pos]))}},looping:{inLoop:!1,toPos:-1},resetLooping:function(){this.looping.inLoop=!1;this.looping.toPos=-1;return this},loopTo:function(){var pos,activeIndex=this.getActiveIndex();if(this.looping.inLoop){if(this.looping.toPos==activeIndex)return this.resetLooping();pos=this.looping.toPos>activeIndex?activeIndex+1:activeIndex-1;pos==this.looping.toPos&&this.resetLooping();return this.to(pos)}},pause:function(e){e||(this.paused=!0);if(this.$element.find(".next, .prev").length&&$.support.transition.end){this.$element.trigger($.support.transition.end);this.cycle(!0)}clearInterval(this.interval);this.interval=null;return this},next:function(){return this.sliding?void 0:this.slide("next")},prev:function(){return this.sliding?void 0:this.slide("prev")},slide:function(type,next){var e,$active=this.$element.find(".item.active"),$next=next||$active[type](),isCycling=this.interval,direction="next"==type?"left":"right",fallback="next"==type?"first":"last",that=this;if(this.options.circular||$next.length){this.sliding=!0;isCycling&&this.pause();$next=$next.length?$next:this.$element.find(".item")[fallback]();e=$.Event("slide",{relatedTarget:$next[0],direction:direction});if(!$next.hasClass("active")){if(this.$indicators.length){this.$indicators.find(".active").removeClass("active");this.$element.one("slid",function(){var $nextIndicator=$(that.$indicators.children()[that.getActiveIndex()]);$nextIndicator&&$nextIndicator.addClass("active")})}if($.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(e);if(e.isDefaultPrevented())return;$next.addClass(type);$next[0].offsetWidth;$active.addClass(direction);$next.addClass(direction);this.$element.one($.support.transition.end,function(){$next.removeClass([type,direction].join(" ")).addClass("active");$active.removeClass(["active",direction].join(" "));that.sliding=!1;if(that.options.showTransitionItems&&that.looping.inLoop)return setTimeout(function(){that.loopTo()},10);setTimeout(function(){that.$element.trigger("slid")},0)})}else{var that=this;this.$element.trigger(e);if(e.isDefaultPrevented())return;$active.removeClass("active");$next.addClass("active");this.sliding=!1;setTimeout(function(){that.$element.trigger("slid")},10)}isCycling&&this.cycle();return this}}}};var old=$.fn.carousel;$.fn.carousel=function(option){return this.each(function(){var $this=$(this),data=$this.data("carousel"),options=$.extend({},$.fn.carousel.defaults,"object"==typeof option&&option),action="string"==typeof option?option:options.slide;data||$this.data("carousel",data=new Carousel(this,options));"number"==typeof option?data.to(option):action?data[action]():options.interval&&data.pause().cycle()})};$.fn.carousel.defaults={interval:5e3,pause:"hover",circular:!1,showTransitionItems:!1};$.fn.carousel.Constructor=Carousel;$.fn.carousel.noConflict=function(){$.fn.carousel=old;return this};$(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(e){var href,slideIndex,$this=$(this),$target=$($this.attr("data-target")||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"")),options=$.extend({},$target.data(),$this.data());$target.carousel(options);(slideIndex=$this.attr("data-slide-to"))&&$target.data("carousel").pause().to(slideIndex).cycle();e.preventDefault()})}(window.jQuery);angular.module("app").filter("seriesName",function(){return function(value){value=value.toLowerCase();value=value.replace(/\s/g,"-");return value}});angular.module("app").directive("homepage",["$log","$rootScope","kiaEvents","safeApply","disclaimersModel",function($log,$rootScope,kiaEvents,safeApply,disclaimersModel){var link;link=function(scope,element,attrs,controller){var timer,$homeCarousel,$carouselItems,$indicators,$promoContainer,$dockItems,$squares,$vExploreLink,$vQuoteBtn,$vQuoteLink,$vBuildBtn,$vBuildLink,$carouselNav,$btnBordered,breakPoint,i,Layout={},VehicleCarousel={},prevScreenWidth=0,prevScreenHeight=0,stopCarouselCycle=!1,userClicked=!1,layoutSwitchRatio=1;Layout.breakPoints=[{widthProperty:"min-width",width:"1020px",layout:"large"}];Layout.pageLayout="mobile";Layout.screenLayout=function(){var len=Layout.breakPoints.length;if(Modernizr.mq("only all"))for(i=0;len>i;i++){breakPoint=Layout.breakPoints[i];if(Modernizr.mq("("+breakPoint.widthProperty+": "+breakPoint.width+")")){Layout.pageLayout=breakPoint.layout;break}}else for(i=0;len>i;i++){breakPoint=Layout.breakPoints[i];var test;test="min-width"===breakPoint.widthProperty?$(window).width()>=parseInt(breakPoint.width,8):$(window).width()<=parseInt(breakPoint.width,8);if(test){Layout.pageLayout=breakPoint.layout;break}}};Layout.updateSquare=function(){$squares=$(".square",element);$squares.not(".dock-item-wrap").each(function(){$(this).height($(this).outerWidth(!0))});$squares.filter(".dock-item-wrap").each(function(){$(this).height($(this).outerWidth(!0))})};Layout.setContentHeight=function(){window.setTimeout(function(){$carouselItems.css("height","");var $items=$carouselItems.not(".active");$items.addClass("next");var maxHt=0;$carouselItems.each(function(){var $item=$(this),ht=$item.outerHeight(!1);maxHt=Math.max(maxHt,ht)});$carouselItems.css("height",maxHt+"px");$items.removeClass("next")},0)};Layout.redockPromos=function(){if("large"===Layout.pageLayout){$promoContainer=$(".promos",element);$dockItems=$promoContainer.find(".dock-item");var $btmPromos=($dockItems.filter(".dock-right-tl, .dock-right-tr"),$dockItems.filter(".dock-right-bl, .dock-right-br, .dock-left-bl"));$dockItems.css("top","");if($(element).hasClass("layout-large")){var top=70,promoHt=$($dockItems.get(0)).width();top+=promoHt;$btmPromos.css("top",top+"px")}}};var windowResize=function(){if($(window).width()!==prevScreenWidth||$(window).height()!==prevScreenHeight){prevScreenWidth=$(window).width();prevScreenHeight=$(window).height();$promoContainer=$(".promos",element);$dockItems=$promoContainer.find(".dock-item");var $btmPromos=($dockItems.filter(".dock-right-tl, .dock-right-tr"),$dockItems.filter(".dock-right-bl, .dock-right-br, .dock-left-bl"));$btmPromos.css("top","");$carouselItems.css("height","");Layout.screenLayout();Layout.updateSquare();"large"!==Layout.pageLayout&&$(element).removeClass("layout-medium layout-large");switch(Layout.pageLayout){case"large":var layoutType="layout-large",ratio=$(window).height()/$(window).width();if(ratio>layoutSwitchRatio){layoutType="layout-medium";Layout.pageLayout="medium"}if(!$(element).hasClass(layoutType)){$(element).removeClass("layout-medium layout-large");$(element).addClass(layoutType);Layout.updateSquare()}if("layout-large"===layoutType){VehicleCarousel.loadThumbnails();Layout.redockPromos();window.setTimeout(function(){var $li=$indicators.filter(":last"),leftPos=$li.position().left+$li.outerWidth(!0)+30;$btnBordered.css("left",leftPos+"px");$btnBordered[0].offsetHeight},200)}break;case"medium":break;case"small":break;case"mobile":}$homeCarousel.find(".background").css("height",$homeCarousel.css("height"))}};VehicleCarousel.loadThumbnails=function(){if(!$carouselNav.hasClass("loaded")){$carouselNav.find("img").each(function(){this.src=$(this).data("src")});$carouselNav.addClass("loaded")}};VehicleCarousel.loadAssets=function($item){if($item&&$item.length>0&&!$item.hasClass("loaded")){var img,$hero=$item.find(".img-hero");$item.addClass("loaded");if($hero.length>0){var tempImg=new Image;img=$hero[0];img.src=$hero.data("src");tempImg.src=$hero.data("src");$hero.removeClass("delay-loading")}}};VehicleCarousel.preloadAssets=function($item){var loadItems=[],$nextItem=$item.next(),$prevItem=$item.prev();$nextItem&&!$nextItem.hasClass("loaded")&&loadItems.push($nextItem);$prevItem&&!$prevItem.hasClass("loaded")&&loadItems.push($prevItem);for(var len=loadItems.length,i=0;len>i;i++)VehicleCarousel.loadAssets(loadItems[i])};VehicleCarousel.afterTransition=function(updateUrl){VehicleCarousel.$activeVehicle=$carouselItems.filter(".active");VehicleCarousel.preloadAssets(VehicleCarousel.$activeVehicle);VehicleCarousel.updateIndicators();$vExploreLink.attr("href",VehicleCarousel.$activeVehicle.find(".link-explore").attr("href"));scope.quoteExists=!1;scope.bnpExists=!1;$vQuoteBtn=VehicleCarousel.$activeVehicle.find(".link-quote");$vBuildBtn=VehicleCarousel.$activeVehicle.find(".link-build");if($vQuoteBtn.length){scope.quoteExists=!0;$vQuoteLink.attr("href",$vQuoteBtn.attr("href"))}if($vBuildBtn.length){scope.bnpExists=!0;$vBuildLink.attr("href",$vBuildBtn.attr("href"))}safeApply(scope,function(){scope.updateLocationUrl(VehicleCarousel.$activeVehicle.data("series"),VehicleCarousel.$activeVehicle.data("year"),userClicked);userClicked=!1})};VehicleCarousel.updateIndicators=function(){VehicleCarousel.$activeVehicle=$carouselItems.filter(".active");if($carouselItems.length&&VehicleCarousel.$activeVehicle.length){var index=$carouselItems.index(VehicleCarousel.$activeVehicle);if(index>-1&&index<$carouselItems.length){$indicators.filter(".active").removeClass("active");$($indicators[index]).addClass("active")}}};VehicleCarousel.updatePalette=function($activeItem){if($activeItem&&$activeItem.length){var palette=$activeItem.data("palette");if(palette&&"undefined"!=typeof palette){var initBack=$homeCarousel.find(".background:not(."+palette+")");if(initBack.length>0){initBack.css("opacity",0);$('<div class="'+palette+' background"></div>').insertAfter(initBack).css("height",$homeCarousel.css("height"));initBack.remove()}}}};VehicleCarousel.setActiveVehicle=function(id){VehicleCarousel.$activeVehicle=$carouselItems.filter("#"+id);VehicleCarousel.$activeVehicle.length||(VehicleCarousel.$activeVehicle=$($carouselItems.get(0)));if(VehicleCarousel.$activeVehicle){VehicleCarousel.$activeVehicle.hasClass("loaded")||VehicleCarousel.loadAssets(VehicleCarousel.$activeVehicle);var index=$carouselItems.index(VehicleCarousel.$activeVehicle);$indicators[index]&&$($indicators[index]).find("a").click()}};VehicleCarousel.getVehicleObject=function($nextCar){var vehicle={};if("undefined"==typeof $nextCar){$nextCar=$carouselItems.filter(".active");vehicle.toCar={series:$nextCar.data("series"),year:$nextCar.data("year"),palette:$nextCar.data("palette"),car:$nextCar}}else{var $prevCar=$carouselItems.filter(".active");vehicle.fromCar={series:$prevCar.data("series"),year:$prevCar.data("year"),palette:$prevCar.data("palette"),car:$prevCar};vehicle.direction="left";$nextCar.hasClass("right")&&(vehicle.direction="right");vehicle.toCar={series:$nextCar.data("series"),year:$nextCar.data("year"),palette:$nextCar.data("palette"),car:$nextCar}}return vehicle};VehicleCarousel.init=function(){$homeCarousel.carousel({interval:1e4,circular:!0,pause:"none"});$homeCarousel.on("slid",function(evt){var vehicle=VehicleCarousel.getVehicleObject();scope.$emit(kiaEvents.HOMEPAGE.CAR_CHANGE_END,vehicle);VehicleCarousel.afterTransition()});$homeCarousel.on("slide",function(evt){var $nextVehicle=$(evt.relatedTarget);$nextVehicle.hasClass("loaded")||VehicleCarousel.loadAssets($nextVehicle);window.setTimeout(function(){var vehicle=VehicleCarousel.getVehicleObject($nextVehicle);scope.$emit(kiaEvents.HOMEPAGE.CAR_CHANGE_START,vehicle)},10)});$homeCarousel.on("click",function(evt){window.event?evt.which:evt.keyCode;userClicked=!0;stopCarouselCycle=!0;$homeCarousel.carousel("pause")});$indicators.on("click","a",function(evt){if("undefined"==typeof evt.isTrigger){userClicked=!0;window.setTimeout(function(){stopCarouselCycle=!0;$homeCarousel.carousel("pause")},500)}});var activeId=scope.activeCar.series+"-"+scope.activeCar.year,defaultCarId=$carouselItems.filter(".active").attr("id");""===scope.activeCar.series?activeId=defaultCarId:userClicked=!0;VehicleCarousel.setActiveVehicle(activeId);if(activeId===defaultCarId){VehicleCarousel.afterTransition();window.setTimeout(function(){scope.$emit(kiaEvents.HOMEPAGE.CAR_CHANGE_START,VehicleCarousel.getVehicleObject($carouselItems.filter(".active")))},100);window.setTimeout(function(){scope.$emit(kiaEvents.HOMEPAGE.CAR_CHANGE_END)},300)}};var init=function(){$homeCarousel=$("#home-carousel",element);$carouselItems=$homeCarousel.find(".item");$carouselNav=$(".carousel-indicators",element);$indicators=$carouselNav.find("li");$btnBordered=$(".carousel-navigation .btn-bordered",element);$promoContainer=$(".promos",element);$dockItems=$promoContainer.find(".dock-item");$squares=$(".square",element);$vExploreLink=$("#link-explore-vehicle",element);$vQuoteLink=$("#link-quote-vehicle",element);$vBuildLink=$("#link-build-vehicle",element);$carouselItems.find(".img-hero").responsiveImage({cssDomObject:element,defaultImageVersion:"data-img-1280",delayLoadingAttribute:"data-src"});$(window).bind("resize.homepageDirective",function(){timer&&window.clearTimeout(timer);timer=window.setTimeout(function(){windowResize()},500)}).resize();Modernizr.touch||$(element).on("mouseenter mouseleave",".dock-item",function(evt){if("mouseenter"===evt.type){stopCarouselCycle||$homeCarousel.carousel("pause");scope.$emit(kiaEvents.HOMEPAGE.ANIMATION_STOP)}else{stopCarouselCycle||$homeCarousel.carousel("cycle");scope.$emit(kiaEvents.HOMEPAGE.ANIMATION_RESUME)}});scope.$on(kiaEvents.HOMEPAGE.CAR_CHANGE_START,function(evt,vehicle){VehicleCarousel.updatePalette(vehicle.toCar.car)});scope.$on(kiaEvents.HOMEPAGE.SWIPE,function(evt,carouselInfo){userClicked=!0;stopCarouselCycle=!0;$homeCarousel.carousel("pause");$homeCarousel.carousel(carouselInfo.step)});scope.$on(kiaEvents.HOMEPAGE.PROMO_CHANGE_END,function(){window.setTimeout(function(){Layout.redockPromos()},200)});scope.$on(kiaEvents.HOMEPAGE.PROMO_LOADED,function(){window.setTimeout(function(){Layout.updateSquare();Layout.redockPromos()},200)});scope.$on("$routeChangeStart",function(next,current){$(window).off("resize.homepageDirective")});window.setTimeout(function(){VehicleCarousel.init()},600);disclaimersModel.setGlobal("disclaimer-home")};init()};return{link:link,restrict:"EA"}}]);angular.module("localization",[]).factory("localize",["$http","$rootScope","$filter",function($http,$rootScope,$filter){var localize={language:window.lang,dictionary:[],resourceFileLoaded:!1,successCallback:function(data){localize.dictionary=data.resources||{};localize.resourceFileLoaded=!0;$rootScope.$broadcast("localizeResourcesUpdates")},setLanguage:function(value){localize.language=value;localize.initLocalizedResources()},initLocalizedResources:function(type){type=type||"label";var url=window.baseURI+"/data/resources";$http({method:"GET",url:url,cache:!1}).success(localize.successCallback).error(function(){var url=window.baseURI+"/data/resources";$http({method:"GET",url:url,cache:!1}).success(localize.successCallback)})},getLocalizedString:function(value){var result=window.DEBUG?"[[missing i18n ("+value+")]]":"";value in localize.dictionary&&(result=localize.dictionary[value]);return result}};localize.initLocalizedResources();return localize}]).filter("i18n",["localize",function(localize){return function(input){return localize.getLocalizedString(input)}}]).directive("i18n",["localize",function(localize){var i18nDirective={restrict:"EAC",updateText:function(elm,token){var values=token.split("|");if(values.length>=1){var tag=localize.getLocalizedString(values[0]);if(null!==tag&&void 0!==tag&&""!==tag){if(values.length>1)for(var index=1;index<values.length;index++){var target="{"+(index-1)+"}";tag=tag.replace(target,values[index])}elm.text(tag)}}},link:function(scope,elm,attrs){scope.$on("localizeResourcesUpdates",function(){i18nDirective.updateText(elm,attrs.i18n)});attrs.$observe("i18n",function(value){i18nDirective.updateText(elm,attrs.i18n)})}};return i18nDirective}]).directive("i18nAttr",["localize",function(localize){var i18NAttrDirective={restrict:"EAC",updateText:function(elm,token){var values=token.split("|"),tag=localize.getLocalizedString(values[0]);if(null!==tag&&void 0!==tag&&""!==tag){if(values.length>2)for(var index=2;index<values.length;index++){var target="{"+(index-2)+"}";tag=tag.replace(target,values[index])}elm.attr(values[1],tag)}},link:function(scope,elm,attrs){scope.$on("localizeResourcesUpdated",function(){i18NAttrDirective.updateText(elm,attrs.i18nAttr)});attrs.$observe("i18nAttr",function(value){i18NAttrDirective.updateText(elm,value)})}};return i18NAttrDirective}]);angular.module("app").service("getHtmlContent",["$http","$log",function($http,$log){return{get:function(url){return $http.get(window.staticURI+"/views/directives/"+url).then(function(response){return response.data.error?void 0:response.data})}}}]);angular.module("app").directive("disclaimers",["$log","safeApply","disclaimersModel",function($log,safeApply,disclaimersModel){return{restrict:"A",replace:!0,templateUrl:window.staticURI+"/views/directives/disclaimers.html",controller:function($scope){$scope.disclaimersData=disclaimersModel.data;$scope.getURI=function(id){return disclaimersModel.getURI(id)}},link:function(scope,element,attrs){}}}]);angular.module("app").directive("globalDisclaimersLink",["$log","safeApply","disclaimersModel",function($log,safeApply,disclaimersModel){return{restrict:"A",replace:!1,scope:{disclaimersTitle:"@"},controller:function($scope){$scope.global=disclaimersModel.global},link:function(scope,element,attrs){scope.$on("$routeChangeStart",function(next,current){disclaimersModel.close();disclaimersModel.global.active=!1});element.on("click",function(e){safeApply(scope,function(){var sTitle=scope.disclaimersTitle;scope.global.title&&(sTitle=scope.global.title);disclaimersModel.open(scope.global.content,scope.global.reference,sTitle)})})}}}]);angular.module("app").directive("globalDisclaimersContent",["$log","safeApply","disclaimersModel",function($log,safeApply,disclaimersModel){return{restrict:"A",replace:!1,scope:{disclaimersText:"@",disclaimersId:"@",disclaimersTitle:"@",disclaimersContent:"@"},controller:function($scope){},link:function(scope,element,attrs){element.hide();void 0!==scope.disclaimersId?disclaimersModel.setGlobal(scope.disclaimersId,!0,scope.disclaimersTitle):void 0!==scope.disclaimersText?disclaimersModel.setGlobal(scope.disclaimersText,!1,scope.disclaimersTitle):void 0!==scope.disclaimersContent&&element.find(".disclaimers-content").length>0&&disclaimersModel.setGlobal(element.find(".disclaimers-content").html(),!1,scope.disclaimersTitle)}}}]);angular.module("app").directive("disclaimersLink",["$log","safeApply","disclaimersModel",function($log,safeApply,disclaimersModel){return{restrict:"A",replace:!1,scope:{disclaimersText:"@",disclaimersId:"@",disclaimersTitle:"@",disclaimersContent:"@"},controller:function($scope){},link:function(scope,element,attrs){null!==scope.disclaimersText&&void 0!==scope.disclaimersText&&""!==scope.disclaimersText||null!==scope.disclaimersId&&void 0!==scope.disclaimersId&&""!==scope.disclaimersId||null!==scope.disclaimersContent&&void 0!==scope.disclaimersContent&&""!==scope.disclaimersContent||element.hide();element.on("click",function(e){safeApply(scope,function(){void 0!==scope.disclaimersId?disclaimersModel.open(scope.disclaimersId,!0,scope.disclaimersTitle):void 0!==scope.disclaimersText?disclaimersModel.open(scope.disclaimersText,!1,scope.disclaimersTitle):void 0!==scope.disclaimersContent&&element.find(".disclaimers-content").length>0&&disclaimersModel.open(element.find(".disclaimers-content").html(),!1,scope.disclaimersTitle)})})}}}]);angular.module("app").factory("disclaimersModel",["$log","$http","messageService","localize","$sce",function($log,$http,messageService,localize,$sce){var data={open:!1,content:"",title:"",reference:!1},global={active:!1,content:"",reference:!1,title:""},open=function(content,reference,title){if(""!==content&&null!==content&&(data.open===!1||data.content!==content)){data.reference=reference;reference?data.content=content:data.content=$sce.trustAsHtml(content);void 0!==title?data.title=$sce.trustAsHtml(title):data.title=localize.getLocalizedString("label.build.summary.disclaimers");data.open=!0}},close=function(){data.open=!1},getURI=function(id){return""===id||null===id?"":window.baseURI+"/modules/disclaimers/"+id},testGlobal=function(url,success,failure){return $http.get(url,{}).success(function(data,getResponseHeaders){return angular.isFunction(success)?success(data):void 0}).error(failure)},hideGlobal=function(){global.active=!1},checkGlobal=function(data){var bActive=!1;if(data.length>0){var sData=data.replace(/(\r\n|\n|\r)/gm,"");sData=data.replace(/\s/gm,"");bActive=""!==sData}global.active=bActive},setGlobal=function(content,reference,title){void 0===reference&&(reference=!0);if(null!==content&&""!==content){global.reference=reference;var sContent=global.content;global.content=content;global.title=title;if(global.reference){var bUpdate=sContent!==content;if(bUpdate){global.active=!1;testGlobal(getURI(global.content),checkGlobal,hideGlobal)}}else global.active=!0}else global.active=!1};return{data:data,open:open,close:close,global:global,setGlobal:setGlobal,getURI:getURI}}]);angular.module("app").directive("noDrag",["$log",function($log){return{restrict:"AC",controller:function($scope){},link:function(scope,element,attrs){element.draggable=!1;element.on("dragstart",function(event){event.preventDefault();return!1})}}}]);angular.module("app").directive("homepagePromos",["$log","$rootScope","kiaEvents","safeApply","$timeout","homepagePromosService","$filter",function($log,$rootScope,kiaEvents,safeApply,$timeout,homepagePromosService,$filter){return{restrict:"EA",link:function(scope,element,attrs){var vehicleLen,$seriesPromos,$hiddenPromos,$currentPromos,homePromos={};scope.prevVehicle={};scope.currVehicle={};scope.vehiclePromos=null;scope.repeatComplete=!1;var setActivePromos=function(){if(scope.currVehicle.series){if(!$seriesPromos){$hiddenPromos=$("#hidden-promos",element);$seriesPromos=$(".series-promos",element)}if($seriesPromos.length>0){var id="promo-"+$filter("seriesName")(scope.currVehicle.series)+"-"+scope.currVehicle.year;if($currentPromos&&$currentPromos.attr("id")===id){$currentPromos.removeClass("active masked");return!0}var $temp=$seriesPromos.filter("#"+id).addClass("active").prependTo($(element));$currentPromos&&$currentPromos.removeClass("active masked").appendTo($hiddenPromos);$currentPromos=$temp}}};scope.setPromoSeriesId=function(series,year){var sPromoId="promo";series&&(sPromoId+="-"+$filter("seriesName")(series));year&&(sPromoId+="-"+year);return sPromoId};var success=function(data){scope.vehiclePromos=data;vehicleLen=scope.vehiclePromos.length;$timeout(function(){setActivePromos();scope.$emit(kiaEvents.HOMEPAGE.PROMO_LOADED)},1e3)},failure=function(data){};homePromos.fetchPromos=function(){return homepagePromosService.get(success,failure)};var init=function(){homePromos.fetchPromos()};scope.$on(kiaEvents.HOMEPAGE.CAR_CHANGE_START,function(event,vehicle){$currentPromos&&$currentPromos.addClass("masked");scope.prevVehicle.series=vehicle.fromCar.series;scope.prevVehicle.year=vehicle.fromCar.year;scope.currVehicle.series=vehicle.toCar.series;scope.currVehicle.year=vehicle.toCar.year});scope.$on(kiaEvents.HOMEPAGE.CAR_CHANGE_END,function(){setActivePromos()});init()}}}]);angular.module("app").directive("promoItem",["$log","$rootScope","kiaEvents","safeApply","$timeout",function($log,$rootScope,kiaEvents,safeApply,$timeout){return{restrict:"C",link:function(scope,element,attrs){$rootScope.$on(kiaEvents.HOMEPAGE.PROMO_LOADED,function(){$(element).find(".img-promo").responsiveImage({cssDomObject:element,defaultImageVersion:"data-img-1400"})})}}}]);angular.module("app").factory("homepagePromosService",["$log","$http",function($log,$http){var url,get;url=window.baseURI+"/data/home/promotions";get=function(success,failure){return $http.get(url,{}).success(function(data,getResponseHeaders){return angular.isFunction(success)?success(data):void 0}).error(failure)};return{get:get}}]);angular.module("app").controller("homepageController",["$log","$scope","$rootScope","$location","$routeParams","safeApply","cookieService","kiaEvents",function($log,$scope,$rootScope,$location,$routeParams,safeApply,cookieService,kiaEvents){var cookieName="homepage-activeCar";$rootScope.$broadcast("kia.nav.update.selected","-1");var targetInfo={"true":"_blank","false":""},promoType="";$scope.activeCar={series:"",year:""};var activeCarCookie=cookieService.cookie(cookieName);activeCarCookie&&($scope.activeCar=activeCarCookie);if($routeParams.series&&$routeParams.year){$scope.activeCar.series=$routeParams.series;$scope.activeCar.year=$routeParams.year}$scope.carouselGoto=function(step){$scope.$broadcast(kiaEvents.HOMEPAGE.SWIPE,{step:step})};$scope.getTabInfo=function(value){return targetInfo[value]};$scope.getType=function(type,image){promoType="video"===type?"video":""!==image?"img":"text";return promoType};$scope.isImage=function(image){var flag=!1;""!==image&&(flag=!0);return flag};$scope.updateLocationUrl=function(series,year,isUserClicked){$scope.activeCar.series=series;$scope.activeCar.year=year;$location.search($scope.activeCar);$location.replace();isUserClicked&&cookieService.cookie(cookieName,$scope.activeCar,{path:"/",domain:""});$rootScope.$$phase||$rootScope.$apply()}}]);angular.module("app").directive("announcementCarousel",["$log","$rootScope","kiaEvents","safeApply","$timeout",function($log,$rootScope,kiaEvents,safeApply,$timeout){return{restrict:"C",link:function(scope,element,attrs){var nInterval=5e3;if(attrs.interval)try{nInterval=1e3*parseFloat(attrs.interval)}catch(er){}$(element).carousel({interval:nInterval,circular:!0,pause:"hover"});scope.close=function(){element.hide();$(element).carousel("pause")};$(element).find(".announcementContent").click(function(){var sText=$(this).find(".announcementCopy").html(),sUrl=$(this).attr("href");safeApply(scope,function(){scope.$emit(kiaEvents.ANALYTICS.HOME_ANNOUNCEMENT,sText,sUrl)})});scope.carouselGoto=function(step){$(element).carousel("pause");$(element).carousel(step)}}}}]);angular.module("app").factory("geoLocationService",["$log","$rootScope","$http","localize",function($log,$rootScope,$http,localize){function findMe(success,failure){if(!navigator.geolocation){$log.error("Geo Location is not supported");return failure(localize.getLocalizedString("label.general.geolocation.notenabled"))}navigator.geolocation.getCurrentPosition(function(position){var params=new google.maps.LatLng(position.coords.latitude,position.coords.longitude);getZipCodeFromPos(params,function(zipCodeResult){return success(zipCodeResult)},failure)},function(error){return failure(localize.getLocalizedString("label.general.geolocation.notenabled"))},{maximumAge:6e5,timeout:1e4})}function getPosFromZipCode(zipCode,success,failure){var geo=new google.maps.Geocoder;geo.geocode({address:zipCode+", USA",region:"US"},function(results,status){if(status!==google.maps.GeocoderStatus.OK){$log.error("Geocode was not successful :( for the following reason: "+status);return failure(localize.getLocalizedString("label.general.geolocation.notenabled"))}return angular.isFunction(success)?success(results[0].geometry.location,results[0].formatted_address):void 0})}function getZipCodeFromPos(position,success,failure){var geo=new google.maps.Geocoder;geo.geocode({latLng:position},function(results,status){if(status!==google.maps.GeocoderStatus.OK){$log.error("Geocode was not successful for the following reason: "+status);return failure(localize.getLocalizedString("label.general.geolocation.notenabled"))}if(angular.isFunction(success)){for(var i=results[0].address_components.length,country=null,result=null;i--;){"country"===results[0].address_components[i].types[0]&&(country=results[0].address_components[i].short_name);"postal_code"===results[0].address_components[i].types[0]&&(result=results[0].address_components[i].long_name)}return"US"===country&&result?success(result):failure(localize.getLocalizedString("label.general.geolocation.notenabled"))}})}function validateZip(zipCode,success,failure){function validateZipComplete(response){return"undefined"!=typeof response&&"200"===response.statusCode&&response.result?success(!0):failure(!1)}return $http.get("data/verifyZipcode/"+zipCode).success(validateZipComplete)}return{findMe:findMe,getPosFromZipCode:getPosFromZipCode,getZipCodeFromPos:getZipCodeFromPos,validateZip:validateZip}}]);angular.module("app").factory("kianService",["$window",function($window){function openChat(){$window.__openKianChat()}function closeChat(){$window.__closeKianChat()}var service={openChat:openChat,closeChat:closeChat};return service}]);angular.module("app").controller("footerController",["$scope","$window","geoLocationService","zipCodeCookie","kianService",function($scope,$window,geoLocationService,zipCodeCookie,kianService){function isChecked(value){return value===$scope.zipLocateItem.value}function hasError(field,validation){return $scope.submitted&&$scope.zipForm[field].$invalid}function submitForm(){function validateZipComplete(valid){var url=$scope.zipLocateItem.value;zipCodeCookie.set($scope.zipLocateItem.input);$window.open(url,"_self")}function validateZipFailed(response){$scope.zipForm["ft-zip"].$setValidity("footerZipError",!1)}$scope.submitted=!0;$scope.zipForm.$valid&&geoLocationService.validateZip($scope.zipLocateItem.input,validateZipComplete,validateZipFailed)}$scope.zipPattern=/^(\d{5}-\d{4}|\d{5})$/;$scope.itemName=angular.element(".zipForm").find(".zipRadioButton:first").attr("name");$scope.itemValue=angular.element(".zipForm").find(".zipRadioButton:first").attr("value");$scope.zipLocateItem={name:$scope.itemName,value:$scope.itemValue};$scope.init=function(){zipCodeCookie.get()&&($scope.zipLocateItem.input=zipCodeCookie.get()+"")};$scope.getZip=function(){function getZipComplete(zipCode){$scope.zipLocateItem.input=zipCode;$scope.$apply()}function getZipFailed(error){console.log("error",error)}geoLocationService.findMe(getZipComplete,getZipFailed)};$scope.init();$scope.isChecked=isChecked;$scope.hasError=hasError;$scope.submitForm=submitForm;$scope.url={value:"default"};$scope.$watch("zipLocateItem.input",function(newValue,oldValue){$scope.zipForm["ft-zip"].$error.footerZipError===!0&&$scope.zipForm["ft-zip"].$setValidity("footerZipError",!0)})}]);angular.module("app").factory("safeApply",["$rootScope",function($rootScope){return function($scope,fn){var phase=$scope.$root.$$phase;
"$apply"===phase||"$digest"===phase?fn&&$scope.$eval(fn):fn?$scope.$apply(fn):$scope.$apply()}}]);angular.module("app").factory("kioskService",["$log",function($log){return{kioskZipCode:"",kioskEventId:"",kioskMode:"",kioskLocation:""}}]);var sortByMsrp=function(a,b){return a.msrp-b.msrp},sortByPrice=function(a,b){return a.price-b.price},sortByNdx=function(a,b){return a.ndx-b.ndx};List.prototype.clear=function(){this.collection.splice(0)};List.prototype.push=function(key,value){var obj,index;(void 0===value||null===value)&&(value=key);obj=this.getElementByKey(key);if(obj)index=this.collection.indexOf(obj);else{index=this.collection.length;this.collection.push({key:key+"",value:value})}return index};List.prototype.remove=function(key){var obj,index;obj=this.getElementByKey(key);if(obj){index=this.collection.indexOf(obj);this.collection.splice(index,1)}};List.prototype.set=function(key,value,bForce){var obj=this.getElementByKey(key);if(null!==obj){obj.value=value;return!0}bForce&&this.push(key,value);return!1};List.prototype.get=function(key){var obj=this.getElementByKey(key);return obj?obj.value:null};List.prototype.getElementByKey=function(key){var sKey=key+"",result=this.collection.filter(function(element,index,array){return element.key===sKey});return result.length>0?result[0]:null};List.prototype.getByNdx=function(ndx){return"number"!=typeof ndx||ndx>=this.collection.length?null:this.collection[ndx].value};List.prototype.getKey=function(ndx){return"number"!=typeof ndx||ndx>=this.collection.length?null:this.collection[ndx].key};List.prototype.getNdx=function(key){var obj=this.getElementByKey(key);return obj?this.collection.indexOf(obj):null};List.prototype.length=function(){return this.collection.length};List.prototype.append=function(oList){var i=0;for(i=0;i<oList.length();i++)this.push(oList.collection[i].key,oList.collection[i].value)};var RulesType={COLORS:"colors",PACKAGES:"packages",OPTIONS:"options"},RulesBehavior={DENY:"deny",INCLUDE:"include",REQUIRE:"require",OR:"requireOr"};RulesSet.prototype.initCollection=function(type,collection){var sId="";this[type].clear();if(collection)for(var i=0;i<collection.length;i++){sId=collection[i].id;collection[i].fabricId&&(sId+="-"+collection[i].fabricId);this[type].push(sId)}};RulesSet.prototype.init=function(oSet){if(oSet){this.initCollection(RulesType.OPTIONS,oSet.options);this.initCollection(RulesType.PACKAGES,oSet.packages);this.initCollection(RulesType.COLORS,oSet.colors)}else{this.options.clear();this.packages.clear();this.colors.clear()}};RulesSet.prototype.isEmpty=function(){return 0===this.length()};RulesSet.prototype.appendList=function(type,list){if(list)for(var i=0;i<list.length();i++)this[type].push(list.getKey(i),list.getByNdx(i))};RulesSet.prototype.clear=function(){this.colors.clear();this.packages.clear();this.options.clear()};RulesSet.prototype.append=function(oSet){if(oSet){this.appendList(RulesType.OPTIONS,oSet.options);this.appendList(RulesType.PACKAGES,oSet.packages);this.appendList(RulesType.COLORS,oSet.colors)}};RulesSet.prototype.length=function(){return this.colors.length()+this.packages.length()+this.options.length()};RulesSet.prototype.getNdx=function(ndx){if(this.length()>ndx){if(ndx<this.colors.length())return{type:RulesType.COLORS,rules:this.colors.getByNdx(ndx)};ndx-=this.colors.length();if(ndx<this.packages.length())return{type:RulesType.PACKAGES,rules:this.packages.getByNdx(ndx)};ndx-=this.packages.length();if(ndx<this.options.length())return{type:RulesType.OPTIONS,rules:this.options.getByNdx(ndx)}}return null};RulesSet.prototype.getById=function(id){if(!this.isEmpty()){if(this.colors.length()>0&&this.colors.get(id))return{type:RulesType.COLORS,id:id,rules:this.colors.get(id)};if(this.packages.length()>0&&this.packages.get(id))return{type:RulesType.PACKAGES,id:id,rules:this.packages.get(id)};if(this.options.length()>0&&this.options.get(id))return{type:RulesType.OPTIONS,id:id,rules:this.options.get(id)}}return null};Rules.prototype.init=function(oRules){if(oRules){this.deny.init(oRules.deny);this.include.init(oRules.include);this.require.init(oRules.require);this.requireOr.init(oRules.requireOr)}};Rules.prototype.isEmpty=function(){return this.deny.isEmpty()&&this.include.isEmpty()&&this.require.isEmpty()&&this.requireOr.isEmpty()};Rules.prototype.length=function(){return this.deny.length()+this.include.length()+this.require.length()+this.requireOr.length()};Rules.prototype.append=function(oRules){if(oRules){this.deny.append(oRules.deny);this.include.append(oRules.include);this.require.append(oRules.require);this.requireOr.append(oRules.requireOr)}};Rules.prototype.clear=function(){this.deny.clear();this.include.clear();this.require.clear();this.requireOr.clear()};CompareSet.prototype=new RulesSet;CompareSet.prototype.constructor=CompareSet;CompareSet.prototype.append=function(oSet){if(oSet){this.rules.append(oSet.rules);this.appendList(RulesType.OPTIONS,oSet.options);this.appendList(RulesType.PACKAGES,oSet.packages);this.appendList(RulesType.COLORS,oSet.colors)}};Color.prototype=new _BaseObject;Color.prototype.constructor=Color;ExteriorColor.prototype=new Color;ExteriorColor.prototype.constructor=ExteriorColor;ExteriorColor.prototype.addInterior=function(color){return this.interior.push(color.id,color)};ExteriorColor.prototype.getInteriorColors=function(){return this.interior};ExteriorColor.prototype.getInterior=function(id){return this.interior.get(id)};ExteriorColor.prototype.getInteriorByNdx=function(ndx){return this.interior.getByNdx(ndx)};ExteriorColor.prototype.getCount=function(){return this.interior.length()+1};Fabric.prototype=new _BaseObject;Fabric.prototype.constructor=Fabric;InteriorColor.prototype=new Color;InteriorColor.prototype.constructor=InteriorColor;var OptionTypes={UPGRADE:"upgrade",DOWNGRADE:"downgrade"};TrimOption.prototype=new _BaseObject;TrimOption.prototype.constructor=TrimOption;Model.prototype=new _BaseObject;Model.prototype.constructor=Model;Model.prototype.addOption=function(option){this.options.push(option)};Model.prototype.sortOptions=function(){this.options.sort(sortByNdx)};Trim.prototype=new _BaseObject;Trim.prototype.constructor=Trim;Trim.prototype.getModels=function(){return this.models};Trim.prototype.getModel=function(id){return this.models.get(id)};Trim.prototype.getModelByNdx=function(ndx){return this.models.getByNdx(ndx)};Trim.prototype.addModel=function(model){return this.models.push(model.id,model)};Trim.prototype.addAttribute=function(id){return this.attributes.push(id,id)};Trim.prototype.sortOptions=function(){for(var i=0;i<this.models.length();i++)this.models.getByNdx(i).sortOptions(sortByNdx)};BaseOption.prototype=new _BaseObject;BaseOption.prototype.constructor=BaseOption;ModelOption.prototype=new BaseOption;ModelOption.prototype.constructor=ModelOption;ModelPackage.prototype=new ModelOption;ModelPackage.prototype.constructor=ModelPackage;angular.module("app").factory("buildAndPriceService",["$log","$http","messageService","kiaEvents","$sce",function($log,$http,messageService,kiaEvents,$sce){var defaultRequestParams,url,get,getTrims,getColors;url={trims:window.baseURI+"/data/vehicleTrimConfiguration/{seriesName}/{year}",colors:window.baseURI+"/data/vehicleColorConfiguration/{model}"};defaultRequestParams={};get=function(key,values,parameters,success,failure){var requestParams=angular.extend({},defaultRequestParams,parameters),sUrl=url[key].slice(0);for(var objKey in values)sUrl=sUrl.replace("{"+objKey+"}",values[objKey]);return $http.get(sUrl,{params:requestParams}).success(function(data,getResponseHeaders){messageService.publish("buildAndPriceService-"+key,{source:"buildAndPriceService",key:key,values:values,parameters:parameters});return angular.isFunction(success)?success(data):void 0}).error(failure)};getTrims=function(options,success,failure){var values={seriesName:options.seriesName,year:options.year},parameters={};return get("trims",values,parameters,success,failure)};getColors=function(options,success,failure){var values={model:options.model},parameters={};return get("colors",values,parameters,success,failure)};return{getTrims:getTrims,getColors:getColors}}]);angular.module("app").factory("monthlyPayment",["$log",function($log){var oMonthly=new CalculatorOptions,calculate=function(price){var monthlyPay=0,n=oMonthly.months.value,p=price-oMonthly.down-oMonthly.tradeIn,i=oMonthly.rate.value/100;if(0>=p)return 0;monthlyPay=0===n?0===i?p:p/i:0===i?p/n:p*(i/12)/(1-Math.pow(1+i/12,-n));return Math.round(100*monthlyPay)/100};return{options:oMonthly,calculate:calculate}}]);angular.module("app").factory("bnpPrices",["$log","paymentCalculator",function($log,paymentCalculator){var oPrice=new Price,setTrim=(paymentCalculator.options,function(price,destination){oPrice.model=price;oPrice.destination=destination;updatePrice()}),setColor=function(exterior,interior){oPrice.color.exterior=exterior;oPrice.color.interior=interior;updatePrice()},addPackage=function(id,price){oPrice.packages.push(id,price);updatePrice()},removePackage=function(id){oPrice.packages.remove(id);updatePrice()},addOption=function(id,price){oPrice.options.push(id,price);updatePrice()},removeOption=function(id){oPrice.options.remove(id);updatePrice()},packagesTotal=function(){var nTotal=0,i=0;for(i=0;i<oPrice.packages.length();i++)nTotal+=oPrice.packages.getByNdx(i);return nTotal},optionsTotal=function(){var nTotal=0,i=0;for(i=0;i<oPrice.options.length();i++)nTotal+=oPrice.options.getByNdx(i);return nTotal},updatePrice=function(){var price=oPrice.model;price+=oPrice.destination;price+=oPrice.color.exterior+oPrice.color.interior;oPrice.packagesTotal=packagesTotal();price+=oPrice.packagesTotal;oPrice.optionsTotal=optionsTotal();price+=oPrice.optionsTotal;oPrice.msrp=price;oPrice.monthly=price},reset=function(bIncludeTrims){if(bIncludeTrims){oPrice.msrp=0;oPrice.model=0}oPrice.color.exterior=0;oPrice.color.interior=0;oPrice.packages.clear();oPrice.options.clear();oPrice.packagesTotal=0;oPrice.optionsTotal=0;oPrice.monthly=0};return{price:oPrice,setTrim:setTrim,setColor:setColor,updatePrice:updatePrice,addPackage:addPackage,removePackage:removePackage,addOption:addOption,removeOption:removeOption,packagesTotal:packagesTotal,optionsTotal:optionsTotal,reset:reset}}]);angular.module("app").factory("bnpTrims",["$log","$location","bnpPrices","$sce",function($log,$location,bnpPrices,$sce){var init,setTrim,setModel,setByModel,data,navigation,reset;data={trim:{current:null,list:new List},model:{current:null,list:new List},compare:{image:null}};navigation={selected:!1,template:"trim.html",name:"label.build.trim",info:null,colon:!0};init=function(aTrims){data.trim.list.clear();var i=0,j=0,k=0,attrCount=0,attrKey="",oTrim=null,oModel=null,modelObj=null,oColor=null,oOption=null,oTrimOption=null;if(aTrims.length>0){for(i=0;i<aTrims.length;i++)aTrims[i].msrp=parseInt(aTrims[i].msrp,10);aTrims.sort(sortByMsrp);for(i=0;i<aTrims.length;i++){oTrim=new Trim(aTrims[i].id,aTrims[i].trim);oTrim.msrp=aTrims[i].msrp;oTrim.thumbnail=window.contentURI+aTrims[i].thumbImageUrl;oTrim.imageSet=window.contentURI+aTrims[i].imagePath720+"/";for(j=0;j<aTrims[i].models.length;j++){modelObj=aTrims[i].models[j];oModel=new Model(modelObj.id,modelObj.id);oModel.msrp=parseInt(modelObj.msrp,10);oModel.destCharge=parseInt(modelObj.destCharge,10);oModel.code=modelObj.code;oModel.drive=modelObj.drive.name;for(k=0;k<modelObj.features.length;k++)oModel.features.push(new Feature($sce.trustAsHtml(modelObj.features[k].description),modelObj.features[k].showInMobile));for(k=0;k<modelObj.availableColors.length;k++){oColor=new ExteriorColor(modelObj.availableColors[k].name.toLowerCase());oColor.baseHex=modelObj.availableColors[k].baseHex.toLowerCase();oColor.highHex=modelObj.availableColors[k].highHex.toLowerCase();oColor.order=parseInt(modelObj.availableColors[k].displayOrder,10);oModel.colors.push(oColor)}oModel.colors.length>0&&(oModel.color=oModel.colors[0].baseHex);for(k=0;k<modelObj.upgradeWith.length;k++){oOption=modelObj.upgradeWith[k];attrKey=oOption.attribute;attrCount=oTrim.addAttribute(attrKey);oTrimOption=new TrimOption(oOption.modelId,oOption.feature);oTrimOption.type=OptionTypes.UPGRADE;oTrimOption.price=parseInt(oOption.price,10);oTrimOption.attribute=oOption.attribute;oTrimOption.ndx=attrCount;oModel.addOption(oTrimOption)}for(k=0;k<modelObj.downgradeWith.length;k++){oOption=modelObj.downgradeWith[k];attrKey=oOption.attribute;attrCount=oTrim.addAttribute(attrKey);oTrimOption=new TrimOption(oOption.modelId,oOption.feature);oTrimOption.type=OptionTypes.DOWNGRADE;oTrimOption.price=parseInt(oOption.price,10);oTrimOption.attribute=oOption.attribute;oTrimOption.ndx=attrCount;oModel.addOption(oTrimOption)}oModel.sortOptions();oTrim.addModel(oModel)}for(j=0;j<aTrims[i].models.length;j++){modelObj=aTrims[i].models[j];for(k=0;k<modelObj.upgradeWith.length;k++){oOption=modelObj.upgradeWith[k];oModel=oTrim.getModel(oOption.modelId);if(oModel){oTrimOption=new TrimOption(oOption.modelId,oOption.feature);oTrimOption.type=OptionTypes.UPGRADE;oTrimOption.price=parseInt(oOption.price,10);oTrimOption.attribute=oOption.attribute;oModel.featureInfo.push(oTrimOption)}}}data.trim.list.push(oTrim.id,oTrim)}setTrim(data.trim.list.getKey(0))}return data.trim.current};setTrim=function(id){var oTrim=data.trim.list.get(id);if(null===oTrim)return null;null!==data.trim.current&&(data.trim.current.selected=!1);oTrim.selected=!0;data.trim.current=oTrim;navigation.info=data.trim.current.name;bnpPrices.setTrim(data.trim.current.msrp,0);$location.search(angular.extend($location.search(),{trim:id}));data.model.list=data.trim.current.getModels();setModel(data.model.list.getByNdx(0).id);return data.trim.current};setModel=function(id){var oModel=data.trim.current.getModel(id);if(null===oModel)return null;data.model.current=oModel;bnpPrices.setTrim(data.model.current.msrp,data.model.current.destCharge);$location.search(angular.extend($location.search(),{model:id}));return data.model.current};setByModel=function(id){for(var trimId=null,trimObj=null,modelsList=null,i=0;null===trimId&&i<data.trim.list.length();i++){trimObj=data.trim.list.getByNdx(i);modelsList=trimObj.getModels();for(var j=0;j<modelsList.length();j++)if(modelsList.getByNdx(j).id===id){trimId=trimObj.id;break}}if(null===trimId)return null;setTrim(trimId);return setModel(id)};reset=function(){setTrim(data.trim.list.getKey(0))};return{navigation:navigation,data:data,init:init,setTrim:setTrim,setModel:setModel,setByModel:setByModel,reset:reset}}]);angular.module("app").factory("bnpColors",["$log","$location","bnpPrices","bnpPackages",function($log,$location,bnpPrices,bnpPackages){function commonRulesSet(targetRules,matchRules,type){var h=0,oRuleId=null;for(h=0;h<targetRules[type].length();h++){oRuleId=targetRules[type].getNdx(h);if(null===matchRules[type].getById(oRuleId.rules)){targetRules[type][oRuleId.type].remove(oRuleId.rules);h--}}}var init,setExterior,setInterior,setExteriorByHex,setInteriorByHex,reset,setDefaultExterior,setDefaultInterior,setExteriorByNdx,setInteriorByNdx,getById,data,navigation,navigationBarMarkup;navigation={selected:!1,template:"color.html",name:"label.build.exteriorAndInterior",info:null};data={count:0,boxes:0,imageSet:"",exterior:{current:null,list:new List},interior:{current:null,list:new List}};var createInterior=function(interiorItem,ndx){var oInterior=null,sId=interiorItem.id+"-"+interiorItem.fabric.id;oInterior=new InteriorColor(sId,interiorItem.name.toLowerCase());oInterior.baseHex=interiorItem.baseHex.toLowerCase();oInterior.highHex=interiorItem.highHex.toLowerCase();oInterior.isFishEyeAvailable=interiorItem.isFishEyeAvailable;oInterior.fabric=new Fabric(interiorItem.fabric.id,interiorItem.fabric.name,interiorItem.fabric.swatch);interiorItem.price&&""!==interiorItem.price||(interiorItem.price=0);oInterior.price=parseInt(interiorItem.price,10);interiorItem.displayOrder&&""!==interiorItem.displayOrder||(interiorItem.displayOrder=ndx);oInterior.order=parseInt(interiorItem.displayOrder,10);oInterior.rules.init(interiorItem.rules);return oInterior};init=function(colorsData){data.exterior.list.clear();data.interior.list.clear();data.count=0;data.imageSet=window.contentURI+colorsData.imagePath+"/";var aCombos=colorsData.colorCombos,oCombo=null,i=0,j=0;if(aCombos.length>0){for(i=0;i<aCombos.length;i++){oCombo=new ExteriorColor(aCombos[i].exteriorColor.id,aCombos[i].exteriorColor.name.toLowerCase());oCombo.baseHex=aCombos[i].exteriorColor.baseHex.toLowerCase();oCombo.highHex=aCombos[i].exteriorColor.highHex.toLowerCase();aCombos[i].exteriorColor.price&&""!==aCombos[i].exteriorColor.price||(aCombos[i].exteriorColor.price=0);oCombo.price=parseInt(aCombos[i].exteriorColor.price,10);aCombos[i].exteriorColor.displayOrder&&""!==aCombos[i].exteriorColor.displayOrder||(aCombos[i].exteriorColor.displayOrder=i);oCombo.order=parseInt(aCombos[i].exteriorColor.displayOrder,10);oCombo.rules.init(aCombos[i].exteriorColor.rules);for(j=0;j<aCombos[i].interiorColors.length;j++)if(!aCombos[i].interiorColors[j].rules.require){oCombo.addInterior(createInterior(aCombos[i].interiorColors[j],i));data.count++}for(j=0;j<aCombos[i].interiorColors.length;j++)if(aCombos[i].interiorColors[j].rules.require){oCombo.addInterior(createInterior(aCombos[i].interiorColors[j],i));data.count++}data.exterior.list.push(oCombo.id,oCombo);data.count++}var oRulesExterior=null,oRulesInterior="";for(i=0;i<data.exterior.list.length();i++){oCombo=data.exterior.list.getByNdx(i);oRulesExterior=new Rules;for(j=0;j<oCombo.interior.length();j++){oRulesInterior=oCombo.interior.getByNdx(j).rules;if(0===j)oRulesExterior.append(oRulesInterior);else{commonRulesSet(oRulesExterior,oRulesInterior,"deny");commonRulesSet(oRulesExterior,oRulesInterior,"include");commonRulesSet(oRulesExterior,oRulesInterior,"require");commonRulesSet(oRulesExterior,oRulesInterior,"requireOr")}}oRulesExterior.isEmpty()||oCombo.rules.append(oRulesExterior)}setDefaultExterior()}return data.exterior.current};setExterior=function(id){var oColor=data.exterior.list.get(id);if(null===oColor)return null;null!==data.exterior.current&&(data.exterior.current.selected=!1);data.exterior.current=oColor;data.exterior.current.selected=!0;var interiorID=null;data.interior.current&&(interiorID=data.interior.current.id);data.interior.list=oColor.getInteriorColors();data.boxes=data.interior.list.length()+1;data.interior.list.length()>0&&(data.interior.list.get(interiorID)?setInterior(interiorID):setDefaultInterior());navigation.info=navigationBarMarkup();bnpPrices.setColor(data.exterior.current.price,data.interior.current.price);data.count=data.exterior.list.length()+data.interior.list.length();return oColor};setExteriorByHex=function(baseHex){for(var colorId=null,colorObj=null,i=0;null===colorId&&i<data.exterior.list.length();i++){colorObj=data.exterior.list.getByNdx(i);colorObj.baseHex===baseHex.toLowerCase()&&(colorId=colorObj.id)}return null===colorId?null:setExterior(colorId)};setExteriorByNdx=function(ndx){return ndx>=0&&ndx<data.exterior.list.length()?setExterior(data.exterior.list.getByNdx(ndx).id):null};setInterior=function(id){var oColor=data.interior.list.get(id);if(null===oColor)return null;null!==data.interior.current&&(data.interior.current.selected=!1);data.interior.current=oColor;data.interior.current.selected=!0;navigation.info=navigationBarMarkup();bnpPrices.setColor(data.exterior.current.price,data.interior.current.price);if(oColor.rules.require.packages.collection&&oColor.rules.require.packages.collection.length>0)for(var len=oColor.rules.require.packages.collection.length,i=0;len>i;i++)bnpPackages.addPackage(oColor.rules.require.packages.collection[i].key);return oColor};setInteriorByHex=function(baseHex,fabricId){for(var colorId=null,colorObj=null,i=0;null===colorId&&i<data.interior.list.length();i++){colorObj=data.interior.list.getByNdx(i);if(colorObj.baseHex===baseHex.toLowerCase()&&(null===fabricId||void 0===fabricId||colorObj.fabric.id===fabricId)){colorId=colorObj.id;break}}return null===colorId?!1:setInterior(colorId)};setInteriorByNdx=function(ndx){return ndx>=0&&ndx<data.interior.list.length()?setInterior(data.interior.list.getByNdx(ndx).id):null};getById=function(id){var item={exterior:data.exterior.list.get(id),interior:null};if(item.exterior)return item;if(data.exterior.current){item.exterior=data.exterior.current;item.interior=item.exterior.getInterior(id);if(item.interior)return item;item.exterior=null}if(item.exterior)return item;for(var i=0;i<data.exterior.list.length();i++){item.exterior=data.exterior.list.getByNdx(i);item.interior=item.exterior.getInterior(id);if(item.interior)break;item.exterior=null}return item.exterior?item:null};navigationBarMarkup=function(){var markup='<div class="selected-colors">';markup+='<div class="boxes">';data.exterior.current&&(markup+='<span color-block key="'+data.exterior.current.id+'" name="'+data.exterior.current.name+'" color="#'+data.exterior.current.baseHex+'" property="exteriorColor"></span>');data.interior.current&&(markup+='<span color-block key="'+data.interior.current.id+'" name="'+data.interior.current.name+" "+data.interior.current.fabric.name+'" color="#'+data.interior.current.baseHex+'" property="interiorColor" fabric="'+data.interior.current.fabric.texture+'"></span>');markup+='<span class="after"></span>';markup+='<span class="before"></span>';markup+="</div>";markup+="</div>";return markup};var getDefaultColor=function(oList){var i=0,oFirstColor=null,oColor=null;for(i=0;i<oList.length();i++){oColor=oList.getByNdx(i);if(oColor.rules.isEmpty())return oColor;oFirstColor||(oFirstColor=oColor)}return oFirstColor};setDefaultExterior=function(){var oColor=getDefaultColor(data.exterior.list);oColor&&setExterior(oColor.id)};setDefaultInterior=function(){var oColor=getDefaultColor(data.interior.list);oColor&&setInterior(oColor.id)};var findInterior=function(id){var bFlag=!1;data.exterior.current&&data.interior.list.get(id)&&(bFlag=!0);return bFlag};reset=function(){data.count=0;data.boxes=0;data.imageSet=0;data.exterior.current=null;data.exterior.list.clear();data.interior.current=null;data.interior.list.clear();navigation.info=null};return{navigation:navigation,data:data,init:init,getById:getById,setExterior:setExterior,setInterior:setInterior,setExteriorByHex:setExteriorByHex,setInteriorByHex:setInteriorByHex,setExteriorByNdx:setExteriorByNdx,setInteriorByNdx:setInteriorByNdx,setDefaultExterior:setDefaultExterior,setDefaultInterior:setDefaultInterior,getDefaultColor:getDefaultColor,reset:reset,findInterior:findInterior}}]);angular.module("app").factory("bnpPackages",["$log","$location","bnpPrices","$sce",function($log,$location,bnpPrices,$sce){var init,addPackage,removePackage,getRequiredPackages,getHighlightsFromPackage,data,navigation,navigationBarMarkup,reset,emptyCurrentList,getSelectedPackagesCount;navigation={selected:!1,template:"packages.html",name:"label.build.packages",info:null};data={current:null,currentList:new List,list:new List};init=function(aData){data.list.clear();var i=0,j=0,k=0,oPackage=null,oOption=null;for(i=0;i<aData.length;i++){oPackage=new ModelPackage(aData[i].id,aData[i].name);oPackage.description=$sce.trustAsHtml(aData[i].description);oPackage.disclaimer=aData[i].disclaimer;oPackage.altText=aData[i].altText;oPackage.optionCode=aData[i].optionCode;oPackage.price=parseInt(aData[i].price,10);for(k=1;3>=k;k++)aData[i]["imagePath"+k]&&oPackage.images.push(aData[i]["imagePath"+k]);oPackage.rules.init(aData[i].rules);if(aData[i].options)for(j=0;j<aData[i].options.length;j++){oOption=new BaseOption(j+1,$sce.trustAsHtml(aData[i].options[j].name));oOption.description=$sce.trustAsHtml(aData[i].options[j].description);oOption.disclaimer=aData[i].options[j].disclaimer;oOption.altText=aData[i].options[j].name;oOption.highlight=aData[i].options[j].isHighlight;oOption.images.push(window.contentURI+aData[i].options[j].detailImageMediumPath);oOption.images.push(window.contentURI+aData[i].options[j].detailImageSmallPath);oOption.images.push(window.contentURI+aData[i].options[j].detailImagePath);oOption.imageSmall=window.contentURI+aData[i].options[j].detailImageSmallPath;oOption.imageMedium=window.contentURI+aData[i].options[j].detailImageMediumPath;oOption.imageLarge=window.contentURI+aData[i].options[j].detailImagePath;oPackage.options.push(oOption)}if(aData[i].features)for(j=0;j<aData[i].features.length;j++){oOption=new BaseOption(j+1,$sce.trustAsHtml(aData[i].features[j].name));oOption.description=$sce.trustAsHtml(aData[i].features[j].description);oOption.disclaimer=aData[i].features[j].disclaimer;oOption.altText=aData[i].features[j].name;oOption.highlight=aData[i].features[j].isHighlight;oOption.images.push(window.contentURI+aData[i].features[j].detailImageMediumPath);oOption.images.push(window.contentURI+aData[i].features[j].detailImageSmallPath);oOption.images.push(window.contentURI+aData[i].features[j].detailImagePath);oOption.imageSmall=window.contentURI+aData[i].features[j].detailImageSmallPath;oOption.imageMedium=window.contentURI+aData[i].features[j].detailImageMediumPath;oOption.imageLarge=window.contentURI+aData[i].features[j].detailImagePath;oPackage.features.push(oOption)}data.list.push(oPackage.id,oPackage)}return data};addPackage=function(key){var requiredPackages,packageToBeAdded;emptyCurrentList();if(data.list.getElementByKey(key)){requiredPackages=getRequiredPackages(key,!0);packageToBeAdded=data.list.getElementByKey(key);packageToBeAdded.value.selected=!0;data.currentList.push(key,packageToBeAdded.value);bnpPrices.addPackage(key,packageToBeAdded.value.price);if(requiredPackages.length)for(var i=0;i<requiredPackages.length;i++)bnpPrices.addPackage(requiredPackages[i].id,requiredPackages[i].price);navigation.info=navigationBarMarkup()}};removePackage=function(key){var requiredPackages=getRequiredPackages(key,!0);bnpPrices.removePackage(key);var packageToBeRemoved=data.list.getElementByKey(key);packageToBeRemoved.value.selected=!1;data.currentList.remove(key);if(requiredPackages.length)for(var i=0;i<requiredPackages.length;i++)bnpPrices.removePackage(requiredPackages[i].id);navigation.info=navigationBarMarkup()};emptyCurrentList=function(){for(;data.currentList.collection.length;)removePackage(data.currentList.collection[0].key)};getRequiredPackages=function(key,recursive){var requiredPackagesIds,requiredPackages,requiredChildPackages,packageId;requiredPackages=[];var oRequiredPackages={};if(data.list.get(key)){requiredPackagesIds=data.list.get(key).rules.require.packages.collection;for(var i=0;i<requiredPackagesIds.length;i++){packageId=requiredPackagesIds[i].value;if(data.list.get(packageId)&&void 0===oRequiredPackages[packageId]){oRequiredPackages[packageId]=requiredPackages.length;requiredPackages.push(data.list.get(packageId));if(recursive){requiredChildPackages=getRequiredPackages(packageId,!0);for(var j=0;j<requiredChildPackages.length;j++)if(void 0===oRequiredPackages[requiredChildPackages[j].id]){oRequiredPackages[requiredChildPackages[j].id]=requiredPackages.length;requiredPackages.push(requiredChildPackages[j])}}}}}return requiredPackages};getHighlightsFromPackage=function(key){var highlights,features,options;highlights=[];features=data.list.get(key).features;options=data.list.get(key).options;for(var i=0;i<features.length;i++)features[i].highlight&&highlights.push(features[i]);for(var j=0;j<options.length;j++)options[j].highlight&&highlights.push(options[j]);return highlights.slice(0,2)};getSelectedPackagesCount=function(){return bnpPrices.price.packages.length()};navigationBarMarkup=function(){var markup,nPackages=getSelectedPackagesCount();markup=nPackages?"<span class='selection-count'>"+nPackages+"</span>":"<span></span>";return markup};reset=function(){data.current=null;data.currentList.clear();data.list.clear();navigation.info=null};return{navigation:navigation,data:data,init:init,addPackage:addPackage,removePackage:removePackage,getRequiredPackages:getRequiredPackages,getHighlightsFromPackage:getHighlightsFromPackage,reset:reset,emptyCurrentList:emptyCurrentList,getSelectedPackagesCount:getSelectedPackagesCount}}]);angular.module("app").factory("bnpOptions",["$log","$location","bnpPrices","$sce",function($log,$location,bnpPrices,$sce){var init,data,navigation,navigationBarMarkup,reset;navigation={selected:!1,template:"options.html",name:"label.build.options",info:null};data={current:null,currentList:new List,list:new List};init=function(aData){data.list.clear();var i=0,oOption=null;for(i=0;i<aData.length;i++){oOption=new ModelOption(aData[i].id,aData[i].name);oOption.description=$sce.trustAsHtml(aData[i].description);oOption.disclaimer=aData[i].disclaimer;oOption.altText=aData[i].altText;oOption.optionCode=aData[i].optionCode;oOption.price=parseInt(aData[i].price,10);oOption.added=!1;oOption.images.push(window.contentURI+aData[i].detailImageMediumPath);oOption.images.push(window.contentURI+aData[i].detailImageSmallPath);oOption.images.push(window.contentURI+aData[i].detailImagePath);oOption.imageSmall=window.contentURI+aData[i].detailImageSmallPath;oOption.imageMedium=window.contentURI+aData[i].detailImageMediumPath;oOption.imageLarge=window.contentURI+aData[i].detailImagePath;oOption.rules.init(aData[i].rules);data.list.push(oOption.id,oOption)}return data};var addOption=function(key){var oOption=data.list.get(key);if(null!=oOption){oOption.price;oOption.selected=!0;data.currentList.push(key,oOption);bnpPrices.addOption(key,oOption.price);navigation.info=navigationBarMarkup()}},removeOption=function(key){var oOption=data.currentList.get(key);null!==oOption&&(oOption.selected=!1);data.currentList.remove(key);bnpPrices.removeOption(key);navigation.info=navigationBarMarkup()};navigationBarMarkup=function(){var markup;markup=data.currentList.collection.length?"<span class='selection-count'>"+data.currentList.collection.length+"</span>":"<span></span>";return markup};reset=function(){data.current=null;data.currentList.clear();data.list.clear();navigation.info=null};return{navigation:navigation,data:data,init:init,addOption:addOption,removeOption:removeOption,reset:reset}}]);angular.module("app").factory("bnpSummary",["$log","$location","buildAndPriceModel","bnpColors","bnpPackages","bnpOptions","bnpPrices","$sce",function($log,$location,buildAndPriceModel,bnpColors,bnpPackages,bnpOptions,bnpPrices,$sce){var init,data,navigation;navigation={selected:!1,template:"summary.html",name:"label.build.summary",info:null,choose:!1};data={current:null,currentList:new List,list:new List};init=function(aData){data.list.clear();var i=0,oOption=null;for(i=0;i<aData.length;i++){oOption=new ModelOption(aData[i].id,aData[i].name);oOption.description=$sce.trustAsHtml(aData[i].description);oOption.disclaimer=aData[i].disclaimer;oOption.altText=aData[i].altText;oOption.optionCode=aData[i].optionCode;oOption.price=parseInt(aData[i].price,10);oOption.images.push(window.contentURI+aData[i].detailImageMediumPath);oOption.images.push(window.contentURI+aData[i].detailImageSmallPath);oOption.images.push(window.contentURI+aData[i].detailImagePath);oOption.imageSmall=window.contentURI+aData[i].detailImageSmallPath;oOption.imageMedium=window.contentURI+aData[i].detailImageMediumPath;oOption.imageLarge=window.contentURI+aData[i].detailImagePath;oOption.rules.init(aData[i].rules);data.list.push(oOption.id,oOption)}return data};var addOption=function(key){var oOption=data.list.get(key);if(null!==oOption){oOption.price;data.currentList.push(key,oOption);bnpPrices.addOption(key,oOption.price)}},removeOption=function(key){data.currentList.remove(key);bnpPrices.removeOption(key)};return{data:data,init:init,navigation:navigation,addOption:addOption,removeOption:removeOption}}]);angular.module("app").factory("bnpRules",["$log","bnpColors","bnpPackages","bnpOptions",function($log,bnpColors,bnpPackages,bnpOptions){var getItemByType=function(type,id){var obj=null;switch(RulesType[type]){case RulesType.COLORS:obj=bnpColors.getById(id);obj&&(obj.interior?obj=obj.interior:obj.exterior&&(obj=obj.exterior));break;
case RulesType.PACKAGES:obj=bnpPackages.data.list.get(id);break;case RulesType.OPTIONS:obj=bnpOptions.data.list.get(id)}return obj},uniqueRules=function(collection,addition,isDeny){var aRules=new Rules;isDeny=!1;var sBehavior="",sType="",oList=null,i=0,sKey="";for(sBehavior in RulesBehavior)if(RulesBehavior[sBehavior]!==RulesBehavior.DENY)for(sType in RulesType){oList=addition[RulesBehavior[sBehavior]][RulesType[sType]];for(i=0;i<oList.length();i++){sKey=oList.getKey(i);collection[RulesBehavior[sBehavior]][RulesType[sType]].get(sKey)||aRules[RulesBehavior[sBehavior]][RulesType[sType]].push(sKey)}}return aRules},drill=function(oRules,currentRules,isDeny){oRules.drill;isDeny=!1;var sBehavior="",sType="",i=0,oList=null,oItem=null,oKey="",oAddedRules=new Rules;for(sBehavior in RulesBehavior)if(RulesBehavior[sBehavior]!==RulesBehavior.DENY)for(sType in RulesType){oList=oRules[RulesBehavior[sBehavior]][RulesType[sType]];for(i=0;i<oList.length();i++){oKey=oList.getKey(i);if(oKey){oItem=getItemByType(sType,oKey);if(oItem&&oItem.rules&&!oItem.rules.isEmpty()){oAddedRules=uniqueRules(oRules,oItem.rules);currentRules&&(oAddedRules=uniqueRules(currentRules,oAddedRules));if(!oAddedRules.isEmpty()){currentRules.append(oAddedRules);drill(oAddedRules,currentRules)}}}}}},setCompareRules=function(oCompare,oRules){var i=0,sId="",sBehavior="",sType="",oList=null;for(sBehavior in RulesBehavior)switch(RulesBehavior[sBehavior]){case RulesBehavior.DENY:case RulesBehavior.OR:break;default:for(sType in RulesType){oList=oRules[RulesBehavior[sBehavior]][RulesType[sType]];for(i=0;i<oList.length();i++){sId=oList.getKey(i);oCompare[RulesType[sType]].push(sId)}}}oCompare.rules.append(oRules)},initializeCompareRules=function(oCompareSet){var oRules=new Rules,i=0,oItem=null,sType="",oAddedRules=new Rules;for(sType in RulesType)for(i=0;i<oCompareSet[RulesType[sType]].length();i++){oItem=getItemByType(sType,oCompareSet[RulesType[sType]].getKey(i));if(oItem&&oItem.rules&&!oItem.rules.isEmpty()){oAddedRules=oItem.rules;if(!oAddedRules.isEmpty()){oRules.append(oAddedRules);drill(oAddedRules,oRules)}}}setCompareRules(oCompareSet,oRules)},getSpecificCompareSet=function(type,id){var oCompare=new CompareSet;oCompare[type].push(id);initializeCompareRules(oCompare);return oCompare},getCurrentCompareSet=function(){var i=0,sKey="",oCompare=new CompareSet,oInterior=null,oExterior=bnpColors.data.exterior.current;new Rules;if(oExterior){oCompare.colors.push(oExterior.id);oInterior=bnpColors.data.interior.current}oInterior&&oCompare.colors.push(oInterior.id);if(bnpPackages.data.currentList)for(i=0;i<bnpPackages.data.currentList.length();i++){sKey=bnpPackages.data.currentList.getKey(i);oCompare.packages.push(sKey)}if(bnpOptions.data.currentList)for(i=0;i<bnpOptions.data.currentList.length();i++){sKey=bnpOptions.data.currentList.getKey(i);oCompare.options.push(sKey)}initializeCompareRules(oCompare);return oCompare},getItemsDeniedByAdded=function(addSet,currentSet){var resultSet=new CompareSet;resultSet.append(addSet.rules.deny);resultSet.rules.deny.append(addSet.rules.deny);addSet.rules.deny.clear();return resultSet},checkSetForSet=function(collection,target,type,id){var i=0,sType="",sRulesType="",sId="";for(sType in RulesType){sRulesType=RulesType[sType];for(i=0;i<target[sRulesType].length();i++){sId=target[sRulesType].getKey(i);if(type!==sRulesType&&sId!==id&&collection[sRulesType].get(sId))return!0}}return!1},getItemsDenyingAdded=function(addSet,currentSet){var resultSet=new CompareSet,i=0,sType="",sRulesType="",sId="",oItem=null;for(sType in RulesType){sRulesType=RulesType[sType];for(i=0;i<currentSet[sRulesType].length();i++){sId=currentSet[sRulesType].getKey(i);if(!addSet[sRulesType].get(sId)){oItem=getItemByType(sType,sId);if(checkSetForSet(oItem.rules.deny,addSet,sRulesType,sId)){resultSet[sRulesType].push(sId);resultSet.rules.deny[sRulesType].push(sId)}}}}return resultSet},clearAdd=function(addSet,currentSet){var resultSet=new CompareSet;resultSet.append(addSet);var i=0,sType="",sBehavior="",sRulesType="",sId="";for(sType in RulesType){sRulesType=RulesType[sType];for(i=0;i<addSet[sRulesType].length();i++){sId=addSet[sRulesType].getKey(i);if(currentSet[sRulesType].get(sId)){resultSet[sRulesType].remove(sId);for(sBehavior in RulesBehavior)resultSet.rules[RulesBehavior[sBehavior]][sRulesType].remove(sId)}}}resultSet.rules.deny.clear();return resultSet},clearRemove=function(removeSet,currentSet,addSet){var resultSet=new CompareSet,i=0,sType="",sRulesType="",sId="";for(sType in RulesType){sRulesType=RulesType[sType];for(i=0;i<removeSet[sRulesType].length();i++){sId=removeSet[sRulesType].getKey(i);if(!addSet[sRulesType].get(sId)&&currentSet[sRulesType].get(sId)){resultSet[sRulesType].push(sId);resultSet.rules.deny[sRulesType].push(sId)}}}return resultSet},getItemsNeedingRemoved=function(removeSet,currentSet){var resultSet=new CompareSet,i=0,sType="",sBehavior="",sRulesType="",sId="",oItem=null;for(sType in RulesType){sRulesType=RulesType[sType];for(i=0;i<currentSet[sRulesType].length();i++){sId=currentSet[sRulesType].getKey(i);oItem=getSpecificCompareSet(sRulesType,sId);if(oItem&&oItem.rules&&!oItem.rules.isEmpty())for(sBehavior in RulesBehavior)if(RulesBehavior[sBehavior]!==RulesBehavior.DENY&&checkSetForSet(oItem,removeSet,sRulesType,sId)){resultSet[sRulesType].push(sId);resultSet.rules.deny[sRulesType].push(sId);if(RulesType[sType]===RulesType.PACKAGES){resultSet[sRulesType].append(oItem[sRulesType]);resultSet.rules.deny[sRulesType].append(oItem[sRulesType])}break}}}return resultSet},analyzeTree=function(type,addedId,removedId){var addSet=new CompareSet,currentSet=getCurrentCompareSet(),removeSet=new CompareSet;new CompareSet;if(addedId){addSet=getSpecificCompareSet(type,addedId);removedId&&addSet[type].get(removedId)&&(removedId=null);removeSet.append(getItemsDeniedByAdded(addSet,currentSet));removeSet.append(getItemsDenyingAdded(addSet,currentSet))}if(removedId)if(type===RulesType.PACKAGES){var packagesSet=getSpecificCompareSet(type,removedId);removeSet[type].append(packagesSet[type]);removeSet.rules.deny[type].append(packagesSet[type])}else{removeSet[type].push(removedId);removeSet.rules.deny[type].push(removedId)}removeSet=clearRemove(removeSet,currentSet,addSet);removeSet.append(getItemsNeedingRemoved(removeSet,currentSet));removeSet=clearRemove(removeSet,currentSet,addSet);if(removedId){removeSet[type].remove(removedId);removeSet.rules.deny[type].remove(removedId)}addSet=clearAdd(addSet,currentSet);addSet.rules.append(removeSet.rules);for(var oColor=null,i=0;i<addSet.rules.require[RulesType.COLORS].length();i++){oColor=addSet.rules.require[RulesType.COLORS].getByNdx(i);if(!bnpColors.findInterior(oColor)){addSet.rules.deny[RulesType.COLORS].clear();addSet.rules.deny[RulesType.COLORS].push(bnpColors.data.exterior.current.id);addSet.rules.require[RulesType.COLORS].remove(oColor);i--}}return addSet},convertToDependenciesItem=function(type,id,oRules){var i=0,sId="",sType="",sBehavior="";for(sBehavior in RulesBehavior)for(sType in RulesType)for(i=0;i<oRules[RulesBehavior[sBehavior]][RulesType[sType]].length();i++){sId=oRules[RulesBehavior[sBehavior]][RulesType[sType]].getKey(i);oRules[RulesBehavior[sBehavior]][RulesType[sType]].set(sId,{id:sId,type:type,target:id})}},checkExteriorColor=function(id){var oRules=new Rules,removedId=null,oExterior=bnpColors.data.exterior.current;oExterior&&(removedId=oExterior.id);var resultSet=analyzeTree(RulesType.COLORS,id,removedId);oRules.append(resultSet.rules);if(bnpColors.data.interior.current){var oNewExterior=bnpColors.getById(id);if(oNewExterior&&oNewExterior.exterior&&!oNewExterior.exterior.interior.get(bnpColors.data.interior.current.id)){var newInterior=bnpColors.getDefaultColor(bnpColors.data.interior.list);resultSet=analyzeTree(RulesType.COLORS,newInterior,bnpColors.data.interior.current.id);oRules.append(resultSet.rules)}}if(!oRules.isEmpty()){oRules.include.colors.clear();oRules.require.colors.clear();oRules.deny.colors.clear()}convertToDependenciesItem(RulesType.COLORS,id,oRules);return oRules},checkInteriorColor=function(id){var oRules=new Rules,removedId=null,oInterior=bnpColors.data.interior.current;oInterior&&(removedId=oInterior.id);var resultSet=analyzeTree(RulesType.COLORS,id,removedId);oRules.append(resultSet.rules);if(!oRules.isEmpty()){oRules.include.colors.clear();oRules.require.colors.clear();oRules.deny.colors.clear()}convertToDependenciesItem(RulesType.COLORS,id,oRules);return oRules},checkPackage=function(id){var oRules=new Rules,oPackage=null,addedId=null,removedId=null;if(bnpPackages.data.currentList.get(id))removedId=id;else{addedId=id;bnpPackages.data.currentList.length()>0&&(oPackage=bnpPackages.data.currentList.getByNdx(0));oPackage&&(removedId=oPackage.id)}var resultSet=analyzeTree(RulesType.PACKAGES,addedId,removedId);oRules.append(resultSet.rules);if(!oRules.isEmpty()){oRules.deny.packages.clear();oRules.require.packages.clear();oRules.requireOr.packages.clear()}convertToDependenciesItem(RulesType.PACKAGES,id,oRules);return oRules},checkOption=function(id){var oRules=new Rules,addedId=null,removedId=null;bnpOptions.data.currentList.get(id)?removedId=id:addedId=id;var resultSet=analyzeTree(RulesType.OPTIONS,addedId,removedId);oRules.append(resultSet.rules);convertToDependenciesItem(RulesType.OPTIONS,id,oRules);return oRules};return{checkExteriorColor:checkExteriorColor,checkInteriorColor:checkInteriorColor,checkPackage:checkPackage,checkOption:checkOption}}]);angular.module("app").factory("bnpNavigation",["$log","bnpTrims","bnpColors","bnpPackages","bnpOptions","bnpSummary","buildAndPriceModel","zipCodeCookie","messageService","kiaEvents",function($log,bnpTrims,bnpColors,bnpPackages,bnpOptions,bnpSummary,buildAndPriceModel,zipCodeCookie,messageService,kiaEvents){var init,sections,nextSection,setSection,current,resolve,sectionManager,urlAttributes,updateNavigationState,handleElementsVisibility,addElement,removeElement;sections=[bnpTrims,bnpColors,bnpPackages,bnpOptions,bnpSummary];current={id:0,section:null,next:null};init=function(){setSection(0)};updateNavigationState=function(sectionIndex){for(var i=0;i<sections.length;i++){sections[sectionIndex].navigation.selected=!0;i!==sectionIndex&&(sections[i].navigation.selected=!1)}};setSection=function(section){var sectionIndex;"object"==typeof section?sectionIndex=sections.indexOf(section):"number"==typeof section&&(sectionIndex=section);current.id=sectionIndex;current.section=sections[sectionIndex];updateNavigationState(sectionIndex);0!==sectionIndex&&buildAndPriceModel.initializeColors();handleElementsVisibility();$(window).scrollTop($(".header-crawl").height())};handleElementsVisibility=function(){var packagesAvailable=bnpPackages.data.list.collection.length?!0:!1,optionsAvailable=bnpOptions.data.list.collection.length?!0:!1;packagesAvailable?addElement(bnpPackages,2):removeElement(bnpPackages);optionsAvailable?packagesAvailable?addElement(bnpOptions,3):addElement(bnpOptions,2):removeElement(bnpOptions)};addElement=function(element,position){var indexElement=sections.indexOf(element);-1===indexElement&&sections.splice(position,0,element)};removeElement=function(element){var indexElement=sections.indexOf(element);indexElement>0&&sections.splice(indexElement,1)};nextSection=function(){current.id+=1;setSection(current.id)};resolve=function(attrs){urlAttributes={};angular.copy(attrs,urlAttributes);if(urlAttributes&&urlAttributes.series&&urlAttributes.year){if(urlAttributes.trim||urlAttributes.model){buildAndPriceModel.initialize(urlAttributes.series,urlAttributes.year,buildAndPriceModel.detail.zipCode);messageService.subscribe(kiaEvents.BNP.SUCCESS,function(data,args){if("trims"===args.type){urlAttributes.model?buildAndPriceModel.setByModel(urlAttributes.model):buildAndPriceModel.setTrim(urlAttributes.trim);(urlAttributes.exterior||urlAttributes.interior&&urlAttributes.fabric)&&buildAndPriceModel.initializeColors()}else if("colors"===args.type){urlAttributes.exterior&&buildAndPriceModel.setColorExteriorByHex(urlAttributes.exterior);urlAttributes.interior&&urlAttributes.fabric&&buildAndPriceModel.setColorInteriorByHex(urlAttributes.interior,urlAttributes.fabric);if(urlAttributes.packages&&""!==urlAttributes.packages)for(var packages=urlAttributes.packages.split(","),i=0;i<packages.length;i++)bnpPackages.addPackage(packages[i]);if(urlAttributes.options&&""!==urlAttributes.options)for(var options=urlAttributes.options.split(","),j=0;j<options.length;j++)bnpOptions.addOption(options[j]);"summary"===urlAttributes.section?setSection(sections.indexOf(bnpSummary)):handleElementsVisibility()}})}else if(buildAndPriceModel.detail.zipCode){buildAndPriceModel.initialize(urlAttributes.series,urlAttributes.year,buildAndPriceModel.detail.zipCode);messageService.subscribe(kiaEvents.BNP.SUCCESS,function(data,args){"colors"===args.type&&handleElementsVisibility()})}}else $log.warn("Missing Parameters")};sectionManager=function(){handleElementsVisibility();var bComplete=!1;switch(current.id){case 0:if(urlAttributes.trim){buildAndPriceModel.setTrim(urlAttributes.trim);urlAttributes.model&&(bComplete=buildAndPriceModel.setModel(urlAttributes.model))}else urlAttributes.model&&(bComplete=buildAndPriceModel.setByModel(urlAttributes.model));bComplete&&urlAttributes.exterior&&urlAttributes.interior&&(current.id+=1);break;case 1:urlAttributes.exterior&&buildAndPriceModel.setColorExteriorByHex(urlAttributes.exterior)&&urlAttributes.interior&&(bComplete=buildAndPriceModel.setColorInteriorByHex(urlAttributes.interior,urlAttributes.fabric));break;case 2:break;case 3:}};return{init:init,current:current,sections:sections,nextSection:nextSection,setSection:setSection,resolve:resolve,sectionManager:sectionManager}}]);angular.module("app").factory("formsModel",["$log","$location","kiaEvents",function($log,$location,kiaEvents){function emptyObj(obj){for(var key in obj)delete obj[key]}var data={},init=function(bForce){var params=$location.search();(bForce||null===params||void 0===params.section)&&emptyObj(data)},add=function(key,value){data.key=value},set=function(obj){init(!0);angular.copy(obj,data)};return{data:data,init:init,add:add,set:set}}]);angular.module("app").factory("dealerListService",["$log","$http",function($log,$http){var url,get;url=window.baseURI+"/data/dealers/locator";get=function(params,success,failure){var urlComplete=url+"/"+params.zip+"?series="+(params.series?params.series:"")+"&year="+(params.year?params.year:"");return $http.get(urlComplete,{}).success(function(data,getResponseHeaders){return angular.isFunction(success)?success(data):void 0}).error(failure)};return{get:get}}]);angular.module("app").factory("vinDetailService",["$log","$http",function($log,$http){var url,get;url=window.baseURI+"/data/forms/vehicle/detail";get=function(vin,zip,success,failure){var urlComplete=url+"/"+vin+"?zipcode="+zip;return $http.get(urlComplete,{}).success(function(data,getResponseHeaders){return angular.isFunction(success)?success(data):void 0}).error(failure)};return{get:get}}]);angular.module("app").factory("dealerDetailService",["$log","$http","$rootScope",function($log,$http,$rootScope){var url,get;url=window.baseURI+"/data/dealers/detail";get=function(dealerID,zip,success,failure){var urlComplete=url+"/"+dealerID+"?zipcode="+zip;return $http.get(urlComplete,{}).success(function(data,getResponseHeaders){if(angular.isFunction(success)){$rootScope.dealerDetailsList||($rootScope.dealerDetailsList=[]);$rootScope.dealerDetailsList[dealerID]=data;return success(data)}}).error(failure)};return{get:get}}]);angular.module("app").factory("getaquoteService",["$log","$http",function($log,$http){var url,get,pathArray=window.location.pathname.split("/");url="dev.kia3.local"===window.location.host?window.baseURI+"/submission/getaquote":"https://"+window.location.host+"/us/"+pathArray[2]+"/submission/getaquote";get=function(series,formVal,success,failure){var urlComplete=url+"/"+series;return $http.post(urlComplete,formVal,{headers:{"Content-Type":"text/plain"}}).success(function(data,getResponseHeaders){return angular.isFunction(success)?success(data):void 0}).error(failure)};return{get:get}}]);angular.module("app").factory("requestUpdateService",["$log","$http",function($log,$http){var url,get,pathArray=window.location.pathname.split("/");url="dev.kia3.local"===window.location.host?window.baseURI+"/submission/requestupdate":"https://"+window.location.host+"/us/"+pathArray[2]+"/submission/requestupdate";get=function(formVal,series,success,failure){var urlComplete=url+"/"+series;return $http.post(urlComplete,formVal,{headers:{"Content-Type":"text/plain"}}).success(function(data,getResponseHeaders){return angular.isFunction(success)?success(data):void 0}).error(failure)};return{get:get}}]);angular.module("app").factory("yearListService",["$log","$http",function($log,$http){var url,get;url=window.baseURI+"/data/forms/vehicleyears";get=function(success,failure){var urlComplete=url;return $http.get(urlComplete,{}).success(function(data,getResponseHeaders){return angular.isFunction(success)?success(data):void 0}).error(failure)};return{get:get}}]);angular.module("app").factory("makeListService",["$log","$http",function($log,$http){var url,get;url=window.baseURI+"/data/forms/vehiclemakesbyyear";get=function(year,success,failure){var urlComplete=url+"/"+year;return $http.get(urlComplete,{}).success(function(data,getResponseHeaders){return angular.isFunction(success)?success(data):void 0}).error(failure)};return{get:get}}]);angular.module("app").factory("modelListService",["$log","$http",function($log,$http){var url,get;url=window.baseURI+"/data/forms/vehiclemodelsbyyearandmake";get=function(year,make,success,failure){var urlComplete=url+"/"+year+"/"+make;return $http.get(urlComplete,{}).success(function(data,getResponseHeaders){return angular.isFunction(success)?success(data):void 0}).error(failure)};return{get:get}}]);angular.module("app").factory("conditionListService",["$log","$http",function($log,$http){var url,get;url=window.baseURI+"/data/forms/tradeconditions";get=function(success,failure){var urlComplete=url;return $http.get(urlComplete,{}).success(function(data,getResponseHeaders){return angular.isFunction(success)?success(data):void 0}).error(failure)};return{get:get}}]);angular.module("app").factory("financeOptionsService",["$log","$http",function($log,$http){var url,get;url=window.baseURI+"/data/forms/purchasetypes";get=function(success,failure){var urlComplete=url;return $http.get(urlComplete,{}).success(function(data,getResponseHeaders){return angular.isFunction(success)?success(data):void 0}).error(failure)};return{get:get}}]);angular.module("app").factory("vinQuoteService",["$log","$http",function($log,$http){var url,get;url=window.baseURI+"/submission/getaquote/inventory";get=function(series,formVal,success,failure){var urlComplete=url+"/"+series;return $http.post(urlComplete,formVal).success(function(data,getResponseHeaders){return angular.isFunction(success)?success(data):void 0}).error(failure)};return{get:get}}]);angular.module("app").factory("requestTestDriveService",["$log","$http",function($log,$http){var url,post,pathArray=window.location.pathname.split("/");url="dev.kia3.local"===window.location.host?window.baseURI+"/submission/requesttestdrive":"https://"+window.location.host+"/us/"+pathArray[2]+"/submission/requesttestdrive";post=function(series,formVal,success,failure){var urlComplete=url+"/"+series;return $http.post(urlComplete,formVal,{headers:{"Content-Type":"text/plain"}}).success(function(data,getResponseHeaders){return angular.isFunction(success)?success(data):void 0}).error(failure)};return{post:post}}]);angular.module("app").factory("requestBrochureService",["$log","$http",function($log,$http){var url,post,pathArray=window.location.pathname.split("/");url="dev.kia3.local"===window.location.host?window.baseURI+"/submission/getabrochure":"https://"+window.location.host+"/us/"+pathArray[2]+"/submission/getabrochure";post=function(series,formVal,success,failure){var urlComplete=url+"/"+series;return $http.post(urlComplete,formVal,{headers:{"Content-Type":"text/plain"}}).success(function(data,getResponseHeaders){return angular.isFunction(success)?success(data):void 0}).error(failure)};return{post:post}}]);angular.module("app").factory("zipcodeService",["$log","$http","$routeParams",function($log,$http,$routeParams){var url,validate;url=window.baseURI+"/data/verifyZipcode/";validate=function(zipcode,success,failure){var urlComplete=url+zipcode;return $http.get(urlComplete,{}).success(function(data,getResponseHeaders){return angular.isFunction(success)?success(data):void 0}).error(failure)};return{validate:validate}}]);angular.module("app").factory("buildAndPriceModel",["$log","buildAndPriceService","messageService","$location","bnpTrims","bnpColors","bnpPackages","bnpOptions","bnpPrices","bnpRules","formsModel","kiaEvents","localize","zipcodeService",function($log,buildAndPriceService,messageService,$location,bnpTrims,bnpColors,bnpPackages,bnpOptions,bnpPrices,bnpRules,formsModel,kiaEvents,localize,zipcodeService){var successTrims,successColors,failureTrims,failureColors,loadTrims,loadColors,initializeTrims,initializeColors,validateZipcode,successZipcodeValidation,failureZipcodeValidation,setSerie,setTrimsData,setTrim,setModel,setByModel,setColorExterior,setColorInterior,setColorExteriorByHex,setColorInteriorByHex,setColorsData,getDeeplink,trimNameTranslate,getInventoryDeeplink,getTestDriveLink,getQuoteLink,setQuoteData,reset,lastModel=null,detail={zipCode:"",serie:new Serie,trim:bnpTrims.data.trim,model:bnpTrims.data.model,colors:bnpColors.data,packages:bnpPackages.data,options:bnpOptions.data,price:bnpPrices.price,showInventory:!1,trimsInitialized:!1,colorsInitialized:!1,showTestDrive:!1,showTradeInAppraisal:!1};window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.host);successZipcodeValidation=function(data){data&&data.result?messageService.publish(kiaEvents.BNP.SUCCESS,{source:"buildAndPriceModel",type:"zipcode"}):failureZipcodeValidation(data)};successTrims=function(data){if(data&&data.trimConfiguration)if("200"===data.trimConfiguration.statusCode){setTrimsData(data.trimConfiguration.result);detail.trimsInitialized=!0;messageService.publish(kiaEvents.BNP.SUCCESS,{source:"buildAndPriceModel",type:"trims",detail:detail})}else messageService.publish(kiaEvents.BNP.ERROR,{source:"buildAndPriceModel",type:"trims",statusCode:data.trimConfiguration.statusCode,message:data.trimConfiguration.statusDesc});else messageService.publish(kiaEvents.BNP.ERROR,{source:"buildAndPriceModel",type:"trims",statusCode:"500",message:localize.getLocalizedString("error.601")})};successColors=function(data){if(data&&data.colors&&data.colors.result)if("200"===data.colors.result.statusCode){lastModel=detail.model.current.id;setColorsData(data.colors.result);detail.colorsInitialized=!0;messageService.publish(kiaEvents.BNP.SUCCESS,{source:"buildAndPriceModel",type:"colors",detail:detail})}else messageService.publish(kiaEvents.BNP.ERROR,{source:"buildAndPriceModel",type:"colors",statusCode:data.colors.result.statusCode,message:data.colors.result.statusDesc});else messageService.publish(kiaEvents.BNP.ERROR,{source:"buildAndPriceModel",type:"colors",statusCode:"500",message:localize.getLocalizedString("error.602")})};failureZipcodeValidation=function(data){messageService.publish(kiaEvents.BNP.ERROR,{source:"buildAndPriceModel",type:"zipcode",statusCode:"500",message:localize.getLocalizedString("error.601")})};failureTrims=function(data){messageService.publish(kiaEvents.BNP.ERROR,{source:"buildAndPriceModel",type:"trims",statusCode:"500",message:localize.getLocalizedString("error.601")})};failureColors=function(data){messageService.publish(kiaEvents.BNP.ERROR,{source:"buildAndPriceModel",type:"colors",statusCode:"500",message:localize.getLocalizedString("error.602")})};validateZipcode=function(zipcode){return zipcodeService.validate(zipcode,successZipcodeValidation,failureZipcodeValidation)};loadTrims=function(){return buildAndPriceService.getTrims({zipCode:detail.zipCode,seriesName:detail.serie.key,year:detail.serie.year},successTrims,failureTrims)};loadColors=function(){return buildAndPriceService.getColors({zipCode:detail.zipCode,model:detail.model.current.id},successColors,failureColors)};initializeTrims=function(serieName,year,zipCode){detail.zipCode=zipCode;setSerie(serieName,year)};setSerie=function(serieName,year){if(detail.trimsInitialized&&detail.serie.key===serieName&&detail.serie.year===year)messageService.publish(kiaEvents.BNP.SUCCESS,{source:"buildAndPriceModel",type:"trims",detail:detail});else{detail.serie.key=serieName;detail.serie.name=serieName;detail.serie.year=year;loadTrims()}};setTrimsData=function(data){detail.serie.id=data.series.id;detail.serie.name=data.series.seriesName;detail.serie.compareImg=window.contentURI+data.series.compareImage;detail.serie.panorama.exterior.x=data.exteriorPosition;detail.serie.panorama.exterior.frames=data.exteriorFrames;detail.serie.panorama.interior.x=data.interiorPosition;detail.serie.panorama.interior.frames=data.interiorFrames;detail.serie.panorama.pattern=data.imageFormat;detail.showInventory=data.showInventory===!0||"true"===data.showInventory;detail.showTestDrive=data.showTestDrive===!0||"true"===data.showTestDrive;detail.showTradeInAppraisal=data.showTradeInAppraisal===!0||"true"===data.showTradeInAppraisal;return bnpTrims.init(data.series.trims)};setTrim=function(id){reset();return bnpTrims.setTrim(id)};setModel=function(id){reset();return bnpTrims.setModel(id)};setByModel=function(id){reset();return bnpTrims.setByModel(id)};initializeColors=function(){if(lastModel!==detail.model.current.id||detail.colorsInitialized===!1){detail.colorsInitialized=!1;loadColors()}};setColorsData=function(data){bnpPackages.init(data.packages);bnpColors.init(data);bnpOptions.init(data.options)};setColorExterior=function(id,bForce){var oRules=bnpRules.checkExteriorColor(id),oColor=null;if(bForce||oRules.isEmpty()){oColor=bnpColors.setExterior(id);oColor.dependencies=null;oColor.checking=!1}else{oColor=bnpColors.data.exterior.list.get(id);oColor.dependencies=oRules;oColor.checking=!0}return oColor};setColorExteriorByHex=function(baseHex){return bnpColors.setExteriorByHex(baseHex)};setColorInterior=function(id,bForce){var oRules=bnpRules.checkInteriorColor(id),oColor=null;if(bForce||oRules.isEmpty()){oColor=bnpColors.setInterior(id);oColor.dependencies=null;oColor.checking=!1}else{oColor=bnpColors.data.interior.list.get(id);oColor.dependencies=oRules;oColor.checking=!0}return oColor};setColorInteriorByHex=function(baseHex,fabricId){return bnpColors.setInteriorByHex(baseHex,fabricId)};var getParamsFromObject=function(obj){var sDeeplink="";for(var key in obj){""!==sDeeplink&&(sDeeplink+="&");sDeeplink+=Array.isArray(obj[key])?key+"="+obj[key].join(","):key+"="+obj[key]}return sDeeplink};getDeeplink=function(){var oDeeplink={series:detail.serie.key,year:detail.serie.year},i=0;oDeeplink.trim=detail.trim.current.id;oDeeplink.model=detail.model.current.id;null!==detail.colors.exterior.current&&(oDeeplink.exterior=detail.colors.exterior.current.baseHex);if(null!==detail.colors.interior.current){oDeeplink.interior=detail.colors.interior.current.baseHex;oDeeplink.fabric=detail.colors.interior.current.fabric.id}if(detail.packages.currentList.length()>0){oDeeplink.packages=[];for(i=0;i<detail.packages.currentList.length();i++)oDeeplink.packages.push(detail.packages.currentList.getByNdx(i).id)}if(detail.options.currentList.length()>0){oDeeplink.options=[];for(i=0;i<detail.options.currentList.length();i++)oDeeplink.options.push(detail.options.currentList.getByNdx(i).id)}var sDeeplink=getParamsFromObject(oDeeplink);sDeeplink=window.location.origin+window.baseURI+"/build?"+sDeeplink+"&section=summary";return sDeeplink};trimNameTranslate=function(trimName){var translatedName=trimName.split(" ")[0];"limited"===trimName.toLowerCase()?translatedName="SXL":"!"===trimName.toLowerCase()?translatedName="EXCLAIM":"+"===trimName.toLowerCase()?"B"===detail.serie.id.toUpperCase()?translatedName="PLUS":"Y"===detail.serie.id.toUpperCase()&&(translatedName="EV+"):"base"===trimName.toLowerCase()?"5.5"===detail.serie.id?translatedName="LX":"Y"===detail.serie.id.toUpperCase()&&(translatedName="EV"):"7"===detail.serie.id&&"SX V6"===trimName.toUpperCase()&&(translatedName="SX");return translatedName};getInventoryDeeplink=function(){var oDeeplink={series:detail.serie.key,year:detail.serie.year};null!==detail.trim.current&&(oDeeplink.trimName=trimNameTranslate(detail.trim.current.name));null!==detail.colors.exterior.current&&(oDeeplink.exterior=detail.colors.exterior.current.baseHex);var sDeeplink=getParamsFromObject(oDeeplink);sDeeplink=window.location.origin+window.baseURI+"/dealers/inventory?"+sDeeplink;return sDeeplink};getTestDriveLink=function(){var sLink=window.baseURI+"/forms/testdriverequest/"+detail.serie.key+"/"+detail.serie.year+"?section=build";return sLink};getQuoteLink=function(){var sLink=window.baseURI+"/forms/getaquote/"+detail.serie.key+"/"+detail.serie.year+"?section=build";return sLink};setQuoteData=function(){var oDeeplink={seriesId:detail.serie.id,year:detail.serie.year,trim:detail.trim.current.name,modelId:detail.model.current.id};null!==detail.colors.exterior.current&&(oDeeplink.exteriorColor=detail.colors.exterior.current.name);if(null!==detail.colors.interior.current){oDeeplink.interiorColor=detail.colors.interior.current.name;oDeeplink.seatType=detail.colors.interior.current.fabric.name}if(detail.packages.currentList.length()>0){oDeeplink.packages=[];for(var i=0;i<detail.packages.currentList.length();i++)oDeeplink.packages.push(detail.packages.currentList.getByNdx(i).name)}if(detail.options.currentList.length()>0){oDeeplink.options=[];for(var j=0;j<detail.options.currentList.length();j++)oDeeplink.options.push(detail.options.currentList.getByNdx(j).name)}oDeeplink.section="build";console.log(oDeeplink);formsModel.set(oDeeplink)};var getBnpConfig=function(){var packagesAll=detail.packages.list.collection,packagesSelected=detail.price.packages.collection,optionsAll=detail.options.list.collection,optionsSelected=detail.price.options.collection,config={modelId:"",extColorId:"",intColorId:"",fabricId:"",optionCodes:[]};null!==detail.model.current&&(config.modelId=detail.model.current.id);null!==detail.colors.exterior.current&&(config.extColorId=detail.colors.exterior.current.id);if(null!==detail.colors.interior.current){config.intColorId=detail.colors.interior.current.id.split("-")[0];config.fabricId=detail.colors.interior.current.fabric.id}packagesSelected.forEach(function(value,key){for(var i=0;i<packagesAll.length;i++)if(packagesAll[i].key===value.key){config.optionCodes.push(packagesAll[i].value.optionCode);break}});optionsSelected.forEach(function(value,key){for(var i=0;i<optionsAll.length;i++)if(optionsAll[i].key===value.key){config.optionCodes.push(optionsAll[i].value.optionCode);break}});return config};reset=function(bIncludeTrims){bnpPrices.reset(bIncludeTrims);bIncludeTrims&&bnpTrims.reset();detail.colorsInitialized=!1;bnpColors.reset();bnpPackages.reset();bnpOptions.reset()};return{detail:detail,validateZipcode:validateZipcode,initialize:initializeTrims,initializeColors:initializeColors,setTrim:setTrim,setModel:setModel,setByModel:setByModel,setColorInterior:setColorInterior,setColorExterior:setColorExterior,setColorExteriorByHex:setColorExteriorByHex,setColorInteriorByHex:setColorInteriorByHex,getDeeplink:getDeeplink,getInventoryDeeplink:getInventoryDeeplink,getTestDriveLink:getTestDriveLink,getQuoteLink:getQuoteLink,setQuoteData:setQuoteData,getBnpConfig:getBnpConfig,reset:reset}}]);!function(a){function d(b){var c=b||window.event,d=[].slice.call(arguments,1),e=0,g=0,h=0;return b=a.event.fix(c),b.type="mousewheel",c.wheelDelta&&(e=c.wheelDelta/120),c.detail&&(e=-c.detail/3),h=e,void 0!==c.axis&&c.axis===c.HORIZONTAL_AXIS&&(h=0,g=-1*e),void 0!==c.wheelDeltaY&&(h=c.wheelDeltaY/120),
void 0!==c.wheelDeltaX&&(g=-1*c.wheelDeltaX/120),d.unshift(b,e,g,h),(a.event.dispatch||a.event.handle).apply(this,d)}var b=["DOMMouseScroll","mousewheel"];if(a.event.fixHooks)for(var c=b.length;c;)a.event.fixHooks[b[--c]]=a.event.mouseHooks;a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=b.length;a;)this.addEventListener(b[--a],d,!1);else this.onmousewheel=d},teardown:function(){if(this.removeEventListener)for(var a=b.length;a;)this.removeEventListener(b[--a],d,!1);else this.onmousewheel=null}},a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}(jQuery);!function($){"use strict";var DEFAULT_SETTINGS={decelerate:!0,triggerHardware:!1,y:!0,x:!0,slowdown:.9,maxvelocity:40,throttleFPS:60,movingClass:{up:"kinetic-moving-up",down:"kinetic-moving-down",left:"kinetic-moving-left",right:"kinetic-moving-right"},deceleratingClass:{up:"kinetic-decelerating-up",down:"kinetic-decelerating-down",left:"kinetic-decelerating-left",right:"kinetic-decelerating-right"}},SETTINGS_KEY="kinetic-settings",ACTIVE_CLASS="kinetic-active";window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback,element){window.setTimeout(callback,1e3/60)}}());$.support=$.support||{};$.extend($.support,{touch:"ontouchend"in document});var selectStart=function(){return!1},decelerateVelocity=function(velocity,slowdown){return 0===Math.floor(Math.abs(velocity))?0:velocity*slowdown},capVelocity=function(velocity,max){var newVelocity=velocity;velocity>0?velocity>max&&(newVelocity=max):0-max>velocity&&(newVelocity=0-max);return newVelocity},setMoveClasses=function(settings,classes){this.removeClass(settings.movingClass.up).removeClass(settings.movingClass.down).removeClass(settings.movingClass.left).removeClass(settings.movingClass.right).removeClass(settings.deceleratingClass.up).removeClass(settings.deceleratingClass.down).removeClass(settings.deceleratingClass.left).removeClass(settings.deceleratingClass.right);settings.velocity>0&&this.addClass(classes.right);settings.velocity<0&&this.addClass(classes.left);settings.velocityY>0&&this.addClass(classes.down);settings.velocityY<0&&this.addClass(classes.up)},stop=function($scroller,settings){"function"==typeof settings.stopped&&settings.stopped.call($scroller,settings)},move=function($scroller,settings){var scroller=$scroller[0];if(settings.x&&scroller.scrollWidth>0){scroller.scrollLeft=settings.scrollLeft=scroller.scrollLeft+settings.velocity;Math.abs(settings.velocity)>0&&(settings.velocity=settings.decelerate?decelerateVelocity(settings.velocity,settings.slowdown):settings.velocity)}else settings.velocity=0;if(settings.y&&scroller.scrollHeight>0){scroller.scrollTop=settings.scrollTop=scroller.scrollTop+settings.velocityY;Math.abs(settings.velocityY)>0&&(settings.velocityY=settings.decelerate?decelerateVelocity(settings.velocityY,settings.slowdown):settings.velocityY)}else settings.velocityY=0;setMoveClasses.call($scroller,settings,settings.deceleratingClass);"function"==typeof settings.moved&&settings.moved.call($scroller,settings);Math.abs(settings.velocity)>0||Math.abs(settings.velocityY)>0?window.requestAnimationFrame(function(){move($scroller,settings)}):stop($scroller,settings)},callOption=function(method,options){var methodFn=$.kinetic.callMethods[method],args=Array.prototype.slice.call(arguments);methodFn&&this.each(function(){var opts=args.slice(1),settings=$(this).data(SETTINGS_KEY);opts.unshift(settings);methodFn.apply(this,opts)})},attachListeners=function($this,settings){var element=$this[0];if($.support.touch){element.addEventListener("touchstart",settings.events.touchStart,!1);element.addEventListener("touchend",settings.events.inputEnd,!1);element.addEventListener("touchmove",settings.events.touchMove,!1)}else $this.mousedown(settings.events.inputDown).mouseup(settings.events.inputEnd).mousemove(settings.events.inputMove);$this.click(settings.events.inputClick).bind("selectstart",selectStart);$this.bind("dragstart",settings.events.dragStart)},detachListeners=function($this,settings){var element=$this[0];if($.support.touch){element.removeEventListener("touchstart",settings.events.touchStart,!1);element.removeEventListener("touchend",settings.events.inputEnd,!1);element.removeEventListener("touchmove",settings.events.touchMove,!1)}else $this.unbind("mousedown",settings.events.inputDown).unbind("mouseup",settings.events.inputEnd).unbind("mousemove",settings.events.inputMove);$this.unbind("click",settings.events.inputClick).unbind("selectstart",selectStart);$this.unbind("dragstart",settings.events.dragStart)},initElements=function(options){this.addClass(ACTIVE_CLASS).each(function(){var xpos,ypos,lastMove,elementFocused,settings=$.extend({},DEFAULT_SETTINGS,options),self=this,$this=$(this),prevXPos=!1,prevYPos=!1,mouseDown=!1,throttleTimeout=1e3/settings.throttleFPS;settings.velocity=0;settings.velocityY=0;var resetMouse=function(){xpos=!1;ypos=!1;mouseDown=!1};$(document).mouseup(resetMouse).click(resetMouse);var calculateVelocities=function(){settings.velocity=capVelocity(prevXPos-xpos,settings.maxvelocity);settings.velocityY=capVelocity(prevYPos-ypos,settings.maxvelocity)},useTarget=function(target){return $.isFunction(settings.filterTarget)?settings.filterTarget.call(self,target)!==!1:!0},start=function(clientX,clientY){mouseDown=!0;settings.velocity=prevXPos=0;settings.velocityY=prevYPos=0;xpos=clientX;ypos=clientY},end=function(){if(xpos&&prevXPos&&settings.decelerate===!1){settings.decelerate=!0;calculateVelocities();xpos=prevXPos=mouseDown=!1;move($this,settings)}},inputmove=function(clientX,clientY){if(!lastMove||new Date>new Date(lastMove.getTime()+throttleTimeout)){lastMove=new Date;if(mouseDown&&(xpos||ypos)){if(elementFocused){$(elementFocused).blur();elementFocused=null;$this.focus()}settings.decelerate=!1;settings.velocity=settings.velocityY=0;$this[0].scrollLeft=settings.scrollLeft=settings.x?$this[0].scrollLeft-(clientX-xpos):$this[0].scrollLeft;$this[0].scrollTop=settings.scrollTop=settings.y?$this[0].scrollTop-(clientY-ypos):$this[0].scrollTop;prevXPos=xpos;prevYPos=ypos;xpos=clientX;ypos=clientY;calculateVelocities();setMoveClasses.call($this,settings,settings.movingClass);"function"==typeof settings.moved&&settings.moved.call($this,settings)}}};settings.events={touchStart:function(e){if(useTarget(e.target)){start(e.touches[0].clientX,e.touches[0].clientY);e.stopPropagation()}},touchMove:function(e){if(mouseDown){inputmove(e.touches[0].clientX,e.touches[0].clientY);e.preventDefault&&e.preventDefault()}},inputDown:function(e){if(useTarget(e.target)){start(e.clientX,e.clientY);elementFocused=e.target;"IMG"===e.target.nodeName&&e.preventDefault();e.stopPropagation()}},inputEnd:function(e){end();elementFocused=null},inputMove:function(e){mouseDown&&inputmove(e.clientX,e.clientY)},inputClick:function(e){return Math.abs(settings.velocity)>0?!1:void 0},dragStart:function(e){return elementFocused?!1:void 0}};attachListeners($this,settings);$this.data(SETTINGS_KEY,settings).css("cursor","move");settings.triggerHardware&&$this.css("-webkit-transform","translate3d(0,0,0)")})};$.kinetic={settingsKey:SETTINGS_KEY,callMethods:{start:function(settings,options){var $this=$(this);settings=$.extend(settings,options);if(settings){settings.decelerate=!1;move($this,settings)}},end:function(settings,options){$(this);settings&&(settings.decelerate=!0)},stop:function(settings,options){settings.velocity=0;settings.velocityY=0;settings.decelerate=!0},detach:function(settings,options){var $this=$(this);detachListeners($this,settings);$this.removeClass(ACTIVE_CLASS).css("cursor","")},attach:function(settings,options){var $this=$(this);attachListeners($this,settings);$this.addClass(ACTIVE_CLASS).css("cursor","move")}}};$.fn.kinetic=function(options){"string"==typeof options?callOption.apply(this,arguments):initElements.call(this,options);return this}}(window.jQuery||window.Zepto);!function($,undefined){function focusable(element,isTabIndexNotNaN){var map,mapName,img,nodeName=element.nodeName.toLowerCase();if("area"===nodeName){map=element.parentNode;mapName=map.name;if(!element.href||!mapName||"map"!==map.nodeName.toLowerCase())return!1;img=$("img[usemap=#"+mapName+"]")[0];return!!img&&visible(img)}return(/input|select|textarea|button|object/.test(nodeName)?!element.disabled:"a"===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element)}function visible(element){return $.expr.filters.visible(element)&&!$(element).parents().addBack().filter(function(){return"hidden"===$.css(this,"visibility")}).length}var uuid=0,runiqueId=/^ui-id-\d+$/;$.ui=$.ui||{};$.extend($.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});$.fn.extend({focus:function(orig){return function(delay,fn){return"number"==typeof delay?this.each(function(){var elem=this;setTimeout(function(){$(elem).focus();fn&&fn.call(elem)},delay)}):orig.apply(this,arguments)}}($.fn.focus),scrollParent:function(){var scrollParent;scrollParent=$.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test($.css(this,"position"))&&/(auto|scroll)/.test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"))}).eq(0);return/fixed/.test(this.css("position"))||!scrollParent.length?$(document):scrollParent},zIndex:function(zIndex){if(zIndex!==undefined)return this.css("zIndex",zIndex);if(this.length)for(var position,value,elem=$(this[0]);elem.length&&elem[0]!==document;){position=elem.css("position");if("absolute"===position||"relative"===position||"fixed"===position){value=parseInt(elem.css("zIndex"),10);if(!isNaN(value)&&0!==value)return value}elem=elem.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++uuid)})},removeUniqueId:function(){return this.each(function(){runiqueId.test(this.id)&&$(this).removeAttr("id")})}});$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo(function(dataName){return function(elem){return!!$.data(elem,dataName)}}):function(elem,i,match){return!!$.data(elem,match[3])},focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")))},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||tabIndex>=0)&&focusable(element,!isTabIndexNaN)}});$("<a>").outerWidth(1).jquery||$.each(["Width","Height"],function(i,name){function reduce(elem,size,border,margin){$.each(side,function(){size-=parseFloat($.css(elem,"padding"+this))||0;border&&(size-=parseFloat($.css(elem,"border"+this+"Width"))||0);margin&&(size-=parseFloat($.css(elem,"margin"+this))||0)});return size}var side="Width"===name?["Left","Right"]:["Top","Bottom"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};$.fn["inner"+name]=function(size){return size===undefined?orig["inner"+name].call(this):this.each(function(){$(this).css(type,reduce(this,size)+"px")})};$.fn["outer"+name]=function(size,margin){return"number"!=typeof size?orig["outer"+name].call(this,size):this.each(function(){$(this).css(type,reduce(this,size,!0,margin)+"px")})}});$.fn.addBack||($.fn.addBack=function(selector){return this.add(null==selector?this.prevObject:this.prevObject.filter(selector))});$("<a>").data("a-b","a").removeData("a-b").data("a-b")&&($.fn.removeData=function(removeData){return function(key){return arguments.length?removeData.call(this,$.camelCase(key)):removeData.call(this)}}($.fn.removeData));$.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());$.support.selectstart="onselectstart"in document.createElement("div");$.fn.extend({disableSelection:function(){return this.bind(($.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(event){event.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});$.extend($.ui,{plugin:{add:function(module,option,set){var i,proto=$.ui[module].prototype;for(i in set){proto.plugins[i]=proto.plugins[i]||[];proto.plugins[i].push([option,set[i]])}},call:function(instance,name,args){var i,set=instance.plugins[name];if(set&&instance.element[0].parentNode&&11!==instance.element[0].parentNode.nodeType)for(i=0;i<set.length;i++)instance.options[set[i][0]]&&set[i][1].apply(instance.element,args)}},hasScroll:function(el,a){if("hidden"===$(el).css("overflow"))return!1;var scroll=a&&"left"===a?"scrollLeft":"scrollTop",has=!1;if(el[scroll]>0)return!0;el[scroll]=1;has=el[scroll]>0;el[scroll]=0;return has}})}(jQuery);!function($,undefined){var uuid=0,slice=Array.prototype.slice,_cleanData=$.cleanData;$.cleanData=function(elems){for(var elem,i=0;null!=(elem=elems[i]);i++)try{$(elem).triggerHandler("remove")}catch(e){}_cleanData(elems)};$.widget=function(name,base,prototype){var fullName,existingConstructor,constructor,basePrototype,proxiedPrototype={},namespace=name.split(".")[0];name=name.split(".")[1];fullName=namespace+"-"+name;if(!prototype){prototype=base;base=$.Widget}$.expr[":"][fullName.toLowerCase()]=function(elem){return!!$.data(elem,fullName)};$[namespace]=$[namespace]||{};existingConstructor=$[namespace][name];constructor=$[namespace][name]=function(options,element){if(!this._createWidget)return new constructor(options,element);arguments.length&&this._createWidget(options,element)};$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]});basePrototype=new base;basePrototype.options=$.widget.extend({},basePrototype.options);$.each(prototype,function(prop,value){$.isFunction(value)?proxiedPrototype[prop]=function(){var _super=function(){return base.prototype[prop].apply(this,arguments)},_superApply=function(args){return base.prototype[prop].apply(this,args)};return function(){var returnValue,__super=this._super,__superApply=this._superApply;this._super=_super;this._superApply=_superApply;returnValue=value.apply(this,arguments);this._super=__super;this._superApply=__superApply;return returnValue}}():proxiedPrototype[prop]=value});constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:existingConstructor?basePrototype.widgetEventPrefix:name},proxiedPrototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetFullName:fullName});if(existingConstructor){$.each(existingConstructor._childConstructors,function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto)});delete existingConstructor._childConstructors}else base._childConstructors.push(constructor);$.widget.bridge(name,constructor)};$.widget.extend=function(target){for(var key,value,input=slice.call(arguments,1),inputIndex=0,inputLength=input.length;inputLength>inputIndex;inputIndex++)for(key in input[inputIndex]){value=input[inputIndex][key];input[inputIndex].hasOwnProperty(key)&&value!==undefined&&($.isPlainObject(value)?target[key]=$.isPlainObject(target[key])?$.widget.extend({},target[key],value):$.widget.extend({},value):target[key]=value)}return target};$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName||name;$.fn[name]=function(options){var isMethodCall="string"==typeof options,args=slice.call(arguments,1),returnValue=this;options=!isMethodCall&&args.length?$.widget.extend.apply(null,[options].concat(args)):options;isMethodCall?this.each(function(){var methodValue,instance=$.data(this,fullName);if(!instance)return $.error("cannot call methods on "+name+" prior to initialization; attempted to call method '"+options+"'");if(!$.isFunction(instance[options])||"_"===options.charAt(0))return $.error("no such method '"+options+"' for "+name+" widget instance");methodValue=instance[options].apply(instance,args);if(methodValue!==instance&&methodValue!==undefined){returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue;return!1}}):this.each(function(){var instance=$.data(this,fullName);instance?instance.option(options||{})._init():$.data(this,fullName,new object(options,this))});return returnValue}};$.Widget=function(){};$.Widget._childConstructors=[];$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0];this.element=$(element);this.uuid=uuid++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=$.widget.extend({},this.options,this._getCreateOptions(),options);this.bindings=$();this.hoverable=$();this.focusable=$();if(element!==this){$.data(element,this.widgetFullName,this);this._on(!0,this.element,{remove:function(event){event.target===element&&this.destroy()}});this.document=$(element.style?element.ownerDocument:element.document||element);this.window=$(this.document[0].defaultView||this.document[0].parentWindow)}this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:$.noop,_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:$.noop,widget:function(){return this.element},option:function(key,value){var parts,curOption,i,options=key;if(0===arguments.length)return $.widget.extend({},this.options);if("string"==typeof key){options={};parts=key.split(".");key=parts.shift();if(parts.length){curOption=options[key]=$.widget.extend({},this.options[key]);for(i=0;i<parts.length-1;i++){curOption[parts[i]]=curOption[parts[i]]||{};curOption=curOption[parts[i]]}key=parts.pop();if(value===undefined)return curOption[key]===undefined?null:curOption[key];curOption[key]=value}else{if(value===undefined)return this.options[key]===undefined?null:this.options[key];options[key]=value}}this._setOptions(options);return this},_setOptions:function(options){var key;for(key in options)this._setOption(key,options[key]);return this},_setOption:function(key,value){this.options[key]=value;if("disabled"===key){this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!value).attr("aria-disabled",value);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")}return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(suppressDisabledCheck,element,handlers){var delegateElement,instance=this;if("boolean"!=typeof suppressDisabledCheck){handlers=element;element=suppressDisabledCheck;suppressDisabledCheck=!1}if(handlers){element=delegateElement=$(element);this.bindings=this.bindings.add(element)}else{handlers=element;element=this.element;delegateElement=this.widget()}$.each(handlers,function(event,handler){function handlerProxy(){return suppressDisabledCheck||instance.options.disabled!==!0&&!$(this).hasClass("ui-state-disabled")?("string"==typeof handler?instance[handler]:handler).apply(instance,arguments):void 0}"string"!=typeof handler&&(handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++);var match=event.match(/^(\w+)\s*(.*)$/),eventName=match[1]+instance.eventNamespace,selector=match[2];selector?delegateElement.delegate(selector,eventName,handlerProxy):element.bind(eventName,handlerProxy)})},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;element.unbind(eventName).undelegate(eventName)},_delay:function(handler,delay){function handlerProxy(){return("string"==typeof handler?instance[handler]:handler).apply(instance,arguments)}var instance=this;return setTimeout(handlerProxy,delay||0)},_hoverable:function(element){this.hoverable=this.hoverable.add(element);this._on(element,{mouseenter:function(event){$(event.currentTarget).addClass("ui-state-hover")},mouseleave:function(event){$(event.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(element){this.focusable=this.focusable.add(element);this._on(element,{focusin:function(event){$(event.currentTarget).addClass("ui-state-focus")},focusout:function(event){$(event.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(type,event,data){var prop,orig,callback=this.options[type];data=data||{};event=$.Event(event);event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase();event.target=this.element[0];orig=event.originalEvent;if(orig)for(prop in orig)prop in event||(event[prop]=orig[prop]);this.element.trigger(event,data);return!($.isFunction(callback)&&callback.apply(this.element[0],[event].concat(data))===!1||event.isDefaultPrevented())}};$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){"string"==typeof options&&(options={effect:options});var hasOptions,effectName=options?options===!0||"number"==typeof options?defaultEffect:options.effect||defaultEffect:method;options=options||{};"number"==typeof options&&(options={duration:options});hasOptions=!$.isEmptyObject(options);options.complete=callback;options.delay&&element.delay(options.delay);hasOptions&&$.effects&&$.effects.effect[effectName]?element[method](options):effectName!==method&&element[effectName]?element[effectName](options.duration,options.easing,callback):element.queue(function(next){$(this)[method]();callback&&callback.call(element[0]);next()})}})}(jQuery);!function($,undefined){var mouseHandled=!1;$(document).mouseup(function(){mouseHandled=!1});$.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var that=this;this.element.bind("mousedown."+this.widgetName,function(event){return that._mouseDown(event)}).bind("click."+this.widgetName,function(event){if(!0===$.data(event.target,that.widgetName+".preventClickEvent")){$.removeData(event.target,that.widgetName+".preventClickEvent");event.stopImmediatePropagation();return!1}});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&$(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(event){if(!mouseHandled){this._mouseStarted&&this._mouseUp(event);this._mouseDownEvent=event;var that=this,btnIsLeft=1===event.which,elIsCancel="string"==typeof this.options.cancel&&event.target.nodeName?$(event.target).closest(this.options.cancel).length:!1;if(!btnIsLeft||elIsCancel||!this._mouseCapture(event))return!0;this.mouseDelayMet=!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){that.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=this._mouseStart(event)!==!1;if(!this._mouseStarted){event.preventDefault();return!0}}!0===$.data(event.target,this.widgetName+".preventClickEvent")&&$.removeData(event.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(event){return that._mouseMove(event)};this._mouseUpDelegate=function(event){return that._mouseUp(event)};$(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);event.preventDefault();mouseHandled=!0;return!0}},_mouseMove:function(event){if($.ui.ie&&(!document.documentMode||document.documentMode<9)&&!event.button)return this._mouseUp(event);if(this._mouseStarted){this._mouseDrag(event);return event.preventDefault()}if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=this._mouseStart(this._mouseDownEvent,event)!==!1;this._mouseStarted?this._mouseDrag(event):this._mouseUp(event)}return!this._mouseStarted},_mouseUp:function(event){$(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=!1;event.target===this._mouseDownEvent.target&&$.data(event.target,this.widgetName+".preventClickEvent",!0);this._mouseStop(event)}return!1},_mouseDistanceMet:function(event){return Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery);!function($,undefined){function getOffsets(offsets,width,height){return[parseFloat(offsets[0])*(rpercent.test(offsets[0])?width/100:1),parseFloat(offsets[1])*(rpercent.test(offsets[1])?height/100:1)]}function parseCss(element,property){return parseInt($.css(element,property),10)||0}function getDimensions(elem){var raw=elem[0];return 9===raw.nodeType?{width:elem.width(),height:elem.height(),offset:{top:0,left:0}}:$.isWindow(raw)?{width:elem.width(),height:elem.height(),offset:{top:elem.scrollTop(),left:elem.scrollLeft()}}:raw.preventDefault?{width:0,height:0,offset:{top:raw.pageY,left:raw.pageX}}:{width:elem.outerWidth(),height:elem.outerHeight(),offset:elem.offset()}}$.ui=$.ui||{};var cachedScrollbarWidth,max=Math.max,abs=Math.abs,round=Math.round,rhorizontal=/left|center|right/,rvertical=/top|center|bottom/,roffset=/[\+\-]\d+(\.[\d]+)?%?/,rposition=/^\w+/,rpercent=/%$/,_position=$.fn.position;$.position={scrollbarWidth:function(){if(cachedScrollbarWidth!==undefined)return cachedScrollbarWidth;var w1,w2,div=$("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),innerDiv=div.children()[0];$("body").append(div);w1=innerDiv.offsetWidth;div.css("overflow","scroll");w2=innerDiv.offsetWidth;w1===w2&&(w2=div[0].clientWidth);div.remove();return cachedScrollbarWidth=w1-w2},getScrollInfo:function(within){var overflowX=within.isWindow?"":within.element.css("overflow-x"),overflowY=within.isWindow?"":within.element.css("overflow-y"),hasOverflowX="scroll"===overflowX||"auto"===overflowX&&within.width<within.element[0].scrollWidth,hasOverflowY="scroll"===overflowY||"auto"===overflowY&&within.height<within.element[0].scrollHeight;return{width:hasOverflowY?$.position.scrollbarWidth():0,height:hasOverflowX?$.position.scrollbarWidth():0}},getWithinInfo:function(element){var withinElement=$(element||window),isWindow=$.isWindow(withinElement[0]);return{element:withinElement,isWindow:isWindow,offset:withinElement.offset()||{left:0,top:0},scrollLeft:withinElement.scrollLeft(),scrollTop:withinElement.scrollTop(),width:isWindow?withinElement.width():withinElement.outerWidth(),height:isWindow?withinElement.height():withinElement.outerHeight()}}};$.fn.position=function(options){if(!options||!options.of)return _position.apply(this,arguments);options=$.extend({},options);var atOffset,targetWidth,targetHeight,targetOffset,basePosition,dimensions,target=$(options.of),within=$.position.getWithinInfo(options.within),scrollInfo=$.position.getScrollInfo(within),collision=(options.collision||"flip").split(" "),offsets={};dimensions=getDimensions(target);target[0].preventDefault&&(options.at="left top");targetWidth=dimensions.width;targetHeight=dimensions.height;targetOffset=dimensions.offset;basePosition=$.extend({},targetOffset);$.each(["my","at"],function(){var horizontalOffset,verticalOffset,pos=(options[this]||"").split(" ");1===pos.length&&(pos=rhorizontal.test(pos[0])?pos.concat(["center"]):rvertical.test(pos[0])?["center"].concat(pos):["center","center"]);pos[0]=rhorizontal.test(pos[0])?pos[0]:"center";pos[1]=rvertical.test(pos[1])?pos[1]:"center";horizontalOffset=roffset.exec(pos[0]);verticalOffset=roffset.exec(pos[1]);offsets[this]=[horizontalOffset?horizontalOffset[0]:0,verticalOffset?verticalOffset[0]:0];options[this]=[rposition.exec(pos[0])[0],rposition.exec(pos[1])[0]]});1===collision.length&&(collision[1]=collision[0]);"right"===options.at[0]?basePosition.left+=targetWidth:"center"===options.at[0]&&(basePosition.left+=targetWidth/2);"bottom"===options.at[1]?basePosition.top+=targetHeight:"center"===options.at[1]&&(basePosition.top+=targetHeight/2);atOffset=getOffsets(offsets.at,targetWidth,targetHeight);basePosition.left+=atOffset[0];basePosition.top+=atOffset[1];return this.each(function(){var collisionPosition,using,elem=$(this),elemWidth=elem.outerWidth(),elemHeight=elem.outerHeight(),marginLeft=parseCss(this,"marginLeft"),marginTop=parseCss(this,"marginTop"),collisionWidth=elemWidth+marginLeft+parseCss(this,"marginRight")+scrollInfo.width,collisionHeight=elemHeight+marginTop+parseCss(this,"marginBottom")+scrollInfo.height,position=$.extend({},basePosition),myOffset=getOffsets(offsets.my,elem.outerWidth(),elem.outerHeight());"right"===options.my[0]?position.left-=elemWidth:"center"===options.my[0]&&(position.left-=elemWidth/2);"bottom"===options.my[1]?position.top-=elemHeight:"center"===options.my[1]&&(position.top-=elemHeight/2);position.left+=myOffset[0];position.top+=myOffset[1];if(!$.support.offsetFractions){position.left=round(position.left);position.top=round(position.top)}collisionPosition={marginLeft:marginLeft,marginTop:marginTop};$.each(["left","top"],function(i,dir){$.ui.position[collision[i]]&&$.ui.position[collision[i]][dir](position,{targetWidth:targetWidth,targetHeight:targetHeight,elemWidth:elemWidth,elemHeight:elemHeight,collisionPosition:collisionPosition,collisionWidth:collisionWidth,collisionHeight:collisionHeight,offset:[atOffset[0]+myOffset[0],atOffset[1]+myOffset[1]],my:options.my,at:options.at,within:within,elem:elem})});options.using&&(using=function(props){var left=targetOffset.left-position.left,right=left+targetWidth-elemWidth,top=targetOffset.top-position.top,bottom=top+targetHeight-elemHeight,feedback={target:{element:target,left:targetOffset.left,top:targetOffset.top,width:targetWidth,height:targetHeight},element:{element:elem,left:position.left,top:position.top,width:elemWidth,height:elemHeight},horizontal:0>right?"left":left>0?"right":"center",vertical:0>bottom?"top":top>0?"bottom":"middle"};elemWidth>targetWidth&&abs(left+right)<targetWidth&&(feedback.horizontal="center");elemHeight>targetHeight&&abs(top+bottom)<targetHeight&&(feedback.vertical="middle");max(abs(left),abs(right))>max(abs(top),abs(bottom))?feedback.important="horizontal":feedback.important="vertical";options.using.call(this,props,feedback)});elem.offset($.extend(position,{using:using}))})};$.ui.position={fit:{left:function(position,data){var newOverRight,within=data.within,withinOffset=within.isWindow?within.scrollLeft:within.offset.left,outerWidth=within.width,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=withinOffset-collisionPosLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-withinOffset;if(data.collisionWidth>outerWidth)if(overLeft>0&&0>=overRight){newOverRight=position.left+overLeft+data.collisionWidth-outerWidth-withinOffset;position.left+=overLeft-newOverRight}else overRight>0&&0>=overLeft?position.left=withinOffset:overLeft>overRight?position.left=withinOffset+outerWidth-data.collisionWidth:position.left=withinOffset;else overLeft>0?position.left+=overLeft:overRight>0?position.left-=overRight:position.left=max(position.left-collisionPosLeft,position.left);
},top:function(position,data){var newOverBottom,within=data.within,withinOffset=within.isWindow?within.scrollTop:within.offset.top,outerHeight=data.within.height,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=withinOffset-collisionPosTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-withinOffset;if(data.collisionHeight>outerHeight)if(overTop>0&&0>=overBottom){newOverBottom=position.top+overTop+data.collisionHeight-outerHeight-withinOffset;position.top+=overTop-newOverBottom}else overBottom>0&&0>=overTop?position.top=withinOffset:overTop>overBottom?position.top=withinOffset+outerHeight-data.collisionHeight:position.top=withinOffset;else overTop>0?position.top+=overTop:overBottom>0?position.top-=overBottom:position.top=max(position.top-collisionPosTop,position.top)}},flip:{left:function(position,data){var newOverRight,newOverLeft,within=data.within,withinOffset=within.offset.left+within.scrollLeft,outerWidth=within.width,offsetLeft=within.isWindow?within.scrollLeft:within.offset.left,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=collisionPosLeft-offsetLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-offsetLeft,myOffset="left"===data.my[0]?-data.elemWidth:"right"===data.my[0]?data.elemWidth:0,atOffset="left"===data.at[0]?data.targetWidth:"right"===data.at[0]?-data.targetWidth:0,offset=-2*data.offset[0];if(0>overLeft){newOverRight=position.left+myOffset+atOffset+offset+data.collisionWidth-outerWidth-withinOffset;(0>newOverRight||newOverRight<abs(overLeft))&&(position.left+=myOffset+atOffset+offset)}else if(overRight>0){newOverLeft=position.left-data.collisionPosition.marginLeft+myOffset+atOffset+offset-offsetLeft;(newOverLeft>0||abs(newOverLeft)<overRight)&&(position.left+=myOffset+atOffset+offset)}},top:function(position,data){var newOverTop,newOverBottom,within=data.within,withinOffset=within.offset.top+within.scrollTop,outerHeight=within.height,offsetTop=within.isWindow?within.scrollTop:within.offset.top,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=collisionPosTop-offsetTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-offsetTop,top="top"===data.my[1],myOffset=top?-data.elemHeight:"bottom"===data.my[1]?data.elemHeight:0,atOffset="top"===data.at[1]?data.targetHeight:"bottom"===data.at[1]?-data.targetHeight:0,offset=-2*data.offset[1];if(0>overTop){newOverBottom=position.top+myOffset+atOffset+offset+data.collisionHeight-outerHeight-withinOffset;position.top+myOffset+atOffset+offset>overTop&&(0>newOverBottom||newOverBottom<abs(overTop))&&(position.top+=myOffset+atOffset+offset)}else if(overBottom>0){newOverTop=position.top-data.collisionPosition.marginTop+myOffset+atOffset+offset-offsetTop;position.top+myOffset+atOffset+offset>overBottom&&(newOverTop>0||abs(newOverTop)<overBottom)&&(position.top+=myOffset+atOffset+offset)}}},flipfit:{left:function(){$.ui.position.flip.left.apply(this,arguments);$.ui.position.fit.left.apply(this,arguments)},top:function(){$.ui.position.flip.top.apply(this,arguments);$.ui.position.fit.top.apply(this,arguments)}}};!function(){var testElement,testElementParent,testElementStyle,offsetLeft,i,body=document.getElementsByTagName("body")[0],div=document.createElement("div");testElement=document.createElement(body?"div":"body");testElementStyle={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};body&&$.extend(testElementStyle,{position:"absolute",left:"-1000px",top:"-1000px"});for(i in testElementStyle)testElement.style[i]=testElementStyle[i];testElement.appendChild(div);testElementParent=body||document.documentElement;testElementParent.insertBefore(testElement,testElementParent.firstChild);div.style.cssText="position: absolute; left: 10.7432222px;";offsetLeft=$(div).offset().left;$.support.offsetFractions=offsetLeft>10&&11>offsetLeft;testElement.innerHTML="";testElementParent.removeChild(testElement)}()}(jQuery);!function($,undefined){function num(v){return parseInt(v,10)||0}function isNumber(value){return!isNaN(parseInt(value,10))}$.widget("ui.resizable",$.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var n,i,handle,axis,hname,that=this,o=this.options;this.element.addClass("ui-resizable");$.extend(this,{_aspectRatio:!!o.aspectRatio,aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){this.element.wrap($("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable"));this.elementIsWrapper=!0;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=o.handles||($(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor===String){"all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");n=this.handles.split(",");this.handles={};for(i=0;i<n.length;i++){handle=$.trim(n[i]);hname="ui-resizable-"+handle;axis=$("<div class='ui-resizable-handle "+hname+"'></div>");axis.css({zIndex:o.zIndex});"se"===handle&&axis.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[handle]=".ui-resizable-"+handle;this.element.append(axis)}}this._renderAxis=function(target){var i,axis,padPos,padWrapper;target=target||this.element;for(i in this.handles){this.handles[i].constructor===String&&(this.handles[i]=$(this.handles[i],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){axis=$(this.handles[i],this.element);padWrapper=/sw|ne|nw|se|n|s/.test(i)?axis.outerHeight():axis.outerWidth();padPos=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");target.css(padPos,padWrapper);this._proportionallyResize()}$(this.handles[i]).length}};this._renderAxis(this.element);this._handles=$(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!that.resizing){this.className&&(axis=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i));that.axis=axis&&axis[1]?axis[1]:"se"}});if(o.autoHide){this._handles.hide();$(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(!o.disabled){$(this).removeClass("ui-resizable-autohide");that._handles.show()}}).mouseleave(function(){if(!o.disabled&&!that.resizing){$(this).addClass("ui-resizable-autohide");that._handles.hide()}})}this._mouseInit()},_destroy:function(){this._mouseDestroy();var wrapper,_destroy=function(exp){$(exp).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){_destroy(this.element);wrapper=this.element;this.originalElement.css({position:wrapper.css("position"),width:wrapper.outerWidth(),height:wrapper.outerHeight(),top:wrapper.css("top"),left:wrapper.css("left")}).insertAfter(wrapper);wrapper.remove()}this.originalElement.css("resize",this.originalResizeStyle);_destroy(this.originalElement);return this},_mouseCapture:function(event){var i,handle,capture=!1;for(i in this.handles){handle=$(this.handles[i])[0];(handle===event.target||$.contains(handle,event.target))&&(capture=!0)}return!this.options.disabled&&capture},_mouseStart:function(event){var curleft,curtop,cursor,o=this.options,iniPos=this.element.position(),el=this.element;this.resizing=!0;/absolute/.test(el.css("position"))?el.css({position:"absolute",top:el.css("top"),left:el.css("left")}):el.is(".ui-draggable")&&el.css({position:"absolute",top:iniPos.top,left:iniPos.left});this._renderProxy();curleft=num(this.helper.css("left"));curtop=num(this.helper.css("top"));if(o.containment){curleft+=$(o.containment).scrollLeft()||0;curtop+=$(o.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:curleft,top:curtop};this.size=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()};this.originalSize=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()};this.originalPosition={left:curleft,top:curtop};this.sizeDiff={width:el.outerWidth()-el.width(),height:el.outerHeight()-el.height()};this.originalMousePosition={left:event.pageX,top:event.pageY};this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1;cursor=$(".ui-resizable-"+this.axis).css("cursor");$("body").css("cursor","auto"===cursor?this.axis+"-resize":cursor);el.addClass("ui-resizable-resizing");this._propagate("start",event);return!0},_mouseDrag:function(event){var data,el=this.helper,props={},smp=this.originalMousePosition,a=this.axis,prevTop=this.position.top,prevLeft=this.position.left,prevWidth=this.size.width,prevHeight=this.size.height,dx=event.pageX-smp.left||0,dy=event.pageY-smp.top||0,trigger=this._change[a];if(!trigger)return!1;data=trigger.apply(this,[event,dx,dy]);this._updateVirtualBoundaries(event.shiftKey);(this._aspectRatio||event.shiftKey)&&(data=this._updateRatio(data,event));data=this._respectSize(data,event);this._updateCache(data);this._propagate("resize",event);this.position.top!==prevTop&&(props.top=this.position.top+"px");this.position.left!==prevLeft&&(props.left=this.position.left+"px");this.size.width!==prevWidth&&(props.width=this.size.width+"px");this.size.height!==prevHeight&&(props.height=this.size.height+"px");el.css(props);!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();$.isEmptyObject(props)||this._trigger("resize",event,this.ui());return!1},_mouseStop:function(event){this.resizing=!1;var pr,ista,soffseth,soffsetw,s,left,top,o=this.options,that=this;if(this._helper){pr=this._proportionallyResizeElements;ista=pr.length&&/textarea/i.test(pr[0].nodeName);soffseth=ista&&$.ui.hasScroll(pr[0],"left")?0:that.sizeDiff.height;soffsetw=ista?0:that.sizeDiff.width;s={width:that.helper.width()-soffsetw,height:that.helper.height()-soffseth};left=parseInt(that.element.css("left"),10)+(that.position.left-that.originalPosition.left)||null;top=parseInt(that.element.css("top"),10)+(that.position.top-that.originalPosition.top)||null;o.animate||this.element.css($.extend(s,{top:top,left:left}));that.helper.height(that.size.height);that.helper.width(that.size.width);this._helper&&!o.animate&&this._proportionallyResize()}$("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",event);this._helper&&this.helper.remove();return!1},_updateVirtualBoundaries:function(forceAspectRatio){var pMinWidth,pMaxWidth,pMinHeight,pMaxHeight,b,o=this.options;b={minWidth:isNumber(o.minWidth)?o.minWidth:0,maxWidth:isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:isNumber(o.minHeight)?o.minHeight:0,maxHeight:isNumber(o.maxHeight)?o.maxHeight:1/0};if(this._aspectRatio||forceAspectRatio){pMinWidth=b.minHeight*this.aspectRatio;pMinHeight=b.minWidth/this.aspectRatio;pMaxWidth=b.maxHeight*this.aspectRatio;pMaxHeight=b.maxWidth/this.aspectRatio;pMinWidth>b.minWidth&&(b.minWidth=pMinWidth);pMinHeight>b.minHeight&&(b.minHeight=pMinHeight);pMaxWidth<b.maxWidth&&(b.maxWidth=pMaxWidth);pMaxHeight<b.maxHeight&&(b.maxHeight=pMaxHeight)}this._vBoundaries=b},_updateCache:function(data){this.offset=this.helper.offset();isNumber(data.left)&&(this.position.left=data.left);isNumber(data.top)&&(this.position.top=data.top);isNumber(data.height)&&(this.size.height=data.height);isNumber(data.width)&&(this.size.width=data.width)},_updateRatio:function(data){var cpos=this.position,csize=this.size,a=this.axis;isNumber(data.height)?data.width=data.height*this.aspectRatio:isNumber(data.width)&&(data.height=data.width/this.aspectRatio);if("sw"===a){data.left=cpos.left+(csize.width-data.width);data.top=null}if("nw"===a){data.top=cpos.top+(csize.height-data.height);data.left=cpos.left+(csize.width-data.width)}return data},_respectSize:function(data){var o=this._vBoundaries,a=this.axis,ismaxw=isNumber(data.width)&&o.maxWidth&&o.maxWidth<data.width,ismaxh=isNumber(data.height)&&o.maxHeight&&o.maxHeight<data.height,isminw=isNumber(data.width)&&o.minWidth&&o.minWidth>data.width,isminh=isNumber(data.height)&&o.minHeight&&o.minHeight>data.height,dw=this.originalPosition.left+this.originalSize.width,dh=this.position.top+this.size.height,cw=/sw|nw|w/.test(a),ch=/nw|ne|n/.test(a);isminw&&(data.width=o.minWidth);isminh&&(data.height=o.minHeight);ismaxw&&(data.width=o.maxWidth);ismaxh&&(data.height=o.maxHeight);isminw&&cw&&(data.left=dw-o.minWidth);ismaxw&&cw&&(data.left=dw-o.maxWidth);isminh&&ch&&(data.top=dh-o.minHeight);ismaxh&&ch&&(data.top=dh-o.maxHeight);data.width||data.height||data.left||!data.top?data.width||data.height||data.top||!data.left||(data.left=null):data.top=null;return data},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var i,j,borders,paddings,prel,element=this.helper||this.element;for(i=0;i<this._proportionallyResizeElements.length;i++){prel=this._proportionallyResizeElements[i];if(!this.borderDif){this.borderDif=[];borders=[prel.css("borderTopWidth"),prel.css("borderRightWidth"),prel.css("borderBottomWidth"),prel.css("borderLeftWidth")];paddings=[prel.css("paddingTop"),prel.css("paddingRight"),prel.css("paddingBottom"),prel.css("paddingLeft")];for(j=0;j<borders.length;j++)this.borderDif[j]=(parseInt(borders[j],10)||0)+(parseInt(paddings[j],10)||0)}prel.css({height:element.height()-this.borderDif[0]-this.borderDif[2]||0,width:element.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var el=this.element,o=this.options;this.elementOffset=el.offset();if(this._helper){this.helper=this.helper||$("<div style='overflow:hidden;'></div>");this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++o.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(event,dx){return{width:this.originalSize.width+dx}},w:function(event,dx){var cs=this.originalSize,sp=this.originalPosition;return{left:sp.left+dx,width:cs.width-dx}},n:function(event,dx,dy){var cs=this.originalSize,sp=this.originalPosition;return{top:sp.top+dy,height:cs.height-dy}},s:function(event,dx,dy){return{height:this.originalSize.height+dy}},se:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]))},sw:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]))},ne:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]))},nw:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]))}},_propagate:function(n,event){$.ui.plugin.call(this,n,[event,this.ui()]);"resize"!==n&&this._trigger(n,event,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});$.ui.plugin.add("resizable","animate",{stop:function(event){var that=$(this).data("ui-resizable"),o=that.options,pr=that._proportionallyResizeElements,ista=pr.length&&/textarea/i.test(pr[0].nodeName),soffseth=ista&&$.ui.hasScroll(pr[0],"left")?0:that.sizeDiff.height,soffsetw=ista?0:that.sizeDiff.width,style={width:that.size.width-soffsetw,height:that.size.height-soffseth},left=parseInt(that.element.css("left"),10)+(that.position.left-that.originalPosition.left)||null,top=parseInt(that.element.css("top"),10)+(that.position.top-that.originalPosition.top)||null;that.element.animate($.extend(style,top&&left?{top:top,left:left}:{}),{duration:o.animateDuration,easing:o.animateEasing,step:function(){var data={width:parseInt(that.element.css("width"),10),height:parseInt(that.element.css("height"),10),top:parseInt(that.element.css("top"),10),left:parseInt(that.element.css("left"),10)};pr&&pr.length&&$(pr[0]).css({width:data.width,height:data.height});that._updateCache(data);that._propagate("resize",event)}})}});$.ui.plugin.add("resizable","containment",{start:function(){var element,p,co,ch,cw,width,height,that=$(this).data("ui-resizable"),o=that.options,el=that.element,oc=o.containment,ce=oc instanceof $?oc.get(0):/parent/.test(oc)?el.parent().get(0):oc;if(ce){that.containerElement=$(ce);if(/document/.test(oc)||oc===document){that.containerOffset={left:0,top:0};that.containerPosition={left:0,top:0};that.parentData={element:$(document),left:0,top:0,width:$(document).width(),height:$(document).height()||document.body.parentNode.scrollHeight}}else{element=$(ce);p=[];$(["Top","Right","Left","Bottom"]).each(function(i,name){p[i]=num(element.css("padding"+name))});that.containerOffset=element.offset();that.containerPosition=element.position();that.containerSize={height:element.innerHeight()-p[3],width:element.innerWidth()-p[1]};co=that.containerOffset;ch=that.containerSize.height;cw=that.containerSize.width;width=$.ui.hasScroll(ce,"left")?ce.scrollWidth:cw;height=$.ui.hasScroll(ce)?ce.scrollHeight:ch;that.parentData={element:ce,left:co.left,top:co.top,width:width,height:height}}}},resize:function(event){var woset,hoset,isParent,isOffsetRelative,that=$(this).data("ui-resizable"),o=that.options,co=that.containerOffset,cp=that.position,pRatio=that._aspectRatio||event.shiftKey,cop={top:0,left:0},ce=that.containerElement;ce[0]!==document&&/static/.test(ce.css("position"))&&(cop=co);if(cp.left<(that._helper?co.left:0)){that.size.width=that.size.width+(that._helper?that.position.left-co.left:that.position.left-cop.left);pRatio&&(that.size.height=that.size.width/that.aspectRatio);that.position.left=o.helper?co.left:0}if(cp.top<(that._helper?co.top:0)){that.size.height=that.size.height+(that._helper?that.position.top-co.top:that.position.top);pRatio&&(that.size.width=that.size.height*that.aspectRatio);that.position.top=that._helper?co.top:0}that.offset.left=that.parentData.left+that.position.left;that.offset.top=that.parentData.top+that.position.top;woset=Math.abs((that._helper?that.offset.left-cop.left:that.offset.left-cop.left)+that.sizeDiff.width);hoset=Math.abs((that._helper?that.offset.top-cop.top:that.offset.top-co.top)+that.sizeDiff.height);isParent=that.containerElement.get(0)===that.element.parent().get(0);isOffsetRelative=/relative|absolute/.test(that.containerElement.css("position"));isParent&&isOffsetRelative&&(woset-=that.parentData.left);if(woset+that.size.width>=that.parentData.width){that.size.width=that.parentData.width-woset;pRatio&&(that.size.height=that.size.width/that.aspectRatio)}if(hoset+that.size.height>=that.parentData.height){that.size.height=that.parentData.height-hoset;pRatio&&(that.size.width=that.size.height*that.aspectRatio)}},stop:function(){var that=$(this).data("ui-resizable"),o=that.options,co=that.containerOffset,cop=that.containerPosition,ce=that.containerElement,helper=$(that.helper),ho=helper.offset(),w=helper.outerWidth()-that.sizeDiff.width,h=helper.outerHeight()-that.sizeDiff.height;that._helper&&!o.animate&&/relative/.test(ce.css("position"))&&$(this).css({left:ho.left-cop.left-co.left,width:w,height:h});that._helper&&!o.animate&&/static/.test(ce.css("position"))&&$(this).css({left:ho.left-cop.left-co.left,width:w,height:h})}});$.ui.plugin.add("resizable","alsoResize",{start:function(){var that=$(this).data("ui-resizable"),o=that.options,_store=function(exp){$(exp).each(function(){var el=$(this);el.data("ui-resizable-alsoresize",{width:parseInt(el.width(),10),height:parseInt(el.height(),10),left:parseInt(el.css("left"),10),top:parseInt(el.css("top"),10)})})};if("object"!=typeof o.alsoResize||o.alsoResize.parentNode)_store(o.alsoResize);else if(o.alsoResize.length){o.alsoResize=o.alsoResize[0];_store(o.alsoResize)}else $.each(o.alsoResize,function(exp){_store(exp)})},resize:function(event,ui){var that=$(this).data("ui-resizable"),o=that.options,os=that.originalSize,op=that.originalPosition,delta={height:that.size.height-os.height||0,width:that.size.width-os.width||0,top:that.position.top-op.top||0,left:that.position.left-op.left||0},_alsoResize=function(exp,c){$(exp).each(function(){var el=$(this),start=$(this).data("ui-resizable-alsoresize"),style={},css=c&&c.length?c:el.parents(ui.originalElement[0]).length?["width","height"]:["width","height","top","left"];$.each(css,function(i,prop){var sum=(start[prop]||0)+(delta[prop]||0);sum&&sum>=0&&(style[prop]=sum||null)});el.css(style)})};"object"!=typeof o.alsoResize||o.alsoResize.nodeType?_alsoResize(o.alsoResize):$.each(o.alsoResize,function(exp,c){_alsoResize(exp,c)})},stop:function(){$(this).removeData("resizable-alsoresize")}});$.ui.plugin.add("resizable","ghost",{start:function(){var that=$(this).data("ui-resizable"),o=that.options,cs=that.size;that.ghost=that.originalElement.clone();that.ghost.css({opacity:.25,display:"block",position:"relative",height:cs.height,width:cs.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof o.ghost?o.ghost:"");that.ghost.appendTo(that.helper)},resize:function(){var that=$(this).data("ui-resizable");that.ghost&&that.ghost.css({position:"relative",height:that.size.height,width:that.size.width})},stop:function(){var that=$(this).data("ui-resizable");that.ghost&&that.helper&&that.helper.get(0).removeChild(that.ghost.get(0))}});$.ui.plugin.add("resizable","grid",{resize:function(){var that=$(this).data("ui-resizable"),o=that.options,cs=that.size,os=that.originalSize,op=that.originalPosition,a=that.axis,grid="number"==typeof o.grid?[o.grid,o.grid]:o.grid,gridX=grid[0]||1,gridY=grid[1]||1,ox=Math.round((cs.width-os.width)/gridX)*gridX,oy=Math.round((cs.height-os.height)/gridY)*gridY,newWidth=os.width+ox,newHeight=os.height+oy,isMaxWidth=o.maxWidth&&o.maxWidth<newWidth,isMaxHeight=o.maxHeight&&o.maxHeight<newHeight,isMinWidth=o.minWidth&&o.minWidth>newWidth,isMinHeight=o.minHeight&&o.minHeight>newHeight;o.grid=grid;isMinWidth&&(newWidth+=gridX);isMinHeight&&(newHeight+=gridY);isMaxWidth&&(newWidth-=gridX);isMaxHeight&&(newHeight-=gridY);if(/^(se|s|e)$/.test(a)){that.size.width=newWidth;that.size.height=newHeight}else if(/^(ne)$/.test(a)){that.size.width=newWidth;that.size.height=newHeight;that.position.top=op.top-oy}else if(/^(sw)$/.test(a)){that.size.width=newWidth;that.size.height=newHeight;that.position.left=op.left-ox}else{that.size.width=newWidth;that.size.height=newHeight;that.position.top=op.top-oy;that.position.left=op.left-ox}}})}(jQuery);!function($,undefined){var numPages=5;$.widget("ui.slider",$.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1;this._mouseSliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all");this._refresh();this._setOption("disabled",this.options.disabled);this._animateOff=!1},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue()},_createHandles:function(){var i,handleCount,options=this.options,existingHandles=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),handle="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",handles=[];handleCount=options.values&&options.values.length||1;if(existingHandles.length>handleCount){existingHandles.slice(handleCount).remove();existingHandles=existingHandles.slice(0,handleCount)}for(i=existingHandles.length;handleCount>i;i++)handles.push(handle);this.handles=existingHandles.add($(handles.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.each(function(i){$(this).data("ui-slider-handle-index",i)})},_createRange:function(){var options=this.options,classes="";if(options.range){options.range===!0&&(options.values?options.values.length&&2!==options.values.length?options.values=[options.values[0],options.values[0]]:$.isArray(options.values)&&(options.values=options.values.slice(0)):options.values=[this._valueMin(),this._valueMin()]);if(this.range&&this.range.length)this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""});else{this.range=$("<div></div>").appendTo(this.element);classes="ui-slider-range ui-widget-header ui-corner-all"}this.range.addClass(classes+("min"===options.range||"max"===options.range?" ui-slider-range-"+options.range:""))}else this.range=$([])},_setupEvents:function(){var elements=this.handles.add(this.range).filter("a");this._off(elements);this._on(elements,this._handleEvents);this._hoverable(elements);this._focusable(elements)},_destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all");this._mouseDestroy()},_mouseCapture:function(event){var position,normValue,distance,closestHandle,index,allowed,offset,mouseOverHandle,that=this,o=this.options;if(o.disabled)return!1;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();position={x:event.pageX,y:event.pageY};normValue=this._normValueFromMouse(position);distance=this._valueMax()-this._valueMin()+1;this.handles.each(function(i){var thisDistance=Math.abs(normValue-that.values(i));if(distance>thisDistance||distance===thisDistance&&(i===that._lastChangedValue||that.values(i)===o.min)){distance=thisDistance;closestHandle=$(this);index=i}});allowed=this._start(event,index);if(allowed===!1)return!1;this._mouseSliding=!0;this._handleIndex=index;closestHandle.addClass("ui-state-active").focus();offset=closestHandle.offset();mouseOverHandle=!$(event.target).parents().addBack().is(".ui-slider-handle");this._clickOffset=mouseOverHandle?{left:0,top:0}:{left:event.pageX-offset.left-closestHandle.width()/2,top:event.pageY-offset.top-closestHandle.height()/2-(parseInt(closestHandle.css("borderTopWidth"),10)||0)-(parseInt(closestHandle.css("borderBottomWidth"),10)||0)+(parseInt(closestHandle.css("marginTop"),10)||0)};this.handles.hasClass("ui-state-hover")||this._slide(event,index,normValue);this._animateOff=!0;return!0},_mouseStart:function(){return!0},_mouseDrag:function(event){var position={x:event.pageX,y:event.pageY},normValue=this._normValueFromMouse(position);this._slide(event,this._handleIndex,normValue);return!1},_mouseStop:function(event){this.handles.removeClass("ui-state-active");this._mouseSliding=!1;this._stop(event,this._handleIndex);this._change(event,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=!1;return!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(position){var pixelTotal,pixelMouse,percentMouse,valueTotal,valueMouse;if("horizontal"===this.orientation){pixelTotal=this.elementSize.width;pixelMouse=position.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{pixelTotal=this.elementSize.height;pixelMouse=position.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}percentMouse=pixelMouse/pixelTotal;percentMouse>1&&(percentMouse=1);0>percentMouse&&(percentMouse=0);"vertical"===this.orientation&&(percentMouse=1-percentMouse);valueTotal=this._valueMax()-this._valueMin();valueMouse=this._valueMin()+percentMouse*valueTotal;return this._trimAlignValue(valueMouse)},_start:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values()}return this._trigger("start",event,uiHash)},_slide:function(event,index,newVal){var otherVal,newValues,allowed;if(this.options.values&&this.options.values.length){otherVal=this.values(index?0:1);2===this.options.values.length&&this.options.range===!0&&(0===index&&newVal>otherVal||1===index&&otherVal>newVal)&&(newVal=otherVal);if(newVal!==this.values(index)){newValues=this.values();newValues[index]=newVal;allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal,values:newValues});otherVal=this.values(index?0:1);allowed!==!1&&this.values(index,newVal,!0)}}else if(newVal!==this.value()){allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal});allowed!==!1&&this.value(newVal)}},_stop:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values()}this._trigger("stop",event,uiHash)},_change:function(event,index){if(!this._keySliding&&!this._mouseSliding){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values()}this._lastChangedValue=index;this._trigger("change",event,uiHash)}},value:function(newValue){if(!arguments.length)return this._value();this.options.value=this._trimAlignValue(newValue);this._refreshValue();this._change(null,0)},values:function(index,newValue){var vals,newValues,i;if(arguments.length>1){this.options.values[index]=this._trimAlignValue(newValue);this._refreshValue();this._change(null,index)}else{if(!arguments.length)return this._values();if(!$.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(index):this.value();vals=this.options.values;newValues=arguments[0];for(i=0;i<vals.length;i+=1){vals[i]=this._trimAlignValue(newValues[i]);this._change(null,i)}this._refreshValue()}},_setOption:function(key,value){var i,valsLength=0;if("range"===key&&this.options.range===!0)if("min"===value){this.options.value=this._values(0);this.options.values=null}else if("max"===value){this.options.value=this._values(this.options.values.length-1);this.options.values=null}$.isArray(this.options.values)&&(valsLength=this.options.values.length);$.Widget.prototype._setOption.apply(this,arguments);switch(key){case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case"value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case"values":this._animateOff=!0;this._refreshValue();for(i=0;valsLength>i;i+=1)this._change(null,i);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0;this._refreshValue();
this._animateOff=!1;break;case"range":this._animateOff=!0;this._refresh();this._animateOff=!1}},_value:function(){var val=this.options.value;val=this._trimAlignValue(val);return val},_values:function(index){var val,vals,i;if(arguments.length){val=this.options.values[index];val=this._trimAlignValue(val);return val}if(this.options.values&&this.options.values.length){vals=this.options.values.slice();for(i=0;i<vals.length;i+=1)vals[i]=this._trimAlignValue(vals[i]);return vals}return[]},_trimAlignValue:function(val){if(val<=this._valueMin())return this._valueMin();if(val>=this._valueMax())return this._valueMax();var step=this.options.step>0?this.options.step:1,valModStep=(val-this._valueMin())%step,alignValue=val-valModStep;2*Math.abs(valModStep)>=step&&(alignValue+=valModStep>0?step:-step);return parseFloat(alignValue.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var lastValPercent,valPercent,value,valueMin,valueMax,oRange=this.options.range,o=this.options,that=this,animate=this._animateOff?!1:o.animate,_set={};if(this.options.values&&this.options.values.length)this.handles.each(function(i){valPercent=(that.values(i)-that._valueMin())/(that._valueMax()-that._valueMin())*100;_set["horizontal"===that.orientation?"left":"bottom"]=valPercent+"%";$(this).stop(1,1)[animate?"animate":"css"](_set,o.animate);if(that.options.range===!0)if("horizontal"===that.orientation){0===i&&that.range.stop(1,1)[animate?"animate":"css"]({left:valPercent+"%"},o.animate);1===i&&that.range[animate?"animate":"css"]({width:valPercent-lastValPercent+"%"},{queue:!1,duration:o.animate})}else{0===i&&that.range.stop(1,1)[animate?"animate":"css"]({bottom:valPercent+"%"},o.animate);1===i&&that.range[animate?"animate":"css"]({height:valPercent-lastValPercent+"%"},{queue:!1,duration:o.animate})}lastValPercent=valPercent});else{value=this.value();valueMin=this._valueMin();valueMax=this._valueMax();valPercent=valueMax!==valueMin?(value-valueMin)/(valueMax-valueMin)*100:0;_set["horizontal"===this.orientation?"left":"bottom"]=valPercent+"%";this.handle.stop(1,1)[animate?"animate":"css"](_set,o.animate);"min"===oRange&&"horizontal"===this.orientation&&this.range.stop(1,1)[animate?"animate":"css"]({width:valPercent+"%"},o.animate);"max"===oRange&&"horizontal"===this.orientation&&this.range[animate?"animate":"css"]({width:100-valPercent+"%"},{queue:!1,duration:o.animate});"min"===oRange&&"vertical"===this.orientation&&this.range.stop(1,1)[animate?"animate":"css"]({height:valPercent+"%"},o.animate);"max"===oRange&&"vertical"===this.orientation&&this.range[animate?"animate":"css"]({height:100-valPercent+"%"},{queue:!1,duration:o.animate})}},_handleEvents:{keydown:function(event){var allowed,curVal,newVal,step,index=$(event.target).data("ui-slider-handle-index");switch(event.keyCode){case $.ui.keyCode.HOME:case $.ui.keyCode.END:case $.ui.keyCode.PAGE_UP:case $.ui.keyCode.PAGE_DOWN:case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:event.preventDefault();if(!this._keySliding){this._keySliding=!0;$(event.target).addClass("ui-state-active");allowed=this._start(event,index);if(allowed===!1)return}}step=this.options.step;curVal=newVal=this.options.values&&this.options.values.length?this.values(index):this.value();switch(event.keyCode){case $.ui.keyCode.HOME:newVal=this._valueMin();break;case $.ui.keyCode.END:newVal=this._valueMax();break;case $.ui.keyCode.PAGE_UP:newVal=this._trimAlignValue(curVal+(this._valueMax()-this._valueMin())/numPages);break;case $.ui.keyCode.PAGE_DOWN:newVal=this._trimAlignValue(curVal-(this._valueMax()-this._valueMin())/numPages);break;case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:if(curVal===this._valueMax())return;newVal=this._trimAlignValue(curVal+step);break;case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:if(curVal===this._valueMin())return;newVal=this._trimAlignValue(curVal-step)}this._slide(event,index,newVal)},click:function(event){event.preventDefault()},keyup:function(event){var index=$(event.target).data("ui-slider-handle-index");if(this._keySliding){this._keySliding=!1;this._stop(event,index);this._change(event,index);$(event.target).removeClass("ui-state-active")}}}})}(jQuery);!function($){function addDescribedBy(elem,id){var describedby=(elem.attr("aria-describedby")||"").split(/\s+/);describedby.push(id);elem.data("ui-tooltip-id",id).attr("aria-describedby",$.trim(describedby.join(" ")))}function removeDescribedBy(elem){var id=elem.data("ui-tooltip-id"),describedby=(elem.attr("aria-describedby")||"").split(/\s+/),index=$.inArray(id,describedby);-1!==index&&describedby.splice(index,1);elem.removeData("ui-tooltip-id");describedby=$.trim(describedby.join(" "));describedby?elem.attr("aria-describedby",describedby):elem.removeAttr("aria-describedby")}var increments=0;$.widget("ui.tooltip",{version:"1.10.3",options:{content:function(){var title=$(this).attr("title")||"";return $("<a>").text(title).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};this.options.disabled&&this._disable()},_setOption:function(key,value){var that=this;if("disabled"!==key){this._super(key,value);"content"===key&&$.each(this.tooltips,function(id,element){that._updateContent(element)})}else{this[value?"_disable":"_enable"]();this.options[key]=value}},_disable:function(){var that=this;$.each(this.tooltips,function(id,element){var event=$.Event("blur");event.target=event.currentTarget=element[0];that.close(event,!0)});this.element.find(this.options.items).addBack().each(function(){var element=$(this);element.is("[title]")&&element.data("ui-tooltip-title",element.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var element=$(this);element.data("ui-tooltip-title")&&element.attr("title",element.data("ui-tooltip-title"))})},open:function(event){var that=this,target=$(event?event.target:this.element).closest(this.options.items);if(target.length&&!target.data("ui-tooltip-id")){target.attr("title")&&target.data("ui-tooltip-title",target.attr("title"));target.data("ui-tooltip-open",!0);event&&"mouseover"===event.type&&target.parents().each(function(){var blurEvent,parent=$(this);if(parent.data("ui-tooltip-open")){blurEvent=$.Event("blur");blurEvent.target=blurEvent.currentTarget=this;that.close(blurEvent,!0)}if(parent.attr("title")){parent.uniqueId();that.parents[this.id]={element:this,title:parent.attr("title")};parent.attr("title","")}});this._updateContent(target,event)}},_updateContent:function(target,event){var content,contentOption=this.options.content,that=this,eventType=event?event.type:null;if("string"==typeof contentOption)return this._open(event,target,contentOption);content=contentOption.call(target[0],function(response){target.data("ui-tooltip-open")&&that._delay(function(){event&&(event.type=eventType);this._open(event,target,response)})});content&&this._open(event,target,content)},_open:function(event,target,content){function position(event){positionOption.of=event;tooltip.is(":hidden")||tooltip.position(positionOption)}var tooltip,events,delayedShow,positionOption=$.extend({},this.options.position);if(content){tooltip=this._find(target);if(tooltip.length)tooltip.find(".ui-tooltip-content").html(content);else{target.is("[title]")&&(event&&"mouseover"===event.type?target.attr("title",""):target.removeAttr("title"));tooltip=this._tooltip(target);addDescribedBy(target,tooltip.attr("id"));tooltip.find(".ui-tooltip-content").html(content);if(this.options.track&&event&&/^mouse/.test(event.type)){this._on(this.document,{mousemove:position});position(event)}else tooltip.position($.extend({of:target},this.options.position));tooltip.hide();this._show(tooltip,this.options.show);this.options.show&&this.options.show.delay&&(delayedShow=this.delayedShow=setInterval(function(){if(tooltip.is(":visible")){position(positionOption.of);clearInterval(delayedShow)}},$.fx.interval));this._trigger("open",event,{tooltip:tooltip});events={keyup:function(event){if(event.keyCode===$.ui.keyCode.ESCAPE){var fakeEvent=$.Event(event);fakeEvent.currentTarget=target[0];this.close(fakeEvent,!0)}},remove:function(){this._removeTooltip(tooltip)}};event&&"mouseover"!==event.type||(events.mouseleave="close");event&&"focusin"!==event.type||(events.focusout="close");this._on(!0,target,events)}}},close:function(event){var that=this,target=$(event?event.currentTarget:this.element),tooltip=this._find(target);if(!this.closing){clearInterval(this.delayedShow);target.data("ui-tooltip-title")&&target.attr("title",target.data("ui-tooltip-title"));removeDescribedBy(target);tooltip.stop(!0);this._hide(tooltip,this.options.hide,function(){that._removeTooltip($(this))});target.removeData("ui-tooltip-open");this._off(target,"mouseleave focusout keyup");target[0]!==this.element[0]&&this._off(target,"remove");this._off(this.document,"mousemove");event&&"mouseleave"===event.type&&$.each(this.parents,function(id,parent){$(parent.element).attr("title",parent.title);delete that.parents[id]});this.closing=!0;this._trigger("close",event,{tooltip:tooltip});this.closing=!1}},_tooltip:function(element){var id="ui-tooltip-"+increments++,tooltip=$("<div>").attr({id:id,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));$("<div>").addClass("ui-tooltip-content").appendTo(tooltip);tooltip.appendTo(this.document[0].body);this.tooltips[id]=element;return tooltip},_find:function(target){var id=target.data("ui-tooltip-id");return id?$("#"+id):$()},_removeTooltip:function(tooltip){tooltip.remove();delete this.tooltips[tooltip.attr("id")]},_destroy:function(){var that=this;$.each(this.tooltips,function(id,element){var event=$.Event("blur");event.target=event.currentTarget=element[0];that.close(event,!0);$("#"+id).remove();if(element.data("ui-tooltip-title")){element.attr("title",element.data("ui-tooltip-title"));element.removeData("ui-tooltip-title")}})}})}(jQuery);!function($){$.widget("thomaskahn.smoothDivScroll",{options:{scrollingHotSpotLeftClass:"scrollingHotSpotLeft",scrollingHotSpotRightClass:"scrollingHotSpotRight",scrollableAreaClass:"scrollableArea",scrollWrapperClass:"scrollWrapper",hiddenOnStart:!1,getContentOnLoad:{},countOnlyClass:"",startAtElementId:"",hotSpotScrolling:!0,hotSpotScrollingStep:15,hotSpotScrollingInterval:10,hotSpotMouseDownSpeedBooster:3,visibleHotSpotBackgrounds:"hover",hotSpotsVisibleTime:5e3,easingAfterHotSpotScrolling:!0,easingAfterHotSpotScrollingDistance:10,easingAfterHotSpotScrollingDuration:300,easingAfterHotSpotScrollingFunction:"easeOutQuart",mousewheelScrolling:"",mousewheelScrollingStep:70,easingAfterMouseWheelScrolling:!0,easingAfterMouseWheelScrollingDuration:300,easingAfterMouseWheelScrollingFunction:"easeOutQuart",manualContinuousScrolling:!1,autoScrollingMode:"",autoScrollingDirection:"endlessLoopRight",autoScrollingStep:1,autoScrollingInterval:10,touchScrolling:!1,scrollToAnimationDuration:1e3,scrollToEasingFunction:"easeOutQuart"},_create:function(){var self=this,o=this.options,el=this.element;el.data("scrollWrapper",el.find("."+o.scrollWrapperClass));el.data("scrollingHotSpotRight",el.find("."+o.scrollingHotSpotRightClass));el.data("scrollingHotSpotLeft",el.find("."+o.scrollingHotSpotLeftClass));el.data("scrollableArea",el.find("."+o.scrollableAreaClass));el.data("scrollingHotSpotRight").length>0&&el.data("scrollingHotSpotRight").detach();el.data("scrollingHotSpotLeft").length>0&&el.data("scrollingHotSpotLeft").detach();if(0===el.data("scrollableArea").length&&0===el.data("scrollWrapper").length){el.wrapInner("<div class='"+o.scrollableAreaClass+"'>").wrapInner("<div class='"+o.scrollWrapperClass+"'>");el.data("scrollWrapper",el.find("."+o.scrollWrapperClass));el.data("scrollableArea",el.find("."+o.scrollableAreaClass))}else if(0===el.data("scrollWrapper").length){el.wrapInner("<div class='"+o.scrollWrapperClass+"'>");el.data("scrollWrapper",el.find("."+o.scrollWrapperClass))}else if(0===el.data("scrollableArea").length){el.data("scrollWrapper").wrapInner("<div class='"+o.scrollableAreaClass+"'>");el.data("scrollableArea",el.find("."+o.scrollableAreaClass))}if(0===el.data("scrollingHotSpotRight").length){el.prepend("<div class='"+o.scrollingHotSpotRightClass+"'></div>");el.data("scrollingHotSpotRight",el.find("."+o.scrollingHotSpotRightClass))}else el.prepend(el.data("scrollingHotSpotRight"));if(0===el.data("scrollingHotSpotLeft").length){el.prepend("<div class='"+o.scrollingHotSpotLeftClass+"'></div>");el.data("scrollingHotSpotLeft",el.find("."+o.scrollingHotSpotLeftClass))}else el.prepend(el.data("scrollingHotSpotLeft"));el.data("speedBooster",1);el.data("scrollXPos",0);el.data("hotSpotWidth",el.data("scrollingHotSpotLeft").innerWidth());el.data("scrollableAreaWidth",0);el.data("startingPosition",0);el.data("rightScrollingInterval",null);el.data("leftScrollingInterval",null);el.data("autoScrollingInterval",null);el.data("hideHotSpotBackgroundsInterval",null);el.data("previousScrollLeft",0);el.data("pingPongDirection","right");el.data("getNextElementWidth",!0);el.data("swapAt",null);el.data("startAtElementHasNotPassed",!0);el.data("swappedElement",null);el.data("originalElements",el.data("scrollableArea").children(o.countOnlyClass));el.data("visible",!0);el.data("enabled",!0);el.data("scrollableAreaHeight",el.data("scrollableArea").height());el.data("scrollerOffset",el.offset());o.touchScrolling&&el.data("enabled")&&el.data("scrollWrapper").kinetic({y:!1,moved:function(settings){o.manualContinuousScrolling&&(el.data("scrollWrapper").scrollLeft()<=0?self._checkContinuousSwapLeft():self._checkContinuousSwapRight())},stopped:function(settings){el.data("scrollWrapper").stop(!0,!1);self.stopAutoScrolling()}});el.data("scrollingHotSpotRight").bind("mousemove",function(e){if(o.hotSpotScrolling){var x=e.pageX-(this.offsetLeft+el.data("scrollerOffset").left);el.data("scrollXPos",Math.round(x/el.data("hotSpotWidth")*o.hotSpotScrollingStep));(el.data("scrollXPos")===1/0||el.data("scrollXPos")<1)&&el.data("scrollXPos",1)}});el.data("scrollingHotSpotRight").bind("mouseover",function(){if(o.hotSpotScrolling){el.data("scrollWrapper").stop(!0,!1);self.stopAutoScrolling();el.data("rightScrollingInterval",setInterval(function(){if(el.data("scrollXPos")>0&&el.data("enabled")){el.data("scrollWrapper").scrollLeft(el.data("scrollWrapper").scrollLeft()+el.data("scrollXPos")*el.data("speedBooster"));o.manualContinuousScrolling&&self._checkContinuousSwapRight();self._showHideHotSpots()}},o.hotSpotScrollingInterval));self._trigger("mouseOverRightHotSpot")}});el.data("scrollingHotSpotRight").bind("mouseout",function(){if(o.hotSpotScrolling){clearInterval(el.data("rightScrollingInterval"));el.data("scrollXPos",0);o.easingAfterHotSpotScrolling&&el.data("enabled")&&el.data("scrollWrapper").animate({scrollLeft:el.data("scrollWrapper").scrollLeft()+o.easingAfterHotSpotScrollingDistance},{duration:o.easingAfterHotSpotScrollingDuration,easing:o.easingAfterHotSpotScrollingFunction})}});el.data("scrollingHotSpotRight").bind("mousedown",function(){el.data("speedBooster",o.hotSpotMouseDownSpeedBooster)});$("body").bind("mouseup",function(){el.data("speedBooster",1)});el.data("scrollingHotSpotLeft").bind("mousemove",function(e){if(o.hotSpotScrolling){var x=this.offsetLeft+el.data("scrollerOffset").left+el.data("hotSpotWidth")-e.pageX;el.data("scrollXPos",Math.round(x/el.data("hotSpotWidth")*o.hotSpotScrollingStep));(el.data("scrollXPos")===1/0||el.data("scrollXPos")<1)&&el.data("scrollXPos",1)}});el.data("scrollingHotSpotLeft").bind("mouseover",function(){if(o.hotSpotScrolling){el.data("scrollWrapper").stop(!0,!1);self.stopAutoScrolling();el.data("leftScrollingInterval",setInterval(function(){if(el.data("scrollXPos")>0&&el.data("enabled")){el.data("scrollWrapper").scrollLeft(el.data("scrollWrapper").scrollLeft()-el.data("scrollXPos")*el.data("speedBooster"));o.manualContinuousScrolling&&self._checkContinuousSwapLeft();self._showHideHotSpots()}},o.hotSpotScrollingInterval));self._trigger("mouseOverLeftHotSpot")}});el.data("scrollingHotSpotLeft").bind("mouseout",function(){if(o.hotSpotScrolling){clearInterval(el.data("leftScrollingInterval"));el.data("scrollXPos",0);o.easingAfterHotSpotScrolling&&el.data("enabled")&&el.data("scrollWrapper").animate({scrollLeft:el.data("scrollWrapper").scrollLeft()-o.easingAfterHotSpotScrollingDistance},{duration:o.easingAfterHotSpotScrollingDuration,easing:o.easingAfterHotSpotScrollingFunction})}});el.data("scrollingHotSpotLeft").bind("mousedown",function(){el.data("speedBooster",o.hotSpotMouseDownSpeedBooster)});el.data("scrollableArea").mousewheel(function(event,delta,deltaX,deltaY){if(el.data("enabled")&&o.mousewheelScrolling.length>0){var pixels;if("vertical"===o.mousewheelScrolling&&0!==deltaY){self.stopAutoScrolling();event.preventDefault();pixels=Math.round(o.mousewheelScrollingStep*deltaY*-1);self.move(pixels)}else if("horizontal"===o.mousewheelScrolling&&0!==deltaX){self.stopAutoScrolling();event.preventDefault();pixels=Math.round(o.mousewheelScrollingStep*deltaX*-1);self.move(pixels)}else if("allDirections"===o.mousewheelScrolling){self.stopAutoScrolling();event.preventDefault();pixels=Math.round(o.mousewheelScrollingStep*delta*-1);self.move(pixels)}}});o.mousewheelScrolling&&el.data("scrollingHotSpotLeft").add(el.data("scrollingHotSpotRight")).mousewheel(function(event){event.preventDefault()});$(window).bind("resize",function(){o.hotSpotScrolling&&self._showHideHotSpots();self._trigger("windowResized")});jQuery.isEmptyObject(o.getContentOnLoad)||self[o.getContentOnLoad.method](o.getContentOnLoad.content,o.getContentOnLoad.manipulationMethod,o.getContentOnLoad.addWhere,o.getContentOnLoad.filterTag);o.hiddenOnStart&&self.hide();$(window).load(function(){o.hiddenOnStart||self.recalculateScrollableArea();o.autoScrollingMode.length>0&&!o.hiddenOnStart&&self.startAutoScrolling();if("always"!==o.autoScrollingMode)switch(o.visibleHotSpotBackgrounds){case"always":self.showHotSpotBackgrounds();break;case"onStart":self.showHotSpotBackgrounds();el.data("hideHotSpotBackgroundsInterval",setTimeout(function(){self.hideHotSpotBackgrounds(250)},o.hotSpotsVisibleTime));break;case"hover":el.mouseenter(function(event){if(o.hotSpotScrolling){event.stopPropagation();self.showHotSpotBackgrounds(250)}}).mouseleave(function(event){if(o.hotSpotScrolling){event.stopPropagation();self.hideHotSpotBackgrounds(250)}})}self._showHideHotSpots();self._trigger("setupComplete")})},_setOption:function(key,value){var self=this,o=this.options,el=this.element;o[key]=value;if("hotSpotScrolling"===key)if(value===!0)self._showHideHotSpots();else{el.data("scrollingHotSpotLeft").hide();el.data("scrollingHotSpotRight").hide()}else if("autoScrollingStep"===key||"easingAfterHotSpotScrollingDistance"===key||"easingAfterHotSpotScrollingDuration"===key||"easingAfterMouseWheelScrollingDuration"===key)o[key]=parseInt(value,10);else if("autoScrollingInterval"===key){o[key]=parseInt(value,10);self.startAutoScrolling()}},showHotSpotBackgrounds:function(fadeSpeed){var self=this,el=this.element;this.option;if(void 0!==fadeSpeed){el.data("scrollingHotSpotLeft").addClass("scrollingHotSpotLeftVisible");el.data("scrollingHotSpotRight").addClass("scrollingHotSpotRightVisible");el.data("scrollingHotSpotLeft").add(el.data("scrollingHotSpotRight")).fadeTo(fadeSpeed,.35)}else{el.data("scrollingHotSpotLeft").addClass("scrollingHotSpotLeftVisible");el.data("scrollingHotSpotLeft").removeAttr("style");el.data("scrollingHotSpotRight").addClass("scrollingHotSpotRightVisible");el.data("scrollingHotSpotRight").removeAttr("style")}self._showHideHotSpots()},hideHotSpotBackgrounds:function(fadeSpeed){var el=this.element;this.option;if(void 0!==fadeSpeed){el.data("scrollingHotSpotLeft").fadeTo(fadeSpeed,0,function(){el.data("scrollingHotSpotLeft").removeClass("scrollingHotSpotLeftVisible")});el.data("scrollingHotSpotRight").fadeTo(fadeSpeed,0,function(){el.data("scrollingHotSpotRight").removeClass("scrollingHotSpotRightVisible")})}else{el.data("scrollingHotSpotLeft").removeClass("scrollingHotSpotLeftVisible").removeAttr("style");el.data("scrollingHotSpotRight").removeClass("scrollingHotSpotRightVisible").removeAttr("style")}},_showHideHotSpots:function(){var self=this,el=this.element,o=this.options;if(o.hotSpotScrolling)if(o.manualContinuousScrolling&&o.hotSpotScrolling&&"always"!==o.autoScrollingMode){el.data("scrollingHotSpotLeft").show();el.data("scrollingHotSpotRight").show()}else if("always"!==o.autoScrollingMode&&o.hotSpotScrolling)if(el.data("scrollableAreaWidth")<=el.data("scrollWrapper").innerWidth()){el.data("scrollingHotSpotLeft").hide();el.data("scrollingHotSpotRight").hide()}else if(0===el.data("scrollWrapper").scrollLeft()){el.data("scrollingHotSpotLeft").hide();el.data("scrollingHotSpotRight").show();self._trigger("scrollerLeftLimitReached");clearInterval(el.data("leftScrollingInterval"));el.data("leftScrollingInterval",null)}else if(el.data("scrollableAreaWidth")<=el.data("scrollWrapper").innerWidth()+el.data("scrollWrapper").scrollLeft()){el.data("scrollingHotSpotLeft").show();el.data("scrollingHotSpotRight").hide();self._trigger("scrollerRightLimitReached");clearInterval(el.data("rightScrollingInterval"));el.data("rightScrollingInterval",null)}else{el.data("scrollingHotSpotLeft").show();el.data("scrollingHotSpotRight").show()}else{el.data("scrollingHotSpotLeft").hide();el.data("scrollingHotSpotRight").hide()}else{el.data("scrollingHotSpotLeft").hide();el.data("scrollingHotSpotRight").hide()}},_setElementScrollPosition:function(method,element){var el=this.element,o=this.options,tempScrollPosition=0;switch(method){case"first":el.data("scrollXPos",0);return!0;case"start":if(""!==o.startAtElementId&&el.data("scrollableArea").has("#"+o.startAtElementId)){tempScrollPosition=$("#"+o.startAtElementId).position().left;el.data("scrollXPos",tempScrollPosition);return!0}return!1;case"last":el.data("scrollXPos",el.data("scrollableAreaWidth")-el.data("scrollWrapper").innerWidth());return!0;case"number":if(!isNaN(element)){tempScrollPosition=el.data("scrollableArea").children(o.countOnlyClass).eq(element-1).position().left;el.data("scrollXPos",tempScrollPosition);return!0}return!1;case"id":if(element.length>0&&el.data("scrollableArea").has("#"+element)){tempScrollPosition=$("#"+element).position().left;el.data("scrollXPos",tempScrollPosition);return!0}return!1;default:return!1}},jumpToElement:function(jumpTo,element){var self=this,el=this.element;if(el.data("enabled")&&self._setElementScrollPosition(jumpTo,element)){el.data("scrollWrapper").scrollLeft(el.data("scrollXPos"));self._showHideHotSpots();switch(jumpTo){case"first":self._trigger("jumpedToFirstElement");break;case"start":self._trigger("jumpedToStartElement");break;case"last":self._trigger("jumpedToLastElement");break;case"number":self._trigger("jumpedToElementNumber",null,{elementNumber:element});break;case"id":self._trigger("jumpedToElementId",null,{elementId:element})}}},scrollToElement:function(scrollTo,element){var self=this,el=this.element,o=this.options,autoscrollingWasRunning=!1;if(el.data("enabled")&&self._setElementScrollPosition(scrollTo,element)){if(null!==el.data("autoScrollingInterval")){self.stopAutoScrolling();autoscrollingWasRunning=!0}el.data("scrollWrapper").stop(!0,!1);el.data("scrollWrapper").animate({scrollLeft:el.data("scrollXPos")},{duration:o.scrollToAnimationDuration,easing:o.scrollToEasingFunction,complete:function(){autoscrollingWasRunning&&self.startAutoScrolling();self._showHideHotSpots();switch(scrollTo){case"first":self._trigger("scrolledToFirstElement");break;case"start":self._trigger("scrolledToStartElement");break;case"last":self._trigger("scrolledToLastElement");break;case"number":self._trigger("scrolledToElementNumber",null,{elementNumber:element});break;case"id":self._trigger("scrolledToElementId",null,{elementId:element})}}})}},move:function(pixels){var self=this,el=this.element,o=this.options;el.data("scrollWrapper").stop(!0,!0);if(0>pixels&&el.data("scrollWrapper").scrollLeft()>0||pixels>0&&el.data("scrollableAreaWidth")>el.data("scrollWrapper").innerWidth()+el.data("scrollWrapper").scrollLeft())if(o.easingAfterMouseWheelScrolling)el.data("scrollWrapper").animate({scrollLeft:el.data("scrollWrapper").scrollLeft()+pixels},{duration:o.easingAfterMouseWheelScrollingDuration,easing:o.easingAfterMouseWheelFunction,complete:function(){self._showHideHotSpots();o.manualContinuousScrolling&&(pixels>0?self._checkContinuousSwapRight():self._checkContinuousSwapLeft())}});else{el.data("scrollWrapper").scrollLeft(el.data("scrollWrapper").scrollLeft()+pixels);self._showHideHotSpots();o.manualContinuousScrolling&&(pixels>0?self._checkContinuousSwapRight():self._checkContinuousSwapLeft())}},getFlickrContent:function(content,manipulationMethod){var self=this,el=this.element;$.getJSON(content,function(data){function loadFlickrImage(item,sizeIndex){var path=item.media.m,imgSrc=path.replace("_m",flickrImageSizes[sizeIndex].letter),tempImg=$("<img />").attr("src",imgSrc);tempImg.load(function(){this.height<el.data("scrollableAreaHeight")&&sizeIndex+1<flickrImageSizes.length?loadFlickrImage(item,sizeIndex+1):addImageToLoadedImages(this);if(loadedFlickrImagesCounter===numberOfFlickrItems){switch(manipulationMethod){case"addFirst":el.data("scrollableArea").children(":first").before(loadedFlickrImages);break;case"addLast":el.data("scrollableArea").children(":last").after(loadedFlickrImages);break;default:el.data("scrollableArea").html(loadedFlickrImages)}self.recalculateScrollableArea();self._showHideHotSpots();self._trigger("addedFlickrContent",null,{addedElementIds:imageIdStringBuffer})}})}function addImageToLoadedImages(imageObj){var widthScalingFactor=el.data("scrollableAreaHeight")/imageObj.height,tempWidth=Math.round(imageObj.width*widthScalingFactor),tempIdArr=$(imageObj).attr("src").split("/"),lastElemIndex=tempIdArr.length-1;tempIdArr=tempIdArr[lastElemIndex].split(".");$(imageObj).attr("id",tempIdArr[0]);$(imageObj).css({height:el.data("scrollableAreaHeight"),width:tempWidth});imageIdStringBuffer.push(tempIdArr[0]);loadedFlickrImages.push(imageObj);loadedFlickrImagesCounter++}var startingIndex,flickrImageSizes=[{size:"small square",pixels:75,letter:"_s"},{size:"thumbnail",pixels:100,letter:"_t"},{size:"small",pixels:240,letter:"_m"},{size:"medium",pixels:500,letter:""},{size:"medium 640",pixels:640,letter:"_z"},{size:"large",pixels:1024,letter:"_b"}],loadedFlickrImages=[],imageIdStringBuffer=[],numberOfFlickrItems=data.items.length,loadedFlickrImagesCounter=0;startingIndex=el.data("scrollableAreaHeight")<=75?0:el.data("scrollableAreaHeight")<=100?1:el.data("scrollableAreaHeight")<=240?2:el.data("scrollableAreaHeight")<=500?3:el.data("scrollableAreaHeight")<=640?4:5;$.each(data.items,function(index,item){loadFlickrImage(item,startingIndex)})})},getAjaxContent:function(content,manipulationMethod,filterTag){var self=this,el=this.element;$.ajaxSetup({cache:!1});$.get(content,function(data){var filteredContent;filteredContent=void 0!==filterTag?filterTag.length>0?$("<div>").html(data).find(filterTag):content:data;switch(manipulationMethod){case"addFirst":el.data("scrollableArea").children(":first").before(filteredContent);break;case"addLast":el.data("scrollableArea").children(":last").after(filteredContent);break;default:el.data("scrollableArea").html(filteredContent)}self.recalculateScrollableArea();self._showHideHotSpots();self._trigger("addedAjaxContent")})},getHtmlContent:function(content,manipulationMethod,filterTag){var filteredContent,self=this,el=this.element;filteredContent=void 0!==filterTag&&filterTag.length>0?$("<div>").html(content).find(filterTag):content;switch(manipulationMethod){case"addFirst":el.data("scrollableArea").children(":first").before(filteredContent);break;case"addLast":el.data("scrollableArea").children(":last").after(filteredContent);break;default:el.data("scrollableArea").html(filteredContent)}self.recalculateScrollableArea();self._showHideHotSpots();self._trigger("addedHtmlContent")},recalculateScrollableArea:function(b){var tempScrollableAreaWidth=0,foundStartAtElement=!1,o=this.options,el=this.element;el.data("scrollableArea").children(o.countOnlyClass).each(function(){if(o.startAtElementId.length>0&&$(this).attr("id")===o.startAtElementId){el.data("startingPosition",tempScrollableAreaWidth);foundStartAtElement=!0}tempScrollableAreaWidth+=$(this).outerWidth(!0)});foundStartAtElement||el.data("startAtElementId","");el.data("scrollableAreaWidth",tempScrollableAreaWidth);el.data("scrollableArea").width(el.data("scrollableAreaWidth"));if(!b){el.data("scrollWrapper").scrollLeft(el.data("startingPosition"));el.data("scrollXPos",el.data("startingPosition"))}},getScrollerOffset:function(){var el=this.element;return el.data("scrollWrapper").scrollLeft()},stopAutoScrolling:function(){var self=this,el=this.element;if(null!==el.data("autoScrollingInterval")){clearInterval(el.data("autoScrollingInterval"));el.data("autoScrollingInterval",null);self._showHideHotSpots();self._trigger("autoScrollingStopped")}},startAutoScrolling:function(){var self=this,el=this.element,o=this.options;if(el.data("enabled")){self._showHideHotSpots();clearInterval(el.data("autoScrollingInterval"));el.data("autoScrollingInterval",null);self._trigger("autoScrollingStarted");el.data("autoScrollingInterval",setInterval(function(){if(!el.data("visible")||el.data("scrollableAreaWidth")<=el.data("scrollWrapper").innerWidth()){clearInterval(el.data("autoScrollingInterval"));el.data("autoScrollingInterval",null)}else{el.data("previousScrollLeft",el.data("scrollWrapper").scrollLeft());switch(o.autoScrollingDirection){case"right":el.data("scrollWrapper").scrollLeft(el.data("scrollWrapper").scrollLeft()+o.autoScrollingStep);if(el.data("previousScrollLeft")===el.data("scrollWrapper").scrollLeft()){self._trigger("autoScrollingRightLimitReached");clearInterval(el.data("autoScrollingInterval"));el.data("autoScrollingInterval",null);self._trigger("autoScrollingIntervalStopped")}break;case"left":el.data("scrollWrapper").scrollLeft(el.data("scrollWrapper").scrollLeft()-o.autoScrollingStep);if(el.data("previousScrollLeft")===el.data("scrollWrapper").scrollLeft()){self._trigger("autoScrollingLeftLimitReached");clearInterval(el.data("autoScrollingInterval"));el.data("autoScrollingInterval",null);self._trigger("autoScrollingIntervalStopped")}break;case"backAndForth":"right"===el.data("pingPongDirection")?el.data("scrollWrapper").scrollLeft(el.data("scrollWrapper").scrollLeft()+o.autoScrollingStep):el.data("scrollWrapper").scrollLeft(el.data("scrollWrapper").scrollLeft()-o.autoScrollingStep);if(el.data("previousScrollLeft")===el.data("scrollWrapper").scrollLeft())if("right"===el.data("pingPongDirection")){el.data("pingPongDirection","left");self._trigger("autoScrollingRightLimitReached")}else{el.data("pingPongDirection","right");self._trigger("autoScrollingLeftLimitReached")}break;case"endlessLoopRight":el.data("scrollWrapper").scrollLeft(el.data("scrollWrapper").scrollLeft()+o.autoScrollingStep);self._checkContinuousSwapRight();break;case"endlessLoopLeft":el.data("scrollWrapper").scrollLeft(el.data("scrollWrapper").scrollLeft()-o.autoScrollingStep);self._checkContinuousSwapLeft()}}},o.autoScrollingInterval))}},_checkContinuousSwapRight:function(){var el=this.element,o=this.options;if(el.data("getNextElementWidth")){if(o.startAtElementId.length>0&&el.data("startAtElementHasNotPassed")){el.data("swapAt",$("#"+o.startAtElementId).outerWidth(!0));el.data("startAtElementHasNotPassed",!1)}else el.data("swapAt",el.data("scrollableArea").children(":first").outerWidth(!0));el.data("getNextElementWidth",!1)}if(el.data("swapAt")<=el.data("scrollWrapper").scrollLeft()){el.data("swappedElement",el.data("scrollableArea").children(":first").detach());
el.data("scrollableArea").append(el.data("swappedElement"));var wrapperLeft=el.data("scrollWrapper").scrollLeft();el.data("scrollWrapper").scrollLeft(wrapperLeft-el.data("swappedElement").outerWidth(!0));el.data("getNextElementWidth",!0)}},_checkContinuousSwapLeft:function(){var el=this.element,o=this.options;if(el.data("getNextElementWidth")){if(o.startAtElementId.length>0&&el.data("startAtElementHasNotPassed")){el.data("swapAt",$("#"+o.startAtElementId).outerWidth(!0));el.data("startAtElementHasNotPassed",!1)}else el.data("swapAt",el.data("scrollableArea").children(":first").outerWidth(!0));el.data("getNextElementWidth",!1)}if(0===el.data("scrollWrapper").scrollLeft()){el.data("swappedElement",el.data("scrollableArea").children(":last").detach());el.data("scrollableArea").prepend(el.data("swappedElement"));el.data("scrollWrapper").scrollLeft(el.data("scrollWrapper").scrollLeft()+el.data("swappedElement").outerWidth(!0));el.data("getNextElementWidth",!0)}},restoreOriginalElements:function(){var self=this,el=this.element;el.data("scrollableArea").html(el.data("originalElements"));self.recalculateScrollableArea();self.jumpToElement("first")},show:function(){var el=this.element;el.data("visible",!0);el.show()},hide:function(){var el=this.element;el.data("visible",!1);el.hide()},enable:function(){var el=this.element;this.options.touchScrolling&&el.data("scrollWrapper").kinetic("attach");el.data("enabled",!0)},disable:function(){var self=this,el=this.element;self.stopAutoScrolling();clearInterval(el.data("rightScrollingInterval"));clearInterval(el.data("leftScrollingInterval"));clearInterval(el.data("hideHotSpotBackgroundsInterval"));this.options.touchScrolling&&el.data("scrollWrapper").kinetic("detach");el.data("enabled",!1)},destroy:function(){var self=this,el=this.element;self.stopAutoScrolling();clearInterval(el.data("rightScrollingInterval"));clearInterval(el.data("leftScrollingInterval"));clearInterval(el.data("hideHotSpotBackgroundsInterval"));el.data("scrollingHotSpotRight").unbind("mouseover");el.data("scrollingHotSpotRight").unbind("mouseout");el.data("scrollingHotSpotRight").unbind("mousedown");el.data("scrollingHotSpotLeft").unbind("mouseover");el.data("scrollingHotSpotLeft").unbind("mouseout");el.data("scrollingHotSpotLeft").unbind("mousedown");el.unbind("mousenter");el.unbind("mouseleave");el.data("scrollingHotSpotRight").remove();el.data("scrollingHotSpotLeft").remove();el.data("scrollableArea").remove();el.data("scrollWrapper").remove();el.html(el.data("originalElements"));$.Widget.prototype.destroy.apply(this,arguments)}})}(jQuery);angular.module("app").directive("availableColors",["$log","$timeout",function($log,$timeout){return{restrict:"A",scope:{colors:"=",pattern:"@",size:"@"},templateUrl:window.staticURI+"/views/buildAndPrice/availableColors.html",link:function(scope,element,attributes){scope.$watch("colors",function(newValue,oldValue){scope.styles=[];if(scope.colors)for(var i=0;i<scope.colors.length;i++)scope.styles.push({"background-color":"#"+scope.colors[i].baseHex})})}}}]);define("image",[],function(){function noop(){}function cacheBust(url){url=url.replace(CACHE_BUST_FLAG,"");url+=url.indexOf("?")<0?"?":"&";return url+CACHE_BUST_QUERY_PARAM+"="+Math.round(2147483647*Math.random())}var CACHE_BUST_QUERY_PARAM="bust",CACHE_BUST_FLAG="!bust",RELATIVE_FLAG="!rel";return{load:function(name,req,onLoad,config){var img;if(config.isBuild)onLoad(null);else{img=new Image;img.onerror=function(err){onLoad.error(err)};img.onload=function(evt){onLoad(img);try{delete img.onload}catch(err){img.onload=noop}};-1!==name.indexOf(RELATIVE_FLAG)?img.src=req.toUrl(name.replace(RELATIVE_FLAG,"")):img.src=name}},normalize:function(name,normalize){return-1===name.indexOf(CACHE_BUST_FLAG)?name:cacheBust(name)}}});var PanoramaTypes={EXTERIOR:"exterior",INTERIOR:"interior",LIST:"list"},PanoramaDirection={LEFT:"left",RIGHT:"right",AUTO:"auto"};angular.module("app").directive("panorama",["$log","safeApply","$swipe","kiaEvents","externalConstant",function($log,safeApply,$swipe,kiaEvents,externalConstant){var setSizes={exterior:[{width:60,height:26},{width:120,height:53},{width:240,height:106},{width:320,height:141},{width:480,height:212},{width:640,height:283},{width:800,height:354},{width:960,height:425},{width:1280,height:566},{width:1600,height:708},{width:1920,height:850}],interior:[{width:320,height:170},{width:480,height:255},{width:640,height:340},{width:800,height:425},{width:960,height:510},{width:1280,height:680},{width:1600,height:850}]},getImageId=function(x,y,z){return"img-"+x+"-"+y+"-"+z},normalizeArc=function(arc,limit){return 0>arc?normalizeArc(limit+arc,limit):arc>limit?normalizeArc(arc-limit,limit):arc===limit?0:arc},emptyObj=function(obj){for(var key in obj){obj[key]=void 0;delete obj[key]}};return{restrict:"A",replace:!0,scope:{id:"@",path:"@",arc:"@",frames:"@",x:"@",y:"@",z:"@",width:"=",height:"=",pattern:"@",mode720:"@",sizeFixed:"@",disable:"@",touch:"@",resetOnPathChange:"@",active:"=",obj:"=",update:"&",rotate:"=",imagesSet:"=",type:"@",frame:"=",fullscreen:"=",altTitle:"="},templateUrl:window.staticURI+"/views/directives/panorama.html",controller:function($scope){$scope.fullClass="full-width";$scope.reset=!1;$scope.forceUpdate=!1;void 0===$scope.id&&($scope.id="panorama"+Math.floor(1e5*Math.random()));void 0===$scope.sizeFixed&&($scope.sizeFixed=!1);void 0===$scope.type&&($scope.type=PanoramaTypes.EXTERIOR);$scope.initialized=!1;$scope.delta=-1;$scope.loading=!1;$scope.error=!1;$scope.imagePath="";$scope.margin={top:0,left:0};$scope.currentSize={width:0,height:0,ndx:0};$scope.dimensions={width:0,height:0};$scope.sizes=setSizes.exterior.slice(0);$scope.namePattern="90-xx-0.jpg";void 0!==$scope.pattern&&""!==$scope.pattern&&($scope.namePattern=$scope.pattern);void 0===$scope.mode720&&($scope.mode720=!1);$scope.coord={x:0,y:0,z:0};$scope.target={x:0,y:0,z:0};$scope.images={list:[],hash:{},mode:{360:!1,720:!1},count:{360:0,720:0},active:"",loading:-1,loop:{active:"true"===$scope.rotate||$scope.rotate===!0,timer:null,x:0,y:0,z:0}};$scope.initial={x:0,y:0,z:0};$scope.fps=10;var updateConstants=function(){$scope.fps=externalConstant.getValue("panorama.fps")&&externalConstant.getValue("panorama.fps")>1?externalConstant.getValue("panorama.fps"):$scope.fps;$scope.sizes.exterior=externalConstant.getValue("panorama.exterior")||$scope.sizes.exterior;$scope.sizes.interior=externalConstant.getValue("panorama.interior")||$scope.sizes.interior};externalConstant.resourceFileLoaded?updateConstants():$scope.$on(kiaEvents.GLOBAL.CONSTANTS_LOADED,updateConstants);$scope.startImageList_list=function(){$scope.images.list.splice(0);emptyObj($scope.images.hash);var imageNdx=0,sId="",dX=0,nSet=$scope.currentSize.ndx,aImages=$scope.imagesSet[nSet].images;if($scope.initial.x>=aImages.length){$scope.initial.x=0;$scope.target.x=0;$scope.coord.x=0}var x=$scope.initial.x,y=$scope.initial.y,z=$scope.initial.z;for(dX=0;dX<=aImages.length;dX++){x=($scope.coord.x+dX)%aImages.length;sId=getImageId(x,y,z);if(void 0===$scope.images.hash[sId]){$scope.images.hash[sId]=imageNdx;$scope.images.list.push({id:sId,file:aImages[x]});imageNdx++}}$scope.images.count.mode360=imageNdx;$scope.images.count.mode720=0;sId=getImageId($scope.coord.x,$scope.coord.y,$scope.coord.z);$scope.images.active=$scope.images.list[$scope.images.hash[sId]].id};$scope.startImageList_rotation=function(){$scope.images.list.splice(0);emptyObj($scope.images.hash);var imageNdx=0,sId="",arcDelta=$scope.span,x=$scope.initial.x,y=$scope.initial.y,z=$scope.initial.z,dX=0,dY=0,sPath=$scope.path;$scope.sizeFixed||(sPath+=$scope.currentSize.width+"x"+$scope.currentSize.height+"/");for(dX=0;360>=dX;dX+=arcDelta){x=($scope.coord.x+dX)%360;sId=getImageId(x,y,z);if(void 0===$scope.images.hash[sId]){$scope.images.hash[sId]=imageNdx;$scope.images.list.push({id:sId,file:sPath+getFileName(x,y,z)});imageNdx++}}$scope.images.count.mode360=imageNdx;if($scope.mode720){for(dX=0;360>=dX;dX+=arcDelta){x=($scope.coord.x+dX)%360;for(dY=0;360>=dY;dY+=arcDelta){y=($scope.coord.y+dY)%360;sId=getImageId(x,y,z);if(void 0===$scope.images.hash[sId]){$scope.images.hash[sId]=imageNdx;$scope.images.list.push({id:sId,file:sPath+getFileName(x,y,z)});imageNdx++}}}$scope.images.count.mode720=imageNdx}else $scope.images.count.mode720=0;sId=getImageId($scope.coord.x,$scope.coord.y,$scope.coord.z);$scope.images.active=$scope.images.list[$scope.images.hash[sId]].id};$scope.updateImageList=function(){switch($scope.type){case PanoramaTypes.LIST:$scope.startImageList_list();break;default:$scope.startImageList_rotation()}};$scope.initialize=function(bForce){var i=0;switch($scope.type){case PanoramaTypes.LIST:$scope.span=1;$scope.mode720=!1;$scope.sizes.splice(0);if($scope.imagesSet)for(i=0;i<$scope.imagesSet.length;i++)$scope.sizes.push({width:$scope.imagesSet[i].width,height:$scope.imagesSet[i].height});break;case PanoramaTypes.INTERIOR:$scope.sizes=setSizes.interior.slice(0);break;default:$scope.sizes=setSizes.exterior.slice(0)}if(bForce)$scope.resize();else{$scope.initialized=!0;$scope.resetCoords(!0);$scope.resize(!0)}};var getFileName=function(x,y,z){var sFile=String($scope.namePattern);sFile=sFile.replace(/xx/gi,x);sFile=sFile.replace(/yy/gi,y);sFile=sFile.replace(/zz/gi,z);return sFile};$scope.isActive=function(bForce){if(void 0===$scope.active||null===$scope.active)return!0;var bActive=$scope.active===!0||"true"===$scope.active;bForce&&(bActive=!bActive);return bActive};$scope.updatePath=function(bForce){if(void 0!==$scope.startLoading){var bUpdate=!1;$scope.error=!1;if($scope.isActive()){var sPath=$scope.path;$scope.sizeFixed||(sPath+=$scope.currentSize.width+"x"+$scope.currentSize.height+"/");bUpdate=$scope.imagePath!==sPath;bUpdate=bForce||bUpdate&&""!==sPath;if(bUpdate){$scope.imagePath=sPath;$scope.reset=!0;if(!$scope.loading){$scope.startLoading();$scope.error=!1;$scope.loadNext()}}else{$scope.stopLoading();$scope.error=!1}}$scope.sendCallback()}};$scope.resetCoords=function(bForce){if(bForce||$scope.resetOnPathChange){$scope.coord.x=$scope.initial.x;$scope.coord.y=$scope.initial.y;$scope.coord.z=$scope.initial.z;$scope.target.x=$scope.initial.x;$scope.target.y=$scope.initial.y;$scope.target.z=$scope.initial.z}};$scope.sendCallback=function(){if($scope.update&&$scope.obj){$scope.obj.id=$scope.id;$scope.obj.coord=$scope.coord;$scope.obj.path=$scope.path;$scope.obj.sizes=$scope.sizes;$scope.obj.pattern=$scope.namePattern;$scope.update()}}},link:function(scope,element,attrs){scope.setInitial=function(){var objParams=scope;void 0!==objParams.x&&""!==objParams.x&&(scope.initial.x=parseInt(objParams.x,10));void 0!==objParams.y&&""!==objParams.y&&(scope.initial.y=parseInt(objParams.y,10));void 0!==objParams.z&&""!==objParams.z&&(scope.initial.z=parseInt(objParams.z,10));void 0!==objParams.frame&&""!==objParams.frame&&(scope.initial.x=parseInt(objParams.frame,10));scope.span=20;void 0!==objParams.arc&&""!==objParams.arc&&(scope.span=parseInt(objParams.arc,10));void 0!==objParams.frames&&""!==objParams.frames&&(0===parseInt(objParams.frames,10)?scope.span=360:scope.span=360/parseInt(objParams.frames,10))};scope.mode720||$(element).addClass("panorama-360");scope.autoRotate=function(bContinue){if(scope.images.loop.active){if(!bContinue){scope.images.loop.x=scope.target.x;scope.images.loop.y=scope.target.y;scope.images.loop.z=scope.target.z;scope.delta=0;var diff=0;switch(attrs.direction){case PanoramaDirection.LEFT:scope.delta=1;break;case PanoramaDirection.AUTO:diff=Math.abs(scope.coord.x-scope.images.loop.x);scope.coord.x<scope.images.loop.x?scope.delta=1:scope.delta=-1;break;default:scope.delta=-1}}bContinue&&scope.coord.x===scope.images.loop.x&&scope.coord.y===scope.images.loop.y&&scope.coord.z===scope.images.loop.z?scope.images.loop.active=!1:scope.images.loop.timer=setTimeout(function(){scope.move(scope.delta,0,0,!0)},1e3/scope.fps)}};scope.normalize=function(n){var nLimit=360;scope.type===PanoramaTypes.LIST&&(nLimit=scope.images.count.mode360);var x=normalizeArc(n,nLimit);return x};scope.move=function(x,y,z,bAuto){if(scope.images.mode.mode360){if(!bAuto||scope.images.loop.timer){clearTimeout(scope.images.loop.timer);scope.images.loop.timer=null}safeApply(scope,function(){scope.coord.x=scope.normalize(scope.coord.x+x*scope.span);scope.coord.y=scope.normalize(scope.coord.y+y*scope.span);scope.coord.z+=z;var nextId=getImageId(scope.coord.x,scope.coord.y,scope.coord.z);scope.images.active=nextId});bAuto||(scope.images.loop.active=!1);scope.sendCallback();scope.autoRotate(!0)}};scope.loadNext=function(){if(scope.reset){scope.reset=!1;scope.images.loading=-1}var nCurrent=scope.images.loading;0>nCurrent&&(nCurrent=0);if(nCurrent<scope.images.list.length){var sFile=scope.images.list[nCurrent].file;try{require(["image!"+sFile],function(img){if(scope.images.list[nCurrent]){var tempFirstElem=$(element).find(".panorama-"+scope.images.list[nCurrent].id).get(0);if(tempFirstElem){tempFirstElem.innerHTML="";tempFirstElem.appendChild(img.cloneNode(!0))}var oImg=$(element).find(".panorama-"+scope.images.list[nCurrent].id).find("img");oImg.draggable=!1;oImg.css({marginTop:scope.margin.top,marginLeft:scope.margin.left});var sAlt=null;scope.altTitle&&("string"==typeof scope.altTitle?sAlt=scope.altTitle:Array.isArray(scope.altTitle)&&nCurrent<scope.altTitle.length&&(sAlt=scope.altTitle[nCurrent]));sAlt&&""!==sAlt&&oImg.attr("alt",sAlt);$(element).find(".panorama-"+scope.images.list[nCurrent].id).find("img").on("dragstart",function(event){event.preventDefault();return!1})}safeApply(scope,function(){scope.error=!1;scope.images.loading++;scope.startLoading();scope.loadNext()});delete img.onload},function(ev){safeApply(scope,function(){if(scope.type!==PanoramaTypes.LIST){var sErrorPath=scope.path;scope.sizeFixed||(sErrorPath+=scope.currentSize.width+"x"+scope.currentSize.height+"/");if(scope.imagePath!==sErrorPath){scope.images.loading++;scope.startLoading();scope.loadNext();scope.error=!1}else if(scope.reset){scope.startLoading();scope.loadNext()}else{scope.stopLoading();scope.error=!0;scope.images.loading=-1}}})})}catch(ev){}}else safeApply(scope,function(){scope.stopLoading();scope.error=!1;scope.autoRotate();scope.images.loading=-1});safeApply(scope,function(){scope.images.mode.mode360=scope.images.count.mode360<=nCurrent;scope.mode720&&(scope.images.mode.mode720=scope.images.count.mode720<=nCurrent)})};scope.updateHeight=function(){if(void 0===scope.width&&void 0===scope.height){var objWidth=scope.getWidth(),rate=objWidth/scope.currentSize.width,objHeight=Math.ceil(scope.currentSize.height*rate);$(element).css({"min-height":objHeight+"px"})}};scope.getWidth=function(){var w=$(element).width();void 0!==scope.width&&(w=parseInt(scope.width,10));return w};scope.getHeight=function(){var h=$(element).height();void 0!==scope.height&&(h=parseInt(scope.height,10));return h};var getBestByWidth=function(){var ndx=-1,i=0,objWidth=scope.getWidth();for(i=0;i<scope.sizes.length;i++)0>ndx?ndx=i:objWidth>=scope.sizes[ndx].width&&(ndx=i);0>ndx&&(ndx=i);return ndx},getBestByHeight=function(){var ndx=-1,i=0,objHeight=scope.getHeight();for(i=0;i<scope.sizes.length;i++)0>ndx?ndx=i:objHeight>=scope.sizes[ndx].height&&(ndx=i);0>ndx&&(ndx=i);return ndx},getProportion=function(a,b,total){return b*(total/a)};scope.resize=function(bForce){var ndx=-1,margin=0,objWidth=scope.getWidth(),objHeight=scope.getHeight();if(scope.fullscreen===!0||"true"===scope.fullscreen){var w=getBestByWidth(),h=getBestByHeight();if(objHeight<=getProportion(scope.sizes[w].width,scope.sizes[w].height,objWidth)){ndx=w;scope.fullClass="full-width";margin=Math.abs(objHeight-getProportion(scope.sizes[ndx].width,scope.sizes[ndx].height,objWidth));margin=Math.floor(margin/2);scope.margin.top=-margin+"px";scope.margin.left=0}else{ndx=h;scope.fullClass="full-height";margin=Math.abs(objWidth-getProportion(scope.sizes[ndx].height,scope.sizes[ndx].width,objHeight));margin=Math.floor(margin/2);scope.margin.top=0;scope.margin.left=-margin+"px"}}else{scope.fullClass="full-width";ndx=getBestByWidth();scope.margin.top=0;scope.margin.left=0}if(scope.isActive()){if(bForce||scope.currentSize.width!==scope.sizes[ndx].width){scope.forceUpdate=!1;scope.currentSize.width=scope.sizes[ndx].width;scope.currentSize.height=scope.sizes[ndx].height;scope.currentSize.ndx=ndx;if(scope.images.loop.timer){clearTimeout(scope.images.loop.timer);scope.images.loop.timer=null}scope.fullscreen!==!0&&"true"!==scope.fullscreen&&scope.updateHeight();scope.updateImageList();scope.updatePath(bForce)}}else scope.sendCallback()};scope.dragOffset={x:0,y:0};(scope.touch===!0||"true"===scope.touch)&&$swipe.bind(element,{start:function(coords){scope.dragOffset={x:0,y:0};scope.prevPos=coords},move:function(coords){scope.dragOffset.x+=scope.prevPos.x-coords.x;scope.dragOffset.y+=scope.prevPos.y-coords.y;if(Math.abs(scope.dragOffset.x)>=10){scope.dragOffset.x<0?scope.move(-1,0,0):scope.move(1,0,0);scope.dragOffset.x=0;scope.dragOffset.y=0}element.scrollTop(0);scope.prevPos=coords},end:function(coords){element.scrollTop(0);scope.lastScroll=0}});$(element).resize(function(){void 0===scope.width&&void 0===scope.height&&safeApply(scope,function(){scope.isActive()&&scope.resize()})});if(scope.isActive()){scope.setInitial();scope.initialize()}else scope.initialize(!0);scope.updateHeight();void 0!==scope.frame&&scope.$watch("frame",function(){if(void 0!==scope.frame&&scope.isActive()){scope.target.x=scope.normalize(parseInt(scope.frame,10));scope.images.loop.active=!0;scope.autoRotate()}});scope.$watch("path",function(){if(void 0!==scope.path)if(scope.isActive()&&scope.initialized)scope.resize(!0);else{scope.forceUpdate=!0;scope.sendCallback()}});void 0!==scope.active&&null!==scope.active&&scope.$watch("active",function(){if(void 0!==scope.path&&scope.isActive()){if(!scope.initialized){scope.setInitial();scope.initialize()}scope.resize(scope.forceUpdate)}});void 0!==scope.rotate&&scope.$watch("rotate",function(){if(void 0!==scope.rotate&&scope.isActive()&&!scope.images.loop.active){scope.images.loop.active=!0;scope.autoRotate()}});void 0!==scope.imagesSet&&scope.$watch("imagesSet",function(){if(void 0!==scope.imagesSet&&scope.isActive()){scope.setInitial();scope.initialize()}});scope.startLoading=function(){scope.loading=!0;scope.$emit(kiaEvents.LOADER.SHOW)};scope.stopLoading=function(){scope.loading=!1;scope.$emit(kiaEvents.LOADER.HIDE)};void 0!==scope.width&&scope.$watch("width",function(){scope.resize()});void 0!==scope.width&&scope.$watch("height",function(){scope.resize()})}}}]);!function($){$.kinetic.callMethods.jumpTo=function(settings,options){$(this).kinetic("stop");$("#wrapper-img").css({overflow:"auto"}).scrollLeft(this.scrollWidth/2.62);$("#wrapper-img").scrollTop(this.scrollHeight/2);$("#wrapper-img").css({overflow:"hidden"});console.log("kinetic jump to x,y points"+this.scrollLeft+"-"+this.scrollTop)}}(jQuery);Modernizr.addTest("lteIE8",function(){if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var ieversion=Number(RegExp.$1);return 8>=ieversion?!0:!1}return!1});angular.module("app").directive("fishEyeViewer",["$log","kiaEvents","$timeout","safeApply","$rootScope",function($log,kiaEvents,$timeout,safeApply,$rootScope){var link=function(scope,element,attrs){function imageLoaded(){var buffer=document.createElement("canvas"),bufferContext=buffer.getContext("2d");buffer.getContext("2d");buffer.width=scope.img.width*scope.resizeFactor;buffer.height=scope.img.height*scope.resizeFactor;var cached=scope.renderToCanvas(buffer.width,buffer.height,function(bufferContextCp){bufferContextCp.drawImage(scope.img,0,0,buffer.width,buffer.height)});bufferContext.drawImage(cached,0,0);var bufferImgdata=bufferContext.getImageData(0,0,buffer.width,buffer.height);scope.bufferPixels=bufferImgdata.data;draw();$(element).find("#static-img").fadeOut(50);$(element).find("#canvas").fadeIn(30);scope.$emit(kiaEvents.LOADER.HIDE);scope.onEvents()}function draw(){var ctx=scope.pano.panoCanvas.getContext("2d"),cached=scope.renderToCanvas(scope.pano.panoCanvas.width,scope.pano.panoCanvas.height,function(ctx){ctx.fillStyle="rgba(8, 8, 8, 1)";ctx.fillRect(0,0,scope.pano.panoCanvas.width,scope.pano.panoCanvas.height)});ctx.drawImage(cached,0,0);renderPano(scope.pano.panoCanvas);scope.$emit(kiaEvents.LOADER.HIDE)}function renderPano(canvas){var ctx=canvas.getContext("2d"),imgdata=ctx.getImageData(0,0,canvas.width,canvas.height),pixels=imgdata.data;scope.renderPanoVar.srcWidth=scope.img.width*scope.resizeFactor;scope.renderPanoVar.srcHeight=scope.img.height*scope.resizeFactor;scope.renderPanoVar.destWidth=canvas.width;scope.renderPanoVar.destHeight=canvas.height;scope.renderPanoVar.thetaFac=scope.renderPanoVar.srcHeight/Math.PI;scope.renderPanoVar.phiFac=.5*scope.renderPanoVar.srcWidth/Math.PI;scope.renderPanoVar.ratioUp=2*Math.tan(scope.cameraMath.cameraFov*scope.CONSTANT.DEG2RAD/2);scope.renderPanoVar.ratioRight=1.33*scope.renderPanoVar.ratioUp;scope.renderPanoVar.camDirX=Math.sin(scope.cameraMath.cameraPitch*scope.CONSTANT.DEG2RAD)*Math.sin(scope.cameraMath.cameraHeading*scope.CONSTANT.DEG2RAD);scope.renderPanoVar.camDirY=Math.cos(scope.cameraMath.cameraPitch*scope.CONSTANT.DEG2RAD);scope.renderPanoVar.camDirZ=Math.sin(scope.cameraMath.cameraPitch*scope.CONSTANT.DEG2RAD)*Math.cos(scope.cameraMath.cameraHeading*scope.CONSTANT.DEG2RAD);scope.renderPanoVar.camUpX=scope.renderPanoVar.ratioUp*Math.sin((scope.cameraMath.cameraPitch-90)*scope.CONSTANT.DEG2RAD)*Math.sin(scope.cameraMath.cameraHeading*scope.CONSTANT.DEG2RAD);scope.renderPanoVar.camUpY=scope.renderPanoVar.ratioUp*Math.cos((scope.cameraMath.cameraPitch-90)*scope.CONSTANT.DEG2RAD);scope.renderPanoVar.camUpZ=scope.renderPanoVar.ratioUp*Math.sin((scope.cameraMath.cameraPitch-90)*scope.CONSTANT.DEG2RAD)*Math.cos(scope.cameraMath.cameraHeading*scope.CONSTANT.DEG2RAD);scope.renderPanoVar.camRightX=scope.renderPanoVar.ratioRight*Math.sin((scope.cameraMath.cameraHeading-90)*scope.CONSTANT.DEG2RAD);scope.renderPanoVar.camRightY=0;scope.renderPanoVar.camRightZ=scope.renderPanoVar.ratioRight*Math.cos((scope.cameraMath.cameraHeading-90)*scope.CONSTANT.DEG2RAD);scope.renderPanoVar.camPlaneOriginX=scope.renderPanoVar.camDirX+.5*scope.renderPanoVar.camUpX-.5*scope.renderPanoVar.camRightX;scope.renderPanoVar.camPlaneOriginY=scope.renderPanoVar.camDirY+.5*scope.renderPanoVar.camUpY-.5*scope.renderPanoVar.camRightY;scope.renderPanoVar.camPlaneOriginZ=scope.renderPanoVar.camDirZ+.5*scope.renderPanoVar.camUpZ-.5*scope.renderPanoVar.camRightZ;var j,bufferPixels=scope.bufferPixels,i=0;for(i=0;i<scope.renderPanoVar.destHeight;i++)for(j=0;j<scope.renderPanoVar.destWidth;j++){var fx=j/scope.renderPanoVar.destWidth,fy=i/scope.renderPanoVar.destHeight,rayX=scope.renderPanoVar.camPlaneOriginX+fx*scope.renderPanoVar.camRightX-fy*scope.renderPanoVar.camUpX,rayY=scope.renderPanoVar.camPlaneOriginY+fx*scope.renderPanoVar.camRightY-fy*scope.renderPanoVar.camUpY,rayZ=scope.renderPanoVar.camPlaneOriginZ+fx*scope.renderPanoVar.camRightZ-fy*scope.renderPanoVar.camUpZ,rayNorm=1/Math.sqrt(rayX*rayX+rayY*rayY+rayZ*rayZ),theta=Math.acos(rayY*rayNorm),phi=Math.atan2(rayZ,rayX)+Math.PI,theta_i=Math.floor(scope.renderPanoVar.thetaFac*theta),phi_i=Math.floor(scope.renderPanoVar.phiFac*phi),dest_offset=4*(i*scope.renderPanoVar.destWidth+j),src_offset=3*(theta_i*scope.renderPanoVar.srcWidth+phi_i),pixel_offset=src_offset/3*4;pixels[dest_offset]=bufferPixels[pixel_offset];pixels[dest_offset+1]=bufferPixels[pixel_offset+1];pixels[dest_offset+2]=bufferPixels[pixel_offset+2]}ctx.putImageData(imgdata,0,0)}function init(){scope.$emit(kiaEvents.LOADER.SHOW);if(Modernizr.lteie8){scope.staticPath=scope.getPath(scope.canvasSizes[scope.pano.screenOption].staticImageWidth,scope.canvasSizes[scope.pano.screenOption].staticImageHeight,"/static-image.jpg");$(element).find("#static-img").attr("src",scope.staticPath);scope.$emit(kiaEvents.LOADER.HIDE)}else if(scope.isMobile()){var mobileStaticPath=scope.getPath(scope.canvasSizes[scope.pano.screenOption].staticImageWidth,scope.canvasSizes[scope.pano.screenOption].staticImageHeight,"/static-image.jpg");$(element).find("#mobile-static-img").attr("src",mobileStaticPath);scope.loadMobileInterior();$(element).find("#wrapper-img").kinetic();scope.$emit(kiaEvents.LOADER.HIDE);$timeout(function(){$(element).find("#wrapper-img").kinetic("jumpTo")},1e3)}else{scope.pano.panoCanvas=document.getElementById("canvas");if(scope.pano.panoCanvas){scope.pano.panoCanvas.width=5;scope.pano.panoCanvas.height=5;scope.boxWidth=$(element).find(".fish-eye-wrapper").width();$(element).find("#wrapper-canvas").width(scope.boxWidth+2);$(element).find("#wrapper-canvas").height(scope.boxWidth/1.5+2);scope.pano.panoCanvas.width=scope.boxWidth;scope.pano.panoCanvas.height=scope.boxWidth/1.5;scope.loadInterior(scope.path)}}}function clearMemory(){scope.bufferPixels=null;scope.bufferPixels=null;void 0!==scope.pano.panoCanvas&&(scope.pano.panoCanvas.width=scope.pano.panoCanvas.width);scope.renderPanoVar.pixels=null;scope.renderPanoVar=null}scope.CONSTANT={FPS:60,DEG2RAD:Math.PI/180};scope.cameraMath={cameraHeading:90,cameraPitch:110,cameraFov:60};scope.pano={panoCanvas:null,cursorIsDown:!1,canvasSizes:null,cursorDownPosLastX:0,cursorDownPosLastY:0,displayInfo:!1,highquality:!0,rotateInt:2,keyIsDown:!0,minZoom:!0,maxZoom:!1,zoomDelta:1,imagePath:null};scope.renderPanoVar={pixels:null,srcWidth:null,srcHeight:null,destWidth:null,destHeight:null,thetaFac:null,phiFac:null,ratioUp:null,ratioRight:null,camDirX:null,camDirY:null,camDirZ:null,camUpX:null,camUpY:null,camUpZ:null,camRightX:null,camRightY:null,camRightZ:null,camPlaneOriginX:null,camPlaneOriginY:null,camPlaneOriginZ:null};scope.canvasSizes=[{staticImageWidth:320,staticImageHeight:140,imgWidth:1500,imgHeight:750},{staticImageWidth:480,staticImageHeight:320,imgWidth:2e3,imgHeight:1e3},{staticImageWidth:750,staticImageHeight:500,imgWidth:4e3,imgHeight:2e3},{staticImageWidth:960,staticImageHeight:640,imgWidth:6e3,imgHeight:3e3}];scope.resizeFactor=1;scope.canvasSelector=$(element).find("#canvas");scope.isMobile=function(){return Modernizr.android||Modernizr.ipod||Modernizr.iphone||Modernizr.ipad};scope.getWidth=function(){var w=$(element).width();void 0!==scope.width&&(w=parseInt(scope.width,10));return w};scope.renderToCanvas=function(width,height,renderFunction){var buffer=document.createElement("canvas");buffer.width=width;buffer.height=height;renderFunction(buffer.getContext("2d"));return buffer};scope.pano.screenOption=null;scope.resizeCanvas=function(){switch(!0){case scope.getWidth()<=480:scope.pano.screenOption=1;break;case scope.getWidth()<640:scope.isMobile()?scope.pano.screenOption=1:scope.pano.screenOption=2;break;case scope.getWidth()<=768:Modernizr.ipad?scope.pano.screenOption=3:scope.pano.screenOption=2;break;default:scope.isMobile()?scope.pano.screenOption=2:scope.pano.screenOption=3;scope.pano.screenOption=3}init()};scope.imgBuffer=[];var setWidth=null,resizeTimeout=null;$(window).resize(function(){resizeTimeout&&$timeout.cancel(resizeTimeout);scope.isMobile();if(scope.getWidth()===setWidth&&scope.getWidth()===setWidth+2||!scope.resizeOn)scope.resizeOn=!0;else{clearTimeout(resizeTimeout);setWidth=scope.getWidth();resizeTimeout=$timeout(function(){scope.resizeCanvas()},50)}});scope.rotateRight=function(){scope.cameraMath.cameraHeading-=scope.pano.rotateInt};scope.rotateLeft=function(){scope.cameraMath.cameraHeading+=scope.pano.rotateInt};scope.rotateDown=function(){scope.cameraMath.cameraPitch-=scope.pano.rotateInt};scope.rotateUp=function(){scope.cameraMath.cameraPitch+=scope.pano.rotateInt};scope.zoomIn=function(){scope.pano.minZoom=!1;scope.cameraMath.cameraFov>50?scope.cameraMath.cameraFov-=scope.pano.zoomDelta:scope.pano.minZoom=!0};scope.zoomOut=function(){scope.pano.maxZoom=!1;scope.cameraMath.cameraFov<60?scope.cameraMath.cameraFov+=scope.pano.zoomDelta:scope.pano.maxZoom=!0};scope.touchStart=function(e){scope.pano.cursorIsDown=!0;scope.pano.cursorDownPosLastX=e.touches[0].clientX;scope.pano.cursorDownPosLastY=e.touches[0].clientY};scope.panoTouchDrawingTimer=null;scope.panoTouchReactionThreshold=4;scope.panoTouchDrawingTimeout=10;scope.touchMove=function(e){e.preventDefault();if(scope.pano.cursorIsDown===!0){scope.cameraMath.cameraHeading-=e.touches[0].clientX-scope.pano.cursorDownPosLastX;scope.cameraMath.cameraPitch+=.5*(e.touches[0].clientY-scope.pano.cursorDownPosLastY);scope.cameraMath.cameraPitch=Math.min(180,Math.max(0,scope.cameraMath.cameraPitch));Math.abs(e.touches[0].clientX-scope.pano.cursorDownPosLastX),Math.abs(e.touches[0].clientY-scope.pano.cursorDownPosLastY);scope.pano.cursorDownPosLastX=e.touches[0].clientX;scope.pano.cursorDownPosLastY=e.touches[0].clientY;draw()}};scope.touchEnd=function(e){scope.pano.cursorIsDown=!1;draw()};scope.mouseDown=function(e){scope.pano.cursorIsDown=!0;scope.canvasSelector.css("cursor","pointer");scope.pano.cursorDownPosLastX=e.clientX;scope.pano.cursorDownPosLastY=e.clientY};scope.panoDrawingTimer=null;scope.panReactionThreshold=2;scope.panoDrawingTimeout=10;scope.mouseMove=function(e){if(scope.pano.cursorIsDown===!0){scope.canvasSelector.css("cursor","move");scope.cameraMath.cameraHeading-=e.clientX-scope.pano.cursorDownPosLastX;scope.cameraMath.cameraPitch+=.5*(e.clientY-scope.pano.cursorDownPosLastY);scope.cameraMath.cameraPitch=Math.min(180,Math.max(0,scope.cameraMath.cameraPitch));var dx=Math.abs(e.clientX-scope.pano.cursorDownPosLastX),dy=Math.abs(e.clientY-scope.pano.cursorDownPosLastY);if(/chrom(e|ium)/.test(navigator.userAgent.toLowerCase())){scope.pano.cursorDownPosLastX=e.clientX;scope.pano.cursorDownPosLastY=e.clientY;draw()}else if(dx>scope.panReactionThreshold||dy>scope.panReactionThreshold){scope.pano.cursorDownPosLastX=e.clientX;scope.pano.cursorDownPosLastY=e.clientY;scope.panoDrawingTimer&&$timeout.cancel(scope.panoDrawingTimer);scope.panoDrawingTimer=$timeout(function(){draw()},scope.panoDrawingTimeout)}}};scope.mouseUp=function(e){scope.pano.cursorIsDown=!1;draw()};scope.keyUp=function(e){scope.pano.keyIsDown=!1;draw()};scope.keyDown=function(e){switch(e.keyCode){case 37:e.preventDefault();scope.rotateRight();draw();break;case 38:e.preventDefault();scope.rotateUp();draw();break;case 39:e.preventDefault();scope.rotateLeft();draw();break;case 40:e.preventDefault();scope.rotateDown();draw();break;case 187:case 61:e.preventDefault();scope.zoomIn();draw();break;case 189:case 173:e.preventDefault();scope.zoomOut();draw()}};scope.onEvents=function(){if(Modernizr.touch){scope.pano.panoCanvas.addEventListener("touchstart",scope.touchStart,!1);scope.pano.panoCanvas.addEventListener("touchmove",scope.touchMove,!1);scope.pano.panoCanvas.addEventListener("touchend",scope.touchEnd,!1)}else{$(element).bind("mousedown",function(event){scope.mouseDown(event)});$(element).bind("mousemove",function(event){scope.mouseMove(event)});$(element).bind("mouseup",function(event){scope.mouseUp(event)});$(window).on("keydown",function(event){scope.keyDown(event)});$(window).on("keyup",function(event){scope.keyUp(event)})}};scope.getPath=function(imgWidth,imgHeight,imgType){return scope.path+imgWidth+"x"+imgHeight+imgType};scope.loadInterior=function(){scope.img=new Image;scope.imgStatic=new Image;scope.staticPath=scope.getPath(scope.canvasSizes[scope.pano.screenOption].staticImageWidth,scope.canvasSizes[scope.pano.screenOption].staticImageHeight,"/static-image.jpg");$(element).find("#static-img").attr("src",scope.staticPath);var revisedPath=scope.getPath(scope.canvasSizes[scope.pano.screenOption].imgWidth,scope.canvasSizes[scope.pano.screenOption].imgHeight,"/fisheye.jpg");scope.img.onload=imageLoaded;scope.img.src=revisedPath};scope.loadMobileInterior=function(){scope.imgSrc=scope.getPath(scope.canvasSizes[scope.pano.screenOption].imgWidth,scope.canvasSizes[scope.pano.screenOption].imgHeight,"/fisheye.jpg");$(element).find("#mobile-img").attr("src",scope.imgSrc);if($(window).width()>768){$("#wrapper-img").width(.47*$(window).width());$("#wrapper-img").css("float","right")}else{$("#wrapper-img").css("float","none");
$("#wrapper-img").width(.975*$(window).width())}$("#wrapper-img").height($("#wrapper-img").width()/1.8);$(element).find("#mobile-static-img").fadeOut(50);$(element).find("#mobile-img").fadeIn(30)};$(window).on("orientationchange.fishEyeViewer",function(){scope.resizeCanvas()});scope.$on("$destroy",function(next,current){clearMemory()});scope.$watch("path",function(){void 0!==scope.path&&scope.resizeCanvas()});scope.resizeOn=!1;scope.resizeOn||scope.resizeCanvas()};return{link:link,restrict:"EA",scope:{mobile:"=",path:"@"},templateUrl:window.staticURI+"/views/directives/fishEyeCanvas.html",controller:function($scope){}}}]);angular.module("app").directive("preventDefault",function(){return function(scope,element,attrs){element.on("click",function(event){event.preventDefault();event.stopPropagation()})}});var INTEGER_REGEXP=/^\-?\d*$/;angular.module("app").directive("integer",function(){return{require:"ngModel",link:function(scope,elm,attrs,ctrl){ctrl.$parsers.unshift(function(viewValue){ctrl.$setValidity("min",!0);ctrl.$setValidity("max",!0);if(INTEGER_REGEXP.test(viewValue)){var min=-Number.MAX_NUMBER,max=Number.MAX_NUMBER;void 0!==attrs.min&&(min=parseInt(attrs.min,10));void 0!==attrs.max&&(max=parseInt(attrs.max,10));var nValue=parseInt(viewValue,10);ctrl.$setValidity("integer",!0);min>nValue?ctrl.$setValidity("min",!1):nValue>max&&ctrl.$setValidity("max",!1);return nValue}ctrl.$setValidity("integer",!1)})}}});var FLOAT_REGEXP=/^\-?\d+((\.|\,)\d+)?$/;angular.module("app").directive("smartFloat",function(){return{require:"ngModel",link:function(scope,elm,attrs,ctrl){ctrl.$parsers.unshift(function(viewValue){ctrl.$setValidity("min",!0);ctrl.$setValidity("max",!0);if(FLOAT_REGEXP.test(viewValue)&&!isNaN(Number(viewValue))){ctrl.$setValidity("float",!0);var min=-Number.MAX_NUMBER,max=Number.MAX_NUMBER;void 0!==attrs.min&&(min=parseFloat(attrs.min,10));void 0!==attrs.max&&(max=parseFloat(attrs.max,10));var nValue=parseFloat(viewValue,10);min>nValue?ctrl.$setValidity("min",!1):nValue>max&&ctrl.$setValidity("max",!1);return nValue}ctrl.$setValidity("float",!1)})}}});angular.module("app").filter("noFractionCurrency",["$filter","$locale",function(filter,locale){var numberFilter=filter("number"),formats=locale.NUMBER_FORMATS;return function(amount,displayNegative,hideCurrency){var formattedNumber,isNegative,currencySymbol;currencySymbol=formats.CURRENCY_SYM;hideCurrency&&(currencySymbol="");angular.isUndefined(displayNegative)&&(displayNegative=!0);isNegative=0>amount;formattedNumber=numberFilter(amount,0);formattedNumber=isNegative&&displayNegative?formattedNumber.substr(0,1)+currencySymbol+formattedNumber.substr(1,formattedNumber.length):isNegative&&!displayNegative?currencySymbol+formattedNumber.substr(1,formattedNumber.length):currencySymbol+formattedNumber;return formattedNumber}}]);angular.module("app").directive("dependenciesBox",["$log","safeApply","bnpTrims","bnpColors","bnpPackages","bnpOptions","bnpPrices","bnpRules","kiaEvents",function($log,safeApply,bnpTrims,bnpColors,bnpPackages,bnpOptions,bnpPrices,bnpRules,kiaEvents){return{restrict:"A",priority:1,replace:!1,scope:{type:"@",boxId:"@",name:"@",item:"=",open:"=",handlerId:"@"},templateUrl:window.staticURI+"/views/buildAndPrice/dependenciesBox.html",controller:function($scope){$scope.content={};$scope.current={};$scope.dependency={colors:{empty:!0,deny:[],require:[],requireOr:[],include:[],first:null},packages:{empty:!0,deny:[],require:[],requireOr:[],include:[],first:null},options:{empty:!0,deny:[],require:[],requireOr:[],include:[],first:null},types:[RulesType.COLORS,RulesType.PACKAGES,RulesType.OPTIONS],count:0};$scope.onClose=function(){$scope.$emit(kiaEvents.BNP.DEPENDENCIES_NO);$scope.open=!1};$scope.onAccept=function(){$scope.$emit(kiaEvents.BNP.DEPENDENCIES_YES,{item:$scope.item,dependency:$scope.dependency});$scope.open=!1}},link:function(scope,element,attrs){scope.resetDependenciesItem=function(type){scope.dependency[type].empty=!0;scope.dependency[type].deny.splice(0);scope.dependency[type].require.splice(0);scope.dependency[type].requireOr.splice(0);scope.dependency[type].include.splice(0)};scope.resetDependencies=function(){scope.resetDependenciesItem(RulesType.COLORS);scope.resetDependenciesItem(RulesType.PACKAGES);scope.resetDependenciesItem(RulesType.OPTIONS)};scope.dependencyItem=function(behavior,oRules){var sName="",oItem=null,oDependencyItem={type:oRules.type,behavior:behavior,item:{type:oRules.type,rules:oRules.rules.id},target:{},content:{},first:!0};switch(oRules.type){case RulesType.COLORS:oItem=bnpColors.getById(oRules.rules.id);oItem=null!==oItem.interior?oItem.interior:oItem.exterior;break;case RulesType.PACKAGES:oItem=bnpPackages.data.list.get(oRules.rules.id);break;case RulesType.OPTIONS:oItem=bnpOptions.data.list.get(oRules.rules.id)}var sImage=null;oItem.images&&oItem.images.length>0&&oItem.images[0]&&oItem.images[0].indexOf("undefined")<=0&&(sImage=window.contentURI+oItem.images[0]);var bInterior=!1;sName=oItem.name;if(oItem.fabric){sName+=" "+oItem.fabric.name;bInterior=!0}sName=sName.toLowerCase();oDependencyItem.content={name:sName,price:oItem.price,image:sImage,interior:bInterior};oItem=null;oDependencyItem.target.type=oRules.rules.type;switch(oRules.rules.type){case RulesType.COLORS:oItem=bnpColors.getById(oRules.rules.target);if(null!==oItem){oDependencyItem.target.id=oRules.rules.target;if(null!==oItem.interior){oItem=oItem.interior;oDependencyItem.target.title=oItem.name+" "+oItem.fabric.name}else{oItem=oItem.exterior;oDependencyItem.target.title=oItem.name}}break;case RulesType.PACKAGES:oItem=bnpPackages.data.currentList.get(oRules.rules.target);if(null!==oItem){oDependencyItem.target.id=oRules.rules.target;oDependencyItem.target.title=oItem.name}break;case RulesType.OPTIONS:oItem=bnpOptions.data.currentList.get(oRules.rules.target);if(null!==oItem){oDependencyItem.target.id=oRules.rules.target;oDependencyItem.target.title=oItem.name}}return oDependencyItem};scope.setDependencies=function(){var oRules=scope.item.dependencies,oItem=null;switch(scope.type){case RulesType.COLORS:scope.item.fabric?scope.content.title=scope.item.name+" "+scope.item.fabric.name:scope.content.title=scope.item.name;break;case RulesType.PACKAGES:scope.content.title=scope.item.name;break;case RulesType.OPTIONS:scope.content.title=scope.item.name}var count=0,totalCount=0,i=0,oDependency=null,bFlag=!1;scope.resetDependencies();for(i=0;i<oRules.require.length();i++){oItem=oRules.require.getNdx(i);bFlag=!1;oDependency=scope.dependencyItem(RulesBehavior.REQUIRE,oItem);bFlag=oDependency.type===RulesType.COLORS?bnpColors.findInterior(oDependency.item.rules)?!0:!1:!0;if(bFlag){oDependency.first=0>=count;null===scope.dependency[oDependency.type].first&&(scope.dependency[oDependency.type].first=0>=totalCount);scope.dependency[oDependency.type].require.push(oDependency);scope.dependency[oDependency.type].empty=!1;count++;totalCount++}}count=0;for(i=0;i<oRules.requireOr.length();i++){oDependency=scope.dependencyItem(RulesBehavior.OR,oRules.requireOr.getNdx(i));oDependency.first=0>=count;null===scope.dependency[oDependency.type].first&&(scope.dependency[oDependency.type].first=0>=totalCount);scope.dependency[oDependency.type].require.push(oDependency);scope.dependency[oDependency.type].empty=!1;count++;totalCount++}count=0;for(i=0;i<oRules.include.length();i++){oDependency=scope.dependencyItem(RulesBehavior.INCLUDE,oRules.include.getNdx(i));oDependency.first=0>=count;null===scope.dependency[oDependency.type].first&&(scope.dependency[oDependency.type].first=0>=totalCount);scope.dependency[oDependency.type].include.push(oDependency);scope.dependency[oDependency.type].empty=!1;count++;totalCount++}count=0;for(i=0;i<oRules.deny.length();i++){oDependency=scope.dependencyItem(RulesBehavior.DENY,oRules.deny.getNdx(i));oDependency.first=0>=count;null===scope.dependency[oDependency.type].first&&(scope.dependency[oDependency.type].first=0>=totalCount);scope.dependency[oDependency.type].deny.push(oDependency);scope.dependency[oDependency.type].empty=!1;count++;totalCount++}scope.dependency.count=totalCount};scope.$watch("open",function(){scope.open&&scope.setDependencies()})}}}]);angular.module("app").factory("dependenciesService",["$log","$http","messageService","kiaEvents",function($log,$http,messageService,kiaEvents){var data={handlerId:"",item:null,label:"",checking:!1};return{data:data}}]);var CalculatorOptions=function(){this.rate={min:0,max:30,value:1.9};this.down=5e3;this.tradeIn=3500;this.months={min:12,max:72,value:72,delta:12,list:[]};this.decimals=0};angular.module("app").factory("paymentCalculator",["$log","kiaEvents","$rootScope","externalConstant",function($log,kiaEvents,$rootScope,externalConstant){var oMonthly=new CalculatorOptions,monthlyPayment=0,updateConstants=function(){oMonthly.rate.max=externalConstant.getValue("payment.max.InterestRate")||oMonthly.rate.max;oMonthly.rate.value=externalConstant.getValue("payment.default.InterestRate")||oMonthly.rate.value;oMonthly.down=externalConstant.getValue("payment.default.downPayment")||oMonthly.down;oMonthly.tradeIn=externalConstant.getValue("payment.default.tradeInValue")||oMonthly.tradeIn;if(externalConstant.getValue("payment.monthsNumbers")){var months=externalConstant.getValue("payment.monthsNumbers");"string"==typeof months&&(months=months.replace(/\[|\]/g,"").split(","));for(var i=0;i<months.length;i++)oMonthly.months.list.push(parseInt(months[i],10))}else for(var j=oMonthly.months.min;j<=oMonthly.months.max;j+=oMonthly.months.delta)oMonthly.months.list.push(j);oMonthly.months.value=externalConstant.getValue("payment.default.monthsNumber")||oMonthly.months.value;oMonthly.decimals=externalConstant.getValue("payment.decimalsNumber")||oMonthly.decimals};externalConstant.resourceFileLoaded?updateConstants():$rootScope.$on(kiaEvents.GLOBAL.CONSTANTS_LOADED,updateConstants);var calculate=function(price){var monthlyPay=0;monthlyPayment=0;var n=oMonthly.months.value,p=price-oMonthly.down-oMonthly.tradeIn,i=oMonthly.rate.value/100;if(0>=p)return 0;monthlyPay=0===n?0===i?p:p/i:0===i?p/n:p*(i/12)/(1-Math.pow(1+i/12,-n));var nDecimals=10*oMonthly.decimals;0>=nDecimals&&(nDecimals=1);monthlyPayment=Math.ceil(monthlyPay*nDecimals)/nDecimals;$rootScope.$broadcast(kiaEvents.GLOBAL.CALCULATE_PAYMENT_UPDATED);return monthlyPayment},getPayment=function(){return monthlyPayment};return{options:oMonthly,calculate:calculate,getPayment:getPayment}}]);!function($,undef){"use strict";function attrOrProp($el){var args=Array.prototype.slice.call(arguments,1);return $el.prop?$el.prop.apply($el,args):$el.attr.apply($el,args)}function bindMany($el,options,events){var name,namespaced;for(name in events)if(events.hasOwnProperty(name)){namespaced=name.replace(/ |$/g,options.eventNamespace);$el.bind(namespaced,events[name])}}function bindUi($el,$target,options){bindMany($el,options,{focus:function(){$target.addClass(options.focusClass)},blur:function(){$target.removeClass(options.focusClass);$target.removeClass(options.activeClass)},mouseenter:function(){$target.addClass(options.hoverClass)},mouseleave:function(){$target.removeClass(options.hoverClass);$target.removeClass(options.activeClass)},"mousedown touchbegin":function(){$el.is(":disabled")||$target.addClass(options.activeClass)},"mouseup touchend":function(){$target.removeClass(options.activeClass)}})}function classClearStandard($el,options){$el.removeClass(options.hoverClass+" "+options.focusClass+" "+options.activeClass)}function classUpdate($el,className,enabled){enabled?$el.addClass(className):$el.removeClass(className)}function classUpdateChecked($tag,$el,options){var c="checked",isChecked=$el.is(":"+c);$el.prop?$el.prop(c,isChecked):isChecked?$el.attr(c,c):$el.removeAttr(c);classUpdate($tag,options.checkedClass,isChecked)}function classUpdateDisabled($tag,$el,options){classUpdate($tag,options.disabledClass,$el.is(":disabled"))}function divSpanWrap($el,$container,method){switch(method){case"after":$el.after($container);return $el.next();case"before":$el.before($container);return $el.prev();case"wrap":$el.wrap($container);return $el.parent()}return null}function divSpan($el,options,divSpanConfig){var $div,$span,id;divSpanConfig||(divSpanConfig={});divSpanConfig=$.extend({bind:{},divClass:null,divWrap:"wrap",spanClass:null,spanHtml:null,spanWrap:"wrap"},divSpanConfig);$div=$("<div />");$span=$("<span />");options.autoHide&&$el.is(":hidden")&&"none"===$el.css("display")&&$div.hide();divSpanConfig.divClass&&$div.addClass(divSpanConfig.divClass);options.wrapperClass&&$div.addClass(options.wrapperClass);divSpanConfig.spanClass&&$span.addClass(divSpanConfig.spanClass);id=attrOrProp($el,"id");options.useID&&id&&attrOrProp($div,"id",options.idPrefix+"-"+id);divSpanConfig.spanHtml&&$span.html(divSpanConfig.spanHtml);$div=divSpanWrap($el,$div,divSpanConfig.divWrap);$span=divSpanWrap($el,$span,divSpanConfig.spanWrap);classUpdateDisabled($div,$el,options);return{div:$div,span:$span}}function wrapWithWrapperClass($el,options){var $span;if(!options.wrapperClass)return null;$span=$("<span />").addClass(options.wrapperClass);$span=divSpanWrap($el,$span,"wrap");return $span}function highContrast(){var c,$div,el,rgb;rgb="rgb(120,2,153)";$div=$('<div style="width:0;height:0;color:'+rgb+'">');$("body").append($div);el=$div.get(0);c=window.getComputedStyle?window.getComputedStyle(el,"").color:(el.currentStyle||el.style||{}).color;$div.remove();return c.replace(/ /g,"")!==rgb}function htmlify(text){return text?$("<span />").text(text).html():""}function isMsie(){return navigator.cpuClass&&!navigator.product}function isMsieSevenOrNewer(){return"undefined"!=typeof window.XMLHttpRequest?!0:!1}function isMultiselect($el){var elSize;if($el[0].multiple)return!0;elSize=attrOrProp($el,"size");return!elSize||1>=elSize?!1:!0}function returnFalse(){return!1}function noSelect($elem,options){var none="none";bindMany($elem,options,{"selectstart dragstart mousedown":returnFalse});$elem.css({MozUserSelect:none,msUserSelect:none,webkitUserSelect:none,userSelect:none})}function setFilename($el,$filenameTag,options){var filename=$el.val();if(""===filename)filename=options.fileDefaultHtml;else{filename=filename.split(/[\/\\]+/);filename=filename[filename.length-1]}$filenameTag.text(filename)}function swap($elements,newCss,callback){var restore,item;restore=[];$elements.each(function(){var name;for(name in newCss)if(Object.prototype.hasOwnProperty.call(newCss,name)){restore.push({el:this,name:name,old:this.style[name]});this.style[name]=newCss[name]}});callback();for(;restore.length;){item=restore.pop();item.el.style[item.name]=item.old}}function sizingInvisible($el,callback){var targets;targets=$el.parents();targets.push($el[0]);targets=targets.not(":visible");swap(targets,{visibility:"hidden",display:"block",position:"absolute"},callback)}function unwrapUnwrapUnbindFunction($el,options){return function(){$el.unwrap().unwrap().unbind(options.eventNamespace)}}var allowStyling=!0,highContrastTest=!1,uniformHandlers=[{match:function($el){return $el.is("a, button, :submit, :reset, input[type='button']")},apply:function($el,options){var $div,defaultSpanHtml,ds,getHtml,doingClickEvent;defaultSpanHtml=options.submitDefaultHtml;$el.is(":reset")&&(defaultSpanHtml=options.resetDefaultHtml);getHtml=$el.is("a, button")?function(){return $el.html()||defaultSpanHtml}:function(){return htmlify(attrOrProp($el,"value"))||defaultSpanHtml};ds=divSpan($el,options,{divClass:options.buttonClass,spanHtml:getHtml()});$div=ds.div;bindUi($el,$div,options);doingClickEvent=!1;bindMany($div,options,{"click touchend":function(){var ev,res,target,href;if(!doingClickEvent&&!$el.is(":disabled")){doingClickEvent=!0;if($el[0].dispatchEvent){ev=document.createEvent("MouseEvents");ev.initEvent("click",!0,!0);res=$el[0].dispatchEvent(ev);if($el.is("a")&&res){target=attrOrProp($el,"target");href=attrOrProp($el,"href");target&&"_self"!==target?window.open(href,target):document.location.href=href}}else $el.click();doingClickEvent=!1}}});noSelect($div,options);return{remove:function(){$div.after($el);$div.remove();$el.unbind(options.eventNamespace);return $el},update:function(){classClearStandard($div,options);classUpdateDisabled($div,$el,options);$el.detach();ds.span.html(getHtml()).append($el)}}}},{match:function($el){return $el.is(":checkbox")},apply:function($el,options){var ds,$div,$span;ds=divSpan($el,options,{divClass:options.checkboxClass});$div=ds.div;$span=ds.span;$span.on("click",function(){$el.click()});bindUi($el,$div,options);bindMany($el,options,{"click touchend":function(){classUpdateChecked($span,$el,options)}});classUpdateChecked($span,$el,options);return{remove:unwrapUnwrapUnbindFunction($el,options),update:function(){classClearStandard($div,options);$span.removeClass(options.checkedClass);classUpdateChecked($span,$el,options);classUpdateDisabled($div,$el,options)}}}},{match:function($el){return $el.is(":file")},apply:function($el,options){function filenameUpdate(){setFilename($el,$filename,options)}var ds,$div,$filename,$button;ds=divSpan($el,options,{divClass:options.fileClass,spanClass:options.fileButtonClass,spanHtml:options.fileButtonHtml,spanWrap:"after"});$div=ds.div;$button=ds.span;$filename=$("<span />").html(options.fileDefaultHtml);$filename.addClass(options.filenameClass);$filename=divSpanWrap($el,$filename,"after");attrOrProp($el,"size")||attrOrProp($el,"size",$div.width()/10);bindUi($el,$div,options);filenameUpdate();isMsie()?bindMany($el,options,{click:function(){$el.trigger("change");setTimeout(filenameUpdate,0)}}):bindMany($el,options,{change:filenameUpdate});noSelect($filename,options);noSelect($button,options);return{remove:function(){$filename.remove();$button.remove();return $el.unwrap().unbind(options.eventNamespace)},update:function(){classClearStandard($div,options);setFilename($el,$filename,options);classUpdateDisabled($div,$el,options)}}}},{match:function($el){if($el.is("input")){var t=(" "+attrOrProp($el,"type")+" ").toLowerCase(),allowed=" color date datetime datetime-local email month number password search tel text time url week ";return allowed.indexOf(t)>=0}return!1},apply:function($el,options){var elType,$wrapper;elType=attrOrProp($el,"type");$el.addClass(options.inputClass);$wrapper=wrapWithWrapperClass($el,options);bindUi($el,$el,options);options.inputAddTypeAsClass&&$el.addClass(elType);return{remove:function(){$el.removeClass(options.inputClass);options.inputAddTypeAsClass&&$el.removeClass(elType);$wrapper&&$el.unwrap()},update:returnFalse}}},{match:function($el){return $el.is(":radio")},apply:function($el,options){var ds,$div,$span;ds=divSpan($el,options,{divClass:options.radioClass});$div=ds.div;$span=ds.span;bindUi($el,$div,options);bindMany($el,options,{"click touchend":function(){$.uniform.update($(':radio[name="'+attrOrProp($el,"name")+'"]'))}});classUpdateChecked($span,$el,options);return{remove:unwrapUnwrapUnbindFunction($el,options),update:function(){classClearStandard($div,options);classUpdateChecked($span,$el,options);classUpdateDisabled($div,$el,options)}}}},{match:function($el){return $el.is("select")&&!isMultiselect($el)?!0:!1},apply:function($el,options){var ds,$div,$span,origElemWidth;options.selectAutoWidth&&sizingInvisible($el,function(){origElemWidth=$el.width()});ds=divSpan($el,options,{divClass:options.selectClass,spanHtml:($el.find(":selected:first")||$el.find("option:first")).html(),spanWrap:"before"});$div=ds.div;$span=ds.span;options.selectAutoWidth?sizingInvisible($el,function(){swap($([$span[0],$div[0]]),{display:"block"},function(){var spanPad;spanPad=$span.outerWidth()-$span.width();$div.width(origElemWidth+spanPad);$span.width(origElemWidth)})}):$div.addClass("fixedWidth");bindUi($el,$div,options);bindMany($el,options,{change:function(){$span.html($el.find(":selected").html());$div.removeClass(options.activeClass)},"click touchend":function(){var selHtml=$el.find(":selected").html();$span.html()!==selHtml&&$el.trigger("change")},keyup:function(){$span.html($el.find(":selected").html())}});noSelect($span,options);return{remove:function(){$span.remove();$el.unwrap().unbind(options.eventNamespace);return $el},update:function(){if(options.selectAutoWidth){$.uniform.restore($el);$el.uniform(options)}else{classClearStandard($div,options);$span.html($el.find(":selected").html());classUpdateDisabled($div,$el,options)}}}}},{match:function($el){return $el.is("select")&&isMultiselect($el)?!0:!1},apply:function($el,options){var $wrapper;$el.addClass(options.selectMultiClass);$wrapper=wrapWithWrapperClass($el,options);bindUi($el,$el,options);return{remove:function(){$el.removeClass(options.selectMultiClass);$wrapper&&$el.unwrap()},update:returnFalse}}},{match:function($el){return $el.is("textarea")},apply:function($el,options){var $wrapper;$el.addClass(options.textareaClass);$wrapper=wrapWithWrapperClass($el,options);bindUi($el,$el,options);return{remove:function(){$el.removeClass(options.textareaClass);$wrapper&&$el.unwrap()},update:returnFalse}}}];isMsie()&&!isMsieSevenOrNewer()&&(allowStyling=!1);$.uniform={defaults:{activeClass:"active",autoHide:!0,buttonClass:"button",checkboxClass:"checker",checkedClass:"checked",disabledClass:"disabled",eventNamespace:".uniform",fileButtonClass:"action",fileButtonHtml:"Choose File",fileClass:"uploader",fileDefaultHtml:"No file selected",filenameClass:"filename",focusClass:"focus",hoverClass:"hover",idPrefix:"uniform",inputAddTypeAsClass:!0,inputClass:"uniform-input",radioClass:"radio",resetDefaultHtml:"Reset",resetSelector:!1,selectAutoWidth:!0,selectClass:"selector",selectMultiClass:"uniform-multiselect",submitDefaultHtml:"Submit",textareaClass:"uniform",useID:!0,wrapperClass:null},elements:[]};$.fn.uniform=function(options){var el=this;options=$.extend({},$.uniform.defaults,options);if(!highContrastTest){highContrastTest=!0;highContrast()&&(allowStyling=!1)}if(!allowStyling)return this;options.resetSelector&&$(options.resetSelector).mouseup(function(){window.setTimeout(function(){$.uniform.update(el)},10)});return this.each(function(){var i,handler,callbacks,$el=$(this);if($el.data("uniformed"))$.uniform.update($el);else for(i=0;i<uniformHandlers.length;i+=1){handler=uniformHandlers[i];if(handler.match($el,options)){callbacks=handler.apply($el,options);$el.data("uniformed",callbacks);$.uniform.elements.push($el.get(0));return}}})};$.uniform.restore=$.fn.uniform.restore=function(elem){elem===undef&&(elem=$.uniform.elements);$(elem).each(function(){var index,elementData,$el=$(this);elementData=$el.data("uniformed");if(elementData){elementData.remove();index=$.inArray(this,$.uniform.elements);index>=0&&$.uniform.elements.splice(index,1);$el.removeData("uniformed")}})};$.uniform.update=$.fn.uniform.update=function(elem){elem===undef&&(elem=$.uniform.elements);$(elem).each(function(){var elementData,$el=$(this);elementData=$el.data("uniformed");elementData&&elementData.update($el,elementData.options)})}}(jQuery);angular.module("app").directive("paymentCalculator",["$log","$window","$rootScope","paymentCalculator","kiaEvents","safeApply",function($log,$window,$rootScope,paymentCalculator,kiaEvents,safeApply){return{restrict:"EA",replace:!0,templateUrl:window.staticURI+"/views/directives/paymentCalculator.html",controller:function($scope){$scope.monthly=paymentCalculator.options;paymentCalculator.getPayment();$scope.monthly.showPayment=!0;$scope.monthly.payment=0;$scope.numericOptions={decimal:"."};$scope.monthlyForm={data:{rate:$scope.monthly.rate.value,down:$scope.monthly.down,tradeIn:$scope.monthly.tradeIn}}},link:function(scope,element,attrs){scope.form=element.find(".form");scope.monthsOptions=function(){for(var out=[],i=scope.monthly.months.min;i<=scope.monthly.months.max;i+=scope.monthly.months.delta)out.push(i);return out};scope.onCommit=function(){var oError=scope.monthlyForm.rate.$error;if(oError.required){scope.monthly.rate.value=0;oError["float"]=!1;oError.required=!1}if(!oError["float"]){if(oError.min){scope.monthly.rate.value=0;oError.min=!1}else if(oError.max){scope.monthly.rate.value=30;oError.max=!1}oError=scope.monthlyForm.down.$error;if(oError.required){scope.monthly.down=0;oError.integer=!1;oError.required=!1}if(!oError.integer){if(oError.min){scope.monthly.down=0;oError.min=!1}oError=scope.monthlyForm.tradeIn.$error;if(oError.required){scope.monthly.tradeIn=0;oError.integer=!1;oError.required=!1}if(!oError.integer){if(oError.min){scope.monthly.tradeIn=0;oError.min=!1}scope.$broadcast(kiaEvents.GLOBAL.WRAPFIELD_RESET);scope.$emit(kiaEvents.GLOBAL.CALCULATE_PAYMENT);scope.$emit(kiaEvents.ANALYTICS.PAYMENT_CALCULATOR_CONFIRMATION,scope.monthly)}}}};element.find("#monthly-tradeIn a").on("click",function(event){try{window.open(event.target.href,"kbb","left=20,top=20,width=600,height=600")}catch(ev){}});element.find(".form").on("submit",function(event){safeApply(scope,function(){scope.onCommit()});event.preventDefault()});scope.onClose=function(){scope.$broadcast(kiaEvents.GLOBAL.CLOSE_CALCULATOR)};scope.$on(kiaEvents.GLOBAL.WRAPFIELD_BLUR,function(e,args){var sField=args.field,oError=scope.monthlyForm[sField].$error;if(oError.required){if("rate"===sField){scope.monthly[sField].value=0;oError["float"]=!1}else{scope.monthly[sField]=0;oError.integer=!1}oError.required=!1}});scope.$on(kiaEvents.GLOBAL.CALCULATE_PAYMENT_UPDATED,function(e){safeApply(scope,function(){scope.monthly.payment=paymentCalculator.getPayment()})})}}}]);angular.module("app").directive("dtCtaPaymentCalculator",["$log","$window","$location","$rootScope","vehicleSelector",function($log,$window,$location,$rootScope,vehicleSelector){return{restrict:"A",scope:{dealerId:"=",kiaModelId:"=",zipCode:"=",vin:"=",price:"=",msrp:"=",seriesName:"=",seriesYear:"=",section:"=",hidePaymentCalculator:"=",driveTrain:"=",trimName:"="},controller:function($scope){$rootScope.hidePaymentCalculator=!0;$scope.image="";$scope.excludFunc=function(){return"K900"===$scope.seriesName?"excludedGroups=K900Exclusion":"Optima Hybrid"===$scope.seriesName?"excludedGroups=OptimaHybridExclusion":"Soul EV"===$scope.seriesName?"excludedGroups=SoulEVExclusion":"k900"===$scope.seriesName?"excludedGroups=K900Exclusion":"soul-ev"===$scope.seriesName?"excludedGroups=SoulEVExclusion":"optima-hybrid"===$scope.seriesName?"excludedGroups=OptimaHybridExclusion":"excludedGroups="};$scope.defaultFinanceTypeFunc=function(){return"K900"===$scope.seriesName?"defaultFinanceType=lease":"Optima Hybrid"===$scope.seriesName?"defaultFinanceType=lease":"Cadenza"===$scope.seriesName?"defaultFinanceType=lease":"k900"===$scope.seriesName?"defaultFinanceType=lease":"optima-hybrid"===$scope.seriesName?"defaultFinanceType=lease":"cadenza"===$scope.seriesName?"defaultFinanceType=lease":"defaultFinanceType="};$scope.modelStyleFunc=function(){var url="model=";$scope.seriesName&&(url=url+$scope.seriesName.charAt(0).toUpperCase()+$scope.seriesName.slice(1));url+="&style=";$scope.trimName&&(url=url+$scope.trimName.charAt(0).toUpperCase()+$scope.trimName.slice(1));$scope.driveTrain&&"RWD"!==$scope.driveTrain&&(url=url+" "+$scope.driveTrain);return url}},link:function(scope,element){function checkVehicleBySection(){if(scope.seriesYear&&scope.seriesName){vehicleSelector.checkCached(scope.section).success(function(data){var veh,i,j,vehicle;for(i=0;i<data.categories.length;i++)for(veh=0;veh<data.categories[i].vehicles.length;veh++){vehicle=data.categories[i].vehicles[veh];if(vehicle.series&&scope.seriesName&&vehicle.series.toLowerCase().replace(" ","-")===scope.seriesName.toLowerCase().replace(" ","-"))for(j=0;j<vehicle.years.length;j++)if(vehicle.years[j].year===scope.seriesYear){$rootScope.hidePaymentCalculator=vehicle.years[j].hidePaymentCalculator;scope.picture=encodeURIComponent("http://www.kia.com/us/k3"+vehicle.years[j].image);break}}});return!0}return!1}if(!checkVehicleBySection()){scope.$watch("seriesName",checkVehicleBySection);scope.$watch("seriesYear",checkVehicleBySection)}if("undefined"!=typeof $window.drs)$window.drs.processSuiteElements(element.parent().get(0));else if(angular.isUndefined(scope.vin)&&angular.isUndefined(scope.zipCode)&&angular.isUndefined(scope.dealerId)){require(["https://ebusiness.dealertrack.com/Suite/suite.js"],function(){$window.drs.init();$window.drs.processSuiteElements(element.parent().get(0))});$(".nav-secondary").hide();var queryStr=$location.search();scope.vin=queryStr.vin;scope.zipCode=queryStr.zipcode;scope.hidePaymentCalculator=queryStr.hidePaymentCalculator;scope.dealerId=queryStr.dealerId;scope.price=queryStr.price;scope.msrp=queryStr.msrp;scope.seriesName=queryStr.seriesName;scope.seriesYear=queryStr.seriesYear;scope.trimName=queryStr.trim;scope.driveTrain=queryStr.drivetrain;scope.section="inventory";var paymentCalculator={hidePaymentCalculator:scope.hidePaymentCalculator,dealerId:scope.dealerId,zipCode:scope.zipCode,vin:scope.vin,price:scope.msrp,msrp:scope.msrp,seriesName:scope.seriesName,seriesYear:scope.seriesYear,picture:"",trim:scope.trimName,driveTrain:scope.driveTrain};$rootScope.$broadcast("Dealer Inventory Detail Payment Calculator",paymentCalculator)}}}}]);angular.module("app").factory("vehicleSelector",["$log","$http",function($log,$http){var url,get,checkCached,cachedResponse={};checkCached=function(section){var r=!1;r=cachedResponse[section]?cachedResponse[section]:get(section);return r};get=function(section){url=window.baseURI+"/data/vehicle/all";url+=section?"?target="+section:"";cachedResponse[section]=$http.get(url);return cachedResponse[section]};return{checkCached:checkCached,get:get}}]);angular.module("app").directive("vehicleCell",["$log","$rootScope","$location","cookieService","localize",function($log,$rootScope,$location,cookieService,localize){return{restrict:"A",replace:!0,scope:{vehicle:"=",target:"@"},templateUrl:window.staticURI+"/views/vehicleSelector/vehicleCell.html",link:function(scope,element,attributes){"use strict";function selectCurrentYear(){if(!navigator.userAgent.match(/(iPad|iPhone|iPod)/g)){scope.currentYearSelected=!0;scope.selectedYear=scope.vehicle}}function selectPreviousYear(){if(!navigator.userAgent.match(/(iPad|iPhone|iPod)/g)){scope.currentYearSelected=!1;scope.selectedYear=scope.vehicle.previousYear}}function selectedVehicleData(attr){return scope.selectedYear[attr]}function getParameters(){var url,regex,matches,parameters;url=$location.url();regex=new RegExp("\\?.*=.*&?","g");regex.test(url)&&(matches=url.match(regex));parameters=matches?matches[0]:"";return parameters}function checkDealerFeature(featureId){var available=!0,dealer=$location.search().dealer,zipCode=cookieService.cookie("user-zipcode");available=dealer&&zipCode?0===featureId?!0:-1!==$rootScope.dealerDetailsList[dealer].featureIds.indexOf(featureId)?!0:!1:!0;return available}var vehicle={};scope.content=window.contentURI;scope.selectedYear=scope.vehicle;scope.currentYearSelected=!0;angular.copy(scope.vehicle,vehicle);scope.getComingSoonLabel=function(){return localize.getLocalizedString("label.mtf.comingsoon")};scope.selectPreviousYear=selectPreviousYear;scope.selectCurrentYear=selectCurrentYear;scope.selectedVehicleData=selectedVehicleData;scope.selectModel=function(ev,featureId,img,model,year){if(checkDealerFeature(featureId)){vehicle.series=scope.vehicle.series.toLowerCase().split(" ").join("-");vehicle.year=year;var params=getParameters();$rootScope.$broadcast("vehicleSelector.selected",{vehicle:vehicle,target:scope.target,params:params})}else{var obj={year:year,model:model,image:scope.content+img,dealer:$rootScope.dealerDetailsList[$location.search().dealer].name,featureId:featureId};scope.$emit("lightbox.dealerModelNotAvailable.open",obj);ev.stopPropagation();ev.preventDefault()}}}}}]);angular.module("app").controller("primaryNavTreeCtrl",["$log","$scope","$rootScope","$location","$routeParams","vehicleSelector","localize",function($log,$scope,$rootScope,$location,$routeParams,vehicleSelector,localize){$scope.vehiclesData=[];vehicleSelector.get($scope.target).success(function(data,status){for(var vehicleData=data.result.vehicles,i=0,len=vehicleData.length;len>i;++i){
for(var tempObj={},itemExistFlag=!1,j=0,l=$scope.vehiclesData.length;l>j;++j)if($scope.vehiclesData[j].modelName===vehicleData[i].series){itemExistFlag=!0;$scope.vehiclesData[j].vehicles.push(vehicleData[i]);break}if($scope.vehiclesData<=0||!itemExistFlag){tempObj.modelName=vehicleData[i].series;tempObj.vehicles=[];tempObj.vehicles.push(vehicleData[i])}$.isEmptyObject(tempObj)||$scope.vehiclesData.push(tempObj)}console.log(data)}).error(function(data,status){$log.warn("error:",data,status)})}]);angular.module("app").directive("navigationTree",["$log","$rootScope","$location","$routeParams","vehicleSelector","localize",function($log,$rootScope,$location,$routeParams,vehicleSelector,localize){return{restrict:"E",replace:!0,templateUrl:window.staticURI+"/views/shared/vehicleNavigationTree.html"}}]);angular.module("app").directive("expandableTree",["$log","$rootScope","$location","$routeParams","$window","vehicleSelector","localize",function($log,$rootScope,$location,$routeParams,$window,vehicleSelector,localize){return{restrict:"A",replace:!1,priority:0,scope:{link:"@"},link:function(scope,elm,attributes){"use strict";function openNode(element){if(element.hasClass("expanded")){element.find("> ul").slideUp();$(element).removeClass("expanded");closeOpenNodes()}else{closeOpenNodes();$(element).addClass("expanded");$(element).find("> ul").slideDown();$(element).next("ul").slideDown()}}function closeOpenNodes(elm){$(".mob-subtree-nav ul").slideUp();$(".mob-subtree-nav .expanded").removeClass("expanded")}var vehicleTreeNode;scope.mobile=!1;scope.$on("nav.update.mobile",function(event,value){scope.mobile=value;value||$(".mob-subtree-nav").hide()});if(void 0!==scope.$parent.vehicle){scope.modelName=scope.$parent.vehicle.modelName;vehicleTreeNode=scope.$parent.vehicle}void 0!==scope.$parent.vehicles&&(scope.vehicleInfo=scope.$parent.vehicles);scope.expandTree=function(event,bubble){if(void 0===scope.mobile||scope.mobile){var element=$(event.currentTarget);event.stopPropagation();openNode(element)}else $window.location=scope.link};scope.markModel=function(featureId,img,model,year){model=model.toLowerCase().split(" ").join("-");$location.url("/vehicle/"+model+"/"+year+"/experience");scope.$emit("kia.nav.expandMobileMenu")}}}}]);angular.module("app").directive("vehicleGrid",["$log","$rootScope","$location","$routeParams","vehicleSelector","localize",function($log,$rootScope,$location,$routeParams,vehicleSelector,localize){return{restrict:"A",replace:!0,templateUrl:window.staticURI+"/views/vehicleSelector/vehicleGrid.html",link:function(scope,element,attributes){"use strict";function checkParameters(){var params=$location.search(),url=$location.path(),regex=/(\/[a-z-0-9]*\/[0-9]{4})/g;regex.test(url)||(-1===Object.keys(params).indexOf("series")||-1===Object.keys(params).indexOf("year"))&&$rootScope.$broadcast("vehicleSelector.display")}var locationsMTF=["/build","/offers","/compare","/dealers/inventory","/forms/appraisalrequest","/forms/brochurerequest"],currentPATH=$location.path(),sedans=(locationsMTF.indexOf(currentPATH)>-1,{});sedans.vehicles=[];sedans.heading="";var crossovers={};crossovers.vehicles=[];crossovers.heading="";var compacts={};compacts.vehicles=[];compacts.heading="";var hybrids={};hybrids.vehicles=[];hybrids.heading="";var upcoming={};upcoming.vehicles=[];upcoming.heading="";var loadHeadings=function(){sedans.heading=localize.getLocalizedString("label.selector.sedan");crossovers.heading=localize.getLocalizedString("label.selector.crossovers");compacts.heading=localize.getLocalizedString("label.selector.compacts");hybrids.heading=localize.getLocalizedString("label.selector.hybrids");upcoming.heading=localize.getLocalizedString("label.selector.upcoming")};localize.resourceFileLoaded?loadHeadings():$rootScope.$on("localizeResourcesUpdates",loadHeadings);scope.vehicles=[];scope.categories=[];scope.target=attributes.target;vehicleSelector.get(scope.target).success(function(data,status){for(var categories=data.categories,i=0;i<categories.length;i++)for(var vehicles=categories[i].vehicles,j=0;j<vehicles.length;j++)for(var years=vehicles[j].years,k=0;k<years.length;k++)scope.vehicles.push(years[k]);scope.$emit("vehicleSelector.vehiclesLoaded")}).error(function(data,status){$log.warn("error:",data,status)});checkParameters()}}}]);angular.module("app").directive("vehicleCategory",["$window","$timeout",function($window,$timeout){return{restrict:"A",replace:!0,templateUrl:window.staticURI+"/views/vehicleSelector/vehicleCategory.html",link:function(scope,element,attrs){function setUpSingleCategory(){var el=$(".meet-the-fleet");1===el.length&&el.removeClass("vehicle-category-heading")}function setDisabled(){if($window.innerWidth>=480){scope.isDisabled=!0;scope.collapsed=!1}else scope.isDisabled=!1}function applySetDisabled(){scope.$apply(setDisabled)}scope.collapsed=!1;scope.isDisabled=!0;scope.toggleOpen=function(){!scope.isDisabled&&$(".meet-the-fleet").length>1&&(scope.collapsed=!scope.collapsed)};angular.element($window).bind("resize",applySetDisabled);setDisabled();$timeout(setUpSingleCategory);scope.$on("$destroy",function(){angular.element($window).unbind("resize",applySetDisabled)})}}}]);angular.module("app").directive("collapsable",[function(){return{link:function(scope,element,attrs){function expand(){element.slideDown(350)}function collapse(){element.slideUp(350)}scope.$watch(attrs.collapsed,function(shouldCollapse){shouldCollapse?collapse():expand()})}}}]);angular.module("app").directive("testDir",[function(){return{link:function(scope,element,attrs){scope.blah=5}}}]);angular.module("app").directive("tileLayout",["$log","safeApply","$timeout","$compile","kiaEvents",function($log,safeApply,$timeout,$compile,kiaEvents){return{restrict:"A",scope:{maxCols:"@",fixed:"@",detailId:"@",expandLast:"@",mobile:"=",collection:"&",animatePercent:"@",excludePadd:"@",tlId:"@",mobileOneColumn:"@",noCompileDetail:"@"},link:function(scope,element,attrs){var showCurrentDetail,drawElementLevel,draw,render,layoutID=scope.tlId,mobileOneColumn="true"===scope.mobileOneColumn?!0:!1,noCompileDetail="true"===scope.noCompileDetail?!0:!1,container_width=element.width(),container_height=element.height(),detail=element.find("#"+scope.detailId),tiles=element.children(".box"),totalTiles=tiles.length,optimalTileWidth=250,expandTileWidth=0,cols=Math.floor(container_width/optimalTileWidth),maxCols=Number(scope.maxCols),totalRows=Math.ceil(totalTiles/cols),fullColslWidth=optimalTileWidth*totalTiles,fixedTiles=scope.fixed,itemsLastRow=[],currentDetail=detail,currentRowDetail=0,currentTileSelected=null,currentDivTile=null,detailOpen=!1,expandLast=scope.expandLast,excludePadd=(scope.animatePercent,"true"===scope.excludePadd?!0:!1),alreadyInitiated=!1,alreadySleeping=!1,animating=!1;render=function(){$timeout(function(){if(detailOpen&&!animating){detailOpen=!1;scope.closeCurrentDetail()}draw()},50)};scope.$on("start.tl",function(event,mode){alreadyInitiated?scope.sleep(!1):scope.initTileLayout(mode)});scope.$on("sleep.tl",function(event,mode){alreadySleeping||scope.sleep(mode)});scope.$on("setresize.tl",function(event,mode){scope.sleep(mode,!0)});scope.sleep=function(enable,force){if(enable){$(drawElementLevel).off("resize.tl."+layoutID,render);alreadySleeping=!0}else{$(drawElementLevel).on("resize.tl."+layoutID,render);alreadySleeping=!1}force||render()};scope.initTileLayout=function(modeElement){alreadyInitiated=!0;container_width=element.width();container_height=element.height();tiles=element.children(".box");totalTiles=tiles.length;optimalTileWidth=250;expandTileWidth=0;cols=Math.floor(container_width/optimalTileWidth);maxCols=Number(scope.maxCols);totalRows=Math.ceil(totalTiles/cols);fullColslWidth=optimalTileWidth*totalTiles;fixedTiles=scope.fixed;itemsLastRow=[];currentRowDetail=0;currentTileSelected=null;currentDivTile=null;detailOpen=!1;drawElementLevel=modeElement?element:window;scope.sleep(!1)};draw=function(){container_width=element.width();optimalTileWidth=250;expandTileWidth=0;cols=Math.ceil(container_width/optimalTileWidth);maxCols=Number(scope.maxCols);totalRows=Math.ceil(totalTiles/cols);fullColslWidth=optimalTileWidth*totalTiles;tiles=element.children(".box");totalTiles=tiles.length;if(maxCols>totalTiles){cols=maxCols;scope.mobile&&(cols=totalTiles)}else{cols=0===maxCols?Math.ceil(container_width/optimalTileWidth):maxCols;optimalTileWidth*maxCols>container_width&&(cols=Math.floor(container_width/optimalTileWidth))}optimalTileWidth*maxCols>container_width&&(cols=Math.floor(container_width/optimalTileWidth));scope.mobile&&mobileOneColumn&&(cols=1);totalRows=Math.ceil(totalTiles/cols);var i=totalTiles,fullExpand=container_width>fullColslWidth||maxCols>totalTiles;itemsLastRow=[];for(;i--;){totalRows=Math.ceil(totalTiles/cols);if("false"===fixedTiles){expandTileWidth=fullExpand?maxCols?String(100/cols)+"%":String(100/totalTiles)+"%":String(100/cols)+"%";tiles.eq(i).css("width",expandTileWidth)}else{expandTileWidth=String(optimalTileWidth+"px");tiles.eq(i).css("width",expandTileWidth)}tiles.eq(i).attr("data-row",Math.ceil((i+1)/cols));totalRows===Number(tiles.eq(i).attr("data-row"))&&itemsLastRow.push(i);if("false"!==expandLast&&"false"===fixedTiles)for(var j=itemsLastRow.length,lastWidth=String(100/itemsLastRow.length)+"%";j--;)tiles.eq(itemsLastRow[j]).css("width",lastWidth);Number(tiles.eq(i).attr("data-row"))!==Math.ceil((i+2)/cols)?tiles.eq(i).attr("data-lastcol",tiles.eq(i).attr("data-row")):tiles.eq(i).removeAttr("data-lastcol");tiles.eq(totalTiles-1).attr("data-lastcol",totalRows)}};scope.closeCurrentDetail=function(){$(currentDetail).animate({height:"0px"},500,function(){$(this).removeClass("open");$(this).remove()});detailOpen=!1;currentTileSelected&&currentTileSelected.selected(!1);currentRowDetail=0;currentTileSelected=null;if(scope.mobile){scope.$emit("tileLayout.close.mobile.detail");return!1}};showCurrentDetail=function(event,tileScope,row,div,data){var tempDetail,lastOftheRow;scope.currentTileData=data;if(scope.mobile){scope.$emit("tileLayout.open.mobile.detail",scope.currentTileData);return!1}$timeout(function(){tempDetail=detail.clone(!0);noCompileDetail||$compile(tempDetail.children())(scope);lastOftheRow=element.find('[data-lastcol="'+row+'"]');$(lastOftheRow).after(tempDetail);if(row===currentRowDetail){currentTileSelected&&currentTileSelected.selected(!1);tempDetail.addClass("open").css("height","auto");$(currentDetail).removeClass("open");$(currentDetail).remove()}else{scope.closeCurrentDetail();animating=!0;tempDetail.addClass("open").animate({height:"450px"},500,function(){tempDetail.css("height","auto");$timeout(function(){animating=!1},500)})}detailOpen=!0;currentDetail=tempDetail;currentRowDetail=row;scope.currentTileData=data;currentTileSelected=tileScope;currentDivTile=div;var padd=Number(element.children().css("padding-right").split("px")[0]);padd+=Number(element.children().css("padding-left").split("px")[0]);excludePadd&&(padd=0);var detailW=String(container_width-padd)+"px";currentDetail.css("width",detailW)},0)};scope.$on("tileLayout.close.unique.detail",function(event,tileLayoutScope){tileLayoutScope!==scope&&safeApply(scope,scope.closeCurrentDetail())});scope.$on("tileLayout.close.detail",function(event,tileScope){safeApply(scope,scope.closeCurrentDetail())});scope.$on("tileLayout.open.detail",function(event,tileScope,row,div,data){scope.$emit("tileLayout.open.unique.detail",scope);safeApply(scope,showCurrentDetail(event,tileScope,row,div,data))});scope.$on("tileLayout.redraw",function(event){render()});scope.$watch("orientation",function(value){scope.closeCurrentDetail()});scope.$on(kiaEvents.RESPONSIVE.ORIENTATION_CHANGE,function(event,orientation){scope.orientation=orientation;scope.closeCurrentDetail()})}}}]);angular.module("app").controller("optionsController",["$log","$rootScope","$scope","$routeParams","kiaEvents","bnpPackages","bnpColors","bnpOptions","$location","buildAndPriceModel","$http","dependenciesService",function($log,$rootScope,$scope,$routeParams,kiaEvents,bnpPackages,bnpColors,bnpOptions,$location,buildAndPriceModel,$http,dependenciesService){$scope.options=buildAndPriceModel.detail.options.list.collection;$scope.dependencies=dependenciesService.data;$scope.$on(kiaEvents.BNP.DEPENDENCIES_YES,function(e,args){var optionId,optionExists;optionId=args.item.id;optionExists=bnpOptions.data.currentList.getElementByKey(optionId)?!0:!1;var bColorsCase=!1,i=0;if(!args.dependency.colors.empty){var oColor=null;if(args.dependency.colors.deny.length>0){bColorsCase=!0;oColor=null;for(i=0;i<args.dependency.colors.deny.length;i++){oColor=bnpColors.getById(args.dependency.colors.deny[i].item.rules);null!==oColor&&(null!==oColor.interior?bnpColors.setDefaultInterior():bnpColors.setDefaultExterior())}}else{oColor=null;for(i=0;i<args.dependency.colors.require.length;i++){oColor=bnpColors.getById(args.dependency.colors.require[i].item.rules);null!==oColor&&(null!==oColor.interior?bnpColors.setInterior(args.dependency.colors.require[i].item.rules):bnpColors.setExterior(args.dependency.colors.require[i].item.rules))}}}if(!args.dependency.packages.empty){for(i=0;i<args.dependency.packages.deny.length;i++)bnpPackages.removePackage(args.dependency.packages.deny[i].item.rules);for(i=0;i<args.dependency.packages.require.length&&1>i;i++)bnpPackages.addPackage(args.dependency.packages.require[i].item.rules);for(i=0;i<args.dependency.packages.include.length;i++);}if(!args.dependency.options.empty){for(i=0;i<args.dependency.options.deny.length;i++)bnpOptions.removeOption(args.dependency.options.deny[i].item.rules);for(i=0;i<args.dependency.options.require.length;i++)bnpOptions.addOption(args.dependency.options.require[i].item.rules);for(i=0;i<args.dependency.options.include.length;i++);}optionExists?bnpOptions.removeOption(optionId):bnpOptions.addOption(optionId);bColorsCase&&$scope.setSection(1)});$scope.$on(kiaEvents.BNP.DEPENDENCIES_NO,function(e,args){})}]);angular.module("app").directive("optionsInteraction",["kiaEvents","$location","disclaimersModel","safeApply","$log",function(kiaEvents,$location,disclaimersModel,safeApply,$log){return{restrict:"A",replace:!0,priority:1,link:function(scope,element,attrs){scope.scrollWindow();var mobileDetailOpen=(element.find(".option-mobile-detail"),element.find("#mobileDetailDesc"),element.find("#mobileDetailDisc"),!1);scope.mobileData={};$(".close-detail").on("click",function(){scope.$broadcast("tileLayout.close.detail")});scope.$on("tileLayout.open.mobile.detail",function(event,data){scope.$broadcast(kiaEvents.LIGHTBOX.CHANGE_PLATFORM,"mobile");scope.currentMobileDetailTitle=data.value.name;scope.mobileData=data;scope.optionMobileDetail=!0;mobileDetailOpen=!0});scope.closeMobileDetail=function(){scope.optionMobileDetail=!1;mobileDetailOpen=!1};scope.$on(kiaEvents.RESPONSIVE.MATCH680,function(){scope.$broadcast("tileLayout.close.detail")});scope.$on(kiaEvents.RESPONSIVE.UNMATCH680,function(){mobileDetailOpen&&scope.closeMobileDetail()})}}}]);angular.module("app").directive("optionIterator",["kiaEvents",function(kiaEvents){return{restrict:"A",link:function(scope,element,attrs){scope.$last&&scope.initTileLayout(!0)}}}]);angular.module("app").directive("optionBox",["$log","kiaEvents",function($log,kiaEvents){return{restrict:"A",replace:!0,scope:{opt:"=",mobile:"="},priority:2,link:function(scope,element,attrs){scope.optionSelected=!1;scope.opt.added=!1;scope.opt.addedFromDetail=!1;scope.image=scope.opt.value.images[1];scope.showDetail=function(){var row=0;if(scope.optionSelected)scope.closeDetail();else{if(scope.mobile){scope.$emit("tileLayout.open.mobile.detail",scope.opt);return!1}scope.optionSelected=!0;element.parent().addClass("selected");row=Number(element.parent()[0].attributes["data-row"].value);scope.$emit("tileLayout.open.detail",scope,row,element.parent(),scope.opt)}};scope.selected=function(value){element.parent().removeClass("selected");scope.optionSelected=value};scope.closeDetail=function(){scope.optionSelected=!1;element.parent().removeClass("selected");scope.$emit("tileLayout.close.detail",scope)}}}}]);angular.module("app").directive("lineFix",["kiaEvents",function(kiaEvents){return{restrict:"A",priority:2,link:function(scope,element,attrs){scope.$watch("optionSelected",function(value){if(value){var lines=element.text().match(/\S+/g).length;lines>2&&4>lines&&element.addClass("three");lines>=4&&element.addClass("four")}})}}}]);angular.module("app").directive("addOption",["kiaEvents","bnpOptions","bnpRules","dependenciesService","$log",function(kiaEvents,bnpOptions,bnpRules,dependenciesService,$log){return{restrict:"A",scope:{opt:"="},link:function(scope,element,attrs){scope.dependencies=dependenciesService.data;scope.onChange=function(){if(scope.opt&&scope.opt.value){var oRules=null;if(scope.opt.value.selected){oRules=bnpRules.checkOption(scope.opt.value.id);if(oRules.isEmpty()){bnpOptions.addOption(scope.opt.value.id);scope.opt.value.selected=!0;scope.markedForAdd(!0)}else{scope.opt.value.selected=!1;bnpOptions.data.list.get(scope.opt.value.id).dependencies=oRules;bnpOptions.data.list.get(scope.opt.value.id).checking=!0;scope.dependencies.handlerId="uniform-opt_"+scope.opt.value.id;scope.dependencies.item=bnpOptions.data.list.get(scope.opt.value.id);scope.dependencies.checking=!0}}else{oRules=bnpRules.checkOption(scope.opt.value.id);if(oRules.isEmpty()){bnpOptions.removeOption(scope.opt.value.id);scope.opt.value.selected=!1;scope.markedForAdd(!1)}else{scope.opt.value.selected=!0;bnpOptions.data.list.get(scope.opt.value.id).dependencies=oRules;bnpOptions.data.list.get(scope.opt.value.id).checking=!0;scope.dependencies.handlerId="uniform-opt_"+scope.opt.value.id;scope.dependencies.item=bnpOptions.data.list.get(scope.opt.value.id);scope.dependencies.checking=!0}}}};scope.markedForAdd=function(value){if(value){element.attr("checked","checked");element.parent().addClass("checked");element.closest(".option-box").addClass("selected")}else{element.removeAttr("checked");element.parent().removeClass("checked");element.parents("#uniform-opt_.checker").find(".checked").removeClass("checked");element.closest(".option-box").removeClass("selected")}};scope.$watch("opt.value.selected",function(value){scope.markedForAdd(value)});scope.opt&&scope.markedForAdd(scope.opt.added)}}}]);angular.module("app").directive("optionTileDetail",["$log","safeApply","bnpPrices","disclaimersModel",function($log,safeApply,bnpPrices,disclaimersModel){return{restrict:"A",link:function(scope,element,attrs){scope.showDisclaimer=function(){disclaimersModel.open(scope.currentTileData.value.disclaimer)}}}}]);angular.module("app").directive("optionMobileDetail",["$log","safeApply","bnpPrices","disclaimersModel",function($log,safeApply,bnpPrices,disclaimersModel){return{restrict:"A",scope:{opt:"="},link:function(scope,element,attrs){scope.closeDetail=function(){element.parent().scope().closeMobileDetail()};scope.showDisclaimer=function(){disclaimersModel.open(scope.opt.disclaimer)}}}}]);angular.module("app").factory("timeoutService",["$timeout",function($timeout){return function(fn,delay){var d=delay||0;$timeout(function(){$timeout(function(){fn()},d)},d)}}]);angular.module("app").controller("packagesController",["$log","$scope","$rootScope","$http","bnpPackages","bnpPrices","messageService","buildAndPriceModel","dependenciesService","kiaEvents",function($log,$scope,$rootScope,$http,bnpPackages,bnpPrices,messageService,buildAndPriceModel,dependenciesService,kiaEvents){$scope.details={showPackageDetails:!1};$scope.dependencies=dependenciesService.data;$scope.initialize=function(){$scope.packages=$scope.data.packages.list.collection};messageService.subscribe(kiaEvents.BNP.SUCCESS,function(data){$scope.initialize()});buildAndPriceModel.detail.colorsInitialized&&$scope.initialize();messageService.subscribe(kiaEvents.BNP.ERROR,function(data){})}]);angular.module("app").directive("packagesInteraction",["$log","$compile","kiaEvents","bnpPackages","bnpColors","bnpOptions","timeoutService",function($log,$compile,kiaEvents,bnpPackages,bnpColors,bnpOptions,timeoutService){return{restrict:"A",replace:!0,priority:1,link:function(scope,element,attributes){scope.scrollWindow();scope.detailsPackage=null;scope.$on(kiaEvents.BNP.DEPENDENCIES_YES,function(e,args){var packageId,packageExists;packageId=args.item.id;packageExists=bnpPackages.data.currentList.getElementByKey(packageId)?!0:!1;var bColorsCase=!1,i=0,oColor=null;if(!args.dependency.colors.empty)if(args.dependency.colors.require.length>0){oColor=null;for(i=0;i<args.dependency.colors.require.length;i++){oColor=bnpColors.getById(args.dependency.colors.require[i].item.rules);null!==oColor&&(null!==oColor.interior?bnpColors.setInterior(args.dependency.colors.require[i].item.rules):bnpColors.setExterior(args.dependency.colors.require[i].item.rules))}}else{bColorsCase=!0;oColor=null}if(!args.dependency.packages.empty){for(i=0;i<args.dependency.packages.deny.length;i++)bnpPackages.removePackage(args.dependency.packages.deny[i].item.rules);for(i=0;i<args.dependency.packages.require.length&&1>i;i++);for(i=0;i<args.dependency.packages.include.length;i++);}if(!args.dependency.options.empty){for(i=0;i<args.dependency.options.deny.length;i++)bnpOptions.removeOption(args.dependency.options.deny[i].item.rules);for(i=0;i<args.dependency.options.require.length;i++)bnpOptions.addOption(args.dependency.options.require[i].item.rules);for(i=0;i<args.dependency.options.include.length;i++);}if(!bColorsCase){packageExists?bnpPackages.emptyCurrentList():bnpPackages.addPackage(packageId);scope.$emit(kiaEvents.BNP.PACKAGES_PACKAGE_SELECTED,args.item)}bColorsCase&&scope.setSection(1)});scope.$on(kiaEvents.BNP.DEPENDENCIES_NO,function(e,args){})}}}]);angular.module("app").directive("package",["$log","$compile","$rootScope","$sce","bnpPackages","bnpPrices","bnpRules","bnpColors","kiaEvents","safeApply","lightboxService","timeoutService",function($log,$compile,$rootScope,$sce,bnpPackages,bnpPrices,bnpRules,bnpColors,kiaEvents,safeApply,lightboxService,timeoutService){return{restrict:"A",templateUrl:window.staticURI+"/views/buildAndPrice/package.html",link:function(scope,element,attributes){var mergeFeaturesAndOptions,updateCheckbox;scope.requiredPackages=bnpPackages.getRequiredPackages(scope["package"].value.id,!0);scope.highlights=bnpPackages.getHighlightsFromPackage(scope["package"].value.id);updateCheckbox=function(){var el=$(element).find("input[type='checkbox']");scope["package"].value.selected===!1?$(el).prop("checked",!1):$(el).prop("checked",!0);$.uniform.update(el)};mergeFeaturesAndOptions=function(features,options){for(var merged=[],i=0;i<features.length;i++)features[i]instanceof BaseOption&&merged.push(features[i]);for(var j=0;j<options.length;j++)options[j]instanceof BaseOption&&merged.push(options[j]);return merged};scope.selectPackage=function(id){var packageId,packageExists,oRules;packageId=id;packageExists=bnpPackages.data.currentList.getElementByKey(packageId)?!0:!1;if(packageExists){oRules=bnpRules.checkPackage(packageId,!0);if(oRules.isEmpty()){bnpPackages.emptyCurrentList();scope.$emit(kiaEvents.BNP.PACKAGES_PACKAGE_SELECTED,scope["package"])}else{bnpPackages.data.list.get(packageId).dependencies=oRules;bnpPackages.data.list.get(packageId).checking=!0;scope.dependencies.handlerId="packageCheck-"+packageId;scope.dependencies.item=bnpPackages.data.list.get(packageId);scope.dependencies.checking=!0;updateCheckbox()}}else{oRules=bnpRules.checkPackage(packageId);if(oRules.isEmpty()){bnpPackages.addPackage(packageId);scope.$emit(kiaEvents.BNP.PACKAGES_PACKAGE_SELECTED,scope["package"])}else{bnpPackages.data.list.get(packageId).dependencies=oRules;bnpPackages.data.list.get(packageId).checking=!0;scope.dependencies.handlerId="packageCheck-"+packageId;scope.dependencies.item=bnpPackages.data.list.get(packageId);scope.dependencies.checking=!0;updateCheckbox()}}};$rootScope.$on("toggle.load.package.options",function(ev,args){if(scope["package"].value.showDetails){var pkg=bnpPackages.data.list.getElementByKey(args.id);scope.details.featuresAndOptions=mergeFeaturesAndOptions(pkg.value.features,pkg.value.options);$rootScope.$broadcast("package.detail.redraw")}});scope.displayPackageDetails=function(ev){var featuresAndOptions;scope.details.showPackageDetails=!0;scope.details.showPackageDetailsMobile=scope.mobile&&scope.details.showPackageDetails;scope["package"].value.showDetails=!0;featuresAndOptions=[];scope.details.featuresAndOptions=mergeFeaturesAndOptions(scope["package"].value.features,scope["package"].value.options);window.setTimeout(function(){$rootScope.$broadcast(kiaEvents.BNP.PACKAGE_DETAIL_SHOW,{"package":scope["package"]})},0)};scope.$watch("mobile",function(){if(scope.details.showPackageDetails){scope.details.showPackageDetailsMobile=!1;$rootScope.$broadcast(kiaEvents.BNP.PACKAGE_DETAIL_CLOSE,{"package":scope.details.packageDisplayed});scope.$broadcast("tileLayout.close.detail")}});$rootScope.$on(kiaEvents.BNP.PACKAGES_PACKAGE_SELECTED,function(ev,args){var selectedPackage;selectedPackage=args;updateCheckbox()});$rootScope.$on(kiaEvents.BNP.PACKAGE_DETAIL_CLOSE,function(ev,args){if(scope["package"].key===args["package"].key){scope.details.showPackageDetails=!1;scope.details.showPackageDetailsMobile=!1;scope["package"].value.showDetails=!1;scope.details.featuresAndOptions={};$(element).parents(".packages").removeClass("selected").addClass("columns-"+scope.packagesLength)}});updateCheckbox()}}}]);angular.module("app").directive("packageDetail",["$log","$rootScope","bnpPackages","kiaEvents","disclaimersModel","safeApply","messageService",function($log,$rootScope,bnpPackages,kiaEvents,disclaimersModel,safeApply,messageService){return{restrict:"A",scope:!0,replace:!0,templateUrl:window.staticURI+"/views/buildAndPrice/packageDetail.html",link:function(scope,element,attributes){var mobileDetail,mobileHeader,accessoriesList,mobileDetailDesc,mobileDetailDisc,processSelectedPackages;scope.mobileData={};scope.opt={};scope.detailRequiredPackages=[];scope.details.packageDisplayed="";processSelectedPackages=function(package){var requiredPackages,packagesList=[];packagesList.push({id:package.value.id,name:package.value.name,selected:!1});requiredPackages=bnpPackages.getRequiredPackages(package.key,!0);for(var i=0;i<requiredPackages.length;i++)packagesList.push({id:requiredPackages[i].id,name:requiredPackages[i].name,selected:!1});scope.details.requiredPackages=requiredPackages;return packagesList};$rootScope.$on("package.detail.redraw",function(){scope.$broadcast("tileLayout.redraw")});$rootScope.$on(kiaEvents.BNP.PACKAGE_DETAIL_SHOW,function(ev,args){scope.details.packageDisplayed=args["package"];scope.detailRequiredPackages=processSelectedPackages(args["package"]);mobileDetail=element.find(".option-mobile-detail");mobileHeader=element.parent().find(".option-mobile-header");accessoriesList=element.find(".option-tile-holder");mobileDetailDesc=element.find("#mobileDetailDesc");mobileDetailDisc=element.find("#mobileDetailDisc");scope.mobileDetailOpen=!1;scope.$broadcast("tileLayout.redraw")});$(".close-detail").on("click",function(){scope.$broadcast("tileLayout.close.detail")});scope.$on("tileLayout.open.mobile.detail",function(event,data){mobileDetail.show();mobileHeader.hide();accessoriesList.hide();window.scrollTo(0,0);scope.mobileData=data;if(null!==data.disclaimer&&""!==data.disclaimer){mobileDetailDisc.show();mobileDetailDisc.bind("click",function(){safeApply(scope,function(){disclaimersModel.open(data.disclaimer)})})}else mobileDetailDisc.hide();mobileDetail.removeClass("close").addClass("open");scope.mobileDetailOpen=!0});scope.closeMobileDetail=function(){window.scrollTo(0,0);mobileDetail.removeClass("open").addClass("close");mobileHeader.show();accessoriesList.show();scope.mobileDetailOpen=!1};element.find("img").error(function(c){$(this).attr("src",window.staticURI+"/img/image_coming_soon.png")});scope.closeDesktopDetail=function(){scope.$broadcast("tileLayout.close.detail");$rootScope.$emit(kiaEvents.BNP.PACKAGE_DETAIL_CLOSE,{"package":scope.details.packageDisplayed})};scope.$on(kiaEvents.RESPONSIVE.MATCH680,function(){});scope.$on(kiaEvents.RESPONSIVE.UNMATCH680,function(){scope.mobileDetailOpen&&scope.closeMobileDetail()})}}}]);angular.module("app").directive("sliderPackages",["$log","$swipe",function($log,$swipe){return{restrict:"A",link:function(scope,element,attributes){var move,offset=0,current=0,startX=0;move=function(direction){var elementWidth=$(element).find(".package:first-child").outerWidth(!0),packages=scope.packages.length-1;if("left"===direction){if(packages>current){current+=1;offset-=elementWidth;$(element).animate({left:offset+"px"},200)}}else if("right"===direction&&current>0){current-=1;offset+=elementWidth;$(element).animate({left:offset+"px"},200)}};$swipe.bind(element,{start:function(coords){startX=coords.x},move:function(coords){},end:function(coords){var deltaX=coords.x-startX;deltaX>0?move("right"):0>deltaX&&move("left")}})}}}]);angular.module("app").directive("packageDetailsIterator",["kiaEvents",function(kiaEvents){return{restrict:"A",link:function(scope,element,attrs){scope.$last&&scope.initTileLayout(!0)}}}]);angular.module("app").directive("packageDetailsFix",["$log","kiaEvents",function($log,kiaEvents){return{restrict:"A",priority:1,link:function(scope,element,attrs){scope.$watch("optionSelected",function(value){if(value){var lines=element.text().match(/\S+/g).length;lines>2&&4>lines&&element.addClass("three");lines>=4&&element.addClass("four")}})}}}]);angular.module("app").directive("packageDetailsBox",["$log","kiaEvents",function($log,kiaEvents){return{restrict:"A",replace:!0,priority:2,scope:{opt:"=",mobile:"="},link:function(scope,element,attrs){scope.optionSelected=!1;element.find("img").error(function(){scope.opt.thumbURL=window.staticURI+"/img/image_coming_soon_small.png"});scope.showDetail=function(){var row=0;if(scope.optionSelected)scope.closeDetail();else{if(scope.mobile){scope.$emit("tileLayout.open.mobile.detail",scope.opt);return!1}scope.optionSelected=!0;element.parent().addClass("selected");row=Number(element.parent()[0].attributes["data-row"].value);scope.$emit("tileLayout.open.detail",scope,row,element.parent(),scope.opt)}};scope.selected=function(value){element.parent().removeClass("selected");scope.optionSelected=value};scope.closeDetail=function(){scope.optionSelected=!1;element.parent().removeClass("selected");scope.$emit("tileLayout.close.detail",scope)}}}}]);angular.module("app").directive("packageDetailsTileDetail",["$log","safeApply","disclaimersModel",function($log,safeApply,disclaimersModel){return{restrict:"A",link:function(scope,element,attrs){scope.showDisclaimer=function(){disclaimersModel.open(scope.currentTileData.disclaimer)}}}}]);angular.module("app").directive("toggleMenu",["$log","$rootScope","safeApply",function($log,$rootScope,safeApply){return{restrict:"A",scope:{options:"="},templateUrl:window.staticURI+"/views/buildAndPrice/toggleMenu.html",link:function(scope,element,attributes){var defaultOption;defaultOption=0;scope.loadRequiredPackageOptions=function(id){for(var setOption=function(i,bool){scope.options[i].selected=bool},i=0;i<scope.options.length;i++)scope.options[i].id===id?safeApply(scope,setOption(i,!0)):safeApply(scope,setOption(i,!1));$rootScope.$broadcast("toggle.load.package.options",{id:id})};scope.$watch("options",function(){scope.options.length&&scope.options&&scope.options.length&&(scope.options[defaultOption].selected=!0)})}}}]);angular.module("app").filter("replace",["$filter",function(filter){return function(subject,search,replace){var regex=new RegExp(search,"gi"),st=subject.replace(regex,replace);return st}}]);angular.module("app").controller("trimsController",["$location","$routeParams","$log","$scope","$rootScope","buildAndPriceModel","kiaEvents","safeApply","timeoutService","messageService","bnpNavigation",function($location,$routeParams,$log,$scope,$rootScope,buildAndPriceModel,kiaEvents,safeApply,timeoutService,messageService,bnpNavigation){$scope.hideForKiosk="kiosk"===window.mode?!0:!1;
$scope.trimPriceIcon=function(price){var cls;cls=0===price?"":0>price?"substract":"add";return cls};$scope.showMobileTrim=function(trim,model,index){var display;display=trim.value.selected&&$scope.data.model.current.id===model.value.id?!0:trim.value.selected||0!==index?!1:!0;return display};$rootScope.$on(kiaEvents.TRIM.SELECTED,function(evt,args){var trim=$scope.data.trim.list.collection[args.selectedTrim];safeApply($scope,function(){buildAndPriceModel.setTrim(trim.value.id)})})}]);angular.module("app").directive("trimsMobile",["$log","$rootScope","kiaEvents",function($log,$rootScope,kiaEvents){return{restrict:"A",templateUrl:window.staticURI+"/views/buildAndPrice/trimSelectionMobile.html",link:function(scope,element,attributes){function trimMobileSelection(args){$(element).find("input[id|='trim']").each(function(index,el){$(el).prop("checked",!1);$.uniform.update(el)});var el=$(element).find("#trim-"+args.selectedTrim);$(el).prop("checked",!0);$.uniform.update(el)}$rootScope.$on(kiaEvents.TRIM.SELECTED,function(evt,args){trimMobileSelection(args)});scope.onTrimClick=function(ev,oTrim){ev.stopPropagation();ev.preventDefault();trimMobileSelection({selectedTrim:oTrim})}}}}]);angular.module("app").directive("trimsDesktop",[function(){return{restrict:"A",templateUrl:window.staticURI+"/views/buildAndPrice/trimSelectionDesktop.html",link:function(scope,element,attributes){scope.hideForKiosk="kiosk"===window.mode?!0:!1}}}]);angular.module("app").directive("trimSelection",["$log","$rootScope",function($log,$rootScope){return{restrict:"A",link:function(scope,element,attributes){scope.trim.value.selected&&$rootScope.$broadcast("trims.slideto",{trim:scope.$index})}}}]);angular.module("app").directive("trimsInteraction",["safeApply","kiaEvents",function(safeApply,kiaEvents){return{restrict:"A",link:function(scope,element,attributes){scope.switchContainers=function(platform){"mobile"===platform?$(element).find(".trim-selection-container").insertAfter(".panorama-container"):"desktop"===platform&&$(element).find(".panorama-container").insertAfter(".trim-selection-container")};scope.changePlatform=function(platform){safeApply(scope,function(){scope.platform=platform;scope.platformPath=scope.capitalize(platform);scope.switchContainers(platform)})};scope.$on(kiaEvents.RESPONSIVE.UNMATCH980,function(event){scope.switchContainers("desktop")});scope.$on("$includeContentLoaded",function(ev){scope.switchContainers(scope.platform)});scope.$watch("platform",function(platform){scope.switchContainers(platform)})}}}]);angular.module("app").directive("sliderTrims",["$log","$swipe","$rootScope","$timeout","kiaEvents",function($log,$swipe,$rootScope,$timeout,kiaEvents){return{restrict:"A",link:function(scope,element,attributes){var move,adjustSliderWidth,offset=0,current=0,startX=0;$rootScope.$on("trims.slideto",function(ev,args){move("left",args.trim)});move=function(direction,curr){var elementWidth=$(element).find(".trim:first-child").outerWidth(!0),trims=scope.data.trim.list.length()-1;if("left"===direction){if($(element).position().left>-(elementWidth*trims)){if(curr>-1){current=curr;offset=-(elementWidth*curr)}else{current+=1;offset-=elementWidth}$(element).animate({left:offset+"px"},200,function(){$rootScope.$broadcast(kiaEvents.TRIM.SELECTED,{selectedTrim:current})})}}else if("right"===direction&&$(element).position().left<0){if(curr>-1){current=curr;offset=elementWidth*curr}else{current-=1;offset+=elementWidth}$(element).animate({left:offset+"px"},200,function(){$rootScope.$broadcast(kiaEvents.TRIM.SELECTED,{selectedTrim:current})})}};adjustSliderWidth=function(){var elementsWidth=$(element).find(".trim").width();offset=-(elementsWidth+50)*current;$(element).animate({left:offset+"px"},200)};$swipe.bind(element,{start:function(coords){startX=coords.x},move:function(coords){},end:function(coords){var deltaX=coords.x-startX;deltaX>0?move("right",-1):0>deltaX&&move("left",-1)}});$(window).resize(function(){$timeout(function(){adjustSliderWidth()},0)})}}}]);angular.module("app").directive("trimsNavigation",["$log","$rootScope","kiaEvents","timeoutService",function($log,$rootScope,kiaEvents,timeoutService){return{restrict:"A",link:function(scope,element,attrs){var selectNavigationItem=function(index){timeoutService(function(){$(element).find("ul > li").each(function(idx,val){index===idx?$(this).addClass("selected"):$(this).removeClass("selected")})},0)};$rootScope.$on(kiaEvents.TRIM.SELECTED,function(ev,args){selectNavigationItem(parseInt(args.selectedTrim,10))});selectNavigationItem(0)}}}]);angular.module("app").controller("buildAndPriceController",["$log","$scope","$rootScope","$location","$routeParams","buildAndPriceModel","messageService","paymentCalculator","kiaEvents","bnpNavigation","bnpTrims","bnpColors","bnpPackages","bnpOptions","zipCodeCookie","safeApply","timeoutService","disclaimersModel","kioskService","vehicleSelector","$window","localize",function($log,$scope,$rootScope,$location,$routeParams,buildAndPriceModel,messageService,paymentCalculator,kiaEvents,bnpNavigation,bnpTrims,bnpColors,bnpPackages,bnpOptions,zipCodeCookie,safeApply,timeoutService,disclaimersModel,kioskService,vehicleSelector,$window,localize){$scope.hideForKiosk=kioskService.kioskMode;$scope.hideForDealer="dealer"===kioskService.kioskLocation?!0:!1;$scope.mobile=!1;$scope.base=window.baseURI;$scope["static"]=window.staticURI;$scope.content=window.contentURI;$scope.country=window.country;$scope.lang=window.lang;$scope.data=buildAndPriceModel.detail;$scope.zipCodeAvailable=!1;$scope.displayMobileNavigation=!1;$scope.validZipCode=!0;$scope.sections=bnpNavigation.sections;$scope.nextSection=bnpNavigation.nextSection;$scope.current=bnpNavigation.current;$scope.showVehicleSelector=!1;$scope.series=$location.search().series;$scope.year=$location.search().year;$scope.$watch("showVehicleSelector",function(newValue,oldValue){if(!newValue)if($scope.series&&$scope.year){disclaimersModel.setGlobal("disclaimer-bnp-"+$scope.series+"-"+$scope.year);if(checkZipCode($location.search())){$scope.zipCodeAvailable=!0;bnpNavigation.resolve($location.search())}}else disclaimersModel.setGlobal("disclaimer-bnp")});var checkZipCode=function(attrs){var available=!1;if(null===attrs.zipCode||void 0===attrs.zipCode){if(zipCodeCookie.get()){$scope.data.zipCode=zipCodeCookie.get()+"";available=!0}}else{$scope.data.zipCode=attrs.zipCode+"";available=!0}return available};messageService.subscribe(kiaEvents.BNP.SUCCESS,function(data,args){$scope.compareImage=buildAndPriceModel.detail.serie.compareImg;switch(args.type){case"trims":zipCodeCookie.set($scope.data.zipCode);$scope.zipCodeAvailable=!0;"summary"!==$location.search().section&&bnpNavigation.sectionManager(data);safeApply($scope,function(){$scope.data.trimsInitialized=!0});break;case"zipcode":$scope.init()}});messageService.subscribe(kiaEvents.BNP.ERROR,function(data,args){switch(args.type){case"trims":case"zipcode":$scope.$broadcast(kiaEvents.ZIPCODE.ERROR,args.message,"all");$scope.$broadcast(kiaEvents.ZIPCODE.EDITMODE_ON)}});$scope.onTrim=function(id){buildAndPriceModel.setTrim(id);bnpNavigation.setSection(0)};$scope.onModel=function(id){buildAndPriceModel.setModel(id);bnpNavigation.setSection(0)};$scope.onColor=function(sColor){$scope.color=sColor};$scope.getInventoryDeeplink=function(){return buildAndPriceModel.getInventoryDeeplink()};$scope.getQuoteLink=function(){return buildAndPriceModel.getQuoteLink()};$scope.getTestDriveLink=function(){return buildAndPriceModel.getTestDriveLink()};$scope.clickQuoteLink=function(){return buildAndPriceModel.setQuoteData()};$scope.shouldHideInterior360Logo=function(isExteriorOnColorPageSelected,isExteriorOnSummaryPageSelected){if("undefined"!=typeof isExteriorOnColorPageSelected){if(isExteriorOnColorPageSelected)return!0}else{if("undefined"==typeof isExteriorOnSummaryPageSelected)return!0;if(isExteriorOnSummaryPageSelected)return!0}var shouldHide=!1;if($scope.data.colorsInitialized){var regex=/Leather/;"forte5"===$scope.series&&"2016"===$scope.year&&$scope.data.trimsInitialized&&"EX"===$scope.data.trim.current.name&&-1!==$scope.data.colors.interior.current.fabric.name.search(regex)&&(shouldHide=!0);"forte5"===$scope.series&&"2016"===$scope.year&&$scope.data.trimsInitialized&&"SX"===$scope.data.trim.current.name&&-1!==$scope.data.colors.interior.current.fabric.name.search(regex)&&(shouldHide=!0);"cadenza"===$scope.series&&"2016"===$scope.year&&$scope.data.trimsInitialized&&"Limited"===$scope.data.trim.current.name&&"black"===$scope.data.colors.interior.current.name&&(shouldHide=!0)}return shouldHide};$scope.shouldHideExterior360Logo=function(isInteriorOnColorPageSelected,isInteriorOnSummaryPageSelected){if("undefined"!=typeof isInteriorOnColorPageSelected){if(isInteriorOnColorPageSelected)return!0}else if("undefined"!=typeof isInteriorOnSummaryPageSelected&&isInteriorOnSummaryPageSelected)return!0;var shouldHide=!1;"forte5"===$scope.series&&"2016"===$scope.year&&$scope.data.trimsInitialized&&"LX"===$scope.data.trim.current.name&&(shouldHide=!0);"forte5"===$scope.series&&"2016"===$scope.year&&$scope.data.trimsInitialized&&"EX"===$scope.data.trim.current.name&&(shouldHide=!0);"soul"===$scope.series&&"2016"===$scope.year&&$scope.data.trimsInitialized&&"+"===$scope.data.trim.current.name&&$scope.data.colorsInitialized&&"inferno red/ black"===$scope.data.colors.exterior.current.name&&(shouldHide=!0);"soul"===$scope.series&&"2016"===$scope.year&&$scope.data.trimsInitialized&&"+"===$scope.data.trim.current.name&&$scope.data.colorsInitialized&&"white/ red"===$scope.data.colors.exterior.current.name&&(shouldHide=!0);"soul"===$scope.series&&"2016"===$scope.year&&$scope.data.trimsInitialized&&"+"===$scope.data.trim.current.name&&$scope.data.colorsInitialized&&"caribbean blue"===$scope.data.colors.exterior.current.name&&(shouldHide=!0);$scope.data.colors.exterior.current&&"cadenza"===$scope.series&&"2016"===$scope.year&&$scope.data.trimsInitialized&&"Limited"===$scope.data.trim.current.name&&"silky silver metallic"===$scope.data.colors.exterior.current.name&&(shouldHide=!0);return shouldHide};$scope.getMtfTitle=function(){return localize.getLocalizedString("label.mtf.title.bnp")};$rootScope.$on("vehicleSelector.selected",function(evt,args){var pathArray=window.location.pathname.split("/");$window.location.href="/us/"+pathArray[2]+"/build/"+args.vehicle.series+"/"+args.vehicle.year});$rootScope.$on("vehicleSelector.display",function(){$scope.showVehicleSelector=!0});$scope.init=function(obj){kioskService.kioskMode&&(kioskService.kioskZipCode?$scope.data.zipCode=kioskService.kioskZipCode:$scope.data.zipCode="94303");bnpNavigation.resolve($location.search())};bnpNavigation.init();kioskService.kioskMode&&$scope.init();disclaimersModel.setGlobal("disclaimer-bnp")}]);angular.module("app").directive("widthAdjustment",["$log","kiaEvents",function($log,kiaEvents){return{restrict:"A",link:function(scope,element,attrs){var win,el,offset,padding,margin,elementWidth;win=$(window);el=$(element);offset=parseInt(attrs.widthAdjustment,10)||0;padding=el.innerWidth()-el.width();margin=el.outerWidth(!0)-el.outerWidth();elementWidth=function(){var width=win.width()-(padding+margin+offset);return width};if("mobile"===scope.platform){el.width(elementWidth());win.resize(function(){el.width(elementWidth())})}scope.$on(kiaEvents.RESPONSIVE.MATCH680,function(event){el.width(elementWidth());win.resize(function(){el.width(elementWidth())})});scope.$on(kiaEvents.RESPONSIVE.UNMATCH680,function(event){el.removeAttr("style");$(window).off("resize")})}}}]);angular.module("app").directive("navigationInfo",["$log","$compile",function($log,$compile){return{restrict:"A",link:function(scope,element,attributes){scope.$watch("section.navigation.info",function(newValue,oldValue){var regex=/<div class=\"boxes\">/g;regex.test(newValue)?$(element).html($compile(newValue)(scope)):$(element).html(newValue)})}}}]);angular.module("app").directive("bnpInteraction",["$log","$window","kiaEvents","$timeout","$location","safeApply","buildAndPriceModel","bnpNavigation","geoLocationService","timeoutService","disclaimersModel","kioskService",function($log,$window,kiaEvents,$timeout,$location,safeApply,buildAndPriceModel,bnpNavigation,geoLocationService,timeoutService,disclaimersModel,kioskService){return{restrict:"A",replace:"true",priority:1,link:function(scope,element,attributes){require(["https://ebusiness.dealertrack.com/Suite/suite.js"],function(){$window.drs.init()});scope.hideForKiosk=kioskService.kioskMode;scope.capitalize=function(text){return text.charAt(0).toUpperCase()+text.slice(1)};scope.optionsMobile=!1;scope.platform="desktop";scope.displayCalculator=!1;scope.packagesHorizontalAlignment=!1;scope.platformPath=scope.capitalize(scope.platform);scope.openMenu=function(){scope.displayMobileNavigation=!scope.displayMobileNavigation};scope.setSection=function(section){bnpNavigation.setSection(section);scope.openMenu()};scope.openCalculator=function(){scope.displayCalculator=!scope.displayCalculator};scope.$on(kiaEvents.GLOBAL.CLOSE_CALCULATOR,function(e){scope.openCalculator()});scope.submitZipForm=function(){buildAndPriceModel.validateZipcode(scope.data.zipCode)};scope.findMe=function(){geoLocationService.findMe(function(zipCode){safeApply(scope,function(){scope.data.zipCode=zipCode;scope.$apply();scope.submitZipForm()})},function(message){safeApply(scope,function(){scope.$broadcast(kiaEvents.ZIPCODE.ERROR,message,"bnpZipCode")})})};scope.changePlatform=function(platform){safeApply(scope,function(){scope.platform=platform;scope.platformPath=scope.capitalize(platform)})};scope.displayNavigation=function(){scope.displayMobileNavigation=!scope.displayMobileNavigation};scope.$on(kiaEvents.ZIPCODE.NOT_VALID,function(event,message,id){scope.validZipCode=!1;scope.initialErrorMessage=message;$(element).find(".zipcode").addClass("error")});scope.$on(kiaEvents.ZIPCODE.VALID,function(event,id){scope.validZipCode=!0;$(element).find(".zipcode").removeClass("error")});scope.$on(kiaEvents.ZIPCODE.ERROR,function(event,message,id){scope.validZipCode=!1;$(element).find(".zipcode").addClass("error")});scope.isIpadPano=function(fisheyeAvailable){return Modernizr.ipad&&fisheyeAvailable?"mobile-interior":"interior"};scope.$on(kiaEvents.ZIPCODE.FOCUS,function(event,id){});scope.$on(kiaEvents.RESPONSIVE.MATCH320,function(event){scope.changePlatform("mobile");scope.mobile=!0});scope.$on(kiaEvents.RESPONSIVE.MATCH480,function(event){scope.changePlatform("mobile");scope.mobile=!0});scope.$on(kiaEvents.RESPONSIVE.MATCH680,function(event){scope.changePlatform("mobile");scope.mobile=!0});scope.$on(kiaEvents.RESPONSIVE.UNMATCH680,function(event){scope.changePlatform("desktop");scope.mobile=!1});scope.$on(kiaEvents.RESPONSIVE.MATCH768,function(event){scope.optionsMobile=!0});scope.$on(kiaEvents.RESPONSIVE.UNMATCH768,function(event){scope.optionsMobile=!1})}}}]);angular.module("app").filter("truncate",function(){return function(text,length){return null===length||void 0===length||0>length?text:text.substr(0,length)}});angular.module("app").directive("bnpColors",["$log","kiaEvents","buildAndPriceModel","messageService","safeApply","bnpColors","bnpPackages","bnpOptions","dependenciesService","bnpTrims",function($log,kiaEvents,buildAndPriceModel,messageService,safeApply,bnpColors,bnpPackages,bnpOptions,dependenciesService,bnpTrims){return{restrict:"A",replace:!0,priority:1,controller:function($scope){$scope.colorsOptions={offset:0,boxes:0,initialized:!1,size:100,labelLength:-1,interior:{selected:!1},exterior:{selected:!1},firstUpdate:!0};$scope.dependencies=dependenciesService.data;$scope.colorsOptions.initialized=!1;$scope.colorsOptions.exterior.selected=!1;$scope.colorsOptions.interior.selected=!1},link:function(scope,element,attrs){scope.$emit(kiaEvents.ANALYTICS.BNP_TRIM_CONFIRMATION,bnpTrims.navigation.info);scope.updateColorScroll=function(bForce){var scrollElement=element.find("#colorsSelector"),wrapElement=scrollElement.find("ul.exterior"),nWidth=wrapElement.find(".colorBlock:first").outerWidth();nWidth=$(element).width()<=680?60:100;scope.colorsOptions.size=nWidth;if(scope.colorsOptions.initialized)try{var scrollOffset=scrollElement.smoothDivScroll("getScrollerOffset"),padding=wrapElement.outerWidth()-wrapElement.width(),offset=nWidth*scope.data.colors.exterior.current.order,contentSize=scope.data.colors.boxes*scope.colorsOptions.size,containerSize=scrollElement.width(),bMove=!0;offset>=scrollOffset&&containerSize>contentSize&&(scrollOffset+containerSize>offset+contentSize+padding?bMove=!1:offset=offset+contentSize+padding-containerSize);var widthCurrent=wrapElement.width(),widthNew=scope.data.colors.count*nWidth;if(bForce!==!0&&widthCurrent>widthNew&&!scope.colorsOptions.firstUpdate){wrapElement.css({marginLeft:Math.round(Math.abs(widthCurrent-widthNew))+"px"});widthNew=widthCurrent;setTimeout(function(){safeApply(scope,function(){scope.updateColorScroll(!0)})},1e3)}else wrapElement.css({marginLeft:0});wrapElement.width(widthNew);scrollElement.smoothDivScroll("recalculateScrollableArea",!0);bMove&&scrollElement.smoothDivScroll("move",offset-scrollOffset);scope.colorsOptions.offset=offset;scope.colorsOptions.boxes=scope.data.colors.boxes;scope.colorsOptions.firstUpdate=!1}catch(ev){}};scope.onColorExterior=function(id){safeApply(scope,function(){if(scope.data.colors.exterior.current.id!==id){var oColor=buildAndPriceModel.setColorExterior(id);if(oColor.checking!==!0){scope.updateColorScroll();scope.setExteriorView()}else{scope.dependencies.handlerId="exterior-"+id;scope.dependencies.item=oColor;scope.dependencies.label="label.build.colors.exteriorColor";scope.dependencies.checking=!0}}else{scope.setExteriorView();scope.updateColorScroll()}})};scope.onColorInterior=function(id){safeApply(scope,function(){if(scope.data.colors.interior.current.id!==id){var oColor=buildAndPriceModel.setColorInterior(id);if(oColor.checking!==!0)scope.setInteriorView();else{scope.dependencies.handlerId="combo-"+scope.data.colors.exterior.current.id+"-"+id;scope.dependencies.item=oColor;scope.dependencies.label="label.build.colors.interiorColor";scope.dependencies.checking=!0}}else scope.setInteriorView()})};scope.updateThumbnail=function(obj){if(scope.colorsOptions.initialized!==!1){var sFile=String(obj.pattern);sFile=sFile.replace(/xx/gi,obj.coord.x);sFile=sFile.replace(/yy/gi,obj.coord.y);sFile=sFile.replace(/zz/gi,obj.coord.z);for(var sPath=obj.path,w=-1,i=1;i<obj.sizes.length;i++)if(obj.sizes[i].width>=element.find(".thumbnail").width()){w=i;break}0>w&&(w=obj.sizes.length-1);if(w>=0){sPath+=obj.sizes[w].width+"x"+obj.sizes[w].height+"/";obj.thumbnail=sPath+sFile}}};scope.setExteriorView=function(){scope.colorsOptions.exterior.selected=!0;scope.colorsOptions.interior.selected=!1};scope.setInteriorView=function(){scope.colorsOptions.interior.selected=!0;scope.colorsOptions.exterior.selected=!1};scope.switchColorsView=function(){scope.colorsOptions.exterior.selected?scope.setInteriorView():scope.setExteriorView()};scope.initialize=function(){scope.colorsOptions.initialized=!0;$("#colorsSelector").smoothDivScroll({hotSpotScrolling:!1,touchScrolling:!0});scope.updateColorScroll();scope.setExteriorView()};messageService.subscribe(kiaEvents.BNP.SUCCESS,function(data){scope.initialize()});buildAndPriceModel.detail.colorsInitialized&&scope.initialize();messageService.subscribe(kiaEvents.BNP.ERROR,function(data){});scope.$on(kiaEvents.RESPONSIVE.SETUP320,function(event){scope.updateColorScroll()});scope.$on(kiaEvents.RESPONSIVE.MATCH320,function(event){scope.updateColorScroll(!0)});scope.$on(kiaEvents.RESPONSIVE.SETUP480,function(event){scope.updateColorScroll()});scope.$on(kiaEvents.RESPONSIVE.UNMATCH480,function(event){scope.updateColorScroll(!0)});scope.$on(kiaEvents.RESPONSIVE.MATCH480,function(event){scope.updateColorScroll(!0)});scope.$on(kiaEvents.RESPONSIVE.MATCH680,function(event){scope.updateColorScroll(!0)});scope.$on(kiaEvents.RESPONSIVE.UNMATCH680,function(event){scope.updateColorScroll(!0)});scope.$on(kiaEvents.BNP.DEPENDENCIES_YES,function(e,args){var i=0;if(!args.dependency.packages.empty){for(i=0;i<args.dependency.packages.deny.length;i++)bnpPackages.removePackage(args.dependency.packages.deny[i].item.rules);for(i=0;i<args.dependency.packages.require.length&&1>i;i++)bnpPackages.addPackage(args.dependency.packages.require[i].item.rules);for(i=0;i<args.dependency.packages.include.length;i++);}if(!args.dependency.options.empty){for(i=0;i<args.dependency.options.deny.length;i++)bnpOptions.removeOption(args.dependency.options.deny[i].item.rules);for(i=0;i<args.dependency.options.require.length;i++)bnpOptions.addOption(args.dependency.options.require[i].item.rules);for(i=0;i<args.dependency.options.include.length;i++);}if(e.targetScope.item.fabric){buildAndPriceModel.setColorInterior(e.targetScope.item.id,!0);setTimeout(function(){scope.$apply(function(){scope.setInteriorView()})},100)}else{buildAndPriceModel.setColorExterior(e.targetScope.item.id,!0);scope.updateColorScroll();setTimeout(function(){scope.$apply(function(){scope.setExteriorView()})},100)}})}}}]);angular.module("app").directive("bnpColorsDetail",[function(){return{restrict:"A",replace:!0,templateUrl:window.staticURI+"/views/buildAndPrice/colorDetail.html",link:function(scope,element,attrs){$(element).removeClass("initialized");setTimeout(function(){$(element).addClass("initialized")},0)}}}]);angular.module("app").directive("trustHtml",["$log","$sce",function($log,$sce){return{restrict:"A",replace:!0,scope:{trustHtml:"="},template:"<span ng-bind-html='trustedHtml'></span>",controller:function($scope){$scope.trustedHtml=""},link:function(scope,element,attrs){scope.trustedHtml=$sce.trustAsHtml(scope.trustHtml)}}}]);angular.module("app").directive("bnpSummary",["kiaEvents","messageService","safeApply","buildAndPriceModel","bnpTrims","bnpColors","bnpPackages","bnpOptions","bnpNavigation","lightboxService","disclaimersModel","bnpPrices","$http","$location","$window",function(kiaEvents,messageService,safeApply,buildAndPriceModel,bnpTrims,bnpColors,bnpPackages,bnpOptions,bnpNavigation,lightboxService,disclaimersModel,bnpPrices,$http,$location,$window){return{restrict:"A",replace:!0,priority:1,controller:function($scope){function saveBnpConfig(){var config=buildAndPriceModel.getBnpConfig(),requestUrl="/us/"+window.lang+"/data/saveVehicleConfiguration?modelId="+config.modelId+"&extColorId="+config.extColorId+"&intColorId="+config.intColorId+"&fabricId="+config.fabricId+"&optionCodes="+config.optionCodes.join(",");return $http.get(requestUrl)}$scope.model=buildAndPriceModel.detail;$scope.options={exterior:$scope.model.colorsInitialized&&!0,interior:!1};$scope.date=new Date;$scope.disclaimersURI=disclaimersModel.getURI("disclaimer-bnp-"+$scope.model.serie.key+"-"+$scope.model.serie.year);$scope.getRequiredPagackes=function(package){var required=bnpPackages.getRequiredPackages(package.id,!0);return required};$scope.getSelectedPackagesCount=function(package){var required=bnpPackages.getSelectedPackagesCount();return required};$scope.getBnPDeeplink=function(){return buildAndPriceModel.getDeeplink()};$scope.getQuoteLink=function(){return buildAndPriceModel.getQuoteLink()};$scope.getTestDriveLink=function(){return buildAndPriceModel.getTestDriveLink()};$scope.clickQuoteLink=function(){saveBnpConfig().success(function(data,status,headers,config){var url=$scope.getQuoteLink()+"&config="+data.trim();$window.open(url,"_self")}).error(function(data,status,headers,config){console.error("Error saving build and price configuration")})};$scope.clickTestDriveLink=function(){saveBnpConfig().success(function(data,status,headers,config){var url=$scope.getTestDriveLink()+"&config="+data.trim();$window.open(url,"_self")}).error(function(data,status,headers,config){console.error("Error saving build and price configuration")})};$scope.reset=function(){bnpNavigation.setSection(bnpTrims);buildAndPriceModel.reset(!0)};var getFileName=function(pattern,x,y,z){var sFile=String(pattern);sFile=sFile.replace(/xx/gi,x);sFile=sFile.replace(/yy/gi,y);sFile=sFile.replace(/zz/gi,z);return sFile};$scope.getBaseImage=function(type){if(null===$scope.model.colors.interior.current&&null===$scope.model.colors.exterior.current)return"";var sUrl=$scope.model.colors.imageSet+type+"/"+$scope.model.colors[type].current.baseHex;if("exterior"===type)sUrl+="/800x354/";else{sUrl+="/"+$scope.model.colors.interior.current.fabric.file;sUrl+="/800x425/"}sUrl+=getFileName($scope.model.serie.panorama.pattern,$scope.model.serie.panorama[type].x,$scope.model.serie.panorama[type].y,$scope.model.serie.panorama[type].z);return sUrl};messageService.subscribe(kiaEvents.BNP.SUCCESS,function(data,args){"colors"!==args.type||$scope.options.exterior||$scope.options.interior||($scope.options.exterior=!0)})},link:function(scope,element,attrs){scope.setExteriorView=function(){scope.options.exterior=!0;scope.options.interior=!1};scope.setInteriorView=function(){scope.options.interior=!0;scope.options.exterior=!1};scope.onOpenLink=function(id){lightboxService.open(id)};isAndroidBrowser()&&element.addClass("android-browser");$(element).removeClass("initialized");setTimeout(function(){$(element).addClass("initialized")},500);bnpColors.data.exterior.current&&bnpColors.data.interior.current&&scope.$emit(kiaEvents.ANALYTICS.BNP_COLORS_CONFIRMATION,bnpColors.data.exterior.current,bnpColors.data.interior.current);scope.$emit(kiaEvents.ANALYTICS.BNP_OPTIONS_CONFIRMATION,bnpOptions.data.currentList);scope.$emit(kiaEvents.ANALYTICS.BNP_PACKAGES_CONFIRMATION,bnpPackages.data.currentList);scope.$emit(kiaEvents.ANALYTICS.BNP_SUCCESS_CONFIRMATION,bnpPrices.price)}}}]);angular.module("app").directive("bnpSummaryDetail",[function(){return{restrict:"A",replace:!0,templateUrl:window.staticURI+"/views/buildAndPrice/summaryDetail.html",link:function(scope,element,attrs){var setPricesWidth=function(){var oPrices=$(element).find(".price .add"),minWidth=0;oPrices.css({minWidth:"0"});oPrices.each(function(){minWidth<$(this).outerWidth()&&(minWidth=$(this).outerWidth())});minWidth>20&&oPrices.css({minWidth:minWidth+"px"})};$(element).removeClass("initialized");setTimeout(function(){$(element).addClass("initialized");$(element).find(".selection").on("resize",function(){setPricesWidth()});setTimeout(function(){setPricesWidth()},500)},0)}}}]);angular.module("app").directive("autoselect",["kiaEvents","messageService",function(kiaEvents,messageService){function selectElementText(el,win){win=win||window;var sel,range,doc=win.document;if(win.getSelection&&doc.createRange){sel=win.getSelection();range=doc.createRange();range.selectNodeContents(el);sel.removeAllRanges();sel.addRange(range)}else if(doc.body.createTextRange){range=doc.body.createTextRange();range.moveToElementText(el);window.setTimeout(function(){range&&range.select&&range.select()},0)}}return{restrict:"A",link:function(scope,element,attrs){var doAutoSelect=function(){element.find(".link-text").length>0&&selectElementText(element.find(".link-text")[0])};element.on("click touchstart mousedown",function(){doAutoSelect()})}}}]);angular.module("app").directive("analyticsTracking",["kiaEvents","$log",function(kiaEvents,$log){return{restrict:"A",replace:!0,link:function(scope,element,attrs){element.on("click",function(event){scope.eventName=attrs.analyticsTracking;switch(scope.eventName){case"compare-trims":scope.$emit(kiaEvents.ANALYTICS.BNP_COMPARE_VEHICLE);break;case"get-link":scope.$emit(kiaEvents.ANALYTICS.BNP_GET_LINK);break;case"print":scope.$emit(kiaEvents.ANALYTICS.BNP_PRINT_SUMMARY)}})}}}]);angular.module("app").factory("dealerInventoryService",["$log","$http","messageService",function($log,$http,messageService){var defaultRequestParams,url,get;url=window.baseURI+"/data/dealers/inventory";defaultRequestParams={itemsPerPage:10,pageNumber:1,radius:50,sendFilters:!0,sendDealers:!0,sendVehicles:!0,series:"",year:"",zipCode:""};get=function(criteria,success,failure){var requestParams=jQuery.extend({},defaultRequestParams,criteria);return $http.get(url,{params:requestParams}).success(function(data,getResponseHeaders){messageService.publish("dealerInventorySearch",{source:"dealerInventoryService",criteria:criteria});return angular.isFunction(success)?success(data):void 0}).error(failure)};return{get:get}}]);angular.module("app").factory("contactAtOnceService",["$log","$http",function($log,$http){function getPlacementId(type,placement){var placementId=-1,size="desktop",w=window.innerWidth||document.documentElement.clientWidth;768>w&&(size="xs");switch(placement){case"vehicle_item":"chat"===type&&(placementId=8);break;case"dealer_infobox_detail":"chat"===type&&(placementId=1);break;case"form_success":case"vehicle_dealers":"chat"===type&&(placementId=2);break;case"request_test_drive":"chat"===type&&(placementId=11);break;case"meet_fleet":if("chat"===type){placementId=53;"xs"===size&&(placementId=55)}else if("textmsg"===type){placementId=54;"xs"===size&&(placementId=56)}break;case"navigation":if("chat"===type){placementId=67;"xs"===size&&(placementId=68)}break;default:placementId=0}return placementId}return{getPlacementId:getPlacementId}}]);var resetObj=function(obj){for(var key in obj)delete obj[key]};angular.module("app").factory("featureFilterModel",["messageService","paymentCalculator","$location","kiaEvents","$rootScope","externalConstant",function(messageService,paymentCalculator,$location,kiaEvents,$rootScope,externalConstant){var filters,vehicles,matches,dealers,filtersType;vehicles=[];matches={near:[],count:0,total:0,bestDealer:"",dealers:0};dealers={};filters={};filtersType={};var collectionSeparator=",",options={zipCode:null,vehicle:{id:4,name:"",year:"",code:""},radius:50,sortBy:{type:"distFromUser|+,msrp|+",primary:{field:"msrp",order:"+"},secondary:{field:"distFromUser",order:"+"}},orderBy:{field:"msrp",order:"+"},nearOrderBy:{field:"match",order:"-"},distanceOrderBy:{field:"distFromUser",order:"+"},results:{min:10,value:10,delta:10},listViewMode:!0},prices={min:0,max:0,low:0,high:0},monthly={active:!0,selected:!1},updateConstants=function(){options.radius=externalConstant.getValue("dealer.inventory.defaultRadius")||options.radius;options.results.value=externalConstant.getValue("dealers.inventory.paginationCount")||options.results.value};externalConstant.resourceFileLoaded?updateConstants():$rootScope.$on(kiaEvents.GLOBAL.CONSTANTS_LOADED,updateConstants);var initialize=function(inventory){var i=0,j=0,key="",deeplinkCount=0;vehicles.splice(0);prices.min=Number.MAX_VALUE;prices.max=0;for(i=0;i<inventory.vehicles.length;i++){inventory.vehicles[i].msrp<prices.min&&(prices.min=inventory.vehicles[i].msrp);inventory.vehicles[i].msrp>prices.max&&(prices.max=inventory.vehicles[i].msrp)}prices.high=prices.max;prices.low=prices.min;resetObj(filters);resetObj(filtersType);for(i=0;i<inventory.inventoryFilterResponse.length;i++)if(inventory.inventoryFilterResponse[i].data){filtersType[inventory.inventoryFilterResponse[i].type]||(filtersType[inventory.inventoryFilterResponse[i].type]=[]);filtersType[inventory.inventoryFilterResponse[i].type].push(inventory.inventoryFilterResponse[i].propertyName);deeplinkCount=checkDeeplink(inventory.inventoryFilterResponse[i],inventory.inventoryFilterResponse[i].type);filters[inventory.inventoryFilterResponse[i].propertyName]=inventory.inventoryFilterResponse[i];filters[inventory.inventoryFilterResponse[i].propertyName].count=deeplinkCount;switch(inventory.inventoryFilterResponse[i].type){case"range":filters[inventory.inventoryFilterResponse[i].propertyName].min=inventory.inventoryFilterResponse[i].data[0].value;filters[inventory.inventoryFilterResponse[i].propertyName].low=inventory.inventoryFilterResponse[i].data[0].low;filters[inventory.inventoryFilterResponse[i].propertyName].max=inventory.inventoryFilterResponse[i].data[1].value;filters[inventory.inventoryFilterResponse[i].propertyName].high=inventory.inventoryFilterResponse[i].data[1].high}filters[inventory.inventoryFilterResponse[i].propertyName].items=inventory.inventoryFilterResponse[i].data.hashtify("id");
}for(i=0;i<inventory.vehicles.length;i++){for(key in inventory.vehicles[i])filters[key]&&"range"!==filters[key].type&&"string"==typeof inventory.vehicles[i][key]&&(inventory.vehicles[i][key]={key:inventory.vehicles[i][key],name:filters[key].items[inventory.vehicles[i][key]].name});inventory.vehicles[i].distFromUser=Math.round(10*inventory.vehicles[i].distFromUser)/10;vehicles.push(inventory.vehicles[i])}options.radius=inventory.radius;sortVehicles();var count=0,dealerCode="";resetObj(dealers);deeplinkCount=checkDeeplink(inventory.dealers,"dealers");for(i=0;i<inventory.dealers.length;i++){dealerCode=inventory.dealers[i].code;count=0;for(j=0;j<inventory.vehicles.length;j++)if(inventory.vehicles[j].dealerCode===dealerCode){(null===inventory.dealers[i].distFromUser||void 0===inventory.dealers[i].distFromUser)&&(inventory.dealers[i].distFromUser=inventory.vehicles[j].distFromUser);inventory.vehicles[j].dealerName=inventory.dealers[i].name;inventory.dealers[i].chatEnabled?inventory.vehicles[j].chatEnabled=inventory.dealers[i].chatEnabled:inventory.vehicles[j].chatEnabled=!1;inventory.vehicles[j].seriesName=inventory.seriesName;count++}inventory.dealers[i].count=count}inventory.dealers.sort(sortByDistance);for(i=0;i<inventory.dealers.length;i++){dealerCode=inventory.dealers[i].code;dealers[dealerCode]=inventory.dealers[i];dealers[dealerCode].matchesNdx=[];dealers[dealerCode].vehiclesNdx=[];dealers[dealerCode].active=!0}matches.count=0;matches.dealers=deeplinkCount;matches.bestDealer="";updateMonthlyPayment();applyFilter()};messageService.subscribe(kiaEvents.GLOBAL.DEALER_UPDATE,function(){});var checkPrices=function(item){var oSearch=$location.search(),max=Number.POSITIVE_INFINITY,min=Number.NEGATIVE_INFINITY;if(oSearch.max){try{max=parseInt(oSearch.max,10)}catch(ev){max=Number.POSITIVE_INFINITY}max===Number.NaN&&(max=Number.POSITIVE_INFINITY)}if(oSearch.min){try{min=parseInt(oSearch.min,10)}catch(ev){min=Number.NEGATIVE_INFINITY}min===Number.NaN&&(min=Number.NEGATIVE_INFINITY)}min>item.data[0].value&&min<=item.data[1].value&&max>=min?item.data[0].low=min:item.data[0].low=item.data[0].value+0;max<item.data[1].value&&max>=item.data[0].value&&max>=min?item.data[1].high=max:item.data[1].high=item.data[1].value+0},checkDeeplink=function(item,type){var oSearch=$location.search(),aCollection=[],i=0,j=0,propertyName="",count=0;switch(type){case"list":propertyName=item.propertyName;if(oSearch[propertyName]){aCollection=oSearch[propertyName].split(collectionSeparator);for(i=0;i<aCollection.length;i++)for(j=0;j<item.data.length;j++)if(String(item.data[j].id)===aCollection[i]){item.data[j].selected=!0;count++;break}}break;case"dealers":propertyName=type;if(oSearch[propertyName]){aCollection=oSearch[propertyName].split(collectionSeparator);for(i=0;i<aCollection.length;i++)for(j=0;j<item.length;j++)if(String(item[j].code)===aCollection[i]){item[j].selected=!0;count++;break}}break;case"range":checkPrices(item);break;default:switch(item.propertyName){case"exteriorColor":if(oSearch.exterior){propertyName=item.propertyName;aCollection=oSearch.exterior.split(collectionSeparator);for(i=0;i<aCollection.length;i++)for(j=0;j<item.data.length;j++)if(item.data[j].baseHexValue.toLowerCase()===aCollection[i].toLowerCase()){item.data[j].selected=!0;count++;break}}break;case"interiorColor":if(oSearch.interior){propertyName=item.propertyName;aCollection=oSearch.interior.split(collectionSeparator);for(i=0;i<aCollection.length;i++)for(j=0;j<item.data.length;j++)if(item.data[j].baseHexValue.toLowerCase()===aCollection[i].toLowerCase()){item.data[j].selected=!0;count++;break}}}}return count},getSelection=function(list,type){var aItems=[],key="";for(key in list)if(list[key].selected)switch(type){case"color":aItems.push(list[key].baseHexValue);break;case"list":aItems.push(list[key].id);break;case"dealers":aItems.push(list[key].code)}return aItems.length>0?aItems.join(collectionSeparator):null},updateQuerystring=function(){var key="",filter=null,oQuery=$location.search(),oSelection=null,propertyName="";for(key in filters){filter=filters[key];switch(filter.type){case"range":oQuery.min=filters[key].low;oQuery.max=filters[key].high;filters[key].low===filters[key].min&&delete oQuery.min;filters[key].high===filters[key].max&&delete oQuery.max;break;case"color":oSelection=getSelection(filter.items,filter.type);switch(filter.propertyName){case"exteriorColor":propertyName="exterior";break;case"interiorColor":propertyName="interior"}oQuery[propertyName]=oSelection;null===oSelection&&delete oQuery[propertyName];break;case"list":oSelection=getSelection(filter.items,filter.type);oQuery[filter.propertyName]=oSelection;null===oSelection&&delete oQuery[filter.propertyName]}}propertyName="dealers";oSelection=getSelection(dealers,propertyName);oQuery[propertyName]=oSelection;null===oSelection&&delete oQuery[propertyName];$location.search(angular.extend($location.search(),oQuery))},updateFilterCriteria=function(propertyName,filterCriteria){propertyName&&(filters[propertyName].count+=filterCriteria.selected?1:-1);applyFilter()},updateDealer=function(dealer){matches.dealers+=dealer.selected?1:-1;matches.dealers<0&&(matches.dealers=0);applyFilter()},updateRange=function(low,high){applyFilter()},updateMonthlyPayment=function(){},getLabel=function(propertyName){return filters[propertyName]?filters[propertyName].name:""},getName=function(propertyName,id){return filters[propertyName]?filters[propertyName].items[id].name:""},sortVehicles=function(){var aLevels=options.sortBy.type.split(","),aPrimary=aLevels[0].split("|"),aSecondary=aLevels[1].split("|");options.sortBy.primary.field=aPrimary[0];options.sortBy.primary.order=aPrimary[1];options.sortBy.secondary.field=aSecondary[0];options.sortBy.secondary.order=aSecondary[1];vehicles.sort(sortPrimary);vehicles.sort(sortSecondLevel)},sortPrimary=function(a,b){return"+"===options.sortBy.primary.order?a[options.sortBy.primary.field]-b[options.sortBy.primary.field]:b[options.sortBy.primary.field]-a[options.sortBy.primary.field]},sortSecondary=function(a,b){return"+"===options.sortBy.secondary.order?a[options.sortBy.secondary.field]-b[options.sortBy.secondary.field]:b[options.sortBy.secondary.field]-a[options.sortBy.secondary.field]},sortSecondLevel=function(a,b){return a[options.sortBy.primary.field]===b[options.sortBy.primary.field]?sortSecondary(a,b):sortPrimary(a,b)},sortByDistance=function(a,b){return"+"===options.distanceOrderBy.order?a[options.distanceOrderBy.field]-b[options.distanceOrderBy.field]:b[options.distanceOrderBy.field]-a[options.distanceOrderBy.field]},sortNear=function(a,b){return a[options.nearOrderBy.field]===b[options.nearOrderBy.field]?sortSecondLevel(a,b):"+"===options.nearOrderBy.order?a[options.nearOrderBy.field]-b[options.nearOrderBy.field]:b[options.nearOrderBy.field]-a[options.nearOrderBy.field]},getColor=function(propertyName,id){var color=filters[propertyName].items[id],oNewBkg={backgroundColor:"#FFF"};color.baseHexValue&&""!==color.baseHexValue?oNewBkg.backgroundColor="#"+color.baseHexValue:color.highHexValue&&""!==color.highHexValue&&(oNewBkg.backgroundColor="#"+color.highHexValue);return oNewBkg},getColorHex=function(propertyName,id){var color=filters[propertyName].items[id],oNewBkg="#FFF";color.baseHexValue&&""!==color.baseHexValue?oNewBkg="#"+color.baseHexValue:color.highHexValue&&""!==color.highHexValue&&(oNewBkg="#"+color.highHexValue);return oNewBkg},applyFilter=function(){var items=vehicles,j=0,key="",result=[];for(key in dealers){dealers[key].count=0;dealers[key].vehiclesNdx.splice(0);dealers[key].matchesNdx.splice(0)}updateQuerystring();var sValue="",filter=null,filterCount=0,matchCount=[],exactMatches=[],allNearMatches=[],resultsCount=0,bestDealerKey=null;for(j=0;j<items.length;j++){matchCount.push(0);if(0===matches.dealers||dealers[items[j].dealerCode].selected){dealers[items[j].dealerCode].vehiclesNdx.push(j);filterCount=0;for(key in filters){filter=filters[key];items[j][key].exact=!1;switch(filter.type){case"range":filter.low<=items[j][filter.propertyName]&&items[j][filter.propertyName]<=filter.high&&(matchCount[j]+=filter.weight);filterCount+=filter.weight;break;default:if(filter.count<=0);else{filterCount+=filter.weight;sValue="string"==typeof items[j][key]?items[j][key]:items[j][key].key;if(filter.items[sValue].selected){matchCount[j]+=filter.weight;items[j][key].exact=!0}}}}items[j].match=matchCount[j];if(matchCount[j]===filterCount){result.length<options.results.value&&result.push(items[j]);dealers[items[j].dealerCode].count++;dealers[items[j].dealerCode].matchesNdx.push(j);exactMatches.push(items[j]);resultsCount++}else matchCount[j]>0&&allNearMatches.push(items[j])}}matches.total=resultsCount+allNearMatches.length;matches.count=resultsCount;matches.result=result;matches.exact=exactMatches;matches.allNear=allNearMatches;allNearMatches.length>0&&allNearMatches.sort(sortNear);matches.near.splice(0);for(j=0;j<allNearMatches.length&&j<options.results.value-result.length;j++)matches.near.push(allNearMatches[j]);if(result.length>0)bestDealerKey=result[0].dealerCode;else if(matches.near.length>0)bestDealerKey=matches.near[0].dealerCode;else if(null===bestDealerKey)for(key in dealers)null===bestDealerKey?bestDealerKey=key:dealers[bestDealerKey].distFromUser>dealers[key].distFromUser&&(bestDealerKey=key);matches.bestDealer=bestDealerKey+"";messageService.publish("featureFilterUpdated",{});return result};return{filters:filters,matches:matches,vehicles:vehicles,prices:prices,monthly:monthly,dealers:dealers,options:options,initialize:initialize,updateFilter:updateFilterCriteria,updateRange:updateRange,updateDealer:updateDealer,updateMonthlyPayment:updateMonthlyPayment,getLabel:getLabel,getName:getName,getColor:getColor,getColorHex:getColorHex,sortVehicles:sortVehicles}}]);Array.prototype.hashtify=function(keyName){for(var obj={},j=0;j<this.length;j++)obj[this[j][keyName]]=this[j];return obj};angular.module("app").directive("dealerInventoryVehicles",["$log","$rootScope","$routeParams","featureFilterModel","dealerInventoryService","messageService","gmapModel","geoLocationService","zipCodeCookie","kiaEvents","$location","disclaimersModel","safeApply","localize",function($log,$rootScope,$routeParams,featureFilterModel,dealerInventoryService,messageService,gmapModel,geoLocationService,zipCodeCookie,kiaEvents,$location,disclaimersModel,safeApply,localize){return{restrict:"A",replace:!0,transclude:!0,templateUrl:window.staticURI+"/views/dealerInventory/dealerInventoryVehicles.html",link:function(scope,element,attrs){scope.contentURI=window.contentURI;scope.showVehicleSelector=!1;scope.validZipCode=!0;scope.data={error:!1};var checkZipCode=function(attrs){var available=!1;if(null===attrs.zipCode||void 0===attrs.zipCode){if(zipCodeCookie.get()){scope.options.zipCode=zipCodeCookie.get()+"";available=!0}}else{scope.options.zipCode=attrs.zipCode+"";available=!0}return available},transformSeriesName=function(name){return name.toLowerCase().split(" ").join("-")},success=function(data){if(!data||data.status&&"failed"===data.status.toLowerCase()){scope.$broadcast(kiaEvents.ZIPCODE.ERROR,data.result,"dealerInventoryZip");scope.showVehicleSelector=!1}else{messageService.publish("dealerInventorySuccess",{zipCode:scope.options.zipCode,results:data.dealerInventoryResult});checkZipCode($location.search())||zipCodeCookie.set(scope.options.zipCode)}},failure=function(data){scope.data.error=!0;scope.$emit(kiaEvents.LOADER.HIDE)};scope.update=function(){return scope.load()};scope.load=function(){setTimeout(function(){safeApply(scope,function(){scope.$emit(kiaEvents.LOADER.SHOW);scope.data.error=!1;return dealerInventoryService.get({zipCode:scope.options.zipCode,series:scope.options.vehicle.code,year:scope.options.vehicle.year,radius:featureFilterModel.options.radius},success,failure)})},0)};var findMeSuccess=function(zipCode){safeApply(scope,function(){scope.options.zipCode=zipCode;scope.$apply();scope.submitZipForm()})},findMeError=function(message){scope.$broadcast(kiaEvents.ZIPCODE.ERROR,message,"dealerInventoryZip")};scope.findMe=function(){geoLocationService.findMe(findMeSuccess,findMeError)};scope.onZipCodeSubmit=function(){null!==scope.options.zipCode&&""!==scope.options.zipCode&&scope.load()};scope.submitZipForm=function(id){scope.$broadcast(kiaEvents.ZIPCODE.SUBMIT,"dealerInventoryZip")};scope.$on(kiaEvents.ZIPCODE.NOT_VALID,function(event,message,id){scope.validZipCode=!1;scope.initialErrorMessage=message;$(element).find(".zipcode").addClass("error")});scope.$on(kiaEvents.ZIPCODE.VALID,function(event,id){scope.validZipCode=!0;$(element).find(".zipcode").removeClass("error")});scope.$on(kiaEvents.ZIPCODE.ERROR,function(event,message,id){scope.validZipCode=!1;$(element).find(".zipcode").addClass("error")});$rootScope.$on("vehicleSelector.selected",function(evt,args){scope.options.vehicle.code=transformSeriesName(args.vehicle.series);scope.options.vehicle.year=args.vehicle.year;scope.zipCodeAvailable?scope.onZipCodeSubmit():scope.showVehicleSelector=!1});$rootScope.$on("vehicleSelector.display",function(evt,args){scope.showVehicleSelector=!0});scope.zipCodeAvailable=checkZipCode($location.search());if($routeParams.series&&$routeParams.year){scope.options.vehicle.code=transformSeriesName($routeParams.series);scope.options.vehicle.year=$routeParams.year;scope.zipCodeAvailable&&scope.onZipCodeSubmit()}$rootScope.$broadcast("kia.nav.update.selected",$(".header-primary-nav").find("li[link-title='Dealer Inventory'], li[link-title='Inventario']").attr("submenu-id"))}}}]);angular.module("app").factory("allVehiclesService",["$log","$http","messageService",function($log,$http,messageService){var url,get;url=window.baseURI+"/modules/vehicle/allseries";get=function(success,failure){return $http.get(url).success(function(data,getResponseHeaders){messageService.publish("allVehiclesRequest",{source:"allVehiclesService"});return angular.isFunction(success)?success(data):void 0}).error(failure)};return{get:get}}]);angular.module("app").directive("dealerInventoryAllVehicles",["$log","$compile","$location","allVehiclesService","safeApply",function($log,$compile,$location,allVehiclesService,safeApply){return{restrict:"A",controller:function($scope,$element,$attrs,$transclude){},link:function($scope,element,attributes){allVehiclesService.get(function(data){$scope.allVehiclesData=data;element.html($scope.allVehiclesData);$compile(element.contents())($scope);var searchAttr=$location.search(),sName=searchAttr.series,sYear=searchAttr.year;if(void 0!==sName&&void 0!==sYear){sName=sName.replace(/(\w)(\w*)/g,function(g0,g1,g2){return g1.toUpperCase()+g2.toLowerCase()});var obj=element.find(".vehicle[title='"+sYear+" "+sName+"']");if(obj.length>0){var sId=obj.attr("id");$scope.onVehicle(sId,sYear,sName)}}},function(data){})}}}]);angular.module("app").directive("currencyFormat",["$filter",function($filter){return{restrict:"A",scope:{currencyFormat:"@"},link:function(scope,element,attributes){var formattedCurrency=$filter("noFractionCurrency")(scope.currencyFormat);element.html(formattedCurrency)}}}]);angular.module("app").filter("groupFilter",function(){return function(input,group,discardMode){for(var out=[],i=0;i<input.length;i++)input[i].group===group?discardMode||out.push(input[i]):discardMode&&out.push(input[i]);return out}});angular.module("app").filter("rangeFilter",function(featureFilterModel){return function(input){for(var out=input.slice(0),j=0;j<featureFilterModel.filtersType.range.length;j++)for(var filter=featureFilterModel.filter[featureFilterModel.filtersType.range[j]],i=out.length-1;i>=0;i--)out[i]&&(filter.data[0].value<=out[i][filter.propertyName]&&out[i][filter.propertyName]<=filter.data[1].value||out.splice(j,1));return out}});angular.module("app").directive("collapsible",["$log","kiaEvents","safeApply",function($log,kiaEvents,safeApply){return{restrict:"AC",priority:99,controller:function($scope){$scope.collapsed=!0},link:function(scope,element,attrs){var disabled=attrs.disabled===!0||"true"===attrs.disabled,collapsed=!(attrs.expanded===!0||"true"===attrs.expanded);scope.collapsed=collapsed;collapsed&&$(element).addClass("collapsed");disabled&&$(element).addClass("disabled");var onResizeCollapsable=function(){collapsed?$(element).children().not(":first").each(function(){var that=this;$(this).stop().animate({height:0},500,function(){collapsed&&$(that).height(0)})}):$(element).children().not(":first").each(function(){var that=this,currentH=$(this).height();$(this).height("auto");var h=$(this).height();currentH===h&&(currentH=0);$(this).height(currentH);$(this).stop().animate({height:h},500,function(){collapsed||$(that).height("auto")})})},onCollapse=function(status){if(disabled)return!1;collapsed=status;safeApply(scope,function(){scope.collapsed=collapsed});collapsed?$(element).addClass("collapsed"):$(element).removeClass("collapsed");(attrs.animated===!0||"true"===attrs.animated)&&onResizeCollapsable()};scope.onCollapse=onCollapse;$(element).children().first().on("click",function(){onCollapse(!collapsed);return!1});if($(element).hasClass("collapse-on-click")){$(element).find("li").each(function(i,e){$(this).on("click",function(){onCollapse(!0)})});var $navElems=$(element).find("nav");$navElems.each(function(i,e){var $navElement=$(e);$navElement.css("height","auto");var $navHeight=$navElement.height();$navElement.css("transition","all 1s ease").attr("nav-height",$navHeight);$navHeight=scope.collapsed?0:$navElement.attr("nav-height")})}scope.$on(kiaEvents.COLLAPSIBLE.CLOSE,function(e){onCollapse(!0)});scope.$on(kiaEvents.COLLAPSIBLE.OPEN,function(e){onCollapse(!1)})}}}]);angular.module("app").filter("truncate",function(){return function(text,length){return null===length||void 0===length||0>length?text:text.substr(0,length)}});angular.module("app").directive("tooltip",function(){return{restrict:"A",link:function(scope,element,attrs){scope.touchTime=0;scope.touchTimer=null;$(element).attr("title",attrs.tooltip).tooltip({placement:"bottom",disabled:!0});if($.support.touch){$(element).tooltip("close");$(element).bind("touchstart",function(event){var oDate=new Date;scope.touchTime=oDate.getTime();scope.touchTimer=setTimeout(function(){if(scope.touchTimer){clearTimeout(scope.touchTimer);scope.touchTimer=null}$(".colorBlock .box").tooltip("close");$(element).tooltip("open")},500)});$(element).bind("touchend",function(event){if(scope.touchTimer){clearTimeout(scope.touchTimer);scope.touchTimer=null}scope.touchTime=0})}else $(element).tooltip("enable")}}});angular.module("app").directive("colorBlock",["safeApply",function(safeApply){return{restrict:"A",replace:!0,scope:{key:"@",label:"@",name:"@",color:"@",property:"@",selected:"=",showText:"@",fabric:"@",click:"&"},templateUrl:window.staticURI+"/views/directives/colorBlock.html",controller:function($scope){$scope.onColorBlock=function(){$scope.click&&$scope.click()}},link:function(scope,element,attrs){scope.initializeColor=function(){scope.colorStyle={backgroundColor:scope.color};scope.colorImage="";void 0===scope.fabric||"default"===scope.fabric?scope.colorImage=window.staticURI+"/img/fabrics/default.png":""!==scope.fabric&&"none"!==scope.fabric&&(scope.colorImage=scope.fabric)};scope.initializeColor();scope.$watch("color",function(){scope.initializeColor()})}}}]);angular.module("app").directive("selectList",["featureFilterModel",function(featureFilterModel){return{restrict:"A",scope:{list:"=",value:"="},replace:!0,transclude:!0,templateUrl:window.staticURI+"/views/directives/selectList.html",controller:function($scope){$scope.index=0;$scope.hash={};for(var i=0;i<$scope.list.length;i++){void 0===$scope.list[i].label&&($scope.list[i].label=$scope.list[i].text);$scope.hash[$scope.list[i].value]=i;$scope.list[i].value===$scope.value&&($scope.index=i)}},link:function(scope,element,attrs){scope.onSelect=function(value,$event){scope.index=scope.hash[value];scope.value=value;attrs.manual||$(".collapsible",element).children().first().click();$event&&$event.stopPropagation()}}}}]);angular.module("app").directive("mobileHandler",["kiaEvents",function(kiaEvents){return{restrict:"A",controller:function(){},link:function(scope,element,attrs){var toggleMenu=function(){var bOpen=!$(attrs.mobileMenu).hasClass("open");$("body").toggleClass("menu-open");$(attrs.mobileMenu).toggleClass("open");scope.$emit(kiaEvents.DI.MOBILE_HANDLER);if(bOpen){$("body").find(".main-wrapper").append($("<div class='hit-area'></div>"));$(attrs.mobileMenu).find(".hit-area").on("click",toggleMenu);$("body").find(".main-wrapper > .hit-area").on("click",toggleMenu);$(attrs.mobileMenu).find(".close-handler").on("click",toggleMenu)}else{$("body").find(".main-wrapper > .hit-area").off("click",toggleMenu);$("body").find(".main-wrapper > .hit-area").remove();$(attrs.mobileMenu).find(".hit-area").off("click",toggleMenu);$(attrs.mobileMenu).find(".close-handler").off("click",toggleMenu)}return!0};$(element).on("click",toggleMenu);scope.$on(kiaEvents.DI.MOBILE_CLOSE,function(e){toggleMenu()})}}}]);var screenSize={mobile:320,smart:480,tablet:680,medium:800,large:1100};angular.module("app").directive("screenSize",["$log","safeApply",function($log,safeApply){return{restrict:"A",replace:!1,controller:function($scope){$scope.screen={mobile:!1,smart:!1,tablet:!1,medium:!1,large:!1};$scope.screenSize=screenSize},link:function(scope,element,attrs){scope.onResize=function(bForce){var w=window.innerWidth||document.documentElement.clientWidth,h=window.innerHeight||document.documentElement.clientHeight;scope.height=h;if(scope.width!==w){scope.width=w;scope.detectDeviceByScreenWidth()}};scope.detectDeviceByScreenWidth=function(){scope.screen={mobile:!1,smart:!1,tablet:!1,medium:!1,large:!1};scope.width<=screenSize.mobile?scope.screen.mobile=!0:scope.width<=screenSize.smart?scope.screen.smart=!0:scope.width<=screenSize.tablet?scope.screen.tablet=!0:scope.width<=screenSize.medium?scope.screen.medium=!0:scope.width<=screenSize.large&&(scope.screen.large=!0)};angular.element(window).bind("resize",function(){safeApply(scope,function(){scope.onResize()})});scope.onResize()}}}]);angular.module("app").directive("wrapField",["safeApply","kiaEvents",function(safeApply,kiaEvents){return{restrict:"A",replace:!0,transclude:!0,scope:{prefix:"@",sufix:"@",value:"=",type:"@"},templateUrl:window.staticURI+"/views/directives/wrapField.html",controller:function($scope){$scope.edit=!1},link:function(scope,element,attrs){var field=$(element).find("input"),label=$(element).find(".wrapField-label");label.on("click",function(){field.focus()});scope.checkField=function(){$(element).removeClass("wrapField-error");$(field).hasClass("error")||""===$(field).val()?$(element).addClass("wrapField-error"):scope.edit=!1};field.on("blur",function(){safeApply(scope,function(){scope.checkField()})});field.on("focus",function(){safeApply(scope,function(){scope.edit=!0;("0"===scope.value||0===scope.value)&&(scope.value="")})});scope.resetField=function(sField){var objs=$(element);sField&&(objs=$(element).find("input#"+sField));if(objs&&objs.length>0){objs.removeClass("wrapField-error");scope.edit=!1}};scope.$on(kiaEvents.GLOBAL.WRAPFIELD_RESET,function(e,args){$(element);args?scope.resetField(args.field):scope.resetField()});scope.onEdit=function(){scope.edit=!0}}}}]);angular.module("app").directive("autoMin",["kiaEvents","safeApply",function(kiaEvents,safeApply){return{require:"ngModel",link:function(scope,elm,attrs,ctrl){$(elm).on("blur",function(event){var sField=this.name;safeApply(scope,function(){scope.$emit(kiaEvents.GLOBAL.WRAPFIELD_BLUR,{field:sField})})})}}}]);!function($){function simulateMouseEvent(event,simulatedType){if(!(event.originalEvent.touches.length>1)){event.preventDefault();var touch=event.originalEvent.changedTouches[0],simulatedEvent=document.createEvent("MouseEvents");simulatedEvent.initMouseEvent(simulatedType,!0,!0,window,1,touch.screenX,touch.screenY,touch.clientX,touch.clientY,!1,!1,!1,!1,0,null);event.target.dispatchEvent(simulatedEvent)}}$.support.touch="ontouchend"in document;if($.support.touch){var touchHandled,mouseProto=$.ui.mouse.prototype,_mouseInit=mouseProto._mouseInit;mouseProto._touchStart=function(event){var self=this;if(!touchHandled&&self._mouseCapture(event.originalEvent.changedTouches[0])){touchHandled=!0;self._touchMoved=!1;simulateMouseEvent(event,"mouseover");simulateMouseEvent(event,"mousemove");simulateMouseEvent(event,"mousedown")}};mouseProto._touchMove=function(event){if(touchHandled){this._touchMoved=!0;simulateMouseEvent(event,"mousemove")}};mouseProto._touchEnd=function(event){if(touchHandled){simulateMouseEvent(event,"mouseup");simulateMouseEvent(event,"mouseout");this._touchMoved||simulateMouseEvent(event,"click");touchHandled=!1}};mouseProto._mouseInit=function(){var self=this;self.element.bind("touchstart",$.proxy(self,"_touchStart")).bind("touchmove",$.proxy(self,"_touchMove")).bind("touchend",$.proxy(self,"_touchEnd")).bind("MSPointerDown",$.proxy(self,"_touchStart")).bind("MSPointerMove",$.proxy(self,"_touchMove")).bind("MSPointerUp",$.proxy(self,"_touchEnd"));_mouseInit.call(self)}}}(jQuery);!function($,h,c){function g(){i=h[k](function(){a.each(function(){var n=$(this),m=n.width(),l=n.height(),o=$.data(this,d);(m!==o.w||l!==o.h)&&n.trigger(j,[o.w=m,o.h=l])});g()},e[b])}var i,a=$([]),e=$.resize=$.extend($.resize,{}),k="setTimeout",j="resize",d=j+"-special-event",b="delay",f="throttleWindow";e[b]=250;e[f]=!0;$.event.special[j]={setup:function(){if(!e[f]&&this[k])return!1;var l=$(this);a=a.add(l);$.data(this,d,{w:l.width(),h:l.height()});1===a.length&&g()},teardown:function(){if(!e[f]&&this[k])return!1;var l=$(this);a=a.not(l);l.removeData(d);a.length||clearTimeout(i)},add:function(l){function m(s,o,p){var q=$(this),r=$.data(this,d);r.w=o!==c?o:q.width();r.h=p!==c?p:q.height();n.apply(this,arguments)}if(!e[f]&&this[k])return!1;var n;if($.isFunction(l)){n=l;return m}n=l.handler;l.handler=m}}}(jQuery,this);angular.module("app").directive("appTab",["$log",function($log){var link;link=function(scope,element,attrs,controller){return controller.addTab(scope)};return{link:link,replace:!0,require:"^appTabs",restrict:"EA",scope:{caption:"@"},templateUrl:window.staticURI+"/views/directives/tab.html",transclude:!0}}]);angular.module("app").directive("appTabs",["$log",function($log){var controller;controller=["$scope","$element","$rootScope",function($scope,$element,$rootScope){$scope.tabs=[];"undefined"==typeof $scope.imageTab&&($scope.imageTab=!1);$scope.select=function(tab,$evt){if(tab.selected===!0){("true"===$scope.tabsCollapsible||$scope.tabsCollapsible===!0)&&(tab.selected=!1);return!1}angular.forEach($scope.tabs,function(tab){return tab.selected=!1});tab.selected=!0;$scope.$emit("tabChanged",$evt);return!1};return this.addTab=function(tab,tabId){0===$scope.tabs.length&&"true"!==$scope.tabsCollapsible&&$scope.tabsCollapsible!==!0&&$scope.select(tab);$scope.tabs.push(tab)}}];return{controller:controller,replace:!0,restrict:"EA",scope:{tabsCollapsible:"@",imageTab:"@"},templateUrl:window.staticURI+"/views/directives/tabs.html",transclude:!0}}]);angular.module("app").directive("filterColor",["kiaEvents",function(kiaEvents){return{restrict:"A",replace:!0,priority:99,scope:{filter:"="},templateUrl:window.staticURI+"/views/dealerInventory/filters/color.html",controller:function($scope){$scope.filter.propertyName.toLowerCase().indexOf("exterior")>=0?$scope.filter.fabric="default":$scope.filter.fabric="none";$scope.$on(kiaEvents.GLOBAL.RESET,function(){$scope.filter.count=0})},link:function(scope,element,attrs){}}}]);angular.module("app").directive("filterColorItem",["featureFilterModel","kiaEvents",function(featureFilterModel,kiaEvents){return{restrict:"A",replace:!0,scope:{filter:"=",item:"="},templateUrl:window.staticURI+"/views/dealerInventory/filters/colorItem.html",controller:function($scope){void 0===$scope.item.selected&&($scope.item.selected=!1);$scope.item.active=!0;$scope.getColor=function(){var oNewBkg={backgroundColor:"#FFF"};$scope.item.baseHexValue&&""!==$scope.item.baseHexValue?oNewBkg.backgroundColor="#"+$scope.item.baseHexValue:$scope.item.highHexValue&&""!==$scope.item.highHexValue&&(oNewBkg.backgroundColor="#"+$scope.item.highHexValue);return oNewBkg};$scope.$on(kiaEvents.GLOBAL.RESET,function(){$scope.item.selected=!1});$scope.colorStyle=$scope.getColor()},link:function(scope,element,attrs){$(element).height(Math.round($(element).parent().width()/4));scope.onChange=function(){scope.item.selected=!scope.item.selected;featureFilterModel.updateFilter(scope.filter.propertyName,scope.item)}}}}]);angular.module("app").directive("filterList",["kiaEvents",function(kiaEvents){return{restrict:"A",replace:!0,priority:99,scope:{filter:"="},templateUrl:window.staticURI+"/views/dealerInventory/filters/list.html",controller:function($scope){$scope.$on(kiaEvents.GLOBAL.RESET,function(){$scope.filter.count=0})},link:function(scope,element,attrs){}}}]);angular.module("app").directive("filterListItem",["featureFilterModel","kiaEvents",function(featureFilterModel,kiaEvents){return{restrict:"A",replace:!0,scope:{filter:"=",item:"="},templateUrl:window.staticURI+"/views/dealerInventory/filters/listItem.html",controller:function($scope){void 0===$scope.item.selected&&($scope.item.selected=!1);$scope.item.active=!0},link:function(scope,element,attrs){scope.onChange=function(){scope.item.selected=!scope.item.selected;featureFilterModel.updateFilter(scope.filter.propertyName,scope.item)};scope.$on(kiaEvents.GLOBAL.RESET,function(){scope.item.selected=!1;$(element).find(".checked").removeClass("checked")})}}}]);angular.module("app").directive("filterMonthlyPayment",["featureFilterModel","kiaEvents","safeApply",function(featureFilterModel,kiaEvents,safeApply){return{restrict:"A",replace:!0,priority:99,scope:{},controller:function($scope){$scope.item={selected:!1};$scope.monthly=jQuery.extend(!0,{},featureFilterModel.monthly);$scope.data={edit:!1}},templateUrl:window.staticURI+"/views/dealerInventory/filters/monthlyPayment.html",link:function(scope,element,attrs){scope.onChange=function(){scope.monthly.selected=!scope.monthly.selected;featureFilterModel.monthly.selected=!featureFilterModel.monthly.selected};scope.$on(kiaEvents.GLOBAL.CALCULATE_PAYMENT,function(e){featureFilterModel.updateMonthlyPayment();element.parents(".dealerInventoryFilter.open").length>0});scope.$on(kiaEvents.GLOBAL.CLOSE_CALCULATOR,function(e){scope.$emit(kiaEvents.COLLAPSIBLE.CLOSE)})}}}]);angular.module("app").directive("filterRange",["featureFilterModel","kiaEvents","safeApply","$rootScope","$log","timeoutService",function(featureFilterModel,kiaEvents,safeApply,$rootScope,$log,timeoutService){return{restrict:"A",replace:!0,priority:99,scope:{filter:"="},templateUrl:window.staticURI+"/views/dealerInventory/filters/range.html",controller:function($scope){$scope.highValue=$scope.filter.high+0;$scope.lowValue=$scope.filter.low+0;$scope.jqSliderObject=null;$scope.item={selected:!0,active:!0};$scope.sliderOptions={range:!0,min:$scope.filter.min,max:$scope.filter.max,values:[$scope.lowValue,$scope.highValue],slide:function(event,ui){safeApply($scope,function(){$scope.jqSliderObject=event.target;$scope.slideChange(ui.values[0],ui.values[1])})},stop:function(event,ui){safeApply($scope,function(){$scope.jqSliderObject=event.target;$scope.slideStop(ui.values[0],ui.values[1])})}}},link:function(scope,element,attrs){var bIsIe8=$("html").hasClass("lt-ie9");scope.slideChange=function(low,high){bIsIe8&&element.find("h3 span").hide();scope.lowValue!==low?scope.lowValue=low:scope.highValue=high;bIsIe8&&element.find("h3 span").show()};scope.slideStop=function(low,high){bIsIe8&&element.find("h3 span").hide();if(scope.filter.low!==low){scope.lowValue=low;scope.filter.low=low}else{scope.highValue=high;scope.filter.high=high}featureFilterModel.updateRange(low,high);bIsIe8&&element.find("h3 span").show()};setTimeout(function(){element.find(".ui-slider-handle").first().hide();element.find(".ui-slider-handle").first().addClass("first-child");element.find(".ui-slider-handle").first().show();
},500);scope.$on(kiaEvents.GLOBAL.RESET,function(){scope.filter.low!==scope.filter.min&&(scope.filter.low=scope.filter.min+0);scope.filter.high!==scope.filter.max&&(scope.filter.high=scope.filter.max+0);scope.highValue=scope.filter.high+0;scope.lowValue=scope.filter.low+0;element.find(".jq-slider").slider("values",[scope.lowValue,scope.highValue])})}}}]);angular.module("ui.config",["ui"]).value("ui.config",{jq:{slider:{placement:"center"}}});angular.module("app").directive("dealerItem",["messageService","kiaEvents",function(messageService,kiaEvents){return{restrict:"A",replace:!0,scope:{dealer:"=",disableLink:"@"},templateUrl:window.staticURI+"/views/directives/dealerItem.html",controller:function($scope){},link:function(scope,element,attrs){var isMobile=function(){var sUserAgent=""+(navigator.userAgent||navigator.vendor||window.opera);sUserAgent=sUserAgent.toLowerCase();return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i.test(sUserAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(sUserAgent.substr(0,4))?!0:!1};if(scope.dealer.phone){scope.dealer.phoneFull="+1-"+scope.dealer.phone;scope.dealer.phoneFull=scope.dealer.phoneFull.replace(/-/g,"")}isMobile()&&element.find(".class a").attr("target","_blank");scope.onChange=function(){scope.dealer.selected=!scope.dealer.selected;if(scope.dealer.selected){element.find(".checker > span").addClass("checked");scope.$emit(kiaEvents.ANALYTICS.GLOBAL_DEALER_SELECTED,{dealer:scope.dealer.code})}else element.find(".checker > span").removeClass("checked");messageService.publish(kiaEvents.GLOBAL.DEALER_UPDATE,{dealer:scope.dealer})};scope.onDealerChangeMessage=function(event,data){if(scope.dealer.code===data.code){scope.dealer.selected=!0;if(scope.dealer.selected){element.find(".checker > span").addClass("checked");scope.$emit(kiaEvents.ANALYTICS.GLOBAL_DEALER_SELECTED,{dealer:scope.dealer.code})}else element.find(".checker > span").removeClass("checked");messageService.publish(kiaEvents.GLOBAL.DEALER_UPDATE,{dealer:scope.dealer})}};messageService.subscribe(kiaEvents.GLOBAL.DEALER_SELECTED,scope.onDealerChangeMessage);scope.$on(kiaEvents.GLOBAL.RESET,function(){scope.dealer.selected=!1;messageService.publish(kiaEvents.GLOBAL.DEALER_UPDATE,{dealer:scope.dealer});element.find(".checker > span").removeClass("checked")})}}}]);angular.module("app").directive("dealerInventoryResult",["$log","$window","$rootScope","featureFilterModel","dealerInventoryService","contactAtOnceService","messageService","gmapModel","kiaEvents","localize","geoLocationService","safeApply",function($log,$window,$rootScope,featureFilterModel,dealerInventoryService,contactAtOnceService,messageService,gmapModel,kiaEvents,localize,geoLocationService,safeApply){var initMapView,currentLayout=null;return{restrict:"EA",replace:!0,transclude:!0,scope:{result:"=",prices:"=",options:"=",years:"="},templateUrl:window.staticURI+"/views/dealerInventory/dealerInventoryResult.html",controller:function($scope){$scope.mobile=!1;$scope.tablet=!1;$scope.currentDealerObj={dealer:null,isBest:!1};$scope.modelNameSecondPart="";var secondName=$scope.options.vehicle.code.split("-")[1];secondName&&("ev"===secondName.toLowerCase()?$scope.modelNameSecondPart=secondName.toUpperCase():$scope.modelNameSecondPart=secondName);$scope.emptyObj=function(obj){for(var key in obj)delete obj[key]};$scope.createsDealersMapList=function(bUpdate){$scope.emptyObj($scope.dealersMap);for(var key in $scope.dealers){$scope.dealersMap[key]=$.extend({},$scope.dealers[key]);$scope.dealersMap[key].count=$scope.dealers[key].count;$scope.dealersMap[key].vehicleCount=$scope.dealers[key].vehicleCount;$scope.dealersMap[key].vehiclesNdx=$scope.dealers[key].vehiclesNdx.slice(0);$scope.dealersMap[key].matchesNdx=$scope.dealers[key].matchesNdx.slice(0)}};$scope.initializeModel=function(){featureFilterModel.initialize($scope.result);$scope.dealers=featureFilterModel.dealers;$scope.options=featureFilterModel.options;$scope.matches=featureFilterModel.matches;$scope.vehicles=featureFilterModel.vehicles};$scope.dealersMap={};$scope.mapMarkers=[];$scope.mapInitialized=!1;$scope.initializeModel();$scope.orderBy=[{value:"distFromUser|+,msrp|+",label:localize.getLocalizedString("label.dealerInventory.sort")+" "+localize.getLocalizedString("label.dealerInventory.distance"),text:localize.getLocalizedString("label.dealerInventory.distance")},{value:"msrp|+,distFromUser|+",label:localize.getLocalizedString("label.dealerInventory.sort")+" "+localize.getLocalizedString("label.dealerInventory.lowestPrice"),text:localize.getLocalizedString("label.dealerInventory.lowestPrice")},{value:"msrp|-,distFromUser|+",label:localize.getLocalizedString("label.dealerInventory.sort")+" "+localize.getLocalizedString("label.dealerInventory.highestPrice"),text:localize.getLocalizedString("label.dealerInventory.highestPrice")}];$scope.$watch("options.sortBy.type",function(){featureFilterModel.sortVehicles();featureFilterModel.updateFilter()});$scope.data={zipCode:{value:$scope.options.zipCode,valid:!0,error:{show:!0,message:"Invalid Zip"}},radius:$scope.options.radius};$scope.lastRadius=$scope.options.radius;$scope.lastZipcode=$scope.options.zipCode;var mapDOMready,mapRenderReady,infoboxOptions={pixelOffset:new google.maps.Size(-80,32),infoBoxClearance:new google.maps.Size(1,1),closeBoxMargin:"",closeBoxURL:""};gmapModel.setInfoboxOptions(infoboxOptions);$scope.mapOptions=gmapModel.getMapOptions();$scope.infoboxOptions=gmapModel.getInfoboxOptions();mapRenderReady=messageService.subscribe("dealerInventoryMapView",function(){$scope.$$phase||(mapDOMready=$scope.$watch("inventoryMap",initMapView))});$scope.tryUpdateMap=function(){if($scope.mapInitialized){if(gmapModel.getMap()){gmapModel.drawMapMarks($scope.dealersMap,$scope.inventoryMap);gmapModel.setMapInteractions(!$scope.options.listViewMode||!$scope.mobile);setTimeout(function(){gmapModel.redrawMap();gmapModel.offset();gmapModel.centerMap();var dealer=null,isBest=!1;if($scope.currentDealerObj.dealer){dealer=$scope.currentDealerObj.dealer;isBest=$scope.currentDealerObj.isBest}else{dealer=$scope.dealersMap[featureFilterModel.matches.bestDealer];isBest=dealer.matchesNdx.length>0}dealer&&$scope.$broadcast("showDetailEvent",dealer,isBest)},100)}}else messageService.publish("dealerInventoryMapView",{})};initMapView=function(instance){$scope.mapInitialized=!0;$scope.createsDealersMapList();gmapModel.initMap(instance,$scope.myInfoWindow);$scope.openMarkerInfo=gmapModel.openMarkerInfo;$scope.mapMarkers=gmapModel.mapMarkers;gmapModel.getPosFromZipCode($scope.options.zipCode,function(center,centerAddress){gmapModel.setCenterAddress(centerAddress);gmapModel.drawMapMarks($scope.dealersMap,$scope.inventoryMap);gmapModel.setStreetView(!1);$scope.tryUpdateMap()},function(){});mapDOMready();mapRenderReady()};$scope.$on("showDetailEvent",function(event,dealer,isBest){setCurrentDealer(dealer,isBest)});var getCarImage=function(code){return featureFilterModel.vehicles[code]?featureFilterModel.vehicles[code].vehicleImageMap:""},setCurrentDealer=function(dealer,isBest){try{var carImage=getCarImage(isBest?dealer.matchesNdx[0]:dealer.vehiclesNdx[0]);$scope.currentDealerObj.dealer=dealer;$scope.currentDealerObj.isBest=isBest;$scope.currentDealer={code:dealer.code,vehicleCount:dealer.vehicleCount,matches:dealer.count,name:dealer.name,distance:dealer.distFromUser,image:window.contentURI+carImage};gmapModel.openMarkerInfo(dealer)}catch(err){}};$scope.setCurrentDealer=setCurrentDealer;$scope.getCarImage=getCarImage;var success=function(data){if(!data||data.status&&"failed"===data.status.toLowerCase()){$scope.data.error=!0;$scope.$broadcast(kiaEvents.ZIPCODE.ERROR,data.result,"all")}else{$scope.data.error=!1;$scope.editMode(!1);$scope.lastRadius=data.radius;messageService.publish("dealerInventorySuccess",{zipCode:$scope.data.zipCode.value,radius:data.radius,results:data.dealerInventoryResult})}};$scope.update=function(){$scope.load()};var failure=function(data){$scope.data.error=!0;$scope.$emit(kiaEvents.LOADER.HIDE)},findMe=function(){$scope.$emit(kiaEvents.LOADER.SHOW);gmapModel.findMe(findMeSuccess,findMeError)},findMeSuccess=function(zipCode){$scope.data.zipCode.value=zipCode;$scope.validate();$scope.$emit(kiaEvents.LOADER.HIDE);$scope.$$phase||$scope.$digest()},findMeError=function(message){($scope.data.error||""!==$scope.data.zipCode.value&&void 0!==$scope.data.zipCode.value)&&($scope.data.error=!0);$scope.$emit(kiaEvents.LOADER.HIDE);$log.error("Location detection failure",message);$scope.$broadcast(kiaEvents.ZIPCODE.ERROR,message,"all")};$scope.findMe=findMe;$scope.load=function(){var bUpdate=!0;if($scope.radiusForm.radiusField.$error.min){$scope.data.radius=10;$scope.radiusForm.radiusField.$error.min=!1;$scope.$broadcast(kiaEvents.GLOBAL.WRAPFIELD_RESET)}else if($scope.radiusForm.radiusField.$error.max){$scope.data.radius=1e3;$scope.radiusForm.radiusField.$error.max=!1;$scope.$broadcast(kiaEvents.GLOBAL.WRAPFIELD_RESET)}if((isNaN($scope.data.radius)||void 0===$scope.data.radius||""===$scope.data.radius)&&void 0!==$scope.lastRadius){$scope.data.radius=$scope.lastRadius;bUpdate=!1;$scope.$broadcast(kiaEvents.GLOBAL.WRAPFIELD_RESET)}if((void 0===$scope.data.zipCode.value||""===$scope.data.zipCode.value)&&void 0!==$scope.lastZipcode){$scope.data.zipCode.value=$scope.lastZipcode;bUpdate=!1}$scope.data.zipCode.value===$scope.lastZipcode&&$scope.data.radius===$scope.lastRadius&&(bUpdate=!1);if(bUpdate){$scope.lastRadius=$scope.data.radius;$scope.lastZipcode=$scope.data.zipCode.value;$scope.$emit(kiaEvents.LOADER.SHOW);return dealerInventoryService.get({zipCode:$scope.data.zipCode.value,series:$scope.options.vehicle.code,year:$scope.options.vehicle.year,radius:$scope.data.radius},success,failure)}$scope.editMode(!1)}},link:function(scope,element,attrs){require(["https://ebusiness.dealertrack.com/Suite/suite.js"],function(){$window.drs.init()});var isMobile=function(){var sUserAgent=""+(navigator.userAgent||navigator.vendor||window.opera);sUserAgent=sUserAgent.toLowerCase();return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i.test(sUserAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(sUserAgent.substr(0,4))?!0:!1},isAndroidBrowser=function(){var nua=navigator.userAgent,is_android=nua.indexOf("Mozilla")>-1&&nua.indexOf("Android ")>-1&&nua.indexOf("Chrome")<0&&nua.indexOf("Firefox")<0;return is_android};isMobile()&&isAndroidBrowser()&&element.addClass("android-webkit");$(element).find("input.radiusField").focus(function(){var that=this;setTimeout(function(){$(that).select()},10);scope.editMode(!0)});$(element).bind("resize",function(){scope.updateHeightViews();scope.resizeMap()});$(element).find(".dealerInventoryFilter").resize(function(){scope.updateHeightViews()});$(element).find(".dealerInventoryView").resize(function(){scope.updateHeightViews()});scope.$on(kiaEvents.DI.MOBILE_HANDLER,function(){scope.updateHeightViews()});scope.$on(kiaEvents.GLOBAL.CALCULATE_PAYMENT,function(){scope.$broadcast(kiaEvents.DI.MOBILE_CLOSE)});scope.$on(kiaEvents.ZIPCODE.FOCUS,function(event){scope.editMode(!0,!0)});scope.$on(kiaEvents.ZIPCODE.EDITMODE_OFF,function(event){scope.editMode(!1,!0)});scope.editMode=function(bFlag,bEvent){safeApply(scope,function(){if(bFlag||scope.data.error){bEvent||scope.$broadcast(kiaEvents.ZIPCODE.EDITMODE_ON,"all");element.find(".header").addClass("editMode")}else{bEvent||scope.$broadcast(kiaEvents.ZIPCODE.EDITMODE_OFF,"all");element.find(".header").removeClass("editMode")}})};var updateMapDealers=function(){if($rootScope.$$phase)setTimeout(updateMapDealers,100);else{scope.createsDealersMapList(!0);scope.tryUpdateMap()}};messageService.subscribe("featureFilterUpdated",function(){scope.currentDealerObj.dealer=null;scope.currentDealerObj.isBest=!1;(!scope.options.listViewMode||scope.mobile)&&updateMapDealers()});scope.updateSize=function(){var w=$(element).find(".dealerInventoryView").width(),h=0;$(element).width()<=screenSize.smart&&w<screenSize.mobile&&(w=screenSize.mobile);h=w;var windowH=$(window).height();h>windowH&&(h=windowH);scope.mobile&&!scope.options.listViewMode&&(h=windowH);$(element).find(".dealerInventoryVehicleMap").height(0);$(element).find(".dealerInventoryVehicleMap").height(h);var newLayout=screenSize.large;$(element).width()<=screenSize.smart&&(newLayout=screenSize.smart);scope.mobile=newLayout<=screenSize.smart;return newLayout};scope.resizeMap=function(bForceMapUpdate){var newLayout=scope.updateSize();(newLayout!==currentLayout&&(!scope.options.listViewMode||scope.mobile)||bForceMapUpdate)&&updateMapDealers();currentLayout=newLayout};scope.updateHeightViews=function(){element.css({"min-height":""});if(element.find(".dealerInventoryFilter.open").length>0){var hFilter=element.find(".dealerInventoryFilter").height(),hView=element.find(".dealerInventoryView").height();hFilter>hView&&element.css({"min-height":hFilter+"px"})}};scope.onSwitchView=function($event){scope.options.listViewMode=!scope.options.listViewMode;(!scope.options.listViewMode||scope.mobile)&&scope.resizeMap(!0);$event&&$event.stopPropagation()};scope.updateSize();!scope.options.listViewMode||scope.mobile;scope.onChangeCar=function($event){messageService.publish("dealerInventoryVehicles",{});scope.options.orderBy.order="+";$event&&$event.stopPropagation()};scope.validate=function(bZipCodeError){var bUpdate=bZipCodeError!==!0;bUpdate&&scope.update()};scope.submitRadius=function(){scope.$broadcast(kiaEvents.ZIPCODE.SUBMIT,"all")};scope.submitZipcode=function(){scope.validate()};scope.$on(kiaEvents.ZIPCODE.NOT_VALID,function(event,message,id){scope.validate(!0)});scope.$on(kiaEvents.ZIPCODE.SUBMIT,function(event,id){scope.submitZipcode()});scope.dealerSelected=function($event){scope.options.listViewMode=!0;window.scrollTo(0,0);messageService.publish(kiaEvents.GLOBAL.DEALER_SELECTED,{code:scope.currentDealer.code});$event&&$event.stopPropagation()};messageService.subscribe(kiaEvents.GLOBAL.DEALER_UPDATE,function(event,data){featureFilterModel.updateDealer(data.dealer)});scope.$on(kiaEvents.GMAP.CLOSE_INFOBOX,function(event,dealer){});scope.$on(kiaEvents.GMAP.OPEN_INFOBOX,function(event,dealer){scope.setCurrentDealer(dealer,dealer.matchesNdx.length>0);scope.$emit(kiaEvents.LOADER.HIDE)});scope.$broadcast(kiaEvents.ZIPCODE.VALIDATE,"all")}}}]);angular.module("app").directive("dealerInventoryList",["$rootScope","featureFilterModel","messageService","contactAtOnceService","kiaEvents","$log",function($rootScope,featureFilterModel,messageService,contactAtOnceService,kiaEvents,$log){return{restrict:"EA",replace:!0,transclude:!0,scope:{vehicles:"=",options:"="},templateUrl:window.staticURI+"/views/dealerInventory/dealerInventoryList.html",controller:function($scope){$scope.data={};$scope.matches=featureFilterModel.matches;$scope.monthly=featureFilterModel.monthly;$scope.country=window.country;$scope.baseURI=window.baseURI;$scope.contentURI=window.contentURI;$scope.label={trim:featureFilterModel.getLabel("trim"),transmission:featureFilterModel.getLabel("transmission"),engineCylinder:featureFilterModel.getLabel("engineCylinder")}},link:function(scope,element,attrs){scope.loadMore=function(){scope.options.results.value+=scope.options.results.delta;featureFilterModel.updateFilter()};scope.onDetail=function(ndx,$event,year,model,vin,dealerCode,chatEnabled,paymentCalculator){if($event){$event.preventDefault();$event.stopPropagation()}var isNearMatch=$($event.currentTarget).parents(".nearMatches").length>0;messageService.publish("dealerInventoryDetail",{ndx:ndx,near:isNearMatch});chatEnabled&&"false"!==chatEnabled&&"NO"!==chatEnabled?("true"===chatEnabled||"YES"===chatEnabled)&&(chatEnabled=!0):chatEnabled=!1;if(chatEnabled){var urlParams={};urlParams.ProviderId=kiaEvents.GLOBAL.CONTACT_AT_ONCE_PROVIDER_ID;urlParams.MerchantId=dealerCode;urlParams.PlacementId=contactAtOnceService.getPlacementId("chat","inventory_details");urlParams.Year=year;urlParams.Make=kiaEvents.GLOBAL.CONTACT_AT_ONCE_MAKE;urlParams.Model=model;urlParams.VIN=vin;scope.$emit("Dealer-Chat-Confirmation",urlParams.MerchantId,urlParams.ProviderId,urlParams.PlacementId,urlParams.Year,urlParams.Make,urlParams.Model,urlParams.VIN)}$rootScope.$broadcast("Dealer Inventory Detail Payment Calculator",paymentCalculator);return!1}}}}]);angular.module("app").directive("dealerInventoryFilters",["$rootScope","$location","$routeParams","featureFilterModel","messageService","kiaEvents",function($rootScope,$location,$routeParams,featureFilterModel,messageService,kiaEvents){return{restrict:"EA",replace:!0,transclude:!0,scope:{result:"=",dealers:"=",years:"=",options:"="},templateUrl:window.staticURI+"/views/dealerInventory/dealerInventoryFilters.html",controller:function($scope){$scope.distanceOrderBy=featureFilterModel.options.distanceOrderBy},link:function(scope,element,attrs){scope.clearFilters=function($event){$event.stopPropagation();messageService.publish(kiaEvents.GLOBAL.RESET,{});featureFilterModel.updateFilter()};scope.onDealerChangeMessage=function(event,data){$(element).find(".dealers.collapsible.collapsed h3").click()};messageService.subscribe(kiaEvents.GLOBAL.DEALER_SELECTED,scope.onDealerChangeMessage);scope.changeYear=function(newYear){scope.$emit("dealerInventoryFilters.changeYear",{newYear:newYear})}}}}]);angular.module("app").directive("vehicleItem",["featureFilterModel",function(featureFilterModel){return{restrict:"EA",replace:!0,templateUrl:window.staticURI+"/views/dealerInventory/vehicleItem.html",controller:function($scope){_.each(featureFilterModel.vehicles,function(vehicle,key,list){_.find(featureFilterModel.dealers,function(dealer,key,list){dealer.code===vehicle.dealerCode&&(vehicle.dealerPhone=dealer.phone)})});$scope.exteriorColor={label:featureFilterModel.getLabel("exteriorColor"),name:featureFilterModel.getName("exteriorColor",$scope.vehicle.exteriorColor.key),color:featureFilterModel.getColorHex("exteriorColor",$scope.vehicle.exteriorColor.key)};$scope.interiorColor={label:featureFilterModel.getLabel("interiorColor"),name:featureFilterModel.getName("interiorColor",$scope.vehicle.interiorColor.key),color:featureFilterModel.getColorHex("interiorColor",$scope.vehicle.interiorColor.key),fabric:""}}}}]);angular.module("app").controller("dealerInventoryController",["$log","$scope","$rootScope","$location","$routeParams","dealerInventoryService","featureFilterModel","gmapModel","disclaimersModel","messageService","zipCodeCookie","safeApply","kiaEvents","localize","contactAtOnceService",function($log,$scope,$rootScope,$location,$routeParams,dealerInventoryService,featureFilterModel,gmapModel,disclaimersModel,messageService,zipCodeCookie,safeApply,kiaEvents,localize,contactAtOnceService){function updateYearsList(event,data){var series,vehicles=$scope.vehicles,len=vehicles&&vehicles.length;if(len){series=$routeParams.series?$routeParams.series.toUpperCase():data&&data.vehicle.series.toUpperCase();if(series){for(var vehicle,years=[],i=0;len>i;i++){vehicle=vehicles[i];vehicle.series.toUpperCase().split(" ").join("-")===series&&years.indexOf(vehicle.year)<0&&years.push(vehicle.year)}years.sort();$scope.years=years}}$(window).scrollTop(0)}function changeYear(event,data){$routeParams.year=data.newYear;$scope.options.vehicle.year=data.newYear;$scope.update()}var load,cao_widget_id="#iCoder_POP1141877261";$scope.options=featureFilterModel.options;$scope.matches=featureFilterModel.matches;$scope.initialized=!1;$scope.zipCodeAvailable=!1;$scope.views={vehicles:"dealerInventoryVehicles",results:"dealerInventoryResults",detail:"dealerInventoryDetail"};$scope.currentView=$scope.views.vehicles;$scope.options.zipCode="";$scope.selected={ndx:0,near:!1,back:!0,next:!0};$scope.baseURI=window.baseURI;$scope.paymentCalculator={hidePaymentCalculator:!0,dealerId:null,zipCode:null,vin:null,price:null,msrp:null,seriesName:null,seriesYear:null,picture:null,section:"inventory",driveTrain:null,trim:null};$rootScope.$on("Dealer Inventory Detail Payment Calculator",function(event,paymentCalculator){if(paymentCalculator&&null!==paymentCalculator.hidePaymentCalculator&&void 0!==paymentCalculator.hidePaymentCalculator){$scope.paymentCalculator.hidePaymentCalculator=paymentCalculator.hidePaymentCalculator;$scope.paymentCalculator.dealerId=paymentCalculator.dealerId;$scope.paymentCalculator.zipCode=paymentCalculator.zipCode;$scope.paymentCalculator.vin=paymentCalculator.vin;$scope.paymentCalculator.price=paymentCalculator.price;$scope.paymentCalculator.msrp=paymentCalculator.msrp;$scope.paymentCalculator.seriesName=paymentCalculator.seriesName;$scope.paymentCalculator.seriesYear=paymentCalculator.seriesYear;$scope.paymentCalculator.picture=paymentCalculator.picture;$scope.paymentCalculator.driveTrain=paymentCalculator.driveTrain;$scope.paymentCalculator.trim=paymentCalculator.trim}});$scope.$on("vehicleSelector.vehiclesLoaded",updateYearsList);$rootScope.$on("vehicleSelector.selected",updateYearsList);$scope.$on("dealerInventoryFilters.changeYear",changeYear);var trimIDLookup=function(trimName,data){var trimID="",trimData=null,filters=[];if(data.results[0].inventoryFilterResponse){filters=data.results[0].inventoryFilterResponse;for(var i=0,len=filters.length;len>i;i++)"trim"===filters[i].propertyName&&(trimData=filters[i].data);if(trimData)for(i=0,len=trimData.length;len>i;i++)(trimData[i].name.toLowerCase()===trimName.toLowerCase()||"sxl"===trimName.toLowerCase()&&"limited"===trimData[i].name.toLowerCase()||"limited"===trimName.toLowerCase()&&"sxl"===trimData[i].name.toLowerCase())&&(trimID=trimData[i].id.toString())}return trimID},onSuccessSearch=function(event,data){if($routeParams.trimName){$location.search("trim",trimIDLookup($routeParams.trimName,data));$location.search("trimName",null)}data.results.radius&&($scope.options.radius=data.results.radius);if(data.zipCode){$scope.options.zipCode=data.zipCode;$scope.zipCodeAvailable=!0;zipCodeCookie.set(data.zipCode)}data.results&&data.results.length>0&&data.results[0].seriesName&&($scope.options.vehicle.name=data.results[0].seriesName);$scope.currentView!==$scope.views.results&&($scope.options.listViewMode=!0);$scope.options.results.value=$scope.options.results.min;$scope.initialized=!0;$scope.results=data.results;$scope.onResultsView()};$scope.onResultsView=function(){$scope.currentView=$scope.views.results;$(cao_widget_id).css("max-height",0);safeApply($scope,function(){disclaimersModel.setGlobal("disclaimer-dealers-inventory-"+$scope.options.vehicle.code+"-"+$scope.options.vehicle.year)})};$scope.onVehiclesView=function(){$scope.$emit(kiaEvents.LOADER.SHOW);$scope.currentView=$scope.views.vehicles;$location.url("/dealers/inventory");$scope.showVehicleSelector=!0;$(cao_widget_id).css("max-height",0);safeApply($scope,function(){disclaimersModel.setGlobal("disclaimer-dealers-inventory")})};disclaimersModel.setGlobal("disclaimer-dealers-inventory");var onDetail=function(event,data){$scope.$emit(kiaEvents.LOADER.SHOW);$scope.selected.ndx=data.ndx;$scope.selected.near=data.near;$scope.currentView=$scope.views.detail;$scope.$on("Dealer-Chat-Confirmation",function(event,vMerchantId,vProviderId,vPlacementId,vYear,vMake,vModel,vVIN){if(window.LoadPopIn){$(cao_widget_id).css("max-height","");window.LoadPopIn(vMerchantId,vProviderId,vPlacementId,vYear,vMake,vModel,vVIN,localize.getLocalizedString("label.contactatonce.smsDefaultMessage"),zipCodeCookie.get())}})};$scope.onChangeCurrentVehicle=function(delta){var ndx=$scope.selected.ndx+delta,bNear=$scope.selected.near,selectedVehicle=null;if(bNear){if(0>ndx)if($scope.matches.exact.length>0){ndx=$scope.matches.exact.length-1;bNear=!1}else ndx=$scope.matches.allNear.length-1;else if(ndx>=$scope.matches.allNear.length){ndx=0;$scope.matches.exact.length>0&&(bNear=!1)}}else if(0>ndx)if($scope.matches.allNear.length>0){ndx=$scope.matches.allNear.length-1;bNear=!0}else ndx=$scope.matches.exact.length-1;else if(ndx>=$scope.matches.exact.length){ndx=0;$scope.matches.allNear.length>0&&(bNear=!0)}$scope.selected.near=bNear;$scope.selected.ndx=ndx;if(window.LoadPopIn){$(cao_widget_id).css("max-height","");var placementId=contactAtOnceService.getPlacementId("chat","inventory_details");selectedVehicle=$scope.matches.exact[$scope.selected.ndx];window.LoadPopIn(selectedVehicle.dealerCode,kiaEvents.GLOBAL.CONTACT_AT_ONCE_PROVIDER_ID,placementId,selectedVehicle.year.value,kiaEvents.GLOBAL.CONTACT_AT_ONCE_MAKE,selectedVehicle.seriesName,selectedVehicle.vin,localize.getLocalizedString("label.contactatonce.smsDefaultMessage"),zipCodeCookie.get())}};$scope.vehicleIndex=function(){var ndx=$scope.selected.ndx;return ndx+1};$scope.vehiclesResultCount=function(){return $scope.selected.near?$scope.matches.allNear.length:$scope.matches.exact.length};$scope.currentVehicle=function(){var ndx=$scope.selected.ndx;if(ndx>0){$scope.selected.back=!0;$scope.selected.near?$scope.selected.next=ndx<$scope.matches.allNear.length-1:ndx<$scope.matches.exact.length-1||$scope.matches.allNear.length>0?$scope.selected.next=!0:$scope.selected.next=!1}else if($scope.selected.near){$scope.selected.back=$scope.matches.exact.length>0;$scope.selected.next=$scope.matches.allNear.length>0}else{$scope.selected.back=!1;$scope.selected.next=$scope.matches.exact.length>0||$scope.matches.allNear.length>0}return $scope.selected.near?$scope.matches.allNear[$scope.selected.ndx]:$scope.matches.exact[$scope.selected.ndx]};$scope.getMonthly=function(){return $scope.selected.near?$scope.matches.allNear[$scope.selected.ndx].pricePerMonth:$scope.matches.exact[$scope.selected.ndx].pricePerMonth};$scope.getMtfTitle=function(){return localize.getLocalizedString("label.mtf.title.inventory")};$scope.$on("$locationChangeSuccess",function(event,next,current){$(cao_widget_id).css("max-height",0)});$scope.$on("dealerInventorySuccess",onSuccessSearch);$scope.$on("dealerInventoryVehicles",$scope.onVehiclesView);$scope.$on("dealerInventoryDetail",onDetail);return $scope.onRouteChange=function(routeParams){return load(routeParams)}}]);angular.module("app").directive("inventoryVehicleDetails",["$log","$rootScope","disclaimersModel",function($log,$rootScope,disclaimersModel){var link;link=function(scope,element,attrs){var timer,$pages,$mapImage,$mapImageDiv,prevLayout="";$mapImageDiv=$(element).find(".map-static");$mapImage=$(".map-img",$mapImageDiv);$pages=$(element).find(".page");scope.contentURI=window.contentURI;scope.options={exterior:!0,interior:!1,palette:"dark"};scope.switchView=function(){if(scope.options.exterior){scope.options.exterior=!1;scope.options.interior=!0;scope.options.palette="light"}else{scope.options.exterior=!0;scope.options.interior=!1;scope.options.palette="dark"}};var windowResize=function(){var mapHt=($(window).width(),100);Modernizr.mq("(min-width: 980px)")&&(mapHt=208);var mapUrl=$mapImage.attr("data-src")+"&size="+$mapImageDiv.width()+"x"+mapHt;$mapImage.attr("src",mapUrl);$(element).addClass("no-transition");if(Modernizr.mq("(max-width: 480px)")){if("small"!==prevLayout){$pages.addClass("off-screen");$($pages[0]).removeClass("off-screen");prevLayout="small"}}else if("large"!==prevLayout){prevLayout="large";$pages.removeClass("off-screen")}window.setTimeout(function(){$(element).removeClass("no-transition")},100)},gotoPage=function(pageId){var $page=$(pageId,element);if($page){var pos=$(element).offset();window.scrollTo(0,pos.top);$pages.addClass("off-screen");$page.removeClass("off-screen")}},formatData=function(){$("table",element).each(function(){var $table=$(this);$table.find("tr:odd").addClass("even")})},initDetails=function(){$(element).find(".page-link").bind("click",function(evt){var id=$(this).attr("href");id=id.substring(id.indexOf("#"));gotoPage(id);evt.preventDefault();return!1});formatData();$(window).bind("resize.dealerInventoryVehicleDetails",function(){timer&&clearTimeout(timer);timer=window.setTimeout(function(){windowResize()},100)}).resize();scope.$on("$routeChangeStart",function(next,current){$(window).off("resize.dealerInventoryVehicleDetails")})};initDetails();scope.setDisclaimers=function(model,year){model=model.toLowerCase();disclaimersModel.setGlobal("disclaimer-dealers-inventory-"+model+"-"+year)}};return{link:link,restrict:"EA"}}]);angular.module("app").controller("dealerInventoryDetailController",["$log","$scope","$rootScope","$location","$routeParams","kiaEvents","contactAtOnceService","localize","zipCodeCookie",function($log,$scope,$rootScope,$location,$routeParams,kiaEvents,contactAtOnceService,localize,zipCodeCookie){
$scope.mapWidth=208;$scope.mapHeight=208;$scope.$emit(kiaEvents.LOADER.HIDE);$scope.getMapParams=function(lat,lng){return"&center="+lat+","+lng+"&markers=color:red%7C"+lat+","+lng+"&size="+$scope.mapWidth+"x"+$scope.mapHeight};var queryStr,chatEnabled,merchantId,providerId,placementId,make,seriesName,seriesYear,vin;queryStr=$location.search();chatEnabled=queryStr.chatEnabled;if("true"===chatEnabled||"YES"===chatEnabled){merchantId=queryStr.dealerId;providerId=kiaEvents.GLOBAL.CONTACT_AT_ONCE_PROVIDER_ID;placementId=contactAtOnceService.getPlacementId("chat","inventory_details");make=kiaEvents.GLOBAL.CONTACT_AT_ONCE_MAKE;seriesName=queryStr.seriesName;seriesYear=queryStr.seriesYear;vin=queryStr.vin;setTimeout(function(){window.LoadPopIn&&window.LoadPopIn(merchantId,providerId,placementId,seriesYear,make,seriesName,vin,localize.getLocalizedString("label.contactatonce.smsDefaultMessage"),zipCodeCookie.get())},2e3)}}]);InfoBox.prototype=new google.maps.OverlayView;InfoBox.prototype.createInfoBoxDiv_=function(){var i,events,bw,me=this,cancelHandler=function(e){e.cancelBubble=!0;e.stopPropagation&&e.stopPropagation()},ignoreHandler=function(e){e.returnValue=!1;e.preventDefault&&e.preventDefault();me.enableEventPropagation_||cancelHandler(e)};if(!this.div_){this.div_=document.createElement("div");this.setBoxStyle_();if("undefined"==typeof this.content_.nodeType)this.div_.innerHTML=this.getCloseBoxImg_()+this.content_;else{this.div_.innerHTML=this.getCloseBoxImg_();this.div_.appendChild(this.content_)}this.getPanes()[this.pane_].appendChild(this.div_);this.addClickHandler_();if(this.div_.style.width)this.fixedWidthSet_=!0;else if(0!==this.maxWidth_&&this.div_.offsetWidth>this.maxWidth_){this.div_.style.width=this.maxWidth_;this.div_.style.overflow="auto";this.fixedWidthSet_=!0}else{bw=this.getBoxWidths_();this.div_.style.width=this.div_.offsetWidth-bw.left-bw.right+"px";this.fixedWidthSet_=!1}this.panBox_(this.disableAutoPan_);if(!this.enableEventPropagation_){this.eventListeners_=[];events=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"];for(i=0;i<events.length;i++)this.eventListeners_.push(google.maps.event.addDomListener(this.div_,events[i],cancelHandler));this.eventListeners_.push(google.maps.event.addDomListener(this.div_,"mouseover",function(e){this.style.cursor="default"}))}this.contextListener_=google.maps.event.addDomListener(this.div_,"contextmenu",ignoreHandler);google.maps.event.trigger(this,"domready")}};InfoBox.prototype.getCloseBoxImg_=function(){var img="";if(""!==this.closeBoxURL_){img="<img";img+=" src='"+this.closeBoxURL_+"'";img+=" align=right";img+=" style='";img+=" position: relative;";img+=" cursor: pointer;";img+=" margin: "+this.closeBoxMargin_+";";img+="'>"}return img};InfoBox.prototype.addClickHandler_=function(){var closeBox;if(""!==this.closeBoxURL_){closeBox=this.div_.firstChild;this.closeListener_=google.maps.event.addDomListener(closeBox,"click",this.getCloseClickHandler_())}else this.closeListener_=null};InfoBox.prototype.getCloseClickHandler_=function(){var me=this;return function(e){e.cancelBubble=!0;e.stopPropagation&&e.stopPropagation();google.maps.event.trigger(me,"closeclick");me.close()}};InfoBox.prototype.panBox_=function(disablePan){var map,bounds,xOffset=0,yOffset=0;if(!disablePan){map=this.getMap();if(map instanceof google.maps.Map){map.getBounds().contains(this.position_)||map.setCenter(this.position_);bounds=map.getBounds();var mapDiv=map.getDiv(),mapWidth=mapDiv.offsetWidth,mapHeight=mapDiv.offsetHeight,iwOffsetX=this.pixelOffset_.width,iwOffsetY=this.pixelOffset_.height,iwWidth=this.div_.offsetWidth,iwHeight=this.div_.offsetHeight,padX=this.infoBoxClearance_.width,padY=this.infoBoxClearance_.height,pixPosition=this.getProjection().fromLatLngToContainerPixel(this.position_);pixPosition.x<-iwOffsetX+padX?xOffset=pixPosition.x+iwOffsetX-padX:pixPosition.x+iwWidth+iwOffsetX+padX>mapWidth&&(xOffset=pixPosition.x+iwWidth+iwOffsetX+padX-mapWidth);this.alignBottom_?pixPosition.y<-iwOffsetY+padY+iwHeight?yOffset=pixPosition.y+iwOffsetY-padY-iwHeight:pixPosition.y+iwOffsetY+padY>mapHeight&&(yOffset=pixPosition.y+iwOffsetY+padY-mapHeight):pixPosition.y<-iwOffsetY+padY?yOffset=pixPosition.y+iwOffsetY-padY:pixPosition.y+iwHeight+iwOffsetY+padY>mapHeight&&(yOffset=pixPosition.y+iwHeight+iwOffsetY+padY-mapHeight);if(0!==xOffset||0!==yOffset){map.getCenter();map.panBy(xOffset,yOffset)}}}};InfoBox.prototype.setBoxStyle_=function(){var i,boxStyle;if(this.div_){this.div_.className=this.boxClass_;this.div_.style.cssText="";boxStyle=this.boxStyle_;for(i in boxStyle)boxStyle.hasOwnProperty(i)&&(this.div_.style[i]=boxStyle[i]);"undefined"!=typeof this.div_.style.opacity&&""!==this.div_.style.opacity&&(this.div_.style.filter="alpha(opacity="+100*this.div_.style.opacity+")");this.div_.style.position="absolute";this.div_.style.visibility="hidden";null!==this.zIndex_&&(this.div_.style.zIndex=this.zIndex_)}};InfoBox.prototype.getBoxWidths_=function(){var computedStyle,bw={top:0,bottom:0,left:0,right:0},box=this.div_;if(document.defaultView&&document.defaultView.getComputedStyle){computedStyle=box.ownerDocument.defaultView.getComputedStyle(box,"");if(computedStyle){bw.top=parseInt(computedStyle.borderTopWidth,10)||0;bw.bottom=parseInt(computedStyle.borderBottomWidth,10)||0;bw.left=parseInt(computedStyle.borderLeftWidth,10)||0;bw.right=parseInt(computedStyle.borderRightWidth,10)||0}}else if(document.documentElement.currentStyle&&box.currentStyle){bw.top=parseInt(box.currentStyle.borderTopWidth,10)||0;bw.bottom=parseInt(box.currentStyle.borderBottomWidth,10)||0;bw.left=parseInt(box.currentStyle.borderLeftWidth,10)||0;bw.right=parseInt(box.currentStyle.borderRightWidth,10)||0}return bw};InfoBox.prototype.onRemove=function(){if(this.div_){this.div_.parentNode.removeChild(this.div_);this.div_=null}};InfoBox.prototype.draw=function(){this.createInfoBoxDiv_();var pixPosition=this.getProjection().fromLatLngToDivPixel(this.position_);this.div_.style.left=pixPosition.x+this.pixelOffset_.width+"px";this.alignBottom_?this.div_.style.bottom=-(pixPosition.y+this.pixelOffset_.height+18)+"px":this.div_.style.top=pixPosition.y+this.pixelOffset_.height+"px";this.isHidden_?this.div_.style.visibility="hidden":this.div_.style.visibility="visible"};InfoBox.prototype.setOptions=function(opt_opts){if("undefined"!=typeof opt_opts.boxClass){this.boxClass_=opt_opts.boxClass;this.setBoxStyle_()}if("undefined"!=typeof opt_opts.boxStyle){this.boxStyle_=opt_opts.boxStyle;this.setBoxStyle_()}"undefined"!=typeof opt_opts.content&&this.setContent(opt_opts.content);"undefined"!=typeof opt_opts.disableAutoPan&&(this.disableAutoPan_=opt_opts.disableAutoPan);"undefined"!=typeof opt_opts.maxWidth&&(this.maxWidth_=opt_opts.maxWidth);"undefined"!=typeof opt_opts.pixelOffset&&(this.pixelOffset_=opt_opts.pixelOffset);"undefined"!=typeof opt_opts.alignBottom&&(this.alignBottom_=opt_opts.alignBottom);"undefined"!=typeof opt_opts.position&&this.setPosition(opt_opts.position);"undefined"!=typeof opt_opts.zIndex&&this.setZIndex(opt_opts.zIndex);"undefined"!=typeof opt_opts.closeBoxMargin&&(this.closeBoxMargin_=opt_opts.closeBoxMargin);"undefined"!=typeof opt_opts.closeBoxURL&&(this.closeBoxURL_=opt_opts.closeBoxURL);"undefined"!=typeof opt_opts.infoBoxClearance&&(this.infoBoxClearance_=opt_opts.infoBoxClearance);"undefined"!=typeof opt_opts.isHidden&&(this.isHidden_=opt_opts.isHidden);"undefined"!=typeof opt_opts.visible&&(this.isHidden_=!opt_opts.visible);"undefined"!=typeof opt_opts.enableEventPropagation&&(this.enableEventPropagation_=opt_opts.enableEventPropagation);this.div_&&this.draw()};InfoBox.prototype.setContent=function(content){this.content_=content;if(this.div_){if(this.closeListener_){google.maps.event.removeListener(this.closeListener_);this.closeListener_=null}this.fixedWidthSet_||(this.div_.style.width="");if("undefined"==typeof content.nodeType)this.div_.innerHTML=this.getCloseBoxImg_()+content;else{this.div_.innerHTML=this.getCloseBoxImg_();this.div_.appendChild(content)}if(!this.fixedWidthSet_){this.div_.style.width=this.div_.offsetWidth+"px";if("undefined"==typeof content.nodeType)this.div_.innerHTML=this.getCloseBoxImg_()+content;else{this.div_.innerHTML=this.getCloseBoxImg_();this.div_.appendChild(content)}}this.addClickHandler_()}google.maps.event.trigger(this,"content_changed")};InfoBox.prototype.setPosition=function(latlng){this.position_=latlng;this.div_&&this.draw();google.maps.event.trigger(this,"position_changed")};InfoBox.prototype.setZIndex=function(index){this.zIndex_=index;this.div_&&(this.div_.style.zIndex=index);google.maps.event.trigger(this,"zindex_changed")};InfoBox.prototype.setVisible=function(isVisible){this.isHidden_=!isVisible;this.div_&&(this.div_.style.visibility=this.isHidden_?"hidden":"visible")};InfoBox.prototype.getContent=function(){return this.content_};InfoBox.prototype.getPosition=function(){return this.position_};InfoBox.prototype.getZIndex=function(){return this.zIndex_};InfoBox.prototype.getVisible=function(){var isVisible;isVisible="undefined"==typeof this.getMap()||null===this.getMap()?!1:!this.isHidden_;return isVisible};InfoBox.prototype.show=function(){this.isHidden_=!1;this.div_&&(this.div_.style.visibility="visible")};InfoBox.prototype.hide=function(){this.isHidden_=!0;this.div_&&(this.div_.style.visibility="hidden")};InfoBox.prototype.open=function(map,anchor){var me=this;if(anchor){this.position_=anchor.getPosition();this.moveListener_=google.maps.event.addListener(anchor,"position_changed",function(){me.setPosition(this.getPosition())})}this.setMap(map);this.div_&&this.panBox_()};InfoBox.prototype.close=function(){var i;if(this.closeListener_){google.maps.event.removeListener(this.closeListener_);this.closeListener_=null}if(this.eventListeners_){for(i=0;i<this.eventListeners_.length;i++)google.maps.event.removeListener(this.eventListeners_[i]);this.eventListeners_=null}if(this.moveListener_){google.maps.event.removeListener(this.moveListener_);this.moveListener_=null}if(this.contextListener_){google.maps.event.removeListener(this.contextListener_);this.contextListener_=null}this.setMap(null)};RichMarker.prototype=new google.maps.OverlayView;window.RichMarker=RichMarker;RichMarker.prototype.getVisible=function(){return this.get("visible")};RichMarker.prototype.getVisible=RichMarker.prototype.getVisible;RichMarker.prototype.setVisible=function(visible){this.set("visible",visible)};RichMarker.prototype.setVisible=RichMarker.prototype.setVisible;RichMarker.prototype.visible_changed=function(){if(this.ready_){this.markerWrapper_.style.display=this.getVisible()?"":"none";this.draw()}};RichMarker.prototype.visible_changed=RichMarker.prototype.visible_changed;RichMarker.prototype.setFlat=function(flat){this.set("flat",!!flat)};RichMarker.prototype.setFlat=RichMarker.prototype.setFlat;RichMarker.prototype.getFlat=function(){return this.get("flat")};RichMarker.prototype.getFlat=RichMarker.prototype.getFlat;RichMarker.prototype.getWidth=function(){return this.get("width")};RichMarker.prototype.getWidth=RichMarker.prototype.getWidth;RichMarker.prototype.getHeight=function(){return this.get("height")};RichMarker.prototype.getHeight=RichMarker.prototype.getHeight;RichMarker.prototype.setShadow=function(shadow){this.set("shadow",shadow);this.flat_changed()};RichMarker.prototype.setShadow=RichMarker.prototype.setShadow;RichMarker.prototype.getShadow=function(){return this.get("shadow")};RichMarker.prototype.getShadow=RichMarker.prototype.getShadow;RichMarker.prototype.flat_changed=function(){this.ready_&&(this.markerWrapper_.style.boxShadow=this.markerWrapper_.style.webkitBoxShadow=this.markerWrapper_.style.MozBoxShadow=this.getFlat()?"":this.getShadow())};RichMarker.prototype.flat_changed=RichMarker.prototype.flat_changed;RichMarker.prototype.setZIndex=function(index){this.set("zIndex",index)};RichMarker.prototype.setZIndex=RichMarker.prototype.setZIndex;RichMarker.prototype.getZIndex=function(){return this.get("zIndex")};RichMarker.prototype.getZIndex=RichMarker.prototype.getZIndex;RichMarker.prototype.zIndex_changed=function(){this.getZIndex()&&this.ready_&&(this.markerWrapper_.style.zIndex=this.getZIndex())};RichMarker.prototype.zIndex_changed=RichMarker.prototype.zIndex_changed;RichMarker.prototype.getDraggable=function(){return this.get("draggable")};RichMarker.prototype.getDraggable=RichMarker.prototype.getDraggable;RichMarker.prototype.setDraggable=function(draggable){this.set("draggable",!!draggable)};RichMarker.prototype.setDraggable=RichMarker.prototype.setDraggable;RichMarker.prototype.draggable_changed=function(){this.ready_&&(this.getDraggable()?this.addDragging_(this.markerWrapper_):this.removeDragListeners_())};RichMarker.prototype.draggable_changed=RichMarker.prototype.draggable_changed;RichMarker.prototype.getPosition=function(){return this.get("position")};RichMarker.prototype.getPosition=RichMarker.prototype.getPosition;RichMarker.prototype.setPosition=function(position){this.set("position",position)};RichMarker.prototype.setPosition=RichMarker.prototype.setPosition;RichMarker.prototype.position_changed=function(){this.draw()};RichMarker.prototype.position_changed=RichMarker.prototype.position_changed;RichMarker.prototype.getAnchor=function(){return this.get("anchor")};RichMarker.prototype.getAnchor=RichMarker.prototype.getAnchor;RichMarker.prototype.setAnchor=function(anchor){this.set("anchor",anchor)};RichMarker.prototype.setAnchor=RichMarker.prototype.setAnchor;RichMarker.prototype.anchor_changed=function(){this.draw()};RichMarker.prototype.anchor_changed=RichMarker.prototype.anchor_changed;RichMarker.prototype.htmlToDocumentFragment_=function(htmlString){var tempDiv=document.createElement("DIV");tempDiv.innerHTML=htmlString;if(1==tempDiv.childNodes.length)return tempDiv.removeChild(tempDiv.firstChild);for(var fragment=document.createDocumentFragment();tempDiv.firstChild;)fragment.appendChild(tempDiv.firstChild);return fragment};RichMarker.prototype.removeChildren_=function(node){if(node)for(var child;child=node.firstChild;)node.removeChild(child)};RichMarker.prototype.setContent=function(content){this.set("content",content)};RichMarker.prototype.setContent=RichMarker.prototype.setContent;RichMarker.prototype.getContent=function(){return this.get("content")};RichMarker.prototype.getContent=RichMarker.prototype.getContent;RichMarker.prototype.content_changed=function(){if(this.markerContent_){this.removeChildren_(this.markerContent_);var content=this.getContent();if(content){if("string"==typeof content){content=content.replace(/^\s*([\S\s]*)\b\s*$/,"$1");content=this.htmlToDocumentFragment_(content)}this.markerContent_.appendChild(content);for(var image,that=this,images=this.markerContent_.getElementsByTagName("IMG"),i=0;image=images[i];i++){google.maps.event.addDomListener(image,"mousedown",function(e){if(that.getDraggable()){e.preventDefault&&e.preventDefault();e.returnValue=!1}});google.maps.event.addDomListener(image,"load",function(){that.draw()})}google.maps.event.trigger(this,"domready")}this.ready_&&this.draw()}};RichMarker.prototype.content_changed=RichMarker.prototype.content_changed;RichMarker.prototype.setCursor_=function(whichCursor){if(this.ready_){var cursor="";if(-1!==navigator.userAgent.indexOf("Gecko/")){"dragging"==whichCursor&&(cursor="-moz-grabbing");"dragready"==whichCursor&&(cursor="-moz-grab");"draggable"==whichCursor&&(cursor="pointer")}else{("dragging"==whichCursor||"dragready"==whichCursor)&&(cursor="move");"draggable"==whichCursor&&(cursor="pointer")}cursor="pointer";this.markerWrapper_.style.cursor!=cursor&&(this.markerWrapper_.style.cursor=cursor)}};RichMarker.prototype.startDrag=function(e){if(this.getDraggable()&&!this.dragging_){this.dragging_=!0;var map=this.getMap();this.mapDraggable_=map.get("draggable");map.set("draggable",!1);this.mouseX_=e.clientX;this.mouseY_=e.clientY;this.setCursor_("dragready");this.markerWrapper_.style.MozUserSelect="none";this.markerWrapper_.style.KhtmlUserSelect="none";this.markerWrapper_.style.WebkitUserSelect="none";this.markerWrapper_.unselectable="on";this.markerWrapper_.onselectstart=function(){return!1};this.addDraggingListeners_();google.maps.event.trigger(this,"dragstart")}};RichMarker.prototype.stopDrag=function(){if(this.getDraggable()&&this.dragging_){this.dragging_=!1;this.getMap().set("draggable",this.mapDraggable_);this.mouseX_=this.mouseY_=this.mapDraggable_=null;this.markerWrapper_.style.MozUserSelect="";this.markerWrapper_.style.KhtmlUserSelect="";this.markerWrapper_.style.WebkitUserSelect="";this.markerWrapper_.unselectable="off";this.markerWrapper_.onselectstart=function(){};this.removeDraggingListeners_();this.setCursor_("draggable");google.maps.event.trigger(this,"dragend");this.draw()}};RichMarker.prototype.drag=function(e){if(this.getDraggable()&&this.dragging_){var dx=this.mouseX_-e.clientX,dy=this.mouseY_-e.clientY;this.mouseX_=e.clientX;this.mouseY_=e.clientY;var left=parseInt(this.markerWrapper_.style.left,10)-dx,top=parseInt(this.markerWrapper_.style.top,10)-dy;this.markerWrapper_.style.left=left+"px";this.markerWrapper_.style.top=top+"px";var offset=this.getOffset_(),point=new google.maps.Point(left-offset.width,top-offset.height),projection=this.getProjection();this.setPosition(projection.fromDivPixelToLatLng(point));this.setCursor_("dragging");google.maps.event.trigger(this,"drag")}else this.stopDrag()};RichMarker.prototype.removeDragListeners_=function(){if(this.draggableListener_){google.maps.event.removeListener(this.draggableListener_);delete this.draggableListener_}this.setCursor_("")};RichMarker.prototype.addDragging_=function(node){if(node){var that=this;this.draggableListener_=google.maps.event.addDomListener(node,"mousedown",function(e){that.startDrag(e)});this.setCursor_("draggable")}};RichMarker.prototype.addDraggingListeners_=function(){var that=this;if(this.markerWrapper_.setCapture){this.markerWrapper_.setCapture(!0);this.draggingListeners_=[google.maps.event.addDomListener(this.markerWrapper_,"mousemove",function(e){that.drag(e)},!0),google.maps.event.addDomListener(this.markerWrapper_,"mouseup",function(){that.stopDrag();that.markerWrapper_.releaseCapture()},!0)]}else this.draggingListeners_=[google.maps.event.addDomListener(window,"mousemove",function(e){that.drag(e)},!0),google.maps.event.addDomListener(window,"mouseup",function(){that.stopDrag()},!0)]};RichMarker.prototype.removeDraggingListeners_=function(){if(this.draggingListeners_){for(var listener,i=0;listener=this.draggingListeners_[i];i++)google.maps.event.removeListener(listener);this.draggingListeners_.length=0}};RichMarker.prototype.getOffset_=function(){var anchor=this.getAnchor();if("object"==typeof anchor)return anchor;var offset=new google.maps.Size(0,0);if(!this.markerContent_)return offset;var width=this.markerContent_.offsetWidth,height=this.markerContent_.offsetHeight;switch(anchor){case RichMarkerPosition.TOP_LEFT:break;case RichMarkerPosition.TOP:offset.width=-width/2;break;case RichMarkerPosition.TOP_RIGHT:offset.width=-width;break;case RichMarkerPosition.LEFT:offset.height=-height/2;break;case RichMarkerPosition.MIDDLE:offset.width=-width/2;offset.height=-height/2;break;case RichMarkerPosition.RIGHT:offset.width=-width;offset.height=-height/2;break;case RichMarkerPosition.BOTTOM_LEFT:offset.height=-height;break;case RichMarkerPosition.BOTTOM:offset.width=-width/2;offset.height=-height;break;case RichMarkerPosition.BOTTOM_RIGHT:offset.width=-width;offset.height=-height}return offset};RichMarker.prototype.onAdd=function(){if(!this.markerWrapper_){this.markerWrapper_=document.createElement("DIV");this.markerWrapper_.style.position="absolute"}this.getZIndex()&&(this.markerWrapper_.style.zIndex=this.getZIndex());this.markerWrapper_.style.display=this.getVisible()?"":"none";if(!this.markerContent_){this.markerContent_=document.createElement("DIV");this.markerWrapper_.appendChild(this.markerContent_);var that=this;google.maps.event.addDomListener(this.markerContent_,"click",function(e){e.preventDefault?e.preventDefault():e.returnValue=!1;e.stopImmediatePropagation?e.stopImmediatePropagation():e.returnValue=!1;google.maps.event.trigger(that,"click-richm")});google.maps.event.addDomListener(this.markerContent_,"mouseover",function(e){google.maps.event.trigger(that,"mouseover")});google.maps.event.addDomListener(this.markerContent_,"mouseout",function(e){google.maps.event.trigger(that,"mouseout")})}this.ready_=!0;this.content_changed();this.flat_changed();this.draggable_changed();var panes=this.getPanes();panes&&panes.overlayMouseTarget.appendChild(this.markerWrapper_);google.maps.event.trigger(this,"ready")};RichMarker.prototype.onAdd=RichMarker.prototype.onAdd;RichMarker.prototype.draw=function(){if(this.ready_&&!this.dragging_){var projection=this.getProjection();if(projection){var latLng=this.get("position"),pos=projection.fromLatLngToDivPixel(latLng),offset=this.getOffset_();this.markerWrapper_.style.top=pos.y+offset.height+"px";this.markerWrapper_.style.left=pos.x+offset.width+"px";var height=this.markerContent_.offsetHeight,width=this.markerContent_.offsetWidth;width!=this.get("width")&&this.set("width",width);height!=this.get("height")&&this.set("height",height)}}};RichMarker.prototype.draw=RichMarker.prototype.draw;RichMarker.prototype.onRemove=function(){this.markerWrapper_&&this.markerWrapper_.parentNode&&this.markerWrapper_.parentNode.removeChild(this.markerWrapper_);this.removeDragListeners_()};RichMarker.prototype.onRemove=RichMarker.prototype.onRemove;var RichMarkerPosition={TOP_LEFT:1,TOP:2,TOP_RIGHT:3,LEFT:4,MIDDLE:5,RIGHT:6,BOTTOM_LEFT:7,BOTTOM:8,BOTTOM_RIGHT:9};window.RichMarkerPosition=RichMarkerPosition;angular.module("app").factory("gmapModel",["$log","$rootScope","geoLocationService","kiaEvents",function($log,$rootScope,geoLocationService,kiaEvents){var initMap,findMe,offset,openMarkerInfo,panToLocation,setStreetView,drawMapMarks,createCenter,updateCenter,fitBoundsWithZip,removeCurrentMarks,getMapOptions,setMobile,redrawMap,setMapOptions,getInfoboxOptions,setInfoboxOptions,getCurrentDetailData,getMap,setCurrentDetailData,getMapReadyState,setRadius,setCenterAddress,setMapInteractions,currentMarker,currentMarkerLat,currentMarkerLng,closeCurrentMarker,centerMap,offsetCenter,getDirectionsURL,getPosFromZipCode,getZipCodeFromPos,dealerCount,googleUIMap,center,dataReady,currentDataDetail,radius,centerAddress,infoWindow,dealerCollection,boundaries,mapMarkers=[],marklabels="ABCDEFGHIJKLMNOPQRSTUVXYZ123456789",isMobile=!1,debug=!1,detailOpen=!0,stylesArray=[{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]}],defaultOptions={center:new google.maps.LatLng(40.380028,-99.243166),zoom:4,styles:stylesArray,minZoom:3,mapTypeId:google.maps.MapTypeId.ROADMAP,streetViewControl:!1,panControl:!1,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER},navigationControlOptions:{position:google.maps.ControlPosition.LEFT_TOP}},defaultInfoboxOptions={disableAutoPan:!1,alignBottom:!0,maxWidth:0,pixelOffset:new google.maps.Size(-250,-50),zIndex:null,closeBoxMargin:"22px 16px",closeBoxURL:window.staticURI+"/img/locator_detail_close.png",infoBoxClearance:new google.maps.Size(1,100),isHidden:!1,pane:"floatPane",enableEventPropagation:!1};initMap=function(UIMapInstance,UIInfoWindowInstance){googleUIMap=UIMapInstance;infoWindow=UIInfoWindowInstance;dealerCount=0;dataReady=!1;mapMarkers.splice(0);googleUIMap.addListener("click",function(e){if(detailOpen){infoWindow.close();detailOpen=!1;$rootScope.$broadcast(kiaEvents.GMAP.CLOSE_INFOBOX,getCurrentDetailData())}});infoWindow.addListener("closeclick",function(){detailOpen=!1;$rootScope.$broadcast(kiaEvents.GMAP.CLOSE_INFOBOX,getCurrentDetailData())})};getMapOptions=function(){return defaultOptions};setMapOptions=function(options){defaultOptions=jQuery.extend(defaultOptions,options)};getInfoboxOptions=function(){return defaultInfoboxOptions};setInfoboxOptions=function(options){defaultInfoboxOptions=angular.extend(defaultInfoboxOptions,options)};getMap=function(){return googleUIMap};setStreetView=function(value){googleUIMap.getStreetView().setVisible(value)};getCurrentDetailData=function(){return currentDataDetail};setCurrentDetailData=function(value){currentDataDetail=value};getMapReadyState=function(){return dataReady};setRadius=function(value){radius=value};redrawMap=function(){google.maps.event.trigger(googleUIMap,"resize")};setCenterAddress=function(address){centerAddress=address};setMapInteractions=function(value){var disableOptions={disableDefaultUI:!0,overviewMapControl:value,draggable:value,keyboardShortcuts:value,mapTypeControl:value,panControl:!1,scaleControl:value,scrollwheel:value,zoomControl:value,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER},streetViewControl:!1,rotateControl:value,disableDoubleClickZoom:!value};googleUIMap&&googleUIMap.setOptions(disableOptions)};setMobile=function(value){isMobile=value};panToLocation=function(marker){googleUIMap.panTo(marker.getPosition())};openMarkerInfo=function(model){currentMarker=dealerCollection[model.id];currentDataDetail=model;currentMarkerLat=dealerCollection[model.id].getPosition().lat();currentMarkerLng=dealerCollection[model.id].getPosition().lng();infoWindow.open(googleUIMap,dealerCollection[model.id]);detailOpen=!0;updateCenter(currentMarker.getPosition());offset()};closeCurrentMarker=function(){if(detailOpen&&infoWindow){infoWindow.close();detailOpen=!1;$rootScope.$broadcast(kiaEvents.GMAP.CLOSE_INFOBOX,getCurrentDetailData())}};centerMap=function(){if(center){googleUIMap.fitBounds(center.getBounds());googleUIMap.panTo(center.getCenter())}};offset=function(){if(!center)return!1;isMobile?offsetCenter(center.getCenter(),0):detailOpen?offsetCenter(center.getCenter(),0,-100):offsetCenter(center.getCenter(),0,0)};createCenter=function(data,milesRadius){$log.log("updating center");center&&center.setMap(null);center=null;var circleCenter;circleCenter=boundaries.getCenter();var circleOptions={center:circleCenter,fillOpacity:.5,strokeOpacity:0,map:googleUIMap,fillColor:"#FF0000",visible:debug,radius:1609.344*milesRadius};center=new google.maps.Circle(circleOptions);googleUIMap.setCenter(center.getCenter());googleUIMap.fitBounds(center.getBounds());googleUIMap.panTo(center.getCenter())};updateCenter=function(newCenter){if(!center)return!1;center.setCenter(newCenter)};fitBoundsWithZip=function(zipLat,zipLong,map){var ZipPosition=new google.maps.LatLng(zipLat,zipLong);boundaries.extend(ZipPosition);if(map)var listener=google.maps.event.addListener(map,"idle",function(){map.fitBounds(boundaries);google.maps.event.removeListener(listener)})};drawMapMarks=function(data,map){removeCurrentMarks();dealerCollection={};boundaries=new google.maps.LatLngBounds;angular.forEach(data,function(value,key){dealerCount++;value.id=marklabels.charAt(dealerCount-1);var compiledHTML,loc;if(value.location){compiledHTML="<div class='mark'><span class='mark-label'>"+value.id+"</span></div>";loc={latitude:parseFloat(value.location.latitude),longitude:parseFloat(value.location.longitude)}}else{compiledHTML="<div class='inventory-mark'><span class='mark-label'>"+value.vehicleCount+"</span></div>";loc={latitude:value.latitude,longitude:value.longitude}}var positionMarker=new google.maps.LatLng(loc.latitude,loc.longitude),marker=new RichMarker({position:positionMarker,map:googleUIMap,draggable:!1,shadow:!1,anchor:5,content:compiledHTML});boundaries.extend(positionMarker);value.location&&(value.fullAddress=value.location.street1+", "+value.location.city+", "+value.location.state+" "+value.location.zipCode);value.directionsLink=getDirectionsURL(value.fullAddress);google.maps.event.addListener(marker,"click-richm",function(event){currentMarker=marker;isMobile||$rootScope.$broadcast(kiaEvents.GMAP.OPEN_INFOBOX,value)});mapMarkers.push(marker);dealerCollection[value.id]=marker;currentDataDetail=value});if(map)var listener=google.maps.event.addListener(map,"idle",function(){map.fitBounds(boundaries);google.maps.event.removeListener(listener)});dataReady=!0;return data};getDirectionsURL=function(destiny){var params="dirflg=d&saddr="+centerAddress+"&daddr="+destiny;return"https://maps.google.com/?"+params};removeCurrentMarks=function(){for(var i=(mapMarkers.length,mapMarkers.length-1);i>=0;i--)mapMarkers[i].setMap(null);dealerCount=0;dealerCollection=null;mapMarkers.splice(0);angular.isDefined(infoWindow)&&infoWindow&&infoWindow.close()};offsetCenter=function(latlng,offsetx,offsety){googleUIMap.panTo(center.getCenter())};findMe=function(success,failure){geoLocationService.findMe(success,failure)};getPosFromZipCode=function(zipCode,success,failure){geoLocationService.getPosFromZipCode(zipCode,success,failure)};getZipCodeFromPos=function(position,success,failure){geoLocationService.getZipCodeFromPos(position,success,failure)};return{initMap:initMap,getMapOptions:getMapOptions,setMapOptions:setMapOptions,getInfoboxOptions:getInfoboxOptions,setInfoboxOptions:setInfoboxOptions,getMap:getMap,getCurrentDetailData:getCurrentDetailData,setCurrentDetailData:setCurrentDetailData,getMapReadyState:getMapReadyState,setRadius:setRadius,redrawMap:redrawMap,setCenterAddress:setCenterAddress,setMapInteractions:setMapInteractions,setMobile:setMobile,dataReady:dataReady,findMe:findMe,drawMapMarks:drawMapMarks,openMarkerInfo:openMarkerInfo,mapMarkers:mapMarkers,centerMap:centerMap,updateCenter:updateCenter,createCenter:createCenter,getPosFromZipCode:getPosFromZipCode,removeCurrentMarks:removeCurrentMarks,offset:offset,setStreetView:setStreetView,closeCurrentMarker:closeCurrentMarker,fitBoundsWithZip:fitBoundsWithZip}}]);!function($){$.fn.numeric=function(config,callback){"boolean"==typeof config&&(config={decimal:config});config=config||{};"undefined"==typeof config.negative&&(config.negative=!0);var decimal=config.decimal===!1?"":config.decimal||"",negative=!1,callback="function"==typeof callback?callback:function(){};return this.data("numeric.decimal",decimal).data("numeric.negative",negative).data("numeric.callback",callback).keypress($.fn.numeric.keypress).keyup($.fn.numeric.keyup).blur($.fn.numeric.blur)};$.fn.numeric.keypress=function(e){var decimal=$.data(this,"numeric.decimal"),negative=$.data(this,"numeric.negative"),key=e.charCode?e.charCode:e.keyCode?e.keyCode:0;if(13==key&&"input"==this.nodeName.toLowerCase())return!0;if(13==key)return!1;var allow=!1;if(e.ctrlKey&&97==key||e.ctrlKey&&65==key)return!0;if(e.ctrlKey&&120==key||e.ctrlKey&&88==key)return!0;if(e.ctrlKey&&99==key||e.ctrlKey&&67==key)return!0;if(e.ctrlKey&&122==key||e.ctrlKey&&90==key)return!0;if(e.ctrlKey&&118==key||e.ctrlKey&&86==key||e.shiftKey&&45==key)return!0;if(48>key||key>57){if(0!=this.value.indexOf("-")&&negative&&45==key&&(0==this.value.length||0==$.fn.getSelectionStart(this)))return!0;decimal&&key==decimal.charCodeAt(0)&&-1!=this.value.indexOf(decimal)&&(allow=!1);if(8!=key&&9!=key&&13!=key&&35!=key&&36!=key&&37!=key&&39!=key&&46!=key)allow=!1;else if("undefined"!=typeof e.charCode)if(e.keyCode==e.which&&0!=e.which){allow=!0;46==e.which&&(allow=!1)}else 0!=e.keyCode&&0==e.charCode&&0==e.which&&(allow=!0);decimal&&key==decimal.charCodeAt(0)&&(allow=-1==this.value.indexOf(decimal)?!0:!1)}else allow=!0;return allow};$.fn.numeric.keyup=function(e){var val=this.value;if(val.length>0){var carat=$.fn.getSelectionStart(this),decimal=$.data(this,"numeric.decimal"),negative=$.data(this,"numeric.negative");if(""!=decimal){var dot=val.indexOf(decimal);0==dot&&(this.value="0"+val);1==dot&&"-"==val.charAt(0)&&(this.value="-0"+val.substring(1));val=this.value}for(var validChars=[0,1,2,3,4,5,6,7,8,9,"-",decimal],length=val.length,i=length-1;i>=0;i--){var ch=val.charAt(i);0!=i&&"-"==ch?val=val.substring(0,i)+val.substring(i+1):0!=i||negative||"-"!=ch||(val=val.substring(1));for(var validChar=!1,j=0;j<validChars.length;j++)if(ch==validChars[j]){validChar=!0;break}validChar&&" "!=ch||(val=val.substring(0,i)+val.substring(i+1))}var firstDecimal=val.indexOf(decimal);if(firstDecimal>0)for(var i=length-1;i>firstDecimal;i--){
var ch=val.charAt(i);ch==decimal&&(val=val.substring(0,i)+val.substring(i+1))}this.value=val;$.fn.setSelection(this,carat)}};$.fn.numeric.blur=function(){var decimal=$.data(this,"numeric.decimal"),callback=$.data(this,"numeric.callback"),val=this.value;if(""!=val){var re=new RegExp("^\\d+$|\\d*"+decimal+"\\d+");re.exec(val)||callback.apply(this)}};$.fn.removeNumeric=function(){return this.data("numeric.decimal",null).data("numeric.negative",null).data("numeric.callback",null).unbind("keypress",$.fn.numeric.keypress).unbind("blur",$.fn.numeric.blur)};$.fn.getSelectionStart=function(o){if(o.createTextRange){var r=document.selection.createRange().duplicate();r.moveEnd("character",o.value.length);return""==r.text?o.value.length:o.value.lastIndexOf(r.text)}return o.selectionStart};$.fn.setSelection=function(o,p){"number"==typeof p&&(p=[p,p]);if(p&&p.constructor==Array&&2==p.length)if(o.createTextRange){var r=o.createTextRange();r.collapse(!0);r.moveStart("character",p[0]);r.moveEnd("character",p[1]);r.select()}else if(o.setSelectionRange){o.focus();o.setSelectionRange(p[0],p[1])}}}(jQuery);!function(global){"use strict";function addEventListener(elem,event,fn){return elem.addEventListener?elem.addEventListener(event,fn,!1):elem.attachEvent?elem.attachEvent("on"+event,fn):void 0}function inArray(arr,item){var i,len;for(i=0,len=arr.length;len>i;i++)if(arr[i]===item)return!0;return!1}function moveCaret(elem,index){var range;if(elem.createTextRange){range=elem.createTextRange();range.move("character",index);range.select()}else if(elem.selectionStart){elem.focus();elem.setSelectionRange(index,index)}}function changeType(elem,type){try{elem.type=type;return!0}catch(e){return!1}}global.Placeholders={Utils:{addEventListener:addEventListener,inArray:inArray,moveCaret:moveCaret,changeType:changeType}}}(this);!function(global){"use strict";function hidePlaceholder(elem){var type;if(elem.value===elem.getAttribute(ATTR_CURRENT_VAL)&&"true"===elem.getAttribute(ATTR_ACTIVE)){elem.setAttribute(ATTR_ACTIVE,"false");elem.value="";elem.className=elem.className.replace(classNameRegExp,"");type=elem.getAttribute(ATTR_INPUT_TYPE);type&&(elem.type=type);return!0}return!1}function showPlaceholder(elem){var type,val=elem.getAttribute(ATTR_CURRENT_VAL);if(""===elem.value&&val){elem.setAttribute(ATTR_ACTIVE,"true");elem.value=val;elem.className+=" "+placeholderClassName;type=elem.getAttribute(ATTR_INPUT_TYPE);type?elem.type="text":"password"===elem.type&&Utils.changeType(elem,"text")&&elem.setAttribute(ATTR_INPUT_TYPE,"password");return!0}return!1}function handleElem(node,callback){var handleInputs,handleTextareas,elem,len,i;if(node&&node.getAttribute(ATTR_CURRENT_VAL))callback(node);else{handleInputs=node?node.getElementsByTagName("input"):inputs;handleTextareas=node?node.getElementsByTagName("textarea"):textareas;for(i=0,len=handleInputs.length+handleTextareas.length;len>i;i++){elem=i<handleInputs.length?handleInputs[i]:handleTextareas[i-handleInputs.length];callback(elem)}}}function disablePlaceholders(node){handleElem(node,hidePlaceholder)}function enablePlaceholders(node){handleElem(node,showPlaceholder)}function makeFocusHandler(elem){return function(){hideOnInput&&elem.value===elem.getAttribute(ATTR_CURRENT_VAL)&&"true"===elem.getAttribute(ATTR_ACTIVE)?Utils.moveCaret(elem,0):hidePlaceholder(elem)}}function makeBlurHandler(elem){return function(){showPlaceholder(elem)}}function makeKeydownHandler(elem){return function(e){keydownVal=elem.value;return"true"===elem.getAttribute(ATTR_ACTIVE)?!(keydownVal===elem.getAttribute(ATTR_CURRENT_VAL)&&Utils.inArray(badKeys,e.keyCode)):void 0}}function makeKeyupHandler(elem){return function(){var type;if("true"===elem.getAttribute(ATTR_ACTIVE)&&elem.value!==keydownVal){elem.className=elem.className.replace(classNameRegExp,"");elem.value=elem.value.replace(elem.getAttribute(ATTR_CURRENT_VAL),"");elem.setAttribute(ATTR_ACTIVE,!1);type=elem.getAttribute(ATTR_INPUT_TYPE);type&&(elem.type=type)}if(""===elem.value){elem.blur();Utils.moveCaret(elem,0)}}}function makeClickHandler(elem){return function(){elem===document.activeElement&&elem.value===elem.getAttribute(ATTR_CURRENT_VAL)&&"true"===elem.getAttribute(ATTR_ACTIVE)&&Utils.moveCaret(elem,0)}}function makeSubmitHandler(form){return function(){disablePlaceholders(form)}}function newElement(elem){if(elem.form){form=elem.form;if(!form.getAttribute(ATTR_FORM_HANDLED)){Utils.addEventListener(form,"submit",makeSubmitHandler(form));form.setAttribute(ATTR_FORM_HANDLED,"true")}}Utils.addEventListener(elem,"focus",makeFocusHandler(elem));Utils.addEventListener(elem,"blur",makeBlurHandler(elem));if(hideOnInput){Utils.addEventListener(elem,"keydown",makeKeydownHandler(elem));Utils.addEventListener(elem,"keyup",makeKeyupHandler(elem));Utils.addEventListener(elem,"click",makeClickHandler(elem))}elem.setAttribute(ATTR_EVENTS_BOUND,"true");elem.setAttribute(ATTR_CURRENT_VAL,placeholder);showPlaceholder(elem)}var inputs,textareas,hideOnInput,liveUpdates,keydownVal,styleElem,styleRules,placeholder,timer,form,elem,len,i,validTypes=["text","search","url","tel","email","password","number","textarea"],badKeys=[27,33,34,35,36,37,38,39,40,8,46],placeholderStyleColor="#ccc",placeholderClassName="placeholdersjs",classNameRegExp=new RegExp("\\b"+placeholderClassName+"\\b"),ATTR_CURRENT_VAL="data-placeholder-value",ATTR_ACTIVE="data-placeholder-active",ATTR_INPUT_TYPE="data-placeholder-type",ATTR_FORM_HANDLED="data-placeholder-submit",ATTR_EVENTS_BOUND="data-placeholder-bound",ATTR_OPTION_FOCUS="data-placeholder-focus",ATTR_OPTION_LIVE="data-placeholder-live",test=document.createElement("input"),head=document.getElementsByTagName("head")[0],root=document.documentElement,Placeholders=global.Placeholders,Utils=Placeholders.Utils;if(void 0===test.placeholder){inputs=document.getElementsByTagName("input");textareas=document.getElementsByTagName("textarea");hideOnInput="false"===root.getAttribute(ATTR_OPTION_FOCUS);liveUpdates="false"!==root.getAttribute(ATTR_OPTION_LIVE);styleElem=document.createElement("style");styleElem.type="text/css";styleRules=document.createTextNode("."+placeholderClassName+" { color:"+placeholderStyleColor+"; }");styleElem.styleSheet?styleElem.styleSheet.cssText=styleRules.nodeValue:styleElem.appendChild(styleRules);head.insertBefore(styleElem,head.firstChild);for(i=0,len=inputs.length+textareas.length;len>i;i++){elem=i<inputs.length?inputs[i]:textareas[i-inputs.length];placeholder=elem.getAttribute("placeholder");placeholder&&Utils.inArray(validTypes,elem.type)&&newElement(elem)}timer=setInterval(function(){for(i=0,len=inputs.length+textareas.length;len>i;i++){elem=i<inputs.length?inputs[i]:textareas[i-inputs.length];placeholder=elem.getAttribute("placeholder");if(placeholder&&Utils.inArray(validTypes,elem.type)){elem.getAttribute(ATTR_EVENTS_BOUND)||newElement(elem);if(placeholder!==elem.getAttribute(ATTR_CURRENT_VAL)||"password"===elem.type&&!elem.getAttribute(ATTR_INPUT_TYPE)){"password"===elem.type&&!elem.getAttribute(ATTR_INPUT_TYPE)&&Utils.changeType(elem,"text")&&elem.setAttribute(ATTR_INPUT_TYPE,"password");elem.value===elem.getAttribute(ATTR_CURRENT_VAL)&&(elem.value=placeholder);elem.setAttribute(ATTR_CURRENT_VAL,placeholder)}}}liveUpdates||clearInterval(timer)},100)}Placeholders.disable=disablePlaceholders;Placeholders.enable=enablePlaceholders}(this);angular.module("app").directive("zipCodeForm",["$log","kiaEvents","safeApply","localize",function($log,kiaEvents,safeApply,localize){return{restrict:"EA",transclude:!0,priority:999,scope:{theme:"@",errorMessage:"@",model:"=",id:"@",request:"&",placeholder:"@"},replace:!0,templateUrl:window.staticURI+"/views/directives/zipCodeForm.html",controller:function($scope){$scope.showError=!1;$scope.externalError=!1;$scope.placeholder&&void 0!==$scope.placeholder&&""!==$scope.placeholder||($scope.placeholder="ZIP")},link:function(scope,element,attrs){scope.showForm=!1;setTimeout(function(){scope.showForm=!0},50);scope.defaultErrorMessage=scope.errorMessage;scope.$on("localizeResourcesUpdates",function(){safeApply(scope,function(){scope.defaultErrorMessage=localize.getLocalizedString("label.dealerLocator.error");scope.errorMessage=localize.getLocalizedString("label.dealerLocator.error")})});scope.field=$(element).find("input");$(scope.field).focus(function(){scope.showError=!1;scope.$apply();var that=this;scope.$emit(kiaEvents.ZIPCODE.FOCUS,scope.id);setTimeout(function(){$(that).select()},10)});$(scope.field).focusout(function(){scope.$emit(kiaEvents.ZIPCODE.UNFOCUS,scope.id);scope.field.val().length>0?safeApply(scope,scope.validate()):scope.field.val(scope.model)});scope.$watch("model",function(value){if(0===String(value).length){scope.showError=!1;scope.field.addClass(window.lang+"-no-data")}else scope.field.removeClass(window.lang+"-no-data");5===String(value).length&&scope.$emit(kiaEvents.ZIPCODE.VALID,scope.id)});scope.$on(kiaEvents.ZIPCODE.SUBMIT,function(event,id){if(id===scope.id){scope.send();scope.$emit(kiaEvents.ANALYTICS.ZIPCODE_SUBMIT,id)}});scope.$on(kiaEvents.ZIPCODE.ERROR,function(event,message,id){(id===scope.id||"all"===id)&&safeApply(scope,function(){scope.showError=!0;scope.errorMessage=message;scope.$emit(kiaEvents.ZIPCODE.NOT_VALID,scope.errorMessage,id);scope.$emit(kiaEvents.ANALYTICS.ZIPCODE_ERROR,message,id)})});scope.$on(kiaEvents.ZIPCODE.VALIDATE,function(event){scope.validate()});scope.validate=function(){scope.errorMessage=scope.defaultErrorMessage;var zipPatt=/^\d{5}(?:[-\s]\d{4})?$/;if(void 0!==scope.model&&null!==scope.model&&scope.model.match(zipPatt)){scope.showError=!1;scope.$emit(kiaEvents.ZIPCODE.VALID,scope.defaultErrorMessage,scope.id);return!0}scope.showError=!0;scope.$emit(kiaEvents.ZIPCODE.NOT_VALID,scope.defaultErrorMessage,scope.id);return!1};scope.send=function(){if(scope.validate()){scope.field.blur();return scope.request(scope.model)}};var field=$(element).find("input")[0];Modernizr.placeholder||Placeholders.enable(field)}}}]);angular.module("app").directive("dealerChat",["$log","$http","$window","$timeout","$q","$rootScope","kiaEvents","messageService","contactAtOnceService","zipCodeCookie",function($log,$http,$window,$timeout,$q,$rootScope,kiaEvents,messageService,contactAtOnceService,zipCodeCookie){return{restrict:"A",scope:{year:"@",model:"@",stockNumber:"@",vin:"@",dealer:"=",link:"@",chatEnabled:"@",dealerCode:"@",placement:"@",isTextMessage:"@",defaultTextMessage:"@"},link:function(scope,element,attributes){function setInitParameters(){if(scope.isTextMessage){chatType="textmsg";popupURL=serviceProviderTextURL}else{chatType="chat";popupURL=serviceProviderChatURL}scope.dealerCode&&(merchantId=scope.dealerCode);if(scope.chatEnabled&&"false"!==scope.chatEnabled&&"NO"!==scope.chatEnabled)("true"===scope.chatEnabled||"YES"===scope.chatEnabled)&&(chatEnabled=!0);else{chatEnabled=!1;$(element).hide()}messageService.subscribe("Dealer-Chat-Confirmation",function(event,value){scope.disableChatBtn=!1})}function checkOnlinePresence(){var online=isOnline();online.then(function(status){"online"===status&&chatEnabled&&$(element).show("slow")})}function isOnline(){var url=serviceProviderPresenceURL+"?MerchantId="+merchantId+"&Providerid="+provderId+"&PlacementId="+contactAtOnceService.getPlacementId(chatType,scope.placement)+"&callback=JSON_CALLBACK",deferred=$q.defer();$http.jsonp(url).success(function(data){deferred.resolve(data.presenceStatus)});return deferred.promise}function buildURL(){var url=[];setParams();for(var param in urlParams)void 0!==urlParams[param]&&url.push(encodeURIComponent(param)+"="+encodeURIComponent(urlParams[param]));return popupURL+"?"+url.join("&")}function openDealerChat(url){window.open(url,"","resizable=yes,toolbar=no,menubar=no,location=no,scrollbars=no,status=no,height=400, width=600");scope.$emit(kiaEvents.ANALYTICS.DL_DEALER_CHAT,scope.dealer?scope.dealer.code:scope.dealerCode)}function tealiumTrack(){var trackingObject;trackingObject=scope.isTextMessage?{site_events:{initiate_text_message:"true"},dealer_id:scope.dealerCode||"",event_name:"text message"}:{site_events:{initiate_chat:"true"},dealer_id:scope.dealerCode||"",event_name:"live chat"};try{console.log("call tealium with:");console.log(trackingObject);console.log("--------------");$window._trackAnalytics(trackingObject)}catch(err){console.log(err)}}function setParams(){urlParams.ProviderId=provderId;urlParams.Year=scope.year;urlParams.Make=kiaEvents.GLOBAL.CONTACT_AT_ONCE_MAKE;urlParams.Model=scope.model;urlParams.StockNumber=scope.stockNumber;urlParams.VIN=scope.vin;urlParams.PlacementId=contactAtOnceService.getPlacementId(chatType,scope.placement);if(scope.isTextMessage){urlParams.AdvertiserId=merchantId;urlParams.Message=scope.defaultTextMessage}else urlParams.MerchantId=merchantId;var zip=zipCodeCookie.get();zip&&(urlParams.ZipCode=zip);urlParams.OriginationUrl=window.location.href}function init(){setInitParameters();checkOnlinePresence();var el=scope.link?$(element).find("."+scope.link):element;$(el).on("click",function(){var URL=buildURL();tealiumTrack();openDealerChat(URL);$rootScope.$broadcast(kiaEvents.GLOBAL.CLOSE_NAVIGATION);return!1})}var chatType,popupURL,urlParams={},serviceProviderTextURL="https://mtc.contactatonce.com/MobileTextConnectConversationInitiater.aspx",serviceProviderBaseURL="https://kia.contactatonce.com",serviceProviderChatURL=serviceProviderBaseURL+"/CaoClientContainer.aspx",serviceProviderPresenceURL=serviceProviderBaseURL+"/PresencePostback.aspx",chatEnabled=!1,provderId=kiaEvents.GLOBAL.CONTACT_AT_ONCE_PROVIDER_ID,merchantId=kiaEvents.GLOBAL.CONTACT_AT_ONCE_GENERAL_MERCHANT;init()}}}]);angular.module("app").controller("dealerLocatorController",["$log","$rootScope","$scope","$routeParams","kiaEvents","$location","$http","$timeout","gmapModel","dealerLocatorService","cookieService","dealerLocatorModel",function($log,$rootScope,$scope,$routeParams,kiaEvents,$location,$http,$timeout,gmapModel,dealerLocatorService,cookieService,dealerLocatorModel){var success,failure,update,findMe,findMeError,firstPass=!0;$scope.mapOptions=gmapModel.getMapOptions();$scope.infoboxOptions=gmapModel.getInfoboxOptions();var mapDOMready=$scope.$watch("myMap",function(mapInstance){var iwDOMready=$scope.$watch("myInfoWindow",function(instance){gmapModel.initMap(mapInstance,instance);gmapModel.redrawMap();mapDOMready();iwDOMready()})});success=function(response){if(dealerLocatorService.isValidZip()){gmapModel.getPosFromZipCode($scope.zipCode,function(center,centerAddress){dealerLocatorModel.setZipLatLong(center);dealerLocatorModel.setZipAddress(centerAddress);dealerLocatorModel.update(response.dealers);$scope.dealers=dealerLocatorModel.getDealers();$scope.filters=dealerLocatorModel.getFilters();$scope.codeExist=!0;gmapModel.setCenterAddress(centerAddress);gmapModel.drawMapMarks(dealerLocatorModel.getDealers(),$scope.myMap);gmapModel.setStreetView(!1);$scope.mobile&&gmapModel.setMapInteractions(!0);cookieService.cookie("user-zipcode",$scope.zipCode,{expires:3650,path:"/",domain:""});$scope.$broadcast(kiaEvents.ZIPCODE.EDITMODE_OFF);$scope.$emit(kiaEvents.LOADER.HIDE);setTimeout(function(){gmapModel.offset();gmapModel.redrawMap()},700);if(firstPass&&void 0!==cookieService.cookie("user-featureId")){dealerLocatorModel.addFilter(cookieService.cookie("user-featureId"),!0);$scope.$broadcast(kiaEvents.DL.DEALER_FILTER_ACTION,cookieService.cookie("user-featureId"),!0);firstPass=!1}});$scope.$emit(kiaEvents.ANALYTICS.DEALER_LOCATOR_CONFIRMATION,$scope.zipCode)}else{$scope.dealers=[];gmapModel.removeCurrentMarks();$log.error("DEALER LOCATOR ERROR",response);$scope.$broadcast(kiaEvents.ZIPCODE.ERROR,response.dealers.statusDesc,"all");$scope.$broadcast(kiaEvents.ZIPCODE.EDITMODE_ON)}};failure=function(response){};update=function(zipCode){$scope.$emit(kiaEvents.LOADER.SHOW);zipCode&&($scope.zipCode=zipCode);dealerLocatorService.get({zipCode:$scope.zipCode},success,failure);$scope.$$phase||$scope.$digest()};findMe=function(){gmapModel.findMe(update,findMeError)};findMeError=function(message){$log.error("GEO NOT AVAILABLE",message);$scope.$broadcast(kiaEvents.ZIPCODE.ERROR,message,"all")};$scope.$on(kiaEvents.DL.DEALER_FILTER_ACTION,function(event,filterType,value){if(dealerLocatorService.isValidZip())dealerLocatorModel.filterDealers($scope.zipCode).then(function(result){var zipLoc=dealerLocatorModel.getZipLatLong();$scope.dealers=result;gmapModel.drawMapMarks(result);$scope.fixHeight();gmapModel.fitBoundsWithZip(zipLoc.lat(),zipLoc.lng(),$scope.myMap);$timeout(function(){gmapModel.redrawMap()},500);$scope.$emit(kiaEvents.ANALYTICS.DEALER_FILTER_ACTION,filterType,value)});else{$scope.dealers=[];gmapModel.removeCurrentMarks()}});if(cookieService.cookie("user-zipcode")){$scope.zipCode=cookieService.cookie("user-zipcode");$scope.codeExist=!0;update(cookieService.cookie("user-zipcode"))}else{$scope.zipCode="";$scope.codeExist=!1}$scope.update=update;$scope.findMe=findMe}]);angular.module("app").directive("dealerLocatorInteraction",["kiaEvents","$log","gmapModel","$timeout",function(kiaEvents,$log,gmapModel,$timeout){return{restrict:"A",replace:!0,priority:2,link:function(scope,element,attrs){var onMobileModeON,onMobileModeOFF,onTabletModeON,onTabletModeOFF,filterAnchors={desktop:"dlFilterArrow",tablet:"dlFilterArrowDevice"};scope.sidebar=!0;scope.currentDealer=null;scope.currentDealerListItem=null;scope.mobile=!1;scope.tablet=!1;scope.mobileDetail=!1;scope.detailOpen=!1;scope.filterAnchor=filterAnchors.desktop;scope.toggleSidebar=function(){scope.sidebar?element.find(".dealer-locator-map").removeClass("open").addClass("close"):element.find(".dealer-locator-map").removeClass("close").addClass("open");scope.sidebar=!scope.sidebar;$timeout(function(){gmapModel.offset();gmapModel.redrawMap()},100)};scope.doFixHeight=function(){var mapHeight,$sideBar=element.find(".dealer-locator-sidebar"),$map=element.find(".dealer-locator-map");if(scope.tablet||scope.mobile){mapHeight=scope.tablet?470:240;$map.height(mapHeight+1);$sideBar.height("auto");element.height("auto");element.find(".dealer-locator-list").height("auto");$timeout(function(){element.css("height",$sideBar.height()+mapHeight+element.find(".dealer-locator-device-header").height());$map.height(mapHeight);var barTop=mapHeight+element.find(".dealer-locator-zipcode-side").outerHeight(!0);scope.mobile?$sideBar.css("margin-top",""):$sideBar.css("margin-top",barTop+"px");gmapModel.redrawMap();gmapModel.centerMap()})}else{var nClientAreaHeight=$(window).height();element.height(nClientAreaHeight);$map.height("100%");$sideBar.height("100%").css("margin-top","");var $listItems=element.find(".dealer-locator-list");$listItems.height("");var sideBarHt=$listItems.outerHeight(!0)+element.find(".dealer-locator-zipcode-side").outerHeight(!0)+element.find(".dealer-locator-filters").outerHeight(!0);sideBarHt>nClientAreaHeight&&element.height(sideBarHt)}};scope.fixHeight=function(){$timeout(function(){scope.doFixHeight();gmapModel.redrawMap();$timeout(function(){gmapModel.centerMap()})})};scope.$on(kiaEvents.GMAP.CLOSE_INFOBOX,function(event,dealer){if(scope.currentDealerListItem){scope.currentDealerListItem.unselect();scope.currentDealerListItem=null;scope.$$phase||scope.$digest()}});scope.$on(kiaEvents.GMAP.OPEN_INFOBOX,function(event,dealer){if(scope.currentDealerListItem){scope.currentDealerListItem.unselect();scope.currentDealerListItem=element.find("#dl_"+dealer.id).scope()}else scope.currentDealerListItem=element.find("#dl_"+dealer.id).scope();scope.mobile||scope.currentDealerListItem.select();scope.currentDealer=dealer;scope.mobile?scope.openMobileDetail():gmapModel.openMarkerInfo(dealer)});scope.openMobileDetail=function(){scope.mobileDetail=!0};scope.closeMobileDetail=function(){scope.mobileDetail=!1};scope.$on("$routeChangeStart",function(next,current){$(window).off("resize.dealerLocatorController")});scope.$on(kiaEvents.DL.OPEN_FILTER_MENU,function(event){scope.filterMenu=!0});scope.$on(kiaEvents.DL.CLOSE_FILTER_MENU_FILTER,function(event){scope.filterMenu=!1});scope.$watch("filterMenu",function(value){value?scope.sidebar||scope.toggleSidebar():scope.$broadcast(kiaEvents.DL.CLOSE_FILTER_MENU)});onMobileModeON=function(){scope.mobile=!0;scope.tablet=!1;gmapModel.setMapInteractions(!0);gmapModel.setMobile(!0);gmapModel.closeCurrentMarker();scope.filterAnchor=filterAnchors.tablet;scope.fixHeight()};onMobileModeOFF=function(){scope.mobile=!1;scope.tablet=!0;gmapModel.setMapInteractions(!0);gmapModel.setMobile(!1);scope.fixHeight()};onTabletModeON=function(){scope.tablet=!0;gmapModel.setMapInteractions(!0);scope.filterAnchor=filterAnchors.tablet;scope.fixHeight()};onTabletModeOFF=function(){scope.tablet=!1;scope.filterAnchor=filterAnchors.desktop;scope.fixHeight()};scope.$on(kiaEvents.RESPONSIVE.MATCH825,onTabletModeON);scope.$on(kiaEvents.RESPONSIVE.MATCH640,onMobileModeON);scope.$on(kiaEvents.RESPONSIVE.MATCH320,onMobileModeON);scope.$on(kiaEvents.RESPONSIVE.UNMATCH640,onMobileModeOFF);scope.$on(kiaEvents.RESPONSIVE.UNMATCH825,onTabletModeOFF)}}}]);angular.module("app").directive("dealerLocatorIterator",["kiaEvents",function(kiaEvents){return{restrict:"A",scope:{dealer:"=",fixer:"&",last:"=",mobile:"="},link:function(scope,element,attrs){scope.selected=!1;scope.last&&scope.fixer();scope.selectDealer=function(){if(scope.mobile){scope.$emit(kiaEvents.GMAP.OPEN_INFOBOX,scope.dealer);return!0}if(!scope.selected){scope.selected=!0;scope.$emit(kiaEvents.GMAP.OPEN_INFOBOX,scope.dealer)}};scope.unselect=function(){scope.selected=!1};scope.select=function(){scope.selected=!0}}}}]);angular.module("app").directive("dealerFilters",["kiaEvents","dealerLocatorModel","safeApply","$log","cookieService",function(kiaEvents,dealerLocatorModel,safeApply,$log,cookieService){return{restrict:"AE",replace:!0,scope:{dealerFilters:"=",currenFilters:"=",menuVisible:"=",resultCount:"="},link:function(scope,element,attrs){var firstPass=!0;scope.value="all";scope.selectedFilterValue="";var getSelectedFilterValue=function(){window.setTimeout(function(){var selected="";$("input:checked",element).each(function(index,input){index>0&&(selected+=", ");selected+=$(input).parents(".filter-holder").find("label").text()});scope.selectedFilterValue=selected},100)},setFilterCondition=function(inputId,inputVal){inputId+="";if(inputVal){var $inputs=$("input",element);$inputs.not("#"+inputId).attr("checked",!1).closest("span").removeClass("checked");element.find("#"+inputId).checked=!0}};scope.$on(kiaEvents.DL.DEALER_FILTER_ACTION,function(evt,inputId,inputVal){setFilterCondition(inputId,inputVal);getSelectedFilterValue()});scope.$on(kiaEvents.ZIPCODE.EDITMODE_OFF,function(){element.find("input").removeAttr("checked");element.find("input").parent().removeClass("checked");var features=dealerLocatorModel.getCurrentFiltersApplied(!0);if(firstPass&&void 0!==cookieService.cookie("user-featureId")){features[0]=!1;features[cookieService.cookie("user-featureId")]=!0;firstPass=!1}for(var f in features)if(features[f]){element.find("#"+f)[0].checked=!0;element.find("#"+f).parent().addClass("checked")}getSelectedFilterValue()})}}}]);angular.module("app").directive("dealerFilter",["kiaEvents","$log","dealerLocatorModel","safeApply",function(kiaEvents,$log,dealerLocatorModel,safeApply){return{scope:{dealerFilter:"@"},restrict:"AE",replace:!1,priority:99,link:function($scope,iElm,iAttrs,controller){iElm.attr("id",$scope.dealerFilter);iElm.attr("value",$scope.dealerFilter);$scope.updateFilter=function(checked){$scope.$emit(kiaEvents.DL.DEALER_FILTER_ACTION,$scope.dealerFilter,checked);dealerLocatorModel.updateTempFilters()};iElm.on("click",function(event){var that=this,parentElement=$(that).closest("span");if(parentElement.is(".checked")){event.preventDefault();event.stopImmediatePropagation();return!0}safeApply($scope,function(){dealerLocatorModel.addFilter($scope.dealerFilter,that.checked)});window.setTimeout(function(){$scope.updateFilter(that.checked)},100);return!0})}}}]);angular.module("app").directive("dealerLocatorZipBox",["kiaEvents","$log","localize",function(kiaEvents,$log,localize){return{restrict:"A",replace:!0,scope:{zipCode:"=",zipId:"@",requestSubmit:"&",requestFind:"&",data:"="},link:function(scope,element,attrs){scope.validZipCode=!0;scope.sideEditMode=!1;scope.filterMenu=!1;scope.$on("localizeResourcesUpdates",function(){scope.errorMessage=localize.getLocalizedString("label.dealerLocator.error")});scope.submitZipForm=function(){scope.$broadcast(kiaEvents.ZIPCODE.SUBMIT,scope.zipId)};scope.showFilters=function(){scope.filterMenu||scope.$emit(kiaEvents.DL.OPEN_FILTER_MENU);scope.filterMenu=!scope.filterMenu};scope.$on(kiaEvents.DL.CLOSE_FILTER_MENU,function(event){scope.filterMenu=!1});scope.$on(kiaEvents.ZIPCODE.NOT_VALID,function(event,message,id){scope.validZipCode=!1;scope.initialErrorMessage=message;scope.errorMessage=message});scope.$on(kiaEvents.ZIPCODE.VALID,function(event,id){scope.validZipCode=!0});scope.$on(kiaEvents.ZIPCODE.ERROR,function(event,message,id){scope.validZipCode=!1;scope.errorMessage=message});scope.$on(kiaEvents.ZIPCODE.FOCUS,function(event,id){scope.sideEditMode=!0});scope.$on(kiaEvents.ZIPCODE.EDITMODE_OFF,function(event){scope.sideEditMode=!1});scope.$on(kiaEvents.ZIPCODE.EDITMODE_ON,function(event){scope.sideEditMode=!0})}}}]);angular.module("app").directive("dealerInfoboxDetail",["$window","kiaEvents","$log",function($window,kiaEvents,$log){return{restrict:"A",replace:!0,scope:{dealer:"=",mobile:"="},templateUrl:window.staticURI+"/views/dealerLocator/dealerInfoboxDetail.html",link:function(scope,element,attrs){scope.showAllHours=!1;scope.baseURI=$window.baseURI;scope.googleDirections=function(){$window.open(scope.dealer.directionsLink,"_blank");scope.$emit(kiaEvents.ANALYTICS.DL_GET_DIRECTIONS,scope.dealer)};scope.dealerSite=function(){$window.open(scope.dealer.url,"_blank");scope.$emit(kiaEvents.ANALYTICS.DL_DEALER_EXIT,scope.dealer)};scope.getQuote=function(){$window.location=$window.baseURI+"/forms/getaquote?dealer="+scope.dealer.code};scope.requestTestDrive=function(){$window.location=$window.baseURI+"/forms/testdriverequest?dealer="+scope.dealer.code}}}}]);angular.module("app").factory("dealerLocatorModel",["$log","$q","dealerLocatorService",function($log,$q,dealerLocatorService){var dealers,update,getDealers,filters,getFilters,filterDealers,setDealerFilterData,updateTempFilters,setZipLatLong,setZipAddress,getZipLatLong,getZipAddress,addFilter,removeFilter,filterUniqueApplied,filterMultipleApplied,uniqueMode,resetAllFilters,setFilterMode,getCurrentFiltersApplied,selectedFilterId,zipCodeLocation,zipCodeAddress,marklabels="ABCDEFGHIJKLMNOPQRSTUVXYZ",features={0:!0},featuresTemp={0:!0};uniqueMode=!0;filterUniqueApplied=[{propertyName:"all",value:"all"}];filterMultipleApplied={};update=function(data){dealers=[];for(var l=data.result.length,i=0;l>i;i++)data.result[i].id=marklabels.charAt(i);dealers=data.result;filters=[];resetAllFilters(data);filters=data.features;setDealerFilterData()};setDealerFilterData=function(){for(var i=dealers.length;i--;){for(var services=[],k=0,numFeatures=dealers[i].featureIds.length;numFeatures>k;){for(var j=filters.length;j--;)filters[j].featureId===dealers[i].featureIds[k]&&services.push(filters[j].featureName);k++}dealers[i].services=services}};getDealers=function(){return dealers};getFilters=function(){return filters};filterDealers=function(zipCode){var result=[],deferred=$q.defer();dealers||deferred.resolve(result);features[0]===!0&&dealers?deferred.resolve(dealers):dealers&&dealerLocatorService.get({zipCode:zipCode,featureId:selectedFilterId}).then(function(result){result.data.dealers?deferred.resolve(result.data.dealers.result):deferred.resolve([])})["catch"](function(err){deferred.resolve(result)});return deferred.promise};setFilterMode=function(value){uniqueMode=!0};setZipLatLong=function(latLag){zipCodeLocation=latLag};setZipAddress=function(address){zipCodeAddress=address};getZipLatLong=function(){return zipCodeLocation};getZipAddress=function(){return zipCodeAddress};addFilter=function(property,value){features[property]=value;if(value)for(var k in features)if(k===property){features[k]=!0;selectedFilterId=property}else features[k]=!1};removeFilter=function(property){delete filterMultipleApplied[property]};getCurrentFiltersApplied=function(temp){return temp?featuresTemp:features};updateTempFilters=function(reset){reset?features=angular.extend({},featuresTemp):featuresTemp=angular.extend({},features)};resetAllFilters=function(data){for(var j=0;j<data.features.length;j++)features[data.features[j].featureId]=!1;features[0]=!0;featuresTemp=angular.extend({},features)};return{update:update,getDealers:getDealers,getFilters:getFilters,filterDealers:filterDealers,addFilter:addFilter,removeFilter:removeFilter,setFilterMode:setFilterMode,getCurrentFiltersApplied:getCurrentFiltersApplied,updateTempFilters:updateTempFilters,resetAllFilters:resetAllFilters,setZipLatLong:setZipLatLong,setZipAddress:setZipAddress,getZipLatLong:getZipLatLong,getZipAddress:getZipAddress}}]);angular.module("app").factory("dealerLocatorService",["$log","$http","$q","messageService","kiaEvents",function($log,$http,$q,messageService,kiaEvents){function cancelRequest(){canceller.resolve()}var defaultRequestParams,url,get,urlFormat,isValidZip,validZip,canceller=$q.defer();url=window.baseURI+"/data/dealers/locator";defaultRequestParams={zipCode:"94133"};isValidZip=function(){return validZip};get=function(criteria,success,failure){var requestParams=jQuery.extend({},defaultRequestParams,criteria),serviceURL=urlFormat(url,requestParams);cancelRequest();canceller=$q.defer();return $http.get(serviceURL,{timeout:canceller.promise}).success(function(data,getResponseHeaders){messageService.publish("dealerLocatorSearch",{source:"dealerLocatorService",criteria:criteria});if(angular.isFunction(success)){validZip=data.dealers.status===kiaEvents.SERVICES.SUCCESS?!0:!1;return success(data)}})["catch"](function(err){return err})};urlFormat=function(baseUrl,params){var url="";url+="/"+params.zipCode+"?results=7";params.hasOwnProperty("featureId")&&(url+="&featureId="+params.featureId);return baseUrl+url};return{get:get,isValidZip:isValidZip}}]);!function($){function getPasteEvent(){var el=document.createElement("input"),name="onpaste";el.setAttribute(name,"");return"function"==typeof el[name]?"paste":"input"}var caretTimeoutId,pasteEventName=getPasteEvent()+".mask",ua=navigator.userAgent,iPhone=/iphone/i.test(ua),android=/android/i.test(ua);$.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn",placeholder:"_"};$.fn.extend({caret:function(begin,end){var range;if(0!==this.length&&!this.is(":hidden")){if("number"==typeof begin){end="number"==typeof end?end:begin;return this.each(function(){if(this.setSelectionRange)this.setSelectionRange(begin,end);else if(this.createTextRange){range=this.createTextRange();range.collapse(!0);range.moveEnd("character",end);range.moveStart("character",begin);range.select()}})}if(this[0].setSelectionRange){begin=this[0].selectionStart;end=this[0].selectionEnd}else if(document.selection&&document.selection.createRange){range=document.selection.createRange();begin=0-range.duplicate().moveStart("character",-1e5);end=begin+range.text.length}return{begin:begin,end:end}}},unmask:function(){return this.trigger("unmask")},mask:function(mask,settings){var input,defs,tests,partialPosition,firstNonMaskPos,len;if(!mask&&this.length>0){input=$(this[0]);return input.data($.mask.dataName)()}settings=$.extend({placeholder:$.mask.placeholder,completed:null},settings);defs=$.mask.definitions;tests=[];partialPosition=len=mask.length;firstNonMaskPos=null;$.each(mask.split(""),function(i,c){if("?"==c){len--;partialPosition=i}else if(defs[c]){tests.push(new RegExp(defs[c]));null===firstNonMaskPos&&(firstNonMaskPos=tests.length-1)}else tests.push(null)});return this.trigger("unmask").each(function(){function seekNext(pos){for(;++pos<len&&!tests[pos];);return pos}function seekPrev(pos){for(;--pos>=0&&!tests[pos];);return pos}function shiftL(begin,end){
var i,j;if(!(0>begin)){for(i=begin,j=seekNext(end);len>i;i++)if(tests[i]){if(!(len>j&&tests[i].test(buffer[j])))break;buffer[i]=buffer[j];buffer[j]=settings.placeholder;j=seekNext(j)}writeBuffer();input.caret(Math.max(firstNonMaskPos,begin))}}function shiftR(pos){var i,c,j,t;for(i=pos,c=settings.placeholder;len>i;i++)if(tests[i]){j=seekNext(i);t=buffer[i];buffer[i]=c;if(!(len>j&&tests[j].test(t)))break;c=t}}function keydownEvent(e){var pos,begin,end,k=e.which;if(8===k||46===k||iPhone&&127===k){pos=input.caret();begin=pos.begin;end=pos.end;if(end-begin===0){begin=46!==k?seekPrev(begin):end=seekNext(begin-1);end=46===k?seekNext(end):end}clearBuffer(begin,end);shiftL(begin,end-1);e.preventDefault()}else if(27==k){input.val(focusText);input.caret(0,checkVal());e.preventDefault()}}function keypressEvent(e){var p,c,next,k=e.which,pos=input.caret();if(!(e.ctrlKey||e.altKey||e.metaKey||32>k)&&k){if(pos.end-pos.begin!==0){clearBuffer(pos.begin,pos.end);shiftL(pos.begin,pos.end-1)}p=seekNext(pos.begin-1);if(len>p){c=String.fromCharCode(k);if(tests[p].test(c)){shiftR(p);buffer[p]=c;writeBuffer();next=seekNext(p);android?setTimeout($.proxy($.fn.caret,input,next),0):input.caret(next);settings.completed&&next>=len&&settings.completed.call(input)}}e.preventDefault()}}function clearBuffer(start,end){var i;for(i=start;end>i&&len>i;i++)tests[i]&&(buffer[i]=settings.placeholder)}function writeBuffer(){input.val(buffer.join(""))}function checkVal(allow){var i,c,test=input.val(),lastMatch=-1;for(i=0,pos=0;len>i;i++)if(tests[i]){buffer[i]=settings.placeholder;for(;pos++<test.length;){c=test.charAt(pos-1);if(tests[i].test(c)){buffer[i]=c;lastMatch=i;break}}if(pos>test.length)break}else if(buffer[i]===test.charAt(pos)&&i!==partialPosition){pos++;lastMatch=i}if(allow)writeBuffer();else if(partialPosition>lastMatch+1){input.val("");clearBuffer(0,len)}else{writeBuffer();input.val(input.val().substring(0,lastMatch+1))}return partialPosition?i:firstNonMaskPos}var input=$(this),buffer=$.map(mask.split(""),function(c,i){return"?"!=c?defs[c]?settings.placeholder:c:void 0}),focusText=input.val();input.data($.mask.dataName,function(){return $.map(buffer,function(c,i){return tests[i]&&c!=settings.placeholder?c:null}).join("")});input.attr("readonly")||input.one("unmask",function(){input.unbind(".mask").removeData($.mask.dataName)}).bind("focus.mask",function(){clearTimeout(caretTimeoutId);var pos;focusText=input.val();pos=checkVal();caretTimeoutId=setTimeout(function(){writeBuffer();pos==mask.length?input.caret(0,pos):input.caret(pos)},10)}).bind("blur.mask",function(){checkVal();input.val()!=focusText&&input.change()}).bind("keydown.mask",keydownEvent).bind("keypress.mask",keypressEvent).bind(pasteEventName,function(){setTimeout(function(){var pos=checkVal(!0);input.caret(pos);settings.completed&&pos==input.val().length&&settings.completed.call(input)},0)});checkVal()})}})}(jQuery);angular.module("app").controller("formsController",["$log","$rootScope","$scope","$routeParams","kiaEvents","safeApply","$location","zipCodeCookie","messageService","dealerListService","vinDetailService","dealerDetailService","getaquoteService","requestUpdateService","yearListService","makeListService","modelListService","conditionListService","financeOptionsService","formsModel","gmapModel","vinQuoteService","kioskService","lightboxService","cookieService","localize",function($log,$rootScope,$scope,$routeParams,kiaEvents,safeApply,$location,zipCodeCookie,messageService,dealerListService,vinDetailService,dealerDetailService,getaquoteService,requestUpdateService,yearListService,makeListService,modelListService,conditionListService,financeOptionsService,formsModel,gmapModel,vinQuoteService,kioskService,lightboxService,cookieService,localize){$scope.hideForKiosk="kiosk"===window.mode?!0:!1;$scope.showTrading=!1;$scope.showFinance=!1;$scope.contentMedia=window.contentURI;$scope.basePath=window.baseURI;$scope.available=!1;$scope.user={address:"",optAddress:"",city:"",state:"",phone:"",contact:"1",zipcode:"",downPayment:"",paymentOption:"",miles:"",chooseYear:"",chooseMake:"",chooseModel:"",chooseCondition:""};$scope.userRequest={zipcode:""};$scope.header={zipcode:""};$scope.dealers=[];$scope.dealersSelected=[];$scope.dealersFinal=[];$scope.dealerCodes=[];$scope.dealersUniqueList=[];$scope.series=$routeParams.series;$scope.year=$routeParams.year;$scope.openNav=!1;$scope.leadType="QuickQuote";var vehicleObject={};$scope.emailPattern=/^[\w-]+(?:\.[\w-]+)*@(?:[\w-]+\.)+[a-zA-Z]{2,7}$/;$scope.dPayPattern=/^[\d]{0,6}$/;$scope.zipPattern=/^[\d]{5}$/;$scope.namePattern=/^[\a-zA-Z\s\&\/\.\(\)\-,']*$/;$scope.addressPattern=/^[\a-zA-Z\d\s\#\.\,\;\:']*$/;$scope.cityPattern=/^[\a-zA-Z\s\-\,\.\;\'\&\/\(\)]*$/;$scope.showLoader=!1;$scope.execCounter=1;$scope.invalidZipNew=!1;$scope.showVehicleSelector=!1;$scope.zipCode="";$scope.siteID="1";$scope.lang=window.lang;$scope.$on("CAR-IMAGE AND TRIM",function(event,carimage,trim){$scope.carImage800=carimage;trim&&($scope.trim=trim)});$scope.$on("SERIES-NAME",function(event,seriesName){$scope.seriesName=seriesName});$scope.$on("ZIPCODE-VALIDATION",function(event,value){$scope.invalidZipNew=value});$scope.$on("CURRENT-FORM",function(event,value){$scope.currentForm=value;$scope.statesLabel="request-brochure"===$scope.currentForm?"label.forms.placeholder.state":"label.forms.placeholder.optState";$scope.openNav=!1});$rootScope.$on(kiaEvents.ZIPCODE.FOCUS,function(event,id){$scope.editMode=!0});$scope.$on(kiaEvents.ZIPCODE.EDITMODE_OFF,function(event){$scope.editMode=!1});$scope.$on("ANDROID-DEVICE-DETECTION",function(event,value){$scope.formatPhone=value});$rootScope.$on("vehicleSelector.selected",function(evt,args){"getaquote"===args.target?$location.url("/forms/getaquote/"+args.vehicle.series+"/"+args.vehicle.year+args.params):"updates"===args.target&&$location.url("/forms/updatesrequest/"+args.vehicle.series+"/"+args.vehicle.year)});$scope.templates=[{name:"template1.html",url:"forms-dealer-list"},{name:"template2.html",url:"forms-entry-list"},{name:"template3.html",url:"forms-success-screen"}];$scope.template=$scope.templates[0];$scope.templates2=[{name:"template1.html",url:"request-updates-form"},{name:"template2.html",url:"request-updates-success"}];$scope.template2=$scope.templates2[0];$scope.formValues=[];$scope.reqUpdtValues=[];var getaquoteSuccess=function(data){if("Success"===data.status){$(window).scrollTop(0);$scope.template=$scope.templates[2]}else if("601"===data.statusCode)safeApply($scope,function(){$scope.$broadcast("ZIPCODE-VALIDATION",!0);$scope.enableBtn();$scope.zipMessage=data.result;$scope.execCounter--;$scope.showLoader=!1});else{$scope.enableBtn();$scope.execCounter--;$scope.showLoader=!1}},getaquoteFailure=function(data){$log.error("Failed GetAQuote Form Submission: FormsController",data)};$scope.getaquoteFormSubmit=function(series,formValues){return getaquoteService.get(series,formValues,getaquoteSuccess,getaquoteFailure)};var vinQuoteFailure=function(data){$log.error("Failed VIN GetAQuote Form Submission: FormsController")};$scope.vinQuoteSubmit=function(series,formValues){return vinQuoteService.get(series,formValues,getaquoteSuccess,vinQuoteFailure)};$scope.hideDealerModelNotAvailable=function(){lightboxService.close("dealerModelNotAvailable")};$scope.getMtfTitle=function(){var title="",path=$location.path().split("/"),type=path[path.length-1];"updatesrequest"===type&&(title=localize.getLocalizedString("label.mtf.title.updates"));return title};$scope.$on("lightbox.dealerModelNotAvailable.open",function(evt,obj){$scope.m_year=obj.year;$scope.m_model=obj.model;$scope.m_dealer=obj.dealer;$scope.m_image=obj.image;$scope.m_featureId=obj.featureId;lightboxService.open("dealerModelNotAvailable")});$scope.dealerNotAvailableFind=function(){cookieService.cookie("user-featureId",$scope.m_featureId,{expires:0,path:"/",domain:""});window.location.href=window.baseURI+"/dealers/locator"};$scope.formSubmit=function(){var financeOption,purchaseOption,contactPreference;$scope.submitted=!0;$(window).scrollTop(0);if($scope.quoteForm.$valid&&1===$scope.execCounter){$scope.execCounter++;$scope.disableBtn();$scope.showLoader=!0;$scope.dealerHide=!0;if(0===$scope.counter)$scope.dealerVal=[$scope.dealerCode];else{$scope.dealerVal=[];for(var dealerLen=$scope.dealersUniqueList.length,j=0;dealerLen>j;j++)$scope.dealerVal.push($scope.dealersUniqueList[j].code)}if($scope.formatPhone){var arrChars,formatedString="";if($scope.user.phone){arrChars=$scope.user.phone.split("");for(var i=0;10>i;i++){(3===i||6===i)&&(formatedString+="-");formatedString+=arrChars[i]}}$scope.user.phone=formatedString}var customerObject={firstName:$scope.user.first,lastName:$scope.user.last,address1:$scope.user.address,address2:$scope.user.optAddress,city:$scope.user.city,state:$scope.user.state,zipcode:$scope.user.zipcode,email:$scope.user.email,phone:$scope.user.phone,contactTypeId:$scope.user.contact,optIn:$scope.user.optin||void 0===$scope.user.optin,preferredLanguage:window.lang};$scope.user.contact="1";contactPreference="email";if($scope.user.paymentOption){if("2"===$scope.user.paymentOption){financeOption="finance";purchaseOption="Finance"}else if("3"===$scope.user.paymentOption){financeOption="finance";purchaseOption="Lease"}else if("4"===$scope.user.paymentOption){financeOption="cash";purchaseOption="Cash"}}else{financeOption="";purchaseOption=""}var financeObject={downPayment:$scope.user.downPayment,financeOption:financeOption,purchaseType:purchaseOption},tradeInVehicleObject={year:$scope.user.chooseYear.value,make:$scope.user.chooseMake.value,model:$scope.user.chooseModel.value,condition:$scope.user.chooseCondition.value};""!==$scope.user.miles&&(tradeInVehicleObject.mileage=$scope.user.miles);$scope.year&&!vehicleObject.modelYear&&(vehicleObject.modelYear=$scope.year);$scope.formValues={customerRequestTypeId:"2",leadType:$scope.leadType,leadSubType:"Inventory",siteId:$scope.siteID,dealers:$scope.dealerVal,optIn:"",customer:customerObject,vehicle:vehicleObject,tradeInVehicle:tradeInVehicleObject,finance:financeObject};$scope.test=$scope.user.phone;$scope.vinExists===!0?$scope.vinQuoteSubmit($scope.series,$scope.formValues):$scope.getaquoteFormSubmit($scope.series,$scope.formValues);$scope.$emit(kiaEvents.ANALYTICS.QUICKQUOTE_SUCCESS_CONFIRMATION,$scope.dealerVal);$scope.$emit(kiaEvents.ANALYTICS.QUICKQUOTE_CONTACT_INFO,contactPreference,$scope.user.contact)}else{$log.error("Invalid Form Parameters");$scope.$watch("visibleErrors",function(){$scope.errorOffset()})}};var successVinDetail=function(data){var telNum="+1-"+data.dealerPhone.replace(/-/g,"");$scope.vehicleDetail={};$scope.vehicleDetail=data;$scope.vehicleDetail.dealerPhoneFull=telNum;$scope.dealerCode=$scope.vehicleDetail.dealerCode;vehicleObject={vehicleName:$scope.series,modelYear:$scope.year,vin:$scope.vehicleDetail.vin,exteriorColor:$scope.vehicleDetail.exteriorColorName,interiorColor:$scope.vehicleDetail.interiorColorName,trim:$scope.vehicleDetail.trim};$scope.dealerCodes=[$scope.dealerCode];$scope.$emit(kiaEvents.ANALYTICS.QUICKQUOTE_SELECT_DEALER,$scope.dealerCodes)},failureVinDetail=function(data){$log.error("Failed VIN Detail loading: FormsController")};$scope.loadVinDetails=function(vinID){return vinDetailService.get(vinID,$scope.zipCode,successVinDetail,failureVinDetail)};var successDealerDetail=function(data){var telNum="+1-"+data.phone.replace(/-/g,"");$scope.vehicleDetail={dealerName:data.name,dealerDistanceFromUser:data.distFromUserFormatted,dealerAddress:data.address,dealerCity:data.city,dealerState:data.state,dealerZipcode:data.zipcode,dealerPhone:data.phone,dealerPhoneFull:telNum};$scope.dealerCode=data.code;$scope.dealerCodes=[$scope.dealerCode];$scope.$emit(kiaEvents.ANALYTICS.QUICKQUOTE_SELECT_DEALER,$scope.dealerCodes)},failureDealerDetail=function(data){$log.error("Failed Dealer Detail loading: FormsController")};$scope.loadDealerDetails=function(dealerID){return dealerDetailService.get(dealerID,$scope.zipCode,successDealerDetail,failureDealerDetail)};$scope.deepLink=function(){var urlAttributes=$location.search();if(urlAttributes.vin){$scope.vinExists=!0;$scope.VIN=urlAttributes.vin;$scope.loadVinDetails(urlAttributes.vin);$scope.template=$scope.templates[1]}else if(urlAttributes.dealer){$scope.dealerExists=!0;$scope.vinExists=!1;$scope.leadType="DealerLocator";$scope.loadDealerDetails(urlAttributes.dealer);$scope.template=$scope.templates[1]}else if("build"===urlAttributes.section){$scope.leadType="BuildAndPrice";vehicleObject=formsModel.data;$scope.template=$scope.templates[0];$scope.vinExists=!1}else{$scope.template=$scope.templates[0];$scope.vinExists=!1;$scope.dealerExists=!1}};var success=function(data){if("200"===data.dealers.statusCode){$scope.noResult=!1;if(data.dealers.isOutOfRange===!0){$scope.noResult=!0;$scope.noResultData={series:$scope.seriesName,distance:data.dealers.result[0].distance.match(/[0-9]+\.?[0-9]{0,2}/)[0]}}if($scope.available===!1||$scope.updateZip===!0){zipCodeCookie.set($scope.zipCode);$scope.available=!0;$scope.header.zipcode=$scope.zipCode;$scope.user.zipcode=$scope.zipCode;$scope.userRequest.zipcode=$scope.zipCode;$scope.deepLink()}else $scope.available=!0;$scope.dealers.splice(0);$scope.dealersSelected.splice(0);for(var phoneNum,resultLen=4,i=0;resultLen>i&&data.dealers.result[i];i++){data.dealers.result[i].distance=data.dealers.result[i].distance.match(/[0-9]+\.?[0-9]{0,2}/);phoneNum="+1-"+data.dealers.result[i].phones[0].number.replace(/-/g,"");var oDealer={name:data.dealers.result[i].name,code:data.dealers.result[i].code,distFromUser:data.dealers.result[i].distance[0],address:data.dealers.result[i].location.street1,city:data.dealers.result[i].location.city,state:data.dealers.result[i].location.state,zipcode:data.dealers.result[i].location.zipCode,phone:data.dealers.result[i].phones[0].number,phoneFull:phoneNum,chatEnabled:data.dealers.result[i].chatEnabled,selected:0===i};$scope.dealers.push(oDealer)}$scope.$broadcast(kiaEvents.ZIPCODE.EDITMODE_OFF);$scope.dealersSelected.push($scope.dealers[0])}else"601"===data.dealers.statusCode&&($scope.updateZip===!0?$scope.$broadcast(kiaEvents.ZIPCODE.ERROR,data.dealers.statusDesc,"formsZipSearch"):$scope.$broadcast(kiaEvents.ZIPCODE.ERROR,data.dealers.statusDesc,"formZipCode"))},failure=function(data){$log.error("Unsuccessful Service Call: FormsController")};$scope.load=function(){if($scope.zipCode){var params={zip:$scope.zipCode,series:$scope.series,year:$scope.year};return dealerListService.get(params,success,failure)}};$scope.checkZipcode=function(){$scope.counter=0;formsModel.init();if(zipCodeCookie.get()){$scope.zipCode=zipCodeCookie.get();$scope.user.zipcode=$scope.zipCode;$scope.header.zipcode=$scope.zipCode;$scope.userRequest.zipcode=$scope.zipCode;$scope.available=!0;$scope.deepLink();$scope.$watch("currentForm",function(){"get-quote"===$scope.currentForm&&$scope.load()})}else $scope.available=!1};var successFinance=function(data){$scope.options=[];for(var resultLen=data.purchaseTypes.result.length,i=0;resultLen>i;i++){var oOption={value:data.purchaseTypes.result[i].name,id:data.purchaseTypes.result[i].id};$scope.options.push(oOption)}},failureFinance=function(data){};$scope.getFinanceOptions=function(){return financeOptionsService.get(successFinance,failureFinance)};$scope.submitMyForm=function(){var params={zip:$scope.zipCode,series:$scope.series,year:$scope.year};dealerListService.get(params,success,failure)};$scope.submitZipForm=function(){$scope.$broadcast(kiaEvents.ZIPCODE.SUBMIT,"formZipCode")};$scope.update=function(zipCode){$scope.updateZip=!0;$scope.zipCode=zipCode;var params={zip:$scope.zipCode,series:$scope.series,year:$scope.year};dealerListService.get(params,success,failure)};var locateSuccess=function(zipCode){$scope.zipCode=zipCode;$scope.update(zipCode);$scope.$$phase||$scope.$digest()},locateFailure=function(message){$log.error("Location detection failure",message);$scope.$broadcast(kiaEvents.ZIPCODE.ERROR,message,"formZipCode")};$scope.locateUser=function(){gmapModel.findMe(locateSuccess,locateFailure)};messageService.subscribe(kiaEvents.GLOBAL.DEALER_UPDATE,function(event,data){var index=$scope.dealersSelected.indexOf(data.dealer);data.dealer.selected&&-1===index?$scope.dealersSelected.push(data.dealer):data.dealer.selected||-1===index||$scope.dealersSelected.splice(index,1)});$scope.checkDealers=function(){var dealerLen=$scope.dealersSelected.length;$scope.dealersFinal.splice(0);for(var i=0;dealerLen>i;i++)if($scope.dealersSelected[i].selected===!0){$scope.counter++;$scope.dealersFinal.push($scope.dealersSelected[i])}$scope.dealerCodes.splice(0);$scope.dealersUniqueList.splice(0);$.each($scope.dealersFinal,function(i,el){if(-1===$.inArray(el.code,$scope.dealerCodes)){$scope.dealersUniqueList.push(el);$scope.dealerCodes.push(el.code)}});if($scope.counter>=1){$scope.template=$scope.templates[1];$scope.noDealer=!1;$(window).scrollTop(0);$scope.$emit(kiaEvents.ANALYTICS.QUICKQUOTE_SELECT_DEALER,$scope.dealerCodes)}else $scope.noDealer=!0};var successRequestUpdate=function(data){if("Success"===data.status){$(window).scrollTop(0);$scope.$emit(kiaEvents.ANALYTICS.UPDATES_COMPLETE);$scope.template2=$scope.templates2[1]}else if("601"===data.statusCode)safeApply($scope,function(){$scope.$broadcast("ZIPCODE-VALIDATION",!0);$scope.enableBtn();$scope.zipMessage=data.result;$scope.execCounter--;$scope.showLoader=!1});else{$scope.enableBtn();$scope.execCounter--;$scope.showLoader=!1}},failureRequestUpdate=function(data){};$scope.requestUpdateSubmit=function(formValues){return requestUpdateService.get(formValues,$scope.series,successRequestUpdate,failureRequestUpdate)};$scope.requestUpdates=function(){$scope.submitted=!0;$(window).scrollTop(0);$scope.hideForKiosk&&$("input[ng-model]",$("#receive-update-form")).each(function(index,item){"checkbox"!==angular.element(this).attr("type")&&"radio"!==angular.element(this).attr("type")&&angular.element(this).controller("ngModel").$setViewValue($(this).val())});if($scope.requestUpdateForm.$valid&&1===$scope.execCounter){$scope.execCounter++;$scope.disableBtn();$scope.showLoader=!0;if($scope.formatPhone){var arrChars,formatedString="";if($scope.userRequest.phone){arrChars=$scope.userRequest.phone.split("");for(var i=0;10>i;i++){(3===i||6===i)&&(formatedString+="-");formatedString+=arrChars[i]}}$scope.userRequest.phone=formatedString}var reqCustomer={firstName:$scope.userRequest.first,lastName:$scope.userRequest.last,address1:$scope.userRequest.address,address2:$scope.userRequest.optAddress,city:$scope.userRequest.city,state:$scope.userRequest.state,zipcode:$scope.userRequest.zipcode,email:$scope.userRequest.email,phone:$scope.userRequest.phone,contactTypeId:$scope.userRequest.contact,preferredLanguage:window.lang};$scope.reqUpdtValues={customerRequestTypeId:"3",siteId:$scope.siteID,seriesIds:[],modelYears:[$scope.year],customer:reqCustomer};$scope.hideForKiosk&&($scope.reqUpdtValues.siteId=kioskService.kioskEventId);$scope.requestUpdateSubmit($scope.reqUpdtValues)}else{$scope.$watch("visibleErrors",function(){$scope.errorOffset()});$log.error("Invalid Form Parameters")}};$scope.$on("kia.nav.expandShoppingToolsSide",function(){$scope.openPanel();$scope.$apply()});$scope.openPanel=function(){$scope.openNav=!0};$scope.closePanel=function(){};var isMobile=function(){var sUserAgent=""+(navigator.userAgent||navigator.vendor||window.opera);sUserAgent=sUserAgent.toLowerCase();return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i.test(sUserAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(sUserAgent.substr(0,4))?!0:!1},setSiteId=function(){var siteLanguage=window.lang;"es"===siteLanguage?$scope.siteID="2":"en"===siteLanguage&&(isMobile()?Modernizr.mq("only screen and (max-width: 768px)")?$scope.siteID="6":$scope.siteID="7":$scope.siteID="1")};$scope.checkZipcode();$scope.getFinanceOptions();setSiteId()}]);angular.module("app").directive("formsInteraction",["kiaEvents","$location","$log","safeApply",function(kiaEvents,$location,$log,safeApply){return{restrict:"A",replace:!0,priority:1,link:function(scope,element,attrs){scope.$emit("CAR-IMAGE AND TRIM",attrs.carimage,attrs.trim);attrs.seriesName&&scope.$emit("SERIES-NAME",attrs.seriesName);attrs.menuHighlight&&scope.$emit("CURRENT-FORM",attrs.menuHighlight);scope.validZipCode=!0;scope.$on(kiaEvents.ZIPCODE.NOT_VALID,function(event,message,id){scope.validZipCode=!1;scope.initialErrorMessage=message;scope.errorMessage=message});scope.$on(kiaEvents.ZIPCODE.VALID,function(event,id){scope.validZipCode=!0});scope.$on(kiaEvents.ZIPCODE.ERROR,function(event,message,id){scope.validZipCode=!1;scope.errorMessage=message});scope.$on(kiaEvents.ZIPCODE.FOCUS,function(event,id){});element.find(".zipcode-overlay").length>0&&scope.load();scope.disableBtn=function(){element.find(".submitBtn").addClass("disableBtn")};scope.enableBtn=function(){element.find(".submitBtn").removeClass("disableBtn")};scope.editMode=function(state){"on"===state?element.find(".editMode").addClass("editModeOn"):element.find(".editMode").removeClass("editModeOn")};scope.errorOffset=function(){scope.visibleErrors=element.find(".form-fields span.error").not(".ng-hide").size();var errorOffset=element.find(".form-fields span.error:visible").first().position();errorOffset&&$(window).scrollTop(errorOffset.top)};element.find("#get-quote-form").submit(function(ev){document.activeElement.blur();$("input").blur();ev.stopPropagation();ev.preventDefault();safeApply(scope,function(){scope.formSubmit()});return!1});element.find("#receive-update-form").submit(function(ev){document.activeElement.blur();$("input").blur();ev.stopPropagation();ev.preventDefault();safeApply(scope,function(){scope.requestUpdates()});return!1})}}}]);angular.module("app").directive("formsNavigation",["$routeParams","$log","$location",function($routeParams,$log,$location){return{restrict:"A",replace:!0,scope:{menuHighlight:"@",brochure:"@",updates:"@",testdrive:"@",appraisal:"@",quote:"@",carimage:"@",trim:"@",seriesName:"@"},link:function(scope,element,attrs){scope.hideForKiosk="kiosk"===window.mode?!0:!1;scope.sideNav={};scope.sideNav.brochureAvailable=scope.brochure;scope.sideNav.requestUpdatesAvailable=scope.updates;scope.sideNav.testDriveAvailable=scope.testdrive;scope.sideNav.tradeInAvailable=scope.appraisal;scope.sideNav.getAQuoteAvailable=scope.quote;scope.basePath=window.baseURI;scope.series=$routeParams.series;scope.year=$routeParams.year;scope.$emit("CAR-IMAGE AND TRIM",scope.carimage,scope.trim);scope.$emit("SERIES-NAME",scope.seriesName);var formName="";scope.$emit("CURRENT-FORM",scope.menuHighlight);scope.sectionClick=function(menu,id){if(menu===scope.menuHighlight)scope.$emit("CURRENT-FORM",scope.menuHighlight);else{switch(id){case 1:formName="/forms/getaquote/";break;case 2:formName="/forms/testdriverequest/";break;case 3:formName="/forms/appraisalrequest/";break;case 4:formName="/forms/updatesrequest/";break;case 5:formName="/forms/brochurerequest/"}window.location="http://"+$location.host()+"/"+window.country+"/"+window.lang+formName+scope.series+"/"+scope.year}}},templateUrl:window.staticURI+"/views/forms/formsNavigation.html"}}]);angular.module("app").directive("formsHeader",[function(){return{restrict:"A",replace:!0,link:function(scope,element,attrs){},templateUrl:window.staticURI+"/views/forms/formsHeader.html"}}]);angular.module("app").directive("formsVehicle",[function(){return{restrict:"A",replace:!0,link:function(scope,element,attrs){},templateUrl:window.staticURI+"/views/forms/formsVehicle.html"}}]);angular.module("app").directive("formsDealers",["messageService","kiaEvents",function(messageService,kiaEvents){return{restrict:"A",replace:!0,link:function(scope,element,attrs){"true"===attrs.unique?scope.dealersUnique=!0:scope.dealersUnique=!1},templateUrl:window.staticURI+"/views/forms/vehicleDealers.html"}}]);angular.module("app").directive("formsUserInformation",["$log","safeApply",function($log,safeApply){return{restrict:"A",replace:!0,link:function(scope,element,attrs){scope.showPhone=!0;var disablePhone=function(){var deviceAgent=navigator.userAgent.toLowerCase();scope.device=deviceAgent;if(deviceAgent.indexOf("android")>-1){scope.showPhone=!1;scope.phoneLength=10;scope.phonePattern=/^[0-9]{10}$/;scope.$emit("ANDROID-DEVICE-DETECTION",!0)}else scope.phonePattern=new RegExp("");return scope.showPhone};scope.phoneVal=function(){scope.user.phone=element.find("#phone").val()};disablePhone()&&safeApply(scope,function(){element.find("#phone").mask("(999) 999-9999");element.find("#phone").on("blur",function(){scope.phoneVal()})})},templateUrl:window.staticURI+"/views/forms/userInformation.html"}}]);angular.module("app").directive("formsUserPreferences",[function(){return{restrict:"A",replace:!0,link:function(scope,element,attrs){},templateUrl:window.staticURI+"/views/forms/userPreferences.html"}}]);angular.module("app").directive("formsContactInformation",["$log","safeApply",function($log,safeApply){return{restrict:"A",replace:!0,link:function(scope,element,attrs){},templateUrl:window.staticURI+"/views/forms/contactInformation.html"}}]);angular.module("app").directive("formsSubmit",[function(){return{restrict:"A",replace:!0,link:function(scope,element,attrs){},templateUrl:window.staticURI+"/views/forms/formSubmit.html"}}]);angular.module("app").directive("formsSuccess",[function(){return{restrict:"A",replace:!0,link:function(scope,element,attrs){},templateUrl:window.staticURI+"/views/forms/formSuccess.html"}}]);angular.module("app").directive("formStates",["$log",function($log){return{restrict:"A",replace:!0,link:function(scope,element,attrs){var selectContainer=element.find(".optionSelect");-1!==navigator.appVersion.indexOf("Win")&&-1!==navigator.appVersion.indexOf("Chrome")&&selectContainer.css("font-family","designk-list");selectContainer.change(function(){$(this).find(":selected").index()>0?$(this).removeClass("customSelect"):$(this).addClass("customSelect")})},templateUrl:window.staticURI+"/views/forms/formStates.html"}}]);angular.module("app").directive("requestUpdateForm",["$log","safeApply","kioskService",function($log,safeApply,kioskService){return{restrict:"A",replace:!0,link:function(scope,element,attrs){scope.kioskMode=kioskService.kioskMode;scope.showPhone=!0;var disablePhone=function(){var deviceAgent=navigator.userAgent.toLowerCase();scope.device=deviceAgent;if(deviceAgent.indexOf("android")>-1){scope.showPhone=!1;scope.phoneLength=10;scope.phonePattern=/^[0-9]{10}$/;scope.$emit("ANDROID-DEVICE-DETECTION",!0)}else scope.phonePattern=new RegExp("");return scope.showPhone};scope.phoneVal=function(){scope.userRequest.phone=element.find("#phone").val()};disablePhone()&&safeApply(scope,function(){element.find("#phone").mask("(999) 999-9999");element.find("#phone").on("blur",function(){scope.phoneVal()})});kioskService.kioskMode&&element.find("input[type=tel]").each(function(index,element){$(element).attr("type","text")})},templateUrl:window.staticURI+"/views/forms/requestUpdateForm.html"}}]);angular.module("app").directive("requestUpdateSuccess",[function(){return{restrict:"A",replace:!0,link:function(scope,element,attrs){},templateUrl:window.staticURI+"/views/forms/requestUpdateSuccess.html"}}]);angular.module("app").directive("tradingVehicleInfo",["$log","kiaEvents","yearListService","makeListService","modelListService","conditionListService",function($log,kiaEvents,yearListService,makeListService,modelListService,conditionListService){return{restrict:"A",replace:!0,link:function(scope,element,attrs){scope.conditionSelected=!1;scope.modelSelected=!1;scope.yearSelected=!1;scope.makeSelected=!1;var yearSuccess=function(data){scope.years=[];for(var resultLen=data.vehicleYears.result.length,i=0;resultLen>i;i++){var oYear={value:data.vehicleYears.result[i]};scope.years.push(oYear)}},yearFailure=function(data){};scope.loadYear=function(){return yearListService.get(yearSuccess,yearFailure)};var makeSuccess=function(data){scope.makes=[];for(var resultLen=data.vehicleMakesByYear.result.length,i=0;resultLen>i;i++){var oMake={value:data.vehicleMakesByYear.result[i]};scope.makes.push(oMake)}},makeFailure=function(data){};scope.yearChange=function(){scope.yearSelected=!0;return makeListService.get(scope.user.chooseYear.value,makeSuccess,makeFailure)};var modelSuccess=function(data){scope.models=[];for(var resultLen=data.vehicleModelsByYearAndMake.result.length,i=0;resultLen>i;i++){var oModel={value:data.vehicleModelsByYearAndMake.result[i]};scope.models.push(oModel)}},modelFailure=function(data){};scope.makeChange=function(){scope.makeSelected=!0;return modelListService.get(scope.user.chooseYear.value,scope.user.chooseMake.value,modelSuccess,modelFailure)};var conditionSuccess=function(data){scope.conditions=[];for(var resultLen=data.tradeConditions.result.length,i=0;resultLen>i;i++){var oCondition={value:data.tradeConditions.result[i].name};scope.conditions.push(oCondition)}},conditionFailure=function(data){};scope.modelChange=function(){scope.modelSelected=!0;return conditionListService.get(conditionSuccess,conditionFailure)};scope.loadYear()}}}]);angular.module("app").directive("autoFocus",[function(){return{restrict:"A",replace:!0,link:function(scope,element,attrs){$(element).focus(function(){})}}}]);angular.module("app").directive("lengthCheck",["$log","safeApply",function($log,safeApply){return{restrict:"A",replace:!0,link:function(scope,element,attrs){$(element).on("focus",function(ev){scope.$emit("ZIPCODE-VALIDATION",!1)})}}}]);angular.module("app").directive("formAutocomplete",["$log","safeApply",function($log,safeApply){return{restrict:"A",replace:!0,priority:10,link:function(scope,element,attrs){element.on("submit",function(ev){$("input[ng-model]",element).each(function(index,item){"checkbox"!==angular.element(this).attr("type")&&"radio"!==angular.element(this).attr("type")&&(angular.element(this).val()===angular.element(this).attr("placeholder")?angular.element(this).controller("ngModel").$setViewValue(""):angular.element(this).val()===angular.element(this).attr("data-placeholder-value")?angular.element(this).controller("ngModel").$setViewValue(""):angular.element(this).controller("ngModel").$setViewValue($(this).val()));
})})}}}]);!function($){$.fn.inViewport=function(partial){var $t=$(this).eq(0),$w=($t.get(0),$(window)),viewTop=$w.scrollTop(),viewBottom=viewTop+$w.height(),_top=$t.offset().top,_inViewport=(_top+$t.height(),!1);if($t.height()>0){var _visibelPercent=(viewBottom-_top)/$t.height();_visibelPercent>=partial&&_top>=viewTop&&(_inViewport=!0)}return _inViewport}}(jQuery);Modernizr.addTest("ipad",function(){return!!navigator.userAgent.match(/iPad/i)});Modernizr.addTest("iphone",function(){return!!navigator.userAgent.match(/iPhone/i)});Modernizr.addTest("ipod",function(){return!!navigator.userAgent.match(/iPod/i)});Modernizr.addTest("android",function(){return!!navigator.userAgent.match(/android/i)});Modernizr.addTest("appleios",function(){return Modernizr.ipad||Modernizr.ipod||Modernizr.iphone});Modernizr.addTest("kindle",function(){return!!navigator.userAgent.match(/kindle/i)||!!navigator.userAgent.match(/silk/i)});angular.module("app").directive("vehicleExperience",["$log","$rootScope","kiaEvents","safeApply",function($log,$rootScope,kiaEvents,safeApply){var link;link=function(scope,element,attrs){function updateLocationUrl(){if($activeStory){var $activeChapter=$activeStory.find(".chapter-item.active");scope.updateLocationUrl($activeStory.attr("id"),$activeChapter.attr("id"))}}var options={"data-small-screen":700,"data-min-width":751,"data-min-height":630},scrollRatio=1/3,videoViewportRatio=.5,secStoryOffsetRate=.06,gMediaRatio=1.6,mqSupport=Modernizr.mq("only all");$.each(options,function(key,val){var dataAttr=element.attr(key);dataAttr&&(options[key]=1*dataAttr)});var $storyItems,$heroStory,$buildStory,$chapterItems,$chapterVideos,$chapterBackgrounds,$multiPageChapterItems,$chapterDetails,$pageItems,$header,$secHeader,$footer,$activeStory,scrollTimer,timer,$promoItems,$storyNav,$storyNavItems,$storyNavPrev,$storyNavNext,$videoOverlay,$chaptersCarousel,activeHtml5Video,ignoreScroll=!1,autoSnapFlag=!1,prevScreenWidth=0,prevScreenHt=0,prevScrollTop=0,scrollDirection="down",resizeType="resize",html5Videos={},sliding=!1,firstTimeOnLoad=!0,Layout={};Layout.isSmallScreen=function(){var flag=!1;mqSupport?Modernizr.mq("(max-width: "+options["data-small-screen"]+"px)")&&(flag=!0):$(window).width()<=options["data-small-screen"]&&(flag=!0);return flag};Layout.loadDesktopAssets=function(){Layout.isSmallScreen()||$pageItems.each(function(index){var $pageItem=$(this);if(!$pageItem.hasClass("loaded")){var $figure=$pageItem.find("figure");if($figure.hasClass("background")){var $img=$pageItem.find("img");$figure&&$img&&$figure.css("backgroundImage","url("+$img.attr("src")+")")}$pageItem.addClass("loaded")}})};Layout.isFullScreenScroll=function(){var fullScroll=!1;mqSupport?Modernizr.mq("(min-height: 630px)")&&Modernizr.mq("(min-width: 950px)")&&$(window).width()/$(window).height()>1&&(fullScroll=!0):$(window).height()>=630&&$(window).width()>=950&&$(window).width()/$(window).height()>1&&(fullScroll=!0);return fullScroll};Layout.calculateScreenHeight=function(storyIndex){var pos={top:getSecNavHt()};0===storyIndex&&(pos.top+=$header.outerHeight(!0));pos.ht=$(window).height()-pos.top;Modernizr.ipad&&(pos.ht=pos.ht-20);return pos};Layout.calculateVideoPos=function(){var pos;if(Layout.isFullScreenScroll()){pos=Layout.calculateScreenHeight(Stories.getActiveStoryIndex());pos.top=pos.top+$(window).scrollTop()}else{var sTop=$(window).scrollTop(),screenHt=$(window).height();if(!Layout.isSmallScreen()){getSecHeader();var secNavHt=getSecNavHt();if(sTop>=75){sTop+=secNavHt;screenHt-=secNavHt}else{var scrollTop=sTop;sTop=$header.outerHeight(!0)+secNavHt;screenHt=screenHt-sTop+scrollTop}}pos={top:sTop,ht:screenHt}}return pos};Layout.setDockLeftPos=function($content,ht){$content.css("top",ht+"px")};Layout.calcHeroStoryDockLeftPosition=function(screenHt){};Layout.setOffsetTop=function($thisContent,screenHt){var contentHt=$thisContent.outerHeight(!0);$thisContent.hasClass("foreground")&&(contentHt=$thisContent.find("img").outerHeight(!0));var $uiTabs=$thisContent.find(".ui-tab");if($uiTabs&&$uiTabs.length>0){var $hiddenTabs=$uiTabs.filter(":hidden").addClass("ui-tab-masked"),tabHt=0;$uiTabs.each(function(){tabHt=Math.max(tabHt,$(this).outerHeight(!0))});$hiddenTabs.removeClass("ui-tab-masked");var activeTabHt=$uiTabs.filter(".active").outerHeight(!0),htDiff=activeTabHt-tabHt;0>htDiff&&(contentHt+=Math.abs(htDiff))}var ht=Math.round(.45*(screenHt-contentHt));0>ht&&(ht=20);$thisContent.hasClass("dock-top-left")?$thisContent.css("top","3%"):$thisContent.css("top",ht+"px")};Layout.calculateVerticcalAlign=function(screenHt,$story){if("undefined"==typeof $story){$chapterItems.find(".v-align").each(function(){Layout.setOffsetTop($(this),screenHt)});Layout.calcHeroStoryDockLeftPosition(screenHt)}else{$story.find(".v-align").each(function(){Layout.setOffsetTop($(this),screenHt)});$story.hasClass("story-hero")&&Layout.calcHeroStoryDockLeftPosition(screenHt)}};Layout.adjustDockRightPosition=function(){if(Layout.isFullScreenScroll()){var pos=.1*$(window).width();pos<$storyNav.width()&&(pos=$storyNav.width());$chapterItems.find(".dock-right").css("right",pos+"px")}else $chapterItems.find(".dock-right").css("right","")};Layout.updatePromosSize=function(){var $promos=$heroStory.find(".promos");if(!($promos.length<1)){var fontSize=0;$heroStory.find(".promos .promo-item").each(function(index){var width=$(this).width();$(this).height(width);if($(this).hasClass("promo-item-text")){if(0===fontSize){fontSize=width*$promos.data("max-font")/125;fontSize<$promos.data("min-font")?fontSize=$promos.data("min-font"):fontSize>$promos.data("max-font")&&(fontSize=$promos.data("max-font"))}$(this).find("a").css({"font-size":fontSize+"%","line-height":fontSize+20+"%"})}})}};Layout.updateChapterTitle=function(){var titleAttr="title";Layout.isSmallScreen()&&(titleAttr="title-nobreak");$chapterDetails.find("h3").each(function(){var $this=$(this);$this.html($this.data(titleAttr))})};Layout.repositionColorSelector=function(smallScreen){var storyHt=$buildStory.height(),chapterHt=$buildStory.find(".chapter-details").outerHeight(!0)+.1*storyHt;smallScreen?$buildStory.find(".pano-wrap").css("margin-bottom",""):$buildStory.find(".pano-wrap").css("margin-bottom",chapterHt+"px")};Layout.setContentHeight=function(smallScreen){if(smallScreen){var pageWidth=$($($storyItems[1]).find(".page-item")[0]).width(),pageHt=Math.round(pageWidth/1.618),lastStoryIndex=$storyItems.length-1;$storyItems.each(function(index){var $story=$(this),ht=0;0!==index&&index!==lastStoryIndex&&$story.find(".page-item").height(pageHt);var $storyChapters=$story.find(".chapter-item-wrap");$storyChapters.each(function(index){var chapterHt=$(this).height();chapterHt>ht&&(ht=chapterHt)});$storyChapters.height(ht);safeApply(scope,function(){scope.updatePanoramaChaptersDimensions(pageWidth,pageHt,$story.attr("id"))})})}else{var winWidth=$("body").innerWidth(),minContentHt=Math.round(winWidth/1.6),minHeroHt=.8*minContentHt;$storyItems.each(function(index){var $story=$(this),ht=minContentHt;$story.hasClass("story-hero")&&(ht=minHeroHt);$story.find(".chapter-item").each(function(){var $thisChapter=$(this),chapterHt=0;$thisChapter.find(".chapter-details").each(function(index){chapterHt+=$(this).outerHeight(!0)});$story.hasClass("story-hero")?chapterHt+=$thisChapter.find(".vehicle-info").outerHeight(!0):$story.hasClass("story-build")&&(chapterHt+=$thisChapter.find(".colors-selector").outerHeight(!0));chapterHt+=50;chapterHt>ht&&(ht=chapterHt)});$story.find(".page-item").height(ht);safeApply(scope,function(){scope.updatePanoramaChaptersDimensions(winWidth,ht,$story.attr("id"))});Layout.calculateVerticcalAlign(ht,$story)})}};Layout.sizeReset=function(){$chapterItems.find(".v-align").css("top","");$chapterDetails.css("top","");$heroStory.find(".dock-left").css("margin-top","");$chapterItems.find(".chapter-item-wrap").css("height","")};Layout.setScrollControl=function(){var isSmall=!1;Layout.sizeReset();Layout.updatePromosSize();if(Layout.isSmallScreen()){$(element).removeClass("auto-scroll snap-scroll");$pageItems.css({height:""});Layout.setContentHeight(!0);autoSnapFlag=!1;$activeStory=null;isSmall=!0}else if(Layout.isFullScreenScroll()){$(element).removeClass("auto-scroll").addClass("snap-scroll");var pos=Layout.calculateScreenHeight(1);$pageItems.height(pos.ht);Layout.calculateVerticcalAlign(pos.ht);safeApply(scope,function(){scope.updatePanoramaChaptersDimensions($(window).width(),pos.ht)});var secStoryOffsetHt=Math.round($(window).height()*secStoryOffsetRate),ht=pos.ht-$header.outerHeight(!0)-secStoryOffsetHt;$heroStory.find(".page-item").height(ht);Layout.calculateVerticcalAlign(ht,$heroStory);ht=pos.ht-$footer.outerHeight(!0);$($storyItems[$storyItems.length-1]).find(".page-item").height(ht);var storyHt=($(window).height()-$storyNav.height())/2;$storyNav.css("top",Math.floor(storyHt)+"px");autoSnapFlag=!0;firstTimeOnLoad?firstTimeOnLoad=!1:$activeStory?Stories.scrollToStory(!1):Stories.snapToStory()}else{$(element).removeClass("snap-scroll").addClass("auto-scroll");Layout.setContentHeight(!1);autoSnapFlag=!1;$activeStory=null}Layout.updateChapterTitle();Layout.adjustDockRightPosition();Layout.repositionColorSelector(isSmall)};Layout.setFullscreenMediaSize=function($mediaContainer,$allMedia,mRatio){mRatio=1*mRatio;var ht=$mediaContainer.height(),mediaWidth=$mediaContainer.width(),mediaHt=mediaWidth/mRatio;$allMedia.css({height:mediaHt+"px"});if(ht>mediaHt){var newWidth=ht*mRatio,marginLeft=-1*Math.floor((newWidth-mediaWidth)/2);$allMedia.css({width:newWidth+"px",height:ht+"px",left:marginLeft+"px"})}else if(mediaHt>ht){var marginTop=-1*Math.floor((mediaHt-ht)/2);$allMedia.css({top:marginTop+"px"})}};Layout.fullScreenMediaResize=function(){$chapterVideos.css({width:"",left:"",top:"",height:""});$chapterBackgrounds.css({width:"",left:"",top:"",height:""});if(Layout.isFullScreenScroll()){var $container;$container=$($storyItems.get(1));$chapterBackgrounds.length>0&&Layout.setFullscreenMediaSize($container,$chapterBackgrounds,gMediaRatio);$chapterVideos.length>0&&Layout.setFullscreenMediaSize($container,$chapterVideos,gMediaRatio);var $heroMedia=$heroStory.find(".background img");if($heroMedia&&$heroMedia.length>0){$heroMedia.css({width:"",left:"",top:"",height:""});Layout.setFullscreenMediaSize($heroStory,$heroMedia,gMediaRatio)}$heroMedia=$heroStory.find(".video video");if($heroMedia&&$heroMedia.length>0){$heroMedia.css({width:"",left:"",top:"",height:""});Layout.setFullscreenMediaSize($heroStory,$heroMedia,$heroMedia.data("ratio"))}}else if(!Layout.isSmallScreen()&&Modernizr.appleios){var $heroMediaVideo=$heroStory.find(".video video");$heroMediaVideo&&$heroMediaVideo.length>0&&$heroMediaVideo.css({height:$heroStory.height()+"px"})}};Layout.videoResize=function(){if($videoOverlay&&$videoOverlay.is(":visible"))if(Layout.isSmallScreen()&&!Modernizr.android)$videoOverlay.find(".icon-close").click();else{var pos=Layout.calculateVideoPos();$videoOverlay.css("top",pos.top+"px");var width=$("body").innerWidth(),ht=Math.floor(width/1.77);if(ht>pos.ht){ht=pos.ht;width=Math.floor(1.77*pos.ht)}$videoOverlay.find(".video-overlay-wrap").width(width);var vHt=Math.round(pos.ht-ht)/2;0>vHt&&(vHt=0);$videoOverlay.find(".video-overlay-wrap").css("padding",vHt+"px 0")}};Layout.resizeCtaContent=function(){var $ctaBtnContainer=$heroStory.find(".chapter-btn-container");if($ctaBtnContainer){var $ctaButtons=$ctaBtnContainer.find(".link-btn"),maxBtnWidth=Math.max.apply(null,$ctaButtons.map(function(){return $(this).outerWidth(!0)}).get());$ctaButtons.css("width",maxBtnWidth+"px")}};Layout.windowResize=function(){if(ignoreScroll)return!1;if($(window).width()!==prevScreenWidth||$(window).height()!==prevScreenHt){resizeType="resize";prevScreenWidth=$(window).width();prevScreenHt=$(window).height();var $hiddenChapterItems=$chapterItems.filter(":hidden").addClass("next");Layout.setScrollControl();Layout.videoResize();Layout.fullScreenMediaResize();Chapters.updateSliderOnResize();Layout.resizeCtaContent();$hiddenChapterItems.removeClass("next")}else{resizeType="scroll";var curScrollTop=$(window).scrollTop();scrollDirection=curScrollTop>prevScrollTop?"down":"up";prevScrollTop=curScrollTop;Layout.videoResize();Stories.snapToStory();Layout.isFullScreenScroll()||Chapters.checkIfVideoInViewport()}$("body")[0].offsetWidth};var Stories={};Stories.getActiveStoryIndex=function(){var index=-1;$activeStory&&(index=$storyItems.index($activeStory));return index};Stories.gotoStory=function(step){if(!ignoreScroll){var index=Stories.getActiveStoryIndex()+step;if(index>-1&&index<$storyItems.length){Stories.setActiveStory($($storyItems[index]).attr("id"),"");scope.$emit(kiaEvents.ANALYTICS.EXPERIENCE_USE_NAV,$($storyItems[index]).attr("id"))}}};Stories.setActiveStory=function(storyId,chapterId){$activeStory=""===storyId?$($storyItems[0]):$("#"+storyId);$storyItems.removeClass("active-story");$(".chapter-navigation li").removeClass("active");if($activeStory){$storyItems.removeClass("active-story");$activeStory.addClass("active-story");Chapters.setActiveChapter(chapterId);Stories.scrollToStory(!0)}};Stories.setStoryNav=function(){if($activeStory){var index=Stories.getActiveStoryIndex(),len=$storyNavItems.length;if(len>index&&index>-1){if(0===index){$storyNav.addClass("expanded");$storyNavPrev.addClass("masked");$storyNavNext.removeClass("masked")}else{$storyNav.removeClass("expanded");$storyNavPrev.removeClass("masked");index===len-1?$storyNavNext.addClass("masked"):$storyNavNext.removeClass("masked")}$storyNavItems.removeClass("active");$($storyNavItems[index]).addClass("active")}}};Stories.scrollToStory=function(activateNav){"undefined"==typeof activateNav&&(activateNav=!1);if(!ignoreScroll&&$activeStory){var pos=$activeStory.offset(),secNavHt=getSecNavHt();$activeStory.addClass("transparent");pos.top=Math.round(pos.top)-secNavHt;var activeIndex=Stories.getActiveStoryIndex();0===activeIndex&&(pos.top=0);ignoreScroll=!0;$("html, body").stop(!0,!0);$("html,body").animate({scrollTop:pos.top},400,function(){if(activateNav){Stories.setStoryNav();updateLocationUrl()}Chapters.checkIfVideoInViewport();window.setTimeout(function(){$activeStory.removeClass("transparent");ignoreScroll=!1},1e3)})}};Stories.snapToStory=function(){if(ignoreScroll)return!0;if(Layout.isFullScreenScroll()){var sTop=$(window).scrollTop(),firstStoryHt=$heroStory.height(),screenHt=$($storyItems.get(1)).height(),lastStoryPos=$($storyItems.get($storyItems.length-1)).offset().top;if(sTop>=lastStoryPos){var activeIndex=Stories.getActiveStoryIndex(),lastStoryIndex=$storyItems.length-1;activeIndex!==lastStoryIndex&&Stories.setActiveStory($($storyItems[lastStoryIndex]).attr("id"),"")}else{var fraction=sTop/screenHt;firstStoryHt>=sTop&&(fraction=sTop/firstStoryHt);var num=parseInt(fraction+"",10);fraction-=num;"scroll"===resizeType&&"up"===scrollDirection?fraction>=1-scrollRatio&&(num+=1):fraction>=scrollRatio&&(num+=1);num<$storyItems.length&&num>=0&&(num!==Stories.getActiveStoryIndex()?Stories.setActiveStory($($storyItems[num]).attr("id"),""):Stories.scrollToStory(!1))}}};Stories.completeStoryAnimation=function(){var $storyNavLinks=$storyNavItems.find("a.hover"),storyNavLen=$storyNavLinks.length,counter=0,removeHoverClass=function(){var $targetLink=$($storyNavLinks[counter++]);if($targetLink.hasClass("hover")){$targetLink.removeClass("hover");storyNavLen>counter&&setTimeout(removeHoverClass,250)}else storyNavLen>counter&&removeHoverClass()};Modernizr.csstransitions&&setTimeout(removeHoverClass,4e3)};Stories.initStoryNav=function(){var width=0;$storyNavItems.each(function(index){var $item=$(this),labelWidth=Math.ceil($item.find(".story-label").width());labelWidth>width&&(width=labelWidth);$("html").hasClass("csstransitions")&&$item.find("a").addClass("hover")});width+=5;$storyNavItems.find(".story-label").width(width);var $firstItem=$storyNavItems.first();width=$firstItem.find(".story-label").outerWidth(!0);$storyNavItems.find("a").css("left",width+"px");width+=$firstItem.find(".story-num").outerWidth(!0);$storyNav.width(width+10);if($("html").hasClass("csstransitions")){var animationWidth=width+10;$storyNav.css("margin-right","-"+animationWidth+"px")}else $storyNav.css("margin-right",0);$storyNav.removeClass("init")};Stories.init=function(){$storyNavItems.find(".story-nav-item").on("click",function(evt){var id=$(this).attr("href");id=id.substring(id.indexOf("#")+1);Stories.setActiveStory(id,"");scope.$emit(kiaEvents.ANALYTICS.EXPERIENCE_USE_NAV,id);evt.preventDefault()});$storyNavPrev.on("click",function(evt){Stories.gotoStory(-1);evt.preventDefault()});$storyNavNext.on("click",function(evt){Stories.gotoStory(1);evt.preventDefault()});$(".link-to-story",element).on("click",function(evt){var $thisLink=$(this);Stories.setActiveStory($thisLink.data("story-id"),$thisLink.data("chapter-id"));evt.preventDefault()});$(".link-to-story-next",element).on("click",function(evt){Stories.gotoStory(1);evt.preventDefault()})};var Chapters={};Chapters.isMutilPage=function($thisChapter){var found=!1;($thisChapter.hasClass("slider-off")||$thisChapter.hasClass("slider-on")||$thisChapter.hasClass("image-toggle"))&&(found=!0);return found};Chapters.addTabClickEvent=function($thisCarousel,$thisChapter,$navItems){$navItems.on("click",function(){var $activeNavItem=$(this),index=$navItems.index($activeNavItem);$thisChapter.data("active",index);Chapters.updatePalette($thisCarousel,$thisChapter);safeApply(scope,function(){scope.updatePanoramaChapters($thisChapter.attr("id"),index)})})};Chapters.addSliderEvent=function($thisCarousel,$thisChapter,$sliderBar){$sliderBar.slider({value:$sliderBar.data("value"),min:0,max:$sliderBar.data("max"),start:function(evt,ui){sliding=!0;evt.stopPropagation()},slide:function(evt,ui){$thisChapter.data("active",ui.value);Chapters.updatePalette($thisCarousel,$thisChapter);safeApply(scope,function(){scope.updatePanoramaChapters($thisChapter.attr("id"),ui.value)});evt.stopPropagation()},stop:function(evt,ui){evt.stopPropagation();window.setTimeout(function(){sliding=!1},50)}})};Chapters.addVideoEndEvent=function(video){video.addEventListener&&video.addEventListener("ended",function(){video.currentTime=0;video.pause()},!1)};Chapters.stopVideo=function(video){video.pause();video.currentTime=0;activeHtml5Video=null};Chapters.startVideo=function(chapterId){if(html5Videos[chapterId]===activeHtml5Video);else if(html5Videos[chapterId]){var chapterVideo=html5Videos[chapterId],$thisChapter=$(chapterVideo).parents(".chapter-item"),inViewport=$thisChapter.hasClass("active")&&$thisChapter.inViewport(videoViewportRatio);if(inViewport&&$(chapterVideo).is(":visible")){activeHtml5Video&&Chapters.stopVideo(activeHtml5Video);Modernizr.appleios||$(chapterVideo).siblings("figure").hide();chapterVideo.play();activeHtml5Video=chapterVideo}}};Chapters.canplayVideo=function(evt){var chapterId=evt.target.chapterId;Chapters.startVideo(chapterId);html5Videos[chapterId]&&html5Videos[chapterId].removeEventListener("canplay",Chapters.canplayVideo)};Chapters.checkVideoReady=function(chapterId){if(4===html5Videos[chapterId].readyState)Chapters.startVideo(chapterId);else if(html5Videos[chapterId].addEventListener&&!$(html5Videos[chapterId]).data("canplay-event")){$(html5Videos[chapterId]).data("canplay-event","true");html5Videos[chapterId].chapterId=chapterId;html5Videos[chapterId].addEventListener("canplay",Chapters.canplayVideo,!1)}};Chapters.checkIfVideoInViewport=function(){var hasVideoInViewport=!1;$.each(html5Videos,function(chapterId,video){var $thisVideo=$(video),$thisChapter=$thisVideo.parents(".chapter-item"),inViewport=$thisChapter.hasClass("active")&&$thisChapter.inViewport(videoViewportRatio);if(inViewport){Chapters.checkVideoReady(chapterId);hasVideoInViewport=!0;return!1}});!hasVideoInViewport&&activeHtml5Video&&Chapters.stopVideo(activeHtml5Video)};Chapters.sliderBarResize=function(){$multiPageChapterItems.filter(".slider-on").each(function(){var $thisChapter=$(this),$thisBar=$thisChapter.find(".slider-bar"),$thisHandle=$thisBar.find(".ui-slider-handle");if($thisHandle.length){$thisBar.css("margin-right","");var count=$thisBar.data("max")+1,width=Math.floor($thisBar.width()/count);$thisHandle.width(width);Modernizr.touch&&(width-=15);$thisBar.css("margin-right",width+"px")}})};Chapters.updateSliderOnResize=function(){var isSmall=Layout.isSmallScreen();isSmall?$multiPageChapterItems.each(function(){var $thisChapter=$(this);$thisChapter.data("active",$thisChapter.data("default"));var $navItems=$thisChapter.find(".ui-tabs-nav li a");$navItems.length&&$($navItems[$thisChapter.data("default")]).click();$thisChapter.hasClass("active")&&Chapters.updatePalette($thisChapter.parents(".carousel"),$thisChapter)}):Chapters.sliderBarResize();safeApply(scope,function(){scope.updatePanoramaChaptersOnResize(isSmall)})};Chapters.addHtml5Video=function($thisChapter){var chapterId=$thisChapter.attr("id"),$thisVideo=$thisChapter.find("video");html5Videos[chapterId]=$thisVideo[0];if($thisChapter.hasClass("active")&&$thisChapter.inViewport(videoViewportRatio)&&html5Videos[chapterId].addEventListener){$thisVideo.data("canplay-event","true");html5Videos[chapterId].chapterId=chapterId;html5Videos[chapterId].addEventListener("canplay",Chapters.canplayVideo,!1)}$thisChapter.hasClass("video-replay")&&html5Videos[chapterId].addEventListener&&html5Videos[chapterId].addEventListener("ended",function(){html5Videos[chapterId].currentTime=0;html5Videos[chapterId].pause()},!1)};Chapters.multiPageInit=function(){$chaptersCarousel.each(function(){var $thisCarousel=$(this);$thisCarousel.find(".chapter-item.slider-on").each(function(){var $thisChapter=$(this);Chapters.addSliderEvent($thisCarousel,$thisChapter,$thisChapter.find(".slider-bar"))});$thisCarousel.find(".chapter-item.video").each(function(index){Chapters.addHtml5Video($(this))})});Chapters.sliderBarResize();scope.$on("tabChanged",function(evt,targetEvt){if(targetEvt){var $thisTab=$(targetEvt.currentTarget),$allTabs=$thisTab.parents(".ui-tabs-nav").find("li a"),index=$allTabs.index($thisTab),$thisChapter=$thisTab.parents(".chapter-item"),$thisCarousel=$thisChapter.parents(".carousel");$thisChapter.data("active",index);Chapters.updatePalette($thisCarousel,$thisChapter);safeApply(scope,function(){scope.updatePanoramaChapters($thisChapter.attr("id"),index)})}});$chapterItems.filter(".next").removeClass("next")};Chapters.setCarouselItemPeek=function($activeItem){$activeItem.prev().addClass("prev-peek");$activeItem.next().addClass("next-peek")};Chapters.initHelloVideo=function(){var $chapterVideo=$heroStory.find(".video");$chapterVideo&&$chapterVideo.length>0&&Chapters.addHtml5Video($chapterVideo)};Chapters.init=function(){$chaptersCarousel.find("nav li").addClass("active");$chaptersCarousel.carousel({interval:!1,showTransitionItems:!0});$chaptersCarousel.on("slide",function(evt){var $thisCarousel=$(evt.target),$thisChapter=$(evt.relatedTarget);$thisCarousel.hasClass("social-aggregator")||Chapters.updatePalette($thisCarousel,$thisChapter);var storyName=$thisCarousel.parent().attr("id"),chapterName=$thisChapter.attr("id");scope.$emit(kiaEvents.ANALYTICS.EXPERIENCE_SWIPE,storyName,chapterName);scope.$emit(kiaEvents.ANALYTICS.EXPERIENCE_SCROLL,storyName,chapterName);$thisCarousel.find(".item").removeClass("prev-peek next-peek")});$chaptersCarousel.on("slid",function(evt){var $thisCarousel=$(evt.target);if(!$thisCarousel.hasClass("social-aggregator")){updateLocationUrl();var $thisChapter=$thisCarousel.find(".chapter-item.active");$thisChapter.hasClass("video")&&Chapters.checkVideoReady($thisChapter.attr("id"))}Chapters.setCarouselItemPeek($thisCarousel.find(".item.active"))});$chapterItems.each(function(){for(var $item=$(this),dataAttr=["palette"],len=dataAttr.length,i=0;len>i;i++){var val=$item.data(dataAttr[i]);val&&$item.data(dataAttr[i],val.split(","))}});$chaptersCarousel.each(function(){var $thisCarousel=$(this),$activeChapter=$thisCarousel.find(".item.active");Chapters.updatePalette($thisCarousel,$activeChapter);Chapters.setCarouselItemPeek($activeChapter)});$chapterItems.find(".foreground img").one("load",function(){var $thisImg=$(this),$thisPageItem=$thisImg.parents(".page-item"),$thisStory=$thisPageItem.parents(".story-item");Layout.calculateVerticcalAlign($thisPageItem.height(),$thisStory)}).each(function(){this.complete&&$(this).trigger("load")});window.setTimeout(function(){Chapters.initHelloVideo();Chapters.multiPageInit()},450);scope.$on(kiaEvents.EXPERIENCE.SWIPE,function(evt,carouselInfo){if(!sliding){var $thisCarousel=$chaptersCarousel.filter("#"+carouselInfo.chapterId);if($thisCarousel.hasClass("social-aggregator")&&!Layout.isSmallScreen())return!1;$thisCarousel.carousel(carouselInfo.step)}})};Chapters.updatePalette=function($carousel,$selectedChapter){if($carousel&&$carousel.length){var activeIndex=$selectedChapter.data("active"),palette=$selectedChapter.data("palette");if(palette&&"undefined"!=typeof palette&&"undefined"!=typeof activeIndex&&"undefined"!=typeof palette[activeIndex]){$carousel[0].className=$carousel[0].className.replace(/\b(chapter-palette.*)\b/g,"");$carousel.addClass(palette[activeIndex])}}};Chapters.setActiveChapter=function(chapterId){var $activeChapter,$storyChapters;if($activeStory){$storyChapters=$activeStory.find(".chapter-item");if($storyChapters){$activeChapter=""===chapterId?$($storyChapters[0]):$storyChapters.filter("#"+chapterId);if($activeChapter){$storyChapters.filter(".active").removeClass("active");$activeChapter.addClass("active");Chapters.updateChapterNavigation($storyChapters,$activeChapter)}}}else if(""!==chapterId){$activeChapter=$("#"+chapterId);if($activeChapter){$storyChapters=$activeChapter.parents(".story-item").find(".chapter-item");$storyChapters.filter(".active").removeClass("active");$activeChapter.addClass("active");Chapters.updateChapterNavigation($storyChapters,$activeChapter)}}};var chapterNavTimeouts=[];Chapters.updateChapterNavigation=function($allChapters,$activeChapter){if($activeChapter){var $thisCarousel=$activeChapter.parents(".carousel"),$thisNavItems=$thisCarousel.find(".navigation-indicator li");if($thisCarousel.length){var index=$allChapters.index($activeChapter);$.each(chapterNavTimeouts,function(i,timeout){clearTimeout(timeout)});chapterNavTimeouts=[];$thisNavItems.removeClass("active");$thisNavItems.each(function(i,item){chapterNavTimeouts.push(setTimeout(function(){$(item).addClass("active")},350*(i+1)+250))});var wait=350*$thisNavItems.length+250;index>-1&&index<$thisNavItems.length&&$thisNavItems.not($($thisNavItems[index])).each(function(i,item){chapterNavTimeouts.push(setTimeout(function(){$(item).removeClass("active")},350*($thisNavItems.length-i)+wait))});Chapters.updatePalette($thisCarousel,$activeChapter)}}};var closeVideoOverlay=function(){if($videoOverlay&&$videoOverlay.is(":visible")){$videoOverlay.removeClass("active");$("html").removeClass("modal-open");var $iframe=$videoOverlay.find("iframe");$iframe.remove();addClickEvent()}},createVideooverlay=function(){$videoOverlay=$('<div id="video-overlay" class="hide" data-video-id=""><div class="video-wrap"><a href="#" class="icon-close kia-palette-141"><span class="kia-icon-2-close-x"></span></a><div class="video-overlay-wrap"><div class="video-content r-video"></div></div></div></div>').appendTo("body");$videoOverlay.find(".icon-close").unbind().on("click",function(evt){closeVideoOverlay();evt.preventDefault();return!1})},addClickEvent=function(){$(".link-video",element).unbind("click").bind("click",function(evt){evt.preventDefault();ignoreScroll=!0;$videoOverlay||createVideooverlay();var existIframe=$videoOverlay.find(".video-content").find("iframe").length;if(!existIframe){$videoOverlay.data("video-id",$(this).data("video-id"));var pos=Layout.calculateVideoPos(),params="?wmode=transparent&enablejsapi=1&iv_load_policy=1&modestbranding=1&rel=0&showinfo=0",url=$(this).attr("href")+params,$videoContent=$videoOverlay.find(".video-content");$videoContent.html('<iframe type="text/html" class="youtube-player" width="'+$(window).width()+'" height="'+pos.ht+'" src="'+url+'" frameborder="0"/>')}$videoOverlay.addClass("active");Layout.videoResize();window.setTimeout(function(){ignoreScroll=!1},600);return!1});var $colorSelectorsLi=$(".colors-selector li",element);$colorSelectorsLi.delegate("a","click",function(evt){$colorSelectorsLi.removeClass("selected");$(this).parent().addClass("selected");evt.preventDefault();return!1});Modernizr.appleios&&$(".video-mobile-visible",element).each(function(){var $thisChapterItem=$(this);$thisChapterItem.find(".btn-video-play").on("click",function(evt){var chapterId=$thisChapterItem.attr("id");if(html5Videos[chapterId]){var chapterVideo=html5Videos[chapterId];$(chapterVideo).siblings("figure").hide();$(chapterVideo).show();chapterVideo.play();activeHtml5Video=chapterVideo}evt.preventDefault()})})},getSecNavHt=function(){var ht=58;getSecHeader();$secHeader.length&&(ht=$secHeader.outerHeight(!0));return ht},getSecHeader=function(){$secHeader.length<1&&($secHeader=$secHeader=$(".nav-secondary"))},init=function(){$storyItems=$(".story-item",element);$heroStory=$storyItems.filter(".story-hero");$buildStory=$storyItems.filter(".story-build");$heroStory.find(".panorama");$chaptersCarousel=$(".carousel",$storyItems);$chapterItems=$storyItems.find(".chapter-item");$chapterVideos=$chapterItems.filter(".video").find("video");$chapterBackgrounds=$chapterItems.find(".background img");$multiPageChapterItems=$chapterItems.filter(function(index){return Chapters.isMutilPage($(this))});$chapterDetails=$storyItems.find(".chapter-details");$pageItems=$storyItems.find(".page-item");$header=$("header");$footer=$(".nav-footer");$secHeader=$(".nav-secondary");$storyNav=$(".story-navigation",element);$storyNavItems=$storyNav.find(".nav-item");$storyNavPrev=$storyNav.find(".nav-prev");$storyNavNext=$storyNav.find(".nav-next");$pageItems.find("figure img").hisrc();$promoItems=$chapterDetails.find(".promo-item");$promoItems.length>0&&$promoItems.find(".img-promo").responsiveImage({cssDomObject:$promoItems,defaultImageVersion:"data-img-1920"});$chapterDetails.find("h3").each(function(){var title=$(this).html(),nobreak=title.replace(/<br\s*[\/]?>/gi," ");$(this).data("title",title);$(this).data("title-nobreak",nobreak)});$(window).bind("resize.experienceDirective",function(){timer&&window.clearTimeout(timer);timer=window.setTimeout(function(){Layout.windowResize()},500)});$(window).on("orientationchange.experienceDirective",function(){Layout.windowResize()});$(window).bind("scroll.experienceDirective",function(evt){scrollTimer&&window.clearTimeout(scrollTimer);scrollTimer=window.setTimeout(function(evt){Layout.windowResize()},550)});scope.$on("$routeChangeStart",function(next,current){$(window).off("scroll.experienceDirective");$(window).off("resize.experienceDirective");$(window).off("orientationchange.experienceDirective");unloadVideos();closeVideoOverlay()});$(window).on("unload",function(event){unloadVideos()});var unloadVideos=function(){for(var i in html5Videos){html5Videos[i].src="";html5Videos[i].load&&html5Videos[i].load();html5Videos[i].remove&&html5Videos[i].remove();delete html5Videos[i];html5Videos[i]=null}activeHtml5Video=null;html5Videos=null};scope.$on(kiaEvents.EXPERIENCE.RELOAD,function(event,args){"undefined"==typeof args.chapter&&(args.chapter="");Stories.setActiveStory(args.story,args.chapter)});addClickEvent();Stories.initStoryNav();Chapters.init();Stories.init();if($("html").hasClass("lt-ie9"))window.setTimeout(function(){Layout.windowResize();Stories.setActiveStory(scope.activeStory,scope.activeChapter)},400);else{Layout.windowResize();Stories.setActiveStory(scope.activeStory,scope.activeChapter);if(Modernizr.kindle){$("body").css("height","5000px");$("body").css("height","auto")}}$("html").hasClass("csstransitions")&&window.setTimeout(function(){$storyNav.css("margin-right","0px");Stories.completeStoryAnimation()},1e3);window.setTimeout(function(){if(!Layout.isSmallScreen()){var $hiddenChapterItems=$chapterItems.filter(":hidden").addClass("next");
$chapterItems.filter(".slider-off").each(function(){var $thisChapter=$(this),ht=$thisChapter.find(".page-item").height();Layout.setOffsetTop($thisChapter.find(".chapter-content"),ht)});$hiddenChapterItems.removeClass("next")}},1e3)};scope.scrollToTop=function(evt){evt.preventDefault();Stories.setActiveStory($($storyItems[0]).attr("id"),"")};init()};return{priority:10,link:link,restrict:"EA"}}]);angular.module("app").directive("socialAggregator",["$log","$window","safeApply","kiaEvents","$timeout",function($log,$window,safeApply,kiaEvents,$timeout){return{restrict:"A",link:function(scope,element,attributes){scope.updateStackOrder=function(){var colCountMax=4,widthThreshold=250,heightThreshold=275,containerWidth=$(element).parent().width(),containerHeight=$(element).parent().innerHeight(),colWidth=0;colWidth=Math.floor(containerWidth/colCountMax);for(;widthThreshold>=colWidth;){colCountMax--;colWidth=Math.floor(containerWidth/colCountMax)}var rowCount=Math.floor(containerHeight/heightThreshold);2>rowCount&&(rowCount=2);for(var rowHeight=Math.floor(containerHeight/rowCount),colsLeft=colCountMax,maxSlots=colCountMax*rowCount,items=$.makeArray($(element).find(".social-aggregator-item").show()),processedItems=[];maxSlots>0;){for(var item=items.shift(),colsNeeded=parseInt($(item).attr("size"),10),subStack=[];colsNeeded>colsLeft;){subStack.push(item);item=items.shift();colsNeeded=parseInt($(item).attr("size"),10)}var itemWidth=Math.floor(100/colCountMax)*colsNeeded;$(item).width(itemWidth+"%");processedItems.push(item);colsLeft-=colsNeeded;maxSlots-=colsNeeded;0>=colsLeft&&(colsLeft=colCountMax);if(subStack.length>0){$(item).insertBefore($(subStack[0]));items=subStack.concat(items)}}var itemWidths=$(".social-aggregator-item-title-area").width();$(".social-aggregator-item-title-area").height(rowHeight);$(processedItems).find(".social-aggregator-image-container,.social-aggregator-item-container").height(rowHeight);rowHeight>itemWidths?$(processedItems).find(".social-aggregator-image-container img").width("auto").height(rowHeight):$(processedItems).find(".social-aggregator-image-container img").width("100%").height("auto");$(items).hide();return!1};scope.updateSmallStack=function(){$(element).find(".social-aggregator-item").height("auto").find(".social-aggregator-image-container,.social-aggregator-item-container").height(350)};scope.update=function(){$($window).width()<700?scope.updateSmallStack():scope.updateStackOrder()};$($window).on("resize.socialAggregator",function(){scope.update()});scope.$on("$routeChangeStart",function(next,current){$(window).off("resize.socialAggregator")});setTimeout(function(){scope.update()},1e3)}}}]);var ChaptersPanorama={};angular.module("app").controller("vehicleExperienceController",["$log","$scope","$rootScope","$location","$routeParams","$timeout","kiaEvents","disclaimersModel",function($log,$scope,$rootScope,$location,$routeParams,$timeout,kiaEvents,disclaimersModel){function updateImagePath(serverPath,arrayStr){","===arrayStr.substring(arrayStr.length-1)&&(arrayStr=arrayStr.substring(0,arrayStr.length-1));arrayStr=arrayStr.split(",");for(var len=arrayStr.length,i=0;len>i;i++)arrayStr[i]=serverPath+arrayStr[i];return arrayStr}$(window).on("hashchange",function(){if(void 0!==document.documentMode&&void 0!==window.location.hash&&"#/vehicles"===window.location.hash){$location.url("/vehicles");$timeout(function(){},10)}});$scope.activeStory="";$scope.activeChapter="";$scope.panoramaChapters={};$scope.panoramaFullScreen=!1;$routeParams.story&&($scope.activeStory=$routeParams.story);$routeParams.chapter&&($scope.activeChapter=$routeParams.chapter);$scope.getRouteModel=function(){return $routeParams.model};$scope.updateColor=function(color,name){$scope.panoramaColor=color;$scope.panoramaColorLabel=name};$scope.setChapterId=function(id){id=id.toLowerCase();id=id.replace(/\s/g,"-");return id};$scope.initChapterPanorama=function(id,storyId,defaultIndex,serverPath,mobileImages,desktopImages,retinaImages,altTextArray){if(!$scope.panoramaChapters[id]){mobileImages=updateImagePath(serverPath,mobileImages);desktopImages=updateImagePath(serverPath,desktopImages);retinaImages=updateImagePath(serverPath,retinaImages);defaultIndex=1*defaultIndex;altTextArray=altTextArray.replace(/null/g,"");altTextArray=altTextArray.split(",");ChaptersPanorama[id]={defaultIndex:defaultIndex,storyId:storyId,altText:altTextArray,panoImages:[{width:480,height:300,images:mobileImages.slice()},{width:960,height:600,images:retinaImages.slice()},{width:1920,height:1200,images:desktopImages.slice()}],mobileImages:[{width:480,height:300,images:mobileImages.slice(defaultIndex,defaultIndex+1)},{width:960,height:600,images:retinaImages.slice(defaultIndex,defaultIndex+1)},{width:1290,height:1200,images:desktopImages.slice(defaultIndex,defaultIndex+1)}]};$scope.panoramaChapters[id]={activeIndex:0,width:$(window).width(),height:$(window).height()-53-75,panoImages:ChaptersPanorama[id].panoImages,altText:ChaptersPanorama[id].altText}}};$scope.updatePanoramaChapters=function(chapterId,activeIndex){$scope.panoramaChapters[chapterId]&&($scope.panoramaChapters[chapterId].activeIndex=activeIndex)};$scope.updatePanoramaChaptersDimensions=function(width,height,storyId){"undefined"==typeof storyId?$.each($scope.panoramaChapters,function(chapterId,val){$scope.panoramaChapters[chapterId].width=width;$scope.panoramaChapters[chapterId].height=height}):$.each(ChaptersPanorama,function(chapterId,val){if(val.storyId===storyId){$scope.panoramaChapters[chapterId].width=width;$scope.panoramaChapters[chapterId].height=height}})};$scope.updatePanoramaChaptersOnResize=function(isSmallScreen){if(isSmallScreen){$scope.panoramaFullScreen=!1;$.each($scope.panoramaChapters,function(chapterId,val){$scope.panoramaChapters[chapterId].activeIndex=ChaptersPanorama[chapterId].defaultIndex;$scope.panoramaChapters[chapterId].panoImages=ChaptersPanorama[chapterId].mobileImages})}else{$scope.panoramaFullScreen=!0;$.each($scope.panoramaChapters,function(chapterId,val){$scope.panoramaChapters[chapterId].panoImages=ChaptersPanorama[chapterId].panoImages})}};$scope.$on("$routeUpdate",function(){var params=$location.search();if(params.reload){var obj={story:params.story,chapter:params.chapter};$scope.$broadcast(kiaEvents.EXPERIENCE.RELOAD,obj)}});$scope.updateLocationUrl=function(story,chapter){$scope.activeStory=story;$scope.activeChapter=chapter;$location.search("story",$scope.activeStory);if("undefined"==typeof $scope.activeChapter){$scope.activeChapter="";$location.search("chapter",null)}else $location.search("chapter",$scope.activeChapter);$location.search("reload",null);$location.replace();$rootScope.$apply()};$scope.carouselGoto=function(chapterId,step){$scope.$broadcast(kiaEvents.EXPERIENCE.SWIPE,{chapterId:chapterId,step:step})};disclaimersModel.setGlobal("disclaimer-experience-"+$routeParams.model+"-"+$routeParams.year);$scope.$emit(kiaEvents.ANALYTICS.EXPERIENCE_PAGE_CONFIRMATION,$routeParams.model,$routeParams.year)}]);!function($,window,undefined){"use strict";function Plugin(el,options){var base=this;base.$el=$(el);base.el=el;base.id=id++;base.$window=$(window);base.$document=$(document);base.$el.bind("destroyed",$.proxy(base.teardown,base));base.$clonedHeader=null;base.$originalHeader=null;base.isSticky=!1;base.hasBeenSticky=!1;base.leftOffset=null;base.topOffset=null;base.init=function(){base.$el.each(function(){var $this=$(this);$this.css("padding",0);base.$originalHeader=$("thead:first",this);base.$clonedHeader=base.$originalHeader.clone();$this.trigger("clonedHeader."+name,[base.$clonedHeader]);base.$clonedHeader.addClass("tableFloatingHeader");base.$clonedHeader.css("display","none");base.$originalHeader.addClass("tableFloatingHeaderOriginal");base.$originalHeader.after(base.$clonedHeader);base.$printStyle=$('<style type="text/css" media="print">.tableFloatingHeader{display:none !important;}.tableFloatingHeaderOriginal{position:static !important;}</style>');$("head").append(base.$printStyle)});base.setOptions(options);base.updateWidth();base.toggleHeaders();base.bind()};base.destroy=function(){base.$el.unbind("destroyed",base.teardown);base.teardown()};base.teardown=function(){base.isSticky&&base.$originalHeader.css("position","static");$.removeData(base.el,"plugin_"+name);base.unbind();base.$clonedHeader.remove();base.$originalHeader.removeClass("tableFloatingHeaderOriginal");base.$originalHeader.css("visibility","visible");base.$printStyle.remove();base.el=null;base.$el=null};base.bind=function(){base.$scrollableArea.on("scroll."+name,base.toggleHeaders);if(!base.isWindowScrolling){base.$window.on("scroll."+name+base.id,base.setPositionValues);base.$window.on("resize."+name+base.id,base.toggleHeaders)}base.$scrollableArea.on("resize."+name,base.toggleHeaders);base.$scrollableArea.on("resize."+name,base.updateWidth)};base.unbind=function(){base.$scrollableArea.off("."+name,base.toggleHeaders);if(!base.isWindowScrolling){base.$window.off("."+name+base.id,base.setPositionValues);base.$window.off("."+name+base.id,base.toggleHeaders)}base.$scrollableArea.off("."+name,base.updateWidth)};base.toggleHeaders=function(){base.$el&&base.$el.each(function(){var newLeft,$this=$(this),newTopOffset=base.isWindowScrolling?isNaN(base.options.fixedOffset)?base.options.fixedOffset.outerHeight():base.options.fixedOffset:base.$scrollableArea.offset().top+(isNaN(base.options.fixedOffset)?0:base.options.fixedOffset),offset=$this.offset(),scrollTop=base.$scrollableArea.scrollTop()+newTopOffset,scrollLeft=base.$scrollableArea.scrollLeft(),scrolledPastTop=base.isWindowScrolling?scrollTop>offset.top:newTopOffset>offset.top,notScrolledPastBottom=(base.isWindowScrolling?scrollTop:0)<offset.top+$this.height()-base.$clonedHeader.height()-(base.isWindowScrolling?0:newTopOffset);if(scrolledPastTop&&notScrolledPastBottom){newLeft=offset.left-scrollLeft+base.options.leftOffset;base.$originalHeader.css({position:"fixed","margin-top":0,left:newLeft,"z-index":3});base.leftOffset=newLeft;base.topOffset=newTopOffset;base.$clonedHeader.css("display","");if(!base.isSticky){base.isSticky=!0;base.updateWidth()}base.setPositionValues()}else if(base.isSticky){base.$originalHeader.css("position","static");base.$clonedHeader.css("display","none");base.isSticky=!1;base.resetWidth($("td,th",base.$clonedHeader),$("td,th",base.$originalHeader))}})};base.setPositionValues=function(){var winScrollTop=base.$window.scrollTop(),winScrollLeft=base.$window.scrollLeft();!base.isSticky||0>winScrollTop||winScrollTop+base.$window.height()>base.$document.height()||0>winScrollLeft||winScrollLeft+base.$window.width()>base.$document.width()||base.$originalHeader.css({top:base.topOffset-(base.isWindowScrolling?0:winScrollTop),left:base.leftOffset-(base.isWindowScrolling?0:winScrollLeft)})};base.updateWidth=function(){if(base.isSticky){base.$originalHeaderCells||(base.$originalHeaderCells=$("th,td",base.$originalHeader));base.$clonedHeaderCells||(base.$clonedHeaderCells=$("th,td",base.$clonedHeader));var cellWidths=base.getWidth(base.$clonedHeaderCells);base.setWidth(cellWidths,base.$clonedHeaderCells,base.$originalHeaderCells);base.$originalHeader.css("width",base.$clonedHeader.width())}};base.getWidth=function($clonedHeaders){var widths=[];$clonedHeaders.each(function(index){var width,$this=$(this);if("border-box"===$this.css("box-sizing"))width=$this.outerWidth();else{var $origTh=$("th",base.$originalHeader);if("collapse"===$origTh.css("border-collapse"))if(window.getComputedStyle)width=parseFloat(window.getComputedStyle(this,null).width);else{var leftPadding=parseFloat($this.css("padding-left")),rightPadding=parseFloat($this.css("padding-right")),border=parseFloat($this.css("border-width"));width=$this.outerWidth()-leftPadding-rightPadding-border}else width=$this.width()}widths[index]=width});return widths};base.setWidth=function(widths,$clonedHeaders,$origHeaders){$clonedHeaders.each(function(index){var width=widths[index];$origHeaders.eq(index).css({"min-width":width,"max-width":width})})};base.resetWidth=function($clonedHeaders,$origHeaders){$clonedHeaders.each(function(index){var $this=$(this);$origHeaders.eq(index).css({"min-width":$this.css("min-width"),"max-width":$this.css("max-width")})})};base.setOptions=function(options){base.options=$.extend({},defaults,options);base.$scrollableArea=$(base.options.scrollableArea);base.isWindowScrolling=base.$scrollableArea[0]===window};base.updateOptions=function(options){base.setOptions(options);base.unbind();base.bind();base.updateWidth();base.toggleHeaders()};base.init()}var name="stickyTableHeaders",id=0,defaults={fixedOffset:0,leftOffset:0,scrollableArea:window};$.fn[name]=function(options){return this.each(function(){var instance=$.data(this,"plugin_"+name);instance?"string"==typeof options?instance[options].apply(instance):instance.updateOptions(options):"destroy"!==options&&$.data(this,"plugin_"+name,new Plugin(this,options))})}}(jQuery,window);angular.module("app").controller("vehicleFeaturesController",["$log","$scope","$rootScope","$location","$routeParams","kiaEvents","disclaimersModel",function($log,$scope,$rootScope,$location,$routeParams,kiaEvents,disclaimersModel){$rootScope.$on("vehicleSelector.selected",function(evt,args){$scope.series=args.vehicle.series;$scope.year=args.vehicle.year;$location.url("/vehicle/"+args.vehicle.series+"/"+args.vehicle.year+"/features/accessories");$scope.showVehicleSelector=!1});disclaimersModel.setGlobal("disclaimer-features-"+$routeParams.model+"-"+$routeParams.year)}]);angular.module("app").directive("persistentNav",["$log","kiaEvents",function($log,kiaEvents){return{restrict:"A",link:function(scope,element,attrs){var timer,$stickyNav=($(window),element);$stickyNav.offset().top;$(window).bind("resize",function(){timer&&window.clearTimeout(timer);timer=window.setTimeout(function(){},500)}).resize();var init=function(){};init()}}}]);angular.module("app").directive("accessoriesPage",["$log","kiaEvents",function($log,kiaEvents){return{restrict:"EA",replace:!0,priority:999,link:function(scope,element,attrs){},templateUrl:window.staticURI+"/views/accessories/accessoriesPage.html"}}]);angular.module("app").directive("featuresInteraction",["$log","kiaEvents","$location","$timeout","messageService",function($log,kiaEvents,$location,$timeout,messageService){return{restrict:"A",replace:!0,priority:1,link:function(scope,element,attrs){var currentDetailScope,currentFilters={},firstTime=!0;scope.tablet=!1;scope.mobile=!1;scope.columns=Number(attrs.cols);scope.fullColspan=Number(attrs.cols)+1;scope.currentCategoryId=String(attrs.categoryId);scope.currentCategoryLabel=attrs.categoryLabel;scope.showFilters=!1;scope.showMobileFilters=!1;scope.onlyNoIdentical=!1;scope.$on("columns",function(value){scope.fullColspan=Number(value)+1});scope.$on(kiaEvents.MARK_SELECTED_DETAIL,function(event,selectedDetailScope){scope.closeCurrentDesktopDetail(selectedDetailScope)});scope.$watch("showFilters",function(newValue,old){newValue?$("body").addClass("modal-open"):$("body").removeClass("modal-open")});scope.$on("$routeChangeStart",function(next,current){scope.showFilters=!1;$("body").removeClass("modal-open")});scope.closeCurrentDesktopDetail=function(selectedDetailScope){if(null!=currentDetailScope){if(null===selectedDetailScope){currentDetailScope.closeDetail();currentDetailScope=null;return!1}if(currentDetailScope.$id!==selectedDetailScope.$id){currentDetailScope.closeDetail();currentDetailScope=selectedDetailScope}}else currentDetailScope=selectedDetailScope};scope.identicalMode=function(enable){if(enable){scope.onlyNoIdentical=element.find('[data-category="'+scope.currentCategoryId+'"]').attr("data-identical-children");$(element).find('[data-identical="true"][data-category="'+scope.currentCategoryId+'"]').css("display","none");$(element).find('[data-identical-children="true"][data-category="'+scope.currentCategoryId+'"]').css("display","none")}else{scope.onlyNoIdentical=!1;var display=scope.mobile?"block":"table-row";$(element).find('[data-identical="true"][data-category="'+scope.currentCategoryId+'"]').css("display",display);$(element).find('[data-identical="false"][data-category="'+scope.currentCategoryId+'"]').css("display",display);$(element).find('[data-identical-children="true"][data-category="'+scope.currentCategoryId+'"]').css("display",display);$(element).find('[data-identical-children="false"][data-category="'+scope.currentCategoryId+'"]').css("display",display)}};scope.$on(kiaEvents.FEATURES.SHOW_SUBCATEGORY,function(event,id,label,listItem){scope.currentCategoryId=String(id);scope.currentCategoryLabel=label;if(currentDetailScope){currentDetailScope.closeDetail();currentDetailScope=null}if("accessories"===scope.currentCategoryId||"accesorios"===scope.currentCategoryId){scope.accessoriesMode=!0;$timeout(function(){scope.$broadcast("start.tl",!0)},50);scope.$broadcast(kiaEvents.FEATURES.FILTER_TRIM,"identical",!1,!0);$timeout(function(){var cb_identical=$("#cb_identical");cb_identical[0].checked=!1;cb_identical.parent().removeClass("checked");cb_identical.trigger("change")},50)}else{scope.$broadcast("sleep.tl",!0);scope.accessoriesMode=!1}if(scope.currentItemList){scope.currentItemList.removeClass("selected");scope.currentItemList.scope.categorySelected=!1}scope.currentItemList=listItem;listItem.addClass("selected");(scope.mobile||scope.tablet)&&scope.slideSidebar(!1);$timeout(function(){scope.identicalMode(scope.onlyNoIdentical)},0);$timeout(function(){var firstOfCategory=$($(".subcategory-title-row:not(.ng-hide)")[0]);firstOfCategory.hasClass("first-of-category")||firstOfCategory.addClass("first-of-category")},50)});scope.$on(kiaEvents.FEATURES.FILTER_TRIM,function(event,trim,visible,evadeCount){currentFilters[trim]=visible;if("identical"!==trim){if(visible){if(scope.mobile)$(element).find('[data-trim-id="'+trim+'"]').css("display","block");else{$(element).find(".subcategory-item-row").css("display","table-row");$(element).find('[data-trim-id="'+trim+'"][data-mobile="false"]').css("display","table-cell")}evadeCount||scope.columns++;if(scope.columns>1){$("input:checked,.ctrim").removeAttr("disabled");$(".iden").removeAttr("disabled")}}else{scope.columns>1&&(scope.mobile?$(element).find('[data-trim-id="'+trim+'"]').css("display","none"):$(element).find('[data-trim-id="'+trim+'"][data-mobile="false"]').css("display","none"));evadeCount||scope.columns--;1===scope.columns&&$timeout(function(){$("input:checked,.ctrim").attr("disabled","disabled");$("input:checkbox:not(:checked)").removeAttr("disabled");$(".iden").removeAttr("disabled")},50)}scope.$apply();messageService.publish(kiaEvents.LIGHTBOX.UPDATE_POSITION,{})}else scope.identicalMode(visible)});scope.applyFilters=function(){angular.forEach(currentFilters,function(value,key){scope.$emit(kiaEvents.FEATURES.FILTER_TRIM,key,value,!0)})};scope.mobile||scope.$emit(kiaEvents.FEATURES.SHOW_SUBCATEGORY,scope.currentCategoryId,scope.currentCategoryLabel,$("#category-item-"+scope.currentCategoryId));scope.lockBody=function(lock){lock?element.addClass("lock"):element.removeClass("lock")};scope.$on(kiaEvents.FEATURES.SHOW_MOBILE_DETAIL,function(event,label,JQelement){scope.currentMobileDetailTitle=label;var body=JQelement.next().find("td > div").clone(!0);$("#features-mobile-detail").find(".detail").append(body);scope.showMobileDetail()});scope.$on(kiaEvents.LIGHTBOX.CLOSE,function(event,lb){if("features-mobile-detail"===lb.id){$("#features-mobile-detail").find(".detail").empty();$timeout(function(){window.scrollTo(0,0)},50)}});scope.showMobileDetail=function(){scope.$broadcast(kiaEvents.LIGHTBOX.CHANGE_PLATFORM,"mobile");scope.mobileDetail=!0};scope.slideSidebar=function(open){if(open){var h=element.find(".features-categories ul").height();h+=parseInt(element.find(".features-categories h1.vehicle-title").css("height"),10);element.find(".features-categories").removeClass("close").addClass("open");if(scope.mobile||scope.tablet){element.height(h);scope.lockBody(!0)}else{element.css("height","100%");scope.lockBody(!1)}}else{element.find(".features-categories").removeClass("open").addClass("close");element.css("height","100%")}};scope.onDeviceModeON=function(event){scope.tablet=!0;if(firstTime){scope.slideSidebar(!0);firstTime=!1}else scope.slideSidebar(!1);if(scope.showFilters){scope.showMobileFilters=!0;scope.showFilters=!1}};scope.onMobileDetailON=function(event){scope.closeCurrentDesktopDetail(null);scope.mobile=!0;$("ftable").stickyTableHeaders("destroy");if(scope.showFilters||scope.showMobileFilters){scope.showMobileFilters=!0;scope.showFilters=!1}else{scope.showMobileFilters=!1;scope.showFilters=!1}$timeout(function(){var currents=$(element).find("[data-category="+scope.currentCategoryId+"]");$(currents).find('[data-mobile="true"]').css("display","block");currents.css("display","table-row");scope.applyFilters()},100)};scope.onMobileDetailOFF=function(event){scope.mobile=!1;scope.mobileDetail=!1;if(scope.showMobileFilters){scope.showMobileFilters=!0;scope.showFilters=!1}else scope.showFilters=!1;$timeout(function(){$(element).find('[data-mobile="true"]').css("display","none");var currents=$(element).find("[data-category="+scope.currentCategoryId+"]");currents.css("display","table-row");scope.applyFilters()},100);$("#ftable").stickyTableHeaders({fixedOffset:36})};scope.onDeviceModeOFF=function(event){scope.tablet=!1;scope.mobile=!1;scope.mobile||scope.slideSidebar(!0);if(scope.showMobileFilters){scope.showMobileFilters=!1;scope.showFilters=!0}};scope.$on("features.expand.detail",function(event,JQelement){JQelement.next().show().find("td > div").slideDown(500)});scope.$on("features.collapse.detail",function(event,JQelement,dscope){JQelement.next().find("td > div").slideUp(500,function(){$(this).parent().parent().hide()})});scope.$on(kiaEvents.RESPONSIVE.MATCH1024,scope.onDeviceModeON);scope.$on(kiaEvents.RESPONSIVE.UNMATCH1024,scope.onDeviceModeOFF);scope.$on(kiaEvents.RESPONSIVE.MATCH768,scope.onMobileDetailON);scope.$on(kiaEvents.RESPONSIVE.UNMATCH768,scope.onMobileDetailOFF);scope.$on(kiaEvents.RESPONSIVE.MATCH320,scope.onMobileDetailON);$("#ftable").stickyTableHeaders({fixedOffset:36})}}}]);angular.module("app").directive("categoryBehavior",["$log","kiaEvents",function($log,kiaEvents){return{restrict:"EA",replace:!0,scope:{device:"=",tablet:"="},link:function(scope,element,attrs){scope.categorySelected=!1;scope.showSubCategory=function(id,label){element.scope=scope;if(scope.device||scope.tablet||!scope.categorySelected){scope.$emit(kiaEvents.FEATURES.SHOW_SUBCATEGORY,id,label,element);scope.categorySelected=!0;element.addClass("open");$(window).scrollTop(0)}}}}}]);angular.module("app").directive("trimStyle",[function(){return{restrict:"EA",replace:!0,link:function(scope,element,attrs){scope.$watch("columns",function(value,old){element.removeClass("column-"+old).addClass("column-"+value)})}}}]);angular.module("app").directive("fixHeight",[function(){return{restrict:"A",replace:!0,link:function(scope,element,attrs){}}}]);angular.module("app").directive("cb",["kiaEvents",function(kiaEvents){return{restrict:"A",replace:!0,scope:{lb:"@"},link:function(scope,element,attrs){var trimValue=attrs.value;element.on("click",function(event){scope.$emit(kiaEvents.FEATURES.FILTER_TRIM,trimValue,element[0].checked,!1)})}}}]);angular.module("app").directive("topCb",["kiaEvents",function(kiaEvents){return{restrict:"A",replace:!0,link:function(scope,element,attrs){attrs.value;element.on("click",function(event){var input;input="top"===scope.lb?$("#features-filters-lightbox").find("#"+attrs.id):$(".features-device-filters").find("#"+attrs.id);if(element[0].checked){input[0].checked=!0;input.parent().addClass("checked")}else{input[0].checked=!1;input.parent().removeClass("checked")}})}}}]);angular.module("app").directive("featureDetail",["kiaEvents","$rootScope","$log","$timeout",function(kiaEvents,$rootScope,$log,$timeout){return{restrict:"EA",replace:!0,scope:{hasDetail:"@",hasImage:"@",mobile:"=",categoryId:"=",columns:"=",first:"@"},link:function(scope,element,attrs){if("true"!==attrs.hasDetail){element.addClass("no-detail");scope.noDetail=!0}scope.getTrimClass=function(type){var className="";switch(type){case"":className="not-available";break;case"OPTIONAL":className="optional";break;case"STANDARD":className="standard";break;case"ESTNDAR":className="standard";break;case"OPCIONAL":className="optional";break;default:return!1}return className};scope.showDetail=function(){if(!scope.noDetail)if(scope.mobile)scope.$emit(kiaEvents.FEATURES.SHOW_MOBILE_DETAIL,attrs.label,element);else{scope.detailON=!scope.detailON;if(scope.detailON){scope.$emit("features.expand.detail",element);scope.$emit(kiaEvents.MARK_SELECTED_DETAIL,scope)}else scope.$emit("features.collapse.detail",element)}};scope.closeDetail=function(){if(!scope.noDetail){scope.$emit("features.collapse.detail",element);scope.detailON=!1}};element.next().hide();scope.detailON=!1;"true"===attrs.first&&scope.$watch("categoryId",function(displayedCategory){displayedCategory!==attrs.category||!scope.tablet&&scope.mobile||scope.showDetail()})}}}]);angular.module("app").controller("vehicleAccessoriesController",["$log","$rootScope","$scope","$routeParams","kiaEvents","$location","$http","accessoriesService","accessoriesModel",function($log,$rootScope,$scope,$routeParams,kiaEvents,$location,$http,accessoriesService,accessoriesModel){var success,failure;success=function(response){if(response.accessories.status===kiaEvents.SERVICES.SUCCESS){accessoriesModel.update(response.accessories.result);$scope.accessories=accessoriesModel.getAccessories()}};failure=function(response){$log.error("Error in Accessories request : ",response)};accessoriesService.get($routeParams,success,failure)}]);angular.module("app").directive("accessoriesInteraction",["kiaEvents","$location","safeApply","disclaimersModel","$timeout",function(kiaEvents,$location,safeApply,disclaimersModel,$timeout){return{restrict:"A",replace:!0,priority:1,link:function(scope,element,attrs){scope.mobileAccDetail=!1;var mobileDetail=element.find(".accessories-mobile-detail"),mobileHeader=element.parent().find(".accesories-mobile-header"),accessoriesList=element.find(".accessories-tile-holder"),mobileDetailDesc=element.find("#mobileDetailDesc"),mobileDetailDisc=element.find("#mobileDetailDisc"),opening=!1,mobileDetailOpen=!1;scope.mobileData={};$(".close-detail").on("click",function(){scope.$broadcast("tileLayout.close.detail")});scope.$on("tileLayout.open.mobile.detail",function(event,data){scope.mobileImageReady=!1;opening=!0;mobileHeader.hide();accessoriesList.hide();window.scrollTo(0,0);scope.mobileData=data;mobileDetailDesc.html(data.description);if(null!==data.disclaimer&&""!==data.disclaimer){mobileDetailDisc.show();mobileDetailDisc.bind("click",function(){safeApply(scope,function(){disclaimersModel.open(data.disclaimer)})})}else mobileDetailDisc.hide();mobileDetail.removeClass("close").addClass("open");mobileDetailOpen=!0;$timeout(function(){scope.mobileImageReady=!0},100)});$("#acc-mobile-detail").bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){opening?$(this).css("position","relative"):$(this).css("position","absolute")});scope.closeMobileDetail=function(){$("#acc-mobile-detail").css("position","absolute");opening=!1;window.scrollTo(0,0);mobileDetail.removeClass("open").addClass("close");mobileHeader.show();accessoriesList.show();mobileDetailOpen=!1}}}}]);angular.module("app").directive("accIterator",["kiaEvents",function(kiaEvents){return{restrict:"A",link:function(scope,element,attrs){scope.$last}}}]);angular.module("app").directive("accLineFix",["$log","kiaEvents",function($log,kiaEvents){return{restrict:"A",priority:1,link:function(scope,element,attrs){scope.$watch("accSelected",function(value){if(value){var lines=element.text().match(/\S+/g).length;lines>2&&4>lines&&element.addClass("three");lines>=4&&element.addClass("four")}})}}}]);angular.module("app").directive("accBox",["$log","kiaEvents","$timeout",function($log,kiaEvents,$timeout){return{restrict:"A",replace:!0,scope:{acc:"=",mobile:"="},priority:2,link:function(scope,element,attrs){scope.accSelected=!1;scope.showDetail=function(){var row=0;if(scope.accSelected)scope.closeDetail();else{for(var html="",i=0;i<scope.acc.priceList.length;i++)html+="<div class='prices-group'><p class='qualifier title'>"+scope.acc.priceList[i].qualifier+"</p><p class='price'>$ "+scope.acc.priceList[i].msrp+"*</p></div>";$timeout(function(){$("#price-list-"+scope.acc.id).html("").html(html)},50);if(scope.mobile){scope.$emit("tileLayout.open.mobile.detail",scope.acc);return!1}scope.accSelected=!0;element.parent().addClass("selected");row=Number(element.parent()[0].attributes["data-row"].value);scope.$emit("tileLayout.open.detail",scope,row,element.parent(),scope.acc)}};scope.selected=function(value){element.parent().removeClass("selected");scope.accSelected=value};scope.closeDetail=function(){scope.accSelected=!1;element.parent().removeClass("selected");scope.$emit("tileLayout.close.detail",scope)}}}}]);angular.module("app").directive("accTileDetail",["$log","safeApply","disclaimersModel",function($log,safeApply,disclaimersModel){return{restrict:"A",link:function(scope,element,attrs){scope.showDisclaimer=function(){disclaimersModel.open(scope.currentTileData.disclaimer)}}}}]);angular.module("app").directive("repeatNtimes",function(){return{restrict:"E",compile:function(tElement,attrs){for(var content=tElement.children(),i=1;i<attrs.repeat;i++)tElement.append(content.clone())}}});angular.module("app").factory("accessoriesModel",["$log",function($log){var accessories,update,getAccessories;update=function(data){accessories=[];for(var l=data.length,i=0;l>i;i++)for(var subl=data[i].accessories.length,j=0;subl>j;j++){data[i].accessories[j].largeURL=window.contentURI+data[i].accessories[j].largeURL;data[i].accessories[j].thumbURL=window.contentURI+data[i].accessories[j].thumbURL;""!==data[i].accessories[j].disclaimer&&null!==data[i].accessories[j].disclaimer&&(data[i].accessories[j].hasDisclaimer=!0);var m=[];if(data[i].accessories[j].msrps){if(0!==data[i].accessories[j].msrps.length){for(var k=0;k<data[i].accessories[j].msrps.length;k++)m.push(data[i].accessories[j].msrps[k]);data[i].accessories[j].price=data[i].accessories[j].msrps[0].msrp;data[i].accessories[j].priceList=m}data[i].accessories[j].msrps.length>1&&(data[i].accessories[j].multiplePrices=!0)}accessories.push(data[i].accessories[j])}};getAccessories=function(){return accessories};return{update:update,getAccessories:getAccessories}}]);angular.module("app").factory("accessoriesService",["$log","$http","messageService",function($log,$http,messageService){var defaultRequestParams,url,get;url="data/{series}/accessories";defaultRequestParams={series:"soul"};get=function(criteria,success,failure){var requestParams=jQuery.extend({},defaultRequestParams,criteria),serviceURL="data/"+requestParams.model+"/accessories";return $http.get(serviceURL,requestParams).success(function(data,getResponseHeaders){return angular.isFunction(success)?success(data):void 0}).error(failure)};return{get:get}}]);angular.module("app").filter("youtubeEmbedUrl",function($sce){return function(videoId){return $sce.trustAsResourceUrl("https://www.youtube.com/embed/"+videoId+"?wmode=transparent&enablejsapi=1&iv_load_policy=1&modestbranding=1&rel=0&showinfo=0")}});angular.module("app").filter("yahooEmbedUrl",function($sce){return function(videoId){return $sce.trustAsResourceUrl("https://screen.yahoo.com/"+videoId+"?format=embed&player_autoplay=false&mode=simpletron")}});angular.module("app").directive("galleryGrid",["$log","$rootScope","$routeParams",function($log,$rootScope,$routeParams){var link,vSeries,vYear;link=function(scope,element,attrs){var timer,options={"data-optimal-width":320,"data-optimal-height":198,"data-min-col":2};$.each(options,function(key,val){var dataAttr=element.attr(key);dataAttr&&(options[key]=1*dataAttr)});var aspectRation=options["data-optimal-height"]/options["data-optimal-width"],$gridItems=$(".gallery-grid-item",element);
if($routeParams.gallery&&$(element).hasClass("window-redirect")){vSeries=$routeParams.model;vYear=$routeParams.year;$(window).width()<768&&"all"!==$routeParams.gallery&&(window.location=window.baseURI+"/vehicle/"+vSeries+"/"+vYear+"/galleries/all")}var setMaxTitleHt=function($items){var len=$items.length;if(len>0&&$items[0].find(".grid-item-title").length>0){var i,maxHt=0;for(i=0;len>i;i++){var ht=$items[i].find(".grid-item-title").height();maxHt=Math.max(maxHt,ht)}for(i=0;len>i;i++)$items[i].find(".grid-item-title").height(maxHt)}},windowResize=function(){var screenWidth=$(element).width(),cols=Math.floor(screenWidth/options["data-optimal-width"]);cols<options["data-min-col"]&&(cols=options["data-min-col"]);scope.galleryCols=cols;var colWidthPx=Math.floor(screenWidth/cols),colWidth=colWidthPx/screenWidth*100;$gridItems.css("width",colWidth+"%");var colHt=Math.floor(colWidthPx*aspectRation);$gridItems.find(".grid-item-figure").css("height",colHt+"px");$gridItems.removeClass("last-col last-row");$gridItems.find(".grid-item-title").css("height","");var lastRowIndex=Math.floor($gridItems.length/cols)*cols,$colItems=[];$gridItems.each(function(index,$item){$item=$($item);$colItems.push($item);if((index+1)%cols===0){$item.addClass("last-col");setMaxTitleHt($colItems);$colItems=[]}index>=lastRowIndex&&$item.addClass("last-row")});$colItems.length>0&&setMaxTitleHt($colItems)},scrollToPage=function(){var pos=$(element).offset();window.scrollTo(0,pos.top)},intiGallery=function(){$("img",$gridItems).hisrc();$gridItems.each(function(index,$item){var $desc=$(".grid-item-desc",$item);$desc.css("margin-bottom",-1*$desc.outerHeight(!1))});scope.$on("viewThumb",function(){scrollToPage()});$(window).bind("resize.galleryGrid",function(){timer&&clearTimeout(timer);timer=window.setTimeout(function(){windowResize()},100)}).resize();window.setTimeout(function(){$(element).parent().removeClass("no-transition")},50);scope.$on("$routeChangeStart",function(next,current){$(window).off("resize.galleryGrid")})};intiGallery()};return{link:link,restrict:"EA"}}]);angular.module("app").directive("categoryInteraction",["kiaEvents","$window","$log","safeApply","messageService","$routeParams","$rootScope",function(kiaEvents,$window,$log,safeApply,messageService,$routeParams,$rootScope){return{restrict:"A",scope:{categoryName:"@"},link:function(scope,element,attrs){scope.categorySelected=!1;scope.categoryName===$routeParams.gallery&&(scope.categorySelected=!0)}}}]);angular.module("app").directive("galleryDetail",["$log","$rootScope","safeApply","$routeParams",function($log,$rootScope,safeApply,$routeParams){var link,paddleTimer=null;link=function(scope,element,attrs){function reload_message_frame(iframe){iframe.location?iframe.location.reload(!0):iframe.src&&(iframe.src=iframe.src)}var timer,$active,$items,$prevControl,$nextControl,$globalNav,$footer,$vehicleNav,$actionBar,$detailWrap,$paddle,imgHt,paddleHeight,leftOffset,nextActive,previousActive,previousHeaderStyle="",aspectRatio=1.6,prevScreenWidth=0,prevScreenHt=0,$element=$(element),fullScreenRange={min:1.6,max:1.7};$globalNav=$("header");$vehicleNav=$(".nav-secondary-vehicle");$footer=$(".footer-header");$actionBar=$(".action-bar",element);$detailWrap=$(".gallery-detail-wrap",element);$paddle=$(".no-touch .window-redirect .paddle");var $allVideos=$("iframe[src^='https://www.youtube.com'],video,iframe[src^='https://screen.yahoo.com']");$("body");$items=$(".item",element);$prevControl=$(element).find(".nav-prev");$nextControl=$(element).find(".nav-next");var getActiveIndex=function(){$active=$items.filter(".active");return $items.index($active)},loadAssets=function($item){if($item&&!$item.hasClass("loaded")&&$item.hasClass("image")){var $figure=$("figure",$item);$figure.css("width","");$figure.css("backgroundImage","url("+$figure.attr("data-src")+")");var $figureImg=$figure.find("img"),imgWidth=$figure.outerWidth(!1),imgHt=imgWidth/1.6,img=new Image;$(img).on("load",function(){$figureImg.css({width:imgWidth+"px",height:imgHt+"px !important"})});img.src=$figure.attr("data-src");$figureImg.attr("src",$figure.attr("data-src"));$figureImg.css({width:imgWidth+"px",height:imgHt+"px !important"});$item.addClass("loaded")}},preloadAssets=function(){$active=$items.filter(".active");var loadItems=(getActiveIndex(),[]);loadItems.push($active.next());loadItems.push($active.prev());for(var len=loadItems.length,i=0;len>i;i++){loadItems[i];loadAssets(loadItems[i])}},updateNavigationControls=function(){var activeIndex=getActiveIndex();if(0===activeIndex){previousActive=!1;$prevControl.addClass("disabled");if(1===$items.length){$nextControl.addClass("disabled");nextActive=!1}else{$nextControl.removeClass("disabled");nextActive=!0}}else if(activeIndex<$items.length-1){$prevControl.removeClass("disabled");$nextControl.removeClass("disabled");nextActive=!0;previousActive=!0}else{previousActive=!0;nextActive=!1;$prevControl.removeClass("disabled");$nextControl.addClass("disabled")}},stopVideoPlaying=function(){$active=$items.filter(".active");$active.hasClass("video")&&angular.forEach($active.find("iframe"),function(value,key){var iframe=value,isIE11=!(!navigator.userAgent.match(/Trident/)&&!navigator.userAgent.match(/MSIE/));if(isIE11||iframe.src.match(/screen.yahoo.com/))reload_message_frame(iframe);else try{$log.info("No origin");iframe.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}')}catch(e){try{$log.info("With origin");iframe.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")}catch(e){$log.info("RELOAD");reload_message_frame(iframe)}}$(iframe).addClass("off")});var html5Video=$active.find("video");if(html5Video&&html5Video[0]&&html5Video[0].pause){html5Video[0].pause();html5Video[0].pauseVideo()}},afterTransition=function(updateUrl){preloadAssets();updateNavigationControls();$active=$items.filter(".active");"undefined"==typeof updateUrl&&scope.updateLocationUrl($active.attr("id"));""!==previousHeaderStyle&&$globalNav.removeClass(previousHeaderStyle);previousHeaderStyle=$active.attr("data-palette")||"";""!==previousHeaderStyle&&$globalNav.addClass(previousHeaderStyle);$active=$items.filter(".active");if($active.hasClass("video")){var iframe=$active.find("iframe")[0];$(iframe).removeClass("off")}},getMaxCaptionHt=function(isOuterHeight){var ht=0;isOuterHeight?$items.find(".figcaption").each(function(index){ht=Math.max(ht,$(this).outerHeight(!0))}):$items.find(".figcaption").each(function(index){ht=Math.max(ht,$(this).height())});return ht},setSmallLayout=function(screenWidth,screenHeight){imgHt=Math.round(screenWidth/aspectRatio);$detailWrap.removeClass("letter-box fullscreen").addClass("layout-small");$items.find("figure").css("height","");$items.find("figure img").css({width:"100%",height:imgHt+"px"});$items.find(".item-wrap").css("width","");$detailWrap.height(imgHt+getMaxCaptionHt(!0));paddleHeight=$paddle.outerHeight();$paddle.css("top",imgHt/2-paddleHeight/2);$allVideos.each(function(){var $el=$(this);$el.width(screenWidth).height(imgHt)})},getSecondaryNavHt=function(){var ht=58;$vehicleNav=$(".nav-secondary-vehicle");$vehicleNav.length&&(ht=$vehicleNav.outerHeight(!0));return ht},actionBarDisplay=function(){leftOffset=parseFloat($(window).width()-$(".active .item-wrap").width());$actionBar.css("right",leftOffset/2)},paddleDisplay=function(){$paddle.css("display","block");$detailWrap.is(":focus")||paddleAction(!1);$detailWrap.hover(function(){$(window).width()>=768&&paddleAction(!0)},function(){paddleAction(!1)})},paddleAction=function(status){if(null!==paddleTimer){clearTimeout(paddleTimer);paddleTimer=null}status===!0?$paddle.finish().css("display","block"):paddleTimer=setTimeout(function(){$paddle.fadeOut("slow")},5e3)},actionBarReposition=function(contentWidth,contentHt){$actionBar.css("right","");var $firstItem=$($items[0]),padLeft=Math.round(parseInt($firstItem.find(".figcaption").css("padding-left"),10)),padTop=Math.round(parseInt($firstItem.find(".figcaption").css("padding-top"),10)),right=Math.floor(($("body").innerWidth()-contentWidth)/2+padLeft),sideBarAdjustment=0;$(".content-sidebar")&&$(document).width()>=1025&&$(".content-sidebar").hasClass("close")!==!0&&(sideBarAdjustment=($(".content-sidebar").width()?$(".content-sidebar").width():320)/2);right-=sideBarAdjustment;$actionBar.css({right:right+"px",top:contentHt+parseInt(padTop,10)/2+"px"});$(element).hasClass("window-redirect")&&actionBarDisplay()},windowResize=function(){var screenWidth=$(element).width(),winHt=$(window).height();if(screenWidth!==prevScreenWidth||winHt!==prevScreenHt){prevScreenWidth=screenWidth;prevScreenHt=winHt;var footerHt=$footer.outerHeight(!0);$footer.is(":hidden")&&(footerHt=0);var screenHeight=Math.floor(winHt-$globalNav.outerHeight(!0)-getSecondaryNavHt()-footerHt),layout="";Modernizr.mq("(max-width: 640px)")&&(layout="layout-small");$detailWrap.height(screenHeight);$items.find("figure img").css({width:"100%",height:""});if(""===layout)if(winHt>screenWidth)setSmallLayout(screenWidth,screenHeight);else{$detailWrap.removeClass("layout-small fullscreen letter-box");$items.find(".item-wrap").css("width","");var captionHt=getMaxCaptionHt(!0);imgHt=screenHeight-captionHt;var ratio=screenWidth/imgHt;if(ratio>=fullScreenRange.min&&ratio<=fullScreenRange.max){$detailWrap.addClass("fullscreen");$items.find("figure").height(imgHt);paddleHeight=$paddle.outerHeight();$paddle.css("top",imgHt/2-paddleHeight/2);$items.find("figure img").css("height","")}else{$detailWrap.addClass("letter-box");var width=imgHt*aspectRatio;if(width>screenWidth){imgHt=screenWidth/aspectRatio;width=screenWidth}width=Math.round(width);paddleHeight=$paddle.outerHeight();$paddle.css("top",imgHt/2-paddleHeight/2);$items.find(".item-wrap").css("width",width+"px");$items.find("figure").css("height","");$items.find("figure img").css("height","");screenWidth=width}scope.screenHeight=screenHeight;var newCaptionHt=getMaxCaptionHt(!0),newScreenHeight=screenHeight+newCaptionHt-captionHt;newScreenHeight>screenHeight&&$detailWrap.height(newScreenHeight);$allVideos.each(function(){var $el=$(this);$el.width(Math.round(imgHt*aspectRatio)).height(imgHt)})}else setSmallLayout(screenWidth,screenHeight);actionBarReposition(screenWidth,imgHt)}$(element).hasClass("window-redirect")&&$(window).width()<768&&"all"!==$routeParams.gallery&&(window.location=window.baseURI+"/vehicle/"+$routeParams.model+"/"+$routeParams.year+"/galleries/all");$(element).hasClass("window-redirect")&&$(window).width()>768&&paddleDisplay()},setActiveItem=function(){var $item=$("#"+scope.activeId);if($item.length){var html5Video=$item.find("video");$items.removeClass("active");$item.addClass("active");loadAssets($items.filter(".active"));afterTransition(!1);html5Video&&html5Video[0]&&html5Video.data("html5player-autoplay")&&html5Video[0].play();$(element).hasClass("window-redirect")&&actionBarDisplay()}},scrollToPage=function(){var pos=$(element).offset();window.scrollTo(0,pos.top)};$routeParams.gallery;scope.$on("active-category",function(event,activeCategory){});var initGalleryDetails=function(){$items.filter(".image").find("figure").hisrc({autoLoadBackground:!1});$items.find("figure").css({width:"",height:""});$element.carousel({interval:!1});scope.$on("viewThumb",function(){stopVideoPlaying()});$element.on("slide",function(evt){stopVideoPlaying()});$element.on("slid",function(evt){afterTransition()});scope.$on("viewDetailNext",function(){stopVideoPlaying();$nextControl.click()});scope.$on("viewDetailPrev",function(){stopVideoPlaying();$prevControl.click()});var onResize=function(){timer&&clearTimeout(timer);timer=window.setTimeout(function(){windowResize()},500)};$(window).bind("resize.galleryDetail",function(){onResize()});$(window).on("orientationchange.galleryDetail",function(){onResize()});windowResize();scope.$on("viewDetail",function(){window.setTimeout(function(){scrollToPage();setActiveItem()},0)});$(document).on("blur",function(){try{element.focus()}catch(ev){}});scope.$on("$routeChangeStart",function(next,current){$(window).off("resize.galleryDetail");$(window).off("orientationchange.galleryDetail")});scope.$on("keydown:37",function(onEvent,keypressEvent){if(previousActive){stopVideoPlaying();$prevControl.click()}});scope.$on("keydown:39",function(onEvent,keypressEvent){if(nextActive){stopVideoPlaying();$nextControl.click()}});setActiveItem()};initGalleryDetails()};return{link:link,restrict:"EA"}}]);angular.module("app").controller("vehicleGalleriesController",["$log","$scope","$rootScope","$location","$routeParams","safeApply",function($log,$scope,$rootScope,$location,$routeParams,safeApply){var categoryIndex=0;$scope.thumb=!0;$scope.detail=!1;var assetId="file",params=$location.search();$scope.activeId=params[assetId]||"";var checkItem=function(sId){return sId&&$("#gallery-item-"+sId).length>0};if(checkItem(params[assetId])){$scope.thumb=!1;$scope.detail=!0}$scope.galleryCol=4;$scope.getThumbClass=function(){var className="off-screen";$scope.thumb&&(className="");return className};$scope.getDetailClass=function(){var className="off-screen";$scope.thumb||(className="");return className};$scope.getGalleryDetailUrl=function(id){var url=window.baseURI+$location.path()+"?"+assetId+"="+id;return url};$scope.getGalleryUrl=function(id){var url=window.baseURI+$location.path();return url};$scope.$on("$routeUpdate",function(){params=$location.search();if(checkItem(params[assetId])){$scope.activeId=params[assetId];if($scope.thumb){$scope.thumb=!1;$scope.detail=!0;$scope.$broadcast("viewDetail");$scope.$emit("viewDetail")}}else{$scope.activeId="";if(!$scope.thumb){$scope.thumb=!0;$scope.detail=!1;$scope.$broadcast("viewThumb");$scope.$emit("viewThumb")}}});$scope.gotoDetails=function(step){var eventName="viewDetailNext";-1===step&&(eventName="viewDetailPrev");$scope.$broadcast(eventName)};$scope.updateLocationUrl=function(id){safeApply($scope,function(){$location.search(assetId,id);$scope.activeId=id})};$scope.$on("kia.nav.update.selected",function(event,id){$(".nav-secondary-main li.selected a").on("click",function(ev){params=$location.search();checkItem(params[assetId])&&$scope.thumb===!1&&safeApply($scope,function(){$scope.thumb=!0;$scope.detail=!1;$scope.$broadcast("viewThumb");$scope.$emit("viewThumb");$location.path();$location.search(assetId,null)})})});$scope.setCategoryIndex=function(index){categoryIndex=index};$scope.isCategorySelected=function(index){return categoryIndex===index}}]);angular.module("app").directive("windowRedirect",["$log","$rootScope","safeApply","$routeParams",function($log,$rootScope,safeApply,$routeParams){return{restrict:"A",link:function(scope,element,attrs){var timer,vSeries,vYear,displayAll=function(){if($routeParams.gallery){vSeries=$routeParams.model;vYear=$routeParams.year;$(window).width()<768&&"all"!==$routeParams.gallery&&(window.location=window.baseURI+"/vehicle/"+vSeries+"/"+vYear+"/galleries/all")}};$(window).bind("resize",function(){timer&&window.clearTimeout(timer);timer=window.setTimeout(function(){displayAll()},500)}).resize();var init=function(){displayAll()};init()}}}]);angular.module("app").factory("offersService",["$log","$http","messageService",function($log,$http,messageService){var defaultRequestParams,url,get;url="data/{series}/{year}/offers";defaultRequestParams={model:"soul",year:"2013"};get=function(criteria,success,failure){var requestParams=jQuery.extend({},defaultRequestParams,criteria),serviceURL="data/offers?series="+requestParams.series+"&year="+requestParams.year;criteria.zipcode&&(serviceURL+="&zipcode="+requestParams.zipcode);return $http.get(serviceURL,requestParams).success(function(data,getResponseHeaders){messageService.publish("offersSearch",{source:"offersService",criteria:criteria});return angular.isFunction(success)?success(data):void 0}).error(failure)};return{get:get}}]);angular.module("app").directive("zipField",["$log","kiaEvents","safeApply","localize",function($log,kiaEvents,safeApply,localize){return{restrict:"EA",scope:{theme:"@",errorMessage:"@",model:"=",id:"@",request:"&",placeholder:"@"},replace:!0,priority:999,controller:function($scope){$scope.showError=!1;$scope.externalError=!1;$scope.placeholder&&void 0!==$scope.placeholder&&""!==$scope.placeholder||($scope.placeholder="ZIP")},link:function(scope,element,attrs){var firstTime=!0,defaultErrorMessage=localize.getLocalizedString("label.dealerLocator.error");scope.errorMessage=localize.getLocalizedString("label.dealerLocator.error");scope.field=$(element).find("input");$(scope.field).focus(function(){scope.showError=!1;scope.$apply();var that=this;scope.$emit(kiaEvents.ZIPCODE.FOCUS,scope.id);setTimeout(function(){$(that).select()},10)});$(scope.field).focusout(function(){scope.$emit(kiaEvents.ZIPCODE.UNFOCUS,scope.id);scope.field.val().length>0?safeApply(scope,scope.validate()):scope.field.val(scope.model)});scope.$watch("model",function(value){if(0===String(value).length){scope.showError=!1;scope.field.addClass(window.lang+"-no-data")}else scope.field.removeClass(window.lang+"-no-data");5===String(value).length&&scope.$emit(kiaEvents.ZIPCODE.VALID,scope.id)});scope.$on(kiaEvents.ZIPCODE.SUBMIT,function(event,id){id===scope.id&&scope.send()});scope.$on(kiaEvents.ZIPCODE.ERROR,function(event,message,id){(id===scope.id||"all"===id)&&safeApply(scope,function(){scope.showError=!0;scope.errorMessage=message;scope.$emit(kiaEvents.ZIPCODE.NOT_VALID,scope.errorMessage,id)})});scope.$on(kiaEvents.ZIPCODE.VALIDATE,function(event){scope.validate()});scope.validate=function(){if(!firstTime){scope.errorMessage=defaultErrorMessage;var zipPatt=/^\d{5}(?:[-\s]\d{4})?$/;if(void 0!==scope.model&&scope.model.match(zipPatt)){scope.showError=!1;scope.$emit(kiaEvents.ZIPCODE.VALID,defaultErrorMessage,scope.id);return!0}scope.showError=!0;scope.$emit(kiaEvents.ZIPCODE.NOT_VALID,defaultErrorMessage,scope.id);return!1}firstTime=!1};scope.send=function(){if(scope.validate()){scope.field.blur();return scope.request(scope.model)}};var field=$(element).find("input")[0];Modernizr.placeholder||Placeholders.enable(field)}}}]);angular.module("app").directive("zipBox",["kiaEvents","$log","localize",function(kiaEvents,$log,localize){return{restrict:"A",replace:!0,scope:{zipCode:"=",zipId:"@",requestSubmit:"&",requestFind:"&",data:"=",theme:"@",placeholder:"@"},priority:999,templateUrl:window.staticURI+"/views/directives/zipBox.html",link:function(scope,element,attrs){scope.validZipCode=!0;scope.sideEditMode=!1;scope.filterMenu=!1;scope.errorMessage=localize.getLocalizedString("label.dealerLocator.error");scope.submitZipForm=function(){scope.$broadcast(kiaEvents.ZIPCODE.SUBMIT,scope.zipId)};scope.$on(kiaEvents.DL.CLOSE_FILTER_MENU,function(event){scope.filterMenu=!1});scope.$on(kiaEvents.ZIPCODE.NOT_VALID,function(event,message,id){scope.validZipCode=!1;scope.errorMessage=message});scope.$on(kiaEvents.ZIPCODE.VALID,function(event,id){scope.validZipCode=!0});scope.$on(kiaEvents.ZIPCODE.ERROR,function(event,message,id){scope.validZipCode=!1;scope.errorMessage=message});scope.$on(kiaEvents.ZIPCODE.FOCUS,function(event,id){scope.sideEditMode=!0;scope.validZipCode=!0});scope.$on(kiaEvents.ZIPCODE.UNFOCUS,function(event,id){});scope.$on(kiaEvents.ZIPCODE.EDITMODE_OFF,function(event){scope.sideEditMode=!1});scope.$on(kiaEvents.ZIPCODE.EDITMODE_ON,function(event){scope.sideEditMode=!0})}}}]);angular.module("app").controller("vehicleOffersController",["$log","$rootScope","$scope","$timeout","$routeParams","$route","offersService","kiaEvents","$location","cookieService","offersModel","geoLocationService","disclaimersModel","buildAndPriceModel","localize","contactAtOnceService","zipCodeCookie",function($log,$rootScope,$scope,$timeout,$routeParams,$route,offersService,kiaEvents,$location,cookieService,offersModel,geoLocationService,disclaimersModel,buildAndPriceModel,localize,contactAtOnceService,zipCodeCookie){function updateYearsList(event,data){var series,vehicles=$scope.vehicles,len=vehicles&&vehicles.length;if(len){series=$routeParams.series?$routeParams.series.toUpperCase():data&&data.vehicle.series.toUpperCase();if(series){for(var vehicle,years=[],i=0;len>i;i++){vehicle=vehicles[i];vehicle.series.toUpperCase().split(" ").join("-")===series&&years.indexOf(vehicle.year)<0&&years.push(vehicle.year)}years.sort();$scope.years=years}}}var success,failure,update,load,findMe,findMeError,findMeSuccess,clearFilters,cao_widget_id="#iCoder_POP1141877261";$scope.codeExist=!1;success=function(data){if(data.offer.statusDesc===kiaEvents.SERVICES.SUCCESS){offersModel.update(data);$scope.escapedSeriesName=data.offer.seriesName;$scope.types=offersModel.getTypes();$scope.trims=offersModel.getTrims({filtered:!0});$scope.allTrims=offersModel.getOffersInfo(offersModel.getOffersForAllTrims(),!0);$scope.fullTrims=offersModel.getFullTrims();$scope.allTrimsImage=offersModel.getAllTrimsImage();$scope.allTrimsAvalaible=offersModel.getOffersForAllTrims().length>0;$scope.noTrimsMatch=$scope.trims.length>0;$scope.noMatches=!$scope.allTrimsAvalaible&&!$scope.noTrimsMatch;0===$scope.zipCode.length?$scope.national=!0:$scope.national=!1;$scope.$broadcast(kiaEvents.ZIPCODE.VALIDATE);$scope.$broadcast(kiaEvents.ZIPCODE.EDITMODE_OFF);cookieService.cookie("user-zipcode",$scope.zipCode,{expires:3650,path:"/",domain:""});if(window.LoadPopIn){$(cao_widget_id).css("max-height","");var placementId=contactAtOnceService.getPlacementId(null,null);window.LoadPopIn(kiaEvents.GLOBAL.CONTACT_AT_ONCE_GENERAL_MERCHANT,kiaEvents.GLOBAL.CONTACT_AT_ONCE_PROVIDER_ID,placementId,$scope.year,kiaEvents.GLOBAL.CONTACT_AT_ONCE_MAKE,$scope.series,null,localize.getLocalizedString("label.contactatonce.smsDefaultMessage"),zipCodeCookie.get())}$scope.dataReady=!0;$scope.codeExist=!0}else{$scope.serviceError=!0;$scope.$broadcast(kiaEvents.ZIPCODE.ERROR,data.offer.statusDesc,"offersZipSearch")}buildAndPriceModel.initialize($scope.series,$scope.year,$scope.zipCode);buildAndPriceModel.setTrim(offersModel.firstTrimId());$scope.data=buildAndPriceModel.detail;$rootScope.$broadcast(kiaEvents.LOADER.HIDE)};failure=function(data){};update=function(zipCode){var routeParams;clearFilters();if($scope.series&&$scope.year){routeParams=zipCode?{series:$scope.series,year:$scope.year,zipcode:$scope.zipCode}:{series:$scope.series,year:$scope.year};return load(routeParams)}return!1};load=function(routeParams){$rootScope.$broadcast(kiaEvents.LOADER.SHOW);$scope.$broadcast("tileLayout.close.detail");!routeParams.zipcode&&$scope.zipCode&&(routeParams.zipcode=$scope.zipCode);offersService.get(routeParams,success,failure)};findMe=function(){geoLocationService.findMe(findMeSuccess,findMeError)};findMeSuccess=function(zipCode){$scope.zipCode=zipCode;$scope.$broadcast(kiaEvents.ZIPCODE.VALIDATE);update(zipCode);$scope.$$phase||$scope.$digest()};findMeError=function(message){$scope.$broadcast(kiaEvents.ZIPCODE.ERROR,message,"all")};clearFilters=function(){offersModel.resetFilters();$scope.$broadcast(kiaEvents.OFFERS.RESET_FILTER)};$scope.series=$routeParams.series;$scope.year=$routeParams.year;$scope.years=[];$scope.update=update;$scope.findMe=findMe;$scope.allTrimsAvalaible=!1;$scope.serviceError=!1;$scope.national=!1;$scope.nearMatches=!1;$scope.filteredHeader=!1;$scope.currentOffer=null;$scope.clearFilters=clearFilters;$scope.clearFiltersVisible=offersModel.filtersAvailable();if(cookieService.cookie("user-zipcode")){$scope.zipCode=cookieService.cookie("user-zipcode");update($scope.zipCode);$scope.codeExist=!0}else{$scope.zipCode="";$scope.codeExist=!1}$scope.$on("vehicleSelector.vehiclesLoaded",updateYearsList);$rootScope.$on("vehicleSelector.selected",updateYearsList);$scope.changeYear=function(newYear){$scope.year=newYear;$routeParams.year=newYear;$scope.codeExist&&$scope.update()};$scope.getMtfTitle=function(){return localize.getLocalizedString("label.mtf.title.offers")};$scope.$on(kiaEvents.ZIPCODE.NOT_VALID,function(event){});$scope.$on("kia.navigation.goto.section",function(event,section,data){if("bnp"===section){var i=0,trimId=null;for(i=0;i<$scope.trims.length;i++)if(null!==$scope.trims[i].offerList&&$scope.trims[i].offerList.indexOf(data.id)>=0){trimId=$scope.trims[i].trimId;break}trimId=null!==trimId?"&trim="+trimId:"";window.location="http://"+$location.host()+"/"+window.country+"/"+window.lang+"/build?series="+$scope.series+"&year="+$scope.year+trimId}"vs"===section&&(window.location="http://"+$location.host()+"/"+window.country+"/"+window.lang+"/dealers/inventory/"+$scope.series+"/"+$scope.year)});$scope.$on(kiaEvents.OFFERS.FILTER,function(event,criteria){$scope.allTrims=offersModel.getOffersInfo(offersModel.getOffersForAllTrims(),!0);$scope.trims=offersModel.getTrims({filtered:!0});buildAndPriceModel.setTrim(offersModel.firstTrimId());$scope.clearFiltersVisible=offersModel.filtersAvailable();$scope.allTrims&&($scope.allTrimsAvalaible=$scope.allTrims.length>0);if(0===$scope.trims.length&&0===$scope.allTrims.length){$scope.nearMatches=!0;$scope.noMatches=!0;$scope.trims=offersModel.getTrims({offerMatchOnly:!0})}else{$scope.nearMatches=!1;$scope.noMatches=!1}$scope.zipCode.length>0?$scope.national=!1:$scope.national=!0;$scope.$broadcast("tileLayout.close.detail");setTimeout(function(){$scope.$broadcast("tileLayout.redraw")},50)});$rootScope.$on("vehicleSelector.selected",function(evt,args){$location.search(angular.extend($location.search(),{series:args.vehicle.series,year:args.vehicle.year}));$scope.series=args.vehicle.series;$scope.year=args.vehicle.year;$routeParams.series=args.vehicle.series;$routeParams.year=args.vehicle.year;$scope.codeExist&&$scope.update();$scope.showVehicleSelector=!1});$rootScope.$on("vehicleSelector.display",function(){$scope.showVehicleSelector=!0});disclaimersModel.setGlobal("disclaimer-offers-"+$routeParams.series+"-"+$routeParams.year);$scope.$emit(kiaEvents.ANALYTICS.OFFERS_CONFIRMATION);$(cao_widget_id).css("max-height",0)}]);angular.module("app").directive("offersInteraction",["kiaEvents","$location","$log","$timeout","$window",function(kiaEvents,$location,$log,$timeout,$window){return{restrict:"A",replace:!0,priority:1,link:function(scope,element,attrs){require(["https://ebusiness.dealertrack.com/Suite/suite.js"],function(){$window.drs.init()});var resizeHandler,mobileDetail=element.find(".offers-mobile-detail"),filtersPanel=element.find(".offers-sidebar"),contentPanel=element.find(".offers-content"),mobileDetailOpen=(element.find(".offers-mobile-detail .search"),element.find(".offers-mobile-detail .download"),element.find(".offers-mobile-detail .bp"),!1),mobileFiltersOpen=!1;scope.mobile=!1;scope.dataReady=!1;element.find(".filter-clear").addClass(window.lang);scope.onDeviceModeON=function(event){scope.mobile=!0};scope.onDeviceModeOFF=function(event){scope.mobile=!1;mobileDetailOpen&&scope.closeMobileDetail();mobileFiltersOpen&&scope.closeMobileFilters()};scope.$on(kiaEvents.RESPONSIVE.MATCH768,scope.onDeviceModeON);scope.$on(kiaEvents.RESPONSIVE.MATCH480,scope.onDeviceModeON);scope.$on(kiaEvents.RESPONSIVE.MATCH320,scope.onDeviceModeON);scope.$on(kiaEvents.RESPONSIVE.UNMATCH768,scope.onDeviceModeOFF);scope.$on(kiaEvents.RESPONSIVE.UNMATCH1024,scope.onDeviceModeOFF);resizeHandler=function(){element.css("height",element.find(".offers-mobile-detail").height())};scope.$on("tileLayout.open.mobile.detail",function(event,data){window.scrollTo(0,0);mobileFiltersOpen&&scope.closeMobileFilters();scope.mobileData=data;var sHref=window.baseURI+"/build?series="+scope.series+"&year="+scope.year;null!==data.trimId&&(sHref+="&trim="+data.trimId);element.find("a.bp").attr("href",sHref);sHref=window.baseURI+"/dealers/inventory?series="+scope.series+"&year="+scope.year;element.find("a.search").attr("href",sHref);var sDownload=window.contentURI+"/content/media/all/incentives/3.0/"+scope.series+".pdf";element.find("a.download").attr("href",sDownload);mobileDetail.removeClass("close").addClass("open");$timeout(function(){element.css("height",element.find(".offers-mobile-detail").height())},0);element.find(".offers-list").hide();element.bind("resize.offers.rot",resizeHandler);mobileDetailOpen=!0});scope.$on("tileLayout.open.unique.detail",function(event,tileLayoutScope){scope.$broadcast("tileLayout.close.unique.detail",tileLayoutScope)});scope.closeMobileDetail=function(){window.scrollTo(0,0);element.find(".offers-list").show();element.unbind("resize.offers.rot",resizeHandler);mobileDetail.removeClass("open").addClass("close");element.css("height","auto");mobileDetailOpen=!1};scope.showMobileFilters=function(){filtersPanel.removeClass("close").addClass("open");contentPanel.removeClass("close").addClass("open");mobileFiltersOpen=!0};scope.closeMobileFilters=function(){filtersPanel.removeClass("open").addClass("close");contentPanel.removeClass("open").addClass("close");mobileFiltersOpen=!1}}}}]);angular.module("app").directive("offersZipBox",["kiaEvents","$log","localize",function(kiaEvents,$log,localize){return{restrict:"A",replace:!0,scope:{zipCode:"=",zipId:"@",requestSubmit:"&",requestFind:"&",data:"="},link:function(scope,element,attrs){scope.validZipCode=!0;scope.sideEditMode=!1;scope.filterMenu=!1;scope.$on("localizeResourcesUpdates",function(){scope.errorMessage=localize.getLocalizedString("label.dealerLocator.error")});scope.submitZipForm=function(){scope.$broadcast(kiaEvents.ZIPCODE.SUBMIT,scope.zipId)};scope.$on(kiaEvents.DL.CLOSE_FILTER_MENU,function(event){scope.filterMenu=!1});scope.$on(kiaEvents.ZIPCODE.NOT_VALID,function(event,message,id){scope.validZipCode=!1;scope.initialErrorMessage=message;scope.errorMessage=message});scope.$on(kiaEvents.ZIPCODE.VALID,function(event,id){scope.validZipCode=!0});scope.$on(kiaEvents.ZIPCODE.ERROR,function(event,message,id){scope.validZipCode=!1;scope.errorMessage=message});scope.$on(kiaEvents.ZIPCODE.FOCUS,function(event,id){scope.sideEditMode=!0});scope.$on(kiaEvents.ZIPCODE.EDITMODE_OFF,function(event){scope.sideEditMode=!1});scope.$on(kiaEvents.ZIPCODE.EDITMODE_ON,function(event){scope.sideEditMode=!0})}}}]);angular.module("app").directive("tileIterator",["kiaEvents","$log","$timeout",function(kiaEvents,$log,$timeout){return{restrict:"A",replace:!0,link:function(scope,element,attrs){if(scope.$parent.$last){scope.$emit("start.tl",!1);$timeout(function(){scope.$emit("tileLayout.redraw")},100)}scope.offerSelected=!1}}}]);angular.module("app").directive("offerBox",["kiaEvents","$log",function(kiaEvents,$log){return{restrict:"A",replace:!0,scope:{offer:"=",mobile:"="},link:function(scope,element,attrs){scope.offerSelected=!1;scope.showDetail=function(){scope.$emit(kiaEvents.ANALYTICS.OFFERS_SELECT,scope.offer);if(scope.offerSelected)scope.closeDetail();else{var row=0;if(!scope.offerSelected){if(scope.mobile){scope.$emit("tileLayout.open.mobile.detail",scope.offer);return!1}scope.offerSelected=!0;scope.offerSelected=!0;element.addClass("selected");row=Number(element[0].attributes["data-row"].value);scope.$emit("tileLayout.open.detail",scope,row,element,scope.offer)}}};scope.selected=function(value){scope.offerSelected=value;value?element.addClass("selected"):element.removeClass("selected")};scope.closeDetail=function(){scope.offerSelected=!1;scope.offerSelected=!1;element.removeClass("selected");scope.$emit("tileLayout.close.detail",scope);setTimeout(function(){},50)}}}}]);angular.module("app").directive("offerTileDetail",["safeApply","$rootScope","$routeParams","$log","$window",function(safeApply,$rootScope,$routeParams,$log,$window){return{restrict:"A",link:function(scope,element,attrs){scope.goBNP=function(){var sHref=window.baseURI+"/build/"+$routeParams.series+"/"+$routeParams.year+"/trims";scope.currentTileData&&null!==scope.currentTileData.trimId&&(sHref+="?trim="+scope.currentTileData.trimId);window.location.href=sHref};scope.goDI=function(){var dHref=window.baseURI+"/dealers/inventory?series="+$routeParams.series+"&year="+$routeParams.year;$window.location=dHref};scope.goPDF=function(){var sDownload=window.contentURI+"/content/media/all/incentives/3.0/"+$routeParams.series+".pdf";$window.open(sDownload,"_blank")}}}}]);angular.module("app").directive("filterRule",["kiaEvents","offersModel",function(kiaEvents,offersModel){
return{restrict:"A",link:function(scope,element,attrs){scope.filterOn=!1;scope.$on(kiaEvents.OFFERS.RESET_FILTER,function(event){scope.filterOn=!1;element.parent().removeClass("checked");scope.onFilter()});scope.onFilter=function(){var criteria={rule:attrs.rule,show:scope.filterOn,id:attrs.value};if("trim"===criteria.rule){offersModel.filterByTrim(criteria);scope.$emit(kiaEvents.OFFERS.FILTER,criteria);scope.$emit(kiaEvents.ANALYTICS.OFFERS_FILTER,criteria)}if("offer"===criteria.rule){offersModel.filterByOfferType(criteria);scope.$emit(kiaEvents.OFFERS.FILTER,criteria);scope.$emit(kiaEvents.ANALYTICS.OFFERS_FILTER,criteria)}}}}}]);angular.module("app").factory("offersModel",["$log","$sce",function($log,$sce){var offers,allTrims,trims,offers_types,allTrimsImage,update,getTypes,getTrims,getFullTrims,getAllTrimsImage,getOffersForAllTrims,filterByTrim,filterByOfferType,resetFilters,filterOfferList,getOffersInfo,filtersAvailable,getPropsLength,firstTrimId,model,trimsFilter={},offerTypeFilter={};allTrimsImage="";update=function(data){model=data;offers_types=data.offer.offersType.hashtify("id");for(var i=data.offer.offersByTrim.length;i--;)data.offer.offersByTrim[i].image=window.contentURI+data.offer.offersByTrim[i].image;i=data.offer.offerInfos.length;for(;i--;){data.offer.offerInfos[i].cash=-1!==data.offer.offerInfos[i].headline.indexOf("$")?!0:!1;data.offer.offerInfos[i].cash&&(data.offer.offerInfos[i].headline=data.offer.offerInfos[i].headline.split("$")[1]);data.offer.offerInfos[i].percent=-1!==data.offer.offerInfos[i].headline.indexOf("%")?!0:!1;data.offer.offerInfos[i].percent&&(data.offer.offerInfos[i].headline=data.offer.offerInfos[i].headline.split("%")[0]);data.offer.offerInfos[i].description=$sce.trustAsHtml(data.offer.offerInfos[i].description);data.offer.offerInfos[i].headline=$sce.trustAsHtml(data.offer.offerInfos[i].headline);data.offer.offerInfos[i].typeTitle=offers_types[data.offer.offerInfos[i].offerTypeId].name;"Competitive Bonus"===data.offer.offerInfos[i].typeTitle?data.offer.offerInfos[i].bonus=!0:data.offer.offerInfos[i].bonus=!1;data.offer.offerInfos[i].national="All Region"===data.offer.offerInfos[i].regions[0];var ndx=0,trimId=null;for(ndx=0;ndx<data.offer.offersByTrim.length;ndx++)if(null!==data.offer.offersByTrim[ndx].offerList&&data.offer.offersByTrim[ndx].offerList.indexOf(data.offer.offerInfos[i].id)>=0){trimId=data.offer.offersByTrim[ndx].trimId;break}data.offer.offerInfos[i].trimId=trimId}offers=data.offer.offerInfos.hashtify("id");trims=data.offer.offersByTrim;allTrims=data.offer.offersForAllTrims;allTrimsImage=window.contentURI+data.offer.offersForAllTrims.image};getOffersInfo=function(list,filtered){var result=[],listLength=list.length;if(list&&0!==list.length){for(var i=0;listLength>i;i++)result.push(offers[list[i]]);filtered&&(result=filterOfferList(result,"offer"));return result}};getTrims=function(params){var filteredTrims,options={filtered:params.filtered?params.filtered:!1,offerMatchOnly:params.offerMatchOnly?params.offerMatchOnly:!1,trimMatchOnly:params.trimMatchOnly?params.trimMatchOnly:!1,all:params.all?params.all:!1},result=[];(options.filtered||options.trimMatchOnly)&&(filteredTrims=filterOfferList(trims,"trim"));options.offerMatchOnly&&(filteredTrims=trims);var flen;flen=filteredTrims?filteredTrims.length:0;for(var i=0;flen>i;i++)if(filteredTrims[i].offerList.length>0){var offerInfos=getOffersInfo(filteredTrims[i].offerList,!options.trimMatchOnly);filteredTrims[i].offers=offerInfos;0!==offerInfos.length&&result.push(filteredTrims[i])}return result};getOffersForAllTrims=function(){return allTrims.offerList};getTypes=function(){return offers_types};getFullTrims=function(){return trims};getAllTrimsImage=function(){return allTrimsImage};getPropsLength=function(obj){var arr=[];for(var k in obj)obj.hasOwnProperty(k)&&arr.push(k);return arr.length};filterOfferList=function(list,criteria){var result=[],listLength=list.length,fByOT=0!==getPropsLength(offerTypeFilter),fByTrim=0!==getPropsLength(trimsFilter);if("offer"===criteria){if(!fByOT)return list;for(var i=0;listLength>i;i++)offerTypeFilter[list[i].offerTypeId]&&result.push(list[i])}if("trim"===criteria){if(!fByTrim)return list;for(var j=0;listLength>j;j++)trimsFilter[list[j].trimId]&&result.push(list[j])}return result};filterByTrim=function(criteria){criteria.show?trimsFilter[criteria.id]=criteria.id:delete trimsFilter[criteria.id]};filterByOfferType=function(criteria){criteria.show?offerTypeFilter[criteria.id]=criteria.id:delete offerTypeFilter[criteria.id]};resetFilters=function(){trimsFilter={};offerTypeFilter={}};filtersAvailable=function(){var fByOT=getPropsLength(offerTypeFilter),fByTrim=getPropsLength(trimsFilter),existFilters=fByOT+fByTrim>0;return existFilters};firstTrimId=function(){for(var len=trims.length,i=0;len>i;i++)for(var j in trimsFilter)if(trims[i].trimId.toString()===trimsFilter[j].toString())return trims[i].trimId;return trims[0].trimId};return{update:update,offers:offers,getTrims:getTrims,getTypes:getTypes,getFullTrims:getFullTrims,getAllTrimsImage:getAllTrimsImage,getOffersForAllTrims:getOffersForAllTrims,filterByTrim:filterByTrim,filterByOfferType:filterByOfferType,resetFilters:resetFilters,getOffersInfo:getOffersInfo,filtersAvailable:filtersAvailable,firstTrimId:firstTrimId}}]);angular.module("app").controller("vehicleCompareController",["$log","$scope","$rootScope","$routeParams","$location","$window","kiaEvents","compareService","compareModel","localize","contactAtOnceService","zipCodeCookie",function($log,$scope,$rootScope,$routeParams,$location,$window,kiaEvents,compareService,compareModel,localize,contactAtOnceService,zipCodeCookie){var success,failure,updateComparison,onPhotos;$scope.dataReady=!1;var popinLoaded=!1;$scope.series=$routeParams.series;$scope.year=$routeParams.year;$scope.showVehicleSelector=!1;$scope.fixHeightSection="";success=function(response){if(response.comparison.status===kiaEvents.SERVICES.SUCCESS){compareModel.update(response.comparison.result);$scope.kiaAdvantage=!1;$scope.categories=compareModel.getCategories();$scope.primary=compareModel.getPrimary();$scope.competitors=compareModel.getCompetitors();$scope.comparisonData=compareModel.getComparisonData();$scope.currentCategory=compareModel.getCategory();$scope.kiaTrims=compareModel.getKiaTrims();$scope.columns=compareModel.getColumns();0===compareModel.getCategory().categoryId&&compareService.getPhotos(compareModel.getCompetitorIds(!0),onPhotos,failure);$scope.photosCategory={categoryId:0,categoryName:localize.getLocalizedString("label.compare.photos")};$scope.dataReady=!0;$scope.mobile&&$scope.fixHeight($scope.fixHeightSection);$scope.$emit(kiaEvents.LOADER.HIDE);$(window).scrollTop(0);if(window.LoadPopIn&&!popinLoaded){var placementId=contactAtOnceService.getPlacementId(null,null);window.LoadPopIn(kiaEvents.GLOBAL.CONTACT_AT_ONCE_GENERAL_MERCHANT,kiaEvents.GLOBAL.CONTACT_AT_ONCE_PROVIDER_ID,placementId,$scope.year,kiaEvents.GLOBAL.CONTACT_AT_ONCE_MAKE,$scope.series,null,localize.getLocalizedString("label.contactatonce.smsDefaultMessage"),zipCodeCookie.get());popinLoaded=!0}}};failure=function(response){};onPhotos=function(response){compareModel.updatePhotos(response.autoGallery.result.photoShot);$scope.photos=compareModel.getPhotos();($scope.mobile||$scope.tablet)&&$scope.fixHeight("photos")};$routeParams.series&&$routeParams.year&&compareService.get($routeParams,success,failure);updateComparison=function(){$scope.$emit(kiaEvents.LOADER.SHOW);var params=$routeParams;params.trimsList=compareModel.getCompetitorIds();params.category=compareModel.getCategory().categoryId;if(0!==params.category)compareService.get(params,success,failure);else{compareService.get(params,success,failure);compareService.getPhotos(compareModel.getCompetitorIds(!0),onPhotos,failure)}};$scope.getMtfTitle=function(){return localize.getLocalizedString("label.mtf.title.compare")};$scope.$on(kiaEvents.COMPARE.REMOVE_COMPETITOR,function(event,competitor){compareModel.removeCompetitor(competitor);$scope.updateComparison()});$scope.$on(kiaEvents.COMPARE.SHOW_CATEGORY,function(event,category){if($scope.mobile||$scope.tablet){$scope.fixHeight("list");$scope.hideCategoryMenu()}if(category.categoryId===$scope.currentCategory.categoryId)return!1;if(0!==category.categoryId){$scope.showPhotos=!1;compareModel.setCategory(category);$scope.currentCategory=compareModel.getCategory();$scope.updateComparison()}else{compareModel.setCategory(category);$scope.currentCategory=compareModel.getCategory();$scope.showPhotoGallery();compareService.getPhotos(compareModel.getCompetitorIds(!0),onPhotos,failure)}$scope.kiaAdvantage=!1;window.scrollTo(0,0)});$scope.$on(kiaEvents.COMPARE.ADD_COMPETITOR,function(event,competitor,idAnchor){$scope.currentCaller=0!==idAnchor?"competitor_arrow_"+idAnchor:"competitor_arrow_cross_"+($scope.columns-2);$scope.currentCallerTrimdId=idAnchor;$scope.selectVehicle=!0;$scope.actionLabel=!0;if(competitor){$scope.defaultMaker={makeName:competitor.makeName,year:competitor.year};$scope.actionLabel=!1}});$scope.$on(kiaEvents.COMPARE.REQUEST_ADD_COMPETITOR,function(event,currentTrimId,trimId){$scope.$emit(kiaEvents.LOADER.SHOW);if(0!==currentTrimId){compareModel.replaceCompetitor(currentTrimId,trimId);$scope.updateComparison()}else{compareModel.addCompetitor(trimId);$scope.updateComparison()}});$scope.$on(kiaEvents.COMPARE.REQUEST_CHANGE_TRIM,function(event,currentTrim,autoCompetitors){$scope.$emit(kiaEvents.LOADER.SHOW);if(autoCompetitors){$scope.primary.trimId=currentTrim.trimId;var params=$routeParams;params.trimsList=currentTrim.trimId;params.category=compareModel.getCategory().categoryId;compareService.get(params,success,failure)}else{$scope.primary.trimId=currentTrim.trimId;$scope.updateComparison()}});$rootScope.$on("vehicleSelector.selected",function(evt,args){var pathArray=window.location.pathname.split("/");$window.location.href="/us/"+pathArray[2]+"/vehicle/"+args.vehicle.series+"/"+args.vehicle.year+"/compare"});$rootScope.$on("vehicleSelector.display",function(){$scope.showVehicleSelector=!0});$scope.updateComparison=updateComparison}]);angular.module("app").directive("compareInteraction",["$log","kiaEvents","$location","safeApply",function($log,kiaEvents,$location,safeApply){return{restrict:"A",replace:!0,priority:1,link:function(scope,element,attrs){var onMobileModeON,onMobileModeOFF,onTabletModeON,onTabletModeOFF,legend=element.find(".legend");scope.mobile=!1;scope.tablet=!1;scope.selectVehicle=!1;scope.showChangeKiaTrim=!1;scope.currentCaller=0;scope.currentCallerTrimdId=0;scope.showPhotos=!1;scope.showNoKiaAdvantages=!1;scope.$watch("kiaAdvantage",function(value){if(value){element.find('[data-kia="true"]').removeClass("advantage");legend.addClass("hidden");element.find('[data-kia="false"]').hide();element.find(".advantageCheck").parent().addClass("checked");0===element.find('[data-kia="true"]').length?scope.showNoKiaAdvantages=!0:scope.showNoKiaAdvantages=!1}else{element.find('[data-kia="true"]').addClass("advantage");legend.removeClass("hidden");element.find('[data-kia="false"]').show();element.find(".advantageCheck").parent().removeClass("checked");scope.showNoKiaAdvantages=!1}});scope.addNewCar=function(){scope.$emit(kiaEvents.COMPARE.ADD_COMPETITOR,null,0)};scope.$on(kiaEvents.COMPARE.CLOSE_SELECT_VEHICLE,function(event){scope.selectVehicle=!1});scope.$on(kiaEvents.COMPARE.CLOSE_CHANGE_TRIM,function(event){scope.showChangeKiaTrim=!1});scope.$on(kiaEvents.COMPARE.SHOW_MOBILE_GALLERY,function(event,photoset){scope.photoset=photoset;element.find(".compare-mobile-gallery").removeClass("close").addClass("open");scope.fixHeight("mobile-gallery")});scope.changeKiaTrim=function(){scope.showChangeKiaTrim=!0};scope.showPhotoGallery=function(){scope.showPhotos=!0;element.find(".compare-photos").removeClass("close").addClass("open");scope.mobile&&scope.fixHeight("photos")};scope.closeMobilePhotoGallery=function(){element.find(".compare-mobile-gallery").removeClass("open").addClass("close");scope.fixHeight("photos")};scope.showCategoryMenu=function(){element.find(".compare-categories").removeClass("close").addClass("open");(scope.mobile||scope.tablet)&&scope.fixHeight("categories")};scope.hideCategoryMenu=function(){element.find(".compare-categories").removeClass("open").addClass("close");if(scope.mobile){element.find(".compare-header").removeClass("open").addClass("close");element.find(".compare-button").removeClass("close").addClass("open");element.find(".compare-list").removeClass("close").addClass("open");scope.fixHeight("list");scope.currentCategory&&0===scope.currentCategory.categoryId&&scope.fixHeight("photos")}};scope.showCompareMenu=function(){element.find(".compare-categories").removeClass("open").addClass("close");element.find(".compare-list").removeClass("open").addClass("close");element.find(".compare-photos").removeClass("open").addClass("close");element.find(".compare-header").removeClass("close").addClass("open");element.find(".compare-button").removeClass("close").addClass("open");(scope.mobile||scope.tablet)&&scope.fixHeight("init")};scope.fixHeight=function(section){safeApply(scope,function(){scope.fixHeightSection=section});var timeDelay=100;("list"===section||"photos"===section||"mobile-gallery"===section)&&(timeDelay=2e3);if(scope.fixHeightTimeout){clearTimeout(scope.fixHeightTimeout);scope.fixHeightTimeout=null}scope.fixHeightTimeout=setTimeout(function(){element.css("height","");"categories"===section&&element.css("height",element.find(".compare-categories ul").height()+element.find(".compare-categories .compare-device-header").height());"list"===section&&element.css("height","auto");"init"===section&&element.css("height",element.find(".compare-header").height()+element.find(".compare-button").height()+6);if("photos"===section){element.find(".compare-photos").show();scope.mobile?element.css("height",element.find(".compare-photos").height()):element.css("height","auto")}if("mobile-gallery"===section){element.css("height",element.find(".compare-mobile-gallery").height());element.find(".compare-photos").hide()}scope.fixHeightTimeout=null},timeDelay);window.scrollTo(0,0)};var currentDetail;scope.$on(kiaEvents.COMPARE.RESET_GALLERY,function(event,detailScope){currentDetail&&currentDetail!==detailScope&&currentDetail.close();currentDetail=detailScope});onMobileModeON=function(){scope.mobile=!0;scope.tablet=!1;scope.hideCategoryMenu();scope.currentCategory||scope.showCompareMenu()};onMobileModeOFF=function(){scope.mobile=!1};onTabletModeON=function(){scope.tablet=!0;scope.mobile||scope.hideCategoryMenu()};onTabletModeOFF=function(){scope.tablet=!1;scope.mobile||scope.showCategoryMenu()};scope.$on(kiaEvents.RESPONSIVE.MATCH1320,onTabletModeON);scope.$on(kiaEvents.RESPONSIVE.MATCH825,onMobileModeON);scope.$on(kiaEvents.RESPONSIVE.MATCH480,onMobileModeON);scope.$on(kiaEvents.RESPONSIVE.MATCH320,onMobileModeON);scope.$on(kiaEvents.RESPONSIVE.UNMATCH825,onMobileModeOFF);scope.$on(kiaEvents.RESPONSIVE.UNMATCH1320,onTabletModeOFF)}}}]);angular.module("app").directive("compareKiaTrim",["$log","kiaEvents",function($log,kiaEvents){return{restrict:"A",replace:!0,scope:{compareKiaTrim:"=",currentKiaTrim:"="},link:function(scope,element,attrs){scope.reset=!0;scope.canChange=!1;var onScreenTrim,updateCheck=function(){scope.reset?element.find(".default .checker > span").addClass("checked"):element.find(".default .checker > span").removeClass("checked")};scope.$watch("compareKiaTrim",function(newValue,oldValue){scope.trims=newValue;updateCheck()});scope.$watch("currentKiaTrim",function(newValue,oldValue){angular.forEach(scope.trims,function(value,key){if(value.trimId===newValue.trimId){scope.currentTrim=value;onScreenTrim=value}});updateCheck()});scope.close=function(){scope.currentTrim=onScreenTrim;scope.reset=!0;scope.canChange=!1;scope.$emit(kiaEvents.COMPARE.CLOSE_CHANGE_TRIM)};scope.kiaTrimChange=function(){scope.canChange=scope.currentTrim!==onScreenTrim};scope.submit=function(){scope.reset=element.find(".default input")[0].checked;if(scope.canChange){scope.$emit(kiaEvents.COMPARE.REQUEST_CHANGE_TRIM,scope.currentTrim,scope.reset);scope.close()}}}}}]);angular.module("app").directive("compareSelectVehicle",["$log","kiaEvents","compareService","compareModel","localize",function($log,kiaEvents,compareService,compareModel,localize){return{restrict:"A",replace:!0,scope:{callerTrimId:"=",defaultMaker:"=",actionLabel:"="},link:function(scope,element,attrs){var onMakers,onMakersFail,onModels,onModelsFail,onYears,onYearsFail,onTrims,onTrimsFail;scope.makers=[];scope.makerSelected=!1;scope.modelSelected=!1;scope.yearSelected=!1;scope.trimSelected=!1;scope.currentMaker="";scope.currentModel="";scope.currentYear="";scope.currentTrim="";scope.$watch("defaultMaker",function(value){var i=scope.makers.length;if(scope.defaultMaker)for(;i--;)if(String(scope.defaultMaker.makeName).toLowerCase()===String(scope.makers[i].makeName).toLowerCase()){scope.currentMaker=scope.makers[i];scope.makerChange()}});onMakers=function(response){if(response.makes.status===kiaEvents.SERVICES.SUCCESS){compareModel.setMakers(response.makes.result.makes);scope.makers=compareModel.getMakers()}scope.$emit(kiaEvents.LOADER.HIDE)};onModels=function(response){scope.models=response.models.result.models;$("#model").hide().show();scope.makerSelected=!0;scope.$emit(kiaEvents.LOADER.HIDE)};onYears=function(response){scope.years=response.modelYears.result;scope.modelSelected=!0;$("#year").hide().show();scope.$emit(kiaEvents.LOADER.HIDE)};onTrims=function(response){scope.modelTrims=response.trims.result.trims;scope.yearSelected=!0;$("#trim").hide().show();scope.$emit(kiaEvents.LOADER.HIDE)};scope.makerChange=function(){scope.models=[];scope.modelTrims=[];scope.years=[];scope.makerSelected=!1;scope.modelSelected=!1;scope.yearSelected=!1;scope.trimSelected=!1;scope.makerSelected=null!=scope.currentMaker;if(scope.makerSelected){compareService.getModels(scope.currentMaker.makeName,onModels,onModelsFail);scope.$emit(kiaEvents.LOADER.SHOW)}};scope.modelChange=function(){scope.years=[];scope.modelTrims=[];scope.modelSelected=!1;scope.yearSelected=!1;scope.trimSelected=!1;scope.modelSelected=null!=scope.currentModel;if(scope.modelSelected){scope.$emit(kiaEvents.LOADER.SHOW);compareService.getYears(scope.currentModel,onYears,onYearsFail)}};scope.yearChange=function(){scope.modelTrims=[];scope.yearSelected=!1;scope.trimSelected=!1;scope.yearSelected=null!=scope.currentYear;if(scope.currentYear){scope.$emit(kiaEvents.LOADER.SHOW);compareService.getTrims(scope.currentYear,onTrims,onTrimsFail)}};scope.trimChange=function(){scope.trimSelected=null!=scope.currentTrim};scope.submit=function(){if(scope.trimSelected){scope.$emit(kiaEvents.COMPARE.REQUEST_ADD_COMPETITOR,scope.callerTrimId,scope.currentTrim.trimId);scope.$emit(kiaEvents.ANALYTICS.COMPARE_REQUEST_ADD_COMPETITOR,scope.currentTrim);scope.close()}};scope.close=function(){scope.models=[];scope.modelTrims=[];scope.years=[];scope.makerSelected=!1;scope.modelSelected=!1;scope.yearSelected=!1;scope.trimSelected=!1;scope.currentMaker=null;scope.$emit(kiaEvents.COMPARE.CLOSE_SELECT_VEHICLE)};compareService.getMakers(onMakers,onMakersFail)}}}]);angular.module("app").directive("compareColumn",["kiaEvents",function(kiaEvents){return{restrict:"A",replace:!0,link:function(scope,element,attrs){var columnsWidth=[0,"100%","50%","33.33%","25%"];scope.$watch("columns",function(value){element.css("width",columnsWidth[value]);3===value?element.find(".close").hide():element.find(".close").show()})}}}]);angular.module("app").directive("competitor",["kiaEvents",function(kiaEvents){return{restrict:"A",replace:!0,scope:{competitor:"=",mobile:"="},link:function(scope,element,attrs){scope.competitor.trimId;scope.remove=function(){scope.$emit(kiaEvents.COMPARE.REMOVE_COMPETITOR,scope.competitor)};scope.changeCar=function(){scope.$emit(kiaEvents.COMPARE.ADD_COMPETITOR,scope.competitor,scope.competitor.trimId,"change")}}}}]);angular.module("app").directive("comparePhotoSet",["kiaEvents",function(kiaEvents){return{restrict:"A",replace:!0,scope:{photoset:"=",mobile:"="},link:function(scope,element,attrs){scope.expanded=!1;scope.expand=function(){if(scope.mobile)scope.$emit(kiaEvents.COMPARE.SHOW_MOBILE_GALLERY,scope.photoset);else if(scope.expanded)scope.close();else{scope.expanded=!0;element.find(".table-holder").addClass("hide");element.find(".compare-photo-title").addClass("expanded");element.find(".compare-photo-gallery").removeClass("hide").addClass("show").animate({height:"700px"},500,function(){element.find(".compare-photo-gallery").css("height","auto")});scope.$emit(kiaEvents.COMPARE.RESET_GALLERY,scope)}scope.expanded};scope.close=function(){element.find(".compare-photo-gallery").animate({height:"0px"},500,function(){element.find(".compare-photo-title").removeClass("expanded");element.find(".table-holder").removeClass("hide");element.find(".compare-photo-gallery").removeClass("show").addClass("hide")});scope.expanded=!1}}}}]);angular.module("app").directive("compareRating",["kiaEvents",function(kiaEvents){return{restrict:"A",replace:!0,scope:{compareRating:"="},template:"<div class='compare-rating'><span class='star'></span><span class='star'></span><span class='star'></span><span class='star'></span><span class='star'></span></div>",link:function(scope,element,attrs){for(var points=Number(scope.compareRating),stars=element.children(".star"),i=0;points>i;i++)stars.eq(i).addClass("full")}}}]);angular.module("app").directive("compareCategory",["kiaEvents",function(kiaEvents){return{restrict:"A",replace:!0,scope:{compareCategory:"=",currentCategory:"="},link:function(scope,element,attrs){scope.showCategory=function(){scope.$emit(kiaEvents.COMPARE.SHOW_CATEGORY,scope.compareCategory)}}}}]);angular.module("app").factory("compareModel",["$log","localize",function($log,localize){var categories,update,getCategories,setAdvantage,comparisonData,primary,getPrimary,kiaTrims,getKiaTrims,competitors,getCompetitors,getComparisonData,currentCategory,getCategory,setCategory,competitorsIDS,removeCompetitor,getCompetitorIds,getColumns,makers,getMakers,setMakers,replaceCompetitor,addCompetitor,photos,updatePhotos,getPhotos,columns=0;update=function(data){categories=[];comparisonData=[];competitors=[];kiaTrims=[];currentCategory="";competitorsIDS=[];makers=[];photos=[];competitors=data.competitors;kiaTrims=data.trims;competitorsIDS=data.competitors.hashtify("trimId");primary=data.primary;primary.modelName=primary.modelName+" "+primary.trimName;for(var l=data.categories.length,count=0,i=0;l>i;i++){categories.push(data.categories[i]);if(data.categories[i].items){setAdvantage(data.categories[i].items);currentCategory=data.categories[i];comparisonData=data.categories[i].items;count++}}0===count&&(currentCategory={categoryId:0,categoryName:localize.getLocalizedString("label.compare.photos")});competitors.length<3&&competitors.push({addCompetitor:!0});columns=competitors.length+1;for(var j=0;columns-1>j;j++)competitors[j].modelName=competitors[j].modelName+" "+competitors[j].trimName};updatePhotos=function(data){for(var i=data.length,competitorsHash=competitors.hashtify("trimId");i--;){for(var j=data[i].photo.length;j--;){data[i].photo[j].last=!1;data[i].photo[j].carInfo=competitorsHash[data[i].photo[j].trimID];0===j&&(data[i].photo[j].carInfo=primary)}if(data[i].photo.length<4){data[i].photo[data[i].photo.length-1].last=!0;data[i].photo.push({addCompetitor:!0})}}photos=data};setAdvantage=function(criteria){for(var i=criteria.length,competitorsHash=competitors.hashtify("trimId");i--;){for(var j=criteria[i].values.length,adv=j;j--;){criteria[i].values[j].last=!1;criteria[i].values[j].carInfo=competitorsHash[criteria[i].values[j].trimId];0===j&&(criteria[i].values[j].carInfo=primary);"True"===criteria[i].values[j].advantageFlag&&adv--;if(-1!==criteria[i].values[j].value.indexOf("*")){criteria[i].values[j].value=criteria[i].values[j].value.split("*")[0];criteria[i].values[j].isRating=!0}else criteria[i].values[j].isRating=!1;"Not Available"===criteria[i].values[j].value&&(criteria[i].values[j].value="")}if(criteria[i].values.length<4){criteria[i].values[criteria[i].values.length-1].last=!0;criteria[i].values.push({addCompetitor:!0})}0===adv?criteria[i].kiaAdvantage=!0:criteria[i].kiaAdvantage=!1}return criteria};getCategory=function(){return currentCategory};setCategory=function(category){currentCategory=category};getCategories=function(){return categories};getPrimary=function(){return primary};getCompetitors=function(){return competitors};getComparisonData=function(){return comparisonData};removeCompetitor=function(competitor){delete competitorsIDS[competitor.trimId]};replaceCompetitor=function(old,replacement){delete competitorsIDS[old];competitorsIDS[replacement]=replacement};addCompetitor=function(competitor){competitorsIDS[competitor]=competitor};getCompetitorIds=function(reverse){var result=primary.trimId;for(var id in competitorsIDS)angular.isDefined(id)&&(result+="|"+id);return result};getColumns=function(){return columns};getKiaTrims=function(){return kiaTrims};setMakers=function(value){makers=value};getMakers=function(){return makers};getPhotos=function(){return photos};return{update:update,getCategories:getCategories,getPrimary:getPrimary,getCompetitors:getCompetitors,getComparisonData:getComparisonData,getCategory:getCategory,setCategory:setCategory,removeCompetitor:removeCompetitor,getCompetitorIds:getCompetitorIds,getColumns:getColumns,setMakers:setMakers,getMakers:getMakers,replaceCompetitor:replaceCompetitor,addCompetitor:addCompetitor,getKiaTrims:getKiaTrims,getPhotos:getPhotos,updatePhotos:updatePhotos}}]);angular.module("app").factory("compareService",["$log","$http","messageService",function($log,$http,messageService){var defaultRequestParams,url,get,getMakers,getModels,getYears,getTrims,getPhotos;url="data/compare/{series}/{year}";defaultRequestParams={series:"soul",year:2014,category:1};get=function(criteria,success,failure){var requestParams=jQuery.extend({},defaultRequestParams,criteria),serviceURL="data/compare/"+requestParams.series+"/"+requestParams.year+"?categoryId="+requestParams.category;requestParams.trimsList&&(serviceURL+="&trimsList="+requestParams.trimsList);return $http.get(serviceURL,requestParams).success(function(data,getResponseHeaders){return angular.isFunction(success)?success(data):void 0}).error(failure)};getMakers=function(success,failure){var serviceURL="data/makes";return $http.get(serviceURL,{}).success(function(data,getResponseHeaders){return angular.isFunction(success)?success(data):void 0}).error(failure)};getModels=function(criteria,success,failure){var serviceURL="data/models/"+criteria;return $http.get(serviceURL,{}).success(function(data,getResponseHeaders){return angular.isFunction(success)?success(data):void 0}).error(failure)};getYears=function(criteria,success,failure){var serviceURL="data/modelYears/"+criteria.makeName+"/"+encodeURI(criteria.modelName);return $http.get(serviceURL,{}).success(function(data,getResponseHeaders){return angular.isFunction(success)?success(data):void 0}).error(failure)};getTrims=function(criteria,success,failure){var serviceURL="data/trims/"+criteria.modelId;return $http.get(serviceURL,{}).success(function(data,getResponseHeaders){return angular.isFunction(success)?success(data):void 0}).error(failure)};getPhotos=function(criteria,success,failure){var serviceURL="data/compare/autoGallery?trimsList="+criteria;return $http.get(serviceURL,{}).success(function(data,getResponseHeaders){return angular.isFunction(success)?success(data):void 0}).error(failure)};return{get:get,getMakers:getMakers,getModels:getModels,getYears:getYears,getTrims:getTrims,getPhotos:getPhotos}}]);angular.module("app").directive("trims",["$log","$rootScope",function($log,$rootScope){var link;link=function(scope,element,attrs){var $pages,$heroFigure,$hero,timer,prevLayout="";$pages=$(".page",element);$heroFigure=$(".trims-hero figure",element);$hero=$(".img-hero",$heroFigure);var gotoPage=function(pageId){var $page=$pages.filter(pageId);if($page){var pos=$(element).offset();window.scrollTo(0,pos.top);$pages.addClass("off-screen");$page.removeClass("off-screen")}},setSmallLayout=function(){$pages.addClass("off-screen");$($pages[0]).removeClass("off-screen")},setLargeLayout=function(){$pages.removeClass("off-screen")},windowResize=function(){$hero.css("width","100%");$(element).addClass("no-transition");if(Modernizr.mq("(max-width: 700px)")){if("small"!==prevLayout){setSmallLayout();prevLayout="small"}}else if("large"!==prevLayout){prevLayout="large";setLargeLayout()}window.setTimeout(function(){$(element.removeClass("no-transition"))},100)},init=function(){$hero.hisrc();$(element).find(".page-link").bind("click",function(evt){var link=$(this).attr("href");link=link.substring(link.indexOf("#"));gotoPage(link);if($(this).hasClass("link-filter")){var $tab=$($(this).attr("data-tab-target"),element);$tab&&$tab.click()}evt.preventDefault();return!1});$(window).bind("resize.trimsDirective",function(){timer&&clearTimeout(timer);timer=window.setTimeout(function(){windowResize()},100)}).resize();scope.$on("$routeChangeStart",function(next,current){$(window).off("resize.trimsDirective")})};init()};return{link:link,restrict:"EA"}}]);angular.module("app").directive("trimsGallery",["$log","$rootScope",function($log,$rootScope){var link;link=function(scope,element,attrs){var $items,$itemDetail,$imgDetail,$infoDetail,timer;$items=$(".gallery-grid-item",element);$itemDetail=$("#grid-item-detail",element);var calculateRowInsert=function($selected){"undefined"==typeof $selected&&($selected=$items.filter(".selected"));if($selected.length){var index=$items.index($selected),row=Math.ceil((index+1)/scope.galleryCols),rowIndex=row*scope.galleryCols-1;rowIndex>=$items.length&&(rowIndex=$items.length-1);$itemDetail.insertAfter($($items[rowIndex]));$imgDetail=$itemDetail.find(".img-detail");$infoDetail=$itemDetail.find(".detail-info");var ht=Math.ceil(Math.max($imgDetail.outerHeight(!0),$infoDetail.outerHeight(!0))),vAlign=0;if($imgDetail.is(":visible")){vAlign=Math.floor((ht-$infoDetail.outerHeight(!0))/2);if(10>vAlign){ht+=2*(10-vAlign);vAlign=10}$infoDetail.css("top",vAlign+"px")}else ht=$infoDetail.outerHeight(!0);$itemDetail.height(ht)}},toggleGalleryDetail=function($target){var $item=$target.parents(".gallery-grid-item");if($item.hasClass("selected")){$item.removeClass("selected");$itemDetail.height(0);Modernizr.csstransitions?$itemDetail.one("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){$itemDetail.height()<10&&$itemDetail.addClass("hide")}):$itemDetail.addClass("hide")}else{$items.removeClass("selected");var $detail=$item.find(".grid-details");$itemDetail.addClass("hide");$itemDetail.height(0);if($detail.length){$item.addClass("selected");$itemDetail.find(".grid-detail-content").html($detail.clone(!0,!0));$itemDetail.removeClass("hide");calculateRowInsert($item)}}},initTrimsGallery=function(){$items.find(".img-detail").hisrc();$items.find(".details-toggle").bind("click",function(evt){toggleGalleryDetail($(this));evt.preventDefault();return!1});$itemDetail.find(".close").bind("click",function(evt){$items.filter(".selected").find(".grid-item-figure").click();evt.preventDefault();return!1});scope.$on("trimLayoutChange",function(evt,screenType){"small"===screenType&&window.setTimeout(function(){if(1!==scope.galleryCols){scope.galleryCols=1;$items.css("width","100%");$items.removeClass("last-col last-row");$($items[$items.length-1]).addClass("last-row");$items.find(".grid-item-title").css("height","")}},110)});$(window).bind("resize.trimsGalleryDirective",function(){timer&&clearTimeout(timer);timer=window.setTimeout(function(){calculateRowInsert()},120)}).resize();scope.$on("$routeChangeStart",function(next,current){$(window).off("resize.trimsGalleryDirective")})};initTrimsGallery()};return{link:link,restrict:"EA"}}]);angular.module("app").directive("trimsDetails",["$log","$rootScope",function($log,$rootScope){
var link;link=function(scope,element,attrs){function calculateMaxCol(){var query,i,len=colSizes.length;if(mqSupport)for(i=0;len>i;i++){query="("+colSizes[i].mq+": "+colSizes[i].width+"px)";if(Modernizr.mq(query)){maxCol=colSizes[i]["max-col"];break}}else for(i=0;len>i;i++){query="max-width"===colSizes[i].mq?$(window).width()<=colSizes[i].width:$(window).width()>=colSizes[i].width;if(query){maxCol=colSizes[i]["max-col"];break}}1===maxCol?scope.singleCol=!0:scope.singleCol=!1}var timer,$items,$screenWrap,mqSupport=Modernizr.mq("only all"),colSizes=[{mq:"max-width",width:700,"max-col":1},{mq:"max-width",width:1019,"max-col":2},{mq:"min-width",width:1020,"max-col":3}],maxCol=3;$screenWrap=$(".trims-wrap",element);$items=$(".trims-item",element);scope.singleCol=!1;var windowResize=function(){var screenWidth=$screenWrap.width();calculateMaxCol();var cols=maxCol,len=$items.length;cols>len?cols=len:cols>2&&4===len&&(cols=2);var colWidthPx=screenWidth/cols,lastColWidth=colWidthPx,colWidth=colWidthPx/screenWidth*100,colLast=colWidth;if(cols>1){var colMargin=Math.floor(.2*colWidthPx),addWidth=colMargin/cols;lastColWidth=colWidthPx-colMargin+addWidth;colWidthPx+=colMargin;colLast=lastColWidth/screenWidth*100;colWidth=(100-colLast)/(cols-1)}$items.css("height","").removeClass("col-last");if(cols>1){var maxItemHt=0;$items.each(function(index){var $item=$(this);(index+1)%cols===0?$item.addClass("col-last").css("width",colLast+"%"):$item.css("width",colWidth+"%");var ht=this.offsetWidth;ht=$item.outerHeight(!0);ht>maxItemHt&&(maxItemHt=ht)});$items.height(maxItemHt)}else $items.addClass("col-last").css("width",colWidth+"%")};$(window).bind("resize.trimsDetailsDirective",function(){timer&&clearTimeout(timer);timer=window.setTimeout(function(){windowResize()},100)}).resize();scope.$on("$routeChangeStart",function(next,current){$(window).off("resize.trimsDetailsDirective")})};return{link:link,restrict:"EA"}}]);angular.module("app").directive("trimsTabs",["$log","$rootScope","kiaEvents",function($log,$rootScope,kiaEvents){var link;link=function(scope,element,attrs){var $tabNav,$tabNavItems,$tabNavLinks,$tabPanels,$selectableItems,$itemsOverlay,$selectedTrimsTitle,$tabsTitle,timer,prevScreenWidth=0;$tabsTitle=$(".tabs-title",element);$tabNav=$(".tabs-nav",element);$tabNavItems=$tabNav.find(".tabs-nav-item");$tabNavLinks=$tabNavItems.find(".tabs-anchor");$tabPanels=$(".tabs-panel",element);$selectableItems=$(".trims-gallery-grid .gallery-grid-item",element);$itemsOverlay=$selectableItems.find(".trims-select-overlay");$selectedTrimsTitle=$("#selected-trims-title .selected-trim",element);var selectTab=function($target){var $tab=$target.parents(".tabs-nav-item");if(!$tab.hasClass("active")){$tabNavItems.removeClass("active");$tabPanels.removeClass("active");$tab.addClass("active");var panelId=$target.attr("href");panelId=panelId.substring(panelId.indexOf("#"));var $panel=$tabPanels.filter(panelId);if($panel){$panel.addClass("active");resizePanelContent($panel)}$selectedTrimsTitle.html($target.text());filterGalleryItems($target.attr("data-trim"))}},afterTransition=function(trim){$selectableItems.removeClass("active");console.log("trim",trim);var $items="soul-evplus"===trim?$selectableItems.filter(".gallery-grid-item"):$selectableItems.filter("."+trim);$items.addClass("active");var $notSelected=$selectableItems.not("."+trim),$overlay=$notSelected.find(".trims-select-overlay");$overlay.addClass("fading-in")},filterGalleryItems=function(trim){scope.$emit(kiaEvents.ANALYTICS.TRIM_SELECTED,trim);var selected=$selectableItems.filter(".selected");selected&&selected.length&&$(selected.find(".details-toggle").get(0)).click();$itemsOverlay.removeClass("fading-in");Modernizr.csstransitions?window.setTimeout(function(){afterTransition(trim)},600):afterTransition(trim)},linkFilter=function($target){var tabId=$target.attr("href");tabId=tabId.substring(tabId.indexOf("#"));var $tab=$tabNavLinks.filter(tabId);$tab&&$tab.length&&$tab.click()},resizePanelContent=function($activePanel){if($activePanel){var panelWidth=$activePanel.find(".tabs-wrap").width(),$linkBtn=$activePanel.find(".link-btn"),$heading=$activePanel.find(".panel-title"),$pricing=$activePanel.find(".price");$activePanel.removeClass("wrap-price wrap-link-btn");var btnWidth=$linkBtn?$linkBtn.outerWidth(!0):0,headingWidth=$heading.outerWidth(!0),pricingWidth=$pricing.outerWidth(!0),classname="";headingWidth+pricingWidth+btnWidth+20>=panelWidth&&(classname="wrap-price");if($heading.width()+btnWidth+20>=panelWidth){""!==classname&&(classname+=" ");classname+="wrap-link-btn"}""!==classname&&$activePanel.addClass(classname);if("wrap-price wrap-link-btn"===classname)$linkBtn.removeClass("vertical-align").css("top","");else{var ht=Math.floor($activePanel.outerHeight(!0)-$linkBtn.height())/2;$linkBtn.addClass("vertical-align").css("top",ht+"px")}}},windowResize=function(){var tabsTitleWidth=$tabsTitle.outerWidth(!0);$tabNav.css({"margin-left":tabsTitleWidth+"px"});var classnameSmallTab="hide-tabs-title",windowWidth=$(window).width(),tabsContentWidth=windowWidth-tabsTitleWidth-20,tabWidth=.125*tabsContentWidth;windowWidth>prevScreenWidth&&$(element).removeClass(classnameSmallTab);var tabSmallLayout=!1,maxTabWidth=0;$tabNavItems.each(function(){var $link=$(this).find(".tabs-anchor"),linkWidth=$link.outerWidth(!0);linkWidth>maxTabWidth&&(maxTabWidth=linkWidth)});if(!(maxTabWidth>tabWidth)){$tabNavItems.css("width","");return!1}var totalTabWidth=maxTabWidth*$tabNavItems.length;tabsContentWidth>=totalTabWidth?$tabNavItems.width(maxTabWidth):tabSmallLayout=!0;if(tabSmallLayout){$(element).addClass(classnameSmallTab);var screenWidth=$(window).width(),colPx=screenWidth/$tabNavItems.length,colPercent=colPx/screenWidth*100;$tabNav.css({"margin-left":0});$tabNavItems.css("width",colPercent+"%")}else $(element).removeClass(classnameSmallTab);resizePanelContent($tabPanels.filter(".active"));prevScreenWidth=windowWidth},init=function(){$tabNavLinks.bind("click",function(evt){selectTab($(this));evt.preventDefault();return!1});$selectableItems.find(".trims-select .link-filter").bind("click",function(evt){linkFilter($(this));evt.preventDefault();return!1});window.setTimeout(function(){$($tabNavLinks[0]).click()},50);$(window).bind("resize.trimsTabsDirective",function(){timer&&clearTimeout(timer);timer=window.setTimeout(function(){windowResize()},100)}).resize();scope.$on("$routeChangeStart",function(next,current){$(window).off("resize.trimsTabsDirective")})};init()};return{link:link,restrict:"EA"}}]);angular.module("app").controller("vehicleTrimsController",["$log","$scope","$rootScope","$location","$routeParams","disclaimersModel",function($log,$scope,$rootScope,$location,$routeParams,disclaimersModel){$scope.galleryCols=4;var symbols=["+","!"],symbolsReplace=["plus","exclaim"];$scope.setSingleTrim=function(isSingleTrim){var classname="trims-single";isSingleTrim||(classname="");return classname};$scope.setTrimClass=function(trim){trim=trim.toLowerCase();trim=trim.replace(/\s/g,"-");trim=trim.replace(/\./g,"-");trim=trim.replace(/\((.*?)\)/g,"$1");for(var len=symbols.length,i=0;len>i;i++)trim=trim.replace(symbols[i],symbolsReplace[i]);return trim};$scope.getTrimList=function(trimList){trimList=trimList.split(",");for(var len=trimList.length,i=0;len>i;i++)trimList[i]=$scope.setTrimClass(trimList[i]);return trimList.join(" ")};disclaimersModel.setGlobal("disclaimer-trims-"+$routeParams.model+"-"+$routeParams.year)}]);angular.module("app").controller("panoramaController",["$log","$rootScope","$scope","$routeParams",function($log,$rootScope,$scope,$routeParams){$scope.frameBind=0;$scope.panoHeight=480;$scope.panoWidth=640;$scope.showPanorama=!1;$scope.fullImagesSet=[];$scope.contentURI=window.contentURI;$scope.altTextArray=["First","Second","Third","Fourth","Fifth","Sixth","Seventh"];$scope.altTextString="Alt Text For this Pano";$scope.fullImagesSet.push({width:320,height:140,images:[window.contentURI+"/content/media/all/vehicles/soul/2014/!/exterior/ff0900/320x140/90-340-0.jpg",window.contentURI+"/content/media/all/vehicles/soul/2014/!/exterior/d3e647/320x140/90-340-0.jpg",window.contentURI+"/content/media/all/vehicles/soul/2014/!/exterior/e8eeee/320x140/90-340-0.jpg",window.contentURI+"/content/media/all/vehicles/soul/2014/!/exterior/ffffff/320x140/90-340-0.jpg",window.contentURI+"/content/media/all/vehicles/soul/2014/!/exterior/162e4a/320x140/90-340-0.jpg",window.contentURI+"/content/media/all/vehicles/soul/2014/!/exterior/0c0c0e/320x140/90-340-0.jpg",window.contentURI+"/content/media/all/vehicles/soul/2014/!/exterior/ffc800/320x140/90-340-0.jpg"]});$scope.fullImagesSet.push({width:800,height:360,images:[window.contentURI+"/content/media/all/vehicles/soul/2014/!/exterior/ff0900/800x360/90-340-0.jpg",window.contentURI+"/content/media/all/vehicles/soul/2014/!/exterior/d3e647/800x360/90-340-0.jpg",window.contentURI+"/content/media/all/vehicles/soul/2014/!/exterior/e8eeee/800x360/90-340-0.jpg",window.contentURI+"/content/media/all/vehicles/soul/2014/!/exterior/ffffff/800x360/90-340-0.jpg",window.contentURI+"/content/media/all/vehicles/soul/2014/!/exterior/162e4a/800x360/90-340-0.jpg",window.contentURI+"/content/media/all/vehicles/soul/2014/!/exterior/0c0c0e/800x360/90-340-0.jpg",window.contentURI+"/content/media/all/vehicles/soul/2014/!/exterior/ffc800/800x360/90-340-0.jpg"]});$scope.fullImagesSet.push({width:1920,height:850,images:[window.contentURI+"/content/media/all/vehicles/soul/2014/!/exterior/ff0900/1920x850/90-340-0.jpg",window.contentURI+"/content/media/all/vehicles/soul/2014/!/exterior/d3e647/1920x850/90-340-0.jpg",window.contentURI+"/content/media/all/vehicles/soul/2014/!/exterior/e8eeee/1920x850/90-340-0.jpg",window.contentURI+"/content/media/all/vehicles/soul/2014/!/exterior/ffffff/1920x850/90-340-0.jpg",window.contentURI+"/content/media/all/vehicles/soul/2014/!/exterior/162e4a/1920x850/90-340-0.jpg",window.contentURI+"/content/media/all/vehicles/soul/2014/!/exterior/0c0c0e/1920x850/90-340-0.jpg",window.contentURI+"/content/media/all/vehicles/soul/2014/!/exterior/ffc800/1920x850/90-340-0.jpg"]});$scope.baseImagesSet=[];for(var i=0;i<$scope.fullImagesSet.length;i++)$scope.baseImagesSet.push({width:$scope.fullImagesSet[i].width,height:$scope.fullImagesSet[i].height,images:[$scope.fullImagesSet[i].images[0]]});$scope.onFull=function(){$scope.testImagesSet=$scope.fullImagesSet.slice(0)};$scope.onBase=function(){$scope.testImagesSet=$scope.baseImagesSet.slice(0)};$scope.testImagesSet=[];$scope.onFull()}]);angular.module("app").controller("panoramaInteriorController",["$log","$rootScope","$scope","$routeParams",function($log,$rootScope,$scope,$routeParams){$scope.contentURI=window.contentURI;$scope.basePath=window.contentURI+"/content/media/all/vehicles/soul/2014/+";$scope.currentColor={name:"",baseHex:"",fabric:{name:"",file:""}};$scope.colors=[{name:"Black",baseHex:"0e0d13",fabric:{name:"Honeycomb Woven Cloth",file:""}},{name:"Gray Two-Tone",baseHex:"484443",fabric:{name:"Honeycomb Woven Cloth",file:""}},{name:"Gray Two-Tone",baseHex:"484443",fabric:{name:"Leather",file:""}}];var processColorsFabrics=function(){var i=0;for(i=0;i<$scope.colors.length;i++)$scope.colors[i].fabric.file=$scope.colors[i].fabric.name.toLowerCase().replace(/\s/gi,"-")};processColorsFabrics();$scope.onColor=function(oColor){$scope.currentColor=oColor};$scope.onColor($scope.colors[0])}]);angular.module("app").controller("testDriveController",["$log","$rootScope","$scope","$routeParams","kiaEvents","safeApply","$location","zipCodeCookie","messageService","dealerListService","gmapModel","requestTestDriveService","requestBrochureService","vinDetailService","dealerDetailService","formsModel","lightboxService","cookieService","localize",function($log,$rootScope,$scope,$routeParams,kiaEvents,safeApply,$location,zipCodeCookie,messageService,dealerListService,gmapModel,requestTestDriveService,requestBrochureService,vinDetailService,dealerDetailService,formsModel,lightboxService,cookieService,localize){$scope.contentMedia=window.contentURI;$scope.basePath=window.baseURI;$scope.staticPath=window.staticURI;$scope.available=!1;$scope.user={state:"",phone:"",contact:"1",zipcode:"",dealer:""};$scope.requestUser={state:"",phone:"",email:""};$scope.header={zipcode:""};$scope.dealers=[];$scope.dealersFinal=[];$scope.series=$routeParams.series;$scope.year=$routeParams.year;$scope.emailPattern=/^[\w-]+(?:\.[\w-]+)*@(?:[\w-]+\.)+[a-zA-Z]{2,7}$/;$scope.zipPattern=/^[\d]{5}$/;$scope.namePattern=/^[\a-zA-Z\s\&\/\.\(\)\-,']*$/;$scope.addressPattern=/^[\a-zA-Z\d\s\#\.\,\;\:']*$/;$scope.cityPattern=/^[\a-zA-Z\s\-\,\.\;\'\&\/\(\)]*$/;var vehicleObject={};$scope.execCounter=1;$scope.invalidZipNew=!1;$scope.formsEdit=!1;$scope.zipCode="";$scope.siteID="1";$scope.$on("CAR-IMAGE AND TRIM",function(event,carimage,trim){$scope.carImage800=carimage;$scope.trim=trim});$scope.$on("SERIES-NAME",function(event,seriesName){$scope.seriesName=seriesName});$scope.$on("ZIPCODE-VALIDATION",function(event,value){$scope.invalidZipNew=value});$scope.$on("CURRENT-FORM",function(event,value){$scope.currentForm=value;$scope.statesLabel="request-brochure"===$scope.currentForm?"label.forms.placeholder.state":"label.forms.placeholder.optState";$scope.openNav=!1});$scope.$on("GEOLOCATION-ZIPCODE-UPDATE",function(event,value){$scope.zipCode=value});$rootScope.$on(kiaEvents.ZIPCODE.FOCUS,function(event,id){$scope.editMode=!0});$scope.$on(kiaEvents.ZIPCODE.EDITMODE_OFF,function(event){$scope.editMode=!1});$scope.$on("ANDROID-DEVICE-DETECTION",function(event,value){$scope.formatPhone=value});$rootScope.$on("vehicleSelector.selected",function(evt,args){"testdrive"===args.target?$location.url("/forms/testdriverequest/"+args.vehicle.series+"/"+args.vehicle.year+args.params):"brochure"===args.target?$location.url("/forms/brochurerequest/"+args.vehicle.series+"/"+args.vehicle.year):"tradein"===args.target&&$location.url("/forms/appraisalrequest/"+args.vehicle.series+"/"+args.vehicle.year)});$scope.templates=[{name:"template1.html",url:"td-dealer-list"},{name:"template2.html",url:"td-main-form"},{name:"template3.html",url:"td-success-page"}];$scope.template=$scope.templates[0];$scope.templates2=[{name:"template1.html",url:"request-brochure-form"},{name:"template2.html",url:"request-brochure-success"}];$scope.template2=$scope.templates2[0];$scope.templates3=[{name:"template1.html",url:"appraisal-form"}];$scope.template3=$scope.templates3[0];var requestTestDriveSuccess=function(data){if("Success"===data.status){$(window).scrollTop(0);$scope.template=$scope.templates[2]}else if("601"===data.statusCode)safeApply($scope,function(){$scope.$broadcast("ZIPCODE-VALIDATION",!0);$scope.enableBtn();$scope.zipMessage=data.result;$scope.execCounter--;$scope.showLoader=!1});else{$scope.enableBtn();$scope.execCounter--;$scope.showLoader=!1}},requestTestDriveFailure=function(data){$log.error("Failed Request Test Drive Form Submission: testDriveController")},testDriveFormSubmit=function(series,formValues){return requestTestDriveService.post(series,formValues,requestTestDriveSuccess,requestTestDriveFailure)};$scope.hideDealerModelNotAvailable=function(){lightboxService.close("dealerModelNotAvailable")};$scope.getMtfTitle=function(){var title="",path=$location.path().split("/"),type=path[path.length-1];"brochurerequest"===type?title=localize.getLocalizedString("label.mtf.title.brochure"):"appraisalrequest"===type&&(title=localize.getLocalizedString("label.mtf.title.tradein"));return title};$scope.$on("lightbox.dealerModelNotAvailable.open",function(evt,obj){$scope.m_year=obj.year;$scope.m_model=obj.model;$scope.m_dealer=obj.dealer;$scope.m_image=obj.image;$scope.m_featureId=obj.featureId;lightboxService.open("dealerModelNotAvailable")});$scope.dealerNotAvailableFind=function(){cookieService.cookie("user-featureId",$scope.m_featureId,{expires:0,path:"/",domain:""});window.location.href=window.baseURI+"/dealers/locator"};$scope.formSubmit=function(){$scope.submitted=!0;var contactPreference,i;$(window).scrollTop(0);if($scope.testDriveForm.$valid&&1===$scope.execCounter){$scope.execCounter++;$scope.disableBtn();$scope.showLoader=!0;if($scope.formatPhone){var arrChars,formatedString="";arrChars=$scope.user.phone.split("");for(i=0;10>i;i++){(3===i||6===i)&&(formatedString+="-");formatedString+=arrChars[i]}$scope.user.phone=formatedString}var customerObject={firstName:$scope.user.first,lastName:$scope.user.last,address1:$scope.user.address,address2:$scope.user.optAddress,city:$scope.user.city,state:$scope.user.state,zipcode:$scope.user.zipcode,email:$scope.user.email,phone:$scope.user.phone,contactTypeId:$scope.user.contact,optIn:$scope.user.optin||void 0===$scope.user.optin,preferredLanguage:window.lang};$scope.user.contact="1";contactPreference="email";$scope.paramExists===!0?$scope.dealerVal=[$scope.dealerCode]:$scope.dealerVal=[$scope.user.dealer];$scope.year&&!vehicleObject.modelYear&&(vehicleObject.modelYear=$scope.year);$scope.formValues={customerRequestTypeId:"6",leadType:"TestDrive",leadSubType:"",siteId:$scope.siteID,dealers:$scope.dealerVal,customer:customerObject,vehicle:vehicleObject};$scope.dealersFinal.splice(0);var dealerLen=$scope.dealers.length;for(i=0;dealerLen>i;i++)if($scope.dealers[i].code===$scope.user.dealer){var oDealer={name:$scope.dealers[i].name,code:$scope.dealers[i].code,distFromUser:$scope.dealers[i].distFromUser,address:$scope.dealers[i].address,city:$scope.dealers[i].city,state:$scope.dealers[i].state,zipcode:$scope.dealers[i].zipcode,phone:$scope.dealers[i].phone,phoneFull:$scope.dealers[i].phoneFull,chatEnabled:$scope.dealers[i].chatEnabled};$scope.dealersFinal.push(oDealer)}$scope.test=$scope.user.phone;testDriveFormSubmit($scope.series,$scope.formValues);$scope.$emit(kiaEvents.ANALYTICS.TESTDRIVE_SUCCESS,$scope.dealerVal);$scope.$emit(kiaEvents.ANALYTICS.TESTDRIVE_CONTACT_INFO,contactPreference,$scope.user.contact)}else{$scope.$watch("visibleErrors",function(){$scope.errorOffset()});$log.error("Invalid Form Parameters")}};var brochureFormSuccess=function(data){if("Success"===data.status){$(window).scrollTop(0);$scope.$emit(kiaEvents.ANALYTICS.BROCHURE_SUCCESS_CONFIRMATION);$scope.template2=$scope.templates2[1]}else if("601"===data.statusCode)safeApply($scope,function(){$scope.$broadcast("ZIPCODE-VALIDATION",!0);$scope.enableBtn();$scope.zipMessage=data.result;$scope.execCounter--;$scope.showLoader=!1});else{$scope.enableBtn();$scope.execCounter--;$scope.showLoader=!1}},brochureFormFailure=function(data){$log.error("Failed Request Brochure Form Submission: testDriveController")},brochureFormSubmit=function(series,formValues){return requestBrochureService.post(series,formValues,brochureFormSuccess,brochureFormFailure)};$scope.requestBrochureSubmit=function(){$scope.submitted=!0;$(window).scrollTop(0);if($scope.requestBrochureForm.$valid&&1===$scope.execCounter){$scope.execCounter++;$scope.disableBtn();$scope.showLoader=!0;var customerObject={firstName:$scope.requestUser.first,lastName:$scope.requestUser.last,address1:$scope.requestUser.address,address2:$scope.requestUser.optAddress,city:$scope.requestUser.city,state:$scope.user.state,zipcode:$scope.requestUser.zipcode,email:$scope.requestUser.email,preferredLanguage:window.lang};vehicleObject={series:$scope.series,year:$scope.year};$scope.requestFormValues={customerRequestTypeId:"1",siteId:$scope.siteID,customer:customerObject};brochureFormSubmit($scope.series,$scope.requestFormValues)}else{$scope.$watch("visibleErrors",function(){$scope.errorOffset()});$log.error("Invalid Form Parameters")}};var successVinDetail=function(data){var telNum="+1-"+data.dealerPhone.replace(/-/g,"");$scope.vehicleDetail={};$scope.vehicleDetail=data;$scope.vehicleDetail.dealerPhoneFull=telNum;$scope.dealerCode=$scope.vehicleDetail.dealerCode;vehicleObject={vehicleName:$scope.series,modelYear:$scope.year,vin:$scope.vehicleDetail.vin,exteriorColor:$scope.vehicleDetail.exteriorColorName,interiorColor:$scope.vehicleDetail.interiorColorName,trim:$scope.vehicleDetail.trim}},failureVinDetail=function(data){$log.error("Failed VIN Detail loading: TestDriveController")};$scope.loadVinDetails=function(vinID){vinDetailService.get(vinID,$scope.zipCode,successVinDetail,failureVinDetail)};var successDealerDetail=function(data){var telNum="+1-"+data.phone.replace(/-/g,"");$scope.vehicleDetail={dealerName:data.name,dealerDistanceFromUser:data.distFromUserFormatted,dealerAddress:data.address,dealerCity:data.city,dealerState:data.state,dealerZipcode:data.zipcode,dealerPhone:data.phone,dealerPhoneFull:telNum};$scope.dealerCode=data.code},failureDealerDetail=function(data){$log.error("Failed Dealer Detail loading: TestDriveController")};$scope.loadDealerDetails=function(dealerID){dealerDetailService.get(dealerID,$scope.zipCode,successDealerDetail,failureDealerDetail)};var deepLink=function(){var urlAttributes=$location.search();if(urlAttributes.vin){$scope.paramExists=!0;$scope.loadVinDetails(urlAttributes.vin);$scope.template=$scope.templates[1]}else if(urlAttributes.dealer){$scope.paramExists=!0;$scope.loadDealerDetails(urlAttributes.dealer);$scope.template=$scope.templates[1]}else if("build"===urlAttributes.section){vehicleObject=formsModel.data;$scope.template=$scope.templates[0];$scope.paramExists=!1}else{$scope.template=$scope.templates[0];$scope.paramExists=!1}};$scope.displayForm=function(){$scope.template=$scope.templates[1];$scope.$emit(kiaEvents.ANALYTICS.TESTDRIVE_SELECT_DEALER,$scope.user.dealer)};var success=function(data){if("200"===data.dealers.statusCode){$scope.noResult=!1;if(data.dealers.isOutOfRange===!0){$scope.noResult=!0;$scope.noResultData={series:$scope.seriesName,distance:data.dealers.result[0].distance.match(/[0-9]+\.?[0-9]{0,2}/)[0]}}if($scope.available===!1||$scope.updateZip===!0){zipCodeCookie.set($scope.zipCode);$scope.available=!0;$scope.header.zipcode=$scope.zipCode;$scope.user.zipcode=$scope.zipCode;deepLink()}else $scope.available=!0;$scope.dealers.splice(0);for(var phoneNum,resultLen=4,i=0;resultLen>i&&data.dealers.result[i];i++){data.dealers.result[i].distance=data.dealers.result[i].distance.match(/[0-9]+\.?[0-9]{0,2}/);phoneNum="+1-"+data.dealers.result[i].phones[0].number.replace(/-/g,"");var oDealer={name:data.dealers.result[i].name,code:data.dealers.result[i].code,distFromUser:data.dealers.result[i].distance[0],address:data.dealers.result[i].location.street1,city:data.dealers.result[i].location.city,state:data.dealers.result[i].location.state,zipcode:data.dealers.result[i].location.zipCode,phone:data.dealers.result[i].phones[0].number,phoneFull:phoneNum,chatEnabled:data.dealers.result[i].chatEnabled,selected:0===i};$scope.dealers.push(oDealer);0===i&&($scope.user.dealer=$scope.dealers[i].code)}$scope.$broadcast(kiaEvents.ZIPCODE.EDITMODE_OFF);$scope.testDriveSelectedDealer=$scope.dealers[0]}else"601"===data.dealers.statusCode&&($scope.updateZip===!0?$scope.$broadcast(kiaEvents.ZIPCODE.ERROR,data.dealers.statusDesc,"tDriveZipSearch"):$scope.$broadcast(kiaEvents.ZIPCODE.ERROR,data.dealers.statusDesc,"testDriveZipCode"))},failure=function(data){$log.error("Unsuccessful Service Call: TestDriveController")};$scope.load=function(){if($scope.zipCode){var params={zip:$scope.zipCode,series:$scope.series,year:$scope.year};dealerListService.get(params,success,failure)}};$scope.checkZipcode=function(){formsModel.init();if(zipCodeCookie.get()){$scope.zipCode=zipCodeCookie.get();$scope.user.zipcode=$scope.zipCode;$scope.header.zipcode=$scope.zipCode;$scope.requestUser.zipcode=$scope.zipCode;$scope.available=!0;deepLink();$scope.$watch("currentForm",function(){"test-drive"===$scope.currentForm&&$scope.load()})}else $scope.available=!1};$scope.submitMyForm=function(){var params={zip:$scope.zipCode,series:$scope.series,year:$scope.year};dealerListService.get(params,success,failure)};$scope.submitZipForm=function(){$scope.$broadcast(kiaEvents.ZIPCODE.SUBMIT,"testDriveZipCode")};$scope.update=function(zipCode){$scope.updateZip=!0;$scope.zipCode=zipCode;var params={zip:$scope.zipCode,series:$scope.series,year:$scope.year};dealerListService.get(params,success,failure)};var locateSuccess=function(zipCode){$scope.zipCode=zipCode;$scope.$broadcast(kiaEvents.ZIPCODE.EDITMODE_OFF);$scope.update(zipCode);$scope.$$phase||$scope.$digest()},locateFailure=function(message){$log.error("Location detection failure",message);$scope.$broadcast(kiaEvents.ZIPCODE.ERROR,message,"testDriveZipCode")};$scope.locateUser=function(){gmapModel.findMe(locateSuccess,locateFailure)};$scope.openPanel=function(){$scope.openNav=!0};$scope.closePanel=function(){};$scope.popWindow=function(){var url=$(".popUrl").attr("href");window.open(url,"","height=500,width=600,left=50,top=50,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no, status=yes");$scope.$emit(kiaEvents.ANALYTICS.TRADEINAPPRAISAL_CONFIRMATION)};var isMobile=function(){var sUserAgent=""+(navigator.userAgent||navigator.vendor||window.opera);sUserAgent=sUserAgent.toLowerCase();return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i.test(sUserAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(sUserAgent.substr(0,4))?!0:!1},setSiteId=function(){var siteLanguage=window.lang;"es"===siteLanguage?$scope.siteID="2":"en"===siteLanguage&&(isMobile()?Modernizr.mq("only screen and (max-width: 768px)")?$scope.siteID="6":$scope.siteID="7":$scope.siteID="1")};$scope.submitUserForm=function(){$scope.submittingForm()};$scope.checkZipcode();setSiteId()}]);angular.module("app").directive("formsInteraction",["kiaEvents","$location","$log","safeApply",function(kiaEvents,$location,$log,safeApply){return{restrict:"A",replace:!0,priority:1,link:function(scope,element,attrs){scope.validZipCode=!0;scope.$on(kiaEvents.ZIPCODE.NOT_VALID,function(event,message,id){scope.validZipCode=!1;scope.initialErrorMessage=message;scope.errorMessage=message});scope.$on(kiaEvents.ZIPCODE.VALID,function(event,id){scope.validZipCode=!0});scope.$on(kiaEvents.ZIPCODE.ERROR,function(event,message,id){scope.validZipCode=!1;scope.errorMessage=message});scope.$on(kiaEvents.ZIPCODE.FOCUS,function(event,id){});scope.disableBtn=function(){element.find(".submitBtn").addClass("disableBtn")};scope.enableBtn=function(){element.find(".submitBtn").removeClass("disableBtn")};scope.errorOffset=function(){scope.visibleErrors=element.find(".form-fields span.error").not(".ng-hide").size();var errorOffset=element.find(".form-fields span.error:visible").first().position();errorOffset&&$(window).scrollTop(errorOffset.top)};scope.selectDealer=function(dealer){scope.testDriveSelectedDealer=dealer};scope.submittingForm=function(){var formId="#"+element.find("form").attr("id");$(formId).submit()};element.find("#test-drive-form").submit(function(ev){document.activeElement.blur();$("input").blur();ev.stopPropagation();ev.preventDefault();safeApply(scope,function(){scope.formSubmit()});return!1});element.find("#request-brochure-form").submit(function(ev){document.activeElement.blur();$("input").blur();ev.stopPropagation();ev.preventDefault();safeApply(scope,function(){scope.requestBrochureSubmit()});return!1})}}}]);angular.module("app").directive("formsNavigation",["$routeParams","$log","$location",function($routeParams,$log,$location){return{restrict:"A",replace:!0,scope:{menuHighlight:"@",brochure:"@",updates:"@",testdrive:"@",appraisal:"@",quote:"@",carimage:"@",trim:"@",seriesName:"@"},link:function(scope,element,attrs){scope.sideNav={};scope.sideNav.brochureAvailable=scope.brochure;scope.sideNav.requestUpdatesAvailable=scope.updates;scope.sideNav.testDriveAvailable=scope.testdrive;scope.sideNav.tradeInAvailable=scope.appraisal;scope.sideNav.getAQuoteAvailable=scope.quote;scope.basePath=window.baseURI;scope.series=$routeParams.series;scope.year=$routeParams.year;scope.$emit("CAR-IMAGE AND TRIM",scope.carimage,scope.trim);scope.$emit("SERIES-NAME",scope.seriesName);var formName="";scope.$emit("CURRENT-FORM",scope.menuHighlight);scope.sectionClick=function(menu,id){if(menu===scope.menuHighlight)scope.$emit("CURRENT-FORM",scope.menuHighlight);else{switch(id){case 1:formName="/forms/getaquote/";break;case 2:formName="/forms/testdriverequest/";break;case 3:formName="/forms/appraisalrequest/";break;case 4:formName="/forms/updatesrequest/";break;case 5:formName="/forms/brochurerequest/"}window.location="http://"+$location.host()+"/"+window.country+"/"+window.lang+formName+scope.series+"/"+scope.year}}},templateUrl:window.staticURI+"/views/forms/formsNavigation.html"}}]);angular.module("app").directive("formStates",["$log",function($log){return{restrict:"A",replace:!0,link:function(scope,element,attrs){var selectContainer=element.find(".optionSelect");-1!==navigator.appVersion.indexOf("Win")&&-1!==navigator.appVersion.indexOf("Chrome")&&selectContainer.css("font-family","designk-list");selectContainer.change(function(){$(this).find(":selected").index()>0?$(this).removeClass("customSelect"):$(this).addClass("customSelect")})},templateUrl:window.staticURI+"/views/forms/formStates.html"}}]);angular.module("app").directive("testDriveForm",["safeApply",function(safeApply){return{restrict:"A",replace:!0,link:function(scope,element,attrs){scope.showPhone=!0;var disablePhone=function(){var deviceAgent=navigator.userAgent.toLowerCase();scope.device=deviceAgent;if(deviceAgent.indexOf("android")>-1){scope.showPhone=!1;scope.phoneLength=10;scope.phonePattern=/^[0-9]{10}$/;scope.$emit("ANDROID-DEVICE-DETECTION",!0)}else scope.phonePattern=new RegExp("");return scope.showPhone};scope.phoneVal=function(){scope.user.phone=element.find("#phone").val()};disablePhone()&&safeApply(scope,function(){element.find("#phone").mask("(999) 999-9999");element.find("#phone").on("blur",function(){scope.phoneVal()})})},templateUrl:window.staticURI+"/views/forms/testDriveForm.html"}}]);angular.module("app").directive("requestBrochureForm",["$log",function($log){return{restrict:"A",replace:!0,link:function(scope,element,attrs){},templateUrl:window.staticURI+"/views/forms/requestBrochureForm.html"}}]);angular.module("app").directive("appraisalForm",[function(){return{restrict:"A",replace:!0,link:function(scope,element,attrs){},templateUrl:window.staticURI+"/views/forms/appraisalForm.html"
}}]);angular.module("app").directive("autoFocus",[function(){return{restrict:"A",replace:!0,link:function(scope,element,attrs){$(element).focus(function(){})}}}]);angular.module("app").directive("lengthCheck",["$log","safeApply",function($log,safeApply){return{restrict:"A",replace:!0,link:function(scope,element,attrs){$(element).on("focus",function(ev){scope.$emit("ZIPCODE-VALIDATION",!1)})}}}]);angular.module("app").directive("formAutocomplete",["$log","safeApply",function($log,safeApply){return{restrict:"AE",replace:!0,priority:10,link:function(scope,element,attrs){element.on("submit",function(ev){$("input[ng-model]",element).each(function(index,item){"checkbox"!==angular.element(this).attr("type")&&"radio"!==angular.element(this).attr("type")&&(angular.element(this).val()===angular.element(this).attr("placeholder")?angular.element(this).controller("ngModel").$setViewValue(""):angular.element(this).val()===angular.element(this).attr("data-placeholder-value")?angular.element(this).controller("ngModel").$setViewValue(""):angular.element(this).controller("ngModel").$setViewValue($(this).val()))})})}}}]);angular.module("app").directive("analyticsTracking",["kiaEvents","$log",function(kiaEvents,$log){return{restrict:"A",replace:!0,link:function(scope,element,attrs){element.on("click",function(event){scope.eventName=attrs.analyticsTracking;switch(scope.eventName){case"pdf-download":scope.$emit(kiaEvents.ANALYTICS.BROCHURE_DOWNLOAD)}})}}}]);angular.module("app").controller("paymentTestController",["$log","$scope","paymentCalculator","kiaEvents",function($log,$scope,paymentCalculator,kiaEvents){$scope.$on(kiaEvents.GLOBAL.CALCULATE_PAYMENT,function(e){$scope.monthlyPrice=paymentCalculator.calculate($scope.price)})}]);!function($){$.fn.fitText=function(kompressor,options){var compressor=kompressor||1,settings=$.extend({minFontSize:Number.NEGATIVE_INFINITY,maxFontSize:Number.POSITIVE_INFINITY},options);return this.each(function(){var $this=$(this),resizer=function(){$this.css("font-size",Math.max(Math.min($this.width()/(10*compressor),parseFloat(settings.maxFontSize)),parseFloat(settings.minFontSize)))};resizer();$(window).on("resize.fittext orientationchange.fittext",resizer)})}}(jQuery);angular.module("app").controller("contentTemplateController",["$log","$scope","$rootScope","tealiumService",function($log,$scope,$rootScope,tealiumService){}]);angular.module("app").directive("contentInteraction",["$log","$window","kiaEvents","$location","$timeout",function($log,$window,kiaEvents,$location,$timeout){return{restrict:"A",replace:!0,priority:2,link:function(scope,element,attrs){scope.sidebar=!0;scope.mobile=!1;scope.content=!0;scope.$on(kiaEvents.RESPONSIVE.MATCH1024,function(){scope.mobile=!0;scope.sidebar=!1});scope.$on(kiaEvents.RESPONSIVE.UNMATCH1024,function(){scope.mobile=!1;scope.sidebar=!0});scope.$on("kia.content.templates.hide.sidebar",function(){if(scope.mobile){scope.sidebar=!1;scope.$apply()}});scope.$on("kia.content.templates.show.sidebar",function(){scope.mobile&&(scope.sidebar=!0)});scope.showSidebar=function(){scope.sidebar=!0};scope.selectedSidebarClick=function(){scope.mobile&&(scope.sidebar=!1)}}}}]);angular.module("app").directive("iFrame",["$log",function($log){return{restrict:"A",replace:!0,scope:{palette:"@",grid:"@"},link:function(scope,element,attrs){function resizeIframe(){scope.iFrame.newHeight.height=null;scope.iFrame.newHeight.keepAspectRatio=null;scope.iFrame.newHeight.aspectRatioWidth=null;scope.iFrame.dWidth=element.width();if(scope.iFrame.dWidth<=scope.iFrame.minimumLayout.width){scope.iFrame.newHeight.height=scope.iFrame.minimumLayout.height;scope.iFrame.newHeight.keepAspectRatio="true"===scope.iFrame.minimumLayout.aspectRatio;scope.iFrame.newHeight.aspectRatioWidth=scope.iFrame.minimumLayout.aspectRatioWidth}else if(scope.iFrame.dWidth>=scope.iFrame.maximumLayout.width){scope.iFrame.newHeight.height=scope.iFrame.maximumLayout.height;scope.iFrame.newHeight.keepAspectRatio="true"===scope.iFrame.maximumLayout.aspectRatio;scope.iFrame.newHeight.aspectRatioWidth=scope.iFrame.maximumLayout.aspectRatioWidth}else for(var i=0;i<scope.iFrame.layouts.length;i++)if(scope.iFrame.dWidth>=scope.iFrame.layouts[i].breakpointmin&&scope.iFrame.dWidth<=scope.iFrame.layouts[i].breakpointmax){scope.iFrame.newHeight.height=scope.iFrame.layouts[i].height;scope.iFrame.newHeight.keepAspectRatio="true"===scope.iFrame.layouts[i].aspect_ratio;scope.iFrame.newHeight.aspectRatioWidth=scope.iFrame.layouts[i].breakpointmin>0?scope.iFrame.layouts[i].breakpointmin:scope.iFrame.layouts[i].breakpointmax;break}if(scope.iFrame.newHeight.height){var calculatedHeight=scope.iFrame.newHeight.keepAspectRatio?Math.floor(scope.iFrame.newHeight.height*scope.iFrame.dWidth/scope.iFrame.newHeight.aspectRatioWidth):scope.iFrame.newHeight.height;if(calculatedHeight!==scope.iFrame.obj.height()){scope.iFrame.obj.css({height:calculatedHeight,maxHeight:calculatedHeight});$(element).css({height:calculatedHeight,maxHeight:calculatedHeight+6})}}}scope.iFrame={dWidth:null,minimumLayout:{width:null,height:null,aspectRatio:null,aspectRatioWidth:null},maximumLayout:{width:null,height:null,aspectRatio:null,aspectRatioWidth:null},obj:$(element).find("iframe"),timer:null,newHeight:{height:null,keepAspectRatio:null,aspectRatioWidth:null}};(Modernizr.ipad||Modernizr.ipod||Modernizr.iphone)&&scope.iFrame.obj.attr("scrolling","no");scope.iFrame.layouts=scope.iFrame.obj.data("content-iframe-layouts").layouts;for(var i=0;i<scope.iFrame.layouts.length;i++){if(scope.iFrame.layouts[i].breakpointmin<scope.iFrame.minimumLayout.width||null===scope.iFrame.minimumLayout.width){scope.iFrame.minimumLayout.width=scope.iFrame.layouts[i].breakpointmin;scope.iFrame.minimumLayout.height=scope.iFrame.layouts[i].height;scope.iFrame.minimumLayout.aspectRatio=scope.iFrame.layouts[i].aspect_ratio;scope.iFrame.minimumLayout.aspectRatioWidth=scope.iFrame.layouts[i].breakpointmin>0?scope.iFrame.layouts[i].breakpointmin:scope.iFrame.layouts[i].breakpointmax}if(scope.iFrame.layouts[i].breakpointmax>scope.iFrame.maximumLayout.width||null===scope.iFrame.maximumLayout.width){scope.iFrame.maximumLayout.width=scope.iFrame.layouts[i].breakpointmax;scope.iFrame.maximumLayout.height=scope.iFrame.layouts[i].height;scope.iFrame.maximumLayout.aspectRatio=scope.iFrame.layouts[i].aspect_ratio;scope.iFrame.maximumLayout.aspectRatioWidth=scope.iFrame.layouts[i].breakpointmin}}$(window).bind("resize.iFrame",function(){scope.iFrame.timer&&window.clearTimeout(scope.iFrame.timer);scope.iFrame.timer=window.setTimeout(resizeIframe,500)}).resize();scope.$on("$routeChangeStart",function(next,current){$(window).off("resize.iFrame")});resizeIframe()}}}]);angular.module("app").directive("contentGrid",["$log",function($log){return{restrict:"A",replace:!0,scope:{palette:"@",grid:"@"},link:function(scope,element,attrs){void 0!==scope.palette&&element.addClass(scope.palette);void 0!==scope.grid&&element.addClass(scope.grid)}}}]);angular.module("app").directive("menuOption",["kiaEvents","$window","$log","$timeout",function(kiaEvents,$window,$log,$timeout){return{restrict:"A",priority:1,scope:{link:"@",selected:"@",flag:"@",hasChildren:"@"},link:function(scope,element,attrs){if("true"===scope.selected){element.addClass("selected");scope.onCollapse&&scope.onCollapse(!0)}else"true"!==scope.hasChildren?element.on("click",function(){$timeout(function(){window.location=$window.baseURI+"/"+scope.link},50)}):scope.onCollapse&&scope.onCollapse(!1)}}}]);angular.module("app").directive("innerOption",["kiaEvents","$window","$log",function(kiaEvents,$window,$log){return{restrict:"A",link:function(scope,element,attrs){"true"===scope.selected&&element.on("click",function(){scope.$emit("kia.content.templates.hide.sidebar")})}}}]);angular.module("app").directive("contentPanel",["$log","kiaEvents",function($log,kiaEvents){return{restrict:"A",replace:!0,scope:{palette:"@",position:"@",widthRelative:"@",widthMax:"@"},link:function(scope,element,attrs){var timer,oMode={mobile:"mobile-mode",tablet:"tablet-mode",medium:"medium-mode",big:"big-mode"},objBackground=element.find(".background"),objForeground=element.find(".foreground"),isObjectEmpty=function(obj){return obj&&obj.length>0&&obj.children().length>0};scope.hasBackground=isObjectEmpty(objBackground);scope.hasForeground=isObjectEmpty(objForeground);void 0!==scope.palette&&objForeground.addClass(scope.palette);void 0!==scope.position&&objForeground.addClass(scope.position.toLowerCase());void 0!==scope.widthMax&&objForeground.css({"max-width":scope.widthMax+"px"});void 0!==scope.widthRelative&&objForeground.css({width:scope.widthRelative});var setMode=function(sMode){var sKey="";for(sKey in oMode)sMode!==oMode[sKey]&&element.removeClass(oMode[sKey]);element.addClass(sMode)||element.addClass(sMode)},onResize=function(){var nWidth=element.width(),bMobile=480>nWidth,bTablet=!bMobile&&760>nWidth,bMedium=!bMobile&&!bTablet&&1360>nWidth;setMode(bMobile?oMode.mobile:bTablet?oMode.tablet:bMedium?oMode.medium:oMode.big);element.height("auto");var hForeground=objForeground.outerHeight(),hViewport=$(window).height()-($(".main-wrapper").outerHeight()-$(".main-wrapper-content").outerHeight());hViewport<$(".main-wrapper-content").height()&&(hViewport=$(".main-wrapper-content").height());if(bMobile){element.height("auto");scope.$emit(kiaEvents.CONTENTTEMPLATE.PANEL_RESIZE,{height:"auto"})}else{hForeground>hViewport?element.height(hForeground):element.height(hViewport);scope.hasBackground&&objBackground.height(element.height());scope.$emit(kiaEvents.CONTENTTEMPLATE.PANEL_RESIZE,{height:element.height()})}if(bMobile||bTablet)objForeground.css({margin:"0"});else{var wForeground=objForeground.outerWidth();element.height(),element.width();switch(scope.position){case"top-center":case"bottom-center":objForeground.css({"margin-left":-(wForeground/2)+"px"});break;case"center-left":case"center-right":objForeground.css({"margin-top":-(hForeground/2)+"px"});break;case"center-center":objForeground.css({"margin-left":-(wForeground/2)+"px"});objForeground.css({"margin-top":-(hForeground/2)+"px"});break;default:objForeground.css({margin:"0"})}}};$(window).bind("resize",function(){timer&&window.clearTimeout(timer);timer=window.setTimeout(function(){onResize()},500)}).resize()}}}]);angular.module("app").directive("contentAccordion",["$log","kiaEvents",function($log,kiaEvents){return{restrict:"A",replace:!1,scope:{},controller:function($scope){},link:function(scope,element,attrs){scope.id="Acc-"+$(".content-accordion").index(element);element.attr("id",scope.id);scope.$on(kiaEvents.CONTENTTEMPLATE.ACCORDION_OPEN,function(ev,item){scope.$broadcast(kiaEvents.CONTENTTEMPLATE.ACCORDION_CLOSE,item)})}}}]);angular.module("app").directive("accordionItem",["$log","kiaEvents","safeApply",function($log,kiaEvents,safeApply){return{restrict:"A",replace:!0,transclude:!0,scope:{title:"@",srcSmall:"@",srcMedium:"@",srcLarge:"@",imgAlt:"@",expandable:"@"},controller:function($scope){$scope.collapsed=!0;$scope.openBox=!1;$scope.showImg=!1;$scope.bMobile=!1;$scope.contentURI=window.contentURI;void 0!==$scope.srcSmall&&""!==$scope.srcSmall&&($scope.showImg=!0);$scope.hasContent=$scope.expandable!==!1&&"false"!==$scope.expandable},templateUrl:window.staticURI+"/views/directives/accordion-item.html",link:function(scope,element,attrs){var oParent=$(element).parent();scope.id=oParent.attr("id")+"-item-"+oParent.find(".accordion-item").index(element);if(!scope.hasContent){$(element).find(".accordion-desktop").remove();$(element).find(".accordion-mobile").remove()}scope.openLightbox=function(){scope.openBox=!0};if(scope.hasContent){scope.$on(kiaEvents.CONTENTTEMPLATE.ACCORDION_CLOSE,function(ev,item){scope.collapsed===!1&&scope.id!==item&&scope.$broadcast(kiaEvents.COLLAPSIBLE.CLOSE)});scope.$watch("collapsed",function(){scope.collapsed===!1&&scope.$emit(kiaEvents.CONTENTTEMPLATE.ACCORDION_OPEN,scope.id)});scope.$on(kiaEvents.RESPONSIVE.MATCH480,function(){scope.bMobile=!0;scope.openBox=!scope.collapsed});scope.$on(kiaEvents.RESPONSIVE.UNMATCH480,function(){scope.bMobile=!1;var bOpen=scope.collapsed;scope.collapsed=!scope.openBox;bOpen!==scope.collapsed&&(scope.collapsed?scope.$broadcast(kiaEvents.COLLAPSIBLE.CLOSE):scope.$emit(kiaEvents.COLLAPSIBLE.OPEN));scope.openBox=!1})}}}}]);angular.module("app").directive("contentResponsiveImage",["$log","kiaEvents",function($log,kiaEvents){return{restrict:"A",replace:!1,controller:function($scope){},link:function(scope,element,attrs){$(element).find("img").responsiveImage({cssDomObject:element,defaultImageVersion:"data-img-480",delayLoadingAttribute:"data-src"})}}}]);angular.module("app").directive("containerFitMedia",["kiaEvents","$log","$timeout",function(kiaEvents,$log,$timeout){return{restrict:"A",link:function(scope,element,attrs){var $element=$(element),$images=$("img",element),$videos=$("video",element),eWidth=$element.width(),eHt=$element.height(),mediaReset=function(){$images.css({top:"",left:"",width:""}).removeClass("fit-media");$videos.css({top:"",left:"",width:""}).removeClass("fit-media")},setFullSize=function($thisMedia){var thisWidth=$thisMedia.width(),thisHt=$thisMedia.height(),thisRatio=thisWidth/thisHt;if(eHt>thisHt){var newWidth=eHt*thisRatio,marginLeft=-1*Math.floor((newWidth-thisWidth)/2);$thisMedia.css({width:newWidth+"px",left:marginLeft+"px"})}else if(thisHt>eHt){var marginTop=-1*Math.floor((thisHt-eHt)/2);$thisMedia.css({top:marginTop+"px"})}},resizeMedia=function(){mediaReset();eHt=$element.height();eWidth=$element.width();$images.length>0&&$images.each(function(){setFullSize($(this))}).addClass("fit-media");$videos.length>0&&$videos.each(function(){setFullSize($(this))}).addClass("fit-media")};scope.$on(kiaEvents.CONTENTTEMPLATE.PANEL_RESIZE,function(evt,screenType){"auto"===screenType.height?mediaReset():resizeMedia()})}}}]);angular.module("app").directive("contentTable",["kiaEvents","$log","$timeout","$http","$rootScope","safeApply",function(kiaEvents,$log,$timeout,$http,$rootScope,safeApply){return{restrict:"A",priority:90,scope:{columns:"@",tableTitle:"@",tableId:"@",palette:"@",rowsxpage:"@",paginationPosition:"@"},templateUrl:window.staticURI+"/views/directives/content-table.html",link:function(scope,element,attrs){var getRecords,requestTable,onDataTable,onFailure;scope.records=[];var defaultParams={tableId:scope.tableId?scope.tableId:0,page:1,allData:!1,rowsPerPage:scope.rowsxpage?scope.rowsxpage:10};scope.pagTop=!1;scope.pagBottom=!1;switch(scope.paginationPosition){case"top":scope.pagTop=!0;break;case"bottom":scope.pagBottom=!0;break;case"both":scope.pagBottom=!0;scope.pagTop=!0}requestTable=function(params){var parameters=angular.extend({},defaultParams,params);getRecords(parameters,onDataTable,onFailure)};getRecords=function(params,success,failure){var serviceURL="data/table?tableId="+params.tableId+"&page="+params.page+"&allData="+params.allData+"&rowsPerPage="+params.rowsPerPage;return $http.get(serviceURL,{}).success(function(data,getResponseHeaders){return angular.isFunction(success)?success(data):void 0}).error(failure)};onDataTable=function(data){scope.titles=data.titles;scope.records=data.rows;scope.total=data.totalRows;scope.rows=data.rowsPerPage;scope.pages=data.totalPages};onFailure=function(data){};scope.$on("name",function(event){requestTable(event.params)});$rootScope.$on(kiaEvents.PAGINATION.GOTO,function(ev,params){requestTable(params)});requestTable(defaultParams)}}}]);angular.module("app").directive("pagination",["$log","$rootScope","kiaEvents",function($log,$rootScope,kiaEvents){return{restrict:"A",priority:100,scope:{rows:"=",pages:"=",componentId:"=",visible:"="},templateUrl:window.staticURI+"/views/directives/pagination.html",link:function(scope,element,attributes){scope.current=1;scope.visible?element.show():element.hide();scope.range=function(min,max){for(var input=[],i=min;max>=i;i++)input.push(i);return input};scope["goto"]=function(page){scope.current=page;var params={tableId:scope.componentId,page:page,allData:!1,rowsPerPage:scope.rows};$rootScope.$emit(kiaEvents.PAGINATION.GOTO,params)};$rootScope.$on(kiaEvents.PAGINATION.GOTO,function(ev,params){scope.current=params.page});scope.prev=function(){scope["goto"](scope.current-1)};scope.next=function(){scope["goto"](scope.current+1)}}}}]);angular.module("app").directive("tileInteraction",["kiaEvents","$window","$log","safeApply",function(kiaEvents,$window,$log,safeApply){return{restrict:"A",link:function(scope,element,attrs){var timer,winWidth,banner=$(".banner"),tileItem=$(".tile-item"),leftTileItem=$(".left .tile-item"),rightTileItem=$(".right .tile-item");safeApply(scope,function(){banner.find("h1").fitText()});var calculateTileHeight=function(){tileItem.each(function(){var tileHeight=$(this).innerHeight(),tileContent=$(this).find(".tile-content");tileContent.css("height",tileHeight)})},applyTileBorder=function(){winWidth=$(window).width();$(".tile-item:lt(15)").removeClass("selected-tile");619>=winWidth?$(".tile-item:first").addClass("selected-tile"):winWidth>=620&&919>=winWidth?$(".tile-item:lt(2)").addClass("selected-tile"):winWidth>=920&&1279>=winWidth?$(".tile-item:lt(3)").addClass("selected-tile"):$(".tile-item:lt(2)").addClass("selected-tile")};leftTileItem.find("figure img").responsiveImage({cssDomObject:leftTileItem,defaultImageVersion:"data-img-620"});rightTileItem.find("figure img").responsiveImage({cssDomObject:rightTileItem,defaultImageVersion:"data-img-620"});$(window).bind("resize",function(){timer&&window.clearTimeout(timer);timer=window.setTimeout(function(){calculateTileHeight();applyTileBorder()},500)}).resize();var init=function(){calculateTileHeight();applyTileBorder()};init()}}}]);angular.module("app").directive("tileItem",["kiaEvents","$window","$log","safeApply","messageService",function(kiaEvents,$window,$log,safeApply,messageService){return{restrict:"A",scope:{tileType:"@",videoType:"@",videoId:"@"},link:function(scope,element,attrs){var $videoURL,$iFrame;scope.openLightbox=!1;scope.tileClick=function(URL){if("kiaFacts"===scope.tileType)safeApply(scope,function(){scope.openLightbox=!0});else if("video"===scope.tileType){safeApply(scope,function(){scope.openLightbox=!0});messageService.subscribe(kiaEvents.LIGHTBOX.OPEN,function(event,lightBoxID){if(lightBoxID.id===scope.videoId)if("youtube"===scope.videoType){$videoURL="//www.youtube.com/embed/"+URL+"?wmode=transparent&enablejsapi=1&iv_load_policy=1&modestbranding=1&rel=0&showinfo=0&controls=1";setTimeout(function(){$("#"+scope.videoId+" .iframe-content iframe").attr("src",$videoURL)},400)}else if("vine"===scope.videoType&&$("html").hasClass("no-lteie8")){$videoURL="https://vine.co/v/"+URL+"/embed/simple";setTimeout(function(){$("#"+scope.videoId+" .iframe-content iframe").attr("src",$videoURL)},400)}else if("vine"===scope.videoType&&$("html").hasClass("lt-ie9")){$(".ie8-content").css("display","block");$(".vine-box .iframe-container").css("display","none")}});messageService.subscribe(kiaEvents.LIGHTBOX.CLOSE,function(event,lightBoxID){$iFrame=$("#"+lightBoxID.id+" .iframe-content iframe");$iFrame.attr("src","")})}}}}}]);angular.module("app").directive("contentTypeHtml",["$log","$sce","$compile","$timeout",function($log,$sce,$compile,$timeout){return{restrict:"AC",replace:!1,scope:{},controller:function($scope,$element,$transclude){$scope.trustedHtml=""},compile:function(tElement,tAttrs,transclude){tElement.append("<div class='ng-hide' ng-bind-html='trustedHtml'></div>");var sScript="";angular.forEach(tElement.find("script"),function(value){sScript+=value.outerHTML+"\n";value.remove()});return{pre:function(scope,iElement,iAttrs,controller){scope.trustedHtml=$sce.trustAsHtml(sScript)},post:function(scope,iElement,iAttrs,controller){}}}}}]);angular.module("app").factory("safetyRecallSearchService",["$log","$http","messageService","kiaEvents",function($log,$http,messageService,kiaEvents){var defaultRequestParams,url,get,getRecalls,getRefreshDate;url={recalls:window.baseURI+"/data/owners/recalls/search/{vin}",refreshdate:window.baseURI+"/data/owners/recalls/refreshdate"};defaultRequestParams={};get=function(key,values,parameters,success,failure){var requestParams=angular.extend({},defaultRequestParams,parameters),sUrl=url[key].slice(0);for(var objKey in values)sUrl=sUrl.replace("{"+objKey+"}",values[objKey]);return $http.get(sUrl,{params:requestParams}).success(function(data,getResponseHeaders){messageService.publish("safetyRecallSearchService-"+key,{source:"safetyRecallSearchService",key:key,values:values,parameters:parameters});return angular.isFunction(success)?success(data):void 0}).error(failure)};getRecalls=function(options,success,failure){var values={vin:options.vin},parameters={};return get("recalls",values,parameters,success,failure)};getRefreshDate=function(success,failure){var values={},parameters={};return get("refreshdate",values,parameters,success,failure)};return{getRecalls:getRecalls,getRefreshDate:getRefreshDate}}]);angular.module("app").filter("replace",function(){return function(value,target,str){value=value.replace(target,str);return value}});angular.module("app").filter("paragraph",function(){return function(value){if(angular.isString(value)){value=value.toLowerCase();return value.replace(/^.|\.\s+./gi,function(match){return match.toUpperCase()})}return value}});angular.module("app").filter("title",function(){return function(value){if(angular.isString(value)){value=value.toLowerCase();return value.replace(/^.|\s+./gi,function(match){return match.toUpperCase()})}return value}});angular.module("app").directive("safetyRecallSearch",["$log","safeApply","messageService","kiaEvents","localize","safetyRecallSearchService","tealiumService",function($log,safeApply,messageService,kiaEvents,localize,safetyRecallSearchService,tealiumService){return{restrict:"A",replace:!0,templateUrl:window.staticURI+"/views/forms/safetyRecallSearch.html",link:function(scope,element,attrs){function parseRecall(oItem){var oIssued=parseDate(oItem.recall_date),oUpdated=null;oItem.recall_date!==oItem.refresh_date&&(oUpdated=parseDate(oItem.refresh_date));return{nhtsa:oItem.nhtsa_recall_number,description:oItem.recall_description,risk:oItem.safety_risk_description,remedy:oItem.remedy_description,status:oItem.recall_status,issued:oIssued,updated:oUpdated}}function parseDate(dateSince1970){return dateSince1970?angular.isString(dateSince1970)?dateSince1970:new Date(parseInt(dateSince1970,10)):null}function getDaysDifference(oDate1,oDate2){try{var nTime=oDate1.getTime()-oDate2.getTime(),nDay=864e5;return Math.floor(nTime/nDay)}catch(e){return 0}}scope.vehicle={vin:"",loaded:!1,model:"",year:"",make:"",date:new Date,hasRecalls:!1,recalls:null};scope.submitted=!1;scope.serviceError=null;var richText=element.parents(".content-template").find(".content-type-rich-text"),successRecalls=function(data){var i=0;if(data&&("200"===data.statusCode||200===data.statusCode||"0"===data.statusCode||0===data.statusCode)&&data.result&&data.result.recallsResult&&data.result.recallsResult.status){scope.serviceError=null;scope.vehicle.model=data.result.recallsResult.model;scope.vehicle.year=data.result.recallsResult.year;scope.vehicle.make=data.result.recallsResult.make;scope.vehicle.date=parseDate(data.result.recallsResult.refresh_date);scope.vehicle.days=getDaysDifference(new Date,scope.vehicle.date);scope.vehicle.recalls=[];if(angular.isArray(data.result.recallsResult.recalls))for(i=0;i<data.result.recallsResult.recalls.length;i++)scope.vehicle.recalls.push(parseRecall(data.result.recallsResult.recalls[i]));scope.vehicle.hasRecalls=scope.vehicle.recalls.length>0;scope.vehicle.loaded=!0;tealiumService.track({vehicle_vin:scope.vehicle.vin.toUpperCase(),event_name:"recall vin lookup",site_events:{recall_verify_vin:"true"}})}else failureRecalls(data)},failureRecalls=function(data){data.statusDesc?"INVALID_VIN"!==data.statusDesc?scope.serviceError=data.statusDesc:scope.serviceError=localize.getLocalizedString("label.forms.errorVin.invalid"):data.result&&data.result.recallsResult&&data.result.recallsResult.status===!1?scope.serviceError=localize.getLocalizedString("label.forms.errorVin.invalid"):scope.serviceError=localize.getLocalizedString("error.500")},loadRecalls=function(){scope.$emit(kiaEvents.LOADER.SHOW);return safetyRecallSearchService.getRecalls({vin:scope.vehicle.vin.toUpperCase()},successRecalls,failureRecalls)};scope.formSubmit=function(){scope.submitted=!0;scope.$emit(kiaEvents.ANALYTICS.SAFETY_RECALL_SEARCH);if(scope.searchVin.$valid){scope.vehicle.loaded=!1;scope.serviceError=null;scope.searchVin.$setPristine(!0);loadRecalls()}};scope.$watch("width",function(){richText.removeClass("safety-recall-safety-copy");void 0!==scope.width&&scope.width>=1020&&richText.addClass("safety-recall-safety-copy")})}}}]);angular.module("app").directive("safetyRecallDate",["$log","kiaEvents","safetyRecallSearchService",function($log,kiaEvents,safetyRecallSearchService){return{restrict:"A",replace:!0,templateUrl:window.staticURI+"/views/directives/safetyRecallDate.html",controller:function($scope){$scope.refreshDate=null},link:function(scope,element,attrs){var successRefreshDate=function(data){data&&("200"===data.statusCode||200===data.statusCode||"0"===data.statusCode||0===data.statusCode)&&data.result?scope.refreshDate=new Date(data.result.refreshDate):failureRefreshDate(data)},failureRefreshDate=function(data){scope.refreshDate=null};!function(){scope.$emit(kiaEvents.LOADER.SHOW);return safetyRecallSearchService.getRefreshDate(successRefreshDate,failureRefreshDate)}()}}}]);angular.module("app").controller("safetyRecallSearch",["$log","$scope","$rootScope","$location","$routeParams","safeApply","cookieService","kiaEvents",function($log,$scope,$rootScope,$location,$routeParams,safeApply,cookieService,kiaEvents){}]);angular.module("app").controller("vehiclesController",["$scope","$rootScope","$location","$routeParams","$window","disclaimersModel","localize",function($scope,$rootScope,$location,$routeParams,$window,disclaimersModel,localize){$scope.getMtfTitle=function(){return localize.getLocalizedString("label.mtf.title.experience")};$scope.urlCategory="vehicles";"undefined"!=typeof $routeParams.category&&($scope.urlCategory=$scope.urlCategory+"/"+$routeParams.category);$rootScope.$broadcast("kia.nav.update.selected",0);$rootScope.$on("vehicleSelector.selected",function(evt,args){var pathArray=window.location.pathname.split("/");$window.location.href="/us/"+pathArray[2]+"/vehicle/"+args.vehicle.series+"/"+args.vehicle.year});disclaimersModel.setGlobal("disclaimer-vehicles")}]);angular.module("app").controller("fishEyeController",["$log","$rootScope","$scope","$routeParams",function($log,$rootScope,$scope,$routeParams){$scope.contentURI=window.contentURI;$scope.basePath=window.contentURI+"/content/media/all/vehicles/soul/2014";$scope.currentColor={name:"",baseHex:"",fabric:{name:"",file:""}};$scope.colors=[{name:"Black",baseHex:"2c2b2c",fabric:{name:"Diamond Woven Cloth",file:""}},{name:"Gray Two-Tone",baseHex:"000000",fabric:{name:"Honeycomb Woven Cloth",file:""}},{name:"Gray Two-Tone",baseHex:"484443",fabric:{name:"Leather",file:""}}];var processColorsFabrics=function(){var i=0;for(i=0;i<$scope.colors.length;i++)$scope.colors[i].fabric.file=$scope.colors[i].fabric.name.toLowerCase().replace(/\s/gi,"-")};processColorsFabrics();$scope.onColor=function(oColor){$scope.currentColor=oColor};$scope.onColor($scope.colors[0])}]);angular.module("app").factory("tealiumService",["$window","$http","$location",function($window,$http,$location){function track(dataObj){try{$window._trackAnalytics(dataObj)}catch(err){console.log(err)}}function updateDL(href){var targetUrl;targetUrl=href?href:window.lang+$location.url();return $http.get("/us/api/datalayer/?url=/us/"+targetUrl).then(function(response){for(var key in response.data)response.data.hasOwnProperty(key)&&($window._dl[key]=response.data[key]);track({site_events:{virtual_page_load:"true"}})})["catch"](function(error){console.error("XHR Failed for getDatalayer("+targetUrl+")"+error.data)})}return{track:track,updateDL:updateDL}}]);angular.module("app").directive("bluetoothView",["$log","kiaEvents","lightboxService","$bluetoothService",function($log,kiaEvents,lightboxService,$bluetoothService){return{restrict:"A",replace:!0,templateUrl:window.baseURI+"/modules/bluetoothHub",controller:function($scope){},link:function(scope,element,attrs){"use strict";element.closest(".main-wrapper").addClass("bluetooth-container");Modernizr.android&&element.find(".print-instruction").hide();Modernizr.appleios&&element.closest(".main-wrapper").parent("body").addClass("appleios-bluetooth-container")}}}]);angular.module("app").directive("bluetooth",["$log","$q","safeApply","bluetoothModel","$bluetoothService","localize","kiaEvents","externalConstant","tealiumService",function($log,$q,safeApply,bluetoothModel,$bluetoothService,localize,kiaEvents,externalConstant,tealiumService){return{restrict:"A",replace:!0,templateUrl:window.staticURI+"/views/directives/bluetooth.html",controller:function($scope){console.log("in scope");if($scope.selectAudio){console.log("in scope selecting audio");$(".bluetooth-box.lightbox-modal .lightbox-content").css("overflow","hidden")}else{console.log("in scope NOT selecting audio");$(".bluetooth-box.lightbox-modal .lightbox-content").css("overflow","auto")}},link:function(scope,element,attrs){element.closest(".content-type-html").siblings(".content-grid").addClass("above-container");scope.currentBluetoothFootnote=null;scope["static"]=window.staticURI;scope.base=window.baseURI;scope.content=window.contentURI;scope.modelSelected=!1;scope.carrierSelected=!1;scope.optionSpan=!1;scope.deviceDropdown=!0;scope.optionSelected=!0;scope.manufacturerSelected=!1;scope.bluetoothData=bluetoothModel.data;scope.descriptions=[];scope.compatibleFeatures=[];scope.incompatibleFeatures=[];scope.notTestedFeatures=[];scope.referencesArray=[];scope.audioSystemName=!0;scope.noAudioSystem=!1;scope.bluetoothSection=!0;scope.bluetoothLandingPage=!1;scope.content=window.contentURI;scope.images={modal:{vehicle:null,audio:null,carrier:null,manufacturer:null,device:null},defaults:{vehicle:"owners.bluetooth.vehicle.defaultImage",carrier:"owners.bluetooth.carrier.defaultImage",audio:"owners.bluetooth.headunit.defaultImage",manufacturer:"owners.bluetooth.manufacturer.defaultImage",device:"owners.bluetooth.phone.defaultImage"},checkImage:function(src){var deferred=$q.defer();if(void 0===src)deferred.resolve(!1);else{var image=new Image;image.onerror=function(){deferred.resolve(!1)};image.onload=function(){deferred.resolve(!0)};image.src="/us/k3"+src}return deferred.promise},years:{}};var audioSystemLength,successVehicles=function(data){scope.vehicles=data.btModels.result.vehicles;scope.content=window.contentURI},successYears=function(data){scope.years=[];scope.images.years=[];for(var i=0;i<data.btModelYears.result.years.length;i++){scope.years.push(data.btModelYears.result.years[i].year);data.btModelYears.result.years[i].image_uri&&(scope.images.years[data.btModelYears.result.years[i].year]=data.btModelYears.result.years[i].image_uri)}scope.modelSelected=!0},successCarriers=function(data){scope.carriers=data.btCarriers.result.carriers},successAudios=function(data){var deviceHeight=document.documentElement.clientHeight,iphoneFourHeight=480,iphoneFiveHeight=568;if(iphoneFourHeight+1>deviceHeight){$(".bluetooth-box .select-audio-system-form .form-wrapper").css("max-height","210px");$(".bluetooth-box .select-device-form .form-wrapper").css("max-height","215px")}else if(deviceHeight>iphoneFourHeight&&iphoneFiveHeight+1>deviceHeight){$(".bluetooth-box .select-audio-system-form .form-wrapper").css("max-height","300px");$(".bluetooth-box .select-device-form .form-wrapper").css("max-height","300px")}scope.audioLists=data.btHeadUnits.result.headUnits;audioSystemLength=scope.audioLists.length;if(1===audioSystemLength){scope.audioSystemName=scope.audioLists[0].name;scope.noAudioSystem=!1;return scope.gotoSelectDevice(scope.selectedModel,scope.selectedYear,scope.audioLists[0].id,audioSystemLength);
}if(0!==audioSystemLength){scope.isMobile()&&$(".bluetooth-box .lightbox-content").addClass("ipadScroller");return scope.audioSystemScreen(audioSystemLength)}scope.noAudioSystem=!0},successManufacturers=function(data){scope.manufacturers=data.btManufacturer.result.manufacturers;scope.carrierSelected=!0},successDevices=function(data){scope.manufacturerSelected=!0;scope.devices=data.btPhones.result.phones;$.each(scope.devices,function(index,value){var img=scope.devices[index].thumbUrl;scope.devices[index].thumbUrl=null;scope.images.checkImage(img).then(function(result){scope.devices[index].thumbUrl=result?img:externalConstant.getValue(scope.images.defaults.device)})})},successFeatures=function(data){var advancedFeatures,indicatorFeatures,basicFeatures;scope.features=data.btSinglePhone.result.phone;scope.navigationDatas=data.NavigationLinks;advancedFeatures=scope.features.advancedFeatures;indicatorFeatures=scope.features.indicatorFeatures;basicFeatures=scope.features.basicFeatures;scope.compatibleFeatures=[];scope.incompatibleFeatures=[];scope.notTestedFeatures=[];scope.referencesArray=[];scope.getFeaturesList(advancedFeatures);scope.getFeaturesList(indicatorFeatures);scope.getFeaturesList(basicFeatures);scope.versions=data.btSinglePhone.result.phone.version;scope.pdfURI=window.contentURI+data.btSinglePhone.result.phone.pdfUrl};scope.audioSystemScreen=function(index){scope.selectDevice=!1;scope.selectVehicle=!1;scope.selectAudio=!0;$(".lightbox-content").height($(".lightbox-content").css("max-height"))};scope.getFeaturesList=function(featureArray){for(var i=0;i<featureArray.length;i++)switch(featureArray[i].status){case 0:scope.getArrays(scope.notTestedFeatures,featureArray[i]);break;case 1:scope.getArrays(scope.incompatibleFeatures,featureArray[i]);break;case 2:scope.getArrays(scope.compatibleFeatures,featureArray[i])}};scope.getArrays=function(arrayName,arrayPointer){if(null!==arrayPointer.references){arrayName.push({name:arrayPointer.name,code:arrayPointer.references[0].code});scope.referencesArray.push({description:arrayPointer.references[0].description,code:arrayPointer.references[0].code})}else arrayName.push({name:arrayPointer.name,code:null})};var failure=function(error){};scope.updateYears=function(vehicleModel){scope.years=[];scope.isYearSelected=!1;scope.modelSelected=!1;scope.images.modal.vehicle=null;return vehicleModel?$bluetoothService.getYears({name:vehicleModel.name,seriesId:vehicleModel.seriesId},successYears,failure):void 0};scope.getURI=function(id){return bluetoothModel.getURI(id)};scope.gotoSelectVehicle=function(){scope.isAudioSelected=!1;scope.selectVehicle=!0;scope.selectAudio=!1;scope.selectDevice=!1;scope.noAudioSystem=!1};scope.gotoAudioSystem=function(vehicleModel,selectedYearValue){$("#bluetooth-box .radio > span").removeClass("checked");scope.audioLists=[];scope.content=window.contentURI;scope.selectedModel=vehicleModel;scope.selectedYear=selectedYearValue;scope.isYearSelected=selectedYearValue?!0:!1;tealiumService.track({bluetooth_year:scope.selectedYear,bluetooth_model:scope.selectedModel.name,event_name:"select audio system",site_events:{bluetooth_select_audio:"true"}});return $bluetoothService.getAudios({seriesId:vehicleModel.seriesId,year:selectedYearValue},successAudios,failure)};scope.setYear=function(selectedYearValue){var img=scope.images.years[selectedYearValue];scope.images.modal.vehicle=null;scope.images.checkImage(img).then(function(result){scope.images.modal.vehicle=result?img:externalConstant.getValue(scope.images.defaults.vehicle)});scope.isYearSelected=selectedYearValue?!0:!1};scope.gotoSelectDevice=function(vehicleModel,selectedYearValue,audioId,noOfAudioSystems){void 0!==noOfAudioSystems&&1===noOfAudioSystems?scope.audioRadioboxlength=noOfAudioSystems:scope.audioRadioboxlength=0;scope.selectVehicle=!1;scope.selectAudio=!1;scope.selectDevice=!0;scope.selectedModel=vehicleModel;scope.selectedYear=selectedYearValue;scope.audioRadiobox=audioId;scope.manufacturers=[];scope.deviceDropdown=!0;scope.manufacturerSelected=!1;scope.optionSelected=!0;scope.optionSpan=!1;tealiumService.track({bluetooth_year:selectedYearValue,bluetooth_model:scope.selectedModel.name,bluetooth_audio:scope.audioSystemName,event_name:"select device",site_events:{bluetooth_select_device:"true"}});return $bluetoothService.getCarriers({seriesId:vehicleModel.seriesId,year:selectedYearValue,audioId:audioId},successCarriers,failure)};scope.updateManufacturer=function(vehicleModel,selectedYearValue,audioId,carrier){scope.manufacturers=[];scope.carrierSelected=!1;scope.optionSelected=!0;scope.optionSpan=!1;scope.manufacturerSelected=!1;scope.isDeviceSelected=!1;scope.deviceDropdown=!0;if(carrier){var img=carrier.image_uri;scope.images.modal.carrier=null;scope.images.checkImage(img).then(function(result){scope.images.modal.carrier=result?img:externalConstant.getValue(scope.images.defaults.carrier)});return $bluetoothService.getManufacturers({seriesId:vehicleModel.seriesId,year:selectedYearValue,audioId:audioId,carrierId:carrier.id},successManufacturers,failure)}};scope.updateDevices=function(vehicleModel,selectedYearValue,audioId,carrier,manufacturer){scope.devices=[];scope.manufacturerSelected=!1;scope.isDeviceSelected=!1;scope.optionSelected=!0;scope.optionSpan=!1;scope.deviceDropdown=!0;if(manufacturer){var img=manufacturer.image_uri;scope.images.modal.manufacturer=null;scope.images.checkImage(img).then(function(result){scope.images.modal.manufacturer=result?img:externalConstant.getValue(scope.images.defaults.manufacturer)});return $bluetoothService.getDevices({seriesId:vehicleModel.seriesId,year:selectedYearValue,audioId:audioId,carrierId:carrier.id,manufacturerId:manufacturer.id},successDevices,failure)}};scope.redirectToHub=function(vehicleModel,selectedYearValue,audioId,carrier,manufacturer,deviceJson){safeApply(scope,function(){bluetoothModel.close();$bluetoothService.getModels("getBTKiaModels",successVehicles,failure);scope.years=successYears;scope.selectVehicle=!0;scope.selectAudio=!1;scope.selectDevice=!1;scope.modelSelected=!1;scope.carrierSelected=!1;scope.manufacturerSelected=!1});$(".above-container").hide();scope.bluetoothSection=!1;scope.bluetoothLandingPage=!0;scope.manufacturerName=manufacturer;scope.deviceName=scope.modelDevice;scope.modelYear=selectedYearValue;scope.modelName=vehicleModel;scope.audioSystem=scope.audioSystemName;$("body,html").animate({scrollTop:0},800);tealiumService.track({bluetooth_year:selectedYearValue,bluetooth_model:vehicleModel.name,bluetooth_audio:scope.audioSystemName,bluetooth_carrier:carrier.name,bluetooth_manufacturer:manufacturer.name,bluetooth_device:scope.deviceName.name,site_events:{"bluetooth _complete":"true",virtual_page_load:"true"}});return $bluetoothService.getFeatures({seriesId:vehicleModel.seriesId,year:selectedYearValue,audioId:audioId,phoneId:scope.modelDevice.id},successFeatures,failure)};scope.backPage=function(noOfAudioSystems){scope.isDeviceSelected=!1;if(void 0===noOfAudioSystems||1!==noOfAudioSystems)return scope.audioSystemScreen(audioSystemLength);scope.selectVehicle=!0;scope.selectAudio=!1;scope.selectDevice=!1};scope.onChange=function(audioSystemValue,radioIndex,audioSystemName,imageUrl){scope.audioRadiobox=audioSystemValue;scope.content=window.contentURI;var img=imageUrl;scope.images.modal.audio=null;scope.images.checkImage(img).then(function(result){scope.images.modal.audio=result?img:externalConstant.getValue(scope.images.defaults.audio)});if(audioSystemName){$("#bluetooth-box .radio > span").removeClass("checked");$("#bluetooth-box .radio"+radioIndex+" > span").addClass("checked");scope.isAudioSelected=!0;scope.audioSystemName=audioSystemName}else{$("#bluetooth-box .radio"+radioIndex+" > span").removeClass("checked");$("#bluetooth-box .radio > span").removeClass("checked")}};scope.showDeviceDropdown=function(){scope.deviceDropdown?scope.deviceDropdown=!1:scope.deviceDropdown=!0};scope.selectDeviceOption=function(deviceName,device,index){scope.selectedDevice=deviceName;scope.deviceDropdown=!0;scope.optionSpan=!0;scope.optionSelected=!1;scope.modelDevice=device;if(deviceName){scope.isDeviceSelected=!0;$(".device-select .radio > span").removeClass("checked");$(".device-select .radio"+index+" > span").addClass("checked")}else{$(".device-select .radio"+index+" > span").removeClass("checked");$(".device-select .radio > span").removeClass("checked")}var img=device.thumbUrl;scope.images.modal.device=null;scope.images.checkImage(img).then(function(result){scope.images.modal.device=result?img:externalConstant.getValue(scope.images.defaults.device)})};scope.isMobile=function(){return Modernizr.ipod||Modernizr.iphone||Modernizr.ipad};scope.$on("closingLightbox",function(event,args){scope.carriers=[];scope.manufacturers=[];scope.devices=[];scope.audioLists=[];scope.optionSelected=!0;scope.optionSpan=!1;scope.selectVehicle=!0;scope.selectAudio=!1;scope.selectDevice=!1;scope.modelSelected=!1;scope.carrierSelected=!1;scope.manufacturerSelected=!1;scope.noAudioSystem=!1});scope.$on("kiaEvents.RESPONSIVE.ORIENTATION_CHANGE",function(event,args){});scope.getImageInfo=function(imageUrl){if(""!==imageUrl&&void 0!==imageUrl){var img=new Image;img.src=window.contentURI+imageUrl;img.onload=function(){var imageFormat=/(.png)$/i,result=imageFormat.test(img.src);if(result&&img.width>=800&&img.height>=600){scope.imageUrl=img.src;return!0}return!1}}};scope.$on("bluetooth.setFootnote",function(event,footnote){scope.currentBluetoothFootnote=footnote});scope.$on("openingLightbox",function(event,args,title){var modalTitle;if("footnotes"===args){if(null!==scope.referencesArray){scope.footnotesPage=!0;scope.selectVehicle=!1;scope.selectDevice=!1;scope.selectAudio=!1;scope.footnotes=scope.referencesArray;safeApply(scope,function(){modalTitle=title?title:localize.getLocalizedString("label.bluetooth.footnotes")});$(".bluetooth-box .lightbox-title").html(modalTitle)}}else{$bluetoothService.getModels("getBTKiaModels",successVehicles,failure);scope.years=[];scope.selectedYear="";scope.isYearSelected=!1;scope.isAudioSelected=!1;scope.isDeviceSelected=!1;scope.noAudioSystem=!1;scope.selectVehicle=!0;scope.selectAudio=!1;scope.selectDevice=!1;scope.footnotesPage=!1;scope.notTestedHeading=!0;safeApply(scope,function(){modalTitle=localize.getLocalizedString("label.bluetooth.setup")});$(".bluetooth-box .lightbox-title").html(modalTitle).append("<sup>&reg;</sup>")}$(".bluetooth-box").attr("title",modalTitle)})}}}]);angular.module("app").factory("bluetoothModel",["$log","$http","$rootScope","messageService","localize","$sce",function($log,$http,$rootScope,messageService,localize,$sce){var data={open:!1,content:"",title:"",reference:!1},global={active:!1,content:"",reference:!1,title:""},open=function(content,reference,title,modalName){if(data.open===!1||data.content!==content){data.reference=reference;reference?data.content=content:data.content=$sce.trustAsHtml(content);void 0!==title?data.title=$sce.trustAsHtml(title):data.title=localize.getLocalizedString("label.build.summary.bluetooth");data.open=!0}$rootScope.$broadcast("openingLightbox",modalName,title)},close=function(){data.open=!1},getURI=function(id){return""===id||null===id?"":window.baseURI+"/modules/bluetooth/"+id},testGlobal=function(url,success,failure){return $http.get(url,{}).success(function(data,getResponseHeaders){return angular.isFunction(success)?success(data):void 0}).error(failure)},hideGlobal=function(){global.active=!1},checkGlobal=function(data){var bActive=!1;if(data.length>0){var sData=data.replace(/(\r\n|\n|\r)/gm,"");sData=data.replace(/\s/gm,"");bActive=""!==sData}global.active=bActive},setGlobal=function(content,reference,title){void 0===reference&&(reference=!0);if(null!==content&&""!==content){global.reference=reference;var sContent=global.content;global.content=content;global.title=title;if(global.reference){var bUpdate=sContent!==content;if(bUpdate){global.active=!1;testGlobal(getURI(global.content),checkGlobal,hideGlobal)}}else global.active=!0}else global.active=!1;data.open===!1};return{data:data,open:open,close:close,global:global,setGlobal:setGlobal,getURI:getURI}}]);angular.module("app").directive("bluetoothLink",["$log","$rootScope","safeApply","bluetoothModel","kiaEvents","tealiumService",function($log,$rootScope,safeApply,bluetoothModel,kiaEvents,tealiumService){return{restrict:"A",replace:!1,scope:{bluetoothTitle:"@",bluetoothModalName:"@",bluetoothCode:"@"},controller:function($scope){$scope.global=bluetoothModel.global;$scope.$on("$routeChangeStart",function(next,current){bluetoothModel.data.open=!1;$("#bluetooth-box").removeClass("lightbox-open")})},link:function(scope,element,attrs){element.on("click",function(e){scope.bluetoothCode&&$rootScope.$broadcast("bluetooth.setFootnote",scope.bluetoothCode);safeApply(scope,function(){var sTitle=scope.bluetoothTitle?scope.bluetoothTitle:scope.global.title,modalName=scope.bluetoothModalName;bluetoothModel.open($(".bluetooth-content").html(),!0,sTitle,modalName);tealiumService.track({event_name:"select vehicle",site_events:{bluetooth_select_vehicle:"true"}})})})}}}]);angular.module("app").directive("categorySelected",["$log","kiaEvents","$bluetoothService","$compile",function($log,kiaEvents,$bluetoothService,$compile){return{restrict:"EA",replace:!1,scope:{device:"=",tablet:"=",categoryContainerId:"@"},link:function(scope,element,attrs){var successContent=function(data){$(".bluetooth-content").fadeOut();var contentHtml=$compile(data)(scope);$(".bluetooth-l3-content").html(contentHtml);$(".bluetooth-l3-content").find(".content-sidebar").html(" ");$(".bluetooth-l3-content .content-global-container").removeClass("sidebar-enabled");$(".bluetooth-l3-content").find(".content-sidebar").remove();$(".bluetooth-l3-content").fadeIn();$(".content-type-image img").responsiveImage({defaultImageVersion:"data-img-960",delayLoadingAttribute:"data-src"})},failure=function(data){};scope.categorySelected=!1;$(".bluetooth-content:not(:first-child)").hide();$(".bluetooth-l3-content").hide();$("#category-ul li:first-child").addClass("selected");$(".bluetooth-hub .inner").hide();$("#category-ul li .selected").removeClass("selected");$("#category-ul li .option").click(function(){$("#category-ul li.selected").removeClass("selected");$(this).parent().addClass("selected");$(".sub-category-ul li p").css("color","#888");scope.device&&scope.tablet||$(this).siblings(".inner").find(".sub-category-ul li").eq(0).find("p").css("color","#fff")});scope.showContent=function(url,navigationLinks){var innerNavFlag;$(".sub-category-ul li").click(function(){$(".sub-category-ul li p").css("color","#888");$(this).find("p").css("color","#fff")});var innerSidebar=$(element).find(".inner");if(navigationLinks.hasOwnProperty("Child")){innerNavFlag=!0;$(".bluetooth-hub .inner").hide();if("block"===innerSidebar.css("display"))innerSidebar.hide();else{$(".bluetooth-hub .inner").hide();innerSidebar.show()}}else innerNavFlag=!1;if(""!==url)$bluetoothService.getContent(url,successContent,failure);else{$(".bluetooth-hub .inner").hide();element.scope=scope;$(".bluetooth-l3-content").fadeOut();$(".bluetooth-content").fadeOut();$("#"+scope.categoryContainerId).fadeIn()}if(scope.device||scope.tablet||scope.categorySelected){scope.$emit(kiaEvents.FEATURES.SHOW_SUBCATEGORY,scope.categoryContainerId,element.find(".option p").text(),element,innerNavFlag);scope.categorySelected=!0;scope.currentCategoryLabel=scope.categoryLabel}}}}}]);angular.module("app").directive("bluetoothInteraction",["$log","kiaEvents","$location","$timeout","messageService",function($log,kiaEvents,$location,$timeout,messageService){return{restrict:"A",replace:!0,priority:1,link:function(scope,element,attrs){var currentDetailScope,firstTime=!0;scope.tablet=!1;scope.mobile=!1;scope.currentCategoryId=String(attrs.categoryId);scope.currentCategoryLabel=attrs.categoryLabel;scope.$on(kiaEvents.FEATURES.SHOW_SUBCATEGORY,function(event,id,label,listItem,innerList){scope.currentCategoryId=String(id);scope.currentCategoryLabel=label;if(currentDetailScope){currentDetailScope.closeDetail();currentDetailScope=null}if(scope.currentItemList){scope.currentItemList.removeClass("selected");scope.currentItemList.scope.categorySelected=!1}scope.currentItemList=listItem;listItem.addClass("selected");(scope.mobile||scope.tablet)&&scope.slideSidebar(innerList)});scope.mobile||scope.$emit(kiaEvents.FEATURES.SHOW_SUBCATEGORY,scope.currentCategoryId,scope.currentCategoryLabel,$("#category-item-"+scope.currentCategoryId));scope.lockBody=function(lock){lock?element.addClass("lock"):element.removeClass("lock")};scope.closeCurrentDesktopDetail=function(selectedDetailScope){if(null!=currentDetailScope){if(null===selectedDetailScope){currentDetailScope.closeDetail();currentDetailScope=null;return!1}if(currentDetailScope.$id!==selectedDetailScope.$id){currentDetailScope.closeDetail();currentDetailScope=selectedDetailScope}}else currentDetailScope=selectedDetailScope};scope.slideSidebar=function(open){if(open){var h=element.find(".features-categories ul").height();element.find(".features-categories").removeClass("close").addClass("open");if(scope.mobile||scope.tablet){$(".bluetooth-hub-header").show();element.height(h);scope.lockBody(!0)}else{$(".bluetooth-hub-header").show();element.css("height","100%");scope.lockBody(!1)}}else{element.find(".features-categories").removeClass("open").addClass("close");element.css("height","100%");$(".bluetooth-hub-header").hide()}};scope.onDeviceModeON=function(event){window.location.href.indexOf("en")>-1?$(".header-mobile-car-title").text("Customer Support"):window.location.href.indexOf("es")>-1&&$(".header-mobile-car-title").text("Atencin al cliente");scope.tablet=!0;if(firstTime){scope.slideSidebar(!0);firstTime=!1}else scope.slideSidebar(!1)};scope.onMobileDetailON=function(event){window.location.href.indexOf("en")>-1?$(".header-mobile-car-title").text("Customer Support"):window.location.href.indexOf("es")>-1&&$(".header-mobile-car-title").text("Atencin al cliente");scope.closeCurrentDesktopDetail(null);scope.mobile=!0;if(scope.showFilters){scope.showMobileFilters=!0;scope.showFilters=!1}else scope.showMobileFilters=!1};scope.onMobileDetailOFF=function(event){scope.mobile=!1;scope.mobileDetail=!1;if(scope.showMobileFilters){scope.showMobileFilters=!1;scope.showFilters=!0}else scope.showFilters=!1};scope.onDeviceModeOFF=function(event){scope.tablet=!1;scope.mobile=!1;scope.mobile||scope.slideSidebar(!0);if(scope.showMobileFilters){scope.showMobileFilters=!1;scope.showFilters=!0}};scope.$on(kiaEvents.RESPONSIVE.MATCH1024,scope.onDeviceModeON);scope.$on(kiaEvents.RESPONSIVE.UNMATCH1024,scope.onDeviceModeOFF);scope.$on(kiaEvents.RESPONSIVE.MATCH768,scope.onMobileDetailON);scope.$on(kiaEvents.RESPONSIVE.UNMATCH768,scope.onMobileDetailOFF);scope.$on(kiaEvents.RESPONSIVE.MATCH320,scope.onMobileDetailON)}}}]);angular.module("app").factory("$bluetoothService",["$log","$http",function($log,$http){var url,get,urlComplete,defaultRequestParams,getYears,getModels,getContent,getAudios,getCarriers,getManufacturers,getDevices,getFeatures,dataLang,modelUrl=window.baseURI+"/data/bluetooth/";window.location.href.indexOf("en")>-1?dataLang="en":window.location.href.indexOf("es")>-1&&(dataLang="es");url={ModelYears:window.baseURI+"/data/bluetooth/getBTModelYears/{seriesId}",HeadUnits:window.baseURI+"/data/bluetooth/getBTHeadUnits/{seriesId}/{year}",Carriers:window.baseURI+"/data/bluetooth/getBTCarriers/{seriesId}/{year}/{audioId}",Manufacturer:window.baseURI+"/data/bluetooth/getBTManufacturer/{seriesId}/{year}/{audioId}/{carrierId}",Phones:window.baseURI+"/data/bluetooth/getBTPhones/{seriesId}/{year}/{audioId}/{carrierId}/{manufacturerId}",Features:window.baseURI+"/data/bluetooth/getBTSinglePhone/{seriesId}/{year}/{audioId}/{phoneId}?l2NavigationPath=/templatedata/global/l2_navigation/data/"+dataLang+"/l3-navigation_bluetooth&url=faq",Content:window.baseURI+"/modules/content?url={contentUrl}"};defaultRequestParams={};get=function(key,values,parameters,success,failure){var requestParams=angular.extend({},defaultRequestParams,parameters),sUrl=url[key].slice(0);for(var objKey in values)sUrl=sUrl.replace("{"+objKey+"}",values[objKey]);return $http.get(sUrl,{params:requestParams}).success(function(data,getResponseHeaders){return angular.isFunction(success)?success(data):void 0}).error(failure)};getModels=function(param,success,failure){urlComplete=modelUrl+param;return $http.get(urlComplete,{}).success(function(data,getResponseHeaders){return angular.isFunction(success)?success(data):void 0}).error(failure)};getContent=function(url,success,failure){var values={contentUrl:url},parameters={};return get("Content",values,parameters,success,failure)};getYears=function(options,success,failure){var values={name:options.name,seriesId:options.seriesId},parameters={};return get("ModelYears",values,parameters,success,failure)};getAudios=function(options,success,failure){var values={seriesId:options.seriesId,year:options.year},parameters={};if(options.name){parameters.seriesId=options.seriesId;parameters.year=options.year}return get("HeadUnits",values,parameters,success,failure)};getCarriers=function(options,success,failure){var values={seriesId:options.seriesId,year:options.year,audioId:options.audioId},parameters={};if(options.name){parameters.seriesId=options.seriesId;parameters.year=options.year;parameters.audioId=options.audioId}return get("Carriers",values,parameters,success,failure)};getManufacturers=function(options,success,failure){var values={seriesId:options.seriesId,year:options.year,audioId:options.audioId,carrierId:options.carrierId},parameters={};if(options.name){parameters.seriesId=options.seriesId;parameters.year=options.year;parameters.audioId=options.audioId;parameters.carrierId=options.carrierId}return get("Manufacturer",values,parameters,success,failure)};getDevices=function(options,success,failure){var values={seriesId:options.seriesId,year:options.year,audioId:options.audioId,carrierId:options.carrierId,manufacturerId:options.manufacturerId},parameters={};if(options.name){parameters.seriesId=options.seriesId;parameters.year=options.year;parameters.audioId=options.audioId;parameters.carrierId=options.carrierId;parameters.manufacturerId=options.manufacturerId}return get("Phones",values,parameters,success,failure)};getFeatures=function(options,success,failure){var values={seriesId:options.seriesId,year:options.year,audioId:options.audioId,phoneId:options.phoneId},parameters={};if(options.name){parameters.seriesId=options.seriesId;parameters.year=options.year;parameters.audioId=options.audioId;parameters.phoneId=options.phoneId}return get("Features",values,parameters,success,failure)};return{get:get,getYears:getYears,getModels:getModels,getContent:getContent,getAudios:getAudios,getCarriers:getCarriers,getManufacturers:getManufacturers,getDevices:getDevices,getFeatures:getFeatures}}]);angular.module("app").controller("bluetoothController",["$log","$scope","bluetoothModel","$bluetoothService",function($log,$scope,bluetoothModel,$bluetoothService){$scope.pageTitle="Bluetooth Wizard";$scope["static"]=window.staticURI;$scope.openFootnotes=function(){}}]);angular.module("app").directive("search",["$log","safeApply","$searchService",function($log,safeApply,$searchService){return{restrict:"A",scope:{},link:function(scope,element,attrs){},templateUrl:window.staticURI+"/views/directives/keySearchResult.html"}}]);angular.module("app").factory("$searchService",["$log","$http","limitToFilter",function($log,$http,limitToFilter){var url,get,getSearchResult,getAutoComplete,predictiveArray={};get=function(values,success,failure){url=window.baseURI+"/data/search/{keyword}&start={pagenum}&rows={rows}";for(var objKey in values)url=url.replace("{"+objKey+"}",values[objKey]);return $http.get(url,{}).success(function(data,getResponseHeaders){return angular.isFunction(success)?success(data):void 0}).error(failure)};getSearchResult=function(options,success,failure){options.pagenum||(options.pagenum=0);options.pagenum>0&&(options.pagenum=10*options.pagenum);var values={keyword:options.keyword,pagenum:options.pagenum,rows:options.row};return get(values,success,failure)};getAutoComplete=function(keyword){return $http.get(window.baseURI+"/data/select/"+keyword).then(function(response){if(!response.data.error){predictiveArray=response.data.searchResults.facet_counts.facet_fields.content;for(var i=predictiveArray.length-1;i>=0;i--)i%2!==0&&predictiveArray.splice(i,1);return limitToFilter(predictiveArray,4)}})};return{get:get,getSearchResult:getSearchResult,getAutoComplete:getAutoComplete}}]);angular.module("app").controller("searchController",["$log","$scope","kiaEvents","$location","$searchService","tealiumService",function($log,$scope,kiaEvents,$location,$searchService,tealiumService){$scope.pageTitle="keySearch";$scope.baseUrl=window.baseURI;$scope.pagination=!0;var recordPerPage=10;$scope.pageArray=[];$scope.searchUrl=$location.href;$scope.parameters=$scope.predictiveterm="";$scope.$on("$viewContentLoaded",function(){if(void 0!==$location.search().q){$scope.parameters=$location.search().q;$scope.predictiveterm=$scope.keyword=$scope.parameters.replace("+"," ");$scope.highlightKeyword=$scope.predictiveterm.split(" ");return $scope.goToPage()}$scope.predictiveterm=""});$scope.goToPage=function(pagenum,action){pagenum||(pagenum=$scope.pageNumber);if(!$("#page-"+pagenum).hasClass("active")||action){if("prev"===action){pagenum=$scope.prev;$scope.updateRoute(pagenum)}if("next"===action){pagenum=$scope.next;$scope.updateRoute(pagenum)}null!==pagenum&&$scope.updateRoute(pagenum);return $searchService.getSearchResult({keyword:$scope.parameters,pagenum:pagenum-1,row:recordPerPage},success,failure)}};$scope.trackSearchResultClick=function(searchResult,index){if($scope.parameters&&$scope.searchResult&&$scope.pageNumber){var clickPosition=($scope.pageNumber-1)*recordPerPage+index+1;tealiumService.track({onsite_search_term:$scope.parameters,onsite_search_num_of_results:$scope.searchResult.numFound.toString(),onsite_result_click_position:clickPosition.toString(),search_type:"internal",event_name:"select search result",site_events:{select_onsite_search_result:"true"}})}};$scope.selectSearchterm=function(matchTitle){if(matchTitle){$scope.$emit(kiaEvents.LOADER.SHOW);$scope.showMatch=1;$scope.predictiveterm=matchTitle;$scope.parameters=matchTitle.replace(" ","+").replace(/[`~!@#$%^&()_|\-=?;:'",.<>\{\}\[\]\\\/]/gi,"")}else $scope.predictiveterm&&($scope.parameters=$scope.predictiveterm.replace(" ","+").replace(/[`~!@#$%^&()_|\-=?;:'",.<>\{\}\[\]\\\/]/gi,""));if($scope.parameters){$scope.highlightKeyword=$scope.predictiveterm.split(" ");$searchService.getSearchResult({keyword:$scope.parameters,pagenum:0,row:recordPerPage},success,failure);$scope.updateRoute(1)}};$scope.setDefaultPage=function(){$location.search().p?$scope.pageNumber=+$location.search().p:$scope.pageNumber=1;$scope.prev=$scope.pageNumber-1;$scope.next=$scope.pageNumber+1;if(1===$scope.pageNumber){$scope.prevIsDisabled=!0;$scope.nextIsDisabled=!1}else if($scope.pageNumber===$scope.noOfPages){$scope.prevIsDisabled=!1;$scope.nextIsDisabled=!0}else{$scope.prevIsDisabled=!1;$scope.nextIsDisabled=!1}};var success=function(data){$scope.showMatch=1;$scope.searchResult=data.searchResults.response;$scope.keyword=$scope.parameters.replace("+"," ");$scope.noOfPages=data.searchResults.response.numFound/recordPerPage;data.searchResults.response.numFound%recordPerPage>0&&($scope.noOfPages=parseInt($scope.noOfPages,10)+1);$scope.range($scope.noOfPages);$scope.setDefaultPage();if($scope.searchResult.numFound>0){$scope.isSearchResult=!0;$scope.noOfPages>1?$scope.pagination=!1:$scope.pagination=!0;1===parseInt($scope.searchResult.numFound,10)?$scope.results="Result":$scope.results="Results";$scope.$emit(kiaEvents.ANALYTICS.SEARCH_RESULTS_CONFIRMATION,$scope.parameters,$scope.searchResult.numFound);tealiumService.track({onsite_search_term:$scope.parameters,onsite_search_num_of_results:$scope.searchResult.numFound.toString(),search_type:"internal",site_events:{successful_onsite_search:"true",virtual_page_load:"true"}})}else{$scope.isSearchResult=!1;$scope.$emit(kiaEvents.ANALYTICS.SEARCH_RESULTS_CONFIRMATION,$scope.parameters,$scope.searchResult.numFound);tealiumService.track({onsite_search_term:$scope.parameters,onsite_search_num_of_results:"0",search_type:"internal",site_events:{unsuccessful_onsite_search:"true",virtual_page_load:"true"}})}$scope.$emit(kiaEvents.LOADER.HIDE)};$scope.range=function(pageNumber){for(var range=[],i=1;pageNumber>=i;i++)range.push(i);$scope.pageArray=range};var failure=function(error){};$scope.updateRoute=function(pagenum){var searchParams={q:$scope.parameters,r:recordPerPage};pagenum&&(searchParams.p=pagenum);$location.search(searchParams)};$scope.matchKeyword=function(keyword){if(keyword){if(keyword.length>2){$scope.showMatch=0;$scope.predictiveTerms=$searchService.getAutoComplete(keyword)}}else $scope.predictiveTerms=null};$scope.clearSearch=function(){$scope.parameters=$scope.predictiveterm="";$location.url($location.path());$scope.isSearchResult=null};$scope.$on(kiaEvents.RESPONSIVE.MATCH1024,function(event){$(".main-wrapper").addClass("search-container");window.location.href.indexOf("en")>-1?$(".header-mobile-car-title").text("Search Results"):window.location.href.indexOf("es")>-1&&$(".header-mobile-car-title").text("Search Results")})}]);angular.module("app").filter("unsafe",function($sce){var trusted={};return function(val){return trusted[val]||(trusted[val]=$sce.trustAsHtml(val))}});angular.module("ui.filters").filter("highlightmore",function(){return function(text,search,caseSensitive){if(search){for(var returnText=text.toString(),i=search.length-1;i>=0;i--){search[i]=search[i].toString().replace(/[`~!@#*$%^&()_|\-=?;:'",.<>\{\}\[\]\\\/]/gi,"");search[i].length>2&&(text=caseSensitive?returnText.split(search[i]).join('<span class="ui-match">'+search[i]+"</span>"):returnText.replace(new RegExp(search[i],"gi"),'<span class="ui-match">$&</span>'));returnText=text}return returnText}return text}});angular.module("app").directive("analytics",["$log","safeApply","kiaEvents","messageService","analyticsService","$location",function($log,safeApply,kiaEvents,messageService,analyticsService,$location){return{restrict:"A",controller:function($scope){},link:function(scope,element,attrs){$log.info(":: Analytics Directive ::");scope.$on("$locationChangeSuccess",function(event,next,current){analyticsService.trackAnalyticsCall("runPageLoadTracking",next)});messageService.subscribe(kiaEvents.ANALYTICS.DEALER_LOCATOR_CONFIRMATION,function(event,zipcode){analyticsService.trackAnalyticsCall("trackDealerLocatorSuccess",zipcode)});messageService.subscribe(kiaEvents.ANALYTICS.EXPERIENCE_PAGE_CONFIRMATION,function(event){analyticsService.trackAnalyticsCall("trackExperienceSuccess")});messageService.subscribe(kiaEvents.ANALYTICS.OFFERS_CONFIRMATION,function(event){analyticsService.trackAnalyticsCall("trackOffersSuccess")});messageService.subscribe(kiaEvents.COMPARE.REQUEST_CHANGE_TRIM,function(event,currentTrim){analyticsService.trackAnalyticsCall("trackCompareRequestChangeTrim",currentTrim.trimName,currentTrim.trimId)});messageService.subscribe(kiaEvents.COMPARE.ADD_COMPETITOR,function(event){analyticsService.trackAnalyticsCall("trackCompareAddCompetitor")});messageService.subscribe(kiaEvents.ANALYTICS.COMPARE_REQUEST_ADD_COMPETITOR,function(event,vehicle){analyticsService.trackAnalyticsCall("trackCompareRequestAddCompetitor",vehicle.makeName,vehicle.modelName,vehicle.year,vehicle.trimName)});messageService.subscribe(kiaEvents.FEATURES.SHOW_SUBCATEGORY,function(event,id,label,listItem){analyticsService.trackAnalyticsCall("trackFeaturesShowSubcategory",label)});messageService.subscribe(kiaEvents.ANALYTICS.DEALER_FILTER_ACTION,function(event,filterType,value){analyticsService.trackAnalyticsCall("trackDealerFilterAction",value)});messageService.subscribe(kiaEvents.FEATURES.FILTER_TRIM,function(event,trim,visible,evadeCount){
analyticsService.trackAnalyticsCall("trackFeaturesFilterTrim",trim,visible,evadeCount)});messageService.subscribe(kiaEvents.ANALYTICS.OFFERS_FILTER,function(event,criteria){analyticsService.trackAnalyticsCall("trackOffersFilter",criteria)});messageService.subscribe(kiaEvents.GMAP.OPEN_INFOBOX,function(event,dealer){analyticsService.trackAnalyticsCall("trackDealerSelected",dealer.code)});messageService.subscribe(kiaEvents.ANALYTICS.BROCHURE_SUCCESS_CONFIRMATION,function(event){analyticsService.trackAnalyticsCall("trackBrochureConfirmation")});messageService.subscribe(kiaEvents.ANALYTICS.QUICKQUOTE_SUCCESS_CONFIRMATION,function(event,dealers){analyticsService.trackAnalyticsCall("trackQuickQuoteConfirmation",dealers)});messageService.subscribe(kiaEvents.ANALYTICS.TRADEINAPPRAISAL_CONFIRMATION,function(event){analyticsService.trackAnalyticsCall("trackTradeInAppraisalConfirmation")});messageService.subscribe(kiaEvents.ANALYTICS.PAYMENT_CALCULATOR_CONFIRMATION,function(event,downPayment){analyticsService.trackAnalyticsCall("trackPaymentCalculator",downPayment.down)});messageService.subscribe(kiaEvents.ANALYTICS.GLOBAL_DEALER_SELECTED,function(event,dealers){analyticsService.trackAnalyticsCall("trackGlobalDealerSelected",dealers.dealer)});messageService.subscribe(kiaEvents.GLOBAL.DEALER_UPDATE,function(event,dealers){analyticsService.trackAnalyticsCall("trackGlobalDealerUpdate",dealers.dealer.code,dealers.dealer.selected)});messageService.subscribe(kiaEvents.ANALYTICS.TRIM_SELECTED,function(event,trimName){analyticsService.trackAnalyticsCall("trackTrimSelected",trimName)});messageService.subscribe(kiaEvents.ANALYTICS.EXPERIENCE_SWIPE,function(event,storyName,chapterName){analyticsService.trackAnalyticsCall("trackExperienceSwipe",storyName,chapterName)});messageService.subscribe(kiaEvents.ANALYTICS.ZIPCODE_VALID,function(event,zipcode){analyticsService.trackAnalyticsCall("trackZipcodeValid",zipcode)});messageService.subscribe(kiaEvents.ANALYTICS.ZIPCODE_SUBMIT,function(event){analyticsService.trackAnalyticsCall("trackZipcodeSubmit")});messageService.subscribe(kiaEvents.ANALYTICS.ZIPCODE_ERROR,function(event,message,id){analyticsService.trackAnalyticsCall("trackZipcodeError",message)});messageService.subscribe(kiaEvents.ZIPCODE.NOT_VALID,function(event,errorMessage,id){analyticsService.trackAnalyticsCall("trackZipcodeNotValid",errorMessage)});messageService.subscribe(kiaEvents.ANALYTICS.BNP_SUCCESS_CONFIRMATION,function(event,price){analyticsService.trackAnalyticsCall("trackBnPSuccess",price.msrp)});messageService.subscribe(kiaEvents.ANALYTICS.BNP_COLORS_CONFIRMATION,function(event,exteriorColor,interiorColor){exteriorColor=exteriorColor||"";interiorColor=interiorColor||"";analyticsService.trackAnalyticsCall("trackBnPColors",exteriorColor.name,exteriorColor.id,interiorColor.name,interiorColor.fabric.name,interiorColor.id)});messageService.subscribe(kiaEvents.ANALYTICS.BNP_PACKAGES_CONFIRMATION,function(event,packageList){analyticsService.trackAnalyticsCall("trackBnPPackages",packageList)});messageService.subscribe(kiaEvents.ANALYTICS.BNP_OPTIONS_CONFIRMATION,function(event,optionList){analyticsService.trackAnalyticsCall("trackBnPOptions",optionList)});messageService.subscribe(kiaEvents.ANALYTICS.BNP_TRIM_CONFIRMATION,function(event,trimSelected){analyticsService.trackAnalyticsCall("trackBnPTrimConfirmation",trimSelected)});messageService.subscribe(kiaEvents.ANALYTICS.BNP_COMPARE_VEHICLE,function(event){analyticsService.trackAnalyticsCall("trackBnPCompareVehicle")});messageService.subscribe(kiaEvents.ANALYTICS.BROCHURE_DOWNLOAD,function(event){analyticsService.trackAnalyticsCall("trackBrochureDownload")});messageService.subscribe(kiaEvents.ANALYTICS.DL_GET_DIRECTIONS,function(event,dealer){analyticsService.trackAnalyticsCall("trackDealerLocatorGetDirection",dealer.code)});messageService.subscribe(kiaEvents.ANALYTICS.DL_DEALER_EXIT,function(event,dealer){analyticsService.trackAnalyticsCall("trackDealerLocatorDealerExit",dealer.code)});messageService.subscribe(kiaEvents.ANALYTICS.EXPERIENCE_SCROLL,function(event,storyName,chapterName){analyticsService.trackAnalyticsCall("trackExperienceScroll",storyName,chapterName)});messageService.subscribe(kiaEvents.ANALYTICS.EXPERIENCE_USE_NAV,function(event,storyName){analyticsService.trackAnalyticsCall("trackExperienceUseNav",storyName)});messageService.subscribe(kiaEvents.ANALYTICS.INVENTORY_SELECT_MODEL,function(event){analyticsService.trackAnalyticsCall("trackInventorySelectModel")});messageService.subscribe(kiaEvents.ANALYTICS.INVENTORY_SELECT_VEHICLE,function(event){analyticsService.trackAnalyticsCall("trackInventorySelectVehicle")});messageService.subscribe(kiaEvents.ANALYTICS.OFFERS_SELECT,function(event,offer){analyticsService.trackAnalyticsCall("trackOfferSelect",offer)});messageService.subscribe(kiaEvents.ANALYTICS.QUICKQUOTE_SELECT_DEALER,function(event,dealersSelected){analyticsService.trackAnalyticsCall("trackQuickQuoteSelectDealer",dealersSelected)});messageService.subscribe(kiaEvents.ANALYTICS.QUICKQUOTE_CONTACT_INFO,function(event,contactPreference,contactId){analyticsService.trackAnalyticsCall("trackQuickQuoteContactInfo",contactPreference,contactId)});messageService.subscribe(kiaEvents.ANALYTICS.TESTDRIVE_SUCCESS,function(event,dealerSelected){analyticsService.trackAnalyticsCall("trackTestDriveSuccess",dealerSelected)});messageService.subscribe(kiaEvents.ANALYTICS.UPDATES_COMPLETE,function(event){analyticsService.trackAnalyticsCall("trackUpdatesComplete")});messageService.subscribe(kiaEvents.ANALYTICS.ERROR_ERROR404,function(event){analyticsService.trackAnalyticsCall("trackError404")});messageService.subscribe(kiaEvents.ANALYTICS.ERROR_GENERIC,function(event){analyticsService.trackAnalyticsCall("trackErrorGeneric")});messageService.subscribe(kiaEvents.ANALYTICS.ERROR_ERROR500,function(event){analyticsService.trackAnalyticsCall("trackError500")});messageService.subscribe(kiaEvents.ANALYTICS.BNP_GET_LINK,function(event){analyticsService.trackAnalyticsCall("trackBnPGetLink")});messageService.subscribe(kiaEvents.ANALYTICS.BNP_PRINT_SUMMARY,function(event){analyticsService.trackAnalyticsCall("trackBnPPrintSummary")});messageService.subscribe(kiaEvents.ANALYTICS.BNP_VIEW_INTERIOR,function(event){analyticsService.trackAnalyticsCall("trackBnPViewInterior")});messageService.subscribe(kiaEvents.ANALYTICS.TESTDRIVE_CONTACT_INFO,function(event,contactPreference,contactId){analyticsService.trackAnalyticsCall("trackTestDriveContactInfo",contactPreference,contactId)});messageService.subscribe(kiaEvents.ANALYTICS.TESTDRIVE_SELECT_DEALER,function(event,dealersSelected){analyticsService.trackAnalyticsCall("trackTestDriveSelectDealer",dealersSelected)});messageService.subscribe(kiaEvents.ANALYTICS.DL_DEALER_CHAT,function(event,dealerCode){analyticsService.trackAnalyticsCall("trackDealerLocatorDealerChat",dealerCode)});messageService.subscribe(kiaEvents.ANALYTICS.SEARCH_RESULTS_CONFIRMATION,function(event,keyword,NumberResults){analyticsService.trackAnalyticsCall("trackSearchResults",keyword,NumberResults)});messageService.subscribe(kiaEvents.ANALYTICS.BLUETOOTH_GET_STARTED,function(event){analyticsService.trackAnalyticsCall("trackBluetoothGetStarted")});messageService.subscribe(kiaEvents.ANALYTICS.BLUETOOTH_SELECT_VEHICLE,function(event,selectedModel,selectedYear){analyticsService.trackAnalyticsCall("trackBluetoothSelectVehicle",selectedModel,selectedYear)});messageService.subscribe(kiaEvents.ANALYTICS.BLUETOOTH_SELECT_AUDIO_SYSTEM,function(event,selectedAudio){analyticsService.trackAnalyticsCall("trackBluetoothSelectAudio",selectedAudio)});messageService.subscribe(kiaEvents.ANALYTICS.BLUETOOTH_SELECT_DEVICE,function(event,selectedCarrier,selectedManufacturer,selectedDevice){analyticsService.trackAnalyticsCall("trackBluetoothSelectDevice",selectedCarrier,selectedManufacturer,selectedDevice)});messageService.subscribe(kiaEvents.ANALYTICS.SAFETY_RECALL_SEARCH,function(event){analyticsService.trackAnalyticsCall("Own_safetyRecallSearch")});messageService.subscribe(kiaEvents.ANALYTICS.HOME_ANNOUNCEMENT,function(event,title,url){})}}}]);angular.module("app").factory("analyticsService",["$log","$http","$location","kiaEvents","messageService",function($log,$http,$location,kiaEvents,messageService){var trackAnalyticsCall=function(functionName,param1,param2,param3,param4,param5){param1=param1||"";param2=param2||"";param3=param3||"";param4=param4||"";param5=param5||"";if(!window.kiaAnalytics||!window.kiaAnalytics[functionName]){setTimeout(function(){if(!window.kiaAnalytics||!window.kiaAnalytics[functionName])return!1;window.kiaAnalytics[functionName](param1,param2,param3,param4,param5)},5e3);return!1}window.kiaAnalytics[functionName](param1,param2,param3,param4,param5)};return{trackAnalyticsCall:trackAnalyticsCall}}]);angular.module("app").directive("loader",["$log","$rootScope","$timeout","kiaEvents","timeoutService",function($log,$rootScope,$timeout,kiaEvents,timeoutService){return{restrict:"A",replace:!0,templateUrl:window.staticURI+"/views/loader.html",link:function(scope,element,attributes){scope["static"]=window.staticURI;scope.showLoader=!1;$rootScope.$on(kiaEvents.LOADER.SHOW,function(){scope.showLoader=!0});$rootScope.$on(kiaEvents.LOADER.HIDE,function(){$timeout(function(){scope.showLoader=!1},1e3)})}}}]);angular.module("app").directive("navSecondary",["$log","$compile","$http","kiaEvents","$templateCache","$rootScope","kioskService","$location",function($log,$compile,$http,kiaEvents,$templateCache,$rootScope,kioskService,$location){return{restrict:"A",replace:!0,compile:function(tElement,tAttrs){return function(scope,element,attrs){scope.hideForKiosk=kioskService.kioskMode;scope.hideForDealer="dealer"===kioskService.kioskLocation?!0:!1;var sPath=$location.path();0===sPath.indexOf("/")&&(sPath=sPath.substr(1));var templateLoader,templateUrl=window.baseURI+"/modules/navigation/secondary?type="+tAttrs.type+"&selected="+tAttrs.selected+"&series="+attrs.series+"&year="+attrs.year+"&path="+sPath;templateLoader=$http.get(templateUrl,{cache:$templateCache}).success(function(html){element.html(html);$(".header-bg").addClass("no-border");element.find(".nav-secondary li.selected a").bind("click",function(event){event.preventDefault();return!1});$rootScope.$broadcast("kia.nav.update.selected",element.find(".nav-secondary").attr("data-navigation-id"))});templateLoader.then(function(templateText){$compile(element.children())(scope)});scope.$on("$destroy",function(){$(".header-bg").removeClass("no-border")});scope.linkShoppingTools=function(){var inter;inter=setInterval(function(){if(!scope.showLoader){clearInterval(inter);setTimeout(function(){$rootScope.$broadcast("kia.nav.expandShoppingToolsSide")},750)}},500)}}}}}]);angular.module("app").directive("navSecondaryContent",["$log","$compile","$http","kiaEvents","$templateCache","$rootScope","$routeParams",function($log,$compile,$http,kiaEvents,$templateCache,$rootScope,$routeParams){return{restrict:"A",replace:!0,compile:function(tElement,tAttrs){return function(scope,element,attrs){var templateLoader,templateUrl=window.baseURI+"/modules/navigation/l2?url="+tAttrs.url+"&l2NavigationPath="+tAttrs.path;$routeParams.series&&(templateUrl+="&series="+$routeParams.series);$routeParams.year&&(templateUrl+="&year="+$routeParams.year);templateLoader=$http.get(templateUrl,{cache:$templateCache}).success(function(html){$(".header-bg").addClass("no-border");tElement.html(html);tElement.find(".nav-secondary li.selected a").bind("click",function(event){event.preventDefault();return!1});$rootScope.$broadcast("kia.nav.update.selected",element.find(".nav-secondary").attr("data-navigation-id"))});scope.$on("$destroy",function(){$(".header-bg").removeClass("no-border")});templateLoader.then(function(templateText){$compile(element.children())(scope)})}}}}]);angular.module("app").directive("navOrphan",["$log","kiaEvents","$rootScope",function($log,kiaEvents,$rootScope){return{restrict:"A",replace:!0,scope:{idParent:"@"},link:function(scope,element,attrs){$rootScope.$broadcast("kia.nav.update.selected",scope.idParent)}}}]);angular.module("app").directive("footerSecondary",["$log","$compile","$http","kiaEvents","$templateCache","$rootScope","$location",function($log,$compile,$http,kiaEvents,$templateCache,$rootScope,$location){return{restrict:"A",replace:!0,compile:function(tElement,tAttrs){return function(scope,element,attrs){var sPath=$location.path();0===sPath.indexOf("/")&&(sPath=sPath.substr(1));var templateLoader,templateUrl=window.baseURI+"/modules/navigation/secondary?type="+tAttrs.type+"&selected="+tAttrs.selected+"&series="+attrs.series+"&year="+attrs.year+"&path="+sPath;scope.expanded=!1;templateLoader=$http.get(templateUrl,{cache:$templateCache}).success(function(html){element.html(html);element.find(".nav-secondary-toggle").on("click",function(e){e.preventDefault();scope.expanded=!scope.expanded;scope.$apply()})});templateLoader.then(function(templateText){$compile(element.children())(scope)})}}}}]);angular.module("app").directive("ngController",["$log","$rootScope",function($log,$rootScope){var link;link=function(scope,element,attrs,controller){return $rootScope.$on(""+attrs.ngController+"$routeChangeSuccess",function(event,currentRoute,priorRoute){return scope.onRouteChange?scope.onRouteChange(currentRoute.params):void 0})};return{link:link,restrict:"A"}}]);angular.module("app").directive("uiScrollfixGhost",["$window","$log","messageService","kiaEvents",function($window,$log,messageService,kiaEvents){"use strict";return{link:function(scope,elm,attrs){var top=elm.offset().top;attrs.uiScrollfixGhost?"-"===attrs.uiScrollfixGhost.charAt(0)?attrs.uiScrollfixGhost=top-attrs.uiScrollfixGhost.substr(1):"+"===attrs.uiScrollfixGhost.charAt(0)&&(attrs.uiScrollfixGhost=top+parseFloat(attrs.uiScrollfixGhost.substr(1))):attrs.uiScrollfixGhost=top;angular.element($window).on("scroll.ui-scrollfix",function(){var minWidthValue=$(elm).attr("ui-scrollfix-ghost-minwidth");if(minWidthValue&&$(window).width()<=minWidthValue)return!1;var minHeightValue=$(elm).attr("ui-scrollfix-ghost-minheight");if(minHeightValue&&$(window).height()<=minHeightValue)return!1;var offset;if(angular.isDefined($window.pageYOffset))offset=$window.pageYOffset;else{var iebody=document.compatMode&&"BackCompat"!==document.compatMode?document.documentElement:document.body;offset=iebody.scrollTop}if(attrs.uiScrollfixGhostMinWidth&&$($window).width()<attrs.uiScrollfixGhostMinWidth)return!0;if($(elm).hasClass("ui-scrollfix-nowrap")){var innerElm=$(elm).children();if(!innerElm.hasClass("ui-scrollfix")&&offset>attrs.uiScrollfixGhost){elm.addClass("ui-scrollfix-ghost");elm.css("height",$(innerElm).outerHeight());innerElm.addClass("ui-scrollfix");messageService.publish(kiaEvents.GLOBAL.GHOST_NAV.ON,{})}else if(innerElm.hasClass("ui-scrollfix")&&offset<attrs.uiScrollfixGhost){innerElm.removeClass("ui-scrollfix");elm.removeClass("ui-scrollfix-ghost");elm.css("height","");messageService.publish(kiaEvents.GLOBAL.GHOST_NAV.OFF,{})}}else if(!elm.hasClass("ui-scrollfix")&&offset>attrs.uiScrollfixGhost){var wrapper=$('<div class="ui-scrollfix-ghost" />');$(elm).is(":visible")&&wrapper.css("height",$(elm).outerHeight());$(elm.addClass("ui-scrollfix")).wrap(wrapper);messageService.publish(kiaEvents.GLOBAL.GHOST_NAV.ON,{})}else if(elm.hasClass("ui-scrollfix")&&offset<attrs.uiScrollfixGhost){$(elm.removeClass("ui-scrollfix")).unwrap();messageService.publish(kiaEvents.GLOBAL.GHOST_NAV.OFF,{})}})}}}]);angular.module("app").directive("uiScrollToFit",["$log","$swipe","$window","kiaEvents",function($log,$swipe,$window,kiaEvents){"use strict";return{link:function(scope,elm,attrs){function setTotalWidth(){totalWidth=10;$(elm).find("li").each(function(i,item){totalWidth+=$(item).hasClass("logo-holder")?$(item).find(".logo-secondary").outerWidth()+$(item).find("div").outerWidth(!0):$(item).outerWidth()});$(elm).width(totalWidth);difference=wrapper.width()-totalWidth;if(difference>0){wrapper.removeClass("ui-scroll-to-fit-is-scrolling");hideTriggerButton()}else if(!wrapper.hasClass("ui-scroll-to-fit-is-scrolling")){wrapper.addClass("ui-scroll-to-fit-is-scrolling");updatePos(isSmallScreen()?triggerLeftWidth-spacingConstant:0);showTriggerButton()}}function showTriggerButton(){triggerRight.show();triggerLeft.show()}function hideTriggerButton(){triggerRight.hide();triggerLeft.hide()}function updatePos(newTargetPos){if(updating)return!1;updating=!0;null!==newTargetPos&&(targetPos=newTargetPos);$(elm).animate({left:targetPos+"px"},{complete:function(){updating=!1}})}function isSmallScreen(){return Modernizr.mq("only screen and (max-width: 767px)")}function scrollToSelectedItem(){var selectedItem=$(elm).find("li.selected");if(0===selectedItem.size())return!1;var rightEdge=wrapper.width(),itemRight=Math.floor(selectedItem.offset().left)+Math.floor(selectedItem.outerWidth());isSmallScreen()&&$(selectedItem).is("li:first")?updatePos(triggerLeftWidth-spacingConstant):isSmallScreen()&&rightEdge<itemRight+selectedItem.width()?updatePos(rightEdge-(triggerRightWidth+itemRight)):itemRight>rightEdge&&updatePos(rightEdge-itemRight)}$log.info("uiScrollToFit");$log.info($swipe);var originalPos=0,targetPos=0,spacingConstant=5,wrapper=$(".ui-scroll-to-fit-wrapper");wrapper.css({width:"100%",overflow:"hidden",position:"relative"});var triggerRight=$(".ui-scroll-to-fit-trigger-right"),triggerLeft=$(".ui-scroll-to-fit-trigger-left"),triggerLeftWidth=Math.floor(triggerLeft.outerWidth()),triggerRightWidth=Math.floor(triggerRight.outerWidth());triggerLeft.bind("click",function(){var items=$(elm).find("li:visible"),currentItem=items.first(),itemOffset=0,itemRight=Math.ceil(currentItem.offset().left-wrapper.position().left);if(isSmallScreen()&&itemRight>=triggerLeftWidth||!isSmallScreen()&&itemRight>=0)return!1;items.each(function(i,item){currentItem=$(item);itemRight=Math.floor(currentItem.offset().left-wrapper.position().left);if(itemRight>0&&2>i){itemOffset=0;targetPos=isSmallScreen()?triggerLeftWidth-spacingConstant:0;return!1}if(itemRight>0&&i>0){itemOffset=Math.floor(currentItem.offset().left-wrapper.position().left)+Math.floor(currentItem.outerWidth());return!1}});updatePos(targetPos+itemOffset);return!1});triggerRight.bind("click",function(){var wrapperWidth,items=$(elm).find("li:visible"),currentItem=items.first(),lastItem=Math.floor(items.last().offset().left-wrapper.position().left)+Math.floor(items.last().outerWidth());wrapperWidth=isSmallScreen()?wrapper.width()-triggerRightWidth:wrapper.width();if(!(wrapperWidth>lastItem)){items.each(function(i,item){if(Math.floor($(item).offset().left-wrapper.position().left+$(item).outerWidth())>=Math.floor(wrapperWidth)){currentItem=$(item);return!1}});updatePos(targetPos-Math.floor($(currentItem).outerWidth()));return!1}});var totalWidth=10,difference=0;setTotalWidth();var resizeTimer=null;$(window).on("resize.uiScrollToFit",function(){resizeTimer&&window.clearTimeout(resizeTimer);resizeTimer=window.setTimeout(function(evt){setTotalWidth()},550)});scope.$on("$routeChangeStart",function(next,current){$(window).off("resize.uiScrollToFit")});var updating=!1,startCoord={x:0,y:0},currentCoord={x:0,y:0};$swipe.bind(elm,{start:function(coord){setTotalWidth();startCoord=coord;originalPos=targetPos;return!1},end:function(coord){targetPos>triggerLeftWidth&&updatePos(isSmallScreen()?triggerLeftWidth-spacingConstant:0);var lastItem=$(elm).find("li").last(),rightEdge=wrapper.width(),itemRight=Math.floor(lastItem.offset().left-wrapper.position().left)+Math.floor(lastItem.outerWidth());rightEdge>itemRight&&updatePos(isSmallScreen()?targetPos+(rightEdge-itemRight-triggerRightWidth):targetPos+(rightEdge-itemRight));originalPos=targetPos;return!1},move:function(coord){targetPos=originalPos;currentCoord.x>coord.x?targetPos+=coord.x-startCoord.x:targetPos-=startCoord.x-coord.x;$(elm).css({left:targetPos+"px"});currentCoord=coord;return!1}});scrollToSelectedItem()}}}]);angular.module("app").directive("interstitialLink",["safeApply","lightboxService",function(safeApply,lightboxService){return{restrict:"A",replace:!0,transclude:!0,scope:{},templateUrl:window.staticURI+"/views/directives/interstitialLink.html",link:function(scope,element,attrs){attrs.target?scope.target=attrs.target:scope.target="";attrs.id?scope.id=attrs.id:scope.id=Math.round(1e4*Math.random());scope.href=attrs.href;scope.lightboxId="interstitial-kia-"+scope.id}}}]);angular.module("app").directive("debugPanel",["$log","safeApply","debugConsole",function($log,safeApply,debugConsole){return{restrict:"A",replace:!0,templateUrl:window.staticURI+"/views/directives/debugPanel.html",controller:function($scope){$scope.console=debugConsole.data},link:function(scope,element,attrs){scope.clear=function(){debugConsole.clear()};$.debugConsole=function(msg){safeApply(scope,function(){debugConsole.log(msg)})}}}}]);angular.module("app").factory("debugConsole",["$log","$http","$location","messageService","localize",function($log,$http,$location,messageService,localize){var data={active:"debug"===$location.search().mode,content:""},clear=function(){data.content=""},log=function(msg){data.content+=msg+"<br />"};return{active:data.active,data:data,clear:clear,log:log}}]);Modernizr.addTest("ipad",function(){return!!navigator.userAgent.match(/iPad/i)});Modernizr.addTest("iphone",function(){return!!navigator.userAgent.match(/iPhone/i)});Modernizr.addTest("ipod",function(){return!!navigator.userAgent.match(/iPod/i)});Modernizr.addTest("android",function(){return!!navigator.userAgent.match(/android/i)});Modernizr.addTest("appleios",function(){return Modernizr.ipad||Modernizr.ipod||Modernizr.iphone});angular.module("app").directive("contentTemplate",["$log","$rootScope","kiaEvents",function($log,$rootScope,kiaEvents){var link=function(scope,element,attrs,controller){var cleanPastedCode=function(){$(".mcePaste").remove()},init=function(){$(".content-type-image img").responsiveImage({cssDomObject:element,defaultImageVersion:"data-img-960",delayLoadingAttribute:"data-src"});cleanPastedCode()};init()};return{link:link,restrict:"AC"}}]);angular.module("app").directive("tempHisrc",["$log","$rootScope",function($log,$rootScope){return{restrict:"EA",link:function(scope,element,attributes){$(".demo-image img").hisrc();$("body").append("devicePixelRatio="+$.hisrc.devicePixelRatio+" / bandwidth="+$.hisrc.bandwidth+" / connectionKbps="+$.hisrc.connectionKbps)}}}]);angular.module("app").factory("youtubePlayerService",["tealiumService",function(tealiumService){function createPlayer(videoId,createAlways){createInterval[videoId]=setInterval(function(){videoId=videoId.trim();var playerId="yt-player-"+videoId;createAlways="undefined"===createAlways?!1:createAlways;if("undefined"!=typeof window.YT&&window.YT&&window.YT.Player){isValueExist(videoId,YTPlayer)||createAlways||initializePlayer(playerId,videoId);createAlways&&initializePlayer(playerId,videoId)}},1e3)}function initializePlayer(playerId,video){YTPlayer[video]=new window.YT.Player(playerId,{width:"100%",height:"100%",videoId:video,playerVars:{iv_load_policy:"3",modestbranding:"1",rel:"0",showinfo:"0"},events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange}})}function createMultiplePlayers(videosList){_.forEach(videosList,function(videoId,index){createPlayer(videoId)})}function setInitialProgress(video){return{videoId:video,started:!1,completed:!1,completedProgress25:!1,completedProgress50:!1,completedProgress75:!1,completedProgress95:!1,trackingInterval:null}}function isValueExist(value,list){for(var prop in list)if(prop===value)return!0;return!1}function onPlayerReady(event){var video=getVideoIDfromURL(event.target.getVideoUrl());clearInterval(createInterval[video])}function onPlayerStateChange(event){var state=event.data,currentPlayingVideo=getVideoIDfromURL(event.target.getVideoUrl());switch(state){case 0:onVideoComplete(currentPlayingVideo);break;case 1:isValueExist(currentPlayingVideo,videoProgressList)||(videoProgressList[currentPlayingVideo]=setInitialProgress(currentPlayingVideo));playingVideo(currentPlayingVideo);break;case 2:cancelTrackingInterval(videoProgressList[currentPlayingVideo].trackingInterval)}}function onVideoComplete(video){resetProgressTracking(video);tealiumTrack({video_complete:"true"},YTPlayer[video].getDuration(),video)}function getCurrentVideoTitle(video){return isValueExist(video,YTPlayer)?YTPlayer[video].getVideoData().title:""}function playingVideo(video){if(YTPlayer[video].getCurrentTime()<1&&!videoProgressList[video].started){tealiumTrack({video_start:"true"},YTPlayer[video].getDuration(),video);resetProgressTracking(video);videoProgressList[video].started=!0}videoProgressList[video].trackingInterval=setInterval(trackVideoProgress,500,video)}function cancelTrackingInterval(trackingInterval){trackingInterval&&clearInterval(trackingInterval)}function resetProgressTracking(video){cancelTrackingInterval(videoProgressList[video].trackingInterval);videoProgressList[video]=setInitialProgress(video)}function trackVideoProgress(video){var completedProgress=Math.round(YTPlayer[video].getCurrentTime()/YTPlayer[video].getDuration()*100);if(completedProgress>24&&!videoProgressList[video].completedProgress25){tealiumTrack({video_25_percent:"true"},YTPlayer[video].getDuration(),video);videoProgressList[video].completedProgress25=!0}if(completedProgress>49&&!videoProgressList[video].completedProgress50){tealiumTrack({video_50_percent:"true"},YTPlayer[video].getDuration(),video);videoProgressList[video].completedProgress50=!0}if(completedProgress>74&&!videoProgressList[video].completedProgress75){tealiumTrack({video_75_percent:"true"},YTPlayer[video].getDuration(),video);videoProgressList[video].completedProgress75=!0}if(completedProgress>94&&!videoProgressList[video].completedProgress95){tealiumTrack({video_95_percent:"true"},YTPlayer[video].getDuration(),video);videoProgressList[video].completedProgress95=!0}}function tealiumTrack(siteEvents,videoDuration,video){tealiumService.track({site_events:siteEvents,event_name:"video playback",video_name:getCurrentVideoTitle(video),video_duration:Math.floor(videoDuration).toString(),content_type:"video"})}function getVideoIDfromURL(URL){return URL.split("v=")[1]}function playVideo(video){if(isValueExist(video,YTPlayer)){resetProgressTracking(video);YTPlayer[video].playVideo()}}function playPausedVideo(video){isValueExist(video,YTPlayer)&&YTPlayer[video].playVideo()}function stopVideo(video){isValueExist(video,YTPlayer)&&YTPlayer[video].stopVideo()}function resizePlayer(width,height,video){isValueExist(video,YTPlayer)&&YTPlayer[video].setSize(width,height)}function destroyPlayer(video){isValueExist(video,YTPlayer)&&YTPlayer[video].destroy()}var YTPlayer={},createInterval={},videoProgressList={};return{createPlayer:createPlayer,createMultiplePlayers:createMultiplePlayers,playVideo:playVideo,playPausedVideo:playPausedVideo,resizePlayer:resizePlayer,destroyPlayer:destroyPlayer,stopVideo:stopVideo,resetProgressTracking:resetProgressTracking}}]);angular.module("app").directive("ytPlayer",["$window","youtubePlayerService",function($window,youtubePlayerService){return{restrict:"E",replace:!0,scope:{video:"@"},template:"<div id='yt-player-{{video}}' class='yt-player'></div>",link:function(scope,element,attrs){youtubePlayerService.createPlayer(scope.video)}}}]);angular.module("app").directive("kianChat",["kianService",function(kianService){return{restrict:"A",scope:{},link:function(scope,element,attrs){element.bind("click",function(e){kianService.openChat()})}}}]);angular.module("app").directive("tealiumReferralTrack",["tealiumService",function(tealiumService){return{restrict:"A",link:function(scope,element,attrs){var referralURL=attrs.href;element.bind("click",function(){tealiumService.track({site_events:{property_referral:"true"},exit_link_url:referralURL,event_name:"property referral"})})}}}]);angular.module("app").filter("paths",function(){return function(path,type){return window[type]+path}});angular.module("app").filter("convertEntities",function(){return function(value){var fragment=$("<div>"+value+"</div>").text();return fragment}});angular.module("app").filter("hexToRGB",function(){return function(hex){var r=255,g=255,b=255;/^#/.test(hex)&&(hex=hex.slice(1));if(hex&&3===hex.length){r=parseInt([hex.slice(0,1),hex.slice(0,1)].join(""),16);g=parseInt([hex.slice(1,2),hex.slice(1,2)].join(""),16);b=parseInt([hex.slice(2,3),hex.slice(2,3)].join(""),16)}else if(hex&&6===hex.length){r=parseInt(hex.slice(0,2),16);g=parseInt(hex.slice(2,4),16);b=parseInt(hex.slice(4,6),16)}var rgb=[r,g,b].join();return rgb}});angular.module("app").config(["$httpProvider",function($httpProvider){return $httpProvider.responseInterceptors.push(["$log","$rootScope","$q","$injector","$location","kiaEvents",function($log,$rootScope,$q,$injector,$location,kiaEvents){var $http,error,success;success=function(response){$http=$http||$injector.get("$http");$http.pendingRequests.length<1&&$rootScope.$broadcast(kiaEvents.LOADER.HIDE);$rootScope.$broadcast("success:"+response.status,response);return response};error=function(response){var deferred;$http.pendingRequests.length<1&&$rootScope.$broadcast(kiaEvents.LOADER.HIDE);deferred=$q.defer();$rootScope.$broadcast("error:"+response.status,response);window.DEBUG&&$log.info(response);return $q.reject(response)};return function(promise){$http=$http||$injector.get("$http");$http.pendingRequests.length>0&&$rootScope.$broadcast(kiaEvents.LOADER.SHOW);return promise.then(success,error)}}])}]);angular.module("resolver",[]);angular.module("resolver").provider("routeResolver",["$controllerProvider","$compileProvider","$filterProvider","$provide",function($controllerProvider,$compileProvider,$filterProvider,$provide){this.$get=function(){return this};this.routeConfig=function(){var viewsDirectory="/views/",controllersDirectory="controllers/",controllerSufix="",setControllerSufix=function(sufix){controllerSufix=sufix},getControllerSufix=function(){return controllerSufix},setBaseDirectories=function(viewsDir,controllersDir){viewsDirectory=viewsDir;controllersDirectory=controllersDir},getViewsDirectory=function(){return viewsDirectory},getControllersDirectory=function(){return controllersDirectory};return{setControllerSufix:setControllerSufix,getControllerSufix:getControllerSufix,setBaseDirectories:setBaseDirectories,getControllersDirectory:getControllersDirectory,getViewsDirectory:getViewsDirectory}}();this.route=function(routeConfig){var _waitDeferrer=null,resolve=function(baseName,module,path,authenticated,templateUrl){path||(path="");module?module+="/":module="";var routeDef={};templateUrl?routeDef.templateUrl=templateUrl:routeDef.templateUrl=routeConfig.getViewsDirectory()+"modules/"+module+routeConfig.getControllersDirectory()+path+baseName+".html";routeDef.controller=baseName+routeConfig.getControllerSufix();null!==authenticated?routeDef.authenticated=authenticated===!0:routeDef.authenticated=authenticated;routeDef.resolve={load:["$q","$rootScope","$rootElement","$compile",function($q,$rootScope,$rootElement,$compile){var dependencies=["modules/"+module+routeConfig.getControllersDirectory()+path+baseName+routeConfig.getControllerSufix()];return resolveDependencies($q,$rootScope,$rootElement,$compile,dependencies)}]};return routeDef},resolveDependencies=function($q,$rootScope,$rootElement,$compile,dependencies){var defer=$q.defer();_waitDeferrer?_waitDeferrer.promise.then(function(){require(dependencies,function(){defer.resolve();$rootScope.$apply()})},function(){defer.reject()}):require(dependencies,function(){defer.resolve();$rootScope.$apply()});return defer.promise},_wait=function(deferrer){_waitDeferrer=deferrer},_proceed=function(){if(_waitDeferrer){_waitDeferrer.resolve();_waitDeferrer=null}},_cancel=function(){if(_waitDeferrer){_waitDeferrer.reject();_waitDeferrer=null}};return{resolve:resolve,wait:_wait,proceed:_proceed,cancel:_cancel}}(this.routeConfig);this.module=function(){function invokeProvider(moduleInstance,provider){return function(){provider.apply(provider,arguments);
return moduleInstance}}var register=function(module){module.controller=invokeProvider(module,$controllerProvider.register);module.directive=invokeProvider(module,$compileProvider.directive);module.filter=invokeProvider(module,$filterProvider.register);module.factory=invokeProvider(module,$provide.factory);module.service=invokeProvider(module,$provide.service)};return{register:register}}();return this}]);angular.module("app").config(["$routeProvider","$locationProvider","routeResolverProvider",function($routeProvider,$locationProvider,routeResolverProvider){function isSnapshot(routeParams){return routeParams.snapshot===!0||"true"===routeParams.snapshot}function retrieveSnapshot(url,routeParams,paramsList){var newUrl=url,sSnapshot="";if(isSnapshot(routeParams)){sSnapshot+="snapshot=true";angular.forEach(paramsList,function(value){routeParams[value]&&(sSnapshot+="&"+value+"="+routeParams[value])});newUrl+=url.indexOf("?")>=0?"&"+sSnapshot:"?"+sSnapshot}return newUrl}$locationProvider.html5Mode(!0);routeResolverProvider.module.register(angular.module("app"));var contentTemplateRoute={controller:"contentTemplateController",templateUrl:function($routeParams){var url="";for(var i in $routeParams)$routeParams.hasOwnProperty(i)&&/^level[0-9]{1,2}$/.test(i)&&(url+=(""===url?"":"/")+$routeParams[i]);return window.baseURI+"/modules/content?url="+url},reloadOnSearch:!1};return $routeProvider.when("/homeTopographic/",{templateUrl:window.staticURI+"/views/homeTopographic.html",reloadOnSearch:!1}).when("/test/:id",{controller:"testController",reloadOnSearch:!0,resolve:{changeTab:["$rootScope",function($rootScope){return $rootScope.$broadcast("changeTab#test")}]}}).when("/dealers/inventory/:series/:year",{controller:"dealerInventoryController",templateUrl:window.staticURI+"/views/dealerInventory/dealerInventoryPage.html",reloadOnSearch:!1}).when("/dealers/inventory/detail",{controller:"dealerInventoryDetailController",templateUrl:function($routeParams){for(var params=["zipcode","monthly"],len=params.length,search="",i=0;len>i;i++){var param=params[i];$routeParams[param]&&(search+=(""!==search?"&":"")+param+"="+$routeParams[param])}""!==search&&(search="?"+search);return window.baseURI+"/modules/dealers/inventory/detail/"+$routeParams.vin+search},reloadOnSearch:!0}).when("/dealers/locator",{controller:"dealerLocatorController",templateUrl:window.staticURI+"/views/dealerLocator/dealerLocatorPage.html",reloadOnSearch:!0}).when("/vehicle/:model/:year/galleries/:gallery",{controller:"vehicleGalleriesController",templateUrl:function($routeParams){var sTemplateUrl=window.baseURI+"/modules/vehicle/"+$routeParams.model+"/"+$routeParams.year+"/galleries/"+$routeParams.gallery;return retrieveSnapshot(sTemplateUrl,$routeParams,["file"])},reloadOnSearch:!1}).when("/vehicle/:model/:year/features/:category",{controller:"vehicleFeaturesController",templateUrl:function($routeParams){var category="?category="+$routeParams.category;return window.baseURI+"/modules/vehicle/"+$routeParams.model+"/"+$routeParams.year+"/features"+category},reloadOnSearch:!1}).when("/vehicle/:model/:year/features",{controller:"vehicleFeaturesController",templateUrl:function($routeParams){return window.baseURI+"/modules/vehicle/"+$routeParams.model+"/"+$routeParams.year+"/features"},reloadOnSearch:!1}).when("/vehicle/:model/:year/accessories",{controller:"vehicleFeaturesController",templateUrl:function($routeParams){var category="?category=accessories";return window.baseURI+"/modules/vehicle/"+$routeParams.model+"/"+$routeParams.year+"/features"+category},reloadOnSearch:!1}).when("/accessories",{controller:"vehicleFeaturesController",templateUrl:function($routeParams){return window.staticURI+"/views/accessories.html"},reloadOnSearch:!1}).when("/offers/:series/:year",{controller:"vehicleOffersController as offersCtrl",templateUrl:function($routeParams){for(var params=["series","year","zipcode"],len=params.length,search="",i=0;len>i;i++){var param=params[i];$routeParams[param]&&(search+=(""!==search?"&":"")+param+"="+$routeParams[param])}""!==search&&(search="?"+search);return window.staticURI+"/views/offers/offersPage.html"},reloadOnSearch:!1}).when("/compare",{controller:"vehicleCompareController as compareCtrl",templateUrl:function($routeParams){for(var params=["series","year"],len=params.length,search="",i=0;len>i;i++){var param=params[i];$routeParams[param]&&(search+=(""!==search?"&":"")+param+"="+$routeParams[param])}""!==search&&(search="?"+search);return window.staticURI+"/views/compare/comparePage.html"},reloadOnSearch:!1}).when("/vehicle/:model/:year/trims",{controller:"vehicleTrimsController",templateUrl:function($routeParams){return window.baseURI+"/modules/vehicle/"+$routeParams.model+"/"+$routeParams.year+"/trims"},reloadOnSearch:!1}).when("/vehicle/:model/:year/experience",{controller:"vehicleExperienceController",templateUrl:function($routeParams){var sTemplateUrl=window.baseURI+"/modules/vehicle/"+$routeParams.model+"/"+$routeParams.year+"/experience";return retrieveSnapshot(sTemplateUrl,$routeParams,["story","chapter"])},reloadOnSearch:!1}).when("/palettes",{templateUrl:window.baseURI+"/pages/palettes",reloadOnSearch:!0}).when("/home",{controller:"homepageController",templateUrl:window.baseURI+"/modules/homepage",reloadOnSearch:!1}).when("/index",{templateUrl:window.baseURI+"/pages/index",reloadOnSearch:!0}).when("/build",{controller:"buildAndPriceController",templateUrl:window.staticURI+"/views/buildAndPrice/buildAndPrice.html",reloadOnSearch:!1}).when("/lightbox",{controller:"lightboxController",templateUrl:window.staticURI+"/views/lightbox.html",reloadOnSearch:!1}).when("/panorama",{controller:"panoramaController",templateUrl:window.staticURI+"/views/panorama.html",reloadOnSearch:!1}).when("/interior",{controller:"panoramaInteriorController",templateUrl:window.staticURI+"/views/interior.html",reloadOnSearch:!1}).when("/content/:level1",contentTemplateRoute).when("/content/:level1/:level2",contentTemplateRoute).when("/content/:level1/:level2/:level3",contentTemplateRoute).when("/content/:level1/:level2/:level3/:level4",contentTemplateRoute).when("/forms/getaquote",{controller:"formsController",templateUrl:window.staticURI+"/views/forms/vehicleSelectorGetaquote.html",reloadOnSearch:!0}).when("/forms/getaquote/:series/:year",{controller:"formsController",templateUrl:function($routeParams){return window.baseURI+"/modules/forms/getaquote/"+$routeParams.series+"/"+$routeParams.year},reloadOnSearch:!0}).when("/forms/updatesrequest",{controller:"formsController",templateUrl:window.staticURI+"/views/forms/vehicleSelectorUpdatesRequest.html",reloadOnSearch:!0}).when("/forms/updatesrequest/:series/:year",{controller:"formsController",templateUrl:function($routeParams){return window.baseURI+"/modules/forms/updatesrequest/"+$routeParams.series+"/"+$routeParams.year},reloadOnSearch:!0}).when("/forms/testdriverequest",{controller:"testDriveController",templateUrl:window.staticURI+"/views/forms/vehicleSelectorTestDrive.html",reloadOnSearch:!0}).when("/forms/testdriverequest/:series/:year",{controller:"testDriveController",templateUrl:function($routeParams){return window.baseURI+"/modules/forms/testdriverequest/"+$routeParams.series+"/"+$routeParams.year},reloadOnSearch:!0}).when("/forms/brochurerequest",{controller:"testDriveController",templateUrl:window.staticURI+"/views/forms/vehicleSelectorBrochure.html",reloadOnSearch:!0}).when("/forms/brochurerequest/:series/:year",{controller:"testDriveController",templateUrl:function($routeParams){return window.baseURI+"/modules/forms/brochurerequest/"+$routeParams.series+"/"+$routeParams.year},reloadOnSearch:!0}).when("/forms/appraisalrequest",{controller:"testDriveController",templateUrl:window.staticURI+"/views/forms/vehicleSelectorAppraisal.html",reloadOnSearch:!0}).when("/forms/appraisalrequest/:series/:year",{controller:"testDriveController",templateUrl:function($routeParams){return window.baseURI+"/modules/forms/appraisalrequest/"+$routeParams.series+"/"+$routeParams.year},reloadOnSearch:!0}).when("/temp/homeStatic",{controller:"homepageController",templateUrl:window.baseURI+"/pages/homepageStatic",reloadOnSearch:!1}).when("/temp/hisrc",{templateUrl:window.baseURI+"/pages/hisrc",reloadOnSearch:!0}).when("/temp/responsiveImages",{templateUrl:window.baseURI+"/pages/responsiveImages",reloadOnSearch:!0}).when("/vehicles",{templateUrl:window.staticURI+"/views/vehicles.html",controller:"vehiclesController",reloadOnSearch:!1}).when("/vehicles/:category",{templateUrl:window.staticURI+"/views/vehicles.html",controller:"vehiclesController",reloadOnSearch:!1}).when("/error",{templateUrl:window.staticURI+"/views/500.html",reloadOnSearch:!1}).when("/admin/throw/error",{templateUrl:window.baseURI+"/admin/throw/error",reloadOnSearch:!1}).when("/fish-eye",{controller:"fishEyeController",templateUrl:window.staticURI+"/views/fishEye.html",reloadOnSearch:!1}).when("/search",{controller:"searchController",templateUrl:window.staticURI+"/views/search.html",reloadOnSearch:!1}).when("/bluetooth",{controller:"bluetoothController",templateUrl:window.staticURI+"/views/bluetooth/bluetoothPage.html",reloadOnSearch:!1}).when("/bluetooth/hub",{controller:"bluetoothController",templateUrl:window.staticURI+"/views/bluetooth/bluetoothHubPage.html",reloadOnSearch:!1}).when("/panel",{templateUrl:window.staticURI+"/views/panel.html",reloadOnSearch:!1}).when("/accordion",{templateUrl:window.staticURI+"/views/accordion.html",reloadOnSearch:!1}).when("/safetyRecallSearch",{controller:"safetyRecallSearch",templateUrl:window.staticURI+"/views/safetyRecallSearch.html",reloadOnSearch:!1}).when("/paymentTest",{controller:"paymentTestController",templateUrl:window.staticURI+"/views/paymentTest.html",reloadOnSearch:!1}).otherwise({templateUrl:window.staticURI+"/views/404.html",reloadOnSearch:!0})}]);angular.module("app").factory("seoService",["$log","$http","$document","$location",function($log,$http,$document,$location){var getMetatags,checkMetatags;Modernizr.addTest("isIE",function(){return/MSIE/.test(navigator.userAgent)?!0:!1});getMetatags=function(dynamicUrl){var sUrl=window.baseURI+"/data/seo";return $http.post(sUrl,{url:dynamicUrl}).success(function(data,getResponseHeaders){if(data.status&&(200===data.status.code||"200"===data.status.code)&&data.seo){$document.attr("title",data.seo.metaTitle);$document.find("meta[name=description]").attr("content",data.seo.metaDescription);$document.find("meta[name=keywords]").attr("content",data.seo.metaKeywords);$document.find('meta[property="og:title"]').attr("content",data.seo.metaTitle);$document.find('meta[property="og:description"]').attr("content",data.seo.metaDescription);$document.find('meta[property="og:image"]').attr("content",data.seo.openGraphImage);$document.find('link[rel="canonical"]').attr("href",data.seo.canonicalUrl)}})};checkMetatags=function(firstRun){var sHash=window.location.hash,bUpdate=!0;firstRun&&(void 0===sHash||""===sHash||sHash.length<=0)&&(bUpdate=!1);sHash=$location.path();0===sHash.indexOf("/")&&(sHash=sHash.substr(1));bUpdate&&sHash.length>0&&getMetatags(sHash)};return{checkMetatags:checkMetatags}}]);angular.module("resolver").service("directivesInjector",["$compile",function($compile){function injectDirective(directiveName){var injectedDirectives=angular.element("."+directiveName+", "+directiveName+", ["+directiveName+"]"),scope=(injectedDirectives.length,angular.element(injectedDirectives).scope());$compile(injectedDirectives)(scope);injectedDirectives=null}var directiveObj={injector:function(list){angular.forEach(list,function(value){injectDirective(value)})}};angular.injector.directive=directiveObj.injector;return directiveObj}]);var sHash=window.location.hash;window.firstRun=!0;void 0===sHash||""===sHash||sHash.length<=0||(window.firstRun=!1);angular.module("app").run(["$rootScope","$log","seoService","directivesInjector",function($rootScope,$log,seoService,directivesInjector){$.hisrc.speedTest();return $rootScope.$on("$routeChangeSuccess",function(event,currentRoute,priorRoute){angular.element(".bluetooth-container").removeClass("bluetooth-container");angular.element(".appleios-bluetooth-container").removeClass("appleios-bluetooth-container");seoService.checkMetatags(window.firstRun);window.firstRun=!1;return $rootScope.$broadcast(""+currentRoute.controller+"$routeChangeSuccess",currentRoute,priorRoute)})}]);angular.module("externalConstants",[]).factory("externalConstant",["$http","$rootScope","kiaEvents",function($http,$rootScope,kiaEvents){var externalConstant={dataURL:window.baseURI+"/data/admin/configvariables",dictionary:{},resourceFileLoaded:!1,successCallback:function(data){for(var i=0;i<data.result.length;i++)externalConstant.dictionary[data.result[i].name]=data.result[i].value;externalConstant.resourceFileLoaded=!0;$rootScope.$broadcast(kiaEvents.GLOBAL.CONSTANTS_LOADED)},initExternalResources:function(type){type=type||"label";$http({method:"GET",url:externalConstant.dataURL,cache:!1}).success(externalConstant.successCallback).error(function(){$http({method:"GET",url:externalConstant.dataURL,cache:!1}).success(externalConstant.successCallback)})},getValue:function(value){var result=window.DEBUG?null:"";value in externalConstant.dictionary&&(result=externalConstant.dictionary[value]);return result}};externalConstant.initExternalResources();return externalConstant}]);angular.module("app").run(["$templateCache",function($templateCache){$templateCache.put("/us/static/views/404.html",'<div class="error-404 error-container"> <div class="error-icon"> <img alt="404 Page not found" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHMAAABnCAYAAAAzBH1rAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozREJGRDA3OUU2OTYxMUUyOUI4MkQ2MTRGRTY5ODhGRiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozREJGRDA3QUU2OTYxMUUyOUI4MkQ2MTRGRTY5ODhGRiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjNEQkZEMDc3RTY5NjExRTI5QjgyRDYxNEZFNjk4OEZGIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjNEQkZEMDc4RTY5NjExRTI5QjgyRDYxNEZFNjk4OEZGIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+BSMcrwAACrBJREFUeNrsXQuwlVUVXhe4QgZ61RCmEgcdU6sRSslq0mQa34pvx5KaHhNGEyigPFRePkAEVMChLB+J72fS6Jg2FVlTjgU5aobaQ1GUuIAmipfkclvf/Os2p9O5937rP//z3P3NrGEuZ/37sb7z77P32muv3TRu3DhpMAxSGaNyrMqnVD6q0qLypsp6lT+pPKbyU5WtjdTxfg3Ulz1VpquMVxlY4/M9TD6p8lWVd1SWqyxQ2dIIBujTIESepPK8ykVdEFkL0Jtqz50UyCwGptiQOSTm80Ps+SmBzHyBIXWRSlOd5TRZOeMDmfngiyrLEi5zmZUbyMwQu6rcotI34XJR3k1WfiAzI0xTGZ5S2furXBjIzAbDMjD2NKsnkJkyFjqHwZdUHrZ/PcP4VYHMdHGEylmk7jaVL6t8TOVklQPt7/fI58+x+gKZKbV1iWMZgqH47oq/O+xvdj2Jeq4tk43KROY3JfK1Mvijyg1dfIb/X02Wc6jVG8hMELupzCN18QZOVtnZxef4/0mmx+AKqz+QmRBmqQwmdTGU/qYHHXx+D1neEKs/kJkAMIGZ6Jj0THcsP7aRuhNUDghk1o9rVJpJXWxnrSN1oXc1qbuLTYYCmXXgeJUTHeQsirFmZclHO44JZMZDs72VLC5yDJuVw/JUh/4SxygRyKzA91QOInUxobkvZj33EhOmTqA94wOZPgx2zCCx1DjfsdSotZS5oJulTDXmOmbWgUxb27WQujdLFKRVD9ZYOQxajNBAJoGRKt8idd9WuTihei+x8hiMs3YGMnvAdcJvOl+m0ppQvRutPAZ9nZOzXkkmdkTYsI0XVJYmXD/KY7fKRgu/g9PryBxg6z4W2P14P+E2oLxJDv0F1u5AZo114r6k7qMqj6TUDpT7GKk73NodyKzAR4T3qeLtmZxyey5wvPVTrf2BTAN8pGwoyPUqa1NuD8pfTuoOtOE2kKn4nEThHAxaHTPOejHHMVP+ispnezuZfWwGyYaCXKryVkZtQz0zSV20f5nUH1lfajK/pnIYqfu0RAHKWeJGq5fBYdafXkkmQjHmOycl7aQujiri2B5CLNeZQwCkLBJf8HS7c6mC8MxBvZFMuOGGkrrYEfk1qbufylMqKyTag9xHIsf4CFubrrUvBotVwu/IDJXk3IulIfMAh0HbHGu5IUZ6d1F8nVEDniN8U60dDPAm79+byISnp79D9xVS90qJjr0zwM4MewThZeG9U/3FH/FQWjIRenEKqbte+GMCH1QZ62jHAOeEZYG1h8GpKkc3OpmYmHh2GzC8saEgBzve9k54trHeFV+IyTWScc6IrMn8rsonSN3fq9zlKHtnjPZ4n0F7niR1kQhjfKOSuZfKbIeRESvrCQXZHKNNm5z6aM8Ex5dgtvW74ci8XKL0Lgxulei8iAetGZAp1q7bHF/guY1GJoacb5O6cUNBtjmWD/W8zcB04UNMzrP+NwyZSx2TASwvNsSsx0tO3GROaB/rvUK/r2sUMjFNH03qImRjSR11eYfajXXUBcfDX0ndL5kdSk3mAPFHpW+vo76s3kyxdnqiDBbHWDoViky47FjH9uMqK+usb0vK5FfjIZWfk7rwGU8qK5kfligWlcEOSSYUxDvMbkqgzsnWfgawx9AykomTzmxSQoRo/DmBOj1v2r8dM9Lu8JzK90ld2OOqspF5uPB+z80JrsU8ZCaZlnSuo27Y5TNlIbPJpuJsCMXMBA3rIXNTgn1GvbMd9vFkTcmVTOzws8FNGKJ+lGDdrTmRCdxg/WEA+4wtOpkDhc8KAkx0TB6SfjM3J9z3HeKLYJjvmFPkQibccGxAMKb1v0q4/i0p6bL4hfWLgSfwO3MyhzvWUW2STlS6Z5jdKOlgssPxMUUSzM6ZJJnwcLCHaDBB+kcKhtxqS4683kyxfrGZSbyHpTIhE77X00hdhF5cmeL6dnPCenGA/r1B6p4hvO86dTJx8NRzThJekHcKQOamFNuA/s1w6HsOGKdKJo6Es/t1CLlYIemitQBkivXzKVL3ELNjrmTi0pfLSd0O8SUgTHtGm/bFNOinJwsKDkS15EnmHOFjXFYIHwxV9t/MypHodlL3Q1KnW7MeMj8uUbQd+xtyiWQDZpjdIdldGTXDMUeAPQ/Og0xMv9lQkHnCBxBn8WZmefeXJ5C7rhCTuGTiFjw2KaBn3ZXVb2bWF7ktdqyrYdeTsyLTe5YCXo62DA3XmpBOkvAcfuokv38WZMI5zibShe/1Jxkbjkk5+rJkjweE90XDvhPSJhMhD5eSuu3CZ3BOEs8ThD4u+cBzYHimOENMvGTCTcUmn/+h8Pt7SWKnGa2r9R2SJt6TE5nPmF0YwM5XpEUmzux/ndR9U/jkDmkAQztSob1etYjHPZnHSfKZvTxA6lU2ycY3hM/5QJPZGerA6s/JaFHe028UMn6NkigIGcfhcS50Y87tghtxtoOfa4UMMWHJQZ6ez5O6iLJbLsUAnAM46PPLDNe5DGAfNjHVF4TMk8SQicxZngxUnjjS3grY53yH/nwhMpgxZCK0gc0TsDLHmWLZADs9TOoOEyLEpA9RCLvY9Z69CPCFmFwoPSTU6IlMeHrYUBBMkF4K/LgAe11P6n5AevC8dUfmkcJnOt4g6YaCxAGuncKWEqLlfiZRqrazJeOkEQQuE/48Kvjo8k7PrjrWV3znJBFi+XZBjIM+YZdiUo0vK65P/ItEWSifLkh7YTd41W4k9Zfa2rOdfTPRaTatCqb+txbom/5jiZz7XfUN+4WrJKOj6SRuET6Hw0hzJlDDbItjyOwMjdhZEKPgauFzCb3dJUoyUZTkyd47PedJjRCTWp2BG469UQd5cX5XoG+4JyIO3/DjCtT23wqf92iw1NjwqCYTd12xWy/I7jGtQMbAWvgQ5zMnFGwyNEP4jGQTpequtGoysSnK3kKHScZrBTLEsBjP7FMwMtcJH2LSXL1UqSTzRMc3FZUuLJgh4iS22FrAtedi8d3peUI1mc3iCwWBN6KtYEZYG4PQJwtI5jazr4f85koyvyP8XZVPSPy7KtMEsk4+6NS/V4qJ+8V3p+d5nWRikc2m3mwXn7c/a2CG9y9Sd47kv7fZ3ZJvomPJB/76gczRwu+K3FQgz0kt/F2iTFg9EfoDG56KDNiZvdMTE7mjQOYY8oG3hA/myhOrVD6tcrfKe1WfIf7ndInywHaUoC8XO0aaMRhiR5HKSd5VmcUbit15bOgiWTFSfv9N5VUpF2BvbBYwKetG4c1kjmFvsaGpbMDM8A/2tr4q5QRuMmJ2VfYDmXsQimtqDFkB2WCHcHdqt/Qh14t7B5vmCubY5HaQ+U9CET7PkcGmuQC2Z2JnN4DMZ8hCHxRHQG5AIsB1lCuF26p7tp95Gk4nlDFRwhn91RIdvOkItk4NIA8bB4cKv+f6BMi8zxbQzENN9naGN7RYgKfofhCISO+Hgj1KDfC3vvNtRL6B7cEmpcR24++/Qyu2j2YFu5QSs4y///mdxGbzHcE2pcIdUhEkUEkmZqcIsbwz2KgUuNP46qhFJoCMkMhQ7LnJNSBbtBk/Y6Uqg2et5UiHvbojjP32YL9CoN34GGH8/N86v7tzFy9KFFCMk11nqhxlBSFmc1CwbepAsBm2wLBJjXu0EUryencP/EeAAQAzXxXnxQN4GwAAAABJRU5ErkJggg=="> </div> <h2 style="font-family: \'designk-bold\', \'Arial\'; font-size: 30px; line-height: 120%;">Page not found</h2> <h3 style="font-family: \'designk-medium\', \'Arial\'; font-size: 25px; line-height: 120%; padding-bottom: 5px;">An error occurred on the page. Contact system administration.</h2> <p><a href="mailto: admin@kia.com">REPORT A BAD LINK &gt;</a></p> </div> <div class="error-promos"> <a href="http://kia.com/us"> <div class="error-promo"> <img src="{{\'/img/soul_404_error_page_international_site_S.jpg\' | paths:\'staticURI\'}}" alt="Cruise on over"/> <h2>Cruise on over</h2> <p>There\'s much more to explore.</p> </div> </a> <a href="http://www.kia.com/worldwide/goto-local.aspx"> <div class="error-promo"> <img src="{{\'/img/soul_404_error_page_soul-2.0_S.jpg\' | paths:\'staticURI\'}}" alt="Let\'s go home"/> <h2>Let\'s go home</h2> <p>Kia International will help you find your local site by region and country.</p> </div> </a> </div>');$templateCache.put("/us/static/views/500.html",'<div class="error-500 error-container"> <div class="error-icon"> <img alt="Error 500" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHMAAABnCAYAAAAzBH1rAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozREJGRDA3OUU2OTYxMUUyOUI4MkQ2MTRGRTY5ODhGRiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozREJGRDA3QUU2OTYxMUUyOUI4MkQ2MTRGRTY5ODhGRiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjNEQkZEMDc3RTY5NjExRTI5QjgyRDYxNEZFNjk4OEZGIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjNEQkZEMDc4RTY5NjExRTI5QjgyRDYxNEZFNjk4OEZGIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+BSMcrwAACrBJREFUeNrsXQuwlVUVXhe4QgZ61RCmEgcdU6sRSslq0mQa34pvx5KaHhNGEyigPFRePkAEVMChLB+J72fS6Jg2FVlTjgU5aobaQ1GUuIAmipfkclvf/Os2p9O5937rP//z3P3NrGEuZ/37sb7z77P32muv3TRu3DhpMAxSGaNyrMqnVD6q0qLypsp6lT+pPKbyU5WtjdTxfg3Ulz1VpquMVxlY4/M9TD6p8lWVd1SWqyxQ2dIIBujTIESepPK8ykVdEFkL0Jtqz50UyCwGptiQOSTm80Ps+SmBzHyBIXWRSlOd5TRZOeMDmfngiyrLEi5zmZUbyMwQu6rcotI34XJR3k1WfiAzI0xTGZ5S2furXBjIzAbDMjD2NKsnkJkyFjqHwZdUHrZ/PcP4VYHMdHGEylmk7jaVL6t8TOVklQPt7/fI58+x+gKZKbV1iWMZgqH47oq/O+xvdj2Jeq4tk43KROY3JfK1Mvijyg1dfIb/X02Wc6jVG8hMELupzCN18QZOVtnZxef4/0mmx+AKqz+QmRBmqQwmdTGU/qYHHXx+D1neEKs/kJkAMIGZ6Jj0THcsP7aRuhNUDghk1o9rVJpJXWxnrSN1oXc1qbuLTYYCmXXgeJUTHeQsirFmZclHO44JZMZDs72VLC5yDJuVw/JUh/4SxygRyKzA91QOInUxobkvZj33EhOmTqA94wOZPgx2zCCx1DjfsdSotZS5oJulTDXmOmbWgUxb27WQujdLFKRVD9ZYOQxajNBAJoGRKt8idd9WuTihei+x8hiMs3YGMnvAdcJvOl+m0ppQvRutPAZ9nZOzXkkmdkTYsI0XVJYmXD/KY7fKRgu/g9PryBxg6z4W2P14P+E2oLxJDv0F1u5AZo114r6k7qMqj6TUDpT7GKk73NodyKzAR4T3qeLtmZxyey5wvPVTrf2BTAN8pGwoyPUqa1NuD8pfTuoOtOE2kKn4nEThHAxaHTPOejHHMVP+ispnezuZfWwGyYaCXKryVkZtQz0zSV20f5nUH1lfajK/pnIYqfu0RAHKWeJGq5fBYdafXkkmQjHmOycl7aQujiri2B5CLNeZQwCkLBJf8HS7c6mC8MxBvZFMuOGGkrrYEfk1qbufylMqKyTag9xHIsf4CFubrrUvBotVwu/IDJXk3IulIfMAh0HbHGu5IUZ6d1F8nVEDniN8U60dDPAm79+byISnp79D9xVS90qJjr0zwM4MewThZeG9U/3FH/FQWjIRenEKqbte+GMCH1QZ62jHAOeEZYG1h8GpKkc3OpmYmHh2GzC8saEgBzve9k54trHeFV+IyTWScc6IrMn8rsonSN3fq9zlKHtnjPZ4n0F7niR1kQhjfKOSuZfKbIeRESvrCQXZHKNNm5z6aM8Ex5dgtvW74ci8XKL0Lgxulei8iAetGZAp1q7bHF/guY1GJoacb5O6cUNBtjmWD/W8zcB04UNMzrP+NwyZSx2TASwvNsSsx0tO3GROaB/rvUK/r2sUMjFNH03qImRjSR11eYfajXXUBcfDX0ndL5kdSk3mAPFHpW+vo76s3kyxdnqiDBbHWDoViky47FjH9uMqK+usb0vK5FfjIZWfk7rwGU8qK5kfligWlcEOSSYUxDvMbkqgzsnWfgawx9AykomTzmxSQoRo/DmBOj1v2r8dM9Lu8JzK90ld2OOqspF5uPB+z80JrsU8ZCaZlnSuo27Y5TNlIbPJpuJsCMXMBA3rIXNTgn1GvbMd9vFkTcmVTOzws8FNGKJ+lGDdrTmRCdxg/WEA+4wtOpkDhc8KAkx0TB6SfjM3J9z3HeKLYJjvmFPkQibccGxAMKb1v0q4/i0p6bL4hfWLgSfwO3MyhzvWUW2STlS6Z5jdKOlgssPxMUUSzM6ZJJnwcLCHaDBB+kcKhtxqS4683kyxfrGZSbyHpTIhE77X00hdhF5cmeL6dnPCenGA/r1B6p4hvO86dTJx8NRzThJekHcKQOamFNuA/s1w6HsOGKdKJo6Es/t1CLlYIemitQBkivXzKVL3ELNjrmTi0pfLSd0O8SUgTHtGm/bFNOinJwsKDkS15EnmHOFjXFYIHwxV9t/MypHodlL3Q1KnW7MeMj8uUbQd+xtyiWQDZpjdIdldGTXDMUeAPQ/Og0xMv9lQkHnCBxBn8WZmefeXJ5C7rhCTuGTiFjw2KaBn3ZXVb2bWF7ktdqyrYdeTsyLTe5YCXo62DA3XmpBOkvAcfuokv38WZMI5zibShe/1Jxkbjkk5+rJkjweE90XDvhPSJhMhD5eSuu3CZ3BOEs8ThD4u+cBzYHimOENMvGTCTcUmn/+h8Pt7SWKnGa2r9R2SJt6TE5nPmF0YwM5XpEUmzux/ndR9U/jkDmkAQztSob1etYjHPZnHSfKZvTxA6lU2ycY3hM/5QJPZGerA6s/JaFHe028UMn6NkigIGcfhcS50Y87tghtxtoOfa4UMMWHJQZ6ez5O6iLJbLsUAnAM46PPLDNe5DGAfNjHVF4TMk8SQicxZngxUnjjS3grY53yH/nwhMpgxZCK0gc0TsDLHmWLZADs9TOoOEyLEpA9RCLvY9Z69CPCFmFwoPSTU6IlMeHrYUBBMkF4K/LgAe11P6n5AevC8dUfmkcJnOt4g6YaCxAGuncKWEqLlfiZRqrazJeOkEQQuE/48Kvjo8k7PrjrWV3znJBFi+XZBjIM+YZdiUo0vK65P/ItEWSifLkh7YTd41W4k9Zfa2rOdfTPRaTatCqb+txbom/5jiZz7XfUN+4WrJKOj6SRuET6Hw0hzJlDDbItjyOwMjdhZEKPgauFzCb3dJUoyUZTkyd47PedJjRCTWp2BG469UQd5cX5XoG+4JyIO3/DjCtT23wqf92iw1NjwqCYTd12xWy/I7jGtQMbAWvgQ5zMnFGwyNEP4jGQTpequtGoysSnK3kKHScZrBTLEsBjP7FMwMtcJH2LSXL1UqSTzRMc3FZUuLJgh4iS22FrAtedi8d3peUI1mc3iCwWBN6KtYEZYG4PQJwtI5jazr4f85koyvyP8XZVPSPy7KtMEsk4+6NS/V4qJ+8V3p+d5nWRikc2m3mwXn7c/a2CG9y9Sd47kv7fZ3ZJvomPJB/76gczRwu+K3FQgz0kt/F2iTFg9EfoDG56KDNiZvdMTE7mjQOYY8oG3hA/myhOrVD6tcrfKe1WfIf7ndInywHaUoC8XO0aaMRhiR5HKSd5VmcUbit15bOgiWTFSfv9N5VUpF2BvbBYwKetG4c1kjmFvsaGpbMDM8A/2tr4q5QRuMmJ2VfYDmXsQimtqDFkB2WCHcHdqt/Qh14t7B5vmCubY5HaQ+U9CET7PkcGmuQC2Z2JnN4DMZ8hCHxRHQG5AIsB1lCuF26p7tp95Gk4nlDFRwhn91RIdvOkItk4NIA8bB4cKv+f6BMi8zxbQzENN9naGN7RYgKfofhCISO+Hgj1KDfC3vvNtRL6B7cEmpcR24++/Qyu2j2YFu5QSs4y///mdxGbzHcE2pcIdUhEkUEkmZqcIsbwz2KgUuNP46qhFJoCMkMhQ7LnJNSBbtBk/Y6Uqg2et5UiHvbojjP32YL9CoN34GGH8/N86v7tzFy9KFFCMk11nqhxlBSFmc1CwbepAsBm2wLBJjXu0EUryencP/EeAAQAzXxXnxQN4GwAAAABJRU5ErkJggg=="> </div> <h2 style="font-family: \'designk-bold\', \'Arial\'; font-size: 30px; line-height: 120%;">A System Error has occurred</h2> <h3 style="font-family: \'designk-medium\', \'Arial\'; font-size: 25px; line-height: 120%; padding-bottom: 5px;">Please try your request again later</h2> <p><a href="mailto: admin@kia.com">CONTACT SUPPORT &gt;</a></p> </div> <div class="error-promos"> <a href="http://kia.com/us"> <div class="error-promo"> <img src="{{\'/img/soul_404_error_page_international_site_S.jpg\' | paths:\'staticURI\'}}" alt="Cruise on over"/> <h2>Cruise on over</h2> <p>There\'s much more to explore.</p> </div> </a> <a href="http://www.kia.com/worldwide/goto-local.aspx"> <div class="error-promo"> <img src="{{\'/img/soul_404_error_page_soul-2.0_S.jpg\' | paths:\'staticURI\'}}" alt="Let\'s go home"/> <h2>Let\'s go home</h2> <p>Kia International will help you find your local site by region and country.</p> </div> </a> </div>');$templateCache.put("/us/static/views/accessories.html",'<div vehicle-grid target="features"></div>');$templateCache.put("/us/static/views/accessories/accessoriesPage.html",'<div class="accessories-section" accessories-interaction> <div class="accessories-tile-holder" tile-layout max-cols=\'6\' fixed=\'false\' tl-id=\'accessories-layout\' detail-id=\'accessories-detail\' excludePadd=\'true\' collection=\'accessories\' expand-last=\'false\' mobile=\'mobile\' no-compile-detail=\'false\'> <div class="box" ng-repeat=\'acc in collection()\' acc-iterator> <div acc-box acc=\'acc\' mobile=\'mobile\' ng-click=\'showDetail()\'> <div ng-class="{false:\'acc-box\',true:\'acc-box selected\'}[accSelected]"> <div class="acc-title" ng-show=\'accSelected\'> <p acc-line-fix>{{acc.name}}</p> <span class=\'arrow\'></span> </div> <div ng-class="{false:\'acc-data\',true:\'acc-data hidden\'}[accSelected]"> <label class=\'label\'>{{acc.name}}</label> <p class="price" ng-show="false">${{acc.price}}*</p> </div> <div ng-class="{false:\'acc-image\',true:\'acc-image hidden\'}[accSelected]"> <img ng-src=\'{{acc.thumbURL}}\' alt="{{acc.name}}" title="{{acc.name}}"> <div ng-class="{\'video-play\': acc.isVideo}"></div> </div> </div> </div> </div> <div class="accessories-detail" id=\'accessories-detail\' acc-tile-detail> <div class="close-detail" ng-click="closeCurrentDetail()"><span>&nbsp;</span></div> <div class="content"> <div class="acc-data"> <div class="label"> <label>{{currentTileData.name}}</label> </div> <div class="price" ng-show="false"> <span class=\'amount\'>$ {{currentTileData.price}} *</span> </div> </div> <div class="text"> <p>{{currentTileData.description}}</p> </div> <div class="prices-table" ng-show="false"> <div class=\'prices-list\'> <div class="prices-group"> <p class=\'qualifier\'>&nbsp;</p> <p class=\'price title\'>{{\'label.vehicleFeatures.msrp\'|i18n}}</p> </div> </div> <div class="prices-list" id=\'price-list-{{currentTileData.id}}\'> </div> </div> <div class="text" ng-show="currentTileData.hasDisclaimer"> <p class="disclaimer" ng-click="showDisclaimer()">{{\'label.build.summary.disclaimers\' | i18n}}&nbsp;<span class=\'caret\'>&gt;</span></p> </div> </div> <div class="video" ng-show="currentTileData.isVideo"> <figure> <iframe ng-show="currentTileData.videoPlayer==\'yahoo\'" scrolling="no" frameborder="0" ng-src="{{currentTileData.videoId | yahooEmbedUrl}}" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe> <iframe ng-show="currentTileData.videoPlayer==\'youtube\'" type="text/html" ng-src="{{currentTileData.videoId | youtubeEmbedUrl}}" wmode="transparent" frameborder="0" allowfullscreen></iframe> </figure> </div> <div class="image" ng-hide="currentTileData.isVideo"> <img id=\'accImage\' ng-src="{{currentTileData.largeURL}}" alt="{{currentTileData.name}}" title="{{currentTileData.name}}"> </div> <div class="clear"></div> </div> <div class="clear"></div> </div> <div class="accessories-mobile-detail close" id=\'acc-mobile-detail\' ng-show=\'mobile\'> <div class="header"> <div class="back-holder" ng-click=\'closeMobileDetail()\'> <div class="back"></div> </div> <h2>{{mobileData.name}}</h2> </div> <div class=\'detail\'> <div class="acc-data"> <label class=\'label\' for="">{{mobileData.name}}</label> <p class="price" ng-hide="true"> ${{mobileData.price}}* </p> </div> <div class="video" ng-show="mobileImageReady && mobileData.isVideo"> <figure> <iframe ng-show="mobileData.videoPlayer==\'yahoo\'" scrolling="no" frameborder="0" ng-src="{{mobileData.videoId | yahooEmbedUrl}}" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe> <iframe ng-show="mobileData.videoPlayer==\'youtube\'" type="text/html" ng-src="{{mobileData.videoId | youtubeEmbedUrl}}" wmode="transparent" frameborder="0" allowfullscreen></iframe> </figure> </div> <div class="acc-image" ng-show=\'mobileImageReady && !mobileData.isVideo\'> <img ng-src="{{mobileData.largeURL}}" alt="{{mobileData.name}}" title="{{mobileData.name}}"> </div> <div class="content"> <p class="description" id=\'mobileDetailDesc\'></p> <div class="prices-table" ng-show="false"> <div class=\'prices-list\'> <div class="prices-group"> <p class=\'qualifier title\'>&nbsp;</p> <p class=\'price title\'>{{\'label.vehicleFeatures.msrp\' | i18n}}</p> </div> </div> <div class="prices-list"> <div class=\'prices-group\' ng-repeat=\'price in mobileData.msrps\'> <p class=\'qualifier title\'>{{price.qualifier}}</p> <p class=\'price\'>${{price.msrp}}*</p> </div> </div> </div> <p class="disclaimer" id=\'mobileDetailDisc\'>{{\'label.build.summary.disclaimers\' | i18n}}&nbsp;<span class=\'caret\'>&gt;</span></p> </div> <div class="clear"></div> </div> </div> </div> ');$templateCache.put("/us/static/views/accordion.html",'<div content-accordion class="content-accordion kia-palette-320"> <div accordion-item class="accordion-item" title="No expandable content" expandable="false"></div> <div accordion-item class="accordion-item" title="Expandable, title and detail text only"> Kia has introduced the Tire Mobility Kit (TMK) in lieu of the traditional temporary spare tire in some of its newer models. This is a trend in the automotive industry to improve fuel efficiency by lessening vehicle weight. In addition to reducing weight, this also increases the rear cargo space area of the vehicle. Your Tire Mobility Kit is located in the trunk under the floorboard cover. Please refer to your Owner\'s Manual for specific directions. In the event of an untimely tire issue, Kia Roadside Assistance can also provide service if there are any issues in using your Tire Mobility Kit. Kia recognizes that some customers may prefer the compact spare tire in their vehicle. A compact spare tire kit (which will include a tire jack) is available for purchase as an accessory on some Kia models. To find information on how to purchase Kia genuine parts and accessories, please contact your local Authorized Kia Dealer by clicking HERE. </div> <div accordion-item class="accordion-item" title="Expandable, title and detail text with disclaimer"> Kia has introduced the Tire Mobility Kit (TMK) in lieu of the traditional temporary spare tire in some of its newer models. This is a trend in the automotive industry to improve fuel efficiency by lessening vehicle weight. In addition to reducing weight, this also increases the rear cargo space area of the vehicle. Your Tire Mobility Kit is located in the trunk under the floorboard cover. Please refer to your Owner\'s Manual for specific directions. In the event of an untimely tire issue, Kia Roadside Assistance can also provide service if there are any issues in using your Tire Mobility Kit. Kia recognizes that some customers may prefer the compact spare tire in their vehicle. A compact spare tire kit (which will include a tire jack) is available for purchase as an accessory on some Kia models. To find information on how to purchase Kia genuine parts and accessories, please contact your local Authorized Kia Dealer by clicking HERE. <span disclaimers-link class="disclaimers-link" disclaimers-content="true"> {{\'label.build.summary.disclaimers\' | i18n }} &gt; <span class="disclaimers-content"> Some legal disclaimer text </span> </span> </div> <div accordion-item class="accordion-item" title="Expandable, title, image, detail text. No disclaimers" src-small="/content/media/mediabin/content_pages///other-kia-sites/kia-media/kia-media_001--kia-480x-jpg.jpg" src-medium="/content/media/mediabin/content_pages///other-kia-sites/kia-media/kia-media_001--kia-960x-jpg.jpg" src-large="/content/media/mediabin/content_pages///other-kia-sites/kia-media/kia-media_001--kia-1920x-jpg.jpg" img-alt="image alt text"> Kia has introduced the Tire Mobility Kit (TMK) in lieu of the traditional temporary spare tire in some of its newer models. This is a trend in the automotive industry to improve fuel efficiency by lessening vehicle weight. In addition to reducing weight, this also increases the rear cargo space area of the vehicle. Your Tire Mobility Kit is located in the trunk under the floorboard cover. Please refer to your Owner\'s Manual for specific directions. In the event of an untimely tire issue, Kia Roadside Assistance can also provide service if there are any issues in using your Tire Mobility Kit. Kia recognizes that some customers may prefer the compact spare tire in their vehicle. A compact spare tire kit (which will include a tire jack) is available for purchase as an accessory on some Kia models. To find information on how to purchase Kia genuine parts and accessories, please contact your local Authorized Kia Dealer by clicking HERE. </div> <div accordion-item class="accordion-item" title="Full accordion item" src-small="/content/media/mediabin/content_pages///other-kia-sites/kia-media/kia-media_001--kia-480x-jpg.jpg" src-medium="/content/media/mediabin/content_pages///other-kia-sites/kia-media/kia-media_001--kia-960x-jpg.jpg" src-large="/content/media/mediabin/content_pages///other-kia-sites/kia-media/kia-media_001--kia-1920x-jpg.jpg" img-alt="image alt text"> Kia has introduced the Tire Mobility Kit (TMK) in lieu of the traditional temporary spare tire in some of its newer models. This is a trend in the automotive industry to improve fuel efficiency by lessening vehicle weight. In addition to reducing weight, this also increases the rear cargo space area of the vehicle. Your Tire Mobility Kit is located in the trunk under the floorboard cover. Please refer to your Owner\'s Manual for specific directions. In the event of an untimely tire issue, Kia Roadside Assistance can also provide service if there are any issues in using your Tire Mobility Kit. Kia recognizes that some customers may prefer the compact spare tire in their vehicle. A compact spare tire kit (which will include a tire jack) is available for purchase as an accessory on some Kia models. To find information on how to purchase Kia genuine parts and accessories, please contact your local Authorized Kia Dealer by clicking HERE. <span disclaimers-link class="disclaimers-link" disclaimers-content="true"> {{\'label.build.summary.disclaimers\' | i18n }} &gt; <span class="disclaimers-content"> Some legal disclaimer text </span> </span> </div> </div>');
$templateCache.put("/us/static/views/bluetooth/btFootnotes.html",'<div class="footnotes-page"> <div> <ul> <li ng-show="currentBluetoothFootnote===footnote.code" ng-repeat="footnote in footnotes | orderBy:\'code\'" class="{{\'footnote footnote-\' + footnote.code}}"><div>{{footnote.description}}</div></li> </ul> </div> </div> ');$templateCache.put("/us/static/views/bluetooth/selectAudioSystem.html",'<div class="select-audio-system-form"> <h1>{{\'label.bluetooth.audioSystem\' | i18n}}</h1> <div class="form-wrapper"> <ul class="audio-list"> <li ng-repeat="list in audioLists"> <div class="radio radio{{$index}}"> <span> <input type="radio" ng-model="$parent.audioRadiobox" value="{{list.id}}" ng-click="onChange(list.id,{{$index}},list.name)" name="audioSystem"/> </span> </div> <div class="label clearfix"> <label>{{list.name}}</label> </div> <div class="select-audio-image"><img ng-src="{{content}}{{list.imageUrl}}"/></div> </li> </ul> <span ng-hide="audioSystemName">{{audioSystemName}}</span> </div> </div> <div class="button-section-container"> <div class="button-section"> <div class="next-section-button" ng-class="{\'disableBtn\': !isAudioSelected}"> <div ng-click="!isAudioSelected || gotoSelectDevice(selectedModel, selectedYear, audioRadiobox,0)"> <div class="text">{{\'labe.bluetooth.next\' | i18n}}</div> <button class="arrow arrow-pos"></button> </div> </div> <a href="#" prevent-default class="prev-link" ng-click="gotoSelectVehicle()"> &lt;&nbsp;{{\'label.bluetooth.device.previous\' | i18n}}</a> </div> </div> ');$templateCache.put("/us/static/views/bluetooth/selectDevice.html",'<div class="select-device-form"> <h1>{{\'label.bluetooth.selectDevice\' | i18n}}</h1> <div class="select-device-image" ng-show="isDeviceSelected"> <img ng-src="/us/k3{{images.modal.carrier}}"/> <img ng-src="/us/k3{{images.modal.manufacturer}}"/> <img ng-src="/us/k3{{images.modal.device}}"/> </div> <div> <div class="form-wrapper">	<div class="select-container ng-hide"> <select class="option-select"> <option>test</option> <option value="1">test</option> </select> </div> <div class="select-container"> <select ng-model="modelCarrier" class="option-select" name="carrier" ng-options="carrier.name for carrier in carriers" ng-change="updateManufacturer(selectedModel, selectedYear, audioRadiobox, modelCarrier)"> <option value="">{{\'label.bluetooth.carriers\' | i18n}}</option> </select> </div> <div class="select-container" ng-class="{\'disabled\': !carrierSelected}"> <select ng-disabled=\'!carrierSelected\' ng-model="modelManufacturers" class="option-select" name="year" ng-options="manufacturer.name for manufacturer in manufacturers" ng-change="updateDevices(selectedModel, selectedYear, audioRadiobox, modelCarrier, modelManufacturers)"> <option value="">{{\'label.bluetooth.manufacturers\' | i18n}}</option> </select> </div> <div class="select-container device-select" ng-class="{\'disabled\': !manufacturerSelected}"> <div> <span ng-hide="optionSelected" class="device-selected" ng-click="!manufacturerSelected || showDeviceDropdown()">{{selectedDevice}}</span> <span ng-hide="optionSpan" class="device-selected" ng-click="!manufacturerSelected || showDeviceDropdown()" prevent-default ng-model="deviceValue">{{\'label.bluetooth.devices\' | i18n}}</span> <div ng-hide="deviceDropdown" class="device-dropdown"> <ul> <li ng-repeat="device in devices"> <span class="device-info radio radio{{$index}}"><span><input type="radio" ng-click="selectDeviceOption(device.name,device,{{$index}})" name="device" ng-model="$parent.modelDevice" value="{{device}}"></span></span> <span class="device-info device-name">{{device.name}}</span> <span class="device-image"> <span class="helper"></span> <img ng-src="/us/k3{{device.thumbUrl}}" alt=""/> </span> <span class="clear"></span> </li></ul> </div> </div> </div> </div> <div class="button-section"> <div class="next-section-button" ng-class="{\'disableBtn\': !isDeviceSelected}"> <div ng-click="!isDeviceSelected || redirectToHub(selectedModel, selectedYear, audioRadiobox, modelCarrier, modelManufacturers, modelDevice)"> <div class="text">{{\'labe.bluetooth.next\' | i18n}}</div> <button class="arrow"></button> </div> </div> </div> <a href="#" prevent-default class="prev-link" ng-click="backPage(audioRadioboxlength)">&lt;&nbsp;{{\'label.bluetooth.device.previous\' | i18n}}</a> <p>{{\'label.bluetooth.device.message1\' | i18n}}<br/> {{\'label.bluetooth.device.message2\' | i18n}} </p> </div> </div>');$templateCache.put("/us/static/views/bluetooth/selectVehicle.html",'<div class="select-vehicle-form"> <h1>{{\'label.bluetooth.selectVehicle\' | i18n}}</h1> <div class="select-vehicle-image" ng-show="isYearSelected"><img ng-src="/us/k3{{images.modal.vehicle}}"/></div> <div> <div class="form-wrapper"> <div class="select-container"> <select ng-model="selectedModel" class="option-select" name="model.name" ng-options="vehicle.name for vehicle in vehicles" ng-change="updateYears(selectedModel);selectedYear=\'0\'" id="selectedModel"> <option value="">{{\'label.bluetooth.model\' | i18n}}</option> </select> </div> <div class="select-container" ng-class="{\'disabled\': !modelSelected}"> <select ng-disabled=\'!modelSelected\' ng-model="selectedYear" class="option-select" name="year" ng-options="year for year in years" ng-change="setYear(selectedYear)"> <option value="">{{\'label.bluetooth.year\' | i18n}}</option> </select> </div> <div class="button-section"> <div class="next-section-button" ng-class="{\'disableBtn\': !isYearSelected}"> <div ng-click="!isYearSelected || gotoAudioSystem(selectedModel,selectedYear)"> <div class="text">{{\'labe.bluetooth.next\' | i18n}}</div> <button class="arrow"></button> </div> </div> </div> <p ng-hide="!noAudioSystem"></p> </div> </div> </div> ');$templateCache.put("/us/static/views/buildAndPrice/availableColors.html",'<div class="availableColors"> <span class="title">{{ \'label.build.availableColors\' | i18n }}</span> <ul> <li class="color" ng-style="style" ng-repeat="style in styles"> <img ng-src="{{pattern}}" alt=""> </li> </ul> </div>');$templateCache.put("/us/static/views/buildAndPrice/buildAndPrice.html",'<div nav-secondary type="vehicle" selected="build" series="{{series}}" year="{{year}}" ng-if="!showVehicleSelector"></div> <div vehicle-grid target="build" ng-show="showVehicleSelector"></div> <section class="buildAndPrice" responsive-handler bnp-interaction ng-hide="showVehicleSelector"> <div class="zipcode-overlay" ng-hide=\'zipCodeAvailable\'> <div class="zipcode"> <div zip-code-form id=\'bnpZipCode\' theme=\'zip-code-form-bnp\' error-message="{{\'label.dealerLocator.error\' | i18n}}" placeholder="{{\'label.build.zipcode\' | i18n}}" model=\'data.zipCode\' request="submitZipForm()"> <div class="zip-submit" title="Submit ZIP Code" ng-click="submitZipForm()" ng-show="validZipCode"> <span class="zip-submit-arrow">{{\'label.build.zipcode\' | i18n}}</span> </div> <div class="zip-error" ng-hide=\'validZipCode\'> <p>{{initialErrorMessage}}</p> </div> </div> <div class="zip-message"> {{\'label.build.zipcode.select\' | i18n}} <div class="findme" title="{{\'label.build.findMe\' | i18n}}" ng-click="findMe()">{{\'label.build.findMe\' | i18n}}</div> {{\'label.build.zipcode.bottomline\' | i18n}} </div> </div> </div> <div class="ui-scrollfix-nowrap" ui-scrollfix-ghost=\'100\' ui-scrollfix-ghost-min-width=\'680\'> <div class="topbar" ng-class="platform"> <div class="topbar-row"> <div class="breadcrumbs"> <a href="#" class="title" ng-click="openMenu()" prevent-default> <span>{{current.id+1}}. {{current.section.navigation.name | i18n}}</span> <span class="arrow" ng-class="{open:displayMobileNavigation}"></span> </a> <div class="breadcrumbs-table"> <ul ng-class="{true:\'visible\',false:\'\'}[displayMobileNavigation]"> <li kia-ng-repeat="section in sections" ng-class="{true:\'selected\',false:\'\'}[section.navigation.selected]"> <a href="" ng-click="setSection(section)" ng-class="section.navigation.name|i18n|lowercase" prevent-default> {{section.navigation.name | i18n}}<span ng-if="section.navigation.colon" class="colon">:</span><span navigation-info class="navigation-info"></span> </a> </li> </ul> </div> </div> <div class="price-summary" ng-class="{displayCalculator:displayCalculator}"> <div class="price-summary-wrap"> <span class="total-price-estimate">{{data.price.msrp | noFractionCurrency:false}}</span>	<script type="text/javascript" src="https://ebusiness.qa.dealertrack.com/Suite/suite.js" widget="customButton"></script>	<span class="monthly-price-estimate" ng-hide="$root.hidePaymentCalculator" dt-cta-payment-calculator data-hide-payment-calculator="hidePaymentCalculator" data-kia-model-id="data.model.current.code" data-zip-code="data.zipCode" data-price="data.price.msrp" data-msrp="data.price.msrp" data-series-name="series" data-series-year="year" data-section="\'build\'" data-drive-train="data.model.current.drive" data-trim-name="data.trim.current.name" suitequerystring="{{excludFunc()}}&{{defaultFinanceTypeFunc()}}&{{modelStyleFunc()}}&accountId=2525556&kiaModelId={{kiaModelId}}&zip={{zipCode}}&price={{price}}&msrp={{msrp}}&year={{seriesYear}}&picture={{picture}}" widget="customButton"> <a href="" class="icon-calculator"> <span class="icon-label">{{\'label.paymentCalculator.calculate\' | i18n}}<br/>{{\'label.paymentCalculator.payment\' | i18n}}</span> </a> </span> </div> </div> </div> </div> </div> <div class="buildAndPrice-sectionInclude" ng-include="static + \'/views/buildAndPrice/\' + current.section.navigation.template"></div> <div ng-switch="mobile"> <div ng-switch-when="false"> <div ng-switch="details.showPackageDetails"> <div ng-switch-when="true" id="package-detail" class="package-detail-section" package-detail></div> </div> </div> </div> <div class="bottom-bar"> <ul class="summary"> <li class="requestUpdate" ng-hide="data.showInventory || hideForDealer"><a href="{{base}}/forms/updatesrequest/{{data.serie.key}}/{{data.serie.year}}">{{\'label.general.keepMeUpdated\' | i18n}}</a></li> <li class="inventory" ng-show="data.showInventory"><a href="{{getInventoryDeeplink()}}">{{\'label.build.summary.find\' | i18n}} {{data.serie.year}} {{data.serie.name}} {{\'label.build.near\' | i18n}} {{data.zipCode}}</a></li> <li class="quote" ng-show="data.showInventory"><a href="{{getQuoteLink()}}" target="_self">{{\'label.general.getAQuote\' | i18n}}</a></li> <li class="testDrive" ng-show="data.showInventory"><a href="{{getTestDriveLink()}}" target="_self">{{\'label.build.requestTestDrive\' | i18n}}</a></li> </ul> </div> </section> <div footer-secondary type="footer" selected="build" series="{{series}}" year="{{year}}" ng-if="!showVehicleSelector"></div> ');$templateCache.put("/us/static/views/buildAndPrice/color.html",'<div class="build-colors" bnp-colors screen-size> <div class="top content-table"> <div class="content-row"> <div ng-show="width> screenSize.tablet"> <a class="next-section-button" ng-class="{\'next-section-button-interior\':colorsOptions.interior.selected}" ng-click="nextSection()" prevent-default> <span class="text">{{\'label.build.next\' | i18n}} <span>{{sections[current.id + 1].navigation.name | i18n}}</span></span> <span class="arrow"></span> </a> </div> <a class="switch" ng-hide="width> screenSize.tablet" ng-click="switchColorsView()"> <span ng-show="colorsOptions.exterior.selected">{{\'label.build.viewInterior\' | i18n}}</span> <span ng-show="colorsOptions.interior.selected">{{\'label.build.viewExterior\' | i18n}}</span> </a> <div bnp-colors-detail ng-show="width> screenSize.tablet"></div> <div class="gallery"> <div class=\'table-inner\'> <div ng-switch="colorsOptions.interior.selected" ng-class="isIpadPano(data.colors.interior.current.isFishEyeAvailable)"> <div ng-if="data.colors.interior.current.isFishEyeAvailable"> <div ng-switch-when="true" fish-eye-viewer touch="true" id="colorInterior" path="{{data.colors.imageSet}}interior/{{data.colors.interior.current.baseHex}}/{{data.colors.interior.current.fabric.file}}/" arc="5" x="{{data.serie.panorama.interior.x}}" frames="{{data.serie.panorama.interior.frames}}" pattern="{{data.serie.panorama.pattern}}" update="updateThumbnail(colorsOptions.interior)" obj="colorsOptions.interior" type="interior" active="colorsOptions.interior.selected"></div></div> <div ng-if="!data.colors.interior.current.isFishEyeAvailable"> <div ng-switch-when="true" panorama touch="true" id="colorInterior" path="{{data.colors.imageSet}}interior/{{data.colors.interior.current.baseHex}}/{{data.colors.interior.current.fabric.file}}/" arc="5" x="{{data.serie.panorama.interior.x}}" frames="{{data.serie.panorama.interior.frames}}" pattern="{{data.serie.panorama.pattern}}" update="updateThumbnail(colorsOptions.interior)" obj="colorsOptions.interior" type="interior" active="colorsOptions.interior.selected"></div></div> </div> <div ng-switch="colorsOptions.exterior.selected" class="exterior"> <div ng-switch-when="true" panorama touch="true" id="colorExterior" path="{{data.colors.imageSet}}exterior/{{data.colors.exterior.current.baseHex}}/" arc="18" x="{{data.serie.panorama.exterior.x}}" frames="{{data.serie.panorama.exterior.frames}}" pattern="{{data.serie.panorama.pattern}}" update="updateThumbnail(colorsOptions.exterior)" obj="colorsOptions.exterior" active="colorsOptions.exterior.selected"></div> <div class="disclaimers"><a href="#" prevent-default global-disclaimers-link disclaimers-title="{{\'label.build.summary.disclaimers\' | i18n}}" ng-class="{\'active\':global.active}">{{\'label.build.summary.disclaimers\' | i18n}}</a></div> </div> </div> </div> <div class="detail initialized" ng-hide="width> screenSize.tablet"> <h3>{{data.colors.exterior.current.name}}</h3> <h4>{{\'label.build.with\' | i18n}} <span class="interior">{{data.colors.interior.current.name}}</span> <span class="fabric">{{data.colors.interior.current.fabric.name}}</span></h4> </div> </div> </div> <div class="colors"> <div id="colorsSelector"> <ul class="exterior"> <li ng-repeat="combo in data.colors.exterior.list.collection" ng-class="{true:\'selected\'}[combo.value.selected]"> <span class="label"> <span class="exterior"> <span class="text">{{\'label.build.exterior\' | i18n}}</span> <span class="mobile">{{\'label.build.exterior\' | i18n | truncate:3}}</span> </span> <span class="interior"> <span class="left"></span> <span class="text">{{\'label.build.interior\' | i18n}}</span> <span class="mobile">{{\'label.build.interior\' | i18n | truncate:3}}</span> <span class="right"></span> </span> </span> <span class="wrap"> <a prevent-default class="color-item" id="exterior-{{combo.value.id}}" ng-click="onColorExterior(combo.value.id)"> <span color-block key="{{combo.value.id}}" color="#{{combo.value.baseHex}}" property="exteriorColor" selected="combo.value.selected"></span> </a> <ul class="interior"> <li ng-repeat="interior in combo.value.interior.collection"> <a prevent-default class="color-item" id="combo-{{combo.value.id}}-{{interior.value.id}}" ng-click="onColorInterior(interior.value.id)"> <span color-block key="{{interior.value.id}}" color="#{{interior.value.baseHex}}" property="interiorColor" selected="interior.value.selected" fabric="{{interior.value.fabric.texture}}"></span> </a> </li> </ul> </span> <span class="after"></span> <span class="before"></span> </li> </ul> </div> </div> <div ng-hide="width> screenSize.tablet"> <a href="#" prevent-default ng-click="nextSection()" class="next-section-button"> <span class="text">{{\'label.build.next\' | i18n}} <span>{{sections[current.id + 1].navigation.name | i18n}}</span></span> <span class="arrow"></span> </a> </div> <div dependencies-box handler-id="{{dependencies.handlerId}}" type="colors" box-id="dependencies-color-box" item="dependencies.item" name="{{dependencies.label|i18n}}" open="dependencies.checking"></div> </div> ');$templateCache.put("/us/static/views/buildAndPrice/colorDetail.html",'<div class="detail"> <div class=\'table-inner\'> <div class="detail-table"> <div class="detail-row"> <div class="detail-title"> <h2>{{\'label.build.chooseYourColor\' | i18n}}</h2> <h3>{{data.colors.exterior.current.name}}</h3> <h4>{{\'label.build.with\' | i18n}} <span class="interior">{{data.colors.interior.current.name}}</span> <span class="fabric">{{data.colors.interior.current.fabric.name}}</span></h4> </div> <div class="detail-thumbnail"> <div class="thumbnail" ng-click="switchColorsView()" ng-class="{true:\'exterior\',false:\'interior\'}[colorsOptions.exterior.selected]" ng-switch on="colorsOptions.exterior.selected"> <span class="cta"></span> <div ng-if="data.colors.interior.current.isFishEyeAvailable"> <img ng-switch-when="true" ng-src="{{data.colors.imageSet}}interior/{{data.colors.interior.current.baseHex}}/{{data.colors.interior.current.fabric.file}}/320x213/static-image.jpg"/> </div> <div ng-if="!data.colors.interior.current.isFishEyeAvailable"> <img ng-switch-when="true" ng-src="{{data.colors.imageSet}}interior/{{data.colors.interior.current.baseHex}}/{{data.colors.interior.current.fabric.file}}/480x255/90-0-0.jpg"/> </div> <img ng-switch-when="false" ng-src="{{colorsOptions.exterior.thumbnail}}"/> </div> <a class="switch" ng-click="switchColorsView()"> <span ng-show="colorsOptions.exterior.selected">{{\'label.build.viewInterior\' | i18n}}</span> <span ng-show="colorsOptions.interior.selected">{{\'label.build.viewExterior\' | i18n}}</span> </a> </div> </div> </div> </div> </div>');$templateCache.put("/us/static/views/buildAndPrice/dependenciesBox.html",'<div class="dependencyBox-container"> <div lightbox open="open" id="dBox-{{boxId}}" handler-id="{{handlerId}}" valign="top"> <div class="dependencyBox"> <div ng-switch on="type"> <div ng-switch-when="colors"> <h1>{{content.title}}</h1> <div ng-repeat="dependencyType in dependency.types"> <div class="block" ng-show="dependency[dependencyType].require.length> 0"> <p class="headline full" ng-show="dependency[dependencyType].first">{{\'label.build.colors.selectingThis\'|i18n}} {{name}} {{\'label.build.colors.requires\'|i18n}}</p> <p class="headline and" ng-hide="dependency[dependencyType].first">{{\'label.build.also\'|i18n}} {{\'label.build.colors.requires\'|i18n}}</p> <div class="item" ng-repeat="itemDependency in dependency[dependencyType].require"> <p class="conector" ng-show="$index> 0">{{\'label.build.colors.and\'|i18n}}</p> <p class="info"> <span class="name">{{itemDependency.content.name}}</span> <span class="price"><span class="price-tag add">{{itemDependency.content.price | noFractionCurrency}}</span></span> </p> <img ng-src="{{itemDependency.content.image}}" ng-show="itemDependency.content.image"/> </div> </div> <div class="block" ng-show="dependency[dependencyType].requireOr.length> 0"> <p class="headline full" ng-show="dependency[dependencyType].first && dependency[dependencyType].require.length==0">{{\'label.build.colors.selectingThis\'|i18n}} {{name}} {{\'label.build.colors.requires\'|i18n}}</p> <p class="headline and" ng-hide="dependency[dependencyType].first && dependency[dependencyType].require.length==0">{{\'label.build.also\'|i18n}} {{\'label.build.colors.requires\'|i18n}}</p> <div class="item" ng-repeat="itemDependency in dependency[dependencyType].requireOr"> <p class="conector" ng-show="$index> 0">{{\'label.build.colors.and\'|i18n}}</p> <p class="info"> <span class="name">{{itemDependency.content.name}}</span> <span class="price"><span class="price-tag add">{{itemDependency.content.price | noFractionCurrency}}</span></span> </p> <img ng-src="{{itemDependency.content.image}}" ng-show="itemDependency.content.image"/> </div> </div> <div class="block" ng-show="dependency[dependencyType].deny.length> 0"> <p class="headline full" ng-show="dependency[dependencyType].first && dependency[dependencyType].require.length==0 && dependency[dependencyType].requireOr.length==0">{{\'label.build.colors.selectingThis\'|i18n}} {{name}} {{\'label.build.colors.removes\'|i18n}}</p> <p class="headline and" ng-hide="dependency[dependencyType].first && dependency[dependencyType].require.length==0 && dependency[dependencyType].requireOr.length==0">{{\'label.build.also\'|i18n}} {{\'label.build.colors.removes\'|i18n}}</p> <div class="item" ng-repeat="item in dependency[dependencyType].deny"> <p class="conector" ng-show="$index> 0">{{\'label.build.colors.and\'|i18n}}</p> <p class="info"> <span class="name">{{item.content.name}}</span> <span class="price"><span class="price-tag substract">{{item.content.price | noFractionCurrency}}</span></span> </p> </div> </div> </div> <p class="confirm">{{\'label.build.colors.wouldYouLikeTo\'|i18n}} {{\'label.build.colors.proceed\'|i18n}}?</p> </div> <div ng-switch-default> <div ng-repeat="dependencyType in dependency.types" ng-switch on="dependencyType"> <div ng-switch-when="colors" ng-hide="dependency.colors.empty"> <div class="block"> <div class="item" ng-repeat="itemDependency in dependency.colors.require"> <p>{{\'label.build.colors.the\'|i18n}} <span class="override">{{content.title}}</span> {{\'label.build.colors.overridesYours\'|i18n}} <span ng-show="itemDependency.content.interior">{{\'label.build.colors.interiorColor\'|i18n}}</span><span ng-hide="itemDependency.content.interior">{{\'label.build.colors.exteriorColor\'|i18n}}</span> {{\'label.build.colors.with\'|i18n}} <span class="override">{{itemDependency.content.name}}</span></p> </div> <div ng-hide="dependency.colors.require.length> 0" class="item" ng-repeat="itemDependency in dependency.colors.deny | limitTo:1" ng-switch on="item.selected"> <p ng-switch-when="true">{{\'label.build.colors.removing\'|i18n}} <span class="override">{{itemDependency.target.title}}</span> {{\'label.build.colors.requiresYouToSelectANew\'|i18n}} <span ng-show="itemDependency.content.interior" class="override">{{\'label.build.colors.interiorColor\'|i18n}}</span><span ng-hide="itemDependency.content.interior" class="override">{{\'label.build.colors.exteriorColor\'|i18n}}</span>.</p> <p ng-switch-default>{{\'label.build.colors.selectingThis\'|i18n}} {{\'label.build.colors.package\'|i18n}} {{\'label.build.colors.requiresYouToSelectANew\'|i18n}} <span ng-show="itemDependency.content.interior" class="override">{{\'label.build.colors.interiorColor\'|i18n}}</span><span ng-hide="itemDependency.content.interior" class="override">{{\'label.build.colors.exteriorColor\'|i18n}}</span>.</p> </div> </div> </div> <div ng-switch-default> <div class="block" ng-show="dependency[dependencyType].require.length> 0" ng-switch on="dependency[dependencyType].first && dependency.colors.empty"> <p class="headline full" ng-switch-when="true" ng-switch on="item.selected"><span ng-switch-when="false">{{\'label.build.colors.selectingThis\'|i18n}} {{name}}</span><span ng-switch-when="true">{{\'label.build.colors.removing\'|i18n}} <span class="override">{{item.name}}</span></span> {{\'label.build.colors.requires\'|i18n}}</p> <p class="headline and" ng-switch-when="false">{{\'label.build.colors.and\'|i18n}} {{\'label.build.colors.requires\'|i18n}}</p> <div class="item" ng-repeat="itemDependency in dependency[dependencyType].require"> <p class="conector" ng-show="$index> 0">{{\'label.build.colors.and\'|i18n}}</p> <p class="info"> <span class="name">{{itemDependency.content.name}}</span> <span class="price"><span class="price-tag add">{{itemDependency.content.price | noFractionCurrency}}</span></span> </p> <img ng-src="{{itemDependency.content.image}}" ng-show="itemDependency.content.image"/> </div> </div> <div class="block" ng-show="dependency[dependencyType].requireOr.length> 0" ng-switch on="dependency[dependencyType].first && dependency.colors.empty && dependency[dependencyType].require.length == 0"> <p class="headline full" ng-switch-when="true" ng-switch on="item.selected"><span ng-switch-when="false">{{\'label.build.colors.selectingThis\'|i18n}} {{name}}</span><span ng-switch-when="true">{{\'label.build.colors.removing\'|i18n}} <span class="override">{{item.name}}</span></span> {{\'label.build.colors.requires\'|i18n}}</p> <p class="headline and" ng-switch-when="false">{{\'label.build.colors.and\'|i18n}} {{\'label.build.colors.requires\'|i18n}}</p> <div class="item" ng-repeat="itemDependency in dependency[dependencyType].requireOr"> <p class="conector" ng-show="$index> 0">{{\'label.build.colors.or\'|i18n}}</p> <p class="info"> <span class="name">{{itemDependency.content.name}}</span> <span class="price"><span class="price-tag add">{{itemDependency.content.price | noFractionCurrency}}</span> </p> <img ng-src="{{itemDependency.content.image}}" ng-show="itemDependency.content.image"/> </div> </div> <div class="block" ng-show="dependency[dependencyType].include.length> 0" ng-switch on="dependency[dependencyType].first && dependency.colors.empty && dependency[dependencyType].require.length == 0 && dependency[dependencyType].requireOr.length == 0"> <p class="headline full" ng-switch-when="true" ng-switch on="item.selected"><span ng-switch-when="false">{{\'label.build.colors.selectingThis\'|i18n}} {{name}}</span><span ng-switch-when="true">{{\'label.build.colors.removing\'|i18n}} <span class="override">{{item.name}}</span></span> {{\'label.build.colors.includes\'|i18n}}</p> <p class="headline and" ng-switch-when="false">{{\'label.build.colors.and\'|i18n}} {{\'label.build.colors.includes\'|i18n}}</p> <div class="item" ng-repeat="itemDependency in dependency[dependencyType].include"> <p class="conector" ng-show="$index> 0">{{\'label.build.colors.and\'|i18n}}</p> <p class="info"> <span class="name">{{itemDependency.content.name}}</span> <span class="price"><span class="price-tag add">{{itemDependency.content.price | noFractionCurrency}}</span></span> </p> <img ng-src="{{itemDependency.content.image}}" ng-show="itemDependency.content.image"/> </div> </div> <div class="block dependencies-deny" ng-show="dependency[dependencyType].deny.length> 0" ng-switch on="dependency[dependencyType].first && dependency.colors.empty && dependency[dependencyType].require.length == 0 && dependency[dependencyType].requireOr.length == 0 && dependency[dependencyType].include.length == 0"> <p class="headline full" ng-switch-when="true" ng-switch on="item.selected"><span ng-switch-when="false">{{\'label.build.colors.selectingThis\'|i18n}} {{name}}</span><span ng-switch-when="true">{{\'label.build.colors.removing\'|i18n}} <span class="override">{{item.name}}</span></span> {{\'label.build.colors.removes\'|i18n}}</p> <p class="headline and" ng-switch-when="false">{{\'label.build.colors.and\'|i18n}} {{\'label.build.colors.removes\'|i18n}}</p> <div class="item" ng-repeat="itemDependency in dependency[dependencyType].deny"> <p class="conector" ng-show="$index> 0">{{\'label.build.colors.and\'|i18n}}</p> <p class="info"> <span class="name">{{itemDependency.content.name}}</span> <span class="price"><span class="price-tag substract">{{itemDependency.content.price | noFractionCurrency}}</span></span> </p> </div> </div> </div> </div> <p class="confirm">{{\'label.build.colors.wouldYouLikeTo\'|i18n}} {{\'label.build.colors.proceed\'|i18n}}?</p> </div> </div> <div class="buttons"> <div class="no" ng-click="onClose()">{{\'label.build.colors.no\'|i18n}}</div> <div class="yes" ng-click="onAccept()">{{\'label.build.colors.yes\'|i18n}}</div> </div> </div> </div> </div>');$templateCache.put("/us/static/views/buildAndPrice/options.html",'<section class="options-section" ng-controller="optionsController" options-interaction> <h1>{{\'label.build.chooseYourOptions\' | i18n}}</h1> <div class="next-step"> <a class="next-section-button" ng-click="nextSection()" prevent-default> <p class="text">{{\'label.build.next\' | i18n}} <span>{{\'label.build.summary\' | i18n}}</span></p> <span class="arrow"></span> </a> </div> <div class="options-holder" tile-layout max-cols=\'8\' fixed=\'false\' tl-id=\'options-tl\' detail-id=\'option-detail\' collection=\'options\' expand-last=\'false\' mobile=\'mobile\'> <div class="box" ng-repeat=\'option in collection()\' option-iterator> <div option-box opt=\'option\' mobile=\'mobile\'> <div ng-class="{false:\'option-box\',true:\'option-box selected\'}[opt.value.selected]"> <div class="option-title" ng-show=\'optionSelected\' ng-click=\'showDetail()\'> <p line-fix>{{opt.value.name}}</p> <span class=\'arrow\'></span> </div> <div ng-class="{false:\'option-data\',true:\'option-data hidden\'}[optionSelected]"> <div class="option"> <input type="checkbox" ui-jq=\'uniform\' id=\'opt_{{opt.value.id}}\' add-option opt=\'opt\' ng-model=\'opt.value.selected\' ng-change=\'onChange()\'/> </div> <label class=\'label\' for="opt_{{opt.value.id}}">{{opt.value.name}}</label> <p class="price"><span ng-class="{false:\'add\',true:\'substract\'}[opt.value.selected]"></span>${{opt.value.price}}</p> </div> <div ng-class="{false:\'option-image\',true:\'option-image hidden\'}[optionSelected]" ng-click=\'showDetail()\'> <img ng-src=\'{{image}}\' alt="{{opt.value.name}}" title="{{opt.value.name}}"> <span class=\'arrow\'></span> </div> </div> </div> </div> <div class="option-detail" id=\'option-detail\' option-tile-detail> <div class="close-detail" ng-click=\'closeCurrentDetail()\'><span></span></div> <div class="content"> <div class="option-data"> <div class="option"> <input type="checkbox" ui-jq=\'uniform\' id=\'opt_{{opt.value.id}}\' add-option opt=\'currentTileData\' ng-model=\'opt.value.selected\' ng-change=\'onChange()\'/> </div> <div class="label"> <label class=\'label\' for="opt_{{currentTileData.value.id}}">{{currentTileData.value.name}}</label> </div> <div class="price"> <span ng-class="{false:\'add\',true:\'substract\'}[currentTileData.value.selected]"></span><span class=\'amount\'>$ {{currentTileData.value.price}}</span> </div> </div> <div class="text"> <p ng-bind-html=\'currentTileData.value.description\'></p> <p class="disclaimer" ng-show=\'currentTileData.value.disclaimer\' ng-click=\'showDisclaimer()\'>{{\'label.build.summary.disclaimers\' | i18n}}</p> </div> </div> <div class="image"> <img ng-src="{{currentTileData.value.images[0]}}" alt="{{currentTileData.name}}" title="{{currentTileData.name}}"> </div> <div class="clear"></div> </div> </div> <div class="clear"></div> <div class="next-step mobile"> <a class="next-section-button" ng-click="nextSection()" prevent-default> <p class="text">{{\'label.build.next\' | i18n}} <span>{{\'label.build.summary\' | i18n}}</span></p> <span class="arrow"></span> </a> </div> <div class="option-mobile-detail close" option-mobile-detail opt=\'mobileData\'> <div class="header"> <div class="back-holder" ng-click=\'closeDetail()\'> <div class="back"></div> </div> <h2>{{opt.value.name}}</h2> </div> <div class=\'detail\'> <div class="option-data"> <div class="option"> <input type="checkbox" ui-jq=\'uniform\' id=\'opt_{{opt.value.id}}\' add-option opt=\'opt\' ng-model=\'opt.value.selected\' ng-click=\'onChange()\'/> </div> <label class=\'label\' for="opt_{{opt.value.id}}">{{opt.value.name}}</label> <p class="price"><span ng-class="{false:\'add\',true:\'substract\'}[opt.value.selected]"></span>${{opt.value.price}}</p> </div> <div class="option-image"> <img ng-src="{{opt.value.images[0]}}" alt="{{opt.name}}" title="{{opt.name}}"> </div> <div class="content"> <p class="description" ng-bind-html=\'opt.value.description\'></p> <p class="disclaimer" ng-show=\'opt.value.description!=""\' ng-click=\'showDisclaimer()\'>{{\'label.build.summary.disclaimers\' | i18n}}</p> </div> </div> </div> <div class="clear"></div> <div dependencies-box handler-id="{{dependencies.handlerId}}" type="options" box-id="dependencies-option-box" item="dependencies.item" name="{{\'label.build.colors.option\'|i18n}}" open="dependencies.checking"></div> <div lightbox open=\'optionMobileDetail\' id=\'option-mobile-detail\' title="{{currentMobileDetailTitle}}"> <div class="option-data"> <label class=\'label\' for="opt_{{mobileData.value.id}}">{{mobileData.value.name}}</label> <p class="price"><span ng-class="{false:\'add\',true:\'substract\'}[mobileData.value.selected]"></span>${{mobileData.value.price}}</p> </div> <div class="option-image"> <img ng-src="{{mobileData.value.images[0]}}" alt="{{mobileData.name}}" title="{{mobileData.name}}"> </div> <div class="content"> <p class="description" ng-bind-html="mobileData.value.description"></p> <p class="disclaimer" disclaimers-link disclaimers-text="{{mobileData.disclaimer}}">{{\'label.build.summary.disclaimers\' | i18n}}</p> </div> </div> </section> ');
$templateCache.put("/us/static/views/buildAndPrice/package.html",'<div class="info"> <input id="packageCheck-{{package.value.id}}" type="checkbox" ui-jq=\'uniform\' ng-click="selectPackage(package.value.id)" prevent-default> <span class="name">{{package.value.name}}</span> <span class="price add">{{package.value.price | noFractionCurrency}}</span> </div> <div class="package-content"> <div class="description-container"> <div class="description" ng-bind-html="package.value.description"></div> <div class="required-packages" ng-show="requiredPackages.length"> <span class="title">{{\'label.build.packages.alsoAdd\' | i18n}}:</span> <div class="info" ng-repeat="requiredPackage in requiredPackages"> <span class="name">{{requiredPackage.name}}</span> <span class="price add">{{requiredPackage.price | noFractionCurrency}}</span> </div> </div> <div class="disclaimer" ng-show="package.value.disclaimer.length> 0"> <a href="#" disclaimers-link disclaimers-text="{{package.value.disclaimer}}" prevent-default>{{\'label.build.summary.disclaimers\' | i18n}}></a> </div> <a class="details-container" href="#" ng-click="displayPackageDetails()" prevent-default> <span class="details">{{\'label.build.seeAllDetails\' | i18n}}</span> </a> </div> <div class="highlights"> <div ng-repeat="highlight in highlights" class="highlight" ng-class-even="\'even\'" ng-class-odd="\'odd\'"> <img class="feature-image" ng-src="{{highlight.imageSmall}}" alt="{{highlight.altText | convertEntities}}"> <span class="feature-title" ng-bind-html="highlight.name"></span> </div> </div> </div> ');$templateCache.put("/us/static/views/buildAndPrice/packageDetail.html",'<div class="package-detail-overlay" ng-class="{\'selected\':details.packageDisplayed.value.selected}"> <div class="navigation-header" ng-hide="mobile"> <div class="header" ng-click="closeDesktopDetail()"> <div class="back-holder"> <div class="back"></div> </div> <h2>{{details.packageDisplayed.value.name}}</h2> </div> </div> <div class="package-info"> <div class="info"> <span class="name">{{details.packageDisplayed.value.name}}</span> <span class="price add">{{details.packageDisplayed.value.price | noFractionCurrency}}</span> </div> <div class="package-content"> <div class="description-container"> <div class="description" ng-bind-html="details.packageDisplayed.value.description"></div> <div class="required-packages" ng-show="details.requiredPackages.length"> <span class="title">{{\'label.build.packagedetails.requires\' | i18n}}</span> <div class="info" ng-repeat="requiredPackage in details.requiredPackages"> <span class="name">{{requiredPackage.name}}</span> <span class="price add">{{requiredPackage.price | noFractionCurrency}}</span> </div> </div> </div> </div> </div> <div class="toggle-menu" toggle-menu options="detailRequiredPackages"></div> <div class="features-holder" tile-layout max-cols=\'4\' fixed=\'false\' detail-id=\'option-detail\' collection=\'details.featuresAndOptions\' expand-last=\'false\' mobile=\'mobile\'excludePadd=\'true\' tl-id=\'packages-tl\' mobile-one-column=\'true\'> <div class="box" ng-repeat=\'option in collection() track by $index\' package-details-iterator> <div package-details-box opt=\'option\' mobile=\'mobile\'> <div ng-class="{false:\'option-box\',true:\'option-box selected\'}[optionSelected]"> <div class="option-title" ng-show=\'optionSelected\' ng-click=\'showDetail()\'> <p package-details-fix ng-bind-html="opt.name"></p> <span class=\'arrow\'></span> </div> <div ng-class="{false:\'option-data\',true:\'option-data hidden\'}[optionSelected]"> <label class=\'label\' for="opt_{{opt.id}}" ng-bind-html="opt.name"></label> </div> <div ng-class="{false:\'option-image\',true:\'option-image hidden\'}[optionSelected]" ng-click=\'showDetail()\'> <img ng-src=\'{{opt.imageSmall}}\' alt="{{opt.name | convertEntities}}" title="{{opt.name | convertEntities}}"> </div> </div> </div> </div> <div class="option-detail" id=\'option-detail\' package-details-tile-detail> <div class="close-detail" ng-click="closeCurrentDetail()"><span></span></div> <div class="content"> <div class="option-data"> <div class="label"> <label ng-bind-html="currentTileData.name"></label> </div> </div> <div class="text"> <p ng-bind-html="currentTileData.description"></p> </div> <div class="text" ng-show="currentTileData.disclaimer !=\'\'"> <p class="disclaimer" ng-click="showDisclaimer()">{{\'label.build.summary.disclaimers\' | i18n}}</p> </div> </div> <div class="image"> <img id=\'accImage\' ng-src="{{currentTileData.imageSmall}}" alt="{{currentTileData.name | convertEntities}}" title="{{currentTileData.name | convertEntities}}"> </div> <div class="clear"></div> </div> </div>	<div lightbox open=\'mobileDetailOpen\' id=\'option-lightbox\' handler-id="option-lightbox" valign="bottom" title="{{mobileData.name}}"> <div class="option-mobile-detail"> <div class=\'detail\'> <div class="option-data"> <label class=\'label\' for="opt_{{opt.id}}" ng-bind-html="mobileData.name"></label> </div> <div class="option-image"> <img ng-src="{{mobileData.imageSmall}}" alt="{{opt.name | convertEntities}}" title="{{opt.name | convertEntities}}"> </div> <div class="content"> <p class="description" id=\'mobileDetailDesc\' ng-bind-html="mobileData.description"></p> <p class="disclaimer" id=\'mobileDetailDisc\'>{{\'label.build.summary.disclaimers\' | i18n}}</p> </div> <div class="clear"></div> </div> </div> </div> <div class="clear"></div> </div> ');$templateCache.put("/us/static/views/buildAndPrice/packages.html",'<div class="packages-wrapper" ng-class="platform" ng-controller="packagesController" packages-interaction> <div class="packages-container" ng-class="{\'package-detail\':details.showPackageDetails}" ng-hide="!mobile && details.showPackageDetails"> <div class="packages-header"> <h2 ng-hide="mobile">{{\'label.build.chooseYourPackage\' | i18n}}</h2> <div class="next-section-button" ng-hide="mobile"> <a href="" ng-click="nextSection()" prevent-default> <div class="text">{{\'label.build.next\' | i18n}} <span>{{sections[current.id + 1].navigation.name | i18n}}</span></div> <div class="arrow"></div> </a> </div> </div> <div class="packages"> <div class="package {{platform}}" ng-repeat="package in packages" ng-class="{\'selected\':package.value.selected}"> <div class="content" package></div> </div> </div> <div class="next-section-button-bottom" ng-show="mobile"> <a href="" ng-click="nextSection()" prevent-default> <div class="text">{{\'label.build.next\' | i18n}} <span>{{sections[current.id + 1].navigation.name | i18n}}</span></div> <div class="arrow"></div> </a> </div> </div> <div lightbox open=\'details.showPackageDetailsMobile\' id=\'package-details-lightbox\' handler-id="package-detail-lb" valign="bottom" title="{{details.packageDisplayed.value.name}}"> <div id="package-detail" class="package-detail-section" package-detail></div> </div> <div ng-switch="mobile"> <div ng-switch-when="false"> <div ng-switch="details.showPackageDetails"> <div ng-switch-when="true" id="package-detail" class="package-detail-section" package-detail></div> </div> </div> </div> <div class="packages-navigation" ng-class="platform"> <ul> <li ng-repeat="package in packages"></li> </ul> </div> <div dependencies-box handler-id="{{dependencies.handlerId}}" type="packages" box-id="dependencies-package-box" item="dependencies.item" name="{{\'label.build.colors.package\'|i18n}}" open="dependencies.checking"></div> </div>');$templateCache.put("/us/static/views/buildAndPrice/summary.html",'<div class="build-summary" screen-size bnp-summary> <div class="table print-header"> <div class="site-logo"> <a href="/" title="KIA"> <img ng-src="{{content}}/content/media/all/global/kialogo.png" alt="KIA"/> </a> </div> <h1><span>{{model.serie.year}} <span class="name">{{model.serie.name}}</span> {{model.trim.current.name}}</span></h1> <span class="date">{{ date | date:\'longDate\'}}</span> </div> <div class="table content-table"> <div class="content-row"> <div bnp-summary-detail class="desktop-detail" ng-show="width> 680"></div> <div class="gallery"> <div class="panoramaBlock"> <nav> <span ng-click="setExteriorView();" ng-class="{true:\'selected\'}[options.exterior]">{{\'label.build.exterior\' | i18n}}</span> <span ng-click="setInteriorView();" ng-class="{true:\'selected\'}[options.interior]">{{\'label.build.interior\' | i18n}}</span> </nav> <div class="panoramaContainer"> <div ng-switch="options.exterior" class="exterior"> <div ng-switch-when="true" panorama touch="true" id="colorExterior" path="{{model.colors.imageSet}}exterior/{{model.colors.exterior.current.baseHex}}/" arc="18" x="{{model.serie.panorama.exterior.x}}" frames="{{model.serie.panorama.exterior.frames}}" pattern="{{model.serie.panorama.pattern}}" active="options.exterior"></div> </div> <div class="img_{{data.trim.current.name}}_{{data.model.current.color}} pull-right " ng-if="\'Premium\'==data.trim.current.name"></div> <div ng-switch="options.interior" ng-class="isIpadPano(data.colors.interior.current.isFishEyeAvailable)"> <div ng-if="data.colors.interior.current.isFishEyeAvailable"> <div ng-switch-when="true" fish-eye-viewer touch="true" id="colorInterior" path="{{model.colors.imageSet}}interior/{{model.colors.interior.current.baseHex}}/{{model.colors.interior.current.fabric.file}}/" arc="5" x="{{model.serie.panorama.interior.x}}" frames="{{model.serie.panorama.interior.frames}}" pattern="{{model.serie.panorama.pattern}}" type="interior" active="options.interior"></div> </div> <div ng-if="!data.colors.interior.current.isFishEyeAvailable"> <div ng-switch-when="true" panorama touch="true" id="colorInterior" path="{{model.colors.imageSet}}interior/{{model.colors.interior.current.baseHex}}/{{model.colors.interior.current.fabric.file}}/" arc="5" x="{{model.serie.panorama.interior.x}}" frames="{{model.serie.panorama.interior.frames}}" pattern="{{model.serie.panorama.pattern}}" type="interior" active="options.interior"></div> </div> </div> <div class="disclaimers"><a href="#" prevent-default global-disclaimers-link disclaimers-title="{{\'label.build.summary.disclaimers\' | i18n}}" ng-class="{\'active\':global.active}">{{\'label.build.summary.disclaimers\' | i18n}}</a></div> <div class="print-panorama"> <div class="print-exterior"> <img ng-src="{{getBaseImage(\'exterior\')}}"/> </div> <div class="print-interior"> <img ng-src="{{getBaseImage(\'interior\')}}"/> </div> </div> </div> </div> <div bnp-summary-detail class="mobile-detail"></div> </div> </div> </div> <div class="print-disclaimers"> <h2>{{\'label.build.summary.disclaimers\' | i18n}}</h2> <div ng-repeat="package in model.packages.currentList.collection"> <p ng-show="package.value.disclaimer && package.value.disclaimer !==\'\'" ng-bind-html="package.value.disclaimer"></p> <p ng-repeat="require in getRequiredPagackes(package.value)" ng-show="require.disclaimer && require.disclaimer !==\'\'" ng-bind-html="require.disclaimer"></p> </div> <div ng-repeat="option in model.options.currentList.collection"> <p ng-show="option.value.disclaimer && option.value.disclaimer !==\'\'" ng-bind-html="option.value.disclaimer"></p> </div> <div> <p ng-include src="disclaimersURI"></p> </div> </div> </div>');$templateCache.put("/us/static/views/buildAndPrice/summaryDetail.html",'<div class="detail"> <div class="detail-inner"> <h2>{{\'label.build.summary.summary\' | i18n}}</h2> <div> <div class="serie item"> <div class="item-row"> <span>{{model.serie.year}} <span class="name" ng-hide="model.serie.name===\'Soul EV\'">{{model.serie.name}} </span> {{model.trim.current.name}}</span> <span class="price">{{model.trim.current.msrp | noFractionCurrency}}<sup>*</sup></span> </div> </div> </div> <div class="selection"> <ul class="features" ng-show="model.model.current.features && model.model.current.features.length> 0"> <li ng-repeat="feature in model.model.current.features">{{feature.description}}</li> </ul> <div class="colors"> <h3>{{\'label.build.colors\' | i18n}}</h3> <div class="boxes"> <span color-block key="{{model.colors.exterior.current.id}}" color="#{{model.colors.exterior.current.baseHex}}" property="exteriorColor"></span> <span color-block key="{{model.colors.interior.current.id}}" color="#{{model.colors.interior.current.baseHex}}" property="interiorColor" fabric="{{model.colors.interior.current.fabric.texture}}"></span> <span class="after"></span> <span class="before"></span> </div> <div> <div class="item"> <div class="item-row"> <span class="exterior">{{model.colors.exterior.current.name}}</span> <span class="price"><span class="add"> <img src="{{static}}/img/buildandprice/summary-add.png"/> {{model.colors.interior.current.price | noFractionCurrency}} </span></span> </div> <div class="item-row"> <span>{{\'label.build.with\' | i18n}} <span class="interior">{{model.colors.interior.current.name}} {{model.colors.interior.current.fabric.name}}</span></span> </div> </div> </div> </div> <div class="collapsible upgradesCollection" ng-show="{{model.model.current.featureInfo.length> 0}}"> <div class="handler"> <div class="item"> <div class="item-row"> <h3>{{\'label.build.upgrades\' | i18n}} <span class="count">{{model.model.current.featureInfo.length}}</span></h3> <span class="price"><span class="add"> <img src="{{static}}/img/buildandprice/summary-add.png"/> {{(model.model.current.msrp - model.trim.current.msrp) | noFractionCurrency}} </span></span> </div> </div> </div> <div class="items"> <div class="feature" ng-repeat="feature in model.model.current.featureInfo"> <div class="item"> <div class="item-row"> <span>{{feature.name}}</span> <span class="price"><span class="add"> <img src="{{static}}/img/buildandprice/summary-add.png"/> {{feature.price | noFractionCurrency}} </span></span> </div> </div> </div> </div> </div> <div class="collapsible packagesCollection" ng-show="{{model.packages.currentList.length()> 0 && model.packages.list.length()> 0}}"> <div class="handler item"> <div class="item-row"> <h3>{{\'label.build.packages\' | i18n}} <span class="count">{{getSelectedPackagesCount()}}</span></h3> <span class="price"><span class="add"> <img src="{{static}}/img/buildandprice/summary-add.png"/> {{model.price.packagesTotal | noFractionCurrency}} </span></span> </div> </div> <div class="items"> <div class="package" ng-repeat="package in model.packages.currentList.collection"> <div class="item"> <div class="item-row"> <span>{{package.value.name}}</span> <span class="price"><span class="add"> <img src="{{static}}/img/buildandprice/summary-add.png"/> {{package.value.price | noFractionCurrency}} </span></span> </div> </div> <div class="requires" ng-show="getRequiredPagackes(package.value).length> 0"> <img class="tag" src="{{static}}/img/buildandprice/requires-tag.png"/> <p>{{\'label.build.colors.requires\'|i18n}}</p> <div class="item" ng-repeat="require in getRequiredPagackes(package.value)"> <div class="item-row"> <span>{{require.name}}</span> <span class="price"><span class="add"> <img src="{{static}}/img/buildandprice/summary-add.png"/> {{require.price | noFractionCurrency}} </span></span> </div> </div> </div> </div> </div> </div> <div class="collapsible optionsCollection" ng-show="{{model.options.currentList.length()> 0}}"> <div class="handler item"> <div class="item-row"> <h3>{{\'label.build.options\' | i18n}} <span class="count">{{model.options.currentList.length()}}</span></h3> <span class="price"><span class="add"> <img src="{{static}}/img/buildandprice/summary-add.png"/> {{model.price.optionsTotal | noFractionCurrency}} </span></span> </div> </div> <div class="items"> <div class="item" ng-repeat="option in model.options.currentList.collection"> <div class="item-row"> <span>{{option.value.name}}</span> <span class="price"><span class="add"> <img src="{{static}}/img/buildandprice/summary-add.png"/> {{option.value.price | noFractionCurrency}} </span></span> </div> </div> </div> </div> <div class="destination item"> <div class="item-row"> <span>{{\'label.build.summary.destination\' | i18n}}</span> <span class="price"><span class="add"> <img src="{{static}}/img/buildandprice/summary-add.png"/> {{model.model.current.destCharge | noFractionCurrency}} </span></span> </div> </div> <div class="total item"> <div class="item-row"> <span>{{\'label.build.summary.estimatedTotal\' | i18n}}</span> <span class="price">{{model.price.msrp | noFractionCurrency}}<sup>*</sup></span> </div> </div> </div> </div> <div class="bottom"> <a class="show-inventory" ng-hide="!model.showInventory || hideForDealer" ng-href="{{getInventoryDeeplink()}}"> <span class="text">{{\'label.build.summary.find\' | i18n}} {{\'label.build.near\' | i18n}} {{data.zipCode}}</span> <span class="arrow"></span> </a> <a class="requestUpdate" ng-hide="model.showInventory || hideForDealer" href="{{base}}/forms/updatesrequest/{{model.serie.key}}/{{model.serie.year}}"> <span class="text">{{\'label.general.keepMeUpdated\' | i18n}}</span> <span class="arrow"></span> </a> <a class="quote" ng-show="model.showInventory" ng-click="clickQuoteLink()"> <span class="text">{{\'label.general.getAQuote\' | i18n}}</span> <span class="arrow"></span> </a> <a class="test-drive" ng-hide="!model.showTestDrive || hideForDealer" ng-click="clickTestDriveLink()"> <span class="text">{{\'label.build.summary.requestTestDrive\' | i18n }}</span> <span class="arrow"></span> </a> <a class="trade-appraisal" ng-hide="!model.showTradeInAppraisal || hideForDealer" href="{{base}}/forms/appraisalrequest/{{model.serie.key}}/{{model.serie.year}}"> <span class="text">{{\'label.build.summary.tradeInAppraisal\' | i18n }}</span> <span class="arrow"></span> </a> <nav> <a class="print" href="#" onclick="javascript:window.print();" prevent-default analytics-tracking="print" ng-hide="hideForKiosk"> <span class="icon kia-icon-2-print"></span> <span class="text">{{\'label.build.summary.printSummary\' | i18n}}</span> </a> <a class="link" id="bnpSummaryLink" href="{{getBnPDeeplink()}}" prevent-default ng-click="onOpenLink(\'dBox-summaryLink\')" analytics-tracking="get-link" ng-hide="hideForKiosk"> <span class="icon kia-icon-2-link"></span> <span class="text">{{\'label.build.summary.getLink\' | i18n}}</span> </a> <a class="refresh" href="#" prevent-default ng-click="reset()"> <span class="icon kia-icon-2-refresh"></span> <span class="text">{{\'label.build.summary.startOver\' | i18n}}</span> </a> </nav> <div lightbox id=\'dBox-summaryLink\' type="modal" outside-close="false"> <h2>{{\'label.build.summary.copyALink\' | i18n}}</h2> <p class="link" autoselect> <span class="link-text">{{getBnPDeeplink()}}</span> </p> <p class="copy">{{\'label.build.summary.copyLink\' | i18n}}</p> </div> </div> </div>');$templateCache.put("/us/static/views/buildAndPrice/toggleMenu.html",'<span>{{detailRequiredPackages.length}}</span> <div ng-repeat="option in options" class="package-features" ng-class="{selected:option.selected}" ng-show="options.length>1"> <a href="" ng-click="loadRequiredPackageOptions(option.id)" prevent-default>{{option.name | replace:"package":"" | uppercase}}</a> </div>');$templateCache.put("/us/static/views/buildAndPrice/trim.html",'<div class="content trims-content" trims-interaction ng-controller="trimsController" ng-switch on="platform"> <div class="main-content content-table"> <div class="content-row"> <div ng-show="{\'desktop\':true}[platform]"> <div class="next-section-button"> <a href="" ng-click="nextSection()" prevent-default> <div class="text">{{\'label.build.next\' | i18n}} <span>{{\'label.build.colors\' | i18n}}</span></div> <div class="arrow"></div> </a> </div> </div> <div class="trim-selection-container content-cell"> <div ng-switch-when="desktop"> <div trims-desktop></div> <div class="compare-trims"> <a class="clickable" href="/{{country}}/{{lang}}/vehicle/{{data.serie.key}}/{{data.serie.year}}/trims" analytics-tracking="compare-trims"> <div class="text"> <span class="compare-text">{{\'label.build.compareTrims\' | i18n}}</span></div> <div class="arrow"></div> </a> </div> </div> <div ng-switch-when="mobile"> <div trims-mobile></div> </div> </div> <div class="panorama-container content-cell"> <div panorama touch="true" rotate="true" path="{{data.trim.current.imageSet}}exterior/{{data.model.current.color}}/" arc="18" x="{{data.serie.panorama.exterior.x}}" frames="{{data.serie.panorama.exterior.frames}}" pattern="{{data.serie.panorama.pattern}}" active="data.trimsInitialized"></div> <div class="disclaimers"><a href="#" prevent-default global-disclaimers-link disclaimers-title="{{\'label.build.summary.disclaimers\' | i18n}}" ng-class="{\'active\':global.active}">{{\'label.build.summary.disclaimers\' | i18n}}</a></div> </div> </div> </div> <div class="trims"> <ul class="trims "> <li class="trim" ng-repeat="trim in data.trim.list.collection" ng-class="{true:\'selected\'}[trim.value.selected]"> <a href="" class="clickable" ng-click="onTrim(trim.value.id)" prevent-default> <span class="code">{{trim.value.name}}</span> <span class="price" ng-class="trimPriceIcon(trim.value.msrp - data.trim.current.msrp)" ng-show="!trim.value.selected" ng-hide="{{data.serie.key}}==sorento">{{trim.value.msrp - data.trim.current.msrp | noFractionCurrency:false}}</span> </a> </li> </ul> </div> </div>');$templateCache.put("/us/static/views/buildAndPrice/trimSelectionDesktop.html",'<div class="trim-selection-desktop"> <h2>{{\'label.build.chooseYour\' | i18n}}</h2> <div class="model-price"> <div class="model">{{data.trim.current.name}}</div> <div class="price"> <span class="starting-from">{{\'label.build.startingMSRP\' | i18n}}:</span> <span class="msrp">{{data.trim.current.msrp | noFractionCurrency}}*</span> </div> </div> <div class="features"> <span class="title">{{\'label.build.features\' | i18n}}</span> <ul> <li ng-repeat="feature in data.model.current.features" ng-bind-html="feature.description"></li> </ul> <a ng-href="/{{country}}/{{lang}}/vehicle/{{data.serie.key}}/{{data.serie.year}}/features" class="details" ng-hide="hideForKiosk">{{\'label.build.seeAllDetails\' | i18n}}</a> </div> <div class="upgrades-container" ng-show="data.model.current.options.length> 0"> <span class="title">{{\'label.build.upgradeWith\' | i18n}}:</span> <ul ng-repeat="model in data.model.list.collection" ng-show="model.value.id==data.model.current.id"> <li ng-repeat="option in model.value.options" class="{{option.type}}"> <a href="" class="check" ng-class="{\'downgrade\':\'checked\'}[option.type]" ng-click="onModel(option.id)" prevent-default></a> <span class="option">{{option.name}}</span> <span class="price">{{option.price | noFractionCurrency:false}}</span> </li> </ul> </div> </div> ');$templateCache.put("/us/static/views/buildAndPrice/trimSelectionMobile.html",'<div class="trim-selection-mobile-container"> <div class="trim-selection-slider" slider-trims> <div class="trim-selection-mobile trim" ng-class="{selected:trim.value.selected}" ng-repeat="trim in data.trim.list.collection" width-adjustment="50" trim-selection> <div class="model-price"> <input id="trim-{{$index}}" type="checkbox" ui-jq=\'uniform\' ng-click=\'onTrimClick($event,$index)\' prevent-default> <div class="model">{{trim.value.name}}</div> <div class="price"> <span class="starting-from">{{\'label.build.startingMSRP\' | i18n}}:</span> <span class="msrp">{{trim.value.msrp | noFractionCurrency}}</span> </div> </div> <div class="models" ng-repeat="model in trim.value.models.collection" ng-show="showMobileTrim(trim, model, $index)"> <div class="features"> <span class="title">{{\'label.build.features\' | i18n}}</span> <ul> <li ng-repeat="feature in model.value.features" ng-show="feature.showInMobile" ng-bind-html="feature.description"></li> </ul> <a href="/{{country}}/{{lang}}/vehicle/{{data.serie.key}}/{{data.serie.year}}/features" class="details">{{\'label.build.seeAllDetails\' | i18n}}</a> </div> <div class="upgrades-container" ng-show="model.value.options.length> 0"> <span class="title">{{\'label.build.upgradeWith\' | i18n}}:</span> <ul> <li ng-repeat="option in model.value.options" class="{{option.type}}"> <a href="" class="check" ng-class="{\'downgrade\':\'checked\'}[option.type]" ng-click="onModel(option.id)" prevent-default></a> <span class="option">{{option.name}}</span> <span class="price">{{option.price | noFractionCurrency:false}}</span> </li> </ul> </div> </div> </div> </div> </div> <div class="trim-compare-navigation"> <div class="compare-trims-mobile"> <a href="/{{country}}/{{lang}}/vehicle/{{data.serie.key}}/{{data.serie.year}}/trims"><span class="title">{{\'label.build.compareTrims\' | i18n}}</span></a> </div> <div class="trims-navigation" trims-navigation> <ul> <li ng-repeat="trim in data.trim.list.collection"></li> </ul> </div> </div> <div class="next-section-button-mobile"> <a href="" ng-click="nextSection()" prevent-default> <div class="text">{{\'label.build.next\' | i18n}} <span>{{\'label.build.colors\' | i18n}}</span></div> <div class="arrow"></div> </a> </div> ');$templateCache.put("/us/static/views/compare/comparePage.html",'<div nav-secondary type="vehicle" selected="compare" series="{{series}}" year="{{year}}" ng-if="!showVehicleSelector"></div> <div vehicle-grid target="compare" ng-show="showVehicleSelector"></div> <section class="compare-section" compare-interaction responsive-handler ng-show=\'dataReady\'> <div class="loading" ng-show=\'loading\'> <p>Loading...</p> </div>	<div class="compare-categories open"> <div class="compare-device-header"> <div class="header"> <div class="back-holder" ng-click=\'showCompareMenu()\'> <div class="back"></div> </div> <h2>{{\'label.compare.categories\' | i18n}}</h2> </div> </div> <ul> <li ng-repeat=\'cat in categories\' ng-class=\'{true:"selected",false:""}[currentCategory.categoryId==compareCategory.categoryId]\' compare-category=\'cat\' current-category=\'currentCategory\' ng-click=\'showCategory()\'> <p>{{compareCategory.categoryName}}</p> <p class=\'compare-subcategories\'> </p> <div><span class="arrow"></span></div> </li> <li ng-class=\'{true:"selected",false:""}[currentCategory.categoryId==compareCategory.categoryId]\' compare-category=\'photosCategory\' current-category=\'currentCategory\' ng-click=\'showCategory()\'> <p>{{\'label.compare.photos\' | i18n}}</p> <p class=\'compare-subcategories\'> </p> <div><span class="arrow"></span></div> </li> </ul> </div>	<div class="compare-content">	<div class="compare-device-header"> <div class="header"> <div class="back-holder" ng-click=\'showCategoryMenu()\'> <div class="back"></div> </div> <h2>{{currentCategory.categoryName}}</h2> </div> </div>	<div class="compare-header open"> <div class="compare-title"> <div ng-class="{true:\'legend hidden\',false:\'legend\'}[showPhotos || kiaAdvantage]"> <span class="square"></span> <p class=\'label\'>{{\'label.compare.kiaAdvantage\' | i18n}}</p> </div> <div class="title"> <p>{{currentCategory.categoryName}}</p> </div> <div ng-class="{false:\'filter\',true:\'filter hidden\'}[showPhotos]" ng-hide="showPhotos"> <div class="check"><input type="checkbox" class=\'advantageCheck\' ui-jq=\'uniform\' ng-model=\'kiaAdvantage\'></div> <p class="label">{{\'label.compare.kiaAdvantageOnly\' | i18n}}</p> </div> </div> <div class="table-holder"> <p class="mobile-title">{{\'label.compare.selectVehiclesCompare\' | i18n}}</p> <div class="column-holder"> <div class="column header-column" compare-column> <div class="car-detail"> <div class="image"> <img ng-src="{{primary.imageURL}}" title=\'{{primary.year}} {{primary.makeName}} {{primary.modelName}} {{primary.trimName}}\' alt="{{primary.year}} {{primary.makeName}} {{primary.modelName}} {{primary.trimName}}"> </div> <div class=\'info\'> <p class="brand">{{primary.year}}&nbsp;<span ng-hide=\'mobile\'>{{primary.makeName}}</span></p> <p class="trim"> <span ng-show=\'mobile\'>{{primary.makeName}}&nbsp;</span> <span>{{primary.modelName}}</span> </p> <div class="change" ng-click=\'changeKiaTrim()\'>{{\'label.compare.changeTrim\' | i18n}} <span class="arrow" id=\'kiaTrimArrow\'></span></div> </div> </div> </div> <div class="column header-column" ng-repeat=\'competitor in competitors\' compare-column> <div class="car-detail" competitor=\'competitor\' mobile=\'mobile\' ng-hide=\'competitor.addCompetitor\'> <span class="close" ng-click="remove()"></span> <div class="image"> <img ng-src="{{competitor.imageURL}}" title=\'{{competitor.year}} {{competitor.makeName}} {{competitor.modelName}} {{competitor.trimName}}\' alt="{{competitor.year}} {{competitor.makeName}} {{competitor.modelName}} {{competitor.trimName}}"> </div> <div class="info"> <p class="brand">{{competitor.year}}&nbsp;<span ng-hide=\'mobile\'>{{competitor.makeName}}</span></p> <p class="trim"> <span ng-show=\'mobile\'>{{competitor.makeName}}&nbsp;</span> <span>{{competitor.modelName}}</span></p> <div class="change" ng-click="changeCar()">{{\'label.compare.change\' | i18n}}<span class="arrow" id=\'competitor_arrow_{{competitor.trimId}}\'></span> </div> </div> </div> <div class=\'compare-add\' ng-show=\'competitor.addCompetitor\' ng-click="addNewCar()"> <div class="cross-button" id=\'competitor_arrow_cross_{{$index}}\'> <span class="block ne"></span> <span class="block nw"></span> <span class="block se"></span> <span class="block sw"></span> </div> <p>{{\'label.compare.addVehicle\' | i18n}}</p> </div> </div> </div> </div> </div>	<div class="compare-button open"> <div class="button" ng-click=\'showCategoryMenu()\'> <p class="text">{{\'label.compare.compareVehicles\' | i18n}}</p> <span class="arrow"></span> </div> </div>	<div class="compare-list" ng-hide="showPhotos">	<div class="compare-device-header"> <div class="header"> <div class="back-holder" ng-click=\'showCategoryMenu()\'> <div class="back"></div> </div> <h2>{{currentCategory.categoryName}}</h2> <div class="legend-holder"> <div ng-class="{true:\'legend hidden\',false:\'legend\'}[showPhotos || kiaAdvantage]"> <span class="square"></span> <p class=\'label\'>{{\'label.compare.kiaAdvantage\' | i18n}}</p> </div> </div> </div> </div>	<div ng-class="{false:\'filter\',true:\'filter hidden\'}[showPhotos]" ng-hide="showPhotos"> <div class="check"><input type="checkbox" class=\'advantageCheck\' ui-jq=\'uniform\' ng-model=\'kiaAdvantage\'></div> <p class="label">{{\'label.compare.kiaAdvantageOnly\' | i18n}}</p> </div>	<div class="compare-criteria" ng-repeat=\'criteria in comparisonData\'> <div ng-class="{true:\'title advantage\',false:\'title\'}[criteria.kiaAdvantage]" data-kia=\'{{criteria.kiaAdvantage}}\'> <p>{{criteria.itemName}}</p> </div> <div class="table-holder"> <div ng-class="{true:\'column-holder criteria advantage\',false:\'column-holder criteria\'}[criteria.kiaAdvantage]" data-kia=\'{{criteria.kiaAdvantage}}\'> <div ng-class="{true:\'column last\',false:\'column\'}[carCriteria.last]" ng-repeat=\'carCriteria in criteria.values\' data-last=\'{{carCriteria.last}}\' compare-column> <div class="image"> <img ng-src="{{carCriteria.carInfo.imageURL}}" ng-show="carCriteria.carInfo"> <p>{{carCriteria.carInfo.year}} {{carCriteria.carInfo.makeName}} {{carCriteria.carInfo.modelName}} {{carCriteria.carInfo.trimName}}</p> </div> <div class=\'content\' ng-if=\'carCriteria.isRating==true\'> <div compare-rating=\'carCriteria.value\'></div> </div> <div class=\'content\' ng-if=\'carCriteria.isRating==false\'> {{carCriteria.value}} </div> </div> </div> </div> </div>	<div class="compare-no-advantages" ng-show=\'showNoKiaAdvantages\'> <p>{{\'label.compare.noAdvantages\' | i18n}}</p> </div> <div class="compare-chrome"> <p>{{\'label.compare.independentAnalisys\' | i18n}}</p> <a href="#" prevent-default disclaimers-link disclaimers-id="disclaimer-chrome-data"><span>Chrome Data</span></a> </div> </div>	<div class="compare-photos open" ng-show=\'showPhotos\'> <div class="compare-device-header" ng-show=\'mobile\'> <div class="header"> <div class="back-holder" ng-click=\'showCategoryMenu()\'> <div class="back"></div> </div> <h2>{{currentCategory.categoryName}}</h2> </div> </div> <div class="compare-photoset" ng-repeat=\'photoset in photos\' compare-photo-set mobile=\'mobile\' photoset=\'photoset\'> <div class="compare-photo-title" ng-click=\'expand ()\'> <p><span ng-class="{false:\'arrow\',true:\'arrow open\'}[expanded]"></span>{{photoset.photoDescription}}<span ng-class="{false:\'arrow right\',true:\'arrow right open\'}[expanded]"></span></p> <div class="compare-photo-gallery hide"> <div class="photo" ng-repeat=\'trim in photoset.photo\'> <img ng-src="{{trim.largeURL}}" ng-if=\'trim.largeURL\'> <p class=\'car-title\'>{{trim.carInfo.year}} {{trim.carInfo.makeName}} {{trim.carInfo.modelName}} {{trim.carInfo.trimName}}</p> </div> </div> </div> <div class="table-holder"> <div class="column-holder"> <div class="column image" ng-repeat=\'trim in photoset.photo\' data-last=\'false\' compare-column> <p class=\'car-title\'>{{trim.carInfo.year}} {{trim.carInfo.makeName}} {{trim.carInfo.modelName}} {{trim.carInfo.trimName}}</p> <div class="image-holder" ng-if=\'trim.largeURL\' ng-click=\'expand ()\'> <img ng-src="{{trim.largeURL}}"> </div> </div> </div> </div> </div> </div> <div class="compare-chrome"> <p>{{\'label.compare.independentAnalisys\' | i18n}}</p> <a href="#" prevent-default disclaimers-link disclaimers-id="disclaimer-chrome-data"><span>Chrome Data</span></a> </div> </div>	<div class="compare-mobile-gallery close"> <div class="header"> <div class="back-holder" ng-click=\'closeMobilePhotoGallery()\'> <div class="back"></div> </div> <h2>{{photoset.photoDescription}}</h2> </div> <div class=\'detail\'> <div class="photo" ng-repeat=\'trim in photoset.photo\'> <img ng-src="{{trim.largeURL}}" ng-if=\'trim.largeURL\'> <p class=\'car-title\'>{{trim.carInfo.year}} {{trim.carInfo.makeName}} {{trim.carInfo.modelName}} {{trim.carInfo.trimName}}</p> </div> </div> </div>	<div lightbox open="selectVehicle" id=\'compare-select-lightbox\' handler-id="{{currentCaller}}" valign="bottom"> <div class="compare-select-vehicle" compare-select-vehicle caller-trim-id="currentCallerTrimdId" default-maker=\'defaultMaker\' action-label=\'actionLabel\'> <p>{{\'label.compare.selectVehicle\' | i18n}}</p> <div class="loading" ng-show=\'loading\'><p>{{\'label.compare.checkingService\' | i18n}}</p></div> <div class="select-holder"> <select name="make" id="make" ng-model=\'currentMaker\' ng-change=\'makerChange()\' ng-options=\'maker.makeName for maker in makers\'> <option value="">{{\'label.compare.make\' | i18n}}</option> </select> <select name="model" id="model" ng-model=\'currentModel\' ng-change=\'modelChange()\' ng-options=\'model.modelName for model in models\' ng-disabled=\'!makerSelected\'> <option value="">{{\'label.compare.model\' | i18n}}</option> </select> <select name="year" id="year" ng-model=\'currentYear\' ng-change=\'yearChange()\' ng-options=\'modelYear.year for modelYear in years\' ng-disabled=\'!modelSelected\'> <option value="">{{\'label.compare.year\' | i18n}}</option> </select> <select name="trim" id="trim" ng-model=\'currentTrim\' ng-change=\'trimChange()\' ng-options=\'v.trimName for v in modelTrims\' ng-disabled=\'!yearSelected\'> <option value="">{{\'label.compare.trim\' | i18n}}</option> </select> </div> <div class="buttons"> <div class="btn cancel" ng-click=\'close()\'> <span>{{\'label.compare.cancel\' | i18n}}</span> </div> <div ng-class="{true:\'btn add\',false:\'btn add disabled\'}[trimSelected]" ng-click=\'submit()\' ng-show=\'actionLabel\'> <span>{{\'label.compare.add\' | i18n}}</span> </div> <div ng-class="{true:\'btn add\',false:\'btn add disabled\'}[trimSelected]" ng-click=\'submit()\' ng-hide=\'actionLabel\'> <span>{{\'label.compare.change\' | i18n}}</span> </div> <div class="clear"></div> </div> </div> </div> <div lightbox open=\'showChangeKiaTrim\' id=\'compare-kiatrim-lightbox\' handler-id="kiaTrimArrow" valign="bottom"> <div class="compare-kia-trim" compare-kia-trim=\'kiaTrims\' current-kia-trim=\'primary\'> <p>{{\'label.compare.changeTrim\' | i18n}}</p> <div class="select-holder"> <select name="kiatrims" id="kiatrims" ng-model=\'currentTrim\' ng-change=\'kiaTrimChange()\' ng-options=\'trim.trimName for trim in trims\'> </select> </div> <div class="default"> <div class="check"> <input type="checkbox" class=\'advantageCheck\' ui-jq=\'uniform\' ng-model=\'reset\' ng-checked=\'reset\'> </div> <p>{{\'label.compare.selectSimiliarCompetitors\' | i18n}}</p> </div> <div class="buttons"> <div class="btn cancel" ng-click=\'close()\'> <span>{{\'label.compare.cancel\' | i18n}}</span> </div> <div ng-class="{true:\'btn add\',false:\'btn add disabled\'}[canChange]" ng-click=\'submit()\'> <span>{{\'label.compare.change\' | i18n}}</span> </div> <div class="clear"></div> </div> </div> </div> </section> <div footer-secondary type="footer" selected="compare" series="{{series}}" year="{{year}}" ng-if="!showVehicleSelector"></div>');
$templateCache.put("/us/static/views/dealerInventory/dealerInventoryFilters.html",'<div id="dealerInventoryFilter" class="dealerInventoryFilter"> <div class="filter-content"> <div class="header"> <h1>{{\'label.dealerInventory.refineSearch\' | i18n}}</h1> <span class="close-handler">X</span> </div> <div class="wrapper"> <div expanded=\'true\' class="section collapsible"> <h3>{{\'label.dealerInventory.year\' | i18n}}</h3> <div class="filter-list"> <ul> <div ng-repeat="yearValue in years"> <li> <div class="label"> <div class="radio"> <span ng-class="{checked: options.vehicle.year==yearValue}"> <input type="radio" name="year" ng-click="changeYear(yearValue)" id="year_{{yearValue}}"/> </span> </div> <label class="label" for="year_{{yearValue}}">{{yearValue}}</label> </div> </li> </div> </ul> </div> </div> <div ng-repeat="filter in result | groupFilter:\'\'" ng-switch on="filter.type" class="section filter-{{filter.type}}" ng-show="filter.data"> <div filter-color ng-switch-when="color" filter="filter" class="collapsible"></div> <div filter-range ng-switch-when="range" filter="filter" class="collapsible" expanded="true"></div> <div filter-monthly-payment ng-switch-when="range"></div> <div filter-list ng-switch-default filter="filter" class="collapsible"></div> </div> <div ng-repeat="groupItem in result | unique:\'group\' | groupFilter:\'\':true" class="section filterGroup collapsible" expanded="{{groupItem.type==\'color\'}}"> <h2>{{groupItem.group | inflector:\'humanize\'}}</h2> <div class="section"> <div ng-repeat="filter in result | groupFilter:groupItem.group" ng-switch on="filter.type" ng-show="filter.data" class="section filter-{{filter.type}}"> <div filter-color ng-switch-when="color" filter="filter"></div> <div filter-range ng-switch-when="range" filter="filter"></div> <div filter-list ng-switch-default filter="filter"></div> </div> </div> </div> <div class="section collapsible dealers"> <h3>{{\'label.dealerInventory.dealers\' | i18n}}</h3> <ul> <li dealer-item ng-repeat="dealer in dealers" dealer="dealer" ng-class="{true:\'singleItem\'}[dealers.length <=1]"></li> </ul> </div> <button class="clear" ng-click="clearFilters($event)">{{\'label.dealerInventory.clearAllRefinements\' | i18n}}</button> </div> </div> <div class="hit-area"></div> <div class="bkg-area"></div> </div>');$templateCache.put("/us/static/views/dealerInventory/dealerInventoryList.html",'<div class="dealerInventoryList" screen-size> <ul class="vehicles" ui-if="matches.result.length"> <li class="vehicles-item" ng-repeat="vehicle in matches.result"> <div vehicle-item></div> </li> </ul> <div ui-if="matches.near.length" class="section nearMatches"> <h2><span>{{\'label.dealerInventory.nearMatches\' | i18n}}</span></h2> <p ng-switch on="matches.allNear.length">{{\'label.dealerInventory.thereAre\' | i18n}} {{matches.allNear.length}} <span ng-switch-when="1">{{\'label.dealerInventory.nearMatch\' | i18n}}</span><span ng-switch-default>{{\'label.dealerInventory.nearMatches\' | i18n}}</span> {{\'label.dealerInventory.forYourCriteria\' | i18n}} </p> <ul class="vehicles"> <li class="vehicles-item" ng-repeat="vehicle in matches.near"> <div vehicle-item></div> </li> </ul> </div> <button class="more" ng-click="loadMore()" ng-show="options.results.value <matches.total"> <span ng-show="options.results.value+options.results.delta <=matches.total">{{\'label.dealerInventory.show\' | i18n}} {{options.results.delta}} {{\'label.dealerInventory.more\' | i18n}}</span> <span ng-show="options.results.value+options.results.delta> matches.total">{{\'label.dealerInventory.show\' | i18n}} {{matches.total-options.results.value}} {{\'label.dealerInventory.more\' | i18n}}</span> </button> </div>');$templateCache.put("/us/static/views/dealerInventory/dealerInventoryPage.html",'<div class="section dealerInventoryPage" ng-switch on="results !=null"> <div loader></div> <div class="section dealerInventoryVehicles" ng-show="currentView==views.vehicles"> <div dealer-inventory-vehicles responsive-handler></div> </div> <div class="section dealerInventoryResults" ng-switch-when="true" ng-show="currentView==views.results"> <div dealer-inventory-result ng-repeat="result in results" result="result" options="options" years="years"></div> </div> <div class="section dealerInventoryDetail" ui-if="currentView==views.detail"> <nav class="result-navigation"> <div class="navigation-wrap"> <a ng-click="onResultsView()" class="back-link">{{\'label.dealerInventoryDetail.back\' | i18n}}<span class="layout-lg"> {{\'label.dealerInventoryDetail.toResults\' | i18n}}</span></a> <div class="paging"> <a ng-click="onChangeCurrentVehicle(-1)" class="page-prev" ng-show="selected.back">&lt;</a> <span class="result-label layout-lg">{{\'label.dealerInventoryDetail.results\' | i18n}} </span><span>{{vehicleIndex()}} {{\'label.dealerInventoryDetail.of\' | i18n}} {{vehiclesResultCount()}} <span> <span ng-hide="selected.near" ng-switch on="vehiclesResultCount()"> <span ng-switch-when="1">{{\'label.dealerInventory.exactMatch\' | i18n}}</span> <span ng-switch-default>{{\'label.dealerInventory.exactMatches\' | i18n}}</span> </span> <span ng-show="selected.near" ng-switch on="vehiclesResultCount()"> <span ng-switch-when="1">{{\'label.dealerInventory.nearMatch\' | i18n}}</span> <span ng-switch-default>{{\'label.dealerInventory.nearMatches\' | i18n}}</span> </span> </span></span> <a ng-click="onChangeCurrentVehicle(+1)" class="page-next" ng-show="selected.next">&gt;</a> </div> <a class="nav-cycle" href="dealers/inventory" target="_self" title="{{\'label.dealerInventoryDetail.changeCar\' | i18n}}"><span class="icon-refresh"></span><span class="layout-lg"> {{\'label.dealerInventoryDetail.changeCar\' | i18n}}</span></a> </div> </nav> <div ng-controller="dealerInventoryDetailController" ng-include="baseURI+\'/modules/dealers/inventory/detail/\'+currentVehicle().vin+\'?zipcode=\'+options.zipCode+\'&monthly=\'+getMonthly()"></div> </div> </div>');$templateCache.put("/us/static/views/dealerInventory/dealerInventoryResult.html",'<div class="section dealerInventoryResult" screen-size> <div dealer-inventory-filters class="sidemenu section" result="result.inventoryFilterResponse" dealers="result.dealers" years="years" options="options"></div> <div class="section dealerInventoryView" ng-switch on="screen.smart || screen.mobile" ng-class="{mobileView:screen.smart || screen.mobile}"> <div ng-switch-when="false" class="nav"> <a class="filters-menu" mobile-handler mobile-menu="#dealerInventoryFilter"><span></span>{{\'label.dealerInventory.filter\' | i18n}}</a> <div select-list list="orderBy" value="options.sortBy.type"></div> <button ng-click="onSwitchView($event)" ng-show="options.listViewMode" class=\'viewMap\'>{{\'label.dealerInventory.mapView\' | i18n}}</button> <button ng-click="onSwitchView($event)" ng-hide="options.listViewMode" class=\'viewList\'>{{\'label.dealerInventory.listView\' | i18n}}</button> <a href="dealers/inventory" target="_self" class="changeCar">{{\'label.dealerInventory.changeCar\' | i18n}}</a> </div> <div class="header"> <span class="matches-count"> <span class="desktop">{{\'label.dealerInventory.weFound\' | i18n}} </span> <span class="desktop">({{matches.count}})</span> <span class="series-name"> <a href="dealers/inventory" target="_self">{{options.vehicle.year}} {{options.vehicle.name}}</a> </span> <span ng-switch on="matches.count" class="plural"> <span class="mobile">{{matches.count}}</span> <span ng-switch-when="1">{{\'label.dealerInventory.exactMatch\' | i18n}}</span> <span ng-switch-default>{{\'label.dealerInventory.exactMatches\' | i18n}}</span> </span> <span class="desktop">{{\'label.dealerInventory.within\' | i18n}}</span> </span> <span ng-show="screen.smart || screen.mobile" zip-box theme="offers-zip" request-find=\'findMe()\' request-submit="submitZipcode()" zip-code=\'data.zipCode.value\' zip-id=\'di-result-zipCode\'></span> <form ng-submit="submitRadius()" name="radiusForm" class="radius-form" novalidate> <div wrap-field class="item" sufix=" miles" value="data.radius"> <input type="tel" placeholder="Range" name="radiusField" ng-model="data.radius" maxlength="4" min="10" max="1000" class="radiusField" ng-class="{true:\'error\'}[radiusForm.radiusField.$error.required || radiusForm.radiusField.$error.integer || radiusForm.radiusField.$error.min || radiusForm.radiusField.$error.max]" ui-jq=\'numeric\' integer/> <span class="error" ng-show="radiusForm.radiusField.$error.integer">{{\'label.dealerInventory.distanceInteger\' | i18n}}</span> <span class="error" ng-show="radiusForm.radiusField.$error.min">{{\'label.dealerInventory.distanceMin\' | i18n}}</span> <span class="error" ng-show="radiusForm.radiusField.$error.max">{{\'label.dealerInventory.distanceMax\' | i18n}}</span> </div> </form> <span class="desktop"> {{\'label.dealerInventory.of\' | i18n}} </span> <span ng-hide="screen.smart || screen.mobile" zip-box theme="offers-zip" request-find=\'findMe()\' request-submit="submitZipcode()" zip-code=\'data.zipCode.value\' zip-id=\'di-result-zipCode\'></span> <div ng-switch-when="true" class="nav"> <a href="dealers/inventory" target="_self" class="changeCar">{{\'label.dealerInventory.changeCar\' | i18n}}</a> </div> </div> <div ng-switch-when="true" ng-show="!options.listViewMode && mobile" class="nav"> <button ng-click="onSwitchView($event)" ng-hide="options.listViewMode" class=\'viewList\'>{{\'label.dealerInventory.listView\' | i18n}}</button> <div class="relative"> <a class="filters-menu" mobile-handler mobile-menu="#dealerInventoryFilter"><span></span>{{\'label.dealerInventory.filter\' | i18n}}</a> <div select-list list="orderBy" value="options.sortBy.type" manual="true"></div> </div> </div> <div ng-hide="options.listViewMode && !mobile" class="section dealerInventoryVehicleMap" ng-cloak> <div ng-show="options.listViewMode && mobile" class="blocker" ng-click="onSwitchView($event)"></div> <div class="inventoryMapHolder"> <div id="map_canvas" ui-map="inventoryMap" class="map" ui-options="mapOptions"></div> <div ng-repeat="marker in mapMarkers" ui-map-marker="mapMarkers[$index]"> </div> <div ui-map-info-window="myInfoWindow" ui-options="infoboxOptions">	<div class="inventoryMapDetailHolder" ng-click="dealerSelected($event)"> <p class="count">{{currentDealer.vehicleCount}}</p> <div class="separator"></div> <div class="info"> <p class="matches">{{currentDealer.matches}} {{\'label.dealerInventory.exact\' | i18n}} {{\'label.dealerInventory.matches\' | i18n}}</span></p> <p class="description">{{\'label.dealerInventory.at\' | i18n}} {{currentDealer.name}}</p> <p class="miles">({{currentDealer.distance}} {{\'label.dealerInventory.mi\' | i18n}} {{\'label.dealerInventory.away\' | i18n}} )</p></div> <div class="arrow"></div> </div> </div> </div> </div> <div ng-switch-when="true" ng-hide="!options.listViewMode && mobile" class="nav"> <a class="filters-menu" mobile-handler mobile-menu="#dealerInventoryFilter"><span></span>{{\'label.dealerInventory.filter\' | i18n}}</a> <div select-list list="orderBy" value="options.sortBy.type" manual="true"></div> </div> <div ng-show="options.listViewMode" class="section dealerInventoryVehiclesList" ng-cloak>	<script type="text/javascript" src="https://ebusiness.qa.dealertrack.com/Suite/suite.js" widget="customButton"></script> <div dealer-inventory-list vehicles="vehicles" options="options"></div> </div> </div> </div>');$templateCache.put("/us/static/views/dealerInventory/dealerInventoryVehicles.html",'<div class="dealerInventoryVehicleSelector"> <div vehicle-grid target="inventory" ng-show="showVehicleSelector"></div> <div class="zipcode-overlay" ng-hide=\'zipCodeAvailable || showVehicleSelector\'> <div class="zipcode"> <div zip-code-form id=\'dealerInventoryZip\' theme=\'zipcode-form-dealer-inventory\' error-message="{{\'label.dealerLocator.error\' | i18n}}" placeholder="{{\'label.dealerLocator.zipcode\' | i18n}}" model=\'options.zipCode\' request="onZipCodeSubmit()"> <div class="zip-submit" title="Submit ZIP Code" ng-click="submitZipForm()" ng-show="validZipCode"> <span class="zip-submit-arrow">{{\'label.build.zipcode\' | i18n}}</span> </div> <div class="zip-error" ng-hide=\'validZipCode\'> <p>{{initialErrorMessage}}</p> </div> </div> </div> </div> </div> ');$templateCache.put("/us/static/views/dealerInventory/filters/color.html",'<div class="{{filter.propertyName}}" ng-switch on="filter.propertyName"> <h3>{{filter.name}}</h3> <ul ng-switch-when="interiorColor"> <li filter-list-item ng-repeat="item in filter.data" item="item" filter="filter" ng-show="item.active" ng-class="{true:\'singleItem\'}[filter.data.length <=1]"></li> </ul> <ul ng-switch-default> <li filter-color-item ng-repeat="item in filter.data" item="item" filter="filter" ng-show="item.active"></li> </ul> </div>');$templateCache.put("/us/static/views/dealerInventory/filters/colorItem.html",'<li> <span ng-click="onChange()" ng-switch on="filter.propertyName"> <span ng-switch-when="interiorColor" color-block key="{{filter.type}}_{{item.id}}" label="{{filter.name}}" name="{{item.name}}" color="{{colorStyle.backgroundColor}}" show-text="true" property="carColor" selected="item.selected" fabric="{{filter.fabric}}"></span> <span ng-switch-default color-block key="{{filter.type}}_{{item.id}}" label="{{filter.name}}" name="{{item.name}}" color="{{colorStyle.backgroundColor}}" property="carColor" selected="item.selected" fabric="{{filter.fabric}}"></span> </span> </li>');$templateCache.put("/us/static/views/dealerInventory/filters/list.html",'<div> <h3>{{filter.name}}</h3> <ul> <li filter-list-item ng-repeat="item in filter.data" item="item" filter="filter" ng-show="item.active" ng-class="{true:\'singleItem\'}[filter.data.length <=1]"></li> </ul> </div>');$templateCache.put("/us/static/views/dealerInventory/filters/listItem.html",'<li> <input type="checkbox" id="{{filter.propertyName}}_{{item.id}}" name="{{filter.propertyName}}_{{item.id}}" value="{{item.id}}" ng-class="{true:\'selected\', false:\'\'}[item.selected]" ng-click="onChange()" ng-checked="item.selected" ui-jq="uniform"/><label for="{{filter.propertyName}}_{{item.id}}">{{item.name}}</label> </li>');$templateCache.put("/us/static/views/dealerInventory/filters/monthlyPayment.html",'<div class="section monthlyPayment"> <div class="item"> <input ui-jq="uniform" type="checkbox" value="showMonthly" id="showMonthly" name="showMonthly" ng-class="{true:\'selected\', false:\'\'}[monthly.selected]" ng-click="onChange()" ng-checked="monthly.selected"/> <label for="showMonthly">{{\'label.dealerInventory.showMonthlyPayment\' | i18n}}</label> </div> <div class="collapsible"> <span>{{\'label.dealerInventory.edit\' | i18n}}</span> <div class="collapsed-content"> <div payment-calculator></div> </div> </div> </div>');$templateCache.put("/us/static/views/dealerInventory/filters/price.html",'<div class="section"> <h3>{{\'label.paymentCalculator.price\' | i18n}}</h3> <div id="range" class="section"> <span>{{prices.low | noFractionCurrency}}</span> - <span>{{prices.high | noFractionCurrency}}</span> <div class="jq-slider" ui-jq="slider" ui-options="sliderOptions"></div> </div> </div>');$templateCache.put("/us/static/views/dealerInventory/filters/range.html",'<div class="filterRange"> <h3>{{filter.name}} <span class="values"><span>{{lowValue | noFractionCurrency}}</span><span class="separator"> - </span><span>{{highValue | noFractionCurrency}}</span></span></h3> <div id="range" class="section"> <div class="range-slider"> <div class="jq-slider" ui-jq="slider" ui-options="sliderOptions"></div> </div> </div> </div>');$templateCache.put("/us/static/views/dealerInventory/vehicleItem.html",'<div class="section shared-vehicleTout" ng-switch on="width> 480 && width <=1100"> <a href="{{baseURI}}/dealers/inventory/detail?vin={{vehicle.vin}}&zipcode={{options.zipCode}}&monthly={{vehicle.pricePerMonth}}&hidePaymentCalculator={{$root.hidePaymentCalculator}}&dealerId={{vehicle.dealerCode}}&price={{vehicle.msrp}}&msrp={{vehicle.msrp}}&seriesName={{vehicle.seriesName}}&seriesYear={{vehicle.year.value}}&trim={{vehicle.trim.value}}&drivetrain={{vehicle.driveTrain.value}}&picture={{picture}}" ng-click="onDetail($index,$event,{{vehicle.year.value}},\'{{vehicle.seriesName}}\',\'{{vehicle.vin}}\',\'{{vehicle.dealerCode}}\',{{vehicle.chatEnabled}}, { hidePaymentCalculator : $root.hidePaymentCalculator, dealerId : vehicle.dealerCode, zipCode : options.zipCode, vin : vehicle.vin, price : vehicle.msrp, msrp : vehicle.msrp, seriesName : vehicle.seriesName, seriesYear : vehicle.year.value, picture : picture, trim : vehicle.trim.value, driveTrain : vehicle.driveTrain.value })" class="hotspot">&nbsp;</a> <div class="content"> <a href="{{baseURI}}/dealers/inventory/detail?vin={{vehicle.vin}}&zipcode={{options.zipCode}}&monthly={{vehicle.pricePerMonth}}&hidePaymentCalculator={{$root.hidePaymentCalculator}}&dealerId={{vehicle.dealerCode}}&price={{vehicle.msrp}}&msrp={{vehicle.msrp}}&seriesName={{vehicle.seriesName}}&seriesYear={{vehicle.year.value}}&trim={{vehicle.trim.value}}&drivetrain={{vehicle.driveTrain.value}}&picture={{picture}}" ng-click="onDetail($index,$event,{{vehicle.year.value}},\'{{vehicle.seriesName}}\',\'{{vehicle.vin}}\',\'{{vehicle.dealerCode}}\',{{vehicle.chatEnabled}}, { hidePaymentCalculator : $root.hidePaymentCalculator, dealerId : vehicle.dealerCode, zipCode : options.zipCode, vin : vehicle.vin, price : vehicle.msrp, msrp : vehicle.msrp, seriesName : vehicle.seriesName, seriesYear : vehicle.year.value, picture : picture, trim : vehicle.trim.value, driveTrain : vehicle.driveTrain.value })" class="thumb"><img ng-src="{{contentURI}}{{vehicle.thumbImageUrl}}"/></a> <div class="section purchaseOptions" ng-switch on="width <=480"> <div class="series-name" ng-class="{true:\'exact\'}[vehicle.trim.exact || vehicle.transmission.exact]"> <span class="name">{{options.vehicle.name}}</span> <span class="trim">{{vehicle.trim.value}}</span> {{vehicle.transmission.value}} </div> <div> <div class="msrp highlighted"><span>{{vehicle.msrp | noFractionCurrency}}<sup>*</sup></span> {{\'label.dealerInventory.msrp\' | i18n}}</div> <div class="monthly"><span>{{vehicle.pricePerMonth | noFractionCurrency}}<sup>*</sup></span> {{\'label.dealerInventory.perMonth\' | i18n}}</div> </div> <a class="dealer">{{\'label.dealerInventory.at\' | i18n }} <span>{{vehicle.dealerName}}</span> <span class="away">({{vehicle.distFromUser}} {{\'label.dealerInventory.mi\' | i18n}} {{\'label.dealerInventory.away\' | i18n}})</span></a> <ul> <li><span class="dealer">VIN # </span>{{ vehicle.vin }}</li> <li><a class="phone-link" href="tel:{{ vehicle.dealerPhone }}">{{ vehicle.dealerPhone }}</a></li> </ul> </div> <div class="section colors default" ng-switch-when="false"> <span color-block key="{{vehicle.exteriorColor.key}}" label="{{exteriorColor.label}}" name="{{exteriorColor.name}}" color="{{exteriorColor.color}}" property="exteriorColor" show-text="true" selected="vehicle.exteriorColor.exact"></span> <span class="interiorColor" color-block key="{{vehicle.interiorColor.key}}" label="{{interiorColor.label}}" name="{{interiorColor.name}}" color="{{interiorColor.color}}" property="interiorColor" show-text="true" selected="vehicle.interiorColor.exact" fabric="\'\'"></span> </div> <div class="info" ng-switch on="width>= 1100 && width <1150"> <dl> <li ng-class="{true:\'exact\'}[vehicle.trim.exact]"> <dt>{{\'label.dealerInventory.trim\' | i18n}} </dt> <dd>{{vehicle.trim.value}}</dd> </li> <li ng-class="{true:\'exact\'}[vehicle.transmission.exact]"> <dt>{{\'label.dealerInventory.transmission\' | i18n}}</dt> <dd>{{vehicle.transmission.value}}</dd> </li> <li ng-class="{true:\'exact\'}[vehicle.engineCylinder.exact]"> <dt>{{\'label.dealerInventory.engine\' | i18n}}</dt> <dd>{{vehicle.engineCylinder.value}}</dd> </li> <li ng-show="vehicle.driveTrain" ng-class="{true:\'exact\'}[vehicle.driveTrain.exact]"> <dt>{{\'label.dealerInventory.drivetrain\' | i18n}}</dt> <dd>{{vehicle.driveTrain.value}}</dd> </li> </dl> <div class="section colors default" ng-switch-when="true"> <span color-block key="{{vehicle.exteriorColor.key}}" label="{{exteriorColor.label}}" name="{{exteriorColor.name}}" color="{{exteriorColor.color}}" property="exteriorColor" show-text="true" selected="vehicle.exteriorColor.exact"></span> <span class="interiorColor" color-block key="{{vehicle.interiorColor.key}}" label="{{interiorColor.label}}" name="{{interiorColor.name}}" color="{{interiorColor.color}}" property="interiorColor" show-text="true" selected="vehicle.interiorColor.exact" fabric="\'\'"></span> </div> </div> <div class="section links default" ng-switch-when="false"> <a href="{{baseURI}}/dealers/inventory/detail?vin={{vehicle.vin}}&zipcode={{options.zipCode}}&monthly={{vehicle.pricePerMonth}}&hidePaymentCalculator={{$root.hidePaymentCalculator}}&dealerId={{vehicle.dealerCode}}&price={{vehicle.msrp}}&msrp={{vehicle.msrp}}&seriesName={{vehicle.seriesName}}&seriesYear={{vehicle.year.value}}&trim={{vehicle.trim.value}}&drivetrain={{vehicle.driveTrain.value}}&picture={{picture}}" ng-click="onDetail($index,$event, null, null, null, null, null, { hidePaymentCalculator : $root.hidePaymentCalculator, dealerId : vehicle.dealerCode, zipCode : options.zipCode, vin : vehicle.vin, price : vehicle.msrp, msrp : vehicle.msrp, seriesName : vehicle.seriesName, seriesYear : vehicle.year.value, picture : picture, trim : vehicle.trim.value, driveTrain : vehicle.driveTrain.value })" class="detail">></a> <div ng-hide="$root.hidePaymentCalculator" dt-cta-payment-calculator data-hide-payment-calculator="hidePaymentCalculator" data-dealer-id="vehicle.dealerCode" data-zip-code="options.zipCode" data-vin="vehicle.vin" data-price="vehicle.msrp" data-msrp="vehicle.msrp" data-series-name="vehicle.seriesName" data-series-year="vehicle.year.value" data-section="\'inventory\'" data-drive-train="vehicle.driveTrain.value" data-trim-name="vehicle.trim.value" class="button" suitequerystring="{{excludFunc()}}&{{defaultFinanceTypeFunc()}}&{{modelStyleFunc()}}&accountId=2525556&dealerId={{dealerId}}&zip={{zipCode}}&vin={{vin}}&price={{price}}&msrp={{msrp}}&picture={{picture}}" widget="customButton"> <a href="">{{\'label.paymentCalculator.calculate\' | i18n}} {{\'label.paymentCalculator.payment\' | i18n}}<span></span></a> </div> <div class="button testDrive"><a href="{{baseURI}}/forms/testdriverequest/{{options.vehicle.code}}/{{options.vehicle.year}}?vin={{vehicle.vin}}" target="_self">{{\'label.dealerInventory.testDrive\' | i18n}}<span></span></a></div> <div class="button"><a href="{{baseURI}}/forms/getaquote/{{options.vehicle.code}}/{{options.vehicle.year}}?vin={{vehicle.vin}}" target="_self">{{\'label.general.getAQuote\' | i18n}}<span></span></a></div> <div class="button" ng-if="vehicle.chatEnabled"><a href="#" dealer-chat year="{{vehicle.year.value}}" model="{{vehicle.seriesName}}" vin="{{vehicle.vin}}" placement="vehicle_item" dealer-code="{{vehicle.dealerCode}}" chat-enabled="{{vehicle.chatEnabled}}" prevent-default>{{\'label.dealerInventoryDetail.chatWithDealer\' | i18n}}<span></span></a></div> </div> </div> <div class="tablet" ng-switch-when="true"> <div class="section colors">	</div> <div class="section links"> <div class="colors"> <span color-block key="{{vehiclfe.exteriorColor.key}}" label="{{exteriorColor.label}}" name="{{exteriorColor.name}}" color="{{exteriorColor.color}}" property="exteriorColor" show-text="true" selected="vehicle.exteriorColor.exact"></span> <span class="interiorColor" color-block key="{{vehicle.interiorColor.key}}" label="{{interiorColor.label}}" name="{{interiorColor.name}}" color="{{interiorColor.color}}" property="interiorColor" show-text="true" selected="vehicle.interiorColor.exact" fabric="\'\'"></span> </div> <div class="ctas-block"> <div> <div ng-hide="$root.hidePaymentCalculator" dt-cta-payment-calculator data-hide-payment-calculator="hidePaymentCalculator" data-dealer-id="vehicle.dealerCode" data-zip-code="options.zipCode" data-vin="vehicle.vin" data-price="vehicle.msrp" data-msrp="vehicle.msrp" data-series-name="vehicle.seriesName" data-series-year="vehicle.year.value" data-section="\'inventory\'" data-drive-train="vehicle.driveTrain.value" data-trim-name="vehicle.trim.value" class="button" suitequerystring="{{excludFunc()}}&{{defaultFinanceTypeFunc()}}&{{modelStyleFunc()}}&accountId=2525556&dealerId={{dealerId}}&zip={{zipCode}}&vin={{vin}}&price={{price}}&msrp={{msrp}}&picture={{picture}}" widget="customButton"> <a href="">{{\'label.paymentCalculator.calculate\' | i18n}} {{\'label.paymentCalculator.payment\' | i18n}}<span></span></a> </div> </div> <div class="testDrive"> <div class="button"><a href="{{baseURI}}/forms/testdriverequest/{{options.vehicle.code}}/{{options.vehicle.year}}?vin={{vehicle.vin}}" target="_self">{{\'label.dealerInventory.testDrive\' | i18n}}<span></span></a></div> </div> <div> <div class="button"><a href="{{baseURI}}/forms/getaquote/{{options.vehicle.code}}/{{options.vehicle.year}}?vin={{vehicle.vin}}" target="_self">{{\'label.general.getAQuote\' | i18n}}<span></span></a></div> </div> <div> <div class="button" ng-if="vehicle.chatEnabled"><a href="#" dealer-chat year="{{vehicle.year.value}}" model="{{vehicle.seriesName}}" vin="{{vehicle.vin}}" placement="vehicle_item" dealer-code="{{vehicle.dealerCode}}" chat-enabled="{{vehicle.chatEnabled}}" prevent-default>{{\'label.dealerInventoryDetail.chatWithDealer\' | i18n}}<span></span></a></div> </div> </div> </div> </div> </div> ');$templateCache.put("/us/static/views/dealerInventoryVehiclesList.html",'<ul class="vehicles" ng-hide="!vehicles.length"> <li ng-repeat="vehicle in vehicles" style="width: 20%; float: left; height: 300px;"> <div ng-include="\'/views/shared/vehicleTout.html\'"></div> </li> </ul> ');$templateCache.put("/us/static/views/dealerLocator/dealerInfoboxDetail.html",'<div class="dealer-infobox-holder" lang-class> <div class="dealer-infobox-title"> <h1>{{dealer.name}}<br><span>({{dealer.distance | number:1}} {{\'label.dealerLocator.milesAway\' | i18n}})</span></h1> </div> <div class="dealer-infobox"> <div class="left"> <p>{{dealer.location.street1}}</p> <p>{{dealer.location.street2}}</p> <p>{{dealer.location.city}}, {{dealer.location.state}} {{dealer.location.zipCode}}</p> <p class=\'phones\' ng-hide=\'dealers.phones.length==0 || !mobile\'><span class=\'phone\'><a class="phone-link" href="tel:{{dealer.phones[0].number}}">{{dealer.phones[0].number}}</a></span></p> <div class="operating-services" ng-show="dealer.services.length>=1 && mobile"> <p>{{\'label.dealerLocator.offerings\' | i18n}}:</p> <ul> <li ng-repeat="service in dealer.services"> {{service}} </li> </ul> </div> <div class="links" dealer-links> <div> <a ng-href ng-click=\'dealerSite()\' target="_blank" ng-show="dealer.url" class="next-section-button"> <div class="text">{{\'label.dealerLocator.dealerSite\' | i18n}}</div> <div class="arrow"></div> </a> </div> <div> <a ng-click=\'googleDirections()\' target="_blank" class="next-section-button"> <div class="text">{{\'label.dealerLocator.getDirections\' | i18n}}</div> <div class="arrow"></div> </a> </div> <div> <a ng-click=\'getQuote()\' class="next-section-button"> <div class="text">{{\'label.dealerLocator.getAQuote\' | i18n}}</div> <div class="arrow"></div> </a> </div> <div> <a ng-click=\'requestTestDrive()\' class="next-section-button"> <div class="text">{{\'label.dealerLocator.requestATestDrive\' | i18n}}</div> <div class="arrow"></div> </a> </div> <div> <a dealer-chat dealer="dealer" chat-enabled="{{dealer.chatEnabled}}" dealer-code="{{dealer.code}}" placement="dealer_infobox_detail" ng-if="dealer" class="next-section-button"> <div class="text">{{\'label.dealerLocator.chatWithDealer\' | i18n}}</div> <div class="arrow"></div> </a> </div> <div> <a href=\'{{baseURI}}/owners/service?dealer={{dealer.code}}\' target="_blank" class="next-section-button"> <div class="text">{{\'label.dealerLocator.scheduleService\' | i18n}}</div> <div class="arrow"></div> </a> </div> </div> </div> <div class="right"> <p class=\'phones\' ng-hide=\'dealers.phones.length==0\'><span class=\'phone\'>{{dealer.phones[0].number}}</span></p> <div class="operating-hours" ng-show="dealer.operatingHours"> <p>OPEN TODAY</p> <p class=\'operating-hours-today\' ng-repeat="operatingHour in dealer.operatingHours" ng-show="{{operatingHour.today}}"> {{operatingHour.openingTime}} - {{operatingHour.closingTime}} </p> <div> <p class=\'operating-hours-list\' ng-click="showAllHours=!showAllHours"> <span class=\'operating-hours-arrow {{{true:"open",false:""}[showAllHours]}}\'></span> <span class=\'operating-hours-desc\' ng-hide=\'showAllHours\'>See All Hours</span> </p> <ul ng-show="showAllHours"> <li ng-repeat="operatingHour in dealer.operatingHours"> {{operatingHour.day | limitTo:3}} {{operatingHour.openingTime}} - {{operatingHour.closingTime}} </li> </ul> </div> <div class="clear">&nbsp;</div> </div> <div class="operating-services" ng-show="dealer.services.length>=1"> <p>{{\'label.dealerLocator.offerings\' | i18n}}:</p> <ul> <li ng-repeat="service in dealer.services"> {{service}} </li> </ul> </div> </div> <div class="share-icon" ng-hide=\'true\'>&nbsp;</div> <div class="clear">&nbsp;</div> <div class="disclaimer-info"> <p> {{\'label.dealerLocator.disclaimer-info\' | i18n}} </p> </div> </div> </div> ');$templateCache.put("/us/static/views/dealerLocator/dealerLocatorPage.html",'<section class="dealer-locator-section" dealer-locator-interaction responsive-handler> <div class="dealer-zipcode-overlay" ng-hide=\'codeExist\'> <div ng-class="{true:\'zipcode\',false:\'zipcode error\'}[validZipCode]" dealer-locator-zip-box request-submit=\'update()\' request-find="findMe()" zip-code="zipCode" zip-id="dlInitZipCode"> <div zip-code-form id=\'dlInitZipCode\' theme=\'zip-dealer-locator-init\' error-message="{{\'label.dealerLocator.error\' | i18n}}" placeholder="{{\'label.dealerLocator.zipcode\' | i18n}}" model=\'zipCode\' request="requestSubmit()"> <div class="zip-submit" title="{{\'label.dealerLocator.zipcode.alt\' | i18n}}" ng-click="submitZipForm()" ng-show="validZipCode"> <span class="zip-submit-arrow">{{\'label.dealerLocator.zipcode.alt\' | i18n}}</span> </div> <div class="zip-error" ng-hide=\'validZipCode\'> <p>{{errorMessage}}</p> </div> </div> </div> </div>	<div lightbox open=\'mobileDetail\' id=\'dealer-mobile-detail-lightbox\' title="{{currentDealer.name | uppercase}}"> <div dealer-infobox-detail dealer=\'currentDealer\' mobile=\'mobile\'></div> </div> <div ng-class="{true:\'dealer-locator-sidebar open\',false:\'dealer-locator-sidebar close\'}[sidebar]" ng-show=\'codeExist\' dealer-fix-height> <div ng-class="{true:\'dealer-locator-expand-button\',false:\'dealer-locator-expand-button open\'}[sidebar]" ng-click=\'toggleSidebar()\'></div>	<div ng-class="{true:\'dealer-locator-zipcode-side\',false:\'dealer-locator-zipcode-side error\'}[validZipCode]" dealer-locator-zip-box data=\'dealers.length\' request-submit=\'update()\' request-find="findMe()" zip-code="zipCode" zip-id="dlSideZipCode">	<p class="label" ng-hide=\'sideEditMode\'>{{data}} {{\'label.dealerLocator.near\' | i18n}}</p> <div zip-code-form id=\'dlSideZipCode\' theme=\'zip-form-results\' error-message="{{\'label.dealerLocator.error\' | i18n}}" placeholder="{{\'label.dealerLocator.zipcode\' | i18n}}" model=\'zipCode\' request="requestSubmit()"> </div>	<div class="zip-submit" title="{{\'label.dealerLocator.zipcode.alt\' | i18n}}" ng-click="submitZipForm()" ng-show=\'sideEditMode && validZipCode\'> <span class="zip-submit-arrow">{{\'label.dealerLocator.zipcode.alt\' | i18n}}</span> </div> <div class="zip-error" ng-hide=\'validZipCode\'> <p>{{errorMessage}}</p> </div> </div> <div class="dealer-locator-filters collapsible" dealer-filters=\'filters\' menu-visible=\'filterMenu\' expanded="false" result-count=\'dealers.length\'> <h3><span>{{\'label.dealerLocator.filter\' | i18n}}:</span> <span ng-show="collapsed">{{selectedFilterValue}}</span></h3> <ul class="list"> <li> <div class=\'filter-holder\'> <div class=\'filter-input\'><input type="checkbox" ui-jq="uniform" name="0" value=\'0\' data-id=\'0\' dealer-filter=\'0\'/></div> <div class=\'filter-label\'><label for="0">{{\'label.dealerLocator.allDealerships\' | i18n}}</label></div> </div> </li> <li ng-repeat="filter in dealerFilters"> <div class="filter-holder"> <div class="filter-input"><input type="checkbox" ui-jq="uniform" name="{{filter.featureId}}" value=\'{{filter.featureId}}\' dealer-filter=\'{{filter.featureId}}\' data-id=\'{{filter.featureId}}\'/></div> <div class="filter-label"><label for="{{filter.featureId}}">{{filter.featureName}}</label></div> </div> </li> </ul> <p class="dealer-result-msg" ng-hide="resultCount> 0">{{\'label.dealerLocator.noMatchMsg\' | i18n}}</p> </div>	<div class="dealer-locator-list"> <ul> <li ng-class="{false:\'dealer-locator-list-wrapper\',true:\'dealer-locator-list-wrapper selected\'}[selected]" ng-repeat=\'dealer in dealers\' dealer-locator-iterator id=\'dl_{{dealer.id}}\' dealer=\'dealer\' fixer=\'fixHeight()\' last="$last" ng-click="selectDealer()" mobile=\'mobile\'> <div class="inner-wrapper"> <div class="dealer-locator-list-item"> <div class="mark-holder"> <div class="mark"> <span class=\'mark-label\'>{{dealer.id}}</span> </div> <p class=\'mark-distance\'>{{dealer.distance | number:1}} MI</p> </div> <div class="dealer-name-holder"> <div class=\'dealer-name\'>{{dealer.name}}<span class="arrow">&nbsp;</span></div> <div ng-if="dealer.location" ng-init="address=dealer.location"> <p class="address">{{address.street1}}</p> <p class="address" ng-if="address.street2">{{address.street2}}</p> <p class="address2">{{address.city}}, {{address.state}}, {{address.zipcode}}</p> <p class="tel" ng-if="dealer.phones" ng-init="phone=dealer.phones[0].number"> <a class="phone-link" href="tel:{{phone}}">{{phone}}</a> </p> </div> </div> </div> </li> </ul> </div> </div> <div class="dealer-locator-device-header">	<div ng-class="{true:\'dealer-locator-zipcode-side\',false:\'dealer-locator-zipcode-side error\'}[validZipCode]" dealer-locator-zip-box data=\'dealers.length\' request-submit=\'update()\' request-find="findMe()" zip-code="zipCode" zip-id="dlDeviceSideZipCode"> <div class="findme" title="{{\'label.dealerLocator.findme\' | i18n}}" ng-click="requestFind()" ng-show=\'sideEditMode\'>{{\'label.dealerLocator.findme\' | i18n}}</div> <p class="label" ng-hide=\'sideEditMode\'>{{data}} {{\'label.dealerLocator.near\' | i18n}}</p> <div zip-code-form id=\'dlDeviceSideZipCode\' theme=\'zip-form-results\' error-message="{{\'label.dealerLocator.error \' | i18n}}" placeholder="{{\'label.dealerLocator.zipcode\' | i18n}}" model=\'zipCode\' request="requestSubmit()"> </div>	<div class="zip-submit" title="{{\'label.dealerLocator.zipcode.alt\' | i18n}}" ng-click="submitZipForm()" ng-show=\'sideEditMode && validZipCode\'> <span class="zip-submit-arrow">{{\'label.dealerLocator.zipcode.alt\' | i18n}}</span> </div> <div class="zip-error" ng-hide=\'validZipCode\'> <p>{{errorMessage}}</p> </div> </div> </div> <div class="dealer-locator-map open" ng-hide=\'mapoff || !codeExist\'>	<div id="map_canvas" ui-map="myMap" class="map" ui-options="mapOptions"></div> </div>	<div ng-repeat="marker in myMarkers" ui-map-marker="myMarkers[$index]"> </div>	<div ui-map-info-window="myInfoWindow" ui-options="infoboxOptions"> <div dealer-infobox-detail dealer=\'currentDealer\' mobile=\'mobile\'></div> </div></section> ');
$templateCache.put("/us/static/views/directives/720PanoCanvas.html",'<div class="panoWrapper" align="center"><!--[if lte IE 7]> <div class="ie7 center"> <![endif]--><!--[if lte IE 7]> <div class="ie7 center"> <![endif]--><!--[if IE 8]>     <div class="ie8 center"> <![endif]--><!--[if IE 9]>     <div class="ie9 center"> <![endif]--> <div id="wrapper-canvas" class="text-center"> <h1>720 Pano Browser View</h1> <canvas id="canvas" class="pano" width="741" height="395"> <p> <img src="../static/img/720pano_images/static_image_IE_versions.jpg" id="imageid" alt=""></p> </canvas> </div> <h2>720 Pano Mobile View</h2> <div id="container-img"> <div id="wrapper-img" style="cursor: move;"> <div id="inner"> <img alt="" src="../static/img/720pano_images/Soul_Pano_BaseHoundstooth4000.jpg"> </div> </div> </div><!--[if lte IE 7]> </div> <![endif]--><!--[if IE 8]>     </div> <![endif]--><!--[if IE 9]>     </div> <![endif]--> </div>');$templateCache.put("/us/static/views/directives/accordion-item.html",'<div class="accordion-item" ng-class="{\'accordion-no-content\':!hasContent}" responsive-handler> <div class="accordion-block" ng-if="!hasContent"> <div class="accordion-title">{{title}}</div> </div> <div class="accordion-mobile"> <div class="accordion-title" ng-click="openLightbox()">{{title}}<span class="arrow"></span></div> <div lightbox id=\'{{id}}-accordion-lightbox\' class="accordion-box" open=\'openBox\' type=\'modal\' title="{{title}}"> <div class="accordion-content" ng-switch on="showImg"> <div class="accordion-text" ng-transclude></div> <div class="accordion-img" ng-switch-when="true"> <img alt="{{imgAlt}}" ng-src="{{contentURI}}{{srcSmall}}"/> </div> </div> </div> </div> <div class="accordion-desktop"> <div class="collapsible" expanded="{{openBox}}" animated="true"> <div class="accordion-title">{{title}}<span class="arrow"></span></div> <div class="accordion-content"> <div class="accordion-table"> <div class="accordion-row" ng-switch on="showImg"> <div content-responsive-image class="accordion-img" ng-switch-when="true"> <img alt="{{imgAlt}}" data-img-1280="{{contentURI}}{{srcLarge}}" data-img-960="{{contentURI}}{{srcMedium}}" data-img-480="{{contentURI}}{{srcSmall}}" data-src="{{contentURI}}{{srcSmall}}" src="/us/static/img/transparent.png"/> </div> <div class="accordion-text" ng-transclude></div> </div> </div> </div> </div> </div> </div>');$templateCache.put("/us/static/views/directives/bluetooth.html",'<div class="bluetooth-content"> <div lightbox id=\'bluetooth-box\' class="bluetooth-box" open=\'bluetoothData.open\' type=\'modal\' title="{{\'label.bluetooth.setup\' | i18n}}"> <div ng-show="selectVehicle"> <div ng-include src="static + \'/views/bluetooth/selectVehicle.html\'"></div> </div> <div ng-show="selectAudio"> <div ng-include src="static + \'/views/bluetooth/selectAudioSystem.html\'"></div> </div> <div ng-show="selectDevice"> <div ng-include src="static + \'/views/bluetooth/selectDevice.html\'"></div> </div> <div ng-show="footnotesPage"> <div ng-include src="static + \'/views/bluetooth/btFootnotes.html\'"></div> </div> </div> </div> ');$templateCache.put("/us/static/views/directives/colorBlock.html",'<span class="colorBlock {{property}}-{{key}}" ng-class="{\'selected\':selected,\'showText\':showText}" ng-switch on="showText"> <span class="carColor-{{key}} box" ng-click="onColorBlock();" tooltip="{{name}}"> <i ng-style="{\'background\': \'-ms-linear-gradient(to bottom, rgba({{color | hexToRGB}},0.7), rgba({{color | hexToRGB}},1))\', \'background\' : \'linear-gradient(to bottom, rgba({{color | hexToRGB}},0.7) 0%, rgba({{color | hexToRGB}},1))\'}"> </i> <span></span> </span> <span class="label" ng-switch-when="true"> <span class="title"> <span class="text">{{label}}</span> <span class="mobile">{{label | truncate:3}}</span> </span> <span class="name">{{name}}</span> </span> </span>');$templateCache.put("/us/static/views/directives/content-table.html",'<div class="content-table-holder {{palette}}">	<h1>{{tableTitle}}</h1> <div class="pagination" pagination rows="rows" pages="pages" component-id="tableId" visible=\'pagTop\'></div>	<table ng-class=\'{{palette}}\'> <thead> <tr> <th ng-repeat=\'t in titles\'> {{t}} </th> </tr> </thead> <tbody> <tr ng-repeat=\'record in records\'> <td ng-repeat=\'data in record\' data-header=\'{{titles[$index]}}\'> <div ng-if=\'data.type !=="url"\'>{{data.label}}</div> <div ng-if=\'data.type==="url"\' class=\'link\'><a ng-href="{{data.value}}">{{data.label}}</a></div> </td> </tr> </tbody> </table> <div class="pagination" pagination rows="rows" pages="pages" component-id="tableId" visible=\'pagBottom\'></div> </div>');$templateCache.put("/us/static/views/directives/dealerItem.html",'<li> <input type="checkbox" id="dealer_{{dealer.code}}" name="dealer_{{dealer.code}}" value="{{dealer.code}}" ng-click="onChange()" ng-checked="dealer.selected" ui-jq="uniform"/> <p class="block" ng-switch on="disableLink"> <span ng-switch-when="true" class="name">{{dealer.name}}</span> <a ng-switch-default href="{{dealer.url}}" class="name">{{dealer.name}}</a> <span class="distance">({{dealer.distFromUser}} {{\'label.dealerInventory.mi\' | i18n}} {{\'label.dealerInventory.away\' | i18n}})</span> <span class="address">{{dealer.address}}</span> <span class="address2">{{dealer.city}}, {{dealer.state}}, {{dealer.zipcode}}</span> <span class="tel"> <span>{{dealer.phone}}</span> <a class="phone-link" href="tel:{{dealer.phoneFull}}">{{dealer.phone}}</a> </span> </p> </li> ');$templateCache.put("/us/static/views/directives/debugPanel.html",'<div class="debugPanel"> <div ng-if="console.active"> <header> <span ng-click="clear()">Clear</span> </header> <div class="panel" ng-bind-html-unsafe="console.content"></div> </div> </div>');$templateCache.put("/us/static/views/directives/disclaimers.html",'<div class="disclaimers-content"> <div lightbox id=\'disclaimer-box\' class="disclaimer-box" open=\'disclaimersData.open\' type=\'modal\' title="{{disclaimersData.title}}"> <div ng-switch on="disclaimersData.reference"> <div ng-switch-when="true" ng-show="disclaimersData.reference"> <div ng-include="getURI(disclaimersData.content)"></div> </div> <div ng-switch-default ng-hide="disclaimersData.reference"> <div ng-bind-html="disclaimersData.content"></div> </div> </div> </div> </div>');$templateCache.put("/us/static/views/directives/fishEyeCanvas.html",'<div class="fish-eye-wrapper pano"><!--[if lte IE 7]> <div class="ie7 center"> <![endif]--><!--[if lte IE 7]> <div class="ie7 center"> <![endif]--><!--[if IE 8]>     <div class="ie8 center"> <![endif]--><!--[if IE 9]>     <div class="ie9 center"> <![endif]--> <div id="wrapper-canvas" class="text-center" ng-hide="isMobile()"> <img src="" id="static-img" alt=""> <canvas id="canvas" name="canvas" style="display:none"/> </div> <div id="container-img" ng-show="isMobile()"> <div id="wrapper-img" style="cursor: move;"> <img alt="" id="mobile-static-img" src=""> <div id="inner"> <img alt="" id="mobile-img" src=""> </div> </div> </div><!--[if lte IE 7]> </div> <![endif]--><!--[if IE 8]>     </div> <![endif]--><!--[if IE 9]>     </div> <![endif]--> </div>');$templateCache.put("/us/static/views/directives/fishEyeMobileCanvas.html",'<div class="panoWrapper" align="center"><!--[if lte IE 7]> <div class="ie7 center"> <![endif]--><!--[if lte IE 7]> <div class="ie7 center"> <![endif]--><!--[if IE 8]>     <div class="ie8 center"> <![endif]--><!--[if IE 9]>     <div class="ie9 center"> <![endif]--> <div id="container-img"> <h2>720 Pano Mobile View from path=> {{path}}</h2> <div id="wrapper-img" style="cursor: move; width:480px;overflow:hidden"> <div id="inner"> <img alt="" src="../static/img{{fullImagePath}}/fisheye-mobile.jpg"> </div> </div> </div><!--[if lte IE 7]> </div> <![endif]--><!--[if IE 8]>     </div> <![endif]--><!--[if IE 9]>     </div> <![endif]--> </div>');$templateCache.put("/us/static/views/directives/interstitialLink.html",'<div class="interstitial-link"> <a class="next-section-button" lightbox-link="{{lightboxId}}" href="{{href}}" prevent-default> <span class="text ng-binding" ng-transclude></span> <span class="arrow"></span> </a> <div lightbox id=\'{{lightboxId}}\' type=\'modal\'> <div class="interstitial-lightbox"> <p>{{\'label.interstitial.leavingKia\' | i18n}} {{href}}</p> <a target="{{target}}" class="gray-button centered" href="{{href}}">{{\'label.interstitial.continue\' | i18n}}</a> </div> </div> </div>');$templateCache.put("/us/static/views/directives/keySearchResult.html",'<div class="key-search"> {{result}} </div>');$templateCache.put("/us/static/views/directives/lightbox.html",'<div class="lightbox {{platform}}" ng-class="{\'lightbox-open\':openBind,\'lightbox-modal\':type==\'modal\',\'initialized\':initialized,\'lightbox-ready\':ready}" responsive-handler> <div class="lightbox-blocker" ng-click="close(true)">&nbsp</div> <div class="lightbox-box lightbox-{{boxClass.vertical}}-{{boxClass.horizontal}}"> <div class="lightbox-header"> <div class="lightbox-close" ng-click="close()"> <span class="icon"></span> <span class="text" ng-hide="title">{{\'label.build.close\' | i18n}}</span> </div> <h1 class="lightbox-title" ng-show="title">{{title}}</h1> </div> <div class="lightbox-content"> <div class="lightbox-scroll cms-authored" ng-transclude> </div> </div> <div class="lightbox-pointer"></div> </div> </div>');$templateCache.put("/us/static/views/directives/pagination.html",'<ul class="normal-pagination" ng-if="rows && pages> 1"> <li ng-if="current> 1"> <a href="#" ng-click="prev()" prevent-default>&lt; {{ \'label.content.table.prev\' | i18n}}</a> </li> <li ng-if="current==1">{{ \'label.content.table.page\' | i18n}}</li> <li ng-repeat="n in range(1,pages)"> <a href="#" ng-click="goto({{n}})" ng-class="{selected:n==current}" prevent-default>{{n}}</a> </li> <li ng-if="current <pages"> <a href="#" ng-click="next()" prevent-default>{{ \'label.content.table.next\' | i18n}} &gt;</a> </li> </ul> <ul class="small-pagination" ng-if="rows && pages> 1"> <li ng-if="current> 1"> <a href="#" ng-click="prev()" prevent-default>&lt; {{ \'label.content.table.prev\' | i18n}}</a> </li> <li>{{ \'label.content.table.page\' | i18n}} {{current}} {{ \'label.content.table.of\' | i18n}} {{pages}}</li> <li ng-if="current <pages"> <a href="#" ng-click="next()" prevent-default>{{ \'label.content.table.next\' | i18n}} &gt;</a> </li> </ul>');$templateCache.put("/us/static/views/directives/panorama.html",'<div class="panorama {{fullClass}}" ng-class="{fullscreen:fullscreen,touch:touch,loading:loading,static:(images.list.length <=1 || error)}"> <div ng-show="!disable && !(images.list.length <=1 || error)"> <div class="logo-overlay-ext"> <div class="fixed-ratio"></div> </div> <div class="gray-interior-Sorento-disclaimer" ng-show="!error && $parent.data.colors.interior.current.name==\'dark gray\' && $parent.series==\'sorento\' && ($parent.data.trim.current.name==\'EX\' || $parent.data.trim.current.name==\'EX V6\')"> <span ng-show="$parent.lang==\'en\'">Prototype Shown</span> <span ng-show="$parent.lang==\'es\'">Prototipo Mostrado</span> </div> </div> <nav> <div ng-show="!disable && !touch"> <a class="t" ng-click="move(0,-1,0)" ng-show="images.mode[\'mode720\']">Top</a> <a class="tr" ng-click="move(-1,-1,0)" ng-show="images.mode[\'mode720\']">Top Right</a> <a class="r" ng-click="move(-1,0,0)" ng-show="images.mode[\'mode360\']">Right</a> <a class="br" ng-click="move(-1,1,0)" ng-show="images.mode[\'mode720\']">Bottom Right</a> <a class="b" ng-click="move(0,1,0)" ng-show="images.mode[\'mode720\']">Bottom</a> <a class="bl" ng-click="move(1,1,0)" ng-show="images.mode[\'mode720\']">Bottom Left</a> <a class="l" ng-click="move(1,0,0)" ng-show="images.mode[\'mode360\']">Left</a> <a class="tl" ng-click="move(1,-1,0)" ng-show="images.mode[\'mode720\']">Top Left</a> </div> </nav> <ul class="stack"> <li ng-repeat="image in images.list" class="panorama-{{image.id}}" ng-class="{true:\'active\'}[images.active==image.id]"></li> </ul></div>');$templateCache.put("/us/static/views/directives/paymentCalculator.html",'<div class="section paymentCalculator">	<form ng-submit="onCommit()" action="none" id="monthlyForm" name="monthlyForm" class="monthlyForm form" novalidate="novalidate" novalidate> <div></div> <div id="monthly-rate"> <label for="rate">{{\'label.calculator.rate\' | i18n}}</label> <div wrap-field sufix="%" value="monthly.rate.value"> <input type="number" placeholder="%" step="0.1" id="rate" name="rate" ng-model="monthly.rate.value" required maxlength="4" min="0" max="30" class="rateField" ng-class="{true:\'error\'}[monthlyForm.rate.$error.float || monthlyForm.rate.$error.min || monthlyForm.rate.$error.max]" ui-jq=\'numeric\' ui-options="numericOptions" smart-float auto-min/> <span class="error" ng-show="monthlyForm.rate.$error.float">{{\'label.calculator.rate.error.invalid\' | i18n}}</span> <span class="error" ng-show="monthlyForm.rate.$error.min">{{\'label.calculator.rate.error.min\' | i18n}}</span> <span class="error" ng-show="monthlyForm.rate.$error.max">{{\'label.calculator.rate.error.max\' | i18n}}</span> </div> </div> <div id="monthly-down"> <label for="down">{{\'label.calculator.down\' | i18n}}</label> <div wrap-field prefix="$" value="monthly.down" type="number"> <input type="number" placeholder="$" id="down" name="down" ng-model="monthly.down" required maxlength="5" min="0" class="downField" ng-class="{true:\'error\'}[monthlyForm.down.$error.integer || monthlyForm.down.$error.min]" ui-jq=\'numeric\' integer auto-min/> <span class="error" ng-show="monthlyForm.down.$error.integer">{{\'label.calculator.down.error.invalid\' | i18n}}</span> <span class="error" ng-show="monthlyForm.down.$error.min">{{\'label.calculator.down.error.min\' | i18n}}</span> </div> </div> <div id="monthly-tradeIn"> <a href="http://www.kia.com/us/pages/en/kbb/" prevent-default>{{\'label.calculator.trade\' | i18n}}</a> <div wrap-field prefix="$" value="monthly.tradeIn" type="number"> <input type="number" placeholder="$" id="tradeIn" name="tradeIn" ng-model="monthly.tradeIn" required maxlength="5" min="0" class="tradeInField" ng-class="{true:\'error\'}[monthlyForm.tradeIn.$error.integer || monthlyForm.tradeIn.$error.min]" ui-jq=\'numeric\' integer auto-min/> <span class="error" ng-show="monthlyForm.tradeIn.$error.integer">{{\'label.calculator.trade.error.invalid\' | i18n}}</span> <span class="error" ng-show="monthlyForm.tradeIn.$error.min">{{\'label.calculator.trade.error.min\' | i18n}}</span> </div> </div> <div id="monthly-months"> <label>{{\'label.calculator.number\' | i18n}}</label> <ul> <li ng-repeat="month in monthly.months.list"> <input ui-jq="uniform" type="radio" value="{{month}}" id="monthly-month-{{month}}" name="monthly-month" ng-model="monthly.months.value" ng-checked="month==monthly.months.value"/> <label for="monthly-month-{{month}}">{{month}}</label> </li> </ul> </div> <span id="monthly-commit" ng-click="onCommit()" class="button">{{\'label.calculator.calculate\' | i18n}}</span> <div id="monthly-payment" ng-if="monthly.showPayment"> {{monthly.payment | noFractionCurrency}} / {{\'label.calculator.per.month\' | i18n}} </div> </form> <div class="legal"> <a href="#" class="disclaimer" prevent-default disclaimers-link disclaimers-id="disclaimer-payment-calculator">{{\'label.calculator.disclaimer\' | i18n}} <span>&gt;</span></a> </div> </div>');$templateCache.put("/us/static/views/directives/rangeSlider.html",'<div class="jq-slider" ui-jq="slider" class="high-{{high}} low-{{low}}"></div>');$templateCache.put("/us/static/views/directives/safetyRecallDate.html","<div class='safety-recall-date'> <div ng-if='refreshDate'>{{'label.searchVin.updatedAsOf' | i18n}} <span>{{refreshDate | date : 'M/d/yyyy'}}</span></div> </div>");$templateCache.put("/us/static/views/directives/selectList.html",'<div class="selectList"> <div class="collapsible"> <span>{{list[index].label}}</span> <ul> <li ng-repeat="item in list"><a ng-click="onSelect(item.value,$event)" ng-class="{true:\'selected\'}[value==item.value]">{{item.text}}</a></li> </ul> </div> </div>');$templateCache.put("/us/static/views/directives/slider.html","Error: Source sample is missing.");$templateCache.put("/us/static/views/directives/tab.html",'<div class="ui-tab" ng-class="{active: selected}" ng-show="selected" ng-transclude></div>');$templateCache.put("/us/static/views/directives/tabs.html",'<div class="ui-tabs"> <ul class="ui-tabs-nav"> <li ng-repeat="tab in tabs" ng-class="{active:tab.selected}" ng-switch on="imageTab"> <a ng-switch-when="true" ng-click="select(tab,$event)" class="tab-nav-image"><img ng-src="{{tab.caption}}" alt=""/></a> <a ng-switch-default ng-click="select(tab,$event)">{{tab.caption}}</a> </li> </ul> <div class="ui-tab-content" ng-transclude></div> </div>');$templateCache.put("/us/static/views/directives/wrapField.html",'<span class="wrapField" ng-class="{true:\'wrapField-editing\'}[edit]"> <span class="wrapField-label" ng-switch on="type"> <span class="wrapField-prefix">{{prefix}}</span> <span class="wrapField-value" ng-switch-when="number">{{value | number}}</span> <span class="wrapField-value" ng-switch-when="currency">{{value | noFractionCurrency}}</span> <span class="wrapField-value" ng-switch-default>{{value}}</span> <span class="wrapField-sufix">{{sufix}}</span> </span> <span class="wrapField-field" ng-transclude> </span> </span>');$templateCache.put("/us/static/views/directives/zipBox.html",'<div class="{{theme}}"> <div class=\'zip-group\'>	<div class="zip-form-holder" zip-field model=\'zipCode\' placeholder="{{\'label.dealerLocator.zipcode\' | i18n}}" request="requestSubmit(zipCode)" id=\'{{zipId}}\'> <form id="{{id}}" class="" ng-submit="send()" name="{{id}}"> <input name="zipField" type="tel" ng-model="model" placeholder="{{placeholder}}" ui-jq=\'numeric\' maxlength="5" ng-class="{true:\'field-error\'}[showError]"/> </form> </div> </div> <div class="error-message" ng-hide=\'validZipCode\'>{{errorMessage}}</div> <div class="submit-btn" ng-show=\'sideEditMode\' ng-click=\'submitZipForm()\'> <span class="caret"></span> </div> </div>');$templateCache.put("/us/static/views/directives/zipCodeForm.html",'<div class="{{theme}}" ng-hide=\'placeholder=="[[missing i18n]]"\'> <span class="error" ng-show="showError">{{errorMessage}}</span> <form id="{{id}}" class="" ng-submit="send()" name="{{id}}"> <input name="zipField" type="tel" ng-model="model" placeholder="{{placeholder}}" ui-jq=\'numeric\' maxlength="5" ng-class="{true:\'error\'}[showError]"/> <div ng-transclude> </div> </form> </div>');$templateCache.put("/us/static/views/fishEye.html",'<div nav-secondary type="vehicle" selected="build" series="{{series}}" year="{{year}}" ng-if="!showVehicleSelector"></div> <div vehicle-grid target="build" ng-show="showVehicleSelector"></div> <section class="buildAndPrice" responsive-handler bnp-interaction ng-hide="showVehicleSelector"> <div class="zipcode-overlay" ng-hide=\'zipCodeAvailable\'> <div class="zipcode"> <div zip-code-form id=\'bnpZipCode\' theme=\'zip-code-form-bnp\' error-message="{{\'label.dealerLocator.error\' | i18n}}" placeholder="{{\'label.build.zipcode\' | i18n}}" model=\'data.zipCode\' request="init()"> <div class="findme" title="{{\'label.build.findMe\' | i18n}}" ng-click="findMe()">{{\'label.build.findMe\' | i18n}}</div> <div class="zip-submit" title="Submit ZIP Code" ng-click="submitZipForm()" ng-show="validZipCode"> <span class="zip-submit-arrow">{{\'label.build.zipcode\' | i18n}}</span> </div> <div class="zip-error" ng-hide=\'validZipCode\'> <p>{{initialErrorMessage}}</p> </div> </div> <div class="zip-message">{{\'label.build.zipcode.bottomline\' | i18n}}</div> </div> </div> <div class="ui-scrollfix-nowrap" ui-scrollfix-ghost=\'100\' ui-scrollfix-ghost-min-width=\'680\'> <div class="topbar" ng-class="platform"> <div class="topbar-row"> <div class="breadcrumbs"> <a href="#" class="title" ng-click="openMenu()" prevent-default> <span>{{current.id+1}}. {{current.section.navigation.name | i18n}}</span> <span class="arrow" ng-class="{open:displayMobileNavigation}"></span> </a> <div class="breadcrumbs-table"> <ul ng-class="{true:\'visible\',false:\'\'}[displayMobileNavigation]"> <li ng-repeat="section in sections" ng-class="{true:\'selected\',false:\'\'}[section.navigation.selected]"> <a href="" ng-click="setSection(section)" ng-class="section.navigation.name|i18n|lowercase" prevent-default> {{section.navigation.name | i18n}}<span navigation-info class="navigation-info"></span> </a> </li> </ul> </div> </div> <div class="price-summary" ng-class="{displayCalculator:displayCalculator}"> <span class="total-price-estimate">{{data.price.msrp | noFractionCurrency:false}}*</span> <span class="monthly-price-estimate"> <a href="#" ng-class="{open:displayCalculator}" ng-click="openCalculator()" prevent-default> <span>{{data.price.monthly | noFractionCurrency}} {{\'label.paymentCalculator.estimate\' | i18n}} <span class="nobreak">{{\'label.paymentCalculator.perMonth\' | i18n}}</span></span> <span class="arrow">{{\'label.paymentCalculator.changeTerms\' | i18n}}</span> </a> </span> </div> </div> <div class="calculator-wrapper" ng-show="displayCalculator"> <div payment-calculator></div> </div> </div> </div><div class="build-colors" bnp-colors screen-size> <div class="top content-table"> <div class="content-row"> <a class="switch" ng-hide="width> screenSize.tablet" ng-click="switchColorsView()"> <span ng-show="colorsOptions.exterior.selected">{{\'label.build.viewInterior\' | i18n}}</span> <span ng-show="colorsOptions.interior.selected">{{\'label.build.viewExterior\' | i18n}}</span> </a> <div bnp-colors-detail ng-show="width> screenSize.tablet"></div> <div class="gallery"> <div class=\'table-inner\'> <div ng-show="colorsOptions.interior.selected" class="interior"> <div fish-eye-viewer touch="true" id="colorInterior" path="{{data.colors.imageSet}}interior/{{data.colors.interior.current.baseHex}}/{{data.colors.interior.current.fabric.file}}/" arc="5" x="{{data.serie.panorama.interior.x}}" frames="{{data.serie.panorama.interior.frames}}" pattern="{{data.serie.panorama.pattern}}" update="updateThumbnail(colorsOptions.interior)" obj="colorsOptions.interior" type="interior" active="colorsOptions.interior.selected"></div> </div> <div ng-show="colorsOptions.exterior.selected" class="exterior"> <div panorama touch="true" id="colorExterior" path="{{data.colors.imageSet}}exterior/{{data.colors.exterior.current.baseHex}}/" arc="18" x="{{data.serie.panorama.exterior.x}}" frames="{{data.serie.panorama.exterior.frames}}" pattern="{{data.serie.panorama.pattern}}" update="updateThumbnail(colorsOptions.exterior)" obj="colorsOptions.exterior" active="colorsOptions.exterior.selected"></div> </div> </div> </div> <div class="detail initialized" ng-hide="width> screenSize.tablet"> <h3>{{data.colors.exterior.current.name}}</h3> <h4>{{\'label.build.with\' | i18n}} <span class="interior">{{data.colors.interior.current.name}}</span> <span class="fabric">{{data.colors.interior.current.fabric.name}}</span></h4> </div> </div> </div> <div class="colors"> <div id="colorsSelector"> <ul class="exterior"> <li ng-repeat="combo in data.colors.exterior.list.collection" ng-class="{true:\'selected\'}[combo.value.selected]"> <span class="label"> <span class="exterior"> <span class="text">{{\'label.build.exterior\' | i18n}}</span> <span class="mobile">{{\'label.build.exterior\' | i18n | truncate:3}}</span> </span> <span class="interior"> <span class="left"></span> <span class="text">{{\'label.build.interior\' | i18n}}</span> <span class="mobile">{{\'label.build.interior\' | i18n | truncate:3}}</span> <span class="right"></span> </span> </span> <span class="wrap"> <a prevent-default class="color-item" id="exterior-{{combo.value.id}}" ng-click="onColorExterior(combo.value.id)"> <span color-block key="{{combo.value.id}}" color="#{{combo.value.baseHex}}" property="exteriorColor" selected="combo.value.selected"></span> </a> <ul class="interior"> <li ng-repeat="interior in combo.value.interior.collection"> <a prevent-default class="color-item" id="combo-{{combo.value.id}}-{{interior.value.id}}" ng-click="onColorInterior(interior.value.id)"> <span color-block key="{{interior.value.id}}" color="#{{interior.value.baseHex}}" property="interiorColor" selected="interior.value.selected" fabric="{{interior.value.fabric.texture}}"></span> </a> </li> </ul> </span> <span class="after"></span> <span class="before"></span> </li> </ul> </div> </div> <div class="next-section-button" ng-hide="width> screenSize.tablet"> <a href="#" prevent-default ng-click="nextSection()"> <span class="text">{{\'label.build.next\' | i18n}} <span>{{sections[current.id + 1].navigation.name | i18n}}</span></span> <span class="arrow"></span> </a> </div> <div dependencies-box handler-id="{{dependencies.handlerId}}" type="colors" box-id="dependencies-color-box" item="dependencies.item" name="{{dependencies.label|i18n}}" open="dependencies.checking"></div> </div> <div ng-switch="mobile"> <div ng-switch-when="false"> <div ng-switch="details.showPackageDetails"> <div ng-switch-when="true" id="package-detail" class="package-detail-section" package-detail></div> </div> </div> </div> <div class="bottom-bar"> <ul class="summary"> <li class="requestUpdate"><a href="{{base}}/forms/updatesrequest/{{data.serie.key}}/{{data.serie.year}}">{{\'label.general.keepMeUpdated\' | i18n}}</a></li> <li class="inventory"><a href="{{getInventoryDeeplink()}}">{{\'label.build.summary.find\' | i18n}} {{data.serie.year}} {{data.serie.name}} {{\'label.build.near\' | i18n}} {{data.zipCode}}</a></li> <li class="quote"><a href="{{getQuoteLink()}}" target="_self">{{\'label.general.getAQuote\' | i18n}}</a></li> <li class="testDrive"><a href="{{getTestDriveLink()}}" target="_self">{{\'label.build.requestTestDrive\' | i18n}}</a></li> </ul> </div> </section> ');$templateCache.put("/us/static/views/fishEyeMobile.html",'<h1>Mobile Pano</h1> <input type="text" ng-model="fullImagePath"></input> <div fish-eye-mobile-viewer path="{{fullImagePath}}"></div>');$templateCache.put("/us/static/views/forms/appraisalForm.html",'<div class="successScreen"> <p class="appraisalDealer">{{\'label.forms.appraisal.dealers\' | i18n}}</p> <div class="kbbLogo"><img ng-src="{{staticPath}}/img/kbb_logo_image.jpg" alt="Kelley Blue Book"></div> <div class="formButton"> <div class="next-section-button"> <a href="{{\'label.forms.appraisal.url\' | i18n}}" ng-click="popWindow()" prevent-default="" class="popUrl"> <div class="text ng-binding">{{\'label.forms.getaquote.continue\' | i18n}}</div> <div class="arrow"></div> </a> </div> </div> <p class="legalText">{{\'label.forms.appraisal.legalText\' | i18n}}</p> </div>');$templateCache.put("/us/static/views/forms/contactInformation.html",'<div class="contactInformation"> <p>{{\'label.forms.getaquote.greeting\' | i18n }},</p> <div class="userInfo"> <div class="nameContainer"> <div class="left"> <input auto-focus type="text" name="firstName" id="first-name" ng-class="{true:\'error\'}[submitted && (quoteForm.firstName.$error.required || quoteForm.firstName.$error.maxlength)]" ng-model="user.first" placeholder="{{\'label.forms.placeholder.firstName\' | i18n}}" ng-pattern="namePattern" maxlength="25" required> <span class="error" ng-show="submitted && quoteForm.firstName.$error.required">{{\'label.forms.errorFirst.provide\' | i18n }}</span> <span class="error" ng-show="submitted && quoteForm.firstName.$error.maxlength">{{\'label.forms.errorName.length\' | i18n }}</span> <span class="error" ng-show="submitted && quoteForm.firstName.$error.pattern">{{\'label.forms.errorFirst.pattern\' | i18n }}</span> </div> <div class="right"> <input auto-focus type="text" name="lastName" id="last-name" ng-class="{true:\'error\'}[submitted && (quoteForm.lastName.$error.required || quoteForm.lastName.$error.maxlength)]" ng-model="user.last" placeholder="{{\'label.forms.placeholder.lastName\' | i18n}}" ng-pattern="namePattern" maxlength="25" required> <span class="error" ng-show="submitted && quoteForm.lastName.$error.required">{{\'label.forms.errorLast.provide\' | i18n }}</span> <span class="error" ng-show="submitted && quoteForm.lastName.$error.maxlength">{{\'label.forms.errorName.length\' | i18n }}</span> <span class="error" ng-show="submitted && quoteForm.lastName.$error.pattern">{{\'label.forms.errorLast.pattern\' | i18n }}</span> </div> </div> </div> <div class="userInfo"> <input auto-focus type="text" name="address" ng-model="user.address" placeholder="{{\'label.forms.placeholder.optAddressLine1\' | i18n}}" maxlength="50"> <span class="error" ng-show="submitted && quoteForm.address.$error.maxlength">{{\'label.forms.errorAddCity.length\' | i18n }}</span> <span class="error" ng-show="submitted && quoteForm.address.$error.pattern">{{\'label.forms.errorAddress.pattern\' | i18n }}</span> </div> <input auto-focus type="text" name="optionalAddress" ng-model="user.optAddress" placeholder="{{\'label.forms.placeholder.optAddress\' | i18n}}" maxlength="50"> <div class="userInfo"> <input auto-focus type="text" name="city" ng-model="user.city" placeholder="{{\'label.forms.placeholder.optCity\' | i18n}}" maxlength="50"> <span class="error" ng-show="submitted && quoteForm.city.$error.maxlength">{{\'label.forms.errorAddCity.length\' | i18n }}</span> <span class="error" ng-show="submitted && quoteForm.city.$error.pattern">{{\'label.forms.errorCity.pattern\' | i18n }}</span> </div> <div class="userInfo"> <div class="nameContainer"> <div form-states></div> <div class="right zipcode"> <input length-check auto-focus type="tel" name="zipcode" id="zip-code" ng-class="{true:\'error\'}[submitted && (quoteForm.zipcode.$error.required || quoteForm.zipcode.$error.maxlength || quoteForm.zipcode.$error.pattern)]" ng-model="user.zipcode" placeholder="{{\'label.forms.placeholder.zip\' | i18n}}" maxlength="5" ng-pattern="zipPattern" ui-jq="numeric" required> <span class="error" ng-show="submitted && quoteForm.zipcode.$error.required">{{\'label.forms.errorZip.provide\' | i18n }}</span> <span class="error" ng-show="submitted && quoteForm.zipcode.$error.maxlength">{{\'label.forms.errorZip.length\' | i18n }}</span> <span class="error" ng-show="submitted && quoteForm.zipcode.$error.pattern">{{\'label.forms.errorZip.pattern\' | i18n }}</span> <span class="error" ng-show="invalidZipNew">{{zipMessage}}</span> </div> </div> </div> </div> ');$templateCache.put("/us/static/views/forms/formStates.html",'<div class="left states"> <div class="selectContainer"> <select name="state" class="optionSelect customSelect" ng-model="user.state" ng-required="currentForm===\'request-brochure\'"> <option class="placeholderText" value="" ng-selected="true">{{statesLabel | i18n}}</option> <option value="AL">Alabama</option> <option value="AK">Alaska</option> <option value="AZ">Arizona</option> <option value="AR">Arkansas</option> <option value="CA">California</option> <option value="CO">Colorado</option> <option value="CT">Connecticut</option> <option value="DE">Delaware</option> <option value="FL">Florida</option> <option value="GA">Georgia</option> <option value="HI">Hawaii</option> <option value="ID">Idaho</option> <option value="IL">Illinois</option> <option value="IN">Indiana</option> <option value="IA">Iowa</option> <option value="KS">Kansas</option> <option value="KY">Kentucky</option> <option value="LA">Louisiana</option> <option value="ME">Maine</option> <option value="MD">Maryland</option> <option value="MA">Massachusetts</option> <option value="MI">Michigan</option> <option value="MN">Minnesota</option> <option value="MS">Mississippi</option> <option value="MO">Missouri</option> <option value="MT">Montana</option> <option value="NE">Nebraska</option> <option value="NV">Nevada</option> <option value="NH">New Hampshire</option> <option value="NJ">New Jersey</option> <option value="NM">New Mexico</option> <option value="NY">New York</option> <option value="NC">North Carolina</option> <option value="ND">North Dakota</option> <option value="OH">Ohio</option> <option value="OK">Oklahoma</option> <option value="OR">Oregon</option> <option value="PA">Pennsylvania</option> <option value="RI">Rhode Island</option> <option value="SC">South Carolina</option> <option value="SD">South Dakota</option> <option value="TN">Tennessee</option> <option value="TX">Texas</option> <option value="UT">Utah</option> <option value="VT">Vermont</option> <option value="VA">Virginia</option> <option value="WA">Washington</option> <option value="WV">West Virginia</option> <option value="WI">Wisconsin</option> <option value="WY">Wyoming</option> </select> </div> <span class="error" ng-show="submitted && requestBrochureForm.state.$error.required">{{\'label.forms.errorState.select\' | i18n }}</span> </div>');
$templateCache.put("/us/static/views/forms/formSubmit.html",'<div class="formButton"> <input type="submit" class="goSubmit"/> <div class="next-section-button submitBtn"> <a href="" ng-click="formSubmit()" prevent-default="" class=""> <div class="text ng-binding">{{\'label.forms.submit.send\' | i18n}}</div> <div class="arrow"></div> </a> </div> </div>');$templateCache.put("/us/static/views/forms/formSuccess.html",'<div class="successScreen"> <p class="successMessage">{{\'label.forms.success.message\' | i18n }}</p> <p class="representatives">{{\'label.forms.getaquote.representatives\' | i18n }} </p> <div class="dealerList" ng-show="counter> 0"> <ul> <li ng-repeat="dealer in dealersUniqueList"> <p class="check"></p> <div class="block"> <p class="name">{{dealer.name}}</p> <div class="addDetails" ng-show="counter==1"> <span class="distance">({{dealer.distFromUser}} mi.away)</span> <span class="address">{{dealer.address}},</span> <span class="address2">{{dealer.city}}, {{dealer.state}}, {{dealer.zipcode}}</span> <span class="tel"> <span>{{dealer.phone}}</span> <a class="phone-link" href="tel:{{dealer.phoneFull}}">{{dealer.phone}}</a> </span> </div> </div> </li> </ul> </div> <div class="dealerList" ng-show="vinExists || dealerExists"> <ul> <li> <p class="check"></p> <div class="block"> <p class="name">{{vehicleDetail.dealerName}}</p> <div class="addDetails"> <span class="distance">({{vehicleDetail.dealerDistanceFromUser}} mi.away)</span> <span class="address">{{vehicleDetail.dealerAddress}},</span> <span class="address2">{{vehicleDetail.dealerCity}}, {{vehicleDetail.dealerState}}, {{vehicleDetail.dealerZipcode}}</span> <span class="tel"> <span>{{vehicleDetail.dealerPhone}}</span> <a href="tel:{{vehicleDetail.dealerPhoneFull}}">{{vehicleDetail.dealerPhone}}</a> </span> </div> </div> </li> </ul> </div> <div class="formButton"> <div class="next-section-button" lang-class> <a href="{{basePath}}/dealers/inventory/{{series}}/{{year}}" target="_self" class=""> <div class="text ng-binding">{{\'label.forms.success.inventory\' | i18n }}</div> <div class="arrow"></div> </a> </div> </div> <div class="formButton"> <div class="next-section-button" lang-class> <a href="{{basePath}}/vehicle/{{series}}/{{year}}" class="" target="_self"> <div class="text ng-binding">{{\'label.forms.success.experience\' | i18n }} {{seriesName}}</div> <div class="arrow"></div> </a> </div> </div> <div class="formButton" ng-if="counter> 0"> <div class="next-section-button" lang-class dealer-chat link="dealer-chat" placement="form_success" model="{{series}}" year="{{year}}" vin="{{VIN}}" dealer-code="{{dealersUniqueList[0].code}}" chat-enabled="{{dealersUniqueList[0].chatEnabled}}"> <a class="dealer-chat" ng-class="{{lang}}"> <div class="text ng-binding">{{\'label.forms.general.chatWithDealer\' | i18n }}</div> <div class="arrow"></div> </a> </div> </div> <div class="formButton" ng-if="vinExists || dealerExists"> <div class="next-section-button" lang-class dealer-chat link="dealer-chat" placement="form_success" model="{{series}}" year="{{year}}" vin="{{VIN}}" dealer-code="{{vehicleDetail.dealerCode}}" chat-enabled="{{vehicleDetail.chatEnabled}}"> <a class="dealer-chat"> <div class="text ng-binding">{{\'label.forms.general.chatWithDealer\' | i18n }}</div> <div class="arrow"></div> </a> </div> </div> </div> ');$templateCache.put("/us/static/views/forms/formsHeader.html",'<div class="form-header" ng-switch on="validZipCode"> <div ng-switch-when="true"> <p class="dealerHeader">{{\'label.forms.getaquote.selectedDealers\' | i18n}}</p> <div class="zip"> <div zip-code-form id=\'formsZipSearch\' theme=\'zip-form\' error-message="Invalid Zip" placeholder="ZIP CODE" model=\'zipCode\' request="update()"> </div> </div> </div> <div ng-switch-when="false"> <p>{{\'label.forms.getaquote.dearkia\' | i18n}} <span class=\'yearSeries\'> <c:choose> <c:when test="${lang==\'en\'}"> {{year}} {{seriesName}} </c:when> <c:otherwise> {{seriesName}} {{year}} </c:otherwise> </c:choose> </span>,</p> </div> </div>');$templateCache.put("/us/static/views/forms/formsNavigation.html",'<div class="formTitleContainer"> <ul> <li id="get-quote" ng-class="{true:\'selected\'}[menuHighlight===\'get-quote\']" ng-click="sectionClick(\'get-quote\',1)" ng-show="sideNav.getAQuoteAvailable"> <p>{{\'label.forms.navigation.getQuote\' | i18n }}</p> <div><span class="arrow"></span></div> </li> <li id="test-drive" ng-class="{true:\'selected\'}[menuHighlight===\'test-drive\']" ng-click="sectionClick(\'test-drive\',2)" ng-show="sideNav.testDriveAvailable"> <p>{{\'label.forms.navigation.requestTestDrive\' | i18n }}</p> <div><span class="arrow"></span></div> </li> <li id="trade-in-appraisal" ng-class="{true:\'selected\'}[menuHighlight===\'trade-in-appraisal\']" ng-click="sectionClick(\'trade-in-appraisal\',3)" ng-show="sideNav.tradeInAvailable"> <p>{{\'label.forms.navigation.tradeInAppraisal\' | i18n }}</p> <div><span class="arrow"></span></div> </li> <li id="receive-updates" ng-class="{true:\'selected\'}[menuHighlight===\'receive-updates\']" ng-click="sectionClick(\'receive-updates\',4)" ng-show="sideNav.requestUpdatesAvailable"> <p>{{\'label.forms.navigation.receiveUpdates\' | i18n }}</p> <div><span class="arrow"></span></div> </li> <li id="request-brochure" ng-class="{true:\'selected\'}[menuHighlight===\'request-brochure\']" ng-click="sectionClick(\'request-brochure\',5)" ng-show="sideNav.brochureAvailable"> <p>{{\'label.forms.navigation.brochureRequest\' | i18n }}</p> <div><span class="arrow"></span></div> </li> </ul> </div> ');$templateCache.put("/us/static/views/forms/formsVehicle.html",'<div class="form-vehicle"> <div class="vehicleView"> <img ng-src="{{contentMedia}}{{carImage800}}" alt="Vehicle Image"> <a href="#" prevent-default disclaimers-link disclaimers-text="{{year}} {{seriesName}} {{series===\'sorento\' && year===\'2016\' ? \'SLX\' : trim}} {{\'label.forms.getaquote.smallText\' | i18n}}" class="disclaimer no-wrap"> <span>{{\'label.general.disclaimers\' | i18n }}</span> </a> </div> <div class="vehicleDetail" ng-show="vinExists"> <div class="nameContainer"> <div class="left detailLeft"> <section class="colors"> <span color-block key="{{vehicleDetail.exteriorColorHex}}" label="Exterior" name="{{vehicleDetail.exteriorColorName}}" color="#{{vehicleDetail.exteriorColorHex}}" property="exteriorColor" show-text="true"></span> <span color-block key="{{vehicle.interiorColorHex}}" label="Interior" name="{{vehicleDetail.interiorColorName}}" color="#{{vehicleDetail.interiorColorHex}}" property="interiorColor" show-text="true"></span> </section> </div> <div class="right detailRight"> <div class="vehicleInfo"> <ul> <li> <span class="infoKey">Vin#</span> <span class="infoVal">{{vehicleDetail.vin}}</span> </li> <li> <span class="infoKey">mpg</span> <span class="infoVal">{{vehicleDetail.mpg}}</span> </li> <li> <span class="infoKey">engine</span> <span class="infoVal">{{vehicleDetail.engine}}</span> </li> <li> <span class="infoKey">transmission</span> <span class="infoVal">{{vehicleDetail.transmission}}</span> </li> <li> <span class="infoKey">body-type</span> <span class="infoVal">{{vehicleDetail.bodyType}}</span> </li> </ul> </div> </div> </div> <div class="vehicleDealer" ng-class="{true:\'dealerHide\'}[dealerHide==true]"> <p class="available">{{\'label.forms.getaquote.available\' | i18n}}</p> <div class="dealerDetail nameContainer"> <div class="left detailLeft"> <div class="dealerTitle"> <p class="dealerName">{{vehicleDetail.dealerName}}</p> <p class="dealerDistance">({{vehicleDetail.dealerDistanceFromUser}} miles away)</p> </div> </div> <div class="right dealerRight"> <div class="dealerAddress"> {{vehicleDetail.dealerAddress}}, {{vehicleDetail.dealerCity}}, {{vehicleDetail.dealerState}} {{vehicleDetail.dealerZipcode}} <p class="dealerPhone"> <span class="tel"> <span>{{vehicleDetail.dealerPhone}}</span> <a class="phone-link" href="tel:{{vehicleDetail.dealerPhoneFull}}">{{vehicleDetail.dealerPhone}}</a> </span> </p> </div> </div> </div> </div> </div> </div>');$templateCache.put("/us/static/views/forms/requestBrochureForm.html",'<div> <div class="contactInformation"> <p>{{\'label.forms.brochureRequest\' | i18n }}</p> <div class="requestUserInfo"> <div class="nameContainer"> <div class="left"> <input auto-focus type="text" name="firstName" id="first-name" ng-class="{true:\'error\'}[submitted && (requestBrochureForm.firstName.$error.required || requestBrochureForm.firstName.$error.maxlength)]" ng-model="requestUser.first" placeholder="{{\'label.forms.placeholder.firstName\' | i18n}}" ng-pattern="namePattern" maxlength="25" required> <span class="error" ng-show="submitted && requestBrochureForm.firstName.$error.required">{{\'label.forms.errorFirst.provide\' | i18n }}</span> <span class="error" ng-show="submitted && requestBrochureForm.firstName.$error.maxlength">{{\'label.forms.errorName.length\' | i18n }}</span> <span class="error" ng-show="submitted && requestBrochureForm.firstName.$error.pattern">{{\'label.forms.errorFirst.pattern\' | i18n }}</span> </div> <div class="right"> <input auto-focus type="text" name="lastName" id="last-name" ng-class="{true:\'error\'}[submitted && (requestBrochureForm.lastName.$error.required || requestBrochureForm.lastName.$error.maxlength)]" ng-model="requestUser.last" placeholder="{{\'label.forms.placeholder.lastName\' | i18n}}" ng-pattern="namePattern" maxlength="25" required> <span class="error" ng-show="submitted && requestBrochureForm.lastName.$error.required">{{\'label.forms.errorLast.provide\' | i18n }}</span> <span class="error" ng-show="submitted && requestBrochureForm.lastName.$error.maxlength">{{\'label.forms.errorName.length\' | i18n }}</span> <span class="error" ng-show="submitted && requestBrochureForm.lastName.$error.pattern">{{\'label.forms.errorLast.pattern\' | i18n }}</span> </div> </div> </div> <div class="requestUserInfo"> <input auto-focus type="text" name="address" ng-class="{true:\'error\'}[submitted && (requestBrochureForm.address.$error.required || requestBrochureForm.address.$error.maxlength)]" ng-model="requestUser.address" placeholder="{{\'label.forms.placeholder.address\' | i18n}}" ng-pattern="addressPattern" maxlength="50" required> <span class="error" ng-show="submitted && requestBrochureForm.address.$error.required">{{\'label.forms.errorAddress.provide\' | i18n }}</span> <span class="error" ng-show="submitted && requestBrochureForm.address.$error.maxlength">{{\'label.forms.errorAddCity.length\' | i18n }}</span> <span class="error" ng-show="submitted && requestBrochureForm.address.$error.pattern">{{\'label.forms.errorAddress.pattern\' | i18n }}</span> </div> <input auto-focus type="text" name="optionalAddress" ng-model="requestUser.optAddress" placeholder="{{\'label.forms.placeholder.optAddress\' | i18n}}" maxlength="50"> <div class="requestUserInfo"> <input auto-focus type="text" name="city" ng-class="{true:\'error\'}[submitted && (requestBrochureForm.city.$error.required || requestBrochureForm.city.$error.maxlength)]" ng-model="requestUser.city" placeholder="{{\'label.forms.placeholder.city\' | i18n}}" ng-pattern="cityPattern" maxlength="50" required> <span class="error" ng-show="submitted && requestBrochureForm.city.$error.required">{{\'label.forms.errorCity.provide\' | i18n }}</span> <span class="error" ng-show="submitted && requestBrochureForm.city.$error.maxlength">{{\'label.forms.errorAddCity.length\' | i18n }}</span> <span class="error" ng-show="submitted && requestBrochureForm.city.$error.pattern">{{\'label.forms.errorCity.pattern\' | i18n }}</span> </div> <div class="requestUserInfo"> <div class="nameContainer"> <div form-states></div> <div class="right zipcode"> <input length-check auto-focus type="tel" name="zipcode" id="zip-code" ng-class="{true:\'error\'}[submitted && (requestBrochureForm.zipcode.$error.required || requestBrochureForm.zipcode.$error.maxlength || requestBrochureForm.zipcode.$error.pattern)]" ng-model="requestUser.zipcode" placeholder="{{\'label.forms.placeholder.zip\' | i18n}}" maxlength="5" ng-pattern="zipPattern" ui-jq="numeric" required> <span class="error" ng-show="submitted && requestBrochureForm.zipcode.$error.required">{{\'label.forms.errorZip.provide\' | i18n }}</span> <span class="error" ng-show="submitted && requestBrochureForm.zipcode.$error.maxlength">{{\'label.forms.errorZip.length\' | i18n }}</span> <span class="error" ng-show="submitted && requestBrochureForm.zipcode.$error.pattern">{{\'label.forms.errorZip.pattern\' | i18n }}</span> <span class="error" ng-show="invalidZipNew">{{zipMessage}}</span> </div> </div> </div> <div class="userInfo"> <input auto-focus type="text" name="email" class="email" ng-model="requestUser.email" placeholder="{{\'label.forms.placeholder.optEmail\' | i18n}}" maxlength="320"> </div> </div> <div class="formButton"> <input type="submit" class="goSubmit"/> <div class="next-section-button submitBtn"> <a href="" ng-click="submitUserForm()" prevent-default="" class=""> <div class="text ng-binding">{{\'label.forms.submit.send\' | i18n}}</div> <div class="arrow"></div> </a> </div> </div> </div> ');$templateCache.put("/us/static/views/forms/requestUpdateForm.html",'<div class="userInformation"> <p>{{\'label.forms.getaquote.email\' | i18n }}</p> <div class="userInfo"> <input auto-focus type="text" name="email" class="email" ng-class="{true:\'error\'}[submitted && (requestUpdateForm.email.$error.required || requestUpdateForm.email.$error.maxlength || requestUpdateForm.email.$error.pattern)]" ng-model="userRequest.email" ng-pattern="emailPattern" placeholder="{{\'label.forms.placeholder.email\' | i18n}}" maxlength="320" required> <span class="error" ng-show="submitted && requestUpdateForm.email.$error.required">{{\'label.forms.errorEmail.provide\' | i18n }}</span> <span class="error" ng-show="submitted && requestUpdateForm.email.$error.maxlength">{{\'label.forms.errorEmail.length\' | i18n }}</span> <span class="error" ng-show="submitted && requestUpdateForm.email.$error.pattern">{{\'label.forms.errorEmail.pattern\' | i18n }}</span> </div> <div class="userInfo"> <div class="tableContainer"> <span class="phoneLabel">{{\'label.forms.getaquote.phone\' | i18n}}</span> </div> <div class="tableContainer"> <input auto-focus type="tel" id="phone" name="phone" class="phone" ng-model="userRequest.phone" placeholder="{{\'label.forms.placeholder.optPhone\' | i18n }}" maxlength="{{phoneLength}}"> </div> <span class="error" ng-show="submitted && requestUpdateForm.phone.$error.required">{{\'label.forms.errorPhone.provide\' | i18n }}</span> <span class="error" ng-show="submitted && requestUpdateForm.phone.$error.pattern">{{\'label.forms.errorPhone.pattern\' | i18n }}</span> </div>	<p>{{\'label.forms.getaquote.greeting\' | i18n }},</p> <div class="userInfo"> <div class="nameContainer"> <div class="left"> <input auto-focus type="text" name="firstName" id="first-name" class="inputAlign" ng-class="{true:\'error\'}[submitted && (requestUpdateForm.firstName.$error.required || requestUpdateForm.firstName.$error.maxlength)]" ng-model="userRequest.first" placeholder="{{\'label.forms.placeholder.firstName\' | i18n}}" ng-pattern="namePattern" maxlength="25" required> <span class="error" ng-show="submitted && requestUpdateForm.firstName.$error.required">{{\'label.forms.errorFirst.provide\' | i18n }}</span> <span class="error" ng-show="submitted && requestUpdateForm.firstName.$error.maxlength">{{\'label.forms.errorName.length\' | i18n }}</span> <span class="error" ng-show="submitted && requestUpdateForm.firstName.$error.pattern">{{\'label.forms.errorFirst.pattern\' | i18n }}</span> </div> <div class="right"> <input auto-focus type="text" name="lastName" id="last-name" class="inputAlign" ng-class="{true:\'error\'}[submitted && (requestUpdateForm.lastName.$error.required || requestUpdateForm.lastName.$error.maxlength)]" ng-model="userRequest.last" placeholder="{{\'label.forms.placeholder.lastName\' | i18n}}" ng-pattern="namePattern" maxlength="25" required> <span class="error" ng-show="submitted && requestUpdateForm.lastName.$error.required">{{\'label.forms.errorLast.provide\' | i18n }}</span> <span class="error" ng-show="submitted && requestUpdateForm.lastName.$error.maxlength">{{\'label.forms.errorName.length\' | i18n }}</span> <span class="error" ng-show="submitted && requestUpdateForm.lastName.$error.pattern">{{\'label.forms.errorLast.pattern\' | i18n }}</span> </div> </div>	<div class="userInfo">	<input length-check auto-focus type="tel" name="zipcode" id="zip-code" class="inputAlign" ng-class="{true:\'error\'}[submitted && (requestUpdateForm.zipcode.$error.required || requestUpdateForm.zipcode.$error.maxlength || requestUpdateForm.zipcode.$error.pattern)]" ng-model="userRequest.zipcode" placeholder="{{\'label.forms.placeholder.zip\' | i18n}}" maxlength="5" ng-pattern="zipPattern" ui-jq="numeric" required> <span class="error" ng-show="submitted && requestUpdateForm.zipcode.$error.required">{{\'label.forms.errorZip.provide\' | i18n }}</span> <span class="error" ng-show="submitted && requestUpdateForm.zipcode.$error.maxlength">{{\'label.forms.errorZip.length\' | i18n }}</span> <span class="error" ng-show="submitted && requestUpdateForm.zipcode.$error.pattern">{{\'label.forms.errorZip.pattern\' | i18n }}</span> <span class="error" ng-show="invalidZipNew">{{zipMessage}}</span> </div> </div>	<div class="disclaimer">	<span ng-hide="kioskMode"> {{\'label.forms.getaquote.disclaimer\' | i18n }} <a href="http://www.kia.com/us/en/content/privacy-and-legal/privacy-policy">{{\'label.forms.getaquote.privacypolicy\' | i18n }}</a>. </span>	<span ng-show="kioskMode"> By clicking on <strong>Send</strong>, I agree to receive text messages, voice calls, and/or emails from or on behalf of Kia Motors America, Inc. (incl. its dealers) for marketing and other purposes, and by any means (incl. autodial or prerecorded).Consent is not a condition to purchase anything, data charges may apply, and Kias posted <a prevent-default disclaimers-link disclaimers-content="true" disclaimers-title="Privacy Policy"> Privacy Policy <div class="disclaimers-content"> Maintaining the privacy of your information is important to Kia Motors America (Kia).&nbsp; This Privacy Policy describes Kias current corporate policy on how we use the personally identifiable information (personal information) that you provide to Kia both online and offline through postal mail, contest submissions, telephone requests, surveys, etc or to Kia dealers who then transfer the personal information to Kia.&nbsp; You should read the entire policy carefully.&nbsp; By continuing to use Kia websites or by providing Kia with your personal information through a website or through off-line methods, you consent to this Privacy Policy.<br><br>On occasion, Kia may revise this Privacy Policy to reflect changes in the law, Kias privacy practices, or the features on Kia websites. If any such changes impact the way we collect or use your information, those changes will be posted in this Privacy Policy and the effective date will be noted. Therefore, you should review the Privacy Policy periodically to remain aware of Kias current policies and practices.&nbsp; If Kia materially changes its practices regarding collection or use of personal information, your personal information will continue to be governed by the Policy under which it was collected unless you have been provided notice of, and have not objected to, the change.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br><br><strong>1. Who We Are</strong><br>As used in this Privacy Policy, the terms we and us mean Kia and its subsidiaries.&nbsp; We produce passenger cars, vans, cargo trucks, parts and accessories.<br><br>Our dealers and licensees are independent companies that sell our vehicles, parts and accessories and are licensed to operate such businesses using a trade name, trademarks, and service marks owned by us.&nbsp; Business partners are independent companies that Kia has partnered with to provide you with or offer you other services and products.<br><br>Because this Privacy Policy sets forth only Kias privacy practices, this Policy does not describe the privacy practices of our dealers, licensees, or business partners even when you link to their websites through Kia websites or provide them information offline through written or telephonic means if your personal information is not then provided to Kia.&nbsp; Your linking to other sites or providing personal information to other companies through written or telephone communications is at your own risk and is not governed by the Kia Privacy Policy, even where those websites or companies offline communications are co-branded with the Kia logo.&nbsp; To learn about the privacy practices of any of Kia dealers, licensees, or business partners that link to Kia websites or that contact you through written or telephonic means, you should review the privacy policies of those entities, and not this Privacy Policy, which only applies to the information collected by Kia, from Kia.com, other Kia websites, Kia events, Kia email, Kia written and telephone communications and other means that Kia may use including when you purchase a car from a dealer and your personal information is shared by the dealer to Kia. We recommend that you always check the applicable privacy statement of non-Kia sites and companies requesting information before providing any personal information.<br><strong><br>2. Collection of Personal Information</strong><br><br>This Privacy Policy covers personal information collected from and about you on Kia websites and by Kia through written or telephonic means. Personal information includes information such as name, mailing address, email address, and telephone number, and can also include the type of request, and any additional information you provide to Kia.&nbsp; The information you provide is used by Kia to notify you about, and improve upon, the services that we provide to you.<br><br>In addition to personal information, Kia collects IP address, aggregate user data, and browser type.&nbsp; This data is used to manage and improve Kia.com and other Kia websites, track usage, improve services, and for security and monitoring purposes.&nbsp; Kias websites are for general audiences, and we do not knowingly collect personal information from children under 13.<br><br><strong>3. Use and Disclosure of Personal Information and Your Choices</strong><br><br>We may use your personal information for a variety of purposes as described in this Privacy Policy.&nbsp; If you do not want us to disclose information in this manner, do not submit your personal information to us.<br><br>Kia will not use your personal information for purposes that are different from those purposes detailed herein unless we ask for your permission to do so.&nbsp; In addition, Kia will not share your personal information with third parties who are not affiliated or partnered with us unless you have chosen to receive specific information and the fulfillment of such a request requires the sharing of your personal information.<br><br>Disclosure Within Kia and to Kias Service Providers.&nbsp; Within Kia, we may share your personal information with Kia employees, agents, and contractors who have a legitimate business reason to obtain access to your personal information.&nbsp; Kia may share your personal information with outside contractors or agents who help us manage our activities (i.e., mailing list administrators, marketing agents, etc.), but they may only use your personal information to provide Kia with a specific service and not for any other purpose.<br><br>Disclosure to Affiliated Parties.&nbsp; Kia may share your personal information with companies that are affiliated with us such as our dealers, licensees, and/or business partners for the purposes of both marketing and administrative purposes (such as recall notices).<br><br>Legal Authorities.&nbsp; Kia may disclose personal information without providing you with a choice in order to protect Kias or its affiliated entities legal rights; to protect the safety and security of visitors to Kia.com and other Kia websites; to protect against fraud or for risk management purposes; or to comply with law or legal process.<br><br>Corporate Transactions.&nbsp; Going forward, we may acquire or sell assets, and companies may acquire financial interests in us.&nbsp; In connection with those transactions, personal information may be among the transferred business assets, and we may disclose your personal information to any company in connection with a proposed or actual sale, merger, transfer, or exchange of all or a portion of a business or operating unit.&nbsp; Any such disclosure will be conditioned on that company agreeing to use the data prior to any acquisition solely for the purpose of making its acquisition decision and to observe the relevant provisions of our Privacy Policy with respect to the data.&nbsp; In the event that personal information is transferred to a company acquiring assets from us, we will require that company to agree to observe the relevant provisions of our Privacy Policy with respect to your personal information (including any choices that you have made under our Privacy Policy to limit the use of your data).<br><br>Data Collection from Others.&nbsp; We may also obtain personal information about you from our dealers, licensees and/or business partners.&nbsp; We may merge or use that personal information with information that we collected previously, as permitted by applicable law and our Privacy Policy.&nbsp; That personal information once in Kias possession is governed by this Privacy Policy.<br><br>Disclosure to Other Non-Affiliated Third Parties.&nbsp; If you provide us with permission, Kia may also share your personal information with advertisers and other companies who are not affiliated with Kia, but who would like to send you information about their products and services.&nbsp; However, you will always have the opportunity to decline the option to receive information from unaffiliated third parties (and thereby not permit this sharing of your personal information) when personal information is collected.<br><br><strong>4. Aggregation and Use of Personal Information</strong><br><br>All of the personal information that you provide to Kia, our dealers, licensees, and business partners may be aggregated and analyzed to enable us to develop targeted marketing programs and service offerings.&nbsp; We may also use your personal information to contact you regarding Kia programs and services or third party programs and services that we believe might be of interest to you. If you do not want us to contact you for this purpose, you may decline to receive such offers by calling our Consumer Affairs Department, 800-333-4543, at any time.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br><strong><br>5. Security of the Database and Your Personal Information</strong><br><br>Kia uses reasonable administrative, technical, personnel, and physical measures to safeguard personal information in its possession against loss, theft and unauthorized use, disclosure or modification. In addition, Kia uses reasonable methods to make sure that personal information is accurate, up-to-date, and appropriately complete.<br><br>Kia cannot guarantee your confidential use of Kia.com and other Kia websites and will not assume responsibility for any damage that you or any person may suffer as a result of a breach of confidentiality resulting from your use of a Kia website or any information that you transmitted to a Kia website.<br><br><strong>6. Links to Other Sites</strong><br><br>Kia.com and other Kia websites may contain links to third party sites not controlled by Kia or covered by this Privacy Policy, including, as noted above, sites belonging to Kia dealers, Kia licensees, or independent product review sites. Kia makes no representation or warranty as to the accuracy of any information contained in any hypertext link to those sites. Any hypertext link to any other person or entity should not be construed as endorsement by Kia of such persons or entitys website, products, or services.<br><br><strong>7. Cookies and Other Tracking Technology Used By Us and Certain Third parties</strong><br><br>In addition to any personal information or other information that you choose to provide to us on the website, we and our third-party service providers may use cookies, web beacons, embedded scripts and variety of other technologies, now and hereafter devised, that automatically collect certain website usage information whenever you visit or interact with the website.&nbsp; This information may include browser type, operating system, the page served, the time, the source of the request, the preceding page view, and other similar information.&nbsp; We may use this usage information for a variety of purposes, including enhancing or otherwise improving the website.&nbsp; In addition, we may also collect your IP address or some other unique identifier for the particular device you use to access the Internet, as applicable (a "Device Identifier").&nbsp; A Device Identifier is a number that is automatically assigned to your computer, and we may identify your device by its Device Identifier.&nbsp; When analyzed, usage information helps us determine how our website is used, such as what types of visitors arrive at the website, what type of content is most popular, what type of content you may find most relevant and what type of visitors are interested in particular kinds of content and advertising.&nbsp; We may associate your Device Identifier or web site usage information with the personal information you provide, but we will treat the combined information as personal information.<br><br>A cookie is a data file placed on a computer when it is used to visit the website.&nbsp; Cookies may be used for many purposes, including, without limitation, tracking user preferences and web pages visited while using the website.&nbsp; You may disable many types of cookies using your browser\'s preferences, but some features of the website may not function properly or may operate slowly if you disable the cookies.&nbsp; If you are concerned about the storage and use of cookies, you may be able to direct your internet browser to notify you and seek approval whenever a cookie is being sent to your hard drive.&nbsp; You may also delete many types of cookies manually from your hard drive through your internet browser or other programs.&nbsp; Please note, however, that some parts of our website will not function properly or be available to you if you refuse to accept a cookie, delete cookies or choose to disable the acceptance of cookies and doing so may also interfere with your third party opt-outs described further below.<br><br>A web beacon is a small graphic image or other web programming code (also known as "1x1 GIFs" or "clear GIFs").&nbsp; We may include these in our web pages and e-mail messages.&nbsp; Web beacons may be invisible to you, but any electronic image or other web programming code inserted into a web page or e-mail can act as a web beacon.&nbsp; Web beacons or similar technologies may be used for a number of purposes, including, without limitation, to count visitors to the website, to monitor how users navigate the website, to count how many e-mails that were sent were actually opened or to count how many particular articles or links were actually viewed.&nbsp; An embedded script is programming code that is designed to collect information about your interactions with the website, such as the links you click on.&nbsp; The code is temporarily downloaded onto your computer from our web server or a third-party service provider, is active only while you are connected to the website, and is deactivated or deleted thereafter.<br><br>In addition, we may work with third parties such as network advertising networks and/or traffic measurement services to track your activities to better serve you contextually relevant content and/or advertisements on the website and/or to analyze traffic on the website.&nbsp; Network advertisers are third parties that display content and/or advertisements based on your visits to the website and/or other websites you have visited.&nbsp; This enables us to target content and/or advertisements to you based on perceived interest.&nbsp; Third parties that assist us in this regard may themselves set and access their own cookies and other technologies on your computer and track certain behavioral information regarding users of your computer via a Device Identifier.&nbsp; These third party cookies are set to, among other things:&nbsp; (a) help deliver content and/or advertisements to you that you might be interested in; (b) regulate when and how often content and/or advertisements are served to you; and (c) understand the usefulness to you of the content and/or advertisements that have been delivered to you.&nbsp; Note that any images (or any other parts of a web page) served by third parties in association with third party cookies and other technologies may serve as web beacons, which enable third parties to carry out the previously described activities.&nbsp; Third party cookies, web beacons and other third party technologies are governed by each third party\'s specific privacy policy, not this one.&nbsp; While we may use a variety of companies to serve content and/or advertisements on the website, you may wish to visit http://www.networkadvertising.org/optout_nonppii.asp, which provides information regarding this practice by Network Advertising Initiative ("NAI") members, and your choices regarding having this information used by these companies, including the "opt-out" procedures of NAI members.&nbsp; Opting out of one or more NAI members only means that those NAI members will no longer be able to deliver targeted content and/or ads to you, which will affect this and other web sites, but does not mean you will no longer receive any targeted content and/or ads.&nbsp; Also, if your browsers are configured to reject cookies when you visit this opt-out page, or you subsequently erase your cookies, use a different computer or change web browsers, your NAI opt-out may not, or may no longer, be effective.&nbsp; Additional information is available on the NAIs web site accessible by the above link.<br><br><strong>8. Access to Your Personal Information</strong><br><br>If possible, we will let you review your personal information that you provided to Kia and will take reasonable steps to correct any personal information that you inform us is incorrect.&nbsp; If you ask Kia to stop using the personal information you provided to Kia, Kia will honor that request while retaining any record of your personal information that is necessary to comply with applicable federal, state, or local law.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br><br><strong>9. Opportunity to Opt-Out</strong><br><br>If you would like to communicate with us about our Privacy Policy or Kias collection and use of your personal information, to review or correct your personal information, or to stop all future communications from us, please contact Kia Consumer Affairs at 800-333-4542.<br><br><hr><br><br> <span class="header1">LEGAL INFORMATION</span><br><br><strong>1. Copyright/Trademark Ownership</strong><br><br>2012 Kia Motors America, Inc. all rights reserved. Visitors to this website may download, copy or transmit, solely within the United States, any portion of the material contained in these web pages for informational and noncommercial personal purposes only. Each copy of these materials retains all copyright and other proprietary notices contained therein. The text, images, audio files, animation files, video files and their arrangement on the site are subject to copyright and other intellectual property protection.<br><br>The Kia mark, design, and "The Power to Surprise" tag line are registered trademarks of Kia Motors Corporation of Korea. These trademarks and other Kia names, logos and service marks may not be modified, and they may not be used, downloaded, copied or distributed in any way except as an integral part of an authorized download, copy or transmission of material in these web pages. No license to any intellectual property has been granted by this site. No other use, copying or transmission, in whole or in part, of any material may be made without the express prior written permission of Kia Motors America.<br><br>All trademarks are the property of their respective owners.<br><br>SIRIUS and the SIRIUS dog logo are registered trademarks of SIRIUS Satellite Radio, Inc. Service requires a subscription, sold separately (a complimentary 3-month subscription is included with vehicle purchase). Not available in Alaska and Hawaii. For full Terms &amp; Conditions, visit sirius.com.<br><strong><br>2. No Representation or Warranty</strong><br><br>All information contained in this site is for informational purposes only. Some vehicles pictured may contain non-U.S. equipment. Some models may be shown with optional equipment. Further information can be obtained by contacting your local Kia dealer.<br><br>Kia Motors America may at any time change information offered on these web pages by updating the site. While Kia Motors America will make all reasonable efforts to provide accurate information on this site, there is no guarantee or warranty of accuracy. Furthermore, Kia Motors America does not assume any liability for the accuracy or completeness of information presented on this site. This site shall not be used or relied upon by any visitor as a substitute for information available from their local Kia dealer.<br><br><strong>3. Comparison Data</strong><br><br>All prices, specification, and equipment are based upon information available at the time of posting and are subject to change without notice. Kia Motors America makes no guarantees or warranties, either expressed or implied, with respect to the accuracy of the data presented.<br><br><strong>4. Options/Specifications/Features</strong><br><br>Kia reserves the right to make changes at any time without notice, and without incurring any obligations as to colors, materials, specifications, features, options, accessories, and packages. Some vehicles shown may include optional equipment. Kia, by the publications and dissemination of this web site, does not create any warranties, express or implied, to any Kia product. See dealer for details. </div> </a> governs. </span> </div> <input type="submit" class="goSubmit"/> <div class="formButton"> <div class="next-section-button submitBtn"> <a href="" ng-click="requestUpdates()" prevent-default="" class=""> <div class="text ng-binding">{{\'label.forms.submit.send\' | i18n}}</div> <div class="arrow"></div> </a> </div> </div> </div> ');
$templateCache.put("/us/static/views/forms/requestUpdateSuccess.html",'<div class="successScreen"> <p class="successMessage">{{\'label.forms.request.appreciate\' | i18n }} <span class="yearSeries">{{seriesName}}.</span> {{\'label.forms.request.informed\' | i18n }} <span class="yearSeries">{{seriesName}}.</span></p>	<div class="formButton"> <div class="next-section-button"> <a href="{{basePath}}/vehicle/{{series}}/{{year}}" class="" target="_self"> <div class="text ng-binding">{{\'label.forms.success.experience\' | i18n }} {{seriesName}}</div> <div class="arrow"></div> </a> </div> </div></div>');$templateCache.put("/us/static/views/forms/safetyRecallSearch.html","<div class='safety-recall-safety'> <div class='formBody' screen-size> <form name=\"searchVin\" id=\"searchVin\" class=\"searchVin\" novalidate form-autocomplete> <div class='formSection'> <div class='form-fields'> <div class=\"field\"> <input auto-focus class='text input' type='text' name=\"vin\" ng-model=\"vehicle.vin\" ng-minlength=17 ng-maxlength=17 ng-pattern=\"/^[a-zA-Z0-9]*$/\" maxlength=\"17\" placeholder=\"{{ 'label.forms.placeholder.searchByVin' | i18n }}\" required ng-class=\"{true:'error'}[submitted && (searchVin.vin.$invalid || (searchVin.$pristine && serviceError !==null))]\"/> <span class=\"error\" ng-show=\"submitted && searchVin.vin.$error.required\">{{'label.forms.errorVin.invalid' | i18n}}</span> <span class=\"error\" ng-show=\"submitted && !searchVin.vin.$error.required && searchVin.vin.$invalid\">{{'label.forms.errorVin.invalid' | i18n }}</span> <span class=\"error\" ng-show=\"submitted && searchVin.$pristine && serviceError\">{{ serviceError }}</span> <a href=\"\" prevent-default=\"\" class=\"question-tag\" lightbox-link='dBox-searchVin'>?</a> </div> <div class=\"btn-bordered submitBtn\" ng-click=\"formSubmit()\"> <div class=\"text ng-binding\">{{'label.forms.submit.search' | i18n}}</div> </div> </div> </div> </form> </div> <div class='recallData' ng-if='vehicle.loaded'> <h2>{{vehicle.year}} {{vehicle.model}}</h2> <div ng-if='vehicle.hasRecalls'> <p class='last-updated'>{{'label.searchVin.lastUpdated' | i18n}} <span>{{vehicle.date | date:'M/d/yyyy'}}</span></p> <div class='recalls-list-container'> <div class='recalls-list' ng-if=\"width> 940\"> <div class='recalls-item recalls-header'> <div class='recalls-nhtsa'>{{'label.searchVin.nhtsa' | i18n}} <span>{{'label.searchVin.recallNumber' | i18n}}</span></div> <div class='recalls-description'>{{'label.searchVin.description' | i18n}}</div> <div class='recalls-risk'>{{'label.searchVin.safetyRisk' | i18n}}</div> <div class='recalls-remedy'>{{'label.searchVin.remedy' | i18n}}</div> <div class='recalls-status'>{{'label.searchVin.status' | i18n}}</div> <div class='recalls-date'>{{'label.searchVin.recallDate' | i18n}}</div> <div class='recalls-date'>{{'label.searchVin.updated' | i18n}}</div> </div> <div class='recalls-item' ng-repeat='recall in vehicle.recalls'> <div class='recalls-nhtsa'>{{ recall.nhtsa }}</div> <div class='recalls-description'>{{ recall.description }}</div> <div class='recalls-risk'>{{ recall.risk }}</div> <div class='recalls-remedy'>{{ recall.remedy }}</div> <div class='recalls-status'>{{ recall.status }}</div> <div class='recalls-date'> <span ng-if='recall.issued'>{{ recall.issued | date:'M/d/yyyy' }}</span> </div> <div class='recalls-date'> <span ng-if='recall.updated'>{{ recall.updated | date:'M/d/yyyy' }}</span> </div> </div> </div> <div ng-if=\"width <=940\"> <div class='recalls-list vertical-list' ng-repeat='recall in vehicle.recalls' ng-class=\"{'recalls-first':$index==0}\"> <div class='recalls-item recalls-nhtsa'> <div class='recalls-header'>{{'label.searchVin.nhtsa' | i18n}} <span>{{'label.searchVin.recallNumber' | i18n}}</span></div> <div>{{ recall.nhtsa }}</div> </div> <div class='recalls-item'> <div class='recalls-header'>{{'label.searchVin.description' | i18n}}</div> <div>{{ recall.description }}</div> </div> <div class='recalls-item'> <div class='recalls-header'>{{'label.searchVin.safetyRisk' | i18n}}</div> <div>{{ recall.risk }}</div> </div> <div class='recalls-item'> <div class='recalls-header'>{{'label.searchVin.remedy' | i18n}}</div> <div>{{ recall.remedy }}</div> </div> <div class='recalls-item'> <div class='recalls-header'>{{'label.searchVin.status' | i18n}}</div> <div>{{ recall.status }}</div> </div> <div class='recalls-item'> <div class='recalls-header'>{{'label.searchVin.recallDate' | i18n}}</div> <div> <span ng-if='recall.updated'>{{ recall.issued | date:'M/d/yyyy' }}</span> </div> </div> <div class='recalls-item'> <div class='recalls-header'>{{'label.searchVin.updated' | i18n}}</div> <div> <span ng-if='recall.issued'>{{ recall.updated | date:'M/d/yyyy' }}</span> </div> </div> </div> </div> </div> </div> <div ng-if='!vehicle.hasRecalls' class='no-recalls'> <p>{{'label.searchVin.noRecalls' | i18n }} <span>{{vehicle.date | date:'M/d/yyyy'}}</span></p> </div> </div> <div lightbox id='dBox-searchVin' type=\"modal\" outside-close=\"true\" title=\"{{'label.searchVin.recalls' | i18n}}\"> <h1>{{'label.searchVin.lightbox.title' | i18n}}</h1> <div class='copy'>{{'label.searchVin.lightbox.copy' | i18n}}</div> <div class=\"close-btn\" lightbox-link='dBox-searchVin'>{{'label.searchVin.lightbox.button' | i18n}}</div> </div> </div>");$templateCache.put("/us/static/views/forms/testDriveForm.html",'<div> <div class="userInformation"> <p>{{\'label.forms.getaquote.email\' | i18n }}</p> <div class="userInfo"> <input auto-focus type="text" name="email" class="email" ng-class="{true:\'error\'}[submitted && (testDriveForm.email.$error.required || testDriveForm.email.$error.maxlength || testDriveForm.email.$error.pattern)]" ng-model="user.email" ng-pattern="emailPattern" placeholder="{{\'label.forms.placeholder.email\' | i18n}}" maxlength="320" required> <span class="error" ng-show="submitted && testDriveForm.email.$error.required">{{\'label.forms.errorEmail.provide\' | i18n}}</span> <span class="error" ng-show="submitted && testDriveForm.email.$error.maxlength">{{\'label.forms.errorEmail.length\' | i18n }}</span> <span class="error" ng-show="submitted && testDriveForm.email.$error.pattern">{{\'label.forms.errorEmail.pattern\' | i18n }}</span> </div> <div class="userInfo"> <div class="tableContainer"> <span class="phoneLabel">{{\'label.forms.getaquote.phone\' | i18n}}</span> <input auto-focus type="tel" id="phone" name="phone" class="phone" ng-class="{true:\'error\'}[submitted && (testDriveForm.phone.$error.required)]" ng-model="user.phone" placeholder="(000) 000-0000" maxlength="{{phoneLength}}" ng-pattern="phonePattern" required> </div> <span class="error" ng-show="submitted && testDriveForm.phone.$error.required">{{\'label.forms.errorPhone.provide\' | i18n }}</span> <span class="error" ng-show="submitted && testDriveForm.phone.$error.pattern">{{\'label.forms.errorPhone.pattern\' | i18n }}</span> </div> </div> <div class="userPreferences">	</div> <div class="contactInformation"> <p>{{\'label.forms.getaquote.greeting\' | i18n }},</p> <div class="userInfo"> <div class="nameContainer"> <div class="left"> <input auto-focus type="text" name="firstName" id="first-name" ng-class="{true:\'error\'}[submitted && (testDriveForm.firstName.$error.required || testDriveForm.firstName.$error.maxlength)]" ng-model="user.first" placeholder="{{\'label.forms.placeholder.firstName\' | i18n}}" ng-pattern="namePattern" maxlength="25" required> <span class="error" ng-show="submitted && testDriveForm.firstName.$error.required">{{\'label.forms.errorFirst.provide\' | i18n }}</span> <span class="error" ng-show="submitted && testDriveForm.firstName.$error.maxlength">{{\'label.forms.errorName.length\' | i18n }}</span> <span class="error" ng-show="submitted && testDriveForm.firstName.$error.pattern">{{\'label.forms.errorFirst.pattern\' | i18n }}</span> </div> <div class="right"> <input auto-focus type="text" name="lastName" id="last-name" ng-class="{true:\'error\'}[submitted && (testDriveForm.lastName.$error.required || testDriveForm.lastName.$error.maxlength)]" ng-model="user.last" placeholder="{{\'label.forms.placeholder.lastName\' | i18n}}" ng-pattern="namePattern" maxlength="25" required> <span class="error" ng-show="submitted && testDriveForm.lastName.$error.required">{{\'label.forms.errorLast.provide\' | i18n }}</span> <span class="error" ng-show="submitted && testDriveForm.lastName.$error.maxlength">{{\'label.forms.errorName.length\' | i18n }}</span> <span class="error" ng-show="submitted && testDriveForm.lastName.$error.pattern">{{\'label.forms.errorLast.pattern\' | i18n }}</span> </div> </div> </div> <div class="userInfo"> <input auto-focus type="text" name="address" ng-model="user.address" placeholder="{{\'label.forms.placeholder.optAddressLine1\' | i18n}}" maxlength="50"> <span class="error" ng-show="submitted && testDriveForm.address.$error.required">{{\'label.forms.errorAddress.provide\' | i18n }}</span> <span class="error" ng-show="submitted && testDriveForm.address.$error.maxlength">{{\'label.forms.errorAddCity.length\' | i18n }}</span> <span class="error" ng-show="submitted && testDriveForm.address.$error.pattern">{{\'label.forms.errorAddress.pattern\' | i18n }}</span> </div> <input auto-focus type="text" name="optionalAddress" ng-model="user.optAddress" placeholder="{{\'label.forms.placeholder.optAddress\' | i18n}}" maxlength="50"> <div class="userInfo"> <input auto-focus type="text" name="city" ng-model="user.city" placeholder="{{\'label.forms.placeholder.optCity\' | i18n}}" maxlength="50"> <span class="error" ng-show="submitted && testDriveForm.city.$error.required">{{\'label.forms.errorCity.provide\' | i18n }}</span> <span class="error" ng-show="submitted && testDriveForm.city.$error.maxlength">{{\'label.forms.errorAddCity.length\' | i18n }}</span> <span class="error" ng-show="submitted && testDriveForm.city.$error.pattern">{{\'label.forms.errorCity.pattern\' | i18n }}</span> </div> <div class="userInfo"> <div class="nameContainer"> <div form-states></div> <div class="right zipcode"> <input length-check auto-focus type="tel" name="zipcode" id="zip-code" ng-class="{true:\'error\'}[submitted && (testDriveForm.zipcode.$error.required || testDriveForm.zipcode.$error.maxlength || testDriveForm.zipcode.$error.pattern)]" ng-model="user.zipcode" placeholder="{{\'label.forms.placeholder.zip\' | i18n}}" maxlength="5" ng-pattern="zipPattern" ui-jq="numeric" required> <span class="error" ng-show="submitted && testDriveForm.zipcode.$error.required">{{\'label.forms.errorZip.provide\' | i18n }}</span> <span class="error" ng-show="submitted && testDriveForm.zipcode.$error.maxlength">{{\'label.forms.errorZip.length\' | i18n }}</span> <span class="error" ng-show="submitted && testDriveForm.zipcode.$error.pattern">{{\'label.forms.errorZip.pattern\' | i18n }}</span> <span class="error" ng-show="invalidZipNew">{{zipMessage}}</span> </div> </div> </div> </div>	<div class="disclaimer"> <span>{{\'label.forms.getaquote.disclaimer\' | i18n }} <a href="http://www.kia.com/us/en/content/privacy-and-legal/privacy-policy">Privacy Policy</a>.</span> </div> <div class="formButton"> <input type="submit" class="goSubmit"/> <div class="next-section-button submitBtn"> <a href="" ng-click="formSubmit()" prevent-default="" class=""> <div class="text ng-binding">{{\'label.forms.submit.send\' | i18n}}</div> <div class="arrow"></div> </a> </div> </div> </div> ');$templateCache.put("/us/static/views/forms/userInformation.html",'<div class="userInformation"> <p>{{\'label.forms.getaquote.email\' | i18n }}</p> <div class="userInfo"> <input auto-focus type="text" name="email" class="email" ng-class="{true:\'error\'}[submitted && (quoteForm.email.$error.required || quoteForm.email.$error.maxlength || quoteForm.email.$error.pattern)]" ng-model="user.email" ng-pattern="emailPattern" placeholder="{{\'label.forms.placeholder.email\' | i18n}}" maxlength="320" required> <span class="error" ng-show="submitted && quoteForm.email.$error.required">{{\'label.forms.errorEmail.provide\' | i18n}}</span> <span class="error" ng-show="submitted && quoteForm.email.$error.maxlength">{{\'label.forms.errorEmail.length\' | i18n }}</span> <span class="error" ng-show="submitted && quoteForm.email.$error.pattern">{{\'label.forms.errorEmail.pattern\' | i18n }}</span> </div> <div class="userInfo"> <div class="tableContainer"> <span class="phoneLabel">{{\'label.forms.getaquote.phone\' | i18n}}</span> <input auto-focus type="tel" id="phone" name="phone" class="phone" ng-class="{true:\'error\'}[submitted && (quoteForm.phone.$error.required)]" ng-model="user.phone" placeholder="(000) 000-0000" maxlength="{{phoneLength}}" ng-pattern="phonePattern" required> </div> <span class="error" ng-show="submitted && quoteForm.phone.$error.required">{{\'label.forms.errorPhone.provide\' | i18n }}</span> <span class="error" ng-show="submitted && quoteForm.phone.$error.pattern">{{\'label.forms.errorPhone.pattern\' | i18n }}</span> </div> </div> ');$templateCache.put("/us/static/views/forms/userPreferences.html",'<div class="userPreferences">	<div class="userInfo"> <div class="options" ng-click="showTrading=!showTrading"> <span class="optionArrow" ng-class="{true:\'expanded\'}[showTrading==true]"></span><p class=" optionLabel trading">{{\'label.forms.getaquote.trading\' | i18n }}</p> </div> <div class=" optionDetails" ng-show="showTrading"> <div class="tradingVehicleSelect" trading-vehicle-info> <div class="selectHolder"> <select name="year" id="year" ng-model=\'user.chooseYear\' ng-change=\'yearChange()\' ng-options=\'year.value for year in years\'> <option value="">{{\'label.forms.trading.year\' | i18n}}</option> </select> <select name="make" id="make" ng-model=\'user.chooseMake\' ng-change=\'makeChange()\' ng-disabled=\'!yearSelected\' ng-options=\'make.value for make in makes\'> <option value="">{{\'label.forms.trading.make\' | i18n}}</option> </select> <select name="model" id="model" ng-model=\'user.chooseModel\' ng-change=\'modelChange()\' ng-disabled=\'!makeSelected\' ng-options=\'model.value for model in models\'> <option value="">{{\'label.forms.trading.model\' | i18n}}</option> </select> <select name="condition" id="condition" ng-model=\'user.chooseCondition\' ng-change=\'conditionChange()\' ng-disabled=\'!modelSelected\' ng-options=\'condition.value for condition in conditions\'> <option value="">{{\'label.forms.trading.condition\' | i18n}}</option> </select> </div> </div> <div class="tableContainer"> <span class="dpChoice">{{\'label.forms.trading.mileage\' | i18n }}</span> <input auto-focus type="tel" name="miles" class="miles" ng-model="user.miles" maxlength="6" ui-jq="numeric" placeholder="{{\'label.forms.placeholder.mileage\' | i18n }}"> <span class="dpChoice dpMiles">miles</span> </div> </div> </div> <div class="userInfo"> <div class="options" ng-click="showFinance=!showFinance"> <span class="optionArrow" ng-class="{true:\'expanded\'}[showFinance==true]"></span><p class=" optionLabel trading">{{\'label.forms.getaquote.finance\' | i18n }}</p> </div> <div class="optionDetails" ng-show="showFinance"> <div class="userInfo"> <div class="downPaymentBox"> <span class="dpPayment dPay">{{\'label.forms.getaquote.downpayment\' | i18n }}</span> <div class="inputBox"> <div class="innerBox"> <span class="alignLeft">$</span> <input auto-focus type="tel" name="downPayment" class="downPayment" ng-model="user.downPayment" placeholder="{{\'label.forms.placeholder.dPayment\' | i18n }}" maxlength="5" ng-pattern="dPayPattern" ui-jq="numeric"> </div> </div> </div></div> <div class="userInfo"> <div class="tableContainer"> <span class="dpPayment">{{\'label.forms.getaquote.paymentoption\' | i18n }}</span> <select class="optionPayment" ng-model="user.paymentOption"> <option value="">{{\'label.forms.placeholder.select\' | i18n}}</option> <option ng-repeat=\'option in options\' value="{{option.id}}">{{option.value}}</option> </select> </div> </div> </div> </div> </div>');$templateCache.put("/us/static/views/forms/vehicleDealers.html",'<div class="dealers"> <ul> <li dealer-item ng-repeat="dealer in dealers" dealer="dealer" disable-link="true" ng-class="{true:\'singleItem\'}[dealers.length <=1]"></li> </ul> <span class="error" ng-show="noDealer">{{\'label.forms.selectDealer.message\' | i18n}}</span> <div class="formButton"> <div class="next-section-button" lang-class> <a href="" ng-click="checkDealers()" prevent-default="" class=""> <div class="text ng-binding">{{\'label.forms.getaquote.continue\' | i18n}}</div> <div class="arrow"></div> </a> </div> </div> <div class="formButton" ng-if="dealersSelected.length===1"> <div class="next-section-button" lang-class dealer-chat link="dealer-chat" dealer-code="{{dealersSelected[0].code}}" chat-enabled="{{dealersSelected[0].chatEnabled}}" placement="vehicle_dealers" model="{{series}}" year="{{year}}"> <a class="dealer-chat" ng-class="{{lang}}"> <div class="text ng-binding">{{\'label.forms.general.chatWithDealer\' | i18n}}</div> <div class="arrow"></div> </a> </div> </div> </div> ');$templateCache.put("/us/static/views/forms/vehicleSelectorAppraisal.html",'<div vehicle-grid target="tradein"></div>');$templateCache.put("/us/static/views/forms/vehicleSelectorBrochure.html",'<div vehicle-grid target="brochure"></div>');$templateCache.put("/us/static/views/forms/vehicleSelectorGetaquote.html",'<div vehicle-grid target="getaquote"></div>');$templateCache.put("/us/static/views/forms/vehicleSelectorTestDrive.html",'<div vehicle-grid target="testdrive"></div>');$templateCache.put("/us/static/views/forms/vehicleSelectorUpdatesRequest.html",'<div vehicle-grid target="updates"></div>');$templateCache.put("/us/static/views/homeTopographic.html",'<div id="home-page" class="homepage homeTopographic" homepage> <div class="carousel slide" id="home-carousel" ng-swipe-left="carouselGoto(\'next\')" ng-swipe-right="carouselGoto(\'prev\')"> <div class="background "></div> <div class="items-listing"> <div class="item active" data-palette="" data-series="{{\'Soul\' | seriesName}}" data-year="2014" id="{{\'Soul\'|seriesName}}-2014"> <div class="padding-wrap item-wrap"> <div class="vehicle-info"> <h2><span class="year">2014&nbsp;</span><span class="series">Soul</span></h2> <span class="price msrp"> <span class="per">starting msrp</span> <span class="sup sup-dallar clear-left">$</span><span class="number">{{14700 | noFractionCurrency:false:true}}</span> <span class="sup">*</span> </span> <span class="price border-left mpg layout-lg"> <span class="per">city/hwy&nbsp;mpg</span> <span class="number clear-left">24/30</span> <span class="sup">*</span> </span> <h3 class="tag-line">Totally transformed.</h3><a class="link-btn link-explore" href="/us/en/vehicle/soul/2014/experience"><span class="text">EXPLORE</span><span class="arrow"></span></a></div> <div class="hero"> <img alt="Soul 2014" class="img-hero" no-drag src="http://staging.kia.com/us/k3/content/media/mediabin/homepage/hero//vehicles/soul/2014/global/global_soul_2014--kia-480x.png" data-src="http://staging.kia.com/us/k3/content/media/mediabin/homepage/hero//vehicles/soul/2014/global/global_soul_2014--kia-480x.png" data-img-480="http://staging.kia.com/us/k3/content/media/mediabin/homepage/hero//vehicles/soul/2014/global/global_soul_2014--kia-480x.png" data-img-960="http://staging.kia.com/us/k3/content/media/mediabin/homepage/hero//vehicles/soul/2014/global/global_soul_2014--kia-960x.png" data-img-1280="http://staging.kia.com/us/k3/content/media/mediabin/homepage/hero//vehicles/soul/2014/global/global_soul_2014--kia-1280x.png"/> </div> <div class="vehicle-properties"> <span class="price msrp"> <span class="number">{{14700 | noFractionCurrency:false:false}}</span><span class="sup">*</span> <span class="per">starting msrp</span> </span> <span class="price border-left mpg"> <span class="number">24/30</span><span class="sup">*</span> <span class="per">city/hwy&nbsp;mpg</span> </span> </div> </div> </div> <div class="item " data-palette="" data-series="{{\'Cadenza\' | seriesName}}" data-year="2014" id="{{\'Cadenza\'|seriesName}}-2014"> <div class="padding-wrap item-wrap"> <div class="vehicle-info"> <h2><span class="year">2014&nbsp;</span><span class="series">Cadenza</span></h2> <span class="price msrp"> <span class="per">starting msrp</span> <span class="sup sup-dallar clear-left">$</span><span class="number">{{35100 | noFractionCurrency:false:true}}</span> <span class="sup">*</span> </span> <span class="price border-left mpg layout-lg"> <span class="per">city/hwy&nbsp;mpg</span> <span class="number clear-left">19/28</span> <span class="sup">*</span> </span> <h3 class="tag-line">Impossible to ignore.</h3><a class="link-btn link-explore" href="/us/en/vehicle/cadenza/2014/experience"><span class="text">EXPLORE</span><span class="arrow"></span></a></div> <div class="hero"> <img alt="Cadenza 2014" class="img-hero delay-loading" no-drag src="/us/static/img/transparent.png" data-src="http://staging.kia.com/us/k3/content/media/mediabin/homepage/hero//vehicles/cadenza/2014/global/global_cadenza_2014--kia-480x.png" data-img-480="http://staging.kia.com/us/k3/content/media/mediabin/homepage/hero//vehicles/cadenza/2014/global/global_cadenza_2014--kia-480x.png" data-img-960="http://staging.kia.com/us/k3/content/media/mediabin/homepage/hero//vehicles/cadenza/2014/global/global_cadenza_2014--kia-960x.png" data-img-1280="http://staging.kia.com/us/k3/content/media/mediabin/homepage/hero//vehicles/cadenza/2014/global/global_cadenza_2014--kia-1280x.png"/> </div> <div class="vehicle-properties"> <span class="price msrp"> <span class="number">{{35100 | noFractionCurrency:false:false}}</span><span class="sup">*</span> <span class="per">starting msrp</span> </span> <span class="price border-left mpg"> <span class="number">19/28</span><span class="sup">*</span> <span class="per">city/hwy&nbsp;mpg</span> </span> </div> </div> </div> <div class="item " data-palette="" data-series="{{\'Sorento\' | seriesName}}" data-year="2014" id="{{\'Sorento\'|seriesName}}-2014"> <div class="padding-wrap item-wrap"> <div class="vehicle-info"> <h2><span class="year">2014&nbsp;</span><span class="series">Sorento</span></h2> <span class="price msrp"> <span class="per">starting msrp</span> <span class="sup sup-dallar clear-left">$</span><span class="number">{{24100 | noFractionCurrency:false:true}}</span> <span class="sup">*</span> </span> <span class="price border-left mpg layout-lg"> <span class="per">city/hwy&nbsp;mpg</span> <span class="number clear-left">20/26</span> <span class="sup">*</span> </span> <h3 class="tag-line">It has an answer for everything.<span class="trademark">&#8482;</span></h3><a class="link-btn link-explore" href="/us/en/vehicle/sorento/2014/experience"><span class="text">EXPLORE</span><span class="arrow"></span></a></div> <div class="hero"> <img alt="Sorento 2014" class="img-hero delay-loading" no-drag src="/us/static/img/transparent.png" data-src="http://staging.kia.com/us/k3/content/media/mediabin/homepage/hero//vehicles/sorento/2014/global/global_sorento_2014--kia-480x.png" data-img-480="http://staging.kia.com/us/k3/content/media/mediabin/homepage/hero//vehicles/sorento/2014/global/global_sorento_2014--kia-480x.png" data-img-960="http://staging.kia.com/us/k3/content/media/mediabin/homepage/hero//vehicles/sorento/2014/global/global_sorento_2014--kia-960x.png" data-img-1280="http://staging.kia.com/us/k3/content/media/mediabin/homepage/hero//vehicles/sorento/2014/global/global_sorento_2014--kia-1280x.png"/> </div> <div class="vehicle-properties"> <span class="price msrp"> <span class="number">{{24100 | noFractionCurrency:false:false}}</span><span class="sup">*</span> <span class="per">starting msrp</span> </span> <span class="price border-left mpg"> <span class="number">20/26</span><span class="sup">*</span> <span class="per">city/hwy&nbsp;mpg</span> </span> </div> </div> </div> <div class="item " data-palette="" data-series="{{\'Forte\' | seriesName}}" data-year="2014" id="{{\'Forte\'|seriesName}}-2014"> <div class="padding-wrap item-wrap"> <div class="vehicle-info"> <h2><span class="year">2014&nbsp;</span><span class="series">Forte</span></h2> <span class="price msrp"> <span class="per">starting msrp</span> <span class="sup sup-dallar clear-left">$</span><span class="number">{{15900 | noFractionCurrency:false:true}}</span> <span class="sup">*</span> </span> <span class="price border-left mpg layout-lg"> <span class="per">city/hwy&nbsp;mpg</span> <span class="number clear-left">25/37</span> <span class="sup">*</span> </span> <h3 class="tag-line">Loved by those who love technology.<span class="trademark">&#8482;</span></h3><a class="link-btn link-explore" href="/us/en/vehicle/forte/2014/experience"><span class="text">EXPLORE</span><span class="arrow"></span></a></div> <div class="hero"> <img alt="Forte 2014" class="img-hero delay-loading" no-drag src="/us/static/img/transparent.png" data-src="http://staging.kia.com/us/k3/content/media/mediabin/homepage/hero//vehicles/forte/2014/global/global_forte_2014--kia-480x.png" data-img-480="http://staging.kia.com/us/k3/content/media/mediabin/homepage/hero//vehicles/forte/2014/global/global_forte_2014--kia-480x.png" data-img-960="http://staging.kia.com/us/k3/content/media/mediabin/homepage/hero//vehicles/forte/2014/global/global_forte_2014--kia-960x.png" data-img-1280="http://staging.kia.com/us/k3/content/media/mediabin/homepage/hero//vehicles/forte/2014/global/global_forte_2014--kia-1280x.png"/> </div> <div class="vehicle-properties"> <span class="price msrp"> <span class="number">{{15900 | noFractionCurrency:false:false}}</span><span class="sup">*</span> <span class="per">starting msrp</span> </span> <span class="price border-left mpg"> <span class="number">25/37</span><span class="sup">*</span> <span class="per">city/hwy&nbsp;mpg</span> </span> </div> </div> </div> <div class="item " data-palette="" data-series="{{\'Optima\' | seriesName}}" data-year="2014" id="{{\'Optima\'|seriesName}}-2014"> <div class="padding-wrap item-wrap"> <div class="vehicle-info"> <h2><span class="year">2014&nbsp;</span><span class="series">Optima</span></h2> <span class="price msrp"> <span class="per">starting msrp</span> <span class="sup sup-dallar clear-left">$</span><span class="number">{{21500 | noFractionCurrency:false:true}}</span> <span class="sup">*</span> </span> <span class="price border-left mpg layout-lg"> <span class="per">city/hwy&nbsp;mpg</span> <span class="number clear-left">23/34</span> <span class="sup">*</span> </span> <h3 class="tag-line">Not your average midsize sedan.</h3><a class="link-btn link-explore" href="/us/en/vehicle/optima/2014/experience"><span class="text">EXPLORE</span><span class="arrow"></span></a></div> <div class="hero"> <img alt="Optima 2014" class="img-hero delay-loading" no-drag src="/us/static/img/transparent.png" data-src="http://staging.kia.com/us/k3/content/media/mediabin/homepage/hero//vehicles/optima/2014/global/global_optima_2014--kia-480x.png" data-img-480="http://staging.kia.com/us/k3/content/media/mediabin/homepage/hero//vehicles/optima/2014/global/global_optima_2014--kia-480x.png" data-img-960="http://staging.kia.com/us/k3/content/media/mediabin/homepage/hero//vehicles/optima/2014/global/global_optima_2014--kia-960x.png" data-img-1280="http://staging.kia.com/us/k3/content/media/mediabin/homepage/hero//vehicles/optima/2014/global/global_optima_2014--kia-1280x.png"/> </div> <div class="vehicle-properties"> <span class="price msrp"> <span class="number">{{21500 | noFractionCurrency:false:false}}</span><span class="sup">*</span> <span class="per">starting msrp</span> </span> <span class="price border-left mpg"> <span class="number">23/34</span><span class="sup">*</span> <span class="per">city/hwy&nbsp;mpg</span> </span> </div> </div> </div> </div> </div> <div class="padding-wrap layout-wrap"> <nav class="carousel-navigation"> <a class="btn-bordered" href="/us/en/vehicles">SEE ALL VEHICLES</a> <ul class="carousel-indicators"> <li class="active"><a href="javascript: void(0);" data-target="#home-carousel" title="" class="nav-link" data-slide-to="0" onclick="return false;"><img alt="Soul 2014" class="nav-img" src="/us/static/img/transparent.png" data-src="http://staging.kia.com/us/k3/content/media/mediabin/homepage/hero//vehicles/soul/2014/global/global_soul_2014--kia-140x.png"/><span class="nav-label">2014&nbsp;Soul</span></a></li> <li><a href="javascript: void(0);" data-target="#home-carousel" title="" class="nav-link" data-slide-to="1" onclick="return false;"><img alt="Cadenza 2014" class="nav-img" src="/us/static/img/transparent.png" data-src="http://staging.kia.com/us/k3/content/media/mediabin/homepage/hero//vehicles/cadenza/2014/global/global_cadenza_2014--kia-140x.png"/><span class="nav-label">2014&nbsp;Cadenza</span></a></li> <li><a href="javascript: void(0);" data-target="#home-carousel" title="" class="nav-link" data-slide-to="2" onclick="return false;"><img alt="Sorento 2014" class="nav-img" src="/us/static/img/transparent.png" data-src="http://staging.kia.com/us/k3/content/media/mediabin/homepage/hero//vehicles/sorento/2014/global/global_sorento_2014--kia-140x.png"/><span class="nav-label">2014&nbsp;Sorento</span></a></li> <li><a href="javascript: void(0);" data-target="#home-carousel" title="" class="nav-link" data-slide-to="3" onclick="return false;"><img alt="Forte 2014" class="nav-img" src="/us/static/img/transparent.png" data-src="http://staging.kia.com/us/k3/content/media/mediabin/homepage/hero//vehicles/forte/2014/global/global_forte_2014--kia-140x.png"/><span class="nav-label">2014&nbsp;Forte</span></a></li> <li><a href="javascript: void(0);" data-target="#home-carousel" title="" class="nav-link" data-slide-to="4" onclick="return false;"><img alt="Optima 2014" class="nav-img" src="/us/static/img/transparent.png" data-src="http://staging.kia.com/us/k3/content/media/mediabin/homepage/hero//vehicles/optima/2014/global/global_optima_2014--kia-140x.png"/><span class="nav-label">2014&nbsp;Optima</span></a></li> </ul> </nav> <a class="link-btn" id="link-explore-vehicle" href="#"><span class="text">EXPLORE</span><span class="arrow"></span></a> <div class="promos promo-square" homepage-promos> <span ng-repeat="item in currentVehiclePromo" class="dock-item dock-{{item.dockPosition}}"> <span class="dock-item-wrap square" square> <a ng-repeat="promo in item.promos" href="{{promo.link}}" class="promo-item {{promo.palette}} promo-type-{{getType(promo.type, promo.imageSmall)}} active square" ng-switch on="promo.type" target="{{getTabInfo(promo.openInNewTab)}}" square> <img class="img-promo" src="http://staging.kia.com/us/k3{{promo.imageMedium}}" data-img-1400="http://staging.kia.com/us/k3{{promo.imageSmall}}" data-img-1920="http://staging.kia.com/us/k3{{promo.imageMedium}}" data-img-2560="http://staging.kia.com/us/k3{{promo.imageLarge}}" alt="{{promo.imageAltText}}" ng-if="promo.imageSmall.length>0"/> <span ng-switch-when="link" class="promo-label">{{promo.description}}</span> <span ng-switch-when="link" class="icon-arrow-right"></span> <span ng-switch-when="video" class="promo-label">{{promo.description}}</span> <span ng-switch-when="video" class="icon-video-sm"></span> </a> </span> </span> </div> </div> </div>');$templateCache.put("/us/static/views/interior.html",'<div class="panorama-test"> <div loader></div> <h1>Interior Panorama 360</h1> <div> <h2>Select a Color</h2> <ul class="list"> <li ng-repeat="color in colors"> <span ng-click="onColor(color)">{{color.name}} {{color.fabric.name}}</span> </li> </ul> </div> <span>----------------------</span> <span>----------------------</span> <h1>Selected: {{currentColor.name}} {{currentColor.fabric.name}}</h1> <div panorama touch="true" rotate="true" path="{{basePath}}/interior/{{currentColor.baseHex}}/{{currentColor.fabric.file}}/" frames="18" x="20" pattern="90-xx-0.jpg" type="interior"></div> </script> </div>');$templateCache.put("/us/static/views/loader.html",'<div class="container loader" style="display:none !important"> </div>');$templateCache.put("/us/static/views/offers/offersPage.html","<div nav-secondary type=\"vehicle\" selected=\"offers\" series=\"{{series}}\" year=\"{{year}}\" ng-if=\"!showVehicleSelector\"></div> <div vehicle-grid target=\"offers\" ng-show=\"showVehicleSelector\"></div> <section class=\"offers-section\" offers-interaction responsive-handler ng-show=\"!showVehicleSelector\"> <div class=\"offers-zipcode-overlay\" ng-hide='codeExist'> <div ng-class=\"{true:'zipcode',false:'zipcode error'}[validZipCode]\" offers-zip-box request-submit='update(zipCode)' request-find=\"findMe()\" zip-code=\"zipCode\" zip-id=\"offersInitZipCode\"> <div zip-code-form id='offersInitZipCode' theme='zip-offers-init' error-message=\"{{'label.dealerLocator.error' | i18n}}\" placeholder=\"{{'label.dealerLocator.zipcode' | i18n}}\" model='zipCode' request=\"requestSubmit()\"> <div class=\"zip-submit\" title=\"{{'label.dealerLocator.zipcode.alt' | i18n}}\" ng-click=\"submitZipForm()\" ng-show=\"validZipCode\"> <span class=\"zip-submit-arrow\">{{'label.dealerLocator.zipcode.alt' | i18n}}</span> </div> <div class=\"zip-error\" ng-hide='validZipCode'> <p>{{errorMessage}}</p> </div> </div> </div> </div>	<div class=\"offers-mobile-detail close\"> <div class=\"header\" ui-scrollfix-ghost='100'> <div class=\"back-holder\" ng-click='closeMobileDetail()'> <div class=\"back\"></div> </div> <h2>OFFERS</h2> </div> <div class='detail'> <div class=\"box\"> <div> <div> <p class=\"title\">{{mobileData.typeTitle}}</p> <p class=\"offer-value\"><span class='cash' ng-show='mobileData.cash'>$</span><span ng-bind-html=\"mobileData.headline\"><span class='percent' ng-show='mobileData.percent'>%</span></p> <p class='headline' ng-show='mobileData.title'>{{mobileData.title.split('||')[0]}}.</p> <p class='model' ng-show='mobileData.modelInfo'>For: {{mobileData.modelInfo}}</p> <p class=\"expires\" ng-show='mobileData.expires'>Expires {{mobileData.expires}}</p> </div> </div> </div> <div class=\"buttons\"> <a class=\"bp\" href=\"\"> <p class=\"text\">{{'label.offers.buildAndPrice' | i18n }}</p> <span class=\"arrow\"></span> </a> <a class=\"search\" href=\"\"> <p class=\"text\">{{'label.offers.searchInventory' | i18n}}</p> <span class=\"arrow\"></span> </a> <a class='download' href=\"{{dealerDownloadLink}}\" target=\"_blank\" ng-show='mobileData.bonus'> <span class='arrow'></span> <p class='text'>{{'label.offers.download' | i18n}}</p> </a> <div class=\"clear\"></div> </div> <div class='richtext' id='mobileRichText' ng-bind-html=\"mobileData.description\"> </div> </div> </div> <div class=\"offers-sidebar\" ng-show='codeExist && dataReady'> <div class=\"filter-refine\"> <p>{{'label.offers.refineOffers' | i18n}}</p> <div class=\"close\" ng-click='closeMobileFilters()'>X</div> </div> <div class=\"filter-holder\" collapsible expanded='true'> <p><span class=\"arrow\"></span>{{'label.offers.year' | i18n}}</p> <ul> <li ng-repeat=\"yearValue in years\"> <div class=\"check-holder radio\"> <span ng-class=\"{checked: year==yearValue}\"> <input type=\"radio\" name=\"year\" ng-click=\"changeYear(yearValue)\" id=\"year_{{yearValue}}\"/> </span> </div> <div class=\"label-holder\"> <label for=\"year_{{yearValue}}\">{{yearValue}}</label> </div> </li> </ul> </div> <div class=\"filter-holder\" collapsible expanded='true'> <p><span class=\"arrow\"></span>{{'label.offers.offerType' | i18n}}</p> <ul> <li ng-repeat=\"ot in types\"> <div class=\"check-holder\"> <input type=\"checkbox\" name=\"{{ot.name}}\" value=\"{{ot.id}}\" filter-rule data-rule='offer' ng-model='filterOn' ng-change='onFilter()' id='type_{{ot.id}}' ui-jq='uniform'/> </div> <div class=\"label-holder\"> <label for='type_{{ot.id}}'>{{ot.name}}</label> </div> </li> </ul> </div> <div class=\"filter-holder\" collapsible expanded='true'> <p><span class=\"arrow\"></span>{{'label.offers.trims' | i18n}}</p> <ul> <li ng-repeat=\"trim in fullTrims\"> <div class=\"check-holder\"> <input type=\"checkbox\" name=\"{{trim.trimName}}\" filter-rule data-rule='trim' ng-model='filterOn' ng-change='onFilter()' value=\"{{trim.trimId}}\" id=\"trim_{{trim.trimId}}\" ui-jq='uniform'/> </div> <div class=\"label-holder\"> <label for=\"trim_{{trim.trimId}}\">{{trim.trimName}}</label> </div> </li> </ul> </div> <div class='filter-clear' ng-show='clearFiltersVisible'> <p ng-click='clearFilters()'><span class='close'></span><span class='label'>{{'label.offers.clearFilters' | i18n}}</span></p> </div> </div> <div class=\"offers-content\" ng-show='codeExist && dataReady'> <div class=\"offers-refine\" ng-click='showMobileFilters()'> <span class='arrow'>&lt;</span> <p>{{'label.offers.refine' | i18n}}</p> </div> <div class=\"offers-header\"> <p class='offers-sentence'> <span class=\"offers-mobile-magic-sentence\">Offers<br>near</span> <span class='offers-magic-sentence' ng-hide='noMatches'>{{'label.offers.searchFor' | i18n}} <span class='series highlight'>{{year}} {{escapedSeriesName}}</span> {{'label.offers.special' | i18n}} </span> <span class='offers-magic-sentence' ng-show='noMatches'>{{'label.offers.noMatch' | i18n}}</span> <span zip-box theme=\"offers-zip\" request-find='findMe()' request-submit=\"update(zipCode)\" zip-code='zipCode' zip-id='offers-search'></span> </p> <a href={{\"offers/\"}} target=\"_self\" class=\"changeCar\">{{'label.dealerInventory.changeCar' | i18n}}</a> <div class=\"next-section-button\"> <a href={{\"dealers/inventory/\"+series+\"/\"+year}} target=\"_self\"> <div class=\"text\"><span>{{'label.offers.paymentCalculator' | i18n}}</span></div> <div class=\"arrow\"></div> </a> </div> <div class=\"clear\"></div> </div> <div class=\"clear\"></div> <div class=\"next-section-button-mobile\"> <a href={{\"dealers/inventory/\"+series+\"/\"+year}} target=\"_self\"> <div class=\"text\"><span>{{'label.offers.paymentCalculator' | i18n}}</span></div> <div class=\"arrow\"></div> </a> </div>	<div class=\"offers-titles\" ng-show='national || nearMatches'> <div class=\"title\" ng-show='national'>{{'label.offers.nationalOffers' | i18n}}</div> <div class=\"title\" ng-show='nearMatches'>{{'label.offers.nearMatch' | i18n}}</div> </div>	<div class=\"offers-list\">	<div class=\"offers-trim\" ng-show='allTrimsAvalaible' ng-hide='trims.offers.length===0'> <div class=\"offers-trim-image\"> <div class=\"holder\"> <img class='all' ng-src=\"{{allTrimsImage}}\" alt=\"{{'label.offers.all' | i18n}}\"/> <p><span>{{'label.offers.all' | i18n}}</span></p> </div> </div> <div class=\"offers-trim-boxes\" tile-layout max-cols='3' tl-id='all' fixed='false' detail-id='offer-detail-all' collection='allTrims' expand-last='true' mobile='mobile' exclude-padd='true' mobile-one-column='true'> <div class=\"box\" ng-repeat='offer in collection()' tile-iterator ng-click='showDetail()' offer-box offer='offer' mobile='mobile'> <div class='offer-box'> <div class='close' ng-show=\"offerSelected\"></div> <div> <p class=\"title\">{{offer.typeTitle}}</p> <p class=\"offer-value\"><span class='cash' ng-show='offer.cash'>$</span><span ng-bind-html=\"offer.headline\"></span><span class='percent' ng-show='offer.percent'>%</span><span ng-show='offer.headlineSupplement' class='supplement'>{{offer.headlineSupplement}}</span></p> <p class='headline' ng-show='offer.title'>{{offer.title.split('||')[0]}}.</p> <p class='model' ng-show='offer.modelInfo'>{{'label.offers.for' | i18n}}: {{offer.modelInfo}}</p> <p class=\"more\" ng-hide=\"offerSelected\">{{'label.offers.more' | i18n}}<span>></span></p> <p class=\"expires\" ng-show='offerSelected'>{{'label.offers.expires' | i18n}} {{offer.expires}}</p> </div> </div> </div> <div class=\"offer-detail\" id='offer-detail-all' offer-tile-detail> <div class=\"buttons\"> <a class=\"bp\" ng-click='goBNP()'> <p class=\"text\">{{'label.offers.buildAndPrice' | i18n }}</p> <span class=\"arrow\"></span> </a> <a class=\"search\" ng-click='goDI()'> <p class=\"text\">{{'label.offers.searchInventory' | i18n}}</p> <span class=\"arrow\"></span> </a> <a ng-show='currentTileData.bonus' ng-click='goPDF()' class='download'> <span class='arrow'></span> <p class='text'>{{'label.offers.download' | i18n}}</p> </a> <div class=\"clear\"></div> </div> <div class='richtext' ng-bind-html=\"currentTileData.description\"> </div> </div> <div class=\"clear\"></div> </div> </div>	<div class=\"offers-trim\" ng-repeat=\"trim in trims\" id='trim_row_{{trim.trimId}}'> <div class=\"offers-trim-image\"> <div class=\"holder\"> <img ng-src=\"{{trim.image}}\" alt=\"\"/> <p><span ng-hide=\"year==='2016' && series==='soul-ev'\">{{escapedSeriesName}}</span><span> {{trim.trimName}}</span> {{trim.trimMsrp | noFractionCurrency:false}}* <span class='msrp'>msrp</span></p> </div> </div> <div class=\"offers-trim-boxes\" tile-layout max-cols='3' tl-id='{{trim.trimId}}' fixed='false' detail-id='offer-detail-specific' collection='trim.offers' expand-last='true' mobile='mobile' exclude-padd='true' mobile-one-column='true'> <div class=\"box\" ng-repeat='offer in collection()' tile-iterator offer-box offer='offer' mobile='mobile' ng-click='showDetail()'> <div class='offer-box'> <div class='close' ng-show=\"offerSelected\"></div> <div> <p class=\"title\">{{offer.typeTitle}}</p> <p class=\"offer-value\"><span class='cash' ng-show='offer.cash'>$</span><span ng-bind-html=\"offer.headline\"><span class='percent' ng-show='offer.percent'>%</span><span ng-show='offer.headlineSupplement' class='supplement'>{{offer.headlineSupplement}}</span></p> <p class='headline' ng-show='offer.title'>{{offer.title.split('||')[0]}}</p> <p class='model' ng-show='offer.modelInfo'>{{'label.offers.for' | i18n}}: {{offer.modelInfo}}</p> <p class=\"more\" ng-hide=\"offerSelected\">{{'label.offers.more' | i18n}}<span>></span></p> <p class=\"expires\" ng-show='offerSelected'>{{'label.offers.expires' | i18n}} {{offer.expires}}</p> </div> </div> </div> <div class=\"offer-detail\" id='offer-detail-specific' offer-tile-detail> <div class=\"buttons\"> <a class=\"bp\" ng-click='goBNP()'> <p class=\"text\">{{'label.offers.buildAndPrice' | i18n }}</p> <span class=\"arrow\"></span> </a> <a class=\"search\" ng-click='goDI()'> <p class=\"text\">{{'label.offers.searchInventory' | i18n}}</p> <span class=\"arrow\"></span> </a> <a ng-show='currentTileData.bonus' ng-click='goPDF()' class='download'> <span class='arrow'></span> <p class='text'>{{'label.offers.download' | i18n}}</p> </a> <div class=\"clear\"></div> </div> <div class='richtext' ng-bind-html=\"currentTileData.description\"> </div> </div> <div class=\"clear\"></div> </div> </div> <div class=\"clear\"></div> </div> </div> </section> <div footer-secondary type=\"footer\" selected=\"offers\" series=\"{{series}}\" year=\"{{year}}\" ng-if=\"!showVehicleSelector\"></div>");
$templateCache.put("/us/static/views/panel.html",'<div content-panel class="content-panel" palette="kia-palette-320" position="bottom-right" width-relative="40%" width-max="680"> <div class="background"> Something in the bkg </div> <div class="foreground"> <h1>Several stuff on the foreground</h1> <p>Lorem ipsum ad honorem</p> <p>Lorem ipsum ad honorem</p> <p>Lorem ipsum ad honorem</p> <p>Lorem ipsum ad honorem</p> <a href="/us/en">Lorem ipsum ad honorem</a> </div> </div>');$templateCache.put("/us/static/views/panorama.html",'<div class="panorama-test panorama-test-full"> <h1>Image List 360</h1> <div> <input type="text" ng-model="frameBind"/> </div> <div> <span ng-click="showPanorama=!showPanorama"><span ng-show="showPanorama">Hide</span><span ng-show="!showPanorama">Show</span> Panorama</span> </div> <div> Width <input type="text" ng-model="panoWidth"/> </div> <div> Height <input type="text" ng-model="panoHeight"/> </div> <div> <span ng-click="onFull()">Full set of images</span> </div> <div> <span ng-click="onBase()">Base set of images</span> </div> <div class="panoramaCont" ng-show="showPanorama"> <div panorama disable="true" frame="frameBind" images-set="testImagesSet" arc="1" type="list" direction="auto" fullscreen="true" width="panoWidth" height="panoHeight" alt-title="altTextArray"></div> </div> </div> <div class="panorama-test"> <h1>Panorama 360</h1> <div panorama touch="true" rotate="true" path="{{contentURI}}/content/media/all/vehicles/soul/2014/base/exterior/d3e647/" frames="18" x="20" pattern="90-xx-0.jpg" alt-title="altTextString"></div> </div> <div global-disclaimers-content disclaimers-content="true"> <div class="disclaimers-content"> <span style="color: #000000; font-family: Arial, Helvetica, sans; font-size: 11px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 14px; orphans: auto; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; display: inline !important; float: none;">Donec molestie massa mauris, vitae porta felis molestie non. Curabitur dapibus feugiat diam id tincidunt. Nam condimentum arcu in nulla consectetur eleifend. Nunc a dictum orci, ac malesuada lectus. Donec sed est bibendum, gravida justo lobortis, imperdiet risus. Vestibulum lacinia enim vitae imperdiet fermentum. Donec turpis leo, consequat ut adipiscing at, porta vitae nisl. Quisque facilisis tincidunt accumsan. Curabitur consequat imperdiet nibh, iaculis pellentesque mi aliquet vel. <br></span> <div style="position: absolute; left: -40px; top: -25px; width: 1px; height: 1px; overflow: hidden;" class="mcePaste" id="_mcePaste">&#65279;&#65279;</div> </div> </div>');$templateCache.put("/us/static/views/paymentTest.html",'<section id="calculatorTest" style="display: inline-block; width: 320px;"> <div payment-calculator></div> </section> <section style="display: inline-block; padding: 60px;"> <label for="price">Total Price:</label> <input id="price" type="number" ng-model="price" style="display: inline-block;"> <div style=" display: inline-block; font-size: 30px; height: 40px; line-height: 40px; padding: 30px; "> Monthly Price: <span style="color: red;">{{monthlyPrice}}</span> </div> </section>');$templateCache.put("/us/static/views/safetyRecallSearch.html","<div nav-secondary-content type=\"vehicle\" url='owners/safety-recall' path='/templatedata/global/l2_navigation/data/en/l2-navigation_owners'></div> <section class='content-template' content-interaction responsive-handler> <div class=\"content-global-container clearfix\"> <div ng-class=\"{true:'content-container-100 clearfix kia-palette-122',false:'content-container-100 clearfix kia-palette-122 mobile'}[content]\"> <div class=\"content-type-rich-text kia-palette-none, kia-palette-122\"> <span class=\"header1\">Service Campaigns & Safety Recalls</span> </div> <div class=\"content-type-html\"> <div safety-recall-date></div> </div> <div class=\"content-type-rich-text kia-palette-none, kia-palette-122\"> <p><span style='color: #888888; font-family: designk-medium; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 26px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; display: inline !important; float: none;'> To help keep your Kia operating at optimum performance levels, schedule a service appointment if your vehicle has one or more service campaigns or recalls outstanding as listed below. Your preferred Kia dealer will complete the repairs, free of charge. The time required to complete the work can vary depending on your dealer's work schedule, so scheduling a service appointment can help minimize any inconvenience. </span></p> <p><span style='color: #888888; font-family: designk-medium; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 26px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; display: inline !important; float: none;'> If you have any questions about these service campaigns or recalls, please contact your preferred Kia dealer or Kia Consumer Assistance or by phone at <a class='phone-number phone-link' href=\"tel:{{+18003334542}}\" style='color: #888888; font-family: designk-bold; white-space: nowrap;'>800-333-4542</a>, Monday through Friday, 5 AM to 6 PM PST </span></p> </div> <div class=\"content-type-html\"> <div safety-recall-search></div> </div> </div> </div> </section>");$templateCache.put("/us/static/views/search.html",'<div responsive-handler> <section class="searchresults-cont" class="content"> <div class="main-content content-table"> <div class="content-row"> <h2 class="sr-page-title"> {{\'label.search.searchresults\' | i18n}} </h2>	<div> <div class="sr-searchbox"> <div class="search-box"> <form method="get" ng-submit="selectSearchterm()" class="well search-form key-search" name="searchForm">	<input name="q" type="text" ng-model="predictiveterm" class="input-medium search-query searchboxTypeahead search-field" placeholder="Search kia.com" autocomplete="off" ng-init="focused=false" ng-focus="focused=true" ng-blur="focused=false"> <div ng-class="{focusicon: focused}"> <button type="submit" class="search-icon"> </div> </button> <span class="clear-icon" ng-click="clearSearch()" ng-show="predictiveterm.length" title="Clear search"></span>	</form> </div> </div> </div> </div>	<div ng-show="isSearchResult"> <div class="sr-total" ng-if="pageNumber==1"> {{searchResult.numFound}} {{results}} </div> <div class="sr-total" ng-if="pageNumber!=1"> {{\'label.search.page\' | i18n}} {{pageNumber}} {{\'label.search.of\' | i18n}} {{searchResult.numFound}} {{results}} </div> <div class="sr-content" ng-repeat="result in searchResult.docs"> <h2 class="sr-heading"> <a ng-href="{{result.url}}" target="_self" ng-click="trackSearchResultClick(result, $index)">{{result.title}}</a> </h2> <p ng-bind-html="result[\'metatag-description\'] | truncate:260 | highlightmore:highlightKeyword | unsafe "> </p> <br/> </div> </div> <div class="sr-pagination" ng-if="isSearchResult" ng-hide="pagination"> <div class="larger-viewport"> <div class="sr-prev"> <a href="#" prevent-default ng-hide="prevIsDisabled" ng-click=" goToPage(null,\'prev\')">&lt; &nbsp;{{\'label.search.prev\' | i18n}}</a> </div> <div class="page-text">{{\'label.search.page\' | i18n}}</div> <div class="page-number-wrapper"> <ul class="sr-pages"> <li ng-repeat="page in pageArray" ng-class="{active: page==pageNumber}" id="page-{{page}}"> <a href="#" prevent-default ng-click="goToPage(page,null)">{{page}}</a> </li> </ul> </div> <div class="sr-next"> <a href="#" prevent-default ng-hide="nextIsDisabled" ng-click="goToPage(null,\'next\')">{{\'label.search.next\' | i18n}} &nbsp; &gt;</a> </div> <div class="clear"></div> </div> <div class="smaller-viewport"> <div class="sr-prev"> <a href="#" prevent-default ng-class="{disabled: prevIsDisabled}" ng-click="prevIsDisabled || goToPage(null,\'prev\')">&lt; &nbsp;{{\'label.search.prev\' | i18n}}</a> </div> <div class="sr-number">{{\'label.search.page\' | i18n}} {{pageNumber}} {{\'label.search.of\' | i18n}} {{pageArray.length}}</div> <div class="sr-next"> <a href="#" prevent-default ng-class="{disabled:nextIsDisabled}" ng-click="nextIsDisabled || goToPage(null,\'next\')">{{\'label.search.next\' | i18n}} &nbsp; &gt;</a> </div> <div class="clear"></div> </div> </div>	<div ng-if="isSearchResult==0"> <div class="nsr-para"> {{\'label.search.noresultfor\' | i18n}} <span class="nsr-keyword-highlight"> {{keyword}}. </span> </div>	<div class="nsr-heading"> {{\'label.search.suggestions\' | i18n}} </div> <ul class="nsr-suggest-inner"> <li> {{\'label.search.makesuretext\' | i18n}} </li> <li> {{\'label.search.trydifferent\' | i18n}} </li> <li> {{\'label.search.trymore\' | i18n}} </li> <li> {{\'label.search.tryfewer\' | i18n}} </li> </ul> <div class="nsr-heading"> {{\'label.search.popularlinks\' | i18n}} </div> <div class="nsr-suggestion-cards"> <div class="nsr-sugcard"> <h4 class="nsr-sugcard-title"> <a href="{{baseUrl}}/vehicles">{{\'label.search.allvehicles\' | i18n}}<span>></span></a> </h4> <a href="{{baseUrl}}/vehicles"><img class="nsr-sugcard-img" src="../static/img/suggestion_card1.jpg" alt=""></a> </div> <div class="nsr-sugcard"> <h4 class="nsr-sugcard-title"> <a href="{{baseUrl}}/build">{{\'label.search.buildnprice\' | i18n}}<span>></span></a> </h4> <a href="{{baseUrl}}/build"><img class="nsr-sugcard-img" src="../static/img/suggestion_card2.jpg" alt=""></a> </div> <div class="nsr-sugcard"> <h4 class="nsr-sugcard-title"> <a href="{{baseUrl}}/dealers/locator">{{\'label.search.finddealer\' | i18n}}<span>></span></a> </h4> <a href="{{baseUrl}}/dealers/locator"><img class="nsr-sugcard-img" src="../static/img/suggestion_card3.jpg" alt=""></a> </div> </div> </div> </div> </section> </div>');$templateCache.put("/us/static/views/shared/vehicleNavigationTree.html","<ul class='mob-subtree-nav'> <li ng-repeat='vehicle in vehiclesData'> <div expandable-tree isLeaf='false' ng-click='expandTree($event,true)'> <span>{{modelName}}</span> <span class=\"arrow\"></span> </div> <ul> <li ng-repeat='vehicles in vehicle.vehicles' ng-click=\"markModel({{vehicles.featureId}},'{{content}}{{vehicles.image}}','{{vehicles.series}}','{{vehicles.year}}')\"> <div> <span>{{vehicles.year}}</span> <span class=\"arrow\"></span> </div> </li> </ul> </li> </ul>");$templateCache.put("/us/static/views/shared/vehicleTout.html",'<section class="shared-vehicleTout"> <a href="dealerInventory/detail/{{vehicle.vin}}/{{vehicle.dealerCode}}" class="thumb"><img src="{{vehicle.thumbImageUrl}}"/></a> <section class="purchaseOptions"> <div class="msrp"><span>{{vehicle.msrp}}<sup>*</sup></span> msrp</div> <div class="monthly"><span>${{vehicle.pricePerMonth}}<sup>*</sup></span> per month</div> <a href="#/dealer/{{vehicle.dealerCode}}" class="dealer">at {{vehicle.dealerName}} <span>({{vehicle.distFromUser}} mi away)</span></a> </section> <section class="colors"> <span color-block name="vehicle.exteriorColor.value" code="vehicle.exteriorColor.key" property="exteriorColor" showText="true"></span> <span color-block name="vehicle.interiorColor.value" code="vehicle.interiorColor.key" property="interiorColor" showText="true"></span> </section> <section class="info"> <dl> <li> <dt>{{getLabel(\'trim\')}}</dt> <dd>{{vehicle.trim.value}}</dd> </li> <li> <dt>{{getLabel(\'transmission\')}}</dt> <dd>{{vehicle.transmission.value}}</dd> </li> <li> <dt>{{getLabel(\'engineCylinder\')}}</dt> <dd>{{vehicle.engineCylinder.value}}</dd> </li> </dl> </section> <section class="links"> <div class="button"><a href="#/testDrive/{{vehicle.dealerCode}}">TEST DRIVE<span></span></a></div> <div class="button"><a href="#/quote/{{vehicle.dealerCode}}">GET A QUOTE<span></span></a></div> </section> </section>');$templateCache.put("/us/static/views/vehicleSelector/vehicleCategory.html",'<div class="vehicle-category-panel"> <div class="vehicle-category-heading meet-the-fleet" ng-class="{\'is-open\': !collapsed}" ng-click="toggleOpen()"> <span>{{category.heading}}</span> <span class="open-close-icon"></span> </div> <div class="collapsable" collapsable collapsed="collapsed"> <div ng-repeat="vehicle in category.vehicles | orderBy : \'modelOrder\' : false" vehicle-cell vehicle="vehicle" target="{{target}}"></div> </div> </div> ');$templateCache.put("/us/static/views/vehicleSelector/vehicleCell.html",'<div class="vehicle-cell-container"> <div class="vehicle-cell"> <div class="current-model" ng-click="selectModel($event,{{vehicle.featureId}},\'{{vehicle.image}}\',\'{{vehicle.series}}\',\'{{vehicle.year}}\')"> <h2 class="series field mobile">{{vehicle.series}}</h2> <div class="image"> <img ng-src="{{content}}{{vehicle.image}}" alt="{{vehicle.series}}" ng-show="currentYearSelected"> <img ng-src="{{content}}{{vehicle.previousYear.image}}" alt="{{vehicle.previousYear.series}}" ng-show="!currentYearSelected"> </div> <div class="info"> <div class="series field">{{vehicle.series}}</div> <div class="btn-panel"> <button class="year field"> {{vehicle.year}} </button> <button class="previous-model" ng-click="selectModel($event,{{vehicle.previousYear.featureId}},\'{{vehicle.previousYear.image}}\',\'{{vehicle.previousYear.series}}\',\'{{vehicle.previousYear.year}}\'); $event.stopPropagation()" ng-if="vehicle.previousYear !=null" ng-mouseenter="selectPreviousYear()" ng-mouseleave="selectCurrentYear()"> {{vehicle.previousYear.year}} </button> </div> <div class="coming-soon" ng-if="selectedYear.isComingSoon"> {{getComingSoonLabel()}} </div> <div class="msrp-group" ng-if="!selectedYear.isComingSoon"> <span class="msrp field" hide-if-zero="{{selectedYear[\'msrp\']}}">{{selectedYear[\'msrp\'] | noFractionCurrency}}</span> <span class="msrp-label field" hide-if-zero="{{selectedYear[\'msrp\']}}">{{\'label.selector.msrp\' | i18n}}&#8224</span> <span class="alt-text" alt-text value-one="{{selectedYear[\'msrp\']}}" value-two="{{selectedYear[\'mpgCombined\']}}" action="SHOW-ONE">{{selectedYear[\'navigationCustomText\']}}</span> </div> <div class="mpg-group" ng-if="!selectedYear.isComingSoon"> <span class="mpg field" hide-if-zero="{{selectedYear[\'mpgCombined\']}}">{{selectedYear[\'mpgCombined\']}}</span> <span class="mpg-label field" hide-if-zero="{{selectedYear[\'mpgCombined\']}}">{{selectedYear[\'mpgUnits\'] | uppercase}}&#8224;</span> <span class="alt-text" alt-text value-one="{{selectedYear[\'mpgCombined\']}}" value-two="{{selectedYear[\'msrp\']}}" action="SHOW-ONE">{{selectedYear[\'navigationCustomText\']}}</span> </div> <div ng-hide="target !==\'vehicles\'" alt-text value-one="{{selectedYear[\'msrp\']}}" value-two="{{selectedYear[\'mpgCombined\']}}" action="SHOW-BOTH"> <span class="alt-text">{{selectedYear[\'navigationCustomText\']}}</span> </div> <div ng-hide="target !==\'vehicles\'" alt-text value-one="{{selectedYear[\'msrp\']}}" value-two="{{selectedYear[\'mpgCombined\']}}" action="SHOW-BOTH"> <span class="alt-text alt-mpg">{{selectedYear[\'navigationCustomText\']}}</span> </div> </div> </div> </div> </div>');$templateCache.put("/us/static/views/vehicleSelector/vehicleGrid.html",'<div class="vehicle-grid-container"> <div lightbox id="dealerModelNotAvailable" type="modal" title="{{\'label.forms.vehicleNotAvailable\' | i18n}}"> <div class="image"> <img alt="{{m_year}} {{m_model}}" src="{{m_image}}"/> </div> <p>{{\'label.forms.vehicleNotAvailable.Modal.message\' | i18n | replace:\'_YEAR_MODEL_\':m_year+\' \'+m_model | replace:\'_DEALER_\':m_dealer}}</p> <div class="findBtn"> <a href="" ng-click="dealerNotAvailableFind()"> <div class="text ng-binding">{{\'label.forms.vehicleNotAvailble.Modal.FindDealer\' | i18n | replace:\'_MODEL_\':m_model}}</div> <div class="arrow"></div> </a> </div> <div class="chooseAnotherBtn" ng-click="hideDealerModelNotAvailable()"> <div class="text">{{\'label.forms.vehicleNotAvailble.Modal.ChooseVehicle\' | i18n}}</div> </div> </div> <div class="vehicle-grid"> <h2 class="mtf-title">{{getMtfTitle()}}</h3> <div ng-repeat="category in categories track by $index"> <div vehicle-category></div> </div>	<div class="vehicle-category-panel"> <div class="vehicle-category-heading meet-the-fleet"> <span>{{\'label.mtf.title.contactatonce\' | i18n}}</span> </div> <div class="contactatonce-btn"> <div class="cao-btn dealer-chat-btn"> <a dealer-chat placement="meet_fleet" chat-enabled="true"> <span class="cao-btn-overlay"></span> <i class="icon icon_chat-bubble"></i> {{\'label.contactatonce.title.chat\' | i18n}} </a> </div> <div class="cao-btn text-msg-btn"> <a dealer-chat is-text-message="true" default-text-message="{{\'label.contactatonce.smsDefaultMessage\' | i18n}}" placement="meet_fleet" chat-enabled="true"> <span class="cao-btn-overlay"></span> <i class="icon icon_phone"></i> {{\'label.contactatonce.title.text\' | i18n}} </a> </div> </div> </div> <div ng-if="fillSpace" style="height:250px;width:250px;"></div> </div> </div> ');$templateCache.put("/us/static/views/vehicles.html","<div nav-secondary-content type=\"vehicle\" url='{{urlCategory}}' path='/templatedata/global/l2_navigation/data/en/l2-navigation_vehicles_grid'></div> <div vehicle-grid target=\"vehicles\"></div>")}]);angular.module("app").directive("kiosk",["$log","$location","safeApply","kioskService",function($log,$location,safeApply,kioskService){var link;link=function(scope,element,attrs,controller){function init(){$window.on("contextmenu",function(){return!1});$("body").css({"-webkit-user-select":"none","-webkit-touch-callout":"none"});kioskService.kioskMode="kiosk"===window.mode?!0:!1;var path=$location.search();kioskService.kioskZipCode=path.kioskZipCode;kioskService.kioskEventId=path.kioskEventId;kioskService.kioskLocation=void 0===kioskService.kioskEventId||""===kioskService.kioskEventId?"dealer":"event";var isTouchSupported="ontouchstart"in window,startEvent=isTouchSupported?"touchstart":"mousedown";$window.on(startEvent,function(){window.parent.postMessage("kiosk","*")})}var $window=$(window);init()};return{link:link,restrict:"A"}}]);angular.bootstrap(document.documentElement,["app"]);