//tealium universal tag - utag.30 ut4.0.201706090100, Copyright 2017 Tealium.com Inc. All Rights Reserved.
try{(function(id,loader){var u={};utag.o[loader].sender[id]=u;if(utag===undefined){utag={};}if(utag.ut===undefined){utag.ut={};}if(utag.ut.loader===undefined){u.loader=function(o){var a,b,c,l;a=document;if(o.type==="iframe"){b=a.createElement("iframe");b.setAttribute("height","1");b.setAttribute("width","1");b.setAttribute("style","display:none");b.setAttribute("src",o.src);}else if(o.type==="img"){utag.DB("Attach img: "+o.src);b=new Image();b.src=o.src;return;}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";b.src=o.src;}if(o.id){b.id=o.id;}if(typeof o.cb==="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb();},false);}else{b.onreadystatechange=function(){if(this.readyState==="complete"||this.readyState==="loaded"){this.onreadystatechange=null;o.cb();}};}}l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l==="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b);}}};}else{u.loader=utag.ut.loader;}
u.ev={'view':1};u.initialized=false;u.map={};u.extend=[function(a,b){(function(){var type=(function(global){var cache={};return function(obj){var key;return obj===null?'null':obj===global?'global':(key=typeof obj)!=='object'?key:obj.nodeType?'object':cache[key=({}).toString.call(obj)]||(cache[key]=key.slice(8,-1).toLowerCase());};}(this));resolveObject=function resolve(path,obj){return[obj]
.concat(path.split('.'))
.reduce(function(prevObj,currKey){return prevObj[currKey];})};if(!Array.isArray){Array.isArray=function(arg){return Object.prototype.toString.call(arg)==='[object Array]';};}
window.boa=window.boa||{};window.boa.chat=function(){var TC={"config":{"version":"1.20.0","languages":{"default":"en-us","map":{"en-us":["en-us","en","english","ingles"],"es-us":["es-us","es","spanish","espanol"]}},"json":window.tcData,"site":null,"targets":{"base":"tc-chat-container-","map":{"Preferred":"1","Consumer-Standard":"2","Consumer-ContactUs":"3","WMCS-ContactUs":"4","Preferred-ContactUs":"5","SB-Fixed11":"18","SB-Fixed12Footer":"19","SB-Fixed13":"20","SB-Fixed14":"21","SB-Fixed15":"22","ContactUs-Unauth":"23","Consumer-OAS":"24","Consumer-Chatonlinenow":"25","Consumer-ModuleSales":"26","Consumer-OASDep":"27","Consumer-OASDep2":"28","Consumer-OASDep3":"29","Consumer-OASHL":"30","ATMClaims":"31","App-Fixed1":"48","App-Fixed2":"49","App-Fixed4":"51"},"current":[]}},"defaultImages":{"/pa/components/modules/live-person-bdf-module/2.6/graphic/chat-unavailable-for-topic.png":{"text":"Sorry, chat is unavailable for this topic.","targets":["Consumer-ContactUs","WMCS-ContactUs","Preferred-ContactUs"]}},"translate":{"map":{"ACCOUNT_TYPE":"account_type","APPLICATION":"pageID()","AUTHENTICATED":"authenticated()","BOA_ASSOCIATE":"boa_associate","BOA_RETIREE":"boa_retiree","CANCELREASON":"cancel_reason","CAT":"categories()","COMPANY_NAME":"company_name","CONVERSION_STAGE":"conversion_stage","CUSTOMER_LOB":"customer_lob","CUSTOMER_SEGMENT":"customer_segment","DATA":"data","ENTITLEMENT_CODE":"entitlement_code","ERROR_COUNT":"error_count","FIRST_LOGIN":"first_login","FIRSTNAME":"firstName()","inqClientOrderNum":"inqClientOrderNum()","inqOrderType":"inqOrderType()","inqOtherInfo":"inqOtherInfo()","inqSalesPrices":"inqSalesPrices()","inqSalesProducts":"inqSalesProducts()","inqSalesProductTypes":"inqSalesProductTypes()","inqSalesQuantities":"inqSalesQuantities()","inqSiteID":"siteId()","LANGUAGE":"language()","LASTNAME":"lastName()","NAM":"productName()","ONLINE_ID":"OID()","OFR":"firstOfferId()","OFFER_CODE":"firstOfferCode()","PAGE_TYPE":"PageType","PAGE_LOADTIME":"page_loadtime","PREFERRED_REWARDS_TIER":"preferredRewardsTier()","PREQUALIFICATION":"pageID()","PRODUCT_DISPLAY":"productName()","PRODUCT_TYPE":"Product_type","PRODUCT_VIEW":"productName()","PRODUCTSELECTION_PURCHASEFLOW":"pageID()","REFERRAL_CAMPAIGN":"referral_campaign","STATE":"state()","SUB_SECTION":"Sub_Section","TIMEZONE":"timezone","TOOL_INTERNALSEARCHQUERY":"searchQuery()","TOOL_INTERNALSEARCHRESULT":"searchResult()","TOPIC_SELECTION":"topic_selection"},"required":["CUSTOMER_LOB","ACCOUNT_TYPE"],"fn":{siteId:function(data){window.inqSiteID=data.page.attributes.chat.site_id||this.config.site;return window.inqSiteID;},language:function(data){var language=(data.page&&data.page.pageInfo&&Array.isArray(data.page.pageInfo)&&data.page.pageInfo.length>0)?data.page.pageInfo[0].language:"";if(language===""&&typeof fsdNavClientOptions!=='undefined'&&fsdNavClientOptions){language=fsdNavClientOptions.locale;}
return language;},OID:function(data){return data.user?data.user.online_id:"";},authenticated:function(data){return data.user.authenticated?data.user.authenticated:false;},buildName:function(data,filter){var firstName="",lastName="",fullName="";if(data.user&&data.user.name){firstName=data.user.name.first||"";lastName=data.user.name.last||"";fullName=data.user.name.full||"";}
switch(filter){case"first":if(firstName===""&&lastName===""){return fullName;}else{return firstName;}
break;case"last":return lastName;break;default:return fullName;break;}},firstName:function(data){return this.translate.fn.buildName(data,"first");},lastName:function(data){return this.translate.fn.buildName(data,"last");},firstOffer:function(data,type){if(data.user&&data.user.offers&&data.user.offers.length>0){for(var offerid in data.user.offers[0]){switch(type){case"id":return offerid;break;case"code":return data.user.offers[0][offerid];break;}}}else{return"";}},firstOfferId:function(data){return this.translate.fn.firstOffer(data,"id");},firstOfferCode:function(data){return this.translate.fn.firstOffer(data,"code");},state:function(data){return data.user?data.user.state:"";},productName:function(data){if(!data.product||!Array.isArray(data.product))return'';var productNames=[];for(var i=0;i<data.product.length;i++){productNames.push(data.product[i].productInfo.productName);}
return productNames.join(',');},categories:function(data){if(!data.product||!Array.isArray(data.product))return'';var categories=[];for(var i=0;i<data.product.length;i++){categories.push(data.product[i].category.primaryCategory);}
return categories.join(',');},inqClientOrderNum:function(data){var value=data.page.attributes.chat.inqClientOrderNum;if(value){if(Array.isArray(value)&&value.length===0)return'';if(typeof value==='object'&&Object.keys(value).length===0&&value.constructor===Object)return'';if(typeof value==='string'&&value==='[]')return'';window.inqClientOrderNum=value;return value;}
return data.cart&&data.cart.fulfilmentID?data.cart.fulfilmentID:'';},inqOrderType:function(data){var value=data.page.attributes.chat.inqOrderType;if(value){if(Array.isArray(value)&&value.length===0)return'';if(typeof value==='object'&&Object.keys(value).length===0&&value.constructor===Object)return'';if(typeof value==='string'&&value==='[]')return'';window.inqOrderType=value;return value;}
return'';},inqOtherInfo:function(data){var value=data.page.attributes.chat.inqOtherInfo;if(value){if(Array.isArray(value)&&value.length===0)return'';if(typeof value==='object'&&Object.keys(value).length===0&&value.constructor===Object)return'';if(typeof value==='string'&&value==='[]')return'';window.inqOtherInfo=value;return value;}
return'';},inqSalesPrices:function(data){var value=data.page.attributes.chat.inqSalesPrices;if(value){if(Array.isArray(value)&&value.length===0)return'';if(typeof value==='object'&&Object.keys(value).length===0&&value.constructor===Object)return'';if(typeof value==='string'&&value==='[]')return'';if(!Array.isArray(value))value=[value];window.inqSalesPrices=value;return value;}
return'';},inqSalesProducts:function(data){var value=data.page.attributes.chat.inqSalesProducts;if(value){if(Array.isArray(value)&&value.length===0)return'';if(typeof value==='object'&&Object.keys(value).length===0&&value.constructor===Object)return'';if(typeof value==='string'&&value==='[]')return'';if(!Array.isArray(value))value=[value];window.inqSalesProducts=value;return value;}
return'';},inqSalesProductTypes:function(data){var value=data.page.attributes.chat.inqSalesProductTypes;if(value){if(Array.isArray(value)&&value.length===0)return'';if(typeof value==='object'&&Object.keys(value).length===0&&value.constructor===Object)return'';if(typeof value==='string'&&value==='[]')return'';if(!Array.isArray(value))value=[value];window.inqSalesProductTypes=value;return value;}
return'';},inqSalesQuantities:function(data){var value=data.page.attributes.chat.inqSalesQuantities;if(value){if(Array.isArray(value)&&value.length===0)return'';if(typeof value==='object'&&Object.keys(value).length===0&&value.constructor===Object)return'';if(typeof value==='string'&&value==='[]')return'';if(!Array.isArray(value))value=[value];window.inqSalesQuantities=value;return value;}
return'';},fulfillmentID:function(data){return data.cart&&data.cart.fulfilmentID?data.cart.fulfilmentID:"";},preferredRewardsTier:function(data){return data.user&&data.user.preferred_rewards_tier?data.user.preferred_rewards_tier:"";},pageID:function(data){return(data.page&&data.page.pageInfo&&Array.isArray(data.page.pageInfo)&&data.page.pageInfo.length>0)?data.page.pageInfo[0].pageID:"";},searchQuery:function(data){return data.page&&data.page.attributes?data.page.attributes.searchString:"";},searchResult:function(data){return data.page&&data.page.attributes?data.page.attributes.searchResults:"";}}},sanitize:function(key,value){value=value||'';switch(key){case"CUSTOMER_LOB":return value.toLowerCase().replace(/-/i,"");break;case"LANGUAGE":value=value.toLowerCase().replace(/_/gi,"-");for(var lang in TC.config.languages.map){if(TC.config.languages.map[lang].indexOf(value)>-1){return lang;}}
return TC.config.languages.default;break;default:return value;break;}},dump:function(type){var formatJSON=function(json){if(JSON&&JSON.stringify){return JSON.stringify(json,null,'\t');}else{return json;}},notabene=(typeof window.console!="undefined"&&typeof window.console.info=="function")?function(){window.console.info.apply(window.console,arguments);}:function(message){window.alert(message);},line="-----------------------",title="<<-- TouchCommerce {{SECTION}} Info -->>".toUpperCase(),dump=[],dumpContent=function(contentType,checkFunction){dump.push(title.replace("{{SECTION}}",contentType.toUpperCase()));checkFunction.call(this);},check={containers:function(){var n=document.getElementsByTagName("*");if(n.length){dump.push("Button Containers:");for(i=0;i<n.length;i++){n[i].id.match(/tc-chat-(container|anchored)(-\d|)/)&&dump.push("* "+n[i].id);}}else{dump.push("Button Containers: None");}},framework:function(){if("undefined"==typeof inqFrame||"undefined"==typeof Inq){dump.push("TC code inactive.");}else if("undefined"!=typeof inqFrame){dump.push("TC Framework loaded.")
if(!inqFrame.Inq.LDM.initialized){dump.push("First party cookies failed.");}
var o,g,m=[];if("undefined"==typeof inqFrame.Inq.LDM){dump.push("Unable to check content groups and page info.");}else{if(inqFrame.Inq.LDM.contentGroups.length){dump.push("Content Groups:");for(var h in inqFrame.Inq.LDM.contentGroups){inqFrame.Inq.LDM.checkCG(h)&&dump.push(h);}}else{dump.push("Content Groups: None");}
inqFrame.Inq.LDM.pageFound?(o=inqFrame.Inq.LDM.getPageID(),g=inqFrame.Inq.LDM.getPageMarker(),m=inqFrame.Inq.LDM.getPage().re):(o="N/A",g="N/A",m="N/A");dump.push("Page ID: "+o+"\nPage Marker: "+g+"\nURL Pattern: "+m);}}},rules:function(){if(typeof inqFrame.Inq.CHM=="undefined"){dump.push("Unable to check rule");}else{if(typeof inqFrame.Inq.CHM.getChat()!="undefined"&&inqFrame.Inq.CHM.getChat()!=null){dump.push("Current Rule: "+inqFrame.Inq.CHM.chat.rule.name);}else if(typeof inqFrame.Inq.CHM.getLastChat()!="undefined"&&typeof inqFrame.Inq.CHM.getLastChat().id!="undefined"){var lastChatData=inqFrame.Inq.CHM.getLastChat(),lastRuleData=inqFrame.Inq.BRM.getRuleById(lastChatData.brID);dump.push("Previous Rule: "+lastRuleData.name);}else{dump.push("No rules triggered yet");}}},fourStep:function(){var hostedFile=v3Lander?window.location.origin+v3Lander.hostedFileURL:"[unknown]",currentPage=window.location.href,divButton=TC.config.targets.current.length==0?"No buttons on this page.":TC.config.targets.current.join(";")+"\n";dump.push("1] Hosted file: "+hostedFile);dump.push("2] Current page: "+currentPage);dump.push("3] Button DIV ID: "+divButton);dump.push("4] tcData object: "+formatJSON(TC.config.json));},browser:function(){dump.push(window.navigator?window.navigator.userAgent:"No browser information available.")}};if(type&&check[type]){dumpContent.call(this,type,check[type])}else{for(var fn in check){var i=Object.keys(check).indexOf(fn);dump.push(i>0?line:"");dumpContent.call(this,fn,check[fn]);}}
for(var i=0;i<dump.length;i++){notabene(dump[i]);}},close:function(){try{window.Inq.closeChat();}catch(e){_debug({"closeChat/error":e.message});}},exists:function(){return window.Inq?true:false;},translateData:function(data){try{if(typeof TC.config.json!=="object"){window.tcData={};TC.config.json=window.tcData;}
var chatMap="",item="",chatData=resolveObject("page.attributes.chat",data,true),chatMap,chatMapValue,chatMapIsFunction,bactm_validateValue=function(value){var isEmptyObject=function(obj){if(typeof obj==="object"){for(var prop in obj){if(obj.hasOwnProperty(prop))
return false;}
return true;}else{return false;}},isEmptyArray=function(arr){return(Array.isArray(arr)&&arr.length===0);},empty=(value===""||value===null||typeof value==="undefined"||isEmptyObject(value)||isEmptyArray(value));return!empty?true:false;};_debug({"translateData/chatData":chatData});for(item in TC.translate.map){chatMap=TC.translate.map[item];chatMapIsFunction=chatMap.indexOf("()")>-1?true:false;chatMapValue=!chatMapIsFunction?chatData[chatMap]:TC.translate.fn[chatMap.replace("()","")].call(this,data);chatMapValue=TC.sanitize(item,chatMapValue);if(bactm_validateValue(chatMapValue)||TC.translate.required.indexOf(item)>-1){TC.config.json[item]=chatMapValue;}else{delete(TC.config.json[item]);}
}}catch(e){_debug({"translateData/error":e.message});}},translateTargets:function(data){var chatData=resolveObject?resolveObject("page.attributes.chat",data,true):{},targets=chatData&&chatData.target?chatData.target:[],target=null,currentTarget="",mapping=2;targets=Array.isArray(targets)?targets:[targets];_debug({"translateTargets/targets":targets});for(var i=0;i<targets.length;i++){for(var key in targets[i]){target=document.getElementById(key);if(target){mapping=TC.config.targets.map?TC.config.targets.map[targets[i][key]]:2;currentTarget=TC.config.targets.base+(mapping?mapping:2);TC.config.targets.current.push(currentTarget);target.setAttribute("id",currentTarget);}}}},injectDefaultImages:function(targetMap){var text="",targets=[],target,$target
defaultClass="tc-default-image",defaultDelay=7000,old=document.getElementsByClassName(defaultClass);for(var i=0;i<old.length;i++){old[i].parentNode.removeChild(old[i]);}
for(var image in TC.defaultImages){text=TC.defaultImages[image].text;targets=TC.defaultImages[image].targets;for(var i=0;i<targets.length;i++){target=TC.config.targets.base+TC.config.targets.map[targets[i]];$target=document.getElementById(target);if($target!==null){var img=document.createElement("img");img.setAttribute("src",image);img.setAttribute("alt",text);img.setAttribute("class",defaultClass);img.setAttribute("style","opacity: 0;");$target.appendChild(img);setTimeout(function(){img.setAttribute("style","opacity: 1; transition: opacity 1s ease;");},defaultDelay);}}}}},_debug=function(state){var base='boa.chat';if(window.bactm_envSelector!=="prod"&&window.console&&window.console.info){switch(typeof state){case"object":for(var s in state){console.info(base+"/"+s," :: ",state[s]);}
break;case"string":console.info(base," :: ",state);break;}}},_log=function(event){_debug({"log: ":event});var bactm_Event=null,bactm_EventName="";for(var e in event){if(e==="customerInteraction"&&event[e]==="onCustomerMsg"){bactm_EventName="bactm-tc-chat-interaction";try{var announcement=new Event(bactm_EventName);}catch(e){var announcement=document.createEvent('Event');announcement.initEvent(bactm_EventName,true,true);}
window.dispatchEvent(announcement);}}},_reporting={getDomain:function(isProduction){var server="//secure.bankofamerica.com",fallbackLLE="secure-cert1.ecnp",current=window.location&&window.location.host?window.location.host:"",regexLLE=/(.*\.ecnp).bankofamerica.com/g,matchLLE=regexLLE.exec(current);switch(true){case isProduction:break;case(matchLLE&&matchLLE.length>1):server=server.replace("secure",matchLLE[1].replace("www","secure"));break;case(!isProduction):server=server.replace("secure",fallbackLLE);break;}
return server;},getOffer:function(rule){var campaign=null,offer=null,offerCheck=null,offerRegEx=/-Offer(.*)-/g,campaignRegEx=/-EmailCampaign-/g;if(!!rule&&!offer){offerCheck=offerRegEx.exec(rule);if(offerCheck&&offerCheck.length>1){offer=offerCheck[1];}}
if(!!rule&&!offer){campaign=_getQueryStringParam("cm_mmc");offerCheck=campaignRegEx.exec(rule);if(offerCheck&&offerCheck.length>1&&campaign&&window.tcData.ENTITLEMENT_CODE==="o"){offer=campaign;}}
if(!!offer&&TC.config.json.OFFER_CODE===offer){offer=TC.config.json.OFR;}else{offer=null;}
return offer;},report:function(type,message){var host=_reporting.getDomain(window.bactm_envSelector!=="notprod"),reportURL="/myaccounts/reporter.go",offerURL="/myaccounts/offers/updateTcChatStatus.go",url="",params="";try{var http=new XMLHttpRequest();switch(type){case"offer":url=offerURL;params=(window.tcData&&window.tcData.DATA)?"data="+window.tcData.DATA:"";for(var m in message){params+="&"+message[m];}
break;default:url=reportURL;params=window.tcData?"tcData="+JSON.stringify(window.tcData):"";for(var m in message){params+="&event="+m+"&"+message[m];}
break;}
http.open("GET",host+url+"?"+params,true);http.onreadystatechange=function(){if(http.readyState==4&&http.status==200){_debug({"report/sent":http.responseText+"&"+params});}}
http.send(null);}catch(e){_debug({"report/error":params});}},businessRule:"",onChatLaunched:function(evt){_reporting.businessRule=(evt&&evt.bizRuleName)?evt.bizRuleName:_reporting.businessRule;_setSession("chatBusinessRule",_reporting.businessRule);var offer=_reporting.getOffer(_reporting.businessRule);if(offer){_setSession("chatOfferExtended",true);_reporting.report("offer",{"offerPresented":"reasonCode=LP&offerStatus=chat_invite_presented&offerID="+offer});}},onAgentAssigned:function(evt){var bizRule=_getSession("chatBusinessRule");_reporting.businessRule=bizRule?bizRule:_reporting.businessRule;_reporting.businessRule=(evt&&evt.bizRuleName)?evt.bizRuleName:_reporting.businessRule;var offer=_reporting.getOffer(_reporting.businessRule);if(offer){_setSession("chatAgentEngaged","true");_reporting.report("offer",{"offerAccepted":"reasonCode=LP&offerStatus=interested&offerID="+offer});}
var chatID=(evt&&evt.chatID)?evt.chatID:"",customerID=(evt&&evt.customerID)?evt.customerID:"",agentID=(evt&&evt.agentID)?evt.agentID:"";_reporting.report("interaction",{"chatOpened":"channel=chat&chatID="+chatID+"&customerID="+customerID+"&agentID="+agentID});},onChatClosed:function(evt){var bizRule=_getSession("chatBusinessRule");_reporting.businessRule=bizRule?bizRule:_reporting.businessRule;_reporting.businessRule=(evt&&evt.bizRuleName)?evt.bizRuleName:_reporting.businessRule;var offer=_reporting.getOffer(_reporting.businessRule);if(offer&&(_getSession("chatAgentEngaged")!=="true")){_reporting.report("offer",{"offerRejected":"reasonCode=LD&offerStatus=undecided&offerID="+offer});}
_setSession("chatOfferExtended",null);_setSession("chatBusinessRule",null);_reporting.businessRule="";var chatID=(evt&&evt.chatID)?evt.chatID:"",customerID=(evt&&evt.customerID)?evt.customerID:"",agentID=(evt&&evt.agentID)?evt.agentID:"";_reporting.report("interaction",{"chatClosed":"channel=chat&chatID="+chatID+"&customerID="+customerID+"&agentID="+agentID});},setup:function(question){switch(question){case"chatInteractions":var agentListener={onAgentAssigned:_reporting.onAgentAssigned},chatLaunchedListener={"onChatLaunched":_reporting.onChatLaunched},chatClosedListener={"onChatClosed":_reporting.onChatClosed};window.InqRegistry={chatListeners:[chatLaunchedListener,chatClosedListener]};break;case"vendorLoaded":var remaining=10000,interval=500,diffusion=1000,status={"error":"channel=chat&status=Vendor not loaded after 10 seconds."},checkExists=function(){if(TC.exists()){clearInterval(timer);return;}else{if(remaining<=0){clearInterval(timer);var random=Math.ceil(Math.random()*diffusion);if(random===diffusion){_reporting.report("error",status);}}
remaining-=interval;}},timer=setInterval(checkExists,interval);break;}}},_prepareData=function(callback){var processData=function(){if(type(window.digitalData)==="object"){TC.translateData(window.digitalData);TC.translateTargets(window.digitalData);TC.injectDefaultImages();}
_debug({"DATA PREPARATION COMPLETE":TC.config.json});return type(callback)==="function"?callback():true;};setTimeout(processData,1);},_ready=function(){_reporting.setup("chatInteractions");window.v3Lander.start();},_start=function(){_debug("INITIALIZING (version "+TC.config.version+")");_prepareData(_ready);},_initialize=function(){var inOLB=window&&typeof window.fsdNavClientOptions==="object"?true:false;if(inOLB){var inCoreOLB=inOLB&&window.fsdNavClientOptions.clientBorneo?true:false,chatVendorSet=inOLB&&typeof window.fsdNavClientOptions.chatVendor==="string",chatVendor=chatVendorSet?window.fsdNavClientOptions.chatVendor:"TouchCommerce";switch(true){case(chatVendor!=="TouchCommerce"):_debug("TouchCommerce disabled here.");return false;break;case(!inCoreOLB&&!chatVendorSet):_debug("Will not load TouchCommerce Chat for third-party OLB subdomains.");return false;break;}}
if(typeof digitalData==="object"){if(!window.v3Lander||window.v3Lander===null||typeof window.v3Lander.start!=='function'){window.addEventListener('bactm-tc-chat-libload',function(){_start();});}else{_start();}}},_reload=function(){_debug("RELOADING");_prepareData();if(window.Inq&&window.Inq.reinitChat){window.Inq.reinitChat(TC.config.site,TC.config.json);}},_getSession=function(variable){return _session("get",variable);},_setSession=function(variable,value){if(value===null){return _session("delete",variable);}else{return _session("set",variable,value);}},_session=function(type,variable,value){if(window.sessionStorage){switch(type){case"set":return window.sessionStorage.setItem(variable,value);break;case"get":return window.sessionStorage.getItem(variable);break;case"delete":return window.sessionStorage.removeItem(variable);break;}}},_getQueryStringParam=function(field,url){var href=url?url:window.location.href;var reg=new RegExp('[?&]'+field+'=([^&#]*)','i');var string=reg.exec(href);return string?string[1]:null;};return{init:_initialize,reload:_reload,dump:TC.dump,log:_log,close:TC.close,vendor:{events:{agentAssigned:_reporting.onAgentAssigned.bind(_reporting),chatLaunched:_reporting.onChatLaunched.bind(_reporting),chatClosed:_reporting.onChatClosed.bind(_reporting)}}};}();window.boa.chat.init();})();},function(a,b){window.boa=window.boa||{};window.boa.tc=function(){window.env=window.bactm_envSelector||window.bactm_chatEnv||'notprod';window.tmProfile=('undefined'!==typeof window.utag_data&&'undefined'!==typeof utag_data['ut.profile'])?utag_data['ut.profile']:'main';var hostToPath=[{'domain':'WWW.BANKCARDSERVICES.CO.UK','hostedFileDirectory':'/NASApp/NetAccessXX'},{'domain':'OLUI2JCADP.FS.ML.COM','hostedFileDirectory':'/sve/pages'},{'domain':'WWW.MERRILLEDGE.COM','hostedFileDirectory':'/m/system'},{'domain':'WWW.BENEFITS.ML.COM','hostedFileDirectory':'/cdn/chat'},{'domain':'BANKCARDSERVICES-CO-UK.POD1.AZ.ECOMM.BANKOFAMERICA.COM','hostedFileDirectory':'/NASApp/NetAccessXX'},{'domain':'WWW.ML.COM','hostedFileDirectory':'/chat'},{'domain':'WWW25.BENEFITS.ML.COM','hostedFileDirectory':'/cdn/chat'},{'domain':'OLUI2.FS.ML.COM','hostedFileDirectory':'/sve/pages'},{'domain':'WWW.BANKOFAMERICA.COM','hostedFileDirectory':'/pa/global-assets/external/touch-commerce'},{'domain':'OLUI1.FS.ML.COM','hostedFileDirectory':'/sve/pages'},{'domain':'BBANKCARDSERVICES-CO-UK.POD2.AZ.ECOMM.BANKOFAMERICA.COM','hostedFileDirectory':'/NASApp/NetAccessXX'},{'domain':'SECURE.BANKOFAMERICA.COM','hostedFileDirectory':'/pa/global-assets/external/touch-commerce'},{'domain':'WWW26.BENEFITS.ML.COM','hostedFileDirectory':'/cdn/chat'},{'domain':'EREQUEST.BANKOFAMERICA.COM','hostedFileDirectory':'/AribaBuyer/BoAInternal'},{'domain':'PROMO.BANKOFAMERICA.COM','hostedFileDirectory':'/utils/chat'},{'domain':'EES.BANKOFAMERICA.COM','hostedFileDirectory':'/html/chat'}];var config={"defaultHostToPath":'/tc-chat-bac.html',"hostedFileURL":'/tc-chat-bac.html',"vanityDomain":env==='prod'?'https://bofa.inq.com':'https://bofa-test.inq.com',"cdnDomain":env==='prod'?'https://media-bofa.inq.com':'https://mediav3-test.inq.com',"iframeSrcParams":"&env="+env+"&tmProfile="+tmProfile,"hostToPath":hostToPath,"customLaunching":true};return{config:config};}();window.v3LanderConfig=window.v3LanderConfig||window.boa.tc.config;if(navigator.userAgent.indexOf("MSIE 6")>=0||(navigator.userAgent.indexOf("MSIE 7")>=0&&navigator.userAgent.indexOf("Trident")==-1&&navigator.userAgent.toLowerCase().indexOf("media center")==-1)){}
else if(window["v3Lander"]==null){if(typeof window.v3LanderConfig!="object"){window.v3LanderConfig={};}
window.v3Lander={codeVersion:'1470848111488',v3Frame:false,domState:"defer-failed",domReady:false,normalizeProtocol:function(url){return url.replace(/^HTTPS?:/i,window.parent.location.protocol);},hostToPath:{},defaultHostToPath:window.v3LanderConfig.defaultHostToPath||"/tc-chat-bac.html",hostedFileURL:window.v3LanderConfig.hostedFileURL||"/tc-chat-bac.html",isAtHostedFileURL:false,log:function(s){if(typeof console!="undefined"&&console.log){console.log(s);}},FMProxy:{fcns:{},addFcn:function(name,fcnStr){var obj=null;try{obj=eval("({'"+name+"':"+fcnStr+"})");}
catch(err){throw"function eval failed. err="+err.toString();}
this.fcns[name]=obj[name];},getFcn:function(name){return this.fcns[name];},removeFcn:function(name){if(!!this.fcns[name]){delete this.fcns[name];return true;}
return false;}},_getHostedFileURL:function(domain){if(!domain)domain=window.location.host;domain=domain.toUpperCase();if(!v3Lander.hostToPath){return v3Lander.hostedFileURL;}
var url=null;try{url=v3Lander.hostToPath[domain];}catch(e){}
if(!url)
return v3Lander.hostedFileURL=this.defaultHostToPath;return url;},getHostedFileURL:function(domain){var url=this._getHostedFileURL(domain);if(url.indexOf("//")!=0){url="//"+domain+url;}
url=window.location.protocol+url;return url;},establishHostedFileURL:function(){if(window.v3LanderConfig.hostToPath){for(var i=0,paths=window.v3LanderConfig.hostToPath;i<paths.length;i++){v3Lander.hostToPath[paths[i].domain]=paths[i].hostedFileDirectory+v3Lander.hostedFileURL;}}
if(v3Lander.hostToPath){try{var url=v3Lander.hostToPath[window.location.host.toUpperCase()];}catch(e){}
v3Lander.hostedFileURL=url||this.defaultHostToPath||v3Lander.hostedFileURL;}},assignDomain:function(){try{if(this.isAtHostedFileURL){var domainName=document.domain;var temp=domainName.split('.');for(var i=0;i<temp.length;i++){try{var tempwindow=null;if(window.location.search=="")
tempwindow=window.opener;else if(window.location.search.indexOf('?IFRAME')==0||window.location.search=="?IEXF")
tempwindow=window.parent;else if(window.location.search=="?BLNK")
tempwindow=window.parent;else if(window.location.search=="?XHR")
tempwindow=window.parent.parent;else if(window.location.search=="?PRXY")
tempwindow=window.parent.parent;else return;if(document.domain==tempwindow.document.domain){break;}else{temp.shift();document.domain=temp.join('.');}}
catch(ee){temp.shift();document.domain=temp.join('.');}}}}catch(e){}},embeddedHostedFile:null,embeddedDiv:null,c2cQueryData:null,registerDivRetry:0,resizeAnscestorIframe:function(){var items=name.split("||");var iframeName=items[1];var width=items[2];var height=items[3];var iframeElements=parent.parent.document.getElementsByName(iframeName);if(iframeElements.length>0){try{var iframe=iframeElements[0];iframe.style.cssText+=";"+"width: "+width+"px;"+
"height: "+height+"px;"+
"display: block;"+
"overflow: hidden;"+
"overflow-x: hidden;"+
"overflow-y: hidden;"+
"border-style: hidden;"+
"border-style: none;"+
"border-width: 0px;";}catch(e){}}},registerDiv:function(retryCount){if(!!retryCount)
v3Lander.registerDivRetry=retryCount;try{if(top["Inq"]==null)throw(new Error("Inq not ready"));if(top.Inq["fireCustomEvent"]==null)throw(new Error("fireCustomEvent not ready"));top.Inq.fireCustomEvent("IframeC2C",{div:v3Lander.embeddedDiv,queryData:v3Lander.c2cQueryData});}catch(e){if(--(v3Lander.registerDivRetry)>0)
window.setTimeout(v3Lander.registerDiv,500);}},resizeIframe:function(width,height){var winName=!!window.name?window.name.replace(/\n|<.*?>/g,"").replace(/\"/g,'\\\''):window.name;var name="RESIZE||"+winName+"||"+width+"||"+height;var div=document.createElement("div");div.innerHTML='<ifr'+'ame id="inqChatStage" name="'+name+'" src="'+this.embeddedHostedFile+'?RSC2C"'
+' style="z-index:9999999;overflow:hidden;position:absolute;height:1px;width:1px;left:0px;top:0px;border-style: none;border-width: 0px;display: none;"'
+' scrolling="NO"'
+' frameborder=0'
+'></ifr'+'ame>';var ifrm=div.firstChild;document.body.appendChild(ifrm);},setSource:function(attributes,domain){v3Lander.embeddedHostedFile=v3Lander.getHostedFileURL(domain);v3Lander.embeddedDiv.innerHTML="";var image=new Image();image.onload=function(e){v3Lander.resizeIframe(this.width,this.height);return false;};for(attr in attributes){image.setAttribute(attr,attributes[attr]);}
if(!!image.onclick){try{if(!!image.style["cursor"])image.style.cursor="pointer";else image.style.cssText+=";cursor: pointer;cursor: hand;";}catch(e){};var fun=""+image.onclick;if(fun.indexOf("function")!=0){var funInner=image.onclick;image.onclick=new Function(funInner);}}
v3Lander.embeddedDiv.appendChild(image);},fixV3IFrames:function(div){var inqFrames=div.getElementsByTagName("IFRAME");div.style.cssText="overflow:hidden;position:absolute;height:1px;width:1px;left:0px;top:0px;"
+"border-style: none;border-width: 0px;";for(var ix=0;ix<inqFrames.length;ix++)
{inqFrame=inqFrames[ix];inqFrame.allowTransparency="true";inqFrame.border="0";inqFrame.frameBorder="no";inqFrame.frameSpacing=0;inqFrame.marginWidth=0;inqFrame.style.cssText="z-index:9999999;overflow:hidden;position:absolute;left:0px;top:0px;width:1px;height:1px;border-style: none;border-width: 0px;BACKGROUND-COLOR: Transparent;";}},prepareBeforeUnloadForEH:function(){if(!inqFrame.Inq.EC.isInitialized()){window.onbeforeunload=function(evt){inqFrame.Inq.EH.fireBeforeUnloadEvent();}}},prepareBeforeUnload:function(atxt,ctxt,cancelFcn,showImage,imageElement){window.onbeforeunload=function(evt){if(inqFrame.Inq.EH.isInitialized()){inqFrame.Inq.EH.fireBeforeUnloadEvent();}
if(inqFrame.Inq.EC.update()){if(showImage){var positionX=(window.innerWidth-imageElement.width)/2;var positionY=(window.innerHeight-imageElement.height)/2;var style=inqFrame.frameElement.style;style["display"]="block";style["z-index"]="9999999";style["overflow"]="hidden";style["position"]="absolute";style["height"]=imageElement.height+"px";style["width"]=imageElement.width+"px";style["left"]=positionX+"px";style["top"]=positionY+"px";style["border-style"]="none";style["border-width"]="0px";inqFrame.Inq.CHM.isImagePosition=true;}
inqFrame.Inq.EC.fireBeforeExitConfirmationEvent();if(atxt&&navigator.userAgent.indexOf("Firefox")<0){alert(atxt);}
window.onbeforeunload=null;setTimeout(cancelFcn,200);return String(ctxt);}};},initV3Frame:function(){if(window.frameElement)
window.clientwin=window.parent;else if(window.opener)
window.clientwin=window.opener;if(window.clientwin)
window.clientwin.inqFrame=window;window.inqFrame=window;window.name=opener?"_inqPersistentChat":"inqV3";this.insertLandingTag();},reload:function(){this.domReady=false;self.setTimeout("v3Lander._reload()",50);},_reload:function(){var chatStage=document.getElementById("inqChatStage");var corner=document.getElementById("inqDivResizeCorner");var title=document.getElementById("inqTitleBar");if(chatStage){document.body.removeChild(chatStage);}
if(corner){document.body.removeChild(corner);}
if(title){document.body.removeChild(title);}
window.inqFrame=null;window.Inq=null;this.start();},createV3Frame:function(){var div=document.createElement("div");var port=(document.location.port=="")?"":(":"+document.location.port);var iframesrc=((v3Lander.hostedFileURL).indexOf("/")==0)?document.location.protocol+'//'+document.location.hostname+port+v3Lander.hostedFileURL
+'?IFRAME'+(window.v3LanderConfig.iframeSrcParams||""):v3Lander.hostedFileURL;if(top!=parent){var rand=(Math.round(Math.random()*1000000000000)).toString(36);iframesrc+=(iframesrc.indexOf('?')==-1)?'?':'&';iframesrc+="rand="+rand;}
div.id="inqChatStage";div.style.cssText="z-index:9999999;overflow:hidden;position:absolute;height:1px;width:1px;left:0px;top:0px;"
+"border-style: none;border-width: 0px;";div.innerHTML='<ifr'+'ame id="inqChatStage" title="Chat Window" name="10004750" src="'+iframesrc+'"'
+' style="z-index:9999999;overflow:hidden;position:absolute;height:1px;width:1px;left:0px;top:0px;border-style: none;border-width: 0px;display: none;"'
+' scrolling="NO"'
+' frameborder=0'
+'></iframe>'
+'<div style="border-width: 0px; position: absolute; z-index: 9999999; left: 0px; top: 0px; cursor: move; height: 55px; width: 410px; display: none;" id="inqTitleBar">'
+'<img />'
+'</div>'
+'<div style="border-width: 0px; position: absolute; z-index: 9999999; left: 0px; top: 0px; display:none; height: 0px; width: 0px;" id="inqResizeBox">'
+'<div style="border-width: 0px; position: absolute; z-index: 9999999; left: 424px; top: 284px; cursor: se-resize; height: 16px; width: 16px; display: none;" id="inqDivResizeCorner"></div>';var bdy=document.getElementsByTagName("BODY");if(bdy&&bdy[0]){var iframes=div.getElementsByTagName("IFRAME");var divs=div.getElementsByTagName("DIV");if(iframes)for(ix=iframes.length-1;ix>-1;--ix)
bdy[0].appendChild(iframes[ix]);if(divs&&divs.length>0)for(ix=divs.length-1;ix>-1;--ix)
bdy[0].appendChild(divs[ix]);}
if(iframesrc==this.hostedFileURL){var stg=document.getElementById("inqChatStage");var doc=(stg.contentDocument)?stg.contentDocument:stg.contentWindow.document;if(typeof(doc)=="undefined"||doc==null)return;doc.open("replace");doc.write('<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">\n'
+'<html><head><title></title>\n'
+'<meta http-equiv=Content-Type content="text/html; charset=utf-8">\n'
+'</head>\n'
+'<body>\n'
+'<script type="text\/javascript" language="javascript" charset="utf-8" \n'
+'\t\tsrc="'+v3Lander.normalizeProtocol(window.v3LanderConfig.vanityDomain||'https://bofa.inq.com')+'/chatskins/launch/inqChatLaunch10004750.js"><\/script>\n'
+'</body>\n'
+'</html>');doc.close();}
v3Lander.fixV3IFrames(div);},loadScript:function(name){var bdy=document.getElementsByTagName("BODY");if(bdy&&bdy[0]){var srctag=document.createElement("SC"+"RIPT");srctag.src=(window.v3LanderConfig.vanityDomain||"https://bofa.inq.com").replace(/^HTTPS?:/i,window.location.protocol)+name;srctag.type="text/javascript";srctag.charset="utf-8";srctag.language="javascript";bdy[0].appendChild(srctag);}},inqSiteDataFun:null,inqRulesEngineFun:null,mbusToLoad:[],page:null,cgIDs:null,isBupMode:false,isRplMode:false,loadedMbuRuleDataFuns:[],requestPage:function(){this.resolvePage();},getPage:function(){return this.page;},getContentGroupIDs:function(){return this.cgIDs;},resolvePage:function(){var requestUrl="/tagserver/launch/resolvePage?siteID=10004750&url="+encodeURIComponent(document.URL)+"&codeVersion="+encodeURIComponent(v3Lander.codeVersion);var overriddenPageId=null;if(window.inqSiteID){overriddenPageId=window.inqSiteID;}else if(window.parent&&window.parent.inqSiteID){overriddenPageId=window.parent.inqSiteID;}
if(overriddenPageId){requestUrl+="&overridePageId="+encodeURIComponent(overriddenPageId);}
this.loadScript(requestUrl);},applyPage:function(data){var contains=function(a,obj){for(var i=0;i<a.length;i++){if(a[i]===obj){return true;}}
return false;};var prepareMbusList=function(bUnits){var mbusToLoad=[];for(var i=0;i<bUnits.length;i++){if(!contains(mbusToLoad,bUnits[i])){mbusToLoad.push(bUnits[i]);}}
return mbusToLoad;};if(this.isBupMode&&data.bUnits){this.mbusToLoad=prepareMbusList(data.bUnits);}
if(this.isRplMode&&data.page){this.page=data.page;}
if(this.isRplMode&&data.cgIDs){this.cgIDs=data.cgIDs;}
this.createV3Frame();},initSiteDefaultData:function(siteData,rulesEngineData,landingData){v3Lander.landingData=landingData;v3Lander.inqSiteDataFun="var initSiteData = "+siteData.toString();v3Lander.inqRulesEngineFun="var initRulesData = "+rulesEngineData.toString();if(!v3Lander.isBupMode||parent.v3Lander.mbusToLoad.length==0){v3Lander.loadTcFramework();}else{v3Lander.loadMbuData();}},loadTcFramework:function(){var bdy=document.getElementsByTagName("BODY");if(bdy&&bdy[0]){var srctag=document.createElement("SC"+"RIPT");srctag.src=v3Lander.normalizeProtocol(window.v3LanderConfig.cdnDomain+"/launch/tcFramework.min.js?codeVersion="+encodeURIComponent(v3Lander.codeVersion));srctag.type="text/javascript";srctag.charset="utf-8";srctag.language="javascript";bdy[0].appendChild(srctag);}},loadMbuData:function(){for(var i=0;i<parent.v3Lander.mbusToLoad.length;i++){this.loadMbuDataForBU(parent.v3Lander.mbusToLoad[i]);}},buDataCallbackFcn:null,loadMbuDataForBU:function(buID,callback){if(!!callback){this.buDataCallbackFcn=callback;}
v3Lander.loadScript("/chatskins/launch/site_10004750_bu_"+buID+".js?codeVersion="+encodeURIComponent(v3Lander.codeVersion));},applyMbuRuleData:function(mbuRuleData){if(this.buDataCallbackFcn){this.buDataCallbackFcn(mbuRuleData);this.buDataCallbackFcn=null;}
else{v3Lander.loadedMbuRuleDataFuns[v3Lander.loadedMbuRuleDataFuns.length]=mbuRuleData.toString();if(v3Lander.loadedMbuRuleDataFuns.length==parent.v3Lander.mbusToLoad.length){v3Lander.loadTcFramework();}}},insertLandingTag:function(){var bdy=document.getElementsByTagName("BODY");if(bdy&&bdy[0]){var srctag=document.createElement("SC"+"RIPT");srctag.src=v3Lander.normalizeProtocol(window.v3LanderConfig.cdnDomain+"/launch/site_10004750_default.js?codeVersion="+encodeURIComponent(this.codeVersion));srctag.type="text/javascript";srctag.charset="utf-8";srctag.language="javascript";bdy[0].appendChild(srctag);}},insertPostToServerTag:function(){insertScript("/tagserver/postToServer.js?codeVersion="+encodeURIComponent(this.codeVersion));function insertScript(name){var srctag=document.createElement("SC"+"RIPT");srctag.src=(window.v3LanderConfig.vanityDomain||"https://bofa.inq.com")+name;srctag.type="text/javascript";srctag.charset="utf-8";srctag.language="javascript";document.body.appendChild(srctag);}},parseC2CQueryString:function(){var queryStringIndex=window.location.href.indexOf("?C2C");var queryString=window.location.href.substring(queryStringIndex+4);if(queryString.length>1){var c2cQueryData="{";var queryStringPairs=queryString.substring(1).split("&");for(var i=0;i<queryStringPairs.length;i++){var pair=queryStringPairs[i].split("=");if(pair.length>=1||pair.length<=2)
c2cQueryData+=(i==0?"":", ")
+pair[0]+": "
+(pair.length==2?"\""+unescape(pair[1])+"\"":"\"\"");}
c2cQueryData+="}";v3Lander.c2cQueryData=c2cQueryData;}},renderC2CDiv:function(){document.body.style.cssText="border-style: none; border-width: 0px; margin: 0px; padding: 0px;overflow: hidden;overflow-x: hidden;overflow-y: hidden;";var c2cdiv=document.createElement("DIV");c2cdiv.id=window.name;document.body.appendChild(c2cdiv);v3Lander.embeddedDiv=c2cdiv;c2cdiv["setSource"]=v3Lander.setSource;},onDomReady:function(){if(v3Lander.domReady)return;v3Lander.domReady=true;if(window.location.href.indexOf("?C2C")!=-1){try{v3Lander.renderC2CDiv();v3Lander.parseC2CQueryString();v3Lander.registerDiv(200);}catch(e){}
return;}
try{if(window!=window.parent&&!v3Lander.isAtHostedFileURL&&window.document.domain==window.parent.document.domain){return;}}catch(e){}
if(!this.v3Frame){if(this.isBupMode||this.isRplMode){this.requestPage();}
else{this.createV3Frame();}}else{this.initV3Frame();}},testReady:function(){var WAIT_PERIOD=100;if(typeof jQuery!="undefined"&&jQuery.isReady){setTimeout("v3Lander.onDomReady()",1);}else if(!v3Lander.v3Frame&&false){setTimeout("v3Lander.onDomReady()",1);}else if(typeof document.readyState=="undefined"){if(document.addEventListener){document.addEventListener("load",function(){setTimeout("v3Lander.onDomReady();",0);},false);document.addEventListener("DOMContentLoaded",function(){setTimeout("v3Lander.onDomReady();",0);},false);}
setTimeout("v3Lander.onDomReady()",WAIT_PERIOD);}else{var tridentVersion=navigator.userAgent.match(/Trident\/(\d+)/);var newIeVersion=false;if(tridentVersion!=null&&tridentVersion.length==2&&parseInt(tridentVersion[1])>=6){newIeVersion=true;}
if(document.readyState=="complete"&&newIeVersion){setTimeout("v3Lander.onDomReady();",0);}else if(!newIeVersion&&document.all&&!window.opera){try{var isExitChat=false;if(isExitChat){if(this.isAtHostedFileURL){document.write('<iframe id="tcBBFrame" src="'+v3Lander.normalizeProtocol(window.v3LanderConfig.vanityDomain||'https://bofa.inq.com')+'/tagserver/v3/blank.html" '+
'frameborder="0" style="height:0px;width:0px;visibility:hidden" '+
'onload="window.v3Lander._tcBBFrameOnload()"></iframe>');}}
document.write('<sc'+'ript type="text/javascript" id="v3ContentLoadTag" defer="defer" '+'></sc'+'ript>');}catch(e){this.log(e);}
var v3ContentLoadTag=document.getElementById("v3ContentLoadTag");if(v3ContentLoadTag){v3ContentLoadTag.onreadystatechange=function(){v3Lander.domState=this.readyState;if(this.readyState=="complete"){setTimeout("v3Lander.onDomReady()",WAIT_PERIOD);}};}
else{this.uponError();}}
else if(document.addEventListener||(newIeVersion&&document.attachEvent)){if(/loaded|complete/.test(document.readyState))
setTimeout("v3Lander.onDomReady();",0);else{setTimeout(arguments.callee,100);return;}}}},uponError:function(){if(document.readyState=="complete"){setTimeout("v3Lander.onDomReady()",1);}
else{document.attachEvent("onreadystatechange",function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",arguments.callee);setTimeout("v3Lander.onDomReady()",1);}});}},prepBBDetect:function(){var blankURL=v3Lander.normalizeProtocol(window.v3LanderConfig.vanityDomain||"https://bofa.inq.com")+"/tagserver/v3/blank.html";var tc_iframe_loaded_flag=false;function _tcBBFrameOnload(){if(!tc_iframe_loaded_flag&&document.getElementById("tcBBFrame").src.indexOf("?tc=1")==-1){setTimeout('document.getElementById("tcBBFrame").src ="'+blankURL+'?tc=1";',100);}else if(!tc_iframe_loaded_flag&&document.getElementById("tcBBFrame").src.indexOf("?tc=1")!=-1){tc_iframe_loaded_flag=true;}else if(tc_iframe_loaded_flag){window.inqFrame.Inq.EC.setEnabled(false);history.back();}}
v3Lander._tcBBFrameOnload=_tcBBFrameOnload;var placedIframe=0;var isIE=navigator.userAgent.toLowerCase().indexOf("msie")>-1;function _placeTcBBFrame(){if(placedIframe==0&&!isIE){placedIframe=1;var dynamicIframe=document.createElement('div');dynamicIframe.innerHTML='<iframe id="tcBBFrame" src="'+blankURL+'" frameborder="0" style="height:0px;width:0px;visibility:hidden" onload="v3Lander._tcBBFrameOnload()"></iframe>';document.getElementsByTagName('body')[0].appendChild(dynamicIframe);}}
v3Lander._placeTcBBFrame=_placeTcBBFrame;function placeTcBBFrame_pre(){setTimeout('v3Lander._placeTcBBFrame()',100);}
if(window.addEventListener){window.addEventListener('load',placeTcBBFrame_pre,true);}else if(window.attachEvent){window.attachEvent('onload',placeTcBBFrame_pre);}else{placeTcBBFrame_pre();}},removeNode:function(id){try{var tempID=document.getElementById(id);var tag=null;if(!!tempID)
tag=parent.parent.tempID;if(tag){tag=tag.parentNode;var p=tag.parentNode;var grandparent=parent.parent;if(grandparent["Inq"]==null)return;if(grandparent.Inq["removeProxyNode"]==null)
grandparent.Inq["removeProxyNode"]=new grandparent.Function("id",'var node=document.getElementById(id);\n'
+'try{\n'
+'if(!!node) {\n'
+'var p=node.parentNode;\n'
+'p.removeChild(node);\n'
+'node=p;\n'
+'if(!!node) {\n'
+'p=node.parentNode;\n'
+'p.removeChild(node);\n'
+'}\n'
+'}\n'
+'}catch(e){}\n');grandparent.setTimeout('Inq.removeProxyNode("'+id+'")',100);}}catch(ee){}},removeNodeXF:function(id){try{var tag=parent.parent.document.getElementById(id);if(tag){tag=tag.parentNode;var p=tag.parentNode;if(p)try{p.removeChild(tag);}catch(e){}}}catch(e){}},wrapWithTryCatch:function(code){return"try {\n"
+code
+"\n} catch(e){"
+"Inq.log('ERROR:' + e.message);"
+"};";},xframeToIjsf:function(){var items=name.split("||");var code=decodeURIComponent(items[3]);var chatStageWindow=window.parent.parent.parent.document.getElementById('inqChatStage').contentWindow;chatStageWindow.setTimeout(v3Lander.wrapWithTryCatch(code),1);},xhfToIjsf:function(){var code=decodeURIComponent(name);var chatStageWindow=window.parent.parent;chatStageWindow.setTimeout(v3Lander.wrapWithTryCatch(code),1);},postReturnsIE:function(){var items=name.split("||");var code=decodeURIComponent(items[1]);var grandParent=window.parent;grandParent.setTimeout(v3Lander.wrapWithTryCatch(code),1);v3Lander.removeNode(items[0]);},postReturns:function(){var items=name.split("||");var code=decodeURIComponent(items[1]);var grandParent=window.parent.parent;grandParent.setTimeout(v3Lander.wrapWithTryCatch(code),1);v3Lander.removeNode(items[0]);},start:function(){if(navigator.userAgent.indexOf("Opera")>=0){return;}
try{this.assignDomain();v3Lander.v3Frame=(window.frameElement!=null&&typeof(window.frameElement)!="undefined"&&window.frameElement.id=="inqChatStage")}catch(e){v3Lander.v3Frame=false}
var isExitChat=false;if(isExitChat){if(this.isAtHostedFileURL)
this.prepBBDetect();}
v3Lander.testReady();}};v3Lander.establishHostedFileURL();(v3Lander).isAtHostedFileURL=(window.location.href.indexOf(v3Lander.hostedFileURL)>-1);(v3Lander).assignDomain();if(window.location.href.indexOf("?BLNK")!=-1){}
else if(window.location.href.indexOf("?CCFRM")!=-1){var host=(window.v3LanderConfig.vanityDomain||"https://bofa.inq.com").replace(/^https?:\/\//,"");var url="http://"+window.document.domain+"/tagserver/ccform/getCreditCardForm?host="+host;window.location.replace(url);}
else if(window.location.href.indexOf("?CCTKN=1")!=-1){var s=document.createElement("script");var params=window.location.href.replace(/^.*\?/,"?");var src=(window.v3LanderConfig.vanityDomain||"https://bofa.inq.com")+"/tagserver/cctoken/getToken"+params;s.src=src;document.head.appendChild(s);}
else if(window.location.href.indexOf("?CCTKN=2")!=-1){var s=document.createElement("script");var params=window.location.href.replace(/^.*\?/,"?");var src=(window.v3LanderConfig.vanityDomain||"https://bofa.inq.com")+"/tagserver/cctokentest/getToken"+params;s.src=src;document.head.appendChild(s);}
else if(window.location.href.indexOf("?XHR")!=-1){v3Lander.xhfToIjsf();window.close();}
else if(window.location.href.indexOf("?IEXF")!=-1){v3Lander.assignDomain();v3Lander.postReturnsIE();window.close();}
else if(window.location.href.indexOf("?C2C")!=-1){v3Lander.testReady();}
else if(window.location.href.indexOf("?RSC2C")!=-1){v3Lander.resizeAnscestorIframe();}
else if(window.location.href.indexOf("?POST2SERVER")!=-1){v3Lander.insertPostToServerTag();}
else if(!!window.name&&window.name.indexOf("||")!=-1&&v3Lander.isAtHostedFileURL){if(window.location.search=="?XFRM"){v3Lander.xframeToIjsf();window.close();}
else{v3Lander.assignDomain();v3Lander.postReturns();window.close();}}
else{if(!window.v3LanderConfig.customLaunching){v3Lander.start();}}}
var bactm_tcLibLoaded=document.createEvent('Event');bactm_tcLibLoaded.initEvent('bactm-tc-chat-libload',false,false);window.dispatchEvent(bactm_tcLibLoaded);},function(a,b){try{if(1){(function(parent,name,context,definition){if(!context||!context[parent]||!Array.prototype.filter){return;}
context[parent]['plugins'][name]=definition();})('bactm','chat',typeof window!=='undefined'?window:null,function(){var parent='bactm',ba=window[parent],win=window,doc=document||{},version='1.0.2',ddo=win.digitalData,LOG_LEVEL={OFF:10,FATAL:5,ERROR:4,WARN:3,INFO:2,DEBUG:1};if(!ddo)return;var _handlePageview=function(details){ba._log('bactm.chat handling a pageview.',details,LOG_LEVEL.DEBUG);if(!details.pageInfo)return;var pi=details.pageInfo;if(pi.chat)_reload(pi.chat);}
var _reload=function(data){if(data)_updateDDO(data);ba._log('Reload chat with new chat object:',ddo.page.attributes.chat,LOG_LEVEL.INFO);if(window.boa&&window.boa.chat&&window.boa.chat.reload)window.boa.chat.reload();}
var _updateDDO=function(data){ddo.page=ddo.page||{};ddo.page.attributes=ddo.page.attributes||{};ddo.page.attributes.chat=ddo.page.attributes.chat||{};for(var prop in data){if(data.hasOwnProperty(prop))ddo.page.attributes.chat[prop]=data[prop];}}
var _init=function(){ba._log('bactm.chat plugin v'+version+' initializing.',LOG_LEVEL.INFO);ba.on('afterPageview',_handlePageview);}
_init();return{reload:_reload};});}}catch(e){utag.DB(e)}}];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){var c,d,e,f,i;u.data={};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){}};for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){u.data[e[f]]=b[d];}}}
}};utag.o[loader].loader.LOAD(id);})("30","bofa.main");}catch(error){utag.DB(error);}
