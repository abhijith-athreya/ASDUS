!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.ESPNVideoPlayer=b():a.ESPNVideoPlayer=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.i=function(a){return a},b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=29)}([function(a,b,c){(function(a,c){function d(a,b){return a.set(b[0],b[1]),a}function e(a,b){return a.add(b),a}function f(a,b,c){switch(c.length){case 0:return a.call(b);case 1:return a.call(b,c[0]);case 2:return a.call(b,c[0],c[1]);case 3:return a.call(b,c[0],c[1],c[2])}return a.apply(b,c)}function g(a,b){for(var c=-1,d=a?a.length:0;++c<d&&!1!==b(a[c],c,a););return a}function h(a,b){for(var c=-1,d=b.length,e=a.length;++c<d;)a[e+c]=b[c];return a}function i(a,b,c,d){var e=-1,f=a?a.length:0;for(d&&f&&(c=a[++e]);++e<f;)c=b(c,a[e],e,a);return c}function j(a,b){for(var c=-1,d=Array(a);++c<a;)d[c]=b(c);return d}function k(a,b){return null==a?void 0:a[b]}function l(a){var b=!1;if(null!=a&&"function"!=typeof a.toString)try{b=!!(a+"")}catch(a){}return b}function m(a){var b=-1,c=Array(a.size);return a.forEach(function(a,d){c[++b]=[d,a]}),c}function n(a,b){return function(c){return a(b(c))}}function o(a){var b=-1,c=Array(a.size);return a.forEach(function(a){c[++b]=a}),c}function p(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function q(){this.__data__=_b?_b(null):{}}function r(a){return this.has(a)&&delete this.__data__[a]}function s(a){var b=this.__data__;if(_b){var c=b[a];return c===Oa?void 0:c}return Hb.call(b,a)?b[a]:void 0}function t(a){var b=this.__data__;return _b?void 0!==b[a]:Hb.call(b,a)}function u(a,b){return this.__data__[a]=_b&&void 0===b?Oa:b,this}function v(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function w(){this.__data__=[]}function x(a){var b=this.__data__,c=Q(b,a);return!(c<0)&&(c==b.length-1?b.pop():Rb.call(b,c,1),!0)}function y(a){var b=this.__data__,c=Q(b,a);return c<0?void 0:b[c][1]}function z(a){return Q(this.__data__,a)>-1}function A(a,b){var c=this.__data__,d=Q(c,a);return d<0?c.push([a,b]):c[d][1]=b,this}function B(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function C(){this.__data__={hash:new p,map:new(Xb||v),string:new p}}function D(a){return na(this,a).delete(a)}function E(a){return na(this,a).get(a)}function F(a){return na(this,a).has(a)}function G(a,b){return na(this,a).set(a,b),this}function H(a){this.__data__=new v(a)}function I(){this.__data__=new v}function J(a){return this.__data__.delete(a)}function K(a){return this.__data__.get(a)}function L(a){return this.__data__.has(a)}function M(a,b){var c=this.__data__;if(c instanceof v){var d=c.__data__;if(!Xb||d.length<Na-1)return d.push([a,b]),this;c=this.__data__=new B(d)}return c.set(a,b),this}function N(a,b){var c=jc(a)||Aa(a)?j(a.length,String):[],d=c.length,e=!!d;for(var f in a)!b&&!Hb.call(a,f)||e&&("length"==f||sa(f,d))||c.push(f);return c}function O(a,b,c){(void 0===c||za(a[b],c))&&("number"!=typeof b||void 0!==c||b in a)||(a[b]=c)}function P(a,b,c){var d=a[b];Hb.call(a,b)&&za(d,c)&&(void 0!==c||b in a)||(a[b]=c)}function Q(a,b){for(var c=a.length;c--;)if(za(a[c][0],b))return c;return-1}function R(a,b){return a&&ka(b,Ja(b),a)}function S(a,b,c,d,e,f,h){var i;if(d&&(i=f?d(a,e,f,h):d(a)),void 0!==i)return i;if(!Fa(a))return a;var j=jc(a);if(j){if(i=pa(a),!b)return ja(a,i)}else{var k=ic(a),m=k==Ta||k==Ua;if(kc(a))return ba(a,b);if(k==Xa||k==Qa||m&&!f){if(l(a))return f?a:{};if(i=qa(m?{}:a),!b)return la(a,R(i,a))}else{if(!rb[k])return f?a:{};i=ra(a,k,S,b)}}h||(h=new H);var n=h.get(a);if(n)return n;if(h.set(a,i),!j)var o=c?ma(a):Ja(a);return g(o||a,function(e,f){o&&(f=e,e=a[f]),P(i,f,S(e,b,c,d,f,a,h))}),i}function T(a){return Fa(a)?Pb(a):{}}function U(a,b,c){var d=b(a);return jc(a)?d:h(d,c(a))}function V(a){return Jb.call(a)}function W(a){return!(!Fa(a)||va(a))&&(Da(a)||l(a)?Kb:ob).test(ya(a))}function X(a){return Ga(a)&&Ea(a.length)&&!!qb[Jb.call(a)]}function Y(a){if(!wa(a))return Ub(a);var b=[];for(var c in Object(a))Hb.call(a,c)&&"constructor"!=c&&b.push(c);return b}function Z(a){if(!Fa(a))return xa(a);var b=wa(a),c=[];for(var d in a)("constructor"!=d||!b&&Hb.call(a,d))&&c.push(d);return c}function $(a,b,c,d,e){if(a!==b){if(!jc(b)&&!lc(b))var f=Z(b);g(f||b,function(g,h){if(f&&(h=g,g=b[h]),Fa(g))e||(e=new H),_(a,b,h,c,$,d,e);else{var i=d?d(a[h],g,h+"",a,b,e):void 0;void 0===i&&(i=g),O(a,h,i)}})}}function _(a,b,c,d,e,f,g){var h=a[c],i=b[c],j=g.get(i);if(j)return void O(a,c,j);var k=f?f(h,i,c+"",a,b,g):void 0,l=void 0===k;l&&(k=i,jc(i)||lc(i)?jc(h)?k=h:Ca(h)?k=ja(h):(l=!1,k=S(i,!0)):Ha(i)||Aa(i)?Aa(h)?k=Ia(h):!Fa(h)||d&&Da(h)?(l=!1,k=S(i,!0)):k=h:l=!1),l&&(g.set(i,k),e(k,i,d,f,g),g.delete(i)),O(a,c,k)}function aa(a,b){return b=Vb(void 0===b?a.length-1:b,0),function(){for(var c=arguments,d=-1,e=Vb(c.length-b,0),g=Array(e);++d<e;)g[d]=c[b+d];d=-1;for(var h=Array(b+1);++d<b;)h[d]=c[d];return h[b]=g,f(a,this,h)}}function ba(a,b){if(b)return a.slice();var c=new a.constructor(a.length);return a.copy(c),c}function ca(a){var b=new a.constructor(a.byteLength);return new Nb(b).set(new Nb(a)),b}function da(a,b){var c=b?ca(a.buffer):a.buffer;return new a.constructor(c,a.byteOffset,a.byteLength)}function ea(a,b,c){return i(b?c(m(a),!0):m(a),d,new a.constructor)}function fa(a){var b=new a.constructor(a.source,nb.exec(a));return b.lastIndex=a.lastIndex,b}function ga(a,b,c){return i(b?c(o(a),!0):o(a),e,new a.constructor)}function ha(a){return gc?Object(gc.call(a)):{}}function ia(a,b){var c=b?ca(a.buffer):a.buffer;return new a.constructor(c,a.byteOffset,a.length)}function ja(a,b){var c=-1,d=a.length;for(b||(b=Array(d));++c<d;)b[c]=a[c];return b}function ka(a,b,c,d){c||(c={});for(var e=-1,f=b.length;++e<f;){var g=b[e],h=d?d(c[g],a[g],g,c,a):void 0;P(c,g,void 0===h?a[g]:h)}return c}function la(a,b){return ka(a,hc(a),b)}function ma(a){return U(a,Ja,hc)}function na(a,b){var c=a.__data__;return ua(b)?c["string"==typeof b?"string":"hash"]:c.map}function oa(a,b){var c=k(a,b);return W(c)?c:void 0}function pa(a){var b=a.length,c=a.constructor(b);return b&&"string"==typeof a[0]&&Hb.call(a,"index")&&(c.index=a.index,c.input=a.input),c}function qa(a){return"function"!=typeof a.constructor||wa(a)?{}:T(Ob(a))}function ra(a,b,c,d){var e=a.constructor;switch(b){case bb:return ca(a);case Ra:case Sa:return new e(+a);case cb:return da(a,d);case db:case eb:case fb:case gb:case hb:case ib:case jb:case kb:case lb:return ia(a,d);case Va:return ea(a,d,c);case Wa:case $a:return new e(a);case Ya:return fa(a);case Za:return ga(a,d,c);case _a:return ha(a)}}function sa(a,b){return!!(b=null==b?Pa:b)&&("number"==typeof a||pb.test(a))&&a>-1&&a%1==0&&a<b}function ta(a,b,c){if(!Fa(c))return!1;var d=typeof b;return!!("number"==d?Ba(c)&&sa(b,c.length):"string"==d&&b in c)&&za(c[b],a)}function ua(a){var b=typeof a;return"string"==b||"number"==b||"symbol"==b||"boolean"==b?"__proto__"!==a:null===a}function va(a){return!!Fb&&Fb in a}function wa(a){var b=a&&a.constructor;return a===("function"==typeof b&&b.prototype||Db)}function xa(a){var b=[];if(null!=a)for(var c in Object(a))b.push(c);return b}function ya(a){if(null!=a){try{return Gb.call(a)}catch(a){}try{return a+""}catch(a){}}return""}function za(a,b){return a===b||a!==a&&b!==b}function Aa(a){return Ca(a)&&Hb.call(a,"callee")&&(!Qb.call(a,"callee")||Jb.call(a)==Qa)}function Ba(a){return null!=a&&Ea(a.length)&&!Da(a)}function Ca(a){return Ga(a)&&Ba(a)}function Da(a){var b=Fa(a)?Jb.call(a):"";return b==Ta||b==Ua}function Ea(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=Pa}function Fa(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function Ga(a){return!!a&&"object"==typeof a}function Ha(a){if(!Ga(a)||Jb.call(a)!=Xa||l(a))return!1;var b=Ob(a);if(null===b)return!0;var c=Hb.call(b,"constructor")&&b.constructor;return"function"==typeof c&&c instanceof c&&Gb.call(c)==Ib}function Ia(a){return ka(a,Ka(a))}function Ja(a){return Ba(a)?N(a):Y(a)}function Ka(a){return Ba(a)?N(a,!0):Z(a)}function La(){return[]}function Ma(){return!1}var Na=200,Oa="__lodash_hash_undefined__",Pa=9007199254740991,Qa="[object Arguments]",Ra="[object Boolean]",Sa="[object Date]",Ta="[object Function]",Ua="[object GeneratorFunction]",Va="[object Map]",Wa="[object Number]",Xa="[object Object]",Ya="[object RegExp]",Za="[object Set]",$a="[object String]",_a="[object Symbol]",ab="[object WeakMap]",bb="[object ArrayBuffer]",cb="[object DataView]",db="[object Float32Array]",eb="[object Float64Array]",fb="[object Int8Array]",gb="[object Int16Array]",hb="[object Int32Array]",ib="[object Uint8Array]",jb="[object Uint8ClampedArray]",kb="[object Uint16Array]",lb="[object Uint32Array]",mb=/[\\^$.*+?()[\]{}|]/g,nb=/\w*$/,ob=/^\[object .+?Constructor\]$/,pb=/^(?:0|[1-9]\d*)$/,qb={};qb[db]=qb[eb]=qb[fb]=qb[gb]=qb[hb]=qb[ib]=qb[jb]=qb[kb]=qb[lb]=!0,qb[Qa]=qb["[object Array]"]=qb[bb]=qb[Ra]=qb[cb]=qb[Sa]=qb["[object Error]"]=qb[Ta]=qb[Va]=qb[Wa]=qb[Xa]=qb[Ya]=qb[Za]=qb[$a]=qb[ab]=!1;var rb={};rb[Qa]=rb["[object Array]"]=rb[bb]=rb[cb]=rb[Ra]=rb[Sa]=rb[db]=rb[eb]=rb[fb]=rb[gb]=rb[hb]=rb[Va]=rb[Wa]=rb[Xa]=rb[Ya]=rb[Za]=rb[$a]=rb[_a]=rb[ib]=rb[jb]=rb[kb]=rb[lb]=!0,rb["[object Error]"]=rb[Ta]=rb[ab]=!1;var sb="object"==typeof a&&a&&a.Object===Object&&a,tb="object"==typeof self&&self&&self.Object===Object&&self,ub=sb||tb||Function("return this")(),vb="object"==typeof b&&b&&!b.nodeType&&b,wb=vb&&"object"==typeof c&&c&&!c.nodeType&&c,xb=wb&&wb.exports===vb,yb=xb&&sb.process,zb=function(){try{return yb&&yb.binding("util")}catch(a){}}(),Ab=zb&&zb.isTypedArray,Bb=Array.prototype,Cb=Function.prototype,Db=Object.prototype,Eb=ub["__core-js_shared__"],Fb=function(){var a=/[^.]+$/.exec(Eb&&Eb.keys&&Eb.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),Gb=Cb.toString,Hb=Db.hasOwnProperty,Ib=Gb.call(Object),Jb=Db.toString,Kb=RegExp("^"+Gb.call(Hb).replace(mb,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Lb=xb?ub.Buffer:void 0,Mb=ub.Symbol,Nb=ub.Uint8Array,Ob=n(Object.getPrototypeOf,Object),Pb=Object.create,Qb=Db.propertyIsEnumerable,Rb=Bb.splice,Sb=Object.getOwnPropertySymbols,Tb=Lb?Lb.isBuffer:void 0,Ub=n(Object.keys,Object),Vb=Math.max,Wb=oa(ub,"DataView"),Xb=oa(ub,"Map"),Yb=oa(ub,"Promise"),Zb=oa(ub,"Set"),$b=oa(ub,"WeakMap"),_b=oa(Object,"create"),ac=ya(Wb),bc=ya(Xb),cc=ya(Yb),dc=ya(Zb),ec=ya($b),fc=Mb?Mb.prototype:void 0,gc=fc?fc.valueOf:void 0;p.prototype.clear=q,p.prototype.delete=r,p.prototype.get=s,p.prototype.has=t,p.prototype.set=u,v.prototype.clear=w,v.prototype.delete=x,v.prototype.get=y,v.prototype.has=z,v.prototype.set=A,B.prototype.clear=C,B.prototype.delete=D,B.prototype.get=E,B.prototype.has=F,B.prototype.set=G,H.prototype.clear=I,H.prototype.delete=J,H.prototype.get=K,H.prototype.has=L,H.prototype.set=M;var hc=Sb?n(Sb,Object):La,ic=V;(Wb&&ic(new Wb(new ArrayBuffer(1)))!=cb||Xb&&ic(new Xb)!=Va||Yb&&"[object Promise]"!=ic(Yb.resolve())||Zb&&ic(new Zb)!=Za||$b&&ic(new $b)!=ab)&&(ic=function(a){var b=Jb.call(a),c=b==Xa?a.constructor:void 0,d=c?ya(c):void 0;if(d)switch(d){case ac:return cb;case bc:return Va;case cc:return"[object Promise]";case dc:return Za;case ec:return ab}return b});var jc=Array.isArray,kc=Tb||Ma,lc=Ab?function(a){return function(b){return a(b)}}(Ab):X,mc=function(a){return aa(function(b,c){var d=-1,e=c.length,f=e>1?c[e-1]:void 0,g=e>2?c[2]:void 0;for(f=a.length>3&&"function"==typeof f?(e--,f):void 0,g&&ta(c[0],c[1],g)&&(f=e<3?void 0:f,e=1),b=Object(b);++d<e;){var h=c[d];h&&a(b,h,d,f)}return b})}(function(a,b,c,d){$(a,b,c,d)});c.exports=mc}).call(b,c(7),c(74)(a))},function(a,b,c){"use strict";function d(a){h=f.get("SWID");var b,c;b=!0,c=f.get("VAS"),c&&(b=1===parseInt(c,10)),"string"==typeof h&&0===h.indexOf("{")?g.getAutoStartForFanId(h,function(c){b=!0===c||!1===c?c:b,a&&a(b)}):a&&a(b)}function e(a){h=f.get("SWID"),!0!==a&&!1!==a||(f.set("VAS",a?1:2),h&&g.updateAutoStartForFanId(h,a))}var f,g,h;f=c(57),g=new(c(72)),b.getAutoStart=d,b.setAutoStart=e,Object.defineProperty(b,"SWID",{get:function(){return f.get("SWID")}})},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=b.USER_AGENT="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent||"",e=b.IS_EDGE=/Edge/i.test(d),f=b.IS_CHROME=!e&&/Chrome/i.test(d),g=b.IS_ANDROID=/Android/i.test(d),h=b.IS_SAFARI=/Safari/i.test(d)&&!f&&!g&&!e;b.IS_SAFARI_11=h&&/Version\/11/i.test(d)},function(a,b,c){function d(){}function e(a){if(!p(a))return a;var b=[];for(var c in a)f(b,c,a[c]);return b.join("&")}function f(a,b,c){if(null!=c)if(Array.isArray(c))c.forEach(function(c){f(a,b,c)});else if(p(c))for(var d in c)f(a,b+"["+d+"]",c[d]);else a.push(encodeURIComponent(b)+"="+encodeURIComponent(c));else null===c&&a.push(encodeURIComponent(b))}function g(a){for(var b,c,d={},e=a.split("&"),f=0,g=e.length;f<g;++f)b=e[f],c=b.indexOf("="),-1==c?d[decodeURIComponent(b)]="":d[decodeURIComponent(b.slice(0,c))]=decodeURIComponent(b.slice(c+1));return d}function h(a){var b,c,d,e,f=a.split(/\r?\n/),g={};f.pop();for(var h=0,i=f.length;h<i;++h)c=f[h],b=c.indexOf(":"),d=c.slice(0,b).toLowerCase(),e=t(c.slice(b+1)),g[d]=e;return g}function i(a){return/[\/+]json\b/.test(a)}function j(a){this.req=a,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var b=this.xhr.status;1223===b&&(b=204),this._setStatusProperties(b),this.header=this.headers=h(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&a._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function k(a,b){var c=this;this._query=this._query||[],this.method=a,this.url=b,this.header={},this._header={},this.on("end",function(){var a=null,b=null;try{b=new j(c)}catch(b){return a=new Error("Parser is unable to parse the response"),a.parse=!0,a.original=b,c.xhr?(a.rawResponse=void 0===c.xhr.responseType?c.xhr.responseText:c.xhr.response,a.status=c.xhr.status?c.xhr.status:null,a.statusCode=a.status):(a.rawResponse=null,a.status=null),c.callback(a)}c.emit("response",b);var d;try{c._isResponseOK(b)||(d=new Error(b.statusText||"Unsuccessful HTTP response"),d.original=a,d.response=b,d.status=b.status)}catch(a){d=a}d?c.callback(d,b):c.callback(null,b)})}function l(a,b,c){var d=s("DELETE",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d}var m;"undefined"!=typeof window?m=window:"undefined"!=typeof self?m=self:(console.warn("Using browser-only version of superagent in non-browser environment"),m=this);var n=c(56),o=c(63),p=c(15),q=c(64),r=c(65),s=b=a.exports=function(a,c){return"function"==typeof c?new b.Request("GET",a).end(c):1==arguments.length?new b.Request("GET",a):new b.Request(a,c)};b.Request=k,s.getXHR=function(){if(!(!m.XMLHttpRequest||m.location&&"file:"==m.location.protocol&&m.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(a){}throw Error("Browser-only version of superagent could not find XHR")};var t="".trim?function(a){return a.trim()}:function(a){return a.replace(/(^\s*|\s*$)/g,"")};s.serializeObject=e,s.parseString=g,s.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},s.serialize={"application/x-www-form-urlencoded":e,"application/json":JSON.stringify},s.parse={"application/x-www-form-urlencoded":g,"application/json":JSON.parse},q(j.prototype),j.prototype._parseBody=function(a){var b=s.parse[this.type];return this.req._parser?this.req._parser(this,a):(!b&&i(this.type)&&(b=s.parse["application/json"]),b&&a&&(a.length||a instanceof Object)?b(a):null)},j.prototype.toError=function(){var a=this.req,b=a.method,c=a.url,d="cannot "+b+" "+c+" ("+this.status+")",e=new Error(d);return e.status=this.status,e.method=b,e.url=c,e},s.Response=j,n(k.prototype),o(k.prototype),k.prototype.type=function(a){return this.set("Content-Type",s.types[a]||a),this},k.prototype.accept=function(a){return this.set("Accept",s.types[a]||a),this},k.prototype.auth=function(a,b,c){switch("object"==typeof b&&null!==b&&(c=b),c||(c={type:"function"==typeof btoa?"basic":"auto"}),c.type){case"basic":this.set("Authorization","Basic "+btoa(a+":"+b));break;case"auto":this.username=a,this.password=b;break;case"bearer":this.set("Authorization","Bearer "+a)}return this},k.prototype.query=function(a){return"string"!=typeof a&&(a=e(a)),a&&this._query.push(a),this},k.prototype.attach=function(a,b,c){if(b){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(a,b,c||b.name)}return this},k.prototype._getFormData=function(){return this._formData||(this._formData=new m.FormData),this._formData},k.prototype.callback=function(a,b){if(this._maxRetries&&this._retries++<this._maxRetries&&r(a,b))return this._retry();var c=this._callback;this.clearTimeout(),a&&(this._maxRetries&&(a.retries=this._retries-1),this.emit("error",a)),c(a,b)},k.prototype.crossDomainError=function(){var a=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");a.crossDomain=!0,a.status=this.status,a.method=this.method,a.url=this.url,this.callback(a)},k.prototype.buffer=k.prototype.ca=k.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},k.prototype.pipe=k.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},k.prototype._isHost=function(a){return a&&"object"==typeof a&&!Array.isArray(a)&&"[object Object]"!==Object.prototype.toString.call(a)},k.prototype.end=function(a){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=a||d,this._finalizeQueryString(),this._end()},k.prototype._end=function(){var a=this,b=this.xhr=s.getXHR(),c=this._formData||this._data;this._setTimeouts(),b.onreadystatechange=function(){var c=b.readyState;if(c>=2&&a._responseTimeoutTimer&&clearTimeout(a._responseTimeoutTimer),4==c){var d;try{d=b.status}catch(a){d=0}if(!d){if(a.timedout||a._aborted)return;return a.crossDomainError()}a.emit("end")}};var d=function(b,c){c.total>0&&(c.percent=c.loaded/c.total*100),c.direction=b,a.emit("progress",c)};if(this.hasListeners("progress"))try{b.onprogress=d.bind(null,"download"),b.upload&&(b.upload.onprogress=d.bind(null,"upload"))}catch(a){}try{this.username&&this.password?b.open(this.method,this.url,!0,this.username,this.password):b.open(this.method,this.url,!0)}catch(a){return this.callback(a)}if(this._withCredentials&&(b.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof c&&!this._isHost(c)){var e=this._header["content-type"],f=this._serializer||s.serialize[e?e.split(";")[0]:""];!f&&i(e)&&(f=s.serialize["application/json"]),f&&(c=f(c))}for(var g in this.header)null!=this.header[g]&&this.header.hasOwnProperty(g)&&b.setRequestHeader(g,this.header[g]);return this._responseType&&(b.responseType=this._responseType),this.emit("request",this),b.send(void 0!==c?c:null),this},s.get=function(a,b,c){var d=s("GET",a);return"function"==typeof b&&(c=b,b=null),b&&d.query(b),c&&d.end(c),d},s.head=function(a,b,c){var d=s("HEAD",a);return"function"==typeof b&&(c=b,b=null),b&&d.query(b),c&&d.end(c),d},s.options=function(a,b,c){var d=s("OPTIONS",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},s.del=l,s.delete=l,s.patch=function(a,b,c){var d=s("PATCH",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},s.post=function(a,b,c){var d=s("POST",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},s.put=function(a,b,c){var d=s("PUT",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d}},function(a,b,c){"use strict";function d(a,b){if(null===b)return a}var e,f,g,h;h=c(0),f=c(1),g=c(20),e={configure:function(a){return a&&h(g,a,d),g},adManager:function(a){var b;return this.configure({keyValues:[{_fw_euid:f.SWID}]}),null!=a&&this.configure(a),this.configure(g.beforeAdManager(g)),b={Flash:{networkId:""+g.networkId,sdkurl:g.flash.sdkurl,serverUrl:g.flash.serverUrl,siteSectionCustomId:g.siteSectionId,swfurl:g.flash.swfurl,videoAssetCustomId:g.assetId,videoAssetDuration:g.assetDuration,profile:g.flash.profile,keyValues:g.keyValues},Html5:{networkId:""+g.networkId,sdkurl:g.html5.sdkurl,serverUrl:g.html5.serverUrl,siteSectionCustomId:g.siteSectionId,videoAssetCustomId:g.assetId,videoAssetDuration:g.assetDuration,profile:g.html5.profile,keyValues:g.keyValues},adTechOrder:g.adTechOrder,debug:g.debug,prerollTimeout:g.prerollTimeout,timeout:g.timeout},g.startType?(b.Html5.autoPlayType=g.startType.match(/manual/i)?"VIDEO_ASSET_AUTO_PLAY_TYPE_ATTENDED":"VIDEO_ASSET_AUTO_PLAY_TYPE_UNATTENDED",b.Flash.autoPlay=!0):(b.Html5.autoPlayType="VIDEO_ASSET_AUTO_PLAY_TYPE_NONE",b.Flash.autoPlay=!1),b},vast:function(a,b){var c,d,e,f,h,i;for(null!=a&&this.configure(a),f=["resp="+g.responseType,"nw="+g.networkId,"caid="+g.assetId,null!=g.assetDuration?"vdur="+g.assetDuration:void 0,"csid="+g.siteSectionId,"prof="+g.profile,g.live?"mode=live":void 0,"pvrn="+g.pageViewRandomNumber,"vprn="+g.videoPlayRandomNumber,"vast2"===g.responseType?"crtp=vast2s":void 0],d=[],i=[],c=0,e=b.length;c<e;c++)h=b[c],i.push(["ptgt=a","slau="+h.adUnit,"slid="+h.adUnit+(null!=h.adBreak?h.adBreak:void 0)].join("&"));return g.host+"?"+f.join("&")+";"+d.join("&")+";"+i.join(";")},onceux:function(a){return{metadataUri:a,hideOverlay:g.hideOverlay}}},a.exports=e},function(a,b,c){"use strict";function d(a,b){if(null===b)return a}var e,f,g;g=c(0),e={reset:function(){return f=g({},c(21),d)},configure:function(a){return g(f,a,d),f},chartbeat:function(a){return null!=a&&this.configure({chartbeat:a}),f.chartbeat},comscore:function(a){var b,c,d,e;null!=a&&(a.c2&&(a.clientId=a.c2),f.comscore.clientId=a.c2||a.clientId||f.comscore.clientId,a.labels&&g(f.comscore.labels,a.labels)),c=[],d=f.comscore.labels;for(b in d)e=d[b],c.push(b+"="+e);return{c2:f.comscore.clientId,labelmapping:c.join(",")}},conviva:function(a){return null!=a&&this.configure({conviva:a}),f.conviva},adobeDCR:function(a){return null!=a&&this.configure({adobeDCR:a}),f.adobeDCR},nativeOmniture:function(a){return null!=a&&this.configure({native:a}),f.native}},e.reset(),a.exports=e},function(a,b,c){"use strict";function d(a,b){if(null===b)return a}var e,f,g;g=c(0),f=c(24),e=function(){function a(a){return g(this,f[a],d)}return a.prototype.adAssetId=function(a){return(this.adAssetIdPrefix||"")+a},a.prototype.apiMediaId=function(a){return this.apiIdPrefix&&"string"==typeof a&&a.match(this.apiIdPrefix)?a:(this.apiIdPrefix||"")+a},a}(),a.exports=e},function(a,b){var c;c=function(){return this}();try{c=c||Function("return this")()||(0,eval)("this")}catch(a){"object"==typeof window&&(c=window)}a.exports=c},function(a,b,c){"use strict";function d(a,b){if(null===b)return a}function e(a,b){return k.get(i.WATCH_BASE_URL+"/listings").query({tz:"GMT"}).query(a).end(function(a,c){var d,e,f,g;return a?(console.error(a),b(a,null)):(f=c.body&&c.body.listings&&c.body.listings.shift(),f?(d=(f.categories&&f.categories[0]&&f.categories[0].abbreviation)+(f.subcategories&&f.subcategories[0]&&f.subcategories[0].abbreviation&&f.subcategories[0].abbreviation.replace(/-/g," ")),f.program&&(g=f.program.categoryCode+f.program.code+f.showId),e={_listing:f,airingId:f.airingId,commercialReplacement:f.commercialReplacement,comscoreC6:d,description:f.description,endTime:f.endTime,eventId:f.eventId,hasEspnId3Heartbeats:f.broadcasts&&f.broadcasts[0].hasEspnId3Heartbeats||!1,hasNielsenWatermarks:f.broadcasts&&f.broadcasts[0].hasNielsenWatermarks||!1,hasPassThroughAds:f.hasPassThroughAds||!1,id:f.id,name:f.name,nielsenCrossId1:g,originalAirDate:f.originalAirDate,posterHref:f.thumbnails&&f.thumbnails.large&&f.thumbnails.large.href,simulcastAiringId:f.simulcastAiringId,sourceId:f.broadcasts&&f.broadcasts[0].abbreviation,sourceType:f.broadcasts[0].type,startTime:f.startTime,status:f.type,videoHref:f.links&&f.links.source&&f.links.source.hls&&f.links.source.hls.default&&f.links.source.hls.default.href,webHref:f.links&&f.links.web&&f.links.web.href},b(null,e)):b("NOT_FOUND",null))})}var f,g,h,i,j,k;k=c(3),h=c(13),g=c(6),i=c(22),j=c(0),f=function(){function a(a){j(i,a,d),this.cms=new g(a&&a.cms||i.cms),i.getRelated&&"function"==typeof i.getRelated&&(this.getRelated=i.getRelated.bind(this),this.request=k)}return a.prototype.getClip=function(a,b){var c,d;return c=this.cms,d=i.VIDEO_BASE_URL+"/clips/"+a,k.get(d).query(c.apiParams).end(function(d,e){var f,g,h,i,j,k,l,m,n,o;if(d)return console.error(d),i=e.body&&e.body.message?{code:e.body.code||d.status,message:e.body.message}:d,b(i,null);if(c.key){for(n=e.body&&e.body.videos,j=0,k=n.length;j<k;j++)if(f=n[j],f.source===c.key){m=f;break}}else m=e.body&&e.body.videos&&e.body.videos.shift();return m?(l=[],m.links&&m.links.source&&m.links.source.HLS&&m.links.source.HLS.href&&l.push({src:m.links.source.HLS.href,type:"application/x-mpegURL"}),m.links&&m.links.source&&m.links.source.mezzanine&&m.links.source.mezzanine.href&&l.push({src:m.links.source.mezzanine.href,type:"video/mp4"}),o=m.ad&&m.ad.bundle?m.ad.bundle:"Not Applicable",m.tracking&&(h=""+(m.tracking.leagueName&&"no league"!==m.tracking.leagueName.toLowerCase())?m.tracking.leagueName:m.tracking.sportName),g={advertisingId:c.adAssetId(m.id),assetName:m.tracking&&m.tracking.trackingName,description:m.description,cerebroId:m.cerebroId,comscoreC6:h,duration:m.duration,headline:m.headline,id:m.id,mediaId:c.apiMediaId(m.id),mediaType:m.tracking&&m.tracking.coverageType,originalPublishDate:m.originalPublishDate,posterHref:m.posterImages.full.href,showcode:o,sources:l,syndicatable:m.syndicatable,webHref:m.links.web.href},b(null,g)):(d="Clip "+c.apiMediaId(a)+" not found.",console.error(d),b(d,null))})},a.prototype.getClipThroughShield=function(a,b){var c;return c=new h,/\:/.test(a)&&(a=a.split(":")[1]),/^[\d]*$/.test(a)?this.getClip(a,function(a,d){return a?(console.error(a),b(a,null)):void 0===d.cerebroId&&!0===i.BypassShieldDeviceAndGeoRestrictions?(console.warn("Bypassing Shield device and geo restrictions is STRONGLY discouraged!"),b(a,d)):c.getClip(d.cerebroId,b,d)}):c.getClip(a,b)},a.prototype.getChannel=function(a,b){return e({networks:a,types:"live"},b)},a.prototype.getListing=function(a,b){return e({id:a},b)},a.prototype.getRelated=function(a,b,c){var d,e,f;return e=i.getRelatedBaseURL||i.VIDEOHUB_BASE_URL+"/player/getRelatedFeed",f={mediaId:this.cms.apiMediaId(a)},b.country&&(f.country=b.country.substr(b.country.indexOf("_")+1)),d=[],k.get(e).query(f).accept("xml").end(function(a,b){var e,f,g,h,i,j,k;if(a)return console.error(a),c(a,null);for(h=b.xhr.responseXML.getElementsByTagName("item"),e=0,i=h.length;e<i;e++)f=h[e],g=f.querySelector("asseturl").textContent||":",j=f.querySelector("contentCategories"),j&&(k=j.getElementsByTagName("category")),d.push({caption:f.querySelector("caption").textContent,duration:f.getAttribute("duration"),headline:f.querySelector("headline").textContent,id:g.split(":")[1],poster:f.querySelector("thumbnailurl").textContent,source:g.split(":")[0],web:f.querySelector("hostedAtURL").textContent,mediaId:g,mediaType:(f.querySelector("mediaType")||{}).textContent,contentCategories:Array.prototype.map.call(k||[],function(a){return a.textContent})});return c(null,d)})},a.prototype.getProvidersByClient=function(a,b){var c;return c=i.WATCH_BASE_URL+"/clients/"+a+"/providers",k.get(c).end(function(a,c){var d;return a?(console.error(a),b(a,null)):(d=c.body&&c.body.clients&&c.body.clients.length>0&&c.body.clients[0].providers||[],b(null,d))})},a}(),f.configure=function(a){return j(i,a,d),i},a.exports=f},function(a,b,c){(function(b,c,d){!function(b){a.exports=b()}(function(){var a,e,f;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof _dereq_&&_dereq_;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof _dereq_&&_dereq_,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";b.exports=function(a){function b(a){var b=new c(a),d=b.promise();return b.setHowMany(1),b.setUnwrap(),b.init(),d}var c=a._SomePromiseArray;a.any=function(a){return b(a)},a.prototype.any=function(){return b(this)}}},{}],2:[function(a,c,d){"use strict";function e(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new k(16),this._normalQueue=new k(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var a=this;this.drainQueues=function(){a._drainQueues()},this._schedule=j}function f(a,b,c){this._lateQueue.push(a,b,c),this._queueTick()}function g(a,b,c){this._normalQueue.push(a,b,c),this._queueTick()}function h(a){this._normalQueue._pushOne(a),this._queueTick()}var i;try{throw new Error}catch(a){i=a}var j=a("./schedule"),k=a("./queue"),l=a("./util");e.prototype.setScheduler=function(a){var b=this._schedule;return this._schedule=a,this._customScheduler=!0,b},e.prototype.hasCustomScheduler=function(){return this._customScheduler},e.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},e.prototype.disableTrampolineIfNecessary=function(){l.hasDevTools&&(this._trampolineEnabled=!1)},e.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},e.prototype.fatalError=function(a,c){c?(b.stderr.write("Fatal "+(a instanceof Error?a.stack:a)+"\n"),b.exit(2)):this.throwLater(a)},e.prototype.throwLater=function(a,b){if(1===arguments.length&&(b=a,a=function(){throw b}),"undefined"!=typeof setTimeout)setTimeout(function(){a(b)},0);else try{this._schedule(function(){a(b)})}catch(a){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},l.hasDevTools?(e.prototype.invokeLater=function(a,b,c){this._trampolineEnabled?f.call(this,a,b,c):this._schedule(function(){setTimeout(function(){a.call(b,c)},100)})},e.prototype.invoke=function(a,b,c){this._trampolineEnabled?g.call(this,a,b,c):this._schedule(function(){a.call(b,c)})},e.prototype.settlePromises=function(a){this._trampolineEnabled?h.call(this,a):this._schedule(function(){a._settlePromises()})}):(e.prototype.invokeLater=f,e.prototype.invoke=g,e.prototype.settlePromises=h),e.prototype.invokeFirst=function(a,b,c){this._normalQueue.unshift(a,b,c),this._queueTick()},e.prototype._drainQueue=function(a){for(;a.length()>0;){var b=a.shift();if("function"==typeof b){var c=a.shift(),d=a.shift();b.call(c,d)}else b._settlePromises()}},e.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},e.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},e.prototype._reset=function(){this._isTickUsed=!1},c.exports=e,c.exports.firstLineError=i},{"./queue":26,"./schedule":29,
"./util":36}],3:[function(a,b,c){"use strict";b.exports=function(a,b,c,d){var e=!1,f=function(a,b){this._reject(b)},g=function(a,b){b.promiseRejectionQueued=!0,b.bindingPromise._then(f,f,null,this,a)},h=function(a,b){0==(50397184&this._bitField)&&this._resolveCallback(b.target)},i=function(a,b){b.promiseRejectionQueued||this._reject(a)};a.prototype.bind=function(f){e||(e=!0,a.prototype._propagateFrom=d.propagateFromFunction(),a.prototype._boundValue=d.boundValueFunction());var j=c(f),k=new a(b);k._propagateFrom(this,1);var l=this._target();if(k._setBoundTo(j),j instanceof a){var m={promiseRejectionQueued:!1,promise:k,target:l,bindingPromise:j};l._then(b,g,void 0,k,m),j._then(h,i,void 0,k,m),k._setOnCancel(j)}else k._resolveCallback(l);return k},a.prototype._setBoundTo=function(a){void 0!==a?(this._bitField=2097152|this._bitField,this._boundTo=a):this._bitField=-2097153&this._bitField},a.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},a.bind=function(b,c){return a.resolve(c).bind(b)}}},{}],4:[function(a,b,c){"use strict";function d(){try{Promise===f&&(Promise=e)}catch(a){}return f}var e;"undefined"!=typeof Promise&&(e=Promise);var f=a("./promise")();f.noConflict=d,b.exports=f},{"./promise":22}],5:[function(a,b,c){"use strict";var d=Object.create;if(d){var e=d(null),f=d(null);e[" size"]=f[" size"]=0}b.exports=function(b){function c(a,c){var d;if(null!=a&&(d=a[c]),"function"!=typeof d){var e="Object "+h.classString(a)+" has no method '"+h.toString(c)+"'";throw new b.TypeError(e)}return d}function d(a){return c(a,this.pop()).apply(a,this)}function e(a){return a[this]}function f(a){var b=+this;return b<0&&(b=Math.max(0,b+a.length)),a[b]}var g,h=a("./util"),i=h.canEvaluate;h.isIdentifier;b.prototype.call=function(a){var b=[].slice.call(arguments,1);return b.push(a),this._then(d,void 0,void 0,b,void 0)},b.prototype.get=function(a){var b,c="number"==typeof a;if(c)b=f;else if(i){var d=g(a);b=null!==d?d:e}else b=e;return this._then(b,void 0,void 0,a,void 0)}}},{"./util":36}],6:[function(a,b,c){"use strict";b.exports=function(b,c,d,e){var f=a("./util"),g=f.tryCatch,h=f.errorObj,i=b._async;b.prototype.break=b.prototype.cancel=function(){if(!e.cancellation())return this._warn("cancellation is disabled");for(var a=this,b=a;a._isCancellable();){if(!a._cancelBy(b)){b._isFollowing()?b._followee().cancel():b._cancelBranched();break}var c=a._cancellationParent;if(null==c||!c._isCancellable()){a._isFollowing()?a._followee().cancel():a._cancelBranched();break}a._isFollowing()&&a._followee().cancel(),a._setWillBeCancelled(),b=a,a=c}},b.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},b.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},b.prototype._cancelBy=function(a){return a===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},b.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},b.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),i.invoke(this._cancelPromises,this,void 0))},b.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},b.prototype._unsetOnCancel=function(){this._onCancelField=void 0},b.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},b.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},b.prototype._doInvokeOnCancel=function(a,b){if(f.isArray(a))for(var c=0;c<a.length;++c)this._doInvokeOnCancel(a[c],b);else if(void 0!==a)if("function"==typeof a){if(!b){var d=g(a).call(this._boundValue());d===h&&(this._attachExtraTrace(d.e),i.throwLater(d.e))}}else a._resultCancelled(this)},b.prototype._invokeOnCancel=function(){var a=this._onCancel();this._unsetOnCancel(),i.invoke(this._doInvokeOnCancel,this,a)},b.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},b.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(a,b,c){"use strict";b.exports=function(b){function c(a,c,h){return function(i){var j=h._boundValue();a:for(var k=0;k<a.length;++k){var l=a[k];if(l===Error||null!=l&&l.prototype instanceof Error){if(i instanceof l)return f(c).call(j,i)}else if("function"==typeof l){var m=f(l).call(j,i);if(m===g)return m;if(m)return f(c).call(j,i)}else if(d.isObject(i)){for(var n=e(l),o=0;o<n.length;++o){var p=n[o];if(l[p]!=i[p])continue a}return f(c).call(j,i)}}return b}}var d=a("./util"),e=a("./es5").keys,f=d.tryCatch,g=d.errorObj;return c}},{"./es5":13,"./util":36}],8:[function(a,b,c){"use strict";b.exports=function(a){function b(){this._trace=new b.CapturedTrace(d())}function c(){if(e)return new b}function d(){var a=f.length-1;if(a>=0)return f[a]}var e=!1,f=[];return a.prototype._promiseCreated=function(){},a.prototype._pushContext=function(){},a.prototype._popContext=function(){return null},a._peekContext=a.prototype._peekContext=function(){},b.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,f.push(this._trace))},b.prototype._popContext=function(){if(void 0!==this._trace){var a=f.pop(),b=a._promiseCreated;return a._promiseCreated=null,b}return null},b.CapturedTrace=null,b.create=c,b.deactivateLongStackTraces=function(){},b.activateLongStackTraces=function(){var c=a.prototype._pushContext,f=a.prototype._popContext,g=a._peekContext,h=a.prototype._peekContext,i=a.prototype._promiseCreated;b.deactivateLongStackTraces=function(){a.prototype._pushContext=c,a.prototype._popContext=f,a._peekContext=g,a.prototype._peekContext=h,a.prototype._promiseCreated=i,e=!1},e=!0,a.prototype._pushContext=b.prototype._pushContext,a.prototype._popContext=b.prototype._popContext,a._peekContext=a.prototype._peekContext=d,a.prototype._promiseCreated=function(){var a=this._peekContext();a&&null==a._promiseCreated&&(a._promiseCreated=this)}},b}},{}],9:[function(a,c,d){"use strict";c.exports=function(c,d){function e(a,b){return{promise:b}}function f(){return!1}function g(a,b,c){var d=this;try{a(b,c,function(a){if("function"!=typeof a)throw new TypeError("onCancel must be a function, got: "+N.toString(a));d._attachCancellationCallback(a)})}catch(a){return a}}function h(a){if(!this._isCancellable())return this;var b=this._onCancel();void 0!==b?N.isArray(b)?b.push(a):this._setOnCancel([b,a]):this._setOnCancel(a)}function i(){return this._onCancelField}function j(a){this._onCancelField=a}function k(){this._cancellationParent=void 0,this._onCancelField=void 0}function l(a,b){if(0!=(1&b)){this._cancellationParent=a;var c=a._branchesRemainingToCancel;void 0===c&&(c=0),a._branchesRemainingToCancel=c+1}0!=(2&b)&&a._isBound()&&this._setBoundTo(a._boundTo)}function m(a,b){0!=(2&b)&&a._isBound()&&this._setBoundTo(a._boundTo)}function n(){var a=this._boundTo;return void 0!==a&&a instanceof c?a.isFulfilled()?a.value():void 0:a}function o(){this._trace=new G(this._peekContext())}function p(a,b){if(O(a)){var c=this._trace;if(void 0!==c&&b&&(c=c._parent),void 0!==c)c.attachExtraTrace(a);else if(!a.__stackCleaned__){var d=y(a);N.notEnumerableProp(a,"stack",d.message+"\n"+d.stack.join("\n")),N.notEnumerableProp(a,"__stackCleaned__",!0)}}}function q(a,b,c,d,e){if(void 0===a&&null!==b&&Y){if(void 0!==e&&e._returnedNonUndefined())return;if(0==(65535&d._bitField))return;c&&(c+=" ");var f="",g="";if(b._trace){for(var h=b._trace.stack.split("\n"),i=w(h),j=i.length-1;j>=0;--j){var k=i[j];if(!Q.test(k)){var l=k.match(R);l&&(f="at "+l[1]+":"+l[2]+":"+l[3]+" ");break}}if(i.length>0)for(var m=i[0],j=0;j<h.length;++j)if(h[j]===m){j>0&&(g="\n"+h[j-1]);break}}var n="a promise was created in a "+c+"handler "+f+"but was not returned from it, see http://goo.gl/rRqMUw"+g;d._warn(n,!0,b)}}function r(a,b){var c=a+" is deprecated and will be removed in a future version.";return b&&(c+=" Use "+b+" instead."),s(c)}function s(a,b,d){if(ga.warnings){var e,f=new M(a);if(b)d._attachExtraTrace(f);else if(ga.longStackTraces&&(e=c._peekContext()))e.attachExtraTrace(f);else{var g=y(f);f.stack=g.message+"\n"+g.stack.join("\n")}ba("warning",f)||z(f,"",!0)}}function t(a,b){for(var c=0;c<b.length-1;++c)b[c].push("From previous event:"),b[c]=b[c].join("\n");return c<b.length&&(b[c]=b[c].join("\n")),a+"\n"+b.join("\n")}function u(a){for(var b=0;b<a.length;++b)(0===a[b].length||b+1<a.length&&a[b][0]===a[b+1][0])&&(a.splice(b,1),b--)}function v(a){for(var b=a[0],c=1;c<a.length;++c){for(var d=a[c],e=b.length-1,f=b[e],g=-1,h=d.length-1;h>=0;--h)if(d[h]===f){g=h;break}for(var h=g;h>=0;--h){var i=d[h];if(b[e]!==i)break;b.pop(),e--}b=d}}function w(a){for(var b=[],c=0;c<a.length;++c){var d=a[c],e="    (No stack trace)"===d||S.test(d),f=e&&da(d);e&&!f&&(U&&" "!==d.charAt(0)&&(d="    "+d),b.push(d))}return b}function x(a){for(var b=a.stack.replace(/\s+$/g,"").split("\n"),c=0;c<b.length;++c){var d=b[c];if("    (No stack trace)"===d||S.test(d))break}return c>0&&(b=b.slice(c)),b}function y(a){var b=a.stack,c=a.toString();return b="string"==typeof b&&b.length>0?x(a):["    (No stack trace)"],{message:c,stack:w(b)}}function z(a,b,c){if("undefined"!=typeof console){var d;if(N.isObject(a)){var e=a.stack;d=b+T(e,a)}else d=b+String(a);"function"==typeof J?J(d,c):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(d)}}function A(a,b,c,d){var e=!1;try{"function"==typeof b&&(e=!0,"rejectionHandled"===a?b(d):b(c,d))}catch(a){L.throwLater(a)}"unhandledRejection"===a?ba(a,c,d)||e||z(c,"Unhandled rejection "):ba(a,d)}function B(a){var b;if("function"==typeof a)b="[function "+(a.name||"anonymous")+"]";else{b=a&&"function"==typeof a.toString?a.toString():N.toString(a);if(/\[object [a-zA-Z0-9$_]+\]/.test(b))try{b=JSON.stringify(a)}catch(a){}0===b.length&&(b="(empty array)")}return"(<"+C(b)+">, no stack trace)"}function C(a){return a.length<41?a:a.substr(0,38)+"..."}function D(){return"function"==typeof fa}function E(a){var b=a.match(ea);if(b)return{fileName:b[1],line:parseInt(b[2],10)}}function F(a,b){if(D()){for(var c,d,e=a.stack.split("\n"),f=b.stack.split("\n"),g=-1,h=-1,i=0;i<e.length;++i){var j=E(e[i]);if(j){c=j.fileName,g=j.line;break}}for(var i=0;i<f.length;++i){var j=E(f[i]);if(j){d=j.fileName,h=j.line;break}}g<0||h<0||!c||!d||c!==d||g>=h||(da=function(a){if(P.test(a))return!0;var b=E(a);return!!(b&&b.fileName===c&&g<=b.line&&b.line<=h)})}}function G(a){this._parent=a,this._promisesCreated=0;var b=this._length=1+(void 0===a?0:a._length);fa(this,G),b>32&&this.uncycle()}var H,I,J,K=c._getDomain,L=c._async,M=a("./errors").Warning,N=a("./util"),O=N.canAttachTrace,P=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,Q=/\((?:timers\.js):\d+:\d+\)/,R=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,S=null,T=null,U=!1,V=!(0==N.env("BLUEBIRD_DEBUG")),W=!(0==N.env("BLUEBIRD_WARNINGS")||!V&&!N.env("BLUEBIRD_WARNINGS")),X=!(0==N.env("BLUEBIRD_LONG_STACK_TRACES")||!V&&!N.env("BLUEBIRD_LONG_STACK_TRACES")),Y=0!=N.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(W||!!N.env("BLUEBIRD_W_FORGOTTEN_RETURN"));c.prototype.suppressUnhandledRejections=function(){var a=this._target();a._bitField=-1048577&a._bitField|524288},c.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),L.invokeLater(this._notifyUnhandledRejection,this,void 0))},c.prototype._notifyUnhandledRejectionIsHandled=function(){A("rejectionHandled",H,void 0,this)},c.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},c.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},c.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var a=this._settledValue();this._setUnhandledRejectionIsNotified(),A("unhandledRejection",I,a,this)}},c.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},c.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},c.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},c.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},c.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},c.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},c.prototype._warn=function(a,b,c){return s(a,b,c||this)},c.onPossiblyUnhandledRejection=function(a){var b=K();I="function"==typeof a?null===b?a:N.domainBind(b,a):void 0},c.onUnhandledRejectionHandled=function(a){var b=K();H="function"==typeof a?null===b?a:N.domainBind(b,a):void 0};var Z=function(){};c.longStackTraces=function(){if(L.haveItemsQueued()&&!ga.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!ga.longStackTraces&&D()){var a=c.prototype._captureStackTrace,b=c.prototype._attachExtraTrace;ga.longStackTraces=!0,Z=function(){if(L.haveItemsQueued()&&!ga.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");c.prototype._captureStackTrace=a,c.prototype._attachExtraTrace=b,d.deactivateLongStackTraces(),L.enableTrampoline(),ga.longStackTraces=!1},c.prototype._captureStackTrace=o,c.prototype._attachExtraTrace=p,d.activateLongStackTraces(),L.disableTrampolineIfNecessary()}},c.hasLongStackTraces=function(){return ga.longStackTraces&&D()};var $=function(){try{if("function"==typeof CustomEvent){var a=new CustomEvent("CustomEvent");return N.global.dispatchEvent(a),function(a,b){var c=new CustomEvent(a.toLowerCase(),{detail:b,cancelable:!0});return!N.global.dispatchEvent(c)}}if("function"==typeof Event){var a=new Event("CustomEvent");return N.global.dispatchEvent(a),function(a,b){var c=new Event(a.toLowerCase(),{cancelable:!0});return c.detail=b,!N.global.dispatchEvent(c)}}var a=document.createEvent("CustomEvent");return a.initCustomEvent("testingtheevent",!1,!0,{}),N.global.dispatchEvent(a),function(a,b){var c=document.createEvent("CustomEvent");return c.initCustomEvent(a.toLowerCase(),!1,!0,b),!N.global.dispatchEvent(c)}}catch(a){}return function(){return!1}}(),_=function(){return N.isNode?function(){return b.emit.apply(b,arguments)}:N.global?function(a){var b="on"+a.toLowerCase(),c=N.global[b];return!!c&&(c.apply(N.global,[].slice.call(arguments,1)),!0)}:function(){return!1}}(),aa={promiseCreated:e,promiseFulfilled:e,promiseRejected:e,promiseResolved:e,promiseCancelled:e,promiseChained:function(a,b,c){return{promise:b,child:c}},warning:function(a,b){return{warning:b}},unhandledRejection:function(a,b,c){return{reason:b,promise:c}},rejectionHandled:e},ba=function(a){var b=!1;try{b=_.apply(null,arguments)}catch(a){L.throwLater(a),b=!0}var c=!1;try{c=$(a,aa[a].apply(null,arguments))}catch(a){L.throwLater(a),c=!0}return c||b};c.config=function(a){if(a=Object(a),"longStackTraces"in a&&(a.longStackTraces?c.longStackTraces():!a.longStackTraces&&c.hasLongStackTraces()&&Z()),"warnings"in a){var b=a.warnings;ga.warnings=!!b,Y=ga.warnings,N.isObject(b)&&"wForgottenReturn"in b&&(Y=!!b.wForgottenReturn)}if("cancellation"in a&&a.cancellation&&!ga.cancellation){if(L.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");c.prototype._clearCancellationData=k,c.prototype._propagateFrom=l,c.prototype._onCancel=i,c.prototype._setOnCancel=j,c.prototype._attachCancellationCallback=h,c.prototype._execute=g,ca=l,ga.cancellation=!0}"monitoring"in a&&(a.monitoring&&!ga.monitoring?(ga.monitoring=!0,c.prototype._fireEvent=ba):!a.monitoring&&ga.monitoring&&(ga.monitoring=!1,c.prototype._fireEvent=f))},c.prototype._fireEvent=f,c.prototype._execute=function(a,b,c){try{a(b,c)}catch(a){return a}},c.prototype._onCancel=function(){},c.prototype._setOnCancel=function(a){},c.prototype._attachCancellationCallback=function(a){},c.prototype._captureStackTrace=function(){},c.prototype._attachExtraTrace=function(){},c.prototype._clearCancellationData=function(){},c.prototype._propagateFrom=function(a,b){};var ca=m,da=function(){return!1},ea=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;N.inherits(G,Error),d.CapturedTrace=G,G.prototype.uncycle=function(){var a=this._length;if(!(a<2)){for(var b=[],c={},d=0,e=this;void 0!==e;++d)b.push(e),e=e._parent;a=this._length=d;for(var d=a-1;d>=0;--d){var f=b[d].stack;void 0===c[f]&&(c[f]=d)}for(var d=0;d<a;++d){var g=b[d].stack,h=c[g];if(void 0!==h&&h!==d){h>0&&(b[h-1]._parent=void 0,b[h-1]._length=1),b[d]._parent=void 0,b[d]._length=1;var i=d>0?b[d-1]:this;h<a-1?(i._parent=b[h+1],i._parent.uncycle(),i._length=i._parent._length+1):(i._parent=void 0,i._length=1);for(var j=i._length+1,k=d-2;k>=0;--k)b[k]._length=j,j++;return}}}},G.prototype.attachExtraTrace=function(a){if(!a.__stackCleaned__){this.uncycle();for(var b=y(a),c=b.message,d=[b.stack],e=this;void 0!==e;)d.push(w(e.stack.split("\n"))),e=e._parent;v(d),u(d),N.notEnumerableProp(a,"stack",t(c,d)),N.notEnumerableProp(a,"__stackCleaned__",!0)}};var fa=function(){var a=/^\s*at\s*/,b=function(a,b){return"string"==typeof a?a:void 0!==b.name&&void 0!==b.message?b.toString():B(b)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,S=a,T=b;var c=Error.captureStackTrace;return da=function(a){return P.test(a)},function(a,b){Error.stackTraceLimit+=6,c(a,b),Error.stackTraceLimit-=6}}var d=new Error;if("string"==typeof d.stack&&d.stack.split("\n")[0].indexOf("stackDetection@")>=0)return S=/@/,T=b,U=!0,function(a){a.stack=(new Error).stack};var e;try{throw new Error}catch(a){e="stack"in a}return"stack"in d||!e||"number"!=typeof Error.stackTraceLimit?(T=function(a,b){return"string"==typeof a?a:"object"!=typeof b&&"function"!=typeof b||void 0===b.name||void 0===b.message?B(b):b.toString()},null):(S=a,T=b,function(a){Error.stackTraceLimit+=6;try{throw new Error}catch(b){a.stack=b.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(J=function(a){console.warn(a)},N.isNode&&b.stderr.isTTY?J=function(a,b){var c=b?"[33m":"[31m";console.warn(c+a+"[0m\n")}:N.isNode||"string"!=typeof(new Error).stack||(J=function(a,b){console.warn("%c"+a,b?"color: darkorange":"color: red")}));var ga={warnings:W,longStackTraces:!1,cancellation:!1,monitoring:!1};return X&&c.longStackTraces(),{longStackTraces:function(){return ga.longStackTraces},warnings:function(){return ga.warnings},cancellation:function(){return ga.cancellation},monitoring:function(){return ga.monitoring},propagateFromFunction:function(){return ca},boundValueFunction:function(){return n},checkForgottenReturns:q,setBounds:F,warn:s,deprecated:r,CapturedTrace:G,fireDomEvent:$,fireGlobalEvent:_}}},{"./errors":12,"./util":36}],10:[function(a,b,c){"use strict";b.exports=function(a){function b(){return this.value}function c(){throw this.reason}a.prototype.return=a.prototype.thenReturn=function(c){return c instanceof a&&c.suppressUnhandledRejections(),this._then(b,void 0,void 0,{value:c},void 0)},a.prototype.throw=a.prototype.thenThrow=function(a){return this._then(c,void 0,void 0,{reason:a},void 0)},a.prototype.catchThrow=function(a){if(arguments.length<=1)return this._then(void 0,c,void 0,{reason:a},void 0);var b=arguments[1],d=function(){throw b};return this.caught(a,d)},a.prototype.catchReturn=function(c){if(arguments.length<=1)return c instanceof a&&c.suppressUnhandledRejections(),this._then(void 0,b,void 0,{value:c},void 0);var d=arguments[1];d instanceof a&&d.suppressUnhandledRejections();var e=function(){return d};return this.caught(c,e)}}},{}],11:[function(a,b,c){"use strict";b.exports=function(a,b){function c(){return f(this)}function d(a,c){return e(a,c,b,b)}var e=a.reduce,f=a.all;a.prototype.each=function(a){return e(this,a,b,0)._then(c,void 0,void 0,this,void 0)},a.prototype.mapSeries=function(a){return e(this,a,b,b)},a.each=function(a,d){return e(a,d,b,0)._then(c,void 0,void 0,a,void 0)},a.mapSeries=d}},{}],12:[function(a,b,c){"use strict";function d(a,b){function c(d){if(!(this instanceof c))return new c(d);l(this,"message","string"==typeof d?d:b),l(this,"name",a),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return k(c,Error),c}function e(a){if(!(this instanceof e))return new e(a);l(this,"name","OperationalError"),l(this,"message",a),this.cause=a,this.isOperational=!0,a instanceof Error?(l(this,"message",a.message),l(this,"stack",a.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}var f,g,h=a("./es5"),i=h.freeze,j=a("./util"),k=j.inherits,l=j.notEnumerableProp,m=d("Warning","warning"),n=d("CancellationError","cancellation error"),o=d("TimeoutError","timeout error"),p=d("AggregateError","aggregate error");try{f=TypeError,g=RangeError}catch(a){f=d("TypeError","type error"),g=d("RangeError","range error")}for(var q="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),r=0;r<q.length;++r)"function"==typeof Array.prototype[q[r]]&&(p.prototype[q[r]]=Array.prototype[q[r]]);h.defineProperty(p.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),p.prototype.isOperational=!0;var s=0;p.prototype.toString=function(){var a=Array(4*s+1).join(" "),b="\n"+a+"AggregateError of:\n";s++,a=Array(4*s+1).join(" ");for(var c=0;c<this.length;++c){for(var d=this[c]===this?"[Circular AggregateError]":this[c]+"",e=d.split("\n"),f=0;f<e.length;++f)e[f]=a+e[f];d=e.join("\n"),b+=d+"\n"}return s--,b},k(e,Error);var t=Error.__BluebirdErrorTypes__;t||(t=i({CancellationError:n,TimeoutError:o,OperationalError:e,RejectionError:e,AggregateError:p}),h.defineProperty(Error,"__BluebirdErrorTypes__",{value:t,writable:!1,enumerable:!1,configurable:!1})),b.exports={Error:Error,TypeError:f,RangeError:g,CancellationError:t.CancellationError,OperationalError:t.OperationalError,TimeoutError:t.TimeoutError,AggregateError:t.AggregateError,Warning:m}},{"./es5":13,"./util":36}],13:[function(a,b,c){var d=function(){"use strict";return void 0===this}();if(d)b.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:d,propertyIsWritable:function(a,b){var c=Object.getOwnPropertyDescriptor(a,b);return!(c&&!c.writable&&!c.set)}};else{var e={}.hasOwnProperty,f={}.toString,g={}.constructor.prototype,h=function(a){var b=[];for(var c in a)e.call(a,c)&&b.push(c);return b},i=function(a,b){return{value:a[b]}},j=function(a,b,c){return a[b]=c.value,a},k=function(a){return a},l=function(a){try{return Object(a).constructor.prototype}catch(a){return g}},m=function(a){try{return"[object Array]"===f.call(a)}catch(a){return!1}};b.exports={isArray:m,keys:h,names:h,defineProperty:j,getDescriptor:i,freeze:k,getPrototypeOf:l,isES5:d,propertyIsWritable:function(){return!0}}}},{}],14:[function(a,b,c){"use strict";b.exports=function(a,b){var c=a.map;a.prototype.filter=function(a,d){return c(this,a,d,b)},a.filter=function(a,d,e){return c(a,d,e,b)}}},{}],15:[function(a,b,c){"use strict";b.exports=function(b,c){function d(a,b,c){this.promise=a,this.type=b,this.handler=c,this.called=!1,this.cancelPromise=null}function e(a){this.finallyHandler=a}function f(a,b){return null!=a.cancelPromise&&(arguments.length>1?a.cancelPromise._reject(b):a.cancelPromise._cancel(),a.cancelPromise=null,!0)}function g(){return i.call(this,this.promise._target()._settledValue())}function h(a){if(!f(this,a))return l.e=a,l}function i(a){var d=this.promise,i=this.handler;if(!this.called){this.called=!0;var j=this.isFinallyHandler()?i.call(d._boundValue()):i.call(d._boundValue(),a);if(void 0!==j){d._setReturnedNonUndefined();var m=c(j,d);if(m instanceof b){if(null!=this.cancelPromise){if(m._isCancelled()){var n=new k("late cancellation observer");return d._attachExtraTrace(n),l.e=n,l}m.isPending()&&m._attachCancellationCallback(new e(this))}return m._then(g,h,void 0,this,void 0)}}}return d.isRejected()?(f(this),l.e=a,l):(f(this),a)}var j=a("./util"),k=b.CancellationError,l=j.errorObj;return d.prototype.isFinallyHandler=function(){return 0===this.type},e.prototype._resultCancelled=function(){f(this.finallyHandler)},b.prototype._passThrough=function(a,b,c,e){return"function"!=typeof a?this.then():this._then(c,e,void 0,new d(this,b,a),void 0)},b.prototype.lastly=b.prototype.finally=function(a){return this._passThrough(a,0,i,i)},b.prototype.tap=function(a){return this._passThrough(a,1,i)},d}},{"./util":36}],16:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){function h(a,c,d){for(var f=0;f<c.length;++f){d._pushContext();var g=n(c[f])(a);if(d._popContext(),g===m){d._pushContext();var h=b.reject(m.e);return d._popContext(),h}var i=e(g,d);if(i instanceof b)return i}return null}function i(a,c,e,f){if(g.cancellation()){var h=new b(d),i=this._finallyPromise=new b(d);this._promise=h.lastly(function(){return i}),h._captureStackTrace(),h._setOnCancel(this)}else{(this._promise=new b(d))._captureStackTrace()}this._stack=f,this._generatorFunction=a,this._receiver=c,this._generator=void 0,this._yieldHandlers="function"==typeof e?[e].concat(o):o,this._yieldedPromise=null,this._cancellationPhase=!1}var j=a("./errors"),k=j.TypeError,l=a("./util"),m=l.errorObj,n=l.tryCatch,o=[];l.inherits(i,f),i.prototype._isResolved=function(){return null===this._promise},i.prototype._cleanup=function(){this._promise=this._generator=null,g.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},i.prototype._promiseCancelled=function(){if(!this._isResolved()){var a,c=void 0!==this._generator.return;if(c)this._promise._pushContext(),a=n(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var d=new b.CancellationError("generator .return() sentinel");b.coroutine.returnSentinel=d,this._promise._attachExtraTrace(d),this._promise._pushContext(),a=n(this._generator.throw).call(this._generator,d),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(a)}},i.prototype._promiseFulfilled=function(a){this._yieldedPromise=null,this._promise._pushContext();var b=n(this._generator.next).call(this._generator,a);this._promise._popContext(),this._continue(b)},i.prototype._promiseRejected=function(a){this._yieldedPromise=null,this._promise._attachExtraTrace(a),this._promise._pushContext();var b=n(this._generator.throw).call(this._generator,a);this._promise._popContext(),this._continue(b)},i.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof b){var a=this._yieldedPromise;this._yieldedPromise=null,a.cancel()}},i.prototype.promise=function(){return this._promise},i.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},i.prototype._continue=function(a){var c=this._promise;if(a===m)return this._cleanup(),this._cancellationPhase?c.cancel():c._rejectCallback(a.e,!1);var d=a.value;if(!0===a.done)return this._cleanup(),this._cancellationPhase?c.cancel():c._resolveCallback(d);var f=e(d,this._promise);if(!(f instanceof b)&&null===(f=h(f,this._yieldHandlers,this._promise)))return void this._promiseRejected(new k("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",d)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));f=f._target();var g=f._bitField;0==(50397184&g)?(this._yieldedPromise=f,f._proxy(this,null)):0!=(33554432&g)?b._async.invoke(this._promiseFulfilled,this,f._value()):0!=(16777216&g)?b._async.invoke(this._promiseRejected,this,f._reason()):this._promiseCancelled()},b.coroutine=function(a,b){if("function"!=typeof a)throw new k("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var c=Object(b).yieldHandler,d=i,e=(new Error).stack;return function(){var b=a.apply(this,arguments),f=new d(void 0,void 0,c,e),g=f.promise();return f._generator=b,f._promiseFulfilled(void 0),g}},b.coroutine.addYieldHandler=function(a){if("function"!=typeof a)throw new k("expecting a function but got "+l.classString(a));o.push(a)},b.spawn=function(a){if(g.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof a)return c("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var d=new i(a,this),e=d.promise();return d._run(b.spawn),e}}},{"./errors":12,"./util":36}],17:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){var h=a("./util");h.canEvaluate,h.tryCatch,h.errorObj;b.join=function(){var a,b=arguments.length-1;if(b>0&&"function"==typeof arguments[b]){a=arguments[b];var d}var e=[].slice.call(arguments);a&&e.pop();var d=new c(e).promise();return void 0!==a?d.spread(a):d}}},{"./util":36}],18:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){function h(a,b,c,d){this.constructor$(a),this._promise._captureStackTrace();var e=j();this._callback=null===e?b:k.domainBind(e,b),this._preservedValues=d===f?new Array(this.length()):null,this._limit=c,this._inFlight=0,this._queue=[],this._init$(void 0,-2)}function i(a,c,e,f){if("function"!=typeof c)return d("expecting a function but got "+k.classString(c));var g=0;if(void 0!==e){if("object"!=typeof e||null===e)return b.reject(new TypeError("options argument must be an object but it is "+k.classString(e)));if("number"!=typeof e.concurrency)return b.reject(new TypeError("'concurrency' must be a number but it is "+k.classString(e.concurrency)));g=e.concurrency}return g="number"==typeof g&&isFinite(g)&&g>=1?g:0,new h(a,c,g,f).promise()}var j=b._getDomain,k=a("./util"),l=k.tryCatch,m=k.errorObj;k.inherits(h,c),h.prototype._init=function(){},h.prototype._promiseFulfilled=function(a,c){var d=this._values,f=this.length(),h=this._preservedValues,i=this._limit;if(c<0){if(c=-1*c-1,d[c]=a,i>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(i>=1&&this._inFlight>=i)return d[c]=a,this._queue.push(c),!1;null!==h&&(h[c]=a);var j=this._promise,k=this._callback,n=j._boundValue();j._pushContext();var o=l(k).call(n,a,c,f),p=j._popContext();if(g.checkForgottenReturns(o,p,null!==h?"Promise.filter":"Promise.map",j),o===m)return this._reject(o.e),!0;var q=e(o,this._promise);if(q instanceof b){q=q._target();var r=q._bitField;if(0==(50397184&r))return i>=1&&this._inFlight++,d[c]=q,q._proxy(this,-1*(c+1)),!1;if(0==(33554432&r))return 0!=(16777216&r)?(this._reject(q._reason()),!0):(this._cancel(),!0);o=q._value()}d[c]=o}return++this._totalResolved>=f&&(null!==h?this._filter(d,h):this._resolve(d),!0)},h.prototype._drainQueue=function(){for(var a=this._queue,b=this._limit,c=this._values;a.length>0&&this._inFlight<b;){if(this._isResolved())return;var d=a.pop();this._promiseFulfilled(c[d],d)}},h.prototype._filter=function(a,b){for(var c=b.length,d=new Array(c),e=0,f=0;f<c;++f)a[f]&&(d[e++]=b[f]);d.length=e,this._resolve(d)},h.prototype.preservedValues=function(){return this._preservedValues},b.prototype.map=function(a,b){return i(this,a,b,null)},b.map=function(a,b,c,d){return i(a,b,c,d)}}},{"./util":36}],19:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f){var g=a("./util"),h=g.tryCatch;b.method=function(a){if("function"!=typeof a)throw new b.TypeError("expecting a function but got "+g.classString(a));return function(){var d=new b(c);d._captureStackTrace(),d._pushContext();var e=h(a).apply(this,arguments),g=d._popContext();return f.checkForgottenReturns(e,g,"Promise.method",d),d._resolveFromSyncValue(e),d}},b.attempt=b.try=function(a){if("function"!=typeof a)return e("expecting a function but got "+g.classString(a));var d=new b(c);d._captureStackTrace(),d._pushContext();var i;if(arguments.length>1){
f.deprecated("calling Promise.try with more than 1 argument");var j=arguments[1],k=arguments[2];i=g.isArray(j)?h(a).apply(k,j):h(a).call(k,j)}else i=h(a)();var l=d._popContext();return f.checkForgottenReturns(i,l,"Promise.try",d),d._resolveFromSyncValue(i),d},b.prototype._resolveFromSyncValue=function(a){a===g.errorObj?this._rejectCallback(a.e,!1):this._resolveCallback(a,!0)}}},{"./util":36}],20:[function(a,b,c){"use strict";function d(a){return a instanceof Error&&k.getPrototypeOf(a)===Error.prototype}function e(a){var b;if(d(a)){b=new j(a),b.name=a.name,b.message=a.message,b.stack=a.stack;for(var c=k.keys(a),e=0;e<c.length;++e){var f=c[e];l.test(f)||(b[f]=a[f])}return b}return g.markAsOriginatingFromRejection(a),a}function f(a,b){return function(c,d){if(null!==a){if(c){var f=e(h(c));a._attachExtraTrace(f),a._reject(f)}else if(b){var g=[].slice.call(arguments,1);a._fulfill(g)}else a._fulfill(d);a=null}}}var g=a("./util"),h=g.maybeWrapAsError,i=a("./errors"),j=i.OperationalError,k=a("./es5"),l=/^(?:name|message|stack|cause)$/;b.exports=f},{"./errors":12,"./es5":13,"./util":36}],21:[function(a,b,c){"use strict";b.exports=function(b){function c(a,b){var c=this;if(!f.isArray(a))return d.call(c,a,b);var e=h(b).apply(c._boundValue(),[null].concat(a));e===i&&g.throwLater(e.e)}function d(a,b){var c=this,d=c._boundValue(),e=void 0===a?h(b).call(d,null):h(b).call(d,null,a);e===i&&g.throwLater(e.e)}function e(a,b){var c=this;if(!a){var d=new Error(a+"");d.cause=a,a=d}var e=h(b).call(c._boundValue(),a);e===i&&g.throwLater(e.e)}var f=a("./util"),g=b._async,h=f.tryCatch,i=f.errorObj;b.prototype.asCallback=b.prototype.nodeify=function(a,b){if("function"==typeof a){var f=d;void 0!==b&&Object(b).spread&&(f=c),this._then(f,e,void 0,this,a)}return this}}},{"./util":36}],22:[function(a,c,d){"use strict";c.exports=function(){function d(){}function e(a,b){if("function"!=typeof b)throw new t("expecting a function but got "+o.classString(b));if(a.constructor!==f)throw new t("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}function f(a){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,a!==v&&(e(this,a),this._resolveFromExecutor(a)),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function g(a){this.promise._resolveCallback(a)}function h(a){this.promise._rejectCallback(a,!1)}function i(a){var b=new f(v);b._fulfillmentHandler0=a,b._rejectionHandler0=a,b._promise0=a,b._receiver0=a}var j,k=function(){return new t("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},l=function(){return new f.PromiseInspection(this._target())},m=function(a){return f.reject(new t(a))},n={},o=a("./util");j=o.isNode?function(){var a=b.domain;return void 0===a&&(a=null),a}:function(){return null},o.notEnumerableProp(f,"_getDomain",j);var p=a("./es5"),q=a("./async"),r=new q;p.defineProperty(f,"_async",{value:r});var s=a("./errors"),t=f.TypeError=s.TypeError;f.RangeError=s.RangeError;var u=f.CancellationError=s.CancellationError;f.TimeoutError=s.TimeoutError,f.OperationalError=s.OperationalError,f.RejectionError=s.OperationalError,f.AggregateError=s.AggregateError;var v=function(){},w={},x={},y=a("./thenables")(f,v),z=a("./promise_array")(f,v,y,m,d),A=a("./context")(f),B=A.create,C=a("./debuggability")(f,A),D=(C.CapturedTrace,a("./finally")(f,y)),E=a("./catch_filter")(x),F=a("./nodeback"),G=o.errorObj,H=o.tryCatch;return f.prototype.toString=function(){return"[object Promise]"},f.prototype.caught=f.prototype.catch=function(a){var b=arguments.length;if(b>1){var c,d=new Array(b-1),e=0;for(c=0;c<b-1;++c){var f=arguments[c];if(!o.isObject(f))return m("expecting an object but got A catch statement predicate "+o.classString(f));d[e++]=f}return d.length=e,a=arguments[c],this.then(void 0,E(d,a,this))}return this.then(void 0,a)},f.prototype.reflect=function(){return this._then(l,l,void 0,this,void 0)},f.prototype.then=function(a,b){if(C.warnings()&&arguments.length>0&&"function"!=typeof a&&"function"!=typeof b){var c=".then() only accepts functions but was passed: "+o.classString(a);arguments.length>1&&(c+=", "+o.classString(b)),this._warn(c)}return this._then(a,b,void 0,void 0,void 0)},f.prototype.done=function(a,b){this._then(a,b,void 0,void 0,void 0)._setIsFinal()},f.prototype.spread=function(a){return"function"!=typeof a?m("expecting a function but got "+o.classString(a)):this.all()._then(a,void 0,void 0,w,void 0)},f.prototype.toJSON=function(){var a={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(a.fulfillmentValue=this.value(),a.isFulfilled=!0):this.isRejected()&&(a.rejectionReason=this.reason(),a.isRejected=!0),a},f.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new z(this).promise()},f.prototype.error=function(a){return this.caught(o.originatesFromRejection,a)},f.getNewLibraryCopy=c.exports,f.is=function(a){return a instanceof f},f.fromNode=f.fromCallback=function(a){var b=new f(v);b._captureStackTrace();var c=arguments.length>1&&!!Object(arguments[1]).multiArgs,d=H(a)(F(b,c));return d===G&&b._rejectCallback(d.e,!0),b._isFateSealed()||b._setAsyncGuaranteed(),b},f.all=function(a){return new z(a).promise()},f.cast=function(a){var b=y(a);return b instanceof f||(b=new f(v),b._captureStackTrace(),b._setFulfilled(),b._rejectionHandler0=a),b},f.resolve=f.fulfilled=f.cast,f.reject=f.rejected=function(a){var b=new f(v);return b._captureStackTrace(),b._rejectCallback(a,!0),b},f.setScheduler=function(a){if("function"!=typeof a)throw new t("expecting a function but got "+o.classString(a));return r.setScheduler(a)},f.prototype._then=function(a,b,c,d,e){var g=void 0!==e,h=g?e:new f(v),i=this._target(),k=i._bitField;g||(h._propagateFrom(this,3),h._captureStackTrace(),void 0===d&&0!=(2097152&this._bitField)&&(d=0!=(50397184&k)?this._boundValue():i===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,h));var l=j();if(0!=(50397184&k)){var m,n,p=i._settlePromiseCtx;0!=(33554432&k)?(n=i._rejectionHandler0,m=a):0!=(16777216&k)?(n=i._fulfillmentHandler0,m=b,i._unsetRejectionIsUnhandled()):(p=i._settlePromiseLateCancellationObserver,n=new u("late cancellation observer"),i._attachExtraTrace(n),m=b),r.invoke(p,i,{handler:null===l?m:"function"==typeof m&&o.domainBind(l,m),promise:h,receiver:d,value:n})}else i._addCallbacks(a,b,h,d,l);return h},f.prototype._length=function(){return 65535&this._bitField},f.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},f.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},f.prototype._setLength=function(a){this._bitField=-65536&this._bitField|65535&a},f.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},f.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},f.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},f.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},f.prototype._isFinal=function(){return(4194304&this._bitField)>0},f.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},f.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},f.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},f.prototype._setAsyncGuaranteed=function(){r.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},f.prototype._receiverAt=function(a){var b=0===a?this._receiver0:this[4*a-4+3];if(b!==n)return void 0===b&&this._isBound()?this._boundValue():b},f.prototype._promiseAt=function(a){return this[4*a-4+2]},f.prototype._fulfillmentHandlerAt=function(a){return this[4*a-4+0]},f.prototype._rejectionHandlerAt=function(a){return this[4*a-4+1]},f.prototype._boundValue=function(){},f.prototype._migrateCallback0=function(a){var b=(a._bitField,a._fulfillmentHandler0),c=a._rejectionHandler0,d=a._promise0,e=a._receiverAt(0);void 0===e&&(e=n),this._addCallbacks(b,c,d,e,null)},f.prototype._migrateCallbackAt=function(a,b){var c=a._fulfillmentHandlerAt(b),d=a._rejectionHandlerAt(b),e=a._promiseAt(b),f=a._receiverAt(b);void 0===f&&(f=n),this._addCallbacks(c,d,e,f,null)},f.prototype._addCallbacks=function(a,b,c,d,e){var f=this._length();if(f>=65531&&(f=0,this._setLength(0)),0===f)this._promise0=c,this._receiver0=d,"function"==typeof a&&(this._fulfillmentHandler0=null===e?a:o.domainBind(e,a)),"function"==typeof b&&(this._rejectionHandler0=null===e?b:o.domainBind(e,b));else{var g=4*f-4;this[g+2]=c,this[g+3]=d,"function"==typeof a&&(this[g+0]=null===e?a:o.domainBind(e,a)),"function"==typeof b&&(this[g+1]=null===e?b:o.domainBind(e,b))}return this._setLength(f+1),f},f.prototype._proxy=function(a,b){this._addCallbacks(void 0,void 0,b,a,null)},f.prototype._resolveCallback=function(a,b){if(0==(117506048&this._bitField)){if(a===this)return this._rejectCallback(k(),!1);var c=y(a,this);if(!(c instanceof f))return this._fulfill(a);b&&this._propagateFrom(c,2);var d=c._target();if(d===this)return void this._reject(k());var e=d._bitField;if(0==(50397184&e)){var g=this._length();g>0&&d._migrateCallback0(this);for(var h=1;h<g;++h)d._migrateCallbackAt(this,h);this._setFollowing(),this._setLength(0),this._setFollowee(d)}else if(0!=(33554432&e))this._fulfill(d._value());else if(0!=(16777216&e))this._reject(d._reason());else{var i=new u("late cancellation observer");d._attachExtraTrace(i),this._reject(i)}}},f.prototype._rejectCallback=function(a,b,c){var d=o.ensureErrorObject(a),e=d===a;if(!e&&!c&&C.warnings()){var f="a promise was rejected with a non-error: "+o.classString(a);this._warn(f,!0)}this._attachExtraTrace(d,!!b&&e),this._reject(a)},f.prototype._resolveFromExecutor=function(a){var b=this;this._captureStackTrace(),this._pushContext();var c=!0,d=this._execute(a,function(a){b._resolveCallback(a)},function(a){b._rejectCallback(a,c)});c=!1,this._popContext(),void 0!==d&&b._rejectCallback(d,!0)},f.prototype._settlePromiseFromHandler=function(a,b,c,d){var e=d._bitField;if(0==(65536&e)){d._pushContext();var f;b===w?c&&"number"==typeof c.length?f=H(a).apply(this._boundValue(),c):(f=G,f.e=new t("cannot .spread() a non-array: "+o.classString(c))):f=H(a).call(b,c);var g=d._popContext();e=d._bitField,0==(65536&e)&&(f===x?d._reject(c):f===G?d._rejectCallback(f.e,!1):(C.checkForgottenReturns(f,g,"",d,this),d._resolveCallback(f)))}},f.prototype._target=function(){for(var a=this;a._isFollowing();)a=a._followee();return a},f.prototype._followee=function(){return this._rejectionHandler0},f.prototype._setFollowee=function(a){this._rejectionHandler0=a},f.prototype._settlePromise=function(a,b,c,e){var g=a instanceof f,h=this._bitField,i=0!=(134217728&h);0!=(65536&h)?(g&&a._invokeInternalOnCancel(),c instanceof D&&c.isFinallyHandler()?(c.cancelPromise=a,H(b).call(c,e)===G&&a._reject(G.e)):b===l?a._fulfill(l.call(c)):c instanceof d?c._promiseCancelled(a):g||a instanceof z?a._cancel():c.cancel()):"function"==typeof b?g?(i&&a._setAsyncGuaranteed(),this._settlePromiseFromHandler(b,c,e,a)):b.call(c,e,a):c instanceof d?c._isResolved()||(0!=(33554432&h)?c._promiseFulfilled(e,a):c._promiseRejected(e,a)):g&&(i&&a._setAsyncGuaranteed(),0!=(33554432&h)?a._fulfill(e):a._reject(e))},f.prototype._settlePromiseLateCancellationObserver=function(a){var b=a.handler,c=a.promise,d=a.receiver,e=a.value;"function"==typeof b?c instanceof f?this._settlePromiseFromHandler(b,d,e,c):b.call(d,e,c):c instanceof f&&c._reject(e)},f.prototype._settlePromiseCtx=function(a){this._settlePromise(a.promise,a.handler,a.receiver,a.value)},f.prototype._settlePromise0=function(a,b,c){var d=this._promise0,e=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(d,a,e,b)},f.prototype._clearCallbackDataAtIndex=function(a){var b=4*a-4;this[b+2]=this[b+3]=this[b+0]=this[b+1]=void 0},f.prototype._fulfill=function(a){var b=this._bitField;if(!((117506048&b)>>>16)){if(a===this){var c=k();return this._attachExtraTrace(c),this._reject(c)}this._setFulfilled(),this._rejectionHandler0=a,(65535&b)>0&&(0!=(134217728&b)?this._settlePromises():r.settlePromises(this))}},f.prototype._reject=function(a){var b=this._bitField;if(!((117506048&b)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=a,this._isFinal())return r.fatalError(a,o.isNode);(65535&b)>0?r.settlePromises(this):this._ensurePossibleRejectionHandled()}},f.prototype._fulfillPromises=function(a,b){for(var c=1;c<a;c++){var d=this._fulfillmentHandlerAt(c),e=this._promiseAt(c),f=this._receiverAt(c);this._clearCallbackDataAtIndex(c),this._settlePromise(e,d,f,b)}},f.prototype._rejectPromises=function(a,b){for(var c=1;c<a;c++){var d=this._rejectionHandlerAt(c),e=this._promiseAt(c),f=this._receiverAt(c);this._clearCallbackDataAtIndex(c),this._settlePromise(e,d,f,b)}},f.prototype._settlePromises=function(){var a=this._bitField,b=65535&a;if(b>0){if(0!=(16842752&a)){var c=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,c,a),this._rejectPromises(b,c)}else{var d=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,d,a),this._fulfillPromises(b,d)}this._setLength(0)}this._clearCancellationData()},f.prototype._settledValue=function(){var a=this._bitField;return 0!=(33554432&a)?this._rejectionHandler0:0!=(16777216&a)?this._fulfillmentHandler0:void 0},f.defer=f.pending=function(){return C.deprecated("Promise.defer","new Promise"),{promise:new f(v),resolve:g,reject:h}},o.notEnumerableProp(f,"_makeSelfResolutionError",k),a("./method")(f,v,y,m,C),a("./bind")(f,v,y,C),a("./cancel")(f,z,m,C),a("./direct_resolve")(f),a("./synchronous_inspection")(f),a("./join")(f,z,y,v,r,j),f.Promise=f,f.version="3.4.5",a("./map.js")(f,z,m,y,v,C),a("./call_get.js")(f),a("./using.js")(f,m,y,B,v,C),a("./timers.js")(f,v,C),a("./generators.js")(f,m,v,y,d,C),a("./nodeify.js")(f),a("./promisify.js")(f,v),a("./props.js")(f,z,y,m),a("./race.js")(f,v,y,m),a("./reduce.js")(f,z,m,y,v,C),a("./settle.js")(f,z,C),a("./some.js")(f,z,m),a("./filter.js")(f,v),a("./each.js")(f,v),a("./any.js")(f),o.toFastProperties(f),o.toFastProperties(f.prototype),i({a:1}),i({b:2}),i({c:3}),i(1),i(function(){}),i(void 0),i(!1),i(new f(v)),C.setBounds(q.firstLineError,o.lastLineError),f}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f){function g(a){switch(a){case-2:return[];case-3:return{}}}function h(a){var d=this._promise=new b(c);a instanceof b&&d._propagateFrom(a,3),d._setOnCancel(this),this._values=a,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var i=a("./util");i.isArray;return i.inherits(h,f),h.prototype.length=function(){return this._length},h.prototype.promise=function(){return this._promise},h.prototype._init=function a(c,f){var h=d(this._values,this._promise);if(h instanceof b){h=h._target();var j=h._bitField;if(this._values=h,0==(50397184&j))return this._promise._setAsyncGuaranteed(),h._then(a,this._reject,void 0,this,f);if(0==(33554432&j))return 0!=(16777216&j)?this._reject(h._reason()):this._cancel();h=h._value()}if(null===(h=i.asArray(h))){var k=e("expecting an array or an iterable object but got "+i.classString(h)).reason();return void this._promise._rejectCallback(k,!1)}if(0===h.length)return void(-5===f?this._resolveEmptyArray():this._resolve(g(f)));this._iterate(h)},h.prototype._iterate=function(a){var c=this.getActualLength(a.length);this._length=c,this._values=this.shouldCopyValues()?new Array(c):this._values;for(var e=this._promise,f=!1,g=null,h=0;h<c;++h){var i=d(a[h],e);i instanceof b?(i=i._target(),g=i._bitField):g=null,f?null!==g&&i.suppressUnhandledRejections():null!==g?0==(50397184&g)?(i._proxy(this,h),this._values[h]=i):f=0!=(33554432&g)?this._promiseFulfilled(i._value(),h):0!=(16777216&g)?this._promiseRejected(i._reason(),h):this._promiseCancelled(h):f=this._promiseFulfilled(i,h)}f||e._setAsyncGuaranteed()},h.prototype._isResolved=function(){return null===this._values},h.prototype._resolve=function(a){this._values=null,this._promise._fulfill(a)},h.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},h.prototype._reject=function(a){this._values=null,this._promise._rejectCallback(a,!1)},h.prototype._promiseFulfilled=function(a,b){return this._values[b]=a,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},h.prototype._promiseCancelled=function(){return this._cancel(),!0},h.prototype._promiseRejected=function(a){return this._totalResolved++,this._reject(a),!0},h.prototype._resultCancelled=function(){if(!this._isResolved()){var a=this._values;if(this._cancel(),a instanceof b)a.cancel();else for(var c=0;c<a.length;++c)a[c]instanceof b&&a[c].cancel()}},h.prototype.shouldCopyValues=function(){return!0},h.prototype.getActualLength=function(a){return a},h}},{"./util":36}],24:[function(a,b,c){"use strict";b.exports=function(b,c){function d(a){return!v.test(a)}function e(a){try{return!0===a.__isPromisified__}catch(a){return!1}}function f(a,b,c){var d=n.getDataPropertyOrDefault(a,b+c,t);return!!d&&e(d)}function g(a,b,c){for(var d=0;d<a.length;d+=2){var e=a[d];if(c.test(e))for(var f=e.replace(c,""),g=0;g<a.length;g+=2)if(a[g]===f)throw new s("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",b))}}function h(a,b,c,d){for(var h=n.inheritedDataKeys(a),i=[],j=0;j<h.length;++j){var k=h[j],l=a[k],m=d===w||w(k,l,a);"function"!=typeof l||e(l)||f(a,k,b)||!d(k,l,a,m)||i.push(k,l)}return g(i,b,c),i}function i(a,d,e,f,g,h){function i(){var e=d;d===m&&(e=this);var f=new b(c);f._captureStackTrace();var g="string"==typeof k&&this!==j?this[k]:a,i=o(f,h);try{g.apply(e,p(arguments,i))}catch(a){f._rejectCallback(q(a),!0,!0)}return f._isFateSealed()||f._setAsyncGuaranteed(),f}var j=function(){return this}(),k=a;return"string"==typeof k&&(a=f),n.notEnumerableProp(i,"__isPromisified__",!0),i}function j(a,b,c,d,e){for(var f=new RegExp(x(b)+"$"),g=h(a,b,f,c),i=0,j=g.length;i<j;i+=2){var k=g[i],l=g[i+1],o=k+b;if(d===y)a[o]=y(k,m,k,l,b,e);else{var p=d(l,function(){return y(k,m,k,l,b,e)});n.notEnumerableProp(p,"__isPromisified__",!0),a[o]=p}}return n.toFastProperties(a),a}function k(a,b,c){return y(a,b,void 0,a,null,c)}var l,m={},n=a("./util"),o=a("./nodeback"),p=n.withAppended,q=n.maybeWrapAsError,r=n.canEvaluate,s=a("./errors").TypeError,t={__isPromisified__:!0},u=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],v=new RegExp("^(?:"+u.join("|")+")$"),w=function(a){return n.isIdentifier(a)&&"_"!==a.charAt(0)&&"constructor"!==a},x=function(a){return a.replace(/([$])/,"\\$")},y=r?l:i;b.promisify=function(a,b){if("function"!=typeof a)throw new s("expecting a function but got "+n.classString(a));if(e(a))return a;b=Object(b);var c=void 0===b.context?m:b.context,f=!!b.multiArgs,g=k(a,c,f);return n.copyDescriptors(a,g,d),g},b.promisifyAll=function(a,b){if("function"!=typeof a&&"object"!=typeof a)throw new s("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");b=Object(b);var c=!!b.multiArgs,d=b.suffix;"string"!=typeof d&&(d="Async");var e=b.filter;"function"!=typeof e&&(e=w);var f=b.promisifier;if("function"!=typeof f&&(f=y),!n.isIdentifier(d))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var g=n.inheritedDataKeys(a),h=0;h<g.length;++h){var i=a[g[h]];"constructor"!==g[h]&&n.isClass(i)&&(j(i.prototype,d,e,f,c),j(i,d,e,f,c))}return j(a,d,e,f,c)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(a,b,c){"use strict";b.exports=function(b,c,d,e){function f(a){var b,c=!1;if(void 0!==h&&a instanceof h)b=l(a),c=!0;else{var d=k.keys(a),e=d.length;b=new Array(2*e);for(var f=0;f<e;++f){var g=d[f];b[f]=a[g],b[f+e]=g}}this.constructor$(b),this._isMap=c,this._init$(void 0,-3)}function g(a){var c,g=d(a);return j(g)?(c=g instanceof b?g._then(b.props,void 0,void 0,void 0,void 0):new f(g).promise(),g instanceof b&&c._propagateFrom(g,2),c):e("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var h,i=a("./util"),j=i.isObject,k=a("./es5");"function"==typeof Map&&(h=Map);var l=function(){function a(a,d){this[b]=a,this[b+c]=d,b++}var b=0,c=0;return function(d){c=d.size,b=0;var e=new Array(2*d.size);return d.forEach(a,e),e}}(),m=function(a){for(var b=new h,c=a.length/2|0,d=0;d<c;++d){var e=a[c+d],f=a[d];b.set(e,f)}return b};i.inherits(f,c),f.prototype._init=function(){},f.prototype._promiseFulfilled=function(a,b){if(this._values[b]=a,++this._totalResolved>=this._length){var c;if(this._isMap)c=m(this._values);else{c={};for(var d=this.length(),e=0,f=this.length();e<f;++e)c[this._values[e+d]]=this._values[e]}return this._resolve(c),!0}return!1},f.prototype.shouldCopyValues=function(){return!1},f.prototype.getActualLength=function(a){return a>>1},b.prototype.props=function(){return g(this)},b.props=function(a){return g(a)}}},{"./es5":13,"./util":36}],26:[function(a,b,c){"use strict";function d(a,b,c,d,e){for(var f=0;f<e;++f)c[f+d]=a[f+b],a[f+b]=void 0}function e(a){this._capacity=a,this._length=0,this._front=0}e.prototype._willBeOverCapacity=function(a){return this._capacity<a},e.prototype._pushOne=function(a){var b=this.length();this._checkCapacity(b+1),this[this._front+b&this._capacity-1]=a,this._length=b+1},e.prototype._unshiftOne=function(a){var b=this._capacity;this._checkCapacity(this.length()+1);var c=this._front,d=(c-1&b-1^b)-b;this[d]=a,this._front=d,this._length=this.length()+1},e.prototype.unshift=function(a,b,c){this._unshiftOne(c),this._unshiftOne(b),this._unshiftOne(a)},e.prototype.push=function(a,b,c){var d=this.length()+3;if(this._willBeOverCapacity(d))return this._pushOne(a),this._pushOne(b),void this._pushOne(c);var e=this._front+d-3;this._checkCapacity(d);var f=this._capacity-1;this[e+0&f]=a,this[e+1&f]=b,this[e+2&f]=c,this._length=d},e.prototype.shift=function(){var a=this._front,b=this[a];return this[a]=void 0,this._front=a+1&this._capacity-1,this._length--,b},e.prototype.length=function(){return this._length},e.prototype._checkCapacity=function(a){this._capacity<a&&this._resizeTo(this._capacity<<1)},e.prototype._resizeTo=function(a){var b=this._capacity;this._capacity=a,d(this,0,this,b,this._front+this._length&b-1)},b.exports=e},{}],27:[function(a,b,c){"use strict";b.exports=function(b,c,d,e){function f(a,f){var i=d(a);if(i instanceof b)return h(i);if(null===(a=g.asArray(a)))return e("expecting an array or an iterable object but got "+g.classString(a));var j=new b(c);void 0!==f&&j._propagateFrom(f,3);for(var k=j._fulfill,l=j._reject,m=0,n=a.length;m<n;++m){var o=a[m];(void 0!==o||m in a)&&b.cast(o)._then(k,l,void 0,j,null)}return j}var g=a("./util"),h=function(a){return a.then(function(b){return f(b,a)})};b.race=function(a){return f(a,void 0)},b.prototype.race=function(){return f(this,void 0)}}},{"./util":36}],28:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){function h(a,c,d,e){this.constructor$(a);var g=m();this._fn=null===g?c:n.domainBind(g,c),void 0!==d&&(d=b.resolve(d),d._attachCancellationCallback(this)),this._initialValue=d,this._currentCancellable=null,this._eachValues=e===f?Array(this._length):0===e?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function i(a,b){this.isFulfilled()?b._resolve(a):b._reject(a)}function j(a,b,c,e){return"function"!=typeof b?d("expecting a function but got "+n.classString(b)):new h(a,b,c,e).promise()}function k(a){this.accum=a,this.array._gotAccum(a);var c=e(this.value,this.array._promise);return c instanceof b?(this.array._currentCancellable=c,c._then(l,void 0,void 0,this,void 0)):l.call(this,c)}function l(a){var c=this.array,d=c._promise,e=o(c._fn);d._pushContext();var f;(f=void 0!==c._eachValues?e.call(d._boundValue(),a,this.index,this.length):e.call(d._boundValue(),this.accum,a,this.index,this.length))instanceof b&&(c._currentCancellable=f);var h=d._popContext();return g.checkForgottenReturns(f,h,void 0!==c._eachValues?"Promise.each":"Promise.reduce",d),f}var m=b._getDomain,n=a("./util"),o=n.tryCatch;n.inherits(h,c),h.prototype._gotAccum=function(a){void 0!==this._eachValues&&null!==this._eachValues&&a!==f&&this._eachValues.push(a)},h.prototype._eachComplete=function(a){return null!==this._eachValues&&this._eachValues.push(a),this._eachValues},h.prototype._init=function(){},h.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},h.prototype.shouldCopyValues=function(){return!1},h.prototype._resolve=function(a){this._promise._resolveCallback(a),this._values=null},h.prototype._resultCancelled=function(a){if(a===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof b&&this._currentCancellable.cancel(),this._initialValue instanceof b&&this._initialValue.cancel())},h.prototype._iterate=function(a){this._values=a;var c,d,e=a.length;if(void 0!==this._initialValue?(c=this._initialValue,d=0):(c=b.resolve(a[0]),d=1),this._currentCancellable=c,!c.isRejected())for(;d<e;++d){var f={accum:null,value:a[d],index:d,length:e,array:this};c=c._then(k,void 0,void 0,f,void 0)}void 0!==this._eachValues&&(c=c._then(this._eachComplete,void 0,void 0,this,void 0)),c._then(i,i,void 0,c,this)},b.prototype.reduce=function(a,b){return j(this,a,b,null)},b.reduce=function(a,b,c,d){return j(a,b,c,d)}}},{"./util":36}],29:[function(a,e,f){"use strict";var g,h=a("./util"),i=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},j=h.getNativePromise();if(h.isNode&&"undefined"==typeof MutationObserver){var k=c.setImmediate,l=b.nextTick;g=h.isRecentNode?function(a){k.call(c,a)}:function(a){l.call(b,a)}}else if("function"==typeof j&&"function"==typeof j.resolve){var m=j.resolve();g=function(a){m.then(a)}}else g="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?void 0!==d?function(a){d(a)}:"undefined"!=typeof setTimeout?function(a){setTimeout(a,0)}:i:function(){var a=document.createElement("div"),b={attributes:!0},c=!1,d=document.createElement("div");new MutationObserver(function(){a.classList.toggle("foo"),c=!1}).observe(d,b);var e=function(){c||(c=!0,d.classList.toggle("foo"))};return function(c){var d=new MutationObserver(function(){d.disconnect(),c()});d.observe(a,b),e()}}();e.exports=g},{"./util":36}],30:[function(a,b,c){"use strict";b.exports=function(b,c,d){function e(a){this.constructor$(a)}var f=b.PromiseInspection;a("./util").inherits(e,c),e.prototype._promiseResolved=function(a,b){return this._values[a]=b,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},e.prototype._promiseFulfilled=function(a,b){var c=new f;return c._bitField=33554432,c._settledValueField=a,this._promiseResolved(b,c)},e.prototype._promiseRejected=function(a,b){var c=new f;return c._bitField=16777216,c._settledValueField=a,this._promiseResolved(b,c)},b.settle=function(a){return d.deprecated(".settle()",".reflect()"),new e(a).promise()},b.prototype.settle=function(){return b.settle(this)}}},{"./util":36}],31:[function(a,b,c){"use strict";b.exports=function(b,c,d){function e(a){this.constructor$(a),this._howMany=0,this._unwrap=!1,this._initialized=!1}function f(a,b){if((0|b)!==b||b<0)return d("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var c=new e(a),f=c.promise();return c.setHowMany(b),c.init(),f}var g=a("./util"),h=a("./errors").RangeError,i=a("./errors").AggregateError,j=g.isArray,k={};g.inherits(e,c),e.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var a=j(this._values);!this._isResolved()&&a&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},e.prototype.init=function(){this._initialized=!0,this._init()},e.prototype.setUnwrap=function(){this._unwrap=!0},e.prototype.howMany=function(){return this._howMany},e.prototype.setHowMany=function(a){this._howMany=a},e.prototype._promiseFulfilled=function(a){return this._addFulfilled(a),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},e.prototype._promiseRejected=function(a){return this._addRejected(a),this._checkOutcome()},e.prototype._promiseCancelled=function(){return this._values instanceof b||null==this._values?this._cancel():(this._addRejected(k),this._checkOutcome())},e.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var a=new i,b=this.length();b<this._values.length;++b)this._values[b]!==k&&a.push(this._values[b]);return a.length>0?this._reject(a):this._cancel(),!0}return!1},e.prototype._fulfilled=function(){return this._totalResolved},e.prototype._rejected=function(){return this._values.length-this.length()},e.prototype._addRejected=function(a){this._values.push(a)},e.prototype._addFulfilled=function(a){this._values[this._totalResolved++]=a},e.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},e.prototype._getRangeError=function(a){var b="Input array must contain at least "+this._howMany+" items but contains only "+a+" items";return new h(b)},e.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},b.some=function(a,b){return f(a,b)},b.prototype.some=function(a){return f(this,a)},b._SomePromiseArray=e}},{"./errors":12,"./util":36}],32:[function(a,b,c){"use strict";b.exports=function(a){function b(a){void 0!==a?(a=a._target(),this._bitField=a._bitField,this._settledValueField=a._isFateSealed()?a._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}b.prototype._settledValue=function(){return this._settledValueField};var c=b.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},d=b.prototype.error=b.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},e=b.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},f=b.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},g=b.prototype.isPending=function(){return 0==(50397184&this._bitField)},h=b.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};b.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},a.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},a.prototype._isCancelled=function(){return this._target().__isCancelled()},a.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},a.prototype.isPending=function(){return g.call(this._target())},a.prototype.isRejected=function(){return f.call(this._target())},a.prototype.isFulfilled=function(){return e.call(this._target())},a.prototype.isResolved=function(){return h.call(this._target())},a.prototype.value=function(){return c.call(this._target())},a.prototype.reason=function(){var a=this._target();return a._unsetRejectionIsUnhandled(),d.call(a)},a.prototype._value=function(){return this._settledValue()},a.prototype._reason=function(){
return this._unsetRejectionIsUnhandled(),this._settledValue()},a.PromiseInspection=b}},{}],33:[function(a,b,c){"use strict";b.exports=function(b,c){function d(a,d){if(k(a)){if(a instanceof b)return a;var e=f(a);if(e===j){d&&d._pushContext();var i=b.reject(e.e);return d&&d._popContext(),i}if("function"==typeof e){if(g(a)){var i=new b(c);return a._then(i._fulfill,i._reject,void 0,i,null),i}return h(a,e,d)}}return a}function e(a){return a.then}function f(a){try{return e(a)}catch(a){return j.e=a,j}}function g(a){try{return l.call(a,"_promise0")}catch(a){return!1}}function h(a,d,e){function f(a){h&&(h._resolveCallback(a),h=null)}function g(a){h&&(h._rejectCallback(a,l,!0),h=null)}var h=new b(c),k=h;e&&e._pushContext(),h._captureStackTrace(),e&&e._popContext();var l=!0,m=i.tryCatch(d).call(a,f,g);return l=!1,h&&m===j&&(h._rejectCallback(m.e,!0,!0),h=null),k}var i=a("./util"),j=i.errorObj,k=i.isObject,l={}.hasOwnProperty;return d}},{"./util":36}],34:[function(a,b,c){"use strict";b.exports=function(b,c,d){function e(a){this.handle=a}function f(a){return clearTimeout(this.handle),a}function g(a){throw clearTimeout(this.handle),a}var h=a("./util"),i=b.TimeoutError;e.prototype._resultCancelled=function(){clearTimeout(this.handle)};var j=function(a){return k(+this).thenReturn(a)},k=b.delay=function(a,f){var g,h;return void 0!==f?(g=b.resolve(f)._then(j,null,null,a,void 0),d.cancellation()&&f instanceof b&&g._setOnCancel(f)):(g=new b(c),h=setTimeout(function(){g._fulfill()},+a),d.cancellation()&&g._setOnCancel(new e(h)),g._captureStackTrace()),g._setAsyncGuaranteed(),g};b.prototype.delay=function(a){return k(a,this)};var l=function(a,b,c){var d;d="string"!=typeof b?b instanceof Error?b:new i("operation timed out"):new i(b),h.markAsOriginatingFromRejection(d),a._attachExtraTrace(d),a._reject(d),null!=c&&c.cancel()};b.prototype.timeout=function(a,b){a=+a;var c,h,i=new e(setTimeout(function(){c.isPending()&&l(c,b,h)},a));return d.cancellation()?(h=this.then(),c=h._then(f,g,void 0,i,void 0),c._setOnCancel(i)):c=this._then(f,g,void 0,i,void 0),c}}},{"./util":36}],35:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){function h(a){setTimeout(function(){throw a},0)}function i(a){var b=d(a);return b!==a&&"function"==typeof a._isDisposable&&"function"==typeof a._getDisposer&&a._isDisposable()&&b._setDisposable(a._getDisposer()),b}function j(a,c){function e(){if(g>=j)return k._fulfill();var f=i(a[g++]);if(f instanceof b&&f._isDisposable()){try{f=d(f._getDisposer().tryDispose(c),a.promise)}catch(a){return h(a)}if(f instanceof b)return f._then(e,h,null,null,null)}e()}var g=0,j=a.length,k=new b(f);return e(),k}function k(a,b,c){this._data=a,this._promise=b,this._context=c}function l(a,b,c){this.constructor$(a,b,c)}function m(a){return k.isDisposer(a)?(this.resources[this.index]._setDisposable(a),a.promise()):a}function n(a){this.length=a,this.promise=null,this[a-1]=null}var o=a("./util"),p=a("./errors").TypeError,q=a("./util").inherits,r=o.errorObj,s=o.tryCatch,t={};k.prototype.data=function(){return this._data},k.prototype.promise=function(){return this._promise},k.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():t},k.prototype.tryDispose=function(a){var b=this.resource(),c=this._context;void 0!==c&&c._pushContext();var d=b!==t?this.doDispose(b,a):null;return void 0!==c&&c._popContext(),this._promise._unsetDisposable(),this._data=null,d},k.isDisposer=function(a){return null!=a&&"function"==typeof a.resource&&"function"==typeof a.tryDispose},q(l,k),l.prototype.doDispose=function(a,b){return this.data().call(a,a,b)},n.prototype._resultCancelled=function(){for(var a=this.length,c=0;c<a;++c){var d=this[c];d instanceof b&&d.cancel()}},b.using=function(){var a=arguments.length;if(a<2)return c("you must pass at least 2 arguments to Promise.using");var e=arguments[a-1];if("function"!=typeof e)return c("expecting a function but got "+o.classString(e));var f,h=!0;2===a&&Array.isArray(arguments[0])?(f=arguments[0],a=f.length,h=!1):(f=arguments,a--);for(var i=new n(a),l=0;l<a;++l){var p=f[l];if(k.isDisposer(p)){var q=p;p=p.promise(),p._setDisposable(q)}else{var t=d(p);t instanceof b&&(p=t._then(m,null,null,{resources:i,index:l},void 0))}i[l]=p}for(var u=new Array(i.length),l=0;l<u.length;++l)u[l]=b.resolve(i[l]).reflect();var v=b.all(u).then(function(a){for(var b=0;b<a.length;++b){var c=a[b];if(c.isRejected())return r.e=c.error(),r;if(!c.isFulfilled())return void v.cancel();a[b]=c.value()}w._pushContext(),e=s(e);var d=h?e.apply(void 0,a):e(a),f=w._popContext();return g.checkForgottenReturns(d,f,"Promise.using",w),d}),w=v.lastly(function(){var a=new b.PromiseInspection(v);return j(i,a)});return i.promise=w,w._setOnCancel(i),w},b.prototype._setDisposable=function(a){this._bitField=131072|this._bitField,this._disposer=a},b.prototype._isDisposable=function(){return(131072&this._bitField)>0},b.prototype._getDisposer=function(){return this._disposer},b.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},b.prototype.disposer=function(a){if("function"==typeof a)return new l(a,this,e());throw new p}}},{"./errors":12,"./util":36}],36:[function(a,d,e){"use strict";function f(){try{var a=F;return F=null,a.apply(this,arguments)}catch(a){return E.e=a,E}}function g(a){return F=a,f}function h(a){return null==a||!0===a||!1===a||"string"==typeof a||"number"==typeof a}function i(a){return"function"==typeof a||"object"==typeof a&&null!==a}function j(a){return h(a)?new Error(s(a)):a}function k(a,b){var c,d=a.length,e=new Array(d+1);for(c=0;c<d;++c)e[c]=a[c];return e[c]=b,e}function l(a,b,c){if(!C.isES5)return{}.hasOwnProperty.call(a,b)?a[b]:void 0;var d=Object.getOwnPropertyDescriptor(a,b);return null!=d?null==d.get&&null==d.set?d.value:c:void 0}function m(a,b,c){if(h(a))return a;var d={value:c,configurable:!0,enumerable:!1,writable:!0};return C.defineProperty(a,b,d),a}function n(a){throw a}function o(a){try{if("function"==typeof a){var b=C.names(a.prototype),c=C.isES5&&b.length>1,d=b.length>0&&!(1===b.length&&"constructor"===b[0]),e=J.test(a+"")&&C.names(a).length>0;if(c||d||e)return!0}return!1}catch(a){return!1}}function p(a){function b(){}b.prototype=a;for(var c=8;c--;)new b;return a}function q(a){return K.test(a)}function r(a,b,c){for(var d=new Array(a),e=0;e<a;++e)d[e]=b+e+c;return d}function s(a){try{return a+""}catch(a){return"[no string representation]"}}function t(a){return null!==a&&"object"==typeof a&&"string"==typeof a.message&&"string"==typeof a.name}function u(a){try{m(a,"isOperational",!0)}catch(a){}}function v(a){return null!=a&&(a instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===a.isOperational)}function w(a){return t(a)&&C.propertyIsWritable(a,"stack")}function x(a){return{}.toString.call(a)}function y(a,b,c){for(var d=C.names(a),e=0;e<d.length;++e){var f=d[e];if(c(f))try{C.defineProperty(b,f,C.getDescriptor(a,f))}catch(a){}}}function z(a,c){return O?b.env[a]:c}function A(){if("function"==typeof Promise)try{var a=new Promise(function(){});if("[object Promise]"==={}.toString.call(a))return Promise}catch(a){}}function B(a,b){return a.bind(b)}var C=a("./es5"),D="undefined"==typeof navigator,E={e:{}},F,G="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==c?c:void 0!==this?this:null,H=function(a,b){function c(){this.constructor=a,this.constructor$=b;for(var c in b.prototype)d.call(b.prototype,c)&&"$"!==c.charAt(c.length-1)&&(this[c+"$"]=b.prototype[c])}var d={}.hasOwnProperty;return c.prototype=b.prototype,a.prototype=new c,a.prototype},I=function(){var a=[Array.prototype,Object.prototype,Function.prototype],b=function(b){for(var c=0;c<a.length;++c)if(a[c]===b)return!0;return!1};if(C.isES5){var c=Object.getOwnPropertyNames;return function(a){for(var d=[],e=Object.create(null);null!=a&&!b(a);){var f;try{f=c(a)}catch(a){return d}for(var g=0;g<f.length;++g){var h=f[g];if(!e[h]){e[h]=!0;var i=Object.getOwnPropertyDescriptor(a,h);null!=i&&null==i.get&&null==i.set&&d.push(h)}}a=C.getPrototypeOf(a)}return d}}var d={}.hasOwnProperty;return function(c){if(b(c))return[];var e=[];a:for(var f in c)if(d.call(c,f))e.push(f);else{for(var g=0;g<a.length;++g)if(d.call(a[g],f))continue a;e.push(f)}return e}}(),J=/this\s*\.\s*\S+\s*=/,K=/^[a-z$_][a-z$_0-9]*$/i,L=function(){return"stack"in new Error?function(a){return w(a)?a:new Error(s(a))}:function(a){if(w(a))return a;try{throw new Error(s(a))}catch(a){return a}}}(),M=function(a){return C.isArray(a)?a:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var N="function"==typeof Array.from?function(a){return Array.from(a)}:function(a){for(var b,c=[],d=a[Symbol.iterator]();!(b=d.next()).done;)c.push(b.value);return c};M=function(a){return C.isArray(a)?a:null!=a&&"function"==typeof a[Symbol.iterator]?N(a):null}}var O=void 0!==b&&"[object process]"===x(b).toLowerCase(),P={isClass:o,isIdentifier:q,inheritedDataKeys:I,getDataPropertyOrDefault:l,thrower:n,isArray:C.isArray,asArray:M,notEnumerableProp:m,isPrimitive:h,isObject:i,isError:t,canEvaluate:D,errorObj:E,tryCatch:g,inherits:H,withAppended:k,maybeWrapAsError:j,toFastProperties:p,filledRange:r,toString:s,canAttachTrace:w,ensureErrorObject:L,originatesFromRejection:v,markAsOriginatingFromRejection:u,classString:x,copyDescriptors:y,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:O,env:z,global:G,getNativePromise:A,domainBind:B};P.isRecentNode=P.isNode&&function(){var a=b.versions.node.split(".").map(Number);return 0===a[0]&&a[1]>10||a[0]>0}(),P.isNode&&P.toFastProperties(b);try{throw new Error}catch(a){P.lastLineError=a}d.exports=P},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(b,c(14),c(7),c(67).setImmediate)},function(a,b,c){"use strict";var d,e;e={},d=function(a,b,c){var d;switch(arguments.length){case 0:return e;case 1:return e[a];case 2:return e[a].filter(function(a){return a[b]});default:return e[a]=e[a]||[],d={},d[b]=c,e[a].push(d),e}},a.exports=d},function(a,b){function c(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function d(a){return"function"==typeof a}function e(a){return"number"==typeof a}function f(a){return"object"==typeof a&&null!==a}function g(a){return void 0===a}a.exports=c,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._maxListeners=void 0,c.defaultMaxListeners=10,c.prototype.setMaxListeners=function(a){if(!e(a)||a<0||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},c.prototype.emit=function(a){var b,c,e,h,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||f(this._events.error)&&!this._events.error.length)){if((b=arguments[1])instanceof Error)throw b;var k=new Error('Uncaught, unspecified "error" event. ('+b+")");throw k.context=b,k}if(c=this._events[a],g(c))return!1;if(d(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:h=Array.prototype.slice.call(arguments,1),c.apply(this,h)}else if(f(c))for(h=Array.prototype.slice.call(arguments,1),j=c.slice(),e=j.length,i=0;i<e;i++)j[i].apply(this,h);return!0},c.prototype.addListener=function(a,b){var e;if(!d(b))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,d(b.listener)?b.listener:b),this._events[a]?f(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,f(this._events[a])&&!this._events[a].warned&&(e=g(this._maxListeners)?c.defaultMaxListeners:this._maxListeners)&&e>0&&this._events[a].length>e&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace()),this},c.prototype.on=c.prototype.addListener,c.prototype.once=function(a,b){function c(){this.removeListener(a,c),e||(e=!0,b.apply(this,arguments))}if(!d(b))throw TypeError("listener must be a function");var e=!1;return c.listener=b,this.on(a,c),this},c.prototype.removeListener=function(a,b){var c,e,g,h;if(!d(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],g=c.length,e=-1,c===b||d(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(f(c)){for(h=g;h-- >0;)if(c[h]===b||c[h].listener&&c[h].listener===b){e=h;break}if(e<0)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(e,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},c.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],d(c))this.removeListener(a,c);else if(c)for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},c.prototype.listeners=function(a){return this._events&&this._events[a]?d(this._events[a])?[this._events[a]]:this._events[a].slice():[]},c.prototype.listenerCount=function(a){if(this._events){var b=this._events[a];if(d(b))return 1;if(b)return b.length}return 0},c.listenerCount=function(a,b){return a.listenerCount(b)}},function(a,b,c){"use strict";function d(){var a,b;return a=this,b=this.player(),"function"!=typeof b.reloadSourceOnError||x||(b.reloadSourceOnError({getSource:function(c){var e=b.error();0===e.code||-1===e.code||e.code>=400||(v=c,y=b.currentTime(),w=e,d.call(a))},errorInterval:30}),x=!0,b.on("dispose",function(){x=!1})),this.listings(function(a,c){return a?void this.error(a):(t&&t.dispose(),this.logConfigs.call(this,"authorizer",j.configure(),c.id),t=new j(b),t.onStatusChange=this.watchLoadedCallback.bind(this),u=null,clearTimeout(this._programChangePollTimer),this.startSession(c))}.bind(this))}function e(){var a,b=this.player();if(this.programChangePollingInterval)return clearTimeout(this._programChangePollTimer),void(this._programChangePollTimer=setTimeout(function(){u||(u=b.mediainfo.simulcastAiringId||b.mediainfo.id),this.listings(function(a,b){if(a)return void this.error(a);if(b){var c=b.simulcastAiringId||b.id;return u===c?e.call(this):(u=c,this.startSession(b,"programchange"))}}.bind(this))}.bind(this),this.programChangePollingInterval));b.one("espn.id3cuechange",function(c,d){var f;if(!d.owner||!d.owner.match(/heartbeat|transition/g))return void e.call(this);try{f=JSON.parse(d.text)}catch(a){f=d.text}u||(u=f[0]&&f[0].id||b.mediainfo.simulcastAiringId),f.from&&"PROGRAM"===f.from.type&&"PROGRAM"===f.to.type||f[0]&&"PROGRAM"===f[0].type&&f[0].id!==u?(a=f.to&&f.to.id||f[0]&&f[0].id,this.listings(function(b,c){if(b)throw new Error(b);if(c)return c.simulcastAiringId!==a?e.call(this):(u=c.simulcastAiringId,this.startSession(c,"programchange"))}.bind(this))):e.call(this)}.bind(this))}var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;f=c(8),o=c(13),r=c(53),p=c(51),h=c(4),i=c(5),j=c(23),q=c(52),l=c(10),g=c(19),k=c(6),m=c(27);var z=c(2);n=function(){function a(a){if("string"==typeof a&&(0===a.indexOf("#")&&(a=a.slice(1)),a=document.getElementById(a)),!a||!a.nodeName)throw new TypeError("The element or ID supplied is not valid.");this.originalElement=a,this.element="video"===a.tagName.toLowerCase()?a:document.createElement("video"),this.element.controls=!0,this.element.preload="metadata",this.element.className="evp-player video-js",z.IS_CHROME||(this.element.crossOrigin="anonymous")}return a.prototype.registerConfiguration=function(a){if(null!=a){if(this.options=a,this.clipSource=a.clipSource,a.advertising&&(h.configure(a.advertising),a.advertising.assetId&&(this.advertisingId=a.advertising.assetId)),a.analytics&&i.configure(a.analytics),a.api&&f.configure(a.api),null!=a.auth&&j.configure(a.auth),z.IS_SAFARI_11&&(a.autoplay=!1),null!=a.autoplay&&this.autoplay(a.autoplay),null!=a.endcard&&(this.showEndCard=!!a.endcard),null!=a.preroll&&this.preroll(a.preroll),null!=a.postroll&&this.postroll(a.postroll),a.shield&&o.configure(a.shield),a.streamlimiter&&q.configure(a.streamlimiter),null!=a.loop&&(this.loopClip=a.loop),null!=a.programChangePollingInterval&&(this.programChangePollingInterval=a.programChangePollingInterval),a.error){var b;return b=this.player(),b.conviva&&(this.logConfigs("conviva",i.conviva()),b.conviva(i.conviva())),this.error(a.error)}switch(!1){case!a.adOnly:return this.advertisingId=a.advertising&&a.advertising.assetId,this.adOnly();case null==a.clips:return"function"!=typeof a.clips?console.error("clips MUST be a function"):(this.id=a.cerebroId||a.clipId,this.clips=a.clips,this.loadClip(this.id,this.clipSource));case null==a.cerebroId:case null==a.clipId:return this.id=a.cerebroId||a.clipId,this.clips=function(a,b,c){return new f({cms:b}).getClipThroughShield(a,c)},this.loadClip(this.id,this.clipSource);case null==a.playlist:return this.playlist=a.playlist,this.clips=function(a,b,c){return new f({cms:b}).getClipThroughShield(a,c)},this.loadClips(this.playlist,this.clipSource);case null==a.listings:return a.auth&&a.streamlimiter?"function"!=typeof a.listings?console.error("listings MUST be a function"):(this.listings=a.listings,d.call(this)):console.error("Missing configuration data");case null==a.watchId:return this.id=a.watchId,a.auth&&a.streamlimiter?(this.listings=function(b){(new f).getListing(a.watchId,b)},d.call(this)):console.error("Missing configuration data");case null==a.channelId:return this.id=a.channelId,a.auth&&a.streamlimiter?(this.listings=function(b){(new f).getChannel(a.channelId,b)},d.call(this)):console.error("Missing configuration data")}}},a.prototype._player=void 0,a.prototype.player=function(a){return null!=a&&(this._player=a),this._player},a.prototype.autoplay=function(a){return this.player().autoplay(a)},a.prototype.play=function(){return this.player().play()},a.prototype.pause=function(){return this.player().pause()},a.prototype.muted=function(a){return this.player().muted(a)},a.prototype.currentTime=function(a){return this.player().currentTime(a)},a.prototype.requestFullscreen=function(){return this.player().requestFullscreen()},a.prototype.exitFullscreen=function(){return this.player().exitFullscreen()},a.prototype.poster=function(a){return this.player().poster(a)},a.prototype._preroll=!1,a.prototype.preroll=function(a){return null!=a&&(this._preroll=a),this._preroll},a.prototype._postroll=!1,a.prototype.postroll=function(a){return null!=a&&(this._postroll=a),this._postroll},a.prototype.id=void 0,a.prototype.advertisingId=void 0,a.prototype.metadata=void 0,a.prototype._duration=void 0,a.prototype.duration=function(a){return null!=a&&(this._duration=a),this._duration},a.prototype.mimeType=function(){},a.prototype.load=function(){},a.prototype.loopClip=!1,a.prototype.loadClip=function(a,b){return this.clips(a,b,this.clipLoadedCallback.bind(this))},a.prototype.loadClips=function(a,b,c){},a.prototype.showEndCard=!0,a.prototype.adOnly=function(){this.duration(1),this.preroll(!0),this.autoplay(!0),new g(this.player(),{},this.options.adProviderOrder,function(a){this.player().src({src:"data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAAA79tZGF0AAAC9AYF///w3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9MTIgbG9va2FoZWFkX3RocmVhZHM9MSBzbGljZWRfdGhyZWFkcz0wIG5yPTAgZGVjaW1hdGU9MSBpbnRlcmxhY2VkPTAgYmx1cmF5X2NvbXBhdD0wIGNvbnN0cmFpbmVkX2ludHJhPTAgYmZyYW1lcz0zIGJfcHlyYW1pZD0yIGJfYWRhcHQ9MSBiX2JpYXM9MCBkaXJlY3Q9MSB3ZWlnaHRiPTEgb3Blbl9nb3A9MCB3ZWlnaHRwPTEga2V5aW50PTI0MCBrZXlpbnRfbWluPTI0IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9MTAgcmM9Y3JmIG1idHJlZT0xIGNyZj01MS4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT0yMDAwMCB2YnZfYnVmc2l6ZT0yNTAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAADFliIQAbwTYb+YMExstjI/2DFAAAAMAAA94QCcYYsAAASkAtD1oHHXQk/QgAAADAHxBAAAACUGaJBiL/wAA/wAAAAhBnkJCfwAB6QAAAAgBnmFF/wAB8wAAAAgBnmNF/wAB8wAAAApBmmg0TET/AAEPAAAACkGehkURLP8AAekAAAAIAZ6lRf8AAfMAAAAIAZ6nRf8AAfMAAAAJQZqrNExfAAFTAAAACEGeykJfAAHpAAAACAGe6UX/AAHzAAADym1vb3YAAABsbXZoZAAAAADTQ/Pq00Pz6gAAA+gAAAHLAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAL1dHJhawAAAFx0a2hkAAAAD9ND8+rTQ/PqAAAAAQAAAAAAAAHLAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAGsAAAA8AAAAAAAJGVkdHMAAAAcZWxzdAAAAAAAAAABAAABywAAHVQAAQAAAAACbW1kaWEAAAAgbWRoZAAAAADTQ/Pq00Pz6gABX5AAAKFMVcQAAAAAAC1oZGxyAAAAAAAAAAB2aWRlAAAAAAAAAAAAAAAAVmlkZW9IYW5kbGVyAAAAAhhtaW5mAAAAFHZtaGQAAAABAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAAHYc3RibAAAAJhzdHNkAAAAAAAAAAEAAACIYXZjMQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAGsAPAASAAAAEgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABj//wAAADJhdmNDAU1AKP/hABpnTUAo7KDY/3zUBAQFAAADAAEAAr8gDxgxlgEABWjvgZcgAAAAQHN0dHMAAAAAAAAABgAAAAUAAA6qAAAAAQAADqkAAAADAAAOqgAAAAEAAA6pAAAAAQAADqoAAAABAAAAAAAAABRzdHNzAAAAAAAAAAEAAAABAAAAcGN0dHMAAAAAAAAADAAAAAEAAB1UAAAAAQAASVEAAAABAAAdVAAAAAEAAAAAAAAAAQAADqoAAAABAABJUAAAAAEAAB1UAAAAAQAAAAAAAAABAAAOqgAAAAEAADqnAAAAAQAAHVQAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAADAAAAAEAAABEc3RzegAAAAAAAAAAAAAADAAAAy0AAAANAAAADAAAAAwAAAAMAAAADgAAAA4AAAAMAAAADAAAAA0AAAAMAAAADAAAABRzdGNvAAAAAAAAAAEAAAAwAAAAYXVkdGEAAABZbWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAsaWxzdAAAACSpdG9vAAAAHGRhdGEAAAABAAAAAExhdmY1NC42LjEwMA==",type:"video/mp4"}),a.initAds({id:this.advertisingId||this.id,slots:{preroll:!0},duration:this.duration(),logger:this.logConfigs.bind(this)})}.bind(this))},a.prototype.listen=function(a,b){var c=this.player(),d=b.bind(this);return c.on(a,d),function(){try{c.off(a,d)}catch(a){}}},a.prototype.addCC=function(a){var b=this.player();a&&"function"==typeof b.addRemoteTextTrack&&(this.webVTT=b.addRemoteTextTrack({kind:"captions",language:"",label:"cc1",src:a}))},a.prototype.removeCC=function(){var a=this.player();"function"==typeof a.removeRemoteTextTrack&&(this.webVTT=a.removeRemoteTextTrack(this.webVTT))},a.prototype.clipLoadedCallback=function(a,b){var c,d;if(d=this.player(),"function"==typeof d.conviva&&(this.logConfigs("conviva",i.conviva()),d.conviva(i.conviva())),a)return void this.error(a);d.trigger("espn.clipfetched",{player:this,clip:b}),this.id=b.id,this.advertisingId=b.advertisingId,this.duration(b.duration),this.clipId=b.clipId,this.clipSource=b.clipSource,c=new k(this.clipSource),this.programChangePollingInterval&&clearTimeout(this._programChangePollTimer),this.removeCC(),new g(d,b,this.options.adProviderOrder,function(a){b.sources=a.sources;var e=a.webVTT||b.webVTT;"function"==typeof this.mediainfo&&this.mediainfo(b),e&&(this._unlistenCCHandler=this.listen(["loadedmetadata","playing"],function(){d.ads&&"ad-playback"===d.ads.state||(this.addCC(e),this._unlistenCCHandler&&(this._unlistenCCHandler(),this._unlistenCCHandler=null))})),b.posterHref&&!this.autoplay()?this.poster(b.posterHref):this.poster("data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs="),"function"==typeof this.loop&&this.loopClip?this.loop():"function"==typeof this.endcard&&this.showEndCard&&this.endcard(b,this.options.endcard),"function"==typeof this.social&&new p(d.mediainfo,this.social,this.options.social),"function"==typeof this.thumbnails&&b.posterHref&&new r(this.id,b.sources[0].src,this),d.trigger("espn.contentloaded",{id:this.id,clipId:this.clipId,mediainfo:d.mediainfo}),d.src(b.sources),a.initAds({networkId:c.adNetworkId?c.adNetworkId:null,id:this.advertisingId||this.id,slots:{preroll:this.preroll(),postroll:this.postroll()},duration:this.duration(),logger:this.logConfigs.bind(this)}),"function"==typeof this.initAnalytics&&this.initAnalytics()}.bind(this))},a.prototype.watchLoadedCallback=function(a,b){var c,d;if(d=this.player(),"function"==typeof d.conviva&&("function"==typeof v?i.conviva({tags:{reloadCause:w.code+""||w.message}}):i.conviva({tags:{reloadCause:"null"}}),this.logConfigs("conviva",i.conviva()),d.conviva(i.conviva())),a)return void this.error(a);this._unlistenCCHandler&&(this._unlistenCCHandler(),this._unlistenCCHandler=null),this.removeCC(),new g(d,b,this.options.adProviderOrder,function(a){if(d.mediainfo&&d.mediainfo.id&&!v)return this.id=b.id,this.advertisingId=b.advertisingId||b.id,"function"==typeof this.mediainfo&&this.mediainfo(b),d.trigger("espn.programchange",{id:b.id,callback:s.completeLiveProgram.bind(s)||function(){}}),void e.call(this);this.id=b.id,this.advertisingId=b.advertisingId||b.id,"function"==typeof this.mediainfo&&this.mediainfo(b),this.poster(b.posterHref),e.call(this),"function"==typeof this.social&&new p(d.mediainfo,this.social,this.options.social),d.trigger("espn.contentloaded",{id:this.id,mediainfo:d.mediainfo}),"function"==typeof v?(i.configure({adobeDCR:{ESPN_CUSTOM_METADATA:{startType:"error - restart"}}}),"Flash"===d.techName_&&d.reset(),v({src:b.videoHref,type:"application/x-mpegURL"}),d.currentTime(y),v=null,y=null):(d.src({src:b.videoHref,type:"application/x-mpegURL"}),b.seekInSeconds&&d.currentTime(b.seekInSeconds)),a.initAds({id:this.advertisingId||this.id,slots:{preroll:this.preroll(),postroll:this.postroll()},logger:this.logConfigs.bind(this)}),this.initAnalytics(),"function"==typeof d.adPassThrough&&d.adPassThrough(),this.logConfigs("streamlimiter",q.configure()),c=new q(this)}.bind(this))},a.prototype.initAnalytics=function(){var a;a=this.player(),a.comscore&&(this.logConfigs("comscore",i.comscore()),a.comscore(i.comscore())),a.chartbeat&&(this.logConfigs("chartbeat",i.chartbeat()),a.chartbeat(i.chartbeat())),s?s.loadNewOptions(i.adobeDCR()):s=new m(a,i.adobeDCR())},a.prototype.logConfigs=function(a,b,c){return l(c||this.id,a,b)},a.prototype.dispose=function(){t&&t.dispose(),s=null,this.programChangePollingInterval&&clearTimeout(this._programChangePollTimer),this._unlistenCCHandler&&(this._unlistenCCHandler(),this._unlistenCCHandler=null)},a.prototype.mediainfo=function(a){var b;return a&&(b={created_at:a.createDate||"",custom_fields:{},description:a.description||"",duration:a.duration||"",id:""+(a.clipId||a.id)||"",live:!1,name:a.assetName||a.name||"",headline:a.headline||"",pageTitle:a.pageTitle||a.headline&&a.headline+" - ESPN Video"||"ESPN Video",posterHref:a.posterHref||"",publisher:a.publisher||"ESPN",showcode:a.showcode||"Not Applicable",site:a.site||"espncom",sources:a.sources||""},this.options.affiliate&&(b.affiliate=this.options.affiliate),["startTime","endTime","originalAirDate","originalPublishDate"].forEach(function(c){a[c]&&(b[c]=new Date(a[c].replace("GMT","Z")))}),["airingId","commercialReplacement","comscoreC6","eventId","hasEspnId3Heartbeats","hasNielsenWatermarks","hasPassThroughAds","nielsenCrossId1","passThroughBeaconURL","program","simulcastAiringId","sourceId","sourceType","syndicatable","status","webHref"].forEach(function(c){void 0!==a[c]&&(b[c]=a[c])}),"live"===a.status&&(b.live=!0),b.duration=this.getDurationForMediaInfo(b),b.comscoreC6=b.comscoreC6||"*null",a.gameId&&-1!==a.gameId&&(b.custom_fields.gameId=a.gameId),a.mediaType&&(b.custom_fields.mediaType=a.mediaType),b.startType=this.startType,this.logConfigs("mediainfo",b),this.player().mediainfo=b,this.player().trigger("espn.mediainfoloaded",b)),this.player().mediainfo},a.prototype.getDurationForMediaInfo=function(a){if(a.duration)return a.duration;if(!0===a.live)return 86400;var b=new Date(a.startTime).getTime(),c=new Date(a.endTime).getTime();return b&&c?(c-b)/1e3:0},a.prototype.startSession=function(a,b){return-1!==a.videoHref.indexOf("startSession")?t.startSession(a):b?this.listings(function(a,b){return a?void console.error(a):t.startShieldSession(b)}.bind(this),b):t.startShieldSession(a)},a}(),a.exports=n},function(a,b,c){"use strict";function d(a,b){if(null===b)return a}var e,f,g,h,i,j,k;k=c(3),e=c(6),i=c(49),j=c(0),f=["cricinfo","deportes","domestic","soccerfc"],g={cricinfo:"cric",deportes:"deportes",domestic:"espn",soccerfc:"intl"},h=function(){function a(a){this.baseURL=a&&a.BASE_URL||i.BASE_URL,this.apiKey=a&&a.API_KEY||i.API_KEY}return a.prototype.getClip=function(a,b,c){var d;return d=this.baseURL+"/getclip/"+a,c=c||{},k.get(d).query({apikey:this.apiKey}).end(function(a,d){var h,i,k,l,m,n,o,p;if(a){if(403===a.status&&d.body&&d.body.message){var q=d.body.message.split(":");if(q.length>0)return l={code:a.status,message:q[q.length-1].trim()},b(l,null)}return l=d.body&&d.body.error?{code:a.status,message:d.body.error}:a,b(l,null)}return d.body&&d.body.clip?(p=d.body&&d.body.clip,o=Object.keys(p.syndicationDetails).filter(function(a){return-1!==f.indexOf(a)}).shift(),n=o&&p.syndicationDetails[o],i=n&&n.cms&&n.cms.syndicationId,k=new e(g[o]||o),m=[],p.transcodes&&p.transcodes.hls&&m.push({src:p.transcodes.hls,type:"application/x-mpegURL"}),p.transcodes&&p.transcodes.primary_mezzanine&&m.push({src:p.transcodes.primary_mezzanine,type:"video/mp4"}),h={advertisingId:k.adAssetId(i),assetName:p.assetName,cerebroId:p.id,clipId:i,clipSource:k.key,country:d.body&&d.body.requestedBy&&d.body.requestedBy.country,description:p.caption,device:d.body&&d.body.requestedBy&&d.body.requestedBy.device,duration:p.durationSeconds,gameId:p.gameId,headline:p.headline,id:p.id,mediaId:k.apiMediaId(i),mediaType:p.mediaType,posterHref:p.transcodes&&p.transcodes.thumbnail,showcode:p.adTarget&&p.adTarget.adBundle&&p.adTarget.adBundle[0],syndicatable:p.videoRights&&p.videoRights.socialSharing,webHref:n&&n.cms&&n.cms.url,webVTT:n&&n.threeplay&&n.threeplay.url},j(h,c),h.onceHref=n&&n.brightcove&&n.brightcove.url,h.sources=m,b(null,h)):(l=d.body&&d.body.authenticationStatus&&d.body.authenticationStatus.messages.shift(),console.warn(l),b(l,null))})},a}(),h.configure=function(a){return j(i,a,d),i},a.exports=h},function(a,b){function c(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}function e(a){if(k===setTimeout)return setTimeout(a,0);if((k===c||!k)&&setTimeout)return k=setTimeout,setTimeout(a,0);try{return k(a,0)}catch(b){try{return k.call(null,a,0)}catch(b){return k.call(this,a,0)}}}function f(a){if(l===clearTimeout)return clearTimeout(a);if((l===d||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(a);try{return l(a)}catch(b){try{return l.call(null,a)}catch(b){return l.call(this,a)}}}function g(){p&&n&&(p=!1,n.length?o=n.concat(o):q=-1,o.length&&h())}function h(){if(!p){var a=e(g);p=!0;for(var b=o.length;b;){for(n=o,o=[];++q<b;)n&&n[q].run();q=-1,b=o.length}n=null,p=!1,f(a)}}function i(a,b){this.fun=a,this.array=b}function j(){}var k,l,m=a.exports={};!function(){try{k="function"==typeof setTimeout?setTimeout:c}catch(a){k=c}try{l="function"==typeof clearTimeout?clearTimeout:d}catch(a){l=d}}();var n,o=[],p=!1,q=-1;m.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];o.push(new i(a,b)),1!==o.length||p||e(h)},i.prototype.run=function(){this.fun.apply(null,this.array)},m.title="browser",m.browser=!0,m.env={},m.argv=[],m.version="",m.versions={},m.on=j,m.addListener=j,m.once=j,m.off=j,m.removeListener=j,m.removeAllListeners=j,m.emit=j,m.prependListener=j,m.prependOnceListener=j,m.listeners=function(a){return[]},m.binding=function(a){throw new Error("process.binding is not supported")},m.cwd=function(){return"/"},m.chdir=function(a){
throw new Error("process.chdir is not supported")},m.umask=function(){return 0}},function(a,b){function c(a){return null!==a&&"object"==typeof a}a.exports=c},function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},I=function(a,b){return function(){return a.apply(b,arguments)}};E={}.hasOwnProperty,D=function(a,b){function c(){this.constructor=a}for(var d in b)E.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},C=c(59),G=c(58),p=c(12),d=c(4),e=c(5),B=c(55),t=c(40),s=c(39),A=c(46),r=c(38),o=c(36),j=c(31),m=c(34),l=c(33),y=c(45),v=c(44),w=c(1),u=c(43),g=c(26),n=c(35),i=c(30),c(6),x=c(28).translations(),q=c(37),k=c(32);var J=c(2);f=function(a){function b(a,c){function f(){p.trigger("espn.playing")}var p;this.social=I(this.social,this),this.selectPlaylist=I(this.selectPlaylist,this),b.__super__.constructor.call(this,a),this.debouncedSetSizeClass=C(this.setSizeClass.bind(this),250),c=c||{},h={},r.init(),o.init(),j.init(),m.init(),l.init(),u.init(),s.init(),v.init(),g.init(),n.init(),i.init(),q.init(),k.init();for(F in x)videojs.addLanguage(F,x[F]);c.language&&-1!==Object.keys(x).indexOf(c.language)&&this.element.setAttribute("data-setup",'{ "language": "'+c.language+'" }'),c.watchId||c.channelId?(videojs.options.flash.flashVars={hls_minbufferlength:6,hls_lowbufferlength:2,hls_capleveltostage:!0},h.timeout=15e3):videojs.options.flash.flashVars={},videojs.hook("beforesetup",function(a,b){return b.errorDisplay={pauseOnOpen:!0},b});var t=J.USER_AGENT;if(videojs.IS_EDGE){var A=/Edge\/([\d.]+)/i.exec(t),B=parseInt(A[1],10);B&&B<15&&(c.watchId||c.channelId?(videojs.options.hls={overrideNative:!0},z&&z.optimizeLive&&(videojs.options.techOrder=["flash","html5"])):(videojs.options.hls={overrideNative:!1},videojs.options.techOrder=["html5","flash"]))}else if(!videojs.IS_IOS&&videojs.IS_SAFARI){var D=/Version\/([\d.]+)/i.exec(t);if(D){var E=parseInt(D[1],10);E<7&&(videojs.options.techOrder=["flash"],videojs.options.hls={overrideNative:!0})}}"video"!==this.originalElement.tagName.toLowerCase()&&this.originalElement.parentNode.replaceChild(this.element,this.originalElement),p=this.player(window.bc(this.element)),this.element=p.el(),s.plugin(p),y.plugin(p),m.plugin(p),p.ESPNCaptionSettings&&p.ESPNCaptionSettings(),p.espnVolumeMenuButton(c.volume),p.persistBandwidth(),p.errors&&p.errors(h),p.load();var G;p.on("error",function(){var a=p.error();a&&(-2===a.code?(G&&Date.now()-G<3e4&&(G=0,p.reset(),p.error(a),p.trigger("espn.error",a)),0!==G&&(G=Date.now())):p.trigger("espn.error",a))}),p.on("touchstart",function(){p.paused()&&p.usingNativeControls()&&p.play()}),p.on("ads-pod-started",function(){p.trigger("espn.ads-pod-started",{type:"preroll"})}),p.on("ads-pod-ended",function(){p.trigger("espn.ads-pod-ended",{type:"preroll"})}),p.on("ads-ad-started",function(){var a=p.ads&&p.ads.ad&&p.ads.ad.id;p.trigger("espn.ads-ad-started",{type:"preroll",id:a})}),p.on("ads-ad-ended",function(){var a=p.ads&&p.ads.ad&&p.ads.ad.id;p.trigger("espn.ads-ad-ended",{type:"preroll",id:a})}),p.on("adend",function(){p.removeClass("vjs-ad-loading")}),p.on("contentplayback",function(){p.one("mouseover",function(){p.el().classList.contains("not-hover")&&p.el().classList.remove("not-hover")})}),p.on("play",function(){p.trigger("espn.play"),p.one("playing",f)}),p.on("pause",function(){p.trigger("espn.pause"),p.off("playing",f)}),"userPreference"===c.autoplay?w.getAutoStart(function(a){c.autoplay=a,this.registerConfiguration(c)}.bind(this)):(c.autoplay="on"===c.autoplay||!0===c.autoplay,this.registerConfiguration(c)),this.startType=!1===c.wasUserInitiated?"autostart":"manual",e.configure({adobeDCR:{ESPN_CUSTOM_METADATA:{startType:this.startType}}}),d.configure({startType:this.startType}),p.on("ended",function(){p.ads.state&&"content-playback"!==p.ads.state||p.trigger("espn.contentended")}),p.on("loadstart",function(){var a;(a=p.tech({IWillNotUseThisInPlugins:!0}).hls)&&(videojs.Hls.Playlist.UNSAFE_LIVE_SEGMENTS=4,a.xhr.beforeRequest=function(a){new RegExp("prod-freewheel.*.m3u8|generateKey").test(a.uri)&&(a.withCredentials=!0)})}),p.on("ready",function(){this.setTechClass()}.bind(this)),p.ready(function(){this.setSizeClass(),window.addEventListener("resize",this.debouncedSetSizeClass),p.hotkeys({enableVolumeScroll:!1})}.bind(this))}return D(b,a),b.prototype.mimeType=function(){return this.player().currentType()},b.prototype._useAdManager=!1,b.prototype.loadMidroll=function(a){var b,c;c=[{adUnit:"midroll",adBreak:a&&a.break_number?a.break_number:void 0,timePosition:this.player().currentTime()}],d.configure({assetId:this.advertisingId||this.id,live:!0,mimeType:this.mimeType()}),this._useAdManager?(b=d.adManager({},c),console.log(JSON.stringify(b)),"function"==typeof this.player().FreeWheelPlugin?this.player().FreeWheelPlugin(b):this.player().FreeWheelPlugin.settings=b):(b={serverUrl:d.vast({},c),requestMode:"ondemand"},this.preroll()&&"function"!=typeof this.player().ads&&"function"==typeof this.player().ima3&&(this.player().ads=Object.getPrototypeOf(this.player()).ads),"function"==typeof this.player().ima3&&this.player().ima3(b),this.player().ima3.adrequest(b.serverUrl))},b.prototype._midroll=!1,b.prototype.midroll=function(a){return null!=a&&(this._midroll=a),this._midroll},b.prototype.loadClips=function(a,b){var c;return b=b||this.clipSource,c=a.shift?a.shift():a,a&&a.length>0&&!1===this.showEndCard&&!1===this.loopClip&&this.player().one("ended",function(){this.autoplay(!0),this.loadClips(a,b)}.bind(this)),this.loadClip(c.id,b)},b.prototype.loop=function(){this.player().on("ended",function(){this.player().play()}.bind(this))},b.prototype.error=function(a,b){var c,d,e,f;f=this.player(),"object"===(void 0===a?"undefined":H(a))?(c={message:a.message,headline:a.headline||a.message},(a.code||a.status)&&(c.code=a.code||a.status),(a.type||a.abbreviation)&&(c.type=a.type||a.abbreviation)):c={headline:a,message:a},window.newrelic&&"function"==typeof window.newrelic.noticeError&&window.newrelic.noticeError(new Error(c.type||c.headline||c.message)),f.ready(function(){f.error(c),b&&(d=f.getChild("errorDisplay"),b.nodeName?e=b:(e=document.createElement("div"),e.innerHTML=b),e.className="vjs-errors-dialog",e.id="vjs-errors-dialog",d.fillWith(e),(f.width()<=600||f.height()<=250)&&d.addClass("vjs-xs"))})},b.prototype.thumbnails=function(a){var b,c,d;if("function"==typeof this.player().thumbnails)return b=this.player().controlBar.progressControl.el().querySelector(".vjs-thumbnail-holder"),b&&this.player().controlBar.progressControl.el().removeChild(b),c=this.player().thumbnails(a),b=this.player().controlBar.progressControl.el().querySelector(".vjs-thumbnail-holder"),d=b.querySelector("img"),d.addEventListener("error",function(){this.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAAA+CAIAAABFt7lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAuFJREFUeNrsmtGxIUEUhne3PJOATYAIdgPAOzYAJIAAxgaABBAAAkAARgCUAFYCRLBfzV/V1YXaO7eurboP//8wdabn9Dmnvz4940EhSZLj8fjF+rAKcEzT1CA+rm9GYJRGaZSWURqlURqlZZRGaZSWURqlURqlZZRGaZSWURqlURqlZZRGaZSWUX4ClNVq9Uem/1fK90whXbFYfO+sN0VMIv978KnPK1H+zjQcDs/nc85MvzLlLwXn1WolguR6mmW9Xt+NjEaj+Xyep/5qJozHLokHn/q8+IAnSdJqtWazWaPRYNl0KGQZl8EgFDSCgcOfTGocxnu9npyRHIQv7qnb7aYIMV9GdBqwy+Vy7KAO4kqQu+xcyajCGDydTgQPE1UzCr0v5/gohAg5z8c7UFI0JdbrdcrCYOs2mw2D0+l0v9+3223Ww1NGqJ7rz0xM3O12TCmVSlSGD3MZZ5YWINzSZDIhQniN8JRbguNMQOHgNviTaLvdsru48eguOw6aG7Yh3iEeMaIdxf9yuXAb9yMTqZmkivBilICgNyGoJiWN9pyt0xqWy6VwY4T9D1BwYK4aE4c7juh6vfb7/bAe/MGUpikHH1so478wqvtIrZaPsxNZrfe0pwCnZgeWepbCmBUfETLiQGSt8U0V8qMk0+M/MSmiUql0u13WQ/VUxrJZcKCMAaBOp6OTziOWgfN4PF4sFuzHXcA0k9Awl+biliXBlJG4s3SotWd6D9KhITsvUGyMw+Hw2BPgrtVqod0ISyiKp9R4aWqXnB/bvCjv3jXhVmecr4EaCpqsh6c8UsfhxpcBampkbQl1A0i9EGLir5hQZm3YGHQowXGWJ1O45ZUtIupZbAxuiRyyY7Af2HIIBWPoJU4c2ep0YeUNIx+uLGcwGMD3aQ896muz2fS/fv0T3SiN0jJKozRKo7SM0iiN0jJKozRKo7SM0iiN0jJKozRKo7SM0iiN0jJKo/z0+ivAAEPb6BambmykAAAAAElFTkSuQmCC"}),A.plugin(this.player()),c},b.prototype.social=function(a){if(videojs.plugin("social",t),"function"==typeof this.player().social)return this.logConfigs("ESPNSocial",a),this.player().social(a)},b.prototype.watermark=function(){return new B(function(a){return function(b){return b.length||(b=[b]),a.player().overlay({overlays:b})}}(this))},b.prototype.endcard=function(a,b){var c=a.country||null,f={id:a.mediaId||a.id,headline:a.headline,poster:a.posterHref};this.player().endcard({filter:b&&b.filter||null,playlist:this.playlist,content:f,country:c,timeoutHandler:function(a,b){this.startType=b?"manual:endcard_continuous":"endcard_continuous",e.configure({adobeDCR:{ESPN_CUSTOM_METADATA:{startType:this.startType}}}),d.configure({startType:this.startType}),this.loadClip(a.id,a.clipSource)}.bind(this),timeout:b&&b.timeout||null})},b.prototype.watchLoadedCallback=function(a){var c;c=this.player(),b.__super__.watchLoadedCallback.apply(this,arguments),!a&&c.mediainfo.live&&c.on("play",function(){c.seekable().length>0&&c.currentTime(c.seekable().end(0))})},b.prototype.setTechClass=function(){var a,b,c,d;a=this.player(),b="evp-tech-",c=b+a.techName_.toLowerCase(),d=a.el().classList;for(var e=0;e<d.length;e++)-1!==d[e].indexOf(b)&&a.removeClass(d[e]);a.addClass(c)},b.prototype.setSizeClass=function(){var a,b;a=this.player(),b=a&&a.dimension("width")||-1,b>=660?a.addClass("espn-endCard-large"):a.removeClass("espn-endCard-large"),b>=375&&b<=659?a.addClass("espn-endCard-medium"):a.removeClass("espn-endCard-medium"),b>=275&&b<=374?a.addClass("espn-endCard-small"):a.removeClass("espn-endCard-small"),b>=250&&b<=274?a.addClass("espn-endCard-xSmall"):a.removeClass("espn-endCard-xSmall"),b<=640?a.addClass("espn-player-medium"):a.removeClass("espn-player-medium"),b<=300?a.addClass("espn-player-small"):a.removeClass("espn-player-small"),b>=250&&b<=480?a.addClass("remove-time"):a.removeClass("remove-time"),b>=250&&b<=400?a.addClass("remove-duration"):a.removeClass("remove-duration")},b.prototype.dispose=function(){window.removeEventListener("resize",this.debouncedSetSizeClass),this.debouncedSetSizeClass.cancel&&this.debouncedSetSizeClass.cancel();var a=this.player();if(a)try{a.dispose()}catch(a){console.error(a)}b.__super__.dispose.apply(this,arguments)},b}(p),f.loadTech=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(window.bc)return void a();b=b||{},z=b,b.playerId||(b.optimizeLive?b.playerId="Syz3QlLdZ_default":b.playerId="ryer67gLdW_default",J.IS_SAFARI_11&&(b.optimizeLive?b.playerId="BJLUdPgjW_default":b.playerId="ryvqvDesb_default")),b.accountId=b.accountId||"3948005062001",G("//players.brightcove.net/"+b.accountId+"/"+b.playerId+"/index.min.js",function(c){c?G("//secure.espncdn.com/players/web-player-bundle/latest/perform-assets/players/"+b.playerId+"/index.min.js",function(b){b||a()}):a()})},a.exports=f},function(a,b,c){"use strict";function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},h=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=c(60),k=c(12),l=c(11).EventEmitter,m=c(5),n=c(48),o=c(47),p=c(1),q=c(2),r=function(){function a(b){f(this,a),this.element=b,this.events=new l,this.element.crossOrigin="anonymous",this.fsApi=o.getApi(),this.supportFullScreen=o.supportsFullScreen(this.element)}return i(a,[{key:"autoplay",value:function(a){return null!=a&&(!0===a?this.element.setAttribute("autoplay","autoplay"):this.element.removeAttribute("autoplay")),!!this.element.autoplay}},{key:"poster",value:function(a){return this.element.setAttribute("poster",a),this}},{key:"src",value:function(a){var b=this;if(null!=a){if(this.element.currentSrc)for(var c=this.element.getElementsByTagName("source"),d=0;d<c.length;d++)this.element.removeChild(c[d]);a.length||(a=[a]),a.map(function(a){var b=document.createElement("source");return b.setAttribute("src",a.src),b.setAttribute("type",a.type),b}).forEach(function(a){b.element.appendChild(a)}),this.element.load()}return this.element.currentSrc}},{key:"reset",value:function(){return this}},{key:"ready",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){}).call(this),this}},{key:"on",value:function(a,b){return Array.isArray(a)?this._handleMultipleEvents("on",a,b):(this.element.addEventListener(a,b,"error"===a),this.events.on(a,b),this)}},{key:"one",value:function(a,b){if(Array.isArray(a))return this._handleMultipleEvents("one",a,b);var c=function(){this.off(a,c),b.apply(this,arguments)}.bind(this);return this.element.addEventListener(a,c,"error"===a),this.events.once(a,b),this}},{key:"off",value:function(a,b){return Array.isArray(a)?this._handleMultipleEvents("off",a,b):(this.element.removeEventListener(a,b),this.events.removeListener(a,b),this)}},{key:"trigger",value:function(a){for(var b,c=arguments.length,d=Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return(b=this.events).emit.apply(b,[a,{type:a}].concat(d)),this}},{key:"error",value:function(){return this.element.error}},{key:"play",value:function(){return this.element.play(),this}},{key:"pause",value:function(){return this.element.pause(),this}},{key:"load",value:function(){return this.element.load(),this}},{key:"duration",value:function(){return this.element.duration}},{key:"currentTime",value:function(a){return void 0===a?this.element.currentTime:(this.element.currentTime=a,this)}},{key:"muted",value:function(a){return void 0===a?this.element.muted:(this.element.muted=a,this)}},{key:"requestFullscreen",value:function(){return this.fsApi.requestFullscreen?this.element[this.fsApi.requestFullscreen]():this.supportFullScreen&&this.enterFullScreen(),this}},{key:"exitFullscreen",value:function(){return this.fsApi.requestFullscreen?document[this.fsApi.exitFullscreen]():this.supportFullScreen&&this.exitFullScreen(),this}},{key:"_handleMultipleEvents",value:function(a,b,c){return b.forEach(function(b){this[a](b,c)}.bind(this)),this}},{key:"addRemoteTextTrack",value:function(a){var b=document.createElement("track");return b.kind=a.kind,b.label=a.label,b.srclang=a.language,b.src=a.src,b.default="default",this.element.appendChild(b),b}},{key:"removeRemoteTextTrack",value:function(a){for(var b=this.remoteTextTracks(),c=0;c<b.length;c++)b[c]!==a&&"captions"!==b[c].kind||this.element.removeChild(b[c])}},{key:"remoteTextTracks",value:function(){return this.element.querySelectorAll("track")}},{key:"enterFullScreen",value:function(){var a=this.element;a.paused&&a.networkState<=a.HAVE_METADATA?(a.play(),window.setTimeout(function(){a.pause(),a.webkitEnterFullScreen()},0)):a.webkitEnterFullScreen()}},{key:"exitFullScreen",value:function(){this.element.webkitExitFullScreen()}}]),a}(),s=function(a){function b(a,c){f(this,b);var e;c.adProviderOrder={desktop:["brightcove_once"],tablet:["brightcove_once"],mobile:["brightcove_once"]};var g=d(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));return e=g.player(new r(g.element)),"userPreference"===c.autoplay?p.getAutoStart(function(a){c.autoplay=a,this.registerConfiguration(c)}.bind(g)):(c.autoplay="on"===c.autoplay||!0===c.autoplay,g.registerConfiguration(c)),g.onPlaying=g.onPlaying.bind(g),g.onPlay=g.onPlay.bind(g),g.onPause=g.onPause.bind(g),g.onEnded=g.onEnded.bind(g),g.onError=g.onError.bind(g),e.on("playing",g.onPlaying),e.on("play",g.onPlay),e.on("pause",g.onPause),e.on("ended",g.onEnded),e.on("error",g.onError),e.load(),"video"!==a.tagName.toLowerCase()&&a.parentNode.replaceChild(g.element,a),g}return e(b,a),i(b,[{key:"onPlaying",value:function(){this.player().trigger("espn.playing")}},{key:"onPlay",value:function(){this.player().trigger("espn.play")}},{key:"onPause",value:function(){this.player().trigger("espn.pause")}},{key:"onEnded",value:function(){this.player().trigger("espn.contentended")}},{key:"onError",value:function(){this.error(this.player().error()||"Unknown Native Player Error")}},{key:"loadClips",value:function(a,b){var c;return b=b||this.clipSource,c=a.shift?a.shift():a,a&&a.length>0&&!1===this.loopClip&&this.player().on("ended",function(){this.autoplay(!0),this.loadClips(a,b)}.bind(this),{once:!0}),this.loadClip(c.id,b)}},{key:"initAnalytics",value:function(){var a;a=this.player(),new n(a,m.nativeOmniture({playerLocation:"foo",showCode:"bar",site:"espn"}))}},{key:"loop",value:function(){this.player().on("ended",function(){this.player().play()}.bind(this))}},{key:"error",value:function(a){var b;"object"===(void 0===a?"undefined":g(a))?(b={message:a.message,headline:a.headline||a.message},(a.code||a.status)&&(b.code=a.code||a.status),(a.type||a.abbreviation)&&(b.type=a.type||a.abbreviation)):b={headline:a,message:a},window.newrelic&&"function"==typeof window.newrelic.noticeError&&window.newrelic.noticeError(new Error(b.type||b.headline||b.message)),this.player().trigger("espn.error",b)}},{key:"dispose",value:function(){var a=this.player();a.off("playing",this.onPlaying),a.off("play",this.onPlay),a.off("pause",this.onPause),a.off("ended",this.onEnded),a.off("error",this.onError),h(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"dispose",this).call(this)}}]),b}(k);s.loadTech=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=new j(q.USER_AGENT);if(!0===b.native)a();else if(b.native instanceof Array){var d,e,f;for(d=0,e=b.native.length;d<e;d++)f=b.native[d],c[f]()&&a()}},a.exports=s},function(a,b,c){"use strict";a.exports={desktop:["freewheel_admanager"],tablet:["brightcove_once","freewheel_admanager"],mobile:["brightcove_once","freewheel_admanager"]}},function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};f=c(4),h=c(1),j=c(18),k=c(3),e=function(){function a(a,b,c,d){switch(this.player=a,this.data=b,this.sources=b.sources,this.onReady=d,c="object"===(void 0===c?"undefined":l(c))?c:j,b.device){case"MOBILE":this.chooseProvider(c.mobile);break;case"TABLET":this.chooseProvider(c.tablet);break;case"PC":this.chooseProvider(c.desktop);break;default:this.chooseProvider()}this.provider?this.provider.setSource.call(this):this.onReady(this)}return a.prototype.chooseProvider=function(a){var b,c,d;for(a=a||["freewheel_admanager"],b=0,c=a.length;b<c&&(d=a[b],"function"!=typeof this[d]||(this.provider=this[d](),!this.provider));b++);},a.prototype.data=void 0,a.prototype.player=void 0,a.prototype.provider=d,a.prototype.sources=void 0,a.prototype.initAds=function(a){return"function"==typeof this.provider.initAds&&this.provider.initAds.call(this,this.player,a)},a.prototype.brightcove_once=function(){return!!this.data.onceHref&&g},a.prototype.freewheel_admanager=function(){return!!this.player.FreeWheelPlugin&&d},a.prototype.onceux=function(){return!!this.player.onceux&&i},a.prototype.toString=function(){return this.provider.toString()},a}(),d={toString:function(){return"AdManager"},setSource:function(){return this.onReady(this)},initAds:function(a,b){var c,d,e,g;a.FreeWheelPlugin&&(e=b.slots&&b.slots.preroll,d=b.slots&&b.slots.postroll,g=[],e&&g.push({adUnit:"preroll",timePosition:0}),d&&g.push({adUnit:"postroll",timePosition:b.duration}),(e||d)&&(c=f.adManager({networkId:b.networkId,assetId:b.id,assetDuration:b.duration},g),b.logger("FreeWheelPlugin",c),"function"==typeof a.FreeWheelPlugin?a.FreeWheelPlugin(c):a.FreeWheelPlugin&&(a.FreeWheelPlugin.settings=c,"Html5"===a.FreeWheelPlugin.tech&&a.FreeWheelPlugin.Html5&&a.FreeWheelPlugin.Html5._parameters.update(c.Html5))))}},g={toString:function(){return"BrightcoveOnce"},setSource:function(){this.data.onceHref=this.data.onceHref.replace("now/od","now/ads/vmap/od"),k.get(this.data.onceHref).query({UMADPARAM_fw_euid:h.SWID,output:"1",timedtextextension:"vtt"}).end(function(a,b){var c;b.body&&b.body["vmap:VMAP"]&&b.body["vmap:VMAP"]["vmap:Extensions"]&&(c=b.body["vmap:VMAP"]["vmap:Extensions"]["uo:unicornOnce"],this.sources=[{src:c["@contenturi"],type:c["@contenttype"].replace("audio","application")}],this.webVTT=b.body["vmap:VMAP"]["vmap:Extensions"]["uo:timedTextURL"]&&b.body["vmap:VMAP"]["vmap:Extensions"]["uo:timedTextURL"]["#cdata-section"]),this.onReady(this)}.bind(this))},initAds:null},i={toString:function(){return"OnceUX"},setSource:function(){return this.onReady(this)},initAds:function(a,b){var c;a.onceux&&("function"==typeof a.onceux?(c=f.onceux(this.data.onceHref.replace("now/od","now/ads/vmap/od")),b.logger("onceux",c),a.onceux(c)):"function"==typeof a.onceux.src&&(c=this.data.onceHref.replace("now/od","now/ads/vmap/od"),b.logger("onceux",{src:c}),a.onceux.src(c)))}},a.exports=e},function(a,b,c){"use strict";a.exports={host:"https://bd0dc.v.fwmrm.net/ad/p/1",siteSectionId:"espn:video",networkId:87146,flash:{profile:"87146:espn_desktop_as3",serverUrl:"https://bd0dc.v.fwmrm.net/ad/p/1",sdkurl:"https://mssl.fwmrm.net/p/espn_desktop_prod/AdManager.swf",swfurl:"https://players.brightcove.net/videojs-freewheel/2/videojs.freewheel.swf"},html5:{profile:"87146:espn_desktop_js",serverUrl:"https://1546a.v.fwmrm.net/ad/g/1",sdkurl:"https://mssl.fwmrm.net/p/espn_desktop_prod/AdManager.js"},adTechOrder:["html5","flash"],debug:!1,prerollTimeout:3e3,timeout:5e3,assetId:void 0,assetDuration:void 0,live:!1,keyValues:[],beforeAdManager:function(a){return a},pageViewRandomNumber:1,videoPlayRandomNumber:1,responseType:"vast2"}},function(a,b,c){"use strict";a.exports={chartbeat:{uid:"22222",domain:"espn.com",sections:null,authors:null},comscore:{clientId:"3000005",labels:{c3:'"*null"',c4:"MediaInfo.site",c6:"MediaInfo.comscoreC6",c8:"MediaInfo.pageTitle",ns_st_pu:"MediaInfo.publisher",ns_st_pr:'"*null"',ns_st_ep:"MediaInfo.name",ns_st_sn:'"*null"',ns_st_en:'"*null"',ns_st_st:'"*null"',ns_st_ge:'"*null"',ns_st_ti:'"*null"',ns_st_ia:'"*null"',ns_st_ce:'"*null"',ns_st_ddt:'"*null"',ns_st_tdt:'"*null"'}},conviva:{customerKey:"eec329720efa1110d60c5a6d01a65baf032de653",playerName:"Brightcove Web Player",debug:!1},adobeDCR:{VISITOR_API:{MARKETING_CLOUD_ORG_ID:"EE0201AC512D2BE80A490D4C@AdobeOrg",NAMESPACE:"espn",TRACKING_SERVER:"w88.espn.com",TRACKING_SERVER_SECURE:"sw88.espn.com"},APP_MEASUREMENT:{RSID:"wdgespredesign",TRACKING_SERVER:"w88.espn.com",TRACKING_SERVER_SECURE:"sw88.espn.com"},HEARTBEAT:{DISABLE:!1,TRACKING_SERVER:"espn.hb.omtrdc.net",PUBLISHER:"EE0201AC512D2BE80A490D4C@AdobeOrg",OVP:"Brightcove",SDK:"1.6.7",DEBUG_LOGGING:!1},QUALITY:{TIME_TO_START:0},CUSTOM_EVENT:{disable:!0,bc_data_mapping:{name:"eVar106,prop2",segment:"eVar203",contentType:"eVar201",timePlayed:"event203",view:"event201",segmentView:"event202",complete:"event207",milestones:{25:"event204",50:"event205",75:"event206"}},bc_volumechange:{event:"event208",evar:"prop1"},bc_ad_pause:{event:"event209",evar:"eVar205"},bc_fullscreen_enter:{event:"event212"},bc_fullscreen_exit:{event:"event213"},bc_social_opened:{event:"event214"},bc_social_closed:{event:"event215"},window_blur:{event:"event125",evar:"prop9,eVar74"}},NIELSEN_DATA:{APP_INFO:{clientId:"us-600140-test",vcid:"b01",apid:"T31187EE2-AC6E-46CB-BB54-D07591BED067",appName:"BasicPlayerSample",sfcode:"dcr",nol_sdkDebug:"console",nsdkv:"511"},CONFIG_KEY:"922e1d53d3e10abdde5cbea1b55459f5bacc65d4/55ba372b3336330017000bbf",CONTENT_METADATA:{type:"content",program:"",segB:"",segC:"Sport/Program Code",isfullepisode:"",adloadtype:2,airdate:"",dataSrc:"CMS",tv:!1,crossId2:"ESPN",assetid:"",category:""},AD_METADATA:[]},ESPN_CUSTOM_METADATA:{},MEDIAINFO:{}},nativeOmniture:{trackingServer:"sw88.espn.com",reportSuites:"wdgespcom,wdgespge",secure:!0,site:"espn"}}},function(a,b,c){"use strict";a.exports={VIDEO_BASE_URL:"//api-app.espn.com/v1/video",WATCH_BASE_URL:"//api-app.espn.com/v1/watch",VIDEOHUB_BASE_URL:"https://www.espn.com/videohub"}},function(a,b,c){"use strict";function d(a,b){if(null===b)return a}var e,f,g,h,i,j;f=c(1),i=c(3),g={v:"2.0.0",partner:"watchespn",platform:"web"},h=c(0),e=function(){function a(a,b){this.player=a,h(g,b,d)}return a.prototype.startSession=function(a){this.stopSession(),i.get(a.videoHref).query({v:g.v,partner:g.partner,platform:g.platform,token:g.token,tokenType:g.tokenType,resource:g.resource,SWID:f.SWID}).withCredentials().end(function(b,c){if(b)return console.error(b,c&&c.body),this.onStatusChange(c&&c.body||b,null);"application/json"===c.type&&c.body?(j=c.body.session,g.token=j.token,g.tokenType="GATEKEEPER",a._session=j,a.videoHref=j.playbackUrls&&j.playbackUrls.default,a.simulcastAiringId=j.event.simulcastAiringId,a.passThroughBeaconURL=j.passThroughBeaconURL,this.maintainSession()):this.player.error({type:"AUTH_FAIL",headline:"Authorization failed"}),this.onStatusChange(null,a)}.bind(this))},a.prototype.stopSession=function(){clearTimeout(this.maintainTimeout),clearTimeout(this.programTimeout),j=null},a.prototype.maintainSession=function(){var a,b;a=j.ttl-6e4,b={v:g.v,partner:g.partner,platform:g.platform,token:g.token},clearTimeout(this.maintainTimeout),this.maintainTimeout=setTimeout(function(){i.get(j.maintainUrl).query(b).withCredentials().end(function(a,b){if(a)return console.error(a);"application/json"===b.type&&b.body&&(j=b.body.session,g.token=j.token),this.maintainSession()}.bind(this))}.bind(this),a)},a.prototype.dispose=function(){this.stopSession()},a.prototype.onStatusChange=function(){},a.prototype.startShieldSession=function(a){this.stopSession(),i.get(a.videoHref).query({partner:g.partner,platform:g.platform,SWID:f.SWID?f.SWID.replace(/{|}/g,""):void 0}).withCredentials().end(function(b,c){if(b)return console.error(b,c.body),this.onStatusChange(c.body,null);"application/json"===c.type&&c.body?(a.videoHref=c.body.stream,["hasEspnId3Heartbeats","hasNielsenWatermarks","hasPassThroughAds","passThroughBeaconURL","seekInSeconds"].forEach(function(b){void 0!==c.body[b]&&(a[b]=c.body[b])})):this.player.error({type:"AUTH_FAIL",headline:"Authorization failed"}),this.onStatusChange(null,a)}.bind(this))},a}(),e.configure=function(a){return h(g,a,d),g},a.exports=e},function(a,b,c){"use strict";a.exports={cric:{adAssetIdPrefix:"",adNetworkId:"87146",apiIdPrefix:"cric:",apiParams:{},key:"cric",syndicationKey:"cricinfo"},deportes:{adAssetIdPrefix:"",adNetworkId:"135087",apiIdPrefix:"deportes:",apiParams:{lang:"es"},key:"deportes",syndicationKey:"deportes"},espn:{adAssetIdPrefix:"",adNetworkId:"87146",apiIdPrefix:"espn:",apiParams:{},key:"espn",syndicationKey:"domestic"},intl:{adAssetIdPrefix:"intl:",adNetworkId:"87146",apiIdPrefix:"intl:",apiParams:{sport:"soccer",region:"GB"},key:"intl",syndicationKey:"soccerfc"}}},function(a,b,c){"use strict";var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e=void 0===h,f=function(){try{return!!document.createElement("video").canPlayType}catch(a){return!1}}()&&function(){try{return"localStorage"in window&&null!==window.localStorage}catch(a){return!1}}();if(e=e&&f){var g,h=void 0!==h?h:function(){};!function(){function a(a,b){"undefined"!=typeof ConvivaPrivateModule?ConvivaPrivateModule[b]=a:"undefined"!=typeof ConvivaPrivateTestingModule?ConvivaPrivateTestingModule[b]=a:h[b]=a}function b(a){return a}function c(a){return"undefined"!=typeof ConvivaPrivateModule&&ConvivaPrivateModule.hasOwnProperty(a)?ConvivaPrivateModule[a]:"undefined"!=typeof ConvivaPrivateTestingModule&&ConvivaPrivateTestingModule.hasOwnProperty(a)?ConvivaPrivateTestingModule[a]:h.hasOwnProperty(a)?h[a]:null}function e(a,c){var d,e="";for(d in a)a.hasOwnProperty(d)&&(e+="var "+d+"="+b(c)+"."+d+";");return e}function f(){return"STAT_INIT"}function j(b,c){b.call(f),a(b,c)}function k(a,c,d){a!=f&&(void 0==a[c]?a[c]=d:a[b("super_")+c]=d)}function l(a,b,c){a!=f&&(a[b]=c)}function m(a,b,c,d){a==f&&(b[c]=d)}function n(a,b,c){a!=f&&(void 0!==Object.defineProperty?Object.defineProperty(a,b,{configurable:!0,enumerable:!0,get:c}):a.__defineGetter__(b,c))}function o(a,b,c){a!=f&&(void 0!==Object.defineProperty?Object.defineProperty(a,b,{configurable:!0,set:c}):a.__defineSetter__(b,c))}function p(a,b,c,d){a==f&&n(b,c,d)}function q(a,b,c,d){a==f&&o(b,c,d)}function r(a){return a.constructor==Array||void 0!==a.length}function s(a,b){r(a);if(r(a))for(var c=0;c<a.length;c++)b(a[c]);else for(var d in a)a.hasOwnProperty(d)&&b(a[d])}function t(a,b){if(r(a))for(var c=0;c<a.length;c++)b(c);else for(var d in a)a.hasOwnProperty(d)&&b(d)}function u(a,b,c,d){a==f&&jstest.DeclareTestClass(b,c,d)}function v(a,b,c,d,e){a==f?jstest.DeclareTestMethod(b,c,e):jstest.SetTestMethodClosure(b,c,d)}function w(){w.two32=4294967296,w.Cast=function(a){var b=parseInt(a);return b>w.MaxValue?b%=w.two32:b<0&&(b=-b%w.two32,b=w.two32-b),b},w.uintRegex=new RegExp("^[0-9]+$"),w.Parse=function(a){return S.parseChecker(a,w.uintRegex),w.Cast(a)},w.MaxValue=w.two32-1,w.MinValue=0}function x(){x.Cast=function(a){var b=w.Cast(a);return b>x.MaxValue&&(b-=w.two32),b},x.intRegex=new RegExp("^[+-]?[0-9]+$"),x.Parse=function(a){return S.parseChecker(a,x.intRegex),x.Cast(a)},x.MaxValue=2147483647,x.MinValue=-2147483648}function y(){function a(){g._l=0,g._h=0}function b(a){var b=new y;return b._h=0,b._l=a,b}function c(a){var b=new y;return a>=0?(b._h=0,b._l=w.Cast(a)):(b._h=-1,b._l=w.Cast(a)),b}function d(a){var b=a%y.TWO_TO_32;b<0&&(b=Number(w.MaxValue)+1+b);var c=new y;return c._l=w.Cast(b+.5),c._h=x.Cast((a-b)/y.TWO_TO_32),c}function e(){return Number(g._h)*y.TWO_TO_32+Number(g._l)}var g=this;g==f&&(y.TWO_TO_32=4294967296),m(g,y,"fromUnsignedInt",b),m(g,y,"fromInt",c),m(g,y,"fromNumber",d),n(g,"asNumber",e),g!=f&&(this.toString=function(){return g.asNumber.toString()}),g!=f&&a.apply(this,arguments)}function z(){function a(){y.call(d),d._l=0,d._h=0}function b(a){var b=new z;return b._h=0,b._l=a,b}function c(a){var b=new z;return b._h=Math.floor(a/y.TWO_TO_32),b._l=a%y.TWO_TO_32,b}var d=this;m(d,z,"fromUnsignedInt",b),m(d,z,"fromNumber",c),d!=f&&a.apply(arguments)}function A(){function a(a,b,c){p.id=a,p.bitrate=b,p.resource=c}function b(){p.id=null,p.bitrate=0,p.resource=null}function c(){return p.__auto_id}function d(a){p.__auto_id=a}function e(){return p.__auto_bitrate}function g(a){p.__auto_bitrate=a}function h(){return p.__auto_resource}function i(a){p.__auto_resource=a}function j(){return null!=p.id&&"string"!=typeof p.id?"CandidateStream.id is not a string":null!=p.bitrate&&"number"!=typeof p.bitrate?"CandidateStream.bitrate is not an int":null!=p.resource&&"string"!=typeof p.resource?"CandidateStream.resource is not a string":null}function l(a){if(null==a)return null;var b=new A("",-1,null);return b.id=U.GetStringField("id",a),
b.bitrate=x.Cast(U.GetField("bitrate",a)),b.resource=U.GetStringField("resource",a),b}var p=this;k(p,"Cleanup",b),p!=f&&(p.__auto_id=void 0),n(p,"id",c),o(p,"id",d),p!=f&&(p.__auto_bitrate=void 0),n(p,"bitrate",e),o(p,"bitrate",g),p!=f&&(p.__auto_resource=void 0),n(p,"resource",h),o(p,"resource",i),k(p,"CheckValidity",j),m(p,A,"ConstructClone",l),p!=f&&a.apply(p,arguments)}function B(){function a(){return S.StringDictionaryToRepr(g._tags)}function b(a){g._tags=S.DictionaryFromRepr(a)}function c(){return g._isLive}function d(a){if("true"===a&&(a=!0),"false"===a&&(a=!1),!0!==a&&!1!==a){W.getInstance().err("Invalid value for ConvivaContentInfo.isLive, expected boolean. Defaulting to false."),a=!1}g._isLive=a}function e(a,b){g.assetName=a,g.tags=b,null==g._tags&&(g._tags=new P)}var g=this;g==f&&(B.CDN_NAME_AKAMAI="AKAMAI"),g==f&&(B.CDN_NAME_AMAZON="AMAZON"),g==f&&(B.CDN_NAME_ATT="ATT"),g==f&&(B.CDN_NAME_BITGRAVITY="BITGRAVITY"),g==f&&(B.CDN_NAME_BT="BT"),g==f&&(B.CDN_NAME_CDNETWORKS="CDNETWORKS"),g==f&&(B.CDN_NAME_CHINACACHE="CHINACACHE"),g==f&&(B.CDN_NAME_EDGECAST="EDGECAST"),g==f&&(B.CDN_NAME_HIGHWINDS="HIGHWINDS"),g==f&&(B.CDN_NAME_INTERNAP="INTERNAP"),g==f&&(B.CDN_NAME_LEVEL3="LEVEL3"),g==f&&(B.CDN_NAME_LIMELIGHT="LIMELIGHT"),g==f&&(B.CDN_NAME_OCTOSHAPE="OCTOSHAPE"),g==f&&(B.CDN_NAME_SWARMCAST="SWARMCAST"),g==f&&(B.CDN_NAME_VELOCIX="VELOCIX"),g==f&&(B.CDN_NAME_TELEFONICA="TELEFONICA"),g==f&&(B.CDN_NAME_MICROSOFT="MICROSOFT"),g==f&&(B.CDN_NAME_CDNVIDEO="CDNVIDEO"),g==f&&(B.CDN_NAME_QBRICK="QBRICK"),g==f&&(B.CDN_NAME_NGENIX="NGENIX"),g==f&&(B.CDN_NAME_IPONLY="IPONLY"),g==f&&(B.CDN_NAME_TALKTALK="TALKTALK"),g==f&&(B.CDN_NAME_INHOUSE="INHOUSE"),g==f&&(B.CDN_NAME_COMCAST="COMCAST"),g==f&&(B.CDN_NAME_NICE="NICE"),g==f&&(B.CDN_NAME_TELENOR="TELENOR"),g==f&&(B.CDN_NAME_FASTLY="FASTLY"),g==f&&(B.CDN_NAME_TELIA="TELIA"),g==f&&(B.CDN_NAME_CHINANETCENTER="CHINANETCENTER"),g==f&&(B.CDN_NAME_MIRRORIMAGE="MIRRORIMAGE"),g==f&&(B.CDN_NAME_SONIC="SONIC"),g==f&&(B.CDN_NAME_ATLAS="ATLAS"),g==f&&(B.CDN_NAME_OOYALA="OOYALA"),g==f&&(B.CDN_NAME_TATA="TATA"),g==f&&(B.CDN_NAME_GOOGLE="GOOGLE"),g==f&&(B.CDN_NAME_INSTARTLOGIC="INSTARTLOGIC"),g==f&&(B.CDN_NAME_TELSTRA="TELSTRA"),g==f&&(B.CDN_NAME_OPTUS="OPTUS"),g==f&&(B.CDN_NAME_OTHER="OTHER"),g==f&&(B.FRAMEWORK_NAME_BRIGHTCOVE="Brightcove"),g==f&&(B.FRAMEWORK_NAME_KALTURA="Kaltura"),g==f&&(B.FRAMEWORK_NAME_OOYALA="Ooyala"),g==f&&(B.FRAMEWORK_NAME_OSMF="OSMF"),g==f&&(B.FRAMEWORK_NAME_THE_PLATFORM="thePlatform"),g==f&&(B.DEVICE_TYPE_CONSOLE="Console"),g==f&&(B.DEVICE_TYPE_MOBILE="Mobile"),g==f&&(B.DEVICE_TYPE_PC="PC"),g==f&&(B.DEVICE_TYPE_SET_TOP_BOX="Settop"),g==f&&(B.PLUGIN_NAME_KALTURA="ConvivaKalturaPlugin"),g==f&&(B.NO_RESOURCE="no_resource"),g!=f&&(g.assetName=void 0),g!=f&&(g.duration=-1),g!=f&&(g.encodedFps=-1),g!=f&&(g._tags=null),n(g,"tags",a),o(g,"tags",b),g!=f&&(g.defaultReportingBitrateKbps=-1),g!=f&&(g.defaultReportingCdnName=B.CDN_NAME_OTHER),g!=f&&(g.defaultReportingResource=null),g!=f&&(g.frameworkName=null),g!=f&&(g.frameworkVersion=null),g!=f&&(g.pluginName=null),g!=f&&(g.pluginVersion=null),g!=f&&(g.viewerId=null),g!=f&&(g.deviceId=null),g!=f&&(g.deviceType=null),g!=f&&(g.playerName=null),g!=f&&(g.streamUrl=null),g!=f&&(g._isLive=!1),n(g,"isLive",c),o(g,"isLive",d),g!=f&&e.apply(g,arguments)}function C(){function a(){}function b(){null!=ja._notifiers&&ja._notifiers.Clear()}function c(){return 0}function d(){return-1}function e(){return!0}function g(){return-1}function h(){return-1}function i(){return-1}function j(){return-1}function m(a){}function n(){return!1}function o(){return-1}function p(){return-1}function q(){return-1}function r(){return-1}function s(){return-1}function t(a){return-1}function u(){return null}function v(){return C.BOOLEAN_UNAVAILABLE}function w(){return-1}function x(a){}function y(a){}function z(){return C.API_VERSION}function A(a){if(null!=a){var b=ja._notifiers,c=new T;if(c.Add(a),ja._notifiers=c,null!=ja._notifiers){ja.isProxyInitialized&&a(C.REASON_PROXYINITIALIZED,null),ja.SetDownloadStateChange(G.VIDEO,C.DOWNLOADSTATE_ACTIVE),ja.SetDownloadStateChange(G.AUDIO,C.DOWNLOADSTATE_ACTIVE);var d=ja._stream;ja._stream=new G(-1,B.CDN_NAME_OTHER,B.NO_RESOURCE,-1,-1,-1),ja.SetStream(d),ja._playingState=C.UNKNOWN,ja.SetPlayingState(ja._playingState);for(var e=ja._pendingErrors.Values,f=0;f<e.length;f++){var g=e[f];ja.SetError(g)}var h=ja._availableStreams;ja._availableStreams=null,ja.SetAvailableStreams(h);var i=ja._currentLoadingStatus;ja._currentLoadingStatus=null,ja.SetLoadingStatus(i);var j=ja._displayWidth,k=ja._displayHeight;ja._displayWidth=-1,ja._displayHeight=-1,ja.SetDisplaySize(j,k)}b.Add(a),ja._notifiers=b}}function D(){return ja._currentLoadingStatus}function E(){return ja._playingState}function F(){return ja._stream.bitrateKbps}function H(){return ja._stream.cdnName}function I(){return ja._stream.resource}function J(){return ja._stream}function K(){return null}function L(){return ja._lastError}function M(){return ja._lastMetadata}function N(){return ja._displayWidth}function O(){return ja._displayHeight}function Q(){return null}function R(){return-1}function S(a,b){var c=new T;c.Add(a),c.Add(b);for(var d=ja._notifiers.Values,e=0;e<d.length;e++){var f=d[e];ja.notifyListeners(f,C.REASON_DOWNLOADSTATECHANGE,c)}}function U(a){if(a.bitrateKbps<=-2&&(a.bitrateKbps=ja._stream.bitrateKbps),null==a.cdnName&&(a.cdnName=ja._stream.cdnName),null==a.resource&&(a.resource=ja._stream.resource),!ja._stream.equals(a))for(var b=ja._notifiers.Values,c=0;c<b.length;c++){var d=b[c];ja.notifyListeners(d,C.REASON_STREAMINFOCHANGE,a)}ja._stream=a}function V(a){if(ja._lastError=a,null!=ja._notifiers&&ja._notifiers.Count>0)for(var b=ja._notifiers.Values,c=0;c<b.length;c++){var d=b[c];ja.notifyListeners(d,C.REASON_ERRORCHANGE,a)}else ja._pendingErrors.Add(a)}function W(a){if(ja._lastMetadata=a,null!=a)for(var b=ja._notifiers.Values,c=0;c<b.length;c++){var d=b[c];ja.notifyListeners(d,C.REASON_METADATACHANGE,a)}}function X(a){for(var b=ja._notifiers.Values,c=0;c<b.length;c++){var d=b[c];ja.notifyListeners(d,C.REASON_LOG,a)}}function Y(a){for(var b=ja._notifiers.Values,c=0;c<b.length;c++){var d=b[c];ja.notifyListeners(d,C.REASON_LOG,"ERROR:"+a)}}function Z(){return null}function $(a){if(ja._currentLoadingStatus=a,null!=a)for(var b=ja._notifiers.Values,c=0;c<b.length;c++){var d=b[c];ja.notifyListeners(d,C.REASON_LOADINGSTATUSCHANGE,a)}}function _(a){if(a!=ja._playingState)for(var b=ja._notifiers.Values,c=0;c<b.length;c++){var d=b[c];ja.notifyListeners(d,C.REASON_PLAYINGSTATECHANGE,a)}ja._playingState=a}function aa(a){var b=new G(a,null,null,-1,-1,-1);ja.SetStream(b)}function ba(a){var b=new G(-2,a,null,-1,-1,-1);ja.SetStream(b)}function ca(a){var b=new G(-2,null,a,-1,-1,-1);ja.SetStream(b)}function da(a,b){if(-1!=a&&-1!=b){ja._displayWidth=a,ja._displayHeight=b;var c=new P;c.Add("width",a),c.Add("height",b);for(var d=ja._notifiers.Values,e=0;e<d.length;e++){var f=d[e];ja.notifyListeners(f,C.REASON_DISPLAYSIZECHANGE,c)}}}function ea(a){if(ja._availableStreams=a,null!=a)for(var b=ja._notifiers.Values,c=0;c<b.length;c++){var d=b[c];ja.notifyListeners(d,C.REASON_AVAILABLESTREAMINFOCHANGE,a)}}function fa(a,b){var c=new P;c.SetValue("act",a),b>=0&&c.SetValue("skto",b);for(var d=ja._notifiers.Values,e=0;e<d.length;e++){var f=d[e];ja.notifyListeners(f,C.REASON_SEND_SEEK_EVENT,c)}}function ga(){if(!ja.isProxyInitialized){ja.isProxyInitialized=!0;for(var a=ja._notifiers.Values,b=0;b<a.length;b++){var c=a[b];ja.notifyListeners(c,C.REASON_PROXYINITIALIZED,null)}}}function ha(a){for(var b=ja._notifiers.Values,c=0;c<b.length;c++){var d=b[c];ja.notifyListeners(d,C.REASON_NETWORKINFOCHANGE,a)}}function ia(a,b,c){try{a(b,c)}catch(b){a(C.REASON_LOG,"ConvivaStreamerProxy : uncaught exception "+b)}}var ja=this;ja!=f&&(ja._notifiers=new T),ja!=f&&(ja._stream=new G(-1,B.CDN_NAME_OTHER,B.NO_RESOURCE,-1,-1,-1)),ja!=f&&(ja._playingState=C.UNKNOWN),ja!=f&&(ja._lastMetadata=null),ja!=f&&(ja._lastError=null),ja!=f&&(ja._pendingErrors=new T),ja!=f&&(ja._displayWidth=-1),ja!=f&&(ja._displayHeight=-1),ja!=f&&(ja._availableStreams=null),ja!=f&&(ja._currentLoadingStatus=null),ja!=f&&(ja.isProxyInitialized=void 0),ja==f&&(C.REASON_NETWORKINFOCHANGE="NetworkInfoChange"),ja==f&&(C.REASON_PLAYINGSTATECHANGE="PlayingStateChange"),ja==f&&(C.REASON_STREAMINFOCHANGE="StreamInfoChange"),ja==f&&(C.REASON_AVAILABLESTREAMINFOCHANGE="AvailableStreamInfoChange"),ja==f&&(C.REASON_PROXYINITIALIZED="ProxyInitialized"),ja==f&&(C.REASON_METADATACHANGE="MetadataChange"),ja==f&&(C.REASON_LOADINGSTATUSCHANGE="LoadingStatusChange"),ja==f&&(C.REASON_DOWNLOADSTATECHANGE="DownloadStateChange"),ja==f&&(C.REASON_DISPLAYSIZECHANGE="DisplaySizeChange"),ja==f&&(C.REASON_ERRORCHANGE="ErrorChange"),ja==f&&(C.REASON_LOG="Log"),ja==f&&(C.REASON_RESOURCE_ERROR="ResourceError"),ja==f&&(C.REASON_PRESENTATION_CHANGE="PresentationChange"),ja==f&&(C.STOPPED="STOPPED"),ja==f&&(C.PLAYING="PLAYING"),ja==f&&(C.BUFFERING="BUFFERING"),ja==f&&(C.PAUSED="PAUSED"),ja==f&&(C.NOT_MONITORED="NOT_MONITORED"),ja==f&&(C.ERROR="ERROR"),ja==f&&(C.UNKNOWN="UNKNOWN"),ja==f&&(C.DOWNLOADSTATE_ACTIVE=1),ja==f&&(C.DOWNLOADSTATE_INACTIVE=0),ja==f&&(C.METADATA_DURATION="duration"),ja==f&&(C.METADATA_ENCODED_FRAMERATE="framerate"),ja==f&&(C.REASON_SEND_SEEK_EVENT="SendSeekEvent"),ja==f&&(C.BOOLEAN_TRUE=1),ja==f&&(C.BOOLEAN_FALSE=-1),ja==f&&(C.BOOLEAN_UNAVAILABLE=0),ja==f&&(C.CAPABILITY_VIDEO=1),ja==f&&(C.CAPABILITY_QUALITY_METRICS=2),ja==f&&(C.CAPABILITY_BITRATE_METRICS=4),ja==f&&(C.CAPABILITY_BITRATE_SWITCHING=8),ja==f&&(C.CAPABILITY_CDN_SWITCHING=16),ja==f&&(C.CAPABILITY_BITRATE_EXTERNAL=16),ja==f&&(C.CAPABILITY_SOURCE_HTTP=32),ja==f&&(C.CAPABILITY_SOURCE_CHUNKED=64),ja==f&&(C.CAPABILITY_SOURCE_STREAMING=128),k(ja,"Cleanup",b),k(ja,"GetCapabilities",c),k(ja,"GetPlayheadTimeMs",d),k(ja,"GetIsPHTAccurate",e),k(ja,"GetBufferLengthMs",g),k(ja,"GetVideoBufferLengthMs",h),k(ja,"GetAudioBufferLengthMs",i),k(ja,"GetStartingBufferLengthMs",j),k(ja,"SetStartingBufferLengthMs",m),k(ja,"GetIsStartingBufferFull",n),k(ja,"GetRenderedFrameRate",o),k(ja,"GetSourceFrameRate",p),k(ja,"GetDroppedFrames",q),k(ja,"GetCpuPercent",r),k(ja,"GetMemoryAvailable",s),k(ja,"GetCapacityKbps",t),k(ja,"GetServerAddress",u),k(ja,"GetIsLive",v),k(ja,"GetStreamerVersion",w),k(ja,"FetchCandidateStreams",x),k(ja,"Play",y),k(ja,"GetApiVersion",z),ja==f&&(C.API_VERSION=1),k(ja,"SetMonitoringNotifier",A),k(ja,"GetLoadingStatus",D),k(ja,"GetPlayingState",E),k(ja,"GetBitrateKbps",F),k(ja,"GetCdnName",H),k(ja,"GetResource",I),k(ja,"GetStream",J),k(ja,"GetStreams",K),k(ja,"GetLastError",L),k(ja,"GetLastMetadata",M),k(ja,"GetDisplayWidth",N),k(ja,"GetDisplayHeight",O),k(ja,"GetStreamerType",Q),k(ja,"GetLoadedBytes",R),k(ja,"SetDownloadStateChange",S),k(ja,"SetStream",U),k(ja,"SetError",V),k(ja,"SetMetadata",W),k(ja,"Log",X),k(ja,"LogError",Y),k(ja,"GetTotalLoadedBytes",Z),k(ja,"SetLoadingStatus",$),k(ja,"SetPlayingState",_),k(ja,"SetBitrateKbps",aa),k(ja,"SetCdnName",ba),k(ja,"SetResource",ca),k(ja,"SetDisplaySize",da),k(ja,"SetAvailableStreams",ea),k(ja,"SendSeekEvent",fa),k(ja,"SetProxyInitialized",ga),k(ja,"SetNetworkInfo",ha),l(ja,"notifyListeners",ia),ja!=f&&a.apply(ja,arguments)}function D(){function a(a){return D.readyState?void D._utils.log("LivePass.init(): already initialized."):(null==D._utils&&(D._utils=W.CreateUtils(null)),null==a||0==a.length?void D._utils.err("LivePass.init(): invalid customerKey: "+a):void D._utils.runProtectedSync(function(){D._settings=D._utils.getSettings(),D._toggleTracesUsed&&(D._settings.enableLogging=D._toggleTracesValue),D._settings.clientInstanceId=D._utils.randUInt(),D._settings.customerKey=a,D._utils.log("LivePass.init(): url="+D._settings.gatewayUrl+" customerKey="+D._settings.customerKey),D._utils.startFetchClientId(),F.init(),D._sessionFactory=new M,D.readyState=!0,D._utils.log("LivePass.init(): done."),D.networkInfo=new E},"LivePass.init"))}function b(a,b){if(D.readyState)return void D._utils.log("LivePass.initWithSettings(): already initialized.");D._utils=W.CreateUtils(b),D.init(a)}function c(){null!=D._utils&&D._utils.runProtected(function(){D._utils.log("LivePass.cleanup()"),null!=D._sessionFactory&&D._sessionFactory.cleanup(),D._sessionFactory=null,D._globalSessionId=-1,null!=D._utils&&D._utils.cleanup(),D._utils=null,D._settings=null},"LivePass.cleanup"),D.readyState=!1}function d(a,b,c){return D.readyState?D.createSessionWithGlobal(a,b,c,!1,D.networkInfo):(D.ping("LivePass.createSession before LivePass.init"),-1)}function e(a,b,c,d,e){var f=D._sessionFactory.newSessionId();return D._utils.runProtected(function(){D._sessionFactory.makeSession(a,b,c,f,d,e)},"LivePass.createSession"),f}function g(a,b,c){return D.readyState?(void 0===c&&(c=I.SEVERITY_FATAL),c!==I.SEVERITY_FATAL&&c!==I.SEVERITY_WARNING?void D._utils.log("LivePass.reportError(): invalid errorSeverity parameter: "+c):void D._utils.runProtected(function(){var d=D._sessionFactory.getSession(a);null!=d&&d.reportError(I.makeUnscopedError(b,c))},"LivePass.reportError")):void D.ping("LivePass.reportError before LivePass.init")}function h(a,b){if(!D.readyState)return void D.ping("LivePass.setBitrate before LivePass.init");D._utils.runProtected(function(){var c=D._sessionFactory.getSession(a);null!=c&&c.setBitrate(b)},"LivePass.setBitrate")}function i(a,b){if(!D.readyState)return void D.ping("LivePass.setCurrentStreamMetadata before LivePass.init");D._utils.runProtected(function(){var c=D._sessionFactory.getSession(a);null!=c&&c.setCurrentStreamMetadata(b)},"LivePass.setCurrentStreamMetadata")}function j(a,b){if(!D.readyState)return void D.ping("LivePass.setCdnNameOrResource before LivePass.init");D._utils.runProtected(function(){var c=D._sessionFactory.getSession(a);null!=c&&c.setCdnNameOrResource(b)},"LivePass.setCdnNameOrResource")}function k(a,b){if(!D.readyState)return void D.ping("LivePass.updateContentMetadata before LivePass.init");D._utils.runProtected(function(){var c=D._sessionFactory.getSession(a);null!=c&&c.updateContentMetadata(b)},"LivePass.updateContentMetadata")}function l(a){if(!D.readyState)return void D.ping("LivePass.detachStreamer before LivePass.init");D._utils.runProtected(function(){var b=D._sessionFactory.getSession(a);null!=b&&b.detachStreamer()},"LivePass.detachStreamer")}function n(a,b){if(!D.readyState)return void D.ping("LivePass.attachStreamer before LivePass.init");D._utils.runProtected(function(){var c=D._sessionFactory.getSession(a);null!=c&&c.attachStreamer(b)},"LivePass.attachStreamer")}function o(a,b,c){if(!D.readyState)return void D.ping("LivePass.sendSessionEvent before LivePass.init");var d=null;d=S.DictionaryFromRepr(c),D._utils.runProtected(function(){var c=D._sessionFactory.getSession(a);null!=c&&c.sendCustomEvent(b,d)},"LivePass.sendSessionEvent")}function p(a,b){if(!D.readyState)return void D.ping("LivePass.sendEvent before LivePass.init");D._utils.runProtected(function(){if(D._globalSessionId<0){var c=new B("",new P);D._globalSessionId=D.createSessionWithGlobal(null,c,null,!0)}D.sendSessionEvent(D._globalSessionId,a,b)},"LivePass.sendEvent")}function q(a,b){if(!D.readyState)return void D.ping("LivePass.setPlayerSeekStart before LivePass.init");D._utils.runProtected(function(){var c=D._sessionFactory.getSession(a);null!=c&&c.sendSeekEvent(D.SEEK_ACTIONS_TYPE.SEEK_START,b)},"LivePass.setPlayerSeekStart")}function r(a){if(!D.readyState)return void D.ping("LivePass.setPlayerSeekEnd before LivePass.init");D._utils.runProtected(function(){var b=D._sessionFactory.getSession(a);null!=b&&b.sendSeekEvent(D.SEEK_ACTIONS_TYPE.SEEK_END,-1)},"LivePass.setPlayerSeekEnd")}function s(a){if(!D.readyState)return void D.ping("LivePass.setUserSeekButtonUp before LivePass.init");D._utils.runProtected(function(){var b=D._sessionFactory.getSession(a);null!=b&&b.sendSeekEvent(D.SEEK_ACTIONS_TYPE.BUTTON_UP,-1)},"LivePass.setUserSeekButtonUp")}function t(a){if(!D.readyState)return void D.ping("LivePass.setUserSeekButtonDown before LivePass.init");D._utils.runProtected(function(){var b=D._sessionFactory.getSession(a);null!=b&&b.sendSeekEvent(D.SEEK_ACTIONS_TYPE.BUTTON_DOWN,-1)},"LivePass.setUserSeekButtonDown")}function u(a){if(!D.readyState)return void D.ping("LivePass.cleanupSession before LivePass.init");D._utils.runProtected(function(){D._sessionFactory.cleanupSession(a)},"Livepass.cleanupSession")}function v(a){if(!D.readyState)return void D.ping("LivePass.pauseJoinTime before LivePass.init");D.adStart(a)}function w(a){if(!D.readyState)return void D.ping("LivePass.resumeJoinTime before LivePass.init");D.adEnd(a)}function x(a){if(!D.readyState)return void D.ping("LivePass.adStart before LivePass.init");D._utils.runProtected(function(){var b=D._sessionFactory.getSession(a);null!=b&&b.adStart()},"LivePass.adStart")}function y(a){if(!D.readyState)return void D.ping("LivePass.adEnd before LivePass.init");D._utils.runProtected(function(){var b=D._sessionFactory.getSession(a);null!=b&&b.adEnd()},"LivePass.adEnd")}function z(a){D._toggleTracesUsed=!0,null!=D._settings?D._settings.enableLogging=a:D._toggleTracesValue=a}function A(a){null!=D.networkInfo&&(D.networkInfo.connectionType=a,D._utils.runProtected(function(){var b=D._sessionFactory.getSession(D._sessionFactory.lastSessionId);null!=b&&b.setConnectionType(a)},"LivePass.setConnectionType"))}function C(a){null!=D.networkInfo&&(D.networkInfo.ssid=a,D._utils.runProtected(function(){var b=D._sessionFactory.getSession(D._sessionFactory.lastSessionId);null!=b&&b.setSsid(a)},"LivePass.setSsid"))}function G(a){null!=D.networkInfo&&(D.networkInfo.signalStrength=a,D._utils.runProtected(function(){var b=D._sessionFactory.getSession(D._sessionFactory.lastSessionId);null!=b&&b.setSignalStrength(a)},"LivePass.setSignalStrength"))}function H(a){null!=D.networkInfo&&(D.networkInfo.linkEncryption=a,D._utils.runProtected(function(){var b=D._sessionFactory.getSession(D._sessionFactory.lastSessionId);null!=b&&b.setLinkEncryption(a)},"LivePass.setLinkEncryption"))}function J(a){null!=D._utils&&D._utils.ping(a)}var K=this;D.SEEK_ACTIONS_TYPE={SEEK_START:"pss",SEEK_END:"pse",BUTTON_UP:"bu",BUTTON_DOWN:"bd"},K==f&&(D.READY="READY"),K==f&&(D.STREAM_SELECTION_SUCC=0),K==f&&(D.STREAM_SELECTION_FAILURE=1),K==f&&(D.STREAM_SELECTION_TIMEOUT=2),K==f&&(D.OPTION_EXTERNAL_BITRATE_REPORTING="externalBitrateReporting"),K==f&&(D.readyState=!1),K==f&&(D._settings=null),K==f&&(D._utils=null),K==f&&(D._sessionFactory=null),K==f&&(D._toggleTracesUsed=!1),K==f&&(D._toggleTracesValue=!1),K==f&&(D._globalSessionId=-1),m(K,D,"init",a),m(K,D,"initWithSettings",b),m(K,D,"cleanup",c),m(K,D,"createSession",d),m(K,D,"createSessionWithGlobal",e),m(K,D,"reportError",g),m(K,D,"setBitrate",h),m(K,D,"setCurrentStreamMetadata",i),m(K,D,"setCdnNameOrResource",j),m(K,D,"updateContentMetadata",k),m(K,D,"detachStreamer",l),m(K,D,"attachStreamer",n),m(K,D,"sendSessionEvent",o),m(K,D,"sendEvent",p),m(K,D,"setPlayerSeekStart",q),m(K,D,"setPlayerSeekEnd",r),m(K,D,"setUserSeekButtonUp",s),m(K,D,"setUserSeekButtonDown",t),m(K,D,"cleanupSession",u),m(K,D,"pauseJoinTime",v),m(K,D,"resumeJoinTime",w),m(K,D,"adStart",x),m(K,D,"adEnd",y),m(K,D,"toggleTraces",z),m(K,D,"setConnectionType",A),m(K,D,"setSsid",C),m(K,D,"setSignalStrength",G),m(K,D,"setLinkEncryption",H),m(K,D,"ping",J)}function E(){function a(a,b,c,d){g.connectionType=a,g.ssid=b,g.linkEncryption=d,g.signalStrength=c}function b(){return g.connectionType}function c(){return g.ssid}function d(){return g.signalStrength}function e(){return g.linkEncryption}var g=this;g!=f&&(g.connectionType=void 0),g!=f&&(g.ssid=void 0),g!=f&&(g.signalStrength=1),g!=f&&(g.linkEncryption=void 0),k(g,"GetConnectionType",b),k(g,"GetSsid",c),k(g,"GetSignalStrength",d),k(g,"GetLinkEncryption",e),g!=f&&a.apply(g,arguments)}function F(){function a(){F.stateToInt=new P,F.intToState=new P,F.stateToInt.SetValue(F.UNINITIALIZED,F.eUninitialized),F.intToState.SetValue(F.eUninitialized,F.UNINITIALIZED),F.stateToInt.SetValue(F.PLAYING,F.ePlaying),F.intToState.SetValue(F.ePlaying,F.PLAYING),F.stateToInt.SetValue(F.STOPPED,F.eStopped),F.intToState.SetValue(F.eStopped,F.STOPPED),F.stateToInt.SetValue(F.PAUSED,F.ePaused),F.intToState.SetValue(F.ePaused,F.PAUSED),F.stateToInt.SetValue(F.BUFFERING,F.eBuffering),F.intToState.SetValue(F.eBuffering,F.BUFFERING),F.stateToInt.SetValue(F.NOT_MONITORED,F.eNotMonitored),F.intToState.SetValue(F.eNotMonitored,F.NOT_MONITORED),F.stateToInt.SetValue(F.UNKNOWN,F.eUnknown),F.intToState.SetValue(F.eUnknown,F.UNKNOWN)}function b(a){return null==F.stateToInt&&F.init(),F.stateToInt.ContainsKey(a)?F.stateToInt.GetValue(a):F.eUnknown}function c(a){return null==F.intToState&&F.init(),F.intToState.ContainsKey(a)?F.intToState.GetValue(a):F.UNKNOWN}function d(){F.stateToInt=null}var e=this;e==f&&(F.stateToInt=null),e==f&&(F.intToState=null),e==f&&(F.UNINITIALIZED="UNINITIALIZED"),e==f&&(F.eUninitialized=0),e==f&&(F.PLAYING="PLAYING"),e==f&&(F.ePlaying=3),e==f&&(F.STOPPED="STOPPED"),e==f&&(F.eStopped=1),e==f&&(F.PAUSED="PAUSED"),e==f&&(F.ePaused=12),e==f&&(F.BUFFERING="BUFFERING"),e==f&&(F.eBuffering=6),e==f&&(F.NOT_MONITORED="NOT_MONITORED"),e==f&&(F.eNotMonitored=98),e==f&&(F.UNKNOWN="UNKNOWN"),e==f&&(F.eUnknown=100),m(e,F,"init",a),m(e,F,"stringToInt",b),m(e,F,"intToString",c),m(e,F,"cleanup",d)}function G(){function a(){return z.__auto_type}function b(a){z.__auto_type=a}function c(){return z.__auto_sourceHeightPixels}function d(a){z.__auto_sourceHeightPixels=a}function e(){return z.__auto_sourceWidthPixels}function g(a){z.__auto_sourceWidthPixels=a}function h(){return z.__auto_bitrateKbps}function i(a){z.__auto_bitrateKbps=a}function j(){return z.__auto_resource}function l(a){z.__auto_resource=a}function p(){return z.__auto_cdnName}function q(a){z.__auto_cdnName=a}function r(a,b,c,d,e,f){z.bitrateKbps=a,z.cdnName=b,z.resource=c,z.type=d,z.sourceHeightPixels=f,z.sourceWidthPixels=e}function s(){return z.bitrateKbps}function t(){return z.cdnName}function u(){return z.resource}function v(a){return null!=a&&(z.cdnName==a.cdnName&&z.resource==a.resource&&z.bitrateKbps==a.bitrateKbps&&z.type==a.type&&z.sourceHeightPixels==a.sourceHeightPixels&&z.sourceWidthPixels==a.sourceWidthPixels)}function w(a){if(null==a)return null;var b=new G(-1,B.CDN_NAME_OTHER,null,-1,-1,-1);return b.type=x.Cast(U.GetField("type",a)),b.bitrateKbps=x.Cast(U.GetField("bitrateKbps",a)),b.resource=U.GetStringField("resource",a),b.cdnName=U.GetStringField("cdnName",a),b.sourceHeightPixels=x.Cast(U.GetField("sourceHeightPixels",a)),b.sourceWidthPixels=x.Cast(U.GetField("sourceWidthPixels",a)),b}function y(){var a=null;switch(z.type){case G.UNKNOWN:a="UNKNOWN";break;case G.VIDEO:a="VIDEO";break;case G.AUDIO:a="AUDIO";break;case G.TEXT:a="TEXT";break;case G.RESOURCE:a="RESOURCE";break;default:throw new Error("Unknown stream type "+z.type)}return"type="+a+", bitrateKbps="+z.bitrateKbps+", resource="+(null!=z.resource?z.resource:"null")+", cdnName="+(null!=z.cdnName?z.cdnName:"null")+", sourceHeightPixels="+z.sourceHeightPixels+", sourceWidthPixels="+z.sourceWidthPixels}var z=this;z==f&&(G.UNKNOWN=-1),z==f&&(G.AUDIO=0),z==f&&(G.VIDEO=1),z==f&&(G.TEXT=2),z==f&&(G.RESOURCE=3),z==f&&(G.UNKNOWN_RESOURCE=""),z==f&&(G.MAX_BITRATE=2147483647),z!=f&&(z.__auto_type=void 0),n(z,"type",a),o(z,"type",b),z!=f&&(z.__auto_sourceHeightPixels=void 0),n(z,"sourceHeightPixels",c),o(z,"sourceHeightPixels",d),z!=f&&(z.__auto_sourceWidthPixels=void 0),n(z,"sourceWidthPixels",e),o(z,"sourceWidthPixels",g),z!=f&&(z.__auto_bitrateKbps=void 0),n(z,"bitrateKbps",h),o(z,"bitrateKbps",i),z!=f&&(z.__auto_resource=void 0),n(z,"resource",j),o(z,"resource",l),z!=f&&(z.__auto_cdnName=void 0),n(z,"cdnName",p),o(z,"cdnName",q),k(z,"GetBitrateKbps",s),k(z,"GetCdnName",t),k(z,"GetResource",u),k(z,"equals",v),m(z,G,"ConstructClone",w),k(z,"ToStr",y),z!=f&&r.apply(z,arguments)}function H(){function a(a,b,c){return new H(H.GetNextId(!1),a,b,-1,null,c)}function b(a,b){return new H(H.GetNextId(!1),null,a,-1,null,b)}function c(){}function d(){return C.__auto_id}function e(a){C.__auto_id=a}function g(){return C.__auto_timeoutMs}function h(a){C.__auto_timeoutMs=a}function i(){return C.__auto_sourceStream}function j(a){C.__auto_sourceStream=a}function l(){return C.__auto_targetStream}function p(a){C.__auto_targetStream=a}function q(){return C.__auto_mode}function r(a){C.__auto_mode=a}function s(){return C.__auto_status}function t(a){C.__auto_status=a}function u(a,b,c,d,e,f){C.id=a,C.sourceStream=b,C.targetStream=c,C.timeoutMs=d,C.mode=e,C.status=f}function v(){if(null==C.id)return"StreamSwitch.id is null (and must be non-null)";if(null!=C.id&&"string"!=typeof C.id)return"StreamSwitch.id is not a string";if(null!=C.timeoutMs&&"number"!=typeof C.timeoutMs)return"StreamSwitch.timeoutMs is not an int";if(null!=C.mode&&"string"!=typeof C.mode)return"StreamSwitch.mode is not a string";if(null!=C.status&&"string"!=typeof C.status)return"StreamSwitch.status is not a string";if(!(null==C.sourceStream||C.sourceStream instanceof A))return"StreamSwitch.sourceStream is not a CandidateStream";if(null!=C.targetStream&&!(C.targetStream instanceof A))return"StreamSwitch.targetStream is not a CandidateStream";var a=null!=C.sourceStream?C.sourceStream.CheckValidity():null;if(null!=a)return a;var b=null!=C.targetStream?C.targetStream.CheckValidity():null;return null!=b?b:null}function w(a){var b=new H(null,null,null,-1,"","");return b.id=U.GetStringField("id",a),b.sourceStream=A.ConstructClone(U.GetField("sourceStream",a)),b.targetStream=A.ConstructClone(U.GetField("targetStream",a)),b.timeoutMs=x.Cast(U.GetField("timeoutMs",a)),b.mode=U.GetStringField("mode",a),b.status=U.GetStringField("status",a),b}function y(){H._nextId=0}function z(){H._nextId=0}function B(a){var b=H._nextId;return H._nextId+=1,a?"c3."+S.ToString(b):S.ToString(b)}var C=this;C==f&&(H._nextId=0),C==f&&(H.PENDING="PENDING"),C==f&&(H.IN_PROGRESS="IN_PROGRESS"),C==f&&(H.SUCCEEDED="SUCCEEDED"),C==f&&(H.FAILED="FAILED"),C==f&&(H.INTERRUPTED="INTERRUPTED"),m(C,H,"MakeSwitch",a),m(C,H,"MakeSwitchToStream",b),k(C,"Cleanup",c),C!=f&&(C.__auto_id=void 0),n(C,"id",d),o(C,"id",e),C!=f&&(C.__auto_timeoutMs=void 0),n(C,"timeoutMs",g),o(C,"timeoutMs",h),C!=f&&(C.__auto_sourceStream=void 0),n(C,"sourceStream",i),o(C,"sourceStream",j),C!=f&&(C.__auto_targetStream=void 0),n(C,"targetStream",l),o(C,"targetStream",p),C!=f&&(C.__auto_mode=void 0),n(C,"mode",q),o(C,"mode",r),C!=f&&(C.__auto_status=void 0),n(C,"status",s),o(C,"status",t),k(C,"CheckValidity",v),m(C,H,"ConstructClone",w),m(C,H,"StaticInit",y),m(C,H,"StaticCleanup",z),m(C,H,"GetNextId",B),C!=f&&u.apply(C,arguments)}function I(){function a(){return w.__auto_errorCode}function b(a){w.__auto_errorCode=a}function c(){return w.__auto_severity}function d(a){w.__auto_severity=a}function e(){return w.__auto_stream}function g(a){w.__auto_stream=a}function h(){return w.__auto_index}function i(a){w.__auto_index=a}function j(){return w.__auto_scope}function l(a){w.__auto_scope=a}function p(a,b){return new I(a,null,-1,b,I.ERROR_SCOPE_UNKNOWN)}function q(a,b,c){return new I(a,c,-1,b,I.ERROR_SCOPE_STREAM)}function r(a,b,c){return new I(a,c,-1,b,I.ERROR_SCOPE_RESOURCE)}function s(a,b,c,d){return new I(a,c,d,b,I.ERROR_SCOPE_STREAM_SEGMENT)}function t(a,b,c,d,e){w.errorCode=a,w.stream=b,w.index=c,w.severity=d,w.scope=e}function u(a){if(null==a)return null;var b=new I("",null,0,0,0);return b.errorCode=U.GetStringField("errorCode",a),b.severity=x.Cast(U.GetField("severity",a)),b.stream=G.ConstructClone(U.GetField("stream",a)),b.scope=x.Cast(U.GetField("scope",a)),b.index=x.Cast(U.GetField("index",a)),b}function v(){return"errorCode="+(null!=w.errorCode?w.errorCode:"null")+", index="+w.index+", severity="+w.severity+", scope="+w.scope+", stream=("+w.stream.ToStr()+")"}var w=this;w==f&&(I.ERROR_SCOPE_UNKNOWN=0),w==f&&(I.ERROR_SCOPE_STREAM_SEGMENT=1),w==f&&(I.ERROR_SCOPE_STREAM=2),w==f&&(I.ERROR_SCOPE_RESOURCE=3),w==f&&(I.SEVERITY_WARNING=0),w==f&&(I.SEVERITY_FATAL=1),w!=f&&(w.__auto_errorCode=void 0),n(w,"errorCode",a),o(w,"errorCode",b),w!=f&&(w.__auto_severity=void 0),n(w,"severity",c),o(w,"severity",d),w!=f&&(w.__auto_stream=void 0),n(w,"stream",e),o(w,"stream",g),w!=f&&(w.__auto_index=void 0),n(w,"index",h),o(w,"index",i),w!=f&&(w.__auto_scope=void 0),n(w,"scope",j),o(w,"scope",l),m(w,I,"makeUnscopedError",p),m(w,I,"makeStreamError",q),m(w,I,"makeResourceError",r),m(w,I,"makeStreamSegmentError",s),m(w,I,"ConstructClone",u),k(w,"ToStr",v),w!=f&&t.apply(w,arguments)}function J(){function a(a,b,c,d,e,f){if(X._eventQueue=b,X._utils=W.getInstance(),X._contentInfo=c,X._networkInfo=f,X._sessionId=e,X._nextHeartbeat=new P,X._streamerObject=a,X._startTimeMs=0,X._lastStateUpdateTimeMs=0,X._pauseJoinTimeStartTimeMs=0,X._pauseJointTimeTotalMs=0,X._joinTimeMs=-1,X._nominalPlayingBitsTotal=0,X._encodedFps=-1,X._contentInfo.encodedFps=-1,X._contentLengthSec=-1,X._contentInfo.duration=-1,X._playingFpsObservationCount=0,X._playingFpsTotal=0,null!=d){var g=S.DictionaryFromRepr(d);g.ContainsKey(D.OPTION_EXTERNAL_BITRATE_REPORTING)&&(X._externalBitrateReporting=g.GetValue(D.OPTION_EXTERNAL_BITRATE_REPORTING))}}function b(a){X._startTimeMs=a,X._lastStateUpdateTimeMs=a,X.buildInitialStreamInfo(),X.attachStreamer(X._streamerObject),X._streamerObject=null}function c(a){return X._utils.logSession("Monitor.attachStreamer()",X._sessionId),null!=X._streamer?void X._utils.logSession("Monitor.attachStreamer(): detach current streamer first",X._sessionId):null==a?(X._utils.logSession("Monitor.attachStreamer(): received a null streamer",X._sessionId),void X.SetPlayingState(C.NOT_MONITORED)):(X._streamer=J.wrapInConvivaStreamerProxy(a,X._sessionId),X._sessionFlags=X._streamer.GetCapabilities(),X._externalBitrateReporting&&(X._sessionFlags|=C.CAPABILITY_BITRATE_EXTERNAL),X.SetPlayingState(C.UNKNOWN),X._streamer.SetMonitoringNotifier(X.notificationFromStreamerProxy),void(X._lastStateUpdateTimeMs=X._utils.epochTimeMs()))}function d(){X._utils.logSession("Monitor.detachStreamer()",X._sessionId),X.updateMetrics(),null!=X._streamer&&(X._streamer.Cleanup(),X.SetPlayingState(C.NOT_MONITORED),X._streamer=null)}function e(){if(X._utils.logSession("Monitor.pauseJoinTime()",X._sessionId),0==X._pauseJoinTimeStartTimeMs){X._pauseJoinTimeStartTimeMs=X._utils.epochTimeMs();var a=new P,b=new P;a.SetValue("pj",!0),b.SetValue("pj",!1),X.declareStateChange(a,b)}}function g(a){if(X._utils.logSession("Monitor.resumeJoinTime()",X._sessionId),X._pauseJoinTimeStartTimeMs>0&&(X._pauseJointTimeTotalMs+=X._utils.epochTimeMs()-X._pauseJoinTimeStartTimeMs,a)){var b=new P,c=new P;b.SetValue("pj",!1),c.SetValue("pj",!0),X.declareStateChange(b,c)}X._pauseJoinTimeStartTimeMs=0}function h(){return X._streamer}function i(){var a=-1,b=null,c=B.CDN_NAME_OTHER;null!=X._contentInfo&&(c=X._contentInfo.defaultReportingCdnName,b=null==X._contentInfo.defaultReportingResource||X._contentInfo.defaultReportingResource==B.NO_RESOURCE?c:X._contentInfo.defaultReportingResource,a=X._contentInfo.defaultReportingBitrateKbps),X._streamInfo=new G(a,c,b,-1,-1,-1)}function j(a,b){X._utils.runProtected(function(){switch(a){case"PlayingStateChange":var c=b;X.OnPlayingStateChange(c);break;case"StreamInfoChange":var d=b;X.SetStream(d);break;case"ErrorChange":var e=b;X.OnError(e);break;case"MetadataChange":X.OnMetadata(b);break;case"Log":var f=b;X._utils.logSession(f,X._sessionId);break;case"SendSeekEvent":var g=b;X.OnSeekEvent(g);break;case"DisplaySizeChange":var g=b;X.OnStreamSizeChange(g);break;case"NetworkInfoChange":var g=b;X.OnNetworkInfoChange(g)}},"notificationFromStreamerProxy")}function o(a){var b=new P,c=new P;a.GetValue("width")>0&&(b.SetValue("w",a.GetValue("width")),c.SetValue("w",X._width),X._width=a.GetValue("width")),a.GetValue("height")>0&&(b.SetValue("h",a.GetValue("height")),c.SetValue("h",X._height),X._height=a.GetValue("height")),X.declareStateChange(b,c)}function p(a){var b=new P,c=new P;null!=a.connectionType&&(b.SetValue("ct",a.connectionType),c.SetValue("ct",X._connectionType),
X._networkInfo.connectionType=a.connectionType,X._connectionType=a.connectionType),null!=a.ssid&&(b.SetValue("ssid",a.ssid),c.SetValue("ssid",X._ssid),X._networkInfo.ssid=a.ssid,X._ssid=a.ssid),a.signalStrength<=0&&(X._networkInfo.signalStrength=a.signalStrength),null!=a.linkEncryption&&(b.SetValue("le",a.linkEncryption),c.SetValue("le",X._linkEncryption),X._networkInfo.linkEncryption=a.linkEncryption,X._linkEncryption=a.linkEncryption),X.declareStateChange(b,c)}function q(a){if(X.updateStateCumulativeTime(),X._playingState!=a){var b=X._joinTimeMs>=0,c=new P,d=new P;c.SetValue("ps",F.stringToInt(a)),d.SetValue("ps",F.stringToInt(X._playingState)),b||a!=C.PLAYING||(X._pauseJoinTimeStartTimeMs>0&&(X.resumeJoinTime(!1),c.SetValue("pj",!1),d.SetValue("pj",!0)),X._joinTimeMs=x.Cast(X._utils.epochTimeMs()-X._startTimeMs-X._pauseJointTimeTotalMs),X._joinTimeMs<0&&(X._joinTimeMs=0)),X._utils.logSession("Monitor: change playing state to "+a,X._sessionId),X._playingState=a,X.declareStateChange(c,d)}}function r(a){X._playingState!=a&&X.OnPlayingStateChange(a)}function s(a){null!=a&&(null!=X._streamer&&(a.bitrateKbps==X._streamer.GetBitrateKbps()&&(a.bitrateKbps=-2),a.cdnName==X._streamer.GetCdnName()&&(a.cdnName=null),a.resource==X._streamer.GetResource()&&(a.resource=null)),null==a.resource&&null!=a.cdnName&&X._streamInfo.cdnName==X._streamInfo.resource&&(a.resource=a.cdnName),!X._externalBitrateReporting&&a.bitrateKbps<=-2&&(a.bitrateKbps=X._streamInfo.bitrateKbps),null==a.cdnName&&(a.cdnName=X._streamInfo.cdnName),null!=a.resource&&a.resource!=B.NO_RESOURCE||(a.resource=X._streamInfo.resource),X._streamInfo.equals(a)||(X.updateStateCumulativeTime(),X.enqueueStreamChangeEvent(X._streamInfo,a),X._streamInfo=a))}function t(a){if(X._externalBitrateReporting){var b=G.ConstructClone(X._streamInfo);b.bitrateKbps=a,X.SetStream(b)}else X._utils.logSession("setBitrate() call ignored, enable external bitrate reporting first.",X._sessionId)}function u(a){X.declareError(a.errorCode,a.severity==I.SEVERITY_FATAL)}function v(a){var b=S.DictionaryFromRepr(a);b.ContainsKey(C.METADATA_ENCODED_FRAMERATE)&&(X._encodedFps=x.Cast(X._utils.parseNumber(b.GetValue(C.METADATA_ENCODED_FRAMERATE),-1)),X._utils.logSession("Monitor: received "+C.METADATA_ENCODED_FRAMERATE+" metadata: "+X._encodedFps,X._sessionId),X._contentInfo.encodedFps=X._encodedFps),b.ContainsKey(C.METADATA_DURATION)&&(X._contentLengthSec=x.Cast(X._utils.parseNumber(b.GetValue(C.METADATA_DURATION),-1)),X._utils.logSession("Monitor: received "+C.METADATA_DURATION+" metadata: "+X._contentLengthSec,X._sessionId),X._contentInfo.duration=X._contentLengthSec)}function w(a){var b=new P;null!==X._streamer&&"function"==typeof X._streamer.GetPlayheadTimeMs&&X._streamer.GetPlayheadTimeMs()>=0&&b.SetValue("pht",Math.round(X._streamer.GetPlayheadTimeMs())),X.enqueueEvent("CwsSeekEvent",a)}function y(a){X.updateMetrics(),X.buildDataSampleEvent();var b=-1;X._playingFpsObservationCount>0&&(b=x.Cast((X._playingFpsTotal+0)/X._playingFpsObservationCount)),U.setDictValue(a,"ps",F.stringToInt(X._playingState)),U.setDictValue(a,"pj",X._pauseJoinTimeStartTimeMs>0),U.setDictValue(a,"sf",X._sessionFlags),X._contentLengthSec>0&&U.setDictValue(a,"cl",X._contentLengthSec),X._streamInfo.GetBitrateKbps()>0&&U.setDictValue(a,"br",X._streamInfo.GetBitrateKbps()),X._streamInfo.GetResource()&&U.setDictValue(a,"rs",X._streamInfo.GetResource()),X._streamInfo.GetCdnName()&&U.setDictValue(a,"cdn",X._streamInfo.GetCdnName()),X._encodedFps>=0&&U.setDictValue(a,"efps",X._encodedFps),X._renderedFps>=0&&U.setDictValue(a,"rfps",X._renderedFps),X._droppedFps>=0&&U.setDictValue(a,"dfps",X._droppedFps),b>=0&&U.setDictValue(a,"afps",b),X._width>0&&U.setDictValue(a,"w",X._width),X._height>0&&U.setDictValue(a,"h",X._height),null!==X._streamer&&"function"==typeof X._streamer.GetPlayheadTimeMs&&X._streamer.GetPlayheadTimeMs()>=0&&U.setDictValue(a,"pht",Math.round(X._streamer.GetPlayheadTimeMs())),X._networkInfo.GetConnectionType()&&U.setDictValue(a,"ct",X._networkInfo.GetConnectionType()),X._networkInfo.GetSsid()&&U.setDictValue(a,"ssid",X._networkInfo.GetSsid()),X._networkInfo.GetSignalStrength()<=0&&U.setDictValue(a,"ss",X._networkInfo.GetSignalStrength()),X._networkInfo.GetLinkEncryption()&&U.setDictValue(a,"le",X._networkInfo.GetLinkEncryption())}function z(){null!=X._streamer&&X._streamer.Cleanup(),X._streamer=null,X._streamerObject=null,X._eventQueue=null,X._contentInfo=null,X._nextHeartbeat=null,X._streamInfo=null,X._utils=null}function A(){if(null!=X._streamer){if(X._playingState==C.PLAYING){var a=X._streamer.GetSourceFrameRate(),b=X._streamer.GetRenderedFrameRate(),c=X._streamer.GetDroppedFrames();a>=0&&(X._encodedFps=a),b>=0&&(X._renderedFps=b,X._playingFpsTotal+=b,X._playingFpsObservationCount++),c>=0&&(X._droppedFps=c)}X.updateStateCumulativeTime()}}function E(){var a=new P;null!==X._streamer&&"function"==typeof X._streamer.GetStartingBufferLengthMs&&X._streamer.GetStartingBufferLengthMs()>=0&&a.SetValue("bl",Math.round(X._streamer.GetStartingBufferLengthMs())),X._networkInfo.GetSignalStrength()<=0&&a.SetValue("ss",X._networkInfo.GetSignalStrength()),null!==X._streamer&&"function"==typeof X._streamer.GetPlayheadTimeMs&&X._streamer.GetPlayheadTimeMs()>=0&&a.SetValue("pht",Math.round(X._streamer.GetPlayheadTimeMs())),X.enqueueEvent("CwsDataSamplesEvent",a)}function H(a,b){X._eventQueue.enqueueEvent(a,b,x.Cast(X._utils.epochTimeMs()-X._startTimeMs))}function K(a,b){var c=new P,d=new P;a.GetBitrateKbps()!=b.GetBitrateKbps()&&b.GetBitrateKbps()>0&&(d.SetValue("br",a.GetBitrateKbps()),c.SetValue("br",b.GetBitrateKbps()),X._utils.logSession("Monitor: change bitrate from "+d.GetValue("br")+" to "+c.GetValue("br"),X._sessionId)),a.GetCdnName()!=b.GetCdnName()&&(d.SetValue("cdn",a.GetCdnName()),c.SetValue("cdn",b.GetCdnName()),X._utils.logSession("Monitor: change cdnName from "+d.GetValue("cdn")+" to "+c.GetValue("cdn"),X._sessionId)),a.GetResource()!=b.GetResource()&&(d.SetValue("rs",a.GetResource()),c.SetValue("rs",b.GetResource()),X._utils.logSession("Monitor: change resource from "+d.GetValue("rs")+" to "+c.GetValue("rs"),X._sessionId)),X.declareStateChange(c,d)}function L(){var a=X._utils.epochTimeMs();F.stringToInt(X._playingState);if(X._playingState!=C.UNKNOWN){var b=x.Cast(a-X._lastStateUpdateTimeMs),c=X._streamInfo.GetBitrateKbps();X._playingState==C.PLAYING&&-1!=c&&(X._nominalPlayingBitsTotal+=b*c)}X._lastStateUpdateTimeMs=a}function M(a,b){X._joinTimeMs<0&&b&&(X._joinTimeMs=-2);var c=new P;c.SetValue("ft",b),c.SetValue("err",a),null!==X._streamer&&"function"==typeof X._streamer.GetPlayheadTimeMs&&X._streamer.GetPlayheadTimeMs()>=0&&c.SetValue("pht",Math.round(X._streamer.GetPlayheadTimeMs())),X.enqueueEvent("CwsErrorEvent",c)}function N(a,b){var c=S.StringDictionaryToRepr(a),d=S.StringDictionaryToRepr(b),e=new P;e.SetValue("new",c),null!=b&&e.SetValue("old",d),null!==X._streamer&&"function"==typeof X._streamer.GetPlayheadTimeMs&&X._streamer.GetPlayheadTimeMs()>=0&&e.SetValue("pht",Math.round(X._streamer.GetPlayheadTimeMs())),X.enqueueEvent("CwsStateChangeEvent",e)}function O(a,b){var c=null;try{a.getAttribute&&a.getAttribute("classid").indexOf("clsid:SAMSUNG-INFOLINK")>=0&&(c=new SamsungStreamerProxy(a),c.startMonitoring())}catch(a){}return c||(a.hasOwnProperty("getStreamerType")&&"Samsung"==a.getStreamerType()?SamsungStreamerProxy.createSamsungStreamerProxy(a):void 0!==a.setQosData&&void 0!==a.licenseResponse?new PlayStationTouchFactorStreamerProxy:void 0!==a.codecs&&void 0!==a.maxBufferLength?new PlayStationLibjscriptStreamerProxy:void 0!==a.textTrackDisplay&&void 0!==a.mediaLoader?new Z(a):void 0!==a.networkState&&void 0!==a.readyState?new Html5ConvivaStreamerProxy(a):void 0!==a.currentPTS&&void 0!==a.availableAudioStreams?new PlayStationTrilithiumStreamerProxy(a):void 0!==a.mediaElementAdapter?new Xbox1ConvivaStreamerProxy(a):void 0!==a.MbId&&void 0!==a.blockedParams?new ConvivaOoyalaStreamerProxy(a):void 0!==a.mb&&void 0!==a.mb.MbId&&void 0!==a.mb.blockedParams?new ConvivaOoyalaStreamerProxy(a.mb):a)}function Q(a){if(null!=X._networkInfo&&null!=a){var b=new P;b.SetValue("ct",a),X.declareStateChange(b,null)}}function R(a){if(null!=X._networkInfo&&null!=a){var b=new P;b.SetValue("ssid",a),X.declareStateChange(b,null)}}function T(a){null!=X._networkInfo&&a<=0&&X.buildDataSampleEvent()}function V(a){if(null!=X._networkInfo&&null!=a){var b=new P;b.SetValue("le",a),X.declareStateChange(b,null)}}var X=this;X!=f&&(X._sessionId=0),X!=f&&(X._externalBitrateReporting=!1),X!=f&&(X._streamer=null),X!=f&&(X._streamerObject=null),X!=f&&(X._eventQueue=null),X!=f&&(X._contentInfo=null),X!=f&&(X._nextHeartbeat=null),X!=f&&(X._utils=null),X!=f&&(X._playingState=C.UNKNOWN),X!=f&&(X._streamInfo=null),X!=f&&(X._sessionFlags=1),X!=f&&(X._startTimeMs=0),X!=f&&(X._lastStateUpdateTimeMs=0),X!=f&&(X._pauseJoinTimeStartTimeMs=0),X!=f&&(X._pauseJointTimeTotalMs=0),X!=f&&(X._joinTimeMs=-1),X!=f&&(X._nominalPlayingBitsTotal=0),X!=f&&(X._encodedFps=-1),X!=f&&(X._contentLengthSec=-1),X!=f&&(X._playingFpsObservationCount=0),X!=f&&(X._playingFpsTotal=0),k(X,"start",b),k(X,"attachStreamer",c),k(X,"detachStreamer",d),k(X,"pauseJoinTime",e),k(X,"resumeJoinTime",g),n(X,"streamer",h),l(X,"buildInitialStreamInfo",i),l(X,"notificationFromStreamerProxy",j),l(X,"OnStreamSizeChange",o),l(X,"OnNetworkInfoChange",p),l(X,"OnPlayingStateChange",q),l(X,"SetPlayingState",r),k(X,"SetStream",s),k(X,"setBitrate",t),k(X,"OnError",u),l(X,"OnMetadata",v),k(X,"OnSeekEvent",w),k(X,"updateHeartbeat",y),k(X,"cleanup",z),l(X,"updateMetrics",A),l(X,"buildDataSampleEvent",E),l(X,"enqueueEvent",H),l(X,"enqueueStreamChangeEvent",K),l(X,"updateStateCumulativeTime",L),l(X,"declareError",M),l(X,"declareStateChange",N),m(X,J,"wrapInConvivaStreamerProxy",O),k(X,"UpdateConnectionType",Q),k(X,"UpdateSsid",R),k(X,"UpdateSignalStrength",T),k(X,"UpdateLinkEncryption",V),X!=f&&a.apply(X,arguments)}function K(){function a(){d._events=U.makeList()}function b(a,b,c){b.SetValue("t",a),b.SetValue("st",c),b.SetValue("seq",d._nextSeqNumber),d._nextSeqNumber++,U.addListValue(d._events,S.StringDictionaryToRepr(b))}function c(){var a=d._events;return d._events=U.makeList(),a}var d=this;d!=f&&(d._events=null),d!=f&&(d._nextSeqNumber=0),k(d,"enqueueEvent",b),k(d,"flushEvents",c),d!=f&&a.apply(d,arguments)}function L(){function a(a,b,c,d,e){O._contentInfo=b,O._networkInfo=e,O._utils=W.getInstance(),O._settings=O._utils.getSettings(),O._sessionId=O._utils.randInt();for(var f=S.DictionaryFromRepr(O._contentInfo.tags),g=new T,h=f.Keys,i=0;i<h.length;i++){var j=h[i];null==f.GetValue(j)&&g.Add(j)}for(var k=g.Values,l=0;l<k.length;l++){var m=k[l];O.log("WARNING: correcting null value for tag "+m),U.setDictValue(O._contentInfo.tags,m,"null")}O._nativeReprTags=S.StringDictionaryToRepr(O._contentInfo.tags),O._eventQueue=new K,d||(O._streamer=a,O._monitor=new J(a,O._eventQueue,O._contentInfo,c,O._sessionId,O._networkInfo))}function b(){null!=O._monitor&&O.log("Session.start(): assetName="+O._contentInfo.assetName),O._startTimeMs=O._utils.epochTimeMs(),null!=O._monitor&&O._monitor.start(O._startTimeMs),O._heartbeatSequenceNumber=0,null==O._utils.clientIdLoadingDone?O.sendHeartbeat():(O._clientIdWaiter=O.onClientIdLoaded,O._utils.clientIdLoadingDone.AddHandler(O._clientIdWaiter)),O._heartbeatTimer=null,O.resetHeartbeatTimer()}function c(){O.log("Session.cleanup()"+O.sessionTypeTag()),null!=O._heartbeatTimer&&O._heartbeatTimer.cleanup(),O._heartbeatTimer=null,O._utils.logSession("Schedule the last hb before session cleanup"+O.sessionTypeTag(),O._sessionId),null!=O._monitor&&O.enqueueSessionEndEvent();var a=O.makeHeartbeat();null!=a?O.encodeAndPostHeartbeat(a,function(){O.cleanupAll()}):O.cleanupAll()}function d(){var a=new P;null!=O._streamer&&"function"==typeof O._streamer.GetPlayheadTimeMs&&O._streamer.GetPlayheadTimeMs()>=0&&a.SetValue("pht",Math.round(O._streamer.GetPlayheadTimeMs())),O._eventQueue.enqueueEvent("CwsSessionEndEvent",a,x.Cast(O._utils.epochTimeMs()-O._startTimeMs))}function e(){null!=O._monitor&&O._monitor.pauseJoinTime()}function g(){null!=O._monitor&&O._monitor.resumeJoinTime(!0)}function h(){O.pauseJoinTime()}function i(){O.resumeJoinTime()}function j(){O._monitor.detachStreamer()}function m(a){O._monitor.attachStreamer(a)}function n(){null!=O._heartbeatTimer&&O._heartbeatTimer.cleanup(),O._heartbeatTimer=O._utils.createTimer(O.sendHeartbeat,O._settings.heartbeatIntervalMs,"sendHeartbeat")}function o(){null!=O._clientIdWaiter&&(O._utils.clientIdLoadingDone.DeleteHandler(O._clientIdWaiter),O._clientIdWaiter=null),null!=O._monitor&&(O._monitor.cleanup(),O._monitor=null),null!=O._encodeHeartbeatTimer&&(O._encodeHeartbeatTimer.cleanup(),O._encodeHeartbeatTimer=null),null!=O._eventQueue&&(O._eventQueue.flushEvents(),O._eventQueue=null),O._contentInfo=null,O._nativeReprTags=null,O._settings=null,O._utils=null}function p(a){O._utils.logSession(a,O._sessionId)}function q(a){O.log("Session.reportError()"),null!=O._monitor&&O._monitor.OnError(a)}function r(a){O.log("Session.setBitrate(): bitrateKbps="+a),null!=O._monitor&&O._monitor.setBitrate(a)}function s(a){O.log("Session.setCurrentStreamMetadata()"),null!=O._monitor&&null!=O._monitor.streamer&&O._monitor.streamer.SetMetadata(a)}function t(a){if(O.log("Session.updateContentMetadata()"),null!=O._monitor&&null!=O._monitor.streamer){var b=new P,c=new P,d={},e=!1;d.assetName=O._contentInfo.assetName,d.streamUrl=O._contentInfo.streamUrl,d.defaultReportingCdnName=O._contentInfo.defaultReportingCdnName,d.defaultReportingResource=O._contentInfo.defaultReportingResource,d.viewerId=O._contentInfo.viewerId,d.playerName=O._contentInfo.playerName,d.isLive=O._contentInfo.isLive,d.duration=O._contentInfo.duration,d.encodedFps=O._contentInfo.encodedFps,d.tags={};for(var f in O._contentInfo.tags)d.tags[""+f]=O._contentInfo.tags[""+f];if(null!=a.assetName&&d.assetName!=a.assetName&&(c.SetValue("an",d.assetName),b.SetValue("an",a.assetName),O._contentInfo.assetName=a.assetName),null!=a.streamUrl&&d.streamUrl!=a.streamUrl&&(c.SetValue("url",d.streamUrl),b.SetValue("url",a.streamUrl),O._contentInfo.streamUrl=a.streamUrl),null!=a.defaultReportingCdnName||null!=a.defaultReportingResource){var g=new G(-2,a.defaultReportingCdnName,a.defaultReportingResource,-1,-1,-1);null!=O._monitor&&(O._monitor.SetStream(g),d.defaultReportingCdnName!=a.defaultReportingCdnName&&(O._contentInfo.defaultReportingCdnName=a.defaultReportingCdnName),d.defaultReportingResource!=a.defaultReportingResource&&(O._contentInfo.defaultReportingResource=a.defaultReportingResource))}var h={},i={};if(null!=a.viewerId&&d.viewerId!=a.viewerId&&(e=!0,h.vid=d.viewerId,i.vid=a.viewerId,O._contentInfo.viewerId=a.viewerId),null!=a.playerName&&d.playerName!=a.playerName&&(e=!0,h.pn=d.playerName,i.pn=a.playerName,O._contentInfo.playerName=a.playerName),e&&(c.SetValue("strmetadata",h),b.SetValue("strmetadata",i)),d.isLive!=a.isLive&&(c.SetValue("lv",d.isLive),b.SetValue("lv",a.isLive),O._contentInfo.isLive=a.isLive),-1!=a.duration||-1!=a.encodedFps){var j={};d.duration!=a.duration&&-1!=a.duration&&(c.SetValue("cl",d.duration),b.SetValue("cl",a.duration),O._contentInfo.duration=a.duration,j.duration=a.duration),d.encodedFps!=a.encodedFps&&-1!=a.encodedFps&&(c.SetValue("efps",d.encodedFps),b.SetValue("efps",a.encodedFps),O._contentInfo.encodedFps=a.encodedFps,j.framerate=a.encodedFps),O.setCurrentStreamMetadata(j)}if(a.tags){for(var k=S.DictionaryFromRepr(a.tags),l=new T,m=k.Keys,n=0;n<m.length;n++){var o=m[n];null==k.GetValue(o)&&l.Add(o)}for(var p=l.Values,q=0;q<p.length;q++){var r=p[q];O.log("WARNING: correcting null value for tag "+r),U.setDictValue(a.tags,r,"null")}k=S.DictionaryFromRepr(a.tags);for(var s=k.Keys,t=k.Values,u=0;u<s.length;u++){var v=s[u];O._contentInfo.tags[v]=t[u]}JSON.stringify(O._contentInfo.tags)!=JSON.stringify(d.tags)&&(O._nativeReprTags=S.StringDictionaryToRepr(O._contentInfo.tags),c.SetValue("tags",d.tags),b.SetValue("tags",a.tags))}var w=new P,y=S.StringDictionaryToRepr(b),z=S.StringDictionaryToRepr(c);w.SetValue("new",y),null!=c&&w.SetValue("old",z),O._streamer&&"function"==typeof O._streamer.GetPlayheadTimeMs&&O._streamer.GetPlayheadTimeMs()>=0&&w.SetValue("pht",Math.round(O._streamer.GetPlayheadTimeMs())),O._eventQueue.enqueueEvent("CwsStateChangeEvent",w,x.Cast(O._utils.epochTimeMs()-O._startTimeMs)),O._monitor._contentInfo=O._contentInfo}}function u(a){if(O.log("Session.setCdnNameOrResource()"),null!=O._monitor){var b=new G(-2,a,a,-1,-1,-1);O._monitor.SetStream(b)}}function v(a,b){if(null!=O._monitor){O.log("Session.sendSeekEvent()");var c=new P;c.SetValue("act",a),b>=0&&c.SetValue("skto",b),O._monitor.OnSeekEvent(c)}}function w(a,b){O.log("Session.sendEvent(): eventName="+a+O.sessionTypeTag());var c=new P;c.SetValue("name",a);var d=S.StringDictionaryToRepr(b);c.SetValue("attr",d),O._streamer&&"function"==typeof O._streamer.GetPlayheadTimeMs&&O._streamer.GetPlayheadTimeMs()>=0&&c.SetValue("pht",Math.round(O._streamer.GetPlayheadTimeMs())),O._eventQueue.enqueueEvent("CwsCustomEvent",c,x.Cast(O._utils.epochTimeMs()-O._startTimeMs))}function y(){var a=null;null!=O._encodeHeartbeatTimer&&O._encodeHeartbeatTimer.cleanup(),O._encodeHeartbeatTimer=O._utils.scheduleAction(function(){null!=(a=O.makeHeartbeat())&&(O._encodeHeartbeatTimer=O._utils.scheduleAction(function(){O.encodeAndPostHeartbeat(a,null),O._encodeHeartbeatTimer=null},1,"encodeAndSendHeartbeat"))},1,"makeHeartbeat")}function z(){var a={};U.setDictValue(a,"t","CwsSessionHb"),U.setDictValue(a,"cid",O._settings.customerKey),U.setDictValue(a,"clid",O._utils.clientId),U.setDictValue(a,"sid",O._sessionId),U.setDictValue(a,"seq",O._heartbeatSequenceNumber),U.setDictValue(a,"pver",O._settings.protocolVersion),U.setDictValue(a,"clv",O._settings.clientVersion),U.setDictValue(a,"iid",O._settings.clientInstanceId);var b=S.StringDictionaryToRepr(O._settings.platformApi.getPlatformMetadata());null!=b&&U.setDictValue(a,"pm",b),null!=O._contentInfo.viewerId&&U.setDictValue(a,"vid",O._contentInfo.viewerId),null!=O._contentInfo.streamUrl&&U.setDictValue(a,"url",O._contentInfo.streamUrl),null!=O._contentInfo.playerName&&U.setDictValue(a,"pn",O._contentInfo.playerName),U.setDictValue(a,"tags",O._nativeReprTags),null!=O._monitor?(U.setDictValue(a,"an",O._contentInfo.assetName),U.setDictValue(a,"lv",O._contentInfo.isLive),O._monitor.updateHeartbeat(a)):U.setDictValue(a,"sf",0),U.setDictValue(a,"caps",0);var c=O._eventQueue.flushEvents();if(U.setDictValue(a,"evs",c),null==O._monitor&&0==U.listCount(c))return null;L._sendLogs&&U.setDictValue(a,"lg",S.ListToRepr(O._utils.getLogs(O._sessionId)));var d=O._utils.epochTimeMs();return U.setDictValue(a,"st",x.Cast(d-O._startTimeMs)),U.setDictValue(a,"sst",O._startTimeMs),O._heartbeatSequenceNumber++,a}function A(){return null==O._monitor?" (global session)":""}function B(a,b){var c=O._utils.jsonEncode(a),d=O._settings.gatewayUrl+O._settings.gatewayPath;O.log("Send HB["+(O._heartbeatSequenceNumber-1)+"]"+O.sessionTypeTag()),O._utils.httpRequest(!0,d,c,"application/json",O.onHeartbeatResponse),null!=b&&b()}function C(a,b){null!=O._utils&&O._utils.runProtected(function(){if(a){var c=O._utils.jsonDecode(b);if(null!=c){c.ContainsKey("clid")&&O._utils.setClientIdFromServer(S.ToString(c.GetValue("clid")),!1);var d=c.GetValue("cfg"),e=d.slg&&Boolean(d.slg);if(e!=L._sendLogs&&(O.log("Turning "+(e?"on":"off")+" sending of logs"),L._sendLogs=e),d.hbi){var f=x.Cast(d.hbi);1e3*f!=O._settings.heartbeatIntervalMs&&(O.log("Received hbInterval from server "+f),O._settings.heartbeatIntervalMs=1e3*f,null!=O._heartbeatTimer&&O.resetHeartbeatTimer())}if(d.gw){var g=d.gw;g!=O._settings.gatewayUrl&&(O.log("Received gatewayUrl from server "+g),O._settings.gatewayUrl=g)}}else O.log("Decoded heartbeat response is null.")}else O.log("Received no response (or a bad response) to heartbeat POST request.")},"onHeartbeatResponse")}function D(){O._utils.clientIdLoadingDone.DeleteHandler(O._clientIdWaiter),O._clientIdWaiter=null,O.sendHeartbeat()}function E(){O._monitor.streamer;throw new Error("Not implemented")}function F(a){throw new Error("Not implemented")}function H(a){null!=O._monitor&&O._monitor.UpdateConnectionType(a)}function I(a){null!=O._monitor&&O._monitor.UpdateSsid(a)}function M(a){null!=O._monitor&&O._monitor.UpdateSignalStrength(a)}function N(a){null!=O._monitor&&O._monitor.UpdateLinkEncryption(a)}var O=this;O!=f&&(O._contentInfo=null),O!=f&&(O._networkInfo=null),O!=f&&(O._nativeReprTags=null),O!=f&&(O._utils=null),O!=f&&(O._settings=null),O!=f&&(O._monitor=null),O!=f&&(O._eventQueue=null),O!=f&&(O._clientIdWaiter=null),O!=f&&(O._heartbeatTimer=null),O!=f&&(O._encodeHeartbeatTimer=null),O==f&&(L._sendLogs=!1),O!=f&&(O._sessionId=0),O!=f&&(O._startTimeMs=0),O!=f&&(O._heartbeatSequenceNumber=0),k(O,"start",b),k(O,"cleanup",c),l(O,"enqueueSessionEndEvent",d),k(O,"pauseJoinTime",e),k(O,"resumeJoinTime",g),k(O,"adStart",h),k(O,"adEnd",i),k(O,"detachStreamer",j),k(O,"attachStreamer",m),l(O,"resetHeartbeatTimer",n),l(O,"cleanupAll",o),l(O,"log",p),k(O,"reportError",q),k(O,"setBitrate",r),k(O,"setCurrentStreamMetadata",s),k(O,"updateContentMetadata",t),k(O,"setCdnNameOrResource",u),k(O,"sendSeekEvent",v),k(O,"sendCustomEvent",w),l(O,"sendHeartbeat",y),l(O,"makeHeartbeat",z),l(O,"sessionTypeTag",A),l(O,"encodeAndPostHeartbeat",B),l(O,"onHeartbeatResponse",C),l(O,"onClientIdLoaded",D),k(O,"initialResourceBitrateSelection",E),k(O,"midStreamResourceBitrateSelection",F),k(O,"setConnectionType",H),k(O,"setSsid",I),k(O,"setSignalStrength",M),k(O,"setLinkEncryption",N),O!=f&&a.apply(O,arguments)}function M(){function a(){j._utils=W.getInstance(),j._settings=j._utils.getSettings(),j._nextSessionId=0,j._sessionsById=new P,j.lastSessionId=0}function b(){if(j._utils=null,j._settings=null,null!=j._sessionsById)for(var a=j._sessionsById.KeyValuePairs,b=0;b<a.length;b++){var c=a[b],d=c.Value;d.cleanup()}j._sessionsById=null,j._nextSessionId=0}function c(){var a=j._nextSessionId;return j._nextSessionId++,a}function d(a,b,c,d,e,f){var g=new L(a,b,c,e,f);return j.addSession(d,g),j.lastSessionId=d,g.start(),g}function e(a){return j._sessionsById.ContainsKey(a)?j._sessionsById.GetValue(a):(-1==a?j._utils.err("LivePass: invalid sessionId. LivePass not properly initialized yet?"):j._utils.err("LivePass: invalid sessionId. Did you cleanup that session previously?"),null)}function g(a,b){j._sessionsById.SetValue(a,b)}function h(a){j._sessionsById.Remove(a)}function i(a){var b=j.getSession(a);null!=b&&(j.removeSession(a),b.cleanup())}var j=this;j!=f&&(j.lastSessionId=0),j!=f&&(j._utils=null),j!=f&&(j._settings=null),j!=f&&(j._nextSessionId=0),j!=f&&(j._sessionsById=null),k(j,"cleanup",b),k(j,"newSessionId",c),k(j,"makeSession",d),k(j,"getSession",e),k(j,"addSession",g),k(j,"removeSession",h),k(j,"cleanupSession",i),j!=f&&a.apply(j,arguments)}function N(){function a(a){void 0==a&&(a=0),j.arr=new Array(a)}function b(){for(var a=new N,b=[],c=0;c<arguments.length;c++)b.push(arguments[c]);return a.arr=b,a}function c(a){if(null==a)return null;var b=new N;return b.arr=a,b}function d(){return j.arr}function e(){return j.arr.length}function g(a){if(a>=j.arr.length)throw new Error("Index out of bounds: "+a+" (length "+j.arr.length+")");if(a<0)throw new Error("Index out of bounds: "+a);return j.arr[a]}function h(a,b){if(a>=j.arr.length)throw new Error("Index out of bounds: "+a+" (length "+j.arr.length+")");if(a<0)throw new Error("Index out of bounds: "+a);j.arr[a]=b}function i(){return j.arr}var j=this;j!=f&&(j.arr=void 0),m(j,N,"Create",b),m(j,N,"FromRepr",c),k(j,"ToRepr",d),n(j,"Length",e),k(j,"GetValue",g),k(j,"SetValue",h),n(j,"Values",i),j!=f&&a.apply(this,arguments)}function O(){function a(a){e._cleanupCollection=a,e._id=O._nextCleanupId,O._nextCleanupId++,e._cleanupCollection.SetValue(e._id,e)}function b(a){e._cleanupAction=a}function c(){null!=e._cleanupAction&&e._cleanupAction(),e._cleanupCollection.Remove(e._id)}function d(a){W.getInstance().log("cleanupCollection");for(var b=new T,c=a.Values,d=0;d<c.length;d++){var e=c[d];b.Add(e)}for(var f=b.Values,g=0;g<f.length;g++){var e=f[g];e.cleanup()}a.Clear()}var e=this;e!=f&&(e._cleanupAction=null),e==f&&(O._nextCleanupId=0),e!=f&&(e._id=0),e!=f&&(e._cleanupCollection=null),k(e,"setCleanupAction",b),k(e,"cleanup",c),m(e,O,"cleanupCollection",d),e!=f&&a.apply(e,arguments)}function P(){function a(a){v.obj={}}function c(a){if(null==a)return null;if(a instanceof P)return a;a.hasOwnProperty(b("ToObject"))&&(a=a.ToObject());var c=new P;return t(a,function(b){c.obj[b]=a[b]}),c}function d(){return v.obj}function e(){for(var a=new P,b=0;b+1<arguments.length;b+=2)a.obj[arguments[b]]=arguments[b+1];return a}function g(a){t(v.obj,function(b){a[b]=v.obj[b]})}function h(a){return v.obj[a]}function i(a,b){v.obj[a]=b}function j(){t(v.obj,function(a){delete v.obj[a]})}function l(a){return void 0!==v.obj[a]}function o(a){return ContainsKey(a)}function p(){var a=new Array;return t(v.obj,function(b){a.push(b)}),a}function q(){var a=new Array;return t(v.obj,function(b){a.push(v.obj[b])}),a}function r(){var a=new Array;return t(v.obj,function(b){a.push(new R(b,v.obj[b]))}),a}function s(){var a=0;return t(v.obj,function(b){a++}),a}function u(a){return!!v.ContainsKey(a)&&(delete v.obj[a],!0)}var v=this;v!=f&&(v.obj=void 0),m(v,P,"FromRepr",c),k(v,"ToObject",d),m(v,P,"Create",e),k(v,"CopyToObject",g),k(v,"GetValue",h),k(v,"SetValue",i),k(v,"Clear",j),k(v,"ContainsKey",l),k(v,"Contains",o),n(v,"Keys",p),n(v,"Values",q),n(v,"KeyValuePairs",r),n(v,"Count",s),k(v,"Add",i),k(v,"Remove",u),v!=f&&a.apply(this,arguments)}function Q(){function a(){g._handlers=new T}function b(){g._handlers=new T}function c(a){g._handlers.Add(a)}function d(a){g._handlers.Remove(a)}function e(){for(var a=g._handlers.Values,b=0;b<a.length;b++){(0,a[b])()}}var g=this;g!=f&&(g._handlers=void 0),k(g,"Cleanup",b),k(g,"AddHandler",c),k(g,"DeleteHandler",d),k(g,"DispatchEvent",e),g!=f&&a.apply(g,arguments)}function R(){function a(a,b){d.key=a,d.val=b}function b(){return d.key}function c(){return d.val}var d=this;d!=f&&(d.key=void 0),d!=f&&(d.val=void 0),n(d,"Key",b),n(d,"Value",c),d!=f&&a.apply(this,arguments)}function S(){S.StringIndexOf=function(a,b){return a.indexOf(b)},S.StringStartsWith=function(a,b){return 0==a.indexOf(b)},S.StringContains=function(a,b){return 0<=a.indexOf(b)},S.StringGetChar=function(a,b){if(b<0||b>=a.length)throw new Error("ArgumentOutOfRange");return a[b]},S.StringSubstring=function(a,b,c){if(b<0||b>=a.length||void 0!=c&&(c<0||b+c>a.length))throw new Error("ArgumentOutOfRange");return void 0==c?a.substr(b):a.substr(b,c)},S.StringSplit=function(a,b){var c=a.split(b);return N.FromRepr(c)},S.StringEnumerator=function(a){return a.split("")},S.StringCompareTo=function(a,b){return null==a?null==b?0:-1:null==b?1:a<b?-1:a==b?0:1},S.StringTrim=function(a){return a.replace(/^\s*/,"").replace(/\s*$/,"")},S.StringReplace=function(a,b,c){if(null==b||""==b||null==c)throw new Error("InvalidArgument");var d=a.indexOf(b);if(d>=0){var e=b.length;return a.substr(0,d)+c+S.StringReplace(a.substr(d+e),b,c)}return a},S.StringLastIndexOf=function(a,b){if(null==b||""==b)throw new Error("InvalidArgument");return a.lastIndexOf(b)},S.ListFromRepr=function(a){return T.FromRepr(a)},S.ArrayFromRepr=function(a){return N.FromRepr(a)},S.ArrayToRepr=function(a){return null==a?null:a.ToRepr()},S.ListFromRepr=function(a){return T.FromRepr(a)},S.ListToRepr=function(a){return null==a?null:a.ToRepr()},S.DictionaryFromRepr=function(a){return P.FromRepr(a)},S.StringDictionaryToRepr=function(a){return null==a?null:a.hasOwnProperty(b("ToObject"))?a.ToObject():a},S.DictionaryCopyToObject=function(a,b){null!=a&&a.CopyToObject(b)},S.StringFromRepr=function(a){return a},S.StringToXml=function(a){try{if(window.DOMParser){var b=(new DOMParser).parseFromString(a,"text/xml");return b.documentElement}var b=new ActiveXObject("Microsoft.XMLDOM");return b.async="false",b.loadXML(a),b.documentElement}catch(a){return null}},S.XmlToString=function(a){try{return window.XMLSerializer?(new XMLSerializer).serializeToString(a):a.xml}catch(a){return null}},S.ToString=function(a){return null==a?null:"function"==typeof a.ToString?a.ToString():a.toString()},S.StringToLower=function(a){return a.toLowerCase()},S.StringToInt=function(a){return parseInt(a)},S.AsDouble=function(a){return a instanceof y?a.asNumber:a instanceof z?a.asNumber:Number(a)},S.doubleRegex=new RegExp("^([+-]?[0-9]*\\.?[0-9]+)((e|E)[+-]?[0-9]+)?$"),S.parseDouble=function(a){return S.parseChecker(a,S.doubleRegex,"double"),parseFloat(a)},S.parseChecker=function(a,b,c){if(!b.test(a))throw new Error("Invalid string for "+c+": "+a)}}function T(){function a(){arguments.length>1?Ping.Send("Error: Instantiate ListCS with too many arguments"):0==arguments.length?N.call(v,0):arguments[0]instanceof Number?N.call(v,arguments[0]):arguments[0]instanceof Array?(N.call(v,arguments[0].length),v.arr=arguments[0]):arguments[0]instanceof N?(N.call(v,arguments[0].length),v.arr=arguments[0].arr):Ping.Send("Error: Instantiate ListCS with inappropriate arguments")}function b(a){for(var b=new T,c=0;c<arguments.length;c++)b.arr.push(arguments[c]);return b}function c(a){if(null==a)return a;if(a instanceof T)return a;var b=new T;return b.arr=a,b}function d(){return v.arr}function e(){return v.arr.length}function g(){return v.arr}function h(a){v.arr.push(a)}function i(a){v.arr.length=0}function j(a){var b=arguments[1];if(null==b)b=0;else if(b<0||b>=v.arr.length)throw new Error("Starting index out of bound");for(var c=b;c<v.arr.length;c++)if(v.arr[c]==a)return c;return-1}function l(a){return v.IndexOf(a)>=0}function o(a,b){v.arr.splice(a,0,b)}function p(a){var b=v.IndexOf(a);return!(b<0)&&(v.RemoveAt(b),!0)}function q(a,b){v.arr.splice(a,b)}function r(a){v.arr.splice(a,1)}function s(a,b){var c=new T;return c.arr=v.arr.slice(a,a+b),c}function t(){v.arr.sort.apply(v.arr,arguments)}function u(){return N.FromRepr(v.arr.slice())}var v=this;v!=f&&(v.arr=void 0),m(v,T,"Create",b),m(v,T,"FromRepr",c),k(v,"ToRepr",d),n(v,"Count",e),n(v,"Values",g),k(v,"Add",h),k(v,"Clear",i),k(v,"IndexOf",j),k(v,"Contains",l),k(v,"Insert",o),k(v,"Remove",p),k(v,"RemoveRange",q),k(v,"RemoveAt",r),k(v,"GetRange",s),k(v,"Sort",t),k(v,"ToArray",u),v!=f&&a.apply(this,arguments)}function U(){function a(a,b,c){a[b]=c}function b(){return[]}function c(a){return a.length}function d(a,b){a.push(b)}function e(a,b){a.splice(b,1)}function f(a,b){return b[a]}function g(a,b){var c=U.GetField(a,b);return c?c.toString():null}var h=this;m(h,U,"setDictValue",a),m(h,U,"makeList",b),m(h,U,"listCount",c),m(h,U,"addListValue",d),m(h,U,"removeListValueAt",e),m(h,U,"GetField",f),m(h,U,"GetStringField",g)}function V(){function a(a){if(null!=a)for(var c=S.DictionaryFromRepr(a),d=c.Keys,e=0;e<d.length;e++){var f=d[e],g=c.GetValue(f);switch(f){case"platformApi":b.platformApi=g;break;case"gatewayUrl":b.gatewayUrl=c.GetValue(f);break;case"heartbeatIntervalMs":b.heartbeatIntervalMs=x.Cast(c.GetValue(f));break;case"enableLogging":b.enableLogging=Boolean(c.GetValue(f));break;case"allowUncaughtExceptions":b.allowUncaughtExceptions=Boolean(c.GetValue(f));break;default:throw new Error("Unsupported settings: "+f)}}}var b=this;b!=f&&(b.heartbeatIntervalMs=2e4),b!=f&&(b.customerKey=null),b!=f&&(b.gatewayUrl="https://cws.conviva.com"),b!=f&&(b.gatewayPath="/0/wsg"),b!=f&&(b.protocolVersion="2.4"),b!=f&&(b.clientVersion="2.125.0.33654"),b!=f&&(b.clientInstanceId=0),b!=f&&(b.loadDataTimeoutMs=1e4),b!=f&&(b.enableLogging=!1),b!=f&&(b.platformApi=null),b!=f&&(b.allowUncaughtExceptions=!1),b!=f&&(b.pingComponentName="jscws"),b!=f&&(b.pingUrl="https://pings.conviva.com/ping.ping"),k(b,"changeSettings",a)}function W(){function a(a){if(L._settings=a,L._referenceCount=1,L._pingUrl=null,L._isSendingPing=!1,L.protocolVersion=L._settings.protocolVersion,L._cleanables=new P,
null==L._settings.platformApi&&("undefined"!=typeof PlayStationWebmafApi?L._settings.platformApi=new PlayStationWebmafApi:"undefined"!=typeof PlayStationTouchFactorApi?L._settings.platformApi=new PlayStationTouchFactorApi:"undefined"!=typeof PlayStationLibjscriptApi?L._settings.platformApi=new PlayStationLibjscriptApi:void 0!==aa?L._settings.platformApi=new aa:void 0!==$?L._settings.platformApi=new $:"undefined"!=typeof PlayStationTrilithiumApi?L._settings.platformApi=new PlayStationTrilithiumApi:"undefined"!=typeof Xbox1PlatformApi&&(L._settings.platformApi=new Xbox1PlatformApi)),null==L._settings.platformApi)throw new Error("PlatformApi is null");L.device=L._settings.platformApi.getDevice(),L.deviceVersion=L._settings.platformApi.getDeviceVersion(),L.deviceType=L._settings.platformApi.getDeviceType(),L.os=L._settings.platformApi.getOS(),L.osVersion=L._settings.platformApi.getOSVersion(),L.platform="Js"}function b(a){if(null==W._instance){var b=new V;b.changeSettings(a),W._instance=new W(b),W._instance._start()}else W._instance.getSettings().changeSettings(a),W._instance._referenceCount++;return W._instance}function c(){if(null==W._instance)throw new Error("CreateUtils module has not been called");return W._instance}function d(){return L._settings.platformApi}function e(){return L._settings}function g(){}function h(){--L._referenceCount>0||(null!=L.clientIdLoadingDone&&(L.clientIdLoadingDone.Cleanup(),L.clientIdLoadingDone=null),null!=L._cleanables&&(O.cleanupCollection(L._cleanables),L._cleanables=null),null!=L._settings&&null!=L._settings.platformApi&&L._settings.platformApi.cleanup(),L._settings=null,W._instance=null)}function i(a){var b=L.epochTimeMs(),c=void 0;c=(b/1e3).toFixed(3).toString(),a="["+c+"] "+a;var d=S.StringContains(a,"ERROR:");return L._settings.enableLogging&&(d?L._settings.platformApi.consoleErr(a):L._settings.platformApi.consoleLog(a)),a}function j(a){a=L.logNoBuffer(a),W.logBuffer.Count>=W.MAX_SIZE_LOGBUFFER&&W.logBuffer.RemoveAt(0),W.logBuffer.Add(a)}function n(a,b){L.log("sid="+b+" "+a)}function o(a){L.log("ERROR: "+a)}function p(a){var b=W.logBuffer;return W.logBuffer=new T,b}function q(a,b){if(!a)throw new Error("Assertion failure: "+b)}function r(a,b){L.runProtectedSync(a,b)}function s(a,b){if(L._settings.allowUncaughtExceptions)a();else try{a()}catch(a){L.onUncaughtException(b,a)}}function t(a,b){try{L.ping("Uncaught exception: "+a+": "+S.ToString(b))}catch(a){L.err("Caught exception while sending ping: "+S.ToString(a))}}function u(a){if(!L._isSendingPing){L._isSendingPing=!0,L.initPing();var b=L._pingUrl+"&d="+L.urlEncodeString(S.ToString(a));L.err("Ping: "+b),L.httpRequest(!1,b,null,null,null),L._isSendingPing=!1}}function v(){if(!L._cachedPingUrl){var a=null;try{var b=S.DictionaryFromRepr(L._settings.platformApi.getPlatformMetadata());null!=b&&b.ContainsKey("sch")&&(a=b.GetValue("sch"))}catch(a){}L._pingUrl=L._settings.pingUrl+"?comp=jscws&clv="+L._settings.clientVersion+"&cid="+L._settings.customerKey+"&uuid="+L.clientId,null!=a&&(L._pingUrl+="&sch="+a),L.clientId!=W.DEFAULT_CLIENT_ID&&null!=a&&(L._cachedPingUrl=!0)}}function w(a){return escape(a)}function y(){return L._settings.platformApi.epochTimeMs()}function z(a,b,c){var d=new O(L._cleanables),e=null;return e=function(){L.runProtected(a,c)},d.setCleanupAction(L._settings.platformApi.createTimer(e,b,c)),d}function A(a,b,c){var d=new O(L._cleanables),e=!1,f=null;return f=function(){null!=d&&d.cleanup(),a(),e=!0},d.setCleanupAction(L._settings.platformApi.createTimer(f,b,c)),e&&d.cleanup(),d}function B(a,b){var c=b;try{c=x.Parse(a)}catch(a){}return c}function C(a,b){var c=b;try{c=S.parseDouble(a)}catch(a){}return c}function D(){L.clientId=W.DEFAULT_CLIENT_ID,L.clientIdLoadingDone=new Q,L._loadClientIdTimeout=L.scheduleAction(function(){L.log("Timeout in reading clientId. Using "+W.DEFAULT_CLIENT_ID+"."),L.ping("Timeout in reading clientId. IGNORE waited "+L._settings.loadDataTimeoutMs+"ms."),null!=L.clientIdLoadingDone&&L.clientIdLoadingDone.DispatchEvent(),L._loadClientIdTimeout=null},L._settings.loadDataTimeoutMs,"utils.readClientId timeout callback");var a=void 0;a=function(a,b){L.runProtected(function(){null!=L._loadClientIdTimeout&&(L._loadClientIdTimeout.cleanup(),L._loadClientIdTimeout=null);var c=null;if(a)try{c=L.jsonDecode(b)}catch(a){c=null}var d=null;a&&null!=c&&c.ContainsKey("clId")&&(d=c.GetValue("clId")),null!=d&&d!=W.DEFAULT_CLIENT_ID&&"null"!=d?(L.clientId=d,L.log("Setting the client id to "+d+" (from local storage)")):L.log("Failed to load the client id from local storage"),null!=L.clientIdLoadingDone&&(L.clientIdLoadingDone.DispatchEvent(),L.clientIdLoadingDone=null)},"utils.fetchClientId onLoad")},L._settings.platformApi.loadLocalData(a)}function E(a,b){null!=L._loadClientIdTimeout&&(L._loadClientIdTimeout.cleanup(),L._loadClientIdTimeout=null),L.clientIdLoadingDone=null,L.clientId!=a&&(L.clientId=a,L.log("Setting the client id to "+a+" (from server)"),L.writeClientId())}function F(){var a=new P;a.SetValue("clId",L.clientId);var b=void 0;b=function(a){L.runProtected(function(){a||L.err("An error occurred while saving the clientId.")},"utils.writeClientId onSaved")};var c=S.StringDictionaryToRepr(a),d=L.jsonEncode(c);L._settings.platformApi.saveLocalData(d,b)}function G(){return Math.floor(4294967295*Math.random())-2147483648}function H(){var a=L.randInt();return a=Math.abs(a),a<0&&(a=0),a}function I(a,b,c,d,e){var f=new O(L._cleanables);return f.setCleanupAction(L._settings.platformApi.httpRequest(a,b,c,d,function(a,b){f.cleanup(),null!=e&&e(a,b)})),f}function J(a){var b=null;return L.runProtectedSync(function(){b=L._settings.platformApi.jsonEncode(a)},"utils.jsonEncode"),b}function K(a){var b=null;return L.runProtectedSync(function(){var c=L._settings.platformApi.jsonDecode(a);b=S.DictionaryFromRepr(c)},"utils.jsonDecode"),b}var L=this;L==f&&(W._instance=null),L!=f&&(L._referenceCount=0),L!=f&&(L._settings=null),L==f&&(W.DEFAULT_CLIENT_ID="0"),L!=f&&(L._loadClientIdTimeout=null),L!=f&&(L.clientId=W.DEFAULT_CLIENT_ID),L!=f&&(L.clientIdLoadingDone=null),L!=f&&(L._pingUrl=null),L!=f&&(L._cachedPingUrl=!1),L!=f&&(L._isSendingPing=!1),L!=f&&(L.protocolVersion=null),L!=f&&(L.device=null),L!=f&&(L.os=null),L!=f&&(L.osVersion=null),L!=f&&(L.deviceVersion=null),L!=f&&(L.deviceType=null),L!=f&&(L.platform=null),L!=f&&(L._cleanables=null),L==f&&(W.MAX_SIZE_LOGBUFFER=32),L==f&&(W.logBuffer=new T),m(L,W,"CreateUtils",b),m(L,W,"getInstance",c),k(L,"getPlatformApi",d),k(L,"getSettings",e),l(L,"_start",g),k(L,"cleanup",h),k(L,"logNoBuffer",i),k(L,"log",j),k(L,"logSession",n),k(L,"err",o),k(L,"getLogs",p),k(L,"assert",q),k(L,"runProtected",r),k(L,"runProtectedSync",s),l(L,"onUncaughtException",t),k(L,"ping",u),l(L,"initPing",v),l(L,"urlEncodeString",w),k(L,"epochTimeMs",y),k(L,"createTimer",z),k(L,"scheduleAction",A),k(L,"parseInt",B),k(L,"parseNumber",C),k(L,"startFetchClientId",D),k(L,"setClientIdFromServer",E),l(L,"writeClientId",F),k(L,"randInt",G),k(L,"randUInt",H),k(L,"httpRequest",I),k(L,"jsonEncode",J),k(L,"jsonDecode",K),L!=f&&a.apply(L,arguments)}function X(){function a(){X.referenceCount++}function b(a){try{var b=a.data;if("object"!==(void 0===b?"undefined":d(b)))return;if(void 0===b.convivaRequestId){if(void 0===b.requestId)return;b.convivaRequestId=b.requestId}var c=X.callbacks[b.convivaRequestId];if(!c)return void W.getInstance().log("Received response for unknown request");if(!X.TESTAPI_forTouchstone&&a.origin!=c[0])return void W.getInstance().log("ERROR: Bad origin:"+a.origin);delete X.callbacks[b.convivaRequestId];var e=b.bytes;b.post_err&&"ok"==b.post_err?c[1](!0,e):(W.getInstance().log("ERROR: Error posting to "+a.origin+" ("+e+")"),c[1](!1,b.post_err))}catch(a){}}var c=this;c==f&&(X.frameId="conviva_iframe",X.frameUrl="/cws_iframe.html",X.TESTAPI_forTouchstone=!0,X.referenceCount=0,X.nextConvivaRequestId=0,X.callbacks={},X.communicationFramesIds={},"undefined"!=typeof window&&(window.addEventListener?window.addEventListener("message",b,!1):window.attachEvent&&window.attachEvent("onmessage",b))),this.cleanup=function(){0==--X.referenceCount&&(X.nextConvivaRequestId=0,X.callbacks={},s(X.communicationFramesIds,function(a){c.removeIFrame(a)}),X.communicationFramesIds={})},this.findFrameById=function(a){return a?document.getElementById(a):null},this.findFrameForDomain=function(a){var b=X.communicationFramesIds[a];return c.findFrameById(b)},this.makeRequest=function(a,b,d,e,f){var g=b.match(/^(https?:\/\/[^\/]*)(\/.*)$/);if(!g)return W.getInstance().log("ERROR: UrlLoader: cannot parse url: "+b),null;var h=g[1],i=c.findFrameForDomain(h);if(i&&i.loaded){var j=X.nextConvivaRequestId++,k=a?"POST":"GET",l={url:b,method:k,data:d,contentType:e,requestId:j,convivaRequestId:j};X.callbacks[j]=[h,f],i.contentWindow.postMessage(l,X.TESTAPI_forTouchstone?"*":h)}else i&&!i.loaded?setTimeout(function(){c.makeRequest(a,b,d,e,f)},500):c.insertIFrame(h,function(){var g=c.findFrameForDomain(h);g&&(g.loaded=!0,c.makeRequest(a,b,d,e,f))});return null},this.insertIFrame=function(a,b){var c=document.createElement("iframe");c.id="_conviva_iframe_"+a+"_"+X.frameId,c.style.height="0px",c.style.width="0px",c.style.top="-50px",c.style.left="-50px",c.style.borderWidth="0px",c.style.display="none",c.height=0,c.width=0,c.src=a+X.frameUrl,c.onload=b,X.communicationFramesIds[a]=c.id;var d=document.body||document.getElementsByTagName("body")[0];d&&d.appendChild(c)},this.removeIFrame=function(a){var b=c.findFrameById(a);if(null!=b){(document.body||document.getElementsByTagName("body")[0]).removeChild(b)}},c!=f&&a.apply(c,arguments)}function Y(){function a(){e.Reset()}function b(a){var b=W.getInstance().epochTimeMs();return e._lastPollTime>0&&b>e._lastPollTime&&e._lastPlayHeadTimeSpeeds.Insert(0,S.AsDouble(a-e._lastPlayHeadTime)/(b-e._lastPollTime)),e._lastPollTime=b,e._lastPlayHeadTime=S.AsDouble(a),e._lastPlayHeadTimeSpeeds.Count>Math.max(e.movingMinimumSamples,e.notMovingMinimumSamples)&&e._lastPlayHeadTimeSpeeds.RemoveAt(e._lastPlayHeadTimeSpeeds.Count-1),e.InferState()}function c(){var a=null,b=e._lastPlayHeadTimeSpeeds.Count;if(b>=Math.min(e.movingMinimumSamples,e.notMovingMinimumSamples)){for(var c=0,d=e._lastPlayHeadTimeSpeeds.Values,f=0;f<d.length;f++){c+=d[f]}c/=b,b>=e.movingMinimumSamples&&Math.abs(c-e.movingExpectedSpeed)<e.movingSpeedTolerance&&(a=Y.MOVING_STATE),b>=e.notMovingMinimumSamples&&c==e.notMovingExpectedSpeed&&(a=Y.NOT_MOVING_STATE)}return e.resetAfter&&null!=a&&e.Reset(),a}function d(){e._lastPlayHeadTimeSpeeds=new T,e._lastPlayHeadTime=-1,e._lastPollTime=0}var e=this;e==f&&(Y.MOVING_STATE="MOVING"),e==f&&(Y.NOT_MOVING_STATE="NOT_MOVING"),e!=f&&(e.movingMinimumSamples=3),e!=f&&(e.notMovingMinimumSamples=3),e!=f&&(e.movingExpectedSpeed=1),e!=f&&(e.notMovingExpectedSpeed=0),e!=f&&(e.movingSpeedTolerance=.25),e!=f&&(e.resetAfter=!1),e!=f&&(e._lastPlayHeadTimeSpeeds=void 0),e!=f&&(e._lastPlayHeadTime=0),e!=f&&(e._lastPollTime=0),k(e,"Update",b),l(e,"InferState",c),k(e,"Reset",d),e!=f&&a.apply(e,arguments)}function Z(){function a(a){C.call(e),e.Log("ConvivaVideojsStreamerProxy._constr()"),e._vjsPlayer=a,e._infer=new i.Infer,e._setAllEventListeners(),e._startPolling(),e.firstPlay=!0,e.videoWidth=-1,e.videoHeight=-1,e.tech=null;var b=new Object;if(b.IWillNotUseThisInPlugins=!0,e.requestTech=b,e.tech=e._vjsPlayer.tech(e.requestTech),e.tech.hls){var c=Math.round(e.tech.hls.bandwidth/1024),d=new G(c,null,null,-1,-1,-1);e.SetStream(d)}}function b(a){e.Log("SetMonitoringNotifier from overridden method"),e.notifier=a,null==e.notifier||e._polling||(e.Log("start polling to be called inside SetMonitoringNotifier method"),e._setAllEventListeners(),e._startPolling()),e.super_SetMonitoringNotifier(a)}function c(){e.Log("ConvivaVideojsStreamerProxy.Cleanup()"),e.notifier=null,e._stopPolling(),e._removeAllEventListeners(),e._duration=-1,e.super_Cleanup()}function d(){return e._capabilities}var e=this;e!=f&&(e._capabilities=C.CAPABILITY_VIDEO+C.CAPABILITY_QUALITY_METRICS+C.CAPABILITY_BITRATE_METRICS,e._duration=-1),k(e,"SetMonitoringNotifier",b),k(e,"Cleanup",c),k(e,"GetCapabilities",d),this.GetDuration=function(){return e._duration},this.GetBufferLengthMs=function(){return e._bufferLengthMs},this.GetEncodedFrameRate=function(){return e._encodedFrameRate},this.GetPlayheadTimeMs=function(){return 1e3*e._vjsPlayer.currentTime()},this.SetDuration=function(a){if(e.GetPlayingState()==i.ConvivaStreamerProxy.PLAYING&&null!=e.notifier&&void 0!=e.notifier&&isFinite(a)&&a>0){var b=Math.floor(a);if(e.GetDuration()!=b){e._duration=b;var c={};c[C.METADATA_DURATION]=e._duration,e.SetMetadata(c)}}},this.SetPlayheadTimeMs=function(a){if(isFinite(a)&&a>=0){var b=1e3*a;e._playheadTimeMs!=b&&(e._playheadTimeMs=b),e.InferState()}},this.SetPlayerState=function(a){e.GetPlayingState()!==a&&(e.SetPlayingState(a),e._infer.Reset())},this.InferState=function(){if(e._infer){var a=e._infer.Update(e._playheadTimeMs);a&&(a===i.Infer.MOVING_STATE&&e.GetPlayingState()!==i.ConvivaStreamerProxy.PLAYING&&(e.Log("ConvivaVideojsStreamerProxy.InferState(): PLAYING"),e.triggeredPlayEvent=!1,e.SetPlayerState(i.ConvivaStreamerProxy.PLAYING)),a!==i.Infer.NOT_MOVING_STATE||e.GetPlayingState()!==i.ConvivaStreamerProxy.PLAYING&&e.GetPlayingState()!==i.ConvivaStreamerProxy.UNKNOWN&&!e.triggeredPlayEvent||(e.Log("ConvivaVideojsStreamerProxy.InferState(): BUFFERING"),e.triggeredPlayEvent=!1,e.SetPlayerState(i.ConvivaStreamerProxy.BUFFERING)))}},this._startPolling=function(){e._polling=!0,e._cancelTimer=W.getInstance()._settings.platformApi.createTimer(e._poll,100,"ConvivaVideojsStreamerProxy._poll")},this._poll=function(){W.getInstance().runProtected(function(){if(!e._polling||!e._vjsPlayer)return void e.SetPlayheadTimeMs(0);e.SetPlayheadTimeMs(e._vjsPlayer.currentTime()),e.SetDuration(e._vjsPlayer.duration()),e.videoWidth==e._vjsPlayer.videoWidth()&&e.videoHeight==e._vjsPlayer.videoHeight()||(e.videoWidth=e._vjsPlayer.videoWidth(),e.videoHeight=e._vjsPlayer.videoHeight(),e.SetDisplaySize(e.videoWidth,e.videoHeight))},"ConvivaVideojsStreamerProxy._poll")},this._stopPolling=function(){e._polling&&"function"==typeof e._cancelTimer&&(e._cancelTimer(),e._cancelTimer=null),e._polling=!1},this._declareError=function(a){e.Log("ConvivaVideojsStreamerProxy._declareError: "+a),e.SetError(I.makeUnscopedError(a,I.SEVERITY_FATAL))},this._setAllEventListeners=function(){e.Log("ConvivaVideojsStreamerProxy._setAllEventListeners()"),e._vjsPlayer&&(e._vjsPlayer.on("ended",e.onEnded),e._vjsPlayer.on("loadedmetadata",e.onLoadedMetadata),e._vjsPlayer.on("loadstart",e.onLoadstart),e._vjsPlayer.on("pause",e.onPause),e._vjsPlayer.on("durationchange",e.onDurationchange),e._vjsPlayer.on("emptied",e.onEmptied),e._vjsPlayer.on("stalled",e.onStalled),e._vjsPlayer.on("waiting",e.onWaiting),e._vjsPlayer.on("play",e.onPlay),e._vjsPlayer.on("seeking",e.onSeeking),e._vjsPlayer.on("seeked",e.onSeeked),e._vjsPlayer.on("error",e.onError),e._vjsPlayer.on("mediachange",e.onMediaChange),e._vjsPlayer.on("progress",e.onProgress))},this._removeAllEventListeners=function(){e.Log("ConvivaVideojsStreamerProxy._removeAllEventListeners()"),e._vjsPlayer&&(e._vjsPlayer.off("ended",e.onEnded),e._vjsPlayer.off("loadedmetadata",e.onLoadedMetadata),e._vjsPlayer.off("loadstart",e.onLoadstart),e._vjsPlayer.off("pause",e.onPause),e._vjsPlayer.off("durationchange",e.onDurationchange),e._vjsPlayer.off("emptied",e.onEmptied),e._vjsPlayer.off("stalled",e.onStalled),e._vjsPlayer.off("waiting",e.onWaiting),e._vjsPlayer.off("play",e.onPlay),e._vjsPlayer.off("seeking",e.onSeeking),e._vjsPlayer.off("seeked",e.onSeeked),e._vjsPlayer.off("error",e.onError),e._vjsPlayer.off("mediachange",e.onMediaChange))},this.onPause=function(a,b,c){W.getInstance().runProtected(function(){e.Log("ConvivaVideojsStreamerProxy.onPause"),e.triggeredPlayEvent=!1,e.SetPlayerState(i.ConvivaStreamerProxy.PAUSED)},"ConvivaVideojsStreamerProxy.onPause")},this.onLoadedMetadata=function(a,b,c){W.getInstance().runProtected(function(){e.Log("ConvivaVideojsStreamerProxy.onLoadedMetadata"),e._vjsPlayer.duration()&&e._vjsPlayer&&e.SetDuration(e._vjsPlayer.duration())},"ConvivaVideojsStreamerProxy.onLoadedMetadata")},this.onEnded=function(a,b,c){W.getInstance().runProtected(function(){e.Log("ConvivaVideojsStreamerProxy.onEnded"),e._vjsPlayer&&e.SetPlayerState(i.ConvivaStreamerProxy.STOPPED)},"ConvivaVideojsStreamerProxy.onEnded")},this.onDurationchange=function(a,b,c){W.getInstance().runProtected(function(){e.Log("ConvivaVideojsStreamerProxy.onDurationchange"),e._vjsPlayer&&e.SetDuration(e._vjsPlayer.duration())},"ConvivaVideojsStreamerProxy.onDurationchange")},this.onLoadstart=function(a,b,c){W.getInstance().runProtected(function(){e.Log("ConvivaVideojsStreamerProxy.onLoadstart")},"ConvivaVideojsStreamerProxy.onLoadstart")},this.onPlay=function(a,b,c){W.getInstance().runProtected(function(){e.Log("ConvivaVideojsStreamerProxy.onPlay"),e.triggeredPlayEvent=!0},"ConvivaVideojsStreamerProxy.onPlay")},this.onSeeking=function(){W.getInstance().runProtected(function(){e.isSeekStarted||(e.Log("ConvivaVideojsStreamerProxy.onSeeking"),e.isSeekStarted=!0,e.SendSeekEvent(i.LivePass.SEEK_ACTIONS_TYPE.SEEK_START,-1))},"ConvivaVideojsStreamerProxy.onSeeking")},this.onSeeked=function(){W.getInstance().runProtected(function(){e.Log("ConvivaVideojsStreamerProxy.onSeeked"),e.isSeekStarted=!1,e.SendSeekEvent(i.LivePass.SEEK_ACTIONS_TYPE.SEEK_END,-1)},"ConvivaVideojsStreamerProxy.onSeeked")},this.onStalled=function(a,b,c){W.getInstance().runProtected(function(){},"ConvivaVideojsStreamerProxy.onStalled")},this.onEmptied=function(a,b,c){W.getInstance().runProtected(function(){e.Log("ConvivaVideojsStreamerProxy.onEmptied")},"ConvivaVideojsStreamerProxy.onEmptied")},this.onWaiting=function(a,b,c){W.getInstance().runProtected(function(){e.Log("ConvivaVideojsStreamerProxy.onWaiting")},"ConvivaVideojsStreamerProxy.onWaiting")},this.onError=function(){W.getInstance().runProtected(function(){if(e.Log("ConvivaVideojsStreamerProxy.onError"),e._vjsPlayer&&null!=e.notifier&&void 0!=e.notifier){var a=e._vjsPlayer.error(),b=e._convertError(a?a.code:99);e.Log("MediaError: "+a.message),e._declareError(b)}},"ConvivaVideojsStreamerProxy.onError")},this.onProgress=function(){W.getInstance().runProtected(function(){if(e._vjsPlayer&&e._vjsPlayer.tech(e.requestTech).hls&&e._vjsPlayer.tech(e.requestTech).hls.playlists.media()&&e._vjsPlayer.tech(e.requestTech).hls.playlists.media().attributes){var a=new G(Math.round(e._vjsPlayer.tech(e.requestTech).hls.playlists.media().attributes.BANDWIDTH/1024),null,null,-1,-1,-1);e.SetStream(a)}},"ConvivaVideojsStreamerProxy.onProgress")},this.onMediaChange=function(){W.getInstance().runProtected(function(){if(e.Log("ConvivaVideojsStreamerProxy.onMediaChange"),e._vjsPlayer&&e._vjsPlayer.tech(e.requestTech).hls&&e._vjsPlayer.tech(e.requestTech).hls.playlists.media()&&e._vjsPlayer.tech(e.requestTech).hls.playlists.media().attributes){var a=new G(Math.round(e._vjsPlayer.tech(e.requestTech).hls.playlists.media().attributes.BANDWIDTH/1024),null,null,-1,-1,-1);e.SetStream(a)}},"ConvivaVideojsStreamerProxy.onMediaChange")},this._convertError=function(a){var b=" (code ="+a+")";switch(a){case 0:errStr="MEDIA_ERR_CUSTOM";break;case 1:errStr="MEDIA_ERR_ABORTED";break;case 2:errStr="MEDIA_ERR_NETWORK";break;case 3:errStr="MEDIA_ERR_DECODE";break;case 4:errStr="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:errStr="MEDIA_ERR_ENCRYPTED";break;case-1:errStr="PLAYER_ERR_NO_SRC";break;case-2:errStr="PLAYER_ERR_TIMEOUT";break;default:errStr="MEDIA_ERR_UNKNOWN"}return errStr+=b,e.Log("MediaError: code "+a+" "+errStr),errStr},e!=f&&a.apply(e,arguments)}function $(){function a(){c._dataLoader=new X,c.platform=navigator&&navigator.platform&&(navigator.platform.toString?navigator.platform.toString():null)}function b(){var a={sch:"html5.1"};return a.np=navigator&&navigator.platform&&(navigator.platform.toString?navigator.platform.toString():null),a.nua=navigator&&navigator.userAgent&&(navigator.userAgent.toString?navigator.userAgent.toString():null),a}var c=this;this.cleanup=function(){null!=c._dataLoader&&(c._dataLoader.cleanup(),c._dataLoader=null)},this.saveLocalData=function(a,b){try{localStorage.setItem("convivaPersistent",a)}catch(a){return void b(!1)}b(!0)},this.loadLocalData=function(a){try{var b=localStorage.getItem("convivaPersistent");a(!0,b)}catch(b){a(!1,"")}},this.deleteLocalData=function(){try{localStorage.clear()}catch(a){}},this.httpRequest=function(a,b,d,e,f){return"string"!=typeof d&&(d=c.jsonEncode(d,null)),c._dataLoader.makeRequest(a,b,d,e,f)},this.epochTimeMs=function(){return(new Date).getTime()},this.createTimer=function(a,b,c){var d=setInterval(a,b);return function(){-1!=d&&(clearInterval(d),d=-1)}},this.jsonEncode=function(a){return JSON.stringify(a)},this.jsonDecode=function(a){return JSON.parse(a)},this.consoleLog=function(a){"undefined"!=typeof console&&console.log&&console.log(a)},this.consoleErr=function(a){"undefined"!=typeof console&&console.error&&console.error(a)},this.getDevice=function(){return"browser"},this.getDeviceVersion=function(){return null},this.getDeviceType=function(){return"PC"},this.getOS=function(){return c._getPlatformName()},this.getOSVersion=function(){return null},k(c,"getPlatformMetadata",b),this._getPlatformName=function(){if(null==c.platform)return null;var a=function(a,b){return a.indexOf(b)>=0};return a(c.platform,"iPad")||a(c.platform,"iPhone")||a(c.platform,"iPod")?"IOS":a(c.platform,"Mac")?"MAC":a(c.platform,"Win")?"WIN":a(c.platform,"Linux")||a(c.platform,"SunOS")||a(c.platform,"HP-UX")||a(c.platform,"BSD")?"UNIX":a(c.platform,"PLAYSTATION 3")?"PS3":a(c.platform,"XBOX")?"XBOX":null},c!=f&&a.apply(c,arguments)}function _(){console.log("init *!*!* Conviva ...."),videojs.plugin("convivaPlugin",function(a){var b={},c={},d={},e=void 0,f=0,g=null,h=null,j=null,k=null,l=null,m=null,n=this;void 0!=a.tags&&(d=a.tags),void 0!=a.serviceUrl&&(b.gatewayUrl=a.serviceUrl),void 0!=a.heartbeatIntervalMs&&(b.heartbeatIntervalMs=a.heartbeatIntervalMs),void 0!=a.enableLogging&&(b.enableLogging=a.enableLogging),void 0!=a.convivatags&&(m=a.convivatags),i.LivePass.initWithSettings(a.customerKey,b);var o=new i.ConvivaVideojsStreamerProxy(this);this.on("ads-pod-started",function(){o.Log("Received ads-pod-started event"),void 0===e&&null==k&&(o.Log("Received ads-pod-started, create session"),q(this)),void 0!==l&&null!==l||(void 0!==n.ads.provider&&void 0!==n.ads.provider.type&&"FreeWheel"===n.ads.provider.type?(o.Log("Entered Freewheel Plugin"),void 0!==n.ads.adType?l=n.ads.adType:o.Log("Freewheel plugin not having proper adType"),void 0!==n.ads.pod.id&&null!==n.ads.pod.id&&!1===isNaN(n.ads.pod.id)?(o.Log("ads.pod.id from Freewheel is ",n.ads.pod.id),g=n.ads.pod.id):(o.Log("ads.pod.id is not returning proper integer value"),g="0")):(o.Log("Entered IMA3 Plugin"),void 0!==n.ads.ad.type&&null!==n.ads.ad.type&&(l=n.ads.ad.type,-1==n.ads.pod.id?(o.Log("Inside post roll scenario of IMA3",n.ads.pod.id),g+=1):g=n.ads.pod.id+1))),"PREROLL"==l||"preroll"==l?h="Pre-roll":"MIDROLL"==l||"midroll"==l?h="Mid-roll":"POSTROLL"!=l&&"postroll"!=l||(h="Post-roll"),f+=1,i.LivePass.sendEvent("Conviva.PodStart",{podDuration:"0",podPosition:h,podIndex:String(f),absoluteIndex:String(g)}),i.LivePass.detachStreamer(k,o),"PREROLL"!=l&&"preroll"!=l||i.LivePass.adStart(k)}),this.on("ads-pod-ended",function(){o.Log("Received ads-pod-ended event"),null!=l&&(i.LivePass.sendEvent("Conviva.PodEnd",{podDuration:"0",podPosition:h,podIndex:String(f),absoluteIndex:String(g)}),"PREROLL"==l||"preroll"==l?(i.LivePass.adEnd(k),i.LivePass.attachStreamer(k,o)):"MIDROLL"!=l&&"midroll"!=l||i.LivePass.attachStreamer(k,o),l=null,h=null)}),this.on("play",function(){o.Log("Received play event"),void 0===e&&null==k&&(o.Log("Received play event on null session, create session"),q(this))}),this.on("playing",function(){o.Log("Received playing event"),null==e&&null==k&&(o.Log("Received playing event on null session, create session"),q(this))}),this.on("loadstart",function(){o.Log("Received loadstart event"),null!=k&&void 0!=this.playlist&&e!=this.playlist.currentItem()?this.paused()?(o.Log("Received loadstart event when the previous content is paused, close session for active session"),p(),e=void 0):(o.Log("Received loadstart event on active session, close current session and create new session"),p(),q(this)):null==k&&null===e&&void 0!=this.playlist&&this.playlist().length!=e&&(o.Log("Received loadstart event on non first playlist item with sessionId being null, create new session"),q(this))});var p=function(){o.Log("Plugin cleanup called"),void 0!==i&&i&&null!==k&&(i.LivePass.cleanupSession(k),k=null,e=null,h=null,f=0,g=0,j=null,c={})},q=function(a){o.Log("Plugin createSession called"),r(a),void 0!=a.playlist&&(e=a.playlist.currentItem()),k=i.LivePass.createSession(o,j)},r=function(b){if(o.Log("createContentInfo called"),void 0!==i&&i){for(var e in d)c[e]=d[e];var f=null;null!==b.mediainfo&&void 0!==b.mediainfo?(f=b.mediainfo,o.Log("Player mediainfo exists")):void 0!=b.playlist&&b.playlist()&&b.playlist().length&&-1!=b.playlist.currentItem()&&(f=b.playlist()[b.playlist.currentItem()],o.Log("Player playlist exists"));var g="";if(null!==f&&void 0!==f){if(void 0!==f.custom_fields&&null!==f.custom_fields){void 0!==f.custom_fields.assetName&&null!==f.custom_fields.assetName&&(g=f.custom_fields.assetName,o.Log("setting assetName from custom_fields",g)),void 0!==f.custom_fields.viewerId&&null!==f.custom_fields.viewerId&&(o.Log("setting viewerID from custom_fields",f.custom_fields.viewerId),a.viewerId=f.custom_fields.viewerId);var h=f.custom_fields;if(null!==m&&void 0!==m){var k=m.split(",");if(null!==k)for(var l=0;l<k.length;l++)h.hasOwnProperty(k[l])&&(c[k[l]]=h[k[l]])}}else null!==f.id&&void 0!==f.id&&(g+="["+f.id+"] "),null!==f.name&&void 0!==f.name&&(g+=f.name);null!==f.id&&void 0!==f.id&&(c.ID=f.id)}""==g&&(g=a.assetName,o.Log("assetname not found.Picking assetname from options")),j=new i.ConvivaContentInfo(g,c),void 0!=a.playerName&&(j.playerName=a.playerName),void 0!=a.viewerId&&(j.viewerId=a.viewerId),void 0!=a.cdnName&&(j.defaultReportingCdnName=a.cdnName),void 0!=a.defaultReportingBitrateKbps&&(j.defaultReportingBitrateKbps=a.defaultReportingBitrateKbps),void 0!=a.defaultReportingResource&&(j.defaultReportingResource=a.defaultReportingResource),void 0!=a.isLive&&(j.isLive=a.isLive),j.streamUrl=b.currentSrc()}};this.on("ended",function(){o.Log("Received ended event"),p()})})}function aa(){function a(){$.call(b)}var b=this;this.getPlatformMetadata=function(){var a=b.super_getPlatformMetadata();return a.sch="bc.perform.dt.1",a.fwv=bc.VERSION||"1.0",a},a.apply(b,arguments)}a(a,"registerName"),a(b,"__id"),a(c,"getConvivaType"),a(e,"importConvivaPrivateProgram"),a(f,"STAT_INIT"),a(j,"statInit"),a(k,"defPubMeth"),a(l,"defPrivMeth"),a(m,"defStatMeth"),a(n,"defGet"),a(o,"defSet"),a(p,"defStatGet"),a(q,"defStatSet"),a(r,"slIsArray"),a(s,"slForEachPropValue"),a(t,"slForEachProp"),a(u,"declTestClass"),a(v,"declTestMethod"),j(w,"sluint"),j(x,"slint"),j(y,"Int64"),j(z,"UInt64"),j(A,"CandidateStream"),j(B,"ConvivaContentInfo"),j(C,"ConvivaStreamerProxy"),j(D,"LivePass"),j(E,"NetworkInfo"),j(F,"PlayerStates"),j(G,"StreamInfo"),j(H,"StreamSwitch"),j(I,"StreamerError"),j(J,"Monitor"),j(K,"EventQueue"),j(L,"Session"),j(M,"SessionFactory"),j(N,"ArrayCS"),j(O,"Cleanable"),j(P,"DictionaryCS"),j(Q,"Eventer"),j(R,"KeyValuePairCS"),j(S,"Lang"),j(T,"ListCS"),j(U,"NativeLang"),j(V,"Settings"),j(W,"Utils"),j(X,"DataLoader"),j(Y,"Infer"),j(Z,"ConvivaVideojsStreamerProxy"),j($,"Html5PlatformApi"),g=function(){j(_,"glue")},j(aa,"ConvivaVideojsPlatformApi")}();var i=void 0!==i?i:function(){};i.LivePass=h.LivePass,i.ConvivaContentInfo=h.ConvivaContentInfo,i.StreamerError=h.StreamerError,i.ConvivaStreamerProxy=h.ConvivaStreamerProxy,i.Settings=h.Settings,i.StreamInfo=h.StreamInfo,i.Utils=h.Utils,i.ConvivaVideojsStreamerProxy=h.ConvivaVideojsStreamerProxy,i.glue=h.glue,i.ConvivaVideojsPlatformApi=h.ConvivaVideojsPlatformApi,i.Infer=h.Infer}a.exports={Conviva:i,init:g}},function(a,b,c){"use strict";function d(a,b){if(null===b)return a}function e(){videojs.plugin("conviva",k)}var f,g,h,i,j,k;f=c(25),g=f.Conviva,h=c(1),j=c(0),i=!0,a.exports={init:e},k=function(a){a.debug&&console.debug("CONVIVA: plugin");var b,c,e,f,k,l,m,n,o,p,q,r,s,t,u,v,w,x=0,y=null,z=null,A=null,B="";s=this,a.debug?(g.LivePass.initWithSettings(a.customerKey,{gatewayUrl:"https://espn-com-test.testonly.conviva.com"}),g.LivePass.toggleTraces(!0)):g.LivePass.init(a.customerKey),v=new g.ConvivaVideojsStreamerProxy(s),u=function(){f=s.mediainfo||{},w={site:location.hostname,path:location.pathname,page:location.href,userId:h.SWID,bundleVersion:"1.8.4-4",hidden:document.hidden+""},f.airingId&&(w.airingId=f.airingId),f.sourceType&&(w.broadcastType=f.sourceType),f.eventId&&(w.eventId=f.eventId+""),f.sourceId&&(w.network=f.sourceId),f.status&&(w.assetType=f.status),f.affiliate&&(w.affiliate=f.affiliate),a.tags&&j(w,a.tags,d),b=w.broadcastType&&"linear"===w.broadcastType&&w.network?w.network:f.name+(f.id?" - "+f.id:""),a.debug&&console.debug("CONVIVA: assetName: "+b),c=new g.ConvivaContentInfo(b,w),c.defaultReportingCdnName=g.ConvivaContentInfo.CDN_NAME_OTHER,c.isLive=f.live,c.streamUrl=s.currentSrc(),c.playerName=a.playerName,c.viewerId=h.SWID},p=function(){a.debug&&(console.debug("CONVIVA: loadstart"),console.debug("CONVIVA: loadstart: adstate:"+s.ads.state)),(!s.ads||"ad-playback"!==s.ads.state&&"content-resuming"!==s.ads.state)&&null!=t&&(console.warn("CONVIVA: session exists onLoadStart, cleaning up"),e()),null==t&&(u(),s.ads&&s.ads.state?(a.debug&&console.debug("CONVIVA: loadstart:ads:createSession"),t=g.LivePass.createSession(null,c)):(a.debug&&console.debug("CONVIVA: loadstart:noads:createSession"),t=g.LivePass.createSession(v,c)))},k=function(){B||(void 0!==s.ads.provider&&void 0!==s.ads.provider.type&&"FreeWheel"===s.ads.provider.type?(a.debug&&console.debug("Entered Freewheel Plugin"),void 0!==s.ads.adType?B=s.ads.adType:void 0!==s.ads.ad.type&&null!==s.ads.ad.type?B=s.ads.ad.type:console.warn("Freewheel plugin not having proper adType"),void 0!==s.ads.pod.id&&null!==s.ads.pod.id&&!1===isNaN(s.ads.pod.id)?(a.debug&&console.debug("ads.pod.id from Freewheel is ",s.ads.pod.id),y=s.ads.pod.id):(a.debug&&console.debug("ads.pod.id is not returning proper integer value"),y="0")):(a.debug&&console.debug("Entered IMA3 Plugin"),void 0!==s.ads.ad.type&&null!==s.ads.ad.type&&(B=s.ads.ad.type,-1===s.ads.pod.id?(a.debug&&console.debug("Inside post roll scenario of IMA3",s.ads.pod.id),y+=1):y=s.ads.pod.id+1)),A=s.ads.pod&&s.ads.pod.duration||"0",B=B.toUpperCase()),"PREROLL"===B?z="Pre-roll":"MIDROLL"===B?z="Mid-roll":"POSTROLL"===B&&(z="Post-roll"),x+=1,g.LivePass.sendEvent("Conviva.PodStart",{podDuration:A,podPosition:z,podIndex:String(x),absoluteIndex:String(y)}),a.debug&&console.debug("CONVIVA: ads-pod-started:detachStreamer"),g.LivePass.detachStreamer(t,v),"PREROLL"===B&&g.LivePass.adStart(t)},l=function(){a.debug&&console.debug("Received ads-pod-ended event"),B&&(g.LivePass.sendEvent("Conviva.PodEnd",{podDuration:A,podPosition:z,podIndex:String(x),absoluteIndex:String(y)}),"PREROLL"===B?(a.debug&&console.debug("CONVIVA: ads-pod-ended"),g.LivePass.adEnd(t),a.debug&&console.debug("CONVIVA: ads-pod-ended:attachStreamer"),g.LivePass.attachStreamer(t,v)):"MIDROLL"===B&&g.LivePass.attachStreamer(t,v),B="",z=null)},q=function(){null!=t&&(a.debug&&console.debug("CONVIVA: contentplayback:attachStreamer"),g.LivePass.attachStreamer(t,v))},r=function(){0===s.currentTime()&&(a.debug&&console.debug("CONVIVA: restart"),null==t?(u(),a.debug&&console.debug("CONVIVA: restart:createSession:streamer"),t=g.LivePass.createSession(v,c)):(a.debug&&console.debug("CONVIVA: restart:attachStreamer"),g.LivePass.attachStreamer(t,v)))},n=function(){a.debug&&console.debug("CONVIVA: ended"),s.ads&&"ad-playback"===s.ads.state||(e(),s.one("seeking",r))},e=function(){
null!=t&&(s.ads&&"ad-playback"===s.ads.state&&g.LivePass.adEnd(t),a.debug&&console.debug("CONVIVA: endeded:detachStreamer"),g.LivePass.detachStreamer(t,v),a.debug&&console.debug("CONVIVA: endeded:cleanupSession"),g.LivePass.cleanupSession(t),t=null)},o=function(){var b=s.error();b||(b.code="unknown",b.message="unknown"),null==t&&-2!==b.code&&(u(),a.debug&&console.debug("CONVIVA: error:createSession:streamer"),t=g.LivePass.createSession(v,c));var d="code:"+b.code+" "+(b.type&&b.type!==b.code?b.type:b.headline||b.message);if(console.debug("CONVIVA: ERROR "+d),t){g.LivePass.reportError(t,d);var f="error:"+b.code,h={};h.currentTime=s.currentTime()+"";var i,j=[];for(i=0;i<s.buffered().length;i++)j.push(s.buffered().start(i)+"-"+s.buffered().end(i));h.buffered=j.join(", ");var k=[];for(i=0;i<s.seekable().length;i++)k.push(s.seekable().start(i)+"-"+s.seekable().end(i));h.seekable=k.join(", "),h.hidden=document.hidden+"",a.debug&&console.debug("CONVIVA: Event: "+f,h),g.LivePass.sendEvent(f,h)}e()},m=function(){null!=t&&g.LivePass.cleanupSession(t),s.off("ads-pod-started",k),s.off("ads-pod-ended",l),s.off("contentplayback",q),s.off("dispose",m),s.off("ended",n),s.off("error",o),s.off("loadstart",p),s.off("seeking",r),i=!0},i&&(i=!1,a.debug&&console.debug("CONVIVA: ON"),s.on("ads-pod-started",k),s.on("ads-pod-ended",l),s.on("contentplayback",q),s.on("dispose",m),s.on("ended",n),s.on("error",o),s.on("loadstart",p))}},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(null===b)return a}function f(a,b){if(a.mediainfo&&"function"==typeof b.setPlayheadOffset&&a.mediainfo.live&&a.mediainfo.startTime){var c=Math.round((Date.now()-a.mediainfo.startTime)/1e3);a.on("omnitureReady",function(){b.setPlayheadOffset(c)})}}function g(a,b){var d={},f={NIELSEN_DATA:{CONTENT_METADATA:{}},ESPN_CUSTOM_METADATA:{Showcode:a.mediainfo.showcode}};return(a.mediainfo.originalPublishDate||a.mediainfo.originalAirDate)&&(f.NIELSEN_DATA.CONTENT_METADATA.airdate=k(a.mediainfo.originalPublishDate||a.mediainfo.originalAirDate,"%Y%m%d%k%M%S",c(68),"America/New_York")),a.mediainfo.live&&(f.MEDIAINFO={live:!0}),a.mediainfo.hasNielsenWatermarks&&(d={adloadtype:1,dataSrc:"ID3",tv:!0}),"SHARED INV"===a.mediainfo.commercialReplacement&&(d.adloadtype=1),a.mediainfo.nielsenCrossId1&&(d.crossId1=a.mediainfo.nielsenCrossId1),j(f.NIELSEN_DATA.CONTENT_METADATA,d,e),j(b,f,e),b}function h(a,b){function c(){j=setTimeout(f,l)}function d(){clearTimeout(j),i&&i+l<Date.now()&&e(),c()}function e(c){i&&(b.trackAdComplete(),a.trigger("espn.ads-ad-ended",{type:"midroll",id:c})),i=!1}function f(c){clearTimeout(j),b.trackAdStart(c),i=Date.now(),a.trigger("espn.ads-ad-started",{type:"midroll",id:c})}function g(){a.mediainfo.hasEspnId3Heartbeats&&(clearTimeout(j),a.one("play",function(){c()}))}function h(c,g){var h,i,j,l;try{h=JSON.parse(g.text)}catch(a){h=g.text}j="function"==typeof b.sendID3&&g.owner&&null!==g.owner.match(/^www\.nielsen\.com/i)&&a.mediainfo.hasNielsenWatermarks,l=k&&"com.espn.authnet.transition"===g.owner,i=k&&a.mediainfo.hasEspnId3Heartbeats&&"com.espn.authnet.heartbeat"===g.owner&&"PROGRAM"===h[0].type&&!(h[1]&&"COMMERCIAL"===h[1].type),j&&b.sendID3(g.owner),l&&("PROGRAM"===h.from.type&&"COMMERCIAL"===h.to.type?(a.trigger("espn.ads-pod-started",{type:"midroll"}),f(h.to.id)):"COMMERCIAL"===h.from.type&&"COMMERCIAL"===h.to.type?(e(h.from.id),f(h.to.id)):h[1]&&"COMMERCIAL"===h[1].type?f(h[1].id):"COMMERCIAL"===h.from.type&&"PROGRAM"===h.to.type&&(e(h.from.id),a.trigger("espn.ads-pod-ended",{type:"midroll"}))),i&&d()}var i=void 0,j=void 0,k="function"==typeof b.trackAdStart&&"function"==typeof b.trackAdComplete;a.on("pause",g),a.on("espn.id3cuechange",h),a.one("dispose",function(){a.off("pause",g),a.off("espn.id3cuechange",h),clearTimeout(j)})}var i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=c(0),k=c(69),l=2e4,m=function(){function a(b,c){if(d(this,a),this.player=b,c=g(this.player,c),"function"==typeof this.player.BCGSAdobeDCRPlugin)this.plugin=this.player.BCGSAdobeDCRPlugin({options:c});else{if(!this.player.heartbeats)return void console.error("No Adobe/Nielsen plugin found");this.plugin=this.player.heartbeats(c)}f(this.player,this.plugin),h(this.player,this.plugin)}return i(a,[{key:"loadNewOptions",value:function(a){"function"==typeof this.plugin?this.plugin({options:a}):"function"==typeof this.plugin.loadNewOptions&&this.plugin.loadNewOptions(a)}},{key:"completeLiveProgram",value:function(){"function"==typeof this.plugin.completeLiveProgram&&this.plugin.completeLiveProgram()}}]),a}();a.exports=m},function(a,b,c){"use strict";var d,e,f;f={},e="en",d=function(a){return f[e][a]||f.en[a]||a},d.add=function(a,b){var c,d;f[a]||(f[a]={});for(c in b)d=b[c],f[a][c]=d},d.reset=function(){f={},e="en"},d.setLang=function(a){f[a]&&(e=a)},d.translations=function(){return f},d.add("en",c(75)),d.add("es",c(76)),d.add("pt",c(77)),a.exports=d},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a){if(!a)return!1;if(p.IS_CHROME){var b=a.getBoundingClientRect().width,c=Math.max(a.getBoundingClientRect().height,b*(9/16));if(b<400||c<300)return!0}return!1}var h=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=c(11),k=c(16),l=c(17),m=c(10),n=c(5),o=c(4),p=c(2),q=void 0,r=void 0,s=void 0,t=void 0,u=function(a){function b(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"brightcove",c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d(this,b);var f=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));switch(a){case"native":f.playerTech=l;break;default:f.playerTech=k}return f.options=c,f}return f(b,a),i(b,[{key:"player",get:function(){return q&&q.player()}},{key:"bundle",get:function(){return q}},{key:"analytics",get:function(){return n}},{key:"advertising",get:function(){return o}}]),b}(j);u.prototype.embed=function(a,b,c){var d=this,e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},f=b;"[object String]"===Object.prototype.toString.call(b)&&(f=document.getElementById(b)),s=f,r=f.parentNode,t=r.cloneNode(!0);var i=h({},c);if(a&&(i.cerebroId=a),g(f))if(i.advertising||(i.advertising={}),i.advertising.adTechOrder){var j=i.advertising.adTechOrder.indexOf("html5");0!==j&&(j>0&&i.advertising.adTechOrder.splice(j,1),i.advertising.adTechOrder.unshift("html5"))}else h(i.advertising,{adTechOrder:["html5","flash"]});return q=new this.playerTech(f,i),q.player().ready(function(){e(d)}),this},u.prototype.play=function(){return this.player&&this.player.play(),this},u.prototype.pause=function(){return this.player&&this.player.pause(),this},u.prototype.muted=function(a){return this.player?void 0===a?this.player.muted():(this.player.muted(a),this):this},u.prototype.currentTime=function(a){return this.player?void 0===a?this.player.currentTime():(this.player.currentTime(a),this):this},u.prototype.requestFullscreen=function(){return this.player&&this.player.requestFullscreen(),this},u.prototype.exitFullscreen=function(){return this.player&&this.player.exitFullscreen(),this},u.prototype.ready=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return this.playerTech.loadTech(a.bind(this),this.options),this},u.prototype.switchVideo=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(q&&(a||b.clipId)){var d="boolean"!=typeof b.autoplay||b.autoplay,e=b.clipSource||q.clipSource,f=b.clipId;if(this.player.trigger("switch",{guid:a,clipId:f,autoplay:d,source:e}),this.player&&this.player.ads&&"ad-playback"===this.player.ads.state){this.unembed();var g=t?t.children[0]:{},h=g.getAttribute?g.getAttribute("id"):null;h?this.embed(a,h,b,c):c(new Error("cloned placeholder missing ID"))}else a&&(b.cerebroId=a),q.player().reset(),q.registerConfiguration(b),c(null,this)}},u.prototype.unembed=function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(n.reset(),q)return q.dispose(),q=null,r&&r.parentNode&&(a?r.parentNode.removeChild(r):r.parentNode.replaceChild(t,r)),this},u.prototype.remove=function(){this.unembed(!0)},u.prototype.error=function(a,b){return q.error(a,b),this},u.ConfigLogger=m,u.VERSION="1.8.4-4",a.exports=u},function(a,b,c){"use strict";function d(a,b,c){var d,e;a&&(e="passThroughTracking",d=document.getElementById(e),d||(d=new Image,d.id=e,document.body.appendChild(d)),d.src=a+"&caid="+b+"&pvrn="+Date.now()+"&resp=ad;adid="+encodeURIComponent(c)+"&airing="+b+";ptgt=a&slau=midroll")}function e(){var a;a=function(){var a,b;a=this,"function"==typeof a.id3&&a.id3(),a.on("espn.id3cuechange",function(c,e){var f,g;"com.espn.authnet.transition"===e.owner&&(g=JSON.parse(e.text),"COMMERCIAL"===g.to.type?(f=g.to.id,f?f!==b?(b=f,d(a.mediainfo.passThroughBeaconURL,a.mediainfo.simulcastAiringId,f)):console.warn("APT: Skipping duplicate adID: "+f):console.warn("APT: No valid Ad ID available to send.")):b=null)})},videojs.plugin("adPassThrough",a)}a.exports={init:e}},function(a,b,c){"use strict";var d,e;d=function(a,b){var c,d,e,f,g;return null==b&&(b=a),a=a<0?0:a,g=Math.floor(a%60),f=Math.floor(a/60%60),e=Math.floor(a/3600),d=Math.floor(b/60%60),c=Math.floor(b/3600),(isNaN(a)||a===1/0)&&(e=f=g="-"),e=e>0||c>0?e+":":"",f=((e||d>=10)&&f<10?"0"+f:f)+":",g=g<10?"0"+g:g,e+f+g},e=function(){var a,b,c,e,f;a=videojs.getComponent("Component"),b=videojs.getComponent("ControlBar"),e=videojs.getComponent("RemainingTimeDisplay"),c=videojs.extend(e,{constructor:function(a,b){return e.call(this,a,b)},createEl:function(){var b;return b=a.prototype.createEl.call(this,"div",{className:"vjs-ad-remaining-time vjs-time-control vjs-control"}),this.contentEl_=document.createElement("div"),this.contentEl_.classList.add("vjs-ad-remaining-time-display"),this.contentEl_.innerHTML='<span class="vjs-control">'+this.localize("Ad")+"</span> (0:00)",this.contentEl_.setAttribute("aria-live","off"),b.appendChild(this.contentEl_),b},updateContent:function(){var a,b;this.player_.duration()&&(b=this.localize("Ad"),(a=d(this.player_.remainingTime()))!==this.formattedTime_&&(this.formattedTime_=a,this.contentEl_.innerHTML='<span class="vjs-control">'+b+"</span> ("+a+")"))}}),a.registerComponent("AdRemainingTimeDisplay",c),-1===b.prototype.options_.children.indexOf("adRemainingTimeDisplay")&&(f=b.prototype.options_.children.indexOf("currentTimeDisplay"),b.prototype.options_.children.splice(f,0,"adRemainingTimeDisplay"))},a.exports={init:e}},function(a,b,c){"use strict";function d(){var a;a=function(a){var b,c,d,e,f,g,h;e=this;var i=a||{},j=i.namespace||"espn",k=j+"-bandwidth",l=i.initialBandwidth||15e5;c=function(){d=e.tech({IWillNotUseThisInPlugins:!0}).hls},g=function(){if(c(),d){var a=sessionStorage.getItem(k);a=null!=a?Number(a):l,Number.isNaN(a)||(console.log("Setting bandwidth: "+a),d.bandwidth=a)}e.on("loadstart",c)},h=function(){if(d){var a=d.bandwidth;a>1&&sessionStorage.setItem(k,a)}},f=function(){sessionStorage.setItem(k,null),d&&(d.bandwidth=1)},b=function(){e.off("error",f),e.off("loadstart",c),e.off("mediachange",h)},e.one("dispose",b),e.one("loadstart",g),e.on("error",f),e.on("mediachange",h)},videojs.plugin("persistBandwidth",a)}a.exports={init:d}},function(a,b,c){"use strict";var d;d=function(){var a,b,c,d;return b=videojs.getComponent("Component"),d=videojs.getComponent("TextTrackMenuItem"),a=videojs.getComponent("CaptionsToggleButton"),c=videojs.extend(d,{constructor:function(a,b){var c;b.track={kind:b.kind,player:a,label:"<span>"+a.localize(b.label||"Caption Settings")+"</span>",selectable:!1,default:!1,mode:"disabled"},b.selectable=!1,d.call(this,a,b),this.addClass("vjs-texttrack-settings"),this.hide(),c=this.handleTracksChange.bind(this),a.on("texttrackchange",c),a.on("espn.captionchange",c),this.on("dispose",function(){a.off("texttrackchange",c),a.off("espn.captionchange",c)})},handleClick:function(){var a,b;return a=this.player_.$(".bcc-caption-settings"),a.classList.remove("vjs-hidden"),b=!this.player_.paused(),this.player_.addClass("vjs-caption-settings-active"),this.player_.pause(),this.player_.$(".vjs-done-button",a).addEventListener("click",function(){this.player_.removeClass("vjs-caption-settings-active"),b&&this.player_.play()}.bind(this)),a.focus()},handleTracksChange:function(){this.hasValidTracks()?this.show():this.hide()},hasValidTracks:a.prototype.hasValidTracks}),b.registerComponent("CaptionSettingsMenuItem",c)},a.exports={init:d}},function(a,b,c){"use strict";var d,e,f,g,h;e=!1,h="bgs-saved-language",d=function(){var a,b,c;b=videojs.getComponent("Component"),a=videojs.getComponent("Button"),c=videojs.extend(a,{constructor:function(b,c){var d;a.call(this,b,c),this.controlText(c&&c.controlText||this.localize("Closed Captions")),this.hide(),d=this.handleTracksChange.bind(this),b.on("texttrackchange",d),b.on("espn.captionchange",d),this.on("dispose",function(){b.off("texttrackchange",d),b.off("espn.captionchange",d)})},buildCSSClass:function(){return"evp-toggle-cc-button vjs-captions-button cc-disabled "+a.prototype.buildCSSClass.call(this)},handleClick:function(b){return this.toggleTracks(),a.prototype.handleClick.call(this,b)},createEl:function(b,c,d){return a.prototype.createEl.call(this,b,c,d)},handleTracksChange:function(){this.hasValidTracks()?this.show():this.hide(),this.tracksEnabled()?this.el_.classList.remove("cc-disabled"):this.el_.classList.add("cc-disabled")},toggleTracks:function(){var a,b,c;for(c=this.player_.textTracks(),a=0,b=c.length;a<b;a++)"captions"===c[a].kind&&("disabled"!==c[a].mode?"showing"===c[a].mode?(c[a].mode="hidden",window.localStorage.setItem(h,"off")):(c[a].mode="showing",window.localStorage.setItem(h,c[a].language+"-"+c[a].label)):c[a].mode="showing");this.player_.trigger("espn.captionchange")},tracksEnabled:function(){var a,b,c,d,e;for(e=this.player().textTracks(),b=!1,d=window.localStorage.getItem(h),a=0,c=e.length;a<c;a++)"captions"===e[a].kind&&(d!==e[a].language+"-"+e[a].label?"disabled"!==e[a].mode?"showing"!==e[a].mode||(b=!0):(e[a].mode="showing",e[a].mode="hidden"):("disabled"===e[a].mode&&setTimeout(function(){this.mode="showing"}.bind(e[a]),0),b=!0));return window.videojs.IS_ANY_SAFARI&&(this.player().el().querySelector("video").webkitClosedCaptionsVisible=b),b},kind_:"captions",hasValidTracks:function(){var a,b,c,d,e,f;for(f=this.player().textTracks()||[],b=this.handleTracksChange.bind(this),a=function(){this.removeEventListener("cuechange",a),b()},d=0,e=f.length;d<e;d++)if("captions"===f[d].kind){if(!(c=f[d].cues&&f[d].cues.length>0))return f[d].addEventListener("cuechange",a),!1;if(c||f[d].label||f[d].language)return!0}return!1}}),b.registerComponent("CaptionsToggleButton",c),videojs.plugin("captionsToggleButton",g),e=!0},g=function(){var a;return a=this,a.ready(function(){var b;b=a.controlBar.children().map(function(a){return a.name().toUpperCase()}).indexOf("SettingsMenuButton".toUpperCase()),a.controlBar.captionsToggleButton&&(a.controlBar.removeChild(a.controlBar.captionsToggleButton),delete a.controlBar.captionsToggleButton),a.controlBar.captionsButton&&a.controlBar.removeChild(a.controlBar.captionsButton),a.controlBar.captionsToggleButton=a.controlBar.addChild("captionsToggleButton",{},b-1)})},f=function(a){e||d(),a.captionsToggleButton()},a.exports={init:d,plugin:f}},function(a,b,c){"use strict";function d(a){if("string"==typeof a.data)return a.data;a.data instanceof ArrayBuffer&&(a.data=new Uint8Array(a.data));try{return String.fromCharCode.apply(null,a.data)}catch(b){return console.warn(b),a.data}}function e(){var a;a=function(){var a,b;b=this,a=function(){var c,e,f;return b.off("texttrackchange",a),c=b.textTracks(),(f=c.length-1)<0?void b.on("texttrackchange",a):(e=c[f],"metadata"!==e.kind?void b.on("texttrackchange",a):(e.mode="hidden",void e.addEventListener("cuechange",function(){if(e.activeCues.length>0)for(var a=0;a<e.activeCues.length;a++)e.activeCues[a].value&&(e.activeCues[a].text=d(e.activeCues[a].value),e.activeCues[a].value.owner?e.activeCues[a].owner=e.activeCues[a].value.owner:e.activeCues[a].owner=e.activeCues[a].value.info,b.trigger("espn.id3cuechange",e.activeCues[a]))})))},this.on("texttrackchange",a)},videojs.plugin("id3",a)}a.exports={init:e}},function(a,b,c){"use strict";function d(){var a=videojs.getComponent("Component"),b=videojs.getComponent("LoadingSpinner"),c=videojs.extend(b,{constructor:function(a,c){b.call(this,a,c)},createEl:function(){return a.prototype.createEl.call(this,"div",{className:"vjs-loader active",dir:"ltr",innerHTML:'<div class="spinner-layer"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div>'})}});a.registerComponent("LoadingSpinner",c)}a.exports={init:d}},function(a,b,c){"use strict";var d;d=function(){var a,b,c;return a=videojs.getComponent("Component"),c=videojs.getComponent("PlayToggle"),b=videojs.extend(c,{constructor:function(a,b){c.call(this,a,b),this.on(a,"durationchange",this.handleDurationChange),this.on(a,"ended",this.handleEnded)},pauseText:"Pause",playText:"Play",handleDurationChange:function(){this.player_.duration()===1/0&&(this.pauseText="Stop",this.player_.paused()||this.controlText(this.pauseText))},handleEnded:function(){this.controlText("Replay")},handlePlay:function(){this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText(this.pauseText)},handlePause:function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText(this.playText)}}),a.registerComponent("PlayToggle",b)},a.exports={init:d}},function(a,b,c){"use strict";function d(){var a=videojs.getComponent("Component"),b=videojs.getComponent("SeekBar"),c=videojs.extend(b,{constructor:function(a,c){b.call(this,a,c)},createEl:function(){var a=b.prototype.createEl.call(this);if(!a.querySelector(".evp-progress-holder-wrapper")){var c=document.createElement("div");c.className="evp-progress-holder-wrapper",a.appendChild(c)}return a},handleMouseDown:function(a){b.prototype.handleMouseDown.call(this,a),this.scrubbingTime=this.calculateDistance(a),this.update()},handleMouseMove:function(a){this.scrubbingTime=this.calculateDistance(a),this.update()},handleMouseUp:function(a){var c=this.calculateDistance(a)*this.player_.duration();return c===this.player_.duration()&&(c-=.1),this.player_.currentTime(c),b.prototype.handleMouseUp.call(this,a)},getPercent:function(){var a=b.prototype.getPercent.call(this);return this.player_.scrubbing()&&(a=this.scrubbingTime||a),a>=1?1:a}});a.registerComponent("SeekBar",c)}a.exports={init:d}},function(a,b,c){"use strict";function d(){var a=videojs.getComponent("Component"),b=videojs.getComponent("MenuItem"),c=videojs.getComponent("MenuButton"),d=videojs.getComponent("CaptionSettingsMenuItem"),f=videojs.getComponent("CaptionsToggleButton"),i=videojs.extend(b,{contentElType:"checkbox",constructor:function(a,c){this.isSelected=!1,c.label="<span>"+a.localize("Autoplay")+"</span>",c.selectable=!0,b.call(this,a,c),g.getAutoStart(function(a){!this.el_||!0!==a&&!1!==a||(this.isSelected=a,this.selected(a),this.el_.querySelector("input").checked=this.isSelected)}.bind(this))}});i.prototype.handleClick=function(){this.isSelected=!this.isSelected,this.selected(this.isSelected),this.el_.querySelector("input").checked=this.isSelected,g.setAutoStart(this.isSelected),this.player().player_.trigger("espn.autoplaytoggled",{autoplay:this.isSelected})},i.prototype.createEl=function(a){return b.prototype.createEl.call(this,a,{innerHTML:this.localize(this.options_.label)+'<div class="toggle-btn sm"><input id="autoplay_toggle" class="toggle-input round" type="checkbox"><label for="autoplay_toggle"></label></div>'})};var j=videojs.extend(b,{contentElType:"checkbox",constructor:function(a,c){var d;this.isSelected=!0,c.label="<span>"+a.localize("Closed Caption")+"</span>",c.selectable=!0,b.call(this,a,c),this.hide(),d=this.handleTracksChange.bind(this),a.on("texttrackchange",d),a.on("espn.captionchange",d),this.on("dispose",function(){a.off("texttrackchange",d),a.off("espn.captionchange",d)})},toggleTracks:f.prototype.toggleTracks,handleTracksChange:function(){this.hasValidTracks()?this.show():this.hide();var a=f.prototype.tracksEnabled.call(this);this.isSelected=a,this.selected(this.isSelected),this.el_.querySelector("input").checked=this.isSelected},hasValidTracks:f.prototype.hasValidTracks});j.prototype.handleClick=function(){this.toggleTracks(),this.handleTracksChange()},j.prototype.createEl=function(a){return b.prototype.createEl.call(this,a,{innerHTML:this.localize(this.options_.label)+'<div class="toggle-btn sm"><input id="captions_toggle" class="toggle-input round" type="checkbox"'+(this.isSelected?"checked ":"")+'><label for="captions_toggle"></label></div>'})};var k=videojs.extend(c,{constructor:function(a,b){c.call(this,a,b),a.on("mouseup",function(a){this.buttonPressed_&&!this.el().contains(a.target)&&this.unpressButton(!0)}.bind(this))},handleClick:function(){this.buttonPressed_?this.unpressButton():this.pressButton()}});k.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-settings-control-button vjs-menu-button vjs-menu-button-popup vjs-control vjs-button",innerHTML:'<div class="vjs-control-text">'+this.localize("Settings")+"</div>",tabIndex:0},{role:"menuitem"})},k.prototype.pressButton=function(){return this.player().addClass("vjs-settings-active"),c.prototype.pressButton.call(this)},k.prototype.unpressButton=function(a){this.player().removeClass("vjs-settings-active"),this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.el_.setAttribute("aria-expanded","false"),a||this.el_.focus())},k.prototype.createItems=function(){var a,b;return b=[],a=new i(this,{}),a.on("click",function(){}),b.push(a),b.push(new j(this.player_,{})),h.IS_SAFARI||b.push(new d(this.player_,{kind:"captions"})),b},videojs.registerComponent("SettingsMenuButton",k),videojs.plugin("settingsMenu",e)}function e(){var a=this;a.ready(function(){var b=a.controlBar.children().map(function(a){return a.name().toUpperCase()}).indexOf("FullscreenToggle".toUpperCase());a.controlBar.settingsMenuButton&&(a.controlBar.removeChild(a.controlBar.settingsMenuButton),delete a.controlBar.settingsMenuButton),a.controlBar.settingsMenuButton=a.controlBar.addChild("settingsMenuButton",{},b-1)})}function f(a){a.settingsMenu()}var g=c(1),h=c(2);a.exports={init:d,plugin:f}},function(a,b,c){"use strict";function d(a){var b=c(41),d=c(42),e=this,f={title:"",description:"",url:"",offset:"00:00:00",services:{facebook:!0,twitter:!0,google:!1,tumblr:!1,pinterest:!1,linkedin:!1,email:!0},accountId:3948005062001};videojs.registerComponent("SocialButtonESPN",b),videojs.registerComponent("SocialOverlayESPN",d),function(a){var b=videojs.mergeOptions(f,a);if(!(b&&b.services&&(b.services.facebook||b.services.twitter||b.services.google||b.services.tumblr||b.services.pinterest||b.services.linkedin||b.services.email)))throw new Error("videojs-social requires at least one service to be enabled");e.controlBar.socialButtonESPN&&(e.controlBar.removeChild(e.controlBar.socialButtonESPN),delete e.controlBar.socialButtonESPN,e.socialOverlayESPN&&(e.removeChild(e.socialOverlayESPN),delete e.socialOverlayESPN));var c=e.controlBar.children().map(function(a){return a.name().toUpperCase()}).indexOf("CustomControlSpacer".toUpperCase())+1;e.controlBar.socialButtonESPN=e.controlBar.addChild("socialButtonESPN",b,c),e.socialOverlayESPN=e.addChild("socialOverlayESPN",b),e.controlBar.socialButtonESPN.el().setAttribute("tabindex",0)}(a)}a.exports=d},function(a,b,c){"use strict";var d=videojs.getComponent("Button"),e=videojs.extend(d,{constructor:function(a,b){a.socialButtonESPN&&a.controlBar.removeChild(a.socialButtonESPN),d.call(this,a,b),this.on("touchstart",function(b){b.preventDefault(),a.socialOverlayESPN.show(),a.addClass("vjs-share-open").removeClass("vjs-controls-disabled")}),this.on("click",function(){a.socialOverlayESPN.show(),a.addClass("vjs-share-open").removeClass("vjs-controls-disabled")})},createEl:function(){return d.prototype.createEl.call(this,"button",{className:"vjs-share-control vjs-control vjs-icon-share vjs-button",innerHTML:'<div class="vjs-control-content"><span class="vjs-control-text">'+this.player().localize("Share")+"</span></div>"},{"aria-live":"polite"})}});a.exports=e},function(a,b,c){"use strict";var d=videojs.getComponent("Component"),e=videojs.extend(d,{constructor:function(a,b){a.socialOverlayESPN&&a.removeChild(a.socialOverlayESPN),void 0===b.pauseOnOpen&&(b.pauseOnOpen=!0),void 0===b.showOffset&&(b.showOffset=!0),a.mediainfo.live&&(b.showOffset=!1),d.call(this,a,b),this._bindServiceButtons(b.services),this.directLinkTextBox=this.el().querySelector("#direct-link-textbox"),this.directLinkCopy=this.el().querySelector("#direct-link-copy"),this.directLinkCopyIcon=this.el().querySelector("#directLink"),this.offsetContainer=this.el().querySelector("#start-offset-container"),this.offsetTextBox=this.el().querySelector("#start-offset-textbox"),this.offsetCheckBox=this.el().querySelector("#start-offset-checkbox"),this.embedCodeTextBox=this.el().querySelector("#embed-code-textbox"),this.embedCodeCopy=this.el().querySelector("#embed-code-copy"),this.embedCodeCopyIcon=this.el().querySelector("#embedLink"),this.socialLinksInputContainer=this.el().querySelector(".vjs-social-links-input-container"),this.socialLinksInputLabel=this.el().querySelector("#social-links-input-label"),this.socialLinksTextBox=this.el().querySelector("#social-links-textbox"),!1===document.queryCommandSupported("copy")&&Array.prototype.forEach.call(this.el().querySelectorAll(".social-copy-link"),function(a){a.parentNode.removeChild(a)});var c=this;Array.prototype.forEach.call(this.el().querySelectorAll("svg"),function(a){a.addEventListener("click",function(a){var b=a.target;"copy-svg"===b.getAttribute("data-behavior")&&c._handleCopy(b)})}),this.on("keydown",function(b){"none"!==a.socialOverlayESPN.el().display&&27===b.keyCode&&(a.socialOverlayESPN.hide(),a.removeClass("vjs-share-open"))}),this.on("change",function(a){a.target===this.offsetTextBox&&(this.offsetTextBox.value=this._cleanupTimeString(this.offsetTextBox.value),this.directLinkTextBox.value=this._getDirectLinkWithTime("1"===this.offsetCheckBox.value),this._resetDirectLinkState())}),this.on("click",function(b){var c=b.target,d=b.target.getAttribute("data-behavior");-1!==(c.className&&"string"==typeof c.className?c.className:"").indexOf("vjs-social-cancel")?(a.socialOverlayESPN.hide(),a.removeClass("vjs-share-open")):"copy"===d?(b.preventDefault(),this._handleCopy(c)):c===this.offsetCheckBox?(c.value="0"===c.value?"1":"0",this.updateState(),this._resetDirectLinkState()):"default"===d&&(this._resetEmbedCodeState(),this._resetDirectLinkState(),this.socialLinksInputContainer.className=this.socialLinksInputContainer.className.replace("social-input-container-shown",""))})},createEl:function(){var a=this.player(),b=this.options_;return d.prototype.createEl.call(this,"div",{className:"vjs-social-overlay vjs-modal-dialog vjs-hidden",tabindex:-1,innerHTML:'<div class="vjs-social-container" tabindex="0"><button class="vjs-close-button vjs-control vjs-icon-cancel vjs-button vjs-social-cancel"><span class="vjs-control-text" aria-label="'+a.localize("Close button")+'">'+a.localize("Close")+'</span></button><div class="vjs-modal-dialog-content" role="document"><form class="social-form"><div class="vjs-social-share-links">'+this._addSocialButtons(b.services)+'<div class="vjs-social-links-input-container"><label id="social-links-input-label" class="vjs-social-label-text" for="social-links-textbox">'+a.localize("URL")+'</label><input id="social-links-textbox" class="social-links-textbox" type="text" tabindex="10" readonly="true" value=""></div></div><div class="vjs-social-direct-link-container vjs-social-direct-link" aria-label="Read Only: Direct Link To Content"><div class="direct-link-header-container"><label class="vjs-social-label-text" for="direct-link-textbox">'+a.localize("URL")+'</label><span id="start-offset-container"><input type="checkbox" id="start-offset-checkbox" value="0"><label for="start-offset-checkbox">'+a.localize("Start at")+'</label><input id="start-offset-textbox" class="start-offset-textbox" type="text" title="The offset must be specified using the following pattern: hh:mm:ss" placeholder="hh:mm:ss" maxlength="10" value="00:00:00"></span><a data-behavior="copy" href="#" id="direct-link-copy" class="social-copy-link">'+a.localize("Copy")+'</a></div><input id="direct-link-textbox" class="direct-link-textbox has-link-icon" type="text" tabindex="8" readonly="true" value=""></div><div class="vjs-social-embed-container vjs-social-embed-code" aria-label="Read Only: Embed Code" style="'+(b.syndicatable?"":"display: none;")+'"><div class="direct-link-header-container"><label for="embed-code-textbox" class="vjs-social-label vjs-social-label-text">'+a.localize("Embed Code")+'</label><a data-behavior="copy" href="#" id="embed-code-copy" class="social-copy-link">'+a.localize("Copy")+'</a></div><input id="embed-code-textbox" class="embed-code-textbox has-link-icon" type="text" tabindex="10" readonly="true" value=""></div></form></div></div>'},{"aria-role":"dialog","aria-label":a.localize("Sharing Dialog")})},clearState:function(){this.offsetCheckBox.value="0",this.offsetCheckBox.checked=!1,this._resetEmbedCodeState(),this._resetDirectLinkState(),this.directLinkTextBox.value=this._getDirectLinkWithTime(!1)},updateState:function(){var a=this.player(),b=this.options_;b.showOffset||(this.offsetContainer.style.display="none");var c="1"===this.offsetCheckBox.value;c?this.offsetTextBox.className+=" offset-active":this.offsetTextBox.className=this.offsetTextBox.className.replace(/ offset-active/,"");var d=a.ads&&"ad-playback"!==a.ads.state?this._formatSeconds(a.currentTime()):"00:00";this.offsetTextBox.value=d,b.syndicatable&&(this.embedCodeTextBox.value=this._getEmbedCode()),this.directLinkTextBox.value=this._getDirectLinkWithTime(c),this._bindServiceButtons(b.services)},hide:function(){d.prototype.hide.call(this);var a=this.player();a.trigger("socialclosed"),a.controls(!0),this.clearState(),this.previouslyPlaying&&setTimeout(function(){a.play()}.bind(this),0),a.controlBar.socialButtonESPN.el().focus()},show:function(){d.prototype.show.call(this);var a=this.player();a.trigger("socialopened"),this.updateState(),a.controls(!1),this.options_.pauseOnOpen&&(a.paused()?this.previouslyPlaying=!1:(this.previouslyPlaying=!0,a.pause())),this.el().querySelector(".vjs-social-share-links a:first-child").focus()}});e.prototype._getMailToLink=function(){var a=this.options_,b=a.mailToLink,c=this._getDirectLinkWithTime(!1),d=this.player().localize("Check out this video on ESPN")
;return b=b.replace("{{subject}}",encodeURIComponent(a.title)).replace("{{body}}",d+": "+encodeURIComponent(c))},e.prototype._resetEmbedCodeState=function(){var a=this.player();this.embedCodeCopy.className=this.embedCodeCopy.className.replace(/ copied/,""),this.embedCodeCopyIcon&&(this.embedCodeCopyIcon.parentNode.className=this.embedCodeCopyIcon.parentNode.className.replace(/ copied/,"")),this.embedCodeCopy.textContent=a.localize("Copy")},e.prototype._resetDirectLinkState=function(){var a=this.player();this.directLinkCopy.className=this.directLinkCopy.className.replace(/ copied/,""),this.directLinkCopyIcon&&(this.directLinkCopyIcon.parentNode.className=this.directLinkCopyIcon.parentNode.className.replace(/ copied/,"")),this.directLinkCopy.textContent=a.localize("Copy")},e.prototype._setSocialLinksInput=function(a){this.socialLinksTextBox.value=a,this.socialLinksInputContainer.className+=" social-input-container-shown",this.socialLinksTextBox.select()},e.prototype._handleCopy=function(a){var b=a===this.embedCodeCopyIcon,c=a===this.embedCodeCopy,d=a===this.directLinkCopyIcon,e=a===this.directLinkCopy,f=this.player();this._resetEmbedCodeState(),this._resetDirectLinkState(),this.socialLinksInputContainer.className=this.socialLinksInputContainer.className.replace("social-input-container-hidden",""),this.socialLinksInputContainer.className=this.socialLinksInputContainer.className.replace("social-input-container-shown",""),e?this.directLinkTextBox.select():c&&this.embedCodeTextBox.select(),d||e?this._setSocialLinksInput(this.directLinkTextBox.value):(b||c)&&this._setSocialLinksInput(this.embedCodeTextBox.value),this.socialLinksInputLabel.textContent=b||c?this.player().localize("Embed Code"):this.player().localize("URL");try{document.execCommand("copy")&&(c||b?(this.embedCodeCopy.className+=" copied",this.embedCodeCopy.textContent=-1!==this.embedCodeCopy.className.indexOf("copied")?f.localize("Copied"):f.localize("Copy"),this.embedCodeCopyIcon&&(this.embedCodeCopyIcon.parentNode.className+=" copied")):(e||d)&&(this.directLinkCopy.className+=" copied",this.directLinkCopy.textContent=-1!==this.directLinkCopy.className.indexOf("copied")?f.localize("Copied"):f.localize("Copy"),this.directLinkCopyIcon&&(this.directLinkCopyIcon.parentNode.className+=" copied")))}catch(a){console.error("Oops, unable to copy",a)}},e.prototype._bindServiceButtons=function(a){var b,c,d,e,f,g=this.options_,h=this.player().poster();c=encodeURIComponent(this._getUrl()),d=encodeURIComponent(this._getTitle()),e=encodeURIComponent(g.description),h&&(f=encodeURIComponent(h));for(b in a)!0===a[b]&&this._bindServiceButton(b,c,d,e,f)},e.prototype._bindServiceButton=function(a,b,c,d,e){switch(a){case"facebook":this._attachServiceButtonHandler(".vjs-icon-facebook","https://www.facebook.com/sharer/sharer.php?u={URL}&title={TITLE}".replace("{URL}",b).replace("{TITLE}",c));break;case"google":this._attachServiceButtonHandler(".vjs-icon-gplus","https://plus.google.com/share?url={URL}".replace("{URL}",b));break;case"twitter":this._attachServiceButtonHandler(".vjs-icon-twitter","https://twitter.com/intent/tweet?original_referer=https%3A%2F%2Fabout.twitter.com%2Fresources%2Fbuttons&text={TITLE}&tw_p=tweetbutton&url={URL}".replace("{URL}",b).replace("{TITLE}",c));break;case"tumblr":this._attachServiceButtonHandler(".vjs-icon-tumblr","http://www.tumblr.com/share?v=3&u={URL}&t={TITLE}".replace("{URL}",b).replace("{TITLE}",c));break;case"pinterest":this._attachServiceButtonHandler(".vjs-icon-pinterest","https://pinterest.com/pin/create/button/?url={URL}{POSTER}&description={TITLE}&is_video=true".replace("{URL}",b).replace("{TITLE}",c).replace("{POSTER}",e?"&media="+e:""));break;case"linkedin":this._attachServiceButtonHandler(".vjs-icon-linkedin","https://www.linkedin.com/shareArticle?mini=true&url={URL}&title={TITLE}&summary={DESCRIPTION}&source=Classic".replace("{URL}",b).replace("{TITLE}",c).replace("{DESCRIPTION}",d));break;case"email":this._attachServiceButtonHandler(".vjs-icon-email",this._getMailToLink());break;case"directlink":this._attachServiceButtonHandler(".vjs-icon-directlink");break;case"embed":this._attachServiceButtonHandler(".vjs-icon-embed");break;default:throw new Error("An unsupported social service was specified.")}},e.prototype._handleServiceButtonClick=function(a){var b=a.target.getAttribute("data-behavior");"show-email"!==b&&a.preventDefault(),("default"===b||"twitter"===b&&void 0===window.twttr)&&window.open(a.target.href,"_blank","width=600, height=400, top=100, left=100, titlebar=yes, modal=yes, resizable=yes, toolbar=no, status=1, location=no, menubar=no, centerscreen=yes")},e.prototype._getEmbedCode=function(){return this.options_.embedCode},e.prototype._getUrl=function(){var a=this.options_;return a.url?a.url:window.parent!=window?document.referrer:window.location.href},e.prototype._getDirectLinkWithTime=function(a){var b,c=this.player(),d=this._getUrl();if(a&&(b=this.offsetTextBox.value),b){this._deFormatSeconds(b)>=c.duration()&&(this.offsetTextBox.value=b=this._formatSeconds(c.currentTime())||"00:00");for(var e=b.split(":"),f="",g="",h=0,i=e.length;h<i;h++){switch(h){case 0:g="s";break;case 1:g="m";break;case 2:g="h"}f=e.pop()+g+f}d=d+(-1!==d.indexOf("?")?"&":"?")+"t="+f}return d},e.prototype._getTitle=function(){var a,b=this.options_,c=b.title;return c||(a=this.player().options_,a["data-media"]&&a["data-media"].title&&(c=a["data-media"].title)),c||""},e.prototype._attachServiceButtonHandler=function(a,b){var c=this.el().querySelector(a);c&&(c.player=this,c.href=b||"#",c.removeEventListener("touchend",this._handleServiceButtonClick,!1),c.addEventListener("touchend",this._handleServiceButtonClick,!1),c.removeEventListener("click",this._handleServiceButtonClick,!1),c.addEventListener("click",this._handleServiceButtonClick,!1))},e.prototype._addSocialButtons=function(a){var b,c;b="";for(c in a)!0===a[c]&&(b+=this._addServiceButton(c));return b},e.prototype._addServiceButton=function(a){var b=this.player(),c="";switch(a){case"facebook":c='<a data-behavior="default" class="vjs-social-share-link vjs-icon-facebook" aria-role="link" aria-label="Share on Facebook" tabindex="1" title="Facebook" target="_blank"><span class="vjs-control-text">Facebook</span></a>';break;case"google":c='<a data-behavior="default" class="vjs-social-share-link vjs-icon-gplus" aria-role="link" aria-label="Share on Google Plus" tabindex="2" title="Google+" target="_blank"><span class="vjs-control-text">Google+</span></a>';break;case"twitter":c='<a data-behavior="twitter" class="vjs-social-share-link vjs-icon-twitter" aria-role="link" aria-label="Share on Twitter" tabindex="3" title="Twitter" target="_blank"><span class="vjs-control-text">Twitter</span></a>';break;case"tumblr":c='<a data-behavior="default" class="vjs-social-share-link vjs-icon-tumblr" aria-role="link" aria-label="Share on Tumblr" tabindex="4" title="Tumblr" target="_blank"><span class="vjs-control-text">tumblr</span></a>';break;case"pinterest":c='<a data-behavior="default" class="vjs-social-share-link vjs-icon-pinterest" aria-role="link" aria-label="Share on Pinterest" tabindex="5" title="Pinterest" target="_blank"><span class="vjs-control-text">Pinterest</span></a>';break;case"linkedin":c='<a data-behavior="default" class="vjs-social-share-link vjs-icon-linkedin" aria-role="link" aria-label="Share on LinkedIn" tabindex="6" title="LinkedIn" target="_blank"><span class="vjs-control-text">LinkedIn</span></a>';break;case"email":c='<a data-behavior="show-email" class="vjs-social-share-link vjs-icon-email" aria-role="link" aria-label="Share via Email" tabindex="7" title="Email"><span class="vjs-control-text">'+b.localize("Email")+"</span></a>";break;case"directlink":c='<a class="vjs-social-share-link vjs-icon-directlink" aria-role="link" aria-label="Direct link" tabindex="8" title="Direct Link"><svg data-behavior="copy-svg" id="directLink" x="0px" y="0px" viewBox="119.1 223.8 356.4 359.4" enable-background="new 119.1 223.8 356.4 359.4" xml:space="preserve"><path fill="#FFFFFF" d="M290.9,310.1c-10.4,10.4-14.9,22.3-14.9,35.7c0,13.4,4.5,26.8,13.4,37.2l17.9-17.9 c-4.5-6-7.4-11.9-7.4-19.3c0-7.4,3-13.4,7.4-19.3l69.9-69.9c6-6,11.9-7.4,19.3-7.4s14.9,3,19.3,7.4l26.8,26.8 c6,6,7.4,11.9,7.4,19.3c0,7.4-3,14.9-7.4,19.3l-69.9,69.9c-6,6-11.9,7.4-19.3,7.4c-7.4,0-13.4-3-19.3-7.4l-16.4,19.3 c10.4,8.9,22.3,13.4,37.2,13.4c13.4,0,26.8-6,35.7-14.9l69.9-69.9c10.4-10.4,14.9-22.3,14.9-37.2c0-14.9-6-26.8-14.9-37.2 l-26.8-26.8c-10.4-10.4-22.3-14.9-37.2-14.9c-14.9,0-26.8,4.5-37.2,14.9L290.9,310.1z"/><path fill="#FFFFFF" d="M243.3,440.3c-4.5,4.5-6,11.9,0,17.9c4.5,4.5,13.4,4.5,17.9,0l91.5-91.5c4.5-4.5,4.5-13.4,0-17.9 c-6-6-13.4-4.5-17.9,0L243.3,440.3z"/><path fill="#FFFFFF" d="M133.9,467.1c-10.4,10.4-14.9,22.3-14.9,37.2s4.5,26.8,14.9,37.2l26.8,26.8 c10.4,10.4,22.3,14.9,37.2,14.9s26.8-6,37.2-14.9l69.9-69.9c10.4-10.4,14.9-22.3,14.9-35.7s-4.5-26.8-13.4-37.2l-19.3,16.4 c6,6,7.4,11.9,7.4,19.3c0,7.4-3,13.4-7.4,19.3l-69.9,69.9c-6,6-11.9,7.4-19.3,7.4c-7.4,0-14.9-3-19.3-7.4l-26.8-26.8 c-6-4.5-7.4-11.9-7.4-19.3c0-7.4,3-14.9,7.4-19.3l69.9-69.9c6-6,11.9-7.4,19.3-7.4c7.4,0,13.4,3,19.3,7.4l17.9-17.9 c-10.4-10.4-22.3-14.9-37.2-13.4c-13.4,0-26.8,6-35.7,14.9L133.9,467.1z"/></svg><span class="vjs-control-text">Copy Link</span></a>';break;case"embed":c='<a class="vjs-social-share-link vjs-icon-embed" aria-role="link" aria-label="Embed link" tabindex="9" title="Embed"><svg data-behavior="copy-svg" id="embedLink" x="0px" y="0px" viewBox="119.1 293 357.2 256" enable-background="new 119.1 293 357.2 256" xml:space="preserve"><path fill="#FFFFFF" d="M476.2,423.2l-81.1,81.1l-9.7-9.7l70.7-71.4l-70.7-70.7l9.7-9.7L476.2,423.2z"/><polygon fill="#FFFFFF" points="261.9,548.9 249.3,546 326.7,293 339.3,295.2  "/><path fill="#FFFFFF" d="M119.1,423.2l81.1-80.4l9.7,9.7l-70.7,70.7l70.7,71.4l-9.7,9.7L119.1,423.2z"/></svg></span><span class="vjs-control-text">Copy Embed Link</span></a>';break;default:throw new Error("An unsupported social service was specified.")}return c},e.prototype._zeroPadNumber=function(a){return 1===String(a).length?"0"+a:a},e.prototype._cleanupTimeString=function(a){var b=a.split(":");if(1===b.length)return this._formatSeconds(b[0]);for(var c=0,d=b.length;c<d;c++)b[c]=isNaN(parseInt(b[c]))?"00":this._zeroPadNumber(parseInt(b[c]));return b.join(":")},e.prototype._formatSeconds=function(a){var b=Number(a);if(isNaN(b))return"00:00";var c=Math.floor(b/3600),d=Math.floor(b%3600/60),e=Math.floor(b%3600%60);return c=c>0?(c<10?"0"+c:c)+":":"",d=(d>0?d<10?"0"+d:d:"00")+":",e=e<10?"0"+e:e,c+d+e},e.prototype._deFormatSeconds=function(a){var b=a.split(":");if(1===b.length)return isNaN(1*b[0])?0:1*b[0];var c=1*b.pop(),d=60*(b.pop()||0);return 3600*(b.pop()||0)+d+c},a.exports=e},function(a,b,c){"use strict";function d(){var a,b,c;a=1,b=!1,c=function(c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;h=this,g=c||{},q=g.namespace||"espn",s=q+"-volume",j=q+"-mute",null!==g.value&&void 0!==g.value?(a=g.value,localStorage.setItem(s,a)):null!==(p=localStorage.getItem(s))&&(a=p),null!==g.muted&&void 0!==g.muted?(b=!0===g.muted||"true"===g.muted,localStorage.setItem(j,b)):null!==(o=localStorage.getItem(j))&&(b="true"===o),i=function(){h.removeClass("evp-volume-menu-active"),h.addClass("evp-volume-menu-inactive")},k=function(){d=h.childNameIndex_.adControlBar,d&&d.volumeMenuButton&&d.volumeMenuButton.on("mouseout",i),f=h.FreeWheelPlugin,"Flash"===f.tech&&f.adPlayer.on("volumechange",l)},l=function(){"ad-playback"===h.ads.state&&(f.adPlayer.muted()||(a=f.adPlayer.volume(),localStorage.setItem(s,a)),b=f.adPlayer.muted(),localStorage.setItem(j,b))},n=function(){h.muted()&&0===h.volume()||(a=h.volume(),localStorage.setItem(s,a)),b=h.muted(),localStorage.setItem(j,b)},m=function(){h.volume(a),h.muted(b)},h.ready(function(){r=h.controlBar.volumeMenuButton,r.on("mouseout",i)}),e=function(){h.off("dispose",e),h.off("ready",m),h.off("volumechange",n),r&&r.off("mouseout",i),d&&d.volumeMenuButton&&d.volumeMenuButton.off("mouseout",i)},h.on("dispose",e),h.on("ready",m),h.on("volumechange",n),h.one("ads-request",k)},videojs.plugin("espnVolumeMenuButton",c)}a.exports={init:d}},function(a,b,c){"use strict";function d(a){return"[object HTMLDivElement]"===Object.prototype.toString.call(a)}function e(a,b,c,d){var e=b,g=document.createElement("div");if(g.className="evp-endcard",e){g.innerHTML='<div class="evp-endcard-wrap"><h2>'+a.localize("Up Next")+'</h2><span class="evp-endcard-next-title">'+e.headline+"</span></div>";var h=document.createElement("div");h.className="evp-endcard-next-thumbnail";var i="evp-endcard-timer-circle_"+a.id(),j=document.createElement("span");j.className="evp-endcard-timeout-button",j.innerHTML='<svg width="54" height="54" class="evp-endcard-timer"><circle id="'+i+'" class="start-timer" r="23.57" cy="27" cx="27" stroke-width="4" stroke="#ffffff" fill="none"/></svg>',j.addEventListener("click",function(){k?c():d(!0)});var l=1,m=r;k=setInterval(function(){var a=document.getElementById(i);a&&(a.style.strokeDashoffset=n-l*(n/r)),m-=1,m<=0&&(f(),d(!1)),l++},1e3);var o=document.createElement("img");o.src=e.poster,h.appendChild(j),h.appendChild(o),g.appendChild(h)}return g}function f(){k&&(clearInterval(k),k=null)}function g(a){function b(a,b,c){var d=a.id;(new l).getRelated(d,{country:b},function(b,d){if(b||!d||0===d.length)return void c(a);if(h=(d||[]).filter(function(a){return-1===q.indexOf(a.id)&&-1===q.indexOf(a.mediaId)}),h=h.length>0?h:d,n)try{h=h.filter(n)}catch(a){console.error(a)}var e=h.shift();c(e||[])})}var c,g=this,h=a&&a.playlist||[],k=a&&a.timeoutHandler||function(){},n=a&&a.filter;i=a&&a.content,j=a&&a.country,r=a&&a.timeout||m,d(i)&&(c=i);var s=function(){g.play()},t=function(){f(),g.removeClass("evp-endcard-timeout-active"),g.addClass("evp-endcard-timeout-stopped")},u=function(){f(),c&&g.el().removeChild(c),g.removeClass("evp-endcard-open"),g.removeClass("evp-endcard-timeout-active"),g.removeClass("evp-endcard-timeout-stopped"),c=null},v=function(){u()},w=function(a){g.paused()?(c=e(g,a,t,function(b){k(a,b)}),g.el().appendChild(c),g.addClass("evp-endcard-open"),g.addClass("evp-endcard-timeout-active")):u()},x=function(){if(!g.ads.state||"content-playback"===g.ads.state){if(c)g.el().appendChild(c),g.addClass("evp-endcard-open");else if(i)if(q.push(i.id),h&&h.length>0){var a=h.shift();a&&a.id&&a.headline&&a.poster?w(a):b(i,j,w)}else b(i,j,w);g.one("contentupdate",s),g.one("play",v),g.one("socialopened",t)}},y=function a(){f(),g.off("dispose",a),g.off("switch",a),g.off("ended",x),g.off("play",v),g.off("contentupdate",s),g.off("socialopened",t),q=[],i=null,o=!1,p=!0};g.one("dispose",y),g.one("switch",y),p&&(p=!1,g.on("ended",x))}function h(){videojs.plugin("endcard",g),o=!0}var i,j,k,l=c(8),m=5,n="180",o=!1,p=!0,q=[],r=m;a.exports={init:h}},function(a,b,c){"use strict";function d(){var a=this,b=a.addChild("stateFeedbackButton");a.stateFeedbackButton=b,a.on("pause",function(){}),a.on("play",function(){})}function e(){var a=videojs.getComponent("Component"),b=videojs.getComponent("Button"),c=videojs.extend(b,{constructor:function(a,c){b.call(this,a,c)},createEl:function(){return a.prototype.createEl.call(this,"div",{className:"espn-player-state-feedback-button",innerHTML:""})}});a.registerComponent("StateFeedbackButton",c),videojs.plugin("stateFeedbackButton",d),g=!0}function f(a){g||e(),a.stateFeedbackButton()}var g=!1;a.exports={init:e,plugin:f}},function(a,b,c){"use strict";function d(){for(var a,b=this,c=b.controlBar.progressControl,d=c.el().childNodes,e=0;e<d.length;++e)if("vjs-thumbnail-holder"===d[e].className){a=d[e];break}if(a){var f=b.controlBar.progressControl.seekBar.mouseTimeDisplay,g=document.createElement("span");g.className="vjs-thumbnail-time-tooltip",a.appendChild(g);var h=function(){var a=f.el().getAttribute("data-current-time");g.innerHTML=a};c.on("mousemove",h),c.on("touchmove",h),f.addClass("vjs-time-tooltip-hidden")}}function e(a){videojs&&videojs.plugin("thumbnailTime",d),a.thumbnailTime()}a.exports={plugin:e}},function(a,b,c){"use strict";var d,e=c(2),f=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],g=f[0],h={},i={supportsFullScreen:function(a){return!("function"!=typeof a.webkitEnterFullScreen||!e.IS_ANDROID&&/Chrome|Mac OS X 10.5/.test(e.USER_AGENT))},getApi:function(){for(var a=0;a<f.length;a++)if(f[a][1]in document){d=f[a];break}if(d)for(var b=0;b<d.length;b++)h[g[b]]=d[b];return h}};a.exports=i},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b,c){d(this,a),this.player=b,this.options=c,this.options.s_omni&&this.options.s_omni.visitor&&(this.options.s_omni.visitor.getAnalyticsVisitorID&&"function"==typeof this.options.s_omni.visitor.getAnalyticsVisitorID&&(this.aid=this.options.s_omni.visitor.getAnalyticsVisitorID()),this.options.s_omni.visitor.getMarketingCloudVisitorID()&&(this.mid=this.options.s_omni.visitor.getMarketingCloudVisitorID())),b.on("play",this.onPlay.bind(this)),b.on("ended",this.onEnded.bind(this))}return e(a,[{key:"fireTrackingBeacon",value:function(a){var b,c,d,e;this.img||(this.img=new Image,this.img.id="html5playerAnalytics",document.body.appendChild(this.img)),b=this.options.cmsId||this.player.mediainfo.name,d={pe:"media",c3:b,v2:b,events:a,v20:this.options.playerLocation+":"+this.options.showCode,c1:this.options.site},this.aid&&(d.aid=this.aid),this.mid&&(d.mid=this.mid),e=[];for(c in d)e.push(c+"="+encodeURIComponent(d[c]));this.img.src=(this.options.secure?"https":"http")+"://"+this.options.trackingServer+"/b/ss/"+this.options.reportSuites+"/5.4/REDIR/"+Date.now()+"?"+e.join("&")}},{key:"onPlay",value:function(){var a;a=this.player.duration(),this.fireTrackingBeacon("event1,event14="+(a&&a.toFixed(2)))}},{key:"onEnded",value:function(){this.fireTrackingBeacon("event11")}}]),a}();a.exports=f},function(a,b,c){"use strict";a.exports={BASE_URL:"https://watch.auth.api.espn.com/video/auth",API_KEY:"5p8m6dw513q716wt2os04mec3"}},function(a,b,c){"use strict";a.exports={mailToLink:"mailto:?subject={{subject}}&body={{body}}",sendMailUrl:"http://proxy.espn.com/videohub/player/sendMail?id={{id}}&clipName={{clipName}}&youremail={{youremail}}&friendemail={{friendemail}}&message={{message}}&videoImage={{videoImage}}",embedCode:'<iframe width="640" height="360" src="http://www.espn.com/core/video/iframe?id={{ID}}&endcard=false" allowfullscreen frameborder="0"></iframe>',embedUrlTemplate:"//players.brightcove.net/{{account_id}}/{{player_id}}_{{embed_id}}/index.html{{video_id}}{{offset}}",deeplinking:!0,services:{facebook:!0,google:!1,twitter:!0,tumblr:!1,pinterest:!1,linkedin:!1,email:!0,directlink:!0,embed:!0}}},function(a,b,c){"use strict";function d(a,b){if(null===b)return a}var e,f,g;g=c(0),f=c(50),e=function(){function a(a,b,c){var e=g({},f,d);c&&g(e,c,d),e.id=e.id||(a.site?a.site+":"+a.advertisingId:a.id),e.title=a.headline||a.pageTitle,e.description=a.description,e.url=e.url&&e.url.replace(/{{ID}}/g,a.id)||e.url||a.web,e.poster=a.poster,e.syndicatable=!!a.syndicatable,e.embedCode=e.embedCode&&e.embedCode.replace(/{{ID}}/g,a.id),e.pauseOnOpen=!0,e.showOffset=!0,e.services&&e.services.embed&&(e.services.embed=e.syndicatable),"live"===a.type&&(e.pauseOnOpen=!1,e.showOffset=!1),b(e)}return a}(),a.exports=e},function(a,b,c){"use strict";function d(a,b){if(null===b)return a}var e,f,g,h,i;i=c(3),e=c(8),g={baseURL:"https://streams.adobeprimetime.com/v1/"},h=c(0),f=function(){function a(a,b){var c;h(g,b,d),this.accountId=g.accountId,this.baseURL=g.baseURL,this.player=a,c=new e,c.getProvidersByClient("watchespn-flash",function(a){return function(b,c){if(a.mvpd=c.filter(function(a){return a.abbreviation===g.mvpd})[0],a.accountId&&a.mvpd&&a.mvpd.streamLimiting&&a.mvpd.abbreviation)return a.heartbeat=a.mvpd.streamLimiting.heartbeat,a.statusCheck=a.mvpd.streamLimiting.statusCheck,a.streamLimit=a.mvpd.streamLimiting.streamLimit||3,a.statusCheck.url=""+a.baseURL+encodeURIComponent(a.mvpd.streamLimiting.context)+"/"+encodeURIComponent(a.mvpd.abbreviation)+"/accounts/"+encodeURIComponent(a.accountId)+"/streams",i.post(a.statusCheck.url).query({initiator:"ESPN",programmer:"ESPN"}).set("Accept","application/json").end(function(b,c){if(a.streamId=c.body.streamId,a.streamStart=c.body.streamStart,a.heartbeat.url=c.body._links&&c.body._links.heartbeat&&c.body._links.heartbeat.href,a.heartbeat.url)return a.heartbeat.timeout=setTimeout(a.sendHeartbeat.bind(a),1e3*a.heartbeat.initialDelay),void(a.statusCheck.timeout=setTimeout(a.sendStatusCheck.bind(a),1e3*a.statusCheck.initialDelay))})}}(this)),this.player.player().on("error",function(){var a=this.player.player().error();this.heartbeat.url&&-1===["STREAM_LIMITED","STREAM_LIMIT_ERROR"].indexOf(a.message)&&this.terminate()}.bind(this)),this.player.player().one("dispose",function(){this.heartbeat.url&&this.terminate()}.bind(this))}return a.prototype.accountId=void 0,a.prototype.mvpd={},a.prototype.heartbeat={},a.prototype.statusCheck={},a.prototype.streamLimit=3,a.prototype.streamId=null,a.prototype.streamStart=null,a.prototype.sendHeartbeat=function(){clearTimeout(this.heartbeat.timeout),this.heartbeat.timeout=setTimeout(function(a){return function(){return i.post(a.heartbeat.url.replace("{event}","alive")).end(function(b){return b&&a.handleError(),a.sendHeartbeat()})}}(this),1e3*this.heartbeat.interval)},a.prototype.sendStatusCheck=function(){clearTimeout(this.statusCheck.timeout),this.statusCheck.timeout=setTimeout(function(a){return function(){return i.get(a.statusCheck.url).query({programmer:"ESPN",status:"active"}).set("Accept","application/json").end(function(b,c){var d;return b&&a.handleError(),d=a.rankStreams(c.body._embedded&&c.body._embedded.streams),d>a.streamLimit?(a.onLimitReached(a.accountId),a.terminate()):a.sendStatusCheck()})}}(this),1e3*this.statusCheck.interval)},a.prototype.rankStreams=function(a){return a.reduce(function(a){return function(b,c){return c.streamStart>a.streamStart?b+1:b}}(this),1)},a.prototype.errorCount=0,a.prototype.handleError=function(){if(++this.errorCount>=3)return this.onError(this.accountId),this.terminate()},a.prototype.onLimitReached=function(a){console.warn("Stream limit reached: accountId: "+a),this.player.error("STREAM_LIMITED"),this.player.player().trigger("espn.streamlimiter.limitreached",{accountId:a})},a.prototype.onError=function(a){console.warn("Stream limit error: accountId: "+a),this.player.error("STREAM_LIMIT_ERROR"),this.player.player().trigger("espn.streamlimiter.error",{accountId:a})},a.prototype.terminate=function(){clearTimeout(this.heartbeat.timeout),clearTimeout(this.statusCheck.timeout),i.post(this.heartbeat.url.replace("{event}","stop")).end(),this.errorCount=0,this.heartbeat={},this.statusCheck={},this.streamId=null,this.streamStart=null},a}(),f.configure=function(a){return h(g,a,d),g},a.exports=f},function(a,b,c){"use strict";var d;d=function(){function a(a,b,c){var d,e,f,g,h,i,j;if(b){for(i={},g=Math.floor(c.duration()/10),e=0,f=b.split("/").pop(),h=b.replace(f,"chaptertn"),j=f.split("."),f=j[0],d="jpg";e<=g;)i[""+10*e]={src:h+"/"+f+"_"+ ++e+"."+d,width:"150px"};c.thumbnails(i)}}return a}(),a.exports=d},function(a,b,c){"use strict";a.exports={asset:"https://secure.espncdn.com/broadband/video/images/espn-watermark.png",url:"http://www.espn.com",position:"bottom-left",start:"play",end:"end"}},function(a,b,c){"use strict";function d(a,b){if(null===b)return a}var e,f,g;g=c(0),f=c(54),e=function(){function a(a,b){var c;b&&g(f,b,d),c='<a href="'+f.url+'" target="_blank" class="espn-watermark"> <img src="'+f.asset+'" /> </a>',a({content:c,align:f.position,start:f.start,end:f.end})}return a}(),a.exports=e},function(a,b,c){function d(a){if(a)return e(a)}function e(a){for(var b in d.prototype)a[b]=d.prototype[b];return a}a.exports=d,d.prototype.on=d.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(b),this},d.prototype.once=function(a,b){function c(){this.off(a,c),b.apply(this,arguments)}return c.fn=b,this.on(a,c),this},d.prototype.off=d.prototype.removeListener=d.prototype.removeAllListeners=d.prototype.removeEventListener=function(a,b){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var c=this._callbacks["$"+a];if(!c)return this;if(1==arguments.length)return delete this._callbacks["$"+a],this;for(var d,e=0;e<c.length;e++)if((d=c[e])===b||d.fn===b){c.splice(e,1);break}return this},d.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks["$"+a];if(c){c=c.slice(0);for(var d=0,e=c.length;d<e;++d)c[d].apply(this,b)}return this},d.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks["$"+a]||[]},d.prototype.hasListeners=function(a){return!!this.listeners(a).length}},function(a,b){var b=a.exports=function(a){a||(a={}),"string"==typeof a&&(a={cookie:a}),void 0===a.cookie&&(a.cookie="");var b={};return b.get=function(b){for(var c=a.cookie.split(/;\s*/),d=0;d<c.length;d++){var e=c[d].split("=");if(unescape(e[0])===b)return unescape(e[1])}},b.set=function(b,c,d){d||(d={});var e=escape(b)+"="+escape(c);return d.expires&&(e+="; expires="+d.expires),d.path&&(e+="; path="+escape(d.path)),d.domain&&(e+="; domain="+escape(d.domain)),d.secure&&(e+="; secure"),a.cookie=e,e},b};if("undefined"!=typeof document){var c=b(document);b.get=c.get,b.set=c.set}},function(a,b){function c(a,b){for(var c in b)a.setAttribute(c,b[c])}function d(a,b){a.onload=function(){this.onerror=this.onload=null,b(null,a)},a.onerror=function(){this.onerror=this.onload=null,b(new Error("Failed to load "+this.src),a)}}function e(a,b){a.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,b(null,a))}}a.exports=function(a,b,f){var g=document.head||document.getElementsByTagName("head")[0],h=document.createElement("script");"function"==typeof b&&(f=b,b={}),b=b||{},f=f||function(){},h.type=b.type||"text/javascript",h.charset=b.charset||"utf8",h.async=!("async"in b)||!!b.async,h.src=a,b.attrs&&c(h,b.attrs),b.text&&(h.text=""+b.text),("onload"in h?d:e)(h,f),h.onload||d(h,f),g.appendChild(h)}},function(a,b,c){(function(b){function c(a,b,c){function e(b){var c=p,d=q;return p=q=void 0,y=b,s=a.apply(d,c)}function f(a){return y=a,t=setTimeout(k,b),z?e(a):s}function i(a){var c=a-x,d=a-y,e=b-c;return A?v(e,r-d):e}function j(a){var c=a-x,d=a-y;return void 0===x||c>=b||c<0||A&&d>=r}function k(){var a=w();if(j(a))return l(a);t=setTimeout(k,i(a))}function l(a){return t=void 0,B&&p?e(a):(p=q=void 0,s)}function m(){void 0!==t&&clearTimeout(t),y=0,p=x=q=t=void 0}function n(){return void 0===t?s:l(w())}function o(){var a=w(),c=j(a);if(p=arguments,q=this,x=a,c){if(void 0===t)return f(x);if(A)return t=setTimeout(k,b),e(x)}return void 0===t&&(t=setTimeout(k,b)),s}var p,q,r,s,t,x,y=0,z=!1,A=!1,B=!0;if("function"!=typeof a)throw new TypeError(h);return b=g(b)||0,d(c)&&(z=!!c.leading,A="maxWait"in c,r=A?u(g(c.maxWait)||0,b):r,B="trailing"in c?!!c.trailing:B),o.cancel=m,o.flush=n,o}function d(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function e(a){return!!a&&"object"==typeof a}function f(a){return"symbol"==typeof a||e(a)&&t.call(a)==j}function g(a){if("number"==typeof a)return a;if(f(a))return i;if(d(a)){var b="function"==typeof a.valueOf?a.valueOf():a;a=d(b)?b+"":b}if("string"!=typeof a)return 0===a?a:+a;a=a.replace(k,"");var c=m.test(a);return c||n.test(a)?o(a.slice(2),c?2:8):l.test(a)?i:+a}var h="Expected a function",i=NaN,j="[object Symbol]",k=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,m=/^0b[01]+$/i,n=/^0o[0-7]+$/i,o=parseInt,p="object"==typeof b&&b&&b.Object===Object&&b,q="object"==typeof self&&self&&self.Object===Object&&self,r=p||q||Function("return this")(),s=Object.prototype,t=s.toString,u=Math.max,v=Math.min,w=function(){return r.Date.now()};a.exports=c}).call(b,c(7))},function(a,b,c){!function(a,b){a(function(){"use strict";function a(a,b){return null!=a&&null!=b&&a.toLowerCase()===b.toLowerCase()}function b(a,b){var c,d,e=a.length;if(!e||!b)return!1;for(c=b.toLowerCase(),d=0;d<e;++d)if(c===a[d].toLowerCase())return!0;return!1}function c(a){for(var b in a)g.call(a,b)&&(a[b]=new RegExp(a[b],"i"))}function d(a,b){this.ua=a||"",this._cache={},this.maxPhoneWidth=b||600}var e={};e.mobileDetectRules={phones:{iPhone:"\\biPhone\\b|\\biPod\\b",BlackBerry:"BlackBerry|\\bBB10\\b|rim[0-9]+",HTC:"HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\\bEVO\\b|T-Mobile G1|Z520m",Nexus:"Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile|Nexus 4|Nexus 5|Nexus 6",Dell:"Dell.*Streak|Dell.*Aero|Dell.*Venue|DELL.*Venue Pro|Dell Flash|Dell Smoke|Dell Mini 3iX|XCD28|XCD35|\\b001DL\\b|\\b101DL\\b|\\bGS01\\b",Motorola:"Motorola|DROIDX|DROID BIONIC|\\bDroid\\b.*Build|Android.*Xoom|HRI39|MOT-|A1260|A1680|A555|A853|A855|A953|A955|A956|Motorola.*ELECTRIFY|Motorola.*i1|i867|i940|MB200|MB300|MB501|MB502|MB508|MB511|MB520|MB525|MB526|MB611|MB612|MB632|MB810|MB855|MB860|MB861|MB865|MB870|ME501|ME502|ME511|ME525|ME600|ME632|ME722|ME811|ME860|ME863|ME865|MT620|MT710|MT716|MT720|MT810|MT870|MT917|Motorola.*TITANIUM|WX435|WX445|XT300|XT301|XT311|XT316|XT317|XT319|XT320|XT390|XT502|XT530|XT531|XT532|XT535|XT603|XT610|XT611|XT615|XT681|XT701|XT702|XT711|XT720|XT800|XT806|XT860|XT862|XT875|XT882|XT883|XT894|XT901|XT907|XT909|XT910|XT912|XT928|XT926|XT915|XT919|XT925|XT1021|\\bMoto E\\b",
Samsung:"\\bSamsung\\b|SM-G9250|GT-19300|SGH-I337|BGT-S5230|GT-B2100|GT-B2700|GT-B2710|GT-B3210|GT-B3310|GT-B3410|GT-B3730|GT-B3740|GT-B5510|GT-B5512|GT-B5722|GT-B6520|GT-B7300|GT-B7320|GT-B7330|GT-B7350|GT-B7510|GT-B7722|GT-B7800|GT-C3010|GT-C3011|GT-C3060|GT-C3200|GT-C3212|GT-C3212I|GT-C3262|GT-C3222|GT-C3300|GT-C3300K|GT-C3303|GT-C3303K|GT-C3310|GT-C3322|GT-C3330|GT-C3350|GT-C3500|GT-C3510|GT-C3530|GT-C3630|GT-C3780|GT-C5010|GT-C5212|GT-C6620|GT-C6625|GT-C6712|GT-E1050|GT-E1070|GT-E1075|GT-E1080|GT-E1081|GT-E1085|GT-E1087|GT-E1100|GT-E1107|GT-E1110|GT-E1120|GT-E1125|GT-E1130|GT-E1160|GT-E1170|GT-E1175|GT-E1180|GT-E1182|GT-E1200|GT-E1210|GT-E1225|GT-E1230|GT-E1390|GT-E2100|GT-E2120|GT-E2121|GT-E2152|GT-E2220|GT-E2222|GT-E2230|GT-E2232|GT-E2250|GT-E2370|GT-E2550|GT-E2652|GT-E3210|GT-E3213|GT-I5500|GT-I5503|GT-I5700|GT-I5800|GT-I5801|GT-I6410|GT-I6420|GT-I7110|GT-I7410|GT-I7500|GT-I8000|GT-I8150|GT-I8160|GT-I8190|GT-I8320|GT-I8330|GT-I8350|GT-I8530|GT-I8700|GT-I8703|GT-I8910|GT-I9000|GT-I9001|GT-I9003|GT-I9010|GT-I9020|GT-I9023|GT-I9070|GT-I9082|GT-I9100|GT-I9103|GT-I9220|GT-I9250|GT-I9300|GT-I9305|GT-I9500|GT-I9505|GT-M3510|GT-M5650|GT-M7500|GT-M7600|GT-M7603|GT-M8800|GT-M8910|GT-N7000|GT-S3110|GT-S3310|GT-S3350|GT-S3353|GT-S3370|GT-S3650|GT-S3653|GT-S3770|GT-S3850|GT-S5210|GT-S5220|GT-S5229|GT-S5230|GT-S5233|GT-S5250|GT-S5253|GT-S5260|GT-S5263|GT-S5270|GT-S5300|GT-S5330|GT-S5350|GT-S5360|GT-S5363|GT-S5369|GT-S5380|GT-S5380D|GT-S5560|GT-S5570|GT-S5600|GT-S5603|GT-S5610|GT-S5620|GT-S5660|GT-S5670|GT-S5690|GT-S5750|GT-S5780|GT-S5830|GT-S5839|GT-S6102|GT-S6500|GT-S7070|GT-S7200|GT-S7220|GT-S7230|GT-S7233|GT-S7250|GT-S7500|GT-S7530|GT-S7550|GT-S7562|GT-S7710|GT-S8000|GT-S8003|GT-S8500|GT-S8530|GT-S8600|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|SCH-I910|SCH-I920|SCH-I959|SCH-LC11|SCH-N150|SCH-N300|SCH-R100|SCH-R300|SCH-R351|SCH-R400|SCH-R410|SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|SGH-B100|SGH-B130|SGH-B200|SGH-B220|SGH-C100|SGH-C110|SGH-C120|SGH-C130|SGH-C140|SGH-C160|SGH-C170|SGH-C180|SGH-C200|SGH-C207|SGH-C210|SGH-C225|SGH-C230|SGH-C417|SGH-C450|SGH-D307|SGH-D347|SGH-D357|SGH-D407|SGH-D415|SGH-D780|SGH-D807|SGH-D980|SGH-E105|SGH-E200|SGH-E315|SGH-E316|SGH-E317|SGH-E335|SGH-E590|SGH-E635|SGH-E715|SGH-E890|SGH-F300|SGH-F480|SGH-I200|SGH-I300|SGH-I320|SGH-I550|SGH-I577|SGH-I600|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I700|SGH-I717|SGH-I727|SGH-i747M|SGH-I777|SGH-I780|SGH-I827|SGH-I847|SGH-I857|SGH-I896|SGH-I897|SGH-I900|SGH-I907|SGH-I917|SGH-I927|SGH-I937|SGH-I997|SGH-J150|SGH-J200|SGH-L170|SGH-L700|SGH-M110|SGH-M150|SGH-M200|SGH-N105|SGH-N500|SGH-N600|SGH-N620|SGH-N625|SGH-N700|SGH-N710|SGH-P107|SGH-P207|SGH-P300|SGH-P310|SGH-P520|SGH-P735|SGH-P777|SGH-Q105|SGH-R210|SGH-R220|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|SGH-T729|SGH-T739|SGH-T746|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T929|SGH-T939|SGH-T959|SGH-T989|SGH-U100|SGH-U200|SGH-U800|SGH-V205|SGH-V206|SGH-X100|SGH-X105|SGH-X120|SGH-X140|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-X600|SGH-X610|SGH-X620|SGH-X630|SGH-X700|SGH-X820|SGH-X890|SGH-Z130|SGH-Z150|SGH-Z170|SGH-ZX10|SGH-ZX20|SHW-M110|SPH-A120|SPH-A400|SPH-A420|SPH-A460|SPH-A500|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|SPH-M920|SPH-M930|SPH-N100|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100|SCH-i909|GT-N7100|GT-N7105|SCH-I535|SM-N900A|SGH-I317|SGH-T999L|GT-S5360B|GT-I8262|GT-S6802|GT-S6312|GT-S6310|GT-S5312|GT-S5310|GT-I9105|GT-I8510|GT-S6790N|SM-G7105|SM-N9005|GT-S5301|GT-I9295|GT-I9195|SM-C101|GT-S7392|GT-S7560|GT-B7610|GT-I5510|GT-S7582|GT-S7530E|GT-I8750|SM-G9006V|SM-G9008V|SM-G9009D|SM-G900A|SM-G900D|SM-G900F|SM-G900H|SM-G900I|SM-G900J|SM-G900K|SM-G900L|SM-G900M|SM-G900P|SM-G900R4|SM-G900S|SM-G900T|SM-G900V|SM-G900W8|SHV-E160K|SCH-P709|SCH-P729|SM-T2558|GT-I9205|SM-G9350|SM-J120F|SM-G920F|SM-G920V|SM-G930F|SM-N910C",LG:"\\bLG\\b;|LG[- ]?(C800|C900|E400|E610|E900|E-900|F160|F180K|F180L|F180S|730|855|L160|LS740|LS840|LS970|LU6200|MS690|MS695|MS770|MS840|MS870|MS910|P500|P700|P705|VM696|AS680|AS695|AX840|C729|E970|GS505|272|C395|E739BK|E960|L55C|L75C|LS696|LS860|P769BK|P350|P500|P509|P870|UN272|US730|VS840|VS950|LN272|LN510|LS670|LS855|LW690|MN270|MN510|P509|P769|P930|UN200|UN270|UN510|UN610|US670|US740|US760|UX265|UX840|VN271|VN530|VS660|VS700|VS740|VS750|VS910|VS920|VS930|VX9200|VX11000|AX840A|LW770|P506|P925|P999|E612|D955|D802|MS323)",Sony:"SonyST|SonyLT|SonyEricsson|SonyEricssonLT15iv|LT18i|E10i|LT28h|LT26w|SonyEricssonMT27i|C5303|C6902|C6903|C6906|C6943|D2533",Asus:"Asus.*Galaxy|PadFone.*Mobile",NokiaLumia:"Lumia [0-9]{3,4}",Micromax:"Micromax.*\\b(A210|A92|A88|A72|A111|A110Q|A115|A116|A110|A90S|A26|A51|A35|A54|A25|A27|A89|A68|A65|A57|A90)\\b",Palm:"PalmSource|Palm",Vertu:"Vertu|Vertu.*Ltd|Vertu.*Ascent|Vertu.*Ayxta|Vertu.*Constellation(F|Quest)?|Vertu.*Monika|Vertu.*Signature",Pantech:"PANTECH|IM-A850S|IM-A840S|IM-A830L|IM-A830K|IM-A830S|IM-A820L|IM-A810K|IM-A810S|IM-A800S|IM-T100K|IM-A725L|IM-A780L|IM-A775C|IM-A770K|IM-A760S|IM-A750K|IM-A740S|IM-A730S|IM-A720L|IM-A710K|IM-A690L|IM-A690S|IM-A650S|IM-A630K|IM-A600S|VEGA PTL21|PT003|P8010|ADR910L|P6030|P6020|P9070|P4100|P9060|P5000|CDM8992|TXT8045|ADR8995|IS11PT|P2030|P6010|P8000|PT002|IS06|CDM8999|P9050|PT001|TXT8040|P2020|P9020|P2000|P7040|P7000|C790",Fly:"IQ230|IQ444|IQ450|IQ440|IQ442|IQ441|IQ245|IQ256|IQ236|IQ255|IQ235|IQ245|IQ275|IQ240|IQ285|IQ280|IQ270|IQ260|IQ250",Wiko:"KITE 4G|HIGHWAY|GETAWAY|STAIRWAY|DARKSIDE|DARKFULL|DARKNIGHT|DARKMOON|SLIDE|WAX 4G|RAINBOW|BLOOM|SUNSET|GOA(?!nna)|LENNY|BARRY|IGGY|OZZY|CINK FIVE|CINK PEAX|CINK PEAX 2|CINK SLIM|CINK SLIM 2|CINK +|CINK KING|CINK PEAX|CINK SLIM|SUBLIM",iMobile:"i-mobile (IQ|i-STYLE|idea|ZAA|Hitz)",SimValley:"\\b(SP-80|XT-930|SX-340|XT-930|SX-310|SP-360|SP60|SPT-800|SP-120|SPT-800|SP-140|SPX-5|SPX-8|SP-100|SPX-8|SPX-12)\\b",Wolfgang:"AT-B24D|AT-AS50HD|AT-AS40W|AT-AS55HD|AT-AS45q2|AT-B26D|AT-AS50Q",Alcatel:"Alcatel",Nintendo:"Nintendo 3DS",Amoi:"Amoi",INQ:"INQ",GenericPhone:"Tapatalk|PDA;|SAGEM|\\bmmp\\b|pocket|\\bpsp\\b|symbian|Smartphone|smartfon|treo|up.browser|up.link|vodafone|\\bwap\\b|nokia|Series40|Series60|S60|SonyEricsson|N900|MAUI.*WAP.*Browser"},tablets:{iPad:"iPad|iPad.*Mobile",NexusTablet:"Android.*Nexus[\\s]+(7|9|10)",SamsungTablet:"SAMSUNG.*Tablet|Galaxy.*Tab|SC-01C|GT-P1000|GT-P1003|GT-P1010|GT-P3105|GT-P6210|GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P3100|GT-P3108|GT-P3110|GT-P5100|GT-P5110|GT-P6200|GT-P7320|GT-P7511|GT-N8000|GT-P8510|SGH-I497|SPH-P500|SGH-T779|SCH-I705|SCH-I915|GT-N8013|GT-P3113|GT-P5113|GT-P8110|GT-N8010|GT-N8005|GT-N8020|GT-P1013|GT-P6201|GT-P7501|GT-N5100|GT-N5105|GT-N5110|SHV-E140K|SHV-E140L|SHV-E140S|SHV-E150S|SHV-E230K|SHV-E230L|SHV-E230S|SHW-M180K|SHW-M180L|SHW-M180S|SHW-M180W|SHW-M300W|SHW-M305W|SHW-M380K|SHW-M380S|SHW-M380W|SHW-M430W|SHW-M480K|SHW-M480S|SHW-M480W|SHW-M485W|SHW-M486W|SHW-M500W|GT-I9228|SCH-P739|SCH-I925|GT-I9200|GT-P5200|GT-P5210|GT-P5210X|SM-T311|SM-T310|SM-T310X|SM-T210|SM-T210R|SM-T211|SM-P600|SM-P601|SM-P605|SM-P900|SM-P901|SM-T217|SM-T217A|SM-T217S|SM-P6000|SM-T3100|SGH-I467|XE500|SM-T110|GT-P5220|GT-I9200X|GT-N5110X|GT-N5120|SM-P905|SM-T111|SM-T2105|SM-T315|SM-T320|SM-T320X|SM-T321|SM-T520|SM-T525|SM-T530NU|SM-T230NU|SM-T330NU|SM-T900|XE500T1C|SM-P605V|SM-P905V|SM-T337V|SM-T537V|SM-T707V|SM-T807V|SM-P600X|SM-P900X|SM-T210X|SM-T230|SM-T230X|SM-T325|GT-P7503|SM-T531|SM-T330|SM-T530|SM-T705|SM-T705C|SM-T535|SM-T331|SM-T800|SM-T700|SM-T537|SM-T807|SM-P907A|SM-T337A|SM-T537A|SM-T707A|SM-T807A|SM-T237|SM-T807P|SM-P607T|SM-T217T|SM-T337T|SM-T807T|SM-T116NQ|SM-T116BU|SM-P550|SM-T350|SM-T550|SM-T9000|SM-P9000|SM-T705Y|SM-T805|GT-P3113|SM-T710|SM-T810|SM-T815|SM-T360|SM-T533|SM-T113|SM-T335|SM-T715|SM-T560|SM-T670|SM-T677|SM-T377|SM-T567|SM-T357T|SM-T555|SM-T561|SM-T713|SM-T719|SM-T813|SM-T819|SM-T580|SM-T355Y|SM-T280|SM-T817A|SM-T820|SM-W700|SM-P580|SM-T587|SM-P350|SM-P555M|SM-P355M|SM-T113NU|SM-T815Y",Kindle:"Kindle|Silk.*Accelerated|Android.*\\b(KFOT|KFTT|KFJWI|KFJWA|KFOTE|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|WFJWAE|KFSAWA|KFSAWI|KFASWI|KFARWI|KFFOWI|KFGIWI|KFMEWI)\\b|Android.*Silk/[0-9.]+ like Chrome/[0-9.]+ (?!Mobile)",SurfaceTablet:"Windows NT [0-9.]+; ARM;.*(Tablet|ARMBJS)",HPTablet:"HP Slate (7|8|10)|HP ElitePad 900|hp-tablet|EliteBook.*Touch|HP 8|Slate 21|HP SlateBook 10",AsusTablet:"^.*PadFone((?!Mobile).)*$|Transformer|TF101|TF101G|TF300T|TF300TG|TF300TL|TF700T|TF700KL|TF701T|TF810C|ME171|ME301T|ME302C|ME371MG|ME370T|ME372MG|ME172V|ME173X|ME400C|Slider SL101|\\bK00F\\b|\\bK00C\\b|\\bK00E\\b|\\bK00L\\b|TX201LA|ME176C|ME102A|\\bM80TA\\b|ME372CL|ME560CG|ME372CG|ME302KL| K010 | K011 | K017 | K01E |ME572C|ME103K|ME170C|ME171C|\\bME70C\\b|ME581C|ME581CL|ME8510C|ME181C|P01Y|PO1MA|P01Z|\\bP027\\b",BlackBerryTablet:"PlayBook|RIM Tablet",HTCtablet:"HTC_Flyer_P512|HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200|PG09410",MotorolaTablet:"xoom|sholest|MZ615|MZ605|MZ505|MZ601|MZ602|MZ603|MZ604|MZ606|MZ607|MZ608|MZ609|MZ615|MZ616|MZ617",NookTablet:"Android.*Nook|NookColor|nook browser|BNRV200|BNRV200A|BNTV250|BNTV250A|BNTV400|BNTV600|LogicPD Zoom2",AcerTablet:"Android.*; \\b(A100|A101|A110|A200|A210|A211|A500|A501|A510|A511|A700|A701|W500|W500P|W501|W501P|W510|W511|W700|G100|G100W|B1-A71|B1-710|B1-711|A1-810|A1-811|A1-830)\\b|W3-810|\\bA3-A10\\b|\\bA3-A11\\b|\\bA3-A20\\b|\\bA3-A30",ToshibaTablet:"Android.*(AT100|AT105|AT200|AT205|AT270|AT275|AT300|AT305|AT1S5|AT500|AT570|AT700|AT830)|TOSHIBA.*FOLIO",LGTablet:"\\bL-06C|LG-V909|LG-V900|LG-V700|LG-V510|LG-V500|LG-V410|LG-V400|LG-VK810\\b",FujitsuTablet:"Android.*\\b(F-01D|F-02F|F-05E|F-10D|M532|Q572)\\b",PrestigioTablet:"PMP3170B|PMP3270B|PMP3470B|PMP7170B|PMP3370B|PMP3570C|PMP5870C|PMP3670B|PMP5570C|PMP5770D|PMP3970B|PMP3870C|PMP5580C|PMP5880D|PMP5780D|PMP5588C|PMP7280C|PMP7280C3G|PMP7280|PMP7880D|PMP5597D|PMP5597|PMP7100D|PER3464|PER3274|PER3574|PER3884|PER5274|PER5474|PMP5097CPRO|PMP5097|PMP7380D|PMP5297C|PMP5297C_QUAD|PMP812E|PMP812E3G|PMP812F|PMP810E|PMP880TD|PMT3017|PMT3037|PMT3047|PMT3057|PMT7008|PMT5887|PMT5001|PMT5002",LenovoTablet:"Lenovo TAB|Idea(Tab|Pad)( A1|A10| K1|)|ThinkPad([ ]+)?Tablet|YT3-850M|YT3-X90L|YT3-X90F|YT3-X90X|Lenovo.*(S2109|S2110|S5000|S6000|K3011|A3000|A3500|A1000|A2107|A2109|A1107|A5500|A7600|B6000|B8000|B8080)(-|)(FL|F|HV|H|)",DellTablet:"Venue 11|Venue 8|Venue 7|Dell Streak 10|Dell Streak 7",YarvikTablet:"Android.*\\b(TAB210|TAB211|TAB224|TAB250|TAB260|TAB264|TAB310|TAB360|TAB364|TAB410|TAB411|TAB420|TAB424|TAB450|TAB460|TAB461|TAB464|TAB465|TAB467|TAB468|TAB07-100|TAB07-101|TAB07-150|TAB07-151|TAB07-152|TAB07-200|TAB07-201-3G|TAB07-210|TAB07-211|TAB07-212|TAB07-214|TAB07-220|TAB07-400|TAB07-485|TAB08-150|TAB08-200|TAB08-201-3G|TAB08-201-30|TAB09-100|TAB09-211|TAB09-410|TAB10-150|TAB10-201|TAB10-211|TAB10-400|TAB10-410|TAB13-201|TAB274EUK|TAB275EUK|TAB374EUK|TAB462EUK|TAB474EUK|TAB9-200)\\b",MedionTablet:"Android.*\\bOYO\\b|LIFE.*(P9212|P9514|P9516|S9512)|LIFETAB",ArnovaTablet:"97G4|AN10G2|AN7bG3|AN7fG3|AN8G3|AN8cG3|AN7G3|AN9G3|AN7dG3|AN7dG3ST|AN7dG3ChildPad|AN10bG3|AN10bG3DT|AN9G2",IntensoTablet:"INM8002KP|INM1010FP|INM805ND|Intenso Tab|TAB1004",IRUTablet:"M702pro",MegafonTablet:"MegaFon V9|\\bZTE V9\\b|Android.*\\bMT7A\\b",EbodaTablet:"E-Boda (Supreme|Impresspeed|Izzycomm|Essential)",AllViewTablet:"Allview.*(Viva|Alldro|City|Speed|All TV|Frenzy|Quasar|Shine|TX1|AX1|AX2)",ArchosTablet:"\\b(101G9|80G9|A101IT)\\b|Qilive 97R|Archos5|\\bARCHOS (70|79|80|90|97|101|FAMILYPAD|)(b|c|)(G10| Cobalt| TITANIUM(HD|)| Xenon| Neon|XSK| 2| XS 2| PLATINUM| CARBON|GAMEPAD)\\b",AinolTablet:"NOVO7|NOVO8|NOVO10|Novo7Aurora|Novo7Basic|NOVO7PALADIN|novo9-Spark",NokiaLumiaTablet:"Lumia 2520",SonyTablet:"Sony.*Tablet|Xperia Tablet|Sony Tablet S|SO-03E|SGPT12|SGPT13|SGPT114|SGPT121|SGPT122|SGPT123|SGPT111|SGPT112|SGPT113|SGPT131|SGPT132|SGPT133|SGPT211|SGPT212|SGPT213|SGP311|SGP312|SGP321|EBRD1101|EBRD1102|EBRD1201|SGP351|SGP341|SGP511|SGP512|SGP521|SGP541|SGP551|SGP621|SGP612|SOT31",PhilipsTablet:"\\b(PI2010|PI3000|PI3100|PI3105|PI3110|PI3205|PI3210|PI3900|PI4010|PI7000|PI7100)\\b",CubeTablet:"Android.*(K8GT|U9GT|U10GT|U16GT|U17GT|U18GT|U19GT|U20GT|U23GT|U30GT)|CUBE U8GT",CobyTablet:"MID1042|MID1045|MID1125|MID1126|MID7012|MID7014|MID7015|MID7034|MID7035|MID7036|MID7042|MID7048|MID7127|MID8042|MID8048|MID8127|MID9042|MID9740|MID9742|MID7022|MID7010",MIDTablet:"M9701|M9000|M9100|M806|M1052|M806|T703|MID701|MID713|MID710|MID727|MID760|MID830|MID728|MID933|MID125|MID810|MID732|MID120|MID930|MID800|MID731|MID900|MID100|MID820|MID735|MID980|MID130|MID833|MID737|MID960|MID135|MID860|MID736|MID140|MID930|MID835|MID733|MID4X10",MSITablet:"MSI \\b(Primo 73K|Primo 73L|Primo 81L|Primo 77|Primo 93|Primo 75|Primo 76|Primo 73|Primo 81|Primo 91|Primo 90|Enjoy 71|Enjoy 7|Enjoy 10)\\b",SMiTTablet:"Android.*(\\bMID\\b|MID-560|MTV-T1200|MTV-PND531|MTV-P1101|MTV-PND530)",RockChipTablet:"Android.*(RK2818|RK2808A|RK2918|RK3066)|RK2738|RK2808A",FlyTablet:"IQ310|Fly Vision",bqTablet:"Android.*(bq)?.*(Elcano|Curie|Edison|Maxwell|Kepler|Pascal|Tesla|Hypatia|Platon|Newton|Livingstone|Cervantes|Avant|Aquaris [E|M]10)|Maxwell.*Lite|Maxwell.*Plus",HuaweiTablet:"MediaPad|MediaPad 7 Youth|IDEOS S7|S7-201c|S7-202u|S7-101|S7-103|S7-104|S7-105|S7-106|S7-201|S7-Slim",NecTablet:"\\bN-06D|\\bN-08D",PantechTablet:"Pantech.*P4100",BronchoTablet:"Broncho.*(N701|N708|N802|a710)",VersusTablet:"TOUCHPAD.*[78910]|\\bTOUCHTAB\\b",ZyncTablet:"z1000|Z99 2G|z99|z930|z999|z990|z909|Z919|z900",PositivoTablet:"TB07STA|TB10STA|TB07FTA|TB10FTA",NabiTablet:"Android.*\\bNabi",KoboTablet:"Kobo Touch|\\bK080\\b|\\bVox\\b Build|\\bArc\\b Build",DanewTablet:"DSlide.*\\b(700|701R|702|703R|704|802|970|971|972|973|974|1010|1012)\\b",TexetTablet:"NaviPad|TB-772A|TM-7045|TM-7055|TM-9750|TM-7016|TM-7024|TM-7026|TM-7041|TM-7043|TM-7047|TM-8041|TM-9741|TM-9747|TM-9748|TM-9751|TM-7022|TM-7021|TM-7020|TM-7011|TM-7010|TM-7023|TM-7025|TM-7037W|TM-7038W|TM-7027W|TM-9720|TM-9725|TM-9737W|TM-1020|TM-9738W|TM-9740|TM-9743W|TB-807A|TB-771A|TB-727A|TB-725A|TB-719A|TB-823A|TB-805A|TB-723A|TB-715A|TB-707A|TB-705A|TB-709A|TB-711A|TB-890HD|TB-880HD|TB-790HD|TB-780HD|TB-770HD|TB-721HD|TB-710HD|TB-434HD|TB-860HD|TB-840HD|TB-760HD|TB-750HD|TB-740HD|TB-730HD|TB-722HD|TB-720HD|TB-700HD|TB-500HD|TB-470HD|TB-431HD|TB-430HD|TB-506|TB-504|TB-446|TB-436|TB-416|TB-146SE|TB-126SE",PlaystationTablet:"Playstation.*(Portable|Vita)",TrekstorTablet:"ST10416-1|VT10416-1|ST70408-1|ST702xx-1|ST702xx-2|ST80208|ST97216|ST70104-2|VT10416-2|ST10216-2A|SurfTab",PyleAudioTablet:"\\b(PTBL10CEU|PTBL10C|PTBL72BC|PTBL72BCEU|PTBL7CEU|PTBL7C|PTBL92BC|PTBL92BCEU|PTBL9CEU|PTBL9CUK|PTBL9C)\\b",AdvanTablet:"Android.* \\b(E3A|T3X|T5C|T5B|T3E|T3C|T3B|T1J|T1F|T2A|T1H|T1i|E1C|T1-E|T5-A|T4|E1-B|T2Ci|T1-B|T1-D|O1-A|E1-A|T1-A|T3A|T4i)\\b ",DanyTechTablet:"Genius Tab G3|Genius Tab S2|Genius Tab Q3|Genius Tab G4|Genius Tab Q4|Genius Tab G-II|Genius TAB GII|Genius TAB GIII|Genius Tab S1",GalapadTablet:"Android.*\\bG1\\b",MicromaxTablet:"Funbook|Micromax.*\\b(P250|P560|P360|P362|P600|P300|P350|P500|P275)\\b",KarbonnTablet:"Android.*\\b(A39|A37|A34|ST8|ST10|ST7|Smart Tab3|Smart Tab2)\\b",AllFineTablet:"Fine7 Genius|Fine7 Shine|Fine7 Air|Fine8 Style|Fine9 More|Fine10 Joy|Fine11 Wide",PROSCANTablet:"\\b(PEM63|PLT1023G|PLT1041|PLT1044|PLT1044G|PLT1091|PLT4311|PLT4311PL|PLT4315|PLT7030|PLT7033|PLT7033D|PLT7035|PLT7035D|PLT7044K|PLT7045K|PLT7045KB|PLT7071KG|PLT7072|PLT7223G|PLT7225G|PLT7777G|PLT7810K|PLT7849G|PLT7851G|PLT7852G|PLT8015|PLT8031|PLT8034|PLT8036|PLT8080K|PLT8082|PLT8088|PLT8223G|PLT8234G|PLT8235G|PLT8816K|PLT9011|PLT9045K|PLT9233G|PLT9735|PLT9760G|PLT9770G)\\b",YONESTablet:"BQ1078|BC1003|BC1077|RK9702|BC9730|BC9001|IT9001|BC7008|BC7010|BC708|BC728|BC7012|BC7030|BC7027|BC7026",ChangJiaTablet:"TPC7102|TPC7103|TPC7105|TPC7106|TPC7107|TPC7201|TPC7203|TPC7205|TPC7210|TPC7708|TPC7709|TPC7712|TPC7110|TPC8101|TPC8103|TPC8105|TPC8106|TPC8203|TPC8205|TPC8503|TPC9106|TPC9701|TPC97101|TPC97103|TPC97105|TPC97106|TPC97111|TPC97113|TPC97203|TPC97603|TPC97809|TPC97205|TPC10101|TPC10103|TPC10106|TPC10111|TPC10203|TPC10205|TPC10503",GUTablet:"TX-A1301|TX-M9002|Q702|kf026",PointOfViewTablet:"TAB-P506|TAB-navi-7-3G-M|TAB-P517|TAB-P-527|TAB-P701|TAB-P703|TAB-P721|TAB-P731N|TAB-P741|TAB-P825|TAB-P905|TAB-P925|TAB-PR945|TAB-PL1015|TAB-P1025|TAB-PI1045|TAB-P1325|TAB-PROTAB[0-9]+|TAB-PROTAB25|TAB-PROTAB26|TAB-PROTAB27|TAB-PROTAB26XL|TAB-PROTAB2-IPS9|TAB-PROTAB30-IPS9|TAB-PROTAB25XXL|TAB-PROTAB26-IPS10|TAB-PROTAB30-IPS10",OvermaxTablet:"OV-(SteelCore|NewBase|Basecore|Baseone|Exellen|Quattor|EduTab|Solution|ACTION|BasicTab|TeddyTab|MagicTab|Stream|TB-08|TB-09)",HCLTablet:"HCL.*Tablet|Connect-3G-2.0|Connect-2G-2.0|ME Tablet U1|ME Tablet U2|ME Tablet G1|ME Tablet X1|ME Tablet Y2|ME Tablet Sync",DPSTablet:"DPS Dream 9|DPS Dual 7",VistureTablet:"V97 HD|i75 3G|Visture V4( HD)?|Visture V5( HD)?|Visture V10",CrestaTablet:"CTP(-)?810|CTP(-)?818|CTP(-)?828|CTP(-)?838|CTP(-)?888|CTP(-)?978|CTP(-)?980|CTP(-)?987|CTP(-)?988|CTP(-)?989",MediatekTablet:"\\bMT8125|MT8389|MT8135|MT8377\\b",ConcordeTablet:"Concorde([ ]+)?Tab|ConCorde ReadMan",GoCleverTablet:"GOCLEVER TAB|A7GOCLEVER|M1042|M7841|M742|R1042BK|R1041|TAB A975|TAB A7842|TAB A741|TAB A741L|TAB M723G|TAB M721|TAB A1021|TAB I921|TAB R721|TAB I720|TAB T76|TAB R70|TAB R76.2|TAB R106|TAB R83.2|TAB M813G|TAB I721|GCTA722|TAB I70|TAB I71|TAB S73|TAB R73|TAB R74|TAB R93|TAB R75|TAB R76.1|TAB A73|TAB A93|TAB A93.2|TAB T72|TAB R83|TAB R974|TAB R973|TAB A101|TAB A103|TAB A104|TAB A104.2|R105BK|M713G|A972BK|TAB A971|TAB R974.2|TAB R104|TAB R83.3|TAB A1042",ModecomTablet:"FreeTAB 9000|FreeTAB 7.4|FreeTAB 7004|FreeTAB 7800|FreeTAB 2096|FreeTAB 7.5|FreeTAB 1014|FreeTAB 1001 |FreeTAB 8001|FreeTAB 9706|FreeTAB 9702|FreeTAB 7003|FreeTAB 7002|FreeTAB 1002|FreeTAB 7801|FreeTAB 1331|FreeTAB 1004|FreeTAB 8002|FreeTAB 8014|FreeTAB 9704|FreeTAB 1003",VoninoTablet:"\\b(Argus[ _]?S|Diamond[ _]?79HD|Emerald[ _]?78E|Luna[ _]?70C|Onyx[ _]?S|Onyx[ _]?Z|Orin[ _]?HD|Orin[ _]?S|Otis[ _]?S|SpeedStar[ _]?S|Magnet[ _]?M9|Primus[ _]?94[ _]?3G|Primus[ _]?94HD|Primus[ _]?QS|Android.*\\bQ8\\b|Sirius[ _]?EVO[ _]?QS|Sirius[ _]?QS|Spirit[ _]?S)\\b",ECSTablet:"V07OT2|TM105A|S10OT1|TR10CS1",StorexTablet:"eZee[_']?(Tab|Go)[0-9]+|TabLC7|Looney Tunes Tab",VodafoneTablet:"SmartTab([ ]+)?[0-9]+|SmartTabII10|SmartTabII7|VF-1497",EssentielBTablet:"Smart[ ']?TAB[ ]+?[0-9]+|Family[ ']?TAB2",RossMoorTablet:"RM-790|RM-997|RMD-878G|RMD-974R|RMT-705A|RMT-701|RME-601|RMT-501|RMT-711",iMobileTablet:"i-mobile i-note",TolinoTablet:"tolino tab [0-9.]+|tolino shine",AudioSonicTablet:"\\bC-22Q|T7-QC|T-17B|T-17P\\b",AMPETablet:"Android.* A78 ",SkkTablet:"Android.* (SKYPAD|PHOENIX|CYCLOPS)",TecnoTablet:"TECNO P9",JXDTablet:"Android.* \\b(F3000|A3300|JXD5000|JXD3000|JXD2000|JXD300B|JXD300|S5800|S7800|S602b|S5110b|S7300|S5300|S602|S603|S5100|S5110|S601|S7100a|P3000F|P3000s|P101|P200s|P1000m|P200m|P9100|P1000s|S6600b|S908|P1000|P300|S18|S6600|S9100)\\b",iJoyTablet:"Tablet (Spirit 7|Essentia|Galatea|Fusion|Onix 7|Landa|Titan|Scooby|Deox|Stella|Themis|Argon|Unique 7|Sygnus|Hexen|Finity 7|Cream|Cream X2|Jade|Neon 7|Neron 7|Kandy|Scape|Saphyr 7|Rebel|Biox|Rebel|Rebel 8GB|Myst|Draco 7|Myst|Tab7-004|Myst|Tadeo Jones|Tablet Boing|Arrow|Draco Dual Cam|Aurix|Mint|Amity|Revolution|Finity 9|Neon 9|T9w|Amity 4GB Dual Cam|Stone 4GB|Stone 8GB|Andromeda|Silken|X2|Andromeda II|Halley|Flame|Saphyr 9,7|Touch 8|Planet|Triton|Unique 10|Hexen 10|Memphis 4GB|Memphis 8GB|Onix 10)",FX2Tablet:"FX2 PAD7|FX2 PAD10",XoroTablet:"KidsPAD 701|PAD[ ]?712|PAD[ ]?714|PAD[ ]?716|PAD[ ]?717|PAD[ ]?718|PAD[ ]?720|PAD[ ]?721|PAD[ ]?722|PAD[ ]?790|PAD[ ]?792|PAD[ ]?900|PAD[ ]?9715D|PAD[ ]?9716DR|PAD[ ]?9718DR|PAD[ ]?9719QR|PAD[ ]?9720QR|TelePAD1030|Telepad1032|TelePAD730|TelePAD731|TelePAD732|TelePAD735Q|TelePAD830|TelePAD9730|TelePAD795|MegaPAD 1331|MegaPAD 1851|MegaPAD 2151",ViewsonicTablet:"ViewPad 10pi|ViewPad 10e|ViewPad 10s|ViewPad E72|ViewPad7|ViewPad E100|ViewPad 7e|ViewSonic VB733|VB100a",OdysTablet:"LOOX|XENO10|ODYS[ -](Space|EVO|Xpress|NOON)|\\bXELIO\\b|Xelio10Pro|XELIO7PHONETAB|XELIO10EXTREME|XELIOPT2|NEO_QUAD10",CaptivaTablet:"CAPTIVA PAD",IconbitTablet:"NetTAB|NT-3702|NT-3702S|NT-3702S|NT-3603P|NT-3603P|NT-0704S|NT-0704S|NT-3805C|NT-3805C|NT-0806C|NT-0806C|NT-0909T|NT-0909T|NT-0907S|NT-0907S|NT-0902S|NT-0902S",TeclastTablet:"T98 4G|\\bP80\\b|\\bX90HD\\b|X98 Air|X98 Air 3G|\\bX89\\b|P80 3G|\\bX80h\\b|P98 Air|\\bX89HD\\b|P98 3G|\\bP90HD\\b|P89 3G|X98 3G|\\bP70h\\b|P79HD 3G|G18d 3G|\\bP79HD\\b|\\bP89s\\b|\\bA88\\b|\\bP10HD\\b|\\bP19HD\\b|G18 3G|\\bP78HD\\b|\\bA78\\b|\\bP75\\b|G17s 3G|G17h 3G|\\bP85t\\b|\\bP90\\b|\\bP11\\b|\\bP98t\\b|\\bP98HD\\b|\\bG18d\\b|\\bP85s\\b|\\bP11HD\\b|\\bP88s\\b|\\bA80HD\\b|\\bA80se\\b|\\bA10h\\b|\\bP89\\b|\\bP78s\\b|\\bG18\\b|\\bP85\\b|\\bA70h\\b|\\bA70\\b|\\bG17\\b|\\bP18\\b|\\bA80s\\b|\\bA11s\\b|\\bP88HD\\b|\\bA80h\\b|\\bP76s\\b|\\bP76h\\b|\\bP98\\b|\\bA10HD\\b|\\bP78\\b|\\bP88\\b|\\bA11\\b|\\bA10t\\b|\\bP76a\\b|\\bP76t\\b|\\bP76e\\b|\\bP85HD\\b|\\bP85a\\b|\\bP86\\b|\\bP75HD\\b|\\bP76v\\b|\\bA12\\b|\\bP75a\\b|\\bA15\\b|\\bP76Ti\\b|\\bP81HD\\b|\\bA10\\b|\\bT760VE\\b|\\bT720HD\\b|\\bP76\\b|\\bP73\\b|\\bP71\\b|\\bP72\\b|\\bT720SE\\b|\\bC520Ti\\b|\\bT760\\b|\\bT720VE\\b|T720-3GE|T720-WiFi",OndaTablet:"\\b(V975i|Vi30|VX530|V701|Vi60|V701s|Vi50|V801s|V719|Vx610w|VX610W|V819i|Vi10|VX580W|Vi10|V711s|V813|V811|V820w|V820|Vi20|V711|VI30W|V712|V891w|V972|V819w|V820w|Vi60|V820w|V711|V813s|V801|V819|V975s|V801|V819|V819|V818|V811|V712|V975m|V101w|V961w|V812|V818|V971|V971s|V919|V989|V116w|V102w|V973|Vi40)\\b[\\s]+",JaytechTablet:"TPC-PA762",BlaupunktTablet:"Endeavour 800NG|Endeavour 1010",DigmaTablet:"\\b(iDx10|iDx9|iDx8|iDx7|iDxD7|iDxD8|iDsQ8|iDsQ7|iDsQ8|iDsD10|iDnD7|3TS804H|iDsQ11|iDj7|iDs10)\\b",EvolioTablet:"ARIA_Mini_wifi|Aria[ _]Mini|Evolio X10|Evolio X7|Evolio X8|\\bEvotab\\b|\\bNeura\\b",LavaTablet:"QPAD E704|\\bIvoryS\\b|E-TAB IVORY|\\bE-TAB\\b",AocTablet:"MW0811|MW0812|MW0922|MTK8382|MW1031|MW0831|MW0821|MW0931|MW0712",MpmanTablet:"MP11 OCTA|MP10 OCTA|MPQC1114|MPQC1004|MPQC994|MPQC974|MPQC973|MPQC804|MPQC784|MPQC780|\\bMPG7\\b|MPDCG75|MPDCG71|MPDC1006|MP101DC|MPDC9000|MPDC905|MPDC706HD|MPDC706|MPDC705|MPDC110|MPDC100|MPDC99|MPDC97|MPDC88|MPDC8|MPDC77|MP709|MID701|MID711|MID170|MPDC703|MPQC1010",CelkonTablet:"CT695|CT888|CT[\\s]?910|CT7 Tab|CT9 Tab|CT3 Tab|CT2 Tab|CT1 Tab|C820|C720|\\bCT-1\\b",WolderTablet:"miTab \\b(DIAMOND|SPACE|BROOKLYN|NEO|FLY|MANHATTAN|FUNK|EVOLUTION|SKY|GOCAR|IRON|GENIUS|POP|MINT|EPSILON|BROADWAY|JUMP|HOP|LEGEND|NEW AGE|LINE|ADVANCE|FEEL|FOLLOW|LIKE|LINK|LIVE|THINK|FREEDOM|CHICAGO|CLEVELAND|BALTIMORE-GH|IOWA|BOSTON|SEATTLE|PHOENIX|DALLAS|IN 101|MasterChef)\\b",MiTablet:"\\bMI PAD\\b|\\bHM NOTE 1W\\b",NibiruTablet:"Nibiru M1|Nibiru Jupiter One",NexoTablet:"NEXO NOVA|NEXO 10|NEXO AVIO|NEXO FREE|NEXO GO|NEXO EVO|NEXO 3G|NEXO SMART|NEXO KIDDO|NEXO MOBI",LeaderTablet:"TBLT10Q|TBLT10I|TBL-10WDKB|TBL-10WDKBO2013|TBL-W230V2|TBL-W450|TBL-W500|SV572|TBLT7I|TBA-AC7-8G|TBLT79|TBL-8W16|TBL-10W32|TBL-10WKB|TBL-W100",UbislateTablet:"UbiSlate[\\s]?7C",PocketBookTablet:"Pocketbook",KocasoTablet:"\\b(TB-1207)\\b",HisenseTablet:"\\b(F5281|E2371)\\b",Hudl:"Hudl HT7S3|Hudl 2",TelstraTablet:"T-Hub2",GenericTablet:"Android.*\\b97D\\b|Tablet(?!.*PC)|BNTV250A|MID-WCDMA|LogicPD Zoom2|\\bA7EB\\b|CatNova8|A1_07|CT704|CT1002|\\bM721\\b|rk30sdk|\\bEVOTAB\\b|M758A|ET904|ALUMIUM10|Smartfren Tab|Endeavour 1010|Tablet-PC-4|Tagi Tab|\\bM6pro\\b|CT1020W|arc 10HD|\\bTP750\\b|\\bQTAQZ3\\b"},oss:{AndroidOS:"Android",BlackBerryOS:"blackberry|\\bBB10\\b|rim tablet os",PalmOS:"PalmOS|avantgo|blazer|elaine|hiptop|palm|plucker|xiino",SymbianOS:"Symbian|SymbOS|Series60|Series40|SYB-[0-9]+|\\bS60\\b",WindowsMobileOS:"Windows CE.*(PPC|Smartphone|Mobile|[0-9]{3}x[0-9]{3})|Window Mobile|Windows Phone [0-9.]+|WCE;",WindowsPhoneOS:"Windows Phone 10.0|Windows Phone 8.1|Windows Phone 8.0|Windows Phone OS|XBLWP7|ZuneWP7|Windows NT 6.[23]; ARM;",iOS:"\\biPhone.*Mobile|\\biPod|\\biPad",MeeGoOS:"MeeGo",MaemoOS:"Maemo",JavaOS:"J2ME/|\\bMIDP\\b|\\bCLDC\\b",webOS:"webOS|hpwOS",badaOS:"\\bBada\\b",BREWOS:"BREW"},uas:{Chrome:"\\bCrMo\\b|CriOS|Android.*Chrome/[.0-9]* (Mobile)?",Dolfin:"\\bDolfin\\b",Opera:"Opera.*Mini|Opera.*Mobi|Android.*Opera|Mobile.*OPR/[0-9.]+|Coast/[0-9.]+",Skyfire:"Skyfire",Edge:"Mobile Safari/[.0-9]* Edge",IE:"IEMobile|MSIEMobile",Firefox:"fennec|firefox.*maemo|(Mobile|Tablet).*Firefox|Firefox.*Mobile|FxiOS",Bolt:"bolt",TeaShark:"teashark",Blazer:"Blazer",Safari:"Version.*Mobile.*Safari|Safari.*Mobile|MobileSafari",UCBrowser:"UC.*Browser|UCWEB",baiduboxapp:"baiduboxapp",baidubrowser:"baidubrowser",DiigoBrowser:"DiigoBrowser",Puffin:"Puffin",Mercury:"\\bMercury\\b",ObigoBrowser:"Obigo",NetFront:"NF-Browser",GenericBrowser:"NokiaBrowser|OviBrowser|OneBrowser|TwonkyBeamBrowser|SEMC.*Browser|FlyFlow|Minimo|NetFront|Novarra-Vision|MQQBrowser|MicroMessenger",PaleMoon:"Android.*PaleMoon|Mobile.*PaleMoon"},props:{Mobile:"Mobile/[VER]",Build:"Build/[VER]",Version:"Version/[VER]",VendorID:"VendorID/[VER]",iPad:"iPad.*CPU[a-z ]+[VER]",iPhone:"iPhone.*CPU[a-z ]+[VER]",iPod:"iPod.*CPU[a-z ]+[VER]",Kindle:"Kindle/[VER]",Chrome:["Chrome/[VER]","CriOS/[VER]","CrMo/[VER]"],Coast:["Coast/[VER]"],Dolfin:"Dolfin/[VER]",Firefox:["Firefox/[VER]","FxiOS/[VER]"],Fennec:"Fennec/[VER]",Edge:"Edge/[VER]",IE:["IEMobile/[VER];","IEMobile [VER]","MSIE [VER];","Trident/[0-9.]+;.*rv:[VER]"],NetFront:"NetFront/[VER]",NokiaBrowser:"NokiaBrowser/[VER]",Opera:[" OPR/[VER]","Opera Mini/[VER]","Version/[VER]"],"Opera Mini":"Opera Mini/[VER]","Opera Mobi":"Version/[VER]","UC Browser":"UC Browser[VER]",MQQBrowser:"MQQBrowser/[VER]",MicroMessenger:"MicroMessenger/[VER]",baiduboxapp:"baiduboxapp/[VER]",baidubrowser:"baidubrowser/[VER]",SamsungBrowser:"SamsungBrowser/[VER]",Iron:"Iron/[VER]",Safari:["Version/[VER]","Safari/[VER]"],Skyfire:"Skyfire/[VER]",Tizen:"Tizen/[VER]",Webkit:"webkit[ /][VER]",PaleMoon:"PaleMoon/[VER]",Gecko:"Gecko/[VER]",Trident:"Trident/[VER]",Presto:"Presto/[VER]",Goanna:"Goanna/[VER]",iOS:" \\bi?OS\\b [VER][ ;]{1}",Android:"Android [VER]",BlackBerry:["BlackBerry[\\w]+/[VER]","BlackBerry.*Version/[VER]","Version/[VER]"],BREW:"BREW [VER]",Java:"Java/[VER]","Windows Phone OS":["Windows Phone OS [VER]","Windows Phone [VER]"],"Windows Phone":"Windows Phone [VER]","Windows CE":"Windows CE/[VER]","Windows NT":"Windows NT [VER]",Symbian:["SymbianOS/[VER]","Symbian/[VER]"],webOS:["webOS/[VER]","hpwOS/[VER];"]},utils:{Bot:"Googlebot|facebookexternalhit|AdsBot-Google|Google Keyword Suggestion|Facebot|YandexBot|YandexMobileBot|bingbot|ia_archiver|AhrefsBot|Ezooms|GSLFbot|WBSearchBot|Twitterbot|TweetmemeBot|Twikle|PaperLiBot|Wotbox|UnwindFetchor|Exabot|MJ12bot|YandexImages|TurnitinBot|Pingdom",MobileBot:"Googlebot-Mobile|AdsBot-Google-Mobile|YahooSeeker/M1A1-R2D2",DesktopMode:"WPDesktop",TV:"SonyDTV|HbbTV",WebKit:"(webkit)[ /]([\\w.]+)",Console:"\\b(Nintendo|Nintendo WiiU|Nintendo 3DS|PLAYSTATION|Xbox)\\b",Watch:"SM-V700"}},e.detectMobileBrowsers={fullPattern:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,shortPattern:/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,tabletPattern:/android|ipad|playbook|silk/i};var f,g=Object.prototype.hasOwnProperty;return e.FALLBACK_PHONE="UnknownPhone",e.FALLBACK_TABLET="UnknownTablet",e.FALLBACK_MOBILE="UnknownMobile",f="isArray"in Array?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},function(){var a,b,d,h,i,j,k=e.mobileDetectRules;for(a in k.props)if(g.call(k.props,a)){for(b=k.props[a],f(b)||(b=[b]),i=b.length,h=0;h<i;++h)d=b[h],j=d.indexOf("[VER]"),j>=0&&(d=d.substring(0,j)+"([\\w._\\+]+)"+d.substring(j+5)),b[h]=new RegExp(d,"i");k.props[a]=b}c(k.oss),c(k.phones),c(k.tablets),c(k.uas),c(k.utils),k.oss0={WindowsPhoneOS:k.oss.WindowsPhoneOS,WindowsMobileOS:k.oss.WindowsMobileOS}}(),e.findMatch=function(a,b){for(var c in a)if(g.call(a,c)&&a[c].test(b))return c;return null},e.findMatches=function(a,b){var c=[];for(var d in a)g.call(a,d)&&a[d].test(b)&&c.push(d);return c},e.getVersionStr=function(a,b){var c,d,f,h,i=e.mobileDetectRules.props;if(g.call(i,a))for(c=i[a],f=c.length,d=0;d<f;++d)if(null!==(h=c[d].exec(b)))return h[1];return null},e.getVersion=function(a,b){var c=e.getVersionStr(a,b);return c?e.prepareVersionNo(c):NaN},e.prepareVersionNo=function(a){var b;return b=a.split(/[a-z._ \/\-]/i),1===b.length&&(a=b[0]),b.length>1&&(a=b[0]+".",b.shift(),a+=b.join("")),Number(a)},e.isMobileFallback=function(a){return e.detectMobileBrowsers.fullPattern.test(a)||e.detectMobileBrowsers.shortPattern.test(a.substr(0,4))},e.isTabletFallback=function(a){return e.detectMobileBrowsers.tabletPattern.test(a)},e.prepareDetectionCache=function(a,b,c){if(void 0===a.mobile){
var f,g,h;if(g=e.findMatch(e.mobileDetectRules.tablets,b))return a.mobile=a.tablet=g,void(a.phone=null);if(f=e.findMatch(e.mobileDetectRules.phones,b))return a.mobile=a.phone=f,void(a.tablet=null);e.isMobileFallback(b)?(h=d.isPhoneSized(c),void 0===h?(a.mobile=e.FALLBACK_MOBILE,a.tablet=a.phone=null):h?(a.mobile=a.phone=e.FALLBACK_PHONE,a.tablet=null):(a.mobile=a.tablet=e.FALLBACK_TABLET,a.phone=null)):e.isTabletFallback(b)?(a.mobile=a.tablet=e.FALLBACK_TABLET,a.phone=null):a.mobile=a.tablet=a.phone=null}},e.mobileGrade=function(a){var b=null!==a.mobile();return a.os("iOS")&&a.version("iPad")>=4.3||a.os("iOS")&&a.version("iPhone")>=3.1||a.os("iOS")&&a.version("iPod")>=3.1||a.version("Android")>2.1&&a.is("Webkit")||a.version("Windows Phone OS")>=7||a.is("BlackBerry")&&a.version("BlackBerry")>=6||a.match("Playbook.*Tablet")||a.version("webOS")>=1.4&&a.match("Palm|Pre|Pixi")||a.match("hp.*TouchPad")||a.is("Firefox")&&a.version("Firefox")>=12||a.is("Chrome")&&a.is("AndroidOS")&&a.version("Android")>=4||a.is("Skyfire")&&a.version("Skyfire")>=4.1&&a.is("AndroidOS")&&a.version("Android")>=2.3||a.is("Opera")&&a.version("Opera Mobi")>11&&a.is("AndroidOS")||a.is("MeeGoOS")||a.is("Tizen")||a.is("Dolfin")&&a.version("Bada")>=2||(a.is("UC Browser")||a.is("Dolfin"))&&a.version("Android")>=2.3||a.match("Kindle Fire")||a.is("Kindle")&&a.version("Kindle")>=3||a.is("AndroidOS")&&a.is("NookTablet")||a.version("Chrome")>=11&&!b||a.version("Safari")>=5&&!b||a.version("Firefox")>=4&&!b||a.version("MSIE")>=7&&!b||a.version("Opera")>=10&&!b?"A":a.os("iOS")&&a.version("iPad")<4.3||a.os("iOS")&&a.version("iPhone")<3.1||a.os("iOS")&&a.version("iPod")<3.1||a.is("Blackberry")&&a.version("BlackBerry")>=5&&a.version("BlackBerry")<6||a.version("Opera Mini")>=5&&a.version("Opera Mini")<=6.5&&(a.version("Android")>=2.3||a.is("iOS"))||a.match("NokiaN8|NokiaC7|N97.*Series60|Symbian/3")||a.version("Opera Mobi")>=11&&a.is("SymbianOS")?"B":(a.version("BlackBerry")<5||a.match("MSIEMobile|Windows CE.*Mobile")||a.version("Windows Mobile"),"C")},e.detectOS=function(a){return e.findMatch(e.mobileDetectRules.oss0,a)||e.findMatch(e.mobileDetectRules.oss,a)},e.getDeviceSmallerSide=function(){return window.screen.width<window.screen.height?window.screen.width:window.screen.height},d.prototype={constructor:d,mobile:function(){return e.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.mobile},phone:function(){return e.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.phone},tablet:function(){return e.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.tablet},userAgent:function(){return void 0===this._cache.userAgent&&(this._cache.userAgent=e.findMatch(e.mobileDetectRules.uas,this.ua)),this._cache.userAgent},userAgents:function(){return void 0===this._cache.userAgents&&(this._cache.userAgents=e.findMatches(e.mobileDetectRules.uas,this.ua)),this._cache.userAgents},os:function(){return void 0===this._cache.os&&(this._cache.os=e.detectOS(this.ua)),this._cache.os},version:function(a){return e.getVersion(a,this.ua)},versionStr:function(a){return e.getVersionStr(a,this.ua)},is:function(c){return b(this.userAgents(),c)||a(c,this.os())||a(c,this.phone())||a(c,this.tablet())||b(e.findMatches(e.mobileDetectRules.utils,this.ua),c)},match:function(a){return a instanceof RegExp||(a=new RegExp(a,"i")),a.test(this.ua)},isPhoneSized:function(a){return d.isPhoneSized(a||this.maxPhoneWidth)},mobileGrade:function(){return void 0===this._cache.grade&&(this._cache.grade=e.mobileGrade(this)),this._cache.grade}},"undefined"!=typeof window&&window.screen?d.isPhoneSized=function(a){return a<0?void 0:e.getDeviceSmallerSide()<=a}:d.isPhoneSized=function(){},d._impl=e,d.version="1.3.7 2017-09-06",d})}(function(b){return void 0!==a&&a.exports?function(b){a.exports=b()}:c(73)}())},function(a,b,c){(function(a,b){!function(a,c){"use strict";function d(a){"function"!=typeof a&&(a=new Function(""+a));for(var b=new Array(arguments.length-1),c=0;c<b.length;c++)b[c]=arguments[c+1];var d={callback:a,args:b};return j[i]=d,h(i),i++}function e(a){delete j[a]}function f(a){var b=a.callback,d=a.args;switch(d.length){case 0:b();break;case 1:b(d[0]);break;case 2:b(d[0],d[1]);break;case 3:b(d[0],d[1],d[2]);break;default:b.apply(c,d)}}function g(a){if(k)setTimeout(g,0,a);else{var b=j[a];if(b){k=!0;try{f(b)}finally{e(a),k=!1}}}}if(!a.setImmediate){var h,i=1,j={},k=!1,l=a.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(a);m=m&&m.setTimeout?m:a,"[object process]"==={}.toString.call(a.process)?function(){h=function(a){b.nextTick(function(){g(a)})}}():function(){if(a.postMessage&&!a.importScripts){var b=!0,c=a.onmessage;return a.onmessage=function(){b=!1},a.postMessage("","*"),a.onmessage=c,b}}()?function(){var b="setImmediate$"+Math.random()+"$",c=function(c){c.source===a&&"string"==typeof c.data&&0===c.data.indexOf(b)&&g(+c.data.slice(b.length))};a.addEventListener?a.addEventListener("message",c,!1):a.attachEvent("onmessage",c),h=function(c){a.postMessage(b+c,"*")}}():a.MessageChannel?function(){var a=new MessageChannel;a.port1.onmessage=function(a){g(a.data)},h=function(b){a.port2.postMessage(b)}}():l&&"onreadystatechange"in l.createElement("script")?function(){var a=l.documentElement;h=function(b){var c=l.createElement("script");c.onreadystatechange=function(){g(b),c.onreadystatechange=null,a.removeChild(c),c=null},a.appendChild(c)}}():function(){h=function(a){setTimeout(g,0,a)}}(),m.setImmediate=d,m.clearImmediate=e}}("undefined"==typeof self?void 0===a?this:a:self)}).call(b,c(7),c(14))},function(a,b,c){var d=c(9),e=a.exports=c(3),f=e.Request;try{d.config({cancellation:!0})}catch(a){console.warn(["Enabling bluebird cancellation failed.","If you are using bluebird elsewhere in your application,","be sure to enable cancellation there as well.","Promise.config({cancellation: true});"].join(" ")),console.warn(a.stack)}var g=function(a,b){var c;this.message=a,this.name="SuperagentPromiseError",this.originalError=b,Error.captureStackTrace?(Error.captureStackTrace(this,this.constructor),c=this.stack):c=new Error(a).stack,Object.defineProperty&&Object.defineProperty(this,"stack",{get:function(){return this.originalError?c+"\nCaused by:  "+this.originalError.stack:c}})};g.prototype=new Error,g.prototype.constructor=g,e.SuperagentPromiseError=g,f.prototype.promise=function(){var a,b=this;return new d(function(c,d,e){b.end(function(e,f){if(void 0!==f&&null!==f&&f.status>=400){var h="cannot "+b.method+" "+b.url+" ("+f.status+")";a=new g(h),a.status=f.status,a.body=f.body,a.res=f,d(a)}else e?d(new g("Bad request",e)):c(f)}),"function"==typeof e&&e(function(){b.abort()})})},f.prototype.then=function(){var a=this.promise();return a.then.apply(a,arguments)},f.prototype.catch=function(){var a=this.promise();return a.catch.apply(a,arguments)}},function(a,b,c){function d(a){if(a)return e(a)}function e(a){for(var b in d.prototype)a[b]=d.prototype[b];return a}var f=c(15);a.exports=d,d.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},d.prototype.parse=function(a){return this._parser=a,this},d.prototype.responseType=function(a){return this._responseType=a,this},d.prototype.serialize=function(a){return this._serializer=a,this},d.prototype.timeout=function(a){if(!a||"object"!=typeof a)return this._timeout=a,this._responseTimeout=0,this;for(var b in a)switch(b){case"deadline":this._timeout=a.deadline;break;case"response":this._responseTimeout=a.response;break;default:console.warn("Unknown timeout option",b)}return this},d.prototype.retry=function(a){return 0!==arguments.length&&!0!==a||(a=1),a<=0&&(a=0),this._maxRetries=a,this._retries=0,this},d.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},d.prototype.then=function(a,b){if(!this._fullfilledPromise){var c=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(a,b){c.end(function(c,d){c?b(c):a(d)})})}return this._fullfilledPromise.then(a,b)},d.prototype.catch=function(a){return this.then(void 0,a)},d.prototype.use=function(a){return a(this),this},d.prototype.ok=function(a){if("function"!=typeof a)throw Error("Callback required");return this._okCallback=a,this},d.prototype._isResponseOK=function(a){return!!a&&(this._okCallback?this._okCallback(a):a.status>=200&&a.status<300)},d.prototype.get=function(a){return this._header[a.toLowerCase()]},d.prototype.getHeader=d.prototype.get,d.prototype.set=function(a,b){if(f(a)){for(var c in a)this.set(c,a[c]);return this}return this._header[a.toLowerCase()]=b,this.header[a]=b,this},d.prototype.unset=function(a){return delete this._header[a.toLowerCase()],delete this.header[a],this},d.prototype.field=function(a,b){if(null===a||void 0===a)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),f(a)){for(var c in a)this.field(c,a[c]);return this}if(Array.isArray(b)){for(var d in b)this.field(a,b[d]);return this}if(null===b||void 0===b)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof b&&(b=""+b),this._getFormData().append(a,b),this},d.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},d.prototype.withCredentials=function(a){return void 0==a&&(a=!0),this._withCredentials=a,this},d.prototype.redirects=function(a){return this._maxRedirects=a,this},d.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},d.prototype.send=function(a){var b=f(a),c=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),b&&!this._data)Array.isArray(a)?this._data=[]:this._isHost(a)||(this._data={});else if(a&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(b&&f(this._data))for(var d in a)this._data[d]=a[d];else"string"==typeof a?(c||this.type("form"),c=this._header["content-type"],this._data="application/x-www-form-urlencoded"==c?this._data?this._data+"&"+a:a:(this._data||"")+a):this._data=a;return!b||this._isHost(a)?this:(c||this.type("json"),this)},d.prototype.sortQuery=function(a){return this._sort=void 0===a||a,this},d.prototype._finalizeQueryString=function(){var a=this._query.join("&");if(a&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+a),this._query.length=0,this._sort){var b=this.url.indexOf("?");if(b>=0){var c=this.url.substring(b+1).split("&");"function"==typeof this._sort?c.sort(this._sort):c.sort(),this.url=this.url.substring(0,b)+"?"+c.join("&")}}},d.prototype._appendQueryString=function(){console.trace("Unsupported")},d.prototype._timeoutError=function(a,b,c){if(!this._aborted){var d=new Error(a+b+"ms exceeded");d.timeout=b,d.code="ECONNABORTED",d.errno=c,this.timedout=!0,this.abort(),this.callback(d)}},d.prototype._setTimeouts=function(){var a=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){a._timeoutError("Timeout of ",a._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){a._timeoutError("Response timeout of ",a._responseTimeout,"ETIMEDOUT")},this._responseTimeout))}},function(a,b,c){function d(a){if(a)return e(a)}function e(a){for(var b in d.prototype)a[b]=d.prototype[b];return a}var f=c(66);a.exports=d,d.prototype.get=function(a){return this.header[a.toLowerCase()]},d.prototype._setHeaderProperties=function(a){var b=a["content-type"]||"";this.type=f.type(b);var c=f.params(b);for(var d in c)this[d]=c[d];this.links={};try{a.link&&(this.links=f.parseLinks(a.link))}catch(a){}},d.prototype._setStatusProperties=function(a){var b=a/100|0;this.status=this.statusCode=a,this.statusType=b,this.info=1==b,this.ok=2==b,this.redirect=3==b,this.clientError=4==b,this.serverError=5==b,this.error=(4==b||5==b)&&this.toError(),this.accepted=202==a,this.noContent=204==a,this.badRequest=400==a,this.unauthorized=401==a,this.notAcceptable=406==a,this.forbidden=403==a,this.notFound=404==a}},function(a,b){var c=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];a.exports=function(a,b){return!!(a&&a.code&&~c.indexOf(a.code))||(!!(b&&b.status&&b.status>=500)||(!!(a&&"timeout"in a&&"ECONNABORTED"==a.code)||!!(a&&"crossDomain"in a)))}},function(a,b){b.type=function(a){return a.split(/ *; */).shift()},b.params=function(a){return a.split(/ *; */).reduce(function(a,b){var c=b.split(/ *= */),d=c.shift(),e=c.shift();return d&&e&&(a[d]=e),a},{})},b.parseLinks=function(a){return a.split(/ *, */).reduce(function(a,b){var c=b.split(/ *; */),d=c[0].slice(1,-1);return a[c[1].split(/ *= */)[1].slice(1,-1)]=d,a},{})},b.cleanHeader=function(a,b){return delete a["content-type"],delete a["content-length"],delete a["transfer-encoding"],delete a.host,b&&delete a.cookie,a}},function(a,b,c){function d(a,b){this._id=a,this._clearFn=b}var e=Function.prototype.apply;b.setTimeout=function(){return new d(e.call(setTimeout,window,arguments),clearTimeout)},b.setInterval=function(){return new d(e.call(setInterval,window,arguments),clearInterval)},b.clearTimeout=b.clearInterval=function(a){a&&a.close()},d.prototype.unref=d.prototype.ref=function(){},d.prototype.close=function(){this._clearFn.call(window,this._id)},b.enroll=function(a,b){clearTimeout(a._idleTimeoutId),a._idleTimeout=b},b.unenroll=function(a){clearTimeout(a._idleTimeoutId),a._idleTimeout=-1},b._unrefActive=b.active=function(a){clearTimeout(a._idleTimeoutId);var b=a._idleTimeout;b>=0&&(a._idleTimeoutId=setTimeout(function(){a._onTimeout&&a._onTimeout()},b))},c(61),b.setImmediate=setImmediate,b.clearImmediate=clearImmediate},function(a,b){a.exports={zones:{"America/New_York":["z",{wallclock:-946944e5,format:"E%sT",abbrev:"EST",offset:-18e6,posix:-946764e5,save:0,rules:"US"},{wallclock:-7573824e5,format:"E%sT",abbrev:"EST",offset:-18e6,posix:-7573644e5,save:0,rules:"NYC"},{wallclock:-8836128e5,format:"E%sT",abbrev:"EST",offset:-18e6,posix:-8835948e5,save:0,rules:"US"},{wallclock:-15779232e5,format:"E%sT",abbrev:"EST",offset:-18e6,posix:-15779052e5,save:0,rules:"NYC"},{wallclock:-2717668562e3,format:"E%sT",abbrev:"EST",offset:-18e6,posix:-27176508e5,save:0,rules:"US"},{wallclock:-1.7976931348623157e308,format:"LMT",abbrev:"LMT",offset:-17762e3,posix:-1.7976931348623157e308,save:0}]},rules:{US:[{from:2007,to:1.7976931348623157e308,month:10,day:[0,1],time:120,clock:"wallclock",save:0,letter:"S",saved:36e5},{from:2007,to:1.7976931348623157e308,month:2,day:[0,8],time:120,clock:"wallclock",save:60,letter:"D",saved:0},{from:1987,to:2006,month:3,day:[0,1],time:120,clock:"wallclock",save:60,letter:"D",saved:0},{from:1967,to:2006,month:9,day:[0,-31],time:120,clock:"wallclock",save:0,letter:"S",saved:36e5},{from:1976,to:1986,month:3,day:[0,-30],time:120,clock:"wallclock",save:60,letter:"D",saved:0},{from:1975,to:1975,month:1,day:[7,23],time:120,clock:"wallclock",save:60,letter:"D",saved:0},{from:1974,to:1974,month:0,day:[7,6],time:120,clock:"wallclock",save:60,letter:"D",saved:0},{from:1967,to:1973,month:3,day:[0,-30],time:120,clock:"wallclock",save:60,letter:"D",saved:0},{from:1945,to:1945,month:8,day:[0,-30],time:120,clock:"wallclock",save:0,letter:"S",saved:36e5},{from:1945,to:1945,month:7,day:[7,14],time:1380,clock:"posix",save:60,letter:"P",saved:36e5},{from:1942,to:1942,month:1,day:[7,9],time:120,clock:"wallclock",save:60,letter:"W",saved:0},{from:1918,to:1919,month:9,day:[0,-31],time:120,clock:"wallclock",save:0,letter:"S",saved:36e5},{from:1918,to:1919,month:2,day:[0,-31],time:120,clock:"wallclock",save:60,letter:"D",saved:0}],NYC:[{from:1921,to:1966,month:3,day:[0,-30],time:120,clock:"wallclock",save:60,letter:"D",saved:0},{from:1955,to:1966,month:9,day:[0,-31],time:120,clock:"wallclock",save:0,letter:"S",saved:36e5},{from:1921,to:1954,month:8,day:[0,-30],time:120,clock:"wallclock",save:0,letter:"S",saved:36e5},{from:1920,to:1920,month:2,day:[0,-31],time:120,clock:"wallclock",save:60,letter:"D",saved:0},{from:1920,to:1920,month:9,day:[0,-31],time:120,clock:"wallclock",save:0,letter:"S",saved:36e5}]}}},function(a,b,c){var d,e;!function(f){"object"==typeof a&&a.exports?a.exports=f():(d=f,void 0!==(e="function"==typeof d?d.call(b,c,b,a):d)&&(a.exports=e))}(function(){function a(a,b,c){var d,e=b.day[1];do{d=new Date(Date.UTC(c,b.month,Math.abs(e++)))}while(b.day[0]<7&&d.getUTCDay()!=b.day[0]);return d={clock:b.clock,sort:d.getTime(),rule:b,save:6e4*b.save,offset:a.offset},d[d.clock]=d.sort+6e4*b.time,d.posix?d.wallclock=d[d.clock]+(a.offset+b.saved):d.posix=d[d.clock]-(a.offset+b.saved),d}function b(b,c,d){var e,f,g,h,i,j,k,l=b[b.zone],m=[],n=new Date(d).getUTCFullYear(),o=1;for(e=1,f=l.length;e<f&&!(l[e][c]<=d);e++);if(g=l[e],g.rules){for(j=b[g.rules],k=n+1;k>=n-o;--k)for(e=0,f=j.length;e<f;e++)j[e].from<=k&&k<=j[e].to?m.push(a(g,j[e],k)):j[e].to<k&&1==o&&(o=k-j[e].to);for(m.sort(function(a,b){return a.sort-b.sort}),e=0,f=m.length;e<f;e++)d>=m[e][c]&&m[e][m[e].clock]>g[m[e].clock]&&(h=m[e])}return h&&((i=/^(.*)\/(.*)$/.exec(g.format))?h.abbrev=i[h.save?2:1]:h.abbrev=g.format.replace(/%s/,h.rule.letter)),h||g}function c(a,c){return"UTC"==a.zone?c:(a.entry=b(a,"posix",c),c+a.entry.offset+a.entry.save)}function d(a,c){if("UTC"==a.zone)return c;var d,e;return a.entry=d=b(a,"wallclock",c),e=c-d.wallclock,0<e&&e<d.save?null:c-d.offset-d.save}function e(a,b,e){var f,g=+(e[1]+1),h=e[2]*g,i=j.indexOf(e[3].toLowerCase());if(i>9)b+=h*l[i-10];else{if(f=new Date(c(a,b)),i<7)for(;h;)f.setUTCDate(f.getUTCDate()+g),f.getUTCDay()==i&&(h-=g);else 7==i?f.setUTCFullYear(f.getUTCFullYear()+h):8==i?f.setUTCMonth(f.getUTCMonth()+h):f.setUTCDate(f.getUTCDate()+h);null==(b=d(a,f.getTime()))&&(b=d(a,f.getTime()+864e5*g)-864e5*g)}return b}function f(a){if(!a.length)return"1.0.6";var b,f,g,h,i,j=Object.create(this),l=[];for(b=0;b<a.length;b++)if(h=a[b],Array.isArray(h))b||isNaN(h[1])?h.splice.apply(a,[b--,1].concat(h)):i=h;else if(isNaN(h)){if("string"==(g=typeof h))~h.indexOf("%")?j.format=h:b||"*"!=h?!b&&(g=/^(\d{4})-(\d{2})-(\d{2})(?:[T\s](\d{2}):(\d{2})(?::(\d{2})(?:\.(\d+))?)?(Z|(([+-])(\d{2}(:\d{2}){0,2})))?)?$/.exec(h))?(i=[],i.push.apply(i,g.slice(1,8)),g[9]?(i.push(g[10]+1),i.push.apply(i,g[11].split(/:/))):g[8]&&i.push(1)):/^\w{2,3}_\w{2}$/.test(h)?j.locale=h:(g=k.exec(h))?l.push(g):j.zone=h:i=h;else if("function"==g){if(g=h.call(j))return g}else if(/^\w{2,3}_\w{2}$/.test(h.name))j[h.name]=h;else if(h.zones){for(g in h.zones)j[g]=h.zones[g];for(g in h.rules)j[g]=h.rules[g]}}else b||(i=h);if(j[j.locale]||delete j.locale,j[j.zone]||delete j.zone,null!=i){if("*"==i)i=j.clock();else if(Array.isArray(i)){for(f=!i[7],b=0;b<11;b++)i[b]=+(i[b]||0);--i[1],i=Date.UTC.apply(Date.UTC,i.slice(0,8))+-i[7]*(36e5*i[8]+6e4*i[9]+1e3*i[10])}else i=Math.floor(i);if(!isNaN(i)){if(f&&(i=d(j,i)),null==i)return i;for(b=0,f=l.length;b<f;b++)i=e(j,i,l[b]);return j.format?(g=new Date(c(j,i)),j.format.replace(/%([-0_^]?)(:{0,3})(\d*)(.)/g,function(a,b,c,d,e){var f,h,k="0";if(f=j[e]){for(a=String(f.call(j,g,i,b,c.length)),"_"==(b||f.style)&&(k=" "),h="-"==b?0:f.pad||0;a.length<h;)a=k+a;for(h="-"==b?0:d||f.pad;a.length<h;)a=k+a;"N"==e&&h<a.length&&(a=a.slice(0,h)),"^"==b&&(a=a.toUpperCase())}return a})):i}}return function(){return j.convert(arguments)}}function g(a,b){var c,d,e;return d=new Date(Date.UTC(a.getUTCFullYear(),0)),c=Math.floor((a.getTime()-d.getTime())/864e5),d.getUTCDay()==b?e=0:8==(e=7-d.getUTCDay()+b)&&(e=1),c>=e?Math.floor((c-e)/7)+1:0}function h(a){var b,c,d;return c=a.getUTCFullYear(),b=new Date(Date.UTC(c,0)).getUTCDay(),d=g(a,1)+(b>1&&b<=4?1:0),d?53!=d||4==b||3==b&&29==new Date(c,1,29).getDate()?[d,a.getUTCFullYear()]:[1,a.getUTCFullYear()+1]:(c=a.getUTCFullYear()-1,b=new Date(Date.UTC(c,0)).getUTCDay(),d=4==b||3==b&&29==new Date(c,1,29).getDate()?53:52,[d,a.getUTCFullYear()-1])}var i={clock:function(){return+new Date},zone:"UTC",entry:{abbrev:"UTC",offset:0,save:0},UTC:1,z:function(a,b,c,d){var e,f,g=this.entry.offset+this.entry.save,h=Math.abs(g/1e3),i=[],j=3600;for(e=0;e<3;e++)i.push(("0"+Math.floor(h/j)).slice(-2)),h%=j,j/=60;return"^"!=c||g?("^"==c&&(d=3),3==d?(f=i.join(":"),f=f.replace(/:00$/,""),"^"!=c&&(f=f.replace(/:00$/,""))):d?(f=i.slice(0,d+1).join(":"),"^"==c&&(f=f.replace(/:00$/,""))):f=i.slice(0,2).join(""),f=(g<0?"-":"+")+f,f=f.replace(/([-+])(0)/,{_:" $1","-":"$1"}[c]||"$1$2")):"Z"},"%":function(a){return"%"},n:function(a){return"\n"},t:function(a){return"\t"},U:function(a){return g(a,0)},W:function(a){return g(a,1)},V:function(a){return h(a)[0]},G:function(a){return h(a)[1]},g:function(a){return h(a)[1]%100},j:function(a){return Math.floor((a.getTime()-Date.UTC(a.getUTCFullYear(),0))/864e5)+1},s:function(a){return Math.floor(a.getTime()/1e3)},C:function(a){return Math.floor(a.getUTCFullYear()/100)},N:function(a){return a.getTime()%1e3*1e6},m:function(a){return a.getUTCMonth()+1},Y:function(a){return a.getUTCFullYear()},y:function(a){return a.getUTCFullYear()%100},H:function(a){return a.getUTCHours()},M:function(a){return a.getUTCMinutes()},S:function(a){return a.getUTCSeconds()},e:function(a){return a.getUTCDate()},d:function(a){return a.getUTCDate()},u:function(a){return a.getUTCDay()||7},w:function(a){return a.getUTCDay()},l:function(a){return a.getUTCHours()%12||12},I:function(a){return a.getUTCHours()%12||12},k:function(a){return a.getUTCHours()},Z:function(a){return this.entry.abbrev},a:function(a){return this[this.locale].day.abbrev[a.getUTCDay()]},A:function(a){return this[this.locale].day.full[a.getUTCDay()]},h:function(a){return this[this.locale].month.abbrev[a.getUTCMonth()]},b:function(a){return this[this.locale].month.abbrev[a.getUTCMonth()]},B:function(a){return this[this.locale].month.full[a.getUTCMonth()]},P:function(a){return this[this.locale].meridiem[Math.floor(a.getUTCHours()/12)].toLowerCase()},p:function(a){return this[this.locale].meridiem[Math.floor(a.getUTCHours()/12)]},R:function(a,b){return this.convert([b,"%H:%M"])},T:function(a,b){return this.convert([b,"%H:%M:%S"])},D:function(a,b){return this.convert([b,"%m/%d/%y"])},F:function(a,b){return this.convert([b,"%Y-%m-%d"])},x:function(a,b){return this.convert([b,this[this.locale].date])},r:function(a,b){return this.convert([b,this[this.locale].time12||"%I:%M:%S"])},X:function(a,b){return this.convert([b,this[this.locale].time24])},c:function(a,b){return this.convert([b,this[this.locale].dateTime])},convert:f,locale:"en_US",en_US:{date:"%m/%d/%Y",time24:"%I:%M:%S %p",time12:"%I:%M:%S %p",dateTime:"%a %d %b %Y %I:%M:%S %p %Z",meridiem:["AM","PM"],month:{abbrev:"Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec".split("|"),full:"January|February|March|April|May|June|July|August|September|October|November|December".split("|")},day:{abbrev:"Sun|Mon|Tue|Wed|Thu|Fri|Sat".split("|"),full:"Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday".split("|")}}},j="Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|year|month|day|hour|minute|second|millisecond",k=new RegExp("^\\s*([+-])(\\d+)\\s+("+j+")s?\\s*$","i"),l=[36e5,6e4,1e3,1];return j=j.toLowerCase().split("|"),"delmHMSUWVgCIky".replace(/./g,function(a){i[a].pad=2}),i.N.pad=9,i.j.pad=3,i.k.style="_",i.l.style="_",i.e.style="_",function(){return i.convert(arguments)}})},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b,c){var d=o+"/apis/v2/fans/"+a;j.default.get(d).withCredentials().set("X-Personalization-Source",s).end(function(a,d){if(a||!d.ok)c(a);else{var e=d&&d.body;u.setFan({item:e,id:e.id,timestamp:Date.now()}),b(e)}})}function f(a){return q.test(a)?new l.default(function(b,c){u.getFan().then(function(d){var f=d&&d.item,g=Date.now()-d.timestamp>60*t*1e3;null===f||f.id!==a||g?e(a,b,c):b(f)}).catch(function(){e(a,b,c)})}):l.default.reject(new Error("Invalid SWID"))}function g(a,b){if(!q.test(a))return l.default.reject(new Error("Invalid SWID"));var c=p+"/apis/v2/fans/"+a+"/profile/";return j.default.post(c).withCredentials().set("X-Personalization-Source",s).send(b).promise()}function h(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,b=a.sourceHeader,c=void 0===b?r.sourceHeader:b,d=a.cacheDuration,e=void 0===d?r.cacheDuration:d;return this instanceof h?(s=c,t=e,u=new n.default(t),this):new h({sourceHeader:c,cacheDuration:e})}var i=c(62),j=d(i),k=c(9),l=d(k),m=c(71),n=d(m),o="//fan.api.espn.com",p="//fan.core.api.espn.com",q=/^\{[\w\-]+\}/,r={sourceHeader:"espn-video-player",cacheDuration:10},s=void 0,t=void 0,u=void 0;h.prototype.getFanForId=function(a,b){return f(a).tap(function(a){"function"==typeof b&&b(a)})},h.prototype.getAutoStartForFanId=function(a,b){return f(a).then(function(a){var b=a&&a.profile,c=b&&b.settings;return"2"!==(c&&c.videoAutoStart&&c.videoAutoStart.value)}).catch(function(){return!0}).tap(function(a){"function"==typeof b&&b(a)})},h.prototype.updateAutoStartForFanId=function(a,b,c){var d=(b?"1":"2").toString(),e={settings:{videoAutoStart:{value:d,lastUpdateSource:s,lastUpdateDate:Date.now()}}};return g(a,e).tap(function(a,b){"function"==typeof c&&c(a,b)}).catch(function(){return!0}).finally(function(){h.prototype.updateAutoStartCache(e.settings)})},h.prototype.updateAutoStartCache=function(a){var b=a.videoAutoStart;u.getFan().then(function(a){var c=a&&a.item,d=void 0;for(d in b)b.hasOwnProperty(d)&&(c.profile.settings.videoAutoStart[d]=b[d]);u.setFan({item:c,id:c.id,timestamp:Date.now()})}).catch(function(){})},h.prototype.getUidsForFanId=function(a,b){function c(a){return a.metaData.team||a.metaData.sport}function d(a){return a.metaData.team?a.metaData.team.uid:a.metaData.sport?a.metaData.sport.uid:null}return f(a).then(function(a){return(a&&a.preferences).filter(c).map(d)}).catch(function(){return[]}).tap(function(a){"function"==typeof b&&b(a)})},a.exports=h},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(9),g=function(a){return a&&a.__esModule?a:{default:a}}(f),h={ESPN:"ESPN",LOCAL_STORAGE:"LOCAL_STORAGE"},i={getItem:function(a){return g.default.resolve(JSON.parse(localStorage.getItem(a)))},setItem:function(a,b){localStorage.setItem(a,JSON.stringify(b))}},j=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;d(this,a),this.expiration=b,this.storageType=h.LOCAL_STORAGE}return e(a,[{key:"inferStorageType",value:function(){this.storageType!==h.ESPN&&window&&window.espn&&window.espn.storageFactory&&(this.storageType=h.ESPN,this.espnStorage=espn.storageFactory.getMostPermanent())}},{key:"getFan",value:function(){var a=this;return this.inferStorageType(),this.storageType===h.ESPN?new g.default(function(b,c){var d=a.espnStorage.getItem("fanapi_fan"),e=d&&d.item;e?(i.setItem("fanapi_fan",{item:e,id:e.id,timestamp:Date.now()}),b(d)):c(new Error("No item for key"))}):i.getItem("fanapi_fan")}},{key:"setFan",value:function(a){this.inferStorageType(),i.setItem("fanapi_fan",{item:a.item,id:a.id,timestamp:Date.now()}),this.storageType===h.ESPN&&this.espnStorage.setItem("fanapi_fan",{item:a.item,id:a&&a.id,expiresAt:(new Date).getTime()+6e4*this.expiration})}}]),a}();b.default=j},function(a,b,c){"use strict";var d=c(70),e=function(a){return a&&a.__esModule?a:{default:a}}(d);a.exports=e.default},function(a,b){a.exports=function(){throw new Error("define cannot be used indirect")}},function(a,b){a.exports=function(a){return a.webpackPolyfill||(a.deprecate=function(){},a.paths=[],a.children||(a.children=[]),Object.defineProperty(a,"loaded",{enumerable:!0,get:function(){return a.l}}),Object.defineProperty(a,"id",{enumerable:!0,get:function(){return a.i}}),a.webpackPolyfill=1),a}},function(a,b){a.exports={"Could not download the video":"An error occurred during video playback, possibly due to network connectivity or being in a backgrounded browser tab. Please try again.",EMBARGOED:"Video is not yet available.",EXPIRED:"Video has expired.",EXPIRED_CONTENT:"Video has expired.",Fullscreen:"Full Screen",GEOLOCATION_NOT_ALLOWED:"Video is not available in your country.",NOT_FOUND:"This video is unavailable.","Non-Fullscreen":"Exit Full Screen",STREAM_LIMITED:"The maximum number of concurrent streams has been reached on your account. If you have any questions or need assistance please visit es.pn/watchfaq or call 888-549-ESPN.",STREAM_LIMIT_ERROR:"The maximum number of concurrent streams has been reached on your account. If you have any questions or need assistance please visit es.pn/watchfaq or call 888-549-ESPN."}},function(a,b){a.exports={"A network error caused the video download to fail part-way.":"Un error de red ha interrumpido la descarga del vdeo.",Autoplay:"Reproduccin automtica","Caption Settings":"Opciones de subttulos",Captions:"Subttulos especiales",Chapters:"Captulos","Check out this video on ESPN":"Echa un vistazo a este video en ESPN Play","Closed Caption":"Subttulos","Closed Captions":"Subttulos","captions off":"Subttulos especiales desactivados",Copied:"Copiado",Copy:"Copiar","Copy Embed Link":"Obtener cdigo","Copy Link":"Obtener URL","Could not download the video":"No se ha podido descargar el vdeo.","Current Time":"Tiempo reproducido","Duration Time":"Duracin total","Email Video":"Enviar por Email",Email:"Enviar por correo","Embed Code":"Insertar cdigo",EMBARGOED:"El vdeo no est disponible todava.","Error Code":"Cdigo De Error",EXPIRED:"El video ha expirado.",EXPIRED_CONTENT:"El video ha expirado.",From:"De",Fullscreen:"Maximizar video",GEOLOCATION_NOT_ALLOWED:"El vdeo no est disponible en tu pas.",LIVE:"DIRECTO",Loaded:"Cargado",Message:"Mensaje",Menu:"Men",Mute:"Silenciador","No compatible source was found for this video.":"No se ha encontrado ninguna fuente compatible con este vdeo.","No video has been loaded":"No hay ningn vdeo cargado.","Non-Fullscreen":"Tamao original",NOT_FOUND:"Este vdeo no est disponible.",OK:"Aprobar",Pause:"Pausa",Play:"Reproducir","Playback Rate":"Velocidad de reproduccin",Progress:"Progreso","Remaining Time":"Tiempo restante",Replay:"Reproducir de nuevo",Send:"Enviar",Settings:"Configuracin",Share:"Compartir","Start at":"Iniciar en",Stop:"Detener",STREAM_LIMITED:"El mximo nmero de transmisiones de vdeo simultneas ha sido alcanzado en su cuenta.",STREAM_LIMIT_ERROR:"El mximo nmero de transmisiones de vdeo simultneas ha sido alcanzado en su cuenta.","Stream Type":"Tipo de secuencia",Subtitles:"Subttulos","subtitles off":"Subttulos desactivados","Technical details":"Detalles tcnicos","The video connection was lost, please confirm you are connected to the internet":"Se ha perdido la conexin al vdeo. Compruebe si su equipo est conectado a internet.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"No se ha podido cargar el vdeo debido a un fallo de red o del servidor o porque el formato es incompatible.","The video download was cancelled":"Ha interrumpido la reproduccin del vdeo.","The video is bad or in a format that cannot be played on your browser":"El vdeo est daado o tiene un formato no reproducible en su navegador.",
"The video playback was aborted due to a corruption problem or because the video used features your browser did not support.":"La reproduccin de vdeo se ha interrumpido por un problema de corrupcin de datos o porque el vdeo precisa funciones que su navegador no ofrece.","The video you're trying to watch is encrypted and we don't know how to decrypt it":"The video you're trying to watch is encrypted and we don't know how to decrypt it","This video is either unavailable or not supported in this browser":"Este vdeo no est disponible o es incompatible con este navegador.","This video is unavailable":"Este vdeo no est disponible.",To:"A",Unmute:"Eliminar silenciador",Unmuted:"Eliminar silenciador","Up Next":"A continuacin","You aborted the video playback":"Ha interrumpido la reproduccin del vdeo."}},function(a,b){a.exports={"A network error caused the media download to fail part-way.":"Um erro na rede fez o vdeo parar parcialmente.",Autoplay:"Reproduzir automaticamente","An unanticipated problem was encountered, check back soon and try again":"Aconteceu um erro inesperado, tente novamente mais tarde","Caption Settings":"Opes da legenda",Captions:"Anotaes",Chapters:"Captulos","Check out this video on ESPN":"Confira esse vdeo no WatchESPN","Closed Caption":"Legendas","Closed Captions":"Legendas","captions off":"Legendas desligadas",Copy:"Copiar","Copy Embed Link":"Copiar o link de embed","Copy Link":"Copiar o link","Could not download the video":"Ocorreu um erro durante a reproduo do vdeo, provavelmente devido a problemas na sua conexo ou em uma aba do navegador em segundo plano. Por favor, tente novamente.","Current Time":"Hora atual","Duration Time":"Tempo de durao","Email Video":"Enviar vdeo por email",Email:"Email","Embed Code":"Cdigo de embed",EMBARGOED:"Vdeo ainda no disponvel.","Error Code":"Cdigo de erro",EXPIRED:"Vdeo expirou.",EXPIRED_CONTENT:"Vdeo expirou.",From:"D",Fullscreen:"Tela cheia",GEOLOCATION_NOT_ALLOWED:"Vdeo no est disponvel no seu pas.",LIVE:"AO VIVO",Loaded:"Carregado",Message:"Mensagem",Menu:"Menu",Mute:"Mudo","No compatible source was found for this media.":"No foi encontrada fonte de vdeo compatvel.","No video has been loaded":"Nenhum vdeo foi carregado","Non-Fullscreen":"Tela Normal",NOT_FOUND:"Vdeo no disponvel.",OK:"Ok",Pause:"Pause",Play:"Play","Playback Rate":"axa de reproduo",Progress:"Progresso","Remaining Time":"Tempo restante",Replay:"Tocar novamente",Send:"Enviar",Settings:"Opes",Share:"Compartilhar","Start at":"Comear em",Stop:"Parar",STREAM_LIMITED:"O nmero mximo de conexes simultneas foi atingido em sua conta.",STREAM_LIMIT_ERROR:"O nmero mximo de conexes simultneas foi atingido em sua conta.","Stream Type":"Tipo de streaming",Subtitles:"Legendas","subtitles off":"Desligar legendas","Technical details":"Detalhes tcnicos","The media could not be loaded, either because the server or network failed or because the format is not supported.":"O vdeo no pode ser carregado, ou porque houve um problema com sua rede ou pelo formato do vdeo no ser suportado.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"A execuo foi interrompida por um problema com o vdeo ou por seu navegador no dar suporte ao seu formato.","The video connection was lost, please confirm you are connected to the internet":"A conexo com o vdeo foi perdida. Por favor, confirme que est conectado a internet","The video download was cancelled":"O download do vdeo foi cancelado","The video is bad or in a format that cannot be played on your browser":"O vdeo est em um formato que o seu browser no suporta","The video you are trying to watch is encrypted and we do not know how to decrypt it":"O vdeo que voc est tentando assistir  criptografado e ns no sabemos como decodific-lo","This video is either unavailable or not supported in this browser":"O vdeo no est disponvel ou no  suportado pelo seu browser","This video is unavailable":"Vdeo no disponvel",To:"Para",Unmute:"Ativar o som",Unmuted:"Ativar o som","Up Next":"Prximo","You aborted the media playback":"Voc parou a execuo do vdeo."}}])}),function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){!function(a,c,d){"function"==typeof define&&define.amd?define(["video",d]):"object"==typeof b&&b.exports?b.exports=d(c,window.espn||{}):(a.PLAYER=null,a.espn=a.espn||{},a.espn.video=d(c,a.espn))}(this,jQuery,function(a,c){function d(a){c.video.player&&c.video.player.playerElement&&c.video.player.playerElement.parentElement&&(c.video.player.playerElement.parentElement.removeChild(c.video.player.playerElement),PLAYER=null)}function e(a){return a=JSON.parse(JSON.stringify(a)),p.isKindle&&(a.platform="player-image"),"html5-video"===a.platform?(a.geoLocation=x,PLAYER=new u(a)):"player-image"===a.platform?(a.geoLocation=x,PLAYER=new v(a)):(a.fallingBack=!0,a.geoLocation=x,PLAYER=new u(a)),c.video.player=PLAYER,a.callback&&a.callback(PLAYER),PLAYER}function f(){var b,d=function(){c.video.play(),a.unsubscribe(b)};b=a.subscribe("espn.video.ready",d)}function g(a,b,d){if(b=b||{},b.id=a||null,b.userInitiated=d||null,b.userInitiated&&f(),!PLAYER)return c.video.embed(b);if(b.id){if(b.id!==PLAYER.clip.id||!PLAYER.getAutoPlay())return c.video.embed(b);PLAYER.playVideo()}else PLAYER.playVideo()}function h(b,c){b=b||{},b.platform=b.platform||p.getDefaultPlatform();var d=null;return w?(d=e(b),"function"==typeof c&&c(d)):a.subscribe("espn.video.locationReady",function(){w=!0,d=e(b),"function"==typeof c&&c(d)}),d}function i(){PLAYER.pauseVideo()}function j(){PLAYER.skipAd()}function k(b,c){return a.subscribe(b,c)}function l(){function b(b,d){var e=a.parseUri(b.attr("href")).queryKey.id||null,g=b.metadata(),i=b.siblings("span").html();null!==i&&a("#videoInfo").html(i),g.endCard=g.endCard||"false",(b.parent().hasClass("last")||h.children("li").length<=1)&&(g.endCard="true"),void 0===g.playRelatedExternally&&(g.playRelatedExternally="false"),"true"==g.playRelatedExternally&&(f=!1,g.endCard="true"),a("div.videoplayer").addClass("videoplayer-show"),c.video.play(e,g,d)}function d(c,d){c.addClass("active").siblings().removeClass("active"),c.next().addClass("next").siblings().removeClass("next"),0===c.next().length&&a(".video-player").hasClass("next")&&(a(".mod-video-playlist").hide(),a(".video-player").removeClass("with-playlist")),b(c.find("a"),d)}var e,f=!0,g=a("#videotoplay"),h=a(".mod-video-playlist ul");b(g,!1),h.children("li").bind("click",function(b){b.preventDefault(),f=!0,e=a(this),d(e,!0)}),a.subscribe("espn.video.complete",function(){f&&(e=h.find("li.active"),e.next().length>0&&d(e.next(),!1))})}function m(b,d){var e=b.adSet||"espn";b.SWID=a.cookie("SWID")||"",b.FRMSegment=o.AD_SEGMENTS(),"string"==typeof b.siteSection&&(b.fw_site_section_id=b.siteSection,delete b.siteSection),"string"==typeof b.videoID&&(b.videoId=b.videoID,delete b.videoID);var f=(b.trackingName||b.playerType||b.player,a.subscribe("espn.video.ready",function(){c.video.player.playerElement.setModuleParams({"freewheel-ads-manager":b});try{pcode=n.OOYALA_SETTINGS.espn.pcode,c.video.player.playerElement.setQueryStringParameters({playerBrandingId:n.OOYALA_SETTINGS[e].adPlayerBrandingId,adSetCode:n.ADInfo.adSets[pcode][e],"thruParam_espn-ui[autoPlay]":"true","thruParam_espn-ui[endCard]":"false"})}catch(a){console.log("Insert ad failed to set query string params on playerElement")}a.unsubscribe(f)}));c.video.player=PLAYER=new OoyalaPlayer(b,x,!1)}var n=function(){return{OOYALA_SETTINGS:{},applicationGUIDs:{soccerfc:{domestic:"20879ce0-ad85-4acf-b0b4-f4a91a6c1517",international:"e723ef32-c3ff-4bdb-b5b3-9fe2ca1b96ba"},espn:{domestic:"85957be9-026a-415e-a8ce-7bfdc19d5e23",international:"85957be9-026a-415e-a8ce-7bfdc19d5e23"},deportes:{domestic:"94cf98b3-19cf-4c12-9305-15e5b07488bd",international:"94cf98b3-19cf-4c12-9305-15e5b07488bd"},cricinfo:{domestic:"681b074f-2ced-4a68-a0dc-9b1465c855bd",international:"6ffb1a11-c953-4127-bd27-f2296fec5aa7"}},ADInfo:{}}}(),o={OOYALA_SETTINGS:void 0!==n?n.OOYALA_SETTINGS:{},ADInfo:void 0!==n?n.ADInfo:{},countryMap:{FSM:"FM",JAM:"JM",SHN:"SH",CXR:"CX",TLS:"TL",ROU:"RO",BTN:"BT",DJI:"DJ",KGZ:"KG",MOZ:"MZ",NOR:"NO",SYR:"SY",JPN:"JP",UZB:"UZ",FRO:"FO",IND:"IN",ARE:"AE",SYC:"SC",MNP:"MP",ARG:"AR",MNG:"MN",ARM:"AM",MNE:"ME",GEO:"GE",IMN:"IM",TJK:"TJ",KEN:"KE",GUY:"GY",ASM:"AS",SJM:"SJ",LIE:"LI",BDI:"BI",PYF:"PF",DMA:"DM",SAU:"SA",MMR:"MM",ATG:"AG",TKM:"TM",TKL:"TK",MLI:"ML",ABW:"AW",ATF:"TF",NPL:"NP",GTM:"GT",BFA:"BF",CUB:"CU",GUF:"GF",GUM:"GU",KWT:"KW",IOT:"IO",JOR:"JO",GGY:"GG",PHL:"PH",MLT:"MT",ZMB:"ZM",ATA:"AQ",BEN:"BJ",UKR:"UA",BEL:"BE",NAM:"NA",SUR:"SR",AUS:"AU",TZA:"TZ",BGD:"BD",MKD:"MK",SDN:"SD",GHA:"GH",THA:"TH",LKA:"LK",HMD:"HM",MYT:"YT",GIN:"GN",SEN:"SN",GIB:"GI",MYS:"MY",BWA:"BW",BGR:"BG",AUT:"AT",BVT:"BV",UMI:"UM",STP:"ST",HND:"HN",SWZ:"SZ",ZAF:"ZA",DZA:"DZ",KIR:"KI",VNM:"VN",TWN:"TW",CHE:"CH",BHR:"BH",BHS:"BS",AGO:"AO",SWE:"SE",CHL:"CL",CZE:"CZ",CHN:"CN",HKG:"HK",TGO:"TG",CYM:"KY",CIV:"CI",SGS:"GS",NLD:"NL",SGP:"SG",CYP:"CY",KHM:"KH",MHL:"MH",AFG:"AF",SVK:"SK",SVN:"SI",PLW:"PW",BIH:"BA",NFK:"NF",UGA:"UG",TTO:"TT",KOR:"KR",COK:"CK",YEM:"YE",COG:"CG",COD:"CD",PNG:"PG",HTI:"HT",RWA:"RW",TCA:"TC",FIN:"FI",MEX:"MX",TCD:"TD",SPM:"PM",IDN:"ID",REU:"RE",HRV:"HR",MWI:"MW",COM:"KM",VUT:"VU",TUN:"TN",COL:"CO",AZE:"AZ",TUR:"TR",POL:"PL",TUV:"TV",FJI:"FJ",GNQ:"GQ",NGA:"NG",VAT:"VA",AIA:"AI",PAN:"PA",GNB:"GW",BLM:"BL",MDV:"MV",PAK:"PK",SRB:"RS",MDG:"MG",VEN:"VE",WSM:"WS",URY:"UY",HUN:"HU",EGY:"EG",BLR:"BY",MDA:"MD",ALA:"AX",MUS:"MU",ALB:"AL",BLZ:"BZ",KNA:"KN",CMR:"CM",OMN:"OM",GMB:"GM",SSD:"SS",NIU:"NU",BMU:"BM",VCT:"VC",FLK:"FK",USA:"US",NZL:"NZ",GLP:"GP",LAO:"LA",MTQ:"MQ",NIC:"NI",PRY:"PY",ESH:"EH",PRT:"PT",CAF:"CF",ISR:"IL",KAZ:"KZ",VGB:"VG",SLE:"SL",PCN:"PN",ISL:"IS",SLB:"SB",LSO:"LS",PRI:"PR",DNK:"DK",BOL:"BO",DEU:"DE",AND:"AD",LBN:"LB",ITA:"IT",SLV:"SV",LBR:"LR",CAN:"CA",PRK:"KP",MSR:"MS",LBY:"LY",QAT:"QA",WLF:"WF",IRQ:"IQ",ETH:"ET",LCA:"LC",IRN:"IR",NCL:"NC",NRU:"NR",MCO:"MC",IRL:"IE",DOM:"DO",GRL:"GL",JEY:"JE",PSE:"PS",GAB:"GA",EST:"EE",SMR:"SM",MRT:"MR",ESP:"ES",VIR:"VI",CCK:"CC",ECU:"EC",PER:"PE",GRC:"GR",GRD:"GD",FRA:"FR",CPV:"CV",LUX:"LU",ZWE:"ZW",GBR:"GB",LVA:"LV",MAF:"MF",ERI:"ER",NER:"NE",MAR:"MA",LTU:"LT",ANT:"AN",SOM:"SO",BRN:"BN",RUS:"RU",CRI:"CR",MAC:"MO",BRA:"BR",TON:"TO",BRB:"BB"},IMG_REF:"https:"===window.location.protocol?"https://secure.espncdn.com":"http://a.espncdn.com",COOKIE_HOST:"www.espn.com",AD_SEGMENTS:window.espn&&window.espn.core&&window.espn.core.ad_segments,CMS_INFO:{espn:{videohub:"//www.espn.com/video",useExternalIdFilter:!1},deportes:{videohub:"//espndeportes.espn.com/videohub/video/indexDeportes",useExternalIdFilter:!1},intl:{videohub:"//espnfc.com/video/espnfc/index",useExternalIdFilter:!0},cric:{videohub:"//espncric.com/",useExternalIdFilter:!1}}},p=function(b){function d(a){c.fanapi?jQuery.when(c.fanapi.getAsP13n()).done(function(b){if(b&&b.mySettings){if(B=b.mySettings.videoAutoStart,!a)return b.mySettings.videoAutoStart;a(b.mySettings.videoAutoStart)}}).fail(function(){a&&a()}):c.p13n&&c.p13n.get({success:function(b){try{if(b&&b.mySettings){if(B=b.mySettings.videoAutoStart,!a)return b.mySettings.videoAutoStart;a(b.mySettings.videoAutoStart)}}catch(a){console.log("error","espn.p13n.get",a)}},error:function(){}})}function e(b,c,d,e){for(var f="",g=0;g<b.videos.length;g++)for(var h in b.videos[g]){var i={id:h,cms:b.videos[g][h].cms,url:b.videos[g][h].url};f+="id="+i.cms+":"+h+"&",b.videos[g]=i;break}if(c){var j="",k="desktop",l="wdgespge",m="espn";C?k="mobile":(w||y)&&(k="tablet"),void 0!==window.s_account&&(l=window.s_account+","+l),j+="&omniReportSuite="+l,void 0!==window.omniSite&&(m=q.getSiteSection(window.omniSite)),j+="&siteSection="+m,j+="&trackingName="+encodeURIComponent(q.getTrackingName()),a.ajax({url:"http://www.espn.com/videohub/video/util/getMinifiedClipJsonById?"+f+"device="+k+j,async:d,success:function(a){e&&e(a)}})}return b}function f(){var a=!1;try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&(a=!0)}catch(b){navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(a=!0)}return a}function g(a){a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.webkitEnterFullScreen&&a.webkitEnterFullScreen()}function h(a){a=a||{};var b=!0,e=(document.cookie.match(/VAS=([^;]+)/)||[])[1];e&&(b=m(e)),c.video.autoplay=b,d(function(d){d&&(b="2"!==d),c.video.autoplay=b,a.callback&&a.callback(b)})}function i(){return/(^|; )espn.html5=1/.test(document.cookie)}function j(b){b=b||a.noop;var d=function(a){if(!a)return b(new Error("failed to lookup valid geolocation"));var c=p.getGeoLocationFromGeoService(a);if(!c)return b(new Error("failed to determine geolocation"));b(null,c)},e=function(){var a=(document.cookie.match(/country=([^;]+)/)||[])[1]||"us";d(p.getGeoLocationFromGeoService({country:{isoCode:null,isoCodeAlpha2:(a+"").toUpperCase()}}))};window.espn&&window.espn.geo&&window.espn.geo.getLocation?c.geo.getLocation().done(d).fail(function(){c.geo.promise=null,c.geo.getLocation().done(d).fail(e)}):e()}function k(a){var b=null;a.country&&a.country.isoCode&&(b=a.country.isoCode.toUpperCase());var c=a.country.isoCodeAlpha2;return b&&!c&&D&&(c="string"==typeof D[b]?D[b].toLowerCase():b.substring(0,2).toLowerCase()),a.country.isoCodeAlpha2=c,a}function l(){var a="ooyala";return(this.isMobile||this.isIpad||this.isAndroid)&&(a=this.canPlayVideo?"html5-video":"player-image"),i()&&(a="html5-video"),a}function m(a){var b=typeof a;return"boolean"!==b&&("string"===b&&isNaN(a)?a="true"===a:(a=parseInt(a),a=1===a)),a}function n(){return n._cache||(n._cache=!1,"object"==typeof c.mem&&"boolean"==typeof c.mem.hasVideo&&(n._cache=c.mem.hasVideo)),n._cache}function o(a){return"deportes_dev"==a||"deportes_qa"==a?"deportes":"cric"==a||"cric_qa"==a||"cric_dev"==a||"cricinfo"==a||"cricinfo_qa"==a||"cricinfo_dev"==a?"cricinfo":"intl"==a||"intl_dev"==a||"intl_qa"==a?"soccerfc":a}function r(a){return"default"==a?null:a?(a+="",/\d{2,3}%/.test(a)?a:a.replace(/\D/g,"")+"px"):null}function s(a){var b="espn";return a.search(/deportes/i)>-1?b="deportes":a.search(/intl/i)>-1&&(b="intl"),b}function t(a,b,c){return b=Array.isArray(b)?b:b.split("."),a=a[b[0]]||a[parseInt(b[0],10)],a&&b.length>1?t(a,b.slice(1),c):void 0===a?c:a}var u=function(){var a=document.getElementById("video-log"),b=/(\?|&)onScreenMobileVideoDebug=true(&|$)/.test(document.location.search)||!!a;return/(\?|&)debug=true(&|$)/.test(document.location.search)||b?b?(a||(a=document.createElement("div"),Object.assign&&Object.assign(a.style,{position:"fixed",top:0,right:0,whiteSpace:"nowrap",width:"50%",height:"300px",overflow:"scroll",background:"rgba(0,0,0,.85)",color:"#fff",fontSize:"10px",lineHeight:"8px",padding:"2px 6px",boxSizing:"border-box",zIndex:9999999}),window.addEventListener("load",function(){document.body.appendChild(a)})),function(){var b=document.createElement("pre");b.innerHTML='<span style="color: #ff0033; font-weight: bold">ESPNVideo:</span> '+[].slice.call(arguments).map(function(a){return a.replace(/</g,"&lt;").replace(/>/g,"&gt;")}).join(" "),a.appendChild(b)}):window.console?function(){window.console.log.apply(window,["%cESPNVideo:","color: #ff0033; font-weight: bold"].concat([].slice.call(arguments)))}:function(){}:function(){}}(),v=function a(){return a._cache||(a._cache=document.createElement("video")),!!a._cache.canPlayType}(),w=function a(){return a._cache||(a._cache=/iPad/i.test(window.navigator.userAgent)||/Mini/i.test(window.navigator.userAgent)),a._cache}(),x=function a(){return a._cache||(a._cache=navigator.userAgent.match(/Mozilla.*\((iPhone|iPad|iPod).*like Mac OS X.*AppleWebKit/)),a._cache}(),y=function a(){return a._cache||(a.cache=navigator.userAgent.match(/Android/g)),a.cache}(),z=function a(){return a._cache||(a.cache=navigator.userAgent.match(/Silk/g)),a.cache}(),A=function a(){return a._cache||(a.cache=navigator.userAgent.match(/Nexus 4/g)&&navigator.userAgent.match(/Android 4.2/g)),a.cache}(),B=null,C=!1;navigator.userAgent.match(/Mobi/)?navigator.userAgent.match(/iPad/)||(C=!0):navigator.userAgent.match(/Tab/)||(navigator.userAgent.match(/Android/)||navigator.userAgent.match(/Touch/)&&navigator.userAgent.match(/IE/)),/[?&]html5=false/.test(window.location.search)?document.cookie="espn.html5=0; path=/; domain=espn.com":/[?&]html5=./.test(window.location.search)&&(document.cookie="espn.html5=1; path=/; domain=espn.com");var D=b.countryMap||{FSM:"FM",JAM:"JM",SHN:"SH",CXR:"CX",TLS:"TL",ROU:"RO",BTN:"BT",DJI:"DJ",KGZ:"KG",MOZ:"MZ",NOR:"NO",SYR:"SY",JPN:"JP",UZB:"UZ",FRO:"FO",IND:"IN",ARE:"AE",SYC:"SC",MNP:"MP",ARG:"AR",MNG:"MN",ARM:"AM",MNE:"ME",GEO:"GE",IMN:"IM",TJK:"TJ",KEN:"KE",GUY:"GY",ASM:"AS",SJM:"SJ",LIE:"LI",BDI:"BI",PYF:"PF",DMA:"DM",SAU:"SA",MMR:"MM",ATG:"AG",TKM:"TM",TKL:"TK",MLI:"ML",ABW:"AW",ATF:"TF",NPL:"NP",GTM:"GT",BFA:"BF",CUB:"CU",GUF:"GF",GUM:"GU",KWT:"KW",IOT:"IO",JOR:"JO",GGY:"GG",PHL:"PH",MLT:"MT",ZMB:"ZM",ATA:"AQ",BEN:"BJ",UKR:"UA",BEL:"BE",NAM:"NA",SUR:"SR",AUS:"AU",TZA:"TZ",BGD:"BD",MKD:"MK",SDN:"SD",GHA:"GH",THA:"TH",LKA:"LK",HMD:"HM",MYT:"YT",GIN:"GN",SEN:"SN",GIB:"GI",MYS:"MY",BWA:"BW",BGR:"BG",AUT:"AT",BVT:"BV",UMI:"UM",STP:"ST",HND:"HN",SWZ:"SZ",ZAF:"ZA",DZA:"DZ",KIR:"KI",VNM:"VN",TWN:"TW",CHE:"CH",BHR:"BH",BHS:"BS",AGO:"AO",SWE:"SE",CHL:"CL",CZE:"CZ",CHN:"CN",HKG:"HK",TGO:"TG",CYM:"KY",CIV:"CI",SGS:"GS",NLD:"NL",SGP:"SG",CYP:"CY",KHM:"KH",MHL:"MH",AFG:"AF",SVK:"SK",SVN:"SI",PLW:"PW",BIH:"BA",NFK:"NF",UGA:"UG",TTO:"TT",KOR:"KR",COK:"CK",YEM:"YE",COG:"CG",COD:"CD",PNG:"PG",HTI:"HT",RWA:"RW",TCA:"TC",FIN:"FI",MEX:"MX",TCD:"TD",SPM:"PM",IDN:"ID",REU:"RE",HRV:"HR",MWI:"MW",COM:"KM",VUT:"VU",TUN:"TN",COL:"CO",AZE:"AZ",TUR:"TR",POL:"PL",TUV:"TV",FJI:"FJ",GNQ:"GQ",NGA:"NG",VAT:"VA",AIA:"AI",PAN:"PA",GNB:"GW",BLM:"BL",MDV:"MV",PAK:"PK",SRB:"RS",MDG:"MG",VEN:"VE",WSM:"WS",URY:"UY",HUN:"HU",EGY:"EG",BLR:"BY",MDA:"MD",ALA:"AX",MUS:"MU",ALB:"AL",BLZ:"BZ",KNA:"KN",CMR:"CM",OMN:"OM",GMB:"GM",SSD:"SS",NIU:"NU",BMU:"BM",VCT:"VC",FLK:"FK",USA:"US",NZL:"NZ",GLP:"GP",LAO:"LA",MTQ:"MQ",NIC:"NI",PRY:"PY",ESH:"EH",PRT:"PT",CAF:"CF",ISR:"IL",KAZ:"KZ",VGB:"VG",SLE:"SL",PCN:"PN",ISL:"IS",SLB:"SB",LSO:"LS",PRI:"PR",DNK:"DK",BOL:"BO",DEU:"DE",AND:"AD",LBN:"LB",ITA:"IT",SLV:"SV",LBR:"LR",CAN:"CA",PRK:"KP",MSR:"MS",LBY:"LY",QAT:"QA",WLF:"WF",IRQ:"IQ",ETH:"ET",LCA:"LC",IRN:"IR",NCL:"NC",NRU:"NR",MCO:"MC",IRL:"IE",DOM:"DO",GRL:"GL",JEY:"JE",PSE:"PS",GAB:"GA",EST:"EE",SMR:"SM",MRT:"MR",ESP:"ES",VIR:"VI",CCK:"CC",ECU:"EC",PER:"PE",GRC:"GR",GRD:"GD",FRA:"FR",CPV:"CV",LUX:"LU",ZWE:"ZW",GBR:"GB",LVA:"LV",MAF:"MF",ERI:"ER",NER:"NE",MAR:"MA",LTU:"LT",ANT:"AN",SOM:"SO",BRN:"BN",RUS:"RU",CRI:"CR",MAC:"MO",BRA:"BR",TON:"TO",BRB:"BB"};return{debugLog:u,canPlayVideo:v,isIpad:w,isIos:x,isMobile:C,isAndroid:y,isKindle:z,needsClickToPlay:A,autoPlayHelper:h,get:t,getP13AutoStart:d,getGeoLocation:j,getGeoLocationFromGeoService:k,getDefaultPlatform:l,fullScreenRequest:g,convertToBoolean:m,checkMemHasVideo:n,getBusinessUnit:o,cleanDimension:r,hasFlashAndUsable:f,getVideoPlaylistInfo:e,getCMSFromTrackingName:s,requiresFlashUpgrade:-1!==navigator.userAgent.indexOf("Safari/537.76.4")&&-1!==navigator.userAgent.indexOf("Version/7")&&"undefined"!=typeof swfobject&&!swfobject.hasFlashPlayerVersion("14.0.0")||"undefined"!=typeof swfobject&&!swfobject.hasFlashPlayerVersion("10.0.0"),requiresFlashDownload:"undefined"!=typeof swfobject&&!swfobject.hasFlashPlayerVersion("0.0.1")}}(void 0!==o?o:{});"object"==typeof b&&b.exports&&(b.exports=p);var q=function(b){function c(a){var b=a.split(":").slice(0,3).join(":"),c=b.indexOf(":videoid");return-1===c?b:b.substr(0,c)}function d(b){var c=[];if("string"==typeof b){var d=b.split(","),e=["wdgespge","wdgespvideo","wdgespinternational","wdgesptest"];a.each(d,function(b,d){-1===a.inArray(d,e)&&c.push(d)})}return c.join(",")||null}function e(){return"cricinfo"===window.omniSite&&window.omniCt?window.omniCt.replace(/\s+/g,"-").toLowerCase():window.omniTrackingName||null}function f(){return window.omniSite||null}return{getSiteSection:c,getOmnitureAccount:d,getTrackingName:e,getOmniSite:f}}(),r=function(b,d,e){function f(f){function g(b,c,f){var g="",h="desktop",j="wdgespge",k="espn";d.isMobile||b.fallingBack?h="mobile":(d.isIpad||d.isAndroid)&&(h="tablet"),"cric"===b.cms&&(j="wdgespge"),void 0!==window.s_account&&(j=window.s_account+","+j),g+="&omniReportSuite="+j,void 0!==window.omniSite&&(k=e.getSiteSection(window.omniSite)),g+="&siteSection="+k,g+="&trackingName="+encodeURIComponent(e.getTrackingName());var l="file:"===window.location.protocol?"http:":window.location.protocol,m="";if("cric"===b.cms)m=l+"//www.espncricinfo.com/ci/content/video_audio/api/getMinifiedClipJsonById.json?id="+b.cerebroId+"&device="+h+g;else{var n="www.espn.com";document.location.search.match(/(^\?|&)useqa=true/)&&(n="www.espnqa.com"),m=l+"//"+n+"/videohub/video/util/getMinifiedClipJsonById?id="+b.id+"&cms="+r+"&device="+h+g}return"https:"===l&&(m+="&secure=true"),b={method:"GET",url:m,success:function(b){i(b),(f||a.noop)()},error:c},"undefined"!=typeof espn_ui&&espn_ui.ie8&&(b.dataType="jsonp",b.jsonpCallback="videoapi"),a.ajax(b)}function h(b,c,d){var e="https://watch.auth.api.espn.com/video/auth/getclip/"+b.cerebroId;return a.ajax({method:"GET",data:{apikey:"5p8m6dw513q716wt2os04mec3"},url:e,success:function(b){j(b),(d||a.noop)()},error:c})}function i(b){if(b.videos&&b.videos.length>0){var e=b.videos[0],g=e.lang;if(o=e.id,t.embargoDate=e.timeRestrictions.embargoDate,t.expirationDate=e.timeRestrictions.expirationDate,v&&v.full&&v.full.href&&""!==v.full.href.trim||(v.full.href=e.posterImages.full.href),"object"==typeof e.geoRestrictions&&(u.type=e.geoRestrictions.type,u.countries=e.geoRestrictions.countries),e&&e.links&&"object"==typeof e.links.mobile){if(e.links.mobile.href?w.mobile.href=e.links.mobile.href:e.links.source.full.href&&(w.mobile.href=e.links.source.full.href),e.links.mobile.omniHref&&(w.mobile.omniHref=e.links.mobile.omniHref.replace(/.m.espn/,""),c&&c.core&&c.core.SWID&&(w.mobile.omniHref=w.mobile.omniHref+"&c2="+c.core.SWID)),d.isIpad&&e.links.source&&e.links.source.HLS&&(w.mobile.href=e.links.source.HLS.href),w.mobile.href&&f.siteSection&&w.mobile.href.match(/unicorn/)){var h=-1!==w.mobile.href.indexOf("?")?"&":"?";w.mobile.href+=h+"UMADPARAMcsid="+f.siteSection}e.links.textTrack&&(d.debugLog("API (getMinifiedClipJsonById) returned VTT: "+e.links.textTrack),w.textTrack={type:"Subtitle",lang:g,url:e.links.textTrack}),e.links.adlessClip&&(d.debugLog("API (getMinifiedClipJsonById) returned ad-less Clip: "+e.links.adlessClip),w.adlessClip=e.links.adlessClip)}}else a.publish("espn.video.unavailable",[this,"Clip not found"])}function j(a){var c=a.clip;if(c){p=c._id,t.embargoDate=c.videoRights.embargoDate,t.expirationDate=c.videoRights.expirationDate,v&&v.full&&v.full.href&&""!==v.full.href.trim||(v.full.href=b.IMG_REF+c.mezzaninePathImage);var e={domestic:"en",deportes:"es"}[c.site]||"en",f=c.videoRights.geoTargetType;"inclusion"===f&&(f="whitelist"),"exclusion"===f&&(f="blacklist"),u.type=f;var g=c.videoRights.geoTargets;"[object Array]"===Object.prototype.toString.call(g)&&(u.countries=g);var h=d.getBusinessUnit(r);c.syndicationDetails[h]||c.syndicationDetails.domestic&&(h="domestic"),"object"==typeof c.syndicationDetails[h]&&("object"==typeof c.syndicationDetails[h].cms&&(o=c.syndicationDetails[h].cms.syndicationId),"object"==typeof c.syndicationDetails[h].brightcove?w.mobile.href=c.syndicationDetails[h].brightcove.url:"object"==typeof c.syndicationDetails[h].ooyala&&(w.mobile.href=c.syndicationDetails[h].ooyala.url),"object"==typeof c.syndicationDetails[h].ooyala&&(q=c.syndicationDetails[h].ooyala.syndicationId),"object"==typeof c.syndicationDetails[h].threeplay&&(d.debugLog("API (Shield) returned VTT: "+c.syndicationDetails[h].threeplay.url),w.textTrack={type:"Subtitle",lang:e,url:c.syndicationDetails[h].threeplay.url}),c.transcodes&&c.transcodes.primary_mezzanine&&(d.debugLog("API (Shield) returned ad-less Clip: "+c.transcodes.primary_mezzanine),w.adlessClip=c.transcodes.primary_mezzanine))}}function k(){return Date.parse(t.expirationDate)<Date.parse((new Date).toGMTString())}function l(){return Date.parse(t.embargoDate)>Date.parse((new Date).toGMTString())}function m(a){var b=!1,c=u.type,d=u.countries;if(d.length>0){var e=a.country.isoCodeAlpha2;if(e){e=e.toLowerCase(),"whitelist"===c?b=!0:"blacklist"===c&&(b=!1);for(var f=0,g=d.length;f<g;f++)if(d[f].toLowerCase()===e){"whitelist"===c?b=!1:"blacklist"===c&&(b=!0);break}}else b=!0}return b}function n(){var a={};if(a.status="success",a.data="",k())a.status="fail",a.message="This video is no longer available";else if(l())a.status="fail",a.message="This video is not yet available";else if(m(s)){a.status="fail";var b=s.country.isoCodeAlpha2;a.message="This video is not authorized for your location","string"==typeof b&&(a.message+=" ("+b.toUpperCase()+")")}return a}f=f||{};var o=f.id||null,p=f.guid||null,q=null,r=f.cms||null,s=(f.cms,f.geoLocation||{}),t={embargoDate:null,expirationDate:null},u={type:null,countries:[]},v={full:{href:f.thumbnailURL}},w={mobile:{href:null,omniHref:null},textTrack:null};this.loadAPIClip=g,this.loadCerebroClip=h,this.id=o,this.guid=p,this.ooyalaId=q,this.links=w,this.posterImages=v,this.isExpired=k,this.isEmbargoed=l,this.isGeoRestricted=m,this.getRestrictions=n}return f}(o,p,q),s=function(b,d,e,f){function g(){this.isPlaying=!1,this.playerReady=!1,this.playType=null,this.playVerified=!1,this.autoPlay=!1,this.autoClose=!0,this.width=null,this.height=null,this.cms=null,this.clip=null,this.targetReplaceId=null,this.targetElement=null,this.$targetElement=null,this.$container=null,this.playerElement=null,this.$playerElement=null,this.onErrorBehavior=null,this.hasPlaylist=null,this.videoPlaylist=null,this.currentIndex=null,this.originalIndex=null,this.playlistPasses=0,this.useExternalIdFilter=null,this.iterationCount=1,this.currentPlayingId=null,this.showPoster=!1,this.setDefaults=function(c){c=c||{},this.playType=null,this.autoPlay=this.getAutoPlay(c),c.height=c.height||"default",c.width=c.width||"default",this.height=d.cleanDimension(c.height),this.width=d.cleanDimension(c.width),this.cms=c.cms||"espn",c.cms=this.cms,c.playerBrandingId&&(this.playerBrandingId=c.playerBrandingId),this.clip=new e(c),this.hasPlaylist=!!c.videoPlaylist,this.videoPlaylist=this.hasPlaylist?d.getVideoPlaylistInfo(c.videoPlaylist):null,this.currentIndex=this.hasPlaylist&&c.videoPlaylist.startIndex?c.videoPlaylist.startIndex:0,this.currentPlayingId=this.hasPlaylist?this.videoPlaylist.videos[this.currentIndex].id:null,this.originalIndex=this.currentIndex,this.hasPlaylist&&c.videoPlaylist.iterationCount&&(this.iterationCount=c.videoPlaylist.iterationCount),this.targetReplaceId=c.targetReplaceId||"videoPlayer";var f,g=a("#"+this.targetReplaceId);0===g.length?(f=a(".videoplayer")||a("body"),f.html('<div id="'+this.targetReplaceId+'"></div>'),g=a("#"+this.targetReplaceId)):f=g.parent(),this.$targetElement=g,this.$container=f,d.checkMemHasVideo()&&f.addClass("videoplayer-show"),this.targetElement=document.getElementById(this.targetReplaceId),a.publish("espn.video.container.ready",[this.$container]),a.publish("espn.video.targetReady",[this.targetReplaceId]),this.playerElement=null,$playerElement=null,onErrorBehavior=c.onErrorBehavior||"default",void 0!==c.useExternalIdFilter?this.useExternalIdFilter=c.useExternalIdFilter:this.useExternalIdFilter=b.CMS_INFO[this.cms].useExternalIdFilter,"boolean"==typeof c.showPoster&&(this.showPoster=c.showPoster)},this.handleErrors=function(b){if(a.publish("espn.video.unavailable",[this,b]),"message"===onErrorBehavior)this.displayError(b);else if("image"===this.onErrorBehavior){var c="default"==this.width?"":this.width,d="default"==this.height?"":this.height;a("#"+this.targetReplaceId).replaceWith('<img id="'+this.targetReplaceId+'" src="'+this.clip.posterImages.full.href+'" width="'+c+'" height="'+d+'" />')}else"hide"===this.onErrorBehavior&&a("#"+this.targetReplaceId).hide()},this.displayError=function(c){c="string"==typeof c?c+"<br />":"";var d="default"==this.width?"":this.width,e="default"==this.height?"":this.height,f=a('<div id="'+this.targetReplaceId+'" class="imageHolder"></div>').css("position","relative"),g=a('<img src="'+this.clip.posterImages.full.href+'" width="'+d+'" height="'+e+'">');f.append(g);var h=a('<div class="message">CONTENT UNAVAILABLE: '+c+"</div>").css({"font-family":"klavika, arial, sans-serif","font-size":"24px","text-decoration":"none","text-align":"center",position:"absolute",width:"100%",top:"50%",color:"#FFF","text-shadow":"black 0.1em 0.1em 0.2em"});f.append(h);var i=b.CMS_INFO[this.cms].videohub;f.css("cursor","pointer").click(function(){window.location.href=i}),a("#"+this.targetReplaceId).replaceWith(f)},this.setAutoPlay=function(a){this.autoPlay=a;var d=this.autoPlay?"1":"2";if(window.location.hostname.match(/\.espn\.com$/)){(new Image).src="http://"+b.COOKIE_HOST+"/personalization/setAutoStart?vasPref="+d+"&rand="+new Date}else c.cookie.set("VAS",d,366);c.fanapi?c.fanapi.updateProfile({settings:{videoAutoStart:{value:d.toString()}}},{success:function(){},error:function(){}}):c.p13n&&c.p13n.update({mySettings:{videoAutoStart:d}},{success:function(){},error:function(){}})},this.getAutoPlay=function(a,b,c){a=a||{},a.autoPlay=a.autoPlay||a.autoplay||a.autostart||a.autoStart||null,a.callback=c,d.autoPlayHelper(a)},this.getClipUrl=function(a,b,c){return a},this.getPlayType=function(a,b){if(a.playType&&b)b(a.playType);else{var c=function(a){var c=a?"autoplay":"manual";b&&b(c)};a.autoPlay?c(a.autoPlay):this.getAutoPlay(a,null,c)}},this.getOmniClipUrl=function(a,b,c){var e=d.getBusinessUnit(this.cms);return a&&(a=c.country&&c.country.isoCodeAlpha2&&"US"!=c.country.isoCodeAlpha2.toUpperCase()?a.replace(f.applicationGUIDs[e].domestic,f.applicationGUIDs[e].international):a.replace(f.applicationGUIDs[e].international,f.applicationGUIDs[e].domestic)),a},this.skipAd=function(){},this.pauseVideo=function(){}}return g}(o,p,r,n),t=function(a){return/^[0-9]*$/.test(a)||"string"==typeof a&&-1!==a.indexOf(":")},u=function(b,d,e){function f(b){function e(b,c){if(s="",!b&&u.clip&&u.clip.links&&u.clip.links.mobile&&u.clip.links.mobile.href){a.publish("espn.video.embed.begin");var d=u.clip.getRestrictions();if("fail"===d.status)return void u.handleErrors(d.message);h(u.getClipUrl(u.clip.links.mobile.href,u.cms,x),u.clip.posterImages.full.href)}else b?h(b,c):u.handleErrors("")}function f(b,c,d){var e=function(a,b){var c=36e5*parseInt(a[1],10)+6e4*parseInt(a[2],10)+1e3*parseInt(a[3],10)+parseInt(a[4],10),d=c+b,e=Math.floor(d/1e3%60),f=Math.floor(d/6e4%60),g=Math.floor(d/36e5%24);return(g?("00"+g).slice(-2):"00")+":"+(f?("00"+f).slice(-2):"00")+":"+("00"+e).slice(-2)+"."+("000"+e).slice(-3)};a.ajax({url:b.url,dataType:"text",success:function(a){var f,h="",i=[];try{if(!a||!(a.match(/(\d{2}):(\d{2}):(\d{2}).(\d{3})/g)||[]).length)return d(null,a);for(;i;)i=a.match(g),i?(h+=a.substring(0,i.index),f=e(i,c),h+=f,a=a.substring(i.index+f.length)):h+=a;window.URL&&window.Blob?b.url=URL.createObjectURL(new Blob([h],{type:"text/plain"})):b.url="data:text/vtt;base64,"+btoa(h)}catch(a){return d(a)}d(null,b)},error:function(a){d(a)}})}function h(b,c,e){var h="//once.unicornmedia.com/now/od/auto/",j=function(a,e){var f=d.get(u,"clip.links.textTrack.url")||"",g=d.get(u,"clip.links.adlessClip")
;0===f.indexOf("blob:")||0===f.indexOf("data:")?s="MANUALLY_OFFSET_ESPN_VTT":-1!==f.indexOf("unicornmedia.com")?s="BRIGHTCOVE_VTT":/^(http|https):\/\/media.video-cdn.espn.com/.test(f)?s="ORIGINAL_ESPN_VTT":f&&(s="UNKNOWN"),s?d.debugLog("Video player will use VTT type: "+s):d.debugLog("Video player does not have a VTT to use"),g&&"ORIGINAL_ESPN_VTT"===s?(d.debugLog("Use ad-less clip with original VTT"),i(g,c)):i(b,c)};/(\?|&)onceux=false/.test(window.location.search)||-1===b.indexOf(h)?j():(d.debugLog("Video URL looks like a brightcove URL "+b+", rewrite it to return JSON data potentially including a VTT"),/(\?|&)testux=true/.test(window.location.search)?(d.debugLog("Forcing video to hit a Brightcove endpoint with a processed VTT file. The resulting video that plays will not correspond to the video originally played!"),b="http://once.unicornmedia.com/now/ads/vmap/od/auto/4d993388-8b49-4f34-9e48-87906e690281/aab9a505-05a5-4777-a2a0-f64d5adc35e4/f6d9486a-5837-4fe0-a74b-9b21335fb1f3/content.once?UMADPARAMreferer=http://www.espn.com/video/clip?id=19675353"):b=b.replace(h,"//onceux.unicornmedia.com/now/ads/vmap/od/auto/"),d.debugLog("Fetching data from Brightcove with "+b+"&timedtextextension=vtt&output=1"),a.ajax({url:b,data:{timedtextextension:"vtt",output:1},success:function(a){var c=d.get(a,"vmap:VMAP.vmap:Extensions"),e=d.get(u,"clip.links")||{},h=c["uo:timedTextURL"];if(b=d.get(c,"uo:unicornOnce.@contenturi")||b,h)d.debugLog("Brightcove returned a processed VTT file"),e.textTrack={type:h["@type"],lang:h["@languageCode"],url:h["#cdata-section"]},j();else if(e.textTrack&&window.btoa){d.debugLog("Brightcove does not have a processed VTT available. Attempt to manually offset original VTT.");var i=0,k=d.get(a,"vmap:VMAP.vmap:AdBreak.vmap:AdSource.vmap:VASTData.VAST.Ad.InLine.Creatives.Creative")||{};k=k instanceof Array?k[0]:k;var l=d.get(k,"Linear.Duration");if(l){var m=l.match(g);i=36e5*parseInt(m[1],10)+6e4*parseInt(m[2],10)+1e3*parseInt(m[3],10)+parseInt(m[4],10)}i?f(e.textTrack,i,j):(d.debugLog("Could not find an ad duration, no need to offset original VTT"),j())}else e.textTrack&&d.debugLog("Browser incapable of using orignal VTT w/ offset."),j()},error:j}))}function i(b,c,e){var f=!1,g=b;if(y&&("uk"!=y&&"gb"!=y||d.isIos&&(f=!0)),f&&g&&g.match(/unicornmedia\.com/)&&(g=g.replace(/^http:\/\//,"https://")),u.$playerElement=u.$playerElement||a("<video>"),!d.needsClickToPlay&&u.$playerElement.get(0)&&u.$playerElement.get(0).pause(),u.$playerElement.attr("id",u.targetReplaceId),u.$playerElement.attr("src",g),u.$playerElement.attr("autobuffer","autobuffer"),u.$playerElement.attr("controls","controls"),(/crossOriginVTT=true/.test(window.location.search)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor))&&(d.debugLog('Adding crossorigin="anonymous" attribute so we can use VTT as required by Chrome, but breaks Safari. Looks like this is Chrome '+navigator.userAgent),u.$playerElement.attr("crossorigin","anonymous")),d.isMobile&&!u.showPoster||u.$playerElement.attr("poster",c),u.$playerElement.css({width:u.width,height:u.height}),u.$playerElement.promise().done(p()),u.$targetElement.replaceWith(u.$playerElement),u.$targetElement=u.$playerElement,d.needsClickToPlay||a("#"+u.targetReplaceId)[0].play(),u.$playerElement.bind("webkitendfullscreen",q),u.$playerElement.bind("contextmenu",function(){return!1}),d.isAndroid||d.needsClickToPlay){var h=u.$playerElement[0];u.$playerElement.click(function(){v&&"paused"!==u.state||d.fullScreenRequest(h)}),a(document).on("webkitfullscreenchange",function(){document.webkitIsFullScreen||h.pause()}),a(document).on("mozfullscreenchange",function(){document.mozFullScreen||h.pause()}),a(document).on("fullscreenchange",function(){document.fullscreen||h.pause()})}}function j(b){setTimeout(function(){u.clip.loadAPIClip(b,u.handleErrors.bind(u),function(){if(u.clip&&u.clip.links&&u.clip.links.mobile&&u.clip.links.mobile.omniHref){var b=u.clip.links.mobile.omniHref,c=a.cookie("viAppId");if(null!==c&&(b+="&vid="+c),"undefined"!=typeof s_omni&&void 0!==s_omni.visitor&&s_omni.visitor.getAnalyticsVisitorID()){b+="&aid="+s_omni.visitor.getAnalyticsVisitorID()}s&&(b+="&vttType="+s);(new Image).src=b+"&rand="+ +new Date,u.hasTracked=!0}})})}function k(){try{u.$playerElement[0].play()}catch(a){}}function l(){try{u.$playerElement[0].pause()}catch(a){}}function m(a){a=a||{},u.hasPlaylist?(u.currentIndex=u.currentIndex+1>=u.videoPlaylist.videos.length&&u.videoPlaylist.continuous?0:u.currentIndex+1,u.currentIndex===u.originalIndex&&u.playlistPasses++,u.currentIndex<u.videoPlaylist.videos.length&&u.playlistPasses<u.iterationCount&&(a.id=u.videoPlaylist.videos[u.currentIndex].id,u.clip=new r(a),u.clip.loadAPIClip(a,u.handleErrors.bind(u),e))):(l(),a.id?u.clip.loadAPIClip(a,u.handleErrors.bind(u),function(){n()}):a.cerebroId?u.handleErrors("switching by cerebro id not yet enabled"):u.handleErrors("no clip id specified"),d.checkMemHasVideo()&&u.$container.addClass("videoplayer-show"))}function n(){u.$playerElement.attr("src",u.clip.links.mobile.href),u.$playerElement.attr("poster",u.clip.posterImages.full.href);a.publish("espn.video.embedCodeChanged",["switch"]),a.publish("espn.video.switch",[u.autoPlay,u.clip.id,u.clip.posterImages.full.href])}function o(b){var c=b.type;switch(c){case"canplay":u.playerReady=!0,u.state="ready",a.publish("espn.video.ready",[b,u.targetReplaceId,c,"espn.video.ready",u.currentPlayingId]),a.publish("espn.video.init",[b,u.targetReplaceId,c,"espn.video.init",u.currentPlayingId]);a.publish("espn.video.embedCodeChanged",["init"]);break;case"ended":a.publish("espn.video.complete",[b,u.targetReplaceId,c]),u.$playerElement&&u.autoClose&&"function"==typeof u.$playerElement[0].webkitExitFullScreen&&u.$playerElement[0].webkitExitFullScreen(),u.hasPlaylist&&m();break;case"error":u.handleErrors(),u.state="error",a.publish("espn.video.error",[b,w]);break;case"loadstart":u.playerElement=document.getElementById(u.targetReplaceId),u.playerElement&&(u.playerElement.onmouseover=function(){a.publish("espn.video.hoverIn")},u.playerElement.onmouseout=function(){a.publish("espn.video.hoverOut")});break;case"loadedmetadata":d.debugLog('"loadedmetadata" fired, check for textTrack');var e=d.get(u,"clip.links.textTrack");if(e){d.debugLog('Appending <track src="'+e.url+'" ...> to video player');u.$playerElement.append('<track src="'+e.url+'" kind="subtitles" srclang="'+e.lang+'" label="CC">')}else d.debugLog("No text track available");break;case"pause":u.state="paused",u.isPlaying=!1,a.publish("espn.video.pause",[b,u.targetReplaceId,c]);break;case"play":if(v=!0,u.state="playing",u.isPlaying=!0,d.isMobile&&u.$playerElement&&u.$playerElement[0]){var f=u.$playerElement[0],g=f.requestFullscreen||f.webkitRequestFullscreen||f.webkitEnterFullscreen;if("function"==typeof g)try{g.call(f)}catch(a){}}if(!u.hasTracked)if(u.clip&&u.clip.links&&u.clip.links.mobile&&u.clip.links.mobile.omniHref){var h=u.clip.links.mobile.omniHref,i=a.cookie("viAppId");if(null!==i&&(h+="&vid="+i),"undefined"!=typeof s_omni&&void 0!==s_omni.visitor&&s_omni.visitor.getAnalyticsVisitorID()){var k=s_omni.visitor.getAnalyticsVisitorID();h+="&aid="+k}s&&(h+="&vttType="+s);var l=new Image;l.src=h+"&rand="+ +new Date,u.hasTracked=!0}else u.inlineData&&j(u.inlineData);a.publish("espn.video.play",[b,u.targetReplaceId,c]);break;case"seeked":a.publish("espn.video.seeked",[b,u.targetReplaceId]);break;case"timeupdate":a.publish("espn.video.playheadTimeChanged",[b,u.targetReplaceId,c]);break;case"volumechange":a.publish("espn.video.volumeChanged",[b,u.targetReplaceId,c])}}function p(){for(var a=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","mozaudioavailable","play","pause","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],b=0,c=a.length;b<c;b++)u.$playerElement.bind(a[b],a[b],o)}function q(){try{"FullscreenOff"==(document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen?"FullscreenOn":"FullscreenOff")&&(b&&b.removeOnClose?u.$playerElement.remove():a.publish("espn.video.videoClosed",[]))}catch(a){}}var s,u=this,v=null,w=null;u.hasTracked=!1,b=b||{},u.setDefaults(b);var x=b.geoLocation,y=null;x&&x.country&&x.country.isoCodeAlpha2?y=x.country.isoCodeAlpha2.toLowerCase():a.cookie("country")?y=a.cookie("country"):c&&c.geo&&c.geo.getLocation().done(function(a){a&&_.get(a,["country","isoCodeAlpha2"])&&(y=a.country.isoCodeAlpha2.toLowerCase())}),t(b.id)||b.cerebroId||(b.cerebroId=b.id,delete b.id,b.cms||(b.cms="cric",u.cms="cric")),b.url&&d.debugLog("We can no longer use video URL directly, since we want to check brightcove for processed VTT (closed captions for commercial AND original video clip)"),b.id||"cric"===b.cms&&b.cerebroId?u.clip.loadAPIClip(b,u.handleErrors.bind(u),e):b.cerebroId?u.clip.loadCerebroClip(b,u.handleErrors.bind(u),e):b.videoPlaylist?(u.videoPlaylist.videos[u.currentIndex].url,b.id=u.videoPlaylist.videos[u.currentIndex].id,u.clip.loadAPIClip(b,u.handleErrors.bind(u),e)):e(),u.$playerElement=u.$playerElement||a("<video>"),d.needsClickToPlay||u.$playerElement[0].play(),this.switchVideo=m,this.playVideo=k,this.pauseVideo=l,this.exit=q,this.state=null,this.ready=!1}var g=/(\d{2}):(\d{2}):(\d{2}).(\d{3})/;return f.prototype=new b,f}(s,p),v=function(b,c,d){function e(b){function e(){a.publish("espn.video.embed.begin");var b=f.clip.getRestrictions();if("fail"===b.status)return void f.handleErrors(b.message);var e="default"==f.width?"":f.width,h="default"==f.height?"":f.height,i=a('<div id="'+f.targetReplaceId+'"></div>'),j=a('<div class="imageHolderParent"></div>'),k=a('<div class="imageHolderChild"></div>'),l=a('<div class="faux-player"></div>'),m=a('<img src="'+f.clip.posterImages.full.href+'" class="faux-player-image" height="'+h+'" width="'+e+'"/>'),n=f.getClipUrl(f.clip.links.mobile.href,f.cms,g),o=n||c.CMS_INFO[f.cms].videohub,p=a('<a class="faux-player-button" href="'+o+'" target="_blank"></a>');i.css({display:"inline-block",width:e,height:h,overflow:"hidden"}),j.css({display:"table"}),k.css({display:"table-cell","vertical-align":"middle"}),l.css({position:"relative"}),m.css({display:"block","max-width":"100%","margin-left":"auto","margin-right":"auto",position:"relative","z-index":"10"}),p.hover(function(){a(this).css({"background-position":"0px 0px"})},function(){a(this).css({"background-position":"0px -59px"})}),p.css({"z-index":"20",top:"50%",left:"50%",color:"#FFF",cursor:"pointer",position:"absolute","font-family":"klavika, arial, sans-serif","font-size":"20px","text-decoration":"none","background-image":"url('"+c.IMG_REF+"/prod/assets/video/play-btn.png')","background-position":"0px -59px",width:"57px",height:"57px","margin-left":"-27.5px","margin-top":"-27.5px"}),l.append(m),l.append(p),k.append(l),j.append(k),i.append(j),a("#"+f.targetReplaceId).replaceWith(i),d.isKindle&&window.open(n)}var f=this;b=b||{};var g=b.geoLocation;f.setDefaults(b),b.id?f.clip.loadAPIClip(b,a.noop,e):b.cerebroId?f.clip.loadCerebroClip(b,a.noop,e):e()}return e.prototype=new b,e}(s,o,p),w=!1,x={country:{isoCode:null,isoCodeAlpha2:null}};return c&&c.geo&&c.geo.getLocation&&c.geo.getLocation().done(function(b){x=p.getGeoLocationFromGeoService(b),w=!0,a.publish("espn.video.locationReady")}).fail(function(){c.geo.promise=null,c.geo.getLocation().done(function(b){x=p.getGeoLocationFromGeoService(b),w=!0,a.publish("espn.video.locationReady")}).fail(function(){var b=a.cookie("country");"string"==typeof b&&(b=b.toUpperCase()),x=p.getGeoLocationFromGeoService({country:{isoCode:null,isoCodeAlpha2:b}}),w=!0,a.publish("espn.video.locationReady")})}),p.getP13AutoStart(),{player:PLAYER,embedded:{play:l},remove:d,getAutoPlay:p.autoPlayHelper,embed:h,play:g,pause:i,skipAd:j,subscribe:k,insertAd:m}})},{}],2:[function(a,b,c){(function(a,d){!function(a){if("object"==typeof c&&void 0!==b)b.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var e;"undefined"!=typeof window?e=window:void 0!==d?e=d:"undefined"!=typeof self&&(e=self),e.Promise=a()}}(function(){var b,c,e;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof _dereq_&&_dereq_;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof _dereq_&&_dereq_,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";b.exports=function(a){function b(a){var b=new c(a),d=b.promise();return b.setHowMany(1),b.setUnwrap(),b.init(),d}var c=a._SomePromiseArray;a.any=function(a){return b(a)},a.prototype.any=function(){return b(this)}}},{}],2:[function(b,c,d){"use strict";function e(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new k(16),this._normalQueue=new k(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var a=this;this.drainQueues=function(){a._drainQueues()},this._schedule=j}function f(a,b,c){this._lateQueue.push(a,b,c),this._queueTick()}function g(a,b,c){this._normalQueue.push(a,b,c),this._queueTick()}function h(a){this._normalQueue._pushOne(a),this._queueTick()}var i;try{throw new Error}catch(a){i=a}var j=b("./schedule"),k=b("./queue"),l=b("./util");e.prototype.setScheduler=function(a){var b=this._schedule;return this._schedule=a,this._customScheduler=!0,b},e.prototype.hasCustomScheduler=function(){return this._customScheduler},e.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},e.prototype.disableTrampolineIfNecessary=function(){l.hasDevTools&&(this._trampolineEnabled=!1)},e.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},e.prototype.fatalError=function(b,c){c?(a.stderr.write("Fatal "+(b instanceof Error?b.stack:b)+"\n"),a.exit(2)):this.throwLater(b)},e.prototype.throwLater=function(a,b){if(1===arguments.length&&(b=a,a=function(){throw b}),"undefined"!=typeof setTimeout)setTimeout(function(){a(b)},0);else try{this._schedule(function(){a(b)})}catch(a){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},l.hasDevTools?(e.prototype.invokeLater=function(a,b,c){this._trampolineEnabled?f.call(this,a,b,c):this._schedule(function(){setTimeout(function(){a.call(b,c)},100)})},e.prototype.invoke=function(a,b,c){this._trampolineEnabled?g.call(this,a,b,c):this._schedule(function(){a.call(b,c)})},e.prototype.settlePromises=function(a){this._trampolineEnabled?h.call(this,a):this._schedule(function(){a._settlePromises()})}):(e.prototype.invokeLater=f,e.prototype.invoke=g,e.prototype.settlePromises=h),e.prototype.invokeFirst=function(a,b,c){this._normalQueue.unshift(a,b,c),this._queueTick()},e.prototype._drainQueue=function(a){for(;a.length()>0;){var b=a.shift();if("function"==typeof b){var c=a.shift(),d=a.shift();b.call(c,d)}else b._settlePromises()}},e.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},e.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},e.prototype._reset=function(){this._isTickUsed=!1},c.exports=e,c.exports.firstLineError=i},{"./queue":26,"./schedule":29,"./util":36}],3:[function(a,b,c){"use strict";b.exports=function(a,b,c,d){var e=!1,f=function(a,b){this._reject(b)},g=function(a,b){b.promiseRejectionQueued=!0,b.bindingPromise._then(f,f,null,this,a)},h=function(a,b){0==(50397184&this._bitField)&&this._resolveCallback(b.target)},i=function(a,b){b.promiseRejectionQueued||this._reject(a)};a.prototype.bind=function(f){e||(e=!0,a.prototype._propagateFrom=d.propagateFromFunction(),a.prototype._boundValue=d.boundValueFunction());var j=c(f),k=new a(b);k._propagateFrom(this,1);var l=this._target();if(k._setBoundTo(j),j instanceof a){var m={promiseRejectionQueued:!1,promise:k,target:l,bindingPromise:j};l._then(b,g,void 0,k,m),j._then(h,i,void 0,k,m),k._setOnCancel(j)}else k._resolveCallback(l);return k},a.prototype._setBoundTo=function(a){void 0!==a?(this._bitField=2097152|this._bitField,this._boundTo=a):this._bitField=-2097153&this._bitField},a.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},a.bind=function(b,c){return a.resolve(c).bind(b)}}},{}],4:[function(a,b,c){"use strict";function d(){try{Promise===f&&(Promise=e)}catch(a){}return f}var e;"undefined"!=typeof Promise&&(e=Promise);var f=a("./promise")();f.noConflict=d,b.exports=f},{"./promise":22}],5:[function(a,b,c){"use strict";var d=Object.create;if(d){var e=d(null),f=d(null);e[" size"]=f[" size"]=0}b.exports=function(b){function c(a,c){var d;if(null!=a&&(d=a[c]),"function"!=typeof d){var e="Object "+h.classString(a)+" has no method '"+h.toString(c)+"'";throw new b.TypeError(e)}return d}function d(a){return c(a,this.pop()).apply(a,this)}function e(a){return a[this]}function f(a){var b=+this;return b<0&&(b=Math.max(0,b+a.length)),a[b]}var g,h=a("./util"),i=h.canEvaluate;h.isIdentifier;b.prototype.call=function(a){var b=[].slice.call(arguments,1);return b.push(a),this._then(d,void 0,void 0,b,void 0)},b.prototype.get=function(a){var b,c="number"==typeof a;if(c)b=f;else if(i){var d=g(a);b=null!==d?d:e}else b=e;return this._then(b,void 0,void 0,a,void 0)}}},{"./util":36}],6:[function(a,b,c){"use strict";b.exports=function(b,c,d,e){var f=a("./util"),g=f.tryCatch,h=f.errorObj,i=b._async;b.prototype.break=b.prototype.cancel=function(){if(!e.cancellation())return this._warn("cancellation is disabled");for(var a=this,b=a;a._isCancellable();){if(!a._cancelBy(b)){b._isFollowing()?b._followee().cancel():b._cancelBranched();break}var c=a._cancellationParent;if(null==c||!c._isCancellable()){a._isFollowing()?a._followee().cancel():a._cancelBranched();break}a._isFollowing()&&a._followee().cancel(),a._setWillBeCancelled(),b=a,a=c}},b.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},b.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},b.prototype._cancelBy=function(a){return a===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},b.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},b.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),i.invoke(this._cancelPromises,this,void 0))},b.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},b.prototype._unsetOnCancel=function(){this._onCancelField=void 0},b.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},b.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},b.prototype._doInvokeOnCancel=function(a,b){if(f.isArray(a))for(var c=0;c<a.length;++c)this._doInvokeOnCancel(a[c],b);else if(void 0!==a)if("function"==typeof a){if(!b){var d=g(a).call(this._boundValue());d===h&&(this._attachExtraTrace(d.e),i.throwLater(d.e))}}else a._resultCancelled(this)},b.prototype._invokeOnCancel=function(){var a=this._onCancel();this._unsetOnCancel(),i.invoke(this._doInvokeOnCancel,this,a)},b.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},b.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(a,b,c){"use strict";b.exports=function(b){function c(a,c,h){return function(i){var j=h._boundValue();a:for(var k=0;k<a.length;++k){var l=a[k];if(l===Error||null!=l&&l.prototype instanceof Error){if(i instanceof l)return f(c).call(j,i)}else if("function"==typeof l){var m=f(l).call(j,i);if(m===g)return m;if(m)return f(c).call(j,i)}else if(d.isObject(i)){for(var n=e(l),o=0;o<n.length;++o){var p=n[o];if(l[p]!=i[p])continue a}return f(c).call(j,i)}}return b}}var d=a("./util"),e=a("./es5").keys,f=d.tryCatch,g=d.errorObj;return c}},{"./es5":13,"./util":36}],8:[function(a,b,c){"use strict";b.exports=function(a){function b(){this._trace=new b.CapturedTrace(d())}function c(){if(e)return new b}function d(){var a=f.length-1;if(a>=0)return f[a]}var e=!1,f=[];return a.prototype._promiseCreated=function(){},a.prototype._pushContext=function(){},a.prototype._popContext=function(){return null},a._peekContext=a.prototype._peekContext=function(){},b.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,f.push(this._trace))},b.prototype._popContext=function(){if(void 0!==this._trace){var a=f.pop(),b=a._promiseCreated;return a._promiseCreated=null,b}return null},b.CapturedTrace=null,b.create=c,b.deactivateLongStackTraces=function(){},b.activateLongStackTraces=function(){var c=a.prototype._pushContext,f=a.prototype._popContext,g=a._peekContext,h=a.prototype._peekContext,i=a.prototype._promiseCreated;b.deactivateLongStackTraces=function(){a.prototype._pushContext=c,a.prototype._popContext=f,a._peekContext=g,a.prototype._peekContext=h,a.prototype._promiseCreated=i,e=!1},e=!0,a.prototype._pushContext=b.prototype._pushContext,a.prototype._popContext=b.prototype._popContext,a._peekContext=a.prototype._peekContext=d,a.prototype._promiseCreated=function(){var a=this._peekContext();a&&null==a._promiseCreated&&(a._promiseCreated=this)}},b}},{}],9:[function(b,c,d){"use strict";c.exports=function(c,d){function e(a,b){return{promise:b}}function f(){return!1}function g(a,b,c){var d=this;try{a(b,c,function(a){if("function"!=typeof a)throw new TypeError("onCancel must be a function, got: "+N.toString(a));d._attachCancellationCallback(a)})}catch(a){return a}}function h(a){if(!this._isCancellable())return this;var b=this._onCancel();void 0!==b?N.isArray(b)?b.push(a):this._setOnCancel([b,a]):this._setOnCancel(a)}function i(){return this._onCancelField}function j(a){this._onCancelField=a}function k(){this._cancellationParent=void 0,this._onCancelField=void 0}function l(a,b){if(0!=(1&b)){this._cancellationParent=a;var c=a._branchesRemainingToCancel;void 0===c&&(c=0),a._branchesRemainingToCancel=c+1}0!=(2&b)&&a._isBound()&&this._setBoundTo(a._boundTo)}function m(a,b){0!=(2&b)&&a._isBound()&&this._setBoundTo(a._boundTo)}function n(){var a=this._boundTo;return void 0!==a&&a instanceof c?a.isFulfilled()?a.value():void 0:a}function o(){this._trace=new G(this._peekContext())}function p(a,b){if(O(a)){var c=this._trace;if(void 0!==c&&b&&(c=c._parent),void 0!==c)c.attachExtraTrace(a);else if(!a.__stackCleaned__){var d=y(a);N.notEnumerableProp(a,"stack",d.message+"\n"+d.stack.join("\n")),N.notEnumerableProp(a,"__stackCleaned__",!0)}}}function q(a,b,c,d,e){if(void 0===a&&null!==b&&Y){if(void 0!==e&&e._returnedNonUndefined())return;if(0==(65535&d._bitField))return;c&&(c+=" ");var f="",g="";if(b._trace){for(var h=b._trace.stack.split("\n"),i=w(h),j=i.length-1;j>=0;--j){var k=i[j];if(!Q.test(k)){var l=k.match(R);l&&(f="at "+l[1]+":"+l[2]+":"+l[3]+" ");break}}if(i.length>0)for(var m=i[0],j=0;j<h.length;++j)if(h[j]===m){j>0&&(g="\n"+h[j-1]);break}}var n="a promise was created in a "+c+"handler "+f+"but was not returned from it, see http://goo.gl/rRqMUw"+g;d._warn(n,!0,b)}}function r(a,b){var c=a+" is deprecated and will be removed in a future version.";return b&&(c+=" Use "+b+" instead."),s(c)}function s(a,b,d){if(ga.warnings){var e,f=new M(a);if(b)d._attachExtraTrace(f);else if(ga.longStackTraces&&(e=c._peekContext()))e.attachExtraTrace(f);else{var g=y(f);f.stack=g.message+"\n"+g.stack.join("\n")}ba("warning",f)||z(f,"",!0)}}function t(a,b){for(var c=0;c<b.length-1;++c)b[c].push("From previous event:"),b[c]=b[c].join("\n");return c<b.length&&(b[c]=b[c].join("\n")),a+"\n"+b.join("\n")}function u(a){for(var b=0;b<a.length;++b)(0===a[b].length||b+1<a.length&&a[b][0]===a[b+1][0])&&(a.splice(b,1),b--)}function v(a){for(var b=a[0],c=1;c<a.length;++c){for(var d=a[c],e=b.length-1,f=b[e],g=-1,h=d.length-1;h>=0;--h)if(d[h]===f){g=h;break}for(var h=g;h>=0;--h){var i=d[h];if(b[e]!==i)break;b.pop(),e--}b=d}}function w(a){for(var b=[],c=0;c<a.length;++c){var d=a[c],e="    (No stack trace)"===d||S.test(d),f=e&&da(d);e&&!f&&(U&&" "!==d.charAt(0)&&(d="    "+d),b.push(d))}return b}function x(a){for(var b=a.stack.replace(/\s+$/g,"").split("\n"),c=0;c<b.length;++c){var d=b[c];if("    (No stack trace)"===d||S.test(d))break}return c>0&&(b=b.slice(c)),b}function y(a){var b=a.stack,c=a.toString();return b="string"==typeof b&&b.length>0?x(a):["    (No stack trace)"],{message:c,stack:w(b)}}function z(a,b,c){if("undefined"!=typeof console){var d;if(N.isObject(a)){var e=a.stack;d=b+T(e,a)}else d=b+String(a);"function"==typeof J?J(d,c):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(d)}}function A(a,b,c,d){var e=!1;try{"function"==typeof b&&(e=!0,"rejectionHandled"===a?b(d):b(c,d))}catch(a){L.throwLater(a)}"unhandledRejection"===a?ba(a,c,d)||e||z(c,"Unhandled rejection "):ba(a,d)}function B(a){var b;if("function"==typeof a)b="[function "+(a.name||"anonymous")+"]";else{b=a&&"function"==typeof a.toString?a.toString():N.toString(a);if(/\[object [a-zA-Z0-9$_]+\]/.test(b))try{b=JSON.stringify(a)}catch(a){}0===b.length&&(b="(empty array)")}return"(<"+C(b)+">, no stack trace)"}function C(a){return a.length<41?a:a.substr(0,38)+"..."}function D(){return"function"==typeof fa}function E(a){var b=a.match(ea);if(b)return{fileName:b[1],line:parseInt(b[2],10)}}function F(a,b){if(D()){for(var c,d,e=a.stack.split("\n"),f=b.stack.split("\n"),g=-1,h=-1,i=0;i<e.length;++i){var j=E(e[i]);if(j){c=j.fileName,g=j.line;break}}for(var i=0;i<f.length;++i){var j=E(f[i]);if(j){d=j.fileName,h=j.line;break}}g<0||h<0||!c||!d||c!==d||g>=h||(da=function(a){if(P.test(a))return!0;var b=E(a);return!!(b&&b.fileName===c&&g<=b.line&&b.line<=h)})}}function G(a){this._parent=a,this._promisesCreated=0;var b=this._length=1+(void 0===a?0:a._length);fa(this,G),b>32&&this.uncycle()}var H,I,J,K=c._getDomain,L=c._async,M=b("./errors").Warning,N=b("./util"),O=N.canAttachTrace,P=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,Q=/\((?:timers\.js):\d+:\d+\)/,R=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,S=null,T=null,U=!1,V=!(0==N.env("BLUEBIRD_DEBUG")),W=!(0==N.env("BLUEBIRD_WARNINGS")||!V&&!N.env("BLUEBIRD_WARNINGS")),X=!(0==N.env("BLUEBIRD_LONG_STACK_TRACES")||!V&&!N.env("BLUEBIRD_LONG_STACK_TRACES")),Y=0!=N.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(W||!!N.env("BLUEBIRD_W_FORGOTTEN_RETURN"));c.prototype.suppressUnhandledRejections=function(){var a=this._target();a._bitField=-1048577&a._bitField|524288},c.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),L.invokeLater(this._notifyUnhandledRejection,this,void 0))},c.prototype._notifyUnhandledRejectionIsHandled=function(){A("rejectionHandled",H,void 0,this)},c.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},c.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},c.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var a=this._settledValue();this._setUnhandledRejectionIsNotified(),A("unhandledRejection",I,a,this)}},c.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},c.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},c.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},c.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},c.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},c.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},c.prototype._warn=function(a,b,c){return s(a,b,c||this)},c.onPossiblyUnhandledRejection=function(a){var b=K();I="function"==typeof a?null===b?a:N.domainBind(b,a):void 0},c.onUnhandledRejectionHandled=function(a){var b=K();H="function"==typeof a?null===b?a:N.domainBind(b,a):void 0};var Z=function(){};c.longStackTraces=function(){if(L.haveItemsQueued()&&!ga.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!ga.longStackTraces&&D()){var a=c.prototype._captureStackTrace,b=c.prototype._attachExtraTrace;ga.longStackTraces=!0,Z=function(){if(L.haveItemsQueued()&&!ga.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");c.prototype._captureStackTrace=a,c.prototype._attachExtraTrace=b,d.deactivateLongStackTraces(),L.enableTrampoline(),ga.longStackTraces=!1},c.prototype._captureStackTrace=o,c.prototype._attachExtraTrace=p,d.activateLongStackTraces(),L.disableTrampolineIfNecessary()}},c.hasLongStackTraces=function(){return ga.longStackTraces&&D()};var $=function(){try{if("function"==typeof CustomEvent){var a=new CustomEvent("CustomEvent");return N.global.dispatchEvent(a),function(a,b){var c=new CustomEvent(a.toLowerCase(),{detail:b,cancelable:!0});return!N.global.dispatchEvent(c)}}if("function"==typeof Event){var a=new Event("CustomEvent");return N.global.dispatchEvent(a),function(a,b){var c=new Event(a.toLowerCase(),{cancelable:!0});return c.detail=b,!N.global.dispatchEvent(c)}}var a=document.createEvent("CustomEvent");return a.initCustomEvent("testingtheevent",!1,!0,{}),N.global.dispatchEvent(a),function(a,b){var c=document.createEvent("CustomEvent");return c.initCustomEvent(a.toLowerCase(),!1,!0,b),!N.global.dispatchEvent(c)}}catch(a){}return function(){return!1}}(),_=function(){return N.isNode?function(){return a.emit.apply(a,arguments)}:N.global?function(a){var b="on"+a.toLowerCase(),c=N.global[b];return!!c&&(c.apply(N.global,[].slice.call(arguments,1)),!0)}:function(){return!1}}(),aa={promiseCreated:e,promiseFulfilled:e,promiseRejected:e,promiseResolved:e,promiseCancelled:e,promiseChained:function(a,b,c){return{promise:b,child:c}},warning:function(a,b){return{warning:b}},unhandledRejection:function(a,b,c){return{reason:b,promise:c}},rejectionHandled:e},ba=function(a){var b=!1;try{b=_.apply(null,arguments)}catch(a){L.throwLater(a),b=!0}var c=!1;try{c=$(a,aa[a].apply(null,arguments))}catch(a){L.throwLater(a),c=!0}return c||b};c.config=function(a){if(a=Object(a),"longStackTraces"in a&&(a.longStackTraces?c.longStackTraces():!a.longStackTraces&&c.hasLongStackTraces()&&Z()),"warnings"in a){var b=a.warnings;ga.warnings=!!b,Y=ga.warnings,N.isObject(b)&&"wForgottenReturn"in b&&(Y=!!b.wForgottenReturn)}if("cancellation"in a&&a.cancellation&&!ga.cancellation){if(L.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");c.prototype._clearCancellationData=k,c.prototype._propagateFrom=l,c.prototype._onCancel=i,c.prototype._setOnCancel=j,c.prototype._attachCancellationCallback=h,c.prototype._execute=g,ca=l,ga.cancellation=!0}"monitoring"in a&&(a.monitoring&&!ga.monitoring?(ga.monitoring=!0,c.prototype._fireEvent=ba):!a.monitoring&&ga.monitoring&&(ga.monitoring=!1,c.prototype._fireEvent=f))},c.prototype._fireEvent=f,c.prototype._execute=function(a,b,c){try{a(b,c)}catch(a){return a}},c.prototype._onCancel=function(){},c.prototype._setOnCancel=function(a){},c.prototype._attachCancellationCallback=function(a){},c.prototype._captureStackTrace=function(){},c.prototype._attachExtraTrace=function(){},c.prototype._clearCancellationData=function(){},c.prototype._propagateFrom=function(a,b){};var ca=m,da=function(){return!1},ea=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;N.inherits(G,Error),d.CapturedTrace=G,G.prototype.uncycle=function(){var a=this._length;if(!(a<2)){for(var b=[],c={},d=0,e=this;void 0!==e;++d)b.push(e),e=e._parent;a=this._length=d;for(var d=a-1;d>=0;--d){var f=b[d].stack;void 0===c[f]&&(c[f]=d)}for(var d=0;d<a;++d){var g=b[d].stack,h=c[g];if(void 0!==h&&h!==d){
h>0&&(b[h-1]._parent=void 0,b[h-1]._length=1),b[d]._parent=void 0,b[d]._length=1;var i=d>0?b[d-1]:this;h<a-1?(i._parent=b[h+1],i._parent.uncycle(),i._length=i._parent._length+1):(i._parent=void 0,i._length=1);for(var j=i._length+1,k=d-2;k>=0;--k)b[k]._length=j,j++;return}}}},G.prototype.attachExtraTrace=function(a){if(!a.__stackCleaned__){this.uncycle();for(var b=y(a),c=b.message,d=[b.stack],e=this;void 0!==e;)d.push(w(e.stack.split("\n"))),e=e._parent;v(d),u(d),N.notEnumerableProp(a,"stack",t(c,d)),N.notEnumerableProp(a,"__stackCleaned__",!0)}};var fa=function(){var a=/^\s*at\s*/,b=function(a,b){return"string"==typeof a?a:void 0!==b.name&&void 0!==b.message?b.toString():B(b)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,S=a,T=b;var c=Error.captureStackTrace;return da=function(a){return P.test(a)},function(a,b){Error.stackTraceLimit+=6,c(a,b),Error.stackTraceLimit-=6}}var d=new Error;if("string"==typeof d.stack&&d.stack.split("\n")[0].indexOf("stackDetection@")>=0)return S=/@/,T=b,U=!0,function(a){a.stack=(new Error).stack};var e;try{throw new Error}catch(a){e="stack"in a}return"stack"in d||!e||"number"!=typeof Error.stackTraceLimit?(T=function(a,b){return"string"==typeof a?a:"object"!=typeof b&&"function"!=typeof b||void 0===b.name||void 0===b.message?B(b):b.toString()},null):(S=a,T=b,function(a){Error.stackTraceLimit+=6;try{throw new Error}catch(b){a.stack=b.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(J=function(a){console.warn(a)},N.isNode&&a.stderr.isTTY?J=function(a,b){var c=b?"[33m":"[31m";console.warn(c+a+"[0m\n")}:N.isNode||"string"!=typeof(new Error).stack||(J=function(a,b){console.warn("%c"+a,b?"color: darkorange":"color: red")}));var ga={warnings:W,longStackTraces:!1,cancellation:!1,monitoring:!1};return X&&c.longStackTraces(),{longStackTraces:function(){return ga.longStackTraces},warnings:function(){return ga.warnings},cancellation:function(){return ga.cancellation},monitoring:function(){return ga.monitoring},propagateFromFunction:function(){return ca},boundValueFunction:function(){return n},checkForgottenReturns:q,setBounds:F,warn:s,deprecated:r,CapturedTrace:G,fireDomEvent:$,fireGlobalEvent:_}}},{"./errors":12,"./util":36}],10:[function(a,b,c){"use strict";b.exports=function(a){function b(){return this.value}function c(){throw this.reason}a.prototype.return=a.prototype.thenReturn=function(c){return c instanceof a&&c.suppressUnhandledRejections(),this._then(b,void 0,void 0,{value:c},void 0)},a.prototype.throw=a.prototype.thenThrow=function(a){return this._then(c,void 0,void 0,{reason:a},void 0)},a.prototype.catchThrow=function(a){if(arguments.length<=1)return this._then(void 0,c,void 0,{reason:a},void 0);var b=arguments[1],d=function(){throw b};return this.caught(a,d)},a.prototype.catchReturn=function(c){if(arguments.length<=1)return c instanceof a&&c.suppressUnhandledRejections(),this._then(void 0,b,void 0,{value:c},void 0);var d=arguments[1];d instanceof a&&d.suppressUnhandledRejections();var e=function(){return d};return this.caught(c,e)}}},{}],11:[function(a,b,c){"use strict";b.exports=function(a,b){function c(){return f(this)}function d(a,c){return e(a,c,b,b)}var e=a.reduce,f=a.all;a.prototype.each=function(a){return e(this,a,b,0)._then(c,void 0,void 0,this,void 0)},a.prototype.mapSeries=function(a){return e(this,a,b,b)},a.each=function(a,d){return e(a,d,b,0)._then(c,void 0,void 0,a,void 0)},a.mapSeries=d}},{}],12:[function(a,b,c){"use strict";function d(a,b){function c(d){if(!(this instanceof c))return new c(d);l(this,"message","string"==typeof d?d:b),l(this,"name",a),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return k(c,Error),c}function e(a){if(!(this instanceof e))return new e(a);l(this,"name","OperationalError"),l(this,"message",a),this.cause=a,this.isOperational=!0,a instanceof Error?(l(this,"message",a.message),l(this,"stack",a.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}var f,g,h=a("./es5"),i=h.freeze,j=a("./util"),k=j.inherits,l=j.notEnumerableProp,m=d("Warning","warning"),n=d("CancellationError","cancellation error"),o=d("TimeoutError","timeout error"),p=d("AggregateError","aggregate error");try{f=TypeError,g=RangeError}catch(a){f=d("TypeError","type error"),g=d("RangeError","range error")}for(var q="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),r=0;r<q.length;++r)"function"==typeof Array.prototype[q[r]]&&(p.prototype[q[r]]=Array.prototype[q[r]]);h.defineProperty(p.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),p.prototype.isOperational=!0;var s=0;p.prototype.toString=function(){var a=Array(4*s+1).join(" "),b="\n"+a+"AggregateError of:\n";s++,a=Array(4*s+1).join(" ");for(var c=0;c<this.length;++c){for(var d=this[c]===this?"[Circular AggregateError]":this[c]+"",e=d.split("\n"),f=0;f<e.length;++f)e[f]=a+e[f];d=e.join("\n"),b+=d+"\n"}return s--,b},k(e,Error);var t=Error.__BluebirdErrorTypes__;t||(t=i({CancellationError:n,TimeoutError:o,OperationalError:e,RejectionError:e,AggregateError:p}),h.defineProperty(Error,"__BluebirdErrorTypes__",{value:t,writable:!1,enumerable:!1,configurable:!1})),b.exports={Error:Error,TypeError:f,RangeError:g,CancellationError:t.CancellationError,OperationalError:t.OperationalError,TimeoutError:t.TimeoutError,AggregateError:t.AggregateError,Warning:m}},{"./es5":13,"./util":36}],13:[function(a,b,c){var d=function(){"use strict";return void 0===this}();if(d)b.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:d,propertyIsWritable:function(a,b){var c=Object.getOwnPropertyDescriptor(a,b);return!(c&&!c.writable&&!c.set)}};else{var e={}.hasOwnProperty,f={}.toString,g={}.constructor.prototype,h=function(a){var b=[];for(var c in a)e.call(a,c)&&b.push(c);return b},i=function(a,b){return{value:a[b]}},j=function(a,b,c){return a[b]=c.value,a},k=function(a){return a},l=function(a){try{return Object(a).constructor.prototype}catch(a){return g}},m=function(a){try{return"[object Array]"===f.call(a)}catch(a){return!1}};b.exports={isArray:m,keys:h,names:h,defineProperty:j,getDescriptor:i,freeze:k,getPrototypeOf:l,isES5:d,propertyIsWritable:function(){return!0}}}},{}],14:[function(a,b,c){"use strict";b.exports=function(a,b){var c=a.map;a.prototype.filter=function(a,d){return c(this,a,d,b)},a.filter=function(a,d,e){return c(a,d,e,b)}}},{}],15:[function(a,b,c){"use strict";b.exports=function(b,c){function d(a,b,c){this.promise=a,this.type=b,this.handler=c,this.called=!1,this.cancelPromise=null}function e(a){this.finallyHandler=a}function f(a,b){return null!=a.cancelPromise&&(arguments.length>1?a.cancelPromise._reject(b):a.cancelPromise._cancel(),a.cancelPromise=null,!0)}function g(){return i.call(this,this.promise._target()._settledValue())}function h(a){if(!f(this,a))return l.e=a,l}function i(a){var d=this.promise,i=this.handler;if(!this.called){this.called=!0;var j=this.isFinallyHandler()?i.call(d._boundValue()):i.call(d._boundValue(),a);if(void 0!==j){d._setReturnedNonUndefined();var m=c(j,d);if(m instanceof b){if(null!=this.cancelPromise){if(m._isCancelled()){var n=new k("late cancellation observer");return d._attachExtraTrace(n),l.e=n,l}m.isPending()&&m._attachCancellationCallback(new e(this))}return m._then(g,h,void 0,this,void 0)}}}return d.isRejected()?(f(this),l.e=a,l):(f(this),a)}var j=a("./util"),k=b.CancellationError,l=j.errorObj;return d.prototype.isFinallyHandler=function(){return 0===this.type},e.prototype._resultCancelled=function(){f(this.finallyHandler)},b.prototype._passThrough=function(a,b,c,e){return"function"!=typeof a?this.then():this._then(c,e,void 0,new d(this,b,a),void 0)},b.prototype.lastly=b.prototype.finally=function(a){return this._passThrough(a,0,i,i)},b.prototype.tap=function(a){return this._passThrough(a,1,i)},d}},{"./util":36}],16:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){function h(a,c,d){for(var f=0;f<c.length;++f){d._pushContext();var g=n(c[f])(a);if(d._popContext(),g===m){d._pushContext();var h=b.reject(m.e);return d._popContext(),h}var i=e(g,d);if(i instanceof b)return i}return null}function i(a,c,e,f){if(g.cancellation()){var h=new b(d),i=this._finallyPromise=new b(d);this._promise=h.lastly(function(){return i}),h._captureStackTrace(),h._setOnCancel(this)}else{(this._promise=new b(d))._captureStackTrace()}this._stack=f,this._generatorFunction=a,this._receiver=c,this._generator=void 0,this._yieldHandlers="function"==typeof e?[e].concat(o):o,this._yieldedPromise=null,this._cancellationPhase=!1}var j=a("./errors"),k=j.TypeError,l=a("./util"),m=l.errorObj,n=l.tryCatch,o=[];l.inherits(i,f),i.prototype._isResolved=function(){return null===this._promise},i.prototype._cleanup=function(){this._promise=this._generator=null,g.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},i.prototype._promiseCancelled=function(){if(!this._isResolved()){var a,c=void 0!==this._generator.return;if(c)this._promise._pushContext(),a=n(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var d=new b.CancellationError("generator .return() sentinel");b.coroutine.returnSentinel=d,this._promise._attachExtraTrace(d),this._promise._pushContext(),a=n(this._generator.throw).call(this._generator,d),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(a)}},i.prototype._promiseFulfilled=function(a){this._yieldedPromise=null,this._promise._pushContext();var b=n(this._generator.next).call(this._generator,a);this._promise._popContext(),this._continue(b)},i.prototype._promiseRejected=function(a){this._yieldedPromise=null,this._promise._attachExtraTrace(a),this._promise._pushContext();var b=n(this._generator.throw).call(this._generator,a);this._promise._popContext(),this._continue(b)},i.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof b){var a=this._yieldedPromise;this._yieldedPromise=null,a.cancel()}},i.prototype.promise=function(){return this._promise},i.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},i.prototype._continue=function(a){var c=this._promise;if(a===m)return this._cleanup(),this._cancellationPhase?c.cancel():c._rejectCallback(a.e,!1);var d=a.value;if(!0===a.done)return this._cleanup(),this._cancellationPhase?c.cancel():c._resolveCallback(d);var f=e(d,this._promise);if(!(f instanceof b)&&null===(f=h(f,this._yieldHandlers,this._promise)))return void this._promiseRejected(new k("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",d)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));f=f._target();var g=f._bitField;0==(50397184&g)?(this._yieldedPromise=f,f._proxy(this,null)):0!=(33554432&g)?b._async.invoke(this._promiseFulfilled,this,f._value()):0!=(16777216&g)?b._async.invoke(this._promiseRejected,this,f._reason()):this._promiseCancelled()},b.coroutine=function(a,b){if("function"!=typeof a)throw new k("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var c=Object(b).yieldHandler,d=i,e=(new Error).stack;return function(){var b=a.apply(this,arguments),f=new d(void 0,void 0,c,e),g=f.promise();return f._generator=b,f._promiseFulfilled(void 0),g}},b.coroutine.addYieldHandler=function(a){if("function"!=typeof a)throw new k("expecting a function but got "+l.classString(a));o.push(a)},b.spawn=function(a){if(g.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof a)return c("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var d=new i(a,this),e=d.promise();return d._run(b.spawn),e}}},{"./errors":12,"./util":36}],17:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){var h=a("./util");h.canEvaluate,h.tryCatch,h.errorObj;b.join=function(){var a,b=arguments.length-1;if(b>0&&"function"==typeof arguments[b]){a=arguments[b];var d}var e=[].slice.call(arguments);a&&e.pop();var d=new c(e).promise();return void 0!==a?d.spread(a):d}}},{"./util":36}],18:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){function h(a,b,c,d){this.constructor$(a),this._promise._captureStackTrace();var e=j();this._callback=null===e?b:k.domainBind(e,b),this._preservedValues=d===f?new Array(this.length()):null,this._limit=c,this._inFlight=0,this._queue=[],this._init$(void 0,-2)}function i(a,c,e,f){if("function"!=typeof c)return d("expecting a function but got "+k.classString(c));var g=0;if(void 0!==e){if("object"!=typeof e||null===e)return b.reject(new TypeError("options argument must be an object but it is "+k.classString(e)));if("number"!=typeof e.concurrency)return b.reject(new TypeError("'concurrency' must be a number but it is "+k.classString(e.concurrency)));g=e.concurrency}return g="number"==typeof g&&isFinite(g)&&g>=1?g:0,new h(a,c,g,f).promise()}var j=b._getDomain,k=a("./util"),l=k.tryCatch,m=k.errorObj;k.inherits(h,c),h.prototype._init=function(){},h.prototype._promiseFulfilled=function(a,c){var d=this._values,f=this.length(),h=this._preservedValues,i=this._limit;if(c<0){if(c=-1*c-1,d[c]=a,i>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(i>=1&&this._inFlight>=i)return d[c]=a,this._queue.push(c),!1;null!==h&&(h[c]=a);var j=this._promise,k=this._callback,n=j._boundValue();j._pushContext();var o=l(k).call(n,a,c,f),p=j._popContext();if(g.checkForgottenReturns(o,p,null!==h?"Promise.filter":"Promise.map",j),o===m)return this._reject(o.e),!0;var q=e(o,this._promise);if(q instanceof b){q=q._target();var r=q._bitField;if(0==(50397184&r))return i>=1&&this._inFlight++,d[c]=q,q._proxy(this,-1*(c+1)),!1;if(0==(33554432&r))return 0!=(16777216&r)?(this._reject(q._reason()),!0):(this._cancel(),!0);o=q._value()}d[c]=o}return++this._totalResolved>=f&&(null!==h?this._filter(d,h):this._resolve(d),!0)},h.prototype._drainQueue=function(){for(var a=this._queue,b=this._limit,c=this._values;a.length>0&&this._inFlight<b;){if(this._isResolved())return;var d=a.pop();this._promiseFulfilled(c[d],d)}},h.prototype._filter=function(a,b){for(var c=b.length,d=new Array(c),e=0,f=0;f<c;++f)a[f]&&(d[e++]=b[f]);d.length=e,this._resolve(d)},h.prototype.preservedValues=function(){return this._preservedValues},b.prototype.map=function(a,b){return i(this,a,b,null)},b.map=function(a,b,c,d){return i(a,b,c,d)}}},{"./util":36}],19:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f){var g=a("./util"),h=g.tryCatch;b.method=function(a){if("function"!=typeof a)throw new b.TypeError("expecting a function but got "+g.classString(a));return function(){var d=new b(c);d._captureStackTrace(),d._pushContext();var e=h(a).apply(this,arguments),g=d._popContext();return f.checkForgottenReturns(e,g,"Promise.method",d),d._resolveFromSyncValue(e),d}},b.attempt=b.try=function(a){if("function"!=typeof a)return e("expecting a function but got "+g.classString(a));var d=new b(c);d._captureStackTrace(),d._pushContext();var i;if(arguments.length>1){f.deprecated("calling Promise.try with more than 1 argument");var j=arguments[1],k=arguments[2];i=g.isArray(j)?h(a).apply(k,j):h(a).call(k,j)}else i=h(a)();var l=d._popContext();return f.checkForgottenReturns(i,l,"Promise.try",d),d._resolveFromSyncValue(i),d},b.prototype._resolveFromSyncValue=function(a){a===g.errorObj?this._rejectCallback(a.e,!1):this._resolveCallback(a,!0)}}},{"./util":36}],20:[function(a,b,c){"use strict";function d(a){return a instanceof Error&&k.getPrototypeOf(a)===Error.prototype}function e(a){var b;if(d(a)){b=new j(a),b.name=a.name,b.message=a.message,b.stack=a.stack;for(var c=k.keys(a),e=0;e<c.length;++e){var f=c[e];l.test(f)||(b[f]=a[f])}return b}return g.markAsOriginatingFromRejection(a),a}function f(a,b){return function(c,d){if(null!==a){if(c){var f=e(h(c));a._attachExtraTrace(f),a._reject(f)}else if(b){var g=[].slice.call(arguments,1);a._fulfill(g)}else a._fulfill(d);a=null}}}var g=a("./util"),h=g.maybeWrapAsError,i=a("./errors"),j=i.OperationalError,k=a("./es5"),l=/^(?:name|message|stack|cause)$/;b.exports=f},{"./errors":12,"./es5":13,"./util":36}],21:[function(a,b,c){"use strict";b.exports=function(b){function c(a,b){var c=this;if(!f.isArray(a))return d.call(c,a,b);var e=h(b).apply(c._boundValue(),[null].concat(a));e===i&&g.throwLater(e.e)}function d(a,b){var c=this,d=c._boundValue(),e=void 0===a?h(b).call(d,null):h(b).call(d,null,a);e===i&&g.throwLater(e.e)}function e(a,b){var c=this;if(!a){var d=new Error(a+"");d.cause=a,a=d}var e=h(b).call(c._boundValue(),a);e===i&&g.throwLater(e.e)}var f=a("./util"),g=b._async,h=f.tryCatch,i=f.errorObj;b.prototype.asCallback=b.prototype.nodeify=function(a,b){if("function"==typeof a){var f=d;void 0!==b&&Object(b).spread&&(f=c),this._then(f,e,void 0,this,a)}return this}}},{"./util":36}],22:[function(b,c,d){"use strict";c.exports=function(){function d(){}function e(a,b){if("function"!=typeof b)throw new t("expecting a function but got "+o.classString(b));if(a.constructor!==f)throw new t("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}function f(a){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,a!==v&&(e(this,a),this._resolveFromExecutor(a)),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function g(a){this.promise._resolveCallback(a)}function h(a){this.promise._rejectCallback(a,!1)}function i(a){var b=new f(v);b._fulfillmentHandler0=a,b._rejectionHandler0=a,b._promise0=a,b._receiver0=a}var j,k=function(){return new t("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},l=function(){return new f.PromiseInspection(this._target())},m=function(a){return f.reject(new t(a))},n={},o=b("./util");j=o.isNode?function(){var b=a.domain;return void 0===b&&(b=null),b}:function(){return null},o.notEnumerableProp(f,"_getDomain",j);var p=b("./es5"),q=b("./async"),r=new q;p.defineProperty(f,"_async",{value:r});var s=b("./errors"),t=f.TypeError=s.TypeError;f.RangeError=s.RangeError;var u=f.CancellationError=s.CancellationError;f.TimeoutError=s.TimeoutError,f.OperationalError=s.OperationalError,f.RejectionError=s.OperationalError,f.AggregateError=s.AggregateError;var v=function(){},w={},x={},y=b("./thenables")(f,v),z=b("./promise_array")(f,v,y,m,d),A=b("./context")(f),B=A.create,C=b("./debuggability")(f,A),D=(C.CapturedTrace,b("./finally")(f,y)),E=b("./catch_filter")(x),F=b("./nodeback"),G=o.errorObj,H=o.tryCatch;return f.prototype.toString=function(){return"[object Promise]"},f.prototype.caught=f.prototype.catch=function(a){var b=arguments.length;if(b>1){var c,d=new Array(b-1),e=0;for(c=0;c<b-1;++c){var f=arguments[c];if(!o.isObject(f))return m("expecting an object but got A catch statement predicate "+o.classString(f));d[e++]=f}return d.length=e,a=arguments[c],this.then(void 0,E(d,a,this))}return this.then(void 0,a)},f.prototype.reflect=function(){return this._then(l,l,void 0,this,void 0)},f.prototype.then=function(a,b){if(C.warnings()&&arguments.length>0&&"function"!=typeof a&&"function"!=typeof b){var c=".then() only accepts functions but was passed: "+o.classString(a);arguments.length>1&&(c+=", "+o.classString(b)),this._warn(c)}return this._then(a,b,void 0,void 0,void 0)},f.prototype.done=function(a,b){this._then(a,b,void 0,void 0,void 0)._setIsFinal()},f.prototype.spread=function(a){return"function"!=typeof a?m("expecting a function but got "+o.classString(a)):this.all()._then(a,void 0,void 0,w,void 0)},f.prototype.toJSON=function(){var a={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(a.fulfillmentValue=this.value(),a.isFulfilled=!0):this.isRejected()&&(a.rejectionReason=this.reason(),a.isRejected=!0),a},f.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new z(this).promise()},f.prototype.error=function(a){return this.caught(o.originatesFromRejection,a)},f.getNewLibraryCopy=c.exports,f.is=function(a){return a instanceof f},f.fromNode=f.fromCallback=function(a){var b=new f(v);b._captureStackTrace();var c=arguments.length>1&&!!Object(arguments[1]).multiArgs,d=H(a)(F(b,c));return d===G&&b._rejectCallback(d.e,!0),b._isFateSealed()||b._setAsyncGuaranteed(),b},f.all=function(a){return new z(a).promise()},f.cast=function(a){var b=y(a);return b instanceof f||(b=new f(v),b._captureStackTrace(),b._setFulfilled(),b._rejectionHandler0=a),b},f.resolve=f.fulfilled=f.cast,f.reject=f.rejected=function(a){var b=new f(v);return b._captureStackTrace(),b._rejectCallback(a,!0),b},f.setScheduler=function(a){if("function"!=typeof a)throw new t("expecting a function but got "+o.classString(a));return r.setScheduler(a)},f.prototype._then=function(a,b,c,d,e){var g=void 0!==e,h=g?e:new f(v),i=this._target(),k=i._bitField;g||(h._propagateFrom(this,3),h._captureStackTrace(),void 0===d&&0!=(2097152&this._bitField)&&(d=0!=(50397184&k)?this._boundValue():i===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,h));var l=j();if(0!=(50397184&k)){var m,n,p=i._settlePromiseCtx;0!=(33554432&k)?(n=i._rejectionHandler0,m=a):0!=(16777216&k)?(n=i._fulfillmentHandler0,m=b,i._unsetRejectionIsUnhandled()):(p=i._settlePromiseLateCancellationObserver,n=new u("late cancellation observer"),i._attachExtraTrace(n),m=b),r.invoke(p,i,{handler:null===l?m:"function"==typeof m&&o.domainBind(l,m),promise:h,receiver:d,value:n})}else i._addCallbacks(a,b,h,d,l);return h},f.prototype._length=function(){return 65535&this._bitField},f.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},f.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},f.prototype._setLength=function(a){this._bitField=-65536&this._bitField|65535&a},f.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},f.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},f.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},f.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},f.prototype._isFinal=function(){return(4194304&this._bitField)>0},f.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},f.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},f.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},f.prototype._setAsyncGuaranteed=function(){r.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},f.prototype._receiverAt=function(a){var b=0===a?this._receiver0:this[4*a-4+3];if(b!==n)return void 0===b&&this._isBound()?this._boundValue():b},f.prototype._promiseAt=function(a){return this[4*a-4+2]},f.prototype._fulfillmentHandlerAt=function(a){return this[4*a-4+0]},f.prototype._rejectionHandlerAt=function(a){return this[4*a-4+1]},f.prototype._boundValue=function(){},f.prototype._migrateCallback0=function(a){var b=(a._bitField,a._fulfillmentHandler0),c=a._rejectionHandler0,d=a._promise0,e=a._receiverAt(0);void 0===e&&(e=n),this._addCallbacks(b,c,d,e,null)},f.prototype._migrateCallbackAt=function(a,b){var c=a._fulfillmentHandlerAt(b),d=a._rejectionHandlerAt(b),e=a._promiseAt(b),f=a._receiverAt(b);void 0===f&&(f=n),this._addCallbacks(c,d,e,f,null)},f.prototype._addCallbacks=function(a,b,c,d,e){var f=this._length();if(f>=65531&&(f=0,this._setLength(0)),0===f)this._promise0=c,this._receiver0=d,"function"==typeof a&&(this._fulfillmentHandler0=null===e?a:o.domainBind(e,a)),"function"==typeof b&&(this._rejectionHandler0=null===e?b:o.domainBind(e,b));else{var g=4*f-4;this[g+2]=c,this[g+3]=d,"function"==typeof a&&(this[g+0]=null===e?a:o.domainBind(e,a)),"function"==typeof b&&(this[g+1]=null===e?b:o.domainBind(e,b))}return this._setLength(f+1),f},f.prototype._proxy=function(a,b){this._addCallbacks(void 0,void 0,b,a,null)},f.prototype._resolveCallback=function(a,b){if(0==(117506048&this._bitField)){if(a===this)return this._rejectCallback(k(),!1);var c=y(a,this);if(!(c instanceof f))return this._fulfill(a);b&&this._propagateFrom(c,2);var d=c._target();if(d===this)return void this._reject(k());var e=d._bitField;if(0==(50397184&e)){var g=this._length();g>0&&d._migrateCallback0(this);for(var h=1;h<g;++h)d._migrateCallbackAt(this,h);this._setFollowing(),this._setLength(0),this._setFollowee(d)}else if(0!=(33554432&e))this._fulfill(d._value());else if(0!=(16777216&e))this._reject(d._reason());else{var i=new u("late cancellation observer");d._attachExtraTrace(i),this._reject(i)}}},f.prototype._rejectCallback=function(a,b,c){var d=o.ensureErrorObject(a),e=d===a;if(!e&&!c&&C.warnings()){var f="a promise was rejected with a non-error: "+o.classString(a);this._warn(f,!0)}this._attachExtraTrace(d,!!b&&e),this._reject(a)},f.prototype._resolveFromExecutor=function(a){var b=this;this._captureStackTrace(),this._pushContext();var c=!0,d=this._execute(a,function(a){b._resolveCallback(a)},function(a){b._rejectCallback(a,c)});c=!1,this._popContext(),void 0!==d&&b._rejectCallback(d,!0)},f.prototype._settlePromiseFromHandler=function(a,b,c,d){var e=d._bitField;if(0==(65536&e)){d._pushContext();var f;b===w?c&&"number"==typeof c.length?f=H(a).apply(this._boundValue(),c):(f=G,f.e=new t("cannot .spread() a non-array: "+o.classString(c))):f=H(a).call(b,c);var g=d._popContext();e=d._bitField,0==(65536&e)&&(f===x?d._reject(c):f===G?d._rejectCallback(f.e,!1):(C.checkForgottenReturns(f,g,"",d,this),d._resolveCallback(f)))}},f.prototype._target=function(){for(var a=this;a._isFollowing();)a=a._followee();return a},f.prototype._followee=function(){return this._rejectionHandler0},f.prototype._setFollowee=function(a){this._rejectionHandler0=a},f.prototype._settlePromise=function(a,b,c,e){var g=a instanceof f,h=this._bitField,i=0!=(134217728&h);0!=(65536&h)?(g&&a._invokeInternalOnCancel(),c instanceof D&&c.isFinallyHandler()?(c.cancelPromise=a,H(b).call(c,e)===G&&a._reject(G.e)):b===l?a._fulfill(l.call(c)):c instanceof d?c._promiseCancelled(a):g||a instanceof z?a._cancel():c.cancel()):"function"==typeof b?g?(i&&a._setAsyncGuaranteed(),this._settlePromiseFromHandler(b,c,e,a)):b.call(c,e,a):c instanceof d?c._isResolved()||(0!=(33554432&h)?c._promiseFulfilled(e,a):c._promiseRejected(e,a)):g&&(i&&a._setAsyncGuaranteed(),0!=(33554432&h)?a._fulfill(e):a._reject(e))},f.prototype._settlePromiseLateCancellationObserver=function(a){var b=a.handler,c=a.promise,d=a.receiver,e=a.value;"function"==typeof b?c instanceof f?this._settlePromiseFromHandler(b,d,e,c):b.call(d,e,c):c instanceof f&&c._reject(e)},f.prototype._settlePromiseCtx=function(a){this._settlePromise(a.promise,a.handler,a.receiver,a.value)},f.prototype._settlePromise0=function(a,b,c){var d=this._promise0,e=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(d,a,e,b)},f.prototype._clearCallbackDataAtIndex=function(a){var b=4*a-4;this[b+2]=this[b+3]=this[b+0]=this[b+1]=void 0},f.prototype._fulfill=function(a){var b=this._bitField;if(!((117506048&b)>>>16)){if(a===this){var c=k();return this._attachExtraTrace(c),this._reject(c)}this._setFulfilled(),this._rejectionHandler0=a,(65535&b)>0&&(0!=(134217728&b)?this._settlePromises():r.settlePromises(this))}},f.prototype._reject=function(a){var b=this._bitField;if(!((117506048&b)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=a,this._isFinal())return r.fatalError(a,o.isNode);(65535&b)>0?r.settlePromises(this):this._ensurePossibleRejectionHandled()}},f.prototype._fulfillPromises=function(a,b){for(var c=1;c<a;c++){var d=this._fulfillmentHandlerAt(c),e=this._promiseAt(c),f=this._receiverAt(c);this._clearCallbackDataAtIndex(c),this._settlePromise(e,d,f,b)}},f.prototype._rejectPromises=function(a,b){for(var c=1;c<a;c++){var d=this._rejectionHandlerAt(c),e=this._promiseAt(c),f=this._receiverAt(c);this._clearCallbackDataAtIndex(c),this._settlePromise(e,d,f,b)}},f.prototype._settlePromises=function(){var a=this._bitField,b=65535&a;if(b>0){if(0!=(16842752&a)){var c=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,c,a),this._rejectPromises(b,c)}else{var d=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,d,a),this._fulfillPromises(b,d)}this._setLength(0)}this._clearCancellationData()},f.prototype._settledValue=function(){var a=this._bitField;return 0!=(33554432&a)?this._rejectionHandler0:0!=(16777216&a)?this._fulfillmentHandler0:void 0},f.defer=f.pending=function(){return C.deprecated("Promise.defer","new Promise"),{promise:new f(v),resolve:g,reject:h}},o.notEnumerableProp(f,"_makeSelfResolutionError",k),b("./method")(f,v,y,m,C),b("./bind")(f,v,y,C),b("./cancel")(f,z,m,C),b("./direct_resolve")(f),b("./synchronous_inspection")(f),b("./join")(f,z,y,v,r,j),f.Promise=f,f.version="3.4.5",b("./map.js")(f,z,m,y,v,C),b("./call_get.js")(f),b("./using.js")(f,m,y,B,v,C),b("./timers.js")(f,v,C),b("./generators.js")(f,m,v,y,d,C),b("./nodeify.js")(f),b("./promisify.js")(f,v),b("./props.js")(f,z,y,m),b("./race.js")(f,v,y,m),b("./reduce.js")(f,z,m,y,v,C),b("./settle.js")(f,z,C),b("./some.js")(f,z,m),b("./filter.js")(f,v),b("./each.js")(f,v),b("./any.js")(f),o.toFastProperties(f),o.toFastProperties(f.prototype),i({a:1}),i({b:2}),i({c:3}),i(1),i(function(){}),i(void 0),i(!1),i(new f(v)),C.setBounds(q.firstLineError,o.lastLineError),f}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f){function g(a){switch(a){case-2:return[];case-3:return{}}}function h(a){var d=this._promise=new b(c);a instanceof b&&d._propagateFrom(a,3),d._setOnCancel(this),this._values=a,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var i=a("./util");i.isArray;return i.inherits(h,f),h.prototype.length=function(){return this._length},h.prototype.promise=function(){return this._promise},h.prototype._init=function a(c,f){var h=d(this._values,this._promise);if(h instanceof b){h=h._target();var j=h._bitField;if(this._values=h,0==(50397184&j))return this._promise._setAsyncGuaranteed(),h._then(a,this._reject,void 0,this,f);if(0==(33554432&j))return 0!=(16777216&j)?this._reject(h._reason()):this._cancel();h=h._value()}if(null===(h=i.asArray(h))){var k=e("expecting an array or an iterable object but got "+i.classString(h)).reason();return void this._promise._rejectCallback(k,!1)}if(0===h.length)return void(-5===f?this._resolveEmptyArray():this._resolve(g(f)));this._iterate(h)},h.prototype._iterate=function(a){var c=this.getActualLength(a.length);this._length=c,this._values=this.shouldCopyValues()?new Array(c):this._values;for(var e=this._promise,f=!1,g=null,h=0;h<c;++h){var i=d(a[h],e);i instanceof b?(i=i._target(),g=i._bitField):g=null,f?null!==g&&i.suppressUnhandledRejections():null!==g?0==(50397184&g)?(i._proxy(this,h),this._values[h]=i):f=0!=(33554432&g)?this._promiseFulfilled(i._value(),h):0!=(16777216&g)?this._promiseRejected(i._reason(),h):this._promiseCancelled(h):f=this._promiseFulfilled(i,h)}f||e._setAsyncGuaranteed()},h.prototype._isResolved=function(){return null===this._values},h.prototype._resolve=function(a){this._values=null,
this._promise._fulfill(a)},h.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},h.prototype._reject=function(a){this._values=null,this._promise._rejectCallback(a,!1)},h.prototype._promiseFulfilled=function(a,b){return this._values[b]=a,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},h.prototype._promiseCancelled=function(){return this._cancel(),!0},h.prototype._promiseRejected=function(a){return this._totalResolved++,this._reject(a),!0},h.prototype._resultCancelled=function(){if(!this._isResolved()){var a=this._values;if(this._cancel(),a instanceof b)a.cancel();else for(var c=0;c<a.length;++c)a[c]instanceof b&&a[c].cancel()}},h.prototype.shouldCopyValues=function(){return!0},h.prototype.getActualLength=function(a){return a},h}},{"./util":36}],24:[function(a,b,c){"use strict";b.exports=function(b,c){function d(a){return!v.test(a)}function e(a){try{return!0===a.__isPromisified__}catch(a){return!1}}function f(a,b,c){var d=n.getDataPropertyOrDefault(a,b+c,t);return!!d&&e(d)}function g(a,b,c){for(var d=0;d<a.length;d+=2){var e=a[d];if(c.test(e))for(var f=e.replace(c,""),g=0;g<a.length;g+=2)if(a[g]===f)throw new s("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",b))}}function h(a,b,c,d){for(var h=n.inheritedDataKeys(a),i=[],j=0;j<h.length;++j){var k=h[j],l=a[k],m=d===w||w(k,l,a);"function"!=typeof l||e(l)||f(a,k,b)||!d(k,l,a,m)||i.push(k,l)}return g(i,b,c),i}function i(a,d,e,f,g,h){function i(){var e=d;d===m&&(e=this);var f=new b(c);f._captureStackTrace();var g="string"==typeof k&&this!==j?this[k]:a,i=o(f,h);try{g.apply(e,p(arguments,i))}catch(a){f._rejectCallback(q(a),!0,!0)}return f._isFateSealed()||f._setAsyncGuaranteed(),f}var j=function(){return this}(),k=a;return"string"==typeof k&&(a=f),n.notEnumerableProp(i,"__isPromisified__",!0),i}function j(a,b,c,d,e){for(var f=new RegExp(x(b)+"$"),g=h(a,b,f,c),i=0,j=g.length;i<j;i+=2){var k=g[i],l=g[i+1],o=k+b;if(d===y)a[o]=y(k,m,k,l,b,e);else{var p=d(l,function(){return y(k,m,k,l,b,e)});n.notEnumerableProp(p,"__isPromisified__",!0),a[o]=p}}return n.toFastProperties(a),a}function k(a,b,c){return y(a,b,void 0,a,null,c)}var l,m={},n=a("./util"),o=a("./nodeback"),p=n.withAppended,q=n.maybeWrapAsError,r=n.canEvaluate,s=a("./errors").TypeError,t={__isPromisified__:!0},u=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],v=new RegExp("^(?:"+u.join("|")+")$"),w=function(a){return n.isIdentifier(a)&&"_"!==a.charAt(0)&&"constructor"!==a},x=function(a){return a.replace(/([$])/,"\\$")},y=r?l:i;b.promisify=function(a,b){if("function"!=typeof a)throw new s("expecting a function but got "+n.classString(a));if(e(a))return a;b=Object(b);var c=void 0===b.context?m:b.context,f=!!b.multiArgs,g=k(a,c,f);return n.copyDescriptors(a,g,d),g},b.promisifyAll=function(a,b){if("function"!=typeof a&&"object"!=typeof a)throw new s("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");b=Object(b);var c=!!b.multiArgs,d=b.suffix;"string"!=typeof d&&(d="Async");var e=b.filter;"function"!=typeof e&&(e=w);var f=b.promisifier;if("function"!=typeof f&&(f=y),!n.isIdentifier(d))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var g=n.inheritedDataKeys(a),h=0;h<g.length;++h){var i=a[g[h]];"constructor"!==g[h]&&n.isClass(i)&&(j(i.prototype,d,e,f,c),j(i,d,e,f,c))}return j(a,d,e,f,c)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(a,b,c){"use strict";b.exports=function(b,c,d,e){function f(a){var b,c=!1;if(void 0!==h&&a instanceof h)b=l(a),c=!0;else{var d=k.keys(a),e=d.length;b=new Array(2*e);for(var f=0;f<e;++f){var g=d[f];b[f]=a[g],b[f+e]=g}}this.constructor$(b),this._isMap=c,this._init$(void 0,-3)}function g(a){var c,g=d(a);return j(g)?(c=g instanceof b?g._then(b.props,void 0,void 0,void 0,void 0):new f(g).promise(),g instanceof b&&c._propagateFrom(g,2),c):e("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var h,i=a("./util"),j=i.isObject,k=a("./es5");"function"==typeof Map&&(h=Map);var l=function(){function a(a,d){this[b]=a,this[b+c]=d,b++}var b=0,c=0;return function(d){c=d.size,b=0;var e=new Array(2*d.size);return d.forEach(a,e),e}}(),m=function(a){for(var b=new h,c=a.length/2|0,d=0;d<c;++d){var e=a[c+d],f=a[d];b.set(e,f)}return b};i.inherits(f,c),f.prototype._init=function(){},f.prototype._promiseFulfilled=function(a,b){if(this._values[b]=a,++this._totalResolved>=this._length){var c;if(this._isMap)c=m(this._values);else{c={};for(var d=this.length(),e=0,f=this.length();e<f;++e)c[this._values[e+d]]=this._values[e]}return this._resolve(c),!0}return!1},f.prototype.shouldCopyValues=function(){return!1},f.prototype.getActualLength=function(a){return a>>1},b.prototype.props=function(){return g(this)},b.props=function(a){return g(a)}}},{"./es5":13,"./util":36}],26:[function(a,b,c){"use strict";function d(a,b,c,d,e){for(var f=0;f<e;++f)c[f+d]=a[f+b],a[f+b]=void 0}function e(a){this._capacity=a,this._length=0,this._front=0}e.prototype._willBeOverCapacity=function(a){return this._capacity<a},e.prototype._pushOne=function(a){var b=this.length();this._checkCapacity(b+1),this[this._front+b&this._capacity-1]=a,this._length=b+1},e.prototype._unshiftOne=function(a){var b=this._capacity;this._checkCapacity(this.length()+1);var c=this._front,d=(c-1&b-1^b)-b;this[d]=a,this._front=d,this._length=this.length()+1},e.prototype.unshift=function(a,b,c){this._unshiftOne(c),this._unshiftOne(b),this._unshiftOne(a)},e.prototype.push=function(a,b,c){var d=this.length()+3;if(this._willBeOverCapacity(d))return this._pushOne(a),this._pushOne(b),void this._pushOne(c);var e=this._front+d-3;this._checkCapacity(d);var f=this._capacity-1;this[e+0&f]=a,this[e+1&f]=b,this[e+2&f]=c,this._length=d},e.prototype.shift=function(){var a=this._front,b=this[a];return this[a]=void 0,this._front=a+1&this._capacity-1,this._length--,b},e.prototype.length=function(){return this._length},e.prototype._checkCapacity=function(a){this._capacity<a&&this._resizeTo(this._capacity<<1)},e.prototype._resizeTo=function(a){var b=this._capacity;this._capacity=a,d(this,0,this,b,this._front+this._length&b-1)},b.exports=e},{}],27:[function(a,b,c){"use strict";b.exports=function(b,c,d,e){function f(a,f){var i=d(a);if(i instanceof b)return h(i);if(null===(a=g.asArray(a)))return e("expecting an array or an iterable object but got "+g.classString(a));var j=new b(c);void 0!==f&&j._propagateFrom(f,3);for(var k=j._fulfill,l=j._reject,m=0,n=a.length;m<n;++m){var o=a[m];(void 0!==o||m in a)&&b.cast(o)._then(k,l,void 0,j,null)}return j}var g=a("./util"),h=function(a){return a.then(function(b){return f(b,a)})};b.race=function(a){return f(a,void 0)},b.prototype.race=function(){return f(this,void 0)}}},{"./util":36}],28:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){function h(a,c,d,e){this.constructor$(a);var g=m();this._fn=null===g?c:n.domainBind(g,c),void 0!==d&&(d=b.resolve(d),d._attachCancellationCallback(this)),this._initialValue=d,this._currentCancellable=null,this._eachValues=e===f?Array(this._length):0===e?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function i(a,b){this.isFulfilled()?b._resolve(a):b._reject(a)}function j(a,b,c,e){return"function"!=typeof b?d("expecting a function but got "+n.classString(b)):new h(a,b,c,e).promise()}function k(a){this.accum=a,this.array._gotAccum(a);var c=e(this.value,this.array._promise);return c instanceof b?(this.array._currentCancellable=c,c._then(l,void 0,void 0,this,void 0)):l.call(this,c)}function l(a){var c=this.array,d=c._promise,e=o(c._fn);d._pushContext();var f;(f=void 0!==c._eachValues?e.call(d._boundValue(),a,this.index,this.length):e.call(d._boundValue(),this.accum,a,this.index,this.length))instanceof b&&(c._currentCancellable=f);var h=d._popContext();return g.checkForgottenReturns(f,h,void 0!==c._eachValues?"Promise.each":"Promise.reduce",d),f}var m=b._getDomain,n=a("./util"),o=n.tryCatch;n.inherits(h,c),h.prototype._gotAccum=function(a){void 0!==this._eachValues&&null!==this._eachValues&&a!==f&&this._eachValues.push(a)},h.prototype._eachComplete=function(a){return null!==this._eachValues&&this._eachValues.push(a),this._eachValues},h.prototype._init=function(){},h.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},h.prototype.shouldCopyValues=function(){return!1},h.prototype._resolve=function(a){this._promise._resolveCallback(a),this._values=null},h.prototype._resultCancelled=function(a){if(a===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof b&&this._currentCancellable.cancel(),this._initialValue instanceof b&&this._initialValue.cancel())},h.prototype._iterate=function(a){this._values=a;var c,d,e=a.length;if(void 0!==this._initialValue?(c=this._initialValue,d=0):(c=b.resolve(a[0]),d=1),this._currentCancellable=c,!c.isRejected())for(;d<e;++d){var f={accum:null,value:a[d],index:d,length:e,array:this};c=c._then(k,void 0,void 0,f,void 0)}void 0!==this._eachValues&&(c=c._then(this._eachComplete,void 0,void 0,this,void 0)),c._then(i,i,void 0,c,this)},b.prototype.reduce=function(a,b){return j(this,a,b,null)},b.reduce=function(a,b,c,d){return j(a,b,c,d)}}},{"./util":36}],29:[function(b,c,e){"use strict";var f,g=b("./util"),h=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},i=g.getNativePromise();if(g.isNode&&"undefined"==typeof MutationObserver){var j=d.setImmediate,k=a.nextTick;f=g.isRecentNode?function(a){j.call(d,a)}:function(b){k.call(a,b)}}else if("function"==typeof i&&"function"==typeof i.resolve){var l=i.resolve();f=function(a){l.then(a)}}else f="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof setImmediate?function(a){setImmediate(a)}:"undefined"!=typeof setTimeout?function(a){setTimeout(a,0)}:h:function(){var a=document.createElement("div"),b={attributes:!0},c=!1,d=document.createElement("div");new MutationObserver(function(){a.classList.toggle("foo"),c=!1}).observe(d,b);var e=function(){c||(c=!0,d.classList.toggle("foo"))};return function(c){var d=new MutationObserver(function(){d.disconnect(),c()});d.observe(a,b),e()}}();c.exports=f},{"./util":36}],30:[function(a,b,c){"use strict";b.exports=function(b,c,d){function e(a){this.constructor$(a)}var f=b.PromiseInspection;a("./util").inherits(e,c),e.prototype._promiseResolved=function(a,b){return this._values[a]=b,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},e.prototype._promiseFulfilled=function(a,b){var c=new f;return c._bitField=33554432,c._settledValueField=a,this._promiseResolved(b,c)},e.prototype._promiseRejected=function(a,b){var c=new f;return c._bitField=16777216,c._settledValueField=a,this._promiseResolved(b,c)},b.settle=function(a){return d.deprecated(".settle()",".reflect()"),new e(a).promise()},b.prototype.settle=function(){return b.settle(this)}}},{"./util":36}],31:[function(a,b,c){"use strict";b.exports=function(b,c,d){function e(a){this.constructor$(a),this._howMany=0,this._unwrap=!1,this._initialized=!1}function f(a,b){if((0|b)!==b||b<0)return d("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var c=new e(a),f=c.promise();return c.setHowMany(b),c.init(),f}var g=a("./util"),h=a("./errors").RangeError,i=a("./errors").AggregateError,j=g.isArray,k={};g.inherits(e,c),e.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var a=j(this._values);!this._isResolved()&&a&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},e.prototype.init=function(){this._initialized=!0,this._init()},e.prototype.setUnwrap=function(){this._unwrap=!0},e.prototype.howMany=function(){return this._howMany},e.prototype.setHowMany=function(a){this._howMany=a},e.prototype._promiseFulfilled=function(a){return this._addFulfilled(a),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},e.prototype._promiseRejected=function(a){return this._addRejected(a),this._checkOutcome()},e.prototype._promiseCancelled=function(){return this._values instanceof b||null==this._values?this._cancel():(this._addRejected(k),this._checkOutcome())},e.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var a=new i,b=this.length();b<this._values.length;++b)this._values[b]!==k&&a.push(this._values[b]);return a.length>0?this._reject(a):this._cancel(),!0}return!1},e.prototype._fulfilled=function(){return this._totalResolved},e.prototype._rejected=function(){return this._values.length-this.length()},e.prototype._addRejected=function(a){this._values.push(a)},e.prototype._addFulfilled=function(a){this._values[this._totalResolved++]=a},e.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},e.prototype._getRangeError=function(a){var b="Input array must contain at least "+this._howMany+" items but contains only "+a+" items";return new h(b)},e.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},b.some=function(a,b){return f(a,b)},b.prototype.some=function(a){return f(this,a)},b._SomePromiseArray=e}},{"./errors":12,"./util":36}],32:[function(a,b,c){"use strict";b.exports=function(a){function b(a){void 0!==a?(a=a._target(),this._bitField=a._bitField,this._settledValueField=a._isFateSealed()?a._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}b.prototype._settledValue=function(){return this._settledValueField};var c=b.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},d=b.prototype.error=b.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},e=b.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},f=b.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},g=b.prototype.isPending=function(){return 0==(50397184&this._bitField)},h=b.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};b.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},a.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},a.prototype._isCancelled=function(){return this._target().__isCancelled()},a.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},a.prototype.isPending=function(){return g.call(this._target())},a.prototype.isRejected=function(){return f.call(this._target())},a.prototype.isFulfilled=function(){return e.call(this._target())},a.prototype.isResolved=function(){return h.call(this._target())},a.prototype.value=function(){return c.call(this._target())},a.prototype.reason=function(){var a=this._target();return a._unsetRejectionIsUnhandled(),d.call(a)},a.prototype._value=function(){return this._settledValue()},a.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},a.PromiseInspection=b}},{}],33:[function(a,b,c){"use strict";b.exports=function(b,c){function d(a,d){if(k(a)){if(a instanceof b)return a;var e=f(a);if(e===j){d&&d._pushContext();var i=b.reject(e.e);return d&&d._popContext(),i}if("function"==typeof e){if(g(a)){var i=new b(c);return a._then(i._fulfill,i._reject,void 0,i,null),i}return h(a,e,d)}}return a}function e(a){return a.then}function f(a){try{return e(a)}catch(a){return j.e=a,j}}function g(a){try{return l.call(a,"_promise0")}catch(a){return!1}}function h(a,d,e){function f(a){h&&(h._resolveCallback(a),h=null)}function g(a){h&&(h._rejectCallback(a,l,!0),h=null)}var h=new b(c),k=h;e&&e._pushContext(),h._captureStackTrace(),e&&e._popContext();var l=!0,m=i.tryCatch(d).call(a,f,g);return l=!1,h&&m===j&&(h._rejectCallback(m.e,!0,!0),h=null),k}var i=a("./util"),j=i.errorObj,k=i.isObject,l={}.hasOwnProperty;return d}},{"./util":36}],34:[function(a,b,c){"use strict";b.exports=function(b,c,d){function e(a){this.handle=a}function f(a){return clearTimeout(this.handle),a}function g(a){throw clearTimeout(this.handle),a}var h=a("./util"),i=b.TimeoutError;e.prototype._resultCancelled=function(){clearTimeout(this.handle)};var j=function(a){return k(+this).thenReturn(a)},k=b.delay=function(a,f){var g,h;return void 0!==f?(g=b.resolve(f)._then(j,null,null,a,void 0),d.cancellation()&&f instanceof b&&g._setOnCancel(f)):(g=new b(c),h=setTimeout(function(){g._fulfill()},+a),d.cancellation()&&g._setOnCancel(new e(h)),g._captureStackTrace()),g._setAsyncGuaranteed(),g};b.prototype.delay=function(a){return k(a,this)};var l=function(a,b,c){var d;d="string"!=typeof b?b instanceof Error?b:new i("operation timed out"):new i(b),h.markAsOriginatingFromRejection(d),a._attachExtraTrace(d),a._reject(d),null!=c&&c.cancel()};b.prototype.timeout=function(a,b){a=+a;var c,h,i=new e(setTimeout(function(){c.isPending()&&l(c,b,h)},a));return d.cancellation()?(h=this.then(),c=h._then(f,g,void 0,i,void 0),c._setOnCancel(i)):c=this._then(f,g,void 0,i,void 0),c}}},{"./util":36}],35:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){function h(a){setTimeout(function(){throw a},0)}function i(a){var b=d(a);return b!==a&&"function"==typeof a._isDisposable&&"function"==typeof a._getDisposer&&a._isDisposable()&&b._setDisposable(a._getDisposer()),b}function j(a,c){function e(){if(g>=j)return k._fulfill();var f=i(a[g++]);if(f instanceof b&&f._isDisposable()){try{f=d(f._getDisposer().tryDispose(c),a.promise)}catch(a){return h(a)}if(f instanceof b)return f._then(e,h,null,null,null)}e()}var g=0,j=a.length,k=new b(f);return e(),k}function k(a,b,c){this._data=a,this._promise=b,this._context=c}function l(a,b,c){this.constructor$(a,b,c)}function m(a){return k.isDisposer(a)?(this.resources[this.index]._setDisposable(a),a.promise()):a}function n(a){this.length=a,this.promise=null,this[a-1]=null}var o=a("./util"),p=a("./errors").TypeError,q=a("./util").inherits,r=o.errorObj,s=o.tryCatch,t={};k.prototype.data=function(){return this._data},k.prototype.promise=function(){return this._promise},k.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():t},k.prototype.tryDispose=function(a){var b=this.resource(),c=this._context;void 0!==c&&c._pushContext();var d=b!==t?this.doDispose(b,a):null;return void 0!==c&&c._popContext(),this._promise._unsetDisposable(),this._data=null,d},k.isDisposer=function(a){return null!=a&&"function"==typeof a.resource&&"function"==typeof a.tryDispose},q(l,k),l.prototype.doDispose=function(a,b){return this.data().call(a,a,b)},n.prototype._resultCancelled=function(){for(var a=this.length,c=0;c<a;++c){var d=this[c];d instanceof b&&d.cancel()}},b.using=function(){var a=arguments.length;if(a<2)return c("you must pass at least 2 arguments to Promise.using");var e=arguments[a-1];if("function"!=typeof e)return c("expecting a function but got "+o.classString(e));var f,h=!0;2===a&&Array.isArray(arguments[0])?(f=arguments[0],a=f.length,h=!1):(f=arguments,a--);for(var i=new n(a),l=0;l<a;++l){var p=f[l];if(k.isDisposer(p)){var q=p;p=p.promise(),p._setDisposable(q)}else{var t=d(p);t instanceof b&&(p=t._then(m,null,null,{resources:i,index:l},void 0))}i[l]=p}for(var u=new Array(i.length),l=0;l<u.length;++l)u[l]=b.resolve(i[l]).reflect();var v=b.all(u).then(function(a){for(var b=0;b<a.length;++b){var c=a[b];if(c.isRejected())return r.e=c.error(),r;if(!c.isFulfilled())return void v.cancel();a[b]=c.value()}w._pushContext(),e=s(e);var d=h?e.apply(void 0,a):e(a),f=w._popContext();return g.checkForgottenReturns(d,f,"Promise.using",w),d}),w=v.lastly(function(){var a=new b.PromiseInspection(v);return j(i,a)});return i.promise=w,w._setOnCancel(i),w},b.prototype._setDisposable=function(a){this._bitField=131072|this._bitField,this._disposer=a},b.prototype._isDisposable=function(){return(131072&this._bitField)>0},b.prototype._getDisposer=function(){return this._disposer},b.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},b.prototype.disposer=function(a){if("function"==typeof a)return new l(a,this,e());throw new p}}},{"./errors":12,"./util":36}],36:[function(b,c,e){"use strict";function f(){try{var a=F;return F=null,a.apply(this,arguments)}catch(a){return E.e=a,E}}function g(a){return F=a,f}function h(a){return null==a||!0===a||!1===a||"string"==typeof a||"number"==typeof a}function i(a){return"function"==typeof a||"object"==typeof a&&null!==a}function j(a){return h(a)?new Error(s(a)):a}function k(a,b){var c,d=a.length,e=new Array(d+1);for(c=0;c<d;++c)e[c]=a[c];return e[c]=b,e}function l(a,b,c){if(!C.isES5)return{}.hasOwnProperty.call(a,b)?a[b]:void 0;var d=Object.getOwnPropertyDescriptor(a,b);return null!=d?null==d.get&&null==d.set?d.value:c:void 0}function m(a,b,c){if(h(a))return a;var d={value:c,configurable:!0,enumerable:!1,writable:!0};return C.defineProperty(a,b,d),a}function n(a){throw a}function o(a){try{if("function"==typeof a){var b=C.names(a.prototype),c=C.isES5&&b.length>1,d=b.length>0&&!(1===b.length&&"constructor"===b[0]),e=J.test(a+"")&&C.names(a).length>0;if(c||d||e)return!0}return!1}catch(a){return!1}}function p(a){function b(){}b.prototype=a;for(var c=8;c--;)new b;return a}function q(a){return K.test(a)}function r(a,b,c){for(var d=new Array(a),e=0;e<a;++e)d[e]=b+e+c;return d}function s(a){try{return a+""}catch(a){return"[no string representation]"}}function t(a){return null!==a&&"object"==typeof a&&"string"==typeof a.message&&"string"==typeof a.name}function u(a){try{m(a,"isOperational",!0)}catch(a){}}function v(a){return null!=a&&(a instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===a.isOperational)}function w(a){return t(a)&&C.propertyIsWritable(a,"stack")}function x(a){return{}.toString.call(a)}function y(a,b,c){for(var d=C.names(a),e=0;e<d.length;++e){var f=d[e];if(c(f))try{C.defineProperty(b,f,C.getDescriptor(a,f))}catch(a){}}}function z(b,c){return O?a.env[b]:c}function A(){if("function"==typeof Promise)try{var a=new Promise(function(){});if("[object Promise]"==={}.toString.call(a))return Promise}catch(a){}}function B(a,b){return a.bind(b)}var C=b("./es5"),D="undefined"==typeof navigator,E={e:{}},F,G="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==d?d:void 0!==this?this:null,H=function(a,b){function c(){this.constructor=a,this.constructor$=b;for(var c in b.prototype)d.call(b.prototype,c)&&"$"!==c.charAt(c.length-1)&&(this[c+"$"]=b.prototype[c])}var d={}.hasOwnProperty;return c.prototype=b.prototype,a.prototype=new c,a.prototype},I=function(){var a=[Array.prototype,Object.prototype,Function.prototype],b=function(b){for(var c=0;c<a.length;++c)if(a[c]===b)return!0;return!1};if(C.isES5){var c=Object.getOwnPropertyNames;return function(a){for(var d=[],e=Object.create(null);null!=a&&!b(a);){var f;try{f=c(a)}catch(a){return d}for(var g=0;g<f.length;++g){var h=f[g];if(!e[h]){e[h]=!0;var i=Object.getOwnPropertyDescriptor(a,h);null!=i&&null==i.get&&null==i.set&&d.push(h)}}a=C.getPrototypeOf(a)}return d}}var d={}.hasOwnProperty;return function(c){if(b(c))return[];var e=[];a:for(var f in c)if(d.call(c,f))e.push(f);else{for(var g=0;g<a.length;++g)if(d.call(a[g],f))continue a;e.push(f)}return e}}(),J=/this\s*\.\s*\S+\s*=/,K=/^[a-z$_][a-z$_0-9]*$/i,L=function(){return"stack"in new Error?function(a){return w(a)?a:new Error(s(a))}:function(a){if(w(a))return a;try{throw new Error(s(a))}catch(a){return a}}}(),M=function(a){return C.isArray(a)?a:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var N="function"==typeof Array.from?function(a){return Array.from(a)}:function(a){for(var b,c=[],d=a[Symbol.iterator]();!(b=d.next()).done;)c.push(b.value);return c};M=function(a){return C.isArray(a)?a:null!=a&&"function"==typeof a[Symbol.iterator]?N(a):null}}var O=void 0!==a&&"[object process]"===x(a).toLowerCase(),P={isClass:o,isIdentifier:q,inheritedDataKeys:I,getDataPropertyOrDefault:l,thrower:n,isArray:C.isArray,asArray:M,notEnumerableProp:m,isPrimitive:h,isObject:i,isError:t,canEvaluate:D,errorObj:E,tryCatch:g,inherits:H,withAppended:k,maybeWrapAsError:j,toFastProperties:p,filledRange:r,toString:s,canAttachTrace:w,ensureErrorObject:L,originatesFromRejection:v,markAsOriginatingFromRejection:u,classString:x,copyDescriptors:y,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:O,env:z,global:G,getNativePromise:A,domainBind:B};P.isRecentNode=P.isNode&&function(){var b=a.versions.node.split(".").map(Number);return 0===b[0]&&b[1]>10||b[0]>0}(),P.isNode&&P.toFastProperties(a);try{throw new Error}catch(a){P.lastLineError=a}c.exports=P},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:15}],3:[function(a,b,c){function d(a){if(a)return e(a)}function e(a){for(var b in d.prototype)a[b]=d.prototype[b];return a}void 0!==b&&(b.exports=d),d.prototype.on=d.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(b),this},d.prototype.once=function(a,b){function c(){this.off(a,c),b.apply(this,arguments)}return c.fn=b,this.on(a,c),this},d.prototype.off=d.prototype.removeListener=d.prototype.removeAllListeners=d.prototype.removeEventListener=function(a,b){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var c=this._callbacks["$"+a];if(!c)return this;if(1==arguments.length)return delete this._callbacks["$"+a],this;for(var d,e=0;e<c.length;e++)if((d=c[e])===b||d.fn===b){c.splice(e,1);break}return this},d.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks["$"+a];if(c){c=c.slice(0);for(var d=0,e=c.length;d<e;++d)c[d].apply(this,b)}return this},d.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks["$"+a]||[]},d.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],4:[function(a,b,c){var c=b.exports=function(a){a||(a={}),"string"==typeof a&&(a={cookie:a}),void 0===a.cookie&&(a.cookie="");var b={};return b.get=function(b){for(var c=a.cookie.split(/;\s*/),d=0;d<c.length;d++){var e=c[d].split("=");if(unescape(e[0])===b)return unescape(e[1])}},b.set=function(b,c,d){d||(d={});var e=escape(b)+"="+escape(c);return d.expires&&(e+="; expires="+d.expires),d.path&&(e+="; path="+escape(d.path)),d.domain&&(e+="; domain="+escape(d.domain)),d.secure&&(e+="; secure"),a.cookie=e,e},b};if("undefined"!=typeof document){var d=c(document);c.get=d.get,c.set=d.set}},{}],5:[function(a,b,c){"function"==typeof Object.create?b.exports=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:b.exports=function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],6:[function(a,b,c){(function(a){function c(a,b,c){return a===a&&(void 0!==c&&(a=a<=c?a:c),void 0!==b&&(a=a>=b?a:b)),a}function d(a){if("string"==typeof a)return a;if(g(a))return C?C.call(a):"";var b=a+"";return"0"==b&&1/a==-m?"-0":b}function e(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function f(a){return!!a&&"object"==typeof a}function g(a){return"symbol"==typeof a||f(a)&&z.call(a)==p}function h(a){if(!a)return 0===a?a:0;if((a=j(a))===m||a===-m){return(a<0?-1:1)*n}return a===a?a:0}function i(a){var b=h(a),c=b%1;return b===b?c?b-c:b:0}function j(a){if("number"==typeof a)return a;if(g(a))return o;if(e(a)){var b="function"==typeof a.valueOf?a.valueOf():a;a=e(b)?b+"":b}if("string"!=typeof a)return 0===a?a:+a;a=a.replace(q,"");var c=s.test(a);return c||t.test(a)?u(a.slice(2),c?2:8):r.test(a)?o:+a}function k(a){return null==a?"":d(a)}function l(a,b,e){a=k(a),b=d(b);var f=a.length;e=void 0===e?f:c(i(e),0,f);var g=e;return(e-=b.length)>=0&&a.slice(e,g)==b}var m=1/0,n=1.7976931348623157e308,o=NaN,p="[object Symbol]",q=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,t=/^0o[0-7]+$/i,u=parseInt,v="object"==typeof a&&a&&a.Object===Object&&a,w="object"==typeof self&&self&&self.Object===Object&&self,x=v||w||Function("return this")(),y=Object.prototype,z=y.toString,A=x.Symbol,B=A?A.prototype:void 0,C=B?B.toString:void 0;b.exports=l}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(a,b,c){(function(a){function c(a,b){return null==a?void 0:a[b]}function d(a){var b=!1;if(null!=a&&"function"!=typeof a.toString)try{b=!!(a+"")}catch(a){}return b}function e(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function f(){this.__data__=qa?qa(null):{}}function g(a){return this.has(a)&&delete this.__data__[a]}function h(a){var b=this.__data__;if(qa){var c=b[a];return c===R?void 0:c}return ka.call(b,a)?b[a]:void 0}function i(a){var b=this.__data__;return qa?void 0!==b[a]:ka.call(b,a)}function j(a,b){return this.__data__[a]=qa&&void 0===b?R:b,this}function k(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function l(){this.__data__=[]}function m(a){var b=this.__data__,c=w(b,a);return!(c<0)&&(c==b.length-1?b.pop():oa.call(b,c,1),!0)}function n(a){var b=this.__data__,c=w(b,a);return c<0?void 0:b[c][1]}function o(a){return w(this.__data__,a)>-1}function p(a,b){var c=this.__data__,d=w(c,a);return d<0?c.push([a,b]):c[d][1]=b,this}function q(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function r(){this.__data__={hash:new e,map:new(pa||k),string:new e}}function s(a){return B(this,a).delete(a)}function t(a){return B(this,a).get(a)}function u(a){return B(this,a).has(a)}function v(a,b){return B(this,a).set(a,b),this}function w(a,b){for(var c=a.length;c--;)if(J(a[c][0],b))return c;return-1}function x(a,b){b=D(b,a)?[b]:A(b);for(var c=0,d=b.length;null!=a&&c<d;)a=a[G(b[c++])];return c&&c==d?a:void 0}function y(a){return!(!L(a)||F(a))&&(K(a)||d(a)?ma:aa).test(H(a))}function z(a){if("string"==typeof a)return a;if(N(a))return sa?sa.call(a):"";var b=a+"";return"0"==b&&1/a==-S?"-0":b}function A(a){return ua(a)?a:ta(a)}function B(a,b){var c=a.__data__;return E(b)?c["string"==typeof b?"string":"hash"]:c.map}function C(a,b){var d=c(a,b);return y(d)?d:void 0}function D(a,b){if(ua(a))return!1;var c=typeof a;return!("number"!=c&&"symbol"!=c&&"boolean"!=c&&null!=a&&!N(a))||(X.test(a)||!W.test(a)||null!=b&&a in Object(b))}function E(a){var b=typeof a;return"string"==b||"number"==b||"symbol"==b||"boolean"==b?"__proto__"!==a:null===a}function F(a){return!!ia&&ia in a}function G(a){if("string"==typeof a||N(a))return a;var b=a+"";return"0"==b&&1/a==-S?"-0":b}function H(a){if(null!=a){try{return ja.call(a)}catch(a){}try{return a+""}catch(a){}}return""}function I(a,b){if("function"!=typeof a||b&&"function"!=typeof b)throw new TypeError(Q);var c=function(){var d=arguments,e=b?b.apply(this,d):d[0],f=c.cache;if(f.has(e))return f.get(e);var g=a.apply(this,d);return c.cache=f.set(e,g),g};return c.cache=new(I.Cache||q),c}function J(a,b){return a===b||a!==a&&b!==b}function K(a){var b=L(a)?la.call(a):"";return b==T||b==U}function L(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function M(a){return!!a&&"object"==typeof a}function N(a){return"symbol"==typeof a||M(a)&&la.call(a)==V}function O(a){return null==a?"":z(a)}function P(a,b,c){var d=null==a?void 0:x(a,b);return void 0===d?c:d}
var Q="Expected a function",R="__lodash_hash_undefined__",S=1/0,T="[object Function]",U="[object GeneratorFunction]",V="[object Symbol]",W=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,X=/^\w*$/,Y=/^\./,Z=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$=/[\\^$.*+?()[\]{}|]/g,_=/\\(\\)?/g,aa=/^\[object .+?Constructor\]$/,ba="object"==typeof a&&a&&a.Object===Object&&a,ca="object"==typeof self&&self&&self.Object===Object&&self,da=ba||ca||Function("return this")(),ea=Array.prototype,fa=Function.prototype,ga=Object.prototype,ha=da["__core-js_shared__"],ia=function(){var a=/[^.]+$/.exec(ha&&ha.keys&&ha.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),ja=fa.toString,ka=ga.hasOwnProperty,la=ga.toString,ma=RegExp("^"+ja.call(ka).replace($,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),na=da.Symbol,oa=ea.splice,pa=C(da,"Map"),qa=C(Object,"create"),ra=na?na.prototype:void 0,sa=ra?ra.toString:void 0;e.prototype.clear=f,e.prototype.delete=g,e.prototype.get=h,e.prototype.has=i,e.prototype.set=j,k.prototype.clear=l,k.prototype.delete=m,k.prototype.get=n,k.prototype.has=o,k.prototype.set=p,q.prototype.clear=r,q.prototype.delete=s,q.prototype.get=t,q.prototype.has=u,q.prototype.set=v;var ta=I(function(a){a=O(a);var b=[];return Y.test(a)&&b.push(""),a.replace(Z,function(a,c,d,e){b.push(d?e.replace(_,"$1"):c||a)}),b});I.Cache=q;var ua=Array.isArray;b.exports=P}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(a,b,c){(function(a){function c(a,b){return null==a?void 0:a[b]}function d(a){var b=!1;if(null!=a&&"function"!=typeof a.toString)try{b=!!(a+"")}catch(a){}return b}function e(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function f(){this.__data__=Aa?Aa(null):{}}function g(a){return this.has(a)&&delete this.__data__[a]}function h(a){var b=this.__data__;if(Aa){var c=b[a];return c===X?void 0:c}return ta.call(b,a)?b[a]:void 0}function i(a){var b=this.__data__;return Aa?void 0!==b[a]:ta.call(b,a)}function j(a,b){return this.__data__[a]=Aa&&void 0===b?X:b,this}function k(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function l(){this.__data__=[]}function m(a){var b=this.__data__,c=w(b,a);return!(c<0)&&(c==b.length-1?b.pop():ya.call(b,c,1),!0)}function n(a){var b=this.__data__,c=w(b,a);return c<0?void 0:b[c][1]}function o(a){return w(this.__data__,a)>-1}function p(a,b){var c=this.__data__,d=w(c,a);return d<0?c.push([a,b]):c[d][1]=b,this}function q(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function r(){this.__data__={hash:new e,map:new(za||k),string:new e}}function s(a){return B(this,a).delete(a)}function t(a){return B(this,a).get(a)}function u(a){return B(this,a).has(a)}function v(a,b){return B(this,a).set(a,b),this}function w(a,b){for(var c=a.length;c--;)if(L(a[c][0],b))return c;return-1}function x(a,b){return null!=a&&ta.call(a,b)}function y(a){return!(!R(a)||H(a))&&(P(a)||d(a)?va:ia).test(J(a))}function z(a){if("string"==typeof a)return a;if(T(a))return Ca?Ca.call(a):"";var b=a+"";return"0"==b&&1/a==-Y?"-0":b}function A(a){return Ea(a)?a:Da(a)}function B(a,b){var c=a.__data__;return G(b)?c["string"==typeof b?"string":"hash"]:c.map}function C(a,b){var d=c(a,b);return y(d)?d:void 0}function D(a,b,c){b=F(b,a)?[b]:A(b);for(var d,e=-1,f=b.length;++e<f;){var g=I(b[e]);if(!(d=null!=a&&c(a,g)))break;a=a[g]}if(d)return d;var f=a?a.length:0;return!!f&&Q(f)&&E(g,f)&&(Ea(a)||M(a))}function E(a,b){return!!(b=null==b?Z:b)&&("number"==typeof a||ja.test(a))&&a>-1&&a%1==0&&a<b}function F(a,b){if(Ea(a))return!1;var c=typeof a;return!("number"!=c&&"symbol"!=c&&"boolean"!=c&&null!=a&&!T(a))||(da.test(a)||!ca.test(a)||null!=b&&a in Object(b))}function G(a){var b=typeof a;return"string"==b||"number"==b||"symbol"==b||"boolean"==b?"__proto__"!==a:null===a}function H(a){return!!ra&&ra in a}function I(a){if("string"==typeof a||T(a))return a;var b=a+"";return"0"==b&&1/a==-Y?"-0":b}function J(a){if(null!=a){try{return sa.call(a)}catch(a){}try{return a+""}catch(a){}}return""}function K(a,b){if("function"!=typeof a||b&&"function"!=typeof b)throw new TypeError(W);var c=function(){var d=arguments,e=b?b.apply(this,d):d[0],f=c.cache;if(f.has(e))return f.get(e);var g=a.apply(this,d);return c.cache=f.set(e,g),g};return c.cache=new(K.Cache||q),c}function L(a,b){return a===b||a!==a&&b!==b}function M(a){return O(a)&&ta.call(a,"callee")&&(!xa.call(a,"callee")||ua.call(a)==$)}function N(a){return null!=a&&Q(a.length)&&!P(a)}function O(a){return S(a)&&N(a)}function P(a){var b=R(a)?ua.call(a):"";return b==_||b==aa}function Q(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=Z}function R(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function S(a){return!!a&&"object"==typeof a}function T(a){return"symbol"==typeof a||S(a)&&ua.call(a)==ba}function U(a){return null==a?"":z(a)}function V(a,b){return null!=a&&D(a,b,x)}var W="Expected a function",X="__lodash_hash_undefined__",Y=1/0,Z=9007199254740991,$="[object Arguments]",_="[object Function]",aa="[object GeneratorFunction]",ba="[object Symbol]",ca=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,da=/^\w*$/,ea=/^\./,fa=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ga=/[\\^$.*+?()[\]{}|]/g,ha=/\\(\\)?/g,ia=/^\[object .+?Constructor\]$/,ja=/^(?:0|[1-9]\d*)$/,ka="object"==typeof a&&a&&a.Object===Object&&a,la="object"==typeof self&&self&&self.Object===Object&&self,ma=ka||la||Function("return this")(),na=Array.prototype,oa=Function.prototype,pa=Object.prototype,qa=ma["__core-js_shared__"],ra=function(){var a=/[^.]+$/.exec(qa&&qa.keys&&qa.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),sa=oa.toString,ta=pa.hasOwnProperty,ua=pa.toString,va=RegExp("^"+sa.call(ta).replace(ga,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wa=ma.Symbol,xa=pa.propertyIsEnumerable,ya=na.splice,za=C(ma,"Map"),Aa=C(Object,"create"),Ba=wa?wa.prototype:void 0,Ca=Ba?Ba.toString:void 0;e.prototype.clear=f,e.prototype.delete=g,e.prototype.get=h,e.prototype.has=i,e.prototype.set=j,k.prototype.clear=l,k.prototype.delete=m,k.prototype.get=n,k.prototype.has=o,k.prototype.set=p,q.prototype.clear=r,q.prototype.delete=s,q.prototype.get=t,q.prototype.has=u,q.prototype.set=v;var Da=K(function(a){a=U(a);var b=[];return ea.test(a)&&b.push(""),a.replace(fa,function(a,c,d,e){b.push(d?e.replace(ha,"$1"):c||a)}),b});K.Cache=q;var Ea=Array.isArray;b.exports=V}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(a,b,c){function d(a){return null==a}b.exports=d},{}],10:[function(a,b,c){(function(a){function d(a,b){return a.set(b[0],b[1]),a}function e(a,b){return a.add(b),a}function f(a,b,c){switch(c.length){case 0:return a.call(b);case 1:return a.call(b,c[0]);case 2:return a.call(b,c[0],c[1]);case 3:return a.call(b,c[0],c[1],c[2])}return a.apply(b,c)}function g(a,b){for(var c=-1,d=a?a.length:0;++c<d&&!1!==b(a[c],c,a););return a}function h(a,b){for(var c=-1,d=b.length,e=a.length;++c<d;)a[e+c]=b[c];return a}function i(a,b,c,d){var e=-1,f=a?a.length:0;for(d&&f&&(c=a[++e]);++e<f;)c=b(c,a[e],e,a);return c}function j(a,b){for(var c=-1,d=Array(a);++c<a;)d[c]=b(c);return d}function k(a,b){return null==a?void 0:a[b]}function l(a){var b=!1;if(null!=a&&"function"!=typeof a.toString)try{b=!!(a+"")}catch(a){}return b}function m(a){var b=-1,c=Array(a.size);return a.forEach(function(a,d){c[++b]=[d,a]}),c}function n(a,b){return function(c){return a(b(c))}}function o(a){var b=-1,c=Array(a.size);return a.forEach(function(a){c[++b]=a}),c}function p(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function q(){this.__data__=_b?_b(null):{}}function r(a){return this.has(a)&&delete this.__data__[a]}function s(a){var b=this.__data__;if(_b){var c=b[a];return c===Oa?void 0:c}return Hb.call(b,a)?b[a]:void 0}function t(a){var b=this.__data__;return _b?void 0!==b[a]:Hb.call(b,a)}function u(a,b){return this.__data__[a]=_b&&void 0===b?Oa:b,this}function v(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function w(){this.__data__=[]}function x(a){var b=this.__data__,c=Q(b,a);return!(c<0)&&(c==b.length-1?b.pop():Rb.call(b,c,1),!0)}function y(a){var b=this.__data__,c=Q(b,a);return c<0?void 0:b[c][1]}function z(a){return Q(this.__data__,a)>-1}function A(a,b){var c=this.__data__,d=Q(c,a);return d<0?c.push([a,b]):c[d][1]=b,this}function B(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function C(){this.__data__={hash:new p,map:new(Xb||v),string:new p}}function D(a){return na(this,a).delete(a)}function E(a){return na(this,a).get(a)}function F(a){return na(this,a).has(a)}function G(a,b){return na(this,a).set(a,b),this}function H(a){this.__data__=new v(a)}function I(){this.__data__=new v}function J(a){return this.__data__.delete(a)}function K(a){return this.__data__.get(a)}function L(a){return this.__data__.has(a)}function M(a,b){var c=this.__data__;if(c instanceof v){var d=c.__data__;if(!Xb||d.length<Na-1)return d.push([a,b]),this;c=this.__data__=new B(d)}return c.set(a,b),this}function N(a,b){var c=jc(a)||Aa(a)?j(a.length,String):[],d=c.length,e=!!d;for(var f in a)!b&&!Hb.call(a,f)||e&&("length"==f||sa(f,d))||c.push(f);return c}function O(a,b,c){(void 0===c||za(a[b],c))&&("number"!=typeof b||void 0!==c||b in a)||(a[b]=c)}function P(a,b,c){var d=a[b];Hb.call(a,b)&&za(d,c)&&(void 0!==c||b in a)||(a[b]=c)}function Q(a,b){for(var c=a.length;c--;)if(za(a[c][0],b))return c;return-1}function R(a,b){return a&&ka(b,Ja(b),a)}function S(a,b,c,d,e,f,h){var i;if(d&&(i=f?d(a,e,f,h):d(a)),void 0!==i)return i;if(!Fa(a))return a;var j=jc(a);if(j){if(i=pa(a),!b)return ja(a,i)}else{var k=ic(a),m=k==Ta||k==Ua;if(kc(a))return ba(a,b);if(k==Xa||k==Qa||m&&!f){if(l(a))return f?a:{};if(i=qa(m?{}:a),!b)return la(a,R(i,a))}else{if(!rb[k])return f?a:{};i=ra(a,k,S,b)}}h||(h=new H);var n=h.get(a);if(n)return n;if(h.set(a,i),!j)var o=c?ma(a):Ja(a);return g(o||a,function(e,f){o&&(f=e,e=a[f]),P(i,f,S(e,b,c,d,f,a,h))}),i}function T(a){return Fa(a)?Pb(a):{}}function U(a,b,c){var d=b(a);return jc(a)?d:h(d,c(a))}function V(a){return Jb.call(a)}function W(a){return!(!Fa(a)||va(a))&&(Da(a)||l(a)?Kb:ob).test(ya(a))}function X(a){return Ga(a)&&Ea(a.length)&&!!qb[Jb.call(a)]}function Y(a){if(!wa(a))return Ub(a);var b=[];for(var c in Object(a))Hb.call(a,c)&&"constructor"!=c&&b.push(c);return b}function Z(a){if(!Fa(a))return xa(a);var b=wa(a),c=[];for(var d in a)("constructor"!=d||!b&&Hb.call(a,d))&&c.push(d);return c}function $(a,b,c,d,e){if(a!==b){if(!jc(b)&&!lc(b))var f=Z(b);g(f||b,function(g,h){if(f&&(h=g,g=b[h]),Fa(g))e||(e=new H),_(a,b,h,c,$,d,e);else{var i=d?d(a[h],g,h+"",a,b,e):void 0;void 0===i&&(i=g),O(a,h,i)}})}}function _(a,b,c,d,e,f,g){var h=a[c],i=b[c],j=g.get(i);if(j)return void O(a,c,j);var k=f?f(h,i,c+"",a,b,g):void 0,l=void 0===k;l&&(k=i,jc(i)||lc(i)?jc(h)?k=h:Ca(h)?k=ja(h):(l=!1,k=S(i,!0)):Ha(i)||Aa(i)?Aa(h)?k=Ia(h):!Fa(h)||d&&Da(h)?(l=!1,k=S(i,!0)):k=h:l=!1),l&&(g.set(i,k),e(k,i,d,f,g),g.delete(i)),O(a,c,k)}function aa(a,b){return b=Vb(void 0===b?a.length-1:b,0),function(){for(var c=arguments,d=-1,e=Vb(c.length-b,0),g=Array(e);++d<e;)g[d]=c[b+d];d=-1;for(var h=Array(b+1);++d<b;)h[d]=c[d];return h[b]=g,f(a,this,h)}}function ba(a,b){if(b)return a.slice();var c=new a.constructor(a.length);return a.copy(c),c}function ca(a){var b=new a.constructor(a.byteLength);return new Nb(b).set(new Nb(a)),b}function da(a,b){var c=b?ca(a.buffer):a.buffer;return new a.constructor(c,a.byteOffset,a.byteLength)}function ea(a,b,c){return i(b?c(m(a),!0):m(a),d,new a.constructor)}function fa(a){var b=new a.constructor(a.source,nb.exec(a));return b.lastIndex=a.lastIndex,b}function ga(a,b,c){return i(b?c(o(a),!0):o(a),e,new a.constructor)}function ha(a){return gc?Object(gc.call(a)):{}}function ia(a,b){var c=b?ca(a.buffer):a.buffer;return new a.constructor(c,a.byteOffset,a.length)}function ja(a,b){var c=-1,d=a.length;for(b||(b=Array(d));++c<d;)b[c]=a[c];return b}function ka(a,b,c,d){c||(c={});for(var e=-1,f=b.length;++e<f;){var g=b[e],h=d?d(c[g],a[g],g,c,a):void 0;P(c,g,void 0===h?a[g]:h)}return c}function la(a,b){return ka(a,hc(a),b)}function ma(a){return U(a,Ja,hc)}function na(a,b){var c=a.__data__;return ua(b)?c["string"==typeof b?"string":"hash"]:c.map}function oa(a,b){var c=k(a,b);return W(c)?c:void 0}function pa(a){var b=a.length,c=a.constructor(b);return b&&"string"==typeof a[0]&&Hb.call(a,"index")&&(c.index=a.index,c.input=a.input),c}function qa(a){return"function"!=typeof a.constructor||wa(a)?{}:T(Ob(a))}function ra(a,b,c,d){var e=a.constructor;switch(b){case bb:return ca(a);case Ra:case Sa:return new e(+a);case cb:return da(a,d);case db:case eb:case fb:case gb:case hb:case ib:case jb:case kb:case lb:return ia(a,d);case Va:return ea(a,d,c);case Wa:case $a:return new e(a);case Ya:return fa(a);case Za:return ga(a,d,c);case _a:return ha(a)}}function sa(a,b){return!!(b=null==b?Pa:b)&&("number"==typeof a||pb.test(a))&&a>-1&&a%1==0&&a<b}function ta(a,b,c){if(!Fa(c))return!1;var d=typeof b;return!!("number"==d?Ba(c)&&sa(b,c.length):"string"==d&&b in c)&&za(c[b],a)}function ua(a){var b=typeof a;return"string"==b||"number"==b||"symbol"==b||"boolean"==b?"__proto__"!==a:null===a}function va(a){return!!Fb&&Fb in a}function wa(a){var b=a&&a.constructor;return a===("function"==typeof b&&b.prototype||Db)}function xa(a){var b=[];if(null!=a)for(var c in Object(a))b.push(c);return b}function ya(a){if(null!=a){try{return Gb.call(a)}catch(a){}try{return a+""}catch(a){}}return""}function za(a,b){return a===b||a!==a&&b!==b}function Aa(a){return Ca(a)&&Hb.call(a,"callee")&&(!Qb.call(a,"callee")||Jb.call(a)==Qa)}function Ba(a){return null!=a&&Ea(a.length)&&!Da(a)}function Ca(a){return Ga(a)&&Ba(a)}function Da(a){var b=Fa(a)?Jb.call(a):"";return b==Ta||b==Ua}function Ea(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=Pa}function Fa(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function Ga(a){return!!a&&"object"==typeof a}function Ha(a){if(!Ga(a)||Jb.call(a)!=Xa||l(a))return!1;var b=Ob(a);if(null===b)return!0;var c=Hb.call(b,"constructor")&&b.constructor;return"function"==typeof c&&c instanceof c&&Gb.call(c)==Ib}function Ia(a){return ka(a,Ka(a))}function Ja(a){return Ba(a)?N(a):Y(a)}function Ka(a){return Ba(a)?N(a,!0):Z(a)}function La(){return[]}function Ma(){return!1}var Na=200,Oa="__lodash_hash_undefined__",Pa=9007199254740991,Qa="[object Arguments]",Ra="[object Boolean]",Sa="[object Date]",Ta="[object Function]",Ua="[object GeneratorFunction]",Va="[object Map]",Wa="[object Number]",Xa="[object Object]",Ya="[object RegExp]",Za="[object Set]",$a="[object String]",_a="[object Symbol]",ab="[object WeakMap]",bb="[object ArrayBuffer]",cb="[object DataView]",db="[object Float32Array]",eb="[object Float64Array]",fb="[object Int8Array]",gb="[object Int16Array]",hb="[object Int32Array]",ib="[object Uint8Array]",jb="[object Uint8ClampedArray]",kb="[object Uint16Array]",lb="[object Uint32Array]",mb=/[\\^$.*+?()[\]{}|]/g,nb=/\w*$/,ob=/^\[object .+?Constructor\]$/,pb=/^(?:0|[1-9]\d*)$/,qb={};qb[db]=qb[eb]=qb[fb]=qb[gb]=qb[hb]=qb[ib]=qb[jb]=qb[kb]=qb[lb]=!0,qb[Qa]=qb["[object Array]"]=qb[bb]=qb[Ra]=qb[cb]=qb[Sa]=qb["[object Error]"]=qb[Ta]=qb[Va]=qb[Wa]=qb[Xa]=qb[Ya]=qb[Za]=qb[$a]=qb[ab]=!1;var rb={};rb[Qa]=rb["[object Array]"]=rb[bb]=rb[cb]=rb[Ra]=rb[Sa]=rb[db]=rb[eb]=rb[fb]=rb[gb]=rb[hb]=rb[Va]=rb[Wa]=rb[Xa]=rb[Ya]=rb[Za]=rb[$a]=rb[_a]=rb[ib]=rb[jb]=rb[kb]=rb[lb]=!0,rb["[object Error]"]=rb[Ta]=rb[ab]=!1;var sb="object"==typeof a&&a&&a.Object===Object&&a,tb="object"==typeof self&&self&&self.Object===Object&&self,ub=sb||tb||Function("return this")(),vb="object"==typeof c&&c&&!c.nodeType&&c,wb=vb&&"object"==typeof b&&b&&!b.nodeType&&b,xb=wb&&wb.exports===vb,yb=xb&&sb.process,zb=function(){try{return yb&&yb.binding("util")}catch(a){}}(),Ab=zb&&zb.isTypedArray,Bb=Array.prototype,Cb=Function.prototype,Db=Object.prototype,Eb=ub["__core-js_shared__"],Fb=function(){var a=/[^.]+$/.exec(Eb&&Eb.keys&&Eb.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),Gb=Cb.toString,Hb=Db.hasOwnProperty,Ib=Gb.call(Object),Jb=Db.toString,Kb=RegExp("^"+Gb.call(Hb).replace(mb,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Lb=xb?ub.Buffer:void 0,Mb=ub.Symbol,Nb=ub.Uint8Array,Ob=n(Object.getPrototypeOf,Object),Pb=Object.create,Qb=Db.propertyIsEnumerable,Rb=Bb.splice,Sb=Object.getOwnPropertySymbols,Tb=Lb?Lb.isBuffer:void 0,Ub=n(Object.keys,Object),Vb=Math.max,Wb=oa(ub,"DataView"),Xb=oa(ub,"Map"),Yb=oa(ub,"Promise"),Zb=oa(ub,"Set"),$b=oa(ub,"WeakMap"),_b=oa(Object,"create"),ac=ya(Wb),bc=ya(Xb),cc=ya(Yb),dc=ya(Zb),ec=ya($b),fc=Mb?Mb.prototype:void 0,gc=fc?fc.valueOf:void 0;p.prototype.clear=q,p.prototype.delete=r,p.prototype.get=s,p.prototype.has=t,p.prototype.set=u,v.prototype.clear=w,v.prototype.delete=x,v.prototype.get=y,v.prototype.has=z,v.prototype.set=A,B.prototype.clear=C,B.prototype.delete=D,B.prototype.get=E,B.prototype.has=F,B.prototype.set=G,H.prototype.clear=I,H.prototype.delete=J,H.prototype.get=K,H.prototype.has=L,H.prototype.set=M;var hc=Sb?n(Sb,Object):La,ic=V;(Wb&&ic(new Wb(new ArrayBuffer(1)))!=cb||Xb&&ic(new Xb)!=Va||Yb&&"[object Promise]"!=ic(Yb.resolve())||Zb&&ic(new Zb)!=Za||$b&&ic(new $b)!=ab)&&(ic=function(a){var b=Jb.call(a),c=b==Xa?a.constructor:void 0,d=c?ya(c):void 0;if(d)switch(d){case ac:return cb;case bc:return Va;case cc:return"[object Promise]";case dc:return Za;case ec:return ab}return b});var jc=Array.isArray,kc=Tb||Ma,lc=Ab?function(a){return function(b){return a(b)}}(Ab):X,mc=function(a){return aa(function(b,c){var d=-1,e=c.length,f=e>1?c[e-1]:void 0,g=e>2?c[2]:void 0;for(f=a.length>3&&"function"==typeof f?(e--,f):void 0,g&&ta(c[0],c[1],g)&&(f=e<3?void 0:f,e=1),b=Object(b);++d<e;){var h=c[d];h&&a(b,h,d,f)}return b})}(function(a,b,c){$(a,b,c)});b.exports=mc}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],11:[function(a,b,c){(function(a){function d(a,b){for(var c=-1,d=b.length,e=a.length;++c<d;)a[e+c]=b[c];return a}function e(a,b){for(var c=-1,d=a?a.length:0;++c<d;)if(b(a[c],c,a))return!0;return!1}function f(a){return function(b){return null==b?void 0:b[a]}}function g(a,b){for(var c=-1,d=Array(a);++c<a;)d[c]=b(c);return d}function h(a,b){return null==a?void 0:a[b]}function i(a){var b=!1;if(null!=a&&"function"!=typeof a.toString)try{b=!!(a+"")}catch(a){}return b}function j(a){var b=-1,c=Array(a.size);return a.forEach(function(a,d){c[++b]=[d,a]}),c}function k(a,b){return function(c){return a(b(c))}}function l(a){var b=-1,c=Array(a.size);return a.forEach(function(a){c[++b]=a}),c}function m(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function n(){this.__data__=$b?$b(null):{}}function o(a){return this.has(a)&&delete this.__data__[a]}function p(a){var b=this.__data__;if($b){var c=b[a];return c===Ua?void 0:c}return Lb.call(b,a)?b[a]:void 0}function q(a){var b=this.__data__;return $b?void 0!==b[a]:Lb.call(b,a)}function r(a,b){return this.__data__[a]=$b&&void 0===b?Ua:b,this}function s(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function t(){this.__data__=[]}function u(a){var b=this.__data__,c=O(b,a);return!(c<0)&&(c==b.length-1?b.pop():Sb.call(b,c,1),!0)}function v(a){var b=this.__data__,c=O(b,a);return c<0?void 0:b[c][1]}function w(a){return O(this.__data__,a)>-1}function x(a,b){var c=this.__data__,d=O(c,a);return d<0?c.push([a,b]):c[d][1]=b,this}function y(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function z(){this.__data__={hash:new m,map:new(Wb||s),string:new m}}function A(a){return ja(this,a).delete(a)}function B(a){return ja(this,a).get(a)}function C(a){return ja(this,a).has(a)}function D(a,b){return ja(this,a).set(a,b),this}function E(a){var b=-1,c=a?a.length:0;for(this.__data__=new y;++b<c;)this.add(a[b])}function F(a){return this.__data__.set(a,Ua),this}function G(a){return this.__data__.has(a)}function H(a){this.__data__=new s(a)}function I(){this.__data__=new s}function J(a){return this.__data__.delete(a)}function K(a){return this.__data__.get(a)}function L(a){return this.__data__.has(a)}function M(a,b){var c=this.__data__;if(c instanceof s){var d=c.__data__;if(!Wb||d.length<Sa-1)return d.push([a,b]),this;c=this.__data__=new y(d)}return c.set(a,b),this}function N(a,b){var c=lc(a)||Aa(a)?g(a.length,String):[],d=c.length,e=!!d;for(var f in a)!b&&!Lb.call(a,f)||e&&("length"==f||na(f,d))||c.push(f);return c}function O(a,b){for(var c=a.length;c--;)if(za(a[c][0],b))return c;return-1}function P(a,b){b=oa(b,a)?[b]:ea(b);for(var c=0,d=b.length;null!=a&&c<d;)a=a[va(b[c++])];return c&&c==d?a:void 0}function Q(a,b,c){var e=b(a);return lc(a)?e:d(e,c(a))}function R(a){return Mb.call(a)}function S(a,b){return null!=a&&b in Object(a)}function T(a,b,c,d,e){return a===b||(null==a||null==b||!Fa(a)&&!Ga(b)?a!==a&&b!==b:U(a,b,T,c,d,e))}function U(a,b,c,d,e,f){var g=lc(a),h=lc(b),j=$a,k=$a;g||(j=jc(a),j=j==Za?gb:j),h||(k=jc(b),k=k==Za?gb:k);var l=j==gb&&!i(a),m=k==gb&&!i(b),n=j==k;if(n&&!l)return f||(f=new H),g||mc(a)?fa(a,b,c,d,e,f):ga(a,b,j,c,d,e,f);if(!(e&Wa)){var o=l&&Lb.call(a,"__wrapped__"),p=m&&Lb.call(b,"__wrapped__");if(o||p){var q=o?a.value():a,r=p?b.value():b;return f||(f=new H),c(q,r,d,e,f)}}return!!n&&(f||(f=new H),ha(a,b,c,d,e,f))}function V(a,b,c,d){var e=c.length,f=e,g=!d;if(null==a)return!f;for(a=Object(a);e--;){var h=c[e];if(g&&h[2]?h[1]!==a[h[0]]:!(h[0]in a))return!1}for(;++e<f;){h=c[e];var i=h[0],j=a[i],k=h[1];if(g&&h[2]){if(void 0===j&&!(i in a))return!1}else{var l=new H;if(d)var m=d(j,k,i,a,b,l);if(!(void 0===m?T(k,j,d,Va|Wa,l):m))return!1}}return!0}function W(a){return!(!Fa(a)||qa(a))&&(Da(a)||i(a)?Nb:tb).test(wa(a))}function X(a){return Ga(a)&&Ea(a.length)&&!!vb[Mb.call(a)]}function Y(a){return"function"==typeof a?a:null==a?Pa:"object"==typeof a?lc(a)?aa(a[0],a[1]):_(a):Qa(a)}function Z(a){if(!ra(a))return Ub(a);var b=[];for(var c in Object(a))Lb.call(a,c)&&"constructor"!=c&&b.push(c);return b}function $(a){if(!Fa(a))return ua(a);var b=ra(a),c=[];for(var d in a)("constructor"!=d||!b&&Lb.call(a,d))&&c.push(d);return c}function _(a){var b=ka(a);return 1==b.length&&b[0][2]?ta(b[0][0],b[0][1]):function(c){return c===a||V(c,a,b)}}function aa(a,b){return oa(a)&&sa(b)?ta(va(a),b):function(c){var d=Ja(c,a);return void 0===d&&d===b?Ka(c,a):T(b,d,void 0,Va|Wa)}}function ba(a,b,c){for(var d=-1,e=b.length,f={};++d<e;){var g=b[d],h=a[g];c(h,g)&&(f[g]=h)}return f}function ca(a){return function(b){return P(b,a)}}function da(a){if("string"==typeof a)return a;if(Ha(a))return gc?gc.call(a):"";var b=a+"";return"0"==b&&1/a==-Xa?"-0":b}function ea(a){return lc(a)?a:kc(a)}function fa(a,b,c,d,f,g){var h=f&Wa,i=a.length,j=b.length;if(i!=j&&!(h&&j>i))return!1;var k=g.get(a);if(k&&g.get(b))return k==b;var l=-1,m=!0,n=f&Va?new E:void 0;for(g.set(a,b),g.set(b,a);++l<i;){var o=a[l],p=b[l];if(d)var q=h?d(p,o,l,b,a,g):d(o,p,l,a,b,g);if(void 0!==q){if(q)continue;m=!1;break}if(n){if(!e(b,function(a,b){if(!n.has(b)&&(o===a||c(o,a,d,f,g)))return n.add(b)})){m=!1;break}}else if(o!==p&&!c(o,p,d,f,g)){m=!1;break}}return g.delete(a),g.delete(b),m}function ga(a,b,c,d,e,f,g){switch(c){case mb:if(a.byteLength!=b.byteLength||a.byteOffset!=b.byteOffset)return!1;a=a.buffer,b=b.buffer;case lb:return!(a.byteLength!=b.byteLength||!d(new Pb(a),new Pb(b)));case _a:case ab:case fb:return za(+a,+b);case bb:return a.name==b.name&&a.message==b.message;case hb:case jb:return a==b+"";case eb:var h=j;case ib:var i=f&Wa;if(h||(h=l),a.size!=b.size&&!i)return!1;var k=g.get(a);if(k)return k==b;f|=Va,g.set(a,b);var m=fa(h(a),h(b),d,e,f,g);return g.delete(a),m;case kb:if(fc)return fc.call(a)==fc.call(b)}return!1}function ha(a,b,c,d,e,f){var g=e&Wa,h=La(a),i=h.length;if(i!=La(b).length&&!g)return!1;for(var j=i;j--;){var k=h[j];if(!(g?k in b:Lb.call(b,k)))return!1}var l=f.get(a);if(l&&f.get(b))return l==b;var m=!0;f.set(a,b),f.set(b,a);for(var n=g;++j<i;){k=h[j];var o=a[k],p=b[k];if(d)var q=g?d(p,o,k,b,a,f):d(o,p,k,a,b,f);if(!(void 0===q?o===p||c(o,p,d,e,f):q)){m=!1;break}n||(n="constructor"==k)}if(m&&!n){var r=a.constructor,s=b.constructor;r!=s&&"constructor"in a&&"constructor"in b&&!("function"==typeof r&&r instanceof r&&"function"==typeof s&&s instanceof s)&&(m=!1)}return f.delete(a),f.delete(b),m}function ia(a){return Q(a,Ma,ic)}function ja(a,b){var c=a.__data__;return pa(b)?c["string"==typeof b?"string":"hash"]:c.map}function ka(a){for(var b=La(a),c=b.length;c--;){var d=b[c],e=a[d];b[c]=[d,e,sa(e)]}return b}function la(a,b){var c=h(a,b);return W(c)?c:void 0}function ma(a,b,c){b=oa(b,a)?[b]:ea(b);for(var d,e=-1,f=b.length;++e<f;){var g=va(b[e]);if(!(d=null!=a&&c(a,g)))break;a=a[g]}if(d)return d;var f=a?a.length:0;return!!f&&Ea(f)&&na(g,f)&&(lc(a)||Aa(a))}function na(a,b){return!!(b=null==b?Ya:b)&&("number"==typeof a||ub.test(a))&&a>-1&&a%1==0&&a<b}function oa(a,b){if(lc(a))return!1;var c=typeof a;return!("number"!=c&&"symbol"!=c&&"boolean"!=c&&null!=a&&!Ha(a))||(ob.test(a)||!nb.test(a)||null!=b&&a in Object(b))}function pa(a){var b=typeof a;return"string"==b||"number"==b||"symbol"==b||"boolean"==b?"__proto__"!==a:null===a}function qa(a){return!!Jb&&Jb in a}function ra(a){var b=a&&a.constructor;return a===("function"==typeof b&&b.prototype||Hb)}function sa(a){return a===a&&!Fa(a)}function ta(a,b){return function(c){return null!=c&&(c[a]===b&&(void 0!==b||a in Object(c)))}}function ua(a){var b=[];if(null!=a)for(var c in Object(a))b.push(c);return b}function va(a){if("string"==typeof a||Ha(a))return a;var b=a+"";return"0"==b&&1/a==-Xa?"-0":b}function wa(a){if(null!=a){try{return Kb.call(a)}catch(a){}try{return a+""}catch(a){}}return""}function xa(a,b){if("function"!=typeof a||b&&"function"!=typeof b)throw new TypeError(Ta);var c=function(){var d=arguments,e=b?b.apply(this,d):d[0],f=c.cache;if(f.has(e))return f.get(e);var g=a.apply(this,d);return c.cache=f.set(e,g),g};return c.cache=new(xa.Cache||y),c}function ya(a){if("function"!=typeof a)throw new TypeError(Ta);return function(){var b=arguments;switch(b.length){case 0:return!a.call(this);case 1:return!a.call(this,b[0]);case 2:return!a.call(this,b[0],b[1]);case 3:return!a.call(this,b[0],b[1],b[2])}return!a.apply(this,b)}}function za(a,b){return a===b||a!==a&&b!==b}function Aa(a){return Ca(a)&&Lb.call(a,"callee")&&(!Rb.call(a,"callee")||Mb.call(a)==Za)}function Ba(a){return null!=a&&Ea(a.length)&&!Da(a)}function Ca(a){return Ga(a)&&Ba(a)}function Da(a){var b=Fa(a)?Mb.call(a):"";return b==cb||b==db}function Ea(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=Ya}function Fa(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function Ga(a){return!!a&&"object"==typeof a}function Ha(a){return"symbol"==typeof a||Ga(a)&&Mb.call(a)==kb}function Ia(a){return null==a?"":da(a)}function Ja(a,b,c){var d=null==a?void 0:P(a,b);return void 0===d?c:d}function Ka(a,b){return null!=a&&ma(a,b,S)}function La(a){return Ba(a)?N(a):Z(a)}function Ma(a){return Ba(a)?N(a,!0):$(a)}function Na(a,b){return Oa(a,ya(Y(b)))}function Oa(a,b){return null==a?{}:ba(a,ia(a),Y(b))}function Pa(a){return a}function Qa(a){return oa(a)?f(va(a)):ca(a)}function Ra(){return[]}var Sa=200,Ta="Expected a function",Ua="__lodash_hash_undefined__",Va=1,Wa=2,Xa=1/0,Ya=9007199254740991,Za="[object Arguments]",$a="[object Array]",_a="[object Boolean]",ab="[object Date]",bb="[object Error]",cb="[object Function]",db="[object GeneratorFunction]",eb="[object Map]",fb="[object Number]",gb="[object Object]",hb="[object RegExp]",ib="[object Set]",jb="[object String]",kb="[object Symbol]",lb="[object ArrayBuffer]",mb="[object DataView]",nb=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ob=/^\w*$/,pb=/^\./,qb=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rb=/[\\^$.*+?()[\]{}|]/g,sb=/\\(\\)?/g,tb=/^\[object .+?Constructor\]$/,ub=/^(?:0|[1-9]\d*)$/,vb={};vb["[object Float32Array]"]=vb["[object Float64Array]"]=vb["[object Int8Array]"]=vb["[object Int16Array]"]=vb["[object Int32Array]"]=vb["[object Uint8Array]"]=vb["[object Uint8ClampedArray]"]=vb["[object Uint16Array]"]=vb["[object Uint32Array]"]=!0,vb[Za]=vb[$a]=vb[lb]=vb[_a]=vb[mb]=vb[ab]=vb[bb]=vb[cb]=vb[eb]=vb[fb]=vb[gb]=vb[hb]=vb[ib]=vb[jb]=vb["[object WeakMap]"]=!1;var wb="object"==typeof a&&a&&a.Object===Object&&a,xb="object"==typeof self&&self&&self.Object===Object&&self,yb=wb||xb||Function("return this")(),zb="object"==typeof c&&c&&!c.nodeType&&c,Ab=zb&&"object"==typeof b&&b&&!b.nodeType&&b,Bb=Ab&&Ab.exports===zb,Cb=Bb&&wb.process,Db=function(){try{return Cb&&Cb.binding("util")}catch(a){}}(),Eb=Db&&Db.isTypedArray,Fb=Array.prototype,Gb=Function.prototype,Hb=Object.prototype,Ib=yb["__core-js_shared__"],Jb=function(){var a=/[^.]+$/.exec(Ib&&Ib.keys&&Ib.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),Kb=Gb.toString,Lb=Hb.hasOwnProperty,Mb=Hb.toString,Nb=RegExp("^"+Kb.call(Lb).replace(rb,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ob=yb.Symbol,Pb=yb.Uint8Array,Qb=k(Object.getPrototypeOf,Object),Rb=Hb.propertyIsEnumerable,Sb=Fb.splice,Tb=Object.getOwnPropertySymbols,Ub=k(Object.keys,Object),Vb=la(yb,"DataView"),Wb=la(yb,"Map"),Xb=la(yb,"Promise"),Yb=la(yb,"Set"),Zb=la(yb,"WeakMap"),$b=la(Object,"create"),_b=wa(Vb),ac=wa(Wb),bc=wa(Xb),cc=wa(Yb),dc=wa(Zb),ec=Ob?Ob.prototype:void 0,fc=ec?ec.valueOf:void 0,gc=ec?ec.toString:void 0;m.prototype.clear=n,m.prototype.delete=o,m.prototype.get=p,m.prototype.has=q,m.prototype.set=r,s.prototype.clear=t,s.prototype.delete=u,s.prototype.get=v,s.prototype.has=w,s.prototype.set=x,y.prototype.clear=z,y.prototype.delete=A,y.prototype.get=B,y.prototype.has=C,y.prototype.set=D,E.prototype.add=E.prototype.push=F,E.prototype.has=G,H.prototype.clear=I,H.prototype.delete=J,H.prototype.get=K,H.prototype.has=L,H.prototype.set=M;var hc=Tb?k(Tb,Object):Ra,ic=Tb?function(a){for(var b=[];a;)d(b,hc(a)),a=Qb(a);return b}:Ra,jc=R;(Vb&&jc(new Vb(new ArrayBuffer(1)))!=mb||Wb&&jc(new Wb)!=eb||Xb&&"[object Promise]"!=jc(Xb.resolve())||Yb&&jc(new Yb)!=ib||Zb&&"[object WeakMap]"!=jc(new Zb))&&(jc=function(a){var b=Mb.call(a),c=b==gb?a.constructor:void 0,d=c?wa(c):void 0;if(d)switch(d){case _b:return mb;case ac:return eb;case bc:return"[object Promise]";case cc:return ib;case dc:return"[object WeakMap]"}return b});var kc=xa(function(a){a=Ia(a);var b=[];return pb.test(a)&&b.push(""),a.replace(qb,function(a,c,d,e){b.push(d?e.replace(sb,"$1"):c||a)}),b});xa.Cache=y;var lc=Array.isArray,mc=Eb?function(a){return function(b){return a(b)}}(Eb):X;b.exports=Na}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],12:[function(a,b,c){(function(a){function c(a,b,c){switch(c.length){case 0:return a.call(b);case 1:return a.call(b,c[0]);case 2:return a.call(b,c[0],c[1]);case 3:return a.call(b,c[0],c[1],c[2])}return a.apply(b,c)}function d(a,b){for(var c=-1,d=a?a.length:0,e=Array(d);++c<d;)e[c]=b(a[c],c,a);return e}function e(a,b){for(var c=-1,d=b.length,e=a.length;++c<d;)a[e+c]=b[c];return a}function f(a,b,c,d,g){var h=-1,j=a.length;for(c||(c=i),g||(g=[]);++h<j;){var k=a[h];b>0&&c(k)?b>1?f(k,b-1,c,d,g):e(g,k):d||(g[g.length]=k)}return g}function g(a,b){return a=Object(a),h(a,b,function(b,c){return c in a})}function h(a,b,c){for(var d=-1,e=b.length,f={};++d<e;){var g=b[d],h=a[g];c(h,g)&&(f[g]=h)}return f}function i(a){return I(a)||k(a)||!!(G&&a&&a[G])}function j(a){if("string"==typeof a||r(a))return a;var b=a+"";return"0"==b&&1/a==-s?"-0":b}function k(a){return m(a)&&C.call(a,"callee")&&(!F.call(a,"callee")||D.call(a)==u)}function l(a){return null!=a&&o(a.length)&&!n(a)}function m(a){return q(a)&&l(a)}function n(a){var b=p(a)?D.call(a):"";return b==v||b==w}function o(a){
return"number"==typeof a&&a>-1&&a%1==0&&a<=t}function p(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function q(a){return!!a&&"object"==typeof a}function r(a){return"symbol"==typeof a||q(a)&&D.call(a)==x}var s=1/0,t=9007199254740991,u="[object Arguments]",v="[object Function]",w="[object GeneratorFunction]",x="[object Symbol]",y="object"==typeof a&&a&&a.Object===Object&&a,z="object"==typeof self&&self&&self.Object===Object&&self,A=y||z||Function("return this")(),B=Object.prototype,C=B.hasOwnProperty,D=B.toString,E=A.Symbol,F=B.propertyIsEnumerable,G=E?E.isConcatSpreadable:void 0,H=Math.max,I=Array.isArray,J=function(a,b){return b=H(void 0===b?a.length-1:b,0),function(){for(var d=arguments,e=-1,f=H(d.length-b,0),g=Array(f);++e<f;)g[e]=d[b+e];e=-1;for(var h=Array(b+1);++e<b;)h[e]=d[e];return h[b]=g,c(a,this,h)}}(function(a,b){return null==a?{}:g(a,d(f(b,1),j))});b.exports=J}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(a,b,c){(function(a){function c(a,b){return null==a?void 0:a[b]}function d(a){var b=!1;if(null!=a&&"function"!=typeof a.toString)try{b=!!(a+"")}catch(a){}return b}function e(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function f(){this.__data__=ua?ua(null):{}}function g(a){return this.has(a)&&delete this.__data__[a]}function h(a){var b=this.__data__;if(ua){var c=b[a];return c===T?void 0:c}return oa.call(b,a)?b[a]:void 0}function i(a){var b=this.__data__;return ua?void 0!==b[a]:oa.call(b,a)}function j(a,b){return this.__data__[a]=ua&&void 0===b?T:b,this}function k(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function l(){this.__data__=[]}function m(a){var b=this.__data__,c=x(b,a);return!(c<0)&&(c==b.length-1?b.pop():sa.call(b,c,1),!0)}function n(a){var b=this.__data__,c=x(b,a);return c<0?void 0:b[c][1]}function o(a){return x(this.__data__,a)>-1}function p(a,b){var c=this.__data__,d=x(c,a);return d<0?c.push([a,b]):c[d][1]=b,this}function q(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function r(){this.__data__={hash:new e,map:new(ta||k),string:new e}}function s(a){return C(this,a).delete(a)}function t(a){return C(this,a).get(a)}function u(a){return C(this,a).has(a)}function v(a,b){return C(this,a).set(a,b),this}function w(a,b,c){var d=a[b];oa.call(a,b)&&L(d,c)&&(void 0!==c||b in a)||(a[b]=c)}function x(a,b){for(var c=a.length;c--;)if(L(a[c][0],b))return c;return-1}function y(a){return!(!N(a)||H(a))&&(M(a)||d(a)?qa:da).test(J(a))}function z(a,b,c,d){if(!N(a))return a;b=F(b,a)?[b]:B(b);for(var e=-1,f=b.length,g=f-1,h=a;null!=h&&++e<f;){var i=I(b[e]),j=c;if(e!=g){var k=h[i];j=d?d(k,i,h):void 0,void 0===j&&(j=N(k)?k:E(b[e+1])?[]:{})}w(h,i,j),h=h[i]}return a}function A(a){if("string"==typeof a)return a;if(P(a))return wa?wa.call(a):"";var b=a+"";return"0"==b&&1/a==-U?"-0":b}function B(a){return ya(a)?a:xa(a)}function C(a,b){var c=a.__data__;return G(b)?c["string"==typeof b?"string":"hash"]:c.map}function D(a,b){var d=c(a,b);return y(d)?d:void 0}function E(a,b){return!!(b=null==b?V:b)&&("number"==typeof a||ea.test(a))&&a>-1&&a%1==0&&a<b}function F(a,b){if(ya(a))return!1;var c=typeof a;return!("number"!=c&&"symbol"!=c&&"boolean"!=c&&null!=a&&!P(a))||($.test(a)||!Z.test(a)||null!=b&&a in Object(b))}function G(a){var b=typeof a;return"string"==b||"number"==b||"symbol"==b||"boolean"==b?"__proto__"!==a:null===a}function H(a){return!!ma&&ma in a}function I(a){if("string"==typeof a||P(a))return a;var b=a+"";return"0"==b&&1/a==-U?"-0":b}function J(a){if(null!=a){try{return na.call(a)}catch(a){}try{return a+""}catch(a){}}return""}function K(a,b){if("function"!=typeof a||b&&"function"!=typeof b)throw new TypeError(S);var c=function(){var d=arguments,e=b?b.apply(this,d):d[0],f=c.cache;if(f.has(e))return f.get(e);var g=a.apply(this,d);return c.cache=f.set(e,g),g};return c.cache=new(K.Cache||q),c}function L(a,b){return a===b||a!==a&&b!==b}function M(a){var b=N(a)?pa.call(a):"";return b==W||b==X}function N(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function O(a){return!!a&&"object"==typeof a}function P(a){return"symbol"==typeof a||O(a)&&pa.call(a)==Y}function Q(a){return null==a?"":A(a)}function R(a,b,c){return null==a?a:z(a,b,c)}var S="Expected a function",T="__lodash_hash_undefined__",U=1/0,V=9007199254740991,W="[object Function]",X="[object GeneratorFunction]",Y="[object Symbol]",Z=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$=/^\w*$/,_=/^\./,aa=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ba=/[\\^$.*+?()[\]{}|]/g,ca=/\\(\\)?/g,da=/^\[object .+?Constructor\]$/,ea=/^(?:0|[1-9]\d*)$/,fa="object"==typeof a&&a&&a.Object===Object&&a,ga="object"==typeof self&&self&&self.Object===Object&&self,ha=fa||ga||Function("return this")(),ia=Array.prototype,ja=Function.prototype,ka=Object.prototype,la=ha["__core-js_shared__"],ma=function(){var a=/[^.]+$/.exec(la&&la.keys&&la.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),na=ja.toString,oa=ka.hasOwnProperty,pa=ka.toString,qa=RegExp("^"+na.call(oa).replace(ba,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ra=ha.Symbol,sa=ia.splice,ta=D(ha,"Map"),ua=D(Object,"create"),va=ra?ra.prototype:void 0,wa=va?va.toString:void 0;e.prototype.clear=f,e.prototype.delete=g,e.prototype.get=h,e.prototype.has=i,e.prototype.set=j,k.prototype.clear=l,k.prototype.delete=m,k.prototype.get=n,k.prototype.has=o,k.prototype.set=p,q.prototype.clear=r,q.prototype.delete=s,q.prototype.get=t,q.prototype.has=u,q.prototype.set=v;var xa=K(function(a){a=Q(a);var b=[];return _.test(a)&&b.push(""),a.replace(aa,function(a,c,d,e){b.push(d?e.replace(ca,"$1"):c||a)}),b});K.Cache=q;var ya=Array.isArray;b.exports=R}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],14:[function(a,b,c){function d(a,b){for(var c=-1,d=a?a.length:0,e=Array(d);++c<d;)e[c]=b(a[c],c,a);return e}function e(a,b){for(var c=-1,d=Array(a);++c<a;)d[c]=b(c);return d}function f(a,b){return d(b,function(b){return a[b]})}function g(a,b){var c=D(a)||k(a)?e(a.length,String):[],d=c.length,f=!!d;for(var g in a)!b&&!z.call(a,g)||f&&("length"==g||i(g,d))||c.push(g);return c}function h(a){if(!j(a))return C(a);var b=[];for(var c in Object(a))z.call(a,c)&&"constructor"!=c&&b.push(c);return b}function i(a,b){return!!(b=null==b?t:b)&&("number"==typeof a||x.test(a))&&a>-1&&a%1==0&&a<b}function j(a){var b=a&&a.constructor;return a===("function"==typeof b&&b.prototype||y)}function k(a){return m(a)&&z.call(a,"callee")&&(!B.call(a,"callee")||A.call(a)==u)}function l(a){return null!=a&&o(a.length)&&!n(a)}function m(a){return q(a)&&l(a)}function n(a){var b=p(a)?A.call(a):"";return b==v||b==w}function o(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=t}function p(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function q(a){return!!a&&"object"==typeof a}function r(a){return l(a)?g(a):h(a)}function s(a){return a?f(a,r(a)):[]}var t=9007199254740991,u="[object Arguments]",v="[object Function]",w="[object GeneratorFunction]",x=/^(?:0|[1-9]\d*)$/,y=Object.prototype,z=y.hasOwnProperty,A=y.toString,B=y.propertyIsEnumerable,C=function(a,b){return function(c){return a(b(c))}}(Object.keys,Object),D=Array.isArray;b.exports=s},{}],15:[function(a,b,c){function d(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function f(a){if(l===setTimeout)return setTimeout(a,0);if((l===d||!l)&&setTimeout)return l=setTimeout,setTimeout(a,0);try{return l(a,0)}catch(b){try{return l.call(null,a,0)}catch(b){return l.call(this,a,0)}}}function g(a){if(m===clearTimeout)return clearTimeout(a);if((m===e||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(a);try{return m(a)}catch(b){try{return m.call(null,a)}catch(b){return m.call(this,a)}}}function h(){q&&o&&(q=!1,o.length?p=o.concat(p):r=-1,p.length&&i())}function i(){if(!q){var a=f(h);q=!0;for(var b=p.length;b;){for(o=p,p=[];++r<b;)o&&o[r].run();r=-1,b=p.length}o=null,q=!1,g(a)}}function j(a,b){this.fun=a,this.array=b}function k(){}var l,m,n=b.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:d}catch(a){l=d}try{m="function"==typeof clearTimeout?clearTimeout:e}catch(a){m=e}}();var o,p=[],q=!1,r=-1;n.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];p.push(new j(a,b)),1!==p.length||q||f(i)},j.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=k,n.addListener=k,n.once=k,n.off=k,n.removeListener=k,n.removeAllListeners=k,n.emit=k,n.prependListener=k,n.prependOnceListener=k,n.listeners=function(a){return[]},n.binding=function(a){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(a){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],16:[function(a,b,c){var d=a("bluebird"),e=b.exports=a("superagent"),f=e.Request;try{d.config({cancellation:!0})}catch(a){console.warn(["Enabling bluebird cancellation failed.","If you are using bluebird elsewhere in your application,","be sure to enable cancellation there as well.","Promise.config({cancellation: true});"].join(" ")),console.warn(a.stack)}var g=function(a,b){var c;this.message=a,this.name="SuperagentPromiseError",this.originalError=b,Error.captureStackTrace?(Error.captureStackTrace(this,this.constructor),c=this.stack):c=new Error(a).stack,Object.defineProperty&&Object.defineProperty(this,"stack",{get:function(){return this.originalError?c+"\nCaused by:  "+this.originalError.stack:c}})};g.prototype=new Error,g.prototype.constructor=g,e.SuperagentPromiseError=g,f.prototype.promise=function(){var a,b=this;return new d(function(c,d,e){b.end(function(e,f){if(void 0!==f&&null!==f&&f.status>=400){var h="cannot "+b.method+" "+b.url+" ("+f.status+")";a=new g(h),a.status=f.status,a.body=f.body,a.res=f,d(a)}else e?d(new g("Bad request",e)):c(f)}),"function"==typeof e&&e(function(){b.abort()})})},f.prototype.then=function(){var a=this.promise();return a.then.apply(a,arguments)},f.prototype.catch=function(){var a=this.promise();return a.catch.apply(a,arguments)}},{bluebird:2,superagent:17}],17:[function(a,b,c){function d(){}function e(a){if(!p(a))return a;var b=[];for(var c in a)f(b,c,a[c]);return b.join("&")}function f(a,b,c){if(null!=c)if(Array.isArray(c))c.forEach(function(c){f(a,b,c)});else if(p(c))for(var d in c)f(a,b+"["+d+"]",c[d]);else a.push(encodeURIComponent(b)+"="+encodeURIComponent(c));else null===c&&a.push(encodeURIComponent(b))}function g(a){for(var b,c,d={},e=a.split("&"),f=0,g=e.length;f<g;++f)b=e[f],c=b.indexOf("="),-1==c?d[decodeURIComponent(b)]="":d[decodeURIComponent(b.slice(0,c))]=decodeURIComponent(b.slice(c+1));return d}function h(a){var b,c,d,e,f=a.split(/\r?\n/),g={};f.pop();for(var h=0,i=f.length;h<i;++h)c=f[h],b=c.indexOf(":"),d=c.slice(0,b).toLowerCase(),e=t(c.slice(b+1)),g[d]=e;return g}function i(a){return/[\/+]json\b/.test(a)}function j(a){this.req=a,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var b=this.xhr.status;1223===b&&(b=204),this._setStatusProperties(b),this.header=this.headers=h(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&a._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function k(a,b){var c=this;this._query=this._query||[],this.method=a,this.url=b,this.header={},this._header={},this.on("end",function(){var a=null,b=null;try{b=new j(c)}catch(b){return a=new Error("Parser is unable to parse the response"),a.parse=!0,a.original=b,c.xhr?(a.rawResponse=void 0===c.xhr.responseType?c.xhr.responseText:c.xhr.response,a.status=c.xhr.status?c.xhr.status:null,a.statusCode=a.status):(a.rawResponse=null,a.status=null),c.callback(a)}c.emit("response",b);var d;try{c._isResponseOK(b)||(d=new Error(b.statusText||"Unsuccessful HTTP response"),d.original=a,d.response=b,d.status=b.status)}catch(a){d=a}d?c.callback(d,b):c.callback(null,b)})}function l(a,b,c){var d=s("DELETE",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d}var m;"undefined"!=typeof window?m=window:"undefined"!=typeof self?m=self:(console.warn("Using browser-only version of superagent in non-browser environment"),m=this);var n=a("component-emitter"),o=a("./request-base"),p=a("./is-object"),q=a("./response-base"),r=a("./should-retry"),s=c=b.exports=function(a,b){return"function"==typeof b?new c.Request("GET",a).end(b):1==arguments.length?new c.Request("GET",a):new c.Request(a,b)};c.Request=k,s.getXHR=function(){if(!(!m.XMLHttpRequest||m.location&&"file:"==m.location.protocol&&m.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(a){}throw Error("Browser-only version of superagent could not find XHR")};var t="".trim?function(a){return a.trim()}:function(a){return a.replace(/(^\s*|\s*$)/g,"")};s.serializeObject=e,s.parseString=g,s.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},s.serialize={"application/x-www-form-urlencoded":e,"application/json":JSON.stringify},s.parse={"application/x-www-form-urlencoded":g,"application/json":JSON.parse},q(j.prototype),j.prototype._parseBody=function(a){var b=s.parse[this.type];return this.req._parser?this.req._parser(this,a):(!b&&i(this.type)&&(b=s.parse["application/json"]),b&&a&&(a.length||a instanceof Object)?b(a):null)},j.prototype.toError=function(){var a=this.req,b=a.method,c=a.url,d="cannot "+b+" "+c+" ("+this.status+")",e=new Error(d);return e.status=this.status,e.method=b,e.url=c,e},s.Response=j,n(k.prototype),o(k.prototype),k.prototype.type=function(a){return this.set("Content-Type",s.types[a]||a),this},k.prototype.accept=function(a){return this.set("Accept",s.types[a]||a),this},k.prototype.auth=function(a,b,c){switch("object"==typeof b&&null!==b&&(c=b),c||(c={type:"function"==typeof btoa?"basic":"auto"}),c.type){case"basic":this.set("Authorization","Basic "+btoa(a+":"+b));break;case"auto":this.username=a,this.password=b;break;case"bearer":this.set("Authorization","Bearer "+a)}return this},k.prototype.query=function(a){return"string"!=typeof a&&(a=e(a)),a&&this._query.push(a),this},k.prototype.attach=function(a,b,c){if(b){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(a,b,c||b.name)}return this},k.prototype._getFormData=function(){return this._formData||(this._formData=new m.FormData),this._formData},k.prototype.callback=function(a,b){if(this._maxRetries&&this._retries++<this._maxRetries&&r(a,b))return this._retry();var c=this._callback;this.clearTimeout(),a&&(this._maxRetries&&(a.retries=this._retries-1),this.emit("error",a)),c(a,b)},k.prototype.crossDomainError=function(){var a=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");a.crossDomain=!0,a.status=this.status,a.method=this.method,a.url=this.url,this.callback(a)},k.prototype.buffer=k.prototype.ca=k.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},k.prototype.pipe=k.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},k.prototype._isHost=function(a){return a&&"object"==typeof a&&!Array.isArray(a)&&"[object Object]"!==Object.prototype.toString.call(a)},k.prototype.end=function(a){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=a||d,this._finalizeQueryString(),this._end()},k.prototype._end=function(){var a=this,b=this.xhr=s.getXHR(),c=this._formData||this._data;this._setTimeouts(),b.onreadystatechange=function(){var c=b.readyState;if(c>=2&&a._responseTimeoutTimer&&clearTimeout(a._responseTimeoutTimer),4==c){var d;try{d=b.status}catch(a){d=0}if(!d){if(a.timedout||a._aborted)return;return a.crossDomainError()}a.emit("end")}};var d=function(b,c){c.total>0&&(c.percent=c.loaded/c.total*100),c.direction=b,a.emit("progress",c)};if(this.hasListeners("progress"))try{b.onprogress=d.bind(null,"download"),b.upload&&(b.upload.onprogress=d.bind(null,"upload"))}catch(a){}try{this.username&&this.password?b.open(this.method,this.url,!0,this.username,this.password):b.open(this.method,this.url,!0)}catch(a){return this.callback(a)}if(this._withCredentials&&(b.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof c&&!this._isHost(c)){var e=this._header["content-type"],f=this._serializer||s.serialize[e?e.split(";")[0]:""];!f&&i(e)&&(f=s.serialize["application/json"]),f&&(c=f(c))}for(var g in this.header)null!=this.header[g]&&this.header.hasOwnProperty(g)&&b.setRequestHeader(g,this.header[g]);return this._responseType&&(b.responseType=this._responseType),this.emit("request",this),b.send(void 0!==c?c:null),this},s.get=function(a,b,c){var d=s("GET",a);return"function"==typeof b&&(c=b,b=null),b&&d.query(b),c&&d.end(c),d},s.head=function(a,b,c){var d=s("HEAD",a);return"function"==typeof b&&(c=b,b=null),b&&d.query(b),c&&d.end(c),d},s.options=function(a,b,c){var d=s("OPTIONS",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},s.del=l,s.delete=l,s.patch=function(a,b,c){var d=s("PATCH",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},s.post=function(a,b,c){var d=s("POST",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},s.put=function(a,b,c){var d=s("PUT",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d}},{"./is-object":18,"./request-base":19,"./response-base":20,"./should-retry":21,"component-emitter":3}],18:[function(a,b,c){function d(a){return null!==a&&"object"==typeof a}b.exports=d},{}],19:[function(a,b,c){function d(a){if(a)return e(a)}function e(a){for(var b in d.prototype)a[b]=d.prototype[b];return a}var f=a("./is-object");b.exports=d,d.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},d.prototype.parse=function(a){return this._parser=a,this},d.prototype.responseType=function(a){return this._responseType=a,this},d.prototype.serialize=function(a){return this._serializer=a,this},d.prototype.timeout=function(a){if(!a||"object"!=typeof a)return this._timeout=a,this._responseTimeout=0,this;for(var b in a)switch(b){case"deadline":this._timeout=a.deadline;break;case"response":this._responseTimeout=a.response;break;default:console.warn("Unknown timeout option",b)}return this},d.prototype.retry=function(a){return 0!==arguments.length&&!0!==a||(a=1),a<=0&&(a=0),this._maxRetries=a,this._retries=0,this},d.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},d.prototype.then=function(a,b){if(!this._fullfilledPromise){var c=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(a,b){c.end(function(c,d){c?b(c):a(d)})})}return this._fullfilledPromise.then(a,b)},d.prototype.catch=function(a){return this.then(void 0,a)},d.prototype.use=function(a){return a(this),this},d.prototype.ok=function(a){if("function"!=typeof a)throw Error("Callback required");return this._okCallback=a,this},d.prototype._isResponseOK=function(a){return!!a&&(this._okCallback?this._okCallback(a):a.status>=200&&a.status<300)},d.prototype.get=function(a){return this._header[a.toLowerCase()]},d.prototype.getHeader=d.prototype.get,d.prototype.set=function(a,b){if(f(a)){for(var c in a)this.set(c,a[c]);return this}return this._header[a.toLowerCase()]=b,this.header[a]=b,this},d.prototype.unset=function(a){return delete this._header[a.toLowerCase()],delete this.header[a],this},d.prototype.field=function(a,b){if(null===a||void 0===a)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),f(a)){for(var c in a)this.field(c,a[c]);return this}if(Array.isArray(b)){for(var d in b)this.field(a,b[d]);return this}if(null===b||void 0===b)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof b&&(b=""+b),this._getFormData().append(a,b),this},d.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},d.prototype.withCredentials=function(a){return void 0==a&&(a=!0),this._withCredentials=a,this},d.prototype.redirects=function(a){return this._maxRedirects=a,this},d.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},d.prototype.send=function(a){var b=f(a),c=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),b&&!this._data)Array.isArray(a)?this._data=[]:this._isHost(a)||(this._data={});else if(a&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(b&&f(this._data))for(var d in a)this._data[d]=a[d];else"string"==typeof a?(c||this.type("form"),c=this._header["content-type"],this._data="application/x-www-form-urlencoded"==c?this._data?this._data+"&"+a:a:(this._data||"")+a):this._data=a;return!b||this._isHost(a)?this:(c||this.type("json"),this)},d.prototype.sortQuery=function(a){return this._sort=void 0===a||a,this},d.prototype._finalizeQueryString=function(){var a=this._query.join("&");if(a&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+a),this._query.length=0,this._sort){var b=this.url.indexOf("?");if(b>=0){var c=this.url.substring(b+1).split("&");"function"==typeof this._sort?c.sort(this._sort):c.sort(),this.url=this.url.substring(0,b)+"?"+c.join("&")}}},d.prototype._appendQueryString=function(){console.trace("Unsupported")},d.prototype._timeoutError=function(a,b,c){if(!this._aborted){var d=new Error(a+b+"ms exceeded");d.timeout=b,d.code="ECONNABORTED",d.errno=c,this.timedout=!0,this.abort(),this.callback(d)}},d.prototype._setTimeouts=function(){var a=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){a._timeoutError("Timeout of ",a._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){a._timeoutError("Response timeout of ",a._responseTimeout,"ETIMEDOUT")},this._responseTimeout))}},{"./is-object":18}],20:[function(a,b,c){function d(a){if(a)return e(a)}function e(a){for(var b in d.prototype)a[b]=d.prototype[b];return a}var f=a("./utils");b.exports=d,d.prototype.get=function(a){return this.header[a.toLowerCase()]},d.prototype._setHeaderProperties=function(a){var b=a["content-type"]||"";this.type=f.type(b);var c=f.params(b);for(var d in c)this[d]=c[d];this.links={};try{a.link&&(this.links=f.parseLinks(a.link))}catch(a){}},d.prototype._setStatusProperties=function(a){var b=a/100|0;this.status=this.statusCode=a,this.statusType=b,this.info=1==b,this.ok=2==b,this.redirect=3==b,this.clientError=4==b,this.serverError=5==b,this.error=(4==b||5==b)&&this.toError(),this.accepted=202==a,this.noContent=204==a,this.badRequest=400==a,this.unauthorized=401==a,this.notAcceptable=406==a,this.forbidden=403==a,this.notFound=404==a}},{"./utils":22}],21:[function(a,b,c){var d=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];b.exports=function(a,b){return!!(a&&a.code&&~d.indexOf(a.code))||(!!(b&&b.status&&b.status>=500)||(!!(a&&"timeout"in a&&"ECONNABORTED"==a.code)||!!(a&&"crossDomain"in a)))}},{}],22:[function(a,b,c){c.type=function(a){return a.split(/ *; */).shift()},c.params=function(a){return a.split(/ *; */).reduce(function(a,b){var c=b.split(/ *= */),d=c.shift(),e=c.shift();return d&&e&&(a[d]=e),a},{})},c.parseLinks=function(a){return a.split(/ *, */).reduce(function(a,b){var c=b.split(/ *; */),d=c[0].slice(1,-1);return a[c[1].split(/ *= */)[1].slice(1,-1)]=d,a},{})},c.cleanHeader=function(a,b){return delete a["content-type"],delete a["content-length"],delete a["transfer-encoding"],delete a.host,b&&delete a.cookie,a}},{}],23:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b,c){var d=o+"/apis/v2/fans/"+a;j.default.get(d).withCredentials().set("X-Personalization-Source",s).end(function(a,d){if(a||!d.ok)c(a);else{var e=d&&d.body;u.setFan({item:e,id:e.id,timestamp:Date.now()}),b(e)}})}function f(a){return q.test(a)?new l.default(function(b,c){u.getFan().then(function(d){var f=d&&d.item,g=Date.now()-d.timestamp>60*t*1e3;null===f||f.id!==a||g?e(a,b,c):b(f)}).catch(function(){e(a,b,c)})}):l.default.reject(new Error("Invalid SWID"))}function g(a,b){if(!q.test(a))return l.default.reject(new Error("Invalid SWID"));var c=p+"/apis/v2/fans/"+a+"/profile/";return j.default.post(c).withCredentials().set("X-Personalization-Source",s).send(b).promise()}function h(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,b=a.sourceHeader,c=void 0===b?r.sourceHeader:b,d=a.cacheDuration,e=void 0===d?r.cacheDuration:d;return this instanceof h?(s=c,t=e,u=new n.default(t),this):new h({sourceHeader:c,cacheDuration:e})}var i=a("superagent-bluebird-promise"),j=d(i),k=a("bluebird"),l=d(k),m=a("./Storage"),n=d(m),o="//fan.api.espn.com",p="//fan.core.api.espn.com",q=/^\{[\w\-]+\}/,r={sourceHeader:"espn-video-player",cacheDuration:10},s=void 0,t=void 0,u=void 0;h.prototype.getFanForId=function(a,b){return f(a).tap(function(a){"function"==typeof b&&b(a)})},h.prototype.getAutoStartForFanId=function(a,b){return f(a).then(function(a){var b=a&&a.profile,c=b&&b.settings;return"2"!==(c&&c.videoAutoStart&&c.videoAutoStart.value)}).catch(function(){return!0}).tap(function(a){"function"==typeof b&&b(a)})},h.prototype.updateAutoStartForFanId=function(a,b,c){var d=(b?"1":"2").toString(),e={settings:{videoAutoStart:{value:d,lastUpdateSource:s,lastUpdateDate:Date.now()}}};return g(a,e).tap(function(a,b){"function"==typeof c&&c(a,b)}).catch(function(){return!0}).finally(function(){h.prototype.updateAutoStartCache(e.settings)})},h.prototype.updateAutoStartCache=function(a){var b=a.videoAutoStart;u.getFan().then(function(a){var c=a&&a.item,d=void 0;for(d in b)b.hasOwnProperty(d)&&(c.profile.settings.videoAutoStart[d]=b[d]);u.setFan({item:c,id:c.id,timestamp:Date.now()})}).catch(function(){})},h.prototype.getUidsForFanId=function(a,b){function c(a){return a.metaData.team||a.metaData.sport}function d(a){return a.metaData.team?a.metaData.team.uid:a.metaData.sport?a.metaData.sport.uid:null}return f(a).then(function(a){return(a&&a.preferences).filter(c).map(d)}).catch(function(){return[]}).tap(function(a){"function"==typeof b&&b(a)})},b.exports=h},{"./Storage":24,bluebird:2,"superagent-bluebird-promise":16}],24:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=a("bluebird"),g=function(a){return a&&a.__esModule?a:{default:a}}(f),h={ESPN:"ESPN",LOCAL_STORAGE:"LOCAL_STORAGE"},i={getItem:function(a){return g.default.resolve(JSON.parse(localStorage.getItem(a)))},setItem:function(a,b){localStorage.setItem(a,JSON.stringify(b))}},j=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;d(this,a),this.expiration=b,this.storageType=h.LOCAL_STORAGE}return e(a,[{key:"inferStorageType",value:function(){this.storageType!==h.ESPN&&window&&window.espn&&window.espn.storageFactory&&(this.storageType=h.ESPN,this.espnStorage=espn.storageFactory.getMostPermanent())}},{key:"getFan",value:function(){var a=this;return this.inferStorageType(),this.storageType===h.ESPN?new g.default(function(b,c){var d=a.espnStorage.getItem("fanapi_fan"),e=d&&d.item;e?(i.setItem("fanapi_fan",{item:e,id:e.id,timestamp:Date.now()}),b(d)):c(new Error("No item for key"))}):i.getItem("fanapi_fan")}},{key:"setFan",value:function(a){this.inferStorageType(),i.setItem("fanapi_fan",{item:a.item,id:a.id,timestamp:Date.now()}),this.storageType===h.ESPN&&this.espnStorage.setItem("fanapi_fan",{item:a.item,id:a&&a.id,expiresAt:(new Date).getTime()+6e4*this.expiration})}}]),a}();c.default=j},{bluebird:2}],25:[function(a,b,c){"use strict";var d=a("./FanAPI"),e=function(a){return a&&a.__esModule?a:{default:a}}(d);b.exports=e.default},{"./FanAPI":23}],26:[function(a,b,c){b.exports={name:"espn-video-player",publishConfig:{registry:"http://maven2.corp.espn3.com/content/repositories/espn-npm/"},repository:{type:"git",url:"git@code.espn.com:webdev/video.git"},scripts:{test:"grunt test","test-pages":"node test/pages/generate.js","network-tests":"grunt && node test/pages/webdriver-tests.js",postversion:"git push && git push --tags",copy2cdn:"cp distribution/* /Volumes/www_espn/prod/scripts/video-player-replacement"},version:"2.14.1-5",dependencies:{"espn-web-player-bundle":"1.8.4-4"},devDependencies:{async:"^2.0.1","body-parser":"^1.15.2",chai:"^3.5.0",cheerio:"^0.20.0",colors:"^1.1.2","cookie-cutter":"^0.2.0",express:"^4.14.0","express-xml-bodyparser":"^0.3.0",grunt:"0.4.5","grunt-browserify":"^5.0.0","grunt-cli":"^1.2.0","grunt-contrib-concat":"0.4.0","grunt-contrib-connect":"0.8.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-jshint":"latest","grunt-contrib-qunit":"0.5.2","grunt-contrib-requirejs":"0.4.4","grunt-contrib-uglify":"^2.0.0","grunt-contrib-watch":"^1.0.0","grunt-jsbeautifier":"^0.2.10","grunt-saucelabs":"^9.0.0","grunt-shell":"^1.3.1",inherits:"^2.0.1",jquery:"^3.1.1",jsdom:"^9.5.0",lodash:"^4.0.0","lodash.endswith":"^4.0.0","lodash.get":"^4.0.0","lodash.has":"^4.0.0","lodash.isnil":"^4.0.0","lodash.merge":"^4.0.0","lodash.omitby":"^4.0.0","lodash.pick":"^4.0.0","lodash.set":"^4.0.0","lodash.values":"^4.0.0",mocha:"latest","phantomjs-prebuilt":"^2.1.7",request:"^2.75.0","selenium-webdriver":"^3.0.0-beta-2",should:"latest","watch-fanapi":"^1.6.3",watchify:"^3.7.0"}}},{}],27:[function(a,b,c){!function(){"use strict";b.exports={siteNames:{espn:"espncom",fantasy:"espnfantasy",espnuk:"espncomuk",espndeportes:"espncomdeportes",espnau:"espncomaus",espnw:"espnw",xgames:"espnxgames",espnin:"espncomin",espnfc:"espnfc",fivethirtyeight:"espnfte",theundefeated:"espnud",cricinfo:"espncric"},deportesSiteNames:{"espn-es-mx":"espncommx","espn-es-ar":"espncomar","espn-es-ve":"espncomve","espn-es-cl":"espncomcl","espn-es-co":"espncomco"}}}()},{}],28:[function(a,b,c){!function(b){function d(a,c,d){var f=c.embeddedPlayerId||"vjs_video_1",g={},h=b("#"+f),j=h.closest("[data-video]"),k=h.closest("article"),l=b("body");return a=e.merge({},i.default,a),Object.keys(a).forEach(function(b){g[b]=a[b](c,d,{$targerReplaceEl:h,$videoContainer:j,$videoArticle:k,$body:l})}),e.omitBy(g,e.isNil)}var e=a("./lodash"),f=a("cookie-cutter"),g=function(){var a={
"#favfeed":"favorites","#news-feed":"news","#article-feed":"articles","#now-feed":"now",".lightbox-container":"popup","#gamepackage-gamebreak":"gamebreak",".col-two":"middlecolumn",".col-one":"leftcolumn"};return function(b,c){c=c||a;for(var d in c)if(b.closest(d).length)return c[d]}}(),h=function(){return"Not Applicable"},i={default:{ContentType:function(){return"Video"},SWID:function(){return e.get(window,"espn.core.SWID")||f.get("SWID")},Orientation:function(){if(window.espn_ui&&"desktop"===window.espn_ui.deviceType)return window.espn_ui.deviceType;var a,c;return e.has(window,"$.fn.width")?(a=b(window).width(),c=b(window).height()):(a=window.innerWidth,c=window.innerHeight),a>c?"Landscape":"Portrait"},UserAgent:function(){return e.get(window,"navigator.userAgent")},PersonalizationTierType:h,Network:h,Segment:h,AirDate:h,AirTime:h,AiringID:h,ProgramCode:h,SportCode:h,ClosedCaptioning:h,AccessMethod:h,AffiliateID:h,AffiliateName:h,PartnerPlayer:h},FC:{Site:function(){return e.get(window,"espn.track.data.omniture.site")||e.get(window,"omniSite")||e.get(window,"s_omni.prop1")},TrackingServer:function(){return e.get(window,"s_omni.trackingServer")},Edition:function(){return e.get(window,"espnfc.config.edition")},Language:function(){return e.get(window,"espnfc.config.language")},Sport:function(a,b,c){return e.get(window,"espn.track.data.omniture.sport")||c.$body.data("sport")},League:function(a,c,d){return b("video").closest("article").find(".tags li:first-child a").text()||e.get(window,"espn.track.data.omniture.league")||e.get(window,"espn.track.data.omniture.section")||e.get(window,"s_omni.eVar19")},PlayLocation:function(){return e.get(window,"espn.track.data.omniture.pageName")||e.get(window,"s_omni.pageName")},InsiderStatus:function(){return e.get(window,"espnfc.insider.access")?"yes":"no"},LoginStatus:function(){return e.get(window,"espn.core.loggedIn")?"[Registered:Logged in Active]":""},Personalization:function(){return e.get(window,"espn.track.favStatus")},StoryID:function(a,c,d){return b("video").closest("article").data("content-id")}},sCore:{UNID:function(){return window.unid?window.unid.get()||"":""},Site:function(){return e.get(window,"espn.track.data.omniture.site")||e.get(window,"omniSite")||e.get(window,"s_omni.prop1")},TrackingServer:function(){return e.get(window,"s_omni.trackingServer")},VideoType:function(){return"VOD"},Edition:function(){return(e.get(window,"espn.i18n.lang")||"")+"-"+(e.get(window,"espn.i18n.country")||"")},Language:function(){return e.get(window,"espn.i18n.lang")},Sport:function(a,b,c){return c.$body.data("sport")||e.get(window,"espn.track.data.omniture.sport")||e.get(window,"s_omni.eVar21")},Placement:function(a,b,c){var d=e.get(window,"espn.track.data.omniture.pageName")||e.get(window,"s_omni.pageName")||"index",f=g(c.$videoArticle)||"standalone";return e.get(a,"_embedOptions.placement")||d+":"+f},PersonalizationTierType:function(a,c,d){var e=d.$videoArticle&&d.$videoArticle.data("tier-type");return e||(e=b(d.$body.context.activeElement).data("tier-type")),e},PlayLocation:function(){return e.get(window,"espn.track.data.omniture.pageName")||e.get(window,"s_omni.pageName")},League:function(){return e.get(window,"espn.track.data.omniture.league")||e.get(window,"s_omni.eVar19")},InsiderStatus:function(){return/(has insider\:yes)|(insider-yes)/.test(e.get(window,"espn.memberservices.insider")||"")?"yes":"no"},LoginStatus:function(){return e.get(window,"espn.core.loggedIn")?"[Registered:Logged in Active]":""},Personalization:function(){return e.get(window,"espn.track.favStatus")},Embedded:function(a){return e.get(a,"_embedOptions.embedded")?"yes":"no"},GameID:function(){return e.get(window,"espn.gamepackage.gameId")},StoryID:function(a,b,c){return c.$videoArticle.data("id")}}};Object.keys(i).forEach(function(a){c[a]=function(b,c){return d(i[a],b,c)}})}(jQuery)},{"./lodash":31,"cookie-cutter":4}],29:[function(a,b,c){"use strict";var d=a("./lodash");c.getDeprecated=function(a){return function(){return console.warn(a,"has been deprecated")}};var e={"espndeportes.com":"es-us","espndeportes.espn.com":"es-us","espndeportes.espnqa.com":"es-us",".us":"en-us",".espnfc.com":"en-www",".com":"en-us",".co.uk":"en-gb",".com.au":"en-au",".in":"en-in",".com.mx":"es-mx",".com.co":"es-co",".com.ve":"es-ve",".cl":"es-cl"};c.isClipId=function(a){return/^[0-9]*$/.test(a)||"string"==typeof a&&-1!==a.indexOf(":")},c.detectLocale=function(){var a=d.get(window,"espn.i18n.lang"),b=d.get(window,"espn.i18n.country");if(a&&b)return a+"-"+b;var c=window.location.hostname||"";for(var f in e)if(d.endsWith(c,f))return e[f];return"en-us"},c.embeddedPlay=function(){function a(a,b){var c=e.parseUri(a.attr("href")).queryKey.id||null,h=a&&a.length?a.metadata():{},j=a.siblings("span").html();null!==j&&e("#videoInfo").html(j),h.endCard=h.endCard||"false",(a.parent().hasClass("last")||i.children("li").length<=1)&&(h.endCard="true"),void 0===h.playRelatedExternally&&(h.playRelatedExternally="false"),"true"==h.playRelatedExternally&&(g=!1,h.endCard="true");var k=d.get(window,"ESPN_GLOBALS.videoPlayers");if(k){var l,m,n;for(var o in k)if(l=k[o],m=e("."+o).first(),m.length||1===Object.keys(k).length){d.merge(h,l),m.length&&(n=m.attr("id"),n||(m.attr("id",o),n=o),h.targetReplaceId=n);break}}h.endCard&&(h.endCard="true"===h.endCard||!0===h.endCard),h.cms||(h.cms="espn");var p=e("div.videoplayer");p.addClass("videoplayer-show"),h.width&&p.width(h.width),h.height&&p.height(h.height),p.css("position","relative"),f.video.play(parseInt(c,10),h,b)}function b(b,c){b.addClass("active").siblings().removeClass("active"),b.next().addClass("next").siblings().removeClass("next"),0===b.next().length&&e(".video-player").hasClass("next")&&(e(".mod-video-playlist").hide(),e(".video-player").removeClass("with-playlist")),a(b.find("a"),c)}var c,e=window.jQuery,f=window.espn||{},g=!0,h=e("#videotoplay"),i=e(".mod-video-playlist ul");a(h,!1),i.children("li").bind("click",function(a){a.preventDefault(),g=!0,c=e(this),b(c,!0)}),e.subscribe("espn.video.complete",function(){g&&(c=i.find("li.active"),c.next().length>0&&b(c.next(),!1))})}},{"./lodash":31}],30:[function(a,b,c){!function(c){"use strict";function d(){this.$targetElement=null,this.autoClose=!1,this.clip=null,this.cms=null,this.currentIndex=null,this.currentPlayingId=null,this.hasPlaylist=null,this.height=null,this.isPlaying=!1,this.originalIndex=null,this.playVerified=null,this.playVideo=null,this.playerElement=null,this.playerReady=null,this.state=null,this.targetReplaceId=null,this.targetElement=null,this.useExternalIdFilter=null,this.videoPlaylist=null,this.width=null,this._duration=NaN,this._startedCurrentMedia=!1,this._currentMediaId="",this._adPlaying=!1,this._embedGuid=null,this._embedEl=null,this._embedOptions=null,this._embedCallback=null,this._propogatedEvents=null,ESPNVideoPlayer.prototype.constructor.apply(this,arguments)}var e=a("./lodash"),f=a("./espn-legacy-helper-scripts.js"),g=a("inherits"),h=!1;g(d,ESPNVideoPlayer),Object.defineProperty(d.prototype,"duration",{set:function(a){a!==this._duration&&(this._duration=a,isNaN(a)||d.publish("espn.video.totalTimeChanged",[{totalTime:a},this.embeddedPlayerId,"totalTimeChanged"]))},get:function(){return this._duration}}),Object.defineProperty(d.prototype,"playType",{get:function(){return this.bundle&&this.bundle.startType}}),Object.defineProperty(d.prototype,"$container",{get:function(){return this.player&&this.player.el?c(this.player.el()).parent():c()}}),Object.defineProperty(d.prototype,"autoPlay",{get:function(){return!!this.player&&this.player.autoplay()}}),Object.defineProperty(d.prototype,"currentMediaId",{set:function(a){a!==this._currentMediaId&&(this._currentMediaId=a,this._startedCurrentMedia=!1)},get:function(){return this._currentMediaId}}),d.prototype.init=function(){this._propogatedEvents=[],this.bindEvents()},d.prototype.bindEvents=function(){this._propogateToLegacyEvent("useractive","espn.video.hoverIn",c.noop),this._propogateToLegacyEvent("userinactive","espn.video.hoverOut",c.noop),this._propogateToLegacyEvent("ads-ad-started","espn.video.ad.start",function(){var a=e.get(this,"player.ads.adTimeoutTimeout")||15,b=e.get(this,"player.ads.ad.duration")||15;return this._adPlaying=!0,[b,a,this.player.id(),"ad.start"]}.bind(this)),this._propogateToLegacyEvent("adend","espn.video.ad.end",function(){return this._adPlaying=!1,[{},this.player.id(),"ad.end"]}.bind(this)),this._propogateToLegacyEvent("loadedplayersource","espn.video.playerjsReady"),this.onDurationChange=this.onDurationChange.bind(this),this.player.on("durationchange",this.onDurationChange),this.onLoadStart=this.onLoadStart.bind(this),this.player.on("loadstart",this.onLoadStart),this.onContentStartedPlaying=this.onContentStartedPlaying.bind(this),this.player.on("playing",this.onContentStartedPlaying),this.onEnded=this.onEnded.bind(this),this.player.on("ended",this.onEnded),this.onContentLoaded=this.onContentLoaded.bind(this),this.player.on("espn.contentloaded",this.onContentLoaded),this._propogateToLegacyEvent("fullscreenchange","espn.video.fullscreenChanged"),this._propogateToLegacyEvent("loadedplayersource","espn.video.playerjsReady"),this._propogateToLegacyEvent("loadeddata","espn.video.loadComplete"),this._propogateToLegacyEvent("timeupdate","espn.video.playheadTimeChanged",function(){return[{bandwidth:NaN,playheadTime:this.player.currentTime()},this.embeddedPlayerId,"playheadTimeChanged"]}),this._propogateToLegacyEvent("pause","espn.video.pause",function(){return[{state:"paused"},this.embeddedPlayerId,"stateChanged "]}),this._propogateToLegacyEvent("posterchange","espn.video.thumbnailReady"),this._propogateToLegacyEvent("switch","espn.video.switch",function(){return[this.autoPlay,this.currentMediaId,""]}),this._propogateToLegacyEvent("seeked","espn.video.seeked"),this._propogateToLegacyEvent("volumechange","espn.video.volumeChanged",function(){return[{volume:this.player.volume()},this.embeddedPlayerId,"volumeChanged"]}),this._propogateToLegacyEvent("loadedmetadata","espn.video.metadataReady")},d.prototype.onContentLoaded=function(a,b){var c=b&&b.clipId&&parseInt(b.clipId,10)||b&&b.id;c&&(this.currentMediaId=c),this.clip={id:this.currentMediaId,guid:b&&b.id,posterImages:{full:{href:b&&b.mediainfo&&b.mediainfo.poster}}}},d.prototype.onLoadStart=function(){var a=this.player.mediainfo;h||(h=!0,d.publish("espn.video.ready",[{},this.embeddedPlayerId,"apiReady","espn.video.ready"]),d.publish("espn.video.init",[{},this.embeddedPlayerId,"apiReady","espn.video.ready"])),a&&d.publish("espn.video.embedCodeChanged",[this._getShimmedEmbedCode(),this.embeddedPlayerId,"embedCodeChanged"])},d.prototype.onEnded=function(){(this.player||{}).ads&&"content-playback"!==this.player.ads.state||d.publish("espn.video.complete",[{},this.embeddedPlayerId,"playComplete"])},d.prototype.onDurationChange=function(){var a=(this.player||{}).mediainfo;this.duration=a?a.duration:NaN},d.prototype.onContentStartedPlaying=function(){this._startedCurrentMedia||(this._startedCurrentMedia=!0,d.publish("espn.video.embedCodeChanged",["init"]),d.publish("espn.video.volumeChanged",[{volume:this.player.volume()}],this.embeddedPlayerId,"volumeChanged"),d.publish("espn.video.contentStarted",[this.currentMediaId,this.playType]),d.publish("espn.video.bitrateChanged",[{videoBitrate:NaN},this.embeddedPlayerId,"bitrateChanged"]),d.publish("espn.video.startContentDownload",[{streamURL:e.get(this,"player.mediainfo.sources.0.src".split("."))},this.embeddedPlayerId,"bitrateChanged"]),d.publish("espn.video.play",[{state:"playing"},this.embeddedPlayerId,"stateChanged"]),d.publish("espn.video.contentStarted",["",this.embeddedPlayerId,"contentStarted"]))},d.prototype.onLoadedMetaData=function(){},d.prototype.embed=function(a,b,e,f){return this._embedGuid=a,this._embedEl=b,this._embedOptions=e,this._embedCallback=f,this._setTarget(b),this.currentMediaId=a||e.clipId,d.publish("espn.video.embed.begin"),d.publish("espn.video.playerLoading",[{},this.targetReplaceId,"playerLoading"]),ESPNVideoPlayer.prototype.embed.call(this,a,b,e,function(){this.init();var a=this.player.el();a&&a.getAttribute&&(this.embeddedPlayerId=a.getAttribute("id")),d.publish("espn.video.playerEmbedded",[{},this.embeddedPlayerId,"playerEmbedded"]),d.publish("espn.video.authTokenChanged",[{auth_token:""},this.embeddedPlayerId,"authTokenChanged"]),this.currentMediaId||this.onLoadStart(),(f||c.noop).apply(this,arguments)}.bind(this))},d.prototype.buildModuleParams=f.getDeprecated("buildModuleParams"),d.prototype.handleEvents=f.getDeprecated("handleEvents"),d.prototype.pauseVideo=function(){this.player.pause()},d.prototype.skipAd=function(){if(this._adPlaying){var a=e.merge({},this._embedOptions),b=this.player&&this.player.mediainfo,c=this._embedGuid;b&&(c=b.reference_id,e.merge(a,{clipId:parseInt(b.id,10),cerebroId:b.reference_id})),this._currentMediaId="",this._adPlaying=!1,this.unembed(!1),b&&this.embed(c,this._embedEl,e.merge({},a,{preroll:!1,postroll:!1}))}},d.prototype.switchVideo=function(a){if("object"==typeof a&&0!==Object.keys(a||{}).length){var b;a.id?(a.clipId=a.id,delete a.id):a.cerebroId&&(b=a.cerebroId,delete a.cerebroId),a.cms&&(a.clipSource=a.cms,delete a.cms),b||a.clipId?ESPNVideoPlayer.prototype.switchVideo.call(this,b,a):console.log("cannot switch video without a clipId or cerebroId")}},d.prototype.unbindEvents=function(){this.player&&((this._propogatedEvents||[]).forEach(function(a){this.player.off(a[0],a[1])}.bind(this)),this._propogatedEvents=[],this.player.off("espn.contentloaded",this.onContentLoaded),this.player.off("durationchange",this.onDurationChange),this.player.off("loadstart",this.onLoadStart),this.player.off("playing",this.onContentStartedPlaying))},d.prototype.container=function(a){return null===this.$targetElement&&null===this._embedEl&&(c("#player--player").length?this._embedEl="player--player":this._embedEl=a),c("#"+this._embedEl).parent()},d.prototype.destroy=function(){this.player&&this.unbindEvents();try{this.unembed(!1),c("#"+this._embedEl).remove()}catch(a){}this.$targetElement=null,this.playerElement=null,this.targetElement=null,this._embedGuid=null,this._embedEl=null,this._embedOptions=null,this._embedCallback=null,d.publish("espn.video.complete")},d.prototype._getShimmedEmbedCode=function(){var a=this.player.mediainfo;return{description:a.description,embedCode:a.id,hostedAtURL:window?window.location.href:"",isLiveStream:!1,lineup:null,promo:null,providerCode:"?",streamUrl:e.get(a,"sources.0.src".split(".")),time:this.duration,title:a.name}},d.prototype._setTarget=function(a){"string"==typeof a?(0===a.indexOf("#")&&(a=a.substring(1)),0===a.indexOf(".")?this.targetElement=c(a).get(0):this.targetElement=document.getElementById(a)):a&&a.setAttribute&&(this.targetElement=a),this.$targetElement=c(this.targetElement),this.targetReplaceId=this.$targetElement.attr("id")},d.prototype._propogateToLegacyEvent=function(a,b,c){b=b||"";var e=function(){d.publish(b,c?c.apply(this,arguments):[{},this.targetReplaceId,b.split(".").pop()])}.bind(this);this._propogatedEvents.push([a,e]),this.player.on(a,e)},d.publish=function(){c.publish(arguments[0],arguments[1])},b.exports=d}(jQuery)},{"./espn-legacy-helper-scripts.js":29,"./lodash":31,inherits:5}],31:[function(a,b,c){b.exports={has:a("lodash.has"),get:a("lodash.get"),merge:a("lodash.merge"),omitBy:a("lodash.omitby"),pick:a("lodash.pick"),values:a("lodash.values"),set:a("lodash.set"),endsWith:a("lodash.endswith"),isNil:a("lodash.isnil")}},{"lodash.endswith":6,"lodash.get":7,"lodash.has":8,"lodash.isnil":9,"lodash.merge":10,"lodash.omitby":11,"lodash.pick":12,"lodash.set":13,"lodash.values":14}],32:[function(a,b,c){"use strict";var d=a("./lodash"),e=a("cookie-cutter"),f=a("./espn-legacy-video-player.js"),g=a("./espn-legacy-helper-scripts.js"),h=a("./espn-custom-meta-data-generators.js"),i=a("watch-fanapi"),j=a("../mobile/Util"),k=a("../../package.json"),l=a("./comscore-site-names.js"),m=["#player","#videoPlayer","#video",".videoplayer"],n="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent||"",o=/Edge/i.test(n),p=!o&&/Chrome/i.test(n),q=/Android/i.test(n),r=/Safari/i.test(n)&&/Mac OS X 10_/i.test(n)&&!p&&!q&&!o,s=r&&function(a){var b=a.indexOf("Version/"),c=b+"Version/".length,d=a.substring(c,c+4).replace(/\s/g,"");return parseFloat(d)}(n)>=11;b.exports=function(a,b){function c(c,e,i,j){if(j=j||a.noop,e=e||{},I&&I.player){if(!arguments.length)return I.player.play();if(1===arguments.length)return I.switchVideo({clipId:c})}G(function(a){var k=e.cerebroId,l=C(d.merge({region:a,id:c},e),i);g.isClipId(e.id)||k||(k=e.id,delete e.id,e.cerebroId=k,H=k);var m=E(e.targetReplaceId),o=A(m,e);if("undefined"==typeof InstallTrigger&&o){var p=o.width(),q=Math.max(o.height(),9*p/16);(p<400||q<300)&&d.set(l,"advertising.adTechOrder",["html5","flash"])}L=e.customMetaData||d.get(l.analytics,"adobeDCR.ESPN_CUSTOM_METADATA")||h.sCore,"string"==typeof L&&L in h&&(L=h[L]),H=c,M=l.wasUserInitiated,s&&(l.advertising.html5={profile:"87146:espn_desktop_js_novpaid"}),b.video.player=I=new f,I.ready(function(){I.embed(k,m,l,function(){"function"!=typeof d.get(I,"player.ads")||l.preroll||l.postroll||I.player.ads(),I.player.off("espn.clipfetched",n),I.player.on("espn.clipfetched",n),I.player.off("espn.contentloaded",v),I.player.on("espn.contentloaded",v),"function"==typeof j&&j(I)})})})}function n(a,c){var e,f=d.get(b,"i18n.editionKey")||"",g=d.get(window,"omniSite")||"",h=d.get(window,"wax.service")||"";c&&c.clip&&(e=c.clip),e&&(e.site="espndeportes"===g?l.deportesSiteNames[f]||"espncomdeportes":""!=h?l.siteNames[h]||"espnw":l.siteNames[g]||"espncom")}function o(a,b){c(null,a,null,b)}function p(){I&&I.pause()}function q(c,d){I&&I.unembed(),G(function(e){var g=E(c.targetReplaceId),h=c.adSet||d||c.cms,i=x(h,e,c.siteSection);b.video.player=I=new f,I.ready(function(){var b,d=!1,e=!1,f=function(){d&&e&&(I.destroy(),a.unsubscribe(b))};b=a.subscribe("espn.video.ad.end",function(){d=!0,f()}),I.embed(void 0,g,{advertising:{siteSectionId:c.siteSection,assetId:c.videoID,beforeAdManager:function(a){return y(a,i)}},adOnly:!0,clipSource:h},function(){e=!0,f()})})})}function r(){I&&(I.destroy(),b.video.player=I=null)}function t(){I&&I.skipAd()}function u(b,c,f){if(b=b||{},f=f||b.callback||a.noop,I&&"function"==typeof I.autoplay)return f(I.autoplay());var g=new i,h=d.get(window,"espn.core.SWID")||e.get("SWID"),j=!0,k=e.get("VAS");k&&(j=1===parseInt(k,10)),"string"==typeof h&&0===h.indexOf("{")?g.getAutoStartForFanId(h,function(a){j=K="boolean"==typeof a?a:j,f&&f(j)}):f&&f(j)}function v(a,b){if(I){var c=d.merge({},D(b),"function"==typeof L?L(I,b.mediainfo):L);I.analytics.configure(d.set({},"adobeDCR.ESPN_CUSTOM_METADATA",c))}}function w(a){a=a||"";for(var b in Q)if(0===a.indexOf(b))return Q[b];return"espn"}function x(a,b,c){var d,e;w(c);return"deportes"===a?d=135087:("intl"===a&&(e="intl:"),d=87146),{networkId:d,advertisingIdPrefix:e}}function y(a,b){if(a&&b){var c=b.networkId;if(c){a.networkId=c;var e=(d.get(a,"flash.profile")||"").split(":")[1]||"espn_desktop_as3",f=(d.get(a,"html5.profile")||"").split(":")[1]||"espn_desktop_js";d.set(a,"flash.profile",c+":"+e),d.set(a,"html5.profile",c+":"+f)}return b.advertisingIdPrefix&&a.assetId&&-1===(a.assetId+"").indexOf(":")&&(a.assetId=b.advertisingIdPrefix+a.assetId),a}}function z(a){return y(a,x(d.get(I,"bundle.clipSource"),N,(a||{}).siteSectionId))}function A(b,c){var d=a("#"+b).parent();if("player--player"===b&&(0===d.width()||0===d.height())){var e=c.width||"100%";c.width&&d.width(e),c.height?d.height(c.height):0===d.height()&&d.css("padding-top","56.25%")}return d}function B(a){return a=a||{},a.omnitureSuiteId||d.get(window,"s_omni.account")||d.get(window,"espn.track.data.omniture.account")||window.s_account||"wdgespcom"}function C(a,b){a=d.merge({},d.pick(J,["cms","endCard","siteSection"]),a||{}),J=a;var c="userPreference",e=d.values(d.pick(a,["autoplay","autostart","autoPlay"]))[0];"boolean"==typeof e&&(c=e);var f=a.userInitiated||b||!1;"autoplay"===a.playType&&(f=!1,c=!0);var h=a.language||(g.detectLocale()||"").split("-")[0],i="http://api-app.espn.com/v1/video",j="https://watch.auth.api.espn.com/video/auth";return document.location.search.match(/(^\?|&)useqa=true/)&&(i="http://api-app.espnqa.com/v1/video",j="https://watch.auth.api.qa.espn.com/video/auth"),d.merge(!0,{},a,{advertising:d.merge(!0,{beforeAdManager:z,siteSectionId:a.siteSection},a.advertising),analytics:d.merge(!0,{adobeDCR:{VISITOR_API:{TRACKING_SERVER:"w88.espn.com"},APP_MEASUREMENT:{RSID:B(a),TRACKING_SERVER:"w88.espn.com"},NIELSEN_DATA:{APP_INFO:{clientId:"us-600140",apid:(O?"T":"P")+"31187EE2-AC6E-46CB-BB54-D07591BED067"}}},conviva:{customerKey:"fc8dbfdc5da519f576628f619306a357f31bd006"}},a.analytics),api:{VIDEO_BASE_URL:i},autoplay:c,clipId:a.id,clipSource:a.cms||("es"==h?"deportes":void 0),endcard:a.endCard,language:h,region:a.region||(g.detectLocale()||"").split("-")[1],poster:a.thumbnailURL,postroll:"boolean"!=typeof a.postroll||a.postroll,preroll:"boolean"!=typeof a.preroll||a.preroll,shield:{BASE_URL:j},wasUserInitiated:f})}function D(a){return{ReportSuite:B(J),CMSID:(a.clipId||a.id||a.mediainfo.id)+"-"+a.mediainfo.name,ContentDuration:a.mediainfo.duration,DateLastModified:a.mediainfo.updated_at,GameID:d.get(a,"mediainfo.custom_fields.gameId")||"Not Applicable",League:a.mediainfo.sport,PlayerName:function(){var b=d.get(a,"mediainfo.duration");return b&&b>0?"Brightcove-vod":"Brightcove-live"}(),PublishDate:(a.mediainfo.created_at||"").split("T")[0],PublishTime:(a.mediainfo.created_at||"").split("T")[1],ShowCode:a.mediainfo.showCode,Site:a.mediainfo.site,Sport:a.mediainfo.sport,VideoID:a.clipId||a.id||a.mediainfo.id,VideoName:(a.mediainfo.pageTitle||"").replace(" - ESPN Video",""),VideoPlaylist:(I&&I.player&&I.player.playlist()||[]).join(","),VideoTypeDetail:d.get(a,"mediainfo.custom_fields.mediaType")}}function E(b){if(!b)for(var c,d,e=0;e<m.length;e++)if(c=m[e],d=a(c).first(),d.length){b=d.attr("id"),b||(d.attr("id","player"),b="player");break}if("player"!==(b=b||"player"))return b;var f=b+"--player",g=a("#"+b),h=a(a("#"+b).children()[0]);return h.length?h.attr("id",f):(h=a('<div id="'+f+'" />'),g.append(h),g.css("position","relative")),f}function F(b){return N||(N=(d.get(b,"country.isoCodeAlpha2")||"us").toLowerCase(),a.publish("espn.video.locationReady",[N])),N}function G(b){N?b(N):j.getGeoLocation(function(c,d){F(d),(b||a.noop)(N)})}var H,I,J,K,L,M,N,O=function(){var b=a.parseUri&&a.parseUri(location.search),c=d.get(b,"queryKey.nielsentest");return c&&e.set("nielsentest",JSON.parse(c||!0)),!0===JSON.parse(e.get("nielsentest")||null)}(),P={play:g.embeddedPlay},Q={"espn:cricinfo":"cricinfo","espn:espnfc":"espnfc","espnfc.com":"espnfc"},R={getAutoPlay:u,subscribe:a.subscribe,skipAd:t,embedded:P,embeded:P,player:null,embed:o,play:c,pause:p,insertAd:q,remove:r};return Object.defineProperty(R,"version",{get:function(){if(k&&k.version)return k.version}}),Object.defineProperty(R,"versions",{get:function(){return{shim:k&&k.version,bundle:d.get(k,"dependencies.espn-web-player-bundle")}}}),Object.defineProperty(R,"autoplay",{get:function(){if(I&&I.autoplay)return I.autoplay}}),Object.defineProperty(R,"playerElement",{get:function(){if(I&&I.player)return I.player.el_}}),R}},{"../../package.json":26,"../mobile/Util":33,"./comscore-site-names.js":27,"./espn-custom-meta-data-generators.js":28,"./espn-legacy-helper-scripts.js":29,"./espn-legacy-video-player.js":30,"./lodash":31,"cookie-cutter":4,"watch-fanapi":25}],33:[function(a,b,c){var d=function(a){function b(a){espn.fanapi?jQuery.when(espn.fanapi.getAsP13n()).done(function(b){if(b&&b.mySettings){if(y=b.mySettings.videoAutoStart,!a)return b.mySettings.videoAutoStart;a(b.mySettings.videoAutoStart)}}).fail(function(){a&&a()}):espn.p13n&&espn.p13n.get({success:function(b){try{if(b&&b.mySettings){if(y=b.mySettings.videoAutoStart,!a)return b.mySettings.videoAutoStart;a(b.mySettings.videoAutoStart)}}catch(a){console.log("error","espn.p13n.get",a)}},error:function(){}})}function c(a,b,c,d){for(var e="",f=0;f<a.videos.length;f++)for(var g in a.videos[f]){var h={id:g,cms:a.videos[f][g].cms,url:a.videos[f][g].url};e+="id="+h.cms+":"+g+"&",a.videos[f]=h;break}if(b){var i="",j="desktop",k="wdgespge",l="espn";z?j="mobile":(t||v)&&(j="tablet"),void 0!==window.s_account&&(k=window.s_account+","+k),i+="&omniReportSuite="+k,void 0!==window.omniSite&&(l=Analytics.getSiteSection(window.omniSite)),i+="&siteSection="+l,i+="&trackingName="+encodeURIComponent(Analytics.getTrackingName()),$.ajax({url:"http://www.espn.com/videohub/video/util/getMinifiedClipJsonById?"+e+"device="+j+i,async:c,success:function(a){d&&d(a)}})}return a}function e(){var a=!1;try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&(a=!0)}catch(b){navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(a=!0)}return a}function f(a){a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.webkitEnterFullScreen&&a.webkitEnterFullScreen()}function g(a){a=a||{};var c=!0,d=(document.cookie.match(/VAS=([^;]+)/)||[])[1];d&&(c=l(d)),espn.video.autoplay=c,b(function(b){b&&(c="2"!==b),espn.video.autoplay=c,a.callback&&a.callback(c)})}function h(){return/(^|; )espn.html5=1/.test(document.cookie)}function i(a){a=a||$.noop;var b=function(b){if(!b)return a(new Error("failed to lookup valid geolocation"));var c=d.getGeoLocationFromGeoService(b);if(!c)return a(new Error("failed to determine geolocation"));a(null,c)},c=function(){var a=(document.cookie.match(/country=([^;]+)/)||[])[1]||"us";b(d.getGeoLocationFromGeoService({country:{isoCode:null,isoCodeAlpha2:(a+"").toUpperCase()}}))};window.espn&&window.espn.geo&&window.espn.geo.getLocation?espn.geo.getLocation().done(b).fail(function(){espn.geo.promise=null,espn.geo.getLocation().done(b).fail(c)}):c()}function j(a){var b=null;a.country&&a.country.isoCode&&(b=a.country.isoCode.toUpperCase());var c=a.country.isoCodeAlpha2;return b&&!c&&A&&(c="string"==typeof A[b]?A[b].toLowerCase():b.substring(0,2).toLowerCase()),a.country.isoCodeAlpha2=c,a}function k(){var a="ooyala";return(this.isMobile||this.isIpad||this.isAndroid)&&(a=this.canPlayVideo?"html5-video":"player-image"),h()&&(a="html5-video"),a}function l(a){var b=typeof a;return"boolean"!==b&&("string"===b&&isNaN(a)?a="true"===a:(a=parseInt(a),a=1===a)),a}function m(){return m._cache||(m._cache=!1,"object"==typeof espn.mem&&"boolean"==typeof espn.mem.hasVideo&&(m._cache=espn.mem.hasVideo)),m._cache}function n(a){return"deportes_dev"==a||"deportes_qa"==a?"deportes":"cric"==a||"cric_qa"==a||"cric_dev"==a||"cricinfo"==a||"cricinfo_qa"==a||"cricinfo_dev"==a?"cricinfo":"intl"==a||"intl_dev"==a||"intl_qa"==a?"soccerfc":a}function o(a){return"default"==a?null:a?(a+="",/\d{2,3}%/.test(a)?a:a.replace(/\D/g,"")+"px"):null}function p(a){var b="espn";return a.search(/deportes/i)>-1?b="deportes":a.search(/intl/i)>-1&&(b="intl"),b}function q(a,b,c){return b=Array.isArray(b)?b:b.split("."),a=a[b[0]]||a[parseInt(b[0],10)],a&&b.length>1?q(a,b.slice(1),c):void 0===a?c:a}var r=function(){var a=document.getElementById("video-log"),b=/(\?|&)onScreenMobileVideoDebug=true(&|$)/.test(document.location.search)||!!a;return/(\?|&)debug=true(&|$)/.test(document.location.search)||b?b?(a||(a=document.createElement("div"),Object.assign&&Object.assign(a.style,{position:"fixed",top:0,right:0,whiteSpace:"nowrap",width:"50%",height:"300px",overflow:"scroll",background:"rgba(0,0,0,.85)",color:"#fff",fontSize:"10px",lineHeight:"8px",padding:"2px 6px",boxSizing:"border-box",zIndex:9999999}),window.addEventListener("load",function(){document.body.appendChild(a)})),function(){var b=document.createElement("pre");b.innerHTML='<span style="color: #ff0033; font-weight: bold">ESPNVideo:</span> '+[].slice.call(arguments).map(function(a){return a.replace(/</g,"&lt;").replace(/>/g,"&gt;")}).join(" "),a.appendChild(b)}):window.console?function(){window.console.log.apply(window,["%cESPNVideo:","color: #ff0033; font-weight: bold"].concat([].slice.call(arguments)))}:function(){}:function(){}}(),s=function a(){return a._cache||(a._cache=document.createElement("video")),!!a._cache.canPlayType}(),t=function a(){return a._cache||(a._cache=/iPad/i.test(window.navigator.userAgent)||/Mini/i.test(window.navigator.userAgent)),a._cache}(),u=function a(){return a._cache||(a._cache=navigator.userAgent.match(/Mozilla.*\((iPhone|iPad|iPod).*like Mac OS X.*AppleWebKit/)),a._cache}(),v=function a(){return a._cache||(a.cache=navigator.userAgent.match(/Android/g)),a.cache}(),w=function a(){return a._cache||(a.cache=navigator.userAgent.match(/Silk/g)),a.cache}(),x=function a(){return a._cache||(a.cache=navigator.userAgent.match(/Nexus 4/g)&&navigator.userAgent.match(/Android 4.2/g)),a.cache}(),y=null,z=!1;navigator.userAgent.match(/Mobi/)?navigator.userAgent.match(/iPad/)||(z=!0):navigator.userAgent.match(/Tab/)||(navigator.userAgent.match(/Android/)||navigator.userAgent.match(/Touch/)&&navigator.userAgent.match(/IE/)),/[?&]html5=false/.test(window.location.search)?document.cookie="espn.html5=0; path=/; domain=espn.com":/[?&]html5=./.test(window.location.search)&&(document.cookie="espn.html5=1; path=/; domain=espn.com");var A=a.countryMap||{FSM:"FM",JAM:"JM",SHN:"SH",CXR:"CX",TLS:"TL",ROU:"RO",BTN:"BT",DJI:"DJ",KGZ:"KG",MOZ:"MZ",NOR:"NO",SYR:"SY",JPN:"JP",UZB:"UZ",FRO:"FO",IND:"IN",ARE:"AE",SYC:"SC",MNP:"MP",ARG:"AR",MNG:"MN",ARM:"AM",MNE:"ME",GEO:"GE",IMN:"IM",TJK:"TJ",KEN:"KE",GUY:"GY",ASM:"AS",SJM:"SJ",LIE:"LI",BDI:"BI",PYF:"PF",DMA:"DM",SAU:"SA",MMR:"MM",ATG:"AG",TKM:"TM",TKL:"TK",MLI:"ML",ABW:"AW",ATF:"TF",NPL:"NP",GTM:"GT",BFA:"BF",CUB:"CU",GUF:"GF",GUM:"GU",KWT:"KW",IOT:"IO",JOR:"JO",GGY:"GG",PHL:"PH",MLT:"MT",ZMB:"ZM",ATA:"AQ",BEN:"BJ",UKR:"UA",BEL:"BE",NAM:"NA",SUR:"SR",AUS:"AU",TZA:"TZ",BGD:"BD",MKD:"MK",SDN:"SD",GHA:"GH",THA:"TH",LKA:"LK",HMD:"HM",MYT:"YT",GIN:"GN",SEN:"SN",GIB:"GI",MYS:"MY",BWA:"BW",BGR:"BG",AUT:"AT",BVT:"BV",UMI:"UM",STP:"ST",HND:"HN",SWZ:"SZ",ZAF:"ZA",DZA:"DZ",KIR:"KI",VNM:"VN",TWN:"TW",CHE:"CH",BHR:"BH",BHS:"BS",AGO:"AO",SWE:"SE",CHL:"CL",CZE:"CZ",CHN:"CN",HKG:"HK",TGO:"TG",CYM:"KY",CIV:"CI",SGS:"GS",NLD:"NL",SGP:"SG",CYP:"CY",KHM:"KH",MHL:"MH",AFG:"AF",SVK:"SK",SVN:"SI",PLW:"PW",BIH:"BA",NFK:"NF",UGA:"UG",TTO:"TT",KOR:"KR",COK:"CK",YEM:"YE",COG:"CG",COD:"CD",PNG:"PG",HTI:"HT",RWA:"RW",TCA:"TC",FIN:"FI",MEX:"MX",TCD:"TD",SPM:"PM",IDN:"ID",REU:"RE",HRV:"HR",MWI:"MW",COM:"KM",VUT:"VU",TUN:"TN",COL:"CO",AZE:"AZ",TUR:"TR",POL:"PL",TUV:"TV",FJI:"FJ",GNQ:"GQ",NGA:"NG",VAT:"VA",AIA:"AI",PAN:"PA",GNB:"GW",BLM:"BL",MDV:"MV",PAK:"PK",SRB:"RS",MDG:"MG",VEN:"VE",WSM:"WS",URY:"UY",HUN:"HU",EGY:"EG",BLR:"BY",MDA:"MD",ALA:"AX",MUS:"MU",ALB:"AL",BLZ:"BZ",KNA:"KN",CMR:"CM",OMN:"OM",GMB:"GM",SSD:"SS",NIU:"NU",BMU:"BM",VCT:"VC",FLK:"FK",USA:"US",NZL:"NZ",GLP:"GP",LAO:"LA",MTQ:"MQ",NIC:"NI",PRY:"PY",ESH:"EH",PRT:"PT",CAF:"CF",ISR:"IL",KAZ:"KZ",VGB:"VG",SLE:"SL",PCN:"PN",ISL:"IS",SLB:"SB",LSO:"LS",PRI:"PR",DNK:"DK",BOL:"BO",DEU:"DE",AND:"AD",LBN:"LB",ITA:"IT",SLV:"SV",LBR:"LR",CAN:"CA",PRK:"KP",MSR:"MS",LBY:"LY",QAT:"QA",WLF:"WF",IRQ:"IQ",ETH:"ET",LCA:"LC",IRN:"IR",NCL:"NC",NRU:"NR",MCO:"MC",IRL:"IE",DOM:"DO",GRL:"GL",JEY:"JE",PSE:"PS",GAB:"GA",EST:"EE",SMR:"SM",MRT:"MR",ESP:"ES",VIR:"VI",CCK:"CC",ECU:"EC",PER:"PE",GRC:"GR",GRD:"GD",FRA:"FR",CPV:"CV",LUX:"LU",ZWE:"ZW",GBR:"GB",LVA:"LV",MAF:"MF",ERI:"ER",NER:"NE",MAR:"MA",LTU:"LT",ANT:"AN",SOM:"SO",BRN:"BN",RUS:"RU",CRI:"CR",MAC:"MO",BRA:"BR",TON:"TO",BRB:"BB"};return{debugLog:r,canPlayVideo:s,isIpad:t,isIos:u,isMobile:z,isAndroid:v,isKindle:w,needsClickToPlay:x,autoPlayHelper:g,get:q,getP13AutoStart:b,getGeoLocation:i,getGeoLocationFromGeoService:j,getDefaultPlatform:k,fullScreenRequest:f,convertToBoolean:l,checkMemHasVideo:m,getBusinessUnit:n,cleanDimension:o,hasFlashAndUsable:e,getVideoPlaylistInfo:c,getCMSFromTrackingName:p,
requiresFlashUpgrade:-1!==navigator.userAgent.indexOf("Safari/537.76.4")&&-1!==navigator.userAgent.indexOf("Version/7")&&"undefined"!=typeof swfobject&&!swfobject.hasFlashPlayerVersion("14.0.0")||"undefined"!=typeof swfobject&&!swfobject.hasFlashPlayerVersion("10.0.0"),requiresFlashDownload:"undefined"!=typeof swfobject&&!swfobject.hasFlashPlayerVersion("0.0.1")}}("undefined"!=typeof common?common:{});"object"==typeof b&&b.exports&&(b.exports=d)},{}],34:[function(a,b,c){!function(){"use strict";var b=a("./mobile/Util");window.PLAYER=null,window.espn=window.espn||{},-1!==["html5-video","player-image"].indexOf(b.getDefaultPlatform())?window.espn.video=a("../distribution/espn.video.mobile.js"):window.espn.video=a("./desktop/shim.js")(jQuery,window.espn),window.espn.video.getDefaultPlatform=function(){return b.getDefaultPlatform()},window.espn.video.embeded=window.espn.video.embedded}()},{"../distribution/espn.video.mobile.js":1,"./desktop/shim.js":32,"./mobile/Util":33}]},{},[34]);