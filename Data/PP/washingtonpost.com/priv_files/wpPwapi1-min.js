var WpPwapi1=function(r){"use strict";var t=console||{log:function(){},error:function(){}},o="wpPwapi1.js",a={doPwapi:!0,doLocalStorage:!0,defaultCookieDomain:".washingtonpost.com",paywallTrackingCookie:"rplpwtrk",paywallTrackCookieExpire:function(){return(new Date).getTime()+31536e6},subscribeSubDomainIframeId:"pwapiCrsDmnLocStor_subscribe_iframe",subscribeSubDomainGetData:!1,cmdRequestGetStor:"cmdGetFromStorage",cmdRequestDeleteStor:"cmdDeleteFromStorage",cmdRequestSetStor:"cmdSetInStorage",cmdRequestGetAllStor:"cmdGetAllFromStorage",validOriginBaseDomains:["\\.washingtonpost\\.com","\\.digitalink\\.com"],validDocumentDomains:["washingtonpost.com","digitalink.com"],abTestReferrerOn:!0,abCookieName:"rplab",abRefPt:"http://pwapiptrf._pwapiptrf_.com",abTestExpire:function(){return(new Date).getTime()+864e7},abDebugCookie:"rplAbTestDebug"},i=function(e,r){return!(!e||!r)&&null!=e.match(r+"$")},n=function(e){var r,t,o,a=document.createElement("a"),i={};for(a.href=e,r=a.search.replace(/^\?/,"").split("&"),o=0;o<r.length;o++)t=r[o].split("="),i[t[0]]=t[1];return{protocol:a.protocol,host:a.host,hostname:a.hostname,port:a.port,pathname:a.pathname,search:a.search,searchObject:i,hash:a.hash}},s=function(e){if(!e)return!1;try{var r=e.getFromLocalOrSessionStorage("newsletter_history");if(!r)return!1;var a=JSON.parse(r);if(!a)return!1;var i=!0;for(var n in a)if(a.hasOwnProperty(n)){i=!1;break}if(!i)return!0}catch(e){t.error(o+" : unable to get nlHistory : "+e.message,e)}return!1},l=[{id:"rplpwabt4",active:!0,getExpireMillis:function(){return(new Date).getTime()+864e7},results:[{id:"1",min:0,max:99}],transforms:{1:function(e,r){return r}}}],c=[{id:"rplabrfg",regex:/google.com$/i,results:[{id:"t1",min:0,max:9,act:!0,processPwapiResponse:function(e){return e},referrer:"http://pwapi.rplabrfgt1.com"},{id:"t2",min:10,max:19,act:!0,processPwapiResponse:function(e){if(!this.abObj||!this.pwapi)return t.error(o+" : abTestConfig rplabrfgoog t2 this.abObj or this.pwapi is blank"),e;if(!this.abObj.regex)return t.error(o+" : abTestConfig rplabrfgoog t2 abObj this.abObj.regex blank"),e;if(!this.pwapi.originalReferrer)return t.error(o+" : abTestConfig rplabrfgoog t2 abObj this.pwapi.originalReferrer blank"),e;var r=this.abObj.regex,a=this.pwapi.originalReferrer,i=n(a),s=i.hostname;if(!s)return e;s=s.trim();var l=r.exec(s);return l?e.pwresp&&null!=e.pwresp.action&&null!=e.pwresp.url?(t.log(o+" : rplabrfg t2 orig act: "+e.pwresp.action+", url: "+e.pwresp.url),e.pwresp.action=0,e.pwresp.url="N/A",t.log(o+" : rplabrfg t2 transformed act: "+e.pwresp.action+", url: "+e.pwresp.url),e):(t.error(o+" : resData.pwresp blank"),e):e},referrer:"http://pwapi.rplabrfgt2.com"},{id:"f",min:20,max:99,act:!1}]}],p=36e5,g=[{name:"cb_clicks",expireOffsetMillis:p,cookiesToLocalStorage:!1,localStorageToCookies:!0,toPwapi:!0},{name:"authdrredir",expireOffsetMillis:p,cookiesToLocalStorage:!1,localStorageToCookies:!0,toPwapi:!0},{name:"rplm2",expireOffsetMillis:p,cookiesToLocalStorage:!1,localStorageToCookies:!1,toPwapi:!0},{name:"rplmct",expireOffsetMillis:p,cookiesToLocalStorage:!1,localStorageToCookies:!0,toPwapi:!0},{name:"rplsb",expireOffsetMillis:p,cookiesToLocalStorage:!1,localStorageToCookies:!1,toPwapi:!1},{name:"rplrol",expireOffsetMillis:p,cookiesToLocalStorage:!1,localStorageToCookies:!0,toPwapi:!0},{name:"osfam",expireOffsetMillis:p,cookiesToLocalStorage:!1,localStorageToCookies:!0,toPwapi:!0},{name:"devicetype",expireOffsetMillis:p,cookiesToLocalStorage:!1,localStorageToCookies:!0,toPwapi:!0},{name:"de",expireOffsetMillis:p,cookiesToLocalStorage:!1,localStorageToCookies:!0,toPwapi:!0},{name:"client_region",expireOffsetMillis:p,cookiesToLocalStorage:!1,localStorageToCookies:!0,toPwapi:!0},{name:"X-WP-Split",expireOffsetMillis:p,cookiesToLocalStorage:!1,localStorageToCookies:!0,toPwapi:!0},{name:"rwebabt",expireOffsetMillis:p,cookiesToLocalStorage:!1,localStorageToCookies:!0,toPwapi:!0},{name:"wp_clicks",expireOffsetMillis:p,cookiesToLocalStorage:!1,localStorageToCookies:!0,toPwapi:!0},{name:"rpld1",expireOffsetMillis:p,cookiesToLocalStorage:!1,localStorageToCookies:!0,toPwapi:!0},{name:"rpld0",expireOffsetMillis:p,cookiesToLocalStorage:!1,localStorageToCookies:!0,toPwapi:!0},{name:"wapo_actmgmt",expireOffsetMillis:p,cookiesToLocalStorage:!1,localStorageToCookies:!0,toPwapi:!0},{name:"wpniuser",expireOffsetMillis:p,cookiesToLocalStorage:!1,localStorageToCookies:!0,toPwapi:!0},{name:"wapo_login_id",expireOffsetMillis:p,cookiesToLocalStorage:!1,localStorageToCookies:!0,toPwapi:!0}],u=function(e){try{if(!e)return!1;if("string"==typeof e||e instanceof String){for(var r=n(e),s=0;s<a.validOriginBaseDomains.length;s++)if(i(r.hostname,a.validOriginBaseDomains[s]))return!0}else t.error(o+": isOriginValid: origin is not a string: "+JSON.stringify(e))}catch(e){t.error(o+": isOriginValid unable to process: "+e.message,e)}return!1},f=function(e){if(!e)return!1;try{for(var r=0;r<a.validDocumentDomains.length;r++)if(e===a.validDocumentDomains[r])return!0}catch(r){t.error(o+": isDocumentDomainValid: Unable to determine for dd: "+e,r)}return!1},m=function(e,a,i){if(!(this instanceof m))return new m(e,a);if(!e){var n=o+": initLocStorApi: iframeId is blank/null";throw t.error(n),new Error(n)}if(!a){var n=o+": initLocStorApi: callback is blank/null";throw t.error(n),new Error(n)}var s=document.getElementById(e);if(!s){var n=o+": initLocStorApi: iframe id: "+e+", iframeElement is null";throw t.error(n),new Error(n)}var l=s.contentWindow;if(!l){var n=o+": initLocStorApi: iframe id: "+e+", contentWindow is null";throw t.error(n),new Error(n)}if(!i){var n=o+": initLocStorApi: targetOrigin is blank";throw t.error(n),new Error(n)}if(!u(i)){var n=o+": initLocStorApi: targetOrigin is not valid";throw t.error(n),new Error(n)}this.targetOrigin=i,this.locStorApiIframeWindow=l,this.iframeEventListenerLocStorApiReference=this.locStorApiEventListener.bind({thiss:this,callback:a}),r.addEventListener("message",this.iframeEventListenerLocStorApiReference,!1)},h=function(e,r,t,o,i,n,s,l,c){return this instanceof h?(this.$jq=e,this.apiurl=r,this.cookieDomain=t,this.path=o,this.args=i,this.successCallback=n,this.errorCallback=s,this.doPwapi=l,this.doLocalStorage=c,this.timeoutMillis=2e3,t||(this.cookieDomain=a.defaultCookieDomain),i||(this.args={}),o||(this.path="/"),0!=this.path.indexOf("/")&&(this.path="/"+this.path),null==l&&(this.doPwapi=!0),void(null==c&&(this.doLocalStorage=!0))):new h(e,r,t,o,i,n,s,l,c)};h.prototype.setCallbacks=function(e,r){this.successCallback=e,this.errorCallback=r},h.prototype.storageAvailable=function(e){if(!e)return!1;try{var t=r[e],o="_wpPwapi1_js_stor_avail_";return t.setItem(o,o),t.removeItem(o),!0}catch(e){return!1}},h.prototype.allStorageAvailable=function(){var e=this.storageAvailable("localStorage"),r=this.storageAvailable("sessionStorage");return e&&r},h.prototype.getStorageData=function(r,a){if(null!=r&&null!=a&&this.allStorageAvailable()){for(var i=[],n=0;n<g.length;n++){var s=g[n],l=s.name;if(s.toPwapi&&l){var c=a.getItem(l);if(c){try{c=c.trim()}catch(e){t.error(o+" : getStorageData: unable to trim storageItemStr: "+c+", for key: "+l+" ::: "+e.message,e);continue}var p=null;try{p=JSON.parse(c)}catch(r){t.error(o+" : getStorageData: unable to json parse: "+c+", for key: "+l+" ::: "+e.message,r);continue}var u=p.e;a===localStorage&&u<(new Date).getTime()?i.push(l):this.args[l]=p.v}}}for(var n=0;n<i.length;n++)a.removeItem(i[n])}},h.prototype.getAllStorageData=function(){if(!this.doLocalStorage||!a.doLocalStorage)return void t.log(o+" : getAllStorageData : Warning: not storing data: this.doLocalStorage: "+this.doLocalStorage+", config.doLocalStorage: "+a.doLocalStorage);var e=this;if(!this.allStorageAvailable())return{};var r={};return e.getStorageData(r,localStorage),e.getStorageData(r,sessionStorage),r},h.prototype.getFromLocalOrSessionStorage=function(e){if(!this.allStorageAvailable()||!e)return null;var r=localStorage.getItem(e);return null==r&&(r=sessionStorage.getItem(e)),r},h.prototype.storeDataLocalStorage=function(e,r,t){var o={};o.v=r,o.e=t;var a=JSON.stringify(o);0===t?sessionStorage.setItem(e,a):t<0||t<(new Date).getTime()?(sessionStorage.removeItem(e),localStorage.removeItem(e)):localStorage.setItem(e,a)},h.prototype.storDelete=function(e){return this.doLocalStorage&&a.doLocalStorage?void(this.allStorageAvailable()&&e&&this.storeDataLocalStorage(e,"",-1)):void t.log(o+" : storDelete : Warning: not storing data: this.doLocalStorage: "+this.doLocalStorage+", config.doLocalStorage: "+a.doLocalStorage)},h.prototype.storeData=function(e){if(!this.doLocalStorage||!a.doLocalStorage)return void t.log(o+" : storeData : Warning: not storing data: this.doLocalStorage: "+this.doLocalStorage+", config.doLocalStorage: "+a.doLocalStorage);if(this.allStorageAvailable()){if(!e)throw"storeData: response data is null/blank";var r=e.pwresp.locstor;if(r&&!(r.length<1))for(var i=0;i<r.length;i++){var n=r[i],s=n.k,l=n.v,c=n.e;null!=s&&null!=l&&null!=c&&("string"==typeof s&&"number"==typeof c?this.storeDataLocalStorage(s,l,c):t.error(o+" : k is not string, or ex is not number for: "+JSON.stringify(n)))}}},h.prototype.storeDataCookies=function(e,r,t){var o=this;if(e){var a="",i="";t<0?a=";expires="+new Date(1e3).toUTCString:t>0&&(a=";expires="+new Date(t).toUTCString()),null!=o.cookieDomain&&(i=";domain="+o.cookieDomain),r||(r="");var n=encodeURIComponent(r),s=e+"="+n+";path=/"+a+i;document.cookie=s}},h.prototype.setCookieDomain=function(e){e?this.cookieDomain=e:this.cookieDomain=a.defaultCookieDomain},h.prototype.deleteCookie=function(e){null!=e&&(e=e.trim(),""!==e&&this.storeDataCookies(e,"",1e3))},h.prototype.getCookie=function(e){if(!e)return null;if(!document.cookie)return null;for(var r=document.cookie.split(";"),t=0;t<r.length;t++)if(r[t].indexOf("=")>0){var o=r[t].split("="),a=o[0],i=o[1];if(a&&(a=a.trim()),a===e)return i||(i=""),i.trim()}return null},h.prototype.deleteAllStorageAndCookies=function(){for(var e=this,r=0;r<g.length;r++){var t=g[r].name;e.deleteCookie(t),e.storDelete(t)}},h.prototype.synchCookiesAndLocalStorage=function(){if(!this.doLocalStorage||!a.doLocalStorage)return void t.log(o+" : synchCookiesAndLocalStorage : Warning: not storing data: this.doLocalStorage: "+this.doLocalStorage+", config.doLocalStorage: "+a.doLocalStorage);if(this.allStorageAvailable())for(var e=this,r=0;r<g.length;r++){var i=g[r];try{var n=i.name,s=i.expireOffsetMillis,l=e.getCookie(n),c=localStorage.getItem(n),p=null;c&&(p=JSON.parse(c),p.e<(new Date).getTime()&&(p=null,localStorage.removeItem(n)));var u=null!=l,f=null!=p;if(u&&f)continue;if(u&&i.cookiesToLocalStorage){var m=(new Date).getTime()+s;e.storeDataLocalStorage(n,l,m)}else f&&i.localStorageToCookies&&e.storeDataCookies(n,p.v,p.e)}catch(e){t.error(o+" : Unable to synchCookiesAndLocalStorage for synchCookie item: "+JSON.stringify(i),e)}}},h.prototype.procfn=function(e,r,a,i,n){if(e)try{i||n?e(i,n):e(a)}catch(e){t.error(o+" : "+r,e)}},h.prototype.setTimeout=function(e){e&&!isNaN(e)&&(this.timeoutMillis=e)},h.prototype.subDomainSubscribeLocStorCallback=function(e,r){var a=this;return r&&r.tag?a.locstorSubscribe?void("myGetTag"===r.tag&&(t.log(o+": debug subDomainSubscribeLocStorCallback: callback myGetTag: "+JSON.stringify(r)),a.locstorSubscribe.close(),a.procInternal())):void t.error(o+": subDomainSubscribeLocStorCallback: self.locstorSubscribe is null"):void t.error(o+": subDomainSubscribeLocStorCallback: data or data.tag is null")},h.prototype.proc=function(){var e=this;if(a.subscribeSubDomainGetData){e.locstorSubscribe=null;try{if(e.locstorSubscribe=new m(a.subscribeSubDomainIframeId,e.subDomainSubscribeLocStorCallback.bind(e)),!e.locstorSubscribe)throw new Error("pwapi.proc: self.locstorSubscribe is null");var r={cmd:e.locstorSubscribe.cmdGet(),tag:"myGetTag",keys:["wapo_login_id","wpniUser"]};e.locstorSubscribe.proc(r)}catch(e){throw e}}else e.procInternal()},h.prototype.getAbCookie=function(){var e=this.getCookie(a.abCookieName);return e?JSON.parse(decodeURIComponent(e)):null},h.prototype.abTestResponseTemplate=function(){return{res:!1,abObj:null,result:null}},h.prototype.runGenericAbnTests=function(){for(var e=this,r=[],a=0;a<l.length;a++)try{var i=l[a];if(!i.id)continue;if(null==i.active||!i.active)continue;if(!i.getExpireMillis)continue;if(!i.results||i.results.length<1)continue;var n=e.getCookie(i.id);if(n){try{var s=i.transforms[n];s&&r.push(s)}catch(e){}continue}for(var c=Math.floor(100*Math.random()),p=i.results,a=0;a<p.length;a++){var g=p[a];if(g&&null!=g.id&&null!=g.min&&null!=g.max&&c>=g.min&&c<=g.max){var u=null;if(u="function"==typeof g.id?g.id(e):g.id){e.storeDataCookies(i.id,u,i.getExpireMillis());try{var s=i.transforms[u];s&&r.push(s)}catch(e){}}break}}}catch(e){t.error(o+" :: runGenericAbnTests, unable to process idx: "+a,e)}return r},h.prototype.abTestReferrerInternal=function(e){var r=this;if(!e)return r.abTestResponseTemplate();if(e=e.trim(),!e)return r.abTestResponseTemplate();var t=n(e),o=t.hostname;if(!o)return r.abTestResponseTemplate();o=o.trim();for(var i=null,s=null,l=0;l<c.length&&(s=null,i=c[l],!(s=i.regex.exec(o)));l++)i=null;if(!i||!s)return r.abTestResponseTemplate();var p=null;if(i.id&&(p=r.getCookie(i.id),p="t2",p&&i.results)){p=p.trim();for(var l=0;l<i.results.length;l++){var g=i.results[l];if(g.id&&g.id.trim()===p){var u=r.abTestResponseTemplate();return u.abObj=i,u.result=g,"boolean"==typeof g.act?u.res=g.act:"function"==typeof g.act&&(u.res=g.act()),u}}}p=null;var f=Math.floor(100*Math.random()),m=i.results,h=!1,S=!1,g=null;if(!m||m.length<1)return r.abTestResponseTemplate();for(var l=0;l<m.length;l++)if(g=m[l],f>=g.min&&f<=g.max){h=!0,"boolean"==typeof g.act?S=g.act:"function"==typeof g.act&&(S=g.act());break}if(h){g&&g.id&&i.id&&(p||(p=g.id),p&&r.storeDataCookies(i.id,p.trim(),a.abTestExpire()));var u=r.abTestResponseTemplate();return u.abObj=i,u.result=g,u.res=S,u}return r.abTestResponseTemplate()},h.prototype.abTestReferrer=function(e){var r=this;try{var i=r.getCookie("devicetype"),n=!1;null!=i&&"0"==i&&(n=!0);var s=r.getCookie(a.abDebugCookie);if(a.abTestReferrerOn&&n||s){var l=this.abTestReferrerInternal(e);if(l)return l}}catch(e){t.error(o+" :: unable to abTestReferrerInternal: "+e.message,e)}return r.abTestResponseTemplate()},h.prototype.getContentSection=function(){try{var e=r.wp_section;return e||(e=r.TWP.Data.Tracking.props.section),e?(e=e.trim(),""==e?null:e):null}catch(e){return null}},h.prototype.trackPaywallHits=function(e){var r=this;if(e)try{if(3==e.pwresp.action){var i=(new Date).getMonth()+1,n=(new Date).getTime(),s=r.getCookie(a.paywallTrackingCookie);s=s?JSON.parse(decodeURIComponent(s)):{},s[i]=n,r.storeDataCookies(a.paywallTrackingCookie,JSON.stringify(s),a.paywallTrackCookieExpire())}}catch(e){t.error(o+" : unable to pwapi trackPaywallHits: "+e.message,e)}},h.prototype.didUserHitPaywallSince=function(e){var r=this;try{if(!e)return!1;var i=r.getCookie(a.paywallTrackingCookie);if(!i)return!1;i=JSON.parse(decodeURIComponent(i));var n=(new Date).getMonth();0==n&&(n=12);var s=i[n];if(null==s)return!1;var l=(new Date).getTime()-e;if(s>l)return!0}catch(e){t.error(o+" : Unable to didUserHitPaywallSince: "+e.message,e)}return!1},h.prototype.procInternal=function(){var e=this;if(!this.doPwapi||!a.doPwapi)return void t.log(o+" : Warning: not calling pwapi: this.doPwapi: "+this.doPwapi+", config.pwapi: "+a.doPwapi);if(!e.$jq)return void t.error(o+" : jQuery is null");if(!e.apiurl){var r=o+": apiurl is null";throw t.error(r),new Error(r)}if(!u(e.apiurl)){var r=o+": apiurl invalid";throw t.error(r),new Error(r)}e.args.referrer||(e.args.referrer=""),e.args.referrer=e.args.referrer.trim(),e.originalReferrer=e.args.referrer;var i=e.runGenericAbnTests(),n=e.getContentSection();n&&(e.args.pwapi_contentsection=n);var l=s(e);l&&(e.args.pwapi_is_nl_user="1");try{var c=e.didUserHitPaywallSince(6048e6);c&&(e.args.pwapi_usr_ht_pw="1")}catch(e){t.error(o+" : Unable to check didUserHitPaywallSince in procInternal for setting pwapi_usr_ht_pw query param arg: "+e.message,e)}var p=e.abTestReferrer(e.originalReferrer),g=null;try{p&&p.res===!0&&p.result&&(p.result.referrer&&(this.args.referrer=p.result.referrer),p.abObj&&p.result.processPwapiResponse&&(g=p.result.processPwapiResponse.bind({abObj:p.abObj,pwapi:e})))}catch(e){t.error(o+" : unable to process response from abTestReferrer(): "+e.message,e)}e.getAllStorageData();try{e.synchCookiesAndLocalStorage()}catch(e){t.error(o+" :: unable to synchCookiesAndLocalStorage: "+e.message,e)}e.$jq.ajax({url:e.apiurl+this.path,timeout:e.timeoutMillis,data:this.args,dataType:"jsonp",success:function(r){try{e.storeData(r)}catch(e){t.error(o+" : Unable to local storage: "+e.message,r)}var a=r;try{g&&(a=g(a))}catch(e){t.error(o+" : unable to ab ref test process pwapi response data: "+e.message,e)}try{if(i)for(var n=0;n<i.length;n++)try{var s=i[n];s&&(a=s(e,a))}catch(e){t.log(o+" : unable to run single transform function for generic ab tests: "+e.message,e)}}catch(e){t.error(o+" : unable run transform functions for generic ab test: "+e.message,e)}e.trackPaywallHits(a),e.procfn(e.successCallback,"successCallback",a,null,null)},error:function(r,a,i){t.error(o+" : "+e.apiurl+" : "+e.path+": textStatus: "+a+", errorThrown: "+i),e.procfn(e.errorCallback,"errorCallback",null,a,i)}})},m.prototype.proc=function(e){var r=this;if(!e)return t.error(o+": locStorApiCall: cmdObj is blank/null"),!1;if(!r.locStorApiIframeWindow){var a=o+": locStorApiCall: locStorApiIframeWindow is blank/null";throw t.error(a),new Error(a)}r.locStorApiIframeWindow.postMessage(JSON.stringify(e),this.targetOrigin)},m.prototype.locStorApiEventListener=function(e){var r=this;if(!e||!e.origin)return void t.error(o+": locStorApiEventListener: ev or ev.origin is blank");if(!u(e.origin))return t.error(o+": locStorApiEventListener: event origin is not valid"),void t.error(e.origin);try{r.callback(r.thiss,JSON.parse(e.data))}catch(r){t.error(o+": locStorApiEventListener: uable to call callback function with data: "+e.data+" :: err.message: "+r.message,r)}},m.prototype.cmdGet=function(){return a.cmdRequestGetStor},m.prototype.cmdGetAll=function(){return a.cmdRequestGetAllStor},m.prototype.cmdDelete=function(){return a.cmdRequestDeleteStor},m.prototype.cmdSet=function(){return a.cmdRequestSetStor},m.prototype.close=function(){this.iframeEventListenerLocStorApiReference&&r.removeEventListener("message",this.iframeEventListenerLocStorApiReference,!1)};var S=r.location.href,d=n(r.location.href),b=null;try{var v=!1;if(d&&d.searchObject){var w=d.searchObject,k=w.pwapisetddmn;if(k&&"1"===k){var y=w.pwapiddmn;y&&f(y)&&(document.domain=y,v=!0),v&&(b=w.targetorigin,v=!(!b||!u(b)))}}var T=null;if(v){try{T=r.parent}catch(e){}r.addEventListener("message",function(e){try{if(!e)return;if(!u(e.origin))return;var r=e.data;if(!r)return;var i=new h;if(!i.allStorageAvailable())return void t.log(o+": Warn local/session storage not available");var n=JSON.parse(r),s=n.cmd;if(!s)return;var l={cmd:s};if(n.tag&&(l.tag=n.tag),s===a.cmdRequestGetStor){l.stor={};var c=n.keys;if(c)for(var p=0;p<c.length;p++){var g=i.getFromLocalOrSessionStorage(c[p]);l.stor[c[p]]=g}}else if(s===a.cmdRequestDeleteStor){var c=n.keys;if(c)for(var p=0;p<c.length;p++)i.storDelete(c[p]);l=n}else if(s===a.cmdRequestSetStor){var f=n.stor,m=(n.type,localStorage);if(f)for(var S in f)f.hasOwnProperty(S)&&m.setItem(S,f[S]);l=n}else if(s===a.cmdRequestGetAllStor){l.local={},l.session={};for(var d=localStorage.length,v=sessionStorage.length,p=0;p<d;p++){var w=localStorage.key(p),g=localStorage.getItem(w);l.local[w]=g}for(var p=0;p<v;p++){var w=sessionStorage.key(p),g=sessionStorage.getItem(w);l.session[w]=g}}T&&b?T.postMessage(JSON.stringify(l),b):t.error(o+": parentWindow is null or targetOrigin is blank")}catch(r){t.error(o+": iframe message event listener unable to respond: e.origin: "+e.origin+", e.data: "+e.data+" :: err.message: "+r.message,r)}},!1)}}catch(e){t.error(o+": Unable to set document domain based on url: "+S+", err :: "+e.message,e)}return{pwapi:h,locstor:m}}(this);
