webpackJsonp([2],{0:function(e,t,n){n(1280),e.exports=n(1246)},6:function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e}},7:function(e,t,n){function i(e,t){for(var n=0;n<e.length;n++){var i=e[n],r=c[i.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](i.parts[o]);for(;o<i.parts.length;o++)r.parts.push(s(i.parts[o],t))}else{for(var a=[],o=0;o<i.parts.length;o++)a.push(s(i.parts[o],t));c[i.id]={id:i.id,refs:1,parts:a}}}}function r(e){for(var t=[],n={},i=0;i<e.length;i++){var r=e[i],o=r[0],s=r[1],a=r[2],l=r[3],u={css:s,media:a,sourceMap:l};n[o]?n[o].parts.push(u):t.push(n[o]={id:o,parts:[u]})}return t}function o(){var e=document.createElement("style"),t=p();return e.type="text/css",t.appendChild(e),e}function s(e,t){var n,i,r;if(t.singleton){var s=g++;n=f||(f=o()),i=l.bind(null,n,s,!1),r=l.bind(null,n,s,!0)}else n=o(),i=u.bind(null,n),r=function(){n.parentNode.removeChild(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}function a(e,t,n){var i=["/** >>"+t+" **/","/** "+t+"<< **/"],r=e.lastIndexOf(i[0]),o=n?i[0]+n+i[1]:"";if(e.lastIndexOf(i[0])>=0){var s=e.lastIndexOf(i[1])+i[1].length;return e.slice(0,r)+o+e.slice(s)}return e+o}function l(e,t,n,i){var r=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=a(e.styleSheet.cssText,t,r);else{var o=document.createTextNode(r),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function u(e,t){var n=t.css,i=t.media,r=t.sourceMap;if(r&&"function"==typeof btoa)try{n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(JSON.stringify(r))+" */",n='@import url("data:stylesheet/css;base64,'+btoa(n)+'")'}catch(o){}if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var c={},d=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},h=d(function(){return/msie 9\b/.test(window.navigator.userAgent.toLowerCase())}),p=d(function(){return document.head||document.getElementsByTagName("head")[0]}),f=null,g=0;e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=h());var n=r(e);return i(n,t),function(e){for(var o=[],s=0;s<n.length;s++){var a=n[s],l=c[a.id];l.refs--,o.push(l)}if(e){var u=r(e);i(u,t)}for(var s=0;s<o.length;s++){var l=o[s];if(0===l.refs){for(var d=0;d<l.parts.length;d++)l.parts[d]();delete c[l.id]}}}}},45:function(e,t,n){e.exports=n.p+"assets/images/statistics/jumpmonth-a98e52a.png"},48:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){s["default"](e)}t.__esModule=!0,t.registerDefaultDecorators=r;var o=n(2879),s=i(o)},49:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){s["default"](e),l["default"](e),c["default"](e),h["default"](e),f["default"](e),m["default"](e),v["default"](e)}t.__esModule=!0,t.registerDefaultHelpers=r;var o=n(2880),s=i(o),a=n(2881),l=i(a),u=n(2882),c=i(u),d=n(2883),h=i(d),p=n(2884),f=i(p),g=n(2885),m=i(g),_=n(2886),v=i(_)},50:function(e,t,n){"use strict";t.__esModule=!0;var i=n(4),r={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=i.indexOf(r.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=r.lookupLevel(e),"undefined"!=typeof console&&r.lookupLevel(r.level)<=e){var t=r.methodMap[e];console[t]||(t="log");for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;n>o;o++)i[o-1]=arguments[o];console[t].apply(console,i)}}};t["default"]=r,e.exports=t["default"]},52:function(e,t,n){"use strict";function i(e,t){return n(51).t(e,t.hash,{comment:t.hash._comment,context:t.hash._context})}function r(e){return n(51).t(n(556).cleanBlockText(e.fn()),e.hash,{comment:e.hash._comment,context:e.hash._context})}e.exports=function(){var e=arguments.length;if(2===e)return i.apply(this,arguments);if(1===e)return r.apply(this,arguments);throw new Error("Invalid signature to t helper, expected 1 or 2 arguments, got "+e)}},53:function(e,t,n){"use strict";e.exports=function(){return new(n(20).SafeString)(n(578).handlebarHelper.apply(this,arguments))}},55:function(e,t,n){"use strict";var i=e.exports=new(n(242));n(997).applyTo(i),n(3).each({app_id:1e3*String(Date.now()).substr(-8)+Math.floor(1e3*Math.random()),app_version:null,public_api_host:"https://api.soundcloud.com/",api_v2_host:"https://api-v2.soundcloud.com/",auth_ui_host:"https://secure.soundcloud.com/",client_application_id:46941,client_id:"2t9loNQH90kzJcsFCODdigxfp325aq4z",eventlogger_tracking_url:"https://l9bjkkhaycw6f8f4.soundcloud.com",experiments:null,geoip:null,airbrake_project_key:"04b3f291e3db982608ca3611c0e3f6fe",airbrake_project_id:"129825",fb_app_id:"19507961798",google_client_id:"984739005367.apps.googleusercontent.com",recaptcha_public_key:"6LeABsUSAAAAABLOEF92U0unfhlGLynYlhvJRFue",adyen_url:"https://test.adyen.com/hpp/cse/js/7814235253800464.shtml",playHistoryLength:50,maxComments:200,me:null,mixi_api_key:"1403ed11563185e9cff6cfeedf4f2ecf77fa459e",notifications:null,notificationsUri:"wss://pushers.soundcloud.com/",oauth_token:null,preferFlashAudio:!0,promotedContentServer:"https://promoted.soundcloud.com/promo",promotedContentAccessToken:"web",rubiconPartnerCode:16386,restoreToSound:null,rollouts:null,router:null,songkick_api_key:"ZWsLr2h7FF5sHG54",facebook_api_key:"a7309b9a9a85963579f7e8bcffd36d2a",versionUpdateInterval:36e5,visualsQueueHost:"https://visuals-queue.soundcloud.com/visuals",wisHost:"https://wis.sndcdn.com",systemUserId:193},function(e,t){i.set(t,e,{silent:!0})}),i.finalize()},57:function(e,t,n){"use strict";var i,r,o=new(n(104))("broadcast"),s=n(55).get("app_id");o.on("broadcast",function(e){var t=e.current;t&&t.appId!==s&&r.call(a,t)});var a=e.exports=n(3).assign({},n(22).Events,{broadcast:function(e,t){var n,s;return"string"==typeof e?(n=[].slice.call(arguments,1),t=e,e={}):n=[].slice.call(arguments,2),s=i(t,n),o.set("broadcast",s),e.excludeThis||r.call(this,s),this}});i=function(e,t){return{type:e,timestamp:Date.now(),appId:s,args:t}},r=function(e){this.trigger.apply(this,["broadcast:"+e.type].concat(e.args||[]))}},58:function(e,t,n){"use strict";e.exports=function(){var e=Array.prototype.slice.call(arguments,0,-1);return n(62).getRoute.apply(n(62),e)}},62:function(e,t,n){(function(t){"use strict";function i(e,i){var r,o;this.currentLayout&&(e!==this.currentLayout&&this.currentLayout.dispose(),n(57).trigger("layout:beforeChange",this._currentLayoutInfo)),this.currentLayout=e,o=this._currentLayoutInfo=e.getChangeEventData(i),r=t("#content"),e.render(),r.children()[0]!==e.el&&r.empty()[0].appendChild(e.el),n(57).trigger("layout:change",o)}function r(e){return e._navigationBlocks.filter(o).map(function(e){return e.callback}).filter(n(3).identity).reduce(function(e,t){return t(e)!==!1&&e},!0)}function o(e){return!e.condition||e.condition()}function s(){return n(96).pushState?window.location.href:"https://"+window.location.hostname+"/"+window.location.hash.replace(/^[#\/]/,"")}function a(e,t){("popstate"!==t.type||r(e))&&n(22).History.prototype.checkUrl.call(this,t)}var l,u,c,d=300,h=e.exports=n(22).Router.extend({currentLayout:null,_currentLayoutInfo:null,_navigationBlocks:null,_navCount:0,initialize:function(){this._navigationBlocks=[],n(3).bindAll(this,"onBeforeUnload","detachCurrentLayout"),n(22).history.checkUrl=a.bind(n(22).history,this)},setRoutes:function(e,t){var n=this;l=e,u=t,c=l.slice(0).reverse(),e.forEach(function(e){var t=e.route,i=e.name,r=e.handler;n.route(t,i,r)})},setLoader:function(e){this.loader=e},reload:function(){this.match(window.location.href.replace(/^https?:\/\/[^\/]+\//,""))},addNavigationBlock:function(e,i,r){var o,s=n(3).uniqueId();return o=this._navigationBlocks.unshift({id:s,exitSiteMessage:e,callback:i,condition:r}),1===o&&t(window).on("beforeunload",this.onBeforeUnload),s},removeNavigationBlock:function(e){var n,i=this._navigationBlocks;for(n=i.length;n--;)if(i[n].id===e){i.splice(n,1);break}i.length||t(window).off("beforeunload",this.onBeforeUnload)},isNavigationBlocked:function(){return this._navigationBlocks.some(o)},onBeforeUnload:function(e){var t=n(3).find(this._navigationBlocks,o),i=t&&t.exitSiteMessage;return i?(e.returnValue=i,i):void 0},navigateToRoute:function(e,t,n){var i,r=[e];t&&t.length&&(r=r.concat(t)),i=h.getRoute.apply(h,r),this.navigate(i,n)},navigate:function(e,t){r(this)&&(t&&t.hard?window.location.href=e:n(22).Router.prototype.navigate.call(this,e,t))},match:function(e){return n(22).history.loadUrl(e)},getUrlInfo:function(e){var t,i,r,o=n(65).parse(e);return o.path?(t=o.path.substring(1),r=n(3).find(c,function(e){return e.route.test(t)}),r&&(i={name:r.name,params:this._extractParameters(r.route,t)}),i):void 0},getLocation:function(){return s()},apply:function(e,t){var r,o,s=this,a="layouts/"+e;t=t||{},++this._navCount,this.setupDeferred&&this.setupDeferred.reject(),this.setupDeferred=o=n(56).defer(),r=window.setTimeout(this.detachCurrentLayout,d),this.loader.loadLayout(a).always(window.clearTimeout.bind(window,r)).done(function(n){if("rejected"!==o.state()){var r=s.currentLayout instanceof n?s.currentLayout:new n;r.setArgs(t),s.setupDeferred=r.setup(t).done(i.bind(s,r,e,t))}})},notImplemented:function(e){var t=s();e&&(t=e(t)),window.open(t),window.history.go(-1)},isLoggedIn:function(){return n(61).isLoggedIn()},getRolloutValue:function(e){return n(55).get("rollouts").get(e)},getExperimentValue:function(e,t){return n(55).get("experiments").get(e,t)},getCurrentUserPermalink:function(){return n(55).get("me").get("permalink")},getQueryParams:function(e){return n(65).getQueryParams(e)},getQueryString:function(e){return n(65).getQueryString(e)},getLayoutInfo:function(){return this._currentLayoutInfo},getRouteInfo:function(e){return n(3).find(l,function(t){return t.name===e})},getNavCount:function(){return this._navCount},unauthenticated:function(){n(59).trackAuthEvent(n(102).initiate,{target:"implicit:navigate"});var e=n(65).parse(window.location.href).relative;this.navigateToRoute("signin",e,{replace:!0,trigger:!0})},detachCurrentLayout:function(){this.currentLayout&&this.currentLayout.$el.detach()}},{getRoute:function(e){var t=u[e];if(t){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;n>r;r++)i[r-1]=arguments[r];return t.apply(this,i)}},includeSecretTokenForSound:function(e){var t=n(55).get("me");return!(!e.secret_token||t.owns("sound",e))},includeSecretTokenForPlaylist:function(e){var t=n(55).get("me");return!(!e.secret_token||t.owns("playlist",e))},removeFragmentParams:function(){if(n(96).pushState){for(var e=window.location.href,t=e,i=arguments.length,r=Array(i),o=0;i>o;o++)r[o]=arguments[o];t=r.length?r.reduce(function(e,t){return n(65).removeFragmentParam(t,e)},e):n(65).modify(e,{fragment:null}),t!==e&&window.history.replaceState(null,null,t)}}})}).call(t,n(1))},64:function(e,t,n){(function(t){"use strict";function i(e,t){return e.get?e.get(t):e[t]}function r(e,t){this.has(e)&&this.set(e,Math.max(0,this.get(e)+(t?1:-1)))}function o(e,t){r.call(this,e.isPrivate()?"private_tracks_count":"track_count",t)}function s(e){n(3).each({follow:e.onFollow,like:e.onLikesChanged,repost:e.onReposted,comment:e.onComment,destroy:e.onDeleteResource,createPlaylist:e.onPlaylistCreate},function(t,i){e.listenTo(n(74),i+":origin:user:"+e.id,t)})}function a(e){r.call(this,"followers_count",e.state)}function l(){return{product:{id:g,name:""},recurring:!1}}function u(){return{product:{id:v,name:"Free"},recurring:!1}}function c(){var e=this.isCPPEnabled()&&this.get("cpp").rightsholder_links;if(!e||!e.length)return!0;var t=e[0].rightsholder_urn;return n(3).every(e,{rightsholder_urn:t})}function d(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return function(){return t.some(this.get,this)}}function h(e){return n(55).get("rollouts").get(e)}function p(e){var t=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];return function(){var n=this.getPlan();return n&&(t?n===e:n!==e)}}var f=n(274),g=f.CONSUMER_SUBSCRIPTION_FREE,m=f.CONSUMER_SUBSCRIPTION_MID_TIER,_=f.CONSUMER_SUBSCRIPTION_HIGH_TIER,v=f.CREATOR_SUBSCRIPTION_FREE,y=f.CREATOR_SUBSCRIPTION_PRO,b=f.CREATOR_SUBSCRIPTION_PRO_UNLIMITED,w=[{emitter:n(74),event:"follow",getInstance:function(e,t){var n=t.target;return e.id===n},handler:a}];e.exports=n(66).extend(n(992),n(994),n(995).withOptions({types:n(1863).user}),n(267).withOptions({attr:"username"}),n(266).withOptions({read:"avatar_url",write:"avatar_data"}),n(563),n(195).withOptions({events:w}),{resource_type:"user",urnPrefix:"soundcloud:users",saveFormat:"json",saveWithWrapper:!1,_connections:null,setup:function(){var e=this;this.has("subscriptions")&&!this.has("creator_subscriptions")&&this.set("creator_subscriptions",this.get("subscriptions")),this.options.isMe&&(this.id?s(this):this.once("change:id",function(){s(e)}))},baseUrl:function(){return this.id?this.getEndpointUrl("user",{id:this.id}):"you"===this.get("permalink")?this.getEndpointUrl("me"):void 0},ownerUrl:function(){return this.getEndpointUrl("userAsOwner",{urn:this.getUrn()})},getImageSaveUrl:function(){return this.getEndpointUrl("userImageUpdate",{id:this.id})},ownerAttributes:["default_tracks_feedable","cpp","downloads_disabled","hidden_tracks_count","blocked_tracks_count","default_license","primary_email","primary_email_confirmed","date_of_birth","gender"],parse:function(e){var t=n(3).clone(e);return t.primary_email_confirmed=t.primary_email_confirmed!==!1,t.subscriptions&&!t.creator_subscriptions&&(t.creator_subscriptions=t.subscriptions),"undefined"==typeof t.country_code&&"undefined"!=typeof t.country&&(t.country_code=n(84).countryToCode(t.country)),t},onLikesChanged:function(e){r.call(this,"likes_count",e.state)},onFollow:function(e){r.call(this,"followings_count",e.state)},onReposted:function(e){r.call(this,"reposts_count",e.state)},onComment:function(e){e.state&&r.call(this,"comments_count",!0)},onDeleteResource:function(e){var t=e.targetModel;switch(t.resource_type){case"sound":this.adjustUploadSeconds(t),this.owns("sound",t)&&o.call(this,t,!1);break;case"comment":this.owns("comment",t)&&r.call(this,"comments_count",!1)}},onPlaylistCreate:function(e){var t="private"===e.object.get("sharing")?"private_playlists_count":"playlist_count";this.set(t,(this.get(t)||0)+1)},owns:function(e,t){void 0===t&&(t=e,e=t.resource_type);var n=this.id;if(!n)return!1;switch(e){case"comment":case"playlist":case"sound":return n===i(t,"user_id");case"user":return n===i(t,"id");case"sound-upload-edit":case"playlist-upload":case"playlist-edit":case"profile-settings":return!0}return!1},canDownload:function(e){return"sound"===e.resource_type&&e.get("downloadable")&&e.get("has_downloads_left")!==!1},getCountry:function(){var e=this.get("country_code");return e?n(84).codeToCountry(e):this.get("country")},getCountryCode:function(){var e=this.get("country");return e?n(84).countryToCode(e):this.get("country_code")},getPlan:function(){return this.getCreatorSubscription().product.id},getConsumerPlan:function(){return this.getConsumerSubscription().product.id},getPlanName:function(){return this.getCreatorSubscription().product.name},isCPPEnabled:function(){return!!this.get("cpp")},canRequestISRCGeneration:function(){return this.getCPPOption("indie",!1)===!0&&this.hasMonetization()===!0},canBulkUploadAsPlaylist:function(){return!this.isCPPEnabled()||c.call(this)},hasOnlyOneRightsholderLink:function(){return c.call(this)},getCPPOption:function(e,t){var n=this.get("cpp");return null!=(n&&n.config&&n.config[e])?n.config[e]:t},canEditMonetization:function(){return this.getCPPOption("can_edit_monetization",!0)},canEditDownloadable:function(){return this.getCPPOption("can_edit_downloadable",!0)},canEditRssEnabled:function(){return this.getCPPOption("can_edit_rss_enabled",!0)},hasGeoblocking:function(){return this.isCPPEnabled()||h("geo_blocking_settings")},hasMonetization:function(){return this.getCPPOption("has_monetization_form")},hasCPPRightsholder:function(){var e=this.get("cpp");return!!(e&&e.rightsholder_links&&e.rightsholder_links.some(function(e){var t=e.rightsholder_urn;return/^soundcloud:rightsholders/.test(t)}))},hasFullScheduling:function(){return this.isCPPEnabled()||h("scheduled_publishings")},hasToPublicScheduling:function(){return this.isCPPEnabled()||h("scheduled_publishings_only_sunrise_to_public")},hasAnyScheduling:function(){return this.hasFullScheduling()||this.hasToPublicScheduling()},hasMonthlyPlan:function(){return this.getCreatorSubscription().recurring},hasCreatorSubHug:function(){var e=this.get("creator_subscription");return!(!e||!e.hug)},isFree:p(v),isPro:p(y),isProUnlimited:p(b),isPremium:p(v,!1),isConfirmed:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e.viaEmail,i=void 0===t?!1:t,r=n(55).get("experiments").get("v2_listening","restrict_actions_when_user_is_not_confirmed"),o=!("not_restricted_b"===r||"not_restricted_a"===r);return o&&n(61).isLoggedIn()?i?!!this.get("primary_email_confirmed"):!!this.get("confirmed"):!0},hasHighTier:function(){return this.getConsumerPlan()===_},hasMidTier:function(){return this.getConsumerPlan()===m},hasProPlanLevel:function(){return 1===this.getPerk("planLevel")},getConsumerSubscription:function(){return this.get("consumer_subscription")||l()},getCreatorSubscription:function(){var e=this.get("creator_subscription"),t=this.get("creator_subscriptions");return e?e:t&&t[0]?t[0]:u()},getPerk:function(e){return n(1843).get(this.getPlan(),this.getConsumerPlan(),e)},getPermalink:function(){return this.get("permalink_url").replace(/^https?:.+?\w\//,"/")},isMe:function(){return this===n(55).get("me")&&!!this.id},isSystemUser:function(){return this.id===n(55).get("systemUserId")},hasConnection:function(e){var i=this,r=n(56).defer(),o=this.isMe();return this._connections||!o?r.resolve(o&&this._connections.indexOf(e)>-1):t.ajax({url:this.getEndpointUrl("meConnections"),dataType:"json"}).done(function(t){i._connections=t.map(function(e){return e.type}),r.resolve(i._connections.indexOf(e)>-1)}).fail(r.resolve.bind(r,!1)),r},getNumTracks:function(e){var t=this.get("track_count")||0,n=this.get("private_tracks_count")||0,i=this.get("blocked_tracks_count")||0,r=this.get("hidden_tracks_count")||0;switch(e){case"public":return t;case"private":return n;case"hidden":return r;case"blocked":return i;default:return t+n+r+i}},getNumPlaylists:function(e){var t=this.get("playlist_count")||0,n=this.get("private_playlists_count")||0;switch(e){case"public":return t;case"private":return n;default:return t+n}},hasPlaylists:d("playlist_count","private_playlists_count"),hasLikes:d("likes_count","public_favorites_count"),hasFollowings:d("followings_count"),hasPublicSounds:d("track_count","playlist_count","reposts_count"),hasTracks:d("track_count","private_tracks_count"),hasOwnSounds:d("track_count","private_tracks_count","playlist_count","private_playlists_count"),hasSounds:d("track_count","private_tracks_count","playlist_count","private_playlists_count","reposts_count"),adjustUploadSeconds:function(e,t){var n,i,r,o=e.get("duration");o&&(n=Math.round(o/1e3)*(t?-1:1),i=this.getUploadSecondsLeft()+n,r=this.getUploadSecondsUsed()-n,this.setUploadSeconds(i,r))},setUploadSeconds:function(e,t){var i=n(3).clone(this.get("quota"));i&&(i.upload_seconds_used=t,i.unlimited_upload_quota||(i.upload_seconds_left=e),this.set("quota",i))},getUploadSecondsLeft:function(){var e=this.get("quota");return e?e.unlimited_upload_quota?1/0:e.upload_seconds_left:void 0},getUploadSecondsUsed:function(){var e=this.get("quota");return e?e.upload_seconds_used:0},getUploadSeconds:function(){var e=this.getUploadSecondsLeft();return e===1/0?e:e+this.getUploadSecondsUsed()},hasUnlimitedUpload:function(){return this.getUploadSecondsLeft()===1/0},getUploadMinutesLeft:function(){var e=this.getUploadSecondsLeft();return(0>e?Math.floor:Math.ceil)(e/60)},getUploadMinutesUsed:function(){return Math.round(this.getUploadSecondsUsed()/60)},isOverQuota:function(){return this.getUploadSecondsLeft()<0},getRSSFeedUrl:function(){return"http://feeds.soundcloud.com/users/"+this.getUrn()+"/sounds.rss"}},{normalize:function(e){return e.avatar_url&&(e.avatar_url=e.avatar_url.replace("http:","https:").replace(/\?.*/,"")),e},resolve:function(e){return"you"===e?n(56).resolve(n(55).get("me")):n(66)._resolve(this,e,function(t){return t.hasPermalink(e)})}})}).call(t,n(1))},67:function(e,t,n){"use strict";function i(e){return e instanceof n(191).Player}function r(){this._visuals||(this._visuals=new(n(938))(null,{resource_id:this.id})),this._visuals.reset(this.get("visuals"),{parse:!0}),this._visuals.lastFetchTime=Date.now()}function o(){var e=this.audio;if(e){var t=e.isPlaying(),r=n(543).createAudioFromSound(this);i(e)?e.kill():e.dispose(),this.audio=r,t&&n(59).trackPause({type:"pause",sound:this,ad:null,context:null,external_media:null,userInitiated:!0,pause_reason:"context_change",isRepeating:!1,currentMetadata:n(63).getCurrentMetadata()})}}function s(){var e=this,t=this.audio;t&&(this.audio=n(543).createAudioFromSound(this,{onKilled:function(){e.audio=null}}),t.isPlaying()&&!function(){var n=t.currentTime();t.pause(),i(e.audio)?e.audio.seek(n):e.audio&&e.audio.initAudio().then(function(){e.audio.seek(n)})}(),t.dispose())}function a(){var e=!this.isBlocked()&&this._streamsExist&&!this._temporarilyUnavailable;e!==this._playable&&(this._playable=e,this.trigger("change:playable",e))}function l(e){return e&&(e.currentMetadata=n(63).getCurrentMetadata()),e}var u=n(3).constant(1),c=function(){return this},d=n(3).constant(void 0),h=.25,p="BLOCK",f="SNIP",g="MONETIZE",m="ALLOW",_=3e3,v=3e4,y=function(e,t){var n=t.target,i=t.targetType;return e.id===n&&"sound"===i},b=[{emitter:n(74),event:"like",getInstance:y,handler:function(e){this.onLike(e)}},{emitter:n(74),event:"repost",getInstance:y,handler:function(e){this.onRepost(e)}},{emitter:n(74),event:"comment",getInstance:y,handler:function(e){this.onComment(e)}}],w=n(991).withOptions({batchEndpoint:"trackBatch",getBatchParams:function(e){var t=e.playlist;return t&&"public"!==t.get("sharing")&&!n(55).get("me").owns(t)?{playlistId:t.id,playlistSecretToken:t.get("secret_token")}:null}}),x=(e.exports=n(66).extend(w,n(990),n(992),n(994),n(1371),n(267).withOptions({attr:"title"}),n(266).withOptions({read:"artwork_url",write:"artwork_data"}),n(563),n(996),n(195).withOptions({events:b}),{resource_type:"sound",urnPrefix:"soundcloud:tracks",getEndpointForMethod:function(e){return"read"===e?"track":null},audio:null,_visuals:null,submodelMap:{user:n(64),created_with:n(1017)},timeOffset:0,playlist:null,originalSound:null,ownerAttributes:["scheduled_public_date","scheduled_private_date","scheduled_timezone","geo_blockings","managed_by_feeds","reveal_comments","reveal_stats"],_streamsExist:!0,_temporarilyUnavailable:!1,_unavailableResetTimer:null,_playable:!0,_preloadingCounter:0,setup:function(e,t){var i=!(!t||!t.suppressGlobalEvents);this.on("play",x("play",i),this).on("pause",x("pause",i),this).on("buffering:start",x("buffering:start",i),this).on("buffering:end",x("buffering:end",i),this).on("seeked",x("seeked",i),this).on("finish",x("finish",i),this).on("playStart",x("playStart",!0),this),this.getSounds=n(3).memoize(this.getSounds),this.listenTo(this,"change:visuals",r).listenTo(this,"change:policy",a),this.listenTo(n(57),"googleCast:audioHijack",o),this.listenTo(n(57),"googleCast:audioRestored",s),this.attrExists("visuals")&&r.call(this),a.call(this)},getSubmodelOptions:function(e){return"user"===e?{parse:!0}:null},ownerUrl:function(){return this.getEndpointUrl("trackAsOwner",{urn:this.getUrn()})},parse:function(e){var t=e.schedule;return e.scheduled_timezone=t&&t.timezone,e.scheduled_public_date=t&&Date.parse(t.sunrise),e.scheduled_private_date=t&&Date.parse(t.sunset),e},baseUrl:function(){return this.getEndpointUrl("track",{urn:this.getUrn()})},destroyUrl:function(){return this.getEndpointUrl("trackDelete",{id:this.id})},streamsUrl:function(){var e=!n(55).get("rollouts").get("v2_disable_encrypted_streams")&&n(55).get("rollouts").get("v2_allow_encrypted_streams"),t={};return e&&(t.with_encrypted_streams=!0),this.getEndpointUrl("trackStreams",{id:this.id},t)},getImageSaveUrl:function(){return this.getEndpointUrl("trackPatchUpdate",{id:this.id})},extractSecretToken:function(e){return n(65).parse(e.uri).query.secret_token},play:function(e){this.playlist?(this.playlist.setCurrentSound(this),this.playlist.play(e)):this.createAudio()&&(i(this.audio)?(e&&e.seek&&this.audio.seek(e.seek),this.audio.play()):this.audio.play(e))},pause:function(e){this.playlist?this.playlist.pause(e):this.audio&&(i(this.audio)&&e&&"concurrent_streaming"===e.pause_reason?this.audio.pauseAfterFade(_):this.audio.pause())},seek:function(e){this.createAudio()&&this.audio.seek(e)},seekRelative:function(e){if(this.createAudio())if(i(this.audio)){var t=n(126).clamp(this.audio.getPosition()+e,0,this.getMediaDuration());this.audio.seek(t)}else this.audio.seekRelative(e)},getSounds:function(){return[this]},getCurrentSound:c,getFirstSound:c,getLastSound:c,getNumSounds:u,getPrevSound:d,getNextSound:d,getSoundIndex:function(e){return e===this?0:-1},containsSound:function(e){return e===this},isBuffering:function(){return this.audio?i(this.audio)?this.audio.isLoading():this.audio.isBuffering():!1},isPlaying:function(){return!!this.audio&&this.audio.isPlaying()},loadProgress:function(){if(!this.audio)return 0;if(i(this.audio)){var e=this.audio.getCurrentBufferedTimeRange();return e?Math.min(1,e.end/this.getMediaDuration()):0}return this.audio.loadProgress()},currentTime:function(){return this.audio?i(this.audio)?this.audio.getPosition():this.audio.currentTime():0},getListenTime:function(){return this.audio?this.audio.getListenTime():0},isNowPlaying:function(){return n(63).getCurrentSound()===this},progress:function(){return n(126).clamp(this.currentTime()/this.duration(),0,1)},duration:function(){return this.get("full_duration")||this.get("duration")},getMediaDuration:function(){var e=null;return this.audio&&i(this.audio)&&(e=this.audio.getDuration()),null!==e?e:this.get("duration")},isPlayable:function(){return this._playable},setHasStreamInfo:function(e){this._streamsExist!==e&&(this._streamsExist=e,a.call(this))},makeTemporarilyUnavailable:function(){var e=this;this._temporarilyUnavailable=!0,window.clearTimeout(this._unavailableResetTimer),this._unavailableResetTimer=window.setTimeout(function(){e._temporarilyUnavailable=!1,a.call(e)},v),a.call(this)},isProcessing:function(){var e=this.get("state");return"finished"!==e&&null!=e},isEditing:function(){return!1},isCommentable:function(){return this.get("commentable")!==!1},isManagedByFeeds:function(){return!!this.get("managed_by_feeds")},isMonetizable:function(){return!!this.get("monetization_enabled")},isMonetizablePending:function(){var e=this.get("monetization");return!this.isMonetizable()&&!!(e&&e.territories&&e.territories.length>0)},hasScheduledPrivacy:function(){return!(!this.get("scheduled_public_date")&&!this.get("scheduled_private_date"))},isGeoblocked:function(){var e=this.get("geo_blockings");return!(!e||!e.length)},isBlocked:function(){return this.get("policy")===p},isSnippetized:function(){return this.get("policy")===f},isMonetized:function(){return this.get("policy")===g},isAllowed:function(){return this.get("policy")===m},isAd:function(){return!!this.get("ad_type")},isExternal:function(){return"external"===this.get("ad_type")},getOriginalSound:function(){return this.originalSound||this},hasMinPlayTime:function(){return this.getListenTime()>=h*this.getMediaDuration()},createAudio:function(){var e=this;if(!this.audio){if(this.isDisabled())return!1;if(window.clearTimeout(this._unavailableResetTimer),this._temporarilyUnavailable=!1,this.audio=n(543).createAudioFromSound(this,{onKilled:function(){e.audio=null}}),!this.audio)return!1;this._preloadingCounter>0&&this.audio.enablePreloading()}return!0},initAudio:function(){this.createAudio()&&(i(this.audio)||this.audio.initAudio())},requestPreloading:function(){this._preloadingCounter++||this.createAudio()&&(this.initAudio(),this.audio.enablePreloading())},unrequestPreloading:function(){--this._preloadingCounter||this.audio&&this.audio.disablePreloading()},disposeAudio:function(){this.audio&&(i(this.audio)?this.audio.kill():this.audio.dispose(),this.audio=null,window.clearTimeout(this._unavailableResetTimer))},toJSON:function(){var e=n(66).prototype.toJSON.apply(this,arguments);return e._playlist={},this.playlist&&n(3).each(["id","permalink","permalink_url","secret_token","user_id"],function(t){e._playlist[t]=this.playlist.get(t)},this),e},saveUrl:function(e){return e?this.getEndpointUrl("trackPatchUpdate",{id:this.id}):this.isNew()?this.getEndpointUrl("trackCreate"):this.getEndpointUrl("trackUpdate",{urn:this.getUrn()})},saveFormat:"json",getAttributesToBeSaved:function(){var e=["api_streamable","commentable","description","downloadable","embeddable","feedable","genre","isrc","isrc_generate","label_name","license","monetization","original_filename","permalink","purchase_title","purchase_url","release_date","replacing_uid","replacing_original_filename","reveal_comments","reveal_stats","sharing","shared_to","tag_list","title","uid","geo_blockings","publisher_metadata","restrictions","rightsholders"].reduce(function(e,t){return null!=this[t]&&(e[t]=this[t]),e}.bind(this.attributes),{});return n(3).assign(e,n(3).pick(this.attributes,["scheduled_private_date","scheduled_public_date","scheduled_timezone","scheduled_public_timezone"])),e},setMonetizableTrack:function(e){e.hold(),this.addSubmodel(e),this._monetizableTrack=e},getMonetizableTrack:function(){return this._monetizableTrack}},{states:{READY:"ready",PROCESSING:"processing",FAILED:"failed",FINISHED:"finished"},hashFn:function(e){var t=e.resource_id;if(t){if("object"==typeof t){if("playlist_id"in t)return[t.playlist_id,t.sound_id].join("_");if("ad_target_id"in t)return["ad",t.ad_target_id,t.sound_id].join("_")}return t}return e.id||null},resolve:function(e,t,i){return n(66)._resolve(this,[e,t,i],function(n){var i=n.get("user");return i&&n.get("permalink")===t&&i.permalink===e})},normalize:function(e){var t=e.waveform_url;return t&&t.indexOf("/w1.")>-1&&(e.waveform_url=t.replace(/\/w1\./,"/wis.")),e},onCleanup:function(e){return e._visuals&&(e._visuals.release(),e._visuals=null),e.disposeAudio(),n(66).onCleanup.apply(this,arguments)}}),n(3).memoize(function(e,t){return function(i){var r=n(3).toArray(arguments);if(i&&i.sound===n(92).getCurrentSound()&&(i.ad=n(92).getCurrentAd()),t||n(57).trigger.apply(n(57),["audio:"+e].concat(r)),!n(153).isCasting())switch(e){case"playStart":n(59).trackPlayStart(l(i));break;case"pause":n(59).trackPause(l(i))}}},function(e,t){return e+(t?"":"-global")}))},75:function(e,t,n){"use strict";var i=e.exports=function(e,t){var r=i.getClass(e);return e=n(3).omit(e,"resource_type"),new r(e,t)};i.getClass=function(e){var t=e.resource_type||e.kind;return n("playlist"===t?88:"sound"===t||"track"===t?67:67)}},76:function(e,t,n){"use strict";function i(){n(57).off("connect:hasUserData",r),o=n(3).once(function(){n(61).isLoggedIn()||n(57).once("connect:hasUserData",r)})}function r(){g.clearRequestCache(),g.instances.invoke("fetch")}var o=void 0,s=n(72).productIds,a=s.CONSUMER_SUBSCRIPTION_MID_TIER,l=s.CONSUMER_SUBSCRIPTION_HIGH_TIER,u=s.CREATOR_SUBSCRIPTION_FREE,c=s.CREATOR_SUBSCRIPTION_PRO,d=s.CREATOR_SUBSCRIPTION_PRO_UNLIMITED,h=s.CREATOR_GIFT_FREE,p=s.CREATOR_GIFT_PRO,f=s.CREATOR_GIFT_PRO_UNLIMITED;i();var g=e.exports=n(66).extend({resource_type:"product",setup:function(){o()},fetch:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return g.fetchProductsByCategory(g.idToCategory(this.id),this.options.ref,n.promoCode).then(function(n){var i=n.body.plans;t.lastFetchTime=Date.now(),
t.populateFromPlans(i,e)},function(){t.populateFromPlans({})})},populateFromPlans:function(e,t){var i=n(3).findWhere(e,{id:g.idToApiId(this.id)});i?this.set(this.parse(i,t),t):this.set("active",!1)},parse:function(e){return n(3).extend({active:!0},n(3).omit(e,"id"))},isActive:function(){return!!this.get("active")},isAvailable:function(){return this.isFree()||!!this.get("preselected_term")},isGift:function(){return this.id.indexOf("gift")>-1},isConsumerHighTier:function(){return this.id===l},isPro:function(){return-1===this.id.indexOf("unlimited")&&!this.isFree()},isProUnlimited:function(){return this.id.indexOf("unlimited")>-1},isRenewal:function(){return"renewal"===this.get("use_case")},isFree:function(){return this.id.indexOf("free")>-1},isCurrency:function(e){return this.getCurrency()===e},isTrial:function(){return!!this.get("trial")},getPromotion:function(){return this.get("promotion")},getPromotionUrn:function(){if(!this.getPromotion())return null;var e=this.getPromotion().urn.split(":").pop(),t=e.split("-").pop();return this.getPromotion().price&&t===this.getPromotion().price.currency.toLowerCase()?e.split("-").slice(0,-1).join("-"):e},getPromotionDuration:function(){var e=this.get("promotion");return e?e.duration_in_days:0},getPromotionDurationInMonths:function(){var e=this.get("promotion");return e?e.duration_in_days/30:0},getTrialDuration:function(){var e=this.get("trial");return e?e.duration_in_days:0},getTrackingUseCase:function(){var e=this.get("use_case");return(e===g.useCases.REGULAR||e===g.useCases.MONEY_BACK)&&(e="new"),e},getCurrency:function(){return this.getPrice().currency},getTitle:function(){return this.isPro()?n(51).t("Pro"):this.isProUnlimited()?n(51).t("Pro Unlimited"):n(51).t("Free")},getPrice:function(e){return this.getTermData(e).price||{currency:"EUR"}},getDisplayPrice:function(){if(!this.getPrice().hasOwnProperty("amount"))return null;var e=this.getPrice(),t=e.amount,i=e.currency;return n(51).priceHelper.format(t,i)},getDiscountPrice:function(e){if(!this.getDiscount(e))return null;var t=this.getDiscount(e),i=t.amount,r=t.currency;return n(51).priceHelper.format(i,r)},getProratingPrice:function(e){if(!this.getProrating(e))return null;var t=this.getProrating(e),i=t.amount,r=t.currency;return n(51).priceHelper.format(Math.abs(i),r)},getPromoPrice:function(){arguments.length<=0||void 0===arguments[0]?2:arguments[0];if(!this.getPromotion())return null;var e=this.getPromotion().price,t=e.amount,i=e.currency;return n(51).priceHelper.format(t,i)},getProratingAmount:function(e){var t=this.getProrating(e);return t&&t.amount},getPackagePrice:function(e){var t=this.getTermData(e)["package"];return t&&(t.price||{currency:"EUR"})},getTier:function(e){var t=this.getTermData(e)["package"];return t&&t.tier},getPromoCode:function(){var e=this.getPromotion(),t=e.urn;return t&&t.split(":").pop()},getDiscount:function(e){var t=this.getTermData(e).discount;return t&&t.price},getProrating:function(e){var t=this.getTermData(e).prorating;return t&&t.price},getStartDate:function(e){return new Date(this.getTermData(e).start_date)},getTrialExpiryDate:function(e){var t=this.getStartDate();return t.setDate(t.getDate()+this.getTrialDuration()),t},getPromotionExpiryDate:function(e){var t=this.getStartDate();return t.setDate(t.getDate()+this.getPromotionDuration()),t},getTermData:function(e){return e=e||this.getPreselectedTerm(),this.get(e)||{}},getPreselectedTerm:function(){return this.get("preselected_term")},getUrn:function(){return this.getTermData()["package"].urn}},{useCases:{DISABLED:"disabled",REGULAR:"regular",MONEY_BACK:"money_back",RENEWAL:"renewal",DOWNGRADE:"downgrade",UPGRADE:"upgrade"},idToApiId:function(e){switch(e){case a:return"consumer-mid-tier";case l:return"consumer-high-tier";case h:case u:return"free";case p:case c:return"pro";case f:case d:return"pro-unlimited"}},idToCategory:function(e){switch(e){case a:case l:return"consumer-subscription";case h:case p:case f:return"creator-gift";case u:case c:case d:return"creator-subscription"}},fetchProductsByCategory:n(3).memoize(function(e,t,i){return n(23).callEndpoint("paymentQuotations",{category:e},{ref:t,promo_code:i}).fail(function(){delete g.fetchProductsByCategory.cache[e+"--"+i]})},function(e,t,n){return e+"--"+n}),resetLoginListener:i,clearRequestCache:function(){g.fetchProductsByCategory.cache={}}})},88:function(e,t,n){"use strict";function i(e,t){e.originalSound.set(e.attributes,t)}function r(e,t){this.set(e.attributes,t)}function o(){s.call(this)}function s(e){var t=this.soundsCollection.pluck("duration").reduce(function(e,t){return e+(t||0)},0);this.set("duration",t,e)}function a(e){var t=this,i=e.filter(function(e){return!t.findSoundById(e)}),r=this.soundsCollection.filter(function(t){var n=t.id;return-1===e.indexOf(n)});r.forEach(function(e){return t.removeSound(e)}),i.forEach(function(e){var i=new(n(67))({id:e});t.addSound(i),i.release()}),this.reorder(e)}var l,u=n(3).constant(!1),c="tracklistChange",d=500;l=n(22).Collection.extend({model:n(67),fetch:function(){return this.playlist.fetch.apply(this.playlist,arguments)},initialize:function(e,t){this.playlist=t.playlist},hasDataForView:function(){return!!this.playlist.attributes.tracks},isFullyPopulated:n(3).constant(!0),_usageCount:n(3).constant(1),hold:n(3).noop,release:n(3).noop});var h=function(e,t){var n=t.target,i=t.targetType;return e.id===n&&"playlist"===i},p=[{emitter:n(57),event:"broadcast:"+c,getInstance:function(e,t){var n=e.id,i=t.id;return n===i},handler:function(e){var t=e.trackIds;a.call(this,t)}},{emitter:n(74),event:"like",getInstance:h,handler:function(e){this.onLike(e)}},{emitter:n(74),event:"repost",getInstance:h,handler:function(e){this.onRepost(e)}}],f=(e.exports=n(66).extend(n(465),n(990),n(468),n(469),n(267).withOptions({attr:"title"}),n(266).withOptions({read:"artwork_url",write:"artwork_data"}),n(563),n(996),n(195).withOptions({events:p}),{resource_type:"playlist",urnPrefix:"soundcloud:playlists",saveFormat:"json",submodelMap:{tracks:n(67),user:n(64)},states:{shuffling:function(e){var t=this.getSoundIndex(this.getCurrentSound()),n=e&&this.isPlaying()?t:null,i=e?0:t;this.currentSoundCursor=i,this.setPlayOrder(n),this.toggleState("repeating",e)},repeating:{initial:!1}},soundsCollection:null,currentSoundCursor:0,_isPlayActionQueued:!1,_playOrder:null,_internalNavigation:!1,getSubmodelOptions:function(e){return"user"===e?{parse:!0}:null},setup:function(){this.soundsCollection=new l(null,{playlist:this}),this.listenTo(this.soundsCollection,"error",function(e,t,i){t instanceof n(552)&&this.removeSound(e)}),this._playOrder||(this._playOrder=[])},baseUrl:function(){return this.getEndpointUrl("playlist",{id:this.id},{representation:"full"})},destroyUrl:function(){return this.getEndpointUrl("playlistDelete",{id:this.id})},saveUrl:function(){return this.isNew()?this.getEndpointUrl("playlistCreate"):this.getEndpointUrl("playlistUpdate",{id:this.id})},getImageSaveUrl:function(){return this.getEndpointUrl("playlistArtworkUpdate",{id:this.id})},createSubmodel:function(e,t){"tracks"===t?this.prepareSounds():n(66).prototype.createSubmodel.apply(this,arguments)},prepareSounds:function(){var e=this,t=[];this.get("tracks").forEach(function(i){if(!e.containsSoundId(i.id)){var r=new(n(67))(i);e.addSubmodel(r);var o=n(3).defaults({resource_id:{playlist_id:e.id,sound_id:i.id}},i),s=new(n(67))(o,{suppressGlobalEvents:!0});s.playlist=e,s.originalSound=r,t.push(s),e.toggleListeners(s,!0)}}),0===this.soundsCollection.length?this.soundsCollection.reset(t):this.soundsCollection.add(t,{silent:!0}),t.length&&this.setPlayOrder()},getSoundsCollection:function(){return this.soundsCollection},getSoundsCollectionClone:function(){return new l(this.soundsCollection.models.slice(),{playlist:this})},toggleListeners:function(e,t){var n=t?"on":"off",s=t?"listenTo":"stopListening";e[n]("play",this.onSoundPlay,this)[n]("pause",this.onSoundPause,this)[n]("buffering:start buffering:end",this.onSoundBuffering,this)[n]("finish",this.onSoundFinish,this)[n]("time",this.onSoundTime,this)[n]("seeked",this.onSoundSeeked,this)[n]("change:duration",o,this),e[n]("change",i)[s](e.originalSound,"change",r)},onSoundBuffering:function(e){this.trigger(e.type,e),n(57).trigger("audio:"+e.type,e)},onSoundPlay:function(e){e.playlist=this,this.trigger("internal:play",e),this._internalNavigation||(this.trigger("play",e),n(57).trigger("audio:play",e),this._internalNavigation=!0)},onSoundPause:function(e){this._internalNavigation||(e.playlist=this,this.trigger("pause",e),n(57).trigger("audio:pause",e),this._internalNavigation=!0)},onSoundFinish:function(e){e.sound===this.getLastSound()&&(e.playlist=this,this.trigger("pause finish",e),n(57).trigger("audio:pause audio:finish",e))},onSoundTime:function(e){e.playlist=this,this.trigger("time",e)},onSoundSeeked:function(e){e.playlist=this,this.trigger("seeked",e)},getPrevSound:function(){return this.soundsCollection.at(this._playOrder[this.currentSoundCursor-1])},getCurrentSound:function(){return this.soundsCollection.at(this._playOrder[this.currentSoundCursor])},getNextSound:function(){return this.soundsCollection.at(this._playOrder[this.currentSoundCursor+1])},getFirstSound:function(){return this.soundsCollection.at(this._playOrder[0])},getLastSound:function(){return this.soundsCollection.at(this._playOrder[this.soundsCollection.length-1])},findSound:function(e){return this.findSoundById(e.id)},findSoundById:function(e){return this.soundsCollection.get(e)},getSounds:function(){return this.soundsCollection.models},getSoundIndex:function(e){return this.soundsCollection.indexOf(e)},containsSound:function(e){return this.getSoundIndex(e)>-1},containsSoundId:function(e){return!!this.findSoundById(e)},isManagedByFeeds:function(){return!!this.get("managed_by_feeds")},getNumSounds:function(){return this.soundsCollection.length||this.get("track_count")||0},isGeoblocked:u,isMonetizable:u,isMonetizablePending:u,hasScheduledPrivacy:u,play:function(e){var t=this;if(e=e||{},e.audible&&e.audible.playlist&&e.userInitiated&&(this.setPlayOrder(this.getSoundIndex(e.audible)),this.getState("shuffling")?this.currentSoundCursor=0:this.setCurrentSound(e.audible)),this.soundsCollection.length){this._internalNavigation=!1;var n=this.getCurrentSound();n.createAudio()&&n.audio.play(e)}else this.lastFetchTime||(this._isPlayActionQueued=!0,this.fetch().done(function(){t._isPlayActionQueued&&(t._isPlayActionQueued=!1,t.play(e))}))},pause:function(e){if(this._isPlayActionQueued=!1,this.soundsCollection&&this.soundsCollection.length){this._internalNavigation=!1;var t=this.getCurrentSound().audio;t&&t.pause(e)}},rewind:function(){this.currentSoundCursor=0},setCurrentSound:function(e){e&&(this.currentSoundCursor=this._playOrder.indexOf(this.getSoundIndex(e)))},hasDataForPlay:function(){return this.attributes.hasOwnProperty("tracks")},isNowPlaying:function(){return this.getSoundIndex(n(63).getCurrentSound())>-1},isBuffering:function(){return this.soundsCollection.some(f("isBuffering"))},isPlaying:function(){return this.soundsCollection.some(f("isPlaying"))},isProcessing:function(){return this.soundsCollection.some(f("isProcessing"))},isPlayable:function(){return!this.get("tracks")||this.soundsCollection.some(f("isPlayable"))},isAlbum:function(){return!!this.get("is_album")},setPlayOrder:function(e){var t=n(3).range(this.soundsCollection.length);this.getState("shuffling")&&(t=n(3).shuffle(t),"number"==typeof e&&(t.splice(t.indexOf(e),1),t.unshift(e))),this._playOrder=t},parse:function(e,t){return e=n(66).prototype.parse.apply(this,arguments),t=t||{},t.isSavingOrder&&(e.tracks||e.track_count)&&(delete e.tracks,delete e.track_count),e.secret_token&&e.tracks&&e.tracks.forEach(function(t){"public"===t.sharing||t.secret_token||(t.secret_token=e.secret_token)}),e},extractSecretToken:function(e){return n(65).parse(e.uri).query.secret_token},duration:function(){return this.get("duration")},removeSound:function(e){if(e=this.findSound(e)){var t=this.getSoundIndex(e),n=this.get("tracks").slice();return this.currentSoundCursor>t&&--this.currentSoundCursor,e.isPlaying()&&e.pause(),this.toggleListeners(e,!1),n.splice(t,1),this.soundsCollection.remove(e),s.call(this),this.set("tracks",n),e.playlist=null,e.release(),!0}return!1},addSound:function(e){var t,i,r;return this.findSound(e)?!1:(t=n(3).defaults({resource_id:{playlist_id:this.id,sound_id:e.id}},e.attributes),i=new(n(67))(t,{suppressGlobalEvents:!0}),i.playlist=this,i.originalSound=e,this.addSubmodel(e),this.toggleListeners(i,!0),r=this.get("tracks"),r||(this.set("tracks",[],{silent:!0}),r=this.get("tracks")),this._playOrder.push(this.soundsCollection.length),r.push(i.attributes),this.soundsCollection.add(i),s.call(this,{silent:!0}),this.forceChange("tracks"),!0)},getCurrentOrder:function(){return this.soundsCollection.pluck("id")},reorder:function(e){var t=this.soundsCollection,n=this.getCurrentSound(),i=n&&n.id;t.sort({silent:!0,comparator:function(t){return e.indexOf(t.id)}}),this.currentSoundCursor=Math.max(0,e.indexOf(i)),this.set({tracks:this.soundsCollection.toJSON(),track_count:this.soundsCollection.length})},hasCapacity:function(e){return n(3).union(this.soundsCollection.pluck("id"),e).length<=d},saveOrder:function(e){var t=this,i=this.soundsCollection.pluck("id"),r={playlist:{tracks:i}};return n(22).Model.prototype.save.call(this,{},n(3).assign({url:this.saveUrl(),data:JSON.stringify(r),contentType:"application/json",isSavingOrder:!0},e)).done(function(){n(57).broadcast({excludeThis:!0},c,{id:t.id,trackIds:i})})},getAttributesToBeSaved:function(){var e=n(66).prototype.getAttributesToBeSaved.call(this);return e.tracks&&(e.tracks=n(3).pluck(e.tracks,"id")),e},resetOrder:function(){var e=this;return this.fetch().done(function(){e.soundsCollection.each(function(e){e.playlist=null,e.release()}),e.soundsCollection.reset([],{silent:!0}),e.prepareSounds()})},hasDifferentCreators:function(){var e,t=this.get("user_id"),n=!1;return e=!this.soundsCollection.every(function(e){var i=e.get("user_id");return null==i?(n=!0,!0):i===t}),e||(n?null:e)},hasVisuals:function(){return!1}},{onCleanup:function(e){e.soundsCollection.each(function(e){e.playlist=null,e.release()}),e.soundsCollection.off(),delete e.soundsCollection,n(66).onCleanup(e)},resolve:function(e,t,i){return n(66)._resolve(this,[e,"sets",t,i],function(n){var i=n.get("user");return i&&n.get("permalink")===t&&i.permalink===e})}}),n(3).memoize(function(e){return function(t){return t[e]()}}))},99:function(e,t,n){"use strict";e.exports=function(e){return new(n(20).SafeString)(n(554).getAccessibleMarkup(e.hash))}},106:function(e,t,n){"use strict";var i=1/0;e.exports=n(66).extend(n(465),{resource_type:"comment",urnPrefix:"soundcloud:comments",parse:function(e){return null===e.timestamp&&(e.timestamp=i),e},submodelMap:{track:n(67),user:n(64)},baseUrl:function(){return this.getEndpointUrl("comment",{id:this.id})},saveUrl:function(){var e=this.getSound(),t=["tracks",e.id,"comments"].join("/"),i=e.get("secret_token");return i&&e.isPrivate()?n(65).modify(t,{query:{secret_token:i}}):t},destroyUrl:function(){return["tracks",this.getSoundId(),"comments",this.id].join("/")},getAttributesToBeSaved:function(){return this.pick("body","timestamp")},setReplyTo:function(e){this.set("replyTo",e.id),this.trigger("change:recipient",e.get("user").permalink)},hasDataForView:function(e){return n(66).prototype.hasDataForView.call(this,n(3).without(e,"id"))},getSound:function(){var e=this.getSoundId(),t=n(67).hashFn({id:e,resource_type:"sound"}),i=n(67).instances.get(t);return!i&&e&&(i=new(n(67))(this.get("track")||{id:e}),this.addSubmodel(i)),i},destroy:function(e){return this.isNew()||n(74).notify("comment",{object:this,target:this.getSoundId(),targetType:"sound",state:!1}),n(66).prototype.destroy.call(this,e)},getSoundId:function(){return this.get("track_id")||(this.get("track")||{}).id},reportAsSpam:function(){var e=this;n(23).callEndpoint("commentSpam",{id:this.id}).then(function(){e.trigger("destroy",e,e.collection)})}},{EMPTY_TIMESTAMP:i})},121:function(e,t,n){"use strict";var i=n(22).Model;e.exports={activities:new i({channel:"/me/activities/all/own",itemName:"activity",itemNamePlural:"activities",minPollInterval:12e4,maxPollInterval:192e4,baseUrl:function(){return n(55).get("api_v2_host")+"activities"}}),unreadConversations:new(i.extend({defaults:{baseUrl:function(){return n(316).baseUrl("unread")+"?force=1"},itemName:"conversation",itemNamePlural:"conversations",minPollInterval:0,maxPollInterval:0},initialize:function(){this.setDefaultPolling()},enableRealTimePolling:function(){this.set("minPollInterval",4e4),this.set("maxPollInterval",18e4),this.trigger("pollIntervalChange")},setDefaultPolling:function(){this.set("minPollInterval",3e5),this.set("maxPollInterval",192e4),this.trigger("pollIntervalChange")}})),conversations:new i({baseUrl:n(316).baseUrl,itemName:"conversation",itemNamePlural:"conversations",minPollInterval:1e3,maxPollInterval:3e4})}},124:function(e,t,n){"use strict";var i=e.exports=n(66).extend({url:null,lastFetchTime:1,initialize:function(e){e=e||{},this.id||(e.id=this.id=this.cid,i.instances.set(this.id,this)),this.fatal=!!e.fatal,n(66).prototype.initialize.apply(this,arguments)}},{fromSpamWarning:function(e){try{var t=function(){var t=JSON.parse(e.responseText).errors[0];if(!["reason_phrase","warning_level"].every(function(e){return t[e]}))return{v:null};var n=t.reason_phrase;return{v:new i({xhr:e,error:t,message:n})}}();if("object"==typeof t)return t.v}catch(n){return null}},raise:function(e,t){var r=new i(e);if(r.release(),t=t||{},t.hard)throw r;n(57).trigger("exception",r)},ajaxFatal:function(e){return function(t,r){"abort"!==r&&i.raise(n(3).assign(e,{xhr:t,fatal:!0}))}},ajaxNonFatal:function(e){return function(t,n){"abort"!==n&&i.raise({message:e,xhr:t,fatal:!1})}}})},125:function(e,t,n){"use strict";var i="track",r="artist",o={ARTIST:r,TRACK:i},s=n(991).withOptions({batchEndpoint:"stationBatch",paramName:"urns"});e.exports=n(66).extend(s,n(266).withOptions({read:"artwork_url"}),n(267).withOptions({attr:"title"}),{resource_type:"station",baseUrl:function(){return this.getEndpointUrl("station",{urn:this.id})},getUrn:function(){return this.id},getImageResourceInfo:function(){var e=n(94).getAsAttributes(this.id),t=e.id;switch(this.get("type")){case i:return{Model:n(67),args:{id:t}};case r:return{Model:n(64),args:{id:t}};default:return null}}},{types:o,resolve:function(e,t){var i=e+"/"+t;return n(66)._resolve(this,["stations",e,t],function(e){return e.get("permalink")===i})},getStationPageUrl:function(e){var t="user"===e.resource_type?"artist":"track";return"/stations/"+t+e.getPermalink()}})},144:function(e,t,n){"use strict";var i={buttonText:n(51).t("I need help"),buttonLink:"http://help.soundcloud.com"},r={buttonText:n(51).t("Get latest status"),buttonLink:"http://status.soundcloud.com"};e.exports={UNKNOWN:n(3).assign({title:n(51).t("Something doesnt sound right."),message:n(51).t("A report has been sent to our tech team,<br> and theyre looking into the problem.<br>Please check back in a bit.")},r),PAGE_NOT_FOUND:n(3).assign({title:n(51).t("We cant find that page.")},i),SOUND_NOT_FOUND:n(3).assign({title:n(51).t("We cant find that track."),message:n(51).t("Did you try to access a private track while not being signed in?<br>Maybe the track has been removed.")},i),PLAYLIST_NOT_FOUND:n(3).assign({title:n(51).t("We cant find that playlist."),message:n(51).t("Did you try to access a private playlist while not being signed in?<br>Maybe the playlist has been removed.")},i),STATION_NOT_FOUND:n(3).assign({title:n(51).t("We cant find that station.")},i),USER_NOT_FOUND:n(3).assign({title:n(51).t("We cant find that user.")},i),USER_INFO_NOT_LOADED:n(3).assign({title:n(51).t("Were unable to load your profile information at the moment.")},i)}},152:function(e,t,n){"use strict";e.exports=n(73).extend(n(123),{defaults:{type:null,userId:null},setup:function(e){e.resource_id&&!e.userId&&(e.userId=e.resource_id)},getSourceInfo:function(){return{type:"user-"+this.options.type,resourceId:this.options.userId,resourceType:"user"}}},{hashFn:function(e,t){return t&&(t.userId||t.resource_id)||null}})},156:function(e,t){"use strict";e.exports=function(e,t,n){return("function"==typeof e?e():e)?t:n}},157:function(e,t){"use strict";e.exports={defaultKind:"top",defaultGenre:"all-music",defaultCountry:"all-countries",kinds:[{id:"top",urlPart:"top"},{id:"trending",urlPart:"new"}],genres:[{id:"all-music",category:"all",content:"music"},{id:"all-audio",category:"all",content:"audio"},{id:"alternativerock",category:"music",content:"music"},{id:"ambient",category:"music",content:"music"},{id:"classical",category:"music",content:"music"},{id:"country",category:"music",content:"music"},{id:"danceedm",category:"music",content:"music"},{id:"dancehall",category:"music",content:"music"},{id:"deephouse",category:"music",content:"music"},{id:"disco",category:"music",content:"music"},{id:"drumbass",category:"music",content:"music"},{id:"dubstep",category:"music",content:"music"},{id:"electronic",category:"music",content:"music"},{id:"folksingersongwriter",category:"music",content:"music"},{id:"hiphoprap",category:"music",content:"music"},{id:"house",category:"music",content:"music"},{id:"indie",category:"music",content:"music"},{id:"jazzblues",category:"music",content:"music"},{id:"latin",category:"music",content:"music"},{id:"metal",category:"music",content:"music"},{id:"piano",category:"music",content:"music"},{id:"pop",category:"music",content:"music"},{id:"rbsoul",category:"music",content:"music"},{id:"reggae",category:"music",content:"music"},{id:"reggaeton",category:"music",content:"music"},{id:"rock",category:"music",content:"music"},{id:"soundtrack",category:"music",content:"music"},{id:"techno",category:"music",content:"music"},{id:"trance",category:"music",content:"music"},{id:"trap",category:"music",content:"music"},{id:"triphop",category:"music",content:"music"},{id:"world",category:"music",content:"music"},{id:"audiobooks",category:"audio",content:"audio"},{id:"business",category:"audio",content:"audio"},{id:"comedy",category:"audio",content:"audio"},{id:"entertainment",category:"audio",content:"audio"},{id:"learning",category:"audio",content:"audio"},{id:"newspolitics",category:"audio",content:"audio"},{id:"religionspirituality",category:"audio",content:"audio"},{id:"science",category:"audio",content:"audio"},{id:"sports",category:"audio",content:"audio"},{id:"storytelling",category:"audio",content:"audio"},{id:"technology",category:"audio",content:"audio"}],countries:[{id:"all-countries"},{id:"AU"},{id:"CA"},{id:"FR"},{id:"GB"},{id:"DE"},{id:"IE"},{id:"NZ"},{id:"NL"},{id:"US"}]}},158:function(e,t){!function(){function t(){clearTimeout(L),E=T=A=P=C=D=M=R=N=L=B=void 0,F=[],V=!0,Y=!0,O=function(){throw new Error("EventGateway must be initialized")}}function n(){return Math.floor(1e6*Math.random())}function i(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function r(e,t){var n,r=i(e);for(n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);return r}function o(e){return e="object"==typeof e?e:{},e.context=e.context||{},e.context.scope=e.context.scope||[],e}function s(e){return e.replace(W,"v$&")}function a(e,t,n){var i=e[n];return"object"==typeof i?t[n]=Object.keys(w(i)).reduce(a.bind(null,i),{}):t[n]=""+i,t}function l(e,t){var n=w(t);return"0.0.0"===e?Object.keys(n).reduce(a.bind(null,n),{}):n}function u(e,t,n){B("post",c(e),e,n,function(n){n&&t&&setTimeout(function(){u(e,!1,!1)},z)})}function c(e){return M+(e instanceof Array?"/v1/events":"/v1/event")}function d(){function e(e){e.onload=e.onerror=null}function t(t,n){e(t),n()}function n(t,n){e(t),/^4/.test(t.status)||n(t.status)}var i=!!(window&&window.navigator&&window.navigator.sendBeacon);return function(e,r,o,s,a){var l=JSON.stringify(o);if(s&&i)window.navigator.sendBeacon(r,l);else{var u=new window.XMLHttpRequest;u.onload=t.bind(null,u,a),u.onerror=n.bind(null,u,a),u.open(e,r,!0),u.send(l)}}}function h(e){N||!Y?(F=F.concat(e),!L&&Y&&(L=setTimeout(p,N))):u(e,!0,!1)}function p(e){clearTimeout(L),L=null,F.length&&(u(F.slice(),!0,!!e),F.length=0)}function f(e,t,n){var i=Date.now();x(n).then(function(n){var r,o;n=n||{},n.anonymous_id=E,n.client_id=C,n.ts=i,n.url=n.url||window.location.href,D&&(n.app_version=D);var a=[];if(P)for(r in P)a.push(P[r]);a.length&&(n.part_of_variants=a.join(",")),A&&(n.origin=A),R&&!n.user&&(n.user=R),I&&(n.platform=I),(o=document.referrer).length>0&&(n.referrer=o),h({event:e,version:s(t),payload:l(t,n)})})}function g(e,t){for(var n=0,i=t.length;i>n;n++)if(void 0===e[t[n]])return!0;return!1}function m(e){return e?_("users",e):E}function _(e,t){return["soundcloud",e,t].join(":")}function v(e,t){t&&(e.query_urn=t.queryUrn,e.query_position=t.position)}function y(){}function b(e){var t,n,i={};if(e)for(t=1;t<arguments.length;++t)n=arguments[t],n in e&&(i[n]=e[n]);return i}function w(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!=e[t]&&(n[t]=e[t]);return n}function x(e){return e&&"function"==typeof e.then?e:{then:function(t){return x(t(e))}}}function k(e){return function(){if(V)return e.apply(null,arguments);throw new Error("EventGateway: access to read/write cookies is blocked.")}}var S,E,T,A,P,C,D,M,R,I,O,L,N,F,B,U,j="sc_anonymous_id",H=3e4,$=1e3,z=3e4,q="https://telemetry.soundcloud.com",W=/^[^v]/,V=!0,Y=!0;t(),S={_anonymousId:null,initialize:function(e){if(!T){if(!e.id)throw new Error("EventGateway: You need to pass an id");A=e.origin,e.user&&(R=_("users",e.user)),void 0!==e.platform&&(I=e.platform),void 0!==e.useCookies&&(V=e.useCookies),void 0!==e.isEnabled&&(Y=e.isEnabled),U=e.eventVersions||{},E=this._anonymousId=S.getAnonymousId(),this.checkpointIntervals={},N=e.batchTimeout||!1,B=e.requestTransport||d(),C=e.id,D=e.appVersion||null,M=e.trackingUrl||q,T=!0,O=y}},deinitialize:function(){t()},toggle:function(e){Y=e,Y&&p()},loadQueue:h,saveQueue:function(){return F},useCookies:function(e){V=e,V&&E&&S.anonymousIdStore.set(E)},setUser:function(e){R=null==e?e:_("users",e)},setExperiments:function(e){P=e},getAnonymousId:function(){return!E&&V&&(E=S.anonymousIdStore.get()),E&&"undefined"!==E||(E=[n(),n(),n(),n()].join("-"),V&&S.anonymousIdStore.set(E)),E},logEvent:f,pageview:function(e,t,n,i){O(),f("pageview",U.pageview||"0.0.0",x(i).then(function(i){i=o(i);var s=m(e),a={user:s,level:t,chapter:n.join("::"),page_name:i.page_name,page_urn:i.page_urn,query_urn:i.query_urn,locale:i.locale};return r(a,i.params)}))},impression:function(e,t){O(),f("impression",U.impression||"1.16.0",x(t).then(function(e){e=o(e);var t=b(e,"impression_name","impression_category","impression_object","page_name","page_urn","ad_urn","monetized_object","monetization_type","promoted_by","external_media");return t.page_context=e.context.scope.join(":"),t}))},click:function(e,t,n,i){O(),f("click",U.click||"0.0.0",x(i).then(function(i){i=o(i);var s={ad_urn:i.ad_urn,campaign:i.context.campaign,chapter:n.join("::"),context:i.context.scope.join(":"),external_media:i.external_media,level:t,monetization_type:i.monetization_type,monetized_object:i.monetized_object,promoted_by:i.promoted_by,urn:i.urn,user:m(e),click_name:i.click_name,click_object:i.click_object,click_target:i.click_target,click_attributes:i.click_attributes,page_name:i.page_name,page_urn:i.page_urn};return v(s,i.context.attribution),r(s,i.params)}))},audio:function(e){O(),f("audio",U.audio||"1.16.0",x(e).then(function(e){var t,n=e.id,r="soundcloud:tracks:"+n,o=this.checkpointIntervals,s="number"==typeof e.checkpointInterval&&e.checkpointInterval>=$?e.checkpointInterval:null,a=b(e,"user","page_name","page_urn","source","in_playlist","playlist_position","reposted_by","track_length","protocol","action","trigger","pause_reason","ad_urn","monetization_type","promoted_by","policy","monetization_model");if(v(a,e.attribution),a.track=r,a.track_owner=_("users",e.trackOwnerId),a.playhead_position=e.playheadPosition,a.monetized_object=e.monetized_urn,clearInterval(o[n]),"play"===e.action){var l=Date.now()+e.track_length;t=i(a),t.action="checkpoint",o[n]=setInterval(function(){Date.now()<l?f("audio",U.audio||"1.16.0",t):clearInterval(o[n])},s||H)}else delete o[n];return a}.bind(this)))},audioPerformance:function(e){O(),f("audio_performance",U.audioPerformance||"0.0.0",x(e).then(function(e){if(g(e,["type","latency","protocol","host"])||void 0===e.playertype&&void 0===e.player_type)throw new Error("EventGateway  AudioPerformance : One or multiple mandatory arguments are missing");return{type:e.type,latency:e.latency,protocol:e.protocol,player_type:e.player_type||e.playertype,host:e.host,connection_type:e.connection_type,bitrate:e.bitrate,format:e.format,player_version:e.player_version,player_build_number:e.player_build_number}}))},audioError:function(e){O(),f("audio_error",U.audioError||"0.0.0",x(e).then(function(e){if(g(e,["error_code","protocol","player_type","host","url"]))throw new Error("EventGateway  AudioError : One or multiple mandatory arguments are missing");return{error_code:e.error_code,protocol:e.protocol,player_type:e.player_type,host:e.host,url:e.url,player_version:e.player_version,player_build_number:e.player_build_number,log_id:e.log_id}}))},appLoad:function(e,t){O(),f("appload",U.appLoad||"0.0.0",x(t).then(function(t){return{latency:t.latency,user:m(e),level:t.level}}))},statsView:function(e,t){f("stats_view",U.statsView||"0.0.0",x(t).then(function(t){var n=m(e);return r({user:n},t)}))},anonymousIdStore:{get:k(function(){var e=document.cookie.split(j+"=");return e.length>1&&e[1].split(";")[0]}),set:k(function(e){var t,n="."+window.location.hostname.replace(/.*\.(.+\..+)/,"$1"),i=new Date;i.setTime(i.getTime()+31536e7),t="; expires="+i.toGMTString(),document.cookie=j+"="+e+t+"; path=/; domain="+n})},flush:p},"undefined"!=typeof e&&e.exports?e.exports=S:(window.SC=window.SC||{},window.SC.EventGateway=S)}()},161:function(e,t,n){(function(t){"use strict";function i(e,t){t&&t.sent_at&&(this._lastMessageSentAt=new Date(t.sent_at),this.set("has_attachment",r.call(this)))}function r(){var e=this.get("last_message");return e?!!e.content.match(n(174).scLinksRegexGlobal):!1}var o=n(55).get("systemUserId");e.exports=n(66).extend({resource_type:"conversation",saveWithWrapper:!1,_lastMessageSentAt:null,submodelMap:{users:n(64)},baseUrl:function(){return n(316).baseUrlWithId(this.id)},setup:function(){this.listenTo(this,"change:last_message",i)},parse:function(e){var t=n(3).find(e.users,function(e){return"system"===e.id});return t&&(t.id=o),n(66).prototype.parse.apply(this,arguments)},getRecipient:function(){var e,t=n(55).get("me").id;return e=n(3).find(this.get("users"),function(e){return t!==e.id}),e||this.get("users")[0]},fetch:function(){var e=this;return n(66).prototype.fetch.apply(this,arguments).fail(function(){e.trigger("error")})},isFromSoundCloud:function(){return this.getRecipient().id===o},isFromMissingUser:function(){return"missing_user"===this.getRecipient().kind},setRead:function(e){this.set("read",e)},markAsRead:function(){var e=this.toggleReadState(!0);return n(57).trigger("conversation:read",this.id),e},markAsUnread:function(){var e=this.toggleReadState(!1);return n(57).trigger("conversation:unread",this.id),e},toggleReadState:function(e){var t,i=this,r=null!=e?e:!this.get("read");return this.set("read",r),this._saveDeferred||(this._saveDeferred=t=n(56).defer().always(function(){i._saveDeferred=null}).done(function(){i.get("read")!==r&&i.toggleReadState(i.get("read"))}),this.save({read:r},{dataType:"text"}).done(function(){window.setTimeout(t.resolve,1e3)}).fail(function(){window.setTimeout(t.reject,1e3)})),this._saveDeferred},getUuid:function(){var e=this.get("last_message");return n(600).hashFn(e)},infoForBadge:function(){var e=this.get("last_message");return{from:this.getRecipient(),isFromSoundCloud:this.isFromSoundCloud(),content:e.content,sentAt:e.sent_at,id:this.id}},lastMessageSentAt:function(){return this._lastMessageSentAt||i.call(this,null,this.get("last_message")),this._lastMessageSentAt},
destroyAndReport:function(e){var i=this;e?t.ajax({url:this.baseUrl()+"/spam",type:"PUT",success:function(){i.trigger("destroy",i)}}):n(74).destroy(this)}})}).call(t,n(1))},180:function(e,t,n){"use strict";e.exports=function(e){return new(n(20).SafeString)(n(976).render(e.hash))}},181:function(e,t,n){"use strict";function i(e,t){var n=e.previousAttributes().username,i=/^user\d+$/;i.test(n)&&this.set("permalink",o(t))}function r(){var e=this.getAttributesFromModel();this.set(e),this.unsetImageFile({force:!0}),this.markFieldsClean()}function o(e){return e.replace(/^[_-]/,"").replace(/[_-]$/,"").replace(/([_-]){2,}/g,"$1").replace(/[^a-z0-9_-]/g,"")}e.exports=n(80).extend(n(266).withOptions({read:"avatar_url"}),n(267).withOptions({attr:"username"}),n(207),{resource_type:"profile-settings",_user:null,_webProfileForms:null,fields:{username:{defaultValue:""},permalink:{defaultValue:""},description:{defaultValue:""},avatar_url:{defaultValue:null},first_name:{defaultValue:""},last_name:{defaultValue:""},city:{defaultValue:""},country_code:{defaultValue:""}},constraints:{username:[[n(70),{message:n(51).t("Enter your display name. You can change it later.")}],[n(108),{maxLength:50,message:n(51).t("Enter a display name that is up to [[maxLength]] characters.")}]],permalink:[[n(70),{message:n(51).t("Enter a profile URL.")}],[n(1342),{getResource:function(){return n(55).get("me")}}]],description:[[n(108),{maxLength:4e3,message:n(51).t("Enter a description that is up to [[maxLength]] characters.")}]]},actions:{"default":"save",save:function(){var e=this,t=n(56).defer();return this.validate().done(function(i){i?e.saveEdits().done(function(){e.trigger("saved"),n(57).trigger("profile:saved"),t.resolve(),e.markFieldsClean()}).fail(t.reject):t.reject()}),t},cancel:function(){this.cancelEdits()}},buttons:{save:{label:n(51).t("Save changes"),pendingLabel:n(51).t("Saving"),action:"save"},cancel:{label:n(51).t("Cancel"),action:"cancel"}},setup:function(){this._user=n(55).get("me"),this._webProfileForms=new(n(948))(null,{userId:this._user.id}),this.listenTo(this._webProfileForms,"form:dirty",this.enableAction).listenTo(this._webProfileForms,"form:clean",this.disableAction).listenTo(this,"imageDataChanged",this.markFieldsDirty.bind(this,"avatar_url")),r.call(this),this.listenTo(this,"change:username",i)},getUser:function(){return this._user},getWebProfileForms:function(){return this._webProfileForms},cancelEdits:function(){this.unsetImageFile(),r.call(this),this.trigger("canceled"),this.getWebProfileForms().fetch()},isDirty:function(){var e=n(80).prototype.isDirty.apply(this,arguments);return e||this.getWebProfileForms().some(function(e){return e.isDirty()},this)},markFieldsClean:function(){n(80).prototype.markFieldsClean.apply(this,arguments),this.getWebProfileForms().invoke("markFieldsClean")},saveEdits:function(){var e=this,t=this.getUser(),i=this.getWebProfileForms(),r=this.getAttributesToBeSaved(),o=[];t.set(r),o.push(i.saveEdits()),o.push(t.save(r));var s=this.getImageFileInfo();return s.file&&(t.setImageFile(s.file,s.source),t.once("imageTranscodingDone",function(t){e.unsetImageFile({silent:!0}),e.set("avatar_url",t.avatar_url)}),o.push(t.uploadImage())),n(56).all(o).done(i.fetch.bind(i))},getAttributesToBeSaved:function(){return n(3).pick(this.attributes,"city","country_code","first_name","last_name","description","permalink","username")},getAttributesFromModel:function(){var e=this.getUser(),t=n(3).pick(e.attributes,"avatar_url","city","first_name","last_name","description","permalink","username");return t.country_code=e.getCountryCode(),t}},{hashFn:function(){return 1},onCleanup:function(e){e._webProfileForms.release()}})},189:function(e,t,n){"use strict";function i(e,t,i,r){return n(51).tp(t,i,e,r.hash,{comment:r.hash._comment,context:r.hash._context})}function r(e,t){return n(51).tp(n(556).cleanBlockText(t.fn()),n(556).cleanBlockText(t.inverse()),e,t.hash,{comment:t.hash._comment,context:t.hash._context})}e.exports=function(){var e=arguments.length;if(4===e)return i.apply(null,arguments);if(2===e)return r.apply(null,arguments);throw new Error("Invalid signature to tp helper, expected 4 or 2 arguments, got: "+e)}},190:function(e,t,n){"use strict";var i=n(444).withDefaults(n(505)["default"]);e.exports=function(e,t){return(void 0===t.hash.escapeExpression||t.hash.escapeExpression)&&(e=n(20).Utils.escapeExpression(e)),new(n(20).SafeString)(i(e,t.hash))}},191:function(e,t,n){!function(t,i){e.exports=i(n(215),function(){try{return n(529)}catch(e){}}(),function(){try{return n(339)}catch(e){}}(),n(530))}(this,function(e,t,n,i){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=29)}([function(t,n){t.exports=e},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e){function t(t,n){void 0===n&&(n="API error.");var i=e.call(this,n)||this;return i.statusCode=t,i}return i(t,e),t.prototype.getCode=function(){return"SCAUDIO.API_ERROR"},t.prototype.getStatusCode=function(){return this.statusCode},t}(r.errors.PlayerFatalError);t.ApiError=o},function(e,t,n){"use strict";function i(e){return new o({startPos:0,endPos:e,startLevel:0,endLevel:1,fromEnd:!1})}function r(e){return new o({startPos:e,endPos:0,startLevel:1,endLevel:0,fromEnd:!0})}Object.defineProperty(t,"__esModule",{value:!0}),t.buildFadeIn=i,t.buildFadeOut=r;var o=function(){function e(e){var t=e.startPos,n=e.endPos,i=e.startLevel,r=e.endLevel,o=e.fromEnd,s=void 0===o?!1:o;if(0>t)throw new Error("startPos invalid.");if(0>n||!s&&t>n||s&&n>t)throw new Error("endPos invalid.");if(0>i||i>1)throw new Error("startLevel invalid.");if(0>r||r>1)throw new Error("endLevel invalid.");this._startPos=t,this._endPos=n,this._startLevel=i,this._endLevel=r,this._fromEnd=s}return e.prototype.calculate=function(e,t){var n=this._fromEnd?t-500-this._startPos:this._startPos,i=this._fromEnd?t-500-this._endPos:this._endPos;if(n>e)return{level:this._startLevel,nextCalculatePosition:n-e};if(i>=e){var r=(e-n)/(i-n),o=Math.cos(r*Math.PI)/-2+.5,s=this._startLevel+(this._endLevel-this._startLevel)*o;return{level:s,nextCalculatePosition:e}}return{level:this._endLevel,nextCalculatePosition:1/0}},e}();t.Fade=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e}();t.BaseStreamUrlRetriever=i},function(e,t,n){"use strict";function i(e,t,n){return Math.min(t,Math.max(e,n))}var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),s=n(2),a=o.eventDispatcher.EventDispatcher,l=o.helpers.Promise,u=o.helpers.deferred.buildDeferred,c=100,d=5e3,h=1500,p=function(e){function t(t,n){var i=e.call(this,t)||this;return i._onPreloadingEnabled=new a,i._onPreloadingDisabled=new a,i._onConnectionRequired=new a,i._onConnectionRecovered=new a,i._volumeAutomators=[],i._volumeScale=1,i._userVolume=1,i._timer=null,i._pauseFadeTimer=null,i._pauseFadeDeferred=null,i._pauseFade=null,i._connectionRequired=!1,i._connectionLossTimer=null,i.onPreloadingEnabled=i._onPreloadingEnabled.getHandle(),i.onPreloadingDisabled=i._onPreloadingDisabled.getHandle(),i.onConnectionRequired=i._onConnectionRequired.getHandle(),i.onConnectionRecovered=i._onConnectionRecovered.getHandle(),i._reloadStreamUrls=n,i._pausedMaxBufferLength=t.pausedMaxBufferLength,i._playingMaxBufferLength=t.playingMaxBufferLength,i._preloadingEnabled=t.preloadingEnabled,i.onPlayerProvided.subscribe(function(){return i._updateMaxBufferLength()}),i.onChange.subscribe(function(e){i.isDead()||((e.playing===!1||e.positionJumped||e.stalled||e.ended)&&i._completePauseFade(),i._pauseFade&&(e.actuallyPlaying===!1||e.ended)&&(i.removeVolumeAutomator(i._pauseFade),i._pauseFade=null),(e.positionJumped||void 0!==e.actuallyPlaying||void 0!==e.stalled)&&i._updateVolume(),void 0!==e.playing&&i._updateMaxBufferLength(),void 0!==e.loading&&i._calculateIfConnectionRequired())}),window.addEventListener("online",function(){return i._calculateIfConnectionRequired()}),window.addEventListener("offline",function(){return i._calculateIfConnectionRequired()}),i._calculateIfConnectionRequired(),i}return r(t,e),t.prototype.reload=function(){this._ensureNotDead(),this._reloadStreamUrls()},t.prototype.enablePreloading=function(){this.isDead()||this._preloadingEnabled||(this._preloadingEnabled=!0,this._updateMaxBufferLength(),this._onPreloadingEnabled.dispatch(void 0))},t.prototype.disablePreloading=function(){this.isDead()||this._preloadingEnabled&&(this._preloadingEnabled=!1,this._updateMaxBufferLength(),this._onPreloadingDisabled.dispatch(void 0))},t.prototype.isPreloadingEnabled=function(){return this._preloadingEnabled},t.prototype.pauseAfterFade=function(e){var t=this;if(this._ensureNotDead(),this._pauseFadeDeferred)return this._pauseFadeDeferred.promise;if(!this.isPlaying()||!this.isActuallyPlaying())return l.resolve(this.pause());var n=u();this._pauseFadeDeferred=n;var i=this.getPosition();if(this._pauseFade)throw new Error("Fade should not already be assigned.");return this._pauseFade=new s.Fade({startPos:i,endPos:i+e,startLevel:1,endLevel:0}),this.addVolumeAutomator(this._pauseFade),this._pauseFadeTimer=window.setTimeout(function(){t._pauseFadeDeferred=null,n.resolve(t.pause())},e+50),n.promise},t.prototype.isConnectionRequired=function(){return this._connectionRequired},t.prototype.getVolume=function(){return this._userVolume},t.prototype.addVolumeAutomator=function(e){var t=this._volumeAutomators.indexOf(e);0>t&&(this._volumeAutomators.push(e),this._updateVolume())},t.prototype.removeVolumeAutomator=function(e){var t=this._volumeAutomators.indexOf(e);t>=0&&(this._volumeAutomators.splice(t,1),this._updateVolume())},t.prototype._setVolume=function(e){this._userVolume=e,this._calculateAndSetVolume()},t.prototype._kill=function(){this._timer&&window.clearTimeout(this._timer),null!==this._connectionLossTimer&&window.clearTimeout(this._connectionLossTimer),this._abortPauseFade(),e.prototype._kill.call(this)},t.prototype._calculateIfConnectionRequired=function(){var e=this,t=this.isLoading()&&"navigator"in window&&!window.navigator.onLine;t?null===this._connectionLossTimer&&(this._connectionLossTimer=window.setTimeout(function(){e._connectionLossTimer=null,e._connectionRequired=!0,e._onConnectionRequired.dispatch(void 0)},h)):this._connectionRequired?(this._connectionRequired=!1,this._onConnectionRecovered.dispatch(void 0)):null!==this._connectionLossTimer&&(window.clearTimeout(this._connectionLossTimer),this._connectionLossTimer=null)},t.prototype._completePauseFade=function(){if(this._pauseFadeDeferred){this._pauseFadeTimer&&window.clearTimeout(this._pauseFadeTimer);var e=this._pauseFadeDeferred;this._pauseFadeDeferred=null,e.resolve(this.pause())}},t.prototype._abortPauseFade=function(){this._pauseFadeTimer&&(window.clearTimeout(this._pauseFadeTimer),this._pauseFadeTimer=null),this._pauseFadeDeferred&&(this._pauseFadeDeferred.reject(new Error("Player was killed.")),this._pauseFadeDeferred=null)},t.prototype._updateVolume=function(){var e=this;this._ensureNotDead(),this._timer&&(window.clearTimeout(this._timer),this._timer=null);var t=this.getDuration();if(null!==t){var n=this._volumeAutomators,r=this.getPosition(),o=1/0,s=1;n.forEach(function(e){var n=e.calculate(r,t),a=n.nextCalculatePosition,l=n.level;s*=i(0,1,l),o>a&&(o=a)}),this._volumeScale!==s&&(this._volumeScale=s,this._calculateAndSetVolume()),1/0>o&&this.isActuallyPlaying()&&!this.isStalled()&&(this._timer=window.setTimeout(function(){e._timer=null,e._updateVolume()},i(c,d,o-this.getPosition())))}},t.prototype._calculateAndSetVolume=function(){e.prototype._setVolume.call(this,this._userVolume*this._volumeScale)},t.prototype._updateMaxBufferLength=function(){var e=this.getPlayer(),t=e&&e.getBufferController();t&&(this.isPlaying()?t.setMaxBufferLength(this._playingMaxBufferLength):t.setMaxBufferLength(this._preloadingEnabled?this._pausedMaxBufferLength:0))},t}(o.ProxyPlayer);t.Player=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.statusCode=e}return e.prototype.getStatusCode=function(){return this.statusCode},e}();t.RequestError=i},function(e,t,n){"use strict";function i(e){return e.match(a)[0]}function r(e,t){if(t instanceof e.errors.RetrievalError){var n=t.getCause();if(n instanceof e.retrievalErrors.UnacceptableResponseStatusCodeError)return 403===n.getStatusCode()}return!1}function o(e,t,n,o,a,l,u,c,d){d=s.logger.prefixLogger(d,"HLSMSEPlayer Controller");var h=null,p=!1,f=i(c);n.onError.subscribe(function(t){if(!(t instanceof s.errors.NotSupportedError)){if(o){if(t instanceof s.errors.URLUpdateError)return d.error("URL refresh failed for some reason.",t),void a({retryPlayer:!0});if(r(e,t)){if(p)return;return d.info("Got a 403 status code. Peforming a URL refresh..."),p=!0,h=u.getUrl(),void h.whenComplete().then(function(e){if(e){var t=e.url,r=e.rendition;i(t)!==f||JSON.stringify(l)!==JSON.stringify(r)?(d.warn("Got a new URL but the rendition did not match the original."),a({retryPlayer:!1})):(p=!1,d.info("Got a new URL. Updating..."),n.getUrlController().updateUrl(t))}else d.warn("Could not get a new URL."),a({retryPlayer:!1})})["catch"](function(e){d.error("Unexpected error when trying to retrieve a new URL.",e),a({retryPlayer:!1})})}}d.error("Unexpected player error.",t),a({retryPlayer:!1})}}),t.providePlayer(n)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=/^[^\?#]*/;t.isErrorWhichShouldTriggerURLRefresh=r,t.takeControlHLSMSEPlayer=o},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getCode=function(){return"SCAUDIO.GEOBLOCKED_ERROR"},t}(r.ApiError);t.GeoBlockedError=o},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e){function t(){return e.call(this,"There was no format available that a player was able to play.")||this}return i(t,e),t.prototype.getCode=function(){return"SCAUDIO.NOT_SUPPORTED_ERROR"},t}(r.errors.PlayerFatalError);t.NotSupportedError=o},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=function(e){function t(){return e.call(this,null,"Request timed out too many times.")||this}return i(t,e),t.prototype.getCode=function(){return"SCAUDIO.TIMED_OUT_ERROR"},t}(r.ApiError);t.TimedOutError=o},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getCode=function(){return"SCAUDIO.UNAVAILABLE_ERROR"},t}(r.ApiError);t.UnavailableError=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encryptedHlsMp3={protocol:{name:"hls"},format:{mimeType:"application/x-mpegURL"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hlsMp3={protocol:{name:"hls"},format:{mimeType:"application/x-mpegURL"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.httpMp3={protocol:{name:"http"},format:{mimeType:"audio/mpeg"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(1),o=n(7),s=n(8),a=n(9),l=n(10);!function(e){e.ApiError=r.ApiError,e.GeoBlockedError=o.GeoBlockedError,e.NotSupportedError=s.NotSupportedError,e.TimedOutError=a.TimedOutError,e.UnavailableError=l.UnavailableError}(i=t.errors||(t.errors={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(13),o=n(12),s=n(11);!function(e){e.httpMp3=r.httpMp3,e.hlsMp3=o.hlsMp3,e.encryptedHlsMp3=s.encryptedHlsMp3}(i=t.renditions||(t.renditions={}))},function(e,t,n){"use strict";function i(){return G?G:(G=document.createElement("audio"),r(G),G)}function r(e){e.load()}function o(e){return e===V||e===Y}function s(e){return e.constructor===Y}function a(e){return e.constructor===V}function l(e){var t=e.split("//",2);return 1===t.length?t[0].split("/",1)[0]:t[1]?t[1].split("/",1)[0]:""}function u(e,t){var n=a(e)?"MaestroHTML5":s(e)?"MaestroHLSMSE":null;if(!n)throw new Error("Unknown player.");var i=t.rendition,r=function(){switch(i){case R.httpMp3:return{protocol:"http",format:"mp3"};case I.hlsMp3:return{protocol:"hls",format:"mp3"};case O.encryptedHlsMp3:return{protocol:"encrypted-hls",format:"mp3"};default:throw new Error("Unknown rendition ID.")}}(),o=r.protocol,u=r.format;return{name:n,bitrate:t.bitrate,protocol:o,host:l(t.url),url:t.url,format:u}}function c(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",n=0;20>n;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}function d(e){if("number"!=typeof e)throw new Error("level must be a number.");if(0>e||e>1)throw new Error("Invalid volume level.");Z=e,Q.forEach(function(t){return t.setVolume(e)})}function h(){return Z}function p(e){if("boolean"!=typeof e)throw new Error("muteEnabled must be a boolean.");ee=e,Q.forEach(function(t){return t.setMuted(e)})}function f(){return ee}function g(){i()}function m(e){function t(){return we&&xe?u(we,xe):null}function n(){if(Ee&&window.clearTimeout(Ee),_e.debug("Performing retrieve."),ke)throw new Error("Player job already running. Only one instance of the job is allowed at once.");if(ye.isDead())throw new Error("Proxy is dead.");var e=new U(function(){function e(){function t(e){if(e!==_.helpers.abortableJob.abortedError)if(e instanceof S.RequestError){var t=e.getStatusCode();switch(t){case 401:ye._triggerError(new E.GeoBlockedError(t,"Geoblocked (logged out)."));break;case 403:ye._triggerError(new E.GeoBlockedError(t,"Geoblocked (logged in)."));break;case 404:ye._triggerError(new A.UnavailableError(t,"Track unavailable."));break;case null:throw new Error("Status code should not be null.");default:ye._triggerError(new T.ApiError(t))}}else e===_.helpers.retry.noMoreAttemptsError?ye._triggerError(new C.TimedOutError):(_e.error("Unexpected error.",e),ye._triggerError(new _.errors.PlayerFatalError("An unexpected error occurred.",e)))}a=r(),a.onCompletion(function(n){if(!n)return _e.error("There were no stream formats that were supported."),void ye._triggerError(new P.NotSupportedError);try{xe=n;var r=n.url,o=n.rendition,a=new _.Descriptor(r,o.protocol,o.format),l=s(be,a,n);l?i(l):(_e.debug("Excluding rendition.",n.rendition),h.excludeRendition(n.rendition),be=[],e())}catch(u){t(u)}}),a.onError(t)}function i(e){function i(e){if(!r&&!o&&(r=!0,_e.debug("Player releasing control.",e),t.abort(e),!ye.isDead()))if(e&&e.retryPlayer){var i=Te.getDelay();i>0?(_e.debug("Waiting "+i+" ms."),Ee=window.setTimeout(function(){return n()},i)):n()}else n()}var r=!1;we=e(i),Ae.addPlayer(we),we.onStateChange.subscribe(function(e){e===_.State.DEAD&&(_e.debug("Player died."),i())})}var o=!1,a=null;return e(),{result:_.helpers.deferred.buildDeferred().promise,abort:function(e){o=!0,_e.info("Player job aborted.",e),ke=null,a&&a.abort(),we&&(e&&e.retryPlayer?_e.debug("Player might be used again for current rendition."):(_e.debug("Player will not be used again for current rendition."),be.push(we.constructor)),ye.getPlayer()&&ye.removePlayer(),we.kill(),we=null,xe=null)}}}),t=e.run();return ke=t}function r(){return H(function(){return new U(function(){var e=h.getUrl();_e.debug("Retrieving a URL...");var t=e.whenComplete().then(function(e){return _e.debug("Retrieved URL.",e),{result:e,success:!0}})["catch"](function(e){if(e!==_.helpers.abortableJob.abortedError){var t=e.getStatusCode();if(e instanceof S.RequestError&&(null===t||0===t))return null===t?_e.warn("Timed out when retrieving URL. Will retry."):_e.warn("Network error when retrieving URL. Will retry."),{success:!1};throw _e.error("Error retrieving URL.",e),e}});return{result:t,abort:function(){return e.abort()}}})},de)}function s(e,t,n){return Y&&d.indexOf(Y)>=0&&e.indexOf(Y)<0?(_e.debug("HLSMSEPlayer found.",W.version),function(e){var i=new Y(t,{name:fe,playlistLoader:v.stringLoader,segmentLoader:v.arrayBufferLoader,keyLoader:v.arrayBufferLoader,expectedSegmentFormat:{mimeType:"audio/mpeg"},logger:re});return l(i,function(){return e()}),M.takeControlHLSMSEPlayer(W,ye,i,pe,e,n.rendition,h,n.url,_e),i}):V&&d.indexOf(V)>=0&&(!pe||"hls"!==t.getProtocol().name)&&e.indexOf(V)<0?(_e.debug("HTML5Player found.",z.version),function(e){var i=new V(t,{name:fe,logger:re});return l(i,function(){return e()}),D.takeControlHTML5Player(z,ye,i,pe,e,n.timeRetrieved,_e),i}):null}function a(){ke?(_e.debug("Reloading stream URLs..."),_e.debug("Aborting player job that is in progress."),ke.abort(),be=[],n()):_e.debug("Reload requested, but not reloading as there is nothing to reload.")}function l(e,t){function n(){function n(){if(!e.getMediaElement()){K&&!K.isDead()&&(_e.info("Revoking audio element from a player."),K.isPlaying()&&_e.warn("The audio element is being revoked from a player which is playing. Only one player should be playing at once."),K.revokeMediaElement()),K=e,_e.info("Providing audio element to a different player.");var n=X={};e.provideMediaElement(i())["catch"](function(i){e.isDead()||X!==n||(_e.error("An unexpected error occurred when trying to provide the audio element to a player.",i),t())})}}e.revokeMediaElement(),e.onPlayIntent.subscribe(function(){e.isDead()||n()}),K||n()}e.isReady()?n():e.onReady.subscribe(n)}var d=e.playerClasses,h=e.streamUrlRetriever,p=e.duration,f=void 0===p?null:p,g=e.preloadingEnabled,m=void 0===g?!1:g,R=e.pausedMaxBufferLength,I=void 0===R?2e3:R,O=e.playingMaxBufferLength,j=void 0===O?9e4:O,q=e.maxMemoryCacheSize,G=void 0===q?1e9:q,te=e.fadeOutDuration,ne=void 0===te?0:te,ie=e.logger,re=void 0===ie?_.logger.noOpLogger:ie,oe=e.audioPerformanceReporter,se=e.audioReporter,ae=e.audioCheckpointInterval,le=void 0===ae?3e4:ae,ue=e.errorReporter,ce=e.urlProviderRetryDelayCalculator,de=void 0===ce?$():ce,he=e.streamUrlsExpire,pe=void 0===he?!0:he;if(!(h instanceof y.BaseStreamUrlRetriever))throw new Error("StreamUrlRetriever invalid.");if(null!==f&&("number"!=typeof f||0>f))throw new Error("duration invalid.");if("boolean"!=typeof m)throw new Error("preloadingEnabled invalid.");if(null!==I&&("number"!=typeof I||0>I))throw new Error("pausedMaxBufferLength invalid.");if(null!==j&&("number"!=typeof j||0>j))throw new Error("playingMaxBufferLength invalid.");if(null!==G&&("number"!=typeof G||0>G))throw new Error("maxMemoryCacheSize invalid.");if(null!==ne&&("number"!=typeof ne||0>ne))throw new Error("fadeOutDuration invalid.");if(null!==re&&"function"!=typeof re&&"object"!=typeof re)throw new Error("logger invalid.");if(void 0!==se&&"function"!=typeof se)throw new Error("audioReporter invalid.");if(null!==le&&("number"!=typeof le||0>le))throw new Error("audioCheckpointInterval invalid.");if(void 0!==oe&&"function"!=typeof oe)throw new Error("audioPerformanceReporter invalid.");if(void 0!==ue&&"function"!=typeof ue)throw new Error("errorReporter invalid.");if(void 0!==de&&"function"!=typeof de)throw new Error("retryDelayCalculator invalid.");var fe="SCAudio-"+ ++J,ge=h.getTrackId();null!==ge&&(fe+="-"+ge);var me=new N.LogCollector;re=_.logger.cloneLogger(me,re);var _e=_.logger.prefixLogger(re,fe),ve=c();_e.info("Building player...",{ua:navigator.userAgent,logId:ve});var ye=new k.Player({name:fe+"-Proxy",logger:re,mediaSessionEnabled:!0,pausedMaxBufferLength:I,playingMaxBufferLength:j,preloadingEnabled:m},a);Q.push(ye),ye.setVolume(Z),ye.setMuted(ee),ne>0&&ye.addVolumeAutomator(b.buildFadeOut(ne));var be=[],we=null,xe=null,ke=null,Se=null,Ee=null,Te=new L.DecayingExponentialDelayCalculator,Ae=new B.CacheManager(G,_e);if(oe&&(Se=new w.AudioPerformanceEventGenerator(ye,oe,_e,t,Y)),se&&new F.AudioEventGenerator(ye,se,le,_e),ue&&x.generateErrorEvents(ye,me,ve,ge,ue,_e,t,W||null,pe),ye.onStateChange.subscribe(function(e){e===_.State.DEAD&&(_e.info("Player killed."),Q.splice(Q.indexOf(ye),1),ke&&ke.abort(),Ee&&window.clearTimeout(Ee))}),ye.onPlayIntent.subscribe(function(){var e=d.some(function(e){return o(e)});e&&i()}),null!==f&&(_e.debug("Setting initial duration.",f),ye.setInitialDuration(f)),m)_e.debug("Preloading is enabled, so performing retrieve immediately."),n();else{_e.debug("Preloading is disabled, so deferring retrieve until either a play intent or preloading is enabled.");var Pe=function(){Ce.remove(),De.remove(),_e.debug("Preloading now enabled or received a play request. Peforming retrieve."),n()},Ce=ye.onPreloadingEnabled.subscribe(Pe),De=ye.onPlayIntent.subscribe(Pe)}return ye}Object.defineProperty(t,"__esModule",{value:!0});var _=n(0),v=n(28),y=n(3),b=n(2),w=n(19),x=n(23),k=n(4),S=n(5),E=n(7),T=n(1),A=n(10),P=n(8),C=n(9),D=n(21),M=n(6),R=n(13),I=n(12),O=n(11),L=n(22),N=n(24),F=n(18),B=n(20),U=_.helpers.abortableJob.AbortableJob,j=_.helpers.retry,H=j.retry,$=j.buildExponentialDelayCalculator,z=void 0;try{z=n(27)}catch(q){}var W=void 0;try{W=n(26)}catch(q){}var V=z?z.HTML5Player:null,Y=W?W.HLSMSEPlayer:null,G=null,K=null,X={},J=-1,Q=[],Z=1,ee=!1;t.setGlobalVolume=d,t.getGlobalVolume=h,t.setGlobalMuted=p,t.getGlobalMuted=f,t.activateAudioElement=g,t.buildPlayer=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(2);!function(e){e.Fade=r.Fade,e.buildFadeIn=r.buildFadeIn,e.buildFadeOut=r.buildFadeOut}(i=t.volumeAutomation||(t.volumeAutomation={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=1e3,o=function(){function e(e,t,n,o){this._checkpointTimer=null,this._logger=i.logger.prefixLogger(o,"AudioEventGenerator"),this._player=e,this._eventReporter=t,this._checkpointInterval=null!==n?Math.max(r,n):null,this._startReporting()}return e.prototype._startReporting=function(){var e=this,t=this._player;t.onChange.subscribe(function(n){var i=n.actuallyPlaying,r=n.ended;i===!0&&!t.isEnded()||r===!1&&t.isActuallyPlaying()?(null===e._checkpointInterval||e._checkpointTimer||(e._checkpointTimer=window.setInterval(function(){e._reportEvent("checkpoint")},e._checkpointInterval)),e._reportEvent("play")):(i===!1&&!t.isEnded()||r===!0&&t.isActuallyPlaying())&&(e._checkpointTimer&&(window.clearInterval(e._checkpointTimer),e._checkpointTimer=null),e._reportEvent("pause"))})},e.prototype._reportEvent=function(e){var t=this._player.getDuration();if(null===t)throw new Error("Duration should exist now.");var n={type:e,position:this._player.getPosition(),duration:t};this._logger.debug("Generated audio event.",n),this._eventReporter(n)},e}();t.AudioEventGenerator=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(25),o=function(){function e(e,t,n,r,o){this._logger=i.logger.prefixLogger(n,"AudioPerformanceEventGenerator"),this._player=e,this._eventReporter=t,this._getPlayerDetails=r,this._HLSMSEPlayer=o,this._measureGeneralEvents()}return e.prototype._measureGeneralEvents=function(){var e=this,t=this._player,n=new r.Timer,i=null,o=null;t.onPlayIntent.subscribe(function(){n.isComplete()||n.start()}),t.onPlay.subscribe(function(){n.isComplete()||(n.stop(),e._reportEvent("play",n.getTime()))}),t.onSeekIntent.subscribe(function(){t.isReady()&&(i=new r.Timer,i.start())}),t.onSeek.subscribe(function(){i&&(i.stop(),e._reportEvent("seek",i.getTime()))}),t.onLoadStart.subscribe(function(){n.isComplete()&&(o=new r.Timer,o.start())}),t.onLoadEnd.subscribe(function(){o&&(o.stop(),e._reportEvent("buffer",o.getTime()))})},e.prototype._reportEvent=function(e,t,n){var i=n||this._getPlayerDetails();if(!i)return void this._logger.warn("Cannot report event because there is no player.",e,t);var r={type:e,latency:t,protocol:i.protocol,playerType:i.name,host:i.host,bitrate:i.bitrate,format:i.format};this._logger.debug("Generated audio performance event.",r),this._eventReporter(r)},e}();t.AudioPerformanceEventGenerator=o},function(e,t,n){"use strict";function i(e,t){var n=e.getMemoryCacheController();n&&n.setMaxCacheSize(t)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=2e4,s=function(){function e(e,t){this._maxCacheSize=e,this._players=[],this._updateTimer=null,this._logger=r.logger.prefixLogger(t,"CacheManager"),this._logger.debug("Initialized with cache size "+e+" bytes.")}return e.prototype.addPlayer=function(e){var t=this;if(this._logger.debug("Adding player to cache manager."),e.isDead())return void this._logger.debug("Player was dead.");var n=this._players;e.onChange.subscribe(function(i){var r=i.playing,o=i.dead;o===!0?(t._logger.debug("Removing player that became dead."),n.splice(n.indexOf(e),1),t._update()):r===!0?(t._logger.debug("Updating because player started playing."),n.splice(n.indexOf(e),1),n.unshift(e),t._update()):r===!1&&(t._logger.debug("Updating because player became paused."),t._update())}),e.isPlaying()?n.unshift(e):n.push(e),this._update()},e.prototype._update=function(){var e=this;if(this._updateTimer&&(window.clearTimeout(this._updateTimer),this._updateTimer=null),0===this._players.length)return void this._logger.debug("There are no longer any players to manage.");var t=this._players.reduce(function(e,t){return t.isPlaying()?e.playingPlayers.push(t):e.pausedPlayers.push(t),e},{playingPlayers:[],pausedPlayers:[]}),n=t.playingPlayers,r=t.pausedPlayers,s=n.reduce(function(e,t){return e+(t.getMemoryCacheUsage()||0)},0),a=r.reduce(function(e,t){return e+(t.getMemoryCacheUsage()||0)},0);if(s>this._maxCacheSize){this._logger.debug("All playing players are using more than the max cache size. Cleaning...",s,this._maxCacheSize);var l=this._maxCacheSize/n.length;n.forEach(function(e){return i(e,l)}),r.forEach(function(e){return i(e,0)})}else s+a>this._maxCacheSize&&(this._logger.debug("The max cache size has been reached. Cleaning...",s+a,this._maxCacheSize),
r.reduce(function(t,n){return i(n,Math.max(0,e._maxCacheSize-t)),t+(n.getMemoryCacheUsage()||0)},s));this._updateTimer=window.setTimeout(function(){return e._update()},o)},e}();t.CacheManager=s},function(e,t,n){"use strict";function i(e,t,n,i,s,a,l){function u(){var e=n.getDuration(),t=c();if(null!==e&&null!==t){var i=e-n.getPosition();o()+i>t&&(l.info("Releasing control because stream URL would expire before reaching end."),s({retryPlayer:!0}))}}function c(){var e=n.getDuration();return null===e?null:a+e+105e3}function d(){var e=c();return null===e?!1:e<=o()}l=r.logger.prefixLogger(l,"HTML5Player Controller"),n.onError.subscribe(function(t){t instanceof r.errors.NotSupportedError||(t instanceof e.errors.NetworkError&&d()?(l.info("Releasing control as a network error occurred, and the URL has expired."),s({retryPlayer:!0})):(l.error("Unexpected player error.",t),s({retryPlayer:!1})))}),i&&(n.onPlayIntent.subscribe(function(){return u()}),n.onSeekIntent.subscribe(function(){return u()})),t.providePlayer(n)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.helpers.time.now;t.takeControlHTML5Player=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this._delayFactor=0,this._lastRequestTime=0}return e.prototype.getDelay=function(){var e=Date.now()-this._lastRequestTime;return this._lastRequestTime=Date.now(),this._delayFactor=Math.max(0,this._delayFactor-e/15e3),this._delayFactor+=1,Math.pow(2,this._delayFactor)},e}();t.DecayingExponentialDelayCalculator=i},function(e,t,n){"use strict";function i(e,t,n,i,s,a,l,u,c){function d(e){var r=l()||void 0,o={errorCode:e,log:t.getLog(),logId:n,trackId:i,protocol:r&&r.protocol,playerType:r?r.name:"MaestroUnknown",host:r&&r.host,bitrate:r&&r.bitrate,format:r&&r.format,url:r&&r.url};a.debug("Generated audio error event.",o),s(o)}a=r.logger.prefixLogger(a,"ErrorGenerator"),e.onChange.subscribe(function(e){var t=e.errors;t&&t.forEach(function(e){if(!(c&&u&&o.isErrorWhichShouldTriggerURLRefresh(u,e))){var t,n;n=e instanceof r.errors.ProxyProvidedPlayerFatalError?e.getProvidedPlayerFatalError():e,t=n.getCode(),n instanceof r.errors.NotSupportedError||d(t)}})})}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(6);t.generateErrorEvents=i},function(e,t,n){"use strict";function i(e){return e.map(function(e){try{return JSON.stringify(e)}catch(t){return"<unavailable>"}})}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){void 0===e&&(e=200),this._bufferSize=e,this._log=[]}return e.prototype.getLog=function(){return this._log},e.prototype.debug=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this._push({level:"debug",msg:e,data:i(t),time:Date.now()})},e.prototype.info=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this._push({level:"info",msg:e,data:i(t),time:Date.now()})},e.prototype.warn=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this._push({level:"warn",msg:e,data:i(t),time:Date.now()})},e.prototype.error=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this._push({level:"error",msg:e,data:i(t),time:Date.now()})},e.prototype._push=function(e){this._log.push(e)>this._bufferSize&&this._log.shift()},e}();t.LogCollector=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=i.helpers.time.now,o=function(){function e(){this._start=null,this._end=null}return e.prototype.start=function(){if(this.isComplete())throw new Error("Timer completed.");this._start=r()},e.prototype.isComplete=function(){return null!==this._end},e.prototype.stop=function(){if(null===this._start)throw new Error("Not started.");this._end=r()},e.prototype.getTime=function(){if(null===this._end)throw new Error("Not completed.");return this._end-this._start},e}();t.Timer=o},function(e,n){if("undefined"==typeof t){var i=new Error('Cannot find module "@sc/maestro-hls-mse-player"');throw i.code="MODULE_NOT_FOUND",i}e.exports=t},function(e,t){if("undefined"==typeof n){var i=new Error('Cannot find module "@sc/maestro-html5-player"');throw i.code="MODULE_NOT_FOUND",i}e.exports=n},function(e,t){e.exports=i},function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),t.version="9.1.0",t.buildNumber=196;var r=n(17);t.volumeAutomation=r.volumeAutomation;var o=n(3);t.BaseStreamUrlRetriever=o.BaseStreamUrlRetriever;var s=n(5);t.RequestError=s.RequestError;var a=n(4);t.Player=a.Player,i(n(14)),i(n(15)),i(n(16))}])})},204:function(e,t,n){"use strict";e.exports=function(e,t){return new(n(20).SafeString)(n(85).markup(e,t.hash))}},206:function(e,t,n){"use strict";function i(){var e=this.getAudible();n(57).trigger("playlist:saved",e),this.trigger("saved")}function r(e){this.set({errorMessage:this.getErrorMessageTemplate("save","playlist",this.extractErrorMessage(e))})}function o(e,t){return e.attrExists(t)?n(56).resolve(e):e.fetch({attrs:t}).then(n(3).constant(e))}function s(){this.setToModelAttributes(),this.get("trackList").reset(this._playlist.getSounds())}function a(){var e=this.requiredModelAttributes.map(function(e){return"change:"+e}).join();this.listenTo(this._playlist,e,function(){this.isDirty()||s.call(this)})}function l(e){var t=e.getSoundsCollectionClone(),i=e.getSounds();return n(3).assign(t,{getCurrentOrder:function(){return this.pluck("id")},reorder:function(e){this.sort({silent:!0,comparator:function(t){return e.indexOf(t.id)}})},resetOrder:function(){return this.reset(i.slice()),n(56).resolve()},saveOrder:n(3).noop}),n(465).applyTo(t),n(468).applyTo(t),t}e.exports=n(80).extend(n(207),n(982),n(986),n(267).withOptions({attr:"title"}),n(983),n(561),{_playlist:null,resource_type:"playlist-edit",requiredModelAttributes:[],actions:{"default":"save",save:function(){var e=this;return this.validate().then(function(t){return t?(e.set("editing",!1),e.saveEdits()):n(56).reject()})},cancel:function(){this.cancel()}},fields:{buyLink:{defaultValue:""},buyTitle:{defaultValue:"Buy"},labelName:{defaultValue:null},trackList:{defaultValue:null}},buttons:{save:{label:n(51).t("Save changes"),pendingLabel:n(51).t("Saving"),action:"save"},cancel:{label:n(51).t("Cancel"),action:"cancel"}},constraints:{title:[[n(70),{message:n(51).t("Enter a title.")}],[n(108),{maxLength:100,message:n(51).t("Enter a title that is up to [[maxLength]] characters.")}]],description:[[n(108),{maxLength:4e3,message:n(51).t("Enter a playlist description that is up to [[maxLength]] characters.")}]],tags:[[n(549)]],permalink:[[n(456),{type:"playlist",getResource:function(){return this.getAudible()}}],[n(70),{message:n(51).t("Enter a permalink.")}]],buyLink:[[n(313),{strict:!1}]],buyTitle:[[n(544)]],customGenre:[[n(108),{maxLength:100,message:n(51).t("Enter a custom genre that is up to [[maxLength]] characters.")}]]},constraintConditions:{buyTitle:{fields:[],check:function(){return n(55).get("me").getPerk("customBuyTitle")}}},setup:function(e,t){var i=this;this.on("imageDataChanged",this.markFieldsDirty.bind(this,"artwork_url")),this._playlist=new(n(88))({id:t.resource_id}),this.set("trackList",l(this._playlist)),o(this._playlist,this.requiredModelAttributes).then(function(){s.call(i),a.call(i)}),this.addSubmodel(this._playlist)},saveEdits:function(){var e=this.getAudible();if(e.set(this.getAttributesToBeSaved()),this.isDirty("trackList")){var t=e.getSounds(),o=this.get("trackList");t.length>o.length&&n(3).difference(t,o.models).forEach(e.removeSound,e),e.reorder(o.pluck("id"))}return e.save().then(this.saveAudibleImage.bind(this,e)).then(i.bind(this),r.bind(this)).done(this.trigger.bind(this,"saved"))},getAudible:function(){return this._playlist},getAttributesFromModel:function(){var e=this.getAudible();return{buyLink:e.get("purchase_url"),buyTitle:e.get("purchase_title"),labelName:e.get("label_name")}},getAttributesToBeSaved:function(){var e=this.get("buyLink"),t=this.get("buyTitle");return{purchase_url:e?n(65).normalize(e):null,purchase_title:t===this.getFieldMetadata("buyTitle").defaultValue?null:t,label_name:this.get("labelName")}},cancel:function(){s.call(this),this.trigger("canceled")},saveCleanup:function(e){this.markFieldsClean()}},{hashFn:function(e,t){return e.resource_id||t&&t.resource_id||e.id||null}})},213:function(e,t,n){"use strict";e.exports=function(e){return n(141).render(e,{useSIUnits:!0})}},215:function(e,t,n){!function(t,n){e.exports=n()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=84)}([function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getCode=function(){return"PLAYER_FATAL_ERROR"},t}(r.PlayerError);t.PlayerFatalError=o},function(e,t,n){"use strict";function i(){var e,t,n=new r.Promise(function(n,i){e=n,t=i});return{promise:n,resolve:e,reject:t}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(14);t.buildDeferred=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(12),r=function(){function e(){this._listeners=[],this.dispatch=this.dispatch.bind(this)}return e.prototype.subscribe=function(e){var t=this,n={fn:e,payloads:[]};return this._listeners.push(n),{remove:function(){return t.unsubscribe(e)},retrieve:function(){return t._dispatchListenerPayloads(n)}}},e.prototype.unsubscribe=function(e){var t=this._listeners;return this._listeners=t.filter(function(t){return t.fn!==e}),this._listeners.length!==t.length},e.prototype.dispatch=function(e,t){var n=this;void 0===t&&(t={});var r=void 0!==t.time?t.time:i.now(),o=this._listeners;o.forEach(function(t){return t.payloads.push({time:r,payload:e})});var s=!1;do s=!o.some(function(e){var t=e.fn,i=e.payloads,r=i.shift();return r?(n._callHandler(t,r),!0):!1});while(!s)},e.prototype.getHandle=function(){return{subscribe:this.subscribe.bind(this),unsubscribe:this.unsubscribe.bind(this)}},e.prototype._dispatchListenerPayloads=function(e){for(var t=e.fn,n=e.payloads;;){var i=n.shift();if(!i)break;this._callHandler(t,i)}},e.prototype._callHandler=function(e,t){try{e(t.payload,t.time)}catch(n){window.setTimeout(function(){throw n},0)}},e}();t.EventDispatcher=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){this._msg=e,this._cause=t}return e.prototype.getCode=function(){return"PLAYER_ERROR"},e.prototype.getMsg=function(){return this._msg},e.prototype.getCause=function(){return this._cause},e}();t.PlayerError=i},function(e,t,n){"use strict";function i(e,t){return{debug:function(n){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];return e.debug.apply(e,["["+t+"] "+n].concat(i))},error:function(n){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];return e.error.apply(e,["["+t+"] "+n].concat(i))},info:function(n){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];return e.info.apply(e,["["+t+"] "+n].concat(i))},warn:function(n){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];return e.warn.apply(e,["["+t+"] "+n].concat(i))}}}function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return{debug:function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return e.forEach(function(e){return e.debug.apply(e,[t].concat(n))})},error:function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return e.forEach(function(e){return e.error.apply(e,[t].concat(n))})},info:function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return e.forEach(function(e){return e.info.apply(e,[t].concat(n))})},warn:function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return e.forEach(function(e){return e.warn.apply(e,[t].concat(n))})}}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(30),s=o.isIE();t.noOpLogger={debug:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},error:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},info:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},warn:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]}},t.consoleLogger={debug:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];s?console.log(e,t):(i=console.debug||console.log).call.apply(i,[console,e].concat(t));var i},error:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];s?console.log(e,t):(i=console.error||console.log).call.apply(i,[console,e].concat(t));var i},info:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];s?console.log(e,t):(i=console.info||console.log).call.apply(i,[console,e].concat(t));var i},warn:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];s?console.log(e,t):(i=console.warn||console.log).call.apply(i,[console,e].concat(t));var i}},t.prefixLogger=i,t.cloneLogger=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i;!function(e){e[e.LOADING=0]="LOADING",e[e.PLAYING=1]="PLAYING",e[e.PAUSED=2]="PAUSED",e[e.DEAD=3]="DEAD"}(i=t.State||(t.State={}))},function(e,t,n){function i(e){return null==e?void 0===e?l:a:u&&u in Object(e)?o(e):s(e)}var r=n(15),o=n(55),s=n(61),a="[object Null]",l="[object Undefined]",u=r?r.toStringTag:void 0;e.exports=i},function(e,t,n){var i=n(19),r="object"==typeof self&&self&&self.Object===Object&&self,o=i||r||Function("return this")();e.exports=o},function(e,t,n){function i(e){return null!=e&&o(e.length)&&!r(e)}var r=n(24),o=n(25);e.exports=i},function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},function(e,t,n){"use strict";function i(e,t){var n=void 0;return e.some(function(e){return t(e)?(n=e,!0):!1}),n}Object.defineProperty(t,"__esModule",{value:!0}),t.find=i},function(e,t,n){"use strict";function i(){return"performance"in window&&window.performance.now?window.performance.now():Date.now()-r}Object.defineProperty(t,"__esModule",{value:!0});var r=Date.now();t.now=i},function(e,t,n){"use strict";function i(){return{actuallyPlaying:!1,ended:!1,loading:!1,playing:!1,ready:!1,seekPosition:null,stalled:!0,duration:null,dead:!1,state:p.State.PAUSED}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(67),o=n(32),s=n(0),a=n(26),l=n(2),u=n(1),c=n(31),d=n(11),h=n(12),p=n(5),f=n(4),g="undefined"!=typeof navigator&&"mediaSession"in navigator,m=5e3,_=g?navigator.mediaSession:null,v=function(){function e(e){var t=this;this._onChange=new l.EventDispatcher,this._onDurationChange=new l.EventDispatcher,this._onReady=new l.EventDispatcher,this._onStateChange=new l.EventDispatcher,this._onPlay=new l.EventDispatcher,this._onPlayIntent=new l.EventDispatcher,this._onPlayRejection=new l.EventDispatcher,this._onPause=new l.EventDispatcher,this._onPauseIntent=new l.EventDispatcher,this._onPauseRejection=new l.EventDispatcher,this._onSeek=new l.EventDispatcher,this._onSeekIntent=new l.EventDispatcher,this._onSeekRejection=new l.EventDispatcher,this._onPositionJumped=new l.EventDispatcher,this._onEnded=new l.EventDispatcher,this._onLeftEnded=new l.EventDispatcher,this._onStallStart=new l.EventDispatcher,this._onStallEnd=new l.EventDispatcher,this._onLoadStart=new l.EventDispatcher,this._onLoadEnd=new l.EventDispatcher,this._onError=new l.EventDispatcher,this._mediaSessionEnabled=!1,this._resolvedReadyDeferred=!1,this._stalled=!1,this._playRejectionError=null,this._pauseRejectionError=null,this._seekRejectionError=null,this._errors=[],this._readyDeferred=u.buildDeferred(),this._queuedSeekDeferreds=[],this._queuedPlayDeferred=null,this._queuedPauseDeferred=null,this._positionWhenStoppedPlaying=null,this._pendingPositionWhenStoppedPlaying=0,this._fatalError=null,this._positionWhenKilled=0,this._positionJumped=!1,this._listenTimeBase=0,this._timePlaybackStarted=null,this._callHandleSeekChange=!1,this._lastHandlePlayPausePlayingState=!1;var n=e.name;this._logger=f.prefixLogger(e.logger,"BasePlayer"+(n?"-"+n:"")),this._mediaSessionEnabled=!!e.mediaSessionEnabled,this.whenReady=this._readyDeferred.promise,this.onChange=this._onChange.getHandle(),this.onDurationChange=this._onDurationChange.getHandle(),this.onReady=this._onReady.getHandle(),this.onStateChange=this._onStateChange.getHandle(),this.onPlay=this._onPlay.getHandle(),this.onPlayIntent=this._onPlayIntent.getHandle(),this.onPlayRejection=this._onPlayRejection.getHandle(),this.onPause=this._onPause.getHandle(),this.onPauseIntent=this._onPauseIntent.getHandle(),this.onPauseRejection=this._onPauseRejection.getHandle(),this.onSeek=this._onSeek.getHandle(),this.onSeekIntent=this._onSeekIntent.getHandle(),this.onSeekRejection=this._onSeekRejection.getHandle(),this.onPositionJumped=this._onPositionJumped.getHandle(),this.onEnded=this._onEnded.getHandle(),this.onLeftEnded=this._onLeftEnded.getHandle(),this.onStallStart=this._onStallStart.getHandle(),this.onStallEnd=this._onStallEnd.getHandle(),this.onLoadStart=this._onLoadStart.getHandle(),this.onLoadEnd=this._onLoadEnd.getHandle(),this.onError=this._onError.getHandle();var r=new c.OnExit(function(){return t._afterFlagsChanged()});this._handleFlagChange=function(e){return r.enter(e)},this._registerMediaSessionActionHandlers(),this._notifyMediaSessionPaused(),this._playbackState=i(),this._previousPlaybackState=i()}return e.prototype.isReady=function(){return this._playbackState.ready},e.prototype.getPosition=function(){var e=this;return this._playbackState.dead?this._positionWhenKilled:this._handleFlagChange(function(){var t=e._getPositionOrPositionSeekingTo();return e._updateEnded(t),t})},e.prototype.getLastPlayedPosition=function(){return this._playbackState.actuallyPlaying&&!this._playbackState.stalled?this.getPosition():this._positionWhenStoppedPlaying},e.prototype.getListenTime=function(){var e=this._listenTimeBase;return this.isActuallyPlaying()&&!this.isEnded()&&(e+=h.now()-this._timePlaybackStarted),e},e.prototype.isStalled=function(){return this._playbackState.stalled},e.prototype.isLoading=function(){return this._playbackState.loading},e.prototype.isPlaying=function(){return this._playbackState.playing},e.prototype.isActuallyPlaying=function(){return this._playbackState.actuallyPlaying},e.prototype.isEnded=function(){return this._playbackState.ended},e.prototype.getState=function(){return this._playbackState.state},e.prototype.getUrlController=function(){return null},e.prototype.getBufferController=function(){return null},e.prototype.getMemoryCacheMaxSize=function(){return null},e.prototype.getMemoryCacheUsage=function(){return null},e.prototype.getMemoryCacheController=function(){return null},e.prototype.getFatalError=function(){return this._fatalError},e.prototype.isDead=function(){return this._playbackState.dead},e.prototype.getDuration=function(){return this._playbackState.ready?this._playbackState.duration:null},e.prototype.setVolume=function(e){if(0>e||e>1)throw new Error("Volume must be >= 0 and <= 1.");this._setVolume(e)},e.prototype.getCurrentBufferedTimeRange=function(){var e=this.getBufferedTimeRanges(),t=this.getPosition();return d.find(e,function(e){return e.containsTime(t)})||null},e.prototype.play=function(){var e=this;this._ensureNotDead(),this._logger.debug("play() called.");try{return this._handleFlagChange(function(){return e._playbackState.playing?e._logger.debug("Intent is already to be playing."):(e._logger.debug("Requesting play."),e._playbackState.playing=!0),e._queuedPlayDeferred||(e._queuedPlayDeferred=u.buildDeferred()),e._queuedPlayDeferred.promise})}catch(t){return this._triggerError(new s.PlayerFatalError("Unexpected error when attempting to play.",t)),o.Promise.reject(t)}},e.prototype.pause=function(){var e=this;this._ensureNotDead(),this._logger.debug("pause() called.");try{return this._handleFlagChange(function(){return e._playbackState.playing?(e._logger.debug("Requesting pause."),e._playbackState.playing=!1):e._logger.debug("Intent is already to be paused."),e._queuedPauseDeferred||(e._queuedPauseDeferred=u.buildDeferred()),e._queuedPauseDeferred.promise})}catch(t){return this._triggerError(new s.PlayerFatalError("Unexpected error when attempting to pause.",t)),o.Promise.reject(t)}},e.prototype.seek=function(e){var t=this;this._ensureNotDead(),this._logger.debug("seek() called.",e);var n=this._playbackState.duration;if(0>e)return this._logger.warn("Rejecting seek immediately as the position was negative."),o.Promise.reject(new Error("You were attempting to seek to a negative time."));if(null!==n&&e>n)return this._logger.warn("Rejecting seek immediately as the duration is now known, and the requested positon was past it."),o.Promise.reject(new Error("You were attempting to seek past the end of the media."));try{return this._handleFlagChange(function(){var n=u.buildDeferred();return t._playbackState.seekPosition!==e?(t._logger.debug("Requesting seek.",e),t._playbackState.seekPosition=e,t._callHandleSeekChange=!0,t._positionJumped=!0,t._updateEnded(e)):t._logger.debug("Seek already requested to the same position.",e),t._queuedSeekDeferreds.push({position:e,deferred:n}),n.promise})}catch(i){return this._triggerError(new s.PlayerFatalError("Unexpected error when attempting to seek.",i)),o.Promise.reject(i)}},e.prototype.kill=function(){var e=this;this._playbackState.dead||(this._logger.debug("kill() called."),this._handleFlagChange(function(){e._positionWhenKilled=e.getPosition(),e._playbackState.dead=!0}))},e.prototype._ensureNotDead=function(){if(this._playbackState.dead)throw new Error("Player is dead.")},e.prototype._notifyStalled=function(e){this._stalled!==e&&(this._logger.debug("notifyStalled() called.",e),this._stalled=e,this._pendingPositionWhenStoppedPlaying=this.getPosition(),this._handleFlagChange())},e.prototype._getQueuedSeekPosition=function(){return this._playbackState.seekPosition},e.prototype._provideDuration=function(e){var t=this;this._playbackState.duration!==e&&this._handleFlagChange(function(){var n=t._getPositionOrPositionSeekingTo();if(0>e||t._playbackState.ready&&n>e)throw t._triggerError(new s.PlayerFatalError("Attempt to update duration to an invalid value.")),new Error("Duration cannot be less than the current position.");t._logger.debug("provideDuration() called.",e),t._playbackState.duration=e,t._updateEnded(n)})},e.prototype._notifyPlaying=function(e){var t=this;if(this._ensureNotDead(),!this._playbackState.ready)throw this._triggerError(new s.PlayerFatalError("Attempt to register playback as started before ready.")),new Error("Player must be ready first.");e!==this._playbackState.actuallyPlaying&&(this._logger.debug("notifyPlaying() called.",e),this._handleFlagChange(function(){e||(t._pendingPositionWhenStoppedPlaying=t.getPosition()),t._playbackState.actuallyPlaying=t._playbackState.playing=e,t._pauseRejectionError=t._playRejectionError=null}))},e.prototype._notifyPlayRejection=function(e){var t=this;if(this._ensureNotDead(),!this._playbackState.ready)throw this._triggerError(new s.PlayerFatalError("Attempt to reject a play request before player ready.")),new Error("Player must be ready first.");if(this._playbackState.actuallyPlaying||!this._playbackState.playing)throw this._triggerError(new s.PlayerFatalError("Attempt to reject a play request when not valid.")),new Error("Playing state is incorrect.");this._logger.debug("notifyPlayRejection() called.",e),this._handleFlagChange(function(){t._playbackState.playing=!1,t._playRejectionError=e})},e.prototype._notifyPauseRejection=function(e){var t=this;if(this._ensureNotDead(),!this._playbackState.ready)throw this._triggerError(new s.PlayerFatalError("Attempt to reject pause request before player ready.")),new Error("Player must be ready first.");if(!this._playbackState.actuallyPlaying||this._playbackState.playing)throw this._triggerError(new s.PlayerFatalError("Attempt to reject pause request when not valid.")),new Error("Playing state is incorrect.");this._logger.debug("notifyPauseRejection() called.",e),this._handleFlagChange(function(){t._playbackState.playing=!0,t._pauseRejectionError=e})},e.prototype._notifySeekRejection=function(e){var t=this;if(this._ensureNotDead(),!this._playbackState.ready)throw new Error("Player must be ready first.");if(null===this._playbackState.seekPosition)throw new Error("A seek hasn't been requested.");this._logger.debug("notifySeekRejection() called.",e),this._handleFlagChange(function(){t._playbackState.seekPosition=null,t._positionJumped=!0,t._updateEnded(t._getPositionOrPositionSeekingTo()),t._seekRejectionError=e})},e.prototype._signalReady=function(){var e=this;if(this._ensureNotDead(),this._playbackState.ready)throw this._triggerError(new s.PlayerFatalError("Attempt to signal ready twice.")),new Error("Ready already signalled.");var t=this._playbackState.duration;if(null===t)throw this._triggerError(new s.PlayerFatalError("Attempt to signal ready when duration unknown.")),new Error("Duration is still unknown.");this._logger.debug("signalReady() called."),this._handleFlagChange(function(){e._playbackState.ready=!0;var n=e._playbackState.seekPosition;null!==n&&n>t&&(e._playbackState.seekPosition=null,e._seekRejectionError=new Error("You were attempting to seek past the end of the media.")),e._updateEnded(e._getPositionOrPositionSeekingTo())})},e.prototype._signalSeekComplete=function(){var e=this;if(this._ensureNotDead(),!this._playbackState.ready)throw new Error("Player must be ready first.");if(null===this._playbackState.seekPosition)throw new Error("There shouldn't be a seek in progress.");var t=this._playbackState.duration;if(this._playbackState.seekPosition>t)throw new Error("Seek cannot have completed given it was to a time greater than the duration.");this._logger.debug("signalSeekComplete() called."),this._handleFlagChange(function(){e._playbackState.seekPosition=null,e._updateEnded(e._getPositionOrPositionSeekingTo())})},e.prototype._signalPositionJump=function(){var e=this;this._handleFlagChange(function(){null===e._playbackState.seekPosition&&(e._positionJumped=!0)})},e.prototype._signalEnded=function(){var e=this;if(this._ensureNotDead(),!this._playbackState.ready)throw this._triggerError(new s.PlayerFatalError("Attempt to signal ended before player was ready.")),new Error("Player must be ready first.");return this._playbackState.ended?void 0:null!==this._playbackState.seekPosition?void this._logger.debug("Ignoring signalEnded() call because a seek is in progress."):void this._handleFlagChange(function(){e._logger.debug("signalEnded() called."),e._playbackState.ended=!0})},e.prototype._signalNotEnded=function(){var e=this;if(this._ensureNotDead(),!this._playbackState.ready)throw this._triggerError(new s.PlayerFatalError("Attempt to signal not ended before player was ready.")),new Error("Player must be ready first.");return this._playbackState.ended?null!==this._playbackState.seekPosition?void this._logger.debug("Ignoring signalNotEnded() call because a seek is in progress."):void this._handleFlagChange(function(){e._logger.debug("signalNotEnded() called."),e._playbackState.ended=!1}):void 0},e.prototype._triggerError=function(e){var t=this;this._ensureNotDead();var n=!1;this._playbackState.ready&&e instanceof a.NotSupportedError&&(e=new s.PlayerFatalError("Invalid NotSupportedError."),n=!0),this._handleFlagChange(function(){if(e instanceof s.PlayerFatalError){e instanceof a.NotSupportedError?t._logger.info("NotSupportedError occurred.",e):t._logger.error("Fatal error occurred.",e),t._playbackState.dead=!0,t._fatalError=e,t._errors.push(e);try{t._positionWhenKilled=t.getPosition()}catch(i){t._logger.error("Tried to get position before player was killed but got exception.",i)}}else t._logger.warn("Non-fatal error occurred.",e),t._errors.push(e);if(n)throw new Error("Not supported errors are only valid before the player is ready.")})},e.prototype._finalizeState=function(){this._playbackState.dead?(this._playbackState.loading=!1,this._playbackState.stalled=!0,this._playbackState.actuallyPlaying=!1,this._playbackState.playing=!1,this._playbackState.state=p.State.DEAD,this._playbackState.ready=this._previousPlaybackState.ready,this._playbackState.seekPosition=this._previousPlaybackState.seekPosition,this._playbackState.actuallyPlaying||(this._playRejectionError=new Error("Player was killed."))):(this._playbackState.stalled=!this._playbackState.ended&&(!this._playbackState.ready||this._stalled||null!==this._playbackState.seekPosition),this._playbackState.loading=!this._playbackState.ended&&(this._playbackState.playing||this._playbackState.actuallyPlaying)&&(this._playbackState.stalled||this._playbackState.playing!==this._playbackState.actuallyPlaying),this._playbackState.state=this._calculateState())},e.prototype._getPositionOrPositionSeekingTo=function(){var e=this;return null!==this._playbackState.seekPosition?this._playbackState.seekPosition:null===this._playbackState.duration?0:this._handleFlagChange(function(){var t=e._getPosition();if(null!==e._playbackState.seekPosition)return e._playbackState.seekPosition;var n=e._playbackState.duration;if(0>t)throw e._logger.error("Player provided invalid position.",t,n),e._triggerError(new s.PlayerFatalError("Player provided a position that was invalid.")),new Error("Player provided invalid position.");if(null!==n&&t>n)throw e._logger.error("Player provided invalid position.",t,n),e._triggerError(new s.PlayerFatalError("Player provided a position that was invalid.")),new Error("Player provided invalid position.");return t})},e.prototype._updateEnded=function(e){var t=this;this._handleFlagChange(function(){var n=t._playbackState.duration,i=e===n&&t._playbackState.ready;t._playbackState.ended=i})},e.prototype._calculateState=function(){return this._playbackState.dead?p.State.DEAD:this._playbackState.loading?p.State.LOADING:this._playbackState.playing&&!this._playbackState.ended?p.State.PLAYING:p.State.PAUSED},e.prototype._registerMediaSessionActionHandlers=function(){var e=this;this._mediaSessionEnabled&&_&&(_.setActionHandler("play",function(){e.isDead()||e.play()}),_.setActionHandler("pause",function(){e.isDead()||e.pause()}),_.setActionHandler("seekbackward",function(){e.isDead()||e.seek(Math.max(0,e.getPosition()-m))}),_.setActionHandler("seekforward",function(){e.isDead()||e.seek(Math.min(e.getDuration()||0,e.getPosition()+m))}))},e.prototype._notifyMediaSessionPlaying=function(){this._mediaSessionEnabled&&_&&(_.playbackState="playing")},e.prototype._notifyMediaSessionPaused=function(){this._mediaSessionEnabled&&_&&(_.playbackState="paused")},e.prototype._afterFlagsChanged=function(){var e=this;this._finalizeState();var t=this._previousPlaybackState,n=r({},this._playbackState);if(this._previousPlaybackState=n,!t.dead){var i={},o=this._errors;this._errors=[],o.length>0&&(i.errors=o),n.dead&&(i.dead=!0),n.ready&&!t.ready?(i.ready=!0,i.duration=n.duration):n.ready&&n.duration!==t.duration&&(i.duration=n.duration),n.actuallyPlaying!==t.actuallyPlaying&&(i.actuallyPlaying=n.actuallyPlaying),(n.actuallyPlaying&&!n.ended)!==(t.actuallyPlaying&&!t.ended)&&(n.actuallyPlaying&&!n.ended?this._timePlaybackStarted=h.now():(this._listenTimeBase+=h.now()-this._timePlaybackStarted,
this._timePlaybackStarted=null));var s=this._playRejectionError,a=this._pauseRejectionError;n.playing!==t.playing&&(i.playing=n.playing,s&&(i.playRejection=s),a&&(i.pauseRejection=a)),this._playRejectionError=this._pauseRejectionError=null,n.ended!==t.ended&&(i.ended=n.ended);var l=n.seekPosition;this._queuedSeekDeferreds=this._queuedSeekDeferreds.filter(function(r){var o=r.position,s=r.deferred;if(null===l){var a=e._seekRejectionError;if(!n.stalled||a)return i.seeking=!1,a?(e._logger.debug("Rejecting seek().",a),s.reject(a),i.seekRejection=a):(e._logger.debug("Resolving seek()."),s.resolve(void 0)),!1}else if(null===t.seekPosition&&(i.seeking=!0),o!==l)return e._logger.debug("Rejecting seek() because another seek was requested.",o),s.reject(new Error("Seek request aborted because another seek was requested to a different position.")),!1;return!0}),this._seekRejectionError=null,n.stalled!==t.stalled&&(i.stalled=n.stalled),n.loading!==t.loading&&(i.loading=n.loading),n.state!==t.state&&(i.state=n.state),(n.stalled&&!t.stalled&&t.actuallyPlaying||!n.actuallyPlaying&&t.actuallyPlaying&&!t.stalled)&&(this._positionWhenStoppedPlaying=this._pendingPositionWhenStoppedPlaying),n.playing!==t.playing&&(n.playing?this._notifyMediaSessionPlaying():this._notifyMediaSessionPaused()),n.actuallyPlaying&&!t.actuallyPlaying&&this._registerMediaSessionActionHandlers(),this._positionJumped&&(i.positionJumped=!0,this._positionJumped=!1),n.dead&&(this._logger.debug("Calling _kill() on player."),this._kill(),this._logger.info("Player killed."));var u=Object.keys(i);if(u.length>0&&(this._logger.debug("Dispatching change event.",i,t,n),this._onChange.dispatch(i)),i.ready===!0&&(this._logger.debug("Dispatching ready event."),this._onReady.dispatch(void 0),this._logger.debug("Resolving ready deferred."),this._readyDeferred.resolve(void 0)),n.playing&&this._queuedPauseDeferred&&(this._logger.debug("Rejecting pause deferred.",i.pauseRejection),this._queuedPauseDeferred.reject(i.pauseRejection||new Error("Pause request aborted.")),this._queuedPauseDeferred=null),i.playing===!0&&(i.pauseRejection?(this._logger.debug("Dispatching pauseRejection event."),this._onPauseRejection.dispatch(i.pauseRejection)):(this._logger.debug("Dispatching playIntent event."),this._onPlayIntent.dispatch(void 0))),!n.playing&&this._queuedPlayDeferred&&(this._logger.debug("Rejecting play deferred.",i.playRejection),this._queuedPlayDeferred.reject(i.playRejection||new Error("Play request aborted.")),this._queuedPlayDeferred=null),i.playing===!1&&(i.playRejection?(this._logger.debug("Dispatching playRejection event."),this._onPlayRejection.dispatch(i.playRejection)):(this._logger.debug("Dispatching pauseIntent event."),this._onPauseIntent.dispatch(void 0))),n.actuallyPlaying&&this._queuedPlayDeferred&&(this._logger.debug("Resolving play deferred."),this._queuedPlayDeferred.resolve(void 0),this._queuedPlayDeferred=null),i.actuallyPlaying===!0&&(this._logger.debug("Dispatching play event."),this._onPlay.dispatch(void 0)),!n.actuallyPlaying&&this._queuedPauseDeferred&&(this._logger.debug("Resolving pause deferred."),this._queuedPauseDeferred.resolve(void 0),this._queuedPauseDeferred=null),i.actuallyPlaying===!1&&(this._logger.debug("Dispatching pause event."),this._onPause.dispatch(void 0)),i.positionJumped&&(this._logger.debug("Dispatching positionJumped event."),this._onPositionJumped.dispatch(void 0)),i.stalled===!0&&(this._logger.debug("Dispatching stallStart event."),this._onStallStart.dispatch(void 0)),i.stalled===!1&&(this._logger.debug("Dispatching stallEnd event."),this._onStallEnd.dispatch(void 0)),i.loading===!0&&(this._logger.debug("Dispatching loadStart event."),this._onLoadStart.dispatch(void 0)),i.loading===!1&&(this._logger.debug("Dispatching loadEnd event."),this._onLoadEnd.dispatch(void 0)),i.seeking===!0&&(this._logger.debug("Dispatching seekIntent event."),this._onSeekIntent.dispatch(void 0)),i.seeking===!1&&(i.seekRejection?(this._logger.debug("Dispatching seekRejection event."),this._onSeekRejection.dispatch(i.seekRejection)):(this._logger.debug("Dispatching seek event."),this._onSeek.dispatch(void 0))),i.ended===!0&&(this._logger.debug("Dispatching ended event."),this._onEnded.dispatch(void 0)),i.ended===!1&&(this._logger.debug("Dispatching leftEnded event."),this._onLeftEnded.dispatch(void 0)),void 0!==i.duration&&(this._logger.debug("Dispatching durationChange event.",i.duration),this._onDurationChange.dispatch(i.duration)),i.errors&&(this._logger.debug("Dispatching error events.",i.errors),i.errors.forEach(function(t){return e._onError.dispatch(t)})),void 0!==i.state&&(this._logger.debug("Dispatching stateChange event.",i.state),this._onStateChange.dispatch(i.state)),n.dead){var c=this._fatalError;if(!this._resolvedReadyDeferred){var d=c||new Error("Player was killed.");this._logger.debug("Rejecting whenReady."),this._readyDeferred.reject(d)}this._queuedSeekDeferreds.forEach(function(t){var n=t.position,i=t.deferred,r=c||new Error("Seek aborted as player killed.");e._logger.debug("Rejecting seek().",n),i.reject(r)})}else this._playbackState.playing!==this._lastHandlePlayPausePlayingState&&(this._lastHandlePlayPausePlayingState=this._playbackState.playing,this._logger.debug("Calling _handlePlayPauseChange().",this._playbackState.playing),this._handlePlayPauseChange(this._playbackState.playing)),this._callHandleSeekChange&&(this._callHandleSeekChange=!1,null!==this._playbackState.seekPosition&&(this._logger.debug("Calling _handleSeekChange().",this._playbackState.seekPosition),this._handleSeekChange(this._playbackState.seekPosition)))}},e}();t.BasePlayer=v},function(e,t,n){(function(t,i){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
	 * @version   4.0.5
	 */
!function(t,n){e.exports=n()}(this,function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function r(e){return"function"==typeof e}function o(e){K=e}function s(e){X=e}function a(){return function(){return t.nextTick(h)}}function l(){return"undefined"!=typeof G?function(){G(h)}:d()}function u(){var e=0,t=new Z(h),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function c(){var e=new MessageChannel;return e.port1.onmessage=h,function(){return e.port2.postMessage(0)}}function d(){var e=setTimeout;return function(){return e(h,1)}}function h(){for(var e=0;Y>e;e+=2){var t=ne[e],n=ne[e+1];t(n),ne[e]=void 0,ne[e+1]=void 0}Y=0}function p(){try{var e=n(83);return G=e.runOnLoop||e.runOnContext,l()}catch(t){return d()}}function f(e,t){var n=arguments,i=this,r=new this.constructor(m);void 0===r[re]&&L(r);var o=i._state;return o?!function(){var e=n[o-1];X(function(){return R(o,r,e,i._result)})}():P(i,r,e,t),r}function g(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(m);return S(n,e),n}function m(){}function _(){return new TypeError("You cannot resolve a promise with itself")}function v(){return new TypeError("A promises callback cannot return that same promise.")}function y(e){try{return e.then}catch(t){return le.error=t,le}}function b(e,t,n,i){try{e.call(t,n,i)}catch(r){return r}}function w(e,t,n){X(function(e){var i=!1,r=b(n,t,function(n){i||(i=!0,t!==n?S(e,n):T(e,n))},function(t){i||(i=!0,A(e,t))},"Settle: "+(e._label||" unknown promise"));!i&&r&&(i=!0,A(e,r))},e)}function x(e,t){t._state===se?T(e,t._result):t._state===ae?A(e,t._result):P(t,void 0,function(t){return S(e,t)},function(t){return A(e,t)})}function k(e,t,n){t.constructor===e.constructor&&n===f&&t.constructor.resolve===g?x(e,t):n===le?A(e,le.error):void 0===n?T(e,t):r(n)?w(e,t,n):T(e,t)}function S(t,n){t===n?A(t,_()):e(n)?k(t,n,y(n)):T(t,n)}function E(e){e._onerror&&e._onerror(e._result),C(e)}function T(e,t){e._state===oe&&(e._result=t,e._state=se,0!==e._subscribers.length&&X(C,e))}function A(e,t){e._state===oe&&(e._state=ae,e._result=t,X(E,e))}function P(e,t,n,i){var r=e._subscribers,o=r.length;e._onerror=null,r[o]=t,r[o+se]=n,r[o+ae]=i,0===o&&e._state&&X(C,e)}function C(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i=void 0,r=void 0,o=e._result,s=0;s<t.length;s+=3)i=t[s],r=t[s+n],i?R(n,i,r,o):r(o);e._subscribers.length=0}}function D(){this.error=null}function M(e,t){try{return e(t)}catch(n){return ue.error=n,ue}}function R(e,t,n,i){var o=r(n),s=void 0,a=void 0,l=void 0,u=void 0;if(o){if(s=M(n,i),s===ue?(u=!0,a=s.error,s=null):l=!0,t===s)return void A(t,v())}else s=i,l=!0;t._state!==oe||(o&&l?S(t,s):u?A(t,a):e===se?T(t,s):e===ae&&A(t,s))}function I(e,t){try{t(function(t){S(e,t)},function(t){A(e,t)})}catch(n){A(e,n)}}function O(){return ce++}function L(e){e[re]=ce++,e._state=void 0,e._result=void 0,e._subscribers=[]}function N(e,t){this._instanceConstructor=e,this.promise=new e(m),this.promise[re]||L(this.promise),V(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?T(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&T(this.promise,this._result))):A(this.promise,F())}function F(){return new Error("Array Methods must be provided an Array")}function B(e){return new N(this,e).promise}function U(e){var t=this;return new t(V(e)?function(n,i){for(var r=e.length,o=0;r>o;o++)t.resolve(e[o]).then(n,i)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function j(e){var t=this,n=new t(m);return A(n,e),n}function H(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function $(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function z(e){this[re]=O(),this._result=this._state=void 0,this._subscribers=[],m!==e&&("function"!=typeof e&&H(),this instanceof z?I(this,e):$())}function q(){var e=void 0;if("undefined"!=typeof i)e=i;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;if(n){var r=null;try{r=Object.prototype.toString.call(n.resolve())}catch(t){}if("[object Promise]"===r&&!n.cast)return}e.Promise=z}var W=void 0;W=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var V=W,Y=0,G=void 0,K=void 0,X=function(e,t){ne[Y]=e,ne[Y+1]=t,Y+=2,2===Y&&(K?K(h):ie())},J="undefined"!=typeof window?window:void 0,Q=J||{},Z=Q.MutationObserver||Q.WebKitMutationObserver,ee="undefined"==typeof self&&"undefined"!=typeof t&&"[object process]"==={}.toString.call(t),te="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ne=new Array(1e3),ie=void 0;ie=ee?a():Z?u():te?c():void 0===J?p():d();var re=Math.random().toString(36).substring(16),oe=void 0,se=1,ae=2,le=new D,ue=new D,ce=0;return N.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===oe&&e>n;n++)this._eachEntry(t[n],n)},N.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===g){var r=y(e);if(r===f&&e._state!==oe)this._settledAt(e._state,t,e._result);else if("function"!=typeof r)this._remaining--,this._result[t]=e;else if(n===z){var o=new n(m);k(o,e,r),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(i(e),t)},N.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===oe&&(this._remaining--,e===ae?A(i,n):this._result[t]=n),0===this._remaining&&T(i,this._result)},N.prototype._willSettleAt=function(e,t){var n=this;P(e,void 0,function(e){return n._settledAt(se,t,e)},function(e){return n._settledAt(ae,t,e)})},z.all=B,z.race=U,z.resolve=g,z.reject=j,z._setScheduler=o,z._setAsap=s,z._asap=X,z.prototype={constructor:z,then:f,"catch":function(e){return this.then(null,e)}},z.polyfill=q,z.Promise=z,z})}).call(t,n(75),n(33))},function(e,t,n){var i=n(7),r=i.Symbol;e.exports=r},function(e,t,n){function i(e,t,n){var i=e[t];a.call(e,t)&&o(i,n)&&(void 0!==n||t in e)||r(e,t,n)}var r=n(17),o=n(22),s=Object.prototype,a=s.hasOwnProperty;e.exports=i},function(e,t,n){function i(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var r=n(18);e.exports=i},function(e,t,n){var i=n(54),r=function(){try{var e=i(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=r},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,n(33))},function(e,t){function n(e,t){return t=null==t?i:t,!!t&&("number"==typeof e||r.test(e))&&e>-1&&e%1==0&&t>e}var i=9007199254740991,r=/^(?:0|[1-9]\d*)$/;e.exports=n},function(e,t){function n(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||i;return e===n}var i=Object.prototype;e.exports=n},function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},function(e,t){function n(e){return e}e.exports=n},function(e,t,n){function i(e){if(!o(e))return!1;var t=r(e);return t==a||t==l||t==s||t==u}var r=n(6),o=n(9),s="[object AsyncFunction]",a="[object Function]",l="[object GeneratorFunction]",u="[object Proxy]";e.exports=i},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&i>=e}var i=9007199254740991;e.exports=n},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e){function t(t){return e.call(this,t||"The player cannot play the provided descriptor.")||this}return i(t,e),t.prototype.getCode=function(){return"NOT_SUPPORTED_ERROR"},t}(r.PlayerFatalError);t.NotSupportedError=o},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(e){function t(t){var n=e.call(this,"The player that the proxy was controlling had a fatal error.")||this;return n._providedPlayerError=t,n}return i(t,e),t.prototype.getCode=function(){return"PROXY_PLAYER_PROVIDED_PLAYER_FATAL_ERROR"},t.prototype.getProvidedPlayerFatalError=function(){return this._providedPlayerError},t}(r.PlayerError);t.ProxyProvidedPlayerFatalError=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(29);t.abortedError=new Error("Job aborted.");var o=function(){function e(e){this.job=e,this._counter=0,this._jobControl=null,this._promise=null,this._onCompletion=[],this._onError=[],this._jobCompleted=!1}return e.prototype.run=function(){var e=this;this._jobControl||(this._jobControl=this.job(),this._promise=this._jobControl.result,r.always(this._promise,function(){return e._jobCompleted=!0}));var n=this._jobControl,o=this._promise;this._counter++;var s=i.buildDeferred(),a=!1,l=!1,u=function(){l||(a=!0,e._counter--)};return r.always(o,u),o.then(function(t){l||(e._onCompletion.forEach(function(e){try{e(t)}catch(n){window.setTimeout(function(){throw n},0)}}),s.resolve(t))},function(t){l||(e._onError.forEach(function(e){return e(t)}),s.reject(t))}),{whenComplete:function(){return s.promise},onCompletion:function(t){e._onCompletion.push(t)},onError:function(t){e._onError.push(t)},hasCompleted:function(){return a},abort:function(i){l||a||(l=!0,0===--e._counter&&!e._jobCompleted&&n.abort&&(e._jobControl=null,e._promise=null,n.abort(i)),e._onError.forEach(function(e){return e(t.abortedError)}),s.reject(t.abortedError))}}},e}();t.AbortableJob=o},function(e,t,n){"use strict";function i(e,t){return e.then(t,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.always=i},function(e,t,n){"use strict";function i(){return a}function r(){var e=navigator.appVersion.match(u);if(e&&e.length>=3){var t=parseInt(e[1],10),n=parseInt(e[2],10);if(!isNaN(t)&&!isNaN(n))return{major:t,minor:n}}return null}function o(){return l}Object.defineProperty(t,"__esModule",{value:!0});var s="undefined"!=typeof navigator?navigator.userAgent:"",a=!/chrome|opera/i.test(s)&&/safari/i.test(s),l=s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0,u=/version\/(\d+)\.(\d+)/i;t.isSafari=i,t.getSafariVersion=r,t.isIE=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){this._counter=0,this._onExit=e,this._onEnter=t||null}return e.prototype.enter=function(e){this._counter++,1===this._counter&&this._onEnter&&(this._enterReturnVal=this._onEnter());try{return e?e(this._enterReturnVal):void 0}finally{this._counter--,0===this._counter&&this._onExit(this._enterReturnVal)}},e}();t.OnExit=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(14);t.Promise=i.Promise},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(1,eval)("this")}catch(i){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,n){this.url=e,this.protocol=t,this.format=n}return e.prototype.getUrl=function(){return this.url},e.prototype.getProtocol=function(){return this.protocol},e.prototype.getFormat=function(){return this.format},e}();t.Descriptor=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(76),o=n(26),s=n(77),a=n(27),l=n(3),u=n(0);!function(e){e.PlayerError=l.PlayerError,e.PlayerFatalError=u.PlayerFatalError,e.DependencyError=r.DependencyError,e.NotSupportedError=o.NotSupportedError,e.URLUpdateError=s.URLUpdateError,e.ProxyProvidedPlayerFatalError=a.ProxyProvidedPlayerFatalError}(i=t.errors||(t.errors={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(1),o=n(28),s=n(80),a=n(31),l=n(11),u=n(78),c=n(12),d=n(32),h=n(29),p=n(79),f=n(30),g=n(81);!function(e){e.OnExit=a.OnExit,e.find=l.find,e.Promise=d.Promise,e.always=h.always,e.compact=p.compact;var t;!function(e){e.buildCache=u.buildCache}(t=e.cache||(e.cache={}));var n;!function(e){e.buildDeferred=r.buildDeferred}(n=e.deferred||(e.deferred={}));var i;!function(e){e.getExtension=g.getExtension,e.buildAbsoluteUrl=g.buildAbsoluteUrl}(i=e.url||(e.url={}));var m;!function(e){e.AbortableJob=o.AbortableJob,e.abortedError=o.abortedError}(m=e.abortableJob||(e.abortableJob={}));var _;!function(e){e.noMoreAttemptsError=s.noMoreAttemptsError,e.retry=s.retry,e.buildExponentialDelayCalculator=s.buildExponentialDelayCalculator}(_=e.retry||(e.retry={}));var v;!function(e){e.isSafari=f.isSafari,e.getSafariVersion=f.getSafariVersion,e.isIE=f.isIE}(v=e.browser||(e.browser={}));var y;!function(e){e.now=c.now}(y=e.time||(e.time={}))}(i=t.helpers||(t.helpers={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(2),o=function(){function e(){this._aborted=!1,this._requestStarted=!1,this._response=null,this._responseDeferred=i.buildDeferred(),this._requestStartedDeferred=i.buildDeferred(),this._onRequestStart=new r.EventDispatcher,this.onRequestStart=this._onRequestStart.getHandle(),this.whenRequestStarted=this._requestStartedDeferred.promise}return e.prototype.getResponse=function(){return this._responseDeferred.promise},e.prototype.hasRequestStarted=function(){return this._requestStarted},e.prototype.abort=function(){if(!this._aborted){if(this._aborted=!0,this._response)throw new Error("Already have a response.");this._abort(),this._responseDeferred.reject(new Error("Aborted.")),this._requestStarted||this._requestStartedDeferred.reject(new Error("Aborted."))}},e.prototype._provideResponse=function(e){if(this._aborted)throw new Error("Response aborted.");if(this._response)throw new Error("Response already provided.");if(e instanceof Error)this._aborted=!0,this._responseDeferred.reject(e);else{if(!this._requestStarted)throw new Error("Request hasn't started yet.");this._response=e,this._responseDeferred.resolve(e)}},e.prototype._signalRequestStart=function(){if(this._aborted)throw new Error("Response aborted.");if(this._requestStarted)throw new Error("Request already started.");this._requestStarted=!0,this._requestStartedDeferred.resolve(void 0),this._onRequestStart.dispatch(void 0)},e}();t.LoaderRequest=o},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(13),o=n(2),s=n(5),a=n(3),l=n(0),u=n(4),c=n(27),d=function(e){function t(t){var n=e.call(this,t)||this;return n._onPlayerProvided=new o.EventDispatcher,n._onPlayerRemoved=new o.EventDispatcher,n._changeHandler=null,n._pendingPlayer=null,n._player=null,n._preReadyOnChangeEventHandle=null,n._position=0,n._volume=1,n._muted=!1,n.onPlayerProvided=n._onPlayerProvided.getHandle(),n.onPlayerRemoved=n._onPlayerRemoved.getHandle(),n._logger=u.prefixLogger(n._logger,"ProxyPlayer"),n}return i(t,e),t.prototype.getVolume=function(){return this._player?this._player.getVolume():this._volume},t.prototype.getMuted=function(){return this._player?this._player.getMuted():this._muted},t.prototype.setMuted=function(e){return this._player?this._player.setMuted(e):void(this._muted=e)},t.prototype.getBufferedTimeRanges=function(){return this._player?this._player.getBufferedTimeRanges():[]},t.prototype.getCurrentBufferedTimeRange=function(){return this._player?this._player.getCurrentBufferedTimeRange():null},t.prototype.getMaxBufferLength=function(){return this._player?this._player.getMaxBufferLength():null},t.prototype.getMemoryCacheMaxSize=function(){return this._player?this._player.getMemoryCacheMaxSize():null},t.prototype.getMemoryCacheUsage=function(){return this._player?this._player.getMemoryCacheUsage():null},t.prototype.providePlayer=function(e){if(this._ensureNotDead(),this._pendingPlayer)throw new Error("A player has already been provided.");this._logger.debug("providePlayer() called."),this._pendingPlayer=e,this._sync(),this._onPlayerProvided.dispatch(e)},t.prototype.removePlayer=function(){this._ensureNotDead();var e=this._pendingPlayer;if(!e)throw new Error("There is no player to remove.");this._logger.debug("removePlayer() called."),this._pendingPlayer=null;var t=this._player;t&&this._unsync(),this._onPlayerRemoved.dispatch(e)},t.prototype.setInitialDuration=function(e){if(this._ensureNotDead(),0>e)throw new Error("Cannot set duration to a value < 0.");null===this.getDuration()&&(this._fixPosition(e),this._provideDuration(e),this.isReady()||this._signalReady())},t.prototype._triggerError=function(t){e.prototype._triggerError.call(this,t)},t.prototype.getPlayer=function(){return this._pendingPlayer},t.prototype._setVolume=function(e){return this._player?this._player.setVolume(e):void(this._volume=e)},t.prototype._handlePlayPauseChange=function(e){var t=this._player;t&&(e?t.play():t.pause())},t.prototype._handleSeekChange=function(e){var t=this._player;t?t.seek(e):this._position=e},t.prototype._getPosition=function(){var e=this._player;if(e){if(!this._changeHandler)throw new Error("Handler should exist.");return this._changeHandler.retrieve(),e.getPosition()}return this._position},t.prototype._kill=function(){if(this._pendingPlayer=null,this._player&&(this._player.kill(),this._player))throw new Error("Player should not exist.")},t.prototype._fixPosition=function(e){this._position>e&&(this._logger.debug("A duration was provided that was less than the current position. Changing position to the duration.",e),this._position=e)},t.prototype._sync=function(){var e=this,t=this._pendingPlayer;if(!t)throw new Error("Player should have become available by now.");if(this._logger.debug("Syncing..."),t.isDead())return void this._logger.debug("Provided player is dead.");var n=function(n){e._handleFlagChange(function(){if(n.state===s.State.DEAD){e._logger.debug("Player has gone to DEAD state.");var i=t.getFatalError();return i&&e._triggerError(new c.ProxyProvidedPlayerFatalError(i)),void e._unsync()}n.errors&&n.errors.forEach(function(t){if(t instanceof l.PlayerFatalError)throw new Error("Unexpected fatal error.");e._triggerError(t)})})};this._preReadyOnChangeEventHandle=t.onChange.subscribe(n);var i=function(){if(!e._preReadyOnChangeEventHandle)throw new Error("Pre-ready change event handler should be set.");e._preReadyOnChangeEventHandle.remove(),e._preReadyOnChangeEventHandle=null,e._logger.debug("Player ready. Adding event handlers..."),e._changeHandler=t.onChange.subscribe(function(i){e._handleFlagChange(function(){n(i),t.isDead()||(void 0!==i.duration&&e._provideDuration(i.duration),i.seeking===!1&&null!==e._getQueuedSeekPosition()&&e._signalSeekComplete(),i.seekRejection&&null!==e._getQueuedSeekPosition()&&e._notifySeekRejection(i.seekRejection),i.ended===!0&&e._signalEnded(),i.ended===!1&&e._signalNotEnded(),void 0!==i.stalled&&e._notifyStalled(i.stalled),i.playRejection&&(e.isActuallyPlaying()?(e._triggerError(new a.PlayerError("Paused because a player was provided that refused to play.")),e._notifyStalled(!1),e._notifyPlaying(!1)):e._notifyPlayRejection(i.playRejection)),i.pauseRejection&&(e.isActuallyPlaying()?e._notifyPauseRejection(i.pauseRejection):(e._triggerError(new a.PlayerError("Playing because a player was provided that refused to pause.")),e._notifyPlaying(!0))),i.playing===!0&&e.play(),i.playing===!1&&e.pause(),void 0!==i.actuallyPlaying&&(i.actuallyPlaying&&e._notifyStalled(!1),e._notifyPlaying(i.actuallyPlaying)))})});var i=t.getDuration();if(null===i)throw new Error("Duration should be set.");e._fixPosition(i),e._handleFlagChange(function(){t.setVolume(e._volume),t.setMuted(e._muted),e._provideDuration(i),e.isReady()?e._notifyStalled(!1):e._signalReady(),e._player=t,e._logger.debug("Seeking to match position."),t.seek(e._position),e.isPlaying()?t.isActuallyPlaying()?(e._logger.debug("Provided player already playing."),e._notifyPlaying(!0)):(e._logger.debug("Calling play() on provided player to match proxy."),t.play(),e._notifyStalled(!0)):t.isActuallyPlaying()?(e._logger.debug("Calling pause() on provided player to match proxy."),t.pause()):(e._logger.debug("Provided player already paused."),e._notifyPlaying(!1)),e._logger.debug("Synced.")})};if(t.isReady())i();else{this._logger.debug("Provided player not ready yet. Waiting for it to become ready...");var r=t.onReady.subscribe(function(){r.remove(),e._playerReadyHandle=null,i()});this._playerReadyHandle=r}},t.prototype._unsync=function(){this._logger.debug("Unsyncing...");var e=this._player;e&&(this._volume=e.getVolume(),this._muted=e.getMuted(),this._position=e.getPosition(),this._player=null),this._playerReadyHandle&&(this._playerReadyHandle.remove(),this._playerReadyHandle=null,this._logger.debug("Removed retry event handle.")),this._preReadyOnChangeEventHandle&&(this._preReadyOnChangeEventHandle.remove(),this._preReadyOnChangeEventHandle=null),this._changeHandler&&(this._changeHandler.remove(),this._changeHandler=null),this._logger.debug("Unsynced."),this.isReady()&&!this.isDead()&&this._notifyStalled(!0)},t}(r.BasePlayer);t.ProxyPlayer=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){if(this.start=e,this.duration=t,0>t)throw new RangeError("Duration must be >= 0.");this.end=e+t}return e.prototype.containsTime=function(e){return this.start<=e&&this.end>e},e}();t.TimeRange=i},function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=n},function(e,t,n){function i(e,t){var n=s(e),i=!n&&o(e),c=!n&&!i&&a(e),h=!n&&!i&&!c&&u(e),p=n||i||c||h,f=p?r(e.length,String):[],g=f.length;for(var m in e)!t&&!d.call(e,m)||p&&("length"==m||c&&("offset"==m||"parent"==m)||h&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||l(m,g))||f.push(m);return f}var r=n(49),o=n(69),s=n(70),a=n(71),l=n(20),u=n(72),c=Object.prototype,d=c.hasOwnProperty;e.exports=i},function(e,t,n){function i(e){return o(e)&&r(e)==s}var r=n(6),o=n(10),s="[object Arguments]";e.exports=i},function(e,t,n){function i(e){if(!s(e)||o(e))return!1;var t=r(e)?f:u;return t.test(a(e))}var r=n(24),o=n(58),s=n(9),a=n(66),l=/[\\^$.*+?()[\]{}|]/g,u=/^\[object .+?Constructor\]$/,c=Function.prototype,d=Object.prototype,h=c.toString,p=d.hasOwnProperty,f=RegExp("^"+h.call(p).replace(l,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=i},function(e,t,n){function i(e){return s(e)&&o(e.length)&&!!M[r(e)]}var r=n(6),o=n(25),s=n(10),a="[object Arguments]",l="[object Array]",u="[object Boolean]",c="[object Date]",d="[object Error]",h="[object Function]",p="[object Map]",f="[object Number]",g="[object Object]",m="[object RegExp]",_="[object Set]",v="[object String]",y="[object WeakMap]",b="[object ArrayBuffer]",w="[object DataView]",x="[object Float32Array]",k="[object Float64Array]",S="[object Int8Array]",E="[object Int16Array]",T="[object Int32Array]",A="[object Uint8Array]",P="[object Uint8ClampedArray]",C="[object Uint16Array]",D="[object Uint32Array]",M={};M[x]=M[k]=M[S]=M[E]=M[T]=M[A]=M[P]=M[C]=M[D]=!0,M[a]=M[l]=M[b]=M[u]=M[w]=M[c]=M[d]=M[h]=M[p]=M[f]=M[g]=M[m]=M[_]=M[v]=M[y]=!1,e.exports=i},function(e,t,n){function i(e){if(!r(e))return o(e);var t=[];for(var n in Object(e))a.call(e,n)&&"constructor"!=n&&t.push(n);return t}var r=n(21),o=n(59),s=Object.prototype,a=s.hasOwnProperty;e.exports=i},function(e,t,n){function i(e,t){return s(o(e,t,r),e+"")}var r=n(23),o=n(63),s=n(64);e.exports=i},function(e,t,n){var i=n(68),r=n(18),o=n(23),s=r?function(e,t){return r(e,"toString",{configurable:!0,enumerable:!1,value:i(t),writable:!0})}:o;e.exports=s},function(e,t){function n(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}e.exports=n},function(e,t){function n(e){return function(t){return e(t)}}e.exports=n},function(e,t,n){function i(e,t,n,i){var s=!n;n||(n={});for(var a=-1,l=t.length;++a<l;){var u=t[a],c=i?i(n[u],e[u],u,n,e):void 0;void 0===c&&(c=e[u]),s?o(n,u,c):r(n,u,c)}return n}var r=n(16),o=n(17);e.exports=i},function(e,t,n){var i=n(7),r=i["__core-js_shared__"];e.exports=r},function(e,t,n){function i(e){return r(function(t,n){var i=-1,r=n.length,s=r>1?n[r-1]:void 0,a=r>2?n[2]:void 0;for(s=e.length>3&&"function"==typeof s?(r--,s):void 0,a&&o(n[0],n[1],a)&&(s=3>r?void 0:s,r=1),t=Object(t);++i<r;){var l=n[i];l&&e(t,l,i,s)}return t})}var r=n(47),o=n(57);e.exports=i},function(e,t,n){function i(e,t){var n=o(e,t);return r(n)?n:void 0}var r=n(44),o=n(56);e.exports=i},function(e,t,n){function i(e){var t=s.call(e,l),n=e[l];try{e[l]=void 0;var i=!0}catch(r){}var o=a.call(e);return i&&(t?e[l]=n:delete e[l]),o}var r=n(15),o=Object.prototype,s=o.hasOwnProperty,a=o.toString,l=r?r.toStringTag:void 0;e.exports=i},function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},function(e,t,n){function i(e,t,n){if(!a(n))return!1;var i=typeof t;return("number"==i?o(n)&&s(t,n.length):"string"==i&&t in n)?r(n[t],e):!1}var r=n(22),o=n(8),s=n(20),a=n(9);e.exports=i},function(e,t,n){function i(e){return!!o&&o in e}var r=n(52),o=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=i},function(e,t,n){var i=n(62),r=i(Object.keys,Object);e.exports=r},function(e,t,n){(function(e){var i=n(19),r="object"==typeof t&&t&&!t.nodeType&&t,o=r&&"object"==typeof e&&e&&!e.nodeType&&e,s=o&&o.exports===r,a=s&&i.process,l=function(){try{return a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=l}).call(t,n(34)(e))},function(e,t){function n(e){return r.call(e)}var i=Object.prototype,r=i.toString;e.exports=n},function(e,t){function n(e,t){return function(n){return e(t(n))}}e.exports=n},function(e,t,n){function i(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var i=arguments,s=-1,a=o(i.length-t,0),l=Array(a);++s<a;)l[s]=i[t+s];s=-1;for(var u=Array(t+1);++s<t;)u[s]=i[s];return u[t]=n(l),r(e,this,u)}}var r=n(41),o=Math.max;e.exports=i},function(e,t,n){var i=n(48),r=n(65),o=r(i);e.exports=o},function(e,t){function n(e){var t=0,n=0;return function(){var s=o(),a=r-(s-n);if(n=s,a>0){if(++t>=i)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var i=800,r=16,o=Date.now;e.exports=n},function(e,t){function n(e){if(null!=e){try{return r.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var i=Function.prototype,r=i.toString;e.exports=n},function(e,t,n){var i=n(16),r=n(51),o=n(53),s=n(8),a=n(21),l=n(73),u=Object.prototype,c=u.hasOwnProperty,d=o(function(e,t){if(a(t)||s(t))return void r(t,l(t),e);for(var n in t)c.call(t,n)&&i(e,n,t[n])});e.exports=d},function(e,t){function n(e){return function(){return e}}e.exports=n},function(e,t,n){var i=n(43),r=n(10),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,l=i(function(){return arguments}())?i:function(e){return r(e)&&s.call(e,"callee")&&!a.call(e,"callee")};e.exports=l},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){(function(e){var i=n(7),r=n(74),o="object"==typeof t&&t&&!t.nodeType&&t,s=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=s&&s.exports===o,l=a?i.Buffer:void 0,u=l?l.isBuffer:void 0,c=u||r;e.exports=c}).call(t,n(34)(e))},function(e,t,n){var i=n(45),r=n(50),o=n(60),s=o&&o.isTypedArray,a=s?r(s):i;e.exports=a},function(e,t,n){function i(e){return s(e)?r(e):o(e)}var r=n(42),o=n(46),s=n(8);e.exports=i},function(e,t){function n(){return!1}e.exports=n},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function o(e){if(d===clearTimeout)return clearTimeout(e);if((d===i||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function s(){g&&p&&(g=!1,p.length?f=p.concat(f):m=-1,f.length&&a())}function a(){if(!g){var e=r(s);g=!0;for(var t=f.length;t;){for(p=f,f=[];++m<t;)p&&p[m].run();m=-1,t=f.length}p=null,g=!1,o(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var c,d,h=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{d="function"==typeof clearTimeout?clearTimeout:i}catch(e){d=i}}();var p,f=[],g=!1,m=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new l(e,t)),1!==f.length||g||r(a)},l.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=u,h.addListener=u,h.once=u,h.off=u,h.removeListener=u,h.removeAllListeners=u,h.emit=u,h.prependListener=u,h.prependOnceListener=u,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getCode=function(){return"DEPENDENCY_ERROR"},t}(r.PlayerFatalError);t.DependencyError=o},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e){function t(t,n){return e.call(this,t||"The URL update failed for some reason.",n)||this}return i(t,e),t.prototype.getCode=function(){return"URL_UPDATE_ERROR"},t}(r.PlayerFatalError);t.URLUpdateError=o},function(e,t,n){"use strict";function i(){return o?new window.Map:new s}Object.defineProperty(t,"__esModule",{value:!0});var r=n(11),o="undefined"!=typeof window&&"map"in window;t.buildCache=i;var s=function(){function e(){this._store=[]}return e.prototype.set=function(e,t){var n=r.find(this._store,function(t){return t.key===e});n?n.val=t:this._store.push({key:e,val:t})},e.prototype.get=function(e){var t=r.find(this._store,function(t){return t.key===e});return t?t.val:void 0},e}()},function(e,t,n){"use strict";function i(e){return e.filter(function(e){
return null!=e})}Object.defineProperty(t,"__esModule",{value:!0}),t.compact=i},function(e,t,n){"use strict";function i(e,n,i,r){void 0===i&&(i=window.setTimeout),void 0===r&&(r=window.clearTimeout);var a=new o.AbortableJob(function(){var o=s.buildDeferred(),a=0,l=null,u=null,c=function(){l=e(a).run(),l.onCompletion(function(e){if(l=null,e.success)o.resolve(e.result);else{var r=n(++a);null!==r&&0>r?o.reject(new Error("Delay must be null or >= 0.")):null===r?o.reject(t.noMoreAttemptsError):u=i(function(){u=null,c()},r)}}),l.onError(function(e){l=null,o.reject(e)})};return c(),{result:o.promise,abort:function(){l&&l.abort(),u&&r(u)}}});return a.run()}function r(e){var t=void 0===e?{}:e,n=t.timeBase,i=void 0===n?500:n,r=t.threshold,o=void 0===r?3:r,s=t.delayCap,a=void 0===s?45e3:s,l=t.jitter,u=void 0===l?200:l,c=t.maxAttempts,d=void 0===c?null:c;if(0>=i)throw new Error("Time base must be > 0.");if(0>=o)throw new Error("Threshold must be > 0.");if(0===a)throw new Error("Delay cap must be null or > 0.");if(null!==d&&1>d)throw new Error("Max attempts must be >= 1.");return function(e){if(null!==d&&e>=d)return null;var t=e>0?Math.pow(2,e/o-1):0;return Math.min(t*i,a||1/0)+Math.round(Math.random()*u)}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(28),s=n(1);t.noMoreAttemptsError=new Error("No more attempts remaining."),t.retry=i,t.buildExponentialDelayCalculator=r},function(e,t,n){"use strict";function i(e){var t=s.exec(e);return t?t[1].toLowerCase():null}function r(e,t){return o.buildAbsoluteURL(e,t,{alwaysNormalize:!0})}Object.defineProperty(t,"__esModule",{value:!0});var o=n(82),s=/^.*\.([^\.;\?#]*).*$/;t.getExtension=i,t.buildAbsoluteUrl=r},function(e,t,n){!function(t){var n=/^((?:[^\/;?#]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,i=/^([^\/;?#]*)(.*)$/,r=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),t=t.trim(),!t){if(!n.alwaysNormalize)return e;var r=this.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");return r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}var o=this.parseURL(t);if(!o)throw new Error("Error trying to parse relative URL.");if(o.scheme)return n.alwaysNormalize?(o.path=s.normalizePath(o.path),s.buildURLFromParts(o)):t;var a=this.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var l=i.exec(a.path);a.netLoc=l[1],a.path=l[2]}a.netLoc&&!a.path&&(a.path="/");var u={scheme:a.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};if(!o.netLoc&&(u.netLoc=a.netLoc,"/"!==o.path[0]))if(o.path){var c=a.path,d=c.substring(0,c.lastIndexOf("/")+1)+o.path;u.path=s.normalizePath(d)}else u.path=a.path,o.params||(u.params=a.params,o.query||(u.query=a.query));return null===u.path&&(u.path=n.alwaysNormalize?s.normalizePath(o.path):o.path),s.buildURLFromParts(u)},parseURL:function(e){var t=n.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(r,"");e.length!==(e=e.replace(o,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=s}(this)},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version="3.7.0",t.buildNumber=699;var i=n(2),r=n(38),o=n(4),s=n(39);t.ProxyPlayer=s.ProxyPlayer;var a=n(36);t.errors=a.errors;var l=n(37);t.helpers=l.helpers;var u=n(13);t.BasePlayer=u.BasePlayer;var c=n(35);t.Descriptor=c.Descriptor;var d=n(5);t.State=d.State;var h=n(40);t.TimeRange=h.TimeRange;var p;!function(e){e.EventDispatcher=i.EventDispatcher}(p=t.eventDispatcher||(t.eventDispatcher={}));var f;!function(e){e.LoaderRequest=r.LoaderRequest}(f=t.loader||(t.loader={}));var g;!function(e){e.noOpLogger=o.noOpLogger,e.consoleLogger=o.consoleLogger,e.prefixLogger=o.prefixLogger,e.cloneLogger=o.cloneLogger}(g=t.logger||(t.logger={}))}])})},216:function(e,t,n){"use strict";var i=e.exports=n(348).extend({defaults:{type:"track_likes"},baseUrl:function(){return this.getEndpointUrl("userTrackLikes",{id:this.options.userId})},acceptsType:function(e){return"sound"===e}});n(360).applyTo(i,{fields:["track.title","track.genre","track.tag_list","track.user.username","track.user.full_name","track.user.permalink"],mixins:[n(123)],protoProps:{defaults:{type:"track_likes"}}})},217:function(e,t,n){"use strict";e.exports=n(152).extend({model:n(67),defaults:{limit:20,type:"tracks",keepBlocked:!0},baseUrl:function(){return this.getEndpointUrl("userTracks",{id:this.options.userId},{representation:this.options.keepBlocked?"owner":""})}},{hashFn:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=t.userId,i=t.resource_id,r=t.keepBlocked,o=n||i;return[o||null,r===!1?"_b":null].join("")||null}})},233:function(e,t){"use strict";e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},234:function(e,t,n){"use strict";var i=n(424);e.exports=function(e){if(!i(e))throw new TypeError("Cannot use null or undefined");return e}},235:function(e,t,n){"use strict";e.exports=n(73).extend(n(123).withOptions({loop:!0}),{model:n(67),baseUrl:function(){return this.getEndpointUrl("stationTracks",{urn:this.options.resource_id})},getSourceInfo:function(){return{type:"stations",resourceId:this.options.resource_id,resourceType:"station",queryUrn:this.queryUrn}},parse:function(e){var t=e.collection,n=e.query_urn;return this.queryUrn=n,t}},{hashFn:function(e,t){var n=t.resource_id;return n}})},236:function(e,t,n){"use strict";e.exports={pulseUpsell:{viewType:"modal",viewOptions:{Subview:n(496),filter:"darken",width:500},shouldDisplay:function(){return n(61).isLoggedIn()&&n(55).get("rollouts").get("v2_pulse_upsell")}},googleCast:{viewType:"callout",viewOptions:{title:n(51).t("Ready to Cast"),body:n(51).t("Click to cast music to your TV and cast enabled speakers.")},shouldDisplay:function(){return n(55).get("rollouts").get("google_cast")}}}},238:function(e,t,n){"use strict";function i(e){var t=n(55).get("me");return n(3).all(e,function(e){return t.owns(e)})}function r(e){a.call(this,e,!0),s.call(this)}function o(e){a.call(this,e,!1),s.call(this)}function s(){this.setActionState("save",this.get("sounds").length?"enabled":"disabled"),this.forceChange("sounds")}function a(e,t){var n=this.getFieldMetadata("sounds").datasource,i="excludeSeed_"+e.id,r=t?function(t){return t!==e}:null;n.setFilter(i,r)}var l=n(59).trackV0Click;e.exports=n(80).extend({fields:{title:{defaultValue:""},sounds:{defaultValue:function(){return new(n(932))}},playlist:{defaultValue:null},sharing:{defaultValue:"public",datasource:[{label:n(51).t("private"),value:"private"},{label:n(51).t("public"),value:"public"}]}},buttons:{save:{label:n(51).t("Save"),action:"save"}},actions:{save:function(){var e=this,t=new(n(88))({title:this.get("title"),sharing:this.get("sharing")});return this.get("sounds").forEach(function(e){t.addSound(e)}),this.validate().always(function(){t.release()}).then(function(i){return i?t.save().then(function(){var i=new(n(88))(t.attributes);return n(74).notify("createPlaylist",{object:i}),e.get("sounds").each(function(e){n(74).notify("addToPlaylist",{object:e,target:i.id,targetType:i.get("kind"),state:!0})}),e.set("playlist",i),e.markFieldsClean(),i}):void l(["add_to_set","validation"])})},"default":"save"},constraints:{title:[[n(70),{message:n(51).t("Enter a title.")}],[n(108),{maxLength:255,message:n(51).t("Enter a title that is up to [[maxLength]] characters.")}]],sounds:[[n(70),{message:n(51).t("Playlists must contain at least one track.")}]]},setup:function(e,t){var s,a=this.get("sounds");this.startingSounds=this.options.startingSounds||[],s=n(3).any(n(3).invoke(this.startingSounds,"isPrivate")),this.set("sharing",s?"private":"public"),this.getFieldMetadata("sounds").datasource=new(n(1257))(null,{sourceType:i(this.startingSounds)?"mySounds":"likes"}),this.listenTo(a,"add",r).listenTo(a,"remove",o),n(3).each(this.startingSounds,this.addSound,this)},addSound:function(e){this.get("sounds").add(e)},areAllSoundsMine:function(){return i(this.get("sounds").models)}},{onCleanup:function(e){e.get("sounds").release()}})},250:function(e,t,n){"use strict";e.exports=function(e,t){var i=t.hash.displayUTC?n(51).dateTimeHelper.toLocalDate(e):new Date(e);return n(51).dateTimeHelper.format(i,t.hash.format)}},252:function(e,t,n){"use strict";var i=n(444).withDefaults(n(505).oneline);e.exports=function(e,t){return(void 0===t.hash.escapeExpression||t.hash.escapeExpression)&&(e=n(20).Utils.escapeExpression(e)),new(n(20).SafeString)(i(e,t.hash))}},254:function(e,t,n){e.exports=n.p+"assets/images/loader-db80c58.gif"},257:function(e,t,n){"use strict";function i(e){e&&-1===this.getRecipientIds().indexOf(e.id)&&this.set("recipients",this.get("recipients").concat(e))}function r(e){return e instanceof n(64)?a(e):e instanceof n(279)?n(56).resolve(o(e)):f(e)?n(56).reject():n(64).resolve(e).then(a)}function o(e){return{id:e.resource.resource_id,username:e.get("output"),avatar_url:e.get("artwork_url")}}function s(e){return e.hasDataForView(["username","avatar_url"])?n(56).resolve(e):e.fetch()}function a(e){return s(e).then(function(){return{id:e.id,username:e.get("username"),avatar_url:e.get("avatar_url")}})}function l(e,t){var i,r=this;t!==this._lastBodyValue&&(this._lastBodyValue=t,n(174).getAudibleModels(t.match(n(174).scLinksRegexGlobal)||[]).done(function(e){i=n(3).reduce(e,function(e,t){return t&&t.audible&&e.push(t.audible),e},[]),r.set("attachments",i)}))}function u(e,t){t&&!t.isValid&&m(["messages","new-message-validation-error"])}function c(e){u.call(this,"recipients",e)}function d(e){u.call(this,"body",e)}function h(e){var t,i;t=n(3).reject(this.get("attachments"),function(t){return t.resource_id===e?(i=t,!0):!1}),this.set("attachments",t),p.call(this,i)}function p(e){var t=this.get("body"),i=e.getShareURL(),r=new RegExp("\\n{0,2}"+n(253).regexpEscape(i)+"\\S*\\n{0,2}","igm");t=t.replace(r,""),this.set("body",t)}function f(e){return"string"==typeof e&&"soundcloud"===e.toLowerCase()}function g(){this.clearStoredValues(),this.set("body","")}var m=n(59).trackV0Click;e.exports=n(80).extend(n(1366),{fields:{recipients:{defaultValue:[]},body:{defaultValue:""},links:{defaultValue:[]},attachments:{defaultValue:[]}},constraints:{body:[[n(70),{message:n(51).t("Enter a message.")}],[n(108),{maxLength:2e4,message:n(51).t("Enter a message that is up to [[maxLength]] characters.")}]],recipients:[[n(70),{message:n(51).t("Enter a recipient.")}]]},buttons:{send:{label:n(51).t("Send"),action:"send"}},serialization:{restoreAndStoreOnSetup:!0,fields:["body"]},actions:{"default":"send",send:function(e){var t=n(56).defer(),i=this.get("recipients")[0],r=this.get("body");return this.validate().done(function(o){o?n(342).send(i,r,e.showSuccessMessage).done(t.resolve).fail(t.reject):t.reject()}).fail(t.reject),t.done(g.bind(this)),t}},setup:function(e,t){this.serialization.storeKey=t.conversationId&&"conversation_"+t.conversationId,this.listenTo(this,"change:body",l).listenTo(this,"validation:body",d).listenTo(this,"validation:recipients",c).listenTo(this,"removeSoundFromAttached",h)},getRecipientIds:function(){return n(3).pluck(this.get("recipients"),"id")},addRecipient:function(e){var t=r(e);return t.done(i.bind(this))},addAttachment:function(e,t){this.set("body",this.get("body").replace(/\n*$/,"\n"+e.getShareURL({type:t})+" "))}})},278:function(e,t,n){"use strict";e.exports=n(66).extend({resource_type:"search",baseUrl:null,submodelMap:{origin:null},createSubmodel:function(){var e,t;switch(this.get("kind")){case"user":e=n(64);break;case"track":e=n(67);break;case"playlist":e=n(88)}t=new e(this.get("origin")),this.addSubmodel(t),this.resource=t},getAudible:function(){switch(this.get("kind")){case"track":case"playlist":return this.resource;default:return null}},isPromoted:function(){return"promoted"===this.get("campaign")}},{hashFn:function(e){return e.resource_id||e.id}})},279:function(e,t,n){"use strict";function i(e){return e?e.replace(/^https?:.+?\w\//,"/"):null}function r(){if(this.resource){var e=s(this.getEntityType());this.set({artwork_url:this.resource.get(e.artwork_url),link:i(this.resource.get(e.link))})}}function o(){this.listenTo(this.resource,n(3).map(s(this.getEntityType()),function(e){return"change:"+e}).join(" "),r)}function s(e){switch(e){case"user":return{artwork_url:"avatar_url",link:"permalink_url"};case"track":return{artwork_url:"artwork_url",link:"permalink_url"}}}function a(e){switch(e){case"user":return n(64);case"track":return n(67);default:return null}}e.exports=n(66).extend({resource_type:"shortcut",url:null,submodelMap:{entity:null},hashCode:null,setup:function(){this.hashCode=this.get("output")+"%%"+this.getEntityType()},createSubmodel:function(){var e=a(this.getEntityType());null!==e&&(this.resource=new e(this.get("entity")),this.addSubmodel(this.resource),o.call(this)),r.call(this)},fetch:function(){return this.resource?this.resource.fetch():n(56).resolve({})},getEntityType:function(){switch(this.get("kind")){case"track":case"like":return"track";case"user":case"following":return"user";case"query":return"query"}},isQuery:function(){return"query"===this.get("kind")},equivalentTo:function(e){return e.hashCode===this.hashCode}})},288:function(e,t,n){"use strict";e.exports=function(){var e,t,i=n(3).toArray(arguments);return e=i.pop(),t=e.sep||"",i.join(t)}},295:function(e,t,n){"use strict";var i,r=n(740),o=n(1142),s=n(2276),a=n(741);i=e.exports=function(e,t){var n,i,s,l,u;return arguments.length<2||"string"!=typeof e?(l=t,t=e,e=null):l=arguments[2],null==e?(n=s=!0,i=!1):(n=a.call(e,"c"),i=a.call(e,"e"),s=a.call(e,"w")),u={value:t,configurable:n,enumerable:i,writable:s},l?r(o(l),u):u},i.gs=function(e,t,n){var i,l,u,c;return"string"!=typeof e?(u=n,n=t,t=e,e=null):u=arguments[3],null==t?t=void 0:s(t)?null==n?n=void 0:s(n)||(u=n,n=void 0):(u=t,t=n=void 0),null==e?(i=!0,l=!1):(i=a.call(e,"c"),l=a.call(e,"e")),c={get:t,set:n,configurable:i,enumerable:l},u?r(o(u),c):c}},296:function(e,t,n){e.exports=n.p+"assets/images/close-light-3cc6150.png"},307:function(e,t){e.exports=function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){function i(e){return this._hooksPause.every(function(t){return t(e)})}function r(e){var t=e.resource_id||e.id||e.cid;if(!t)throw new Error("Your model should have a unique `id`, `cid` or `resource_id` property");return t}function o(e){H=e,e&&(j.AudioManagerStates=e.States)}function s(){var e=Y();return f.call(this,!0).done(function(t){var n=g(t,this.streamInfo.protocol);n.length?e.resolve(n[0].url):e.reject()}.bind(this)).fail(function(){e.reject()}),e.promise()}function a(e){var t=this.options,n=s.bind(this),i=e.map(function(e){return{id:this.getId(),src:e.url,duration:te.result(t.duration),title:this.options.title,mimeType:e.mimeType,forceSingle:t.useSinglePlayer,maxBufferLength:this._pausedMaxBufferLength,streamUrlProvider:n}},this),r=H.createAudioPlayer(i);return this.streamInfo=e[i.indexOf(r.getDescriptor())],r}function l(e,t){var n=t?"on":"off";e[n]("state-change",M,this)[n]("position-change",c,this)[n]("metadata",u,this)}function u(){this.trigger(G.METADATA)}function c(){this._prevPosition!==this.currentTime()&&(this.trigger(G.TIME),this._prevPosition=this.currentTime())}function d(){this._initAudioDefer&&(this._initAudioDefer.reject(),this._initAudioDefer=null,this.streamInfo=null,this.streamInfos=null)}function h(){d.call(this),this.controller&&(this._storedPosition=this.currentTime(),this.controller.kill(),this.controller=null,this.trigger(G.RESET))}function p(){this._registerPlays=!0,this.pause(),this.trigger(G.FINISH)}function f(e){var t=Y(),n=this.streamInfos&&!e;return n?t.resolve(this.streamInfos):m.call(this).done(function(e){var n=Z.choosePreferredStreams(e,this.options);n.length?t.resolve(n):(this.trigger(G.NO_PROTOCOL),$.warn("(%s) Could not match a protocol of given media descriptor to one of the supported protocols (%s), aborting attempt to play.",this.getId(),this.options.protocols),t.reject())}.bind(this)).fail(function(e){$.warn("(%s) Stream request failed with status: %d",this.getId(),e.status),v.call(this,e),y.call(this,e),_.call(this,e),b.call(this,e),t.reject()}.bind(this)),t.promise()}function g(e,t){return e.filter(function(e){return e.protocol===t})}function m(){if(this.options.streamUrls&&(!this._usedPrefetchUrls||!this.options.streamUrlsEndpoint)){var e,t=Y();return this._usedPrefetchUrls=!0,e=te.result(this.options.streamUrls),t.resolve(e),t.promise()}return this.ajax({type:"GET",url:te.result(this.options.streamUrlsEndpoint),dataType:"json",async:this.options.asyncFetch,timeout:this.options.asyncFetch?le:ae})}function _(e){e.status>=400&&e.status<500&&this.trigger(G.REQUEST_FAILURE)}function v(e){var t=e.status>=400&&e.status<500&&-1!==(e.responseText||"").indexOf("geo_blocked");t&&this.trigger(G.GEO_BLOCKED)}function y(e){0===e.status&&this.trigger(G.NO_CONNECTION)}function b(e){e.status>=500&&this.trigger(G.API_FAILURE)}function w(){return this.controller?this.controller.getCapabilities().needsUrlRefresh:!0}function x(e){if(!w.call(this))return!0;var t=this._initAudioDefer&&this._initAudioDefer.state(),n=Z.streamValidForPlayingFrom(this.streamInfo,e);return this.controller&&this.controller.hasStreamUrlProvider&&this.controller.hasStreamUrlProvider()?!0:t&&("pending"===t||"resolved"===t&&n)}function k(e){e&&!this._bufferingTimeout?this._bufferingTimeout=window.setTimeout(function(){this._isBuffering=!0,this.trigger(G.BUFFERRING_START)}.bind(this),ue):e||(this._bufferingTimeout&&(window.clearTimeout(this._bufferingTimeout),this._bufferingTimeout=null),this._isBuffering&&(this._isBuffering=!1,this.trigger(G.BUFFERRING_END)))}function S(){this.off(G.TIME,this.seekTimeEventHandler),this.trigger(G.SEEKED),this.seekTimeEventHandler=null}function E(){this._errorRecoveryFlagsResetTimeout=window.setTimeout(function(){this._errorRecoveryTime=null,this._errorRecoveryCounts=0}.bind(this),pe)}function T(){this._errorRecoveryFlagsResetTimeout&&window.clearTimeout(this._errorRecoveryFlagsResetTimeout)}function A(e){var t=this.isPlaying(),n=Date.now();return T.call(this),this._errorRecoveryTime&&this._errorRecoveryTime+de>n&&this._errorRecoveryCounts>he?(this.pause(),this.trigger(G.AUDIO_ERROR,this,e),void h.call(this)):(this._errorRecoveryTime=Date.now(),this._errorRecoveryCounts++,h.call(this),void(t&&this.play({seek:this.currentTime(),userInitiated:!1})))}function P(e){this.logAudioError({error_code:e,protocol:this.streamInfo?this.streamInfo.protocol:void 0,player_type:this.controller?this.controller.getType():void 0,host:this.streamInfo?ee.getUrlHost(this.streamInfo.url):void 0,url:this.streamInfo?this.streamInfo.url:void 0})}function C(){var e,t=H.Errors;if(!this.controller)return $.error("(%s) Controller is null, aborting error handler.",this.getId(),this),P.call(this,null),void A.call(this,null);if(e=this.controller&&this.controller.getErrorID(),$.error("(%s) %s",this.getId(),this.controller.getErrorMessage?this.controller.getErrorMessage():"Controller does not provide getErrorMessage()"),e&&(0===e.indexOf("FLIPPER_")||O(e,"MSE","GENERIC","HTML5_AUDIO_DECODE","HTML5_AUDIO_SRC_NOT_SUPPORTED","FLASH_PROXY","FLASH_RTMP_CONNECT_FAILED","FLASH_RTMP_CANNOT_PLAY_STREAM"))&&P.call(this,e),e&&0===e.indexOf("FLIPPER_"))this.trigger(G.AUDIO_ERROR,this,e),h.call(this);else switch(e){case t.FLASH_PROXY_CANT_LOAD_FLASH:this.trigger(G.FLASH_NOT_LOADED);break;case t.FLASH_PROXY_FLASH_BLOCKED:this.trigger(G.FLASH_BLOCK);break;case t.FLASH_RTMP_CONNECT_FAILED:te.without(this.options.protocols,J.RTMP);case t.FLASH_RTMP_CANNOT_PLAY_STREAM:case t.FLASH_RTMP_CONNECT_CLOSED:case t.HTML5_AUDIO_NETWORK:case t.HTML5_AUDIO_ABORTED:case t.HTML5_AUDIO_DECODE:case t.HTML5_AUDIO_SRC_NOT_SUPPORTED:case t.GENERIC_AUDIO_ENDED_EARLY:case t.MSE_BAD_OBJECT_STATE:case t.MSE_HLS_NOT_VALID_PLAYLIST:case t.MSE_HLS_PLAYLIST_NOT_FOUND:case t.MSE_HLS_SEGMENT_NOT_FOUND:A.call(this,e);break;case t.GENERIC_AUDIO_OVERRUN:p.call(this);break;default:$.error("(%s) Unhandled audio error code: %s",this.getId(),e,this)}}function D(e,t){switch(this.options.debug&&R.call(this,e,t),e){case G.PAUSE:this._isPlaying=!1,this._isPlayActionQueued=!1,B.call(this);break;case G.PLAY:var n=t;this.toggleMute(ie.muted),this.setVolume(ie.volume),this._isPlaying=!1,this._isPlayActionQueued=!0,B.call(this),this._userInitiatedPlay=void 0!==n.userInitiated?!!n.userInitiated:!0,L.call(this);break;case G.PLAY_START:this._isPlaying=!0,this._isPlayActionQueued=!1,B.call(this),this._registerPlays&&this.registerPlay();break;case G.BUFFERRING_START:case G.SEEK:this._isPlaying&&(this._isPlaying=!1,this._isPlayActionQueued=!0);break;case G.BUFFERRING_END:case G.SEEKED:this._isPlayActionQueued&&(this._isPlaying=!0,this._isPlayActionQueued=!1);break;case G.NO_CONNECTION:this.pause(),this._hasNoConnection=!0,this._noConnectionSince=Date.now();break;case G.API_FAILURE:this.pause();break;case G.REQUEST_FAILURE:this._isPlaying=!1,this._isPlayActionQueued=!1,B.call(this);break;case G.GEO_BLOCKED:this._isGeoBlocked=!0;break;case G.NO_STREAMS:k.call(this,!1),d.call(this),F.call(this);break;case G.STREAMS:this._isGeoBlocked=!1,this._noConnectionSince=null,this._hasNoConnection=!1;break;case G.ONLINE:N.call(this);break;case G.OFFLINE:}}function M(e){var t=H.States,n=H.Errors;switch(e){case t.IDLE:I.call(this),this.controller&&this.controller.getErrorID()===n.FLASH_PROXY_FLASH_BLOCKED&&this.trigger(G.FLASH_UNBLOCK);break;case t.PAUSED:I.call(this),k.call(this,!1),this.seekTimeEventHandler&&this.isPaused()&&S.call(this),this.isPlaying()&&this.trigger(G.PAUSE,{position:this.currentTime()});break;case t.PLAYING:I.call(this),k.call(this,!1),E.call(this),this.trigger(G.PLAY_RESUME);break;case t.LOADING:case t.SEEKING:I.call(this),k.call(this,!0);break;case t.ENDED:I.call(this),p.call(this);break;case t.ERROR:k.call(this,!1),C.call(this)}this.trigger(G.STATE_CHANGE,e)}function R(e,t){var n=this.options.title;n=n&&n.length?" ["+n.replace(/\s/g,"").substr(0,6)+"]":"",e===G.STATE_CHANGE?$("(%s)%s Event: %s (%s)",this.getId(),n,e,t):e!==G.TIME||this._loggedTime?e!==G.TIME&&$("(%s)%s Event: %s",this.getId(),n,e):$("(%s)%s Event: %s %dms",this.getId(),n,e,this.currentTime()),this._loggedTime=e===G.TIME}function I(){this._initAudioDefer&&this._initAudioDefer.resolve()}function O(e){return void 0===H.Errors[e]?!1:Array.prototype.slice.call(arguments,1).some(function(t){return 0===e.indexOf(t)})}function L(){function e(){var e=window.navigator.onLine;$("Navigator `onLine` status is now: "+e),window.setTimeout(function(){window.navigator.onLine===e&&this.trigger(e?G.ONLINE:G.OFFLINE)}.bind(this),500)}this._onlineEventsRegistered||(this._onlineEventsRegistered=!0,window.addEventListener("online",e.bind(this)),window.addEventListener("offline",e.bind(this)))}function N(){if(this.hasNoConnection()&&this._isPlayRetryQueued){var e=Date.now()-this._noConnectionSince;this._isPlayRetryQueued=!0,e<this.options.retryAfterNoConnectionEventTimeout&&this.play({userInitiated:!1})}}function F(){this.hasNoConnection()&&!this._userInitiatedPlay&&(this._isPlayRetryQueued=!0)}function B(){var e=this.controller;e&&e.getCapabilities().canControlBuffer&&e.setMaxBufferLength(this._isPlaying||this._isPlayActionQueued?this.options.playingMaxBufferLength:this._pausedMaxBufferLength)}function U(e,t,n){return Math.min(n,Math.max(t,e))}var j,H,$,z=n(1),q=n(6),W=n(8),V=n(9),Y=n(14).Deferred,G=n(7),K=n(18),X=n(10),J=n(19),Q=n(20),Z=n(22),ee=n(12),te=n(13),ne=n(23),ie={muted:!1,volume:1},re=[],oe={},se={soundId:oe,duration:oe,title:null,registerEndpoint:null,streamUrlsEndpoint:null,resourceId:!1,debug:!1,asyncFetch:!0,useSinglePlayer:!0,pausedMaxBufferLength:2e3,playingMaxBufferLength:9e4,protocols:[J.PREVIEW,J.HLS_ENC,J.HLS,J.HTTP,J.RTMP],extensions:[K.MP3],maxBitrate:1/0,mediaSourceEnabled:!0,mseFirefox:!0,mseSafari:!0,eventLogger:null,logErrors:!0,logPerformance:!0,ajax:null,retryAfterNoConnectionEventTimeout:6e4,fadeOutDurationOnPause:0,fadeOutDurationOnConcurrentStreaming:0,fadeOutDurationOnFinish:0,fadeOutAlgo:ne.VolumeAutomator.Algos.EaseInOut,previewOnly:!1},ae=6e3,le=6e3,ue=400,ce=6e4,de=6e3,he=3,pe=3e4;j=e.exports=function(e,t){if(1===arguments.length?t=e:j.setAudioManager(e),!H)throw new Error("SCAudio: AudioManager instance must be set with `SCAudio.setAudioManager()` or passed via the constructor");this.options=te.extend({},se,t);var n=Object.keys(this.options).filter(function(e){return this.options[e]===oe},this);if(n.length)throw new Error("SCAudio: pass into constructor the following options: "+n.join(", "));if(!this.options.streamUrlsEndpoint&&!this.options.streamUrls)throw new Error("SCAudio: one/both of streamUrlsEndpoint and streamUrls options are required.");Q.prioritizeAndFilter(this.options),this.controller=null,this.streamInfo=null,this.streamInfos=null,this._pausedMaxBufferLength=0,this._userInitiatedPlay=this._registerPlays=!0,this._registerCounts=this._errorRecoveryCounts=0,this._isPlayActionQueued=this._onlineEventsRegistered=this._usedPrefetchUrls=this._isPlaying=this._isBuffering=this._hasNoConnection=!1,this._initAudioDefer=this._expirationTimeout=this._bufferingTimeout=this._errorRecoveryTime=this._errorRecoveryFlagsResetTimeout=this._storedPosition=this._prevPosition=this._noConnectionSince=null,this.options.debug&&(this._loggedTime=!1),this._modelListeners={},this._hooksPause=[],this.audioPerfMonitor=new W(this,this.logAudioPerformance.bind(this)),this.audioLogger=new q(this),this.volumeAutomator=new ne.VolumeAutomator(this),$=$||V({enabled:this.options.debug,buffer:!0,label:"scaudio"})},te.extend(j.prototype,X,{constructor:j,initAudio:function(){return this._initAudioDefer||(this._initAudioDefer=Y(),f.call(this).done(function(e){var t=!0;this.streamInfos&&(t=!1),this.streamInfos=e,t&&this.trigger(G.STREAMS),this.controller=a.call(this,e),l.call(this,this.controller,!0),M.call(this,this.controller.getState())}.bind(this)).fail(function(){this.trigger(G.NO_STREAMS)}.bind(this)),this._initAudioDefer.done(function(){this.trigger(G.CREATED)}.bind(this))),this._initAudioDefer.promise()},enablePreloading:function(){this._pausedMaxBufferLength=this.options.pausedMaxBufferLength,B.call(this)},disablePreloading:function(){this._pausedMaxBufferLength=0,B.call(this)},updateOptions:function(e){te.extend(this.options,e)},registerPlay:function(){var e=this.options.soundId,t=this.options.registerEndpoint;return re.indexOf(e)>-1?!1:(re.push(e),window.setTimeout(function(){var t=re.indexOf(e);t>-1&&re.splice(t,1)},ce),this._registerCounts++,this._registerPlays=!1,this.trigger(G.REGISTERED),t&&this.ajax({type:"POST",url:te.result(t),dataType:"json"}),!0)},toggle:function(){this[this.isPaused()?"play":"pause"]()},play:function(e){var t;if(e&&null!=e.seek)t=e.seek;else{if(this.isPlaying())return;t=this.currentTime()}e=te.extend({},e,{position:t}),this.trigger(G.PLAY,e),x.call(this,t)||(h.call(this),this._isPlayActionQueued=!0),this.initAudio().done(function(){this._isPlayActionQueued&&(this._storedPosition=null,this.trigger(G.PLAY_START,e),this.controller&&this.controller.play(t))}.bind(this)),k.call(this,!0)},pause:function(e){k.call(this,!1),this.isPaused()||(e=te.extend({},e,{position:this.currentTime()}),i.call(this,e)&&(this.trigger(G.PAUSE,e),this.callPauseOnController()))},callPauseOnController:function(){this.controller&&this.controller.pause()},registerHook:function(e,t){switch(e){case"pause":this._hooksPause.push(t);break;default:throw new Error("can`t register hook for "+e)}},getListenTime:function(){return this.audioLogger?this.audioLogger.getListenTime():0},dispose:function(){this.audioLogger=null,this.audioPerfMonitor=null,te.without(re,this.options.soundId),window.clearTimeout(this._bufferingTimeout),d.call(this),this.controller&&(this.controller.kill(),this.controller=null),delete this.controller,this.trigger(G.DESTROYED),this.off()},seek:function(e){return this.controller?e>=te.result(this.options.duration)?void p.call(this):(this.seekTimeEventHandler&&this.off(G.TIME,this.seekTimeEventHandler),this.seekTimeEventHandler=te.after(2,function(){S.call(this)}.bind(this)),this.on(G.TIME,this.seekTimeEventHandler),this.trigger(G.SEEK,{from:this.currentTime(),to:e}),this.isPlaying()&&!x.call(this,e)?(h.call(this),void this.play({seek:e})):void this.controller.seek(e)):void 0},seekRelative:function(e){if(this.controller){var t=U(this.currentTime()+e,0,this.duration());this.seek(t)}},currentTime:function(){return this._storedPosition?this._storedPosition:this.controller?this.controller.getCurrentPosition():0},loadProgress:function(){var e=0;return this.controller&&(e=this.controller.getLoadedPosition()/this.controller.getDuration(),e=e>=.99?1:e),e},duration:function(){return this.controller&&this.controller.getDuration()||0},buffered:function(){return this.controller&&this.controller.getLoadedPosition()||0},isPaused:function(){return!this.isPlaying()},isBuffering:function(){return this._isBuffering},isPlaying:function(){return this._isPlayActionQueued||this._isPlaying},isLoading:function(){return!(!this.controller||this.controller.getState()!==H.States.LOADING)},hasNoConnection:function(){return!!this._hasNoConnection},hasStreamInfo:function(){return!!this.streamInfos},isGeoBlocked:function(){return!!this._isGeoBlocked},toggleMute:function(e){j.toggleMute(e)},isMuted:function(){return j.isMuted()},setVolume:function(e){j.setVolume(e)},getVolume:function(){return j.getVolume()},logAudioPerformance:function(e){this.getEventLogger()&&this.options.logPerformance&&this.getEventLogger().audioPerformance(e)},logAudioError:function(e){this.getEventLogger()&&this.options.logErrors&&this.getEventLogger().audioError(e)},getAudioManagerStates:function(){return H.States},getId:function(){return this.options.resourceId||this.options.soundId},getEventLogger:function(){return this.options.eventLogger},registerModelEventListener:function(e,t){var n=r(e);if(this._modelListeners[n])throw new Error("Data model is already registered (forgot to unregister it or registering twice?)");this._modelListeners[n]=t=t.bind(this,e),this.on("all",t)},unregisterModelEventListener:function(e){var t=r(e);this._modelListeners[t]&&(this.off("all",this._modelListeners[t]),delete this._modelListeners[t])},ajax:function(e){return this.options.ajax?this.options.ajax(e):z(e)},trigger:function(e,t){D.call(this,e,t),X.trigger.call(this,e,t)}}),te.extend(j,{getSettings:function(){return ie},setSettings:function(e){te.extend(ie,e)},setAudioManager:o,setAudioManagerOnce:te.once(o),toggleMute:function(e){ie.muted=void 0===e?!ie.muted:!!e,H&&H.setVolume(ie.muted?0:1)},isMuted:function(){return ie.muted},setVolume:function(e){ie.volume=void 0===e?1:e,H&&H.setVolume(ie.volume)},getVolume:function(){return ie.volume},Extensions:K,Protocols:J,Events:G,FadeOutAlgos:ne.VolumeAutomator.Algos,BUFFER_DELAY:ue,PLAY_REGISTRATION_TIMEOUT:ce})},function(e,t,n){var i=n(2).Deferred,r=4;e.exports=function(e){var t,n,o,s,a,l,u,c;e&&(o=e.data||null,n=e.url||"",t=e.type||"GET",s=e.dataType||"text",a=e.async,l=e.timeout,u=e.beforeSend||null);var d=i();a=a!==!1;var h=new XMLHttpRequest;return h.open(t,n,a),a&&(h.responseType="text"),u&&u(h),h.onreadystatechange=function(){if(h.readyState===r)if(clearTimeout(c),0!==h.status&&h.status<400){var e=h.responseText;if("json"===s)try{e=JSON.parse(e)}catch(t){return void d.reject(h)}d.resolve(e)}else d.reject(h)},null!=l&&(c=setTimeout(function(){h.readyState!==r&&(h.abort(),d.reject(h))},l)),h.send(o),d.promise()}},function(e,t,n){e.exports=n(3)},function(e,t,n){/*!
		* jquery-deferred
		* Copyright(c) 2011 Hidden <zzdhidden@gmail.com>
		* MIT Licensed
		*/
var i=e.exports=n(4),r=Array.prototype.slice;i.extend({Deferred:function(e){var t=[["resolve","done",i.Callbacks("once memory"),"resolved"],["reject","fail",i.Callbacks("once memory"),"rejected"],["notify","progress",i.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return i.Deferred(function(n){i.each(t,function(t,r){var s=r[0],a=e[t];o[r[1]](i.isFunction(a)?function(){var e=a.apply(this,arguments);e&&i.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===o?n:this,[e])}:n[s])}),e=null}).promise()},promise:function(e){return null!=e?i.extend(e,r):r}},o={};return r.pipe=r.then,i.each(t,function(e,i){var s=i[2],a=i[3];r[i[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),o[i[0]]=s.fire,o[i[0]+"With"]=s.fireWith}),r.promise(o),e&&e.call(o,o),o},when:function(e){var t,n,o,s=0,a=r.call(arguments),l=a.length,u=1!==l||e&&i.isFunction(e.promise)?l:0,c=1===u?e:i.Deferred(),d=function(e,n,i){return function(o){n[e]=this,i[e]=arguments.length>1?r.call(arguments):o,i===t?c.notifyWith(n,i):--u||c.resolveWith(n,i)}};if(l>1)for(t=new Array(l),n=new Array(l),o=new Array(l);l>s;s++)a[s]&&i.isFunction(a[s].promise)?a[s].promise().done(d(s,o,a)).fail(c.reject).progress(d(s,n,t)):--u;return u||c.resolveWith(o,a),c.promise()}})},function(e,t,n){function i(e){var t=s[e]={};return r.each(e.split(o),function(e,n){t[n]=!0}),t}var r=e.exports=n(5),o=/\s+/,s={};r.Callbacks=function(e){e="string"==typeof e?s[e]||i(e):r.extend({},e);var t,n,o,a,l,u,c=[],d=!e.once&&[],h=function(i){for(t=e.memory&&i,n=!0,u=a||0,a=0,l=c.length,o=!0;c&&l>u;u++)if(c[u].apply(i[0],i[1])===!1&&e.stopOnFalse){t=!1;break}o=!1,c&&(d?d.length&&h(d.shift()):t?c=[]:p.disable())},p={add:function(){if(c){var n=c.length;!function i(t){r.each(t,function(t,n){var o=r.type(n);"function"===o?e.unique&&p.has(n)||c.push(n):n&&n.length&&"string"!==o&&i(n)})}(arguments),o?l=c.length:t&&(a=n,h(t))}return this},remove:function(){return c&&r.each(arguments,function(e,t){for(var n;(n=r.inArray(t,c,n))>-1;)c.splice(n,1),o&&(l>=n&&l--,u>=n&&u--)}),this},has:function(e){return r.inArray(e,c)>-1},empty:function(){return c=[],this},disable:function(){return c=d=t=void 0,this},disabled:function(){return!c},lock:function(){return d=void 0,t||p.disable(),this},locked:function(){return!d},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!c||n&&!d||(o?d.push(t):h(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!n}};return p}},function(e,t){function n(e){return null==e?String(e):c[u.call(e)]||"object"}function i(e){return"function"===l.type(e)}function r(e){return"array"===l.type(e)}function o(e,t,n){var r,o=0,s=e.length,a=void 0===s||i(e);if(n)if(a){for(r in e)if(t.apply(e[r],n)===!1)break}else for(;s>o&&t.apply(e[o++],n)!==!1;);else if(a){for(r in e)if(t.call(e[r],r,e[r])===!1)break}else for(;s>o&&t.call(e[o],o,e[o++])!==!1;);return e}function s(e){return e&&"object"===l.type(e)?!0:!1}function a(){var e,t,n,i,r,o,s=arguments[0]||{},a=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},a=2),"object"==typeof s||l.isFunction(s)||(s={}),u===a&&(s=this,--a);u>a;a++)if(null!=(e=arguments[a]))for(t in e)n=s[t],i=e[t],s!==i&&(c&&i&&(l.isPlainObject(i)||(r=l.isArray(i)))?(r?(r=!1,o=n&&l.isArray(n)?n:[]):o=n&&l.isPlainObject(n)?n:{},s[t]=l.extend(c,o,i)):void 0!==i&&(s[t]=i));return s}var l=e.exports={type:n,isArray:r,isFunction:i,isPlainObject:s,each:o,extend:a,noop:function(){}},u=Object.prototype.toString,c={};"Boolean Number String Function Array Date RegExp Object".split(" ").forEach(function(e){c["[object "+e+"]"]=e.toLowerCase()})},function(e,t,n){function i(e){this.listenTime+=e.from-this.currentTime,this.currentTime=e.to}function r(e){this.listenTime+=e.position-this.currentTime,this.currentTime=e.position}function o(e){this.currentTime=e.position}var s,a=n(7);s=e.exports=function(e){this.scAudio=e,this.listenTime=0,this.currentTime=0,this.scAudio.on(a.SEEK,i,this).on(a.PLAY_START,o,this).on(a.PAUSE,r,this)},s.prototype={constructor:s,getListenTime:function(){return this.listenTime+this.scAudio.currentTime()-this.currentTime}}},function(e,t){var n={CREATED:"created",STATE_CHANGE:"state-change",DESTROYED:"destroyed",PLAY:"play",PLAY_START:"play-start",PLAY_RESUME:"play-resume",METADATA:"metadata",PAUSE:"pause",FINISH:"finish",RESET:"reset",SEEK:"seek",SEEKED:"seeked",GEO_BLOCKED:"geo_blocked",BUFFERRING_START:"buffering_start",BUFFERRING_END:"buffering_end",BUFFERING_START:"buffering_start",BUFFERING_END:"buffering_end",FLASH_NOT_LOADED:"flash_not_loaded",FLASH_BLOCK:"flash_blocked",FLASH_UNBLOCK:"flash_unblocked",AUDIO_ERROR:"audio_error",TIME:"time",NO_STREAMS:"no_streams",STREAMS:"streams",NO_PROTOCOL:"no_protocol",NO_CONNECTION:"no_connection",API_FAILURE:"api_failure",REQUEST_FAILURE:"request_failure",REGISTERED:"registered",ONLINE:"online",OFFLINE:"offline"};e.exports=n},function(e,t,n){function i(){return this.scAudio.controller?this.controller?void y.warn("(%s) Setup was called while it was already initialized (returned with a no-op)",this.scAudio.getId()):(y("(%s) Initialized",this.scAudio.getId()),this.controller=this.scAudio.controller,this.protocol=this.scAudio.streamInfo.protocol,this.host=k.getUrlHost(this.scAudio.streamInfo.url),void(o.call(this)&&this.controller.on("audio-performance",s,this))):void y.warn("Cant initialize when controller is null")}function r(){this.controller&&(y("(%s) Reset",this.scAudio.getId()),this.controller.off("audio-performance",s,this),this.controller=this.protocol=this.host=null,this.timeToPlayMeasured=!1)}function o(){return this.controller&&this.controller.getCapabilities().generatesAudioPerformanceEvents}function s(e){o.call(this)&&"audio_performance"===e.event&&this.log(e.payload)}function a(e){var t=this.scAudio.getAudioManagerStates();e===t.LOADING?this.timeToPlayMeasured&&f.call(this):S.isNull(this.bufferingStartTime)||g.call(this)}function l(){this.metadataLoadStartTime=Date.now()}function u(){return S.isNull(this.metadataLoadStartTime)?void y.warn("(%s) onMetadataEnd was called without onMetadataStart being called before.",this.scAudio.getId()):(o.call(this)||this.log({type:"metadata",latency:Date.now()-this.metadataLoadStartTime}),void(this.metadataLoadStartTime=null))}function c(){this.playClickTime=Date.now()}function d(){if(!this.timeToPlayMeasured){if(S.isNull(this.playClickTime))return void y.warn("(%s) onPlayResume was called without onPlayStart being called before.",this.scAudio.getId());o.call(this)||this.log({type:"play",latency:Date.now()-this.playClickTime}),this.playClickTime=null,this.timeToPlayMeasured=!0}}function h(){this.scAudio.isPaused()||(this.seekStartTime=Date.now())}function p(){if(!this.scAudio.isPaused()){if(S.isNull(this.seekStartTime))return void y.warn("(%s) onSeekEnd was called without onSeekStart being called before.",this.scAudio.getId());o.call(this)||this.log({type:"seek",latency:Date.now()-this.seekStartTime}),this.seekStartTime=null}}function f(){this.bufferingStartTime||(this.bufferingStartTime=Date.now())}function g(){return S.isNull(this.bufferingStartTime)?void y.warn("(%s) onBufferingEnd was called without onBufferingStart being called before.",this.scAudio.getId()):(m.call(this),void(this.bufferingStartTime=null))}function m(){S.isNull(this.bufferingStartTime)||(S.isNull(this.bufferingTimeAccumulated)&&(this.bufferingTimeAccumulated=0),this.bufferingTimeAccumulated+=Date.now()-this.bufferingStartTime)}function _(){m.call(this),S.isNull(this.bufferingTimeAccumulated)||(o.call(this)||this.log({type:"buffer",latency:this.bufferingTimeAccumulated}),this.bufferingStartTime=this.bufferingTimeAccumulated=null)}var v,y,b=n(9),w=n(7),x=n(10),k=n(12),S=n(13);v=e.exports=function(e,t){this.scAudio=e,this.logFn=t,this.controller=null,this.reset(),y=y||b({enabled:e.options.debug,buffer:!0,label:"audioperf"}),e.on(w.CREATED,i,this).on(w.RESET,r,this).on(w.SEEK,h,this).on(w.SEEKED,p,this).on(w.PLAY,c,this).on(w.PLAY_START,l,this).on(w.PLAY_RESUME,d,this).on(w.PAUSE,_,this).on(w.FINISH,_,this).on(w.STATE_CHANGE,a,this).on(w.METADATA,u,this).on(w.DESTROYED,r,this)},S.extend(v.prototype,x,{constructor:v,log:function(e){if(!this.controller)return void y.warn("(%s) Monitor log was called while controller is null (returned with a no-op)",this.scAudio.getId());var t=this.controller.getType();e=S.extend({},{protocol:this.protocol,host:this.host,player_type:t},e),e.playertype?e.player_type=e.playertype:e.player_type&&(e.playertype=e.player_type),y("(%s) event type: %s, latency: %d, protocol: %s, host: %s playertype: %s",this.scAudio.getId(),e.type,e.latency,e.protocol,e.host,e.playertype),this.logFn(e)},reset:function(){this.bufferingStartTime=this.bufferingTimeAccumulated=this.playClickTime=this.seekStartTime=this.metadataLoadStartTime=null,this.timeToPlayMeasured=!1}})},function(e,t){"use strict";function n(){function e(e,n){if(p){for(var i=arguments.length,r=Array(i>2?i-2:0),o=2;i>o;o++)r[o-2]=arguments[o];"string"==typeof n?n=" "+n:(r.unshift(n),n="");var s=[t()+" | "+T+(k?"%c":"")+n].concat(A,r);m?E.push({level:e,logArgs:s})>x&&E.shift():h[e].apply(h,s)}}function t(){var e=new Date,t=null===S?0:e-S,n=k?"%c":"";return S=+e,n+i(e)+(n+" ("+n)+r("+"+t+"ms"," ",8)+(n+")")}function n(e){return e.enable=function(){p=!0},e.disable=function(){p=!1},e.bufferOn=function(){m=!0},e.bufferOff=function(){m=!1,E.length=0},e.flush=u()?function(){E.forEach(function(e){var t=e.level,n=e.logArgs;h[t].apply(h,n)}),E.length=0}:function(){},e}var o=c.apply(void 0,arguments),s=o.enabled,p=void 0===s?!0:s,g=o.buffer,m=void 0===g?!1:g,_=o.label,v=void 0===_?"":_,y=o.plainOutput,b=void 0===y?!1:y,w=o.bufferSize,x=void 0===w?1e3:w;if(!u())return n(d.reduce(function(e,t){return e[t]=e},function(){}));h.CL||(h.CL={_cssCounter:0});var k=!b&&l(),S=null,E=[],T=a(v,k),A=k?["color: green","color: grey","color: blue","color: grey",f(v),""]:[],P=h.CL[v]=n(d.reduce(function(t,n){return t[n]=e.bind(null,n),t},e.bind(null,"log")));return P}function i(e){return o(e.getHours())+":"+o(e.getMinutes())+":"+o(e.getSeconds())+"."+r(e.getMilliseconds(),"0",3)}function r(e,t,n){return s(t,n-(""+e).length)+e}function o(e){return r(e,"0",2)}function s(e,t){return t>0?new Array(t+1).join(e):""}function a(e,t){return(t?"%c":"")+(e?e:"")}function l(){if("undefined"==typeof navigator)return!1;var e=navigator.userAgent;return/chrome|firefox|opr/i.test(e)&&!/msie|edge/i.test(e)}function u(){return h&&d.every(function(e){return"function"==typeof h[e]})}function c(){var e=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],t=arguments.length<=1||void 0===arguments[1]?"":arguments[1];return"object"==typeof e&&e||{enabled:e,label:t}}e.exports=n;var d=["log","info","warn","error"],h="undefined"!=typeof console?console:null,p=["color:#fff","border-radius:3px","padding:2px 4px","font-family:sans-serif","text-transform:uppercase","font-size:9px"].join(";")+";",f=function(){var e=["#51613C","#447848","#486E5F","#787444","#6E664E"];return function(t){return t?"background:"+e[h.CL._cssCounter++%e.length]+";"+p:""}}()},function(e,t,n){e.exports=n(11)},function(e,t,n){!function(){function n(){return{keys:Object.keys||function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("keys() called on a non-object");var t,n=[];for(t in e)e.hasOwnProperty(t)&&(n[n.length]=t);return n},uniqueId:function(e){var t=++a+"";return e?e+t:t},has:function(e,t){return o.call(e,t)},each:function(e,t,n){if(null!=e)if(r&&e.forEach===r)e.forEach(t,n);else if(e.length===+e.length)for(var i=0,o=e.length;o>i;i++)t.call(n,e[i],i,e);else for(var s in e)this.has(e,s)&&t.call(n,e[s],s,e)},once:function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}}}}var i,r=Array.prototype.forEach,o=Object.prototype.hasOwnProperty,s=Array.prototype.slice,a=0,l=n();i={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);return i.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!c(this,"once",e,[t,n])||!t)return this;var i=this,r=l.once(function(){i.off(e,r),t.apply(this,arguments)});return r._callback=t,this.on(e,r,n)},off:function(e,t,n){var i,r,o,s,a,u,d,h;if(!this._events||!c(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(s=e?[e]:l.keys(this._events),a=0,u=s.length;u>a;a++)if(e=s[a],o=this._events[e]){if(this._events[e]=i=[],t||n)for(d=0,h=o.length;h>d;d++)r=o[d],(t&&t!==r.callback&&t!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=s.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&d(n,t),i&&d(i,arguments),this},stopListening:function(e,t,n){var i=this._listeners;if(!i)return this;var r=!t&&!n;"object"==typeof t&&(n=this),e&&((i={})[e._listenerId]=e);for(var o in i)i[o].off(t,n,this),r&&delete this._listeners[o];return this}};var u=/\s+/,c=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)e[t].apply(e,[r,n[r]].concat(i));return!1}if(u.test(n)){for(var o=n.split(u),s=0,a=o.length;a>s;s++)e[t].apply(e,[o[s]].concat(i));return!1}return!0},d=function(e,t){var n,i=-1,r=e.length,o=t[0],s=t[1],a=t[2];switch(t.length){case 0:for(;++i<r;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,s);return;case 3:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,s,a);return;default:for(;++i<r;)(n=e[i]).callback.apply(n.ctx,t)}},h={listenTo:"on",listenToOnce:"once"};l.each(h,function(e,t){i[t]=function(t,n,i){var r=this._listeners||(this._listeners={}),o=t._listenerId||(t._listenerId=l.uniqueId("l"));return r[o]=t,"object"==typeof n&&(i=this),t[e](n,i,this),this}}),i.bind=i.on,i.unbind=i.off,i.mixin=function(e){var t=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return l.each(t,function(t){e[t]=this[t]},this),e},"undefined"!=typeof e&&e.exports&&(t=e.exports=i),t.BackboneEvents=i}(this)},function(e,t){var n={getUrlParams:function(e){var t={},n=e.indexOf("?");return n>-1&&e.substr(n+1).split("&").forEach(function(e){var n=e.split("=");t[n[0]]=n[1]}),t},getUrlHost:function(e){var t,n=e.split("//");return t=n[0]===e?n[0].split("/")[0]:n[1]?n[1].split("/")[0]:""}};e.exports=n},function(e,t){function n(){function e(e){r.push(e),a.postMessage(o,"*")}function t(e){e.data===o&&(e.stopPropagation(),r.length>0&&r.shift()())}var n=window,i=n.document;if(!n.postMessage)return function(e){n.setTimeout(e,0)};var r=[],o="zero-timeout-message-"+Math.random(),s=i.createElement("iframe");s.style.display="none",s.src="",i.documentElement.appendChild(s);var a=s.contentWindow,l=a.document;return l.open(),l.write(""),l.close(),a.addEventListener("message",t,!0),e}var i={extend:function(e){var t=Array.prototype.slice.call(arguments,1);return t.forEach(function(t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}),e},each:function(e,t,n){Object.keys(e).forEach(function(i){t.call(n||null,e[i],i)})},without:function(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)},result:function(e){var t=e;return i.isFunction(t)&&(t=e()),t},isFunction:function(e){return"function"==typeof e},after:function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},isNull:function(e){return null===e},once:function(e){var t,n=!1;return function(){return n?t:(n=!0,void(t=e.apply(this,arguments)))}},setImmediate:function(){var e;return function(t){e||(e=n()),e(t)}}()};e.exports=i},function(e,t,n){e.exports=n(15)},function(e,t,n){/*!
		* jquery-deferred
		* Copyright(c) 2011 Hidden <zzdhidden@gmail.com>
		* MIT Licensed
		*/
var i=e.exports=n(16),r=Array.prototype.slice;i.extend({Deferred:function(e){var t=[["resolve","done",i.Callbacks("once memory"),"resolved"],["reject","fail",i.Callbacks("once memory"),"rejected"],["notify","progress",i.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return i.Deferred(function(n){i.each(t,function(t,r){var s=r[0],a=e[t];o[r[1]](i.isFunction(a)?function(){var e=a.apply(this,arguments);e&&i.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===o?n:this,[e])}:n[s])}),e=null}).promise()},promise:function(e){return null!=e?i.extend(e,r):r}},o={};return r.pipe=r.then,i.each(t,function(e,i){var s=i[2],a=i[3];r[i[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),o[i[0]]=s.fire,o[i[0]+"With"]=s.fireWith}),r.promise(o),e&&e.call(o,o),o},when:function(e){var t,n,o,s=0,a=r.call(arguments),l=a.length,u=1!==l||e&&i.isFunction(e.promise)?l:0,c=1===u?e:i.Deferred(),d=function(e,n,i){return function(o){n[e]=this,i[e]=arguments.length>1?r.call(arguments):o,i===t?c.notifyWith(n,i):--u||c.resolveWith(n,i)}};if(l>1)for(t=new Array(l),n=new Array(l),o=new Array(l);l>s;s++)a[s]&&i.isFunction(a[s].promise)?a[s].promise().done(d(s,o,a)).fail(c.reject).progress(d(s,n,t)):--u;return u||c.resolveWith(o,a),c.promise()}})},function(e,t,n){function i(e){var t=s[e]={};return r.each(e.split(o),function(e,n){t[n]=!0}),t}var r=e.exports=n(17),o=/\s+/,s={};r.Callbacks=function(e){e="string"==typeof e?s[e]||i(e):r.extend({},e);var t,n,o,a,l,u,c=[],d=!e.once&&[],h=function(i){for(t=e.memory&&i,n=!0,u=a||0,a=0,l=c.length,o=!0;c&&l>u;u++)if(c[u].apply(i[0],i[1])===!1&&e.stopOnFalse){t=!1;break}o=!1,c&&(d?d.length&&h(d.shift()):t?c=[]:p.disable())},p={add:function(){if(c){var n=c.length;!function i(t){r.each(t,function(t,n){var o=r.type(n);"function"===o?e.unique&&p.has(n)||c.push(n):n&&n.length&&"string"!==o&&i(n)})}(arguments),o?l=c.length:t&&(a=n,h(t))}return this},remove:function(){return c&&r.each(arguments,function(e,t){for(var n;(n=r.inArray(t,c,n))>-1;)c.splice(n,1),o&&(l>=n&&l--,u>=n&&u--)}),this},has:function(e){return r.inArray(e,c)>-1},empty:function(){return c=[],this},disable:function(){return c=d=t=void 0,this},disabled:function(){return!c},lock:function(){return d=void 0,t||p.disable(),this},locked:function(){return!d},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!c||n&&!d||(o?d.push(t):h(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!n}};return p}},function(e,t){function n(e){return null==e?String(e):c[u.call(e)]||"object"}function i(e){return"function"===l.type(e)}function r(e){return"array"===l.type(e)}function o(e,t,n){var r,o=0,s=e.length,a=void 0===s||i(e);if(n)if(a){for(r in e)if(t.apply(e[r],n)===!1)break}else for(;s>o&&t.apply(e[o++],n)!==!1;);else if(a){for(r in e)if(t.call(e[r],r,e[r])===!1)break}else for(;s>o&&t.call(e[o],o,e[o++])!==!1;);return e}function s(e){return e&&"object"===l.type(e)?!0:!1}function a(){var e,t,n,i,r,o,s=arguments[0]||{},a=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},a=2),"object"==typeof s||l.isFunction(s)||(s={}),u===a&&(s=this,--a);u>a;a++)if(null!=(e=arguments[a]))for(t in e)n=s[t],i=e[t],s!==i&&(c&&i&&(l.isPlainObject(i)||(r=l.isArray(i)))?(r?(r=!1,o=n&&l.isArray(n)?n:[]):o=n&&l.isPlainObject(n)?n:{},s[t]=l.extend(c,o,i)):void 0!==i&&(s[t]=i));return s}var l=e.exports={type:n,isArray:r,isFunction:i,isPlainObject:s,each:o,extend:a,noop:function(){}},u=Object.prototype.toString,c={};"Boolean Number String Function Array Date RegExp Object".split(" ").forEach(function(e){c["[object "+e+"]"]=e.toLowerCase()})},function(e,t){var n={AAC:"aac",MP3:"mp3",OGG:"ogg",OPUS:"opus",WAV:"wav"};e.exports=n},function(e,t){var n={HTTP:"http",RTMP:"rtmp",HLS:"hls",HLS_ENC:"encrypted-hls",PREVIEW:"preview"};e.exports=n},function(e,t,n){function i(e){return e.forceHLSEnabled||u.supportsMediaSourceExtensions()&&e.mediaSourceEnabled&&(u.isChrome()&&u.getChromeVersion()>=35||u.isFirefox()&&e.mseFirefox||u.isSafari()&&e.mseSafari)}function r(e){return function(t){var n=!1;switch(t){case l.PREVIEW:n=e.previewOnly&&u.supportsHTML5Audio();break;case l.RTMP:n=u.supportsFlash();break;case l.HTTP:n=u.supportsHTML5Audio()||u.supportsFlash();break;case l.HLS:case l.HLS_ENC:n=i(e)}return n}}function o(e){return e}function s(e){e.protocols=o(e.protocols).filter(r(e))}var a,l=n(19),u=n(21);a={prioritizeAndFilter:s},e.exports=a},function(e,t){function n(e){return e.test(window.navigator.userAgent.toLowerCase())}function i(e,t){try{return window.navigator.userAgent.toLowerCase().match(e)[t]}catch(n){return null}}function r(){try{return parseInt(i(/chrom(e|ium)\/([0-9]+)\./,2),10)}catch(e){return NaN}}function o(){return!d()&&!u()&&n(/safari/)}function s(){return o()&&n(/version\/7\.1/)}function a(){return o()&&n(/version\/8/)&&!n(/version\/80/)}function l(){return o()&&n(/version\/9\./)}function u(){return!d()&&n(/chrom(e|ium)/)}function c(){return n(/firefox/)}function d(){return n(/edge/)}function h(){return d()&&n(/windows\snt/)}function p(){return d()&&n(/windows\sphone/)}function f(){return!!window.MediaSource&&(window.MediaSource.isTypeSupported("audio/mpeg")||window.MediaSource.isTypeSupported("audio/mp4"))}function g(){try{return window.hasOwnProperty("Audio")&&!!(new window.Audio).canPlayType("audio/mpeg")}catch(e){return!1}}function m(){try{var e=o()&&n(/version\/5\.0/),t=window.hasOwnProperty("Audio")&&(!!(new window.Audio).canPlayType('audio/x-mpegURL; codecs="mp3"')||!!(new window.Audio).canPlayType('vnd.apple.mpegURL; codecs="mp3"'));return!e&&t}catch(i){return!1}}function _(){return y(v())>=w}function v(){var e,t,n,i;if("undefined"!=typeof window.ActiveXObject)try{i=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"),i&&(e=i.GetVariable("$version"))}catch(r){e=null}else window.navigator&&window.navigator.plugins&&window.navigator.plugins.length>0&&(n="application/x-shockwave-flash",t=window.navigator.mimeTypes,t&&t[n]&&t[n].enabledPlugin&&t[n].enabledPlugin.description&&(e=t[n].enabledPlugin.description));return e}function y(e){var t;if(!e||!(t=e.match(/\d\S+/)))return 0;var n=t[0].replace(/,/g,".").split(".");return parseFloat([n[0],n[1]||"0"].join("."))||0}var b,w=9;b={flashPlugin:v,isSafari:o,isSafari71:s,isSafari8:a,isSafari9:l,isChrome:u,getChromeVersion:r,isFirefox:c,isEdge:d,isEdgeDesktop:h,isEdgeMobile:p,supportsNativeHLSAudio:m,supportsHTML5Audio:g,supportsFlash:_,supportsMediaSourceExtensions:f},e.exports=b},function(e,t,n){function i(e){var t=h.getUrlHost(e);return f.every(function(e){return 0!==t.indexOf(e)})}function r(e,t){return!(e===c.HLS&&!i(t))}function o(e,t){if(!e)return!1;var n=e.issuedAt+s(e.protocol,e.duration);return a(e.protocol)?Date.now()+e.duration-(t||0)<n:Date.now()<n}function s(e,t){var n=a(e);return g+(n?d.result(t):0)}function a(e){return e===c.HTTP||e===c.HLS}function l(e,t){function n(e){return-1*e}function i(e,t){return Math.abs(t-v)-Math.abs(e-v)}var o,s,a,l,u,c,h,p,f,g,m={},_=[],v=t.maxBitrate,y=t.protocols,b=t.extensions;for(d.each(e,function(e,t){var n=t.split("_"),i=n[0],r=n[1],o=n[2];m[i]=m[i]||{},m[i][r]=m[i][r]||{},m[i][r][o]=e}),u=0,c=y.length;c>u;++u)for(l=y[u],p=0,f=b.length;f>p;++p)if(h=b[p],m[l]&&m[l][h]){if(o=Object.keys(m[l][h]).map(Number).sort(n),s=v===1/0,a=v===-(1/0),v=s||a?o[s?"pop":"shift"]():o.sort(i).pop(),g=m[l][h][v],!r(l,g))continue;_.push({url:g,bitrate:v,protocol:l,extension:h,issuedAt:Date.now(),duration:d.result(t.duration)})}return _}var u,c=n(19),d=n(13),h=n(12),p=.9,f=[],g=Math.floor(12e4*p);u={choosePreferredStreams:l,streamValidForPlayingFrom:o},e.exports=u},function(e,t,n){var i,r,o=n(7),s=n(13),a=s.extend,l=s.setImmediate,u={Linear:0,EaseIn:1,EaseOut:2,EaseInOut:3};e.exports=i={},i.VolumeAutomator=r=function(e){if(this.scAudio=e,this.fadeOutAlgo=this.options().fadeOutAlgo,this.fadeOutActive=!1,this.initialVolume=void 0,r.isSupported()){var t=this.options();["fadeOutDurationOnPause","fadeOutDurationOnFinish","fadeOutDurationOnConcurrentStreaming"].forEach(function(e){"number"!=typeof t[e]&&(t[e]=0)}),this.scAudio.registerHook("pause",this.hookPause.bind(this)),this.scAudio.on(o.TIME,this.onTime,this),this.scAudio.on(o.PLAY_RESUME,this.onPlay,this)}},i.VolumeAutomator.isSupported=function(){var e=new window.Audio,t=e.volume,n=0===t?1:t/2;return e.volume=n,e.volume===n},i.VolumeAutomator.Algos=u,a(r.prototype,{options:function(){return this.scAudio.options},doFadeOut:function(e,t,n,i){this.fadeOutActive=!0;var r=Date.now()-(n||0),s=function(){if(this.fadeOutActive){var n,a=(Date.now()-r)/t;if(a>=1)e&&(this.scAudio.trigger(o.PAUSE,i),this.scAudio.callPauseOnController()),this.cancelFadeout();else{switch(this.fadeOutAlgo){case u.Linear:n=1-a;break;case u.EaseIn:n=1-a*a;break;case u.EaseOut:n=1/(10*(a+.1))-.05;break;case u.EaseInOut:default:n=Math.cos(a*Math.PI)/2+.5}this.scAudio.setVolume(this.initialVolume*n),l(s)}}}.bind(this);this.initialVolume=this.scAudio.getVolume(),s()},cancelFadeout:function(){this.fadeOutActive&&(this.fadeOutActive=!1,this.scAudio.setVolume(this.initialVolume),this.initialVolume=void 0)},isFadeOutEnabled:function(){return this.options().fadeOutDurationOnConcurrentStreaming||this.options().fadeOutDurationOnPause||this.options().fadeOutDurationOnFinish},hookPause:function(e){return this.options().fadeOutDurationOnConcurrentStreaming&&"concurrent_streaming"===e.pause_reason?(this.doFadeOut(!0,this.options().fadeOutDurationOnConcurrentStreaming,0,e),!1):this.options().fadeOutDurationOnPause?(this.doFadeOut(!0,this.options().fadeOutDurationOnPause,0,e),!1):!0},onPlay:function(){this.isFadeOutEnabled()&&this.cancelFadeout()},onTime:function(){if(this.options().fadeOutDurationOnFinish){var e=this.scAudio.currentTime(),t=this.scAudio.duration(),n=this.options().fadeOutDurationOnFinish;!this.fadeOutActive&&e+n>=t&&this.doFadeOut(!1,n,e+n-t,{})}}})}])},308:function(e,t,n){"use strict";function i(e){var t=e.state,n=e.object;t&&!this.contains(n)&&this.onCommentCreated(n)}var r=[{emitter:n(74),event:"comment",getInstance:function(e,t){var n=t.target;return e.options.sound_id===n},handler:i}];e.exports=n(73).extend(n(195).withOptions({events:r}),{model:n(106),defaults:{sound_id:null,secret_token:null},soundDuration:null,setup:function(e){var t=e.sound_id,i=new(n(67))({id:t});this.options.secret_token=i.get("secret_token"),this.soundDuration=i.duration(),i.release()},baseUrl:function(){return this.getEndpointUrl("trackComments",{id:this.options.sound_id},{filter_replies:0})},parse:function(e){var t=this,n=/^http:/;return e.collection.map(function(e){return e.timestamp=t.normalizeTimestamp(e.timestamp),n.test(e.user.avatar_url)&&(e.user.avatar_url=e.user.avatar_url.replace(n,"https:")),e})},normalizeTimestamp:function(e){return(e>this.soundDuration||0>e)&&(e=n(106).EMPTY_TIMESTAMP),e},onCommentCreated:function(e){this.add(e,{at:0})}},{hashFn:function(e,t){return t&&t.sound_id||null}})},309:function(e,t,n){"use strict";var i=n(131),r=i.parseOrganicResults,o=i.parsePremiumResults,s=i.parsePromotedResults,a={sounds:"tracks",high_tier:"tracks",sets:"playlists",playlists:"playlists_without_albums",albums:"albums",people:"users",universal:"universal"},l={sounds:"tracks",high_tier:"high_tier",people:"people",playlists:"playlists",albums:"albums"},u=new(n(104))("promoted-persistent");e.exports=n(73).extend(n(123),{model:n(278),facetName:null,facets:null,totalResults:null,queryUrn:null,setup:function(e){var t=e.params,n=(t&&t.q||"").trim();this.facets=[],0===n.length&&this.setToFullyPopulated()},getSourceInfo:function(){var e=l[this.options.category];return{type:e?"search:"+e:"search",queryUrn:this.getCurrentQueryUrn()}},baseUrl:function(){var e=this.options,t=e.category,i=e.params;switch(i=n(3).assign({q:"",sc_a_id:u.get("sc_a_id")},i),t){case"high_tier":i["filter.content_tier"]="SUB_HIGH_TIER";case"sounds":case"sets":case"albums":case"playlists":this.facetName="genre";break;case"people":this.facetName="place";break;default:this.facetName="model"}return i.facet=this.facetName,i.user_id=n(158).getAnonymousId(),t?this.getEndpointUrl("searchCategory",{category:a[t]},i):this.getEndpointUrl("search",{},i)},getTotalResults:function(){return this.totalResults||0},getTotalPremiumResults:function(){return this.premiumTotalResults||0},getFacetByName:function(e){var t=n(3).findWhere(this.facets,{name:e});return t?t.facets:[]},getCurrentFacet:function(){return this.getFacetByName(this.facetName)},parse:function(e){var t=o(e),i=s(e),a=r(e);return this.totalResults=a.count,this.premiumTotalResults=t.count,this.queryUrn=e.query_urn,this.facets=e.facets||[],this.trigger("change:facet_counts"),n(3).flatten([t.records,i.records,a.records])},audibleAt:function(e){var t=this.at(e);return t&&t.getAudible()},couldContainSounds:function(){return"people"!==this.options.category},modelToGroupKey:function(e){return"high_tier"===this.options.category||"high_tier"===e.get("campaign")?"high_tier":"free_tier"},getCurrentQueryUrn:function(){return this.queryUrn}},{hashFn:function(e,t){return[t.category||"universal",n(65).stringify({query:t.params})].join("_")}})},310:function(e,t,n){"use strict";function i(e){var t=e.state,n=e.target,i=void 0;t?this.add({id:n},{at:0}):(i=this.get(n))&&this.remove(i)}var r=[{emitter:n(74),event:"follow",getInstance:function(e,t){var n=t.origin;return e.options.userId===n},handler:i}],o=e.exports=n(152).extend(n(195).withOptions({events:r}),{model:n(64),defaults:{limit:3,type:"followings"},baseUrl:function(){return this.getEndpointUrl("userFollowings",{id:this.options.userId})}});n(360).applyTo(o,{fields:["username","full_name"]})},329:function(e,t,n){"use strict";var i=e.exports=n(66).extend({resource_type:"user_stream_item",submodelMap:{track:null,playlist:null},baseUrl:null,audible:null,createSubmodel:function(e,t){var i,r=n("track"===t?67:88),o=this.get(t);o&&(i=new r(o),this.addSubmodel(i),this.listenTo(i,"destroy",this.onSubmodelDestroy),this.audible=i)},onSubmodelDestroy:function(){this.destroy()},equivalentTo:function(e){if(this===e)return!0;var t=this.get("track")||this.get("playlist"),n=e.get("track")||e.get("playlist")||e.attributes;return t.kind===n.kind&&t.id===n.id},getAudible:function(){return this.audible},getActionType:function(){return this.isRepost()?"repost":this.isLike()?"like":"post"},isSpotlight:function(){return this.get("type").indexOf("_spotlight")>-1},isRepost:function(){return/[_-]repost$/.test(this.get("type"))},isLike:function(){return/[_-]like$/.test(this.get("type"))},isRegular:function(){return!this.isRepost()&&!this.isLike()&&!this.isSpotlight()},toggleSpotlight:function(e){this.isRepost()||this.isLike()||(void 0===e&&(e=!this.isSpotlight()),this.set("type",this.get("type").replace(e?/$/:/_spotlight$/,e?"_spotlight":"")))},getModelData:function(){return this.get("track")||this.get("playlist")}},{convert:function(e){var t=e instanceof n(67),r=e.toJSON();return new i({type:r.kind,created_at:r.created_at,track:t?r:null,playlist:t?null:r})}})},337:function(e,t,n){"use strict";e.exports=n(2293)()?Symbol:n(2295)},339:function(e,t,n){!function(t,i){e.exports=i(n(215))}(this,function(e){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=8)}([function(t,n){t.exports=e},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e){function t(){return e.call(this,"An unrecoverable error occurred whilst decoding.")||this}return i(t,e),t.prototype.getCode=function(){return"HTML5_PLAYER.DECODE_ERROR"},t}(r.errors.PlayerFatalError);t.DecodeError=o},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e){function t(){return e.call(this,"An unrecoverable network error occurred.")||this}return i(t,e),t.prototype.getCode=function(){return"HTML5_PLAYER.NETWORK_ERROR"},t}(r.errors.PlayerFatalError);t.NetworkError=o},function(e,t,n){"use strict";function i(e){return e.slice(0).sort(function(e,t){return e.start-t.start}).reduce(function(e,t,n){var i=e.length-1;return n>0&&e[i].end>=t.start?e[i].end=t.end:e.push(t),e},[])}function r(e){for(var t=[],n=e.length,r=0;n>r;r++)t.push({end:1e3*e.end(r),start:1e3*e.start(r)});return i(t).map(function(e){return new l.TimeRange(e.start,e.end-e.start)})}function o(e,t){return t.some(function(t){return t.containsTime(e)})}function s(e){return i(e.map(function(e){return{start:e.start,end:e.end}})).map(function(e){return new l.TimeRange(e.start,e.end-e.start)})}function a(e){if(0===e.length)return new l.TimeRange(0,0);var t=1/0,n=0;return e.forEach(function(e){e.start<t&&(t=e.start),e.end>n&&(n=e.end)}),new l.TimeRange(t,n-t)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(0);t.normalizeRawTimeRanges=i,t.buildTimeRanges=r,t.containsTime=o,t.normalizeTimeRanges=s,t.getCoverage=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(1),o=n(2);!function(e){e.DecodeError=r.DecodeError,e.NetworkError=o.NetworkError}(i=t.errors||(t.errors={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(3);!function(e){var t;!function(e){e.buildTimeRanges=r.buildTimeRanges,e.containsTime=r.containsTime,e.getCoverage=r.getCoverage,e.normalizeTimeRanges=r.normalizeTimeRanges}(t=e.timeRanges||(e.timeRanges={}))}(i=t.helpers||(t.helpers={}))},function(e,t,n){"use strict";function i(e){e.load()}var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),s=n(1),a=n(2),l=n(3),u=n(7),c=o.helpers.deferred.buildDeferred,d=o.helpers.url.getExtension,h=o.helpers.Promise,p=o.logger.prefixLogger,f=o.errors.NotSupportedError,g=o.errors.PlayerFatalError,m=new Error("Media element was revoked."),_=function(e){function t(t,n){var i=this.constructor,r=e.call(this,n)||this;r._duration=null,r._stallDetected=!1,r._initialized=!1,r._deferredProvideMediaElementCallback=null,r._playInProgress={inProgress:!1},r._lastStallCheckPos=null,r._stallCheckTimerId=null,r._endedOverride=!1,r._volume=1,r._muted=!1,r._positionWhenMediaElementRevoked=0,r._playingWhenMediaElementRevoked=!1,r._provideMediaElementDeferred=null,r._mediaElementAndState=null,r._listeners=[],r._currentSeekCallback=null,r._logger=p(r._logger,"HTML5Player"),r._descriptor=t,r._playerDependencies=n,r._mimeType=t.getFormat().mimeType||i.inferMimeType(t.getUrl());var s=void 0!==n.mediaElement?n.mediaElement:r._createDefaultMediaElement();return s&&r.provideMediaElement(s)["catch"](function(e){return e===m?void r._logger.debug("Initial provideMediaElement() call was aborted."):void r._triggerError(new u.InitializeError(e))}),r._logger.info("Checking if the player can play the provided descriptor."),r._canPlayTimer=window.setTimeout(function(){r._canPlay().then(function(e){return r.isDead()?void 0:e instanceof o.errors.NotSupportedError?(r._logger.info("Player not supported.",e),void r._triggerError(e)):e?(r._logger.info("Player supported."),void r._initialize()):(r._logger.info("Player not supported."),void r._triggerError(new f))})["catch"](function(e){r._logger.error("Unexpected error during can play check.",e),r._triggerError(new g("An unexpected error occured during initialization.",e))})},0),r}return r(t,e),t.inferMimeType=function(e){var t=d(e);switch(t){case"mp3":return"audio/mpeg";case"mp4":return"video/mp4";case"m3u8":return"application/x-mpegURL";default:return null}},t.prototype.getMediaElement=function(){return this._mediaElementAndState&&this._mediaElementAndState.element},t.prototype.provideMediaElement=function(e){var t=this;if(this._ensureNotDead(),this._mediaElementAndState)throw new Error("Already have a media element.");this._logger.debug("provideMediaElement() called.",e),this._initMediaElementLocal(e,null);var n=this._provideMediaElementDeferred=c();this._mediaElementAndState={element:e,state:"INITIALIZING"};var i=function(){t._logger.debug("Initializing media element."),t._initMediaElement(e,t._descriptor.getUrl()),t._attachListeners();var i=t._listenToOnce("error",function(){t._provideMediaElementDeferred=null;var i=e.error.code+" = "+(e.error.message||"[unknown]");t._logger.error("Error whilst initializing media element.",i),t.revokeMediaElement(),n.reject(new Error("Error when initializing media element. Error: "+i))},{earlyAttach:!0});t._listenToOnce("loadeddata",function(){r()},{earlyAttach:!0});var r=function(){t._logger.debug("Putting media element in the state that is expected..."),o()},o=function(){null===t._getQueuedSeekPosition()&&t._positionWhenMediaElementRevoked>0?(t._logger.debug("Seeking to expected position..."),t._performSeek(t._positionWhenMediaElementRevoked,function(e){return void 0!==e?(t._provideMediaElementDeferred=null,t._logger.error("An error occurred when trying to seek to the expected position."),t.revokeMediaElement(),void n.reject(new Error("An error occurred when trying to restore the position."))):(t._logger.debug("Seeked to expected position."),void s())})):s()},s=function(){t.isPlaying()===t.isActuallyPlaying()&&t._playingWhenMediaElementRevoked?(t._logger.debug("Calling play to match previous state..."),t._play()["catch"](function(){t._provideMediaElementDeferred=null,t._logger.error("An error occurred when trying to play."),t.revokeMediaElement(),n.reject(new Error("Browser refused play() request on media element."))}),t._listenToOnce("play",function(){t._logger.debug("Play succeeded."),a()},{earlyAttach:!0})):a()},a=function(){t._provideMediaElementDeferred=null,i.remove(),n.resolve(void 0),t._mediaElementAndState.state="STABLE",t._logger.debug("Finished putting element in expected state."),null!==t._duration&&t._handleFlagChange(function(){t.isReady()||t._signalReady(),t._handleDefferredPauseAndSeek()})}};return this._initialized?i():this._deferredProvideMediaElementCallback=i,this._provideMediaElementDeferred.promise},t.prototype.revokeMediaElement=function(){if(!this._mediaElementAndState)throw new Error("There is no media element to revoke.");this._deferredProvideMediaElementCallback=null,this._provideMediaElementDeferred&&(this._provideMediaElementDeferred.reject(m),this._provideMediaElementDeferred=null),this._logger.debug("revokeMediaElement() called."),this._detachListeners();var e=this._mediaElementAndState.element;this.isDead()||(this._positionWhenMediaElementRevoked=this.getPosition(),this._playingWhenMediaElementRevoked=this.isPlaying()),this._mediaElementAndState=null,this._initMediaElement(e,null),this.isDead()||this._handleStalled()},t.prototype.getVolume=function(){return this._volume},t.prototype.getMuted=function(){return this._muted},t.prototype.setMuted=function(e){this._muted=e,this._mediaElementAndState&&(this._mediaElementAndState.element.muted=e)},t.prototype.getBufferedTimeRanges=function(){return this._mediaElementAndState&&"USABLE"===this._mediaElementAndState.state?l.buildTimeRanges(this._mediaElementAndState.element.buffered):[]},t.prototype.getMaxBufferLength=function(){return null},t.prototype._setVolume=function(e){this._volume=e,this._mediaElementAndState&&(this._mediaElementAndState.element.volume=e)},t.prototype._getResolvedMimeType=function(){return this._mimeType},t.prototype._canPlay=function(){return this._mimeType&&this._canPlayProtocol(this._descriptor.getProtocol())&&this._canPlayType(this._mimeType)?h.resolve(!0):h.resolve(!1)},t.prototype._canPlayProtocol=function(e){return["http","hls"].indexOf(e.name)>=0},t.prototype._canPlayType=function(e){try{var t=document.createElement("audio");return!!t.canPlayType(e)}catch(n){return!1}},t.prototype._initialize=function(){var e=this;this._initialized=!0,this._listenTo("error",function(){if("INITIALIZING"===e._mediaElementAndState.state)return void e._logger.debug("An error occurred, but the media element is initializing, so ignoring...");var t=e._mediaElementAndState.element.error;switch(t.code){case 2:e._triggerError(new a.NetworkError);break;case 3:e._triggerError(new s.DecodeError);break;default:e._triggerError(new o.errors.PlayerFatalError("An unexpected error occurred."))}},{earlyAttach:!0}),this._listenTo("playing",function(){e._logger.debug("Media element playing event."),e._mediaElementAndState&&!e._mediaElementAndState.element.paused?e._handlePlayingEvent():e._logger.debug("Ignoring playing event because media element is reporting it is paused.")}),this._listenTo("pause",function(){e._logger.debug("Media element pause event."),e._mediaElementAndState&&e._mediaElementAndState.element.paused?e._handlePauseEvent():e._logger.debug("Ignoring pause event because media element is reporting it is not paused.")}),this._listenTo("ended",function(){e._logger.debug("Media element ended event."),e._mediaElementAndState&&!e._mediaElementAndState.element.ended?e._handleEndedEvent():e._logger.debug("Ignoring ended event because media element is reporting it is not ended.")}),this._listenTo("stalled",function(){e._logger.debug("Media element stalled event."),e._checkIfStalled()}),this._stallCheckTimerId=window.setInterval(function(){return e._checkIfStalled()},400),this._retrieveDuration().then(function(t){e._logger.debug("Duration retrieved.",t),e._duration=t,e._handleFlagChange(function(){e._provideDuration(t),e._mediaElementAndState&&"STABLE"===e._mediaElementAndState.state&&(e._signalReady(),e._handleDefferredPauseAndSeek())})})["catch"](function(t){e._triggerError(new o.errors.PlayerFatalError("An unexpected error occurred when attempting to retrieve the duration.",t))}),this._deferredProvideMediaElementCallback&&this._deferredProvideMediaElementCallback()},t.prototype._createDefaultMediaElement=function(){return document.createElement(this._playerDependencies.mediaElementType||"audio")},t.prototype._handlePauseEvent=function(){var e=this;this._handleFlagChange(function(){e._shouldBeEnded()?e._signalEnded():(e._notifyNotStalled(),e._notifyPlaying(!1))})},t.prototype._handlePlayingEvent=function(){var e=this,t=this._duration;if(null===t)throw new Error("Expecting duration to exist.");var n=this._getTruePosition();return n>=t?void this._logger.warn("Got a media element playing event and the positon was >= the duration.",n,t):this.isEnded()||this._shouldBeEnded()?void this._logger.warn("Got a media element playing event when the player is/should be ended."):void this._handleFlagChange(function(){e._endedOverride=!1,e._notifyNotStalled(),e._signalNotEnded(),e._notifyPlaying(!0)})},t.prototype._handleEndedEvent=function(){var e=this;return null!==this._getQueuedSeekPosition()?void this._logger.warn("Got a media element ended event but ignoring because a seek is in progress."):void this._handleFlagChange(function(){e._endedOverride=!0,e._signalEnded()})},t.prototype._shouldBeEnded=function(){return this._endedOverride||this._mediaElementReportingEnded()},t.prototype._mediaElementReportingEnded=function(){return!(!this._mediaElementAndState||!this._mediaElementAndState.element.ended)},t.prototype._signalNotEnded=function(){if(this._shouldBeEnded())throw new Error("Attempt to signal not ended when it should be.");e.prototype._signalNotEnded.call(this)},t.prototype._retrieveDuration=function(){var e=this;return new h(function(t){e._listenToOnce("loadedmetadata",function(){t(1e3*e._mediaElementAndState.element.duration)},{reattach:!0,earlyAttach:!0})})},t.prototype._handlePlayPauseChange=function(e){var t=this;if(this.isEnded())return void this._notifyPlaying(e);if(this._mediaElementAndState&&"USABLE"===this._mediaElementAndState.state){var n=this._mediaElementAndState.element,i=this._playInProgress.inProgress||!n.paused;if(i!==e)if(e){var r={inProgress:!0};this._playInProgress=r,this._play().then(function(){return r.inProgress=!1})["catch"](function(e){r.inProgress=!1,t._notifyPlayRejection(e)})}else this._playInProgress={inProgress:!1},n.pause(),this._notifyPlaying(!1);else this._playInProgress.inProgress||this._notifyPlaying(e)}},t.prototype._handleSeekChange=function(e){var t=this,n=this._mediaElementAndState;n&&"USABLE"===n.state&&(this._endedOverride=!1,this._performSeek(e,function(n){return void 0!==n?void t._triggerError(new o.errors.PlayerFatalError("An error occurred when trying to seek.",n)):(e===t._duration&&(t._endedOverride=!0),void t._handleFlagChange(function(){t._signalSeekComplete(),t.isEnded()||t._handlePlayPauseChange(t.isPlaying())}))}))},t.prototype._performSeek=function(e,t){var n=this,i=this._mediaElementAndState;if(!i)throw new Error("Media element does not exist.");var r=this._currentSeekCallback;if(r&&(this._currentSeekCallback=null,r.listenerHandle.remove()),i.element.currentTime===e/1e3)return void t();i.element.currentTime=e/1e3;var o=this._listenToOnce("seeked",function(){n._currentSeekCallback=null,t()},{earlyAttach:!0});this._currentSeekCallback={listenerHandle:o,callback:t}},t.prototype._getPosition=function(){var e=null!==this._duration?this._duration:1/0;if(!this._mediaElementAndState||"USABLE"!==this._mediaElementAndState.state)return this._positionWhenMediaElementRevoked;var t=Math.min(this._getTruePosition(),e);return this._shouldBeEnded()?e:t},t.prototype._getTruePosition=function(){if(!this._mediaElementAndState||"USABLE"!==this._mediaElementAndState.state)throw new Error("Media element does not exist or is in invalid state.");var e=this._mediaElementAndState.element;return 1e3*e.currentTime},t.prototype._kill=function(){window.clearTimeout(this._canPlayTimer),this._mediaElementAndState&&this.revokeMediaElement(),this._stallCheckTimerId&&window.clearInterval(this._stallCheckTimerId),this._listeners=[]},t.prototype._listenToOnce=function(e,t,n){void 0===n&&(n={});var i=n.reattach,r=n.earlyAttach;void 0===i&&(i=!1),void 0===r&&(r=!1);var o=function(e){s.remove(),t(e)},s=this._listenTo(e,o,{reattach:i,earlyAttach:r});return s},t.prototype._listenTo=function(e,t,n){var i=this;void 0===n&&(n={});var r=n.reattach,o=n.earlyAttach;void 0===r&&(r=!0),void 0===o&&(o=!1);var s={attached:!1,handler:t,eventType:e,once:!1,reattach:r,earlyAttach:o};if(this._listeners.push(s),!this._mediaElementAndState||"USABLE"!==this._mediaElementAndState.state&&!o)return{remove:function(){var e=i._listeners.indexOf(s);e>=0&&i._listeners.splice(e,1)}};var a=this._mediaElementAndState.element;return a.addEventListener(e,t,!1),s.attached=!0,{remove:function(){var n=i._listeners.indexOf(s);n>=0&&(i._listeners.splice(n,1),a.removeEventListener(e,t,!1))}}},t.prototype._notifyNotStalled=function(){this._stallDetected=!1,this._lastStallCheckPos=null,this._handleStalled()},t.prototype._initMediaElement=function(e,t){this._initMediaElementLocal(e,t)},t.prototype._initMediaElementLocal=function(e,t){
e.setAttribute("msAudioCategory","BackgroundCapableMedia"),e.mozAudioChannelType="content",e.removeAttribute("src"),i(e),t&&(this._logger.debug("Setting media element src.",t),e.src=t),e.volume=this._volume,e.muted=this._muted,e.playbackRate=1,e.setAttribute("preload","metadata"),e.load()},t.prototype._checkIfStalled=function(){if(this._mediaElementAndState&&"USABLE"===this._mediaElementAndState.state){var e=this._mediaElementAndState.element;if(!e.paused&&this.isActuallyPlaying()){var t=e.currentTime;this._stallDetected=e.readyState<=2||this._lastStallCheckPos===t,this._lastStallCheckPos=t,this._handleStalled()}}},t.prototype._handleStalled=function(){this._shouldBeEnded()&&null===this._getQueuedSeekPosition()?this.isEnded()||(this._logger.debug("Signalling ended because stalled near end."),this._signalEnded()):this._notifyStalled(this._stallDetected||!this._mediaElementAndState||"USABLE"!==this._mediaElementAndState.state)},t.prototype._play=function(){var e=this;if(!this._mediaElementAndState)throw new Error("Media element doesn't exist.");if(this._mediaElementAndState.element.ended)return this._logger.debug("Not calling play() because we are at the end. It will be called after a seek."),h.resolve();var t=this._mediaElementAndState.element.play();return new h(function(n,i){t?t.then(function(){n()})["catch"](function(t){"AbortError"===t.name?(e._logger.debug("Media element play() promise rejected with AbortError."),n()):i(t)}):n()})},t.prototype._handleDefferredPauseAndSeek=function(){var e=this;if(!this._mediaElementAndState||"STABLE"!==this._mediaElementAndState.state)throw new Error("Media element must be in the STABLE state.");this._logger.debug("Handling deferred pause and seek..."),this._mediaElementAndState.state="USABLE",this._attachListeners(),this._handleFlagChange(function(){e._handleStalled();var t=e._getQueuedSeekPosition();null!==t&&e._handleSeekChange(t),e.isPlaying()!==e.isActuallyPlaying()&&e._handlePlayPauseChange(e.isPlaying())})},t.prototype._detachListeners=function(){if(!this._mediaElementAndState)throw new Error("Media element doesn't exist.");var e=this._mediaElementAndState.element;this._listeners.forEach(function(t){t.attached&&(e.removeEventListener(t.eventType,t.handler,!1),t.attached=!1)}),this._listeners=this._listeners.filter(function(e){return e.reattach})},t.prototype._attachListeners=function(){if(!this._mediaElementAndState)throw new Error("Media element doesn't exist.");this._logger.debug("Attaching listeners...");var e=this._mediaElementAndState,t=e.element,n=e.state;this._listeners.forEach(function(e){e.attached||!e.reattach||"USABLE"!==n&&!e.earlyAttach||(t.addEventListener(e.eventType,e.handler,!1),e.attached=!0)}),this._logger.debug("Attached listeners.")},t}(o.BasePlayer);t.HTML5Player=_},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e){function t(t){return e.call(this,"An error occurred when initializing the media element.",t)||this}return i(t,e),t.prototype.getCode=function(){return"HTML5_PLAYER.INITIALIZE_ERROR"},t}(r.errors.PlayerFatalError);t.InitializeError=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version="3.7.0",t.buildNumber=699;var i=n(6);t.HTML5Player=i.HTML5Player;var r=n(4);t.errors=r.errors;var o=n(5);t.helpers=o.helpers}])})},340:function(e,t,n){"use strict";e.exports=n(73).extend({model:n(168),lastFetchTime:Date.now(),next_href:!1},{neverRelease:!0,hashFn:function(){return 1}})},341:function(e,t,n){"use strict";e.exports=n(73).extend(n(123),{model:n(598),defaults:{genre:null,chartKind:null,highTierOnly:!1,region:null},baseUrl:function(){var e=this.options,t=e.chartKind,i=e.genre,r=e.region,o=e.highTierOnly;return this.getEndpointUrl("charts",{},{kind:t,genre:n(112).genreUrn(i),region:r&&r!==n(157).defaultCountry?n(112).regionUrn(r):void 0,high_tier_only:o||!1,variant:n(55).get("experiments").get("v2_listening","charts_genre")||void 0})},setup:function(){this.queryUrn=null,this.lastUpdated=null},parse:function(e){var t=e.query_urn,n=e.collection,i=e.last_updated,r=e.kind;return this.queryUrn=t,this.lastUpdated=i,n.map(function(e,t){var n=e.track,i=e.score;return"top"===r?{track:n,score:i,weekPlays:i}:"trending"===r?{track:n,score:i}:void 0})},getSourceInfo:function(){var e=this.queryUrn,t=this.options,n=t.genre,i=t.chartKind;return{type:"charts",genre:n,chartKind:i,queryUrn:e}},audibleAt:function(e){var t=this.at(e);return t&&t.soundModel}},{hashFn:function(e,t){return t.chartKind+"_"+t.genre+"_"+t.highTierOnly+"_"+t.region}})},342:function(e,t,n){"use strict";function i(e,t,i){var r=n(930).instances.get(i.id),o=new a;r&&r.add(i.last_message),o.add(i,{userAction:!0,merge:!0});var l=n(161).instances.get(i.id);l&&l.markAsRead(),n(57).trigger("new-message:sent",{recipient:e,showSuccessMessage:t}),s(["messages","new-message-sent"])}function r(e,t){var i=t.responseText,r=function(e){return i.indexOf(e)>-1},o=i?r("confirmed their address")?"emailnotconfirmed":r("sender must be followed")?"privacy":r("receiver blocked sender")?"youareblocked":r("rate limit")?"ratelimit":r("receiver does not exist")?"receiverdoesntexist":"default":"default";n(57).trigger("new-message:failed",{errorCode:o,recipient:e})}function o(e){var t=this,n=e.reduce(function(e,n){return t.get(n)||(t.add({id:n},{at:0}),e++),e},0);n&&this.trigger("new-conversations-added")}var s=n(59).trackV0Click,a=e.exports=n(73).extend({model:n(161),currentConversationId:null,baseUrl:n(316).baseUrl,setup:function(){this.listenTo(n(57),"new-unread-messages",o).listenTo(this,"change:last_message",this.sort)},getCurrentConversationId:function(){return this.currentConversationId},fetch:function(e){var t=this;return n(73).prototype.fetch.apply(this,arguments).done(function(){e&&e.reset&&t.trigger("new-conversations-added")})},setCurrentConversationId:function(e){e!==this.currentConversationId&&(this.currentConversationId=e,this.trigger("change:currentConversationId",{currentConversationId:e}))},comparator:function(e,t){return t.lastMessageSentAt()-e.lastMessageSentAt()}},{hashFn:function(){return 1},neverRelease:!0,send:function(e,t,o){return n(316).post(e.id,t).done(i.bind(this,e,o)).fail(r.bind(this,e))}})},343:function(e,t,n){"use strict";var i={user:{playlists:"userPlaylists",playlists_without_albums:"userPlaylistsWithoutAlbums",albums:"userAlbums"},sound:{playlists:"playlistsForTrack",playlists_without_albums:"playlistsWithoutAlbumsForTrack",albums:"albumsForTrack"}},r=(e.exports=n(132).extend({model:n(88),defaults:{resource_id:null,playlists_for:null,exclude:null,playlistType:"playlists"},setupSources:function(){var e=this.options.exclude;return e&&(this.filters=[function(t){return t.id!==e}]),[new r(null,this.options)]}},{hashFn:function(e,t){var n=r.hashFn.apply(this,arguments);return t.exclude&&(n+="_"+t.exclude),n}}),n(73).extend({model:n(88),parse:function(e){return e.collection.forEach(function(e){null===e.tracks&&delete e.tracks}),e.collection},baseUrl:function(){var e,t=this.options,n=t.playlists_for,r=t.resource_id,o=t.playlistType,s={representation:"mini"},a=(e={},e["user"===n?"id":"trackId"]=r,e);return this.getEndpointUrl(i[n][o],a,s)}},{hashFn:function(e,t){var n=t.playlists_for,i=t.resource_id,r=t.limit,o=t.offset,s=t.playlistType;return n+"_"+i+"_"+r+"_"+o+"_"+s}}))},344:function(e,t,n){"use strict";function i(e){var t=e.context;if(t){var i=n(3).findIndex(this.models,function(e){return e.get("context_urn")===t.resourceUrn});0!==i&&(i>0&&this.remove(this.at(i)),this.add(r(t),{at:0}))}}function r(e){var t,i=e.resourceId,r=e.resourceType,o=e.resourceUrn,s=new(n(484))((t={context_urn:o,kind:r,played_at:Date.now()},t[r]={id:i},t));return s.release(),s}function o(){this.reset([])}var s=e.exports=n(73).extend({model:n(484),baseUrl:function(){return this.getEndpointUrl("playHistoryContexts")},setup:function(){this.listenTo(n(74),"addToPlayHistory",i),this.listenTo(n(74),"clearPlayHistory",o)}},{hashFn:function(){return 1}});n(360).applyTo(s,{fields:["station.title","playlist.title","playlist.user.username","user.username"]})},345:function(e,t,n){"use strict";function i(){var e=n(55).get("experiments").get("v2_listening",/^reco-ss-/);return e||null}function r(e){return e.resource_type="playlist"===e.kind?"playlist":"sound",e}var o=Math.floor(1e8*Math.random());e.exports=n(73).extend(n(123),{model:n(75),audioSourceVersion:null,queryUrn:null,defaults:{resource_id:null,resource_type:null},getSourceInfo:function(){return{type:"recommender",queryUrn:this.queryUrn,version:this.audioSourceVersion,resourceId:this.options.resource_id,resourceType:this.options.resource_type}},parse:function(e){var t=e.query_urn,n=e.collection,i=e.variant;return this.audioSourceVersion=i||"no_version",this.queryUrn=t,n.map(r)},baseUrl:function(){var e=n(55).get("me").id||null;return this.getEndpointUrl("relatedSounds",{track_id:this.options.resource_id},{user_id:e,anon_user_id:e?null:o,variant:i()})}},{hashFn:function(e,t){var n=t.resource_id;return n}})},346:function(e,t,n){"use strict";var i=e.exports=n(73).extend({model:n(64),setup:function(){n(61).isLoggedIn()||this.setToFullyPopulated()},comparator:function(e){return e.get("username").toLowerCase()},baseUrl:function(){return this.getEndpointUrl("shortcutsFollowings")},parse:function(e){var t=e.collection,i=n(55).get("me"),r=i.id;return r&&t.unshift({id:r}),t}},{hashFn:function(){return n(55).get("me").get("id")},prefetch:function(){var e=new i;e.isPopulated()||e.fetch(),e.release()}})},348:function(e,t,n){"use strict";function i(e){var t,i=e.state,r=e.origin,o=e.target,s=e.targetType;i&&this.acceptsType(s)?this.add(n(485).getLikeModelData(r,s,o),{at:0}):(t=this.find(function(e){var t="sound"===s?e.get("track"):"playlist"===s?e.get("playlist"):null;return t&&o===t.id}),t&&this.remove(t))}var r=[{emitter:n(74),event:"like",getInstance:function(e,t){var n=t.origin;return e.options.userId===n},handler:i}];e.exports=n(152).extend(n(195).withOptions({events:r}),{model:n(485),defaults:{type:"likes"},baseUrl:function(){return this.getEndpointUrl("userLikes",{id:this.options.userId})},parse:function(e){var t=this.options.userId;return e.collection.forEach(function(e){e.user_id=t}),e.collection},audibleAt:function(e){var t=this.at(e);return t&&t.getAudible()},acceptsType:function(e){return"sound"===e||"playlist"===e}})},352:function(e,t,n){"use strict";function i(e,t){var i=t&&n(65).normalize(t)||"";i!==t&&this.set("url",i),this.set("network",o(i))}function r(e,t){this._webProfile.set("network",t),this.set("icon",this._webProfile.getNetworkClassName())}function o(e){var t;return e?(n(3).any(a,function(n,i){return n.test(e)?(t=i,!0):void 0}),t||"personal"):""}function s(){var e=this.getAttributesFromModel();this.set(e),this.markFieldsClean()}var a={bandpage:/\bbandpage\.com/i,bandcamp:/\bbandcamp\.com/i,bandsintown:/\bbandsintown\.com/i,beatport:/\bbeatport\.com/i,berklee:/\bberkleemusic\.com/i,ccmixter:/\bccmixter\.org/i,discogs:/\bdiscogs\.com/i,facebook:/\bfacebook\.com/i,flavors:/\bflavors.me/i,flickr:/\bflickr\.com/i,foursquare:/\bfoursquare\.com/i,freesound:/\bfreesound\.org/i,gigatools:/\bgigs\.gigatools\.com/i,google_plus:/\bplus\.google\.com/i,hypem:/\bhypem\.com/i,instagram:/\binstagram\.com/i,itunes_podcast:/\bitunes\.apple\.com/i,lastfm:/\b(last\.fm|lastfm\.[a-z]*)/i,mixcloud:/\bmixcloud\.com/i,myspace:/\bmyspace\.com/i,ning:/\bning\.com/i,pinterest:/\bpinterest\.com/i,purevolume:/\bpurevolume\.com/i,residentadvisor:/\bresidentadvisor\.net\/(profile|dj)/i,residentadvisorlabel:/\bresidentadvisor\.net\/record-label/i,reverbnation:/\breverbnation\.com/i,snapchat:/\bsnapchat\.com/i,songkick:/\bsongkick\.com/i,soundcloud:/\bsoundcloud\.com/i,spotify:/\bspotify\.com/i,thedjlist:/\bthedjlist.com/i,tumblr:/\btumblr\.com/i,twitter:/\btwitter\.com/i,vimeo:/\bvimeo\.com/i,vkontakte:/\bvk\.com/i,virb:/\bvirb\.com/i,whatpeopleplay:/\bwhatpeopleplay\.com/i,wordpress:/\bwordpress\.com/i,youtube:/\byoutube\.com/i,zeroinch:/\bzero-inch\.com/i,email:/@/};e.exports=n(80).extend({resource_type:"web-profile-form",_webProfile:null,fields:{icon:{defaultValue:""},url:{defaultValue:""},title:{defaultValue:""}},constraints:{url:[[n(1337),{message:n(51).t("This URL or email is invalid."),constraints:[[n(108),{maxLength:0}],[n(313),{strict:!1}],[n(458)]]}]]},setup:function(e,t){this._webProfile=new(n(608))(e,t),this.addSubmodel(this._webProfile),s.call(this),this.listenTo(this,"change:url",i).listenTo(this,"change:network",r)},removeWebProfile:function(){this.trigger("form:dirty"),this.destroy()},getAttributesFromModel:function(){var e=this._webProfile.getNetworkClassName();return n(3).assign(this.getWebProfile().pick("id","title","url","network"),{icon:e})},getWebProfile:function(){return this._webProfile},isEmpty:function(){var e=this,t=function(t){return e.get(t)};return!t("url")&&!t("title")}})},381:function(e,t,n){"use strict";e.exports=n(66).extend({resource_type:"liked-and-owned-playlist",submodelMap:{playlist:n(88)},setup:function(e){},isOwned:function(){return"playlist"===this.get("type")},isLiked:function(){return"playlist-like"===this.get("type")},isAlbum:function(){return this.getAudible().isAlbum()},createSubmodel:function(){var e=n(3).last(this._submodels);n(66).prototype.createSubmodel.apply(this,arguments);var t=n(3).last(this._submodels);t!==e&&this.listenTo(t,"destroy",this.onSubmodelDestroy)},onSubmodelDestroy:function(){this.destroy()},getAudible:function(){return n(88).instances.get(this.get("playlist").id)}},{hashFn:function(e){var t=e.type,n=e.user,i=e.playlist;return[t,n.id,i.id].join("_")},getModelData:function(e,t,n){return{type:t,created_at:(new Date).toISOString(),playlist:{id:n},user:{id:e}}}})},383:function(e,t,n){"use strict";e.exports=n(66).extend({submodelMap:{promoted_by:n(64),user:n(64)},urnPrefix:"soundcloud:users",hasDataForView:function(){return!0},getUser:function(){return n(64).instances.get(this.get("user").id)},parse:function(e){return e.origin&&(e.user=e.origin,delete e.origin),e.user&&(e.id=e.user.id),e},isPromoted:function(){return"promoted"===this.get("source")||"promoted"===this.get("campaign")}})},414:function(e,t,n){"use strict";e.exports=function(e){var t,i;return t=n(3).defaults(e.hash,{href:null,className:null,label:null,type:null}),i='<<%-tag%> class="<%-className%>"'+(t.href?' href="<%-href%>" target="blank"':"")+"><%-label%></<%-tag%>>",new(n(20).SafeString)(n(3).template(i)({tag:t.href?"a":"span",className:("sc-label sc-label-small sc-label-"+t.type+" "+t.className).trim(),label:t.label,href:t.href}))}},415:function(e,t,n){"use strict";e.exports=function(e){var t=n(51).t("Private",null,{comment:"This is a track label. If track is private it has small tag `Private`"}),i=n(3).defaults({type:"private",label:t},e.hash);return n(414)({hash:i})}},424:function(e,t,n){"use strict";var i=n(1140)();e.exports=function(e){return e!==i&&null!==e}},425:function(e,t,n){"use strict";e.exports=n(2289)()?Set:n(2292)},443:function(e,t){var n={"'":/[\u042C\u044C]/gi,"":/[\u042a\u044a]/gi,a:/[\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250\u0410\u0430]/gi,aa:/[\uA733]/gi,ae:/[\u00E6\u01FD\u01E3]/gi,ao:/[\uA735]/gi,au:/[\uA737]/gi,av:/[\uA739\uA73B]/gi,ay:/[\uA73D]/gi,b:/[\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253\u0411\u0431]/gi,c:/[\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/gi,ch:/[\u0427\u0447]/gi,d:/[\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A\u0414\u0434]/gi,dz:/[\u01F3\u01C6]/gi,e:/[\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD\u0415\u042D]/gi,f:/[\u24D5\uFF46\u1E1F\u0192\uA77C\u0424\u0444]/gi,g:/[\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F\u0413\u0433]/gi,h:/[\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/gi,hv:/[\u0195]/gi,i:/[\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131\u0418\u0438]/gi,j:/[\u24D9\uFF4A\u0135\u01F0\u0249]/gi,k:/[\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3\u041A\u043A]/gi,kh:/[\u0425\u0445]/gi,l:/[\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u0142\u019A\u026B\u2C61\uA749\uA781\uA747\u041B\u043B]/gi,lj:/[\u01C9]/gi,m:/[\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F\u041C\u043C]/gi,n:/[\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5\u041D\u043D]/gi,nj:/[\u01CC]/gi,o:/[\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275\u041E\u043E]/gi,oi:/[\u01A3]/gi,ou:/[\u0223]/gi,oo:/[\uA74F]/gi,p:/[\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755\u041F\u043F]/gi,q:/[\u24E0\uFF51\u024B\uA757\uA759]/gi,r:/[\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783\u0420\u0440]/gi,s:/[\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B\u017F\u0421\u0441]/gi,shch:/[\u0429\u0449]/gi,sh:/[\u0428\u0448]/gi,t:/[\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787\u0422\u0442]/gi,ts:/[\u0426\u0446]/gi,tz:/[\uA729]/gi,u:/[\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289\u0423\u0443]/gi,v:/[\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C\u0412\u0432]/gi,vy:/[\uA761]/gi,w:/[\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/gi,x:/[\u24E7\uFF58\u1E8B\u1E8D]/gi,y:/[\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF\u0419\u0439\u042B\u044B]/gi,ya:/[\u042F\u044F]/gi,yo:/[\u0401\u0451]/gi,yu:/[\u042E\u044E]/gi,z:/[\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763\u0417\u0437]/gi,zh:/[\u0416\u0436]/gi},i=/^\[|\]$/g,r=new RegExp("["+Object.keys(n).reduce(function(e,t){return e+n[t].source.replace(i,"")},"")+"]","i");e.exports=function(e){if(r.test(e))for(var t in n)n[t].lastIndex=0,n[t].test(e)&&(e=e.replace(n[t],t));return e.toLowerCase()}},444:function(e,t,n){"use strict";function i(e,t){var n=o({},C,t),r=n.links,D=n.userLinks,M=n.internalLinks,R=n.externalLinks,I=n.deepLinks,O=n.escapeExpression,L=n.hashtagLinks,N=n.internalLinksBaseUrl,F=n.isOpeningNewWindow,B=n.maxExternalLinksLength,U=n.maxLength,j=n.paragraphs,H=n.redirectorPattern,$=n.splitWordsAtLength,z=n.whitelist,q=O!==!1;if("string"!=typeof e)return"";r?D||M||R||(r=!1):D=M=R=!1;var W=r?c():{},V=W.flatten,Y=W.addPlaceholder;return p.lastIndex=m.lastIndex=g.lastIndex=0,e=s(e),r&&(e=e.replace(P,function(e,t,n,i){var r=n||t;return Y(r,i!==r?i:null)}).replace(p,function(e,t){return Y(t)})),e=e.replace(x,"\n\n").replace(k,"\n").replace(T," "),e=z&&z.length?e.replace(new RegExp("<(?!\\s*\\/?("+z.join("|")+")\\b)[^>]*>","ig"),""):e.replace(S,""),q&&(e=a(e)),r&&(e=e.replace(g,'<a href="mailto:$1">$1</a>'),e=V(e,function(e,t){var r={},s="",u=b.test(e)?e:"http://"+e;if(0===e.indexOf("mailto:"))r.href=e,r.text=e.replace("mailto:","");else if(M&&v.test(e))r.href=e.replace(v,N),r.text=e.replace(b,"");else if(R){var c=y.test(u);r.href=c?u:l(H,u,y),c||(r.title=u,r.rel="nofollow"),r.text=h(e,B,b),r.target="_blank"}else r.href=e;return t&&(q?s=i(t,o({},n,{paragraphs:!1,splitWordsAtLength:0})).trim()+(/[!?:;.]$/.test(t)?" ":": "):r.text=t),s+(r.text?'<a href="'+a(r.href)+'"'+(r.rel?' rel="'+r.rel+'"':"")+(r.target?' target="'+r.target+'"':"")+(r.title?' title="'+a(r.title)+'"':"")+(">"+(q?a(r.text):r.text)+"</a>"):a(r.href))}),D&&(e=e.replace(m,'$1@<a href="'+N+'$2"'+(F?' target="_blank"':"")+">$2</a>")),L&&(e=e.replace(_,'$1<a href="/tags/$3">$2</a>')),I&&(e=e.replace(f,'<a href="#t=$1">$1</a>'))),U&&(e=u(e,U)),$>0&&(e=d(e,$)),e=j?e.split(w).map(function(e){return"<p>"+e.trim().replace(E,"<br>")+"</p>"}).join(""):e.replace(A," ").replace(T," ")}function r(e,t){var n=t&&t.redirectorPattern;return n?l(n,e,y):e}var o=n(1236),s=n(1237),a=n(1238),l=n(1239),u=n(1240),c=n(1241),d=n(1242),h=n(1243);e.exports=i;var p=/\b((?:https?:\/\/|www\d{0,3}\.|(?:[a-z0-9\-]+\.)+[a-z]{2,4}\/)[^\s'"]*[^\s`!()\[\]{};:'".,<>?])/gi,f=/(\b(?:[0-5]?[0-9])(?::[0-5][0-9]){1,2}\b)/g,g=/([a-z0-9._%+\-]+@[a-z0-9.\-]+\.[a-z]{2,24})/gi,m=/(\s|[^\w]|^)@([\w\-]+)/g,_=/( |^)(#([\w-]+))/gm,v=/^((?:https?:\/\/)?(?:www\.|m\.)?soundcloud\.(?:com|dev))\/?|^\//i,y=/^((?:https?:\/\/)?([a-z0-9-]+\.)*soundcloud\.(?:com|dev))(?:\/|$)/i,b=/^(?:ht|f)tps?:\/\//i,w=/(?:[ \t]*\r?\n[ \t]*){2,}/,x=/<\/p>/g,k=/<br\s*\/?>/g,S=/<\/?[a-z].*?>/gi,E=/\r?\n/g,T=/[ \t]{2,}/g,A=/[\r\n]+/g,P=/<a\s+[^>]*?href=(['"]([^'"\s]+)['"]|[^'"\s]+)[^>]*?>(.+?)<\/a>/gi,C={paragraphs:!0,links:!0,externalLinks:!0,internalLinks:!0,userLinks:!0,deepLinks:!1,whitelist:[],internalLinksBaseUrl:"/",isOpeningNewWindow:!1,maxLength:null,truncateExternalLinks:!0,maxExternalLinksLength:50,hashtagLinks:!0,splitWordsAtLength:null,redirectorPattern:null};i.redirectLink=r,i.withDefaults=function(e){var t=o({},C,e),n=function(e,n){var r=n?o({},t,n):t;return i(e,r)};return n.redirectLink=function(e,n){var i=n?o({},t,n):t;return r(e,i)},n}},445:function(e,t,n){"use strict";function i(){var e=new(n(75))({id:this.options.resource_id,resource_type:this.options.resource_type});return e.release(),e.get("secret_token")}e.exports=n(933).extend({defaults:{type:null,resource_id:null,resource_type:null},actionName:function(){return"likers"===this.options.type?"like":"repost"},setup:function(){this.options.secret_token=i.call(this),n(933).prototype.setup.apply(this,arguments)},baseUrl:function(){var e=this.options,t=e.resource_type,n=e.resource_id,i=e.type,r={id:n,category:i};return"sound"===t&&"likers"===i?this.getEndpointUrl("trackCategory",r):"sound"===t&&"reposters"===i?this.getEndpointUrl("soundReposters",r):"likers"===i?this.getEndpointUrl("playlistCategory",r):this.getEndpointUrl("edgePlaylistCategory",r)}},{hashFn:function(e,t){return t?t.resource_id+"_"+t.type+"_"+t.resource_type:null}})},446:function(e,t,n){"use strict";function i(e){var t=e.target,i=this.find(function(e){return e.get("track_id")===t});i&&this.remove(i);var r=new(n(602))({track_id:t,played_at:Date.now()});r.release(),this.add(r,{at:0})}function r(){this.reset([])}var o=e.exports=n(73).extend(n(123),{getSourceInfo:function(){return{type:"history"}},model:n(602),baseUrl:function(){return this.getEndpointUrl("playHistoryTracks")},setup:function(){this.listenTo(n(74),"addToPlayHistory",i),this.listenTo(n(74),"clearPlayHistory",r)},audibleAt:function(e){var t=this.at(e);return t&&t.sound}},{hashFn:function(){return 1}});n(360).applyTo(o,{fields:["track.title","track.genre","track.user.username"],mixins:[n(123)]})},447:function(e,t,n){"use strict";function i(e){e.length>0&&n(57).trigger("new-unread-messages",e)}function r(e){var t;e.forEach(function(e){t=n(161).instances.get(e),t&&t.setRead(!0)})}function o(){var e=n(121)[this.notificationType];return{backoffRate:1.1,baseDelay:e.get("minPollInterval"),maxDelay:e.get("maxPollInterval")}}function s(){this._breaker&&this.restart()}function a(){this.trigger("anyUnreadMessages",this.hasAnyUnreadMessages())}function l(e){this.remove(e),a.call(this)}function u(e){var t=n(161).instances.get(e);t&&this.add(t),a.call(this)}e.exports=n(73).extend({model:n(161),notificationType:"unreadConversations",defaults:{limit:20},setup:function(){this.listenTo(n(121)[this.notificationType],"pollIntervalChange",s).listenTo(n(57),"conversation:read",l).listenTo(n(57),"conversation:unread",u)},baseUrl:function(){return n(121)[this.notificationType].get("baseUrl")()},startPolling:function(){var e=this;this._isPolling||!function(){var t=e._breaker=new(n(146))(o.call(e)),i=function(){e._isPolling&&(window.clearTimeout(e._pollingId),e.fetch({reset:!0,remove:!0}).done(function(){t.succeeded(),e._pollingId=window.setTimeout(i,t.currentDelay())}).fail(function(e){e.status>=400&&e.status<500?t.disable({autoEnable:!1}):t.failed()}))};e._isPolling=!0,e._breaker.on("enabled",i),i()}()},stopPolling:function(){this._isPolling&&(window.clearTimeout(this._pollingId),this._breaker.dispose(),this._isPolling=!1,this._pollingId=this._breaker=null)},restart:function(){this.stopPolling(),this.startPolling()},parse:function(){return this.next_href=null,n(73).prototype.parse.apply(this,arguments)},reset:function(e,t){var o,s,l,u;t=t||{},o=n(73).prototype.reset.call(this,e,t),l=n(3).pluck(o,"id"),s=n(3).difference(t.previousModels,this.models),u=n(3).pluck(s,"id"),i(l),r.call(this,u),a.call(this)},hasAnyUnreadMessages:function(){return this.length>0}},{hashFn:function(){return 1},onCleanup:function(e){e.stopPolling()},neverRelease:!0})},448:function(e,t,n){"use strict";function i(e,t){t&&n(3).chain(this.where({primary:!0})).without(e).invoke("set",{primary:!1})}var r=n(461).isSoundCloudMail;e.exports=n(152).extend({model:n(601),defaults:{type:"emails"},setup:function(e){n(152).prototype.setup.call(this,e),this.on("change:primary",i)},baseUrl:function(){return this.getEndpointUrl("userEmails",{id:this.options.userId})},comparator:function(e){return!e.get("primary")},parse:function(e){return n(3).reject(e.collection,function(e){return r(e.address)})}})},449:function(e,t,n){"use strict";function i(e){var t=e.state,n=e.origin,i=void 0;t&&this.shouldAddFromActions?this.add({id:n},{at:0}):!t&&(i=this.get(n))&&this.remove(i)}var r=[{emitter:n(74),event:"follow",getInstance:function(e,t){var n=t.target;return e.options.userId===n},handler:i}];e.exports=n(152).extend(n(195).withOptions({events:r}),{model:n(64),defaults:{limit:7,type:"followers"},shouldAddFromActions:!0,baseUrl:function(){return this.getEndpointUrl("userFollowers",{id:this.options.userId})}})},450:function(e,t,n){"use strict";e.exports=n(73).extend({model:n(608),defaults:{type:"web-profiles"},url:function(){return this.getEndpointUrl("userWebProfiles",{urn:n(94).generate("user",this.options.userId)})},parse:function(e){return e.forEach(function(e){var t=e.url,n=e.network,i=e.title;e.id=t+"_"+n+"_"+i}),e},getProfileByName:function(e){return this.find(function(t){return t.get("network")===e})}},{hashFn:function(e,t){return t.userId}})},453:function(e,t,n){"use strict";e.exports=n(80).extend(n(266).withOptions({read:"artwork_url"}),n(361),{resource_type:"multi-track-artwork",fields:{artwork_url:{defaultValue:""}},setup:function(){var e=this;this.on("imageDataChanged",function(t){t.file&&e.markFieldsDirty("artwork_url")}).on("canceled",this.unsetImageFile.bind(this,{force:!0})).on("allSaved",this.unsetImageFile.bind(this,{force:!0}))},saveSound:function(e){var t=this.getImageFileInfo(),i={sound:e,isSuccess:!1};return t.file?(e.setImageFile(t.file,t.source),e.uploadImage().then(function(){return{sound:e,isSuccess:!0}},function(){return i})):n(56).reject(i)},getAttributesFromModels:function(){return null},getAttributesToBeSaved:function(){return{}}})},454:function(e,t,n){"use strict";function i(){var e=this;this.validate().then(function(t){return t?(e.set("editing",!1),e.saveEdits()):n(56).reject()})}function r(){this.isDirty()||this.setToModelAttributes()}function o(e){this.getAudible().set(e),this.trigger("saved")}function s(e){this.set({errorMessage:this.getErrorMessageTemplate("save",this.getAudible().get("kind"),this.extractErrorMessage(e))})}e.exports=n(80).extend(n(561),n(207),{resource_type:"restricted-audible-edit",requiredModelAttributes:["description","purchase_title","purchase_url"],actions:{"default":"save",save:function(){return i.call(this)},cancel:function(){this.cancel()},retry:function(){return i.call(this)}},fields:{buyLink:{defaultValue:""},buyTitle:{defaultValue:"Buy"},description:{defaultValue:""}},buttons:{save:{label:n(51).t("Save changes"),pendingLabel:n(51).t("Saving"),action:"save"},cancel:{label:n(51).t("Cancel"),action:"cancel"},retry:{label:n(51).t("Retry"),action:"retry"}},constraints:{buyLink:[[n(313),{strict:!1}]],buyTitle:[[n(544)]],description:[[n(108),{maxLength:4e3,message:n(51).t("Playlist description must not exceed 4000 characters")}]]},constraintConditions:{buyTitle:{fields:[],check:function(){return n(55).get("me").getPerk("customBuyTitle")}}},setup:function(e,t){var i=t.resource_id,o=t.resource_type;this._audible="restricted-playlist-edit"===o?new(n(88))({id:i}):new(n(67))({id:i});var s=this.requiredModelAttributes.map(function(e){return"change:"+e});this.listenTo(this._audible,s.join(" "),r),this._audible.attrExists(this.requiredModelAttributes)?this.setToModelAttributes():this._audible.fetch({attrs:this.requiredModelAttributes}).fail(function(){return n(124).raise({fatal:!0})})},saveEdits:function(){var e=this.getAudible(),t=this.getAttributesToBeSaved(),i="restricted-playlist-edit"===this.options.resource_type,r=i?{id:e.id}:{urn:e.get("urn")},a=i?{playlist:t}:{track:t},l=i?"feedPlaylistUpdate":"feedTrackUpdate";return n(23).callEndpoint(l,r,null,null,a).then(o.bind(this,t),s.bind(this))},getAudible:function(){return this._audible},getAttributesFromModel:function(){var e=this.getAudible();return{buyLink:e.get("purchase_url"),buyTitle:e.get("purchase_title")||this.getFieldMetadata("buyTitle").defaultValue,description:e.get("description")}},getAttributesToBeSaved:function(){var e=this.get("buyLink");return{purchase_url:e?n(65).normalize(e):"",purchase_title:this.get("buyTitle")||"",description:this.get("description")||""}},cancel:function(){this.set("errorMessage",""),this.markFieldsClean(),this.trigger("canceled")},saveCleanup:function(e){this.markFieldsClean()}},{hashFn:function(e,t){return e.resource_id||t&&t.resource_id||e.id||null}})},455:function(e,t,n){"use strict";function i(){var e="check_identifier_recaptcha";return this.getValidFieldValues(["identifier",e]).then(n(241).checkIdentifier).then(s(this,e))}function r(){var e="signin_with_password_recaptcha";return this.getValidFieldValues(["identifier","password",e]).then(n(241).signinWithPassword).then(s(this,e))}function o(){var e="signup_with_email_recaptcha",t="require_captcha_2"===n(55).get("experiments").get("v2_listening","signup_always_require_recaptcha_web_2");return t&&this.toggleRecaptcha(e,!0),this.getValidFieldValues(["identifier","password","age",e,"accept_terms"]).then(n(241).signupWithEmail).then(s(this,e))}function s(e,t){arguments.length<=2||void 0===arguments[2]?!1:arguments[2];return function(i){return i.error===w?(e.toggleRecaptcha(t,!0),n(56).reject()):i}}function a(){return this.getValidFieldValues(["accept_terms"]).then(_).then(n(241).signupWithFacebook)}function l(){return this.getValidFieldValues(["accept_terms"]).then(y).then(n(241).signupWithGoogle)}function u(){return _().then(n(241).signinWithFacebook)}function c(){return y().then(n(241).signinWithGoogle)}function d(){var e=this;return this.getValidFieldValues(["username"]).then(function(t){var i=e.get("gender"),r=e.get("genderCustom"),o=n(55).get("me"),s={username:t,gender:"custom"===i?r:i};return o&&o.set(s),n(56).mapEither(p,b("meUpdate",null,null,null,s))})}function h(){return this.getValidFieldValues(["identifier"]).then(function(e){return n(56).mapEither(p,b("resetPassword",null,{email:e}))})}function p(e){return n(56).resolve(e.body||{})}var f=n(3).assign,g=n(3).mapObject,m=n(117).loadFacebookSDK,_=n(117).getFacebookToken,v=n(219).loadGoogleAuthSDK,y=n(219).getGoogleToken,b=n(23).callEndpoint,w=n(109).RECAPTCHA_REQUIRED,x=["check_identifier_recaptcha","signup_with_email_recaptcha","signin_with_password_recaptcha"];
e.exports=n(80).extend(n(466),n(467).withOptions({recaptchas:x}),{resource_type:"signin-form",fields:g({identifier:"",password:"",age:null,accept_terms:!1,username:"",reset_password_addresses:null},function(e){return{defaultValue:e}}),constraints:{identifier:[[n(70),{message:n(51).t("Enter a valid email address or profile URL.")}]],password:[[n(70),{message:n(51).t("Enter a password.")}],[n(965),{minLength:6,message:n(51).t("Use at least [[minLength]] characters.")}]],age:[[n(70),{message:n(51).t("Enter your age.")}],[n(967),{minValue:13,message:n(51).t("You must be at least [[minValue]] years old.")}]],accept_terms:[[n(182),{value:!0,message:n(51).t("Accept the terms before continuing.")}]],username:[[n(70),{message:n(51).t("Enter your display name. You can change it later.")}],[n(108),{maxLength:50,message:n(51).t("Enter a display name that is up to [[maxLength]] characters.")}]]},buttons:g({checkIdentifier:{label:n(51).t("Continue")},signinWithPassword:{label:n(51).t("Sign in")},signupWithEmail:{label:n(51).t("Continue")},signupWithGoogle:{label:n(51).t("Get started")},signupWithFacebook:{label:n(51).t("Get started")},addUserInformation:{label:n(51).t("Get started")},promptPasswordReset:{label:n(51).t("Request a password reset")}},function(e,t){return f(e,{action:t})}),actions:{checkIdentifier:i,signinWithGoogle:c,signinWithFacebook:u,signinWithPassword:r,signupWithEmail:o,signupWithGoogle:l,signupWithFacebook:a,addUserInformation:d,promptPasswordReset:h},setup:function(){m(),v()}})},481:function(e,t,n){"use strict";e.exports=n(66).extend({submodelMap:{comment:n(106),playlist:n(88),promoted_by:n(64),track:n(67),user:n(64)},baseUrl:function(){var e={cursor:this.get("uuid"),limit:1};return this.getEndpointUrl("myActivitiesTracks",{},e)},parse:function(e){return e.collection?e.collection[0]:e},createSubmodel:function(){var e,t=n(3).last(this._submodels);n(66).prototype.createSubmodel.apply(this,arguments),e=n(3).last(this._submodels),e!==t&&this.listenTo(e,"destroy",this.onSubmodelDestroy)},onSubmodelDestroy:function(){this.destroy()},getSound:function(){var e,t;switch(this.get("type")){case"track":case"track-like":case"track-repost":case"track-sharing":case"track-promoted":e=this.get("track").id,t=n(67);break;case"comment":e=this.get("comment").track.id,t=n(67);break;case"playlist":case"playlist-like":case"playlist-repost":case"playlist-sharing":case"playlist-promoted":e=this.get("playlist").id,t=n(88)}return e?t.instances.get(e):null},equivalentTo:function(e){return this.get("uuid")===e.get("uuid")},getUuid:function(){return this.get("uuid")||this.id},isPromoted:function(){var e=this.get("type");return"track-promoted"===e||"playlist-promoted"===e}},{convert:function(e,t){var i,r,o,s={};if(r=(e.get||function(e){return this[e]}).bind(e),r("type")&&r("created_at")&&(r("track")||r("playlist"))&&(i={uuid:n(3).uniqueId(),type:r("type").replace(/_/g,"-"),created_at:r("created_at"),tags:"affiliated"},o=r("track"),o?i.track=o:i.playlist=r("playlist"),t))try{s=t.toJSON()}finally{i.user=s}return i},hashFn:function(){return null}})},482:function(e,t,n){(function(t){"use strict";function i(e){return n(264).centered(e,450,500,"createNewConnection")}var r,o;o={facebook_profile:"connection-facebook.html",twitter:"connection-facebook.html",facebook_page:"connection-facebook.html",tumblr:"connection-facebook.html"};var s=e.exports=n(66).extend({baseUrl:function(){return this.getEndpointUrl("myConnection",{id:this.id})}},{create:function(e){var s,a,l=o[e];if(r){if(s=r.popup,r.type===e)return s&&!s.closed&&s.focus&&s.focus(),r.deferred;r.deferred.reject()}return r||(r={deferred:n(56).defer().always(function(){var e=r.popup;e&&!e.closed&&e.close(),window.clearInterval(r.intervalId),r=null}),popup:null,intervalId:null}),a=r.deferred,l=window.location.protocol+"//"+window.location.host+"/"+l,n(61).login().fail(a.reject).done(function(){t.ajax({type:"POST",url:"me/connections",data:{service:e,redirect_uri:l},dataType:"json",contentType:"application/json"}).fail(a.reject).done(function(e){var t=r.popup=i(e.authorize_url);r.intervalId=window.setInterval(function(){(!t||t.closed)&&a.reject()},2e3)})}),a},callback:function(e){var t,i=n(65).parseQueryString(e.location.search);"1"===i.success?(t=new s({id:parseInt(i.id,10)}),t.fetch().fail(r.deferred.reject).done(function(){n(57).trigger("connect:newConnection",t),r.deferred.resolve(t)})):(n(57).trigger("connect:connectionError",i.errorMessage),r.deferred.reject())}})}).call(t,n(1))},483:function(e,t,n){"use strict";e.exports=n(240).extend({readEndpoint:"myFollowingsIds",createEndpoint:"myFollowingsCreate",deleteEndpoint:"myFollowingsDelete"})},484:function(e,t,n){"use strict";function i(e){var t=e.kind,i=e.station,r=e.playlist,o=e.user;switch(t){case"station":return new(n(125))(i);case"playlist":return new(n(88))(r);case"user":return new(n(64))(o);default:return null}}e.exports=n(66).extend({resource_type:"historicalPlayContext",submodelMap:{playlist:n(88),station:n(125),user:n(64)},setup:function(e){this.contextModel=i(e),this.contextModel&&this.addSubmodel(this.contextModel)},getContextId:function(){var e=this.get("context_urn"),t=n(94).toComponents(e),i=t.id;switch(this.get("kind")){case"station":return e;case"user":case"playlist":return i}}},{hashFn:function(e){var t=e.id,n=e.resource_id,i=e.context_urn;return t||n||i}})},485:function(e,t,n){"use strict";e.exports=n(66).extend({resource_type:"like",submodelMap:{track:n(67),playlist:n(88)},url:null,setup:function(e){},getAudible:function(){var e=void 0,t=void 0;return(e=this.get("track"))?(t=n(67).instances.get(e.id),t||window.console.error("Could not find sound with id "+e.id,e)):(e=this.get("playlist"))?(t=n(88).instances.get(e.id),t||window.console.error("Could not find playlist with id "+e.id,e)):window.console.error("No track or playlist data found",this.attributes),t},isPlaylist:function(){return!this.get("track")},isSound:function(){return!!this.get("track")}},{hashFn:function(e){return e.id||[e.user_id,e.track?"s":"p",(e.track||e.playlist).id].join("_")},getLikeModelData:function(e,t,n){var i={user_id:e,created_at:(new Date).toISOString(),kind:"like"};return"sound"===t?(i.track={id:n},i.playlist=null):(i.playlist={id:n},i.track=null),i}})},505:function(e,t){"use strict";var n="https://exit.sc?url=%s";e.exports={oneline:{paragraphs:!1,whitelist:[],externalLinks:!1},"default":{redirectorPattern:n}}},507:function(e,t){"use strict";var n=Object.prototype.toString,i=n.call(function(){return arguments}());e.exports=function(e){return n.call(e)===i}},508:function(e,t,n){"use strict";e.exports=n(1143)()?Object.setPrototypeOf:n(1144)},509:function(e,t){"use strict";var n=Object.prototype.toString,i=n.call("");e.exports=function(e){return"string"==typeof e||e&&"object"==typeof e&&(e instanceof String||n.call(e)===i)||!1}},510:function(e,t,n){e.exports=n.p+"assets/images/close-modal-dark-6aac3b9.svg"},514:function(e,t,n){e.exports=n.p+"assets/images/header/wordmark-d95b0ac.png"},515:function(e,t,n){e.exports=n.p+"assets/images/header/wordmark@2x-8fdb346.png"},516:function(e,t,n){e.exports=n.p+"assets/images/upsell/pulse-upsell-phones-c9c5eab.png"},517:function(e,t,n){e.exports=n.p+"assets/images/upsell/pulse-upsell-phones@2x-0a7a02a.png"},519:function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-fluid-fixed">\n  <div class="sc-border-light-right l-main">\n    <div class="l-tabs">\n\n    </div>\n    <div class="l-content">\n\n    </div>\n  </div>\n  <div class="l-sidebar-right">\n\n  </div>\n</div>\n'},useData:!0})},524:function(e,t,n){(function(e,i){function r(e,t){this._id=e,this._clearFn=t}var o=n(2877).nextTick,s=Function.prototype.apply,a=Array.prototype.slice,l={},u=0;t.setTimeout=function(){return new r(s.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(s.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},t.setImmediate="function"==typeof e?e:function(e){var n=u++,i=arguments.length<2?!1:a.call(arguments,1);return l[n]=!0,o(function(){l[n]&&(i?e.apply(null,i):e.call(null),t.clearImmediate(n))}),n},t.clearImmediate="function"==typeof i?i:function(e){delete l[e]}}).call(t,n(524).setImmediate,n(524).clearImmediate)},526:function(e,t,n){(function(t,n,i){e.exports=function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="/build/",t(0)}(function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))switch(typeof e[t]){case"function":break;case"object":e[t]=function(t){var n=t.slice(1),i=e[t[0]];return function(e,t,r){i.apply(this,[e,t,r].concat(n))}}(e[t]);break;default:e[t]=e[e[t]]}return e}([function(e,t,n){function i(){return _++}var r,o=n(1),s=n(12),a=n(14),l=n(36),u=n(42),c=n(37),d=n(46),h=n(41),p=n(119),f=n(43),g=null,m=!1,_=0,v=[];e.exports=r=function(e){if(m)throw new Error("Not allowed since cleanUp() has been called.");v.push(this),e=e||{},this._players={},this._volume=1,this._mute=!1,this.States=l,this.Errors=u,this._settings=s({},e,r.defaults)},r.MimeTypes=f,r.Protocols=p,r.Events=c,r.States=l,r.Errors=u,r.BrowserUtils=d,r.defaults={flashAudioPath:"flashAudio.swf",flashLoadTimeout:2e3,flashObjectID:"flashAudioObject",audioObjectID:"html5AudioObject",updateInterval:50,bufferTime:8e3,maxBufferLength:9e4,mseEnableBufferingBeforePlay:!1,bufferingDelay:500,streamUrlProvider:null,seekHackEnabled:!0,audioGlitchSleepHackEnabled:!0,enableWebCrypto:!0},r.capabilities=h.names,r.createDefaultMediaDescriptor=function(e,t,n){if(m)throw new Error("Not allowed since cleanUp() has been called.");if(!e||!t||!t.length)throw new Error("invalid input to create media descriptor");return n||(n=0),{id:e,src:t,duration:n,forceSingle:!1,mimeType:void 0,maxBufferLength:void 0}},r.prototype.getAudioPlayer=function(e){return this._players[e]},r.prototype.hasAudioPlayer=function(e){return void 0!==this._players[e]},r.prototype.removeAudioPlayer=function(e){this.hasAudioPlayer(e)&&delete this._players[e]},r.prototype.setVolume=function(e){e=Math.min(1,e),this._volume=Math.max(0,e);for(var t in this._players)this._players.hasOwnProperty(t)&&this._players[t].setVolume(this._volume)},r.prototype.getVolume=function(){return this._volume},r.prototype.setMute=function(e){this._muted=e;for(var t in this._players)this._players.hasOwnProperty(t)&&this._players[t].setMute(this._muted)},r.prototype.getMute=function(){return this._muted},r.prototype.createAudioPlayer=function(e,t){if(m)throw new Error("Not allowed since cleanUp() has been called.");if(!e)throw"AudioManager: No media descriptor object passed, can't build any player";if(e.constructor!==Array&&(e=[e]),0===e.length)throw"AudioManager: Descriptors array was empty, can't build any player";for(var n=o({},this._settings,t),r=null,s=null,l=0;!r&&l<e.length;l++){if(s=e[l],null==s.id&&(s.id="player-"+i()),!s.src)throw new Error("AudioManager: You need to pass a valid media source URL");r=this._players[s.id],r||(r=a.createAudioPlayer(s,n))}if(!r)throw new Error("AudioManager: No player could be created from the given descriptor(s)");return this._players[s.id]=r,this._players[s.id].setVolume(this._volume),this._players[s.id].setMute(this._muted),this._players[s.id].on(c.STATE_CHANGE,this._onStateChange,this),r},r.cleanUp=function(e){return e=e||function(){},m?void e():(m=!0,v.forEach(function(e){for(var t in e._players)e._players.hasOwnProperty(t)&&e._players[t].kill(),e._players={}}),this._players=[],void(g?g.destroy(e):e()))},r.prototype._onStateChange=function(e,t){t.getState()===l.DEAD&&this.removeAudioPlayer(t.getId())}},function(e,t,n){function i(e,t,n){for(var i=-1,r=s(t),o=r.length;++i<o;){var a=r[i],l=e[a],u=n(l,t[a],a,e,t);(u===u?u===l:l!==l)&&(void 0!==l||a in e)||(e[a]=u)}return e}var r=n(2),o=n(8),s=n(4),a=o(function(e,t,n){return n?i(e,t,n):r(e,t)});e.exports=a},[121,3,4],function(e,t){function n(e,t,n){n||(n={});for(var i=-1,r=t.length;++i<r;){var o=t[i];n[o]=e[o]}return n}e.exports=n},[122,5,6,7],function(e,t){function n(e){return!!e&&"object"==typeof e}function i(e,t){var n=null==e?void 0:e[t];return s(n)?n:void 0}function r(e){return o(e)&&h.call(e)==a}function o(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function s(e){return null==e?!1:r(e)?p.test(c.call(e)):n(e)&&l.test(e)}var a="[object Function]",l=/^\[object .+?Constructor\]$/,u=Object.prototype,c=Function.prototype.toString,d=u.hasOwnProperty,h=u.toString,p=RegExp("^"+c.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=i},function(e,t){function n(e){return r(e)&&f.call(e,"callee")&&(!m.call(e,"callee")||g.call(e)==c)}function i(e){return null!=e&&s(e.length)&&!o(e)}function r(e){return l(e)&&i(e)}function o(e){var t=a(e)?g.call(e):"";return t==d||t==h}function s(e){return"number"==typeof e&&e>-1&&e%1==0&&u>=e}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function l(e){return!!e&&"object"==typeof e}var u=9007199254740991,c="[object Arguments]",d="[object Function]",h="[object GeneratorFunction]",p=Object.prototype,f=p.hasOwnProperty,g=p.toString,m=p.propertyIsEnumerable;e.exports=n},function(e,t){function n(e){return!!e&&"object"==typeof e}function i(e,t){var n=null==e?void 0:e[t];return a(n)?n:void 0}function r(e){return"number"==typeof e&&e>-1&&e%1==0&&_>=e}function o(e){return s(e)&&f.call(e)==u}function s(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function a(e){return null==e?!1:o(e)?g.test(h.call(e)):n(e)&&c.test(e)}var l="[object Array]",u="[object Function]",c=/^\[object .+?Constructor\]$/,d=Object.prototype,h=Function.prototype.toString,p=d.hasOwnProperty,f=d.toString,g=RegExp("^"+h.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),m=i(Array,"isArray"),_=9007199254740991,v=m||function(e){return n(e)&&r(e.length)&&f.call(e)==l};e.exports=v},function(e,t,n){function i(e){return s(function(t,n){var i=-1,s=null==t?0:n.length,a=s>2?n[s-2]:void 0,l=s>2?n[2]:void 0,u=s>1?n[s-1]:void 0;for("function"==typeof a?(a=r(a,u,5),s-=2):(a="function"==typeof u?u:void 0,s-=a?1:0),l&&o(n[0],n[1],l)&&(a=3>s?void 0:a,s=1);++i<s;){var c=n[i];c&&e(t,c,a)}return t})}var r=n(9),o=n(10),s=n(11);e.exports=i},function(e,t){function n(e,t,n){if("function"!=typeof e)return i;if(void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,o){return e.call(t,n,i,r,o)};case 5:return function(n,i,r,o,s){return e.call(t,n,i,r,o,s)}}return function(){return e.apply(t,arguments)}}function i(e){return e}e.exports=n},function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}function i(e){return null!=e&&s(c(e))}function r(e,t){return e="number"==typeof e||l.test(e)?+e:-1,t=null==t?u:t,e>-1&&e%1==0&&t>e}function o(e,t,n){if(!a(n))return!1;var o=typeof t;if("number"==o?i(n)&&r(t,n.length):"string"==o&&t in n){var s=n[t];return e===e?e===s:s!==s}return!1}function s(e){return"number"==typeof e&&e>-1&&e%1==0&&u>=e}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var l=/^\d+$/,u=9007199254740991,c=n("length");e.exports=o},function(e,t){function n(e,t){if("function"!=typeof e)throw new TypeError(i);return t=r(void 0===t?e.length-1:+t||0,0),function(){for(var n=arguments,i=-1,o=r(n.length-t,0),s=Array(o);++i<o;)s[i]=n[t+i];switch(t){case 0:return e.call(this,s);case 1:return e.call(this,n[0],s);case 2:return e.call(this,n[0],n[1],s)}var a=Array(t+1);for(i=-1;++i<t;)a[i]=n[i];return a[t]=s,e.apply(this,a)}}var i="Expected a function",r=Math.max;e.exports=n},function(e,t,n){function i(e,t){return void 0===e?t:e}function r(e,t){return s(function(n){var i=n[0];return null==i?i:(n.push(t),e.apply(void 0,n))})}var o=n(1),s=n(13),a=r(o,i);e.exports=a},11,function(e,t,n){var i=n(15),r=n(45),o=n(47),s=null,a=null,l=n(50),u=n(120),c=n(43),d=e.exports={};d.createAudioPlayer=function(e,t){if(!e.mimeType){var n=e.src.split("?",1)[0];n=n.substring(n.lastIndexOf(".")+1,n.length),e.mimeType=c.getTypeByExtension(n)}var d=s,h=l,p=r;return e.forceSingle&&(d=a,h=u,p=o),d&&d.canPlay(e)?new d(e,t):h&&h.canPlay(e)?new h(e,t):p&&p.canPlay(e)?new p(e,t):i&&i.canPlay(e)?new i(e,t):null}},function(e,t,n){function i(e,t){a.call(this,e,t,"FlashAudioProxy"),this.getState()!==c.ERROR&&(i.players[e.id]=this,this._errorMessage=null,this._errorID=null,this._volume=1,this._muted=!1,i.creatingFlashAudio||(i.flashAudio?this._createFlashAudio():i.createFlashObject(t)))}var r=n(1),o=n(16),s=n(27),a=n(33),l=n(37),u=n(42),c=n(36),d=n(43),h=n(44);e.exports=i,r(i.prototype,a.prototype),i.players={},i.canPlay=function(e){var t=e.src.split(":",1)[0];return"rtmp"===t||"rtmpt"===t||e.mimeType===d.MP3},i.createFlashObject=function(e){i.creatingFlashAudio=!0,i.containerElement=document.createElement("div"),i.containerElement.setAttribute("id",e.flashObjectID+"-container"),i.flashElementTarget=document.createElement("div"),i.flashElementTarget.setAttribute("id",e.flashObjectID+"-target"),i.containerElement.appendChild(i.flashElementTarget),document.body.appendChild(i.containerElement);var t=function(t){if(t.success)i.flashAudio=document.getElementById(e.flashObjectID),window.setTimeout(function(){if(i.flashAudio&&!("PercentLoaded"in i.flashAudio))for(var e in i.players)i.players.hasOwnProperty(e)&&(i.players[e]._errorID=u.FLASH_PROXY_FLASH_BLOCKED,i.players[e]._errorMessage="Flash object blocked",i.players[e]._setState(c.ERROR),i.players[e]._logger.type=i.players[e].getType(),i.players[e]._logger.log(i.players[e]._errorMessage))},e.flashLoadTimeout),i.flashAudio.triggerEvent=function(e,t){i.players[e]._triggerEvent(t)},i.flashAudio.onPositionChange=function(e,t,n,r){i.players[e]._onPositionChange(t,n,r)},i.flashAudio.onDebug=function(e,t,n){i.players[e]._logger.type=t,i.players[e]._logger.log(n)},i.flashAudio.onStateChange=function(e,t){i.players[e]._setState(t),t===c.DEAD&&delete i.players[e]},i.flashAudio.onInit=function(e){i.creatingFlashAudio=!1,o(s(i.players),"_createFlashAudio")};else for(var n in i.players)i.players.hasOwnProperty(n)&&(i.players[n]._errorID=u.FLASH_PROXY_CANT_LOAD_FLASH,i.players[n]._errorMessage="Cannot create flash object",i.players[n]._setState(c.ERROR))};document.getElementById(e.flashObjectID)||h.embedSWF(e.flashAudioPath,e.flashObjectID+"-target","1","1","9.0.24","",{json:encodeURIComponent(JSON.stringify(e))},{allowscriptaccess:"always"},{id:e.flashObjectID,tabIndex:"-1"},t)},i._ready=function(){return i.flashAudio&&!i.creatingFlashAudio},i.prototype._createFlashAudio=function(){i.flashAudio.createAudio(this.getDescriptor()),this._state=i.flashAudio.getState(this.getId()),this.setVolume(this._volume),this.setMute(this._muted)},i.prototype._triggerEvent=function(e){this._logger.log("Flash element triggered event: "+e),this.trigger(e,this)},i.prototype._setState=function(e){this._state!==e&&(this._state=e,this.trigger(l.STATE_CHANGE,e,this))},i.prototype._onPositionChange=function(){this._triggerPositionChangeEvent()},i.prototype.getType=function(){return i._ready()?i.flashAudio.getType(this.getId()):this._type},i.prototype.getContainerElement=function(){return i.containerElement},i.prototype.play=function(e){if(i._ready()){if(this.getState()===c.PAUSED)return void this.resume();e=void 0===e?0:e,i.flashAudio.playAudio(this.getId(),e)}},i.prototype.pause=function(){i._ready()&&i.flashAudio.pauseAudio(this.getId())},i.prototype.seek=function(e){i._ready()&&i.flashAudio.seekAudio(this.getId(),e)},i.prototype.resume=function(){i._ready()&&i.flashAudio.resumeAudio(this.getId())},i.prototype.setVolume=function(e){this._volume=e,i._ready()&&i.flashAudio.setVolume(this.getId(),e)},i.prototype.getVolume=function(){return i._ready()?i.flashAudio.getVolume(this.getId()):this._volume},i.prototype.setMute=function(e){this._muted=e,i._ready()&&i.flashAudio.setMute(this.getId(),e)},i.prototype.getMute=function(){return i._ready()?i.flashAudio.getMute(this.getId()):this._muted},i.prototype.getState=function(){return this._state},i.prototype.getCurrentPosition=function(){return i._ready()?i.flashAudio.getCurrentPosition(this.getId()):0},i.prototype.getLoadedPosition=function(){return i._ready()?i.flashAudio.getLoadedPosition(this.getId()):0},i.prototype.getDuration=function(){return i._ready()?i.flashAudio.getDuration(this.getId()):0},i.prototype.kill=function(){return i._ready()?void i.flashAudio.killAudio(this.getId()):0},i.prototype.getErrorMessage=function(){return this._errorMessage?this._errorMessage:i.flashAudio.getErrorMessage(this.getId())},i.prototype.getErrorID=function(){return this._errorID?this._errorID:i.flashAudio.getErrorID(this.getId())},i.prototype.getLevelNum=function(){return i._ready()?i.flashAudio.getLevelNum(this.getId()):0},i.prototype.getLevel=function(){return i._ready()?i.flashAudio.getLevel(this.getId()):0},i.prototype.setLevel=function(e){return i._ready()?i.flashAudio.setLevel(this.getId(),e):0}},function(e,t,n){function i(e){return function(t){return null==t?void 0:t[e]}}function r(e){return null!=e&&s(m(e))}function o(e,t){var n=typeof e;if("string"==n&&f.test(e)||"number"==n)return!0;if(d(e))return!1;var i=!p.test(e);return i||null!=t&&e in a(t)}function s(e){return"number"==typeof e&&e>-1&&e%1==0&&g>=e}function a(e){return l(e)?e:Object(e)}function l(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var u=n(17),c=n(22),d=n(21),h=n(26),p=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,f=/^\w*$/,g=9007199254740991,m=i("length"),_=h(function(e,t,n){var i=-1,s="function"==typeof t,a=o(t),l=r(e)?Array(e.length):[];return u(e,function(e){var r=s?t:a&&null!=e?e[t]:void 0;l[++i]=r?r.apply(e,n):c(e,t,n)}),l});e.exports=_},function(e,t,n){function i(e,t){return p(e,t,c)}function r(e){return function(t){return null==t?void 0:t[e]}}function o(e,t){return function(n,i){var r=n?f(n):0;if(!a(r))return e(n,i);for(var o=t?r:-1,s=l(n);(t?o--:++o<r)&&i(s[o],o,s)!==!1;);return n}}function s(e){return function(t,n,i){for(var r=l(t),o=i(t),s=o.length,a=e?s:-1;e?a--:++a<s;){var u=o[a];if(n(r[u],u,r)===!1)break}return t}}function a(e){return"number"==typeof e&&e>-1&&e%1==0&&d>=e}function l(e){return u(e)?e:Object(e)}function u(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var c=n(18),d=9007199254740991,h=o(i),p=s(),f=r("length");e.exports=h},[122,19,20,21],5,6,7,function(e,t,n){function i(e,t,n){null==e||r(t,e)||(t=c(t),e=1==t.length?e:l(e,u(t,0,-1)),t=s(t));var i=null==e?e:e[t];return null==i?void 0:i.apply(e,n)}function r(e,t){var n=typeof e;if("string"==n&&p.test(e)||"number"==n)return!0;if(d(e))return!1;var i=!h.test(e);return i||null!=t&&e in o(t)}function o(e){return a(e)?e:Object(e)}function s(e){var t=e?e.length:0;return t?e[t-1]:void 0}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var l=n(23),u=n(24),c=n(25),d=n(21),h=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,p=/^\w*$/;e.exports=i},function(e,t){function n(e,t,n){if(null!=e){void 0!==n&&n in i(e)&&(t=[n]);for(var r=0,o=t.length;null!=e&&o>r;)e=e[t[r++]];return r&&r==o?e:void 0}}function i(e){return r(e)?e:Object(e)}function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=n},function(e,t){function n(e,t,n){var i=-1,r=e.length;t=null==t?0:+t||0,0>t&&(t=-t>r?0:r+t),n=void 0===n||n>r?r:+n||0,0>n&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(r);++i<r;)o[i]=e[i+t];return o}e.exports=n},function(e,t,n){function i(e){return null==e?"":e+""}function r(e){if(o(e))return e;var t=[];return i(e).replace(s,function(e,n,i,r){t.push(i?r.replace(a,"$1"):n||e)}),t}var o=n(21),s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,a=/\\(\\)?/g;e.exports=r},11,function(e,t,n){function i(e){return r(e,o(e))}var r=n(28),o=n(29);e.exports=i},function(e,t){function n(e,t){for(var n=-1,i=t.length,r=Array(i);++n<i;)r[n]=e[t[n]];return r}e.exports=n},[122,30,31,32],5,6,7,function(e,t,n){function i(e){return function(){for(var t=arguments.length,n=Array(t),i=0;t>i;i++)n[i]=arguments[i];this._fnDepth++;try{switch(t){case 0:return e.call(this);case 1:return e.call(this,n[0]);case 2:return e.call(this,n[0],n[1]);case 3:return e.call(this,n[0],n[1],n[2]);default:return e.apply(this,n)}}finally{if(0===--this._fnDepth){this._fnDepth++;try{this[h]()}finally{this._fnDepth--}}}}}function r(e,t,n){this._fnDepth=0,this._onExitCallbacks=[];for(var r in this)"function"==typeof this[r]&&r!==h&&(this[r]=i.call(this,this[r]));c(this,["_checkPlayheadMoving"]),this._state=null,this._type=n,this._id=e.id,this._descriptor=e,this._settings=t,this._currentPosition=this._loadedPosition=this._positionBeforeSeek=this._duration=0,this._logger=new u(this.getType(),this.getId(),e.title),this._isWaitingForPlayheadToMove=!1,this._lastPlayheadPosition=null,this._stallDetected=!1,this._playheadMovingTimerId=window.setInterval(this._checkPlayheadMoving,this._settings.bufferingDelay),this.updateState(a.INITIALIZE)}var o=n(1),s=n(34),a=n(36),l=n(37),u=n(38),c=n(40).bindAll,d=n(41);e.exports=r;var h="_onExit";o(r.prototype,s),r._capabilities=d.createDefaults(),r.canPlay=function(e){return!1},r.prototype.play=function(e){throw new Error("Not implemented!")},r.prototype.seek=function(e){throw new Error("Not implemented!")},r.prototype.pause=function(){throw new Error("Not implemented!")},r.prototype.resume=function(){throw new Error("Not implemented!")},r.prototype.setVolume=function(e){throw new Error("Not implemented!")},r.prototype.getVolume=function(){throw new Error("Not implemented!")},r.prototype.setMute=function(e){throw new Error("Not implemented!")},r.prototype.getMute=function(){throw new Error("Not implemented!")},r.prototype.getMaxBufferLength=function(){throw new Error("Not implemented!")},r.prototype.setMaxBufferLength=function(e){throw new Error("Not implemented!")},r.prototype.kill=function(){},r.prototype.getErrorMessage=function(){throw new Error("Not implemented!")},r.prototype.getErrorID=function(){throw new Error("Not implemented!")},r.prototype.getCapabilities=function(){return this.constructor._capabilities||r._capabilities},r.prototype.getLogger=function(){return this._logger},r.prototype.getSettings=function(){return this._settings},r.prototype.getDescriptor=function(){return this._descriptor},r.prototype.getType=function(){return this._type},r.prototype.getId=function(){return this._id+""},r.prototype.beforeStateChange=function(e,t){return!0},r.prototype.afterStateChange=function(e,t){},r.prototype.updateState=function(e){var t=this._state;if(t!==e){if(t===a.DEAD)throw new Error("Can't transition out of DEAD state.");if(t===a.ERROR&&e!==a.DEAD)throw new Error("Can only transition from DEAD to ERROR state.");this.beforeStateChange(t,e)&&(this._state=e,e===a.INITIALIZE?this._logger.log('State changed "'+e+'"'):this._logger.log('State changed "'+this.getState()+'", position: '+this.getCurrentPosition()+", duration: "+this.getDuration()),e===a.PLAYING?(this._stallDetected=!1,this._lastPlayheadPosition=null):e===a.DEAD&&window.clearInterval(this._playheadMovingTimerId),this.afterStateChange(t,e),this._triggerOnExit(l.STATE_CHANGE,e,this))}},r.prototype.getState=function(){return this._state},r.prototype._isInOneOfStates=function(){for(var e in arguments)if(arguments[e]===this.getState())return!0;return!1},r.prototype.getCurrentPosition=function(){return Math.min(this._currentPosition,this._duration)},r.prototype.getLoadedPosition=function(){return Math.min(this._loadedPosition,this._duration)},r.prototype.getDuration=function(){return this._duration},r.prototype._triggerPositionChangeEvent=function(){this._triggerOnExit(l.POSITION_CHANGE,this.getCurrentPosition(),this.getLoadedPosition(),this.getDuration(),this)},r.prototype._triggerOnExit=function(){var e=arguments;this._onExitCallbacks.push(function(){this.trigger.apply(this,e)}.bind(this))},r.prototype._onExit=function(){var e=this._onExitCallbacks.slice();this._onExitCallbacks=[],e.forEach(function(e){e()})},r.prototype._onStalled=function(){this._logger.log("Stall detected.")},r.prototype._notifyStalled=function(){this._stallDetected||(this._stallDetected=!0,this._onStalled())},r.prototype._checkPlayheadMoving=function(){if(this.getState()===a.PLAYING&&!this._stallDetected){var e=this.getCurrentPosition(),t=this._lastPlayheadPosition;null!==t&&e-t===0&&this._notifyStalled(),this._lastPlayheadPosition=e}}},function(e,t,n){e.exports=n(35)},function(e,t,n){!function(){function n(){return{keys:Object.keys||function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("keys() called on a non-object");var t,n=[];for(t in e)e.hasOwnProperty(t)&&(n[n.length]=t);return n},uniqueId:function(e){var t=++a+"";return e?e+t:t},has:function(e,t){return o.call(e,t)},each:function(e,t,n){if(null!=e)if(r&&e.forEach===r)e.forEach(t,n);else if(e.length===+e.length)for(var i=0,o=e.length;o>i;i++)t.call(n,e[i],i,e);else for(var s in e)this.has(e,s)&&t.call(n,e[s],s,e)},once:function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}}}}var i,r=Array.prototype.forEach,o=Object.prototype.hasOwnProperty,s=Array.prototype.slice,a=0,l=n();i={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);return i.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!c(this,"once",e,[t,n])||!t)return this;var i=this,r=l.once(function(){i.off(e,r),t.apply(this,arguments)});return r._callback=t,this.on(e,r,n)},off:function(e,t,n){var i,r,o,s,a,u,d,h;if(!this._events||!c(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(s=e?[e]:l.keys(this._events),a=0,u=s.length;u>a;a++)if(e=s[a],o=this._events[e]){if(this._events[e]=i=[],t||n)for(d=0,h=o.length;h>d;d++)r=o[d],(t&&t!==r.callback&&t!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=s.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&d(n,t),i&&d(i,arguments),this},stopListening:function(e,t,n){var i=this._listeners;if(!i)return this;var r=!t&&!n;"object"==typeof t&&(n=this),e&&((i={})[e._listenerId]=e);for(var o in i)i[o].off(t,n,this),r&&delete this._listeners[o];return this}};var u=/\s+/,c=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)e[t].apply(e,[r,n[r]].concat(i));return!1}if(u.test(n)){for(var o=n.split(u),s=0,a=o.length;a>s;s++)e[t].apply(e,[o[s]].concat(i));return!1}return!0},d=function(e,t){var n,i=-1,r=e.length,o=t[0],s=t[1],a=t[2];switch(t.length){case 0:for(;++i<r;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,s);return;case 3:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,s,a);return;default:for(;++i<r;)(n=e[i]).callback.apply(n.ctx,t)}},h={listenTo:"on",listenToOnce:"once"};l.each(h,function(e,t){i[t]=function(t,n,i){var r=this._listeners||(this._listeners={}),o=t._listenerId||(t._listenerId=l.uniqueId("l"));return r[o]=t,"object"==typeof n&&(i=this),t[e](n,i,this),this}}),i.bind=i.on,i.unbind=i.off,i.mixin=function(e){var t=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return l.each(t,function(t){e[t]=this[t]},this),
e},"undefined"!=typeof e&&e.exports&&(t=e.exports=i),t.BackboneEvents=i}(this)},function(e,t){e.exports={PLAYING:"playing",LOADING:"loading",SEEKING:"seeking",PAUSED:"paused",ERROR:"error",IDLE:"idle",INITIALIZE:"initialize",ENDED:"ended",DEAD:"dead"}},function(e,t){e.exports={POSITION_CHANGE:"position-change",STATE_CHANGE:"state-change",DATA:"data",NETWORK_TIMEOUT:"network-timeout",METADATA:"metadata",AUDIO_PERFORMANCE:"audio-performance"}},function(e,t,n){var i,r=n(39),o=null;e.exports=function(e,t,n){if(!i&&(i=r({buffer:!0,label:"audiomanager"}),o)){var s=i;i=function(){s(o(arguments[0]+"%s",Array.prototype.slice.call(arguments,1)))}}return n=n&&n.length?" ["+n.replace(/\s/g,"").substr(0,6)+"]":"",{log:i.bind(null,"%s (%s)%s",e,t,n)}}},function(e,t){"use strict";function n(){function e(e,n){if(p){for(var i=arguments.length,r=Array(i>2?i-2:0),o=2;i>o;o++)r[o-2]=arguments[o];"string"==typeof n?n=" "+n:(r.unshift(n),n="");var s=[t()+" | "+T+(k?"%c":"")+n].concat(A,r);m?E.push({level:e,logArgs:s})>x&&E.shift():h[e].apply(h,s)}}function t(){var e=new Date,t=null===S?0:e-S,n=k?"%c":"";return S=+e,n+i(e)+(n+" ("+n)+r("+"+t+"ms"," ",8)+(n+")")}function n(e){return e.enable=function(){p=!0},e.disable=function(){p=!1},e.bufferOn=function(){m=!0},e.bufferOff=function(){m=!1,E.length=0},e.flush=u()?function(){E.forEach(function(e){var t=e.level,n=e.logArgs;h[t].apply(h,n)}),E.length=0}:function(){},e}var o=c.apply(void 0,arguments),s=o.enabled,p=void 0===s?!0:s,g=o.buffer,m=void 0===g?!1:g,_=o.label,v=void 0===_?"":_,y=o.plainOutput,b=void 0===y?!1:y,w=o.bufferSize,x=void 0===w?1e3:w;if(!u())return n(d.reduce(function(e,t){return e[t]=e},function(){}));h.CL||(h.CL={_cssCounter:0});var k=!b&&l(),S=null,E=[],T=a(v,k),A=k?["color: green","color: grey","color: blue","color: grey",f(v),""]:[],P=h.CL[v]=n(d.reduce(function(t,n){return t[n]=e.bind(null,n),t},e.bind(null,"log")));return P}function i(e){return o(e.getHours())+":"+o(e.getMinutes())+":"+o(e.getSeconds())+"."+r(e.getMilliseconds(),"0",3)}function r(e,t,n){return s(t,n-(""+e).length)+e}function o(e){return r(e,"0",2)}function s(e,t){return t>0?new Array(t+1).join(e):""}function a(e,t){return(t?"%c":"")+(e?e:"")}function l(){if("undefined"==typeof navigator)return!1;var e=navigator.userAgent;return/chrome|firefox|opr/i.test(e)&&!/msie|edge/i.test(e)}function u(){return h&&d.every(function(e){return"function"==typeof h[e]})}function c(){var e=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],t=arguments.length<=1||void 0===arguments[1]?"":arguments[1];return"object"==typeof e&&e||{enabled:e,label:t}}e.exports=n;var d=["log","info","warn","error"],h="undefined"!=typeof console?console:null,p=["color:#fff","border-radius:3px","padding:2px 4px","font-family:sans-serif","text-transform:uppercase","font-size:9px"].join(";")+";",f=function(){var e=["#51613C","#447848","#486E5F","#787444","#6E664E"];return function(t){return t?"background:"+e[h.CL._cssCounter++%e.length]+";"+p:""}}()},function(e,t){function n(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n}function i(e){for(var t=[],n=0;n<e.length;n++)t.push({start:1e3*e.start(n),end:1e3*e.end(n)});return t}function r(e){return e.slice(0).sort(function(e,t){return e.start-t.start}).reduce(function(e,t,n,i){return n>0&&i[n-1].end===t.start?i[n-1].end=t.end:e.push(t),e},[])}function o(e,t,n){return r(n).some(s(e,t))}function s(e,t){return function(n){return e>=n.start&&t<=n.end}}function a(e){var t=e/c,n=u*(Math.pow(Math.E,t)/Math.E);return n=Math.min(n,d),n+=Math.random()*l}var l=200,u=500,c=3,d=45e3;e.exports={bindAll:function(e,t){t.forEach(function(t){if(!e[t])throw new Error(t+" doesn't exist.");e[t]=e[t].bind(e)})},concatBuffersToUint8Array:n,timeRangesToFlatMap:i,normaliseTimeRanges:r,isRangeInTimeRanges:o,getRetryTime:a}},function(e,t){function n(e){for(var t in r)if(r.hasOwnProperty(t)&&void 0===e[r[t]])throw new Error("Caps lack required field: "+t);if(!(e[r.PROTOCOLS]instanceof Array))throw new Error("Caps protocols must be an array");if(!(e[r.MIMETYPES]instanceof Array))throw new Error("Caps mimetypes must be an array");return!0}function i(){var e={};return e[r.MIMETYPES]=[],e[r.PROTOCOLS]=[],e[r.AUDIO_ONLY]=!0,e[r.CAN_SEEK_ALWAYS]=!0,e[r.CAN_CONTROL_BUFFER]=!1,e[r.NEEDS_URL_REFRESH]=!0,e}var r={MIMETYPES:"mimetypes",PROTOCOLS:"protocols",AUDIO_ONLY:"audioOnly",CAN_SEEK_ALWAYS:"canSeekAlways",CAN_CONTROL_BUFFER:"canControlBuffer",NEEDS_URL_REFRESH:"needsUrlRefresh",GENERATES_AUDIO_PERFORMANCE_EVENTS:"generatesAudioPerformanceEvents"},o={createDefaults:i,names:r,validate:n};e.exports=o},function(e,t){e.exports={FLASH_HLS_PLAYLIST_NOT_FOUND:"HLS_PLAYLIST_NOT_FOUND",FLASH_HLS_PLAYLIST_SECURITY_ERROR:"HLS_SECURITY_ERROR",FLASH_HLS_NOT_VALID_PLAYLIST:"HLS_NOT_VALID_PLAYLIST",FLASH_HLS_NO_TS_IN_PLAYLIST:"HLS_NO_TS_IN_PLAYLIST",FLASH_HLS_NO_PLAYLIST_IN_MANIFEST:"HLS_NO_PLAYLIST_IN_MANIFEST",FLASH_HLS_TS_IS_CORRUPT:"HLS_TS_IS_CORRUPT",FLASH_HLS_FLV_TAG_CORRUPT:"HLS_FLV_TAG_CORRUPT",FLASH_HTTP_FILE_NOT_FOUND:"HTTP_FILE_NOT_FOUND",FLASH_RTMP_CONNECT_FAILED:"RTMP_CONNECT_FAILED",FLASH_RTMP_CONNECT_CLOSED:"RTMP_CONNECT_CLOSED",FLASH_RTMP_CANNOT_PLAY_STREAM:"RTMP_CANNOT_PLAY_STREAM",FLASH_PROXY_CANT_LOAD_FLASH:"CANT_LOAD_FLASH",FLASH_PROXY_FLASH_BLOCKED:"FLASH_PROXY_FLASH_BLOCKED",GENERIC_AUDIO_ENDED_EARLY:"GENERIC_AUDIO_ENDED_EARLY",GENERIC_AUDIO_OVERRUN:"GENERIC_AUDIO_OVERRUN",HTML5_AUDIO_ABORTED:"HTML5_AUDIO_ABORTED",HTML5_AUDIO_NETWORK:"HTML5_AUDIO_NETWORK",HTML5_AUDIO_DECODE:"HTML5_AUDIO_DECODE",HTML5_AUDIO_SRC_NOT_SUPPORTED:"HTML5_AUDIO_SRC_NOT_SUPPORTED",MSE_BAD_OBJECT_STATE:"MSE_BAD_OBJECT_STATE",MSE_HLS_NOT_VALID_PLAYLIST:"MSE_HLS_NOT_VALID_PLAYLIST",MSE_HLS_PLAYLIST_NOT_FOUND:"MSE_HLS_PLAYLIST_NOT_FOUND",MSE_HLS_SEGMENT_NOT_FOUND:"MSE_HLS_SEGMENT_NOT_FOUND",MSE_HLS_CANNOT_RETRY:"MSE_HLS_CANNOT_RETRY"}},function(e,t){e.exports={AAC:"audio/aac",M3U8:"application/x-mpegURL",HLS:"application/vnd.apple.mpegurl",MP4A:"audio/mp4",MP3:"audio/mpeg",OGG:"audio/ogg",WAV:"audio/wav",WEBMA:"audio/webm",getTypeByExtension:function(e){var t={mp3:this.MP3,aac:this.AAC,mp4:this.MP4A,mp4a:this.MP4A,ogg:this.OGG,oga:this.OGG,opus:this.OGG,webm:this.WEBM,wav:this.WAV,m3u8:this.M3U8};return t[e]||null}}},function(e,t){function n(){if(!G&&document.getElementsByTagName("body")[0]){try{var e,t=y("span");t.style.display="none",e=H.getElementsByTagName("body")[0].appendChild(t),e.parentNode.removeChild(e),e=null,t=null}catch(n){return}G=!0;for(var i=q.length,r=0;i>r;r++)q[r]()}}function i(e){G?e():q[q.length]=e}function r(e){if(typeof j.addEventListener!=I)j.addEventListener("load",e,!1);else if(typeof H.addEventListener!=I)H.addEventListener("load",e,!1);else if(typeof j.attachEvent!=I)w(j,"onload",e);else if("function"==typeof j.onload){var t=j.onload;j.onload=function(){t(),e()}}else j.onload=e}function o(){var e=H.getElementsByTagName("body")[0],t=y(O);t.setAttribute("style","visibility: hidden;"),t.setAttribute("type",F);var n=e.appendChild(t);if(n){var i=0;!function r(){if(typeof n.GetVariable!=I)try{var o=n.GetVariable("$version");o&&(o=o.split(" ")[1].split(","),Q.pv=[b(o[0]),b(o[1]),b(o[2])])}catch(a){Q.pv=[8,0,0]}else if(10>i)return i++,void window.setTimeout(r,10);e.removeChild(t),n=null,s()}()}else s()}function s(){var e=W.length;if(e>0)for(var t=0;e>t;t++){var n=W[t].id,i=W[t].callbackFn,r={success:!1,id:n};if(Q.pv[0]>0){var o=v(n);if(o)if(!x(W[t].swfVersion)||Q.wk&&Q.wk<312)if(W[t].expressInstall&&l()){var s={};s.data=W[t].expressInstall,s.width=o.getAttribute("width")||"0",s.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(s.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(s.align=o.getAttribute("align"));for(var d={},h=o.getElementsByTagName("param"),p=h.length,f=0;p>f;f++)"movie"!==h[f].getAttribute("name").toLowerCase()&&(d[h[f].getAttribute("name")]=h[f].getAttribute("value"));u(s,d,n,i)}else c(o),i&&i(r);else S(n,!0),i&&(r.success=!0,r.ref=a(n),r.id=n,i(r))}else if(S(n,!0),i){var g=a(n);g&&typeof g.SetVariable!=I&&(r.success=!0,r.ref=g,r.id=g.id),i(r)}}}function a(e){var t=null,n=v(e);return n&&"OBJECT"===n.nodeName.toUpperCase()&&(t=typeof n.SetVariable!==I?n:n.getElementsByTagName(O)[0]||n),t}function l(){return!K&&x("6.0.65")&&(Q.win||Q.mac)&&!(Q.wk&&Q.wk<312)}function u(e,t,n,i){var r=v(n);if(n=_(n),K=!0,C=i||null,D={success:!1,id:n},r){"OBJECT"===r.nodeName.toUpperCase()?(A=d(r),P=null):(A=r,P=n),e.id=B,(typeof e.width==I||!/%$/.test(e.width)&&b(e.width)<310)&&(e.width="310"),(typeof e.height==I||!/%$/.test(e.height)&&b(e.height)<137)&&(e.height="137");var o=Q.ie?"ActiveX":"PlugIn",s="MMredirectURL="+encodeURIComponent(j.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+o+"&MMdoctitle="+encodeURIComponent(H.title.slice(0,47)+" - Flash Player Installation");if(typeof t.flashvars!=I?t.flashvars+="&"+s:t.flashvars=s,Q.ie&&4!==r.readyState){var a=y("div");n+="SWFObjectNew",a.setAttribute("id",n),r.parentNode.insertBefore(a,r),r.style.display="none",g(r)}p(e,t,n)}}function c(e){if(Q.ie&&4!==e.readyState){e.style.display="none";var t=y("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(d(e),t),g(e)}else e.parentNode.replaceChild(d(e),e)}function d(e){var t=y("div");if(Q.win&&Q.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(O)[0];if(n){var i=n.childNodes;if(i)for(var r=i.length,o=0;r>o;o++)1===i[o].nodeType&&"PARAM"===i[o].nodeName||8===i[o].nodeType||t.appendChild(i[o].cloneNode(!0))}}return t}function h(e,t){var n=y("div");return n.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+e+"'>"+t+"</object>",n.firstChild}function p(e,t,n){var i,r=v(n);if(n=_(n),Q.wk&&Q.wk<312)return i;if(r){var o,s,a,l=y(Q.ie?"div":O);typeof e.id==I&&(e.id=n);for(a in t)t.hasOwnProperty(a)&&"movie"!==a.toLowerCase()&&f(l,a,t[a]);Q.ie&&(l=h(e.data,l.innerHTML));for(o in e)e.hasOwnProperty(o)&&(s=o.toLowerCase(),"styleclass"===s?l.setAttribute("class",e[o]):"classid"!==s&&"data"!==s&&l.setAttribute(o,e[o]));Q.ie?V[V.length]=e.id:(l.setAttribute("type",F),l.setAttribute("data",e.data)),r.parentNode.replaceChild(l,r),i=l}return i}function f(e,t,n){var i=y("param");i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)}function g(e){var t=v(e);t&&"OBJECT"===t.nodeName.toUpperCase()&&(Q.ie?(t.style.display="none",function n(){if(4===t.readyState){for(var e in t)"function"==typeof t[e]&&(t[e]=null);t.parentNode.removeChild(t)}else window.setTimeout(n,10)}()):t.parentNode.removeChild(t))}function m(e){return e&&e.nodeType&&1===e.nodeType}function _(e){return m(e)?e.id:e}function v(e){if(m(e))return e;var t=null;try{t=H.getElementById(e)}catch(n){}return t}function y(e){return H.createElement(e)}function b(e){return parseInt(e,10)}function w(e,t,n){e.attachEvent(t,n),Y[Y.length]=[e,t,n]}function x(e){e+="";var t=Q.pv,n=e.split(".");return n[0]=b(n[0]),n[1]=b(n[1])||0,n[2]=b(n[2])||0,t[0]>n[0]||t[0]===n[0]&&t[1]>n[1]||t[0]===n[0]&&t[1]===n[1]&&t[2]>=n[2]?!0:!1}function k(e,t,n,i){var r=H.getElementsByTagName("head")[0];if(r){var o="string"==typeof n?n:"screen";if(i&&(M=null,R=null),!M||R!==o){var s=y("style");s.setAttribute("type","text/css"),s.setAttribute("media",o),M=r.appendChild(s),Q.ie&&typeof H.styleSheets!=I&&H.styleSheets.length>0&&(M=H.styleSheets[H.styleSheets.length-1]),R=o}M&&(typeof M.addRule!=I?M.addRule(e,t):typeof H.createTextNode!=I&&M.appendChild(H.createTextNode(e+" {"+t+"}")))}}function S(e,t){if(X){var n=t?"visible":"hidden",i=v(e);G&&i?i.style.visibility=n:"string"==typeof e&&k("#"+e,"visibility:"+n)}}function E(e){var t=/[\\\"<>\.;]/,n=null!=t.exec(e);return n&&typeof encodeURIComponent!=I?encodeURIComponent(e):e}/*!    SWFObject v2.3.20130521 <http://github.com/swfobject/swfobject>
		    is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
		*/
var T,A,P,C,D,M,R,I="undefined",O="object",L="Shockwave Flash",N="ShockwaveFlash.ShockwaveFlash",F="application/x-shockwave-flash",B="SWFObjectExprInst",U="onreadystatechange",j=window,H=document,$=navigator,z=!1,q=[],W=[],V=[],Y=[],G=!1,K=!1,X=!0,J=!1,Q=function(){var e=typeof H.getElementById!=I&&typeof H.getElementsByTagName!=I&&typeof H.createElement!=I,t=$.userAgent.toLowerCase(),n=$.platform.toLowerCase(),i=n?/win/.test(n):/win/.test(t),r=n?/mac/.test(n):/mac/.test(t),o=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,s="Microsoft Internet Explorer"===$.appName,a=[0,0,0],l=null;if(typeof $.plugins!=I&&typeof $.plugins[L]==O)l=$.plugins[L].description,l&&typeof $.mimeTypes!=I&&$.mimeTypes[F]&&$.mimeTypes[F].enabledPlugin&&(z=!0,s=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),a[0]=b(l.replace(/^(.*)\..*$/,"$1")),a[1]=b(l.replace(/^.*\.(.*)\s.*$/,"$1")),a[2]=/[a-zA-Z]/.test(l)?b(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(typeof j.ActiveXObject!=I)try{var u=new ActiveXObject(N);u&&(l=u.GetVariable("$version"),l&&(s=!0,l=l.split(" ")[1].split(","),a=[b(l[0]),b(l[1]),b(l[2])]))}catch(c){}return{w3:e,pv:a,wk:o,ie:s,win:i,mac:r}}();(function(){Q.w3&&((typeof H.readyState!=I&&("complete"===H.readyState||"interactive"===H.readyState)||typeof H.readyState==I&&(H.getElementsByTagName("body")[0]||H.body))&&n(),G||(typeof H.addEventListener!=I&&H.addEventListener("DOMContentLoaded",n,!1),Q.ie&&(H.attachEvent(U,function e(){"complete"===H.readyState&&(H.detachEvent(U,e),n())}),j===top&&!function t(){if(!G){try{H.documentElement.doScroll("left")}catch(e){return void window.setTimeout(t,0)}n()}}()),Q.wk&&!function i(){return G?void 0:/loaded|complete/.test(H.readyState)?void n():void window.setTimeout(i,0)}()))})();q[0]=function(){z?o():s()};(function(){Q.ie&&window.attachEvent("onunload",function(){for(var e=Y.length,t=0;e>t;t++)Y[t][0].detachEvent(Y[t][1],Y[t][2]);for(var n=V.length,i=0;n>i;i++)g(V[i]);for(var r in Q)Q[r]=null;Q=null;for(var o in T)T[o]=null;T=null})})();e.exports=T={registerObject:function(e,t,n,i){if(Q.w3&&e&&t){var r={};r.id=e,r.swfVersion=t,r.expressInstall=n,r.callbackFn=i,W[W.length]=r,S(e,!1)}else i&&i({success:!1,id:e})},getObjectById:function(e){return Q.w3?a(e):void 0},embedSWF:function(e,t,n,r,o,s,a,c,d,h){var f=_(t),g={success:!1,id:f};Q.w3&&!(Q.wk&&Q.wk<312)&&e&&t&&n&&r&&o?(S(f,!1),i(function(){n+="",r+="";var i={};if(d&&typeof d===O)for(var m in d)i[m]=d[m];i.data=e,i.width=n,i.height=r;var _={};if(c&&typeof c===O)for(var v in c)_[v]=c[v];if(a&&typeof a===O)for(var y in a)if(a.hasOwnProperty(y)){var b=J?encodeURIComponent(y):y,w=J?encodeURIComponent(a[y]):a[y];typeof _.flashvars!=I?_.flashvars+="&"+b+"="+w:_.flashvars=b+"="+w}if(x(o)){var k=p(i,_,t);i.id===f&&S(f,!0),g.success=!0,g.ref=k,g.id=k.id}else{if(s&&l())return i.data=s,void u(i,_,t,h);S(f,!0)}h&&h(g)})):h&&h(g)},switchOffAutoHideShow:function(){X=!1},enableUriEncoding:function(e){J=typeof e===I?!0:e},ua:Q,getFlashPlayerVersion:function(){return{major:Q.pv[0],minor:Q.pv[1],release:Q.pv[2]}},hasFlashPlayerVersion:x,createSWF:function(e,t,n){return Q.w3?p(e,t,n):void 0},showExpressInstall:function(e,t,n,i){Q.w3&&l()&&u(e,t,n,i)},removeSWF:function(e){Q.w3&&g(e)},createCSS:function(e,t,n,i){Q.w3&&k(e,t,n,i)},addDomLoadEvent:i,addLoadEvent:r,getQueryParamValue:function(e){var t=H.location.search||H.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return E(t);for(var n=t.split("&"),i=0;i<n.length;i++)if(n[i].substring(0,n[i].indexOf("="))===e)return E(n[i].substring(n[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(K){var e=v(B);e&&A&&(e.parentNode.replaceChild(A,e),P&&(S(P,!0),Q.ie&&(A.style.display="block")),C&&C(D)),K=!1}},version:"2.3"}},function(e,t,n){function i(e,t,n,i,r){u.prototype.constructor.call(this,e,t,n||"HTML5AudioPlayer"),this.getState()!==s.ERROR&&(this._providedAudioElement=i,this._deferAudioTagCreation=null!=r?r:!0,this._hasLoaded=!1,this._playCalled=!1,this._playRequested=!1,this._startFromPosition=null,this._positionSeekingTo=null,this._fakeSeekCompletionTimer=null,this._positionChangeTimerId=null,this._waitingForPlayingEvent=!1,this._html5Audio=null,this._pendingVolume=1,this._pendingMuted=!1,this._audioElementReady=!1,this._trueDuration=!1,this._descriptor.duration&&(this._duration=this._descriptor.duration),this._bindHandlers(),this._deferAudioTagCreation||this._initMediaElement(!1),this.updateState(s.IDLE))}var r=n(1),o=n(40).bindAll,s=n(36),a=n(37),l=n(42),u=n(33),c=n(46),d=n(40);e.exports=i;var h=/maybe|probably/i;r(i.prototype,u.prototype),i.MediaAPIEvents=["ended","play","playing","pause","seeking","waiting","seeked","error","loadedmetadata","timeupdate","loadstart","progress","suspend"],i.canPlay=function(e){if(!c.supportHTML5Audio())return!1;var t=window.document.createElement("audio");return t&&t.canPlayType?h.test(t.canPlayType(e.mimeType)):!1},i.prototype.getLoadedPosition=function(){return this._html5Audio&&this._updateLoadedPosition(d.timeRangesToFlatMap(this._html5Audio.buffered)),u.prototype.getLoadedPosition.call(this)},i.prototype.play=function(e){if(this._isInOneOfStates(s.ERROR,s.DEAD))return void this._logger.log("Play called but state is ERROR or DEAD.");if(this._playCalled)return this._logger.log("play() has already been called so calling resume() instead."),"undefined"!=typeof e&&(this._logger.log("A time was provided so seeking to there first."),this.seek(e)),void this.resume();this._playCalled=!0,"undefined"!=typeof e&&this._setStartPosition(e);var t=this._startFromPosition;this._logger.log("Play"),this._playRequested=!0,this.updateState(s.LOADING),this._hasLoaded?(null!==t&&this._seek(t),this._play()):(this._logger.log("Cannot play yet as not finished loading. Will play when loading complete (unless pause() happens before this)."),this._deferAudioTagCreation&&this._initMediaElement(!0))},i.prototype.pause=function(){this._isInOneOfStates(s.ERROR,s.DEAD)||(this._logger.log("pause"),this._hasLoaded?this._html5Audio.pause():(this._playRequested=!1,null===this._startFromPosition&&this.updateState(s.PAUSED)))},i.prototype.seek=function(e){return this._isInOneOfStates(s.ERROR,s.DEAD)?void this._logger.log("Seek called but state is ERROR or DEAD."):(this._logger.log("Seek to "+e),this._hasLoaded?void this._seek(e):0>=e?(this._logger.log("Not scheduling seek as playback will start at 0 anyway."),void(this._playRequested||this.updateState(s.PAUSED))):(this.updateState(s.LOADING),this._setStartPosition(e),void this._logger.log("Postponing seek for when loaded.")))},i.prototype.resume=function(){return this._isInOneOfStates(s.ERROR,s.DEAD)?void this._logger.log("Resume called but state is ERROR or DEAD."):(this._logger.log("Resume"),this._playCalled?this._hasLoaded?void this._play():(this._playRequested=!0,void this.updateState(s.LOADING)):(this._logger.log("Calling play() instead as play hasn't been called yet."),void this.play()))},i.prototype.getCurrentPosition=function(){var e=this.getState()===s.SEEKING?this._positionBeforeSeek:this._currentPosition;return Math.min(e,this._duration)},i.prototype.setVolume=function(e){return this._html5Audio?void(this._html5Audio.volume=e):void(this._pendingVolume=e)},i.prototype.getVolume=function(){return this._html5Audio?this._html5Audio.volume:this._pendingVolume},i.prototype.setMute=function(e){return this._html5Audio?void(this._html5Audio.muted=e):void(this._pendingMuted=e)},i.prototype.getMute=function(){return this._html5Audio?this._html5Audio.muted:this._pendingMuted},i.prototype.kill=function(){this._state!==s.DEAD&&(this._state!==s.ERROR&&this._kill(),this.updateState(s.DEAD),this._logger.log("Dead"))},i.prototype.getErrorMessage=function(){return this._errorMessage},i.prototype.getErrorID=function(){return this._errorID},i.prototype._bindHandlers=function(){o(this,["_onPositionChange","_handleHtml5MediaEvent","_onHtml5MediaEvent","_onLoadedMetadata","_onBufferUpdate"])},i.prototype._initMediaElement=function(e){if(this._html5Audio)throw new Error("Audio element already initialised.");this._logger.log("Initialising audio element.");var t=this._getMediaElementMimeType(),n=this._getMediaElementSrc();this._html5Audio=this._providedAudioElement||c.createAudioElement(),this._html5Audio.id=this._settings.audioObjectID+"_"+this.getId(),this._html5Audio.preload="auto",this._html5Audio.type=t||"",this._html5Audio.src=n||"",this._html5Audio.muted=this._pendingMuted,this._html5Audio.volume=this._pendingVolume,this._toggleEventListeners(!0),this._html5Audio.load()},i.prototype._getMediaElementSrc=function(){return this.getDescriptor().src},i.prototype._getMediaElementMimeType=function(){return this.getDescriptor().mimeType},i.prototype._seek=function(e){e=this._fixPosition(e);var t=1e3*this._html5Audio.currentTime===e;return this.getState()===s.SEEKING&&t?void this._logger.log("Seek already in progress to the same position. Ignoring seek request."):(this._cancelFakeSeekCompletionTimer(),this._logger.log("Attempting seek to "+e),this._shouldBeEnded(e)?(this._logger.log("Position is right near the end so going to ENDED state."),this._html5Audio.pause(),this._currentPosition=e,this.updateState(s.SEEKING),this.updateState(s.ENDED),void this._onPositionChange()):t?(this._logger.log("Seek requested to the current position. Faking a seek."),this.updateState(s.SEEKING),void(this._fakeSeekCompletionTimer=window.setTimeout(function(){this._fakeSeekCompletionTimer=null,this._logger.log("Faking seek completion."),this._onSeeked()}.bind(this),0))):(this._html5Audio.currentTime=e/1e3,this._positionSeekingTo=e,this._positionBeforeSeek=this._currentPosition,this._currentPosition=e,this._updateLoadedPosition(d.timeRangesToFlatMap(this._html5Audio.buffered)),void this.updateState(s.SEEKING)))},i.prototype._cancelFakeSeekCompletionTimer=function(){this._fakeSeekCompletionTimer&&(this._logger.log("Cancelling fake seek completion timer."),window.clearTimeout(this._fakeSeekCompletionTimer),this._fakeSeekCompletionTimer=null)},i.prototype._play=function(){if(this.getState()===s.ENDED)return void this._logger.log("Not playing becase in ENDED state.");var e=this._html5Audio.play();e&&e["catch"]&&e["catch"](function(e){"AbortError"===e.name?this._logger.log("Play request was aborted for some reason."):this._logger.log("Unexpected play() error: "+e.name)}.bind(this))},i.prototype._disposeMediaElement=function(){this._html5Audio&&(this._html5Audio.src="",this._html5Audio.hasAttribute("src")&&this._html5Audio.removeAttribute("src"),this._html5Audio.load(),this._logger.log("Disposed media element."))},i.prototype._toggleEventListeners=function(e){var t=e?"addEventListener":"removeEventListener";if(this._html5Audio)i.MediaAPIEvents.forEach(function(e){this._html5Audio[t](e,this._handleHtml5MediaEvent)},this);else if(e)throw new Error("Cannot add listeners, audio element doesn't exist.")},i.prototype._handleHtml5MediaEvent=function(e){return"loadstart"!==e.type||this._audioElementReady||(this._logger.log("HTML5 media element ready."),this._audioElementReady=!0),this._audioElementReady?void this._onHtml5MediaEvent(e):void this._logger.log("HTML5 media event "+e.type+" happened before media element was ready.")},i.prototype._fixPosition=function(e){return this._trueDuration&&e>this._duration?(this._logger.log("Position is past the duration. Capping to the duration: "+this._duration),this._duration):0>e?(this._logger.log("Position is negative. Changing to 0."),0):e},i.prototype._kill=function(){this._logger.log("Killing"),this._cancelFakeSeekCompletionTimer(),this._toggleEventListeners(!1),this._disposeMediaElement(),this._logger.log("Dead")},i.prototype._onBufferUpdate=function(){this._logger.log("Buffer updated.");var e=d.timeRangesToFlatMap(this._html5Audio.buffered);this._updateLoadedPosition(e),this._triggerOnExit(a.DATA,e,this)},i.prototype._onLoadedMetadata=function(){this._logger.log("HTML5 loadedmetadata event."),this._onTrueDurationKnown(1e3*this._html5Audio.duration),this._triggerOnExit(a.METADATA,this),this._onLoaded()},i.prototype._updateLoadedPosition=function(e){var t=this._hasLoaded?this._currentPosition:this._startFromPosition||0,n=0;e.some(function(e){return e.end<t?!1:(n=e.end,!0)}),this._loadedPosition=Math.min(n,this._duration)},i.prototype._onTrueDurationKnown=function(e){this._duration=e,this._trueDuration=!0,null!==this._startFromPosition&&(this._startFromPosition=this._fixPosition(this._startFromPosition))},i.prototype._setStartPosition=function(e){this._startFromPosition=this._fixPosition(e)},i.prototype._onLoaded=function(){if(this._hasLoaded)throw new Error("Already loaded.");this._hasLoaded=!0,this._loadedPosition=this._duration,null!==this._startFromPosition&&(this._logger.log("Seeking to requested start position."),this._seek(this._startFromPosition)),this._playRequested&&(this._logger.log("Play requested before had finished loading. Playing now."),this._play())},i.prototype._onPositionChange=function(){!this._isInOneOfStates(s.DEAD,s.ERROR)&&this._hasLoaded&&(this.getState()===s.ENDED?this._currentPosition=this._duration:this._currentPosition=1e3*this._html5Audio.currentTime,this._triggerPositionChangeEvent())},i.prototype._isTimeBuffered=function(e){if(!this._html5Audio)return!1;for(var t=this._html5Audio.buffered,n=e/1e3,i=0;i<t.length;i++)if(n>=t.start(i)&&n<t.end(i))return!0;return!1},i.prototype._onStalled=function(){this._logger.log("Stall detected, playhead is not advancing anymore. Position: "+this._currentPosition+" Buffered regions: "+this._html5Audio.buffered.length+" Ranges: "+JSON.stringify(d.timeRangesToFlatMap(this._html5Audio.buffered))),this._shouldBeEnded(1e3*this._html5Audio.currentTime)?(this._logger.log("Stalled at the end so switching to the ENDED state."),this.updateState(s.ENDED),this._onPositionChange()):this.updateState(s.LOADING)},i.prototype._startPositionChangeInterval=function(){null===this._positionChangeTimerId&&(this._logger.log("Starting position change updates."),this._positionChangeTimerId=window.setInterval(this._onPositionChange,this._settings.updateInterval))},i.prototype._stopPositionChangeInterval=function(){null!==this._positionChangeTimerId&&(this._logger.log("Stopping position change updates."),window.clearInterval(this._positionChangeTimerId),this._positionChangeTimerId=null)},i.prototype.afterStateChange=function(e,t){switch(t){case s.PLAYING:this._startPositionChangeInterval();break;default:this._stopPositionChangeInterval()}},i.prototype._onHtml5MediaEvent=function(e){"timeupdate"!==e.type&&this._logger.log("HTML5 media event: "+e.type);var t=this.getState();switch(e.type){case"loadedmetadata":this._onLoadedMetadata();break;case"loadstart":case"progress":case"suspend":this._onBufferUpdate();break;case"playing":(this._waitingForPlayingEvent||t!==s.SEEKING)&&(this._cancelFakeSeekCompletionTimer(),this.updateState(s.PLAYING)),this._waitingForPlayingEvent=!1,this._onPositionChange();break;case"pause":this._waitingForPlayingEvent=!1,t!==s.SEEKING&&this.updateState(s.PAUSED),this._onPositionChange();break;case"timeupdate":t!==s.SEEKING&&(this._waitingForPlayingEvent||this._html5Audio.paused||t===s.PLAYING||t===s.ENDED||(this._logger.log("Going to PLAYING from a timeupdate event."),this.updateState(s.PLAYING))),this._onPositionChange();break;case"ended":t!==s.SEEKING&&this.updateState(s.ENDED),this._onPositionChange();break;case"seeking":if(t!==s.SEEKING)throw new Error("State should be SEEKING already from when seek requested in _seek() method. Actual state: "+t);break;case"seeked":if(t!==s.SEEKING)throw new Error("State should be SEEKING. Was "+t);if(this._cancelFakeSeekCompletionTimer(),this._settings.seekHackEnabled&&c.isSafari()&&Math.abs(1e3*this._html5Audio.currentTime-this._positionSeekingTo)>200){this._logger.log("Seek failed. Attempting to seek again to the correct place."),this._html5Audio.currentTime=this._positionSeekingTo/1e3;break}this._onSeeked();break;case"waiting":if(t===s.SEEKING)break;this._waitingForPlayingEvent=!0,this._shouldBeEnded(1e3*this._html5Audio.currentTime)?(this._logger.log("Stalled at the end so switching to the ENDED state."),this.updateState(s.PLAYING),this.updateState(s.ENDED),this._onPositionChange()):t===s.PLAYING&&this._notifyStalled();break;case"error":this._error(this._html5AudioErrorCodeToErrorId(this._html5Audio.error.code))}},i.prototype._onSeeked=function(){if(this._waitingForPlayingEvent)return void this._logger.log("Staying in SEEKING as a 'waiting' event was fired meaning a 'playing' event should happen when playback resumes.");if(this._html5Audio.seeking)return void this._logger.log("Staying in SEEKING as another seek is in progress.");var e=this.getState();if(e!==s.SEEKING)throw new Error("State should be SEEKING. Was "+e);this._positionSeekingTo=null,this._html5Audio.ended||this._shouldBeEnded(1e3*this._html5Audio.currentTime)?this.updateState(s.ENDED):this.updateState(this._html5Audio.paused?s.PAUSED:s.PLAYING),this._onPositionChange()},i.prototype._shouldBeEnded=function(e){return this._duration-e<=400},i.prototype._html5AudioErrorCodeToErrorId=function(e){return{1:l.HTML5_AUDIO_ABORTED,2:l.HTML5_AUDIO_NETWORK,3:l.HTML5_AUDIO_DECODE,4:l.HTML5_AUDIO_SRC_NOT_SUPPORTED}[e]},i.prototype._error=function(e){var t="Error: ";this._errorID=e,this._errorMessage=this._getErrorMessage(this._errorID)||"Unknown error.",this._logger.log(t+this._errorID+" "+this._errorMessage),this._kill(),this.updateState(s.ERROR)},i.prototype._getErrorMessage=function(e){var t={};return t[l.HTML5_AUDIO_ABORTED]="The fetching process for the media resource was aborted by the user agent at the user's request.",t[l.HTML5_AUDIO_NETWORK]="A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable.",t[l.HTML5_AUDIO_DECODE]="An error of some description occurred while decoding the media resource, after the resource was established to be usable.",t[l.HTML5_AUDIO_SRC_NOT_SUPPORTED]="The media resource indicated by the src attribute was not suitable.",t[e]}},function(e,t,n){var i=n(43);e.exports={supportHTML5Audio:function(){var e;try{if(window.HTMLAudioElement&&"undefined"!=typeof Audio)return e=new Audio,!0}catch(t){return!1}},createAudioElement:function(){var e=document.createElement("audio");return e.setAttribute("msAudioCategory","BackgroundCapableMedia"),e.mozAudioChannelType="content",e},isMobile:function(e){var t=window.navigator.userAgent,n=["mobile","iPhone","iPad","iPod","Android","Skyfire"];return n.some(function(e){return e=new RegExp(e,"i"),e.test(t)})},isIE10Mobile:function(){return/IEmobile\/10\.0/gi.test(navigator.userAgent)},isNativeHlsSupported:function(){try{return""!==document.createElement("audio").canPlayType("application/vnd.apple.mpegURL")}catch(e){return!1}},isSafari:function(){var e=navigator.userAgent;return!/chrome|opera/i.test(e)&&/safari/i.test(e)},isMSESupported:function(){return!!window.MediaSource},isMSESupportMPEG:function(){return this.isMSESupported()&&window.MediaSource.isTypeSupported("audio/mpeg")},isMSESupportMP4:function(){return this.isMSESupported()&&window.MediaSource.isTypeSupported("audio/mp4")},getMSETargetMimeType:function(){return this.isMSESupportMPEG()&&!this.isSafari()?i.MP3:this.isMSESupportMP4()?i.MP4A:null},isOnLine:function(){return window.navigator.onLine!==!1}}},function(e,t,n){function i(e,t,n){r.prototype.constructor.call(this,e,t,n||"HTML5SingleAudioPlayer")}var r=n(48),o=n(45),s=n(1);e.exports=i,s(i.prototype,r.prototype),i.canPlay=o.canPlay,i.prototype._buildPlayer=function(){return new o(this._descriptor,this._settings,this._type+"*",this._sharedComponent)}},function(e,t,n){function i(e,t,n){l.prototype.constructor.call(this,e,t,n||"BaseHTML5SingleAudioPlayer")}var r=n(1),o=n(49),s=n(46),a=s.createAudioElement(),l=o.build(a);e.exports=i,r(i.prototype,l.prototype)},function(e,t,n){function i(e){function t(t,n,i){o(this,["_onStateChange","_onPositionChange","_onAudioPerformanceEvent"]),l.prototype.constructor.call(this,t,n,i||"BaseSingleAudioPlayer"),this._sharedComponent=e,this._player=null,this._volume=1,this._mute=!1,this._startedPlaying=!1,this._currentPositionWhenWentInactive=0,this._loadedPositionWhenWentInactive=0,this._durationWhenWentInactive=this._descriptor.duration||0,this._playerErrorMessage=null,this._playerErrorID=null,this.updateState(s.IDLE)}var n=null;return r(t.prototype,l.prototype),t._buildPlayer=function(){throw new Error("Not implemented!")},t.prototype._addEventListeners=function(e){var t=e===!1?"off":"on";this._player[t](a.STATE_CHANGE,this._onStateChange),this._player[t](a.POSITION_CHANGE,this._onPositionChange),this._player[t](a.AUDIO_PERFORMANCE,this._onAudioPerformanceEvent)},t.prototype._makeInactive=function(){if(!this._player)throw new Error("Already inactive.");this._logger.log("Making inactive: "+this.getId()),this._addEventListeners(!1),this._updateCurrentPositionWhenWentInactive(this._player.getCurrentPosition()),this._loadedPositionWhenWentInactive=this._player.getLoadedPosition(),this._durationWhenWentInactive=this._player.getDuration(),this._player.kill(),this._player=null,n=null,this._startedPlaying=!1,this.getState!==s.ERROR&&this.updateState(s.PAUSED)},t.prototype._activate=function(){if(this._player)throw new Error("Already active.");if(this.getState()===s.ERROR)throw new Error("Cannot reactivate a player that is in the ERROR state.");if(this.getState()===s.DEAD)throw new Error("Cannot reactivate a player that is in the DEAD state.");n&&this._makeInactive.call(n),n=this,this._logger.log("Making active: "+this.getId()),this._player=this._buildPlayer(),this._addEventListeners(!0),this._restoreState()},t.prototype._restoreState=function(){this._player.setVolume(this._volume),this._player.setMute(this._mute),this._currentPositionWhenWentInactive>0&&this._player.seek(this._currentPositionWhenWentInactive)},t.prototype._onStateChange=function(e){e===s.PLAYING&&(this._startedPlaying=!0),e===s.ERROR&&(this._playerErrorID=this._player.getErrorID(),this._playerErrorMessage=this._player.getErrorMessage(),this._makeInactive()),e!==s.IDLE&&this.updateState(e)},t.prototype._updateCurrentPositionWhenWentInactive=function(e){this._currentPositionWhenWentInactive=e},t.prototype._onPositionChange=function(){this._triggerPositionChangeEvent()},t.prototype._onAudioPerformanceEvent=function(e){this._triggerOnExit(a.AUDIO_PERFORMANCE,e)},t.prototype.play=function(e){n!==this&&this._activate(),this._player.play(e)},t.prototype.pause=function(){if(!this._isInOneOfStates(s.IDLE,s.PAUSED,s.DEAD)){if(n!==this)throw new Error("Player is inactive so should be either DEAD or PAUSED. Was "+this.getState());this._player.pause()}},t.prototype.seek=function(e){if(n===this)this._player.seek(e);else{if(this.getState()===s.DEAD)return;if(!this._isInOneOfStates(s.IDLE,s.PAUSED))throw new Error("Inactive player should be PAUSED or IDLE. Was "+this.getState());this._updateCurrentPositionWhenWentInactive(e),this.updateState(s.SEEKING),this.updateState(s.PAUSED)}},t.prototype.resume=function(){n!==this&&this._activate(),this._player.resume()},t.prototype.setVolume=function(e){this._volume=e,this._player&&this._player.setVolume(e)},t.prototype.getVolume=function(){return this._volume},t.prototype.setMute=function(e){this._mute=e,this._player&&this._player.setMute(e)},t.prototype.getMute=function(){return this._mute},t.prototype.getErrorMessage=function(){return this._playerErrorMessage},t.prototype.getErrorID=function(){return this._playerErrorID},t.prototype.getCurrentPosition=function(){return this._player&&this._startedPlaying?this._player.getCurrentPosition():this._currentPositionWhenWentInactive},t.prototype.getLoadedPosition=function(){return this._player&&this._startedPlaying?this._player.getLoadedPosition():this._loadedPositionWhenWentInactive},t.prototype.getDuration=function(){return this._player&&this._startedPlaying?this._player.getDuration():this._durationWhenWentInactive},t.prototype.kill=function(){this._logger.log("kill()"),this.getState()!==s.DEAD&&(n===this&&(this._player.kill(),n=null),this._player=null,this.updateState(s.DEAD))},t}var r=n(1),o=n(40).bindAll,s=n(36),a=n(37),l=n(33);e.exports={build:i}},function(e,t,n){function i(e,t,n,i,r){if(l.prototype.constructor.call(this,e,t,n||"HLSMSEPlayer",i,!0),this.getState()!==d.ERROR){o(this,["_onPlaylistLoaded","_onSegmentLoaded","_onSimpleHlsToolkitError","_onNetworkTimeout","_onMediaSourceReady","_onMediaSourceError","_runSeekHack"]),this._streamUrlProvider=this._descriptor.streamUrlProvider||this._settings.streamUrlProvider||null;var s;s=null!=this._descriptor.maxBufferLength?this._descriptor.maxBufferLength:null!=this._settings.maxBufferLength?this._settings.maxBufferLength:this._settings.maxBufferTime,this._maxBufferLength=s,this._enableBufferingBeforePlay=!!this._settings.mseEnableBufferingBeforePlay,this._logger.log("maxBufferLength initialised to "+s+"ms"),this._updateBufferWindowTimer=null,this._updateMSEBufferTimer=null,this._updatingMSEBuffer=!1,this._lastSegmentAppendedIndex=null,this._playlistLoaded=!1,this._seekHackCounter=0,this._seekHackResetState=0,this._audioGlitchPauseTimer=null,this._appendedInitData=!1,this._mseToolkit=null,this._mseReady=!1,this._simpleHlsToolkitProvided=!!r,this._simpleHlsToolkit=r||new u(this._logger,this._descriptor.src,x,f.MP3,this._streamUrlProvider,!0,t.enableWebCrypto),this._addSimpleHlsToolkitEventListeners(!0),this._updateBufferWindow(),this._html5Audio&&this._createMSEToolkit(),this._simpleHlsToolkit.hasPlaylistLoaded()&&this._onPlaylistLoaded()}}var r=n(1),o=n(40).bindAll,s=n(37),a=n(42),l=n(45),u=n(51),c=n(118),d=n(36),h=n(41),p=n(119),f=n(43),g=n(46),m=n(40),_=1500,v=10,y=10,b=500,w=200,x=g.getMSETargetMimeType(),k=function(){var e={};return e[h.names.PROTOCOLS]=[p.HLS],e[h.names.MIMETYPES]=[f.HLS,f.M3U8,f.MP3],e[h.names.NEEDS_URL_REFRESH]=!1,e[h.names.CAN_CONTROL_BUFFER]=!0,e};e.exports=i,r(i.prototype,l.prototype),i._capabilities=r({},h.createDefaults(),k()),i.prototype._updateLoadedPosition=function(e){var t=0;if(this._simpleHlsToolkit){var n=this._simpleHlsToolkit.getSegments(!0).pop();n&&(t=n.getEndPosition())}this._loadedPosition=Math.min(t,this._duration)},i.prototype._updateBufferWindow=function(){if(this._playCalled||this._enableBufferingBeforePlay){var e=this._maxBufferLength;if(e>0&&!this._simpleHlsToolkit.loadRequested())return this._logger.log("Calling load() on SimpleHLSToolkit."),void this._simpleHlsToolkit.load();if(this._playlistLoaded){this._updateBufferWindowTimer&&window.clearTimeout(this._updateBufferWindowTimer);var t=this._hasLoaded?this._currentPosition:this._startFromPosition||0,n=Math.min(e,this._duration-t);this._simpleHlsToolkit.setTimeRange(new u.TimeRange(t,n)),n!==this._duration-t&&(this._updateBufferWindowTimer=window.setTimeout(function(){this._updateBufferWindowTimer=null,this._updateBufferWindow()}.bind(this),500))}}},i.canPlay=function(e){return x&&u.canTransmux(f.MP3,x)&&g.supportHTML5Audio()&&e.mimeType===f.M3U8?g.isMSESupportMPEG()||g.isMSESupportMP4():!1},i.prototype._onMediaSourceReady=function(){this._mseReady=!0,this._updateMSEDuration(),this._handleLoaded(),this._updateMSEBuffer()},i.prototype._updateMSEBuffer=function(){this._mseReady&&(this._updatingMSEBuffer||(this._updatingMSEBuffer=!0,this._updateMSEBufferTimer&&(window.clearTimeout(this._updateMSEBufferTimer),this._updateMSEBufferTimer=null),this._mseToolkit.whenStable(function(){for(var e=this._hasLoaded?this._currentPosition:this._startFromPosition||0,t=Math.max(0,e-1e3),n=e+5e3,i=t,r=n,o=this._mseToolkit.getBuffered(),s=this._simpleHlsToolkit.getSegments(!0),a=null,l=0;l<s.length&&!a;l++){var u=s[l],c=u.getStartPosition(),d=u.getEndPosition();d>t&&n>=c&&(i>c&&(i=c),d>r&&(r=d),m.isRangeInTimeRanges(c+w,Math.max(c+w,d-w),o)||(a=u))}var h=!1;if(a)a.getIndex()===this._lastSegmentAppendedIndex?(this._logger.log("Was going to try appending the last segment that was appended. Ignoring..."),this._lastSegmentAppendedIndex=null):(this._logger.log("Appending segment "+a.getIndex()),this._appendSegment(a),this._lastSegmentAppendedIndex=a.getIndex(),h=!0);else if(o.length&&!g.isSafari()){var p=o[0].start,f=o[o.length-1].end;i-w>p?(this._mseToolkit.remove(p,i),h=!0):f>r+w&&(this._mseToolkit.remove(r,f),h=!0)}this._updatingMSEBuffer=!1,h?this._updateMSEBuffer():this._updateMSEBufferTimer=window.setTimeout(function(){this._updateMSEBufferTimer=null,this._updateMSEBuffer()}.bind(this),1e3)}.bind(this))))},i.prototype._onMediaSourceError=function(e){this._logger.log("MediaSource API error: "+e.message),this._error(a.MSE_BAD_OBJECT_STATE)},i.prototype._onNetworkTimeout=function(){this._triggerOnExit(s.NETWORK_TIMEOUT)},i.prototype._onSegmentLoaded=function(e){this._logger.log("Segment "+e.getIndex()+" loaded."),this._updateMSEBuffer()},i.prototype._onPlaylistLoaded=function(){this._logger.log("Playlist loaded."),this._playlistLoaded=!0,this._setDuration(this._simpleHlsToolkit.getDuration()),this._logger.log("Duration set from playlist info to "+this._duration),this._updateBufferWindow(),this._handleLoaded()},i.prototype._onSimpleHlsToolkitError=function(e){this._logger.log("Error from SimpleHLSToolkit."),this._error(e)},i.prototype._handleLoaded=function(){this._hasLoaded||!this._playlistLoaded||!this._html5Audio||this._html5Audio.readyState<1||(this._triggerOnExit(s.METADATA,this),this._settings.audioGlitchSleepHackEnabled&&g.isSafari()?(this._logger.log("Sleeping to prevent audio glitch."),this._audioGlitchPauseTimer=window.setTimeout(function(){this._audioGlitchPauseTimer=null,this._logger.log("Continuing."),this._onLoaded()}.bind(this),b)):this._onLoaded())},i.prototype.afterStateChange=function(e,t){switch(l.prototype.afterStateChange.call(this,e,t),t){case d.SEEKING:this._updateBufferWindow(),this._updateMSEBuffer();break;case d.PLAYING:this._updateBufferWindow()}},i.prototype._setStartPosition=function(e){l.prototype._setStartPosition.call(this,e),this._updateBufferWindow()},i.prototype.play=function(e){l.prototype.play.call(this,e),this._enableBufferingBeforePlay||this._updateBufferWindow()},i.prototype._onLoadedMetadata=function(){this._logger.log("HTML5 loadedmetadata event."),this._handleLoaded()},i.prototype._setDuration=function(e){this._onTrueDurationKnown(e),this._mseReady&&this._updateMSEDuration()},i.prototype._updateMSEDuration=function(){this._mseToolkit.whenStable(function(){try{this._mseToolkit.setDuration(this._duration)}catch(e){this._onMediaSourceError(e)}}.bind(this))},i.prototype._appendInitData=function(e){this._mseToolkit.appendInitData(e),this._logger.log("Appending init data.")},i.prototype._appendSegment=function(e){var t=this._simpleHlsToolkit.getInitData();!this._appendedInitData&&t&&(this._appendInitData(t),this._appendedInitData=!0),this._mseToolkit.append(e)},i.prototype._onStalled=function(){l.prototype._onStalled.call(this),this.getState()===d.LOADING&&(this._updateMSEBuffer(),this._settings.seekHackEnabled&&g.isSafari()&&this._runSeekHack())},i.prototype._runSeekHack=function(){if(this._logger.log("Attempting to fix playback stall by seeking. Attempt: "+(this._seekHackCounter+1)),this._seekHackCounter>=y)return void this._logger.log("Aborting because already attempted to fix too many times.");var e=1e3*this._html5Audio.currentTime,t=1e3*this._html5Audio.duration,n=v;if(e!==t){for(var i=m.timeRangesToFlatMap(this._html5Audio.buffered),r=null,o=0;o<i.length;o++){var s=i[o];if(s.start>=e&&s.start-e<=500){r=s;break}}var a=null;r?(this._logger.log("Seeking into next buffered region to try and fix playback."),a=r.start+n):(this._logger.log("Seeking a little bit ahead to try and fix playback."),a=e+n+n*this._seekHackCounter),a=Math.min(1e3*this._html5Audio.duration,a),this._logger.log("Seeking to "+a+" to try and fix playback."),this._seek(a),this._seekHackCounter++,this._seekHackResetState=0}},i.prototype._onHtml5MediaEvent=function(e){if(l.prototype._onHtml5MediaEvent.call(this,e),this._seekHackCounter>0)if("seeked"===e.type)this._seekHackResetState=1;else if("timeupdate"===e.type&&this._seekHackResetState>=1){
if(this._seekHackResetState++,this._seekHackResetState<3)return;this._logger.log("Playback seems to be fixed. Resetting seek hack attempts count. (Attempts: "+this._seekHackCounter+")"),this._seekHackCounter=0,this._seekHackResetState=0}},i.prototype._getErrorMessage=function(e){var t={};return t[a.MSE_BAD_OBJECT_STATE]="MediaSource API has thrown an exception",t[e]||l.prototype._getErrorMessage.call(this,e)},i.prototype._initMediaElement=function(e){l.prototype._initMediaElement.call(this),e&&this._createMSEToolkit()},i.prototype._createMSEToolkit=function(){this._mseToolkit=new c(this._html5Audio,this._logger,x),this._toggleEventListeners(!0),this._addMseToolkitEventListeners(!0)},i.prototype._addMseToolkitEventListeners=function(e){var t=e===!1?"off":"on";if(this._mseToolkit)this._mseToolkit[t](c.Events.SOURCE_READY,this._onMediaSourceReady),this._mseToolkit[t](c.Events.SOURCE_ERROR,this._onMediaSourceError);else if(e)throw new Error("Cannot add listeners, MSE toolkit not instantiated yet.")},i.prototype._getMediaElementSrc=function(){return null},i.prototype._getMediaElementMimeType=function(){return null},i.prototype._addSimpleHlsToolkitEventListeners=function(e){if(this._simpleHlsToolkit){var t=e===!1?"off":"on";this._simpleHlsToolkit[t](u.Events.PLAYLIST_LOADED,this._onPlaylistLoaded),this._simpleHlsToolkit[t](u.Events.SEGMENT_LOADED,this._onSegmentLoaded),this._simpleHlsToolkit[t](u.Events.NETWORK_TIMEOUT,this._onNetworkTimeout),this._simpleHlsToolkit[t](u.Events.ERROR,this._onSimpleHlsToolkitError)}},i.prototype._kill=function(){this._logger.log("Killing"),this._addMseToolkitEventListeners(!1),this._addSimpleHlsToolkitEventListeners(!1),this._updateMSEBufferTimer&&window.clearTimeout(this._updateMSEBufferTimer),this._audioGlitchPauseTimer&&(this._logger.log("Clearing audio glitch sleep timer."),window.clearTimeout(this._audioGlitchPauseTimer)),this._updateBufferWindowTimer&&window.clearTimeout(this._updateBufferWindowTimer),this._simpleHlsToolkitProvided||this._simpleHlsToolkit.kill(),this._simpleHlsToolkit=null,this._mseToolkit&&(this._mseToolkit.kill(),this._mseToolkit=null),l.prototype._kill.call(this),this._logger.log("Dead")},i.prototype.seek=function(e){this._isInOneOfStates(d.ERROR,d.DEAD)||(!this._isTimeBuffered(e)&&this._isTimeBuffered(e+_)&&(e+=_,this._logger.log("Detected smart seeking opportunity, adjusting target to: "+e)),l.prototype.seek.call(this,e))},i.prototype.hasStreamUrlProvider=function(){return!!this._streamUrlProvider},i.prototype.getMaxBufferLength=function(){return this._maxBufferLength},i.prototype.setMaxBufferLength=function(e){if(!this._isInOneOfStates(d.ERROR,d.DEAD)&&this._maxBufferLength!==e){if(0>e)throw new Error("maxBufferLength cannot be negative.");this._logger.log("Changing maxBufferLength to "+e+"ms"),this._maxBufferLength=e,this._updateBufferWindow()}}},function(e,t,n){var i,r=n(34),o=n(1),s=n(52),a=n(43),l=n(62),u=n(40),c=n(42);e.exports=i=function(e,t,n,i,r,o,a){u.bindAll(this,["_update","_onPlaylistLoaded","_onPlaylistFailed","_onPlaylistParseError","_onSegmentLoaded","_onSegmentFailed","_onSegmentTransmuxed"]),null==a&&(a=!0),this._logger=e,this._playlistRequested=!1,this._playlistLoaded=!1,this._segmentLoading=null,this._duration=null,this._targetMimeType=n,this._segmentMimeType=i,this._initData=null,this._hlsToolkit=new s(e,t,{enableWebCrypto:a}),this._transmuxer=null,this._transmuxerHandle=null,this._keepSegments=!!o,this._timeRanges=[],this._segments=[],this._completeSegmentIndexes=[],this._segmentErrors=0,this._playlistRefreshRetryTimer=null,this._refreshingPlaylist=!1,this._streamUrlProvider=r,this._streamUrlProviderRetryTimer=null,this._streamUrlProviderTimesFailed=0,this._playlistTimesFailed=0,this._initTransmuxer(),this._addHlsToolkitEventListeners(!0),this._log("Loaded.")},o(i.prototype,r),i.Events={ERROR:"error",PLAYLIST_LOADED:"playlist-loaded",GOT_INIT_DATA:"got-init-data",SEGMENT_LOADED:"segment-loaded",SEGMENT_REMOVED:"segment-removed",NETWORK_TIMEOUT:"network-timeout"},i.canTransmux=function(e,t){return e===a.MP3&&(t===a.MP3||t===a.MP4A)},i.TimeRange=function(e,t){this.start=e,this.duration=t,this.end=e+t},i._Segment=function(e,t){var n=e._hasSegmentLoaded(t);this._index=t.index,this._data=n?t.data:null,this._startPosition=t.startPosition,this._endPosition=t.endPosition,this._duration=t.duration,this._mimeType=t.mimeType,this._hasLoaded=n},i._Segment.prototype.getIndex=function(){return this._index},i._Segment.prototype.getData=function(){return this._data},i._Segment.prototype.getMimeType=function(){return this._mimeType},i._Segment.prototype.getStartPosition=function(){return this._startPosition},i._Segment.prototype.getEndPosition=function(){return this._endPosition},i._Segment.prototype.getDuration=function(){return this._duration},i._Segment.prototype.hasLoaded=function(){return this._hasLoaded},i.prototype.load=function(){this._playlistRequested||(this._log("Requesting playlist."),this._playlistRequested=!0,this._hlsToolkit.updatePlaylist())},i.prototype.loadRequested=function(){return this._playlistRequested},i.prototype.setTimeRange=function(e){e.duration>0&&this.load();var t=[e];this._timeRanges=t,this._update()},i.prototype.hasPlaylistLoaded=function(){return this._playlistLoaded},i.prototype.getTotalNumSegments=function(){return this._hlsToolkit.getNumSegments()},i.prototype.getNumSegments=function(){return this._segments.length},i.prototype.getDuration=function(){return this._duration},i.prototype.getInitData=function(){return this._initData},i.prototype.getSegments=function(e){return this._segments.map(function(t){return e&&!this._hasSegmentLoaded(t)?null:new i._Segment(this,t)}.bind(this)).filter(function(e){return!!e})},i.prototype.kill=function(){this._hlsToolkit.kill(),this._addHlsToolkitEventListeners(!1),this._playlistRefreshRetryTimer&&window.clearTimeout(this._playlistRefreshRetryTimer),this._streamUrlProviderRetryTimer&&window.clearTimeout(this._streamUrlProviderRetryTimer),this._timeRanges=[],this._segments=[],this._completeSegmentIndexes=[],this._log("Killed.")},i.prototype._hasSegmentLoaded=function(e){return-1!==this._completeSegmentIndexes.indexOf(e.index)},i.prototype._timeRangesChanged=function(e){var t=this._timeRanges;return t.length!==e.length?!0:t.some(function(t,n){var i=e[n];return t.start!==i.start||t.duration!==i.duration})},i.prototype._update=function(){var e=[];this._segments.forEach(function(t){this._overlapsTimeRange(t)||(this._segmentLoading===t&&(this._segmentLoading=null,t.cancel(),this._transmuxerHandle&&(this._transmuxerHandle.abort(),this._transmuxerHandle=null)),!this._keepSegments&&this._hasSegmentLoaded(t)&&(t.cancel(),e.push(t),this._completeSegmentIndexes.splice(this._completeSegmentIndexes.indexOf(t.index),1)))}.bind(this));var t=[];this._hlsToolkit.getSegments().forEach(function(e){if(this._overlapsTimeRange(e)){if(!this._refreshingPlaylist&&e.isNew()){var n=this._segmentLoading;(!n||n.startPosition>e.startPosition)&&(n&&(this._log("Cancelling segment "+n.index+" download as there is an earlier segment is now required."),n.cancel()),this._segmentLoading=e,e.load())}t.push(e)}else-1!==this._completeSegmentIndexes.indexOf(e.index)&&t.push(e)}.bind(this)),this._segments=t,e.forEach(function(e){this.trigger(i.Events.SEGMENT_REMOVED,new i._Segment(this,e))}.bind(this))},i.prototype._overlapsTimeRange=function(e){return 0!==e.duration&&this._timeRanges.some(function(t){return e.startPosition<t.end&&e.endPosition>=t.start})},i.prototype._onPlaylistLoaded=function(){this._refreshingPlaylist=!1,this._playlistLoaded||(this._playlistLoaded=!0,this._duration=this._hlsToolkit.getDuration(),this.trigger(i.Events.PLAYLIST_LOADED)),this._update()},i.prototype._onPlaylistParseError=function(){this._log("Error parsing playlist."),this._onPlaylistError()},i.prototype._onPlaylistFailed=function(e){this._log("playlist loading failed. HTTP status code is "+e),0===e&&this._notifyNetworkTimeout(),this._onPlaylistError()},i.prototype._onPlaylistError=function(){this._log("Playlist loading failed  "+this._playlistTimesFailed+" times before."),this._playlistTimesFailed++;var e=u.getRetryTime(this._playlistTimesFailed);this._playlistRefreshRetryTimer=window.setTimeout(function(){this._playlistRefreshRetryTimer=null,this._log("Retrying..."),this._streamUrlProvider?this._refreshPlaylist():this._hlsToolkit.updatePlaylist()}.bind(this),e),this._log("Retrying in "+e+" milliseconds")},i.prototype._onSegmentLoaded=function(e){this._transmuxSegment(e)},i.prototype._onSegmentTransmuxed=function(e){this._completeSegmentIndexes.push(e.index),this._segmentLoading=null,this._transmuxerHandle=null,this._segmentErrors=0,this._update(),this.trigger(i.Events.SEGMENT_LOADED,new i._Segment(this,e))},i.prototype._onSegmentFailed=function(e){var t=e.status;switch(this._log("segment loading failed. Status: "+t),t){case s.Status.NOT_FOUND:case s.Status.FORBIDDEN:case s.Status.DECRYPTION_ERROR:this._segmentErrors++;var n=u.getRetryTime(this._segmentErrors);this._log("Will perform playlist refresh after "+n+"ms."),this._segmentLoading.cancel(),this._segmentLoading=null,this._refreshingPlaylist=!0,this._playlistRefreshRetryTimer=window.setTimeout(function(){this._log("Performing refresh."),this._playlistRefreshRetryTimer=null,this._refreshPlaylist()}.bind(this),n);break;case s.Status.TIMEOUT:case s.Status.SERVER_ERROR:case s.Status.FAILED:e.status===s.Status.FAILED&&this._log("WARNING: segment loading failed for unknown reason! Will retry."),e.loadAfterDelay(u.getRetryTime(e.timesFailed)),t===s.Status.TIMEOUT&&this._notifyNetworkTimeout();break;default:throw new Error("Invalid status on failed segment: "+e.status)}},i.prototype._notifyNetworkTimeout=function(){this.trigger(i.Events.NETWORK_TIMEOUT)},i.prototype._refreshPlaylist=function(){this._refreshingPlaylist=!0;var e=this._streamUrlProvider;return e?void e().done(function(e){this._logger.log("Got new stream url from stream url provider."),this._streamUrlProviderTimesFailed=0,this._hlsToolkit.setUri(e),this._hlsToolkit.invalidateIncompleteSegments(),this._hlsToolkit.updatePlaylist()}.bind(this)).fail(function(){this._log("Failed to retrieve stream url from stream url provider.");var e=u.getRetryTime(++this._streamUrlProviderTimesFailed);this._streamUrlProviderRetryTimer=window.setTimeout(function(){this._streamUrlProviderRetryTimer=null,this._log("Retrying request to stream url provider for a new url."),this._refreshPlaylist()}.bind(this),e),this._log("Retrying in "+e+" milliseconds.")}.bind(this)):(this._log("Can't update playlist, got no stream URL provider."),void this.trigger(i.Events.ERROR,c.MSE_HLS_CANNOT_RETRY))},i.prototype._onSegmentProgress=function(e){var t=Math.round(e.loaded/e.total*100);this._log("segment "+e.index+" loaded "+e.loaded+" of "+e.total+" bytes ("+t+"%)")},i.prototype._initTransmuxer=function(){var e=this._targetMimeType,t=this._segmentMimeType;if(e===t)return void this._log("No transmuxing needed. "+t+" is supported.");if(!i.canTransmux(t,e))throw new Error('Transmuxing from "'+t+'" to "'+e+'" is not supported.');this._log("Will transmux to fragmented MP4."),this._transmuxer=new l(l.Configs.MP3_TO_FMP4),this._transmuxer.on("initData",function(e){this._log("Got init data."),this._initData=e,this.trigger(i.Events.GOT_INIT_DATA,e)}.bind(this)),this._transmuxer.on("segment",function(e){this._log("Transmuxed data ready, "+e.data.length+" bytes for segment "+e.index),this._onSegmentTransmuxed(e)}.bind(this))},i.prototype._transmuxSegment=function(e){this._transmuxer?(this._log("Transmuxing segment "+e.index),this._transmuxerHandle=this._transmuxer.process(e)):this._onSegmentTransmuxed(e)},i.prototype._log=function(e){this._logger.log("[SimpleHLS] "+e)},i.prototype._addHlsToolkitEventListeners=function(e){var t=e===!1?"off":"on";this._hlsToolkit[t](s.Events.PLAYLIST_LOADED,this._onPlaylistLoaded),this._hlsToolkit[t](s.Events.PLAYLIST_FAILED,this._onPlaylistFailed),this._hlsToolkit[t](s.Events.PLAYLIST_PARSE_ERROR,this._onPlaylistParseError),this._hlsToolkit[t](s.Events.SEGMENT_LOADED,this._onSegmentLoaded),this._hlsToolkit[t](s.Events.SEGMENT_PROGRESS,this._onSegmentProgress),this._hlsToolkit[t](s.Events.SEGMENT_FAILED,this._onSegmentFailed)}},function(e,t,n){function i(e){this.reason=e}function r(e,t){this._uri=e,this._logger=t,this._deferred=null,this._xhr=null,this._retrieveKeyNumAttempts=0,this._retryTimer=null}var o,s=n(43),a=n(53),l=n(40),u=n(1),c=n(55).Deferred,d=n(34),h={NEW:"new",REQUESTED:"requested",COMPLETE:"complete",TIMEOUT:"timeout",FORBIDDEN:"forbidden",NOT_FOUND:"not-found",SERVER_ERROR:"server-error",DECRYPTION_ERROR:"decryption-error",FAILED:"failed",INVALIDATED:"invalidated"},p=/(.+?)=(.+?)(?:,|$)/g,f=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT(INF): *(\d+(?:\.\d+)?)(?:,(.*))?)|(?:(?!#)()(\S.+))|(?:#EXT-X-(BYTERANGE): *(\d+(?:@\d+(?:\.\d+)?)?)|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(PROGRAM-DATE-TIME):(.+))|(?:#EXT-X-(VERSION):(\d+))|(?:(#)(.*):(.*))|(?:(#)(.*)))(?:.*)\r?\n?/g,g=6e3;e.exports=o=function(e,t,n){this._logger=e,this._decryptor=a.getDecryptor(e,n),this._duration=0,this._segments=[],this._playlistXHR=null,this.setUri(t)},o.Events={PLAYLIST_LOADED:"playlist-loaded",PLAYLIST_PARSE_ERROR:"playlist-parse-error",PLAYLIST_FAILED:"playlist-failed",SEGMENT_LOADED:"segment-loaded",SEGMENT_PROGRESS:"segment-progress",SEGMENT_FAILED:"segment-failed",SEGMENT_CANCELED:"segment-canceled"},o.Status=h,o.ENCRYPTION_METHODS={NONE:"NONE","AES-128":"AES-128"};var m={method:o.ENCRYPTION_METHODS.NONE,keyUri:null,retrieveKey:null,iv:null},_={};u(o.prototype,d),o.Segment=function(e,t,n,i,r,o){u(this,{toolkit:e,uri:t,startPosition:n,endPosition:n+i,duration:i,index:r,data:null,status:h.NEW,isLast:!1,timesFailed:0,loaded:0,total:0,xhr:null,retryTimer:null,mimeType:s.MP3,encryption:o||m,_abortRequest:null}),this._logger=e._logger},o.Segment.prototype.containsTime=function(e){return e>=this.startPosition&&e<=this.endPosition},o.Segment.prototype.isComplete=function(){return this.status===h.COMPLETE},o.Segment.prototype.hasFailed=function(){return this.status===h.TIMEOUT||this.status===h.FORBIDDEN||this.status===h.NOT_FOUND||this.status===h.SERVER_ERROR||this.status===h.DECRYPTION_ERROR||this.status===h.FAILED},o.Segment.prototype.isNew=function(){return this.status===h.NEW},o.Segment.prototype.loadInProgress=function(){return this.status===h.REQUESTED},o.Segment.prototype.isInvalidated=function(){return this.status===h.INVALIDATED},o.Segment.prototype.canBeLoaded=function(){return this.isNew()||this.hasFailed()||this.isInvalidated()},o.Segment.prototype.load=function(){this.toolkit._loadSegment(this)},o.Segment.prototype.loadAfterDelay=function(e){if(!this.canBeLoaded())throw new Error("Segment is not in a state that is valid for loading.");null!==this.retryTimer&&window.clearTimeout(this.retryTimer),this.retryTimer=window.setTimeout(function(){this.retryTimer=null,this.load()}.bind(this),e)},o.Segment.prototype.invalidate=function(){if(this.status!==h.INVALIDATED){if(this.status!==h.NEW&&this.cancel(),this.status!==h.NEW)throw new Error("Something else has changed the status.");this.status=h.INVALIDATED}},o.Segment.prototype.cancel=function(){if(this.status===h.INVALIDATED)throw new Error("Segment is invalidated.");this.status!==h.NEW&&(null!==this.retryTimer&&(this.toolkit._log("Clearing retry timer."),window.clearTimeout(this.retryTimer),this.retryTimer=null),this.status===h.REQUESTED&&this._abortRequest(),this.toolkit._log("Segment cancelled: "+this.index),this.status=h.NEW,this.data=null,this.timesFailed=0,this.loaded=0,this.total=0,this._abortRequest=null,this.toolkit.trigger(o.Events.SEGMENT_CANCELED,this))},o.prototype.setUri=function(e){this._log("Updating uri.");var t=this._uri=e;t.indexOf("?")>-1&&(t=t.substr(0,t.indexOf("?"))),this._baseURI=t.substr(0,t.lastIndexOf("/")+1)},o.prototype.isUpdating=function(){return!!this._playlistXHR},o.prototype.updatePlaylist=function(){if(this._playlistXHR)throw new Error("Playlist update already in progress.");var e=!1,t=new XMLHttpRequest;this._playlistXHR=t,t.open("GET",this._uri,!0),t.responseType="text",t.timeout=g,this._log("Downloading playlist.");var n=function(){e||(this._log("Playlist download failed."),e=!0,this._playlistXHR=null,this.trigger(o.Events.PLAYLIST_FAILED,t.status))}.bind(this);t.onload=function(){if(200!==t.status)return this._log("Expected playlist response status code to be 200. Got "+t.status),void n();this._playlistXHR=null;try{this._parsePlaylist(t.responseText)}catch(e){if(e instanceof i)return this._log("Error parsing playlist: "+e.reason),void this.trigger(o.Events.PLAYLIST_PARSE_ERROR,e.reason);throw e}this.getLastSegment().isLast=!0,this._log("Playlist download complete."),this.trigger(o.Events.PLAYLIST_LOADED)}.bind(this),t.onerror=t.ontimeout=n,t.send()},o.prototype._parsePlaylist=function(e){var t,n=m,r=null,s=0,a=0,l=null,u=null,c=!1,d=[];for(f.lastIndex=0;null!==(t=f.exec(e));)switch(t=t.filter(function(e){return"undefined"!=typeof e}),t[1]){case"PLAYLIST-TYPE":if("VOD"!==t[2])throw new i("Playlist type not supported: "+t[2]);break;case"TARGETDURATION":break;case"VERSION":if(parseInt(t[2],10)<3)throw new i("HLS version must be 3 or above.");break;case"EXTM3U":break;case"ENDLIST":c=!0;break;case"KEY":r=t[2];break;case"INF":l=1e3*parseFloat(t[2]);break;case"":if(c)throw new i("Already received ENDLIST tag.");if(null===a)throw new i("Not received segment duration.");u=this._createAbsoluteURL(t[2]),r&&(n=this._buildSegmentEncryptionObject(r,s),n===m&&(r=null));var h=this._segments[s];h&&!h.isInvalidated()?d.push(h):d.push(new o.Segment(this,u,a,l,s,n)),s++,a+=l,u=l=null;break;default:this._logger.log("Playlist line parsed but not handled: "+t[0].trim())}if(!c||!d.length)throw new i("Incomplete playlist.");this._duration=a,this._segments=d},o.prototype._buildSegmentEncryptionObject=function(e,t){function n(){var e=this._retrieveKeyDeferred;if(e)return e.promise();e=this._retrieveKeyDeferred=c();var t=this.keyUri;return _[t]||(_[t]={key:new r(t,a),useCount:0}),_[t].useCount++,_[t].key.retrieveKey().then(function(t){this._retrieveKeyDeferred===e&&e.resolve(t)}.bind(this)).fail(function(){this._retrieveKeyDeferred===e&&(this._retrieveKeyDeferred=null,e.reject())}.bind(this)),e.promise()}var s,a=this._log.bind(this),l=null,u=null,d=null,h=null;for(p.lastIndex=0;null!==(s=p.exec(e));)if(3===s.length){s.shift();var f=s[0].trim(),g=this._removeQuotes(s[1].trim());switch(f){case"METHOD":l=o.ENCRYPTION_METHODS[g]||null;break;case"URI":u=this._createAbsoluteURL(g);break;case"IV":d=g;break;default:this._logger.log("Unknown EXT-X-KEY attribute: "+f)}}if(l===o.ENCRYPTION_METHODS.NONE)return m;if(!l||!u)throw new i("Failed to parse M3U8 encryption header.");return h=d?this._parseEncryptionIvHexString(h):this._calculateEncryptionIvForSegment(t),{method:l,keyUri:u,retrieveKey:n,iv:h,_retrieveKeyDeferred:null}},o.prototype._removeQuotes=function(e){return 0===e.indexOf('"')&&e.lastIndexOf('"')===e.length-1?e.slice(1,-1):e},o.prototype._parseEncryptionIvHexString=function(e){0===e.indexOf("0x")&&(e=e.substr(2));var t=new Uint16Array(8);if(e.length%4!==0)throw new i("Failed to parse M3U8 encryption IV (length is not multiple of 4).");for(var n,r=0;r<e.length;r+=4){if(n=parseInt(e.substr(r,4),16),isNaN(n))throw new i("Failed to parse hex number in IV string.");t[r/4]=n}return t},o.prototype._calculateEncryptionIvForSegment=function(e){for(var t=new Uint8Array(16),n=12;16>n;n++)t[n]=e>>8*(15-n)&255;return t.buffer},o.prototype._createAbsoluteURL=function(e){return"http://"===e.substr(0,7)||"https://"===e.substr(0,8)||"/"===e.substr(0,1)?e:this._baseURI+e},o.prototype._handleLoadSegmentFailure=function(e){if(!e.hasFailed())throw new Error("Segment should have a failure state.");e.timesFailed++,this.trigger(o.Events.SEGMENT_FAILED,e)},o.prototype.getNumberOfSegmentsRequested=function(){var e=0;return this._segments.forEach(function(t){t.status===h.REQUESTED&&e++}),e},o.prototype._doRequest=function(e){if(!e.canBeLoaded())throw new Error("Segment is not in a valid state for loading.");e.status=h.REQUESTED;var t=!1,n=new XMLHttpRequest,i=e.uri,r=!1,s=function(t){r||(r=!0,this._log("Segment loading failure: HTTP response status: "+n.status),0===n.status?e.status=h.TIMEOUT:403===n.status?e.status=h.FORBIDDEN:404===n.status?e.status=h.NOT_FOUND:n.status>=500?e.status=h.SERVER_ERROR:e.status=h.FAILED,this._handleLoadSegmentFailure(e))}.bind(this);n.open("GET",i,!0),n.responseType="arraybuffer",n.onload=function(){if(e.xhr=null,200!==n.status)return this._log("Got status code "+n.status+" when downloading segment "+e.index+". Treating as an error."),void s();e.downloadTime=Date.now()-e.downloadStartTime,this._log("Download of segment "+e.index+" complete.");var i=new Uint8Array(n.response),r=e.encryption;if(r.method!==o.ENCRYPTION_METHODS.NONE){if(r.method!==o.ENCRYPTION_METHODS["AES-128"])return this._log("Cannot decrypt segment. Encryption method not supported: "+r.method),e.status=h.DECRYPTION_ERROR,void this._handleLoadSegmentFailure(e);r.retrieveKey().then(function(n){return this._decryptSegment(n,r.iv,i).then(function(n){t||this._onSegmentDecypted(e,n)}.bind(this))}.bind(this)).fail(function(){t||(this._log("An error occurred when trying to decrypt segment."),e.status=h.DECRYPTION_ERROR,this._handleLoadSegmentFailure(e))}.bind(this))}else this._onSegmentDecypted(e,i)}.bind(this),n.onprogress=function(t){t.loaded&&t.total&&(e.loaded=t.loaded,e.total=t.total,this.trigger(o.Events.SEGMENT_PROGRESS,e))}.bind(this),n.onerror=n.ontimeout=function(t){e.xhr=null,this._log("Download of segment "+e.index+" failed."),s(t)}.bind(this),this._log("Requesting segment "+e.index+"."),e._abortRequest=function(){if(t)throw new Error("Already aborted.");t=!0;var e=this.xhr;e&&(this.toolkit._log("Aborting XHR."),e.onerror=e.ontimeout=e.onprogress=e.onload=null,e.abort(),this.xhr=null);var n=this.encryption;n!==m&&n._retrieveKeyDeferred&&(n._retrieveKeyDeferred.reject(),n._retrieveKeyDeferred=null,_[n.keyUri]&&--_[n.keyUri].useCount<=0&&(_[n.keyUri].key.abort(),delete _[n.keyUri]))},e.xhr=n,e.downloadStartTime=Date.now(),n.send()},o.prototype._decryptSegment=function(e,t,n){var i=c();return this._decryptor.decrypt(e,t,n).then(function(e){i.resolve(e)},i.reject),i.promise()},o.prototype._onSegmentDecypted=function(e,t){e.status=h.COMPLETE,e.data=t,this.trigger(o.Events.SEGMENT_LOADED,e)},o.prototype._loadSegment=function(e){if(!e.canBeLoaded())throw new Error("Segment is not in a state that is valid for loading. Index: "+e.index+" State: "+e.status);null!==e.retryTimer&&(window.clearTimeout(e.retryTimer),e.retryTimer=null),this._doRequest(e)},o.prototype._log=function(e){this._logger.log("[HLS] "+e)},o.prototype.getSegments=function(){return this._segments},o.prototype.getSegment=function(e){return e>=this._segments.length?null:this._segments[e]},o.prototype.getSegmentIndexForTime=function(e){if(e>=this._duration||0>e||0===this._segments.length)return null;for(var t=Math.floor(this._segments.length*(e/this._duration)),n=this._segments[t];!(n.startPosition<=e&&n.startPosition+n.duration>e);)n.startPosition<e?t++:t--,n=this._segments[t];return t},o.prototype.getSegmentForTime=function(e){var t=this.getSegmentIndexForTime(e);return null!==t?this._segments[t]:null},o.prototype.getDuration=function(){return this._duration},o.prototype.getNumSegments=function(){return this._segments.length},o.prototype.getLastSegment=function(){return this._segments.length?this._segments[this._segments.length-1]:null},o.prototype.cancelIncompleteSegments=function(){this._log("Cancelling incomplete segments."),this._segments.filter(function(e){return!e.isComplete()&&!e.isInvalidated()}).forEach(function(e){e.cancel()})},o.prototype.invalidateIncompleteSegments=function(){this._log("Invalidating incomplete segments."),this._segments.filter(function(e){return!e.isComplete()}).forEach(function(e){e.invalidate()})},o.prototype.kill=function(){this._log("Killing."),this.cancelIncompleteSegments();var e=this._playlistXHR;e&&(e.onerror=e.ontimeout=e.onload=null,e.abort(),this._playlistXHR=null),this._decryptor.kill()},r.prototype.retrieveKey=function(){if(this._deferred)return this._deferred.promise();this._deferred=c();var e=this._logger,t=function(){var n=new XMLHttpRequest;this._xhr=n,n.open("GET",this._uri,!0),n.responseType="arraybuffer",n.onload=function(){return this._xhr=null,200!==n.status?void i():(e("Downloaded decryption key."),void this._deferred.resolve(new Uint8Array(n.response)))}.bind(this);var i=function(){if(n.status>=400&&n.status<500)return void this._deferred.reject();this._retrieveKeyNumAttempts++;var i=l.getRetryTime(this._retrieveKeyNumAttempts);e("Error downloading decryption key. Attempt "+this._retrieveKeyNumAttempts+". Retrying in "+i+"ms."),this._retryTimer=window.setTimeout(function(){this._retryTimer=null,t()}.bind(this),i)}.bind(this);n.onerror=n.ontimeout=function(){this._xhr=null,i()}.bind(this),n.send(),e("Downloading decryption key.")}.bind(this);return t(),this._deferred.promise()},r.prototype.abort=function(){this._logger("Aborting encryption key XHR."),this._xhr&&(this._xhr.onerror=this._xhr.ontimeout=this._xhr.onload=null,this._xhr.abort()),window.clearTimeout(this._retryTimer),this._retryTimer=null,this._deferred=null}},function(e,t,n){var i=n(54),r=n(60);e.exports={getDecryptor:function(e,t){if(t=t||{},t.enableWebCrypto&&i.isSupported())return new i(e);if(r.isSupported())return new r(e);throw new Error("Couldn't find a supported decryptor.")}}},function(e,t,n){var i,r=n(55).Deferred,o=n(1),s=n(59),a=window.crypto&&window.crypto.subtle;e.exports=i=function(e){s.prototype.constructor.call(this,e,"WebCrypto")},o(i.prototype,s.prototype),i.isSupported=function(){return!!a&&"https:"===window.location.protocol},i.prototype.decrypt=function(e,t,n){var i=r();return this._expandKey(e).then(function(e){return a.decrypt({name:"AES-CBC",iv:t},e,n)}.bind(this)).then(function(e){return this._log("Succesfully decrypted with web crypto."),new Uint8Array(e)}.bind(this)).then(i.resolve)["catch"](function(e){this._log("An error occurred when trying to decrypt with web crypto."),i.reject(e)}.bind(this)),i.promise()},i.prototype._expandKey=function(e){return a.importKey("raw",e,{name:"AES-CBC"},!1,["decrypt"])}},function(e,t,n){e.exports=n(56)},function(e,t,n){/*!
		* jquery-deferred
		* Copyright(c) 2011 Hidden <zzdhidden@gmail.com>
		* MIT Licensed
		*/
var i=e.exports=n(57),r=Array.prototype.slice;i.extend({Deferred:function(e){var t=[["resolve","done",i.Callbacks("once memory"),"resolved"],["reject","fail",i.Callbacks("once memory"),"rejected"],["notify","progress",i.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return i.Deferred(function(n){i.each(t,function(t,r){var s=r[0],a=e[t];o[r[1]](i.isFunction(a)?function(){var e=a.apply(this,arguments);e&&i.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===o?n:this,[e])}:n[s])}),e=null}).promise()},promise:function(e){return null!=e?i.extend(e,r):r}},o={};return r.pipe=r.then,i.each(t,function(e,i){var s=i[2],a=i[3];r[i[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),o[i[0]]=s.fire,o[i[0]+"With"]=s.fireWith}),r.promise(o),e&&e.call(o,o),o},when:function(e){var t,n,o,s=0,a=r.call(arguments),l=a.length,u=1!==l||e&&i.isFunction(e.promise)?l:0,c=1===u?e:i.Deferred(),d=function(e,n,i){return function(o){n[e]=this,i[e]=arguments.length>1?r.call(arguments):o,i===t?c.notifyWith(n,i):--u||c.resolveWith(n,i)}};if(l>1)for(t=new Array(l),n=new Array(l),o=new Array(l);l>s;s++)a[s]&&i.isFunction(a[s].promise)?a[s].promise().done(d(s,o,a)).fail(c.reject).progress(d(s,n,t)):--u;return u||c.resolveWith(o,a),c.promise()}})},function(e,t,n){function i(e){var t=s[e]={};return r.each(e.split(o),function(e,n){t[n]=!0}),t}var r=e.exports=n(58),o=/\s+/,s={};r.Callbacks=function(e){e="string"==typeof e?s[e]||i(e):r.extend({},e);var t,n,o,a,l,u,c=[],d=!e.once&&[],h=function(i){for(t=e.memory&&i,n=!0,u=a||0,a=0,l=c.length,o=!0;c&&l>u;u++)if(c[u].apply(i[0],i[1])===!1&&e.stopOnFalse){t=!1;break}o=!1,c&&(d?d.length&&h(d.shift()):t?c=[]:p.disable())},p={add:function(){if(c){var n=c.length;!function i(t){r.each(t,function(t,n){var o=r.type(n);"function"===o?e.unique&&p.has(n)||c.push(n):n&&n.length&&"string"!==o&&i(n)})}(arguments),o?l=c.length:t&&(a=n,h(t))}return this},remove:function(){return c&&r.each(arguments,function(e,t){for(var n;(n=r.inArray(t,c,n))>-1;)c.splice(n,1),o&&(l>=n&&l--,u>=n&&u--)}),this},has:function(e){return r.inArray(e,c)>-1},empty:function(){return c=[],this},disable:function(){return c=d=t=void 0,this},disabled:function(){return!c},lock:function(){return d=void 0,t||p.disable(),this},locked:function(){return!d},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!c||n&&!d||(o?d.push(t):h(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!n}};return p}},function(e,t){function n(e){return null==e?String(e):c[u.call(e)]||"object"}function i(e){return"function"===l.type(e)}function r(e){return"array"===l.type(e)}function o(e,t,n){var r,o=0,s=e.length,a=void 0===s||i(e);if(n)if(a){for(r in e)if(t.apply(e[r],n)===!1)break}else for(;s>o&&t.apply(e[o++],n)!==!1;);else if(a){for(r in e)if(t.call(e[r],r,e[r])===!1)break}else for(;s>o&&t.call(e[o],o,e[o++])!==!1;);return e}function s(e){return e&&"object"===l.type(e)?!0:!1}function a(){var e,t,n,i,r,o,s=arguments[0]||{},a=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},a=2),"object"==typeof s||l.isFunction(s)||(s={}),u===a&&(s=this,--a);u>a;a++)if(null!=(e=arguments[a]))for(t in e)n=s[t],i=e[t],s!==i&&(c&&i&&(l.isPlainObject(i)||(r=l.isArray(i)))?(r?(r=!1,o=n&&l.isArray(n)?n:[]):o=n&&l.isPlainObject(n)?n:{},s[t]=l.extend(c,o,i)):void 0!==i&&(s[t]=i));return s}var l=e.exports={type:n,isArray:r,isFunction:i,isPlainObject:s,each:o,extend:a,noop:function(){}},u=Object.prototype.toString,c={};"Boolean Number String Function Array Date RegExp Object".split(" ").forEach(function(e){c["[object "+e+"]"]=e.toLowerCase()})},function(e,t){var n=e.exports=function(e,t){this._logger=e,this._name=t};n.isSupported=function(){return!1},n.prototype.decrypt=function(e,t,n){},n.prototype._log=function(e){this._logger.log("[Decryptor] ["+this._name+"] "+e)},n.prototype.kill=function(){}},function(e,t,n){var i,r=n(55).Deferred,o=n(1),s=n(59),a=n(61);e.exports=i=function(e){s.prototype.constructor.call(this,e,"JS"),this._aesDecryptor=new a},o(i.prototype,s.prototype),i.isSupported=function(){return!0},i.prototype.decrypt=function(e,t,n){var i=r();return this._aesDecryptor.expandKey(e.buffer),i.resolve(new Uint8Array(this._aesDecryptor.decrypt(n.buffer,0,t))),this._log("Succesfully decrypted in JS."),i.promise()},i.prototype.kill=function(){this._aesDecryptor.destroy()}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){n(this,e),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[],this.subMix[0]=new Uint32Array(256),this.subMix[1]=new Uint32Array(256),this.subMix[2]=new Uint32Array(256),this.subMix[3]=new Uint32Array(256),this.invSubMix=[],this.invSubMix[0]=new Uint32Array(256),this.invSubMix[1]=new Uint32Array(256),this.invSubMix[2]=new Uint32Array(256),this.invSubMix[3]=new Uint32Array(256),this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return i(e,[{key:"uint8ArrayToUint32Array_",value:function(e){for(var t=new DataView(e),n=new Uint32Array(4),i=0;i<n.length;i++)n[i]=t.getUint32(4*i);return n}},{key:"initTable",value:function(){var e=this.sBox,t=this.invSBox,n=this.subMix[0],i=this.subMix[1],r=this.subMix[2],o=this.subMix[3],s=this.invSubMix[0],a=this.invSubMix[1],l=this.invSubMix[2],u=this.invSubMix[3],c=new Uint32Array(256),d=0,h=0,p=0;for(p=0;256>p;p++)128>p?c[p]=p<<1:c[p]=p<<1^283;for(p=0;256>p;p++){var f=h^h<<1^h<<2^h<<3^h<<4;f=f>>>8^255&f^99,e[d]=f,t[f]=d;var g=c[d],m=c[g],_=c[m],v=257*c[f]^16843008*f;n[d]=v<<24|v>>>8,i[d]=v<<16|v>>>16,r[d]=v<<8|v>>>24,o[d]=v,v=16843009*_^65537*m^257*g^16843008*d,s[f]=v<<24|v>>>8,a[f]=v<<16|v>>>16,l[f]=v<<8|v>>>24,u[f]=v,d?(d=g^c[c[c[_^g]]],h^=c[c[h]]):d=h=1}}},{key:"expandKey",value:function(e){for(var t=this.uint8ArrayToUint32Array_(e),n=!0,i=0;i<t.length&&n;)n=t[i]===this.key[i],i++;if(!n){this.key=t;var r=this.keySize=t.length;if(4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);var o=this.ksRows=4*(r+6+1),s=void 0,a=void 0,l=this.keySchedule=new Uint32Array(this.ksRows),u=this.invKeySchedule=new Uint32Array(this.ksRows),c=this.sBox,d=this.rcon,h=this.invSubMix[0],p=this.invSubMix[1],f=this.invSubMix[2],g=this.invSubMix[3],m=void 0,_=void 0;for(s=0;o>s;s++)r>s?m=l[s]=t[s]:(_=m,s%r===0?(_=_<<8|_>>>24,_=c[_>>>24]<<24|c[_>>>16&255]<<16|c[_>>>8&255]<<8|c[255&_],_^=d[s/r|0]<<24):r>6&&s%r===4&&(_=c[_>>>24]<<24|c[_>>>16&255]<<16|c[_>>>8&255]<<8|c[255&_]),l[s]=m=(l[s-r]^_)>>>0);for(a=0;o>a;a++)s=o-a,_=3&a?l[s]:l[s-4],4>a||4>=s?u[a]=_:u[a]=h[c[_>>>24]]^p[c[_>>>16&255]]^f[c[_>>>8&255]]^g[c[255&_]],u[a]=u[a]>>>0}}},{key:"networkToHostOrderSwap",value:function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}},{key:"decrypt",value:function(e,t,n){for(var i,r,o=this.keySize+6,s=this.invKeySchedule,a=this.invSBox,l=this.invSubMix[0],u=this.invSubMix[1],c=this.invSubMix[2],d=this.invSubMix[3],h=this.uint8ArrayToUint32Array_(n),p=h[0],f=h[1],g=h[2],m=h[3],_=new Int32Array(e),v=new Int32Array(_.length),y=void 0,b=void 0,w=void 0,x=void 0,k=void 0,S=void 0,E=void 0,T=void 0,A=void 0,P=void 0,C=void 0,D=void 0;t<_.length;){for(A=this.networkToHostOrderSwap(_[t]),P=this.networkToHostOrderSwap(_[t+1]),C=this.networkToHostOrderSwap(_[t+2]),D=this.networkToHostOrderSwap(_[t+3]),k=A^s[0],S=D^s[1],E=C^s[2],T=P^s[3],i=4,r=1;o>r;r++)y=l[k>>>24]^u[S>>16&255]^c[E>>8&255]^d[255&T]^s[i],b=l[S>>>24]^u[E>>16&255]^c[T>>8&255]^d[255&k]^s[i+1],w=l[E>>>24]^u[T>>16&255]^c[k>>8&255]^d[255&S]^s[i+2],x=l[T>>>24]^u[k>>16&255]^c[S>>8&255]^d[255&E]^s[i+3],k=y,S=b,E=w,T=x,i+=4;y=a[k>>>24]<<24^a[S>>16&255]<<16^a[E>>8&255]<<8^a[255&T]^s[i],b=a[S>>>24]<<24^a[E>>16&255]<<16^a[T>>8&255]<<8^a[255&k]^s[i+1],w=a[E>>>24]<<24^a[T>>16&255]<<16^a[k>>8&255]<<8^a[255&S]^s[i+2],x=a[T>>>24]<<24^a[k>>16&255]<<16^a[S>>8&255]<<8^a[255&E]^s[i+3],i+=3,v[t]=this.networkToHostOrderSwap(y^p),v[t+1]=this.networkToHostOrderSwap(x^f),v[t+2]=this.networkToHostOrderSwap(w^g),v[t+3]=this.networkToHostOrderSwap(b^m),p=A,f=P,g=C,m=D,t+=4}return v.buffer}},{key:"destroy",value:function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0}}]),e}();e.exports=r},function(e,t,n){var i,r=n(1),o=n(34),s=n(63);e.exports=i=function(e){this.killed=!1,this.config=e,this.pushedInitData=!1},r(i.prototype,o),i.prototype.process=function(e){if(this.killed)throw new Error("The transmuxer has been killed.");var t=!1,n=!1,r={abort:function(){if(t)throw new Error("Transmuxer cannot be aborted as it already completed.");n||(n=!0)}};switch(this.config){case i.Configs.VOID:t=!0,this.trigger("segment",e);break;case i.Configs.MP3_TO_FMP4:var o=new s.Unit.BasePushSrc,a=new s.Units.MP3Parser,l=new s.Units.MP4Mux(s.Units.MP4Mux.Profiles.MP3_AUDIO_ONLY),u=new s.Unit.BaseSink;o.enqueue(new s.Unit.Transfer(e.data,"binary")),o.enqueue(s.Unit.Transfer.Flush());var c=!1;u._onData=function(){if(!this.killed&&!n){var i=u.dequeue().data;c?(e.mimeType="audio/mp4",e.data=i,t=!0,this.trigger("segment",e)):(c=!0,this.pushedInitData||(this.pushedInitData=!0,this.trigger("initData",i)))}}.bind(this),s.Unit.link(o,a,l,u);break;default:throw new Error("Config "+this.config+" not supported")}return r},i.prototype.kill=function(){this.segents=[],this.killed=!0},i.Configs={VOID:"VOID",MP3_TO_FMP4:"MP3_TO_FMP4"}},function(e,t,n){var i,r=n(64),o=n(105),s=n(108),a=n(111),l=n(114),u=n(115);e.exports=i={Unit:r,Units:{File:u,MP4Mux:o,MP3Parser:s,MSESink:a,XHR:l}}},function(e,t,n){(function(t){var i,r,o,s,a,l,u,c,d,h,p=n(69),f=n(71),g=n(1),m=n(80),_=n(81);e.exports=i=function(){m.call(this),this.inputs||(this.inputs=[]),this.outputs||(this.outputs=[])},i.create=function(e){return f(i.prototype,e)},i.createBaseSrc=function(e){return f(l.prototype,e)},i.createBasePushSrc=function(e){return f(u.prototype,e)},i.createBaseSink=function(e){return f(c.prototype,e)},i.createBaseTransform=function(e){return f(a.prototype,e)},i.createBaseParser=function(e){return f(d.prototype,e)},i.link=function(e,t){if(arguments.length>2)return i.linkArray(arguments);for(var n=0;n<Math.min(e.numberOfOuts(),t.numberOfIns());n++)e.out(n).pipe(t["in"](n));return t},i.linkArray=function(e){var t,n,r;for(r=0;r<e.length;r++)t=e[r],e.length>r+1&&(n=e[r+1],i.link(t,n));return n};var v=i.Event={CHAIN:"chain",NEED_DATA:"need-data",FINISH:"finish",PIPE:"pipe",UNPIPE:"unpipe",ERROR:"error",END:"end",OPEN:"open",CLOSE:"close"};i.prototype=f(m.prototype,{constructor:i,"in":function(e){return this.inputs[e]},out:function(e){return this.outputs[e]},numberOfIns:function(){return this.inputs.length},numberOfOuts:function(){return this.outputs.length},add:function(e){return e instanceof r?this.addInput(e):e instanceof o&&this.addOutput(e),this},remove:function(e){e instanceof r?this.removeInput(e):e instanceof o&&this.removeOutput(e)},addInput:function(e){this._installEventForwarder(e,v.FINISH),this._installEventForwarder(e,v.OPEN),this._installEventForwarder(e,v.PIPE),this._installEventForwarder(e,v.UNPIPE),this._installEventForwarder(e,v.ERROR),this._installEventForwarder(e,v.CHAIN),this.inputs.push(e)},addOutput:function(e){this._installEventForwarder(e,v.END),this._installEventForwarder(e,v.OPEN),this._installEventForwarder(e,v.CLOSE),this._installEventForwarder(e,v.ERROR),this._installEventForwarder(e,v.NEED_DATA),this.outputs.push(e)},removeInput:function(e){removePut(this.inputs,e)},removeOutput:function(e){removePut(this.outputs,e)},removePut:function(e,t){e.slice().forEach(function(n,i){n==t&&e.splice(i,1)})},_installEventForwarder:function(e,t){e.on(t,function(n){this.emit(t,e,n)}.bind(this))}}),i.Transfer=s=function(e,n,i){n||(n=e instanceof t?"buffer":e instanceof String?"utf8":"object"),this.resolved=!1,this.data=e,this.encoding=n,this.doneCallback=i},s.prototype=f(Object.prototype,{constructor:s,resolve:function(){this.doneCallback&&!this.resolved&&(this.doneCallback(),this.resolved=!0)},setFlushing:function(e){return this.data.flush=e,this},setEmpty:function(e){return this.data.empty=e,this}}),s.Flush=function(){return new s({},"binary").setFlushing(!0).setEmpty(!0)},s.EOS=function(){return new s(null,"binary")},i.Input=r=function(e,t){_.Writable.prototype.constructor.call(this,{objectMode:!0,decodeStrings:!1})},r.prototype=f(_.Writable.prototype,{constructor:r,_write:function(e,t,n){p("_write: "+t),this.emit(i.Event.CHAIN,new s(e,t,n))}}),i.Output=o=function(e){_.Readable.prototype.constructor.call(this,{objectMode:!0}),this._dataRequested=0,this._shouldPushMore=!0},o.eos=function(e){e.push(null,"null")},o.prototype=f(_.Readable.prototype,{constructor:o,_read:function(e){this._dataRequested++,this.emit(v.NEED_DATA,this)},push:function(e,t){return this._dataRequested--,this._shouldPushMore=_.Readable.prototype.push.call(this,e,t),this._shouldPushMore},isPulling:function(){return this._dataRequested>0},eos:function(){_.Readable.prototype.push.call(this,null,"null")}}),i.BaseTransform=a=function(){i.prototype.constructor.apply(this,arguments),this.add(new r).add(new o),this.on(v.CHAIN,this._onChain.bind(this)),this.on(v.FINISH,this._onFinish.bind(this))},a.prototype=f(i.prototype,{constructor:a,_onChain:function(e,t){this._transform(t),this.out(0).push(t.data,t.encoding),t.resolve()},_onFinish:function(e){o.eos(this.out(0))},_transform:function(e){}}),i.BaseSrc=l=function(){i.prototype.constructor.apply(this,arguments),this.add(new o),this.on(v.NEED_DATA,this.squeeze.bind(this))},l.prototype=f(i.prototype,{constructor:l,squeeze:function(){p("squeeze");var e=this._source();e&&(this.out(0).push(e.data,e.encoding),e.resolve())},_source:function(){}}),i.BasePushSrc=u=function(){l.prototype.constructor.apply(this,arguments),this._bufferOut=[]},u.prototype=f(l.prototype,{constructor:u,_source:function(){return this._bufferOut.length?this._bufferOut.shift():null},enqueue:function(e){this._bufferOut.push(e),this.out(0).isPulling&&this.out(0).isPulling()&&this.squeeze()}}),i.BaseSink=c=function(){i.prototype.constructor.apply(this,arguments),this.add(new r),this.on(v.CHAIN,this._onChain.bind(this)),this._bufferIn=[]},c.prototype=f(i.prototype,{constructor:c,_onChain:function(e,t){p("BaseSink._onChain: "+t.encoding),this._bufferIn.push(t),this._onData(),t.resolve()},_onData:function(){},dequeue:function(){return this._bufferIn.length?this._bufferIn.shift():null}}),i.BaseParser=d=function(){u.prototype.constructor.apply(this,arguments),c.prototype.constructor.apply(this,arguments),this.on("finish",this._onFinish.bind(this))},g(d.prototype,i.prototype,m.prototype,l.prototype,u.prototype,c.prototype,{constructor:d,_onData:function(){this._parse(this.dequeue())},_onFinish:function(){p("BaseParser._onFinish"),o.eos(this.out(0))},_parse:function(e){}}),i.InputSelector=h=function(e){for(a.prototype.constructor.apply(this,arguments),e=(e||1)-1;e-->0;)this.add(new r);this.selectedInputIndex=0},g(h.prototype,a.prototype,{constructor:h,_onChain:function(e,t){var n=this["in"](this.selectedInputIndex);return e!==n?void t.resolve():(this._transform(t),this.out(0).push(t.data,t.encoding),void t.resolve())},_onFinish:function(e){var t=this["in"](this.selectedInputIndex);e===t&&o.eos(this.out(0))}})}).call(t,n(65).Buffer)},function(e,t,n){(function(e){/*!
		 * The buffer module from node.js, for the browser.
		 *
		 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
		 * @license  MIT
		 */
"use strict";function i(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function r(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=s.prototype):(null===e&&(e=new s(t)),e.length=t),e}function s(e,t,n){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return a(this,e,t,n)}function a(e,t,n,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?p(e,t,n,i):"string"==typeof t?d(e,t,n):f(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(0>e)throw new RangeError('"size" argument must not be negative')}function u(e,t,n,i){return l(t),0>=t?o(e,t):void 0!==n?"string"==typeof i?o(e,t).fill(n,i):o(e,t).fill(n):o(e,t)}function c(e,t){if(l(t),e=o(e,0>t?0:0|g(t)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;t>n;++n)e[n]=0;return e}function d(e,t,n){if(("string"!=typeof n||""===n)&&(n="utf8"),!s.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|_(t,n);e=o(e,i);var r=e.write(t,n);return r!==i&&(e=e.slice(0,r)),e}function h(e,t){var n=t.length<0?0:0|g(t.length);e=o(e,n);for(var i=0;n>i;i+=1)e[i]=255&t[i];return e}function p(e,t,n,i){if(t.byteLength,0>n||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,n):new Uint8Array(t,n,i),s.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=s.prototype):e=h(e,t),e}function f(e,t){if(s.isBuffer(t)){var n=0|g(t.length);return e=o(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||X(t.length)?o(e,0):h(e,t);if("Buffer"===t.type&&Z(t.data))return h(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function g(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function m(e){return+e!=e&&(e=0),s.alloc(+e)}function _(e,t){if(s.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return W(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(e).length;default:if(i)return W(e).length;t=(""+t).toLowerCase(),i=!0}}function v(e,t,n){var i=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),0>=n)return"";if(n>>>=0,t>>>=0,t>=n)return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return M(this,t,n);case"latin1":case"binary":return R(this,t,n);case"base64":return P(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function y(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function b(e,t,n,i,r){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:-2147483648>n&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:e.length-1),0>n&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(0>n){if(!r)return-1;n=0}if("string"==typeof t&&(t=s.from(t,i)),s.isBuffer(t))return 0===t.length?-1:w(e,t,n,i,r);if("number"==typeof t)return t=255&t,s.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):w(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function w(e,t,n,i,r){function o(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var s=1,a=e.length,l=t.length;if(void 0!==i&&(i=String(i).toLowerCase(),"ucs2"===i||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;s=2,a/=2,l/=2,n/=2}var u;if(r){var c=-1;for(u=n;a>u;u++)if(o(e,u)===o(t,-1===c?0:u-c)){if(-1===c&&(c=u),u-c+1===l)return c*s}else-1!==c&&(u-=u-c),c=-1}else for(n+l>a&&(n=a-l),u=n;u>=0;u--){for(var d=!0,h=0;l>h;h++)if(o(e,u+h)!==o(t,h)){d=!1;break}if(d)return u}return-1}function x(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?(i=Number(i),i>r&&(i=r)):i=r;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;i>s;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function k(e,t,n,i){return K(W(t,e.length-n),e,n,i)}function S(e,t,n,i){return K(V(t),e,n,i)}function E(e,t,n,i){return S(e,t,n,i)}function T(e,t,n,i){return K(G(t),e,n,i)}function A(e,t,n,i){return K(Y(t,e.length-n),e,n,i)}function P(e,t,n){return 0===t&&n===e.length?J.fromByteArray(e):J.fromByteArray(e.slice(t,n))}function C(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;n>r;){var o=e[r],s=null,a=o>239?4:o>223?3:o>191?2:1;if(n>=r+a){var l,u,c,d;switch(a){case 1:128>o&&(s=o);break;case 2:l=e[r+1],128===(192&l)&&(d=(31&o)<<6|63&l,d>127&&(s=d));break;case 3:l=e[r+1],u=e[r+2],128===(192&l)&&128===(192&u)&&(d=(15&o)<<12|(63&l)<<6|63&u,d>2047&&(55296>d||d>57343)&&(s=d));break;case 4:l=e[r+1],u=e[r+2],c=e[r+3],128===(192&l)&&128===(192&u)&&128===(192&c)&&(d=(15&o)<<18|(63&l)<<12|(63&u)<<6|63&c,d>65535&&1114112>d&&(s=d))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|1023&s),i.push(s),r+=a}return D(i)}function D(e){var t=e.length;if(ee>=t)return String.fromCharCode.apply(String,e);for(var n="",i=0;t>i;)n+=String.fromCharCode.apply(String,e.slice(i,i+=ee));return n}function M(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;n>r;++r)i+=String.fromCharCode(127&e[r]);return i}function R(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;n>r;++r)i+=String.fromCharCode(e[r]);return i}function I(e,t,n){var i=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>i)&&(n=i);for(var r="",o=t;n>o;++o)r+=q(e[o]);return r}function O(e,t,n){for(var i=e.slice(t,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function L(e,t,n){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function N(e,t,n,i,r,o){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||o>t)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function F(e,t,n,i){0>t&&(t=65535+t+1);for(var r=0,o=Math.min(e.length-n,2);o>r;++r)e[n+r]=(t&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function B(e,t,n,i){0>t&&(t=4294967295+t+1);for(var r=0,o=Math.min(e.length-n,4);o>r;++r)e[n+r]=t>>>8*(i?r:3-r)&255}function U(e,t,n,i,r,o){if(n+i>e.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("Index out of range")}function j(e,t,n,i,r){return r||U(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(e,t,n,i,23,4),n+4}function H(e,t,n,i,r){return r||U(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(e,t,n,i,52,8),n+8}function $(e){if(e=z(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function z(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function q(e){return 16>e?"0"+e.toString(16):e.toString(16)}function W(e,t){t=t||1/0;for(var n,i=e.length,r=null,o=[],s=0;i>s;++s){if(n=e.charCodeAt(s),n>55295&&57344>n){if(!r){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(t-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(56320>n){(t-=3)>-1&&o.push(239,191,189),r=n;continue}n=(r-55296<<10|n-56320)+65536}else r&&(t-=3)>-1&&o.push(239,191,189);if(r=null,128>n){if((t-=1)<0)break;o.push(n)}else if(2048>n){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(65536>n){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function V(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function Y(e,t){for(var n,i,r,o=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),i=n>>8,r=n%256,o.push(r),o.push(i);return o}function G(e){return J.toByteArray($(e))}function K(e,t,n,i){for(var r=0;i>r&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function X(e){return e!==e}var J=n(66),Q=n(67),Z=n(68);t.Buffer=s,t.SlowBuffer=m,t.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:i(),t.kMaxLength=r(),s.poolSize=8192,s._augment=function(e){return e.__proto__=s.prototype,e},s.from=function(e,t,n){return a(null,e,t,n)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(e,t,n){return u(null,e,t,n)},s.allocUnsafe=function(e){return c(null,e)},s.allocUnsafeSlow=function(e){return c(null,e)},s.isBuffer=function(e){return!(null==e||!e._isBuffer)},s.compare=function(e,t){if(!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,r=0,o=Math.min(n,i);o>r;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return i>n?-1:n>i?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!Z(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=s.allocUnsafe(t),r=0;for(n=0;n<e.length;++n){var o=e[n];if(!s.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,r),r+=o.length}return i},s.byteLength=_,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;e>t;t+=2)y(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;e>t;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;e>t;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},s.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):v.apply(this,arguments)},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:0===s.compare(this,e)},s.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},s.prototype.compare=function(e,t,n,i,r){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),0>t||n>e.length||0>i||r>this.length)throw new RangeError("out of range index");if(i>=r&&t>=n)return 0;if(i>=r)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,r>>>=0,this===e)return 0;for(var o=r-i,a=n-t,l=Math.min(o,a),u=this.slice(i,r),c=e.slice(t,n),d=0;l>d;++d)if(u[d]!==c[d]){o=u[d],a=c[d];break}return a>o?-1:o>a?1:0},s.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},s.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},s.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t=0|t,isFinite(n)?(n=0|n,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(0>n||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return x(this,e,t,n);case"utf8":case"utf-8":return k(this,e,t,n);case"ascii":return S(this,e,t,n);case"latin1":case"binary":return E(this,e,t,n);case"base64":return T(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;s.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),e>t&&(t=e);var i;if(s.TYPED_ARRAY_SUPPORT)i=this.subarray(e,t),i.__proto__=s.prototype;else{var r=t-e;i=new s(r,void 0);for(var o=0;r>o;++o)i[o]=this[o+e]}return i},s.prototype.readUIntLE=function(e,t,n){e=0|e,t=0|t,n||L(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return i},s.prototype.readUIntBE=function(e,t,n){e=0|e,t=0|t,n||L(e,t,this.length);for(var i=this[e+--t],r=1;t>0&&(r*=256);)i+=this[e+--t]*r;return i},s.prototype.readUInt8=function(e,t){return t||L(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return t||L(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return t||L(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e=0|e,t=0|t,n||L(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*t)),i},s.prototype.readIntBE=function(e,t,n){e=0|e,t=0|t,n||L(e,t,this.length);for(var i=t,r=1,o=this[e+--i];i>0&&(r*=256);)o+=this[e+--i]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*t)),o},s.prototype.readInt8=function(e,t){return t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){t||L(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){t||L(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return t||L(e,4,this.length),Q.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return t||L(e,4,this.length),Q.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return t||L(e,8,this.length),Q.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return t||L(e,8,this.length),Q.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=0|t,n=0|n,!i){var r=Math.pow(2,8*n)-1;N(this,e,t,n,r,0)}var o=1,s=0;for(this[t]=255&e;++s<n&&(o*=256);)this[t+s]=e/o&255;return t+n},s.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=0|t,n=0|n,!i){var r=Math.pow(2,8*n)-1;N(this,e,t,n,r,0)}var o=n-1,s=1;for(this[t+o]=255&e;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+n},s.prototype.writeUInt8=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,1,255,0),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):F(this,e,t,!0),t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):F(this,e,t,!1),t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):B(this,e,t,!0),t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):B(this,e,t,!1),t+4},s.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=0|t,!i){var r=Math.pow(2,8*n-1);N(this,e,t,n,r-1,-r)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)0>e&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},s.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=0|t,!i){var r=Math.pow(2,8*n-1);N(this,e,t,n,r-1,-r)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)0>e&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,1,127,-128),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):F(this,e,t,!0),t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):F(this,e,t,!1),t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):B(this,e,t,!0),t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):B(this,e,t,!1),t+4},s.prototype.writeFloatLE=function(e,t,n){return j(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return j(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return H(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return H(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&n>i&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>i)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var r,o=i-n;if(this===e&&t>n&&i>t)for(r=o-1;r>=0;--r)e[r+t]=this[r+n];else if(1e3>o||!s.TYPED_ARRAY_SUPPORT)for(r=0;o>r;++r)e[r+t]=this[r+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},s.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length){var r=e.charCodeAt(0);256>r&&(e=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!s.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e=255&e);if(0>t||this.length<t||this.length<n)throw new RangeError("Out of range index");if(t>=n)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var o;if("number"==typeof e)for(o=t;n>o;++o)this[o]=e;else{var a=s.isBuffer(e)?e:W(new s(e,i).toString()),l=a.length;for(o=0;n-t>o;++o)this[o+t]=a[o%l]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(t,function(){return this}())},function(e,t){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function i(e){return 3*e.length/4-n(e)}function r(e){var t,i,r,o,s,a,l=e.length;s=n(e),a=new c(3*l/4-s),r=s>0?l-4:l;var d=0;for(t=0,i=0;r>t;t+=4,i+=3)o=u[e.charCodeAt(t)]<<18|u[e.charCodeAt(t+1)]<<12|u[e.charCodeAt(t+2)]<<6|u[e.charCodeAt(t+3)],a[d++]=o>>16&255,a[d++]=o>>8&255,a[d++]=255&o;return 2===s?(o=u[e.charCodeAt(t)]<<2|u[e.charCodeAt(t+1)]>>4,a[d++]=255&o):1===s&&(o=u[e.charCodeAt(t)]<<10|u[e.charCodeAt(t+1)]<<4|u[e.charCodeAt(t+2)]>>2,a[d++]=o>>8&255,a[d++]=255&o),a}function o(e){return l[e>>18&63]+l[e>>12&63]+l[e>>6&63]+l[63&e]}function s(e,t,n){for(var i,r=[],s=t;n>s;s+=3)i=(e[s]<<16)+(e[s+1]<<8)+e[s+2],r.push(o(i));return r.join("")}function a(e){for(var t,n=e.length,i=n%3,r="",o=[],a=16383,u=0,c=n-i;c>u;u+=a)o.push(s(e,u,u+a>c?c:u+a));return 1===i?(t=e[n-1],r+=l[t>>2],r+=l[t<<4&63],r+="=="):2===i&&(t=(e[n-2]<<8)+e[n-1],r+=l[t>>10],r+=l[t>>4&63],r+=l[t<<2&63],r+="="),o.push(r),o.join("")}t.byteLength=i,t.toByteArray=r,t.fromByteArray=a;for(var l=[],u=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,p=d.length;p>h;++h)l[h]=d[h],u[d.charCodeAt(h)]=h;u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,i,r){var o,s,a=8*r-i-1,l=(1<<a)-1,u=l>>1,c=-7,d=n?r-1:0,h=n?-1:1,p=e[t+d];for(d+=h,o=p&(1<<-c)-1,p>>=-c,c+=a;c>0;o=256*o+e[t+d],d+=h,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=i;c>0;s=256*s+e[t+d],d+=h,c-=8);if(0===o)o=1-u;else{if(o===l)return s?NaN:(p?-1:1)*(1/0);s+=Math.pow(2,i),o-=u}return(p?-1:1)*s*Math.pow(2,o-i)},t.write=function(e,t,n,i,r,o){var s,a,l,u=8*o-r-1,c=(1<<u)-1,d=c>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,f=i?1:-1,g=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),t+=s+d>=1?h/l:h*Math.pow(2,1-d),t*l>=2&&(s++,l/=2),s+d>=c?(a=0,s=c):s+d>=1?(a=(t*l-1)*Math.pow(2,r),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,r),s=0));r>=8;e[n+p]=255&a,p+=f,a/=256,r-=8);for(s=s<<r|a,u+=r;u>0;e[n+p]=255&s,p+=f,s/=256,u-=8);e[n+p-f]|=128*g}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){var i=n(70);e.exports=function(){i.loggingEnabled()&&console.log.apply(console,arguments)}},function(e,t){var n=!1;e.exports={loggingEnabled:function(e){return void 0!==e&&(n=e),n}}},function(e,t,n){function i(e,t,n){var i=o(e);return n&&s(e,t,n)&&(t=void 0),t?r(i,t):i}var r=n(72),o=n(78),s=n(79);e.exports=i},[121,73,74],3,[122,75,76,77],5,6,7,function(e,t){function n(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var i=function(){function e(){}return function(t){if(n(t)){e.prototype=t;var i=new e;e.prototype=void 0}return i||{}}}();e.exports=i},10,function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function r(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!r(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,r,a,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(n=this._events[e],s(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(o(n))for(a=Array.prototype.slice.call(arguments,1),u=n.slice(),r=u.length,l=0;r>l;l++)u[l].apply(this,a);return!0},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(r=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,r,s,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(a=s;a-->0;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){function i(){r.call(this)}e.exports=i;var r=n(80).EventEmitter,o=n(82);o(i,r),i.Readable=n(83),i.Writable=n(101),i.Duplex=n(102),i.Transform=n(103),i.PassThrough=n(104),i.Stream=i,i.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&u.pause&&u.pause()}function i(){u.readable&&u.resume&&u.resume()}function o(){c||(c=!0,e.end())}function s(){c||(c=!0,"function"==typeof e.destroy&&e.destroy())}function a(e){if(l(),0===r.listenerCount(this,"error"))throw e}function l(){u.removeListener("data",n),e.removeListener("drain",i),u.removeListener("end",o),u.removeListener("close",s),u.removeListener("error",a),e.removeListener("error",a),u.removeListener("end",l),u.removeListener("close",l),e.removeListener("close",l)}var u=this;u.on("data",n),e.on("drain",i),e._isStdio||t&&t.end===!1||(u.on("end",o),u.on("close",s));var c=!1;return u.on("error",a),e.on("error",a),u.on("end",l),u.on("close",l),e.on("close",l),e.emit("pipe",u),e}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){(function(i){var r=function(){try{return n(81)}catch(e){}}();t=e.exports=n(85),t.Stream=r||t,t.Readable=t,t.Writable=n(94),t.Duplex=n(93),t.Transform=n(99),t.PassThrough=n(100),!i.browser&&"disable"===i.env.READABLE_STREAM&&r&&(e.exports=r)}).call(t,n(84))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function o(e){if(d===clearTimeout)return clearTimeout(e);if((d===i||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function s(){g&&p&&(g=!1,p.length?f=p.concat(f):m=-1,f.length&&a())}function a(){if(!g){var e=r(s);g=!0;for(var t=f.length;t;){for(p=f,f=[];++m<t;)p&&p[m].run();m=-1,t=f.length}p=null,g=!1,o(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var c,d,h=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{d="function"==typeof clearTimeout?clearTimeout:i}catch(e){d=i}}();var p,f=[],g=!1,m=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new l(e,t)),1!==f.length||g||r(a)},l.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=u,h.addListener=u,h.once=u,h.off=u,h.removeListener=u,h.removeAllListeners=u,h.emit=u,h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t,n){(function(t){"use strict";function i(e,t,n){return"function"==typeof e.prependListener?e.prependListener(t,n):void(e._events&&e._events[t]?M(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n))}function r(e,t){C=C||n(93),e=e||{},this.objectMode=!!e.objectMode,t instanceof C&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r,this.highWaterMark=~~this.highWaterMark,this.buffer=new j,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(U||(U=n(98).StringDecoder),this.decoder=new U(e.encoding),this.encoding=e.encoding)}function o(e){return C=C||n(93),this instanceof o?(this._readableState=new r(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),void R.call(this)):new o(e)}function s(e,t,n,i,r){var o=c(t,n);if(o)e.emit("error",o);else if(null===n)t.reading=!1,d(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!r){var s=new Error("stream.push() after EOF");e.emit("error",s)}else if(t.endEmitted&&r){var l=new Error("stream.unshift() after end event");e.emit("error",l)}else{var u;!t.decoder||r||i||(n=t.decoder.write(n),u=!t.objectMode&&0===n.length),r||(t.reading=!1),u||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&h(e))),f(e,t)}else r||(t.reading=!1);return a(t)}function a(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function l(e){return e>=H?e=H:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function u(e,t){return 0>=e||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=l(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function c(e,t){var n=null;return O.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function d(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),
t.length+=t.objectMode?1:n.length)}t.ended=!0,h(e)}}function h(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(B("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?D(p,e):p(e))}function p(e){B("emit readable"),e.emit("readable"),b(e)}function f(e,t){t.readingMore||(t.readingMore=!0,D(g,e,t))}function g(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(B("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function m(e){return function(){var t=e._readableState;B("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&I(e,"data")&&(t.flowing=!0,b(e))}}function _(e){B("readable nexttick read 0"),e.read(0)}function v(e,t){t.resumeScheduled||(t.resumeScheduled=!0,D(y,e,t))}function y(e,t){t.reading||(B("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),b(e),t.flowing&&!t.reading&&e.read(0)}function b(e){var t=e._readableState;for(B("flow",t.flowing);t.flowing&&null!==e.read(););}function w(e,t){if(0===t.length)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=x(e,t.buffer,t.decoder),n}function x(e,t,n){var i;return e<t.head.data.length?(i=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):i=e===t.head.data.length?t.shift():n?k(e,t):S(e,t),i}function k(e,t){var n=t.head,i=1,r=n.data;for(e-=r.length;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(r+=s===o.length?o:o.slice(0,e),e-=s,0===e){s===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(s));break}++i}return t.length-=i,r}function S(e,t){var n=L.allocUnsafe(e),i=t.head,r=1;for(i.data.copy(n),e-=i.data.length;i=i.next;){var o=i.data,s=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,s),e-=s,0===e){s===o.length?(++r,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i,i.data=o.slice(s));break}++r}return t.length-=r,n}function E(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,D(T,t,e))}function T(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function A(e,t){for(var n=0,i=e.length;i>n;n++)t(e[n],n)}function P(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1}e.exports=o;var C,D=n(86),M=n(87);o.ReadableState=r;var R,I=(n(80).EventEmitter,function(e,t){return e.listeners(t).length});!function(){try{R=n(81)}catch(e){}finally{R||(R=n(80).EventEmitter)}}();var O=n(65).Buffer,L=n(88),N=n(89);N.inherits=n(90);var F=n(91),B=void 0;B=F&&F.debuglog?F.debuglog("stream"):function(){};var U,j=n(92);N.inherits(o,R),o.prototype.push=function(e,t){var n=this._readableState;return n.objectMode||"string"!=typeof e||(t=t||n.defaultEncoding,t!==n.encoding&&(e=L.from(e,t),t="")),s(this,n,e,t,!1)},o.prototype.unshift=function(e){var t=this._readableState;return s(this,t,e,"",!0)},o.prototype.isPaused=function(){return this._readableState.flowing===!1},o.prototype.setEncoding=function(e){return U||(U=n(98).StringDecoder),this._readableState.decoder=new U(e),this._readableState.encoding=e,this};var H=8388608;o.prototype.read=function(e){B("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return B("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?E(this):h(this),null;if(e=u(e,t),0===e&&t.ended)return 0===t.length&&E(this),null;var i=t.needReadable;B("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&(i=!0,B("length less than watermark",i)),t.ended||t.reading?(i=!1,B("reading or ended",i)):i&&(B("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=u(n,t)));var r;return r=e>0?w(e,t):null,null===r?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&E(this)),null!==r&&this.emit("data",r),r},o.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},o.prototype.pipe=function(e,n){function r(e){B("onunpipe"),e===h&&s()}function o(){B("onend"),e.end()}function s(){B("cleanup"),e.removeListener("close",u),e.removeListener("finish",c),e.removeListener("drain",_),e.removeListener("error",l),e.removeListener("unpipe",r),h.removeListener("end",o),h.removeListener("end",s),h.removeListener("data",a),v=!0,!p.awaitDrain||e._writableState&&!e._writableState.needDrain||_()}function a(t){B("ondata"),y=!1;var n=e.write(t);!1!==n||y||((1===p.pipesCount&&p.pipes===e||p.pipesCount>1&&-1!==P(p.pipes,e))&&!v&&(B("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++,y=!0),h.pause())}function l(t){B("onerror",t),d(),e.removeListener("error",l),0===I(e,"error")&&e.emit("error",t)}function u(){e.removeListener("finish",c),d()}function c(){B("onfinish"),e.removeListener("close",u),d()}function d(){B("unpipe"),h.unpipe(e)}var h=this,p=this._readableState;switch(p.pipesCount){case 0:p.pipes=e;break;case 1:p.pipes=[p.pipes,e];break;default:p.pipes.push(e)}p.pipesCount+=1,B("pipe count=%d opts=%j",p.pipesCount,n);var f=(!n||n.end!==!1)&&e!==t.stdout&&e!==t.stderr,g=f?o:s;p.endEmitted?D(g):h.once("end",g),e.on("unpipe",r);var _=m(h);e.on("drain",_);var v=!1,y=!1;return h.on("data",a),i(e,"error",l),e.once("close",u),e.once("finish",c),e.emit("pipe",h),p.flowing||(B("pipe resume"),h.resume()),e},o.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var r=0;i>r;r++)n[r].emit("unpipe",this);return this}var o=P(t.pipes,e);return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},o.prototype.on=function(e,t){var n=R.prototype.on.call(this,e,t);if("data"===e)this._readableState.flowing!==!1&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&h(this,i):D(_,this))}return n},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){var e=this._readableState;return e.flowing||(B("resume"),e.flowing=!0,v(this,e)),this},o.prototype.pause=function(){return B("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(B("pause"),this._readableState.flowing=!1,this.emit("pause")),this},o.prototype.wrap=function(e){var t=this._readableState,n=!1,i=this;e.on("end",function(){if(B("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&i.push(e)}i.push(null)}),e.on("data",function(r){if(B("wrapped data"),t.decoder&&(r=t.decoder.write(r)),(!t.objectMode||null!==r&&void 0!==r)&&(t.objectMode||r&&r.length)){var o=i.push(r);o||(n=!0,e.pause())}});for(var r in e)void 0===this[r]&&"function"==typeof e[r]&&(this[r]=function(t){return function(){return e[t].apply(e,arguments)}}(r));var o=["error","close","destroy","pause","resume"];return A(o,function(t){e.on(t,i.emit.bind(i,t))}),i._read=function(t){B("wrapped _read",t),n&&(n=!1,e.resume())},i},o._fromList=w}).call(t,n(84))},function(e,t,n){(function(t){"use strict";function n(e,n,i,r){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,n)});case 3:return t.nextTick(function(){e.call(null,n,i)});case 4:return t.nextTick(function(){e.call(null,n,i,r)});default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return t.nextTick(function(){e.apply(null,o)})}}!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports=n:e.exports=t.nextTick}).call(t,n(84))},68,function(e,t,n){(function(e){"use strict";var i=n(65),r=i.Buffer,o=i.SlowBuffer,s=i.kMaxLength||2147483647;t.alloc=function(e,t,n){if("function"==typeof r.alloc)return r.alloc(e,t,n);if("number"==typeof n)throw new TypeError("encoding must not be number");if("number"!=typeof e)throw new TypeError("size must be a number");if(e>s)throw new RangeError("size is too large");var i=n,o=t;void 0===o&&(i=void 0,o=0);var a=new r(e);if("string"==typeof o)for(var l=new r(o,i),u=l.length,c=-1;++c<e;)a[c]=l[c%u];else a.fill(o);return a},t.allocUnsafe=function(e){if("function"==typeof r.allocUnsafe)return r.allocUnsafe(e);if("number"!=typeof e)throw new TypeError("size must be a number");if(e>s)throw new RangeError("size is too large");return new r(e)},t.from=function(t,n,i){if("function"==typeof r.from&&(!e.Uint8Array||Uint8Array.from!==r.from))return r.from(t,n,i);if("number"==typeof t)throw new TypeError('"value" argument must not be a number');if("string"==typeof t)return new r(t,n);if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer){var o=n;if(1===arguments.length)return new r(t);"undefined"==typeof o&&(o=0);var s=i;if("undefined"==typeof s&&(s=t.byteLength-o),o>=t.byteLength)throw new RangeError("'offset' is out of bounds");if(s>t.byteLength-o)throw new RangeError("'length' is out of bounds");return new r(t.slice(o,o+s))}if(r.isBuffer(t)){var a=new r(t.length);return t.copy(a,0,0,t.length),a}if(t){if(Array.isArray(t)||"undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return new r(t);if("Buffer"===t.type&&Array.isArray(t.data))return new r(t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},t.allocUnsafeSlow=function(e){if("function"==typeof r.allocUnsafeSlow)return r.allocUnsafeSlow(e);if("number"!=typeof e)throw new TypeError("size must be a number");if(e>=s)throw new RangeError("size is too large");return new o(e)}}).call(t,function(){return this}())},function(e,t,n){(function(e){function n(e){return Array.isArray?Array.isArray(e):"[object Array]"===m(e)}function i(e){return"boolean"==typeof e}function r(e){return null===e}function o(e){return null==e}function s(e){return"number"==typeof e}function a(e){return"string"==typeof e}function l(e){return"symbol"==typeof e}function u(e){return void 0===e}function c(e){return"[object RegExp]"===m(e)}function d(e){return"object"==typeof e&&null!==e}function h(e){return"[object Date]"===m(e)}function p(e){return"[object Error]"===m(e)||e instanceof Error}function f(e){return"function"==typeof e}function g(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function m(e){return Object.prototype.toString.call(e)}t.isArray=n,t.isBoolean=i,t.isNull=r,t.isNullOrUndefined=o,t.isNumber=s,t.isString=a,t.isSymbol=l,t.isUndefined=u,t.isRegExp=c,t.isObject=d,t.isDate=h,t.isError=p,t.isFunction=f,t.isPrimitive=g,t.isBuffer=e.isBuffer}).call(t,n(65).Buffer)},82,function(e,t){},function(e,t,n){"use strict";function i(){this.head=null,this.tail=null,this.length=0}var r=(n(65).Buffer,n(88));e.exports=i,i.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},i.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},i.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},i.prototype.clear=function(){this.head=this.tail=null,this.length=0},i.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},i.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t=r.allocUnsafe(e>>>0),n=this.head,i=0;n;)n.data.copy(t,i),i+=n.data.length,n=n.next;return t}},function(e,t,n){"use strict";function i(e){return this instanceof i?(u.call(this,e),c.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",r)):new i(e)}function r(){this.allowHalfOpen||this._writableState.ended||a(o,this)}function o(e){e.end()}var s=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=i;var a=n(86),l=n(89);l.inherits=n(90);var u=n(85),c=n(94);l.inherits(i,u);for(var d=s(c.prototype),h=0;h<d.length;h++){var p=d[h];i.prototype[p]||(i.prototype[p]=c.prototype[p])}},function(e,t,n){(function(t,i){"use strict";function r(){}function o(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function s(e,t){S=S||n(93),e=e||{},this.objectMode=!!e.objectMode,t instanceof S&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=e.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){g(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new k(this)}function a(e){return S=S||n(93),R.call(a,this)||this instanceof S?(this._writableState=new s(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),void P.call(this)):new a(e)}function l(e,t){var n=new Error("write after end");e.emit("error",n),E(t,n)}function u(e,t,n,i){var r=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):D.isBuffer(n)||"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),E(i,o),r=!1),r}function c(e,t,n){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=M.from(t,n)),t}function d(e,t,n,i,r){n=c(t,n,i),D.isBuffer(n)&&(i="buffer");var s=t.objectMode?1:n.length;t.length+=s;var a=t.length<t.highWaterMark;if(a||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest=new o(n,i,r),l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else h(e,t,!1,s,n,i,r);return a}function h(e,t,n,i,r,o,s){t.writelen=i,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(r,t.onwrite):e._write(r,o,t.onwrite),t.sync=!1}function p(e,t,n,i,r){--t.pendingcb,n?E(r,i):r(i),e._writableState.errorEmitted=!0,e.emit("error",i)}function f(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function g(e,t){var n=e._writableState,i=n.sync,r=n.writecb;if(f(n),t)p(e,n,i,t,r);else{var o=y(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||v(e,n),i?T(m,e,n,o,r):m(e,n,o,r)}}function m(e,t,n,i){n||_(e,t),t.pendingcb--,i(),w(e,t)}function _(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function v(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,r=new Array(i),o=t.corkedRequestsFree;o.entry=n;for(var s=0;n;)r[s]=n,n=n.next,s+=1;h(e,t,!0,t.length,r,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new k(t)}else{for(;n;){var a=n.chunk,l=n.encoding,u=n.callback,c=t.objectMode?1:a.length;if(h(e,t,!1,c,a,l,u),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function y(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function b(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function w(e,t){var n=y(t);return n&&(0===t.pendingcb?(b(e,t),t.finished=!0,e.emit("finish")):b(e,t)),n}function x(e,t,n){t.ending=!0,w(e,t),n&&(t.finished?E(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function k(e){var t=this;this.next=null,this.entry=null,this.finish=function(n){var i=t.entry;for(t.entry=null;i;){var r=i.callback;e.pendingcb--,r(n),i=i.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}e.exports=a;var S,E=n(86),T=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?i:E;a.WritableState=s;var A=n(89);A.inherits=n(90);var P,C={deprecate:n(97)};!function(){try{P=n(81)}catch(e){}finally{P||(P=n(80).EventEmitter)}}();var D=n(65).Buffer,M=n(88);A.inherits(a,P),s.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(s.prototype,"buffer",{get:C.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(e){}}();var R;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(R=Function.prototype[Symbol.hasInstance],Object.defineProperty(a,Symbol.hasInstance,{value:function(e){return R.call(this,e)?!0:e&&e._writableState instanceof s}})):R=function(e){return e instanceof this},a.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},a.prototype.write=function(e,t,n){var i=this._writableState,o=!1;return"function"==typeof t&&(n=t,t=null),D.isBuffer(e)?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=r),i.ended?l(this,n):u(this,i,e,n)&&(i.pendingcb++,o=d(this,i,e,t,n)),o},a.prototype.cork=function(){var e=this._writableState;e.corked++},a.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||v(this,e))},a.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},a.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},a.prototype._writev=null,a.prototype.end=function(e,t,n){var i=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||x(this,i,n)}}).call(t,n(84),n(95).setImmediate)},function(e,t,r){function o(e,t){this._id=e,this._clearFn=t}var s=Function.prototype.apply;t.setTimeout=function(){return new o(s.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new o(s.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r(96),t.setImmediate=n,t.clearImmediate=i},function(e,t,n){(function(e,t){!function(e,n){"use strict";function i(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return g[f]=i,p(f),f++}function r(e){delete g[e]}function o(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i)}}function s(e){if(m)setTimeout(s,0,e);else{var t=g[e];if(t){m=!0;try{o(t)}finally{r(e),m=!1}}}}function a(){p=function(e){t.nextTick(function(){s(e)})}}function l(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function u(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&s(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),p=function(n){e.postMessage(t+n,"*")}}function c(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;s(t)},p=function(t){e.port2.postMessage(t)}}function d(){var e=_.documentElement;p=function(t){var n=_.createElement("script");n.onreadystatechange=function(){s(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function h(){p=function(e){setTimeout(s,0,e)}}if(!e.setImmediate){var p,f=1,g={},m=!1,_=e.document,v=Object.getPrototypeOf&&Object.getPrototypeOf(e);v=v&&v.setTimeout?v:e,"[object process]"==={}.toString.call(e.process)?a():l()?u():e.MessageChannel?c():_&&"onreadystatechange"in _.createElement("script")?d():h(),v.setImmediate=i,v.clearImmediate=r}}("undefined"==typeof self?"undefined"==typeof e?this:e:self)}).call(t,function(){return this}(),n(84))},function(e,t){(function(t){function n(e,t){function n(){if(!r){if(i("throwDeprecation"))throw new Error(t);i("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}if(i("noDeprecation"))return e;var r=!1;return n}function i(e){try{if(!t.localStorage)return!1}catch(n){return!1}var i=t.localStorage[e];return null==i?!1:"true"===String(i).toLowerCase()}e.exports=n}).call(t,function(){return this}())},function(e,t,n){function i(e){if(e&&!l(e))throw new Error("Unknown encoding: "+e)}function r(e){return e.toString(this.encoding)}function o(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function s(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var a=n(65).Buffer,l=a.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},u=t.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),i(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=r)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};u.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";e=e.slice(n,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var i=t.charCodeAt(t.length-1);if(!(i>=55296&&56319>=i)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var r=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,r),r-=this.charReceived),t+=e.toString(this.encoding,0,r);var r=t.length-1,i=t.charCodeAt(r);if(i>=55296&&56319>=i){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,r)}return t},u.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(2>=t&&n>>4==14){this.charLength=3;break}if(3>=t&&n>>3==30){this.charLength=4;break}}this.charReceived=t},u.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,i=this.charBuffer,r=this.encoding;t+=i.slice(0,n).toString(r)}return t}},function(e,t,n){"use strict";function i(e){this.afterTransform=function(t,n){return r(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function r(e,t,n){var i=e._transformState;i.transforming=!1;var r=i.writecb;if(!r)return e.emit("error",new Error("no writecb in Transform class"));i.writechunk=null,i.writecb=null,null!==n&&void 0!==n&&e.push(n),r(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);a.call(this,e),this._transformState=new i(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,n){s(t,e,n)}):s(t)})}function s(e,t,n){if(t)return e.emit("error",t);null!==n&&void 0!==n&&e.push(n);var i=e._writableState,r=e._transformState;if(i.length)throw new Error("Calling transform done when ws.length != 0");if(r.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}e.exports=o;var a=n(93),l=n(89);l.inherits=n(90),l.inherits(o,a),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,a.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},function(e,t,n){"use strict";function i(e){return this instanceof i?void r.call(this,e):new i(e)}e.exports=i;var r=n(99),o=n(89);o.inherits=n(90),o.inherits(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){e.exports=n(94)},function(e,t,n){e.exports=n(93)},function(e,t,n){e.exports=n(99)},function(e,t,n){e.exports=n(100)},function(e,t,n){(function(t){var i,r=n(69),o=n(64),s=(o.BaseTransform,o.BaseParser),a=n(106);e.exports=i=function(e,t){o.BaseParser.prototype.constructor.apply(this,arguments),e||(e={audioTrackId:-1,videoTrackId:-1,tracks:[]}),this.muxer=new a(e),this.muxer.ondata=this._onMp4Data.bind(this),this.muxer.oncodecinfo=this._onCodecInfo.bind(this),this._codecInfo=null,this._timestamp=0,t&&(this.worker="undefined"!=typeof Worker?new Worker("/dist/mp4-mux-worker-bundle.js"):null),this.worker&&(this.worker.onmessage=function(e){this._onMp4Data(e.data)}.bind(this),this.worker.postMessage({mp4MuxProfile:e}))},i.Profiles=a.Profiles,i.prototype=o.createBaseParser({constructor:i,_onMp4Data:function(e){r("_onMp4Data"),this.enqueue(new o.Transfer(new t(e),"buffer"))},_onCodecInfo:function(e){r("Codec info: "+e),this._codecInfo=e},_onFinish:function(e){r("MP4Mux._onFinish"),this.worker?this.worker.postMessage({eos:!0}):this.muxer&&this.muxer.flush(),s.prototype._onFinish.call(this,e)},_parse:function(e){var t;e.data&&(t=this._timestamp=e.data.timestamp),e.data.flush&&(this._needFlush=!0),r("UnitMP4Mux Timestamp: "+this._timestamp),r("UnitMP4Mux._parse: Payload type: "+typeof e.data),this.worker?(e.data.empty||this.worker.postMessage({data:e.data,meta:e.data.meta,timestamp:t,packetType:a.TYPE_AUDIO_PACKET}),this._needFlush&&(this.worker.postMessage({eos:!0}),this._needFlush=!1)):this.muxer&&(e.data.empty||this.muxer.pushPacket(a.TYPE_AUDIO_PACKET,new Uint8Array(e.data),t,e.data.meta),this._needFlush&&(this.muxer.flush(),this._needFlush=!1))}})}).call(t,n(65).Buffer)},function(e,t,n){function i(e){for(var t=e.length>>1,n=new Uint8Array(t),i=0;t>i;i++)n[i]=parseInt(e.substr(2*i,2),16);return n}function r(e,t){var n,i=0,r=s.RAW;switch(t.codecId){case d:var o=e[i++];r=o,n=1024;break;case c:var l=e[i+1]>>3&3,h=e[i+1]>>1&3;n=1===h?3===l?1152:576:3===h?384:1152}return info={codecDescription:u[t.codecId],codecId:t.codecId,data:e.subarray(i),rate:t.sampleRate,size:t.sampleSize,channels:t.channels,samples:n,packetType:r},!window.test5&&console.log(e.subarray(i)),window.test5=!0,a("parsed audio packet with %d samples",n),info}function o(e){var t=0,n=e[t]>>4,i=15&e[t];t++;var r={frameType:n,codecId:i,codecDescription:p[i]};switch(i){case g:var o=e[t++];r.packetType=o,r.compositionTime=(e[t]<<24|e[t+1]<<16|e[t+2]<<8)>>8,t+=3;break;case f:r.packetType=m.NALU,r.horizontalOffset=e[t]>>4&15,r.verticalOffset=15&e[t],r.compositionTime=0,t++}return r.data=e.subarray(t),r}var s,a=n(69),l=n(107),u=["PCM","ADPCM","MP3","PCM le","Nellymouser16","Nellymouser8","Nellymouser","G.711 A-law","G.711 mu-law",null,"AAC","Speex","MP3 8khz"],c=2,d=10;!function(e){e[e.HEADER=0]="HEADER",e[e.RAW=1]="RAW"}(s||(s={}));var h,p=[null,"JPEG","Sorenson","Screen","VP6","VP6 alpha","Screen2","AVC"],f=4,g=7;!function(e){e[e.KEY=1]="KEY",e[e.INNER=2]="INNER",e[e.DISPOSABLE=3]="DISPOSABLE",e[e.GENERATED=4]="GENERATED",e[e.INFO=5]="INFO"}(h||(h={}));var m;!function(e){e[e.HEADER=0]="HEADER",e[e.NALU=1]="NALU",e[e.END=2]="END"}(m||(m={}));var _,v=8,y=9,b=!0;!function(e){e[e.CAN_GENERATE_HEADER=0]="CAN_GENERATE_HEADER",e[e.NEED_HEADER_DATA=1]="NEED_HEADER_DATA",e[e.MAIN_PACKETS=2]="MAIN_PACKETS"}(_||(_={}));var w=function(){function e(e){var t=this;this.oncodecinfo=function(e){throw new Error("MP4Mux.oncodecinfo is not set")},this.ondata=function(e){throw new Error("MP4Mux.ondata is not set")},this.metadata=e,this.trackStates=this.metadata.tracks.map(function(e,n){var i={trackId:n+1,trackInfo:e,cachedDuration:0,samplesProcessed:0,initializationData:[]};return t.metadata.audioTrackId===n&&(t.audioTrackState=i),t.metadata.videoTrackId===n&&(t.videoTrackState=i),i},this),this._checkIfNeedHeaderData(),this.filePos=0,this.cachedPackets=[],this.chunkIndex=0}return e.prototype.pushPacket=function(e,t,n,i){switch(this.state===_.CAN_GENERATE_HEADER&&this._tryGenerateHeader(),e){case v:var a=this.audioTrackState,l=r(t,i);if(!a||a.trackInfo.codecId!==l.codecId)throw new Error("Unexpected audio packet codec: "+l.codecDescription);switch(l.codecId){default:throw new Error("Unsupported audio codec: "+l.codecDescription);case c:break;case d:if(l.packetType===s.HEADER)return void a.initializationData.push(l.data)}this.cachedPackets.push({packet:l,timestamp:n,trackId:a.trackId});break;case y:var u=this.videoTrackState,h=o(t);if(!u||u.trackInfo.codecId!==h.codecId)throw new Error("Unexpected video packet codec: "+h.codecDescription);switch(h.codecId){default:throw new Error("unsupported video codec: "+h.codecDescription);case f:break;case g:if(h.packetType===m.HEADER)return void u.initializationData.push(h.data)}this.cachedPackets.push({packet:h,timestamp:n,trackId:u.trackId});break;default:throw new Error("unknown packet type: "+e)}this.state===_.NEED_HEADER_DATA&&this._tryGenerateHeader()},e.prototype.flush=function(){this.cachedPackets.length>0&&this._chunk()},e.prototype._checkIfNeedHeaderData=function(){this.trackStates.some(function(e){return e.trackInfo.codecId===d||e.trackInfo.codecId===g})?this.state=_.NEED_HEADER_DATA:this.state=_.CAN_GENERATE_HEADER},e.prototype._tryGenerateHeader=function(){var e=this.trackStates.every(function(e){switch(e.trackInfo.codecId){case d:case g:return e.initializationData.length>0;default:return!0}});if(e){for(var t=["isom"],n=1,r=1,o=[],s=0;s<this.trackStates.length;s++){var a,u=this.trackStates[s],h=u.trackInfo;switch(h.codecId){case d:var p=u.initializationData[0];a=new l.AudioSampleEntry("mp4a",n,h.channels,h.samplesize,h.samplerate);var m=new Uint8Array(41+p.length);m.set(i("0000000003808080"),0),m[8]=32+p.length,m.set(i("00020004808080"),9),m[16]=18+p.length,m.set(i("40150000000000FA000000000005808080"),17),m[34]=p.length,m.set(p,35),m.set(i("068080800102"),35+p.length),a.otherBoxes=[new l.RawTag("esds",m)];var v=p[0]>>3;u.mimeTypeCodec="mp4a.40."+v;break;case c:a=new l.AudioSampleEntry(".mp3",n,h.channels,h.samplesize,h.samplerate),
u.mimeTypeCodec="mp3";break;case g:var y=u.initializationData[0];a=new l.VideoSampleEntry("avc1",r,h.width,h.height),a.otherBoxes=[new l.RawTag("avcC",y)];var b=y[1]<<16|y[2]<<8|y[3];u.mimeTypeCodec="avc1."+(16777216|b).toString(16).substr(1),t.push("iso2","avc1","mp41");break;case f:a=new l.VideoSampleEntry("VP6F",r,h.width,h.height),a.otherBoxes=[new l.RawTag("glbl",i("00"))],u.mimeTypeCodec="avc1.42001E";break;default:throw new Error("not supported track type")}var w,x=l.TrackHeaderFlags.TRACK_ENABLED|l.TrackHeaderFlags.TRACK_IN_MOVIE;u===this.audioTrackState?w=new l.TrackBox(new l.TrackHeaderBox(x,u.trackId,-1,0,0,1,s),new l.MediaBox(new l.MediaHeaderBox(h.timescale,-1,h.language),new l.HandlerBox("soun","SoundHandler"),new l.MediaInformationBox(new l.SoundMediaHeaderBox,new l.DataInformationBox(new l.DataReferenceBox([new l.DataEntryUrlBox(l.SELF_CONTAINED_DATA_REFERENCE_FLAG)])),new l.SampleTableBox(new l.SampleDescriptionBox([a]),new l.RawTag("stts",i("0000000000000000")),new l.RawTag("stsc",i("0000000000000000")),new l.RawTag("stsz",i("000000000000000000000000")),new l.RawTag("stco",i("0000000000000000")))))):u===this.videoTrackState&&(w=new l.TrackBox(new l.TrackHeaderBox(x,u.trackId,-1,h.width,h.height,0,s),new l.MediaBox(new l.MediaHeaderBox(h.timescale,-1,h.language),new l.HandlerBox("vide","VideoHandler"),new l.MediaInformationBox(new l.VideoMediaHeaderBox,new l.DataInformationBox(new l.DataReferenceBox([new l.DataEntryUrlBox(l.SELF_CONTAINED_DATA_REFERENCE_FLAG)])),new l.SampleTableBox(new l.SampleDescriptionBox([a]),new l.RawTag("stts",i("0000000000000000")),new l.RawTag("stsc",i("0000000000000000")),new l.RawTag("stsz",i("000000000000000000000000")),new l.RawTag("stco",i("0000000000000000"))))))),o.push(w)}var k=new l.MovieExtendsBox(null,[new l.TrackExtendsBox(1,1,0,0,0),new l.TrackExtendsBox(2,1,0,0,0)],null),S=new l.BoxContainerBox("udat",[new l.MetaBox(new l.RawTag("hdlr",i("00000000000000006D6469726170706C000000000000000000")),[new l.RawTag("ilst",i("00000025A9746F6F0000001D6461746100000001000000004C61766635342E36332E313034"))])]),E=new l.MovieHeaderBox(1e3,0,this.trackStates.length+1),T=new l.MovieBox(E,o,k,S),A=new l.FileTypeBox("isom",512,t),P=A.layout(0),C=T.layout(P),D=new Uint8Array(P+C);A.write(D),T.write(D),this.oncodecinfo(this.trackStates.map(function(e){return e.mimeTypeCodec})),this.ondata(D),this.filePos+=D.length,this.state=_.MAIN_PACKETS}},e.prototype._chunk=function(){var e=this.cachedPackets;if(b&&this.videoTrackState){for(var t=e.length-1,n=this.videoTrackState.trackId;t>0&&(e[t].trackId!==n||e[t].packet.frameType!==h.KEY);)t--;t>0&&(e=e.slice(0,t))}if(0!==e.length){for(var i=[],r=0,o=[],s=[],a=0;a<this.trackStates.length;a++){var u=this.trackStates[a],p=u.trackInfo,m=u.trackId,_=e.filter(function(e){return e.trackId===m});if(0!==_.length){var v,y,w,x=new l.TrackFragmentBaseMediaDecodeTimeBox(u.cachedDuration);switch(s.push(r),p.codecId){case d:case c:w=[];for(var t=0;t<_.length;t++){var k=_[t].packet,S=Math.round(k.samples*p.timescale/p.samplerate);i.push(k.data),r+=k.data.length,w.push({duration:S,size:k.data.length}),u.samplesProcessed+=k.samples}var E=l.TrackFragmentFlags.DEFAULT_SAMPLE_FLAGS_PRESENT;v=new l.TrackFragmentHeaderBox(E,m,0,0,0,0,l.SampleFlags.SAMPLE_DEPENDS_ON_NO_OTHERS);var T=l.TrackRunFlags.DATA_OFFSET_PRESENT|l.TrackRunFlags.SAMPLE_DURATION_PRESENT|l.TrackRunFlags.SAMPLE_SIZE_PRESENT;y=new l.TrackRunBox(T,w,0,0),u.cachedDuration=Math.round(u.samplesProcessed*p.timescale/p.samplerate);break;case g:case f:w=[];for(var A=u.samplesProcessed,P=A*p.timescale/p.framerate,C=Math.round(P),t=0;t<_.length;t++){var D=_[t].packet;A++;var M=Math.round(A*p.timescale/p.framerate),R=M-C;C=M;var I=Math.round(A*p.timescale/p.framerate+D.compositionTime*p.timescale/1e3);i.push(D.data),r+=D.data.length;var O=D.frameType===h.KEY?l.SampleFlags.SAMPLE_DEPENDS_ON_NO_OTHERS:l.SampleFlags.SAMPLE_DEPENDS_ON_OTHER|l.SampleFlags.SAMPLE_IS_NOT_SYNC;w.push({duration:R,size:D.data.length,flags:O,compositionTimeOffset:I-M})}var E=l.TrackFragmentFlags.DEFAULT_SAMPLE_FLAGS_PRESENT;v=new l.TrackFragmentHeaderBox(E,m,0,0,0,0,l.SampleFlags.SAMPLE_DEPENDS_ON_NO_OTHERS);var T=l.TrackRunFlags.DATA_OFFSET_PRESENT|l.TrackRunFlags.SAMPLE_DURATION_PRESENT|l.TrackRunFlags.SAMPLE_SIZE_PRESENT|l.TrackRunFlags.SAMPLE_FLAGS_PRESENT|l.TrackRunFlags.SAMPLE_COMPOSITION_TIME_OFFSET;y=new l.TrackRunBox(T,w,0,0),u.cachedDuration=C,u.samplesProcessed=A;break;default:throw new Error("Un codec")}var L=new l.TrackFragmentBox(v,x,y);o.push(L)}}this.cachedPackets.splice(0,e.length);for(var N=new l.MovieFragmentHeaderBox(++this.chunkIndex),F=new l.MovieFragmentBox(N,o),B=F.layout(0),U=new l.MediaDataBox(i),j=U.layout(B),H=B+8,a=0;a<o.length;a++)o[a].run.dataOffset=H+s[a];var $=new Uint8Array(B+j);F.write($),U.write($),this.ondata($),this.filePos+=$.length}},e}();e.exports=w,w.MP3_SOUND_CODEC_ID=c,w.AAC_SOUND_CODEC_ID=d,w.TYPE_AUDIO_PACKET=v,w.TYPE_VIDEO_PACKET=y,w.Profiles={MP3_AUDIO_ONLY:{audioTrackId:0,videoTrackId:-1,tracks:[{codecId:w.MP3_SOUND_CODEC_ID,channels:2,samplerate:44100,samplesize:16,timescale:44100}]}}},function(e,t){function n(e){for(var t=new Uint8Array(4*e.length),n=0,i=0,r=e.length;r>i;i++){var o=e.charCodeAt(i);if(127>=o)t[n++]=o;else{if(o>=55296&&56319>=o){var s=e.charCodeAt(i+1);s>=56320&&57343>=s&&(o=((1023&o)<<10)+(1023&s)+65536,++i)}0!==(4292870144&o)?(t[n++]=248|o>>>24&3,t[n++]=128|o>>>18&63,t[n++]=128|o>>>12&63,t[n++]=128|o>>>6&63,t[n++]=128|63&o):0!==(4294901760&o)?(t[n++]=240|o>>>18&7,t[n++]=128|o>>>12&63,t[n++]=128|o>>>6&63,t[n++]=128|63&o):0!==(4294965248&o)?(t[n++]=224|o>>>12&15,t[n++]=128|o>>>6&63,t[n++]=128|63&o):(t[n++]=192|o>>>6&31,t[n++]=128|63&o)}}return t.subarray(0,n)}function i(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return Array.prototype.concat.apply(e,t)}function r(e,t,n){e[t]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function o(e){return e.charCodeAt(0)<<24|e.charCodeAt(1)<<16|e.charCodeAt(2)<<8|e.charCodeAt(3)}function s(e){return(e-p)/1e3|0}function a(e){return 65536*e|0}function l(e){return 1073741824*e|0}function u(e){return 256*e|0}function c(e){return(31&e.charCodeAt(0))<<10|(31&e.charCodeAt(1))<<5|31&e.charCodeAt(2)}var d,h=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};e.exports=d={};var p=-20828448e5,f=[1,0,0,0,1,0,0,0,1],g=[0,0,0],m=function(){function e(e,t){this.boxtype=e,"uuid"===e&&(this.userType=t)}return e.prototype.layout=function(e){this.offset=e;var t=8;return this.userType&&(t+=16),this.size=t,t},e.prototype.write=function(e){return r(e,this.offset,this.size),r(e,this.offset+4,o(this.boxtype)),this.userType?(e.set(this.userType,this.offset+8),24):8},e.prototype.toUint8Array=function(){var e=this.layout(0),t=new Uint8Array(e);return this.write(t),t},e}();d.Box=m;var _=function(e){function t(t,n,i){void 0===n&&(n=0),void 0===i&&(i=0),e.call(this,t),this.version=n,this.flags=i}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+4,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,this.version<<24|this.flags),n+4},t}(m);d.FullBox=_;var v=function(e){function t(t,n,i){e.call(this,"ftype"),this.majorBrand=t,this.minorVersion=n,this.compatibleBrands=i}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+4*(2+this.compatibleBrands.length),this.size},t.prototype.write=function(t){var n=this,i=e.prototype.write.call(this,t);return r(t,this.offset+i,o(this.majorBrand)),r(t,this.offset+i+4,this.minorVersion),i+=8,this.compatibleBrands.forEach(function(e){r(t,n.offset+i,o(e)),i+=4},this),i},t}(m);d.FileTypeBox=v;var y=function(e){function t(t,n){e.call(this,t),this.children=n}return h(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t);return this.children.forEach(function(e){e&&(n+=e.layout(t+n))}),this.size=n},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return this.children.forEach(function(e){e&&(n+=e.write(t))}),n},t}(m);d.BoxContainerBox=y;var b=function(e){function t(t,n,r,o){e.call(this,"moov",i([t],n,[r,o])),this.header=t,this.tracks=n,this.extendsBox=r,this.userData=o}return h(t,e),t}(y);d.MovieBox=b;var w=function(e){function t(t,n,i,r,o,s,a,l){void 0===r&&(r=1),void 0===o&&(o=1),void 0===s&&(s=f),void 0===a&&(a=p),void 0===l&&(l=p),e.call(this,"mvhd",0,0),this.timescale=t,this.duration=n,this.nextTrackId=i,this.rate=r,this.volume=o,this.matrix=s,this.creationTime=a,this.modificationTime=l}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+16+4+2+2+8+36+24+4,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,s(this.creationTime)),r(t,this.offset+n+4,s(this.modificationTime)),r(t,this.offset+n+8,this.timescale),r(t,this.offset+n+12,this.duration),n+=16,r(t,this.offset+n,a(this.rate)),r(t,this.offset+n+4,u(this.volume)<<16),r(t,this.offset+n+8,0),r(t,this.offset+n+12,0),n+=16,r(t,this.offset+n,a(this.matrix[0])),r(t,this.offset+n+4,a(this.matrix[1])),r(t,this.offset+n+8,a(this.matrix[2])),r(t,this.offset+n+12,a(this.matrix[3])),r(t,this.offset+n+16,a(this.matrix[4])),r(t,this.offset+n+20,a(this.matrix[5])),r(t,this.offset+n+24,l(this.matrix[6])),r(t,this.offset+n+28,l(this.matrix[7])),r(t,this.offset+n+32,l(this.matrix[8])),n+=36,r(t,this.offset+n,0),r(t,this.offset+n+4,0),r(t,this.offset+n+8,0),r(t,this.offset+n+12,0),r(t,this.offset+n+16,0),r(t,this.offset+n+20,0),n+=24,r(t,this.offset+n,this.nextTrackId),n+=4},t}(_);d.MovieHeaderBox=w,function(e){e[e.TRACK_ENABLED=1]="TRACK_ENABLED",e[e.TRACK_IN_MOVIE=2]="TRACK_IN_MOVIE",e[e.TRACK_IN_PREVIEW=4]="TRACK_IN_PREVIEW"}(d.TrackHeaderFlags||(d.TrackHeaderFlags={}));var x=(d.TrackHeaderFlags,function(e){function t(t,n,i,r,o,s,a,l,u,c,d){void 0===a&&(a=0),void 0===l&&(l=0),void 0===u&&(u=f),void 0===c&&(c=p),void 0===d&&(d=p),e.call(this,"tkhd",0,t),this.trackId=n,this.duration=i,this.width=r,this.height=o,this.volume=s,this.alternateGroup=a,this.layer=l,this.matrix=u,this.creationTime=c,this.modificationTime=d}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+20+8+6+2+36+8,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,s(this.creationTime)),r(t,this.offset+n+4,s(this.modificationTime)),r(t,this.offset+n+8,this.trackId),r(t,this.offset+n+12,0),r(t,this.offset+n+16,this.duration),n+=20,r(t,this.offset+n,0),r(t,this.offset+n+4,0),r(t,this.offset+n+8,this.layer<<16|this.alternateGroup),r(t,this.offset+n+12,u(this.volume)<<16),n+=16,r(t,this.offset+n,a(this.matrix[0])),r(t,this.offset+n+4,a(this.matrix[1])),r(t,this.offset+n+8,a(this.matrix[2])),r(t,this.offset+n+12,a(this.matrix[3])),r(t,this.offset+n+16,a(this.matrix[4])),r(t,this.offset+n+20,a(this.matrix[5])),r(t,this.offset+n+24,l(this.matrix[6])),r(t,this.offset+n+28,l(this.matrix[7])),r(t,this.offset+n+32,l(this.matrix[8])),n+=36,r(t,this.offset+n,a(this.width)),r(t,this.offset+n+4,a(this.height)),n+=8},t}(_));d.TrackHeaderBox=x;var k=function(e){function t(t,n,i,r,o){void 0===i&&(i="unk"),void 0===r&&(r=p),void 0===o&&(o=p),e.call(this,"mdhd",0,0),this.timescale=t,this.duration=n,this.language=i,this.creationTime=r,this.modificationTime=o}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+16+4,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,s(this.creationTime)),r(t,this.offset+n+4,s(this.modificationTime)),r(t,this.offset+n+8,this.timescale),r(t,this.offset+n+12,this.duration),r(t,this.offset+n+16,c(this.language)<<16),n+20},t}(_);d.MediaHeaderBox=k;var S=function(e){function t(t,i){e.call(this,"hdlr",0,0),this.handlerType=t,this.name=i,this._encodedName=n(this.name)}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+8+12+(this._encodedName.length+1),this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,0),r(t,this.offset+n+4,o(this.handlerType)),r(t,this.offset+n+8,0),r(t,this.offset+n+12,0),r(t,this.offset+n+16,0),n+=20,t.set(this._encodedName,this.offset+n),t[this.offset+n+this._encodedName.length]=0,n+=this._encodedName.length+1},t}(_);d.HandlerBox=S;var E=function(e){function t(t){void 0===t&&(t=0),e.call(this,"smhd",0,0),this.balance=t}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+4,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,u(this.balance)<<16),n+4},t}(_);d.SoundMediaHeaderBox=E;var T=function(e){function t(t,n){void 0===t&&(t=0),void 0===n&&(n=g),e.call(this,"vmhd",0,0),this.graphicsMode=t,this.opColor=n}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+8,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,this.graphicsMode<<16|this.opColor[0]),r(t,this.offset+n+4,this.opColor[1]<<16|this.opColor[2]),n+8},t}(_);d.VideoMediaHeaderBox=T,d.SELF_CONTAINED_DATA_REFERENCE_FLAG=1;var A=function(e){function t(t,i){void 0===i&&(i=null),e.call(this,"url ",0,t),this.location=i,t&d.SELF_CONTAINED_DATA_REFERENCE_FLAG||(this._encodedLocation=n(i))}return h(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t);return this._encodedLocation&&(n+=this._encodedLocation.length+1),this.size=n},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return this._encodedLocation&&(t.set(this._encodedLocation,this.offset+n),t[this.offset+n+this._encodedLocation.length]=0,n+=this._encodedLocation.length),n},t}(_);d.DataEntryUrlBox=A;var P=function(e){function t(t){e.call(this,"dref",0,0),this.entries=t}return h(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t)+4;return this.entries.forEach(function(e){n+=e.layout(t+n)}),this.size=n},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,this.entries.length),this.entries.forEach(function(e){n+=e.write(t)}),n},t}(_);d.DataReferenceBox=P;var C=function(e){function t(t){e.call(this,"dinf",[t]),this.dataReference=t}return h(t,e),t}(y);d.DataInformationBox=C;var D=function(e){function t(t){e.call(this,"stsd",0,0),this.entries=t}return h(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t);return n+=4,this.entries.forEach(function(e){n+=e.layout(t+n)}),this.size=n},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,this.entries.length),n+=4,this.entries.forEach(function(e){n+=e.write(t)}),n},t}(_);d.SampleDescriptionBox=D;var M=function(e){function t(t,n,i,r,o){e.call(this,"stbl",[t,n,i,r,o]),this.sampleDescriptions=t,this.timeToSample=n,this.sampleToChunk=i,this.sampleSizes=r,this.chunkOffset=o}return h(t,e),t}(y);d.SampleTableBox=M;var R=function(e){function t(t,n,i){e.call(this,"minf",[t,n,i]),this.header=t,this.info=n,this.sampleTable=i}return h(t,e),t}(y);d.MediaInformationBox=R;var I=function(e){function t(t,n,i){e.call(this,"mdia",[t,n,i]),this.header=t,this.handler=n,this.info=i}return h(t,e),t}(y);d.MediaBox=I;var O=function(e){function t(t,n){e.call(this,"trak",[t,n]),this.header=t,this.media=n}return h(t,e),t}(y);d.TrackBox=O;var L=function(e){function t(t,n,i,r,o){e.call(this,"trex",0,0),this.trackId=t,this.defaultSampleDescriptionIndex=n,this.defaultSampleDuration=i,this.defaultSampleSize=r,this.defaultSampleFlags=o}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+20,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,this.trackId),r(t,this.offset+n+4,this.defaultSampleDescriptionIndex),r(t,this.offset+n+8,this.defaultSampleDuration),r(t,this.offset+n+12,this.defaultSampleSize),r(t,this.offset+n+16,this.defaultSampleFlags),n+20},t}(_);d.TrackExtendsBox=L;var N=function(e){function t(t,n,r){e.call(this,"mvex",i([t],n,[r])),this.header=t,this.tracDefaults=n,this.levels=r}return h(t,e),t}(y);d.MovieExtendsBox=N;var F=function(e){function t(t,n){e.call(this,"meta",0,0),this.handler=t,this.otherBoxes=n}return h(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t);return n+=this.handler.layout(t+n),this.otherBoxes.forEach(function(e){n+=e.layout(t+n)}),this.size=n},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return n+=this.handler.write(t),this.otherBoxes.forEach(function(e){n+=e.write(t)}),n},t}(_);d.MetaBox=F;var B=function(e){function t(t){e.call(this,"mfhd",0,0),this.sequenceNumber=t}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+4,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,this.sequenceNumber),n+4},t}(_);d.MovieFragmentHeaderBox=B,function(e){e[e.BASE_DATA_OFFSET_PRESENT=1]="BASE_DATA_OFFSET_PRESENT",e[e.SAMPLE_DESCRIPTION_INDEX_PRESENT=2]="SAMPLE_DESCRIPTION_INDEX_PRESENT",e[e.DEFAULT_SAMPLE_DURATION_PRESENT=8]="DEFAULT_SAMPLE_DURATION_PRESENT",e[e.DEFAULT_SAMPLE_SIZE_PRESENT=16]="DEFAULT_SAMPLE_SIZE_PRESENT",e[e.DEFAULT_SAMPLE_FLAGS_PRESENT=32]="DEFAULT_SAMPLE_FLAGS_PRESENT"}(d.TrackFragmentFlags||(d.TrackFragmentFlags={}));var U=d.TrackFragmentFlags,j=function(e){function t(t,n,i,r,o,s,a){e.call(this,"tfhd",0,t),this.trackId=n,this.baseDataOffset=i,this.sampleDescriptionIndex=r,this.defaultSampleDuration=o,this.defaultSampleSize=s,this.defaultSampleFlags=a}return h(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t)+4,i=this.flags;return i&U.BASE_DATA_OFFSET_PRESENT&&(n+=8),i&U.SAMPLE_DESCRIPTION_INDEX_PRESENT&&(n+=4),i&U.DEFAULT_SAMPLE_DURATION_PRESENT&&(n+=4),i&U.DEFAULT_SAMPLE_SIZE_PRESENT&&(n+=4),i&U.DEFAULT_SAMPLE_FLAGS_PRESENT&&(n+=4),this.size=n},t.prototype.write=function(t){var n=e.prototype.write.call(this,t),i=this.flags;return r(t,this.offset+n,this.trackId),n+=4,i&U.BASE_DATA_OFFSET_PRESENT&&(r(t,this.offset+n,0),r(t,this.offset+n+4,this.baseDataOffset),n+=8),i&U.SAMPLE_DESCRIPTION_INDEX_PRESENT&&(r(t,this.offset+n,this.sampleDescriptionIndex),n+=4),i&U.DEFAULT_SAMPLE_DURATION_PRESENT&&(r(t,this.offset+n,this.defaultSampleDuration),n+=4),i&U.DEFAULT_SAMPLE_SIZE_PRESENT&&(r(t,this.offset+n,this.defaultSampleSize),n+=4),i&U.DEFAULT_SAMPLE_FLAGS_PRESENT&&(r(t,this.offset+n,this.defaultSampleFlags),n+=4),n},t}(_);d.TrackFragmentHeaderBox=j;var H=function(e){function t(t){e.call(this,"tfdt",0,0),this.baseMediaDecodeTime=t}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+4,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,this.baseMediaDecodeTime),n+4},t}(_);d.TrackFragmentBaseMediaDecodeTimeBox=H;var $=function(e){function t(t,n,i){e.call(this,"traf",[t,n,i]),this.header=t,this.decodeTime=n,this.run=i}return h(t,e),t}(y);d.TrackFragmentBox=$,function(e){e[e.IS_LEADING_MASK=201326592]="IS_LEADING_MASK",e[e.SAMPLE_DEPENDS_ON_MASK=50331648]="SAMPLE_DEPENDS_ON_MASK",e[e.SAMPLE_DEPENDS_ON_OTHER=16777216]="SAMPLE_DEPENDS_ON_OTHER",e[e.SAMPLE_DEPENDS_ON_NO_OTHERS=33554432]="SAMPLE_DEPENDS_ON_NO_OTHERS",e[e.SAMPLE_IS_DEPENDED_ON_MASK=12582912]="SAMPLE_IS_DEPENDED_ON_MASK",e[e.SAMPLE_HAS_REDUNDANCY_MASK=3145728]="SAMPLE_HAS_REDUNDANCY_MASK",e[e.SAMPLE_PADDING_VALUE_MASK=917504]="SAMPLE_PADDING_VALUE_MASK",e[e.SAMPLE_IS_NOT_SYNC=65536]="SAMPLE_IS_NOT_SYNC",e[e.SAMPLE_DEGRADATION_PRIORITY_MASK=65535]="SAMPLE_DEGRADATION_PRIORITY_MASK"}(d.SampleFlags||(d.SampleFlags={}));d.SampleFlags;!function(e){e[e.DATA_OFFSET_PRESENT=1]="DATA_OFFSET_PRESENT",e[e.FIRST_SAMPLE_FLAGS_PRESENT=4]="FIRST_SAMPLE_FLAGS_PRESENT",e[e.SAMPLE_DURATION_PRESENT=256]="SAMPLE_DURATION_PRESENT",e[e.SAMPLE_SIZE_PRESENT=512]="SAMPLE_SIZE_PRESENT",e[e.SAMPLE_FLAGS_PRESENT=1024]="SAMPLE_FLAGS_PRESENT",e[e.SAMPLE_COMPOSITION_TIME_OFFSET=2048]="SAMPLE_COMPOSITION_TIME_OFFSET"}(d.TrackRunFlags||(d.TrackRunFlags={}));var z=d.TrackRunFlags,q=function(e){function t(t,n,i,r){e.call(this,"trun",1,t),this.samples=n,this.dataOffset=i,this.firstSampleFlags=r}return h(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t)+4,i=this.samples.length,r=this.flags;return r&z.DATA_OFFSET_PRESENT&&(n+=4),r&z.FIRST_SAMPLE_FLAGS_PRESENT&&(n+=4),r&z.SAMPLE_DURATION_PRESENT&&(n+=4*i),r&z.SAMPLE_SIZE_PRESENT&&(n+=4*i),r&z.SAMPLE_FLAGS_PRESENT&&(n+=4*i),r&z.SAMPLE_COMPOSITION_TIME_OFFSET&&(n+=4*i),this.size=n},t.prototype.write=function(t){var n=e.prototype.write.call(this,t),i=this.samples.length,o=this.flags;r(t,this.offset+n,i),n+=4,o&z.DATA_OFFSET_PRESENT&&(r(t,this.offset+n,this.dataOffset),n+=4),o&z.FIRST_SAMPLE_FLAGS_PRESENT&&(r(t,this.offset+n,this.firstSampleFlags),n+=4);for(var s=0;i>s;s++){var a=this.samples[s];o&z.SAMPLE_DURATION_PRESENT&&(r(t,this.offset+n,a.duration),n+=4),o&z.SAMPLE_SIZE_PRESENT&&(r(t,this.offset+n,a.size),n+=4),o&z.SAMPLE_FLAGS_PRESENT&&(r(t,this.offset+n,a.flags),n+=4),o&z.SAMPLE_COMPOSITION_TIME_OFFSET&&(r(t,this.offset+n,a.compositionTimeOffset),n+=4)}return n},t}(_);d.TrackRunBox=q;var W=function(e){function t(t,n){e.call(this,"moof",i([t],n)),this.header=t,this.trafs=n}return h(t,e),t}(y);d.MovieFragmentBox=W;var V=function(e){function t(t){e.call(this,"mdat"),this.chunks=t}return h(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t);return this.chunks.forEach(function(e){n+=e.length}),this.size=n},t.prototype.write=function(t){var n=this,i=e.prototype.write.call(this,t);return this.chunks.forEach(function(e){t.set(e,n.offset+i),i+=e.length},this),i},t}(m);d.MediaDataBox=V;var Y=function(e){function t(t,n){e.call(this,t),this.dataReferenceIndex=n}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+8,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,0),r(t,this.offset+n+4,this.dataReferenceIndex),n+8},t}(m);d.SampleEntry=Y;var G=function(e){function t(t,n,i,r,o,s){void 0===i&&(i=2),void 0===r&&(r=16),void 0===o&&(o=44100),void 0===s&&(s=null),e.call(this,t,n),this.channelCount=i,this.sampleSize=r,this.sampleRate=o,this.otherBoxes=s}return h(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t)+20;return this.otherBoxes&&this.otherBoxes.forEach(function(e){n+=e.layout(t+n)}),this.size=n},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,0),r(t,this.offset+n+4,0),r(t,this.offset+n+8,this.channelCount<<16|this.sampleSize),r(t,this.offset+n+12,0),r(t,this.offset+n+16,this.sampleRate<<16),n+=20,this.otherBoxes&&this.otherBoxes.forEach(function(e){n+=e.write(t)}),n},t}(Y);d.AudioSampleEntry=G,d.COLOR_NO_ALPHA_VIDEO_SAMPLE_DEPTH=24;var K=function(e){function t(t,n,i,r,o,s,a,l,u,c){if(void 0===o&&(o=""),void 0===s&&(s=72),void 0===a&&(a=72),void 0===l&&(l=1),void 0===u&&(u=d.COLOR_NO_ALPHA_VIDEO_SAMPLE_DEPTH),void 0===c&&(c=null),e.call(this,t,n),this.width=i,this.height=r,this.compressorName=o,this.horizResolution=s,this.vertResolution=a,this.frameCount=l,this.depth=u,this.otherBoxes=c,o.length>31)throw new Error("invalid compressor name")}return h(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t)+16+12+4+2+32+2+2;return this.otherBoxes&&this.otherBoxes.forEach(function(e){n+=e.layout(t+n)}),this.size=n},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);r(t,this.offset+n,0),r(t,this.offset+n+4,0),r(t,this.offset+n+8,0),r(t,this.offset+n+12,0),n+=16,r(t,this.offset+n,this.width<<16|this.height),r(t,this.offset+n+4,a(this.horizResolution)),r(t,this.offset+n+8,a(this.vertResolution)),n+=12,r(t,this.offset+n,0),r(t,this.offset+n+4,this.frameCount<<16),n+=6,t[this.offset+n]=this.compressorName.length;for(var i=0;31>i;i++)t[this.offset+n+i+1]=i<this.compressorName.length?127&this.compressorName.charCodeAt(i):0;return n+=32,r(t,this.offset+n,this.depth<<16|65535),n+=4,this.otherBoxes&&this.otherBoxes.forEach(function(e){n+=e.write(t)}),n},t}(Y);d.VideoSampleEntry=K;var X=function(e){function t(t,n){e.call(this,t),this.data=n}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+this.data.length,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return t.set(this.data,this.offset+n),n+this.data.length},t}(m);d.RawTag=X},function(e,t,n){(function(t){var i,r=n(69),o=n(64),s=(o.BaseTransform,n(109));n(110);e.exports=i=function(){o.BaseParser.prototype.constructor.apply(this,arguments),this.parser=new s,this.parser.onFrame=this._onMp3Frame.bind(this),this.parser.onNoise=this._onNoise.bind(this),this.parser.onClose=this._onClose.bind(this),this._sampleRate=0,this._bitRate=0,this._timestamp=0};i.prototype=o.createBaseParser({constructor:i,_onMp3Frame:function(e,n,i){!window.test2&&console.log(e),window.test2=!0,r("Found frame length "+e.length+" bitRate="+n+", sampleRate="+i);var s=new t(e),a=1152;s.meta={mimeType:"audio/mpeg",codecId:2,channels:2,bitRate:n,sampleRate:i,sampleSize:16},s.duration=a,s.timestamp=this._timestamp,this.enqueue(new o.Transfer(s,"buffer")),this._bitRate=n,this._timestamp+=a},_onNoise:function(){r("mp3 has noise")},_onClose:function(){r("parser closed")},_parse:function(e){return r("parse called"),e.data.empty?(r("empty transfer"),void this.enqueue(e)):void this.parser.push(new Uint8Array(e.data))}})}).call(t,n(65).Buffer)},function(e,t,n){var i=n(69),r=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],o=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],s=function(){function e(){this.buffer=null,this.bufferSize=0}return e.prototype.push=function(e){var t;if(this.bufferSize>0){var n=e.length+this.bufferSize;if(!this.buffer||this.buffer.length<n){var r=new Uint8Array(n);this.bufferSize>0&&r.set(this.buffer.subarray(0,this.bufferSize)),this.buffer=r}this.buffer.set(e,this.bufferSize),this.bufferSize=n,e=this.buffer,t=n}else t=e.length;i("push "+t);for(var o,s=0;t>s&&(o=this._parse(e,s,t))>0;)s+=o;var a=t-s;a>0&&(!this.buffer||this.buffer.length<a?this.buffer=new Uint8Array(e.subarray(s,t)):this.buffer.set(e.subarray(s,t))),this.bufferSize=a},e.prototype._parse=function(e,t,n){if(i("_parse"),t+2>n)return-1;if(255===e[t]||224===(224&e[t+1])){if(t+24>n)return-1;var s=e[t+1]>>3&3,a=e[t+1]>>1&3,l=e[t+2]>>4&15,u=e[t+2]>>2&3,c=!!(2&e[t+2]);if(1!==s&&0!==l&&15!==l&&3!==u){var d=3===s?3-a:3===a?3:4,h=1e3*r[14*d+l-1],p=3===s?0:2===s?1:2,f=o[3*p+u],g=c?1:0,m=3===a?(3===s?12:6)*h/f+g<<2:(3===s?144:72)*h/f+g|0;return t+m>n?-1:(this.onFrame&&(i("onFrame"),this.onFrame(e.subarray(t,t+m),h,f)),m)}}for(var _=t+2;n>_;){if(255===e[_-1]&&224===(224&e[_]))return this.onNoise&&this.onNoise(e.subarray(t,_-1)),_-t-1;_++}return-1},e.prototype.close=function(){this.bufferSize>0&&this.onNoise&&this.onNoise(this.buffer.subarray(0,this.bufferSize)),this.buffer=null,this.bufferSize=0,this.onClose&&this.onClose()},e}();e.exports=s},function(e,t){var n=1e9;e.exports={TIMESCALE_SECONDS:n}},function(e,t,n){var i,r=n(112),o=n(64),s=o.BaseSink,a=n(113);e.exports=i=function(e){if(s.prototype.constructor.call(this),!r.haveMediaSourceSupportMimeType(e))throw new Error("Local MediaSource doesn't support provided MIME type: "+e);var t;t=arguments.length>1?Array.prototype.slice.call(arguments):e instanceof Array?e:[e],this.mimeTypes=t,this.mediaSource=new MediaSource,this.mseWriter=new a(this.mediaSource),this.dataSources=[],this.selectedDataSourceIndex=0,this.mimeTypes.forEach(function(e){var t={mimeType:e};this.mseWriter.listen(t),this.dataSources.push(t)}.bind(this))},i.prototype=o.createBaseSink({constructor:i,_onData:function(){var e=this.dataSources[this.selectedDataSourceIndex];if(!e||!e.onData)throw new Error("DataSource is not existing or has no onData function defined");var t=this.dequeue();t&&e.onData(t.data)},getMediaSourceUrl:function(){return URL.createObjectURL(this.mediaSource)}})},function(e,t){var n;e.exports=n={haveGlobalWindow:function(){return"undefined"!=typeof window},haveMediaSourceExtensions:function(){return n.haveGlobalWindow()&&window.MediaSource},haveMediaSourceSupportMimeType:function(e){return n.haveMediaSourceExtensions()&&window.MediaSource.isTypeSupported(e)}}},function(e,t){var n=function(){function e(e,t){this.mediaSource=e,this.dataSource=t,this.dataSource.onData=this.pushData.bind(this),this.updateEnabled=!1,this.buffer=[],this.sourceBuffer=null,this.sourceBufferUpdatedBound=null}return e.prototype.allowWriting=function(){this.updateEnabled=!0,this.update()},e.prototype.pushData=function(e){this.buffer.push(e),this.update()},e.prototype.update=function(){if(this.updateEnabled&&0!==this.buffer.length){this.sourceBuffer||(this.sourceBuffer=this.mediaSource.addSourceBuffer(this.dataSource.mimeType),this.sourceBufferUpdatedBound=this._sourceBufferUpdated.bind(this),this.sourceBuffer.addEventListener("update",this.sourceBufferUpdatedBound)),this.updateEnabled=!1;var e=this.buffer.shift();if(null===e)return void this.sourceBuffer.removeEventListener("update",this.sourceBufferUpdatedBound);e.timestamp&&(this.sourceBuffer.timestampOffset=e.timestamp/1e9),this.sourceBuffer.appendBuffer(e)}},e.prototype._sourceBufferUpdated=function(e){this.updateEnabled=!0,this.update()},e.prototype.finish=function(){this.buffer.push(null),this.update()},e}(),i=function(){function e(e){this.bufferWriters=[],this.mediaSource=e,this.mediaSourceOpened=!1,this.mediaSource.addEventListener("sourceopen",function(e){this.mediaSourceOpened=!0,this.bufferWriters.forEach(function(e){e.allowWriting()})}.bind(this)),this.mediaSource.addEventListener("sourceend",function(e){this.mediaSourceOpened=!1}.bind(this))}return e.prototype.listen=function(e){var t=new n(this.mediaSource,e);this.bufferWriters.push(t),this.mediaSourceOpened&&t.allowWriting()},e}();e.exports=i},function(e,t,n){var i,r,o=n(64);r=function(e){o.BasePushSrc.prototype.constructor.call(this);var t=this.req=new XMLHttpRequest;t.open("GET",e,!0),t.responseType="arraybuffer",t.onload=function(e){this.enqueue(new o.Transfer(new Uint8Array(t.response),"binary")),this.enqueue(new o.Transfer(null,"binary"))}.bind(this),t.send()},r.prototype=o.createBasePushSrc({constructor:r}),e.exports=i={Src:r}},function(e,t,n){var i,r,o,s=n(64),a=n(116);n(71);r=function(e,t){s.prototype.constructor.call(this);var n=a.createReadStream(e,t);this.on("end",function(){n.close()}),this.addOutput(n)},r.prototype=s.create({constructor:r}),o=function(e,t){s.prototype.constructor.call(this);var n=a.createWriteStream(e,t);this.on("finish",function(){n.close()}),this.addInput(n)},o.prototype=s.create({constructor:o}),e.exports=i={Src:r,Sink:o}},function(e,t,n){var i=n(112);e.exports=i.haveGlobalWindow()?new(n(117)):n(!function(){var e=new Error('Cannot find module "fs"');throw e.code="MODULE_NOT_FOUND",e}())},function(e,t,n){!function(t){e.exports=t()}(function(){function e(){return!1}function t(e){return!!(e&&!e.isFile&&e.data instanceof Object)}function n(e){return!(!e||!e.isFile)}function i(e,n){var i,r=e.length,o=n;for(i=0;r>i;++i){if(!t(o))throw new Error("ENOENT");o=o.data[e[i]]}return o}String.prototype.trim||!function(){var e=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(e,"")}}();var r={utf8:"utf-8",utf16le:"utf-16le",utf16be:"utf-16be"},o=function(e){var t=Date.now();this.root={mtime:t,ctime:t,atime:t,data:{}},this.fnDone=function(){var t=arguments;"function"==typeof e&&setTimeout(function(){e.apply(null,t)},0)}};return o.prototype.arrayBufferToString=function(e,t){return"undefined"==typeof TextDecoder?String.fromCharCode.apply(null,new Uint16Array(e)):(t=r[t]||"utf8",
new TextDecoder(t).decode(new DataView(e)))},o.prototype.stringToArrayBuffer=function(e,t){var n;if(t=r[t]||"utf8","undefined"==typeof TextEncoder){n=new ArrayBuffer(2*e.length);for(var i=new Uint16Array(n),o=0,s=e.length;s>o;++o)i[o]=e.charCodeAt(o)}else n=new TextEncoder(t).encode(e).buffer;return n},o.prototype.getNode=function(e){return i(this.parsePath(e),this.root)},o.prototype.joinPath=function(){var e=[],t=arguments||[];return e=this.parsePath(Array.prototype.slice.call(t).join("/")),("/"===t[0][0]?"/":"")+e.join("/")},o.prototype.parsePath=function(e){var t=[];return e=e||"/",e.split(/\/+/).forEach(function(e){e=e.trim(),e.length&&"."!==e&&(".."===e?t.pop():t.push(e))}),t},o.prototype.normalizePath=function(e){return"/"+this.parsePath(e).join("/")},o.prototype.dirname=function(e){var t=this.parsePath(e);return t=t.slice(0,t.length-1),"/"+t.join("/")},o.prototype.basename=function(e){var t=this.parsePath(e);return t.length?t.pop():""},o.prototype.fileSizeSI=function(e,t,n,i,r){return(t=Math,n=t.log,i=1e3,r=n(e)/n(i)|0,e/t.pow(i,r)).toFixed(r?2:0)+" "+(r?"kMGTPEZY"[--r]+"B":"Bytes")},o.prototype.fileSizeIEC=function(e,t,n,i,r){return(t=Math,n=t.log,i=1024,r=n(e)/n(i)|0,e/t.pow(i,r)).toFixed(r?2:0)+" "+(r?"KMGTPEZY"[--r]+"iB":"Bytes")},o.prototype.statSync=function(n){var r=this.parsePath(n),o=i(r,this.root),s=t(o);if(!o||!o.data)throw new Error("ENOENT");return this.fnDone("stat",n),{size:s?Object.keys(o.data).length:o.data.byteLength,ctime:new Date(o.ctime),mtime:new Date(o.mtime),atime:new Date(o.atime),isFile:function(){return!s},isDirectory:function(){return s},isBlockDevice:e,isCharacterDevice:e,isSymbolicLink:e,isFIFO:e,isSocket:e}},o.prototype.existsSync=function(e){var n,i=this.parsePath(e),r=i.length,o=this.root;for(n=0;r>n;++n){if(!t(o))return this.fnDone("exists",e),!1;o=o.data[i[n]]}return this.fnDone("exists",e),!!o},o.prototype.mkdirSync=function(e){var n,r=this.parsePath(e),o=i(r.slice(0,r.length-1),this.root),s=Date.now();if(!r.length||!t(o))throw new Error("ENODIR");return n=r[r.length-1],o.data[n]||(o.data[n]={data:{},ctime:s,mtime:s,atime:s},o.mtime=s),this.fnDone("mkdir",e),this},o.prototype.mkdirpSync=function(e){var r,o,s,a=this.parsePath(e),l=a.length;if(!a.length)throw new Error("ENODIR");for(o=0;l>o;++o){if(r=a.slice(0,o+1),s=i(r,this.root),n(s))throw new Error("ENODIR");t(s)||this.mkdirSync(r.join("/"))}return this.fnDone("mkdirp",e),this},o.prototype.readdirSync=function(e){var n=this.parsePath(e),r=i(n,this.root);if(!t(r))throw new Error("ENODIR");return r.atime=Date.now(),this.fnDone("readdir",e),Object.keys(r.data)},o.prototype.rmdirSync=function(e){var n=this.parsePath(e),r=i(n,this.root),o=n.pop(),s=i(n,this.root);if(!t(r))throw new Error("ENODIR");if(Object.keys(r.data).length)throw new Error("ENOTEMPTY");return delete s.data[o],s.mtime=Date.now(),this.fnDone("rmdir",e),this},o.prototype.unlinkSync=function(e){var t=this.dirname(e),n=this.basename(e),r=i(this.parsePath(t),this.root);return delete r.data[n],r.mtime=Date.now(),this.fnDone("unlink",e),this},o.prototype.rmrfSync=function(e){var n=this.parsePath(e),r=n.pop(),o=i(n,this.root);if(!t(o))throw new Error("ENODIR");return r?delete o.data[r]:o.data={},o.mtime=Date.now(),this.fnDone("rmrf",e),this},o.prototype.writeFileSync=function(e,n,r){var o,s,a=this.parsePath(e),l=a.pop(),u=this.existsSync(e),c=i(a,this.root);if(!t(c))throw new Error("ENODIR");if(!l)throw new Error("EINVALIDPATH");return"string"==typeof r&&(r={encoding:r}),r=r||{encoding:null},o="string"==typeof n?this.stringToArrayBuffer(n,r.encoding):n,s=Date.now(),u?(c.data[l].data=o,c.data[l].atime=s,c.data[l].mtime=s):(c.data[l]={data:o,ctime:s,mtime:s,atime:s,isFile:!0},c.mtime=s),c.atime=s,this.fnDone("writeFile",e),this},o.prototype.readFileSync=function(e,t){var r=this.parsePath(e),o=i(r,this.root);if("string"==typeof t&&(t={encoding:t}),t=t||{encoding:null},!n(o))throw new Error("ENOENT");return o.atime=Date.now(),this.fnDone("readFile",e),t.encoding?this.arrayBufferToString(o.data,t.encoding):o.data},o.prototype.renameSync=function(e,n){var r=this.parsePath(e),o=i(r,this.root),s=i(r.slice(0,r.length-1),this.root),a=r[r.length-1],l=this.parsePath(n),u=i(l,this.root),c=i(l.slice(0,l.length-1),this.root),d=l[l.length-1],h=Date.now();if(!r.length||!l.length)throw new Error("ENOENT");if(!t(s||!t(c)))throw new Error("ENODIR");if(u)throw new Error("EEXISTS");return c.data[d]=u=o,u.ctime=h,c.mtime=h,delete s.data[a],s.mtime=h,this.fnDone("rename",{oldPath:e,newPath:n}),this},["exists"].forEach(function(e){o.prototype[e]=function(t,n){return n(this[e+"Sync"](t))}}),["stat","readdir","mkdirp","mkdir","rmdir","rmrf","unlink"].forEach(function(e){o.prototype[e]=function(t,n){var i;try{i=this[e+"Sync"](t)}catch(r){return n(r)}return n(null,i)}}),["readFile"].forEach(function(e){o.prototype[e]=function(t,n,i){var r;i||(i=n,n=void 0);try{r=this[e+"Sync"](t,n)}catch(o){return i(o)}return i(null,r)}}),["rename"].forEach(function(e){o.prototype[e]=function(t,n,i){var r;try{r=this[e+"Sync"](t,n)}catch(o){return i(o)}return i(null,r)}}),["writeFile"].forEach(function(e){o.prototype[e]=function(t,n,i,r){var o;r||(r=i,i=void 0);try{o=this[e+"Sync"](t,n,i)}catch(s){return r(s)}return r(null,o)}}),o})},function(e,t,n){var i,r=n(34),o=n(40),s=n(1),a=o.bindAll;e.exports=i=function(e,t,n){a(this,["_onMSEInit","_onSourceBufferUpdateEnd","_onSourceBufferError"]),this.mimeType=n,this._ready=!1,this._logger=t,this._html5Audio=e,this._objectUrl=null,this._sourceBuffer=null,this._mediaSource=null,this._canAppendInitData=!0,this._whenStableUpdateListeners=[],this._mediaSource=new window.MediaSource,this._mediaSource.addEventListener("sourceopen",this._onMSEInit,!1),this._objectUrl=URL.createObjectURL(this._mediaSource),this._html5Audio.removeAttribute("src"),this._html5Audio.src=this._objectUrl},i.Events={SOURCE_READY:"source-ready",SOURCE_ERROR:"source-error"},s(i.prototype,r),s(i.prototype,{_onMSEInit:function(){this._log("MSE initialised."),this._mediaSource.removeEventListener("sourceopen",this._onMSEInit,!1),this._sourceBuffer=this._mediaSource.addSourceBuffer(this.mimeType),this._sourceBuffer.appendMode="sequence",this._sourceBuffer.addEventListener("updateend",this._onSourceBufferUpdateEnd,!1),this._sourceBuffer.addEventListener("error",this._onSourceBufferError,!1),this._ready=!0,this.trigger(i.Events.SOURCE_READY)},_append:function(e){try{this._sourceBuffer.appendBuffer(e.buffer)}catch(t){this._log("Error while appending to SourceBuffer: "+t.message),this.trigger(i.Events.SOURCE_ERROR,t)}},_onSourceBufferUpdateEnd:function(){if(this._log("Update end."),this._log("Buffered regions: "+JSON.stringify(this.getBuffered())),0!==this._whenStableUpdateListeners.length&&!this._sourceBuffer.updating){var e=this._whenStableUpdateListeners.shift();e()}},_onSourceBufferError:function(){this._log("An error occurred when trying to update the source buffer.")},_log:function(e){this._logger.log("[MSE] "+e)},appendInitData:function(e){if(!this._ready)throw new Error("MediaSource is not ready yet");this._log("Preparing to append init data."),this.whenStable(function(){if(this._log("Appending init data."),!this._canAppendInitData)throw new Error("Cannot append init data at this stage.");this._canAppendInitData=!1,this._append(e)}.bind(this))},append:function(e){if(!this._ready)throw new Error("MediaSource is not ready yet");var t=e.getIndex();this._log("Preparing to append segment "+t),this.whenStable(function(){this._log("Appending segment "+t+". Start: "+e.getStartPosition()+" End: "+e.getEndPosition()),this._canAppendInitData=!1;try{this._sourceBuffer.timestampOffset=e.getStartPosition()/1e3,this._append(e.getData())}catch(n){this._log("Error while appending to SourceBuffer: "+n.message),this.trigger(i.Events.SOURCE_ERROR,n)}}.bind(this))},remove:function(e,t){if(!this._ready)throw new Error("MediaSource is not ready yet");if(e>t)throw new Error("Start cannot be > end.");this._log("Preparing to remove buffer region. Start: "+e+" End: "+t),this.whenStable(function(){this._log("Removing buffered region. Start: "+e+" End: "+t);try{this._sourceBuffer.remove(e/1e3,t/1e3)}catch(n){this._log("Error while appending to SourceBuffer: "+n.message),this.trigger(i.Events.SOURCE_ERROR,n)}}.bind(this))},endOfStream:function(){this._log("Preparing to finalize stream."),this.whenStable(function(){this._log("Finalizing stream");try{this._mediaSource.endOfStream(),this._log("Called endOfStream()")}catch(e){this._log("MediaSource endOfStream() call failed. State: "+this._mediasSource.readyState+" Error: "+e.message),this.trigger(i.Events.SOURCE_ERROR,e)}}.bind(this))},setDuration:function(e){var t=e/1e3;this._mediaSource.duration=t},whenStable:function(e){if(!this._sourceBuffer)throw new Error("MSE not initialised yet.");if("open"!==this._mediaSource.readyState)throw new Error("Media source is not open. State: "+this._mediaSource.readyState);this._sourceBuffer.updating?this._whenStableUpdateListeners.push(e):e()},getBuffered:function(){return this._sourceBuffer?o.timeRangesToFlatMap(this._sourceBuffer.buffered):[]},kill:function(){if(this._ready=!1,this._mediaSource.removeEventListener("sourceopen",this._onMSEInit,!1),this._sourceBuffer){this._sourceBuffer.removeEventListener("updateend",this._onSourceBufferUpdateEnd,!1),this._sourceBuffer.removeEventListener("error",this._onSourceBufferError,!1);try{this._mediaSource.removeSourceBuffer(this._sourceBuffer)}catch(e){this._log("Exception when trying to remove source buffer.")}}this._whenStableUpdateListeners=[],this._html5Audio.src="",this._html5Audio.hasAttribute("src")&&this._html5Audio.removeAttribute("src"),this._objectUrl&&(URL.revokeObjectURL(this._objectUrl),this._objectUrl=null),this._sourceBuffer=null,this._mediaSource=null}})},function(e,t){var n={HTTP:"http",RTMP:"rtmp",HLS:"hls"};e.exports=n},function(e,t,n){function i(e,t,n){r.prototype.constructor.call(this,e,t,n||"HLSMSESingleAudioPlayer"),this._playCalled=!1,this._streamUrlProvider=this._descriptor.streamUrlProvider||this._settings.streamUrlProvider||null;var i;i=null!=this._descriptor.maxBufferLength?this._descriptor.maxBufferLength:null!=this._settings.maxBufferLength?this._settings.maxBufferLength:this._settings.maxBufferTime,this._maxBufferLength=i,this._enableBufferingBeforePlay=!!this._settings.mseEnableBufferingBeforePlay,this._simpleHlsToolkit=new s(this._logger,this._descriptor.src,d,a.MP3,this._streamUrlProvider,!0),this._updateBufferWindow()}var r=n(48),o=n(50),s=n(51),a=n(43),l=n(46),u=n(36),c=n(1),d=l.getMSETargetMimeType();e.exports=i,c(i.prototype,r.prototype),i._capabilities=o._capabilities,i.canPlay=o.canPlay,i.prototype._buildPlayer=function(){var e=c({},this._settings,{mseEnableBufferingBeforePlay:!0}),t=c({},this._descriptor,{maxBufferLength:this._maxBufferLength});return new o(t,e,this._type+"*",this._sharedComponent,this._simpleHlsToolkit)},i.prototype.kill=function(){this.getState()!==u.DEAD&&(r.prototype.kill.call(this),this._simpleHlsToolkit.kill(),this._simpleHlsToolkit=null)},i.prototype.getMaxBufferLength=function(){return this._maxBufferLength},i.prototype.setMaxBufferLength=function(e){this._maxBufferLength!==e&&(this._maxBufferLength=e,this._player?this._player.setMaxBufferLength(e):(this._logger.log("Changing maxBufferLength to "+e+"ms"),this._updateBufferWindow()))},i.prototype.play=function(e){this._playCalled=!0,r.prototype.play.call(this,e)},i.prototype._updateCurrentPositionWhenWentInactive=function(e){r.prototype._updateCurrentPositionWhenWentInactive.call(this,e),this._player||this._updateBufferWindow()},i.prototype._updateBufferWindow=function(){if(this._player)throw new Error("Player is active. SimpleHLSToolkit should be controlled there only.");(this._playCalled||this._enableBufferingBeforePlay)&&this._simpleHlsToolkit.setTimeRange(new s.TimeRange(this._currentPositionWhenWentInactive,this._maxBufferLength))}},function(e,t,n,i,r){function o(e,t){return null==t?e:s(t,a(t),e)}var s=n(i),a=n(r);e.exports=o},function(e,t,n,i,r,o){function s(e){return function(t){return null==t?void 0:t[e]}}function a(e){return null!=e&&u(w(e))}function l(e,t){return e="number"==typeof e||m.test(e)?+e:-1,t=null==t?b:t,e>-1&&e%1==0&&t>e}function u(e){return"number"==typeof e&&e>-1&&e%1==0&&b>=e}function c(e){for(var t=h(e),n=t.length,i=n&&e.length,r=!!i&&u(i)&&(g(e)||f(e)),o=-1,s=[];++o<n;){var a=t[o];(r&&l(a,i)||v.call(e,a))&&s.push(a)}return s}function d(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function h(e){if(null==e)return[];d(e)||(e=Object(e));var t=e.length;t=t&&u(t)&&(g(e)||f(e))&&t||0;for(var n=e.constructor,i=-1,r="function"==typeof n&&n.prototype===e,o=Array(t),s=t>0;++i<t;)o[i]=i+"";for(var a in e)s&&l(a,t)||"constructor"==a&&(r||!v.call(e,a))||o.push(a);return o}var p=n(i),f=n(r),g=n(o),m=/^\d+$/,_=Object.prototype,v=_.hasOwnProperty,y=p(Object,"keys"),b=9007199254740991,w=s("length"),x=y?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&a(e)?c(e):d(e)?y(e):[]}:c;e.exports=x}]))}).call(t,n(1096).Buffer,n(524).setImmediate,n(524).clearImmediate)},527:function(e,t,n){function i(e,t,n){function i(){be&&(L()?(me("Init in single connection mode",ge),pe&&I(),re(),ie()?(me("Attaching to already existing connection",ne()),U()):(me("Becoming connection owner"),Q(),j())):(me("Init in plain mode"),j()))}function s(){if(!be){var e=15e3*Math.random();me("Reconnecting"),be=!0,we=g.setTimeout(function(){i(),J("meta",{connected:be})},e)}}function c(){be&&(me("Disconnecting"),be=!1,g.clearTimeout(we),C(),J("meta",{connected:be}))}function T(){D(),S=null}function P(){C(),i()}function C(){M(!1)}function D(){M(!0)}function M(e){me("Disposing instance: unregistering window events & clearing timeouts"),q(),g.clearTimeout(ve),N()?(me("Closing connection"),_e.dispose(),_e=null,L()&&(me("Clearing single connection lock if it is mine"),Z(),e&&(me("Broadcasting dispose event"),J(b,null)))):re()}function R(){pe&&ke.on(y,function(e){e===f.actions.HEARTBEAT&&I()})}function I(){g.clearTimeout(ve),ve=g.setTimeout(O,pe)}function O(){me("Heartbeat timed out. Will cleanup lock & re-init..."),ee(),P()}function L(){return!xe}function N(){return!!_e}function F(){return N()&&L()}function B(){return!N()&&L()}function U(){h.on(v,function(e){ke.trigger(v,e)}).on(y,function(e){ke.trigger(y,e)}).on(b,function(){window.setTimeout(i,200*Math.random())})}function j(){if(_e)throw new Error("Can't initialize client twice");_e=new l({eventUrl:t,withCredentials:ae,log:me,json:le}),_e.on(_,H).on(v,K).on(m,$),z(),L()&&h.on(w,function(e){V(e)}).on(x,function(e){Y(e)})}function H(e){me("Handling SSE open (first bit of event stream received)"),X(_,_e.getEventSourceReadyState())}function $(e){me.error("Handling SSE error"),X(m,e)}function z(){g.onbeforeunload&&(ye=g.onbeforeunload),g.onbeforeunload=W,ce&&(g.SCBananaBus=ke)}function q(){g.onbeforeunload=ye,ye=null,ce&&delete g.SCBananaBus}function W(){ye&&ye(),T()}function V(t){if("object"!=typeof t)throw new Error("BananaBus: can only publish Object-payload");B()?J(w,t):te()?(me("Sending payload to publish endpoint:",t),r(e,t,de)):(me.warn("Attempting to publish when not parent. Owner is %s. Giving up SSE connection.",ne()),P())}function Y(e){B()?J(x,e):V(G(e))}function G(e){return A(e)?f.createMessage(he):void me("Can not generate payload for unknown event type:",e)}function K(e){if(!te())return me.warn("Received SSE event while not owner. Owner is %s. Giving up SSE connection.",ne()),void P();var t=f.parseAction(e);me("Handling SSE message"),X(v,e),t&&X(y,t)}function X(e,t){ke.trigger(e,t),F()&&J(e,t)}function J(e,t){me.info("broadcasting",e,t),h.broadcast(e,t)}function Q(){p.set(E,ge)}function Z(){te()&&ee()}function ee(){p.remove(E)}function te(){return ne()===ge}function ne(){return p.get(E)}function ie(){return!!ne()}function re(){h.off(w+" "+x+" "+v+" "+y+" "+b)}function oe(){h.on("meta",function(e){e.connected===!0?s():e.connected===!1&&c()})}if(!e||!t)throw new Error("Need a publish & event endpoint URL");var se=a({},k,n),ae=se.withCredentials,le=se.json,ue=se.singleConnection,ce=se.debug,de=se.authorization,he=se.registrationId,pe=se.heartbeatTimeoutMs,fe=se.connected,ge=Math.random().toString(16).substr(2),me=u({enabled:ce,buffer:!0,label:"trinity"}),_e=void 0,ve=void 0,ye=void 0,be=!!fe,we=void 0,xe=!ue||!o(),ke=a({},d,{publish:V,publishEvent:Y,dispose:T,disconnect:c,reconnect:s});return i(),ce&&ke.on(_,me.info.bind(null,"Connection open")).on(y,me.info.bind(null,"Received action")).on(m,me.error.bind(me,"Error")),R(),oe(),ke}function r(e,t,n){return s({url:e,data:JSON.stringify(t),type:"POST",dataType:"text",beforeSend:function(e){n&&e.setRequestHeader("Authorization","OAuth "+n)}})}function o(){try{var e=g.localStorage,t=Date.now();if(e.getItem)return e.setItem(t,t),e.removeItem(t),!0}catch(n){}return!1}n(2298);var s=n(1212),a=n(864),l=n(1215),u=n(528),c=n(924),d=n(25),h=n(1213),p=n(1183),f=n(1214),g=window,m=c.ERROR,_=c.OPEN,v=c.DATA,y=c.ACTION,b=c.DISPOSE,w=c.PUBLISH,x=c.PUBLISH_EVENT,k={withCredentials:!1,json:!1,singleConnection:!0,debug:!1,authorization:null,registrationId:void 0,heartbeatTimeoutMs:null,connected:!0},S=void 0,E="trinity-owner";e.exports={SCMessages:f,Events:c,getInstance:function(e,t,n){return S||(S=i(e,t,n))}};var T=function(e){return Object.keys(e).map(function(t){return e[t]})},A=function(e){return function(t){return e.indexOf(t)>-1}}(T(f.events))},528:function(e,t){"use strict";function n(){function e(e,n){if(p){for(var i=arguments.length,r=Array(i>2?i-2:0),o=2;i>o;o++)r[o-2]=arguments[o];"string"==typeof n?n=" "+n:(r.unshift(n),n="");var s=[t()+" | "+T+(k?"%c":"")+n].concat(A,r);m?E.push({level:e,logArgs:s})>x&&E.shift():h[e].apply(h,s)}}function t(){var e=new Date,t=null===S?0:e-S,n=k?"%c":"";return S=+e,n+i(e)+(n+" ("+n)+r("+"+t+"ms"," ",8)+(n+")")}function n(e){return e.enable=function(){p=!0},e.disable=function(){p=!1},e.bufferOn=function(){m=!0},e.bufferOff=function(){m=!1,E.length=0},e.flush=u()?function(){E.forEach(function(e){var t=e.level,n=e.logArgs;h[t].apply(h,n)}),E.length=0}:function(){},e}var o=c.apply(void 0,arguments),s=o.enabled,p=void 0===s?!0:s,g=o.buffer,m=void 0===g?!1:g,_=o.label,v=void 0===_?"":_,y=o.plainOutput,b=void 0===y?!1:y,w=o.bufferSize,x=void 0===w?1e3:w;if(!u())return n(d.reduce(function(e,t){return e[t]=e},function(){}));h.CL||(h.CL={_cssCounter:0});var k=!b&&l(),S=null,E=[],T=a(v,k),A=k?["color: green","color: grey","color: blue","color: grey",f(v),""]:[],P=h.CL[v]=n(d.reduce(function(t,n){return t[n]=e.bind(null,n),t},e.bind(null,"log")));return P}function i(e){return o(e.getHours())+":"+o(e.getMinutes())+":"+o(e.getSeconds())+"."+r(e.getMilliseconds(),"0",3)}function r(e,t,n){return s(t,n-(""+e).length)+e}function o(e){return r(e,"0",2)}function s(e,t){return t>0?new Array(t+1).join(e):""}function a(e,t){return(t?"%c":"")+(e?e:"")}function l(){if("undefined"==typeof navigator)return!1;var e=navigator.userAgent;return/chrome|firefox|opr/i.test(e)&&!/msie|edge/i.test(e)}function u(){return h&&d.every(function(e){return"function"==typeof h[e]})}function c(){var e=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],t=arguments.length<=1||void 0===arguments[1]?"":arguments[1];return"object"==typeof e&&e||{enabled:e,label:t}}e.exports=n;var d=["log","info","warn","error"],h="undefined"!=typeof console?console:null,p=["color:#fff","border-radius:3px","padding:2px 4px","font-family:sans-serif","text-transform:uppercase","font-size:9px"].join(";")+";",f=function(){var e=["#51613C","#447848","#486E5F","#787444","#6E664E"];return function(t){return t?"background:"+e[h.CL._cssCounter++%e.length]+";"+p:""}}()},529:function(e,t,n){!function(t,i){e.exports=i(n(215),n(339))}(this,function(e,t){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=36)}([function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.prototype.getCode=function(){return"GENERIC"},e}();t.RetrievalError=i},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getCode=function(){return"HLS_MSE_PLAYER.MSE_ERROR"},t}(r.errors.PlayerFatalError);t.MSEError=o},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=function(e){function t(t){var n=e.call(this)||this;return n._statusCode=t,n}return i(t,e),t.prototype.getStatusCode=function(){return this._statusCode},t.prototype.getCode=function(){return"UNACCEPTABLE_RESPONSE_STATUS_CODE"},t}(r.RetrievalError);t.UnacceptableResponseStatusCodeError=o},function(e,n){e.exports=t},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=function(e){function t(t){return e.call(this,"An error occurred trying to append to the buffer.",t)||this}return i(t,e),t.prototype.getCode=function(){return"HLS_MSE_PLAYER.APPEND_ERROR"},t}(r.MSEError);t.AppendError=o},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=function(e){function t(t){return e.call(this,"An error occurred trying to initialize the buffer.",t)||this}return i(t,e),t.prototype.getCode=function(){return"HLS_MSE_PLAYER.INITIALIZE_ERROR"},t}(r.MSEError);t.InitializeError=o},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e){function t(){return e.call(this,"A format could not be determined.")||this}return i(t,e),t.prototype.getCode=function(){return"HLS_MSE_PLAYER.NO_FORMAT_DETERMINED_ERROR"},t}(r.errors.NotSupportedError);t.NoFormatDeterminedError=o},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e){function t(){return e.call(this,"A transmuxer could not be found.")||this}return i(t,e),t.prototype.getCode=function(){return"HLS_MSE_PLAYER.NO_TRANSMUXER_ERROR"},t}(r.errors.NotSupportedError);t.NoTransmuxerError=o},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e){function t(t){var n=e.call(this,"An error occurred when trying to retrieve a segment.",t)||this;return n._internalRetrievalError=t,n}return i(t,e),t.prototype.getCode=function(){return"HLS_MSE_PLAYER.RETRIEVAL_ERROR."+this._internalRetrievalError.getCode()},t}(r.errors.PlayerError);t.RetrievalError=o},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e){function t(){return e.call(this,"The playlist type is not supported.")||this}return i(t,e),t.prototype.getCode=function(){return"HLS_MSE_PLAYER.UNSUPPORTED_PLAYLIST_TYPE_ERROR"},t}(r.errors.PlayerFatalError);t.UnsupportedPlaylistTypeError=o},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getCode=function(){return"NO_DECRYPTOR"},t}(r.RetrievalError);t.NoDecryptorError=o},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=function(e){function t(t){var n=e.call(this)||this;return n._details=t,n}return i(t,e),t.prototype.getDetails=function(){return this._details},t.prototype.getCode=function(){return"PLAYLIST_PARSE"},t}(r.RetrievalError);t.PlaylistParseError=o},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getCode=function(){return"UNSUPPORTED_ENCRYPTION_ERROR"},t}(r.RetrievalError);t.UnsupportedEncryptionError=o},function(e,t,n){"use strict";function i(e){var t=e.reduce(function(e,t){return e+t.length},0),n=new Uint8Array(t),i=0;return e.forEach(function(e){n.set(e,i),i+=e.length}),n}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(19),s=n(20),a=r.helpers.Promise,l={rate:44100,id:3},u=16,c=2,d=l.rate,h=2,p=8;t.MP3ToMP4={getInputFormat:function(){return{mimeType:"audio/mpeg",audioCodec:{id:"mp3"}}},getOutputFormat:function(){return{mimeType:"audio/mp4",audioCodec:{id:"mp3"}}},transmux:function(e){return new a(function(t,n){function r(e){f||(f=!0,n(e))}function a(e){f||t(e)}var f=!1;try{var g=[],m=new o.MP3Parser,_=new s.MP4Mux({audioTrackId:0,videoTrackId:-1,tracks:[{codecId:h,channels:c,samplerate:l.rate,samplesize:u,timescale:d}]});if(_.ondata=function(e){return g.push(e)},m.onFrame=function(e){try{var t=new Uint8Array(e.length+1),n=h<<4;n|=l.id<<2,n|=(16===u?1:0)<<1,n|=2===c?1:0,t[0]=n,t.set(e,1);var i=0;_.pushPacket(p,t,i)}catch(o){r(o)}},m.push(e),m.close(),_.flush(),0===g.length)r(new Error("There was no output."));else{var v=g.shift();v?a({initData:v,data:i(g)}):r(new Error("No init data."))}}catch(y){r(y)}})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(5),o=n(6),s=n(2),a=n(7),l=n(8),u=n(9),c=n(10);!function(e){e.AppendError=r.AppendError,e.InitializeError=o.InitializeError,e.MSEError=s.MSEError,e.NoFormatDeterminedError=a.NoFormatDeterminedError,e.NoTransmuxerError=l.NoTransmuxerError,e.RetrievalError=u.RetrievalError,e.UnsupportedPlaylistTypeError=c.UnsupportedPlaylistTypeError}(i=t.errors||(t.errors={}))},function(e,t,n){"use strict";function i(e){return void 0!==e.mimeType}function r(e,t){void 0===t&&(t={});var n=e.mimeType||t.mimeType,i=e.audioCodec||t.audioCodec,r=e.videoCodec||t.videoCodec,o=k([i,r]),s=o.length>0?'; codecs="'+o.map(function(e){return e.id}).join(",")+'"':"";return n+s}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(4),l=n(35),u=n(14),c=n(28),d=n(32),h=n(30),p=n(29),f=n(10),g=n(5),m=n(6),_=n(9),v=n(8),y=n(7),b=n(1),w=s.helpers.find,x=s.helpers.Promise,k=s.helpers.compact,S=s.helpers.time.now,E=s.helpers.deferred.buildDeferred,T=a.helpers.timeRanges.normalizeTimeRanges,A=s.errors.DependencyError,P=s.errors.PlayerFatalError,C=s.errors.URLUpdateError,D=s.eventDispatcher.EventDispatcher,M=s.logger.prefixLogger,R=s.helpers.abortableJob.abortedError,I=s.helpers.browser.getSafariVersion(),O=3e4,L=1e8,N=400,F=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i._onPlaylistRequestQueued=new D,i._onPlaylistRequestStart=new D,i._onPlaylistRetrieved=new D,i._onPlaylistRequestFailed=new D,i._onKeyRequestQueued=new D,i._onKeyRequestStart=new D,i._onKeyRetrieved=new D,i._onKeyRequestFailed=new D,i._onPlaylistParseStart=new D,i._onPlaylistParseEnd=new D,i._onSegmentRequestQueued=new D,i._onSegmentRequestStart=new D,i._onSegmentRetrieved=new D,i._onSegmentRequestFailed=new D,i._onSegmentTransmuxStart=new D,i._onSegmentTransmuxEnd=new D,i._onSegmentDecryptionStart=new D,i._onSegmentDecryptionEnd=new D,i._onSegmentReady=new D,i._onSegmentAppendQueued=new D,i._onSegmentAppendEnd=new D,i._playlist=null,i._playlistSegmentRetriever=null,i._initialPlaylistRetrieveCompleted=!1,i._mse=null,i._simpleMSE=null,i._retrieveDurationDeferred=E(),i._html5PlayerReady=!1,i._startPositionOffset=0,i._transmuxerAndMSEType=null,i._lastSegmentAppended=null,i._maxBufferLength=null,i._cacheSize=null,i._onFirstSegmentRetrieved=null,i._seekAttemptTimer=null,i._seekMetadataEventHandle=null,i._playlistDuration=null,i._logger=M(i._logger,"HLSMSEPlayer"),i.onPlaylistRequestQueued=i._onPlaylistRequestQueued.getHandle(),i.onPlaylistRequestStart=i._onPlaylistRequestStart.getHandle(),i.onPlaylistRetrieved=i._onPlaylistRetrieved.getHandle(),i.onPlaylistRequestFailed=i._onPlaylistRequestFailed.getHandle(),i.onKeyRequestQueued=i._onKeyRequestQueued.getHandle(),i.onKeyRequestStart=i._onKeyRequestStart.getHandle(),i.onKeyRetrieved=i._onKeyRetrieved.getHandle(),
i.onKeyRequestFailed=i._onKeyRequestFailed.getHandle(),i.onPlaylistParseStart=i._onPlaylistParseStart.getHandle(),i.onPlaylistParseEnd=i._onPlaylistParseEnd.getHandle(),i.onSegmentRequestQueued=i._onSegmentRequestQueued.getHandle(),i.onSegmentRequestStart=i._onSegmentRequestStart.getHandle(),i.onSegmentRetrieved=i._onSegmentRetrieved.getHandle(),i.onSegmentRequestFailed=i._onSegmentRequestFailed.getHandle(),i.onSegmentTransmuxStart=i._onSegmentTransmuxStart.getHandle(),i.onSegmentTransmuxEnd=i._onSegmentTransmuxEnd.getHandle(),i.onSegmentDecryptionStart=i._onSegmentDecryptionStart.getHandle(),i.onSegmentDecryptionEnd=i._onSegmentDecryptionEnd.getHandle(),i.onSegmentReady=i._onSegmentReady.getHandle(),i.onSegmentAppendQueued=i._onSegmentAppendQueued.getHandle(),i.onSegmentAppendEnd=i._onSegmentAppendEnd.getHandle(),i.__descriptor=t,i.__playerDependencies=n,i._url=t.getUrl(),i}return o(t,e),t.prototype.getBufferedTimeRanges=function(){var e=this._playlistSegmentRetriever;return e?T(e.getSegmentsWithData().map(function(e){return e.segment.getTimeRange()})):[]},t.prototype.getMaxBufferLength=function(){return this._maxBufferLength},t.prototype.getBufferController=function(){var e=this;return{setMaxBufferLength:function(t){if(0>t)throw new Error("Max buffer length cannot be < 0.");e._logger.debug("Updating max buffer length.",t),e._maxBufferLength=t,e._playlistSegmentRetriever?e._playlistSegmentRetriever.updateMaxBufferLength(t):e._logger.debug("Cannot update right now. Playlist segment retriever doesn't exist.")}}},t.prototype.getUrlController=function(){var e=this;return{updateUrl:function(t){e._logger.debug("Updating URL.",t),e._url=t;var n=e._playlist;return n?(e._playlistRetrieveJob&&(e._playlistRetrieveJob.abort(),e._playlistRetrieveJob=null,e._logger.debug("Aborted playlist retrieve job.")),e._playlistSegmentRetriever&&(e._playlistSegmentRetriever.switchPlaylist(null),e._logger.debug("Removed current URL.")),e._playlist=null,void e._retrievePlaylist()):void e._logger.debug("Cannot update right now. Playlist doesn't exist yet.")}}},t.prototype.getMemoryCacheMaxSize=function(){return null!==this._cacheSize?this._cacheSize:L},t.prototype.getMemoryCacheUsage=function(){return this._playlistSegmentRetriever?this._playlistSegmentRetriever.getCacheUsage():0},t.prototype.getMemoryCacheController=function(){var e=this;return{setMaxCacheSize:function(t){if(0>t)throw new Error("Max size cannot be < 0.");e._logger.debug("Updating maximum cache size.",t),e._cacheSize=t,e._playlistSegmentRetriever&&e._playlistSegmentRetriever.updateCacheSize(t)}}},t.prototype._canPlay=function(){var t=this;return c.MSE.isSupported()?e.prototype._canPlay.call(this).then(function(e){if(e!==!0)return x.resolve(e);var n=t.__playerDependencies.expectedSegmentFormat;if(!n||!i(n))return t._logger.debug("Format could not be determined."),x.resolve(new y.NoFormatDeterminedError);var o=t._findTransmuxer(n);if(!o)return t._logger.debug("No transmuxer found."),x.resolve(new v.NoTransmuxerError);var s=o.getOutputFormat(),a=n;return t._transmuxerAndMSEType={transmuxer:o,mseType:r(s,a)},x.resolve(!0)}):(this._logger.debug("MSE not supported."),x.resolve(!1))},t.prototype._canPlayProtocol=function(e){return"hls"===e.name},t.prototype._canPlayType=function(e){return"application/x-mpegURL"===e},t.prototype._retrieveDuration=function(){return this._retrieveDurationDeferred.promise},t.prototype._signalReady=function(){this._html5PlayerReady=!0,this._initialPlaylistRetrieveCompleted&&e.prototype._signalReady.call(this)},t.prototype._initialize=function(){var t=this.__playerDependencies;if(null===this._maxBufferLength)if(void 0!==t.maxBufferLength){if(t.maxBufferLength<0)return void this._triggerError(new A("maxBufferLength cannot be < 0."));this._maxBufferLength=t.maxBufferLength}else this._maxBufferLength=O;if(this._logger.debug("Initialized max buffer length.",this._maxBufferLength),null===this._cacheSize)if(void 0!==t.memoryCacheSize){if(t.memoryCacheSize<0)return void this._triggerError(new A("memoryCacheSize cannot be < 0."));this._cacheSize=t.memoryCacheSize}else this._cacheSize=L;this._logger.debug("Initialized cache size.",this._cacheSize),e.prototype._initialize.call(this),this._retrievePlaylist()},t.prototype._initMediaElement=function(t,n){if(this._simpleMSE&&(this._simpleMSE.kill(),this._simpleMSE=null,this._logger.debug("Killed SimpleMSE.")),this._mse&&(this._mse.kill(),this._mse=null,this._logger.debug("Killed MSE.")),null!==this._seekAttemptTimer&&(window.clearTimeout(this._seekAttemptTimer),this._seekAttemptTimer=null,this._logger.debug("Cancelled seek attempt timer.")),null===n)e.prototype._initMediaElement.call(this,t,null);else{this._initMSE();var i=this._mse.getUrl();this._logger.debug("Setting MSE url.",i),e.prototype._initMediaElement.call(this,t,i)}},t.prototype._handleEndedEvent=function(){},t.prototype._shouldBeEnded=function(){if(e.prototype._shouldBeEnded.call(this))return!0;if(!this.getMediaElement())return!1;var t=this._duration;return this._stallDetected&&null!==t&&this._getTruePosition()>=t-N},t.prototype._getTruePosition=function(){var e=this.getMediaElement();if(!e)throw new Error("Media element should exist.");return this._startPositionOffset+this._getMediaElementPosition()},t.prototype._handleSeekChange=function(t){this._playlistSegmentRetriever&&(this._logger.debug("Explicitly updating playlist segment retriever, as seek requested."),this._playlistSegmentRetriever.update()),e.prototype._handleSeekChange.call(this,t)},t.prototype._performSeek=function(t,n){var i=this,r=this,o=r._simpleMSE,s=r._mse,a=this.getMediaElement();if(!o)throw new Error("SimpleMSE should exist.");if(!s)throw new Error("MSE should exist.");if(!a)throw new Error("Media element should exist.");null!==this._seekAttemptTimer&&(window.clearTimeout(this._seekAttemptTimer),this._seekAttemptTimer=null,this._logger.debug("Cancelled previous seek attempt timer.")),this._seekMetadataEventHandle&&(this._seekMetadataEventHandle.remove(),this._seekMetadataEventHandle=null,this._logger.debug("Removed previous loaded metadata event handler.")),o.kill(),s.kill(),this._logger.debug("SimpleMSE and MSE destroyed."),this._startPositionOffset=t;var l=null;this._onFirstSegmentRetrieved=function(e){return l=e},this._logger.debug("Initializing MSE and SimpleMSE for new position."),this._initMSE();var u=this._mse.getUrl();if(this._logger.debug("Updated media element MSE src.",u),e.prototype._initMediaElement.call(this,a,u),this.isPlaying()){this._logger.debug("Calling play() on media element as it was playing previously.");var c=a.play();c&&c["catch"]&&c["catch"](function(e){"AbortError"!==e.name&&(i._logger.error("Unexpected play() error.",e),i._triggerError(new P("Exception from calling play() after seek.",e)))})}var d=function(e){var t=function(){i._startPositionOffset=Math.max(0,i._startPositionOffset-e),i._logger.debug("Updated start position offset.",i._startPositionOffset);var t=function(){i._seekAttemptTimer=null,i._logger.debug("Attempting to seek to the required offset.",e),a.currentTime=e/1e3;var r=1e3*a.currentTime;Math.abs(r-e)<=100?(i._logger.debug("Seeked to the required offset.",r),n()):(i._logger.warn("Seek attempt failed. Trying again shortly.",r),i._seekAttemptTimer=window.setTimeout(t,50))};t()};i._onFirstSegmentRetrieved=null,a.readyState===a.HAVE_METADATA?(i._logger.debug("Media element has metadata. Seeking to offset."),t()):(i._logger.debug("Media element has not loaded metadata. Waiting for metadata..."),i._seekMetadataEventHandle=i._listenToOnce("loadedmetadata",function(){i._seekMetadataEventHandle=null,i._logger.debug("Got metadata. Seeking to offset."),t()},{earlyAttach:!0}))};null!==l?(this._logger.debug("First segment already retrieved. Preparing to seek to initial offset."),d(l)):(this._logger.debug("Waiting for first segment to be retrieved."),this._onFirstSegmentRetrieved=function(e){i._logger.debug("First segment retrieved. Preparing to seek to initial offset."),d(e)})},t.prototype._kill=function(){this._simpleMSE&&(this._logger.debug("Killing SimpleMSE."),this._simpleMSE.kill()),this._mse&&(this._logger.debug("Killing MSE."),this._mse.kill()),this._playlistRetrieveJob&&(this._logger.debug("Aborting playlist retrieve job."),this._playlistRetrieveJob.abort()),this._playlistSegmentRetriever&&(this._logger.debug("Killing playlist segment retriever."),this._playlistSegmentRetriever.kill()),e.prototype._kill.call(this)},t.prototype._initMSE=function(){var e=this;if(!this._transmuxerAndMSEType)throw new Error("Transmuxer should have been configured.");this._lastSegmentAppended=null;var t=!1;I&&I.major<10&&this._transmuxerAndMSEType.transmuxer===u.MP3ToMP4&&(t=!0);var n=new c.MSE(this._transmuxerAndMSEType.mseType,this._logger,t),i=new d.SimpleMSE(n,function(){return e.getSegmentDataToAppendNext()},function(){return e._getMediaElementPosition()},function(t){e._triggerError(new g.AppendError(t))},this._logger);i.onAppendQueued.subscribe(this._onSegmentAppendQueued.dispatch),i.onAppendEnd.subscribe(this._onSegmentAppendEnd.dispatch),this._simpleMSE=i,i.start(),this._mse=n,n.whenInitialized()["catch"](function(t){t!==c.killedError&&(e._logger.error("Error during mse initialization.",t),e._triggerError(new m.InitializeError(t)))})},t.prototype._getMediaElementPosition=function(){var e=this.getMediaElement();if(!e)throw new Error("No media element.");return 1e3*e.currentTime},t.prototype._whenPlaylistRetrieved=function(){var t=this,n=this._playlist;if(!n)throw new Error("Playlist should have been retrieved.");var i=!this._initialPlaylistRetrieveCompleted;if(i)this._initialPlaylistRetrieveCompleted=!0,this._playlistDuration=n.getTotalDuration(),this._retrieveDurationDeferred.resolve(this._playlistDuration);else{var r=n.getTotalDuration();if(this._playlistDuration!==r)return this._logger.error("The duration from the new URL did not match the previous one."),void this._triggerError(new C("The duration from the new URL did not match the previous one.",{oldDuration:this._playlistDuration,newDuration:r}))}if(!this._transmuxerAndMSEType)throw new Error("Transmuxer should have been configured.");if(this._playlistSegmentRetriever)this._logger.debug("Switching playlist for playlist segment retriever."),this._playlistSegmentRetriever.switchPlaylist(n);else{var o=this._maxBufferLength;if(null===o)throw new Error("maxBufferLength should have been initiaized by now.");this._logger.debug("Creating playlist segment retriever.");var s=this._cacheSize;if(null===s)throw new Error("cacheSize should be set.");var a=new p.PlaylistSegmentRetriever({playlist:n,getPosition:function(){return t.getPosition()},maxBufferLength:o,cacheSize:s,transmuxer:this._transmuxerAndMSEType.transmuxer,logger:this._logger});a.onSegmentRequestQueued.subscribe(this._onSegmentRequestQueued.dispatch),a.onSegmentRequestStart.subscribe(this._onSegmentRequestStart.dispatch),a.onSegmentRetrieved.subscribe(this._onSegmentRetrieved.dispatch),a.onSegmentRequestFailed.subscribe(this._onSegmentRequestFailed.dispatch),a.onSegmentDecryptionStart.subscribe(this._onSegmentDecryptionStart.dispatch),a.onSegmentDecryptionEnd.subscribe(this._onSegmentDecryptionEnd.dispatch),a.onSegmentTransmuxStart.subscribe(this._onSegmentTransmuxStart.dispatch),a.onSegmentTransmuxEnd.subscribe(this._onSegmentTransmuxEnd.dispatch),this._playlistSegmentRetriever=a,a.onError.subscribe(function(e){t._logger.error("Error from playlist segment retriever.",e),e instanceof b.RetrievalError?t._triggerError(new _.RetrievalError(e)):t._triggerError(new P("Unexpected error when trying to retrieve segment.",e))}),a.onSegmentReady.subscribe(function(e){var n=e.eventRepresentation,i=S();t._logger.debug("Segment ready.",n),function(){var e=t._simpleMSE;if(e&&e.waitingForSegmentData()){var i=t.getSegmentDataToAppendNext();i&&(t._logger.debug("Providing segment to SimpleMSE.",n),e.provideNextSegmentData(i))}}(),t._onSegmentReady.dispatch({segment:n},{time:i})})}this._initialPlaylistRetrieveCompleted=!0,i&&this._html5PlayerReady&&e.prototype._signalReady.call(this)},t.prototype._retrievePlaylist=function(){var e=this;if(this._playlist)throw new Error("Playlist already exists.");var t=this.__playerDependencies,n=t.playlistLoader,i=t.segmentLoader,r=t.keyLoader,o=t.expectedSegmentFormat,s=t.isPlaylistResponseCodeAcceptable,a=t.isPlaylistResponseCodeRetryable,l=t.isSegmentResponseCodeAcceptable,u=t.isSegmentResponseCodeRetryable,c=t.isKeyResponseCodeAcceptable,d=t.isKeyResponseCodeRetryable;this._logger.debug("Creating playlist.",this._url);var p=new h.Playlist({url:this._url,segmentFormat:o,playlistLoader:n,segmentLoader:i,keyLoader:r,isPlaylistResponseCodeAcceptable:s,isPlaylistResponseCodeRetryable:a,isSegmentResponseCodeAcceptable:l,isSegmentResponseCodeRetryable:u,isKeyResponseCodeAcceptable:c,isKeyResponseCodeRetryable:d,logger:this._logger});p.onPlaylistRequestQueued.subscribe(this._onPlaylistRequestQueued.dispatch),p.onPlaylistRequestStart.subscribe(this._onPlaylistRequestStart.dispatch),p.onPlaylistRetrieved.subscribe(this._onPlaylistRetrieved.dispatch),p.onPlaylistRequestFailed.subscribe(this._onPlaylistRequestFailed.dispatch),p.onKeyRequestQueued.subscribe(this._onKeyRequestQueued.dispatch),p.onKeyRequestStart.subscribe(this._onKeyRequestStart.dispatch),p.onKeyRetrieved.subscribe(this._onKeyRetrieved.dispatch),p.onKeyRequestFailed.subscribe(this._onKeyRequestFailed.dispatch),p.onPlaylistParseStart.subscribe(this._onPlaylistParseStart.dispatch),p.onPlaylistParseEnd.subscribe(this._onPlaylistParseEnd.dispatch),this._playlist=p,this._playlistRetrieveJob=this._playlist.retrieve(),this._playlistRetrieveJob.onCompletion(function(){var t=e._playlist.getType();t!==h.PlaylistType.VOD?(e._logger.error("Unsupported playlist type.",t),e._triggerError(new f.UnsupportedPlaylistTypeError)):(e._logger.debug("Playlist retrieved."),e._whenPlaylistRetrieved())}),this._playlistRetrieveJob.onError(function(t){t!==R&&(e._logger.error("Error when retrieving playlist.",t),t instanceof b.RetrievalError?e._triggerError(new _.RetrievalError(t)):e._triggerError(new P("Unexpected error when retrieving playlist.",t)))})},t.prototype._findTransmuxer=function(e){var t=l.TransmuxerFactory.retrieveTransmuxers(e);this._logger.info("Finding a transmuxer...");var n=w(t,function(t){return c.MSE.isSupported(r(t.getOutputFormat(),e))})||null;return n?this._logger.info("Transmuxer found."):this._logger.warn("No transmuxer found."),n},t.prototype.getSegmentDataToAppendNext=function(){this._logger.debug("Looking for segment to append next.");var e=this._playlistSegmentRetriever;if(!e)return this._logger.debug("No segment retriever."),null;var t=this._lastSegmentAppended;if(t){var n=e.getSegmentsWithData(),i=n[n.map(function(e){return e.segment}).indexOf(t)+1];return i?(this._logger.debug("Found segment.",i.eventRepresentation),this._lastSegmentAppended=i.segment,{data:i.data,eventRepresentation:i.eventRepresentation}):(this._logger.debug("No segment found."),null)}var r=this.getPosition(),i=w(e.getSegmentsWithData(),function(e){return e.segment.getTimeRange().containsTime(r)});if(!i)return this._logger.debug("No segment found."),null;var o=r-i.segment.getTimeRange().start,s=this.getMediaElement();if(!s)throw new Error("Media element should exist.");this._logger.debug("Found initial segment.",i.eventRepresentation),this._lastSegmentAppended=i.segment,this._onFirstSegmentRetrieved&&this._onFirstSegmentRetrieved(o);var a=i.data,l=i.initData,u=a;return l&&(this._logger.debug("Prepending init data."),u=new Uint8Array(l.length+a.length),u.set(l,0),u.set(a,l.length)),{data:u,eventRepresentation:i.eventRepresentation}},t}(a.HTML5Player);t.HLSMSEPlayer=F},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(11),o=n(12),s=n(1),a=n(3),l=n(13);!function(e){e.NoDecryptorError=r.NoDecryptorError,e.PlaylistParseError=o.PlaylistParseError,e.RetrievalError=s.RetrievalError,e.UnacceptableResponseStatusCodeError=a.UnacceptableResponseStatusCodeError,e.UnsupportedEncryptionError=l.UnsupportedEncryptionError}(i=t.retrievalErrors||(t.retrievalErrors={}))},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.AESDecryptor=function(){function e(){i(this,e),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[],this.subMix[0]=new Uint32Array(256),this.subMix[1]=new Uint32Array(256),this.subMix[2]=new Uint32Array(256),this.subMix[3]=new Uint32Array(256),this.invSubMix=[],this.invSubMix[0]=new Uint32Array(256),this.invSubMix[1]=new Uint32Array(256),this.invSubMix[2]=new Uint32Array(256),this.invSubMix[3]=new Uint32Array(256),this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return r(e,[{key:"uint8ArrayToUint32Array_",value:function(e){for(var t=new DataView(e),n=new Uint32Array(4),i=0;i<n.length;i++)n[i]=t.getUint32(4*i);return n}},{key:"initTable",value:function(){var e=this.sBox,t=this.invSBox,n=this.subMix[0],i=this.subMix[1],r=this.subMix[2],o=this.subMix[3],s=this.invSubMix[0],a=this.invSubMix[1],l=this.invSubMix[2],u=this.invSubMix[3],c=new Uint32Array(256),d=0,h=0,p=0;for(p=0;256>p;p++)128>p?c[p]=p<<1:c[p]=p<<1^283;for(p=0;256>p;p++){var f=h^h<<1^h<<2^h<<3^h<<4;f=f>>>8^255&f^99,e[d]=f,t[f]=d;var g=c[d],m=c[g],_=c[m],v=257*c[f]^16843008*f;n[d]=v<<24|v>>>8,i[d]=v<<16|v>>>16,r[d]=v<<8|v>>>24,o[d]=v,v=16843009*_^65537*m^257*g^16843008*d,s[f]=v<<24|v>>>8,a[f]=v<<16|v>>>16,l[f]=v<<8|v>>>24,u[f]=v,d?(d=g^c[c[c[_^g]]],h^=c[c[h]]):d=h=1}}},{key:"expandKey",value:function(e){for(var t=this.uint8ArrayToUint32Array_(e),n=!0,i=0;i<t.length&&n;)n=t[i]===this.key[i],i++;if(!n){this.key=t;var r=this.keySize=t.length;if(4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);var o=this.ksRows=4*(r+6+1),s=void 0,a=void 0,l=this.keySchedule=new Uint32Array(this.ksRows),u=this.invKeySchedule=new Uint32Array(this.ksRows),c=this.sBox,d=this.rcon,h=this.invSubMix[0],p=this.invSubMix[1],f=this.invSubMix[2],g=this.invSubMix[3],m=void 0,_=void 0;for(s=0;o>s;s++)r>s?m=l[s]=t[s]:(_=m,s%r===0?(_=_<<8|_>>>24,_=c[_>>>24]<<24|c[_>>>16&255]<<16|c[_>>>8&255]<<8|c[255&_],_^=d[s/r|0]<<24):r>6&&s%r===4&&(_=c[_>>>24]<<24|c[_>>>16&255]<<16|c[_>>>8&255]<<8|c[255&_]),l[s]=m=(l[s-r]^_)>>>0);for(a=0;o>a;a++)s=o-a,_=3&a?l[s]:l[s-4],4>a||4>=s?u[a]=_:u[a]=h[c[_>>>24]]^p[c[_>>>16&255]]^f[c[_>>>8&255]]^g[c[255&_]],u[a]=u[a]>>>0}}},{key:"networkToHostOrderSwap",value:function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}},{key:"decrypt",value:function(e,t,n){for(var i,r,o=this.keySize+6,s=this.invKeySchedule,a=this.invSBox,l=this.invSubMix[0],u=this.invSubMix[1],c=this.invSubMix[2],d=this.invSubMix[3],h=this.uint8ArrayToUint32Array_(n),p=h[0],f=h[1],g=h[2],m=h[3],_=new Int32Array(e),v=new Int32Array(_.length),y=void 0,b=void 0,w=void 0,x=void 0,k=void 0,S=void 0,E=void 0,T=void 0,A=void 0,P=void 0,C=void 0,D=void 0;t<_.length;){for(A=this.networkToHostOrderSwap(_[t]),P=this.networkToHostOrderSwap(_[t+1]),C=this.networkToHostOrderSwap(_[t+2]),D=this.networkToHostOrderSwap(_[t+3]),k=A^s[0],S=D^s[1],E=C^s[2],T=P^s[3],i=4,r=1;o>r;r++)y=l[k>>>24]^u[S>>16&255]^c[E>>8&255]^d[255&T]^s[i],b=l[S>>>24]^u[E>>16&255]^c[T>>8&255]^d[255&k]^s[i+1],w=l[E>>>24]^u[T>>16&255]^c[k>>8&255]^d[255&S]^s[i+2],x=l[T>>>24]^u[k>>16&255]^c[S>>8&255]^d[255&E]^s[i+3],k=y,S=b,E=w,T=x,i+=4;y=a[k>>>24]<<24^a[S>>16&255]<<16^a[E>>8&255]<<8^a[255&T]^s[i],b=a[S>>>24]<<24^a[E>>16&255]<<16^a[T>>8&255]<<8^a[255&k]^s[i+1],w=a[E>>>24]<<24^a[T>>16&255]<<16^a[k>>8&255]<<8^a[255&S]^s[i+2],x=a[T>>>24]<<24^a[k>>16&255]<<16^a[S>>8&255]<<8^a[255&E]^s[i+3],i+=3,v[t]=this.networkToHostOrderSwap(y^p),v[t+1]=this.networkToHostOrderSwap(x^f),v[t+2]=this.networkToHostOrderSwap(w^g),v[t+3]=this.networkToHostOrderSwap(b^m),p=A,f=P,g=C,m=D,t+=4}return v.buffer}},{key:"destroy",value:function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0}}]),e}()},function(e,t,n){"use strict";function i(){this.buffer=null,this.bufferSize=0}t.__esModule=!0,t.MP3Parser=i;var r=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],o=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3];i.prototype.push=function(e){var t;if(this.bufferSize>0){var n=e.length+this.bufferSize;if(!this.buffer||this.buffer.length<n){var i=new Uint8Array(n);this.bufferSize>0&&i.set(this.buffer.subarray(0,this.bufferSize)),this.buffer=i}this.buffer.set(e,this.bufferSize),this.bufferSize=n,e=this.buffer,t=n}else t=e.length;for(var r,o=0;t>o&&(r=this._parse(e,o,t))>0;)o+=r;var s=t-o;s>0&&(!this.buffer||this.buffer.length<s?this.buffer=new Uint8Array(e.subarray(o,t)):this.buffer.set(e.subarray(o,t))),this.bufferSize=s},i.prototype._parse=function(e,t,n){if(t+2>n)return-1;if(255===e[t]||224===(224&e[t+1])){if(t+24>n)return-1;var i=e[t+1]>>3&3,s=e[t+1]>>1&3,a=e[t+2]>>4&15,l=e[t+2]>>2&3,u=!!(2&e[t+2]);if(1!==i&&0!==a&&15!==a&&3!==l){var c=3===i?3-s:3===s?3:4,d=1e3*r[14*c+a-1],h=3===i?0:2===i?1:2,p=o[3*h+l],f=u?1:0,g=3===s?(3===i?12:6)*d/p+f<<2:(3===i?144:72)*d/p+f|0;return t+g>n?-1:(this.onFrame&&this.onFrame(e.subarray(t,t+g)),g)}}for(var m=t+2;n>m;){if(255===e[m-1]&&224===(224&e[m]))return this.onNoise&&this.onNoise(e.subarray(t,m-1)),m-t-1;m++}return-1},i.prototype.close=function(){this.bufferSize>0&&this.onNoise&&this.onNoise(this.buffer.subarray(0,this.bufferSize)),this.buffer=null,this.bufferSize=0,this.onClose&&this.onClose()}},function(e,t,n){"use strict";t.__esModule=!0;var i,r,o=function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};!function(e){var t;!function(e){function t(e){for(var t=new Uint8Array(4*e.length),n=0,i=0,r=e.length;r>i;i++){var o=e.charCodeAt(i);if(127>=o)t[n++]=o;else{if(o>=55296&&56319>=o){var s=e.charCodeAt(i+1);s>=56320&&57343>=s&&(o=((1023&o)<<10)+(1023&s)+65536,++i)}0!==(4292870144&o)?(t[n++]=248|o>>>24&3,t[n++]=128|o>>>18&63,t[n++]=128|o>>>12&63,t[n++]=128|o>>>6&63,t[n++]=128|63&o):0!==(4294901760&o)?(t[n++]=240|o>>>18&7,t[n++]=128|o>>>12&63,t[n++]=128|o>>>6&63,t[n++]=128|63&o):0!==(4294965248&o)?(t[n++]=224|o>>>12&15,t[n++]=128|o>>>6&63,t[n++]=128|63&o):(t[n++]=192|o>>>6&31,t[n++]=128|63&o)}}return t.subarray(0,n)}function n(e){for(var t=0,n="";t<e.length;){var i=255&e[t++];if(127>=i)n+=String.fromCharCode(i);else{var r=192,o=5;do{var s=r>>1|128;if((i&s)===r)break;r=r>>1|128,--o}while(o>=0);if(0>=o)throw new Error("Invalid UTF8 character");for(var a=i&(1<<o)-1,l=5;l>=o;--l){var u=e[t++];if(128!==(192&u))throw new Error("Invalid UTF8 character sequence");a=a<<6|63&u}n+=a>=65536?String.fromCharCode(a-65536>>10&1023|55296,1023&a|56320):String.fromCharCode(a)}}return n}e.utf8decode=t,e.utf8encode=n}(t=e.StringUtilities||(e.StringUtilities={}))}(r||(r={})),function(e){var t;!function(e){function t(e){for(var t=e.length>>1,n=new Uint8Array(t),i=0;t>i;i++)n[i]=parseInt(e.substr(2*i,2),16);return n}function n(e){var t,n=0,i=s.RAW,r=e[n],o=r>>4,d=r>>2&3,h=2&r?16:8,p=1&r?2:1;switch(n++,o){case c:var f=e[n++];i=f,t=1024;break;case u:var g=e[n+1]>>3&3,m=e[n+1]>>1&3;t=1===m?3===g?1152:576:3===m?384:1152}return{codecDescription:l[o],codecId:o,data:e.subarray(n),rate:a[d],size:h,channels:p,samples:t,packetType:i}}function i(e){var t=0,n=e[t]>>4,i=15&e[t];t++;var r={frameType:n,codecId:i,codecDescription:h[i]};switch(i){case f:var o=e[t++];r.packetType=o,r.compositionTime=(e[t]<<24|e[t+1]<<16|e[t+2]<<8)>>8,t+=3;break;case p:r.packetType=g.NALU,r.horizontalOffset=e[t]>>4&15,r.verticalOffset=15&e[t],r.compositionTime=0,t++}return r.data=e.subarray(t),r}function r(e){var t,n,i=[],r=-1,o=-1,s=+e.asGetPublicProperty("duration"),a=e.asGetPublicProperty("audiocodecid");switch(a){case u:case"mp3":t="mp3",n=u;break;case c:case"mp4a":t="mp4a",n=c;break;default:if(!isNaN(a))throw new Error("Unsupported audio codec: "+a);t=null,n=-1}var l,d,h=e.asGetPublicProperty("videocodecid");switch(h){case p:case"vp6f":l="vp6f",d=p;break;case f:case"avc1":l="avc1",d=f;break;default:if(!isNaN(h))throw new Error("Unsupported video codec: "+h);l=null,d=-1}var g=null===t?null:{codecDescription:t,codecId:n,language:"und",timescale:+e.asGetPublicProperty("audiosamplerate")||44100,samplerate:+e.asGetPublicProperty("audiosamplerate")||44100,channels:+e.asGetPublicProperty("audiochannels")||2,samplesize:16},m=null===l?null:{codecDescription:l,codecId:d,language:"und",timescale:6e4,framerate:+e.asGetPublicProperty("videoframerate")||+e.asGetPublicProperty("framerate"),width:+e.asGetPublicProperty("width"),height:+e.asGetPublicProperty("height")},_=e.asGetPublicProperty("trackinfo");if(_)for(var v=0;v<_.length;v++){var y=_[v],b=y.asGetPublicProperty("sampledescription")[0];b.asGetPublicProperty("sampletype")===a?(g.language=y.asGetPublicProperty("language"),g.timescale=+y.asGetPublicProperty("timescale")):b.asGetPublicProperty("sampletype")===h&&(m.language=y.asGetPublicProperty("language"),m.timescale=+y.asGetPublicProperty("timescale"))}return m&&(o=i.length,i.push(m)),g&&(r=i.length,i.push(g)),{tracks:i,duration:s,audioTrackId:r,videoTrackId:o}}function o(e){var t=[];return e.audioTrackId>=0&&t.push({tracks:[e.tracks[e.audioTrackId]],duration:e.duration,audioTrackId:0,videoTrackId:-1}),e.videoTrackId>=0&&t.push({tracks:[e.tracks[e.videoTrackId]],duration:e.duration,audioTrackId:-1,videoTrackId:0}),t}var s,a=[5500,11025,22050,44100],l=["PCM","ADPCM","MP3","PCM le","Nellymouser16","Nellymouser8","Nellymouser","G.711 A-law","G.711 mu-law",null,"AAC","Speex","MP3 8khz"],u=2,c=10;!function(e){e[e.HEADER=0]="HEADER",e[e.RAW=1]="RAW"}(s||(s={}));var d,h=[null,"JPEG","Sorenson","Screen","VP6","VP6 alpha","Screen2","AVC"],p=4,f=7;!function(e){e[e.KEY=1]="KEY",e[e.INNER=2]="INNER",e[e.DISPOSABLE=3]="DISPOSABLE",e[e.GENERATED=4]="GENERATED",e[e.INFO=5]="INFO"}(d||(d={}));var g;!function(e){e[e.HEADER=0]="HEADER",e[e.NALU=1]="NALU",e[e.END=2]="END"}(g||(g={}));var m,_=8,v=9,y=50,b=!0;!function(e){e[e.CAN_GENERATE_HEADER=0]="CAN_GENERATE_HEADER",e[e.NEED_HEADER_DATA=1]="NEED_HEADER_DATA",e[e.MAIN_PACKETS=2]="MAIN_PACKETS"}(m||(m={}));var w=function(){function r(e){var t=this;this.oncodecinfo=function(e){},this.ondata=function(e){throw new Error("MP4Mux.ondata is not set")},this.metadata=e,this.trackStates=this.metadata.tracks.map(function(e,n){var i={trackId:n+1,trackInfo:e,cachedDuration:0,samplesProcessed:0,initializationData:[]};return t.metadata.audioTrackId===n&&(t.audioTrackState=i),t.metadata.videoTrackId===n&&(t.videoTrackState=i),i},this),this._checkIfNeedHeaderData(),this.filePos=0,this.cachedPackets=[],this.chunkIndex=0}return r.prototype.pushPacket=function(e,t,r){switch(this.state===m.CAN_GENERATE_HEADER&&this._tryGenerateHeader(),e){case _:var o=this.audioTrackState,a=n(t);if(!o||o.trackInfo.codecId!==a.codecId)throw new Error("Unexpected audio packet codec: "+a.codecDescription);switch(a.codecId){default:throw new Error("Unsupported audio codec: "+a.codecDescription);case u:break;case c:if(a.packetType===s.HEADER)return void o.initializationData.push(a.data)}this.cachedPackets.push({packet:a,timestamp:r,trackId:o.trackId});break;case v:var l=this.videoTrackState,d=i(t);if(!l||l.trackInfo.codecId!==d.codecId)throw new Error("Unexpected video packet codec: "+d.codecDescription);switch(d.codecId){default:throw new Error("unsupported video codec: "+d.codecDescription);case p:break;case f:if(d.packetType===g.HEADER)return void l.initializationData.push(d.data)}this.cachedPackets.push({packet:d,timestamp:r,trackId:l.trackId});break;default:throw new Error("unknown packet type: "+e)}this.state===m.NEED_HEADER_DATA&&this._tryGenerateHeader(),this.cachedPackets.length>=y&&this.state===m.MAIN_PACKETS&&this._chunk()},r.prototype.flush=function(){this.cachedPackets.length>0&&this._chunk()},r.prototype._checkIfNeedHeaderData=function(){this.trackStates.some(function(e){return e.trackInfo.codecId===c||e.trackInfo.codecId===f})?this.state=m.NEED_HEADER_DATA:this.state=m.CAN_GENERATE_HEADER},r.prototype._tryGenerateHeader=function(){var n=this.trackStates.every(function(e){switch(e.trackInfo.codecId){case c:case f:return e.initializationData.length>0;default:return!0}});if(n){for(var i=["isom"],r=1,o=1,s=[],a=0;a<this.trackStates.length;a++){var l,d=this.trackStates[a],h=d.trackInfo;switch(h.codecId){case c:var g=d.initializationData[0];l=new e.Iso.AudioSampleEntry("mp4a",r,h.channels,h.samplesize,h.samplerate);var _=new Uint8Array(41+g.length);_.set(t("0000000003808080"),0),_[8]=32+g.length,_.set(t("00020004808080"),9),_[16]=18+g.length,_.set(t("40150000000000FA000000000005808080"),17),_[34]=g.length,_.set(g,35),_.set(t("068080800102"),35+g.length),l.otherBoxes=[new e.Iso.RawTag("esds",_)];var v=g[0]>>3;d.mimeTypeCodec="mp4a.40."+v;break;case u:l=new e.Iso.AudioSampleEntry(".mp3",r,h.channels,h.samplesize,h.samplerate),d.mimeTypeCodec="mp3";break;case f:var y=d.initializationData[0];l=new e.Iso.VideoSampleEntry("avc1",o,h.width,h.height),l.otherBoxes=[new e.Iso.RawTag("avcC",y)];var b=y[1]<<16|y[2]<<8|y[3];d.mimeTypeCodec="avc1."+(16777216|b).toString(16).substr(1),i.push("iso2","avc1","mp41");break;case p:l=new e.Iso.VideoSampleEntry("VP6F",o,h.width,h.height),l.otherBoxes=[new e.Iso.RawTag("glbl",t("00"))],d.mimeTypeCodec="avc1.42001E";break;default:throw new Error("not supported track type")}var w,x=e.Iso.TrackHeaderFlags.TRACK_ENABLED|e.Iso.TrackHeaderFlags.TRACK_IN_MOVIE;d===this.audioTrackState?w=new e.Iso.TrackBox(new e.Iso.TrackHeaderBox(x,d.trackId,-1,0,0,1,a),new e.Iso.MediaBox(new e.Iso.MediaHeaderBox(h.timescale,-1,h.language),new e.Iso.HandlerBox("soun","SoundHandler"),new e.Iso.MediaInformationBox(new e.Iso.SoundMediaHeaderBox,new e.Iso.DataInformationBox(new e.Iso.DataReferenceBox([new e.Iso.DataEntryUrlBox(e.Iso.SELF_CONTAINED_DATA_REFERENCE_FLAG)])),new e.Iso.SampleTableBox(new e.Iso.SampleDescriptionBox([l]),new e.Iso.RawTag("stts",t("0000000000000000")),new e.Iso.RawTag("stsc",t("0000000000000000")),new e.Iso.RawTag("stsz",t("000000000000000000000000")),new e.Iso.RawTag("stco",t("0000000000000000")))))):d===this.videoTrackState&&(w=new e.Iso.TrackBox(new e.Iso.TrackHeaderBox(x,d.trackId,-1,h.width,h.height,0,a),new e.Iso.MediaBox(new e.Iso.MediaHeaderBox(h.timescale,-1,h.language),new e.Iso.HandlerBox("vide","VideoHandler"),new e.Iso.MediaInformationBox(new e.Iso.VideoMediaHeaderBox,new e.Iso.DataInformationBox(new e.Iso.DataReferenceBox([new e.Iso.DataEntryUrlBox(e.Iso.SELF_CONTAINED_DATA_REFERENCE_FLAG)])),new e.Iso.SampleTableBox(new e.Iso.SampleDescriptionBox([l]),new e.Iso.RawTag("stts",t("0000000000000000")),new e.Iso.RawTag("stsc",t("0000000000000000")),new e.Iso.RawTag("stsz",t("000000000000000000000000")),new e.Iso.RawTag("stco",t("0000000000000000"))))))),s.push(w)}var k=new e.Iso.MovieExtendsBox(null,[new e.Iso.TrackExtendsBox(1,1,0,0,0),new e.Iso.TrackExtendsBox(2,1,0,0,0)],null),S=new e.Iso.BoxContainerBox("udat",[new e.Iso.MetaBox(new e.Iso.RawTag("hdlr",t("00000000000000006D6469726170706C000000000000000000")),[new e.Iso.RawTag("ilst",t("00000025A9746F6F0000001D6461746100000001000000004C61766635342E36332E313034"))])]),E=new e.Iso.MovieHeaderBox(1e3,0,this.trackStates.length+1),T=new e.Iso.MovieBox(E,s,k,S),A=new e.Iso.FileTypeBox("isom",512,i),P=A.layout(0),C=T.layout(P),D=new Uint8Array(P+C);A.write(D),T.write(D),this.oncodecinfo(this.trackStates.map(function(e){return e.mimeTypeCodec})),this.ondata(D),this.filePos+=D.length,this.state=m.MAIN_PACKETS;
}},r.prototype._chunk=function(){var t=this.cachedPackets;if(b&&this.videoTrackState){for(var n=t.length-1,i=this.videoTrackState.trackId;n>0&&(t[n].trackId!==i||t[n].packet.frameType!==d.KEY);)n--;n>0&&(t=t.slice(0,n))}if(0!==t.length){for(var r=[],o=0,s=[],a=[],l=0;l<this.trackStates.length;l++){var h=this.trackStates[l],g=h.trackInfo,m=h.trackId,_=t.filter(function(e){return e.trackId===m});if(0!==_.length){var v,y,w,x=new e.Iso.TrackFragmentBaseMediaDecodeTimeBox(h.cachedDuration);switch(a.push(o),g.codecId){case c:case u:w=[];for(var n=0;n<_.length;n++){var k=_[n].packet,S=Math.round(k.samples*g.timescale/g.samplerate);r.push(k.data),o+=k.data.length,w.push({duration:S,size:k.data.length}),h.samplesProcessed+=k.samples}var E=e.Iso.TrackFragmentFlags.DEFAULT_SAMPLE_FLAGS_PRESENT;v=new e.Iso.TrackFragmentHeaderBox(E,m,0,0,0,0,e.Iso.SampleFlags.SAMPLE_DEPENDS_ON_NO_OTHERS);var T=e.Iso.TrackRunFlags.DATA_OFFSET_PRESENT|e.Iso.TrackRunFlags.SAMPLE_DURATION_PRESENT|e.Iso.TrackRunFlags.SAMPLE_SIZE_PRESENT;y=new e.Iso.TrackRunBox(T,w,0,0),h.cachedDuration=Math.round(h.samplesProcessed*g.timescale/g.samplerate);break;case f:case p:w=[];for(var A=h.samplesProcessed,P=A*g.timescale/g.framerate,C=Math.round(P),n=0;n<_.length;n++){var D=_[n].packet;A++;var M=Math.round(A*g.timescale/g.framerate),R=M-C;C=M;var I=Math.round(A*g.timescale/g.framerate+D.compositionTime*g.timescale/1e3);r.push(D.data),o+=D.data.length;var O=D.frameType===d.KEY?e.Iso.SampleFlags.SAMPLE_DEPENDS_ON_NO_OTHERS:e.Iso.SampleFlags.SAMPLE_DEPENDS_ON_OTHER|e.Iso.SampleFlags.SAMPLE_IS_NOT_SYNC;w.push({duration:R,size:D.data.length,flags:O,compositionTimeOffset:I-M})}var E=e.Iso.TrackFragmentFlags.DEFAULT_SAMPLE_FLAGS_PRESENT;v=new e.Iso.TrackFragmentHeaderBox(E,m,0,0,0,0,e.Iso.SampleFlags.SAMPLE_DEPENDS_ON_NO_OTHERS);var T=e.Iso.TrackRunFlags.DATA_OFFSET_PRESENT|e.Iso.TrackRunFlags.SAMPLE_DURATION_PRESENT|e.Iso.TrackRunFlags.SAMPLE_SIZE_PRESENT|e.Iso.TrackRunFlags.SAMPLE_FLAGS_PRESENT|e.Iso.TrackRunFlags.SAMPLE_COMPOSITION_TIME_OFFSET;y=new e.Iso.TrackRunBox(T,w,0,0),h.cachedDuration=C,h.samplesProcessed=A;break;default:throw new Error("Un codec")}var L=new e.Iso.TrackFragmentBox(v,x,y);s.push(L)}}this.cachedPackets.splice(0,t.length);for(var N=new e.Iso.MovieFragmentHeaderBox(++this.chunkIndex),F=new e.Iso.MovieFragmentBox(N,s),B=F.layout(0),U=new e.Iso.MediaDataBox(r),j=U.layout(B),H=B+8,l=0;l<s.length;l++)s[l].run.dataOffset=H+a[l];var $=new Uint8Array(B+j);F.write($),U.write($),this.ondata($),this.filePos+=$.length}},r}();e.MP4Mux=w,e.parseFLVMetadata=r,e.splitMetadata=o}(t=e.MP4||(e.MP4={}))}(i||(i={})),function(e){var t;!function(e){var t;!function(e){function t(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return Array.prototype.concat.apply(e,t)}function n(e,t,n){e[t]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function i(e){return e.charCodeAt(0)<<24|e.charCodeAt(1)<<16|e.charCodeAt(2)<<8|e.charCodeAt(3)}function s(e){return(e-h)/1e3|0}function a(e){return 65536*e|0}function l(e){return 1073741824*e|0}function u(e){return 256*e|0}function c(e){return(31&e.charCodeAt(0))<<10|(31&e.charCodeAt(1))<<5|31&e.charCodeAt(2)}var d=r.StringUtilities.utf8decode,h=-20828448e5,p=[1,0,0,0,1,0,0,0,1],f=[0,0,0],g=function(){function e(e,t){this.boxtype=e,"uuid"===e&&(this.userType=t)}return e.prototype.layout=function(e){this.offset=e;var t=8;return this.userType&&(t+=16),this.size=t,t},e.prototype.write=function(e){return n(e,this.offset,this.size),n(e,this.offset+4,i(this.boxtype)),this.userType?(e.set(this.userType,this.offset+8),24):8},e.prototype.toUint8Array=function(){var e=this.layout(0),t=new Uint8Array(e);return this.write(t),t},e}();e.Box=g;var m=function(e){function t(t,n,i){void 0===n&&(n=0),void 0===i&&(i=0);var r=e.call(this,t)||this;return r.version=n,r.flags=i,r}return o(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+4,this.size},t.prototype.write=function(t){var i=e.prototype.write.call(this,t);return n(t,this.offset+i,this.version<<24|this.flags),i+4},t}(g);e.FullBox=m;var _=function(e){function t(t,n,i){var r=e.call(this,"ftype")||this;return r.majorBrand=t,r.minorVersion=n,r.compatibleBrands=i,r}return o(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+4*(2+this.compatibleBrands.length),this.size},t.prototype.write=function(t){var r=this,o=e.prototype.write.call(this,t);return n(t,this.offset+o,i(this.majorBrand)),n(t,this.offset+o+4,this.minorVersion),o+=8,this.compatibleBrands.forEach(function(e){n(t,r.offset+o,i(e)),o+=4},this),o},t}(g);e.FileTypeBox=_;var v=function(e){function t(t,n){var i=e.call(this,t)||this;return i.children=n,i}return o(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t);return this.children.forEach(function(e){e&&(n+=e.layout(t+n))}),this.size=n},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return this.children.forEach(function(e){e&&(n+=e.write(t))}),n},t}(g);e.BoxContainerBox=v;var y=function(e){function n(n,i,r,o){var s=e.call(this,"moov",t([n],i,[r,o]))||this;return s.header=n,s.tracks=i,s.extendsBox=r,s.userData=o,s}return o(n,e),n}(v);e.MovieBox=y;var b=function(e){function t(t,n,i,r,o,s,a,l){void 0===r&&(r=1),void 0===o&&(o=1),void 0===s&&(s=p),void 0===a&&(a=h),void 0===l&&(l=h);var u=e.call(this,"mvhd",0,0)||this;return u.timescale=t,u.duration=n,u.nextTrackId=i,u.rate=r,u.volume=o,u.matrix=s,u.creationTime=a,u.modificationTime=l,u}return o(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+16+4+2+2+8+36+24+4,this.size},t.prototype.write=function(t){var i=e.prototype.write.call(this,t);return n(t,this.offset+i,s(this.creationTime)),n(t,this.offset+i+4,s(this.modificationTime)),n(t,this.offset+i+8,this.timescale),n(t,this.offset+i+12,this.duration),i+=16,n(t,this.offset+i,a(this.rate)),n(t,this.offset+i+4,u(this.volume)<<16),n(t,this.offset+i+8,0),n(t,this.offset+i+12,0),i+=16,n(t,this.offset+i,a(this.matrix[0])),n(t,this.offset+i+4,a(this.matrix[1])),n(t,this.offset+i+8,a(this.matrix[2])),n(t,this.offset+i+12,a(this.matrix[3])),n(t,this.offset+i+16,a(this.matrix[4])),n(t,this.offset+i+20,a(this.matrix[5])),n(t,this.offset+i+24,l(this.matrix[6])),n(t,this.offset+i+28,l(this.matrix[7])),n(t,this.offset+i+32,l(this.matrix[8])),i+=36,n(t,this.offset+i,0),n(t,this.offset+i+4,0),n(t,this.offset+i+8,0),n(t,this.offset+i+12,0),n(t,this.offset+i+16,0),n(t,this.offset+i+20,0),i+=24,n(t,this.offset+i,this.nextTrackId),i+=4},t}(m);e.MovieHeaderBox=b;var w;!function(e){e[e.TRACK_ENABLED=1]="TRACK_ENABLED",e[e.TRACK_IN_MOVIE=2]="TRACK_IN_MOVIE",e[e.TRACK_IN_PREVIEW=4]="TRACK_IN_PREVIEW"}(w=e.TrackHeaderFlags||(e.TrackHeaderFlags={}));var x=function(e){function t(t,n,i,r,o,s,a,l,u,c,d){void 0===a&&(a=0),void 0===l&&(l=0),void 0===u&&(u=p),void 0===c&&(c=h),void 0===d&&(d=h);var f=e.call(this,"tkhd",0,t)||this;return f.trackId=n,f.duration=i,f.width=r,f.height=o,f.volume=s,f.alternateGroup=a,f.layer=l,f.matrix=u,f.creationTime=c,f.modificationTime=d,f}return o(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+20+8+6+2+36+8,this.size},t.prototype.write=function(t){var i=e.prototype.write.call(this,t);return n(t,this.offset+i,s(this.creationTime)),n(t,this.offset+i+4,s(this.modificationTime)),n(t,this.offset+i+8,this.trackId),n(t,this.offset+i+12,0),n(t,this.offset+i+16,this.duration),i+=20,n(t,this.offset+i,0),n(t,this.offset+i+4,0),n(t,this.offset+i+8,this.layer<<16|this.alternateGroup),n(t,this.offset+i+12,u(this.volume)<<16),i+=16,n(t,this.offset+i,a(this.matrix[0])),n(t,this.offset+i+4,a(this.matrix[1])),n(t,this.offset+i+8,a(this.matrix[2])),n(t,this.offset+i+12,a(this.matrix[3])),n(t,this.offset+i+16,a(this.matrix[4])),n(t,this.offset+i+20,a(this.matrix[5])),n(t,this.offset+i+24,l(this.matrix[6])),n(t,this.offset+i+28,l(this.matrix[7])),n(t,this.offset+i+32,l(this.matrix[8])),i+=36,n(t,this.offset+i,a(this.width)),n(t,this.offset+i+4,a(this.height)),i+=8},t}(m);e.TrackHeaderBox=x;var k=function(e){function t(t,n,i,r,o){void 0===i&&(i="unk"),void 0===r&&(r=h),void 0===o&&(o=h);var s=e.call(this,"mdhd",0,0)||this;return s.timescale=t,s.duration=n,s.language=i,s.creationTime=r,s.modificationTime=o,s}return o(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+16+4,this.size},t.prototype.write=function(t){var i=e.prototype.write.call(this,t);return n(t,this.offset+i,s(this.creationTime)),n(t,this.offset+i+4,s(this.modificationTime)),n(t,this.offset+i+8,this.timescale),n(t,this.offset+i+12,this.duration),n(t,this.offset+i+16,c(this.language)<<16),i+20},t}(m);e.MediaHeaderBox=k;var S=function(e){function t(t,n){var i=e.call(this,"hdlr",0,0)||this;return i.handlerType=t,i.name=n,i._encodedName=d(i.name),i}return o(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+8+12+(this._encodedName.length+1),this.size},t.prototype.write=function(t){var r=e.prototype.write.call(this,t);return n(t,this.offset+r,0),n(t,this.offset+r+4,i(this.handlerType)),n(t,this.offset+r+8,0),n(t,this.offset+r+12,0),n(t,this.offset+r+16,0),r+=20,t.set(this._encodedName,this.offset+r),t[this.offset+r+this._encodedName.length]=0,r+=this._encodedName.length+1},t}(m);e.HandlerBox=S;var E=function(e){function t(t){void 0===t&&(t=0);var n=e.call(this,"smhd",0,0)||this;return n.balance=t,n}return o(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+4,this.size},t.prototype.write=function(t){var i=e.prototype.write.call(this,t);return n(t,this.offset+i,u(this.balance)<<16),i+4},t}(m);e.SoundMediaHeaderBox=E;var T=function(e){function t(t,n){void 0===t&&(t=0),void 0===n&&(n=f);var i=e.call(this,"vmhd",0,0)||this;return i.graphicsMode=t,i.opColor=n,i}return o(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+8,this.size},t.prototype.write=function(t){var i=e.prototype.write.call(this,t);return n(t,this.offset+i,this.graphicsMode<<16|this.opColor[0]),n(t,this.offset+i+4,this.opColor[1]<<16|this.opColor[2]),i+8},t}(m);e.VideoMediaHeaderBox=T,e.SELF_CONTAINED_DATA_REFERENCE_FLAG=1;var A=function(t){function n(n,i){void 0===i&&(i=null);var r=t.call(this,"url ",0,n)||this;return r.location=i,n&e.SELF_CONTAINED_DATA_REFERENCE_FLAG||(r._encodedLocation=d(i)),r}return o(n,t),n.prototype.layout=function(e){var n=t.prototype.layout.call(this,e);return this._encodedLocation&&(n+=this._encodedLocation.length+1),this.size=n},n.prototype.write=function(e){var n=t.prototype.write.call(this,e);return this._encodedLocation&&(e.set(this._encodedLocation,this.offset+n),e[this.offset+n+this._encodedLocation.length]=0,n+=this._encodedLocation.length),n},n}(m);e.DataEntryUrlBox=A;var P=function(e){function t(t){var n=e.call(this,"dref",0,0)||this;return n.entries=t,n}return o(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t)+4;return this.entries.forEach(function(e){n+=e.layout(t+n)}),this.size=n},t.prototype.write=function(t){var i=e.prototype.write.call(this,t);return n(t,this.offset+i,this.entries.length),this.entries.forEach(function(e){i+=e.write(t)}),i},t}(m);e.DataReferenceBox=P;var C=function(e){function t(t){var n=e.call(this,"dinf",[t])||this;return n.dataReference=t,n}return o(t,e),t}(v);e.DataInformationBox=C;var D=function(e){function t(t){var n=e.call(this,"stsd",0,0)||this;return n.entries=t,n}return o(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t);return n+=4,this.entries.forEach(function(e){n+=e.layout(t+n)}),this.size=n},t.prototype.write=function(t){var i=e.prototype.write.call(this,t);return n(t,this.offset+i,this.entries.length),i+=4,this.entries.forEach(function(e){i+=e.write(t)}),i},t}(m);e.SampleDescriptionBox=D;var M=function(e){function t(t,n,i,r,o){var s=e.call(this,"stbl",[t,n,i,r,o])||this;return s.sampleDescriptions=t,s.timeToSample=n,s.sampleToChunk=i,s.sampleSizes=r,s.chunkOffset=o,s}return o(t,e),t}(v);e.SampleTableBox=M;var R=function(e){function t(t,n,i){var r=e.call(this,"minf",[t,n,i])||this;return r.header=t,r.info=n,r.sampleTable=i,r}return o(t,e),t}(v);e.MediaInformationBox=R;var I=function(e){function t(t,n,i){var r=e.call(this,"mdia",[t,n,i])||this;return r.header=t,r.handler=n,r.info=i,r}return o(t,e),t}(v);e.MediaBox=I;var O=function(e){function t(t,n){var i=e.call(this,"trak",[t,n])||this;return i.header=t,i.media=n,i}return o(t,e),t}(v);e.TrackBox=O;var L=function(e){function t(t,n,i,r,o){var s=e.call(this,"trex",0,0)||this;return s.trackId=t,s.defaultSampleDescriptionIndex=n,s.defaultSampleDuration=i,s.defaultSampleSize=r,s.defaultSampleFlags=o,s}return o(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+20,this.size},t.prototype.write=function(t){var i=e.prototype.write.call(this,t);return n(t,this.offset+i,this.trackId),n(t,this.offset+i+4,this.defaultSampleDescriptionIndex),n(t,this.offset+i+8,this.defaultSampleDuration),n(t,this.offset+i+12,this.defaultSampleSize),n(t,this.offset+i+16,this.defaultSampleFlags),i+20},t}(m);e.TrackExtendsBox=L;var N=function(e){function n(n,i,r){var o=e.call(this,"mvex",t([n],i,[r]))||this;return o.header=n,o.tracDefaults=i,o.levels=r,o}return o(n,e),n}(v);e.MovieExtendsBox=N;var F=function(e){function t(t,n){var i=e.call(this,"meta",0,0)||this;return i.handler=t,i.otherBoxes=n,i}return o(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t);return n+=this.handler.layout(t+n),this.otherBoxes.forEach(function(e){n+=e.layout(t+n)}),this.size=n},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return n+=this.handler.write(t),this.otherBoxes.forEach(function(e){n+=e.write(t)}),n},t}(m);e.MetaBox=F;var B=function(e){function t(t){var n=e.call(this,"mfhd",0,0)||this;return n.sequenceNumber=t,n}return o(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+4,this.size},t.prototype.write=function(t){var i=e.prototype.write.call(this,t);return n(t,this.offset+i,this.sequenceNumber),i+4},t}(m);e.MovieFragmentHeaderBox=B;var U;!function(e){e[e.BASE_DATA_OFFSET_PRESENT=1]="BASE_DATA_OFFSET_PRESENT",e[e.SAMPLE_DESCRIPTION_INDEX_PRESENT=2]="SAMPLE_DESCRIPTION_INDEX_PRESENT",e[e.DEFAULT_SAMPLE_DURATION_PRESENT=8]="DEFAULT_SAMPLE_DURATION_PRESENT",e[e.DEFAULT_SAMPLE_SIZE_PRESENT=16]="DEFAULT_SAMPLE_SIZE_PRESENT",e[e.DEFAULT_SAMPLE_FLAGS_PRESENT=32]="DEFAULT_SAMPLE_FLAGS_PRESENT"}(U=e.TrackFragmentFlags||(e.TrackFragmentFlags={}));var j=function(e){function t(t,n,i,r,o,s,a){var l=e.call(this,"tfhd",0,t)||this;return l.trackId=n,l.baseDataOffset=i,l.sampleDescriptionIndex=r,l.defaultSampleDuration=o,l.defaultSampleSize=s,l.defaultSampleFlags=a,l}return o(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t)+4,i=this.flags;return i&U.BASE_DATA_OFFSET_PRESENT&&(n+=8),i&U.SAMPLE_DESCRIPTION_INDEX_PRESENT&&(n+=4),i&U.DEFAULT_SAMPLE_DURATION_PRESENT&&(n+=4),i&U.DEFAULT_SAMPLE_SIZE_PRESENT&&(n+=4),i&U.DEFAULT_SAMPLE_FLAGS_PRESENT&&(n+=4),this.size=n},t.prototype.write=function(t){var i=e.prototype.write.call(this,t),r=this.flags;return n(t,this.offset+i,this.trackId),i+=4,r&U.BASE_DATA_OFFSET_PRESENT&&(n(t,this.offset+i,0),n(t,this.offset+i+4,this.baseDataOffset),i+=8),r&U.SAMPLE_DESCRIPTION_INDEX_PRESENT&&(n(t,this.offset+i,this.sampleDescriptionIndex),i+=4),r&U.DEFAULT_SAMPLE_DURATION_PRESENT&&(n(t,this.offset+i,this.defaultSampleDuration),i+=4),r&U.DEFAULT_SAMPLE_SIZE_PRESENT&&(n(t,this.offset+i,this.defaultSampleSize),i+=4),r&U.DEFAULT_SAMPLE_FLAGS_PRESENT&&(n(t,this.offset+i,this.defaultSampleFlags),i+=4),i},t}(m);e.TrackFragmentHeaderBox=j;var H=function(e){function t(t){var n=e.call(this,"tfdt",0,0)||this;return n.baseMediaDecodeTime=t,n}return o(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+4,this.size},t.prototype.write=function(t){var i=e.prototype.write.call(this,t);return n(t,this.offset+i,this.baseMediaDecodeTime),i+4},t}(m);e.TrackFragmentBaseMediaDecodeTimeBox=H;var $=function(e){function t(t,n,i){var r=e.call(this,"traf",[t,n,i])||this;return r.header=t,r.decodeTime=n,r.run=i,r}return o(t,e),t}(v);e.TrackFragmentBox=$;var z;!function(e){e[e.IS_LEADING_MASK=201326592]="IS_LEADING_MASK",e[e.SAMPLE_DEPENDS_ON_MASK=50331648]="SAMPLE_DEPENDS_ON_MASK",e[e.SAMPLE_DEPENDS_ON_OTHER=16777216]="SAMPLE_DEPENDS_ON_OTHER",e[e.SAMPLE_DEPENDS_ON_NO_OTHERS=33554432]="SAMPLE_DEPENDS_ON_NO_OTHERS",e[e.SAMPLE_IS_DEPENDED_ON_MASK=12582912]="SAMPLE_IS_DEPENDED_ON_MASK",e[e.SAMPLE_HAS_REDUNDANCY_MASK=3145728]="SAMPLE_HAS_REDUNDANCY_MASK",e[e.SAMPLE_PADDING_VALUE_MASK=917504]="SAMPLE_PADDING_VALUE_MASK",e[e.SAMPLE_IS_NOT_SYNC=65536]="SAMPLE_IS_NOT_SYNC",e[e.SAMPLE_DEGRADATION_PRIORITY_MASK=65535]="SAMPLE_DEGRADATION_PRIORITY_MASK"}(z=e.SampleFlags||(e.SampleFlags={}));var q;!function(e){e[e.DATA_OFFSET_PRESENT=1]="DATA_OFFSET_PRESENT",e[e.FIRST_SAMPLE_FLAGS_PRESENT=4]="FIRST_SAMPLE_FLAGS_PRESENT",e[e.SAMPLE_DURATION_PRESENT=256]="SAMPLE_DURATION_PRESENT",e[e.SAMPLE_SIZE_PRESENT=512]="SAMPLE_SIZE_PRESENT",e[e.SAMPLE_FLAGS_PRESENT=1024]="SAMPLE_FLAGS_PRESENT",e[e.SAMPLE_COMPOSITION_TIME_OFFSET=2048]="SAMPLE_COMPOSITION_TIME_OFFSET"}(q=e.TrackRunFlags||(e.TrackRunFlags={}));var W=function(e){function t(t,n,i,r){var o=e.call(this,"trun",1,t)||this;return o.samples=n,o.dataOffset=i,o.firstSampleFlags=r,o}return o(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t)+4,i=this.samples.length,r=this.flags;return r&q.DATA_OFFSET_PRESENT&&(n+=4),r&q.FIRST_SAMPLE_FLAGS_PRESENT&&(n+=4),r&q.SAMPLE_DURATION_PRESENT&&(n+=4*i),r&q.SAMPLE_SIZE_PRESENT&&(n+=4*i),r&q.SAMPLE_FLAGS_PRESENT&&(n+=4*i),r&q.SAMPLE_COMPOSITION_TIME_OFFSET&&(n+=4*i),this.size=n},t.prototype.write=function(t){var i=e.prototype.write.call(this,t),r=this.samples.length,o=this.flags;n(t,this.offset+i,r),i+=4,o&q.DATA_OFFSET_PRESENT&&(n(t,this.offset+i,this.dataOffset),i+=4),o&q.FIRST_SAMPLE_FLAGS_PRESENT&&(n(t,this.offset+i,this.firstSampleFlags),i+=4);for(var s=0;r>s;s++){var a=this.samples[s];o&q.SAMPLE_DURATION_PRESENT&&(n(t,this.offset+i,a.duration),i+=4),o&q.SAMPLE_SIZE_PRESENT&&(n(t,this.offset+i,a.size),i+=4),o&q.SAMPLE_FLAGS_PRESENT&&(n(t,this.offset+i,a.flags),i+=4),o&q.SAMPLE_COMPOSITION_TIME_OFFSET&&(n(t,this.offset+i,a.compositionTimeOffset),i+=4)}return i},t}(m);e.TrackRunBox=W;var V=function(e){function n(n,i){var r=e.call(this,"moof",t([n],i))||this;return r.header=n,r.trafs=i,r}return o(n,e),n}(v);e.MovieFragmentBox=V;var Y=function(e){function t(t){var n=e.call(this,"mdat")||this;return n.chunks=t,n}return o(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t);return this.chunks.forEach(function(e){n+=e.length}),this.size=n},t.prototype.write=function(t){var n=this,i=e.prototype.write.call(this,t);return this.chunks.forEach(function(e){t.set(e,n.offset+i),i+=e.length},this),i},t}(g);e.MediaDataBox=Y;var G=function(e){function t(t,n){var i=e.call(this,t)||this;return i.dataReferenceIndex=n,i}return o(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+8,this.size},t.prototype.write=function(t){var i=e.prototype.write.call(this,t);return n(t,this.offset+i,0),n(t,this.offset+i+4,this.dataReferenceIndex),i+8},t}(g);e.SampleEntry=G;var K=function(e){function t(t,n,i,r,o,s){void 0===i&&(i=2),void 0===r&&(r=16),void 0===o&&(o=44100),void 0===s&&(s=null);var a=e.call(this,t,n)||this;return a.channelCount=i,a.sampleSize=r,a.sampleRate=o,a.otherBoxes=s,a}return o(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t)+20;return this.otherBoxes&&this.otherBoxes.forEach(function(e){n+=e.layout(t+n)}),this.size=n},t.prototype.write=function(t){var i=e.prototype.write.call(this,t);return n(t,this.offset+i,0),n(t,this.offset+i+4,0),n(t,this.offset+i+8,this.channelCount<<16|this.sampleSize),n(t,this.offset+i+12,0),n(t,this.offset+i+16,this.sampleRate<<16),i+=20,this.otherBoxes&&this.otherBoxes.forEach(function(e){i+=e.write(t)}),i},t}(G);e.AudioSampleEntry=K,e.COLOR_NO_ALPHA_VIDEO_SAMPLE_DEPTH=24;var X=function(t){function i(n,i,r,o,s,a,l,u,c,d){void 0===s&&(s=""),void 0===a&&(a=72),void 0===l&&(l=72),void 0===u&&(u=1),void 0===c&&(c=e.COLOR_NO_ALPHA_VIDEO_SAMPLE_DEPTH),void 0===d&&(d=null);var h=t.call(this,n,i)||this;if(h.width=r,h.height=o,h.compressorName=s,h.horizResolution=a,h.vertResolution=l,h.frameCount=u,h.depth=c,h.otherBoxes=d,s.length>31)throw new Error("invalid compressor name");return h}return o(i,t),i.prototype.layout=function(e){var n=t.prototype.layout.call(this,e)+16+12+4+2+32+2+2;return this.otherBoxes&&this.otherBoxes.forEach(function(t){n+=t.layout(e+n)}),this.size=n},i.prototype.write=function(e){var i=t.prototype.write.call(this,e);n(e,this.offset+i,0),n(e,this.offset+i+4,0),n(e,this.offset+i+8,0),n(e,this.offset+i+12,0),i+=16,n(e,this.offset+i,this.width<<16|this.height),n(e,this.offset+i+4,a(this.horizResolution)),n(e,this.offset+i+8,a(this.vertResolution)),i+=12,n(e,this.offset+i,0),n(e,this.offset+i+4,this.frameCount<<16),i+=6,e[this.offset+i]=this.compressorName.length;for(var r=0;31>r;r++)e[this.offset+i+r+1]=r<this.compressorName.length?127&this.compressorName.charCodeAt(r):0;return i+=32,n(e,this.offset+i,this.depth<<16|65535),i+=4,this.otherBoxes&&this.otherBoxes.forEach(function(t){i+=t.write(e)}),i},i}(G);e.VideoSampleEntry=X;var J=function(e){function t(t,n){var i=e.call(this,t)||this;return i.data=n,i}return o(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+this.data.length,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return t.set(this.data,this.offset+n),n+this.data.length},t}(g);e.RawTag=J}(t=e.Iso||(e.Iso={}))}(t=e.MP4||(e.MP4={}))}(i||(i={}));t.MP4Mux=i.MP4.MP4Mux},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(24),r=n(23),o=[i.WebCrypto,r.JSCrypto];t["default"]=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(21),o=i.helpers.find;t.DecryptorFactory={retrieveDecryptor:function(e){return o(r["default"],function(t){return t.canDecrypt(e)})||null}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(18),o=i.helpers.Promise,s=null;t.JSCrypto={canDecrypt:function(e){return"AES-CBC"===e.cipher},decrypt:function(e,t){return s||(s=new r.AESDecryptor),s.expandKey(t.key.buffer),o.resolve(new Uint8Array(s.decrypt(e.buffer,0,t.iv.buffer)))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=i.helpers.Promise,o=window.crypto&&window.crypto.subtle;t.WebCrypto={canDecrypt:function(e){return!!o&&window.isSecureContext&&"AES-CBC"===e.cipher},decrypt:function(e,t){return new r(function(n,i){function r(e){return o.importKey("raw",e,{name:"AES-CBC"},!1,["decrypt"])}r(t.key).then(function(n){return o.decrypt({name:"AES-CBC",iv:t.iv},n,e)}).then(function(e){return n(new Uint8Array(e))})["catch"](i)})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){this._playlist=e,this._url=t}return e.prototype.getPlaylist=function(){return this._playlist},e.prototype.getUrl=function(){return this._url},e}();t.Key=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this._url=e}return e.prototype.getUrl=function(){return this._url},e}();t.Playlist=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,n){this._playlist=e,this._url=t,this._sequenceNumber=n}return e.prototype.getPlaylist=function(){return this._playlist},e.prototype.getUrl=function(){return this._url},e.prototype.getSequenceNumber=function(){return this._sequenceNumber},e}();t.Segment=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(4),o=i.helpers.deferred.buildDeferred,s=r.helpers.timeRanges.buildTimeRanges,a=i.helpers.Promise,l=r.helpers.timeRanges.getCoverage,u=i.logger.prefixLogger,c=i.logger.noOpLogger,d=/(MSIE )|(Trident\/)/,h=i.helpers.browser.isSafari(),p='audio/mp4; codecs="mp3"',f=i.helpers.browser.getSafariVersion();t.killedError=new Error("MSE killed.");var g=function(){function e(e,t,n){var i=this.constructor;if(void 0===t&&(t=c),void 0===n&&(n=!1),this._sourceBuffer=null,this._initialized=!1,this._initializeDeferred=o(),this._whenIdleDeferred=o(),this._error=null,this._dead=!1,this._pendingActions=[],this._currentAction=null,this._bufferEnd=0,this._logger=u(t,"MSE"),this._onMediaSourceInit=this._onMediaSourceInit.bind(this),this._onMediaSourceError=this._onMediaSourceError.bind(this),this._onSourceBufferUpdateEnd=this._onSourceBufferUpdateEnd.bind(this),this._onSourceBufferError=this._onSourceBufferError.bind(this),!i.isSupported(e))throw this._logger.error("Not supported."),new Error("Not supported.");h&&e===p&&(e="audio/mp4"),this._type=e,this._useSegmentsMode=n,this._mediaSource=new MediaSource,this._mediaSource.addEventListener("sourceopen",this._onMediaSourceInit,!1),this._mediaSource.addEventListener("error",this._onMediaSourceError,!1),this._url=URL.createObjectURL(this._mediaSource),this._logger.debug("Created URL.",this._url)}return e.isSupported=function(e){return d.test(window.navigator.userAgent)?!1:"MediaSource"in window?e?h&&e===p?!0:f&&f.major<10&&"audio/mpeg"===e?!1:MediaSource.isTypeSupported(e):!0:!1},e.prototype.whenInitialized=function(){return this._initializeDeferred.promise},e.prototype.whenIdle=function(){return this._whenIdleDeferred?this._whenIdleDeferred.promise:a.resolve(void 0)},e.prototype.isIdle=function(){return this._dead||!this._whenIdleDeferred},e.prototype.hasInitialized=function(){return this._initialized},e.prototype.getError=function(){return this._error},e.prototype.getUrl=function(){return this._ensureNotDead(),this._url},e.prototype.getBuffered=function(){return this._ensureNotDead(),this._sourceBuffer?s(this._sourceBuffer.buffered):[]},e.prototype.append=function(e){this._ensureNotDead(),this._ensureInitialized(),this._logger.debug("append() called.");var t=o();return this._pendingActions.push({type:"append",data:e,deferred:t}),this._performNextAction(),t.promise},e.prototype.remove=function(e){if(0===e.duration)throw new Error("Remove range must have a duration > 0.");this._ensureNotDead(),this._ensureInitialized(),this._logger.debug("remove() called.",e);var t=o();return this._pendingActions.push({type:"remove",range:e,deferred:t}),this._performNextAction(),t.promise},e.prototype.kill=function(){if(!this._dead){if(this._logger.debug("kill() called."),this._dead=!0,this._sourceBuffer){this._sourceBuffer.removeEventListener("updateend",this._onSourceBufferUpdateEnd,!1),this._sourceBuffer.removeEventListener("error",this._onSourceBufferError,!1);try{this._mediaSource.removeSourceBuffer(this._sourceBuffer)}catch(e){this._logger.error("Error from removeSourceBuffer()",e)}}this._mediaSource.removeEventListener("sourceopen",this._onMediaSourceInit,!1),this._mediaSource.removeEventListener("error",this._onMediaSourceError,!1),URL.revokeObjectURL(this._url);var n=this._currentAction?[this._currentAction]:[];n=n.concat(this._pendingActions),n.forEach(function(e){e.deferred.reject(t.killedError)}),this._whenIdleDeferred||(this._whenIdleDeferred=o()),this._whenIdleDeferred.reject(t.killedError),this._initialized||this._initializeDeferred.reject(this._error||t.killedError),this._pendingActions.length=0,this._logger.debug("Killed.")}},e.prototype._ensureInitialized=function(){if(!this._initialized)throw new Error("Not initialized yet.")},e.prototype._ensureNotDead=function(){if(this._dead)throw new Error("MSE is dead.")},e.prototype._onMediaSourceInit=function(){this._logger.debug("MSE initialized."),this._mediaSource.removeEventListener("sourceopen",this._onMediaSourceInit,!1);try{this._logger.debug("Creating source buffer.",this._type),this._sourceBuffer=this._mediaSource.addSourceBuffer(this._type),this._sourceBuffer.mode=this._useSegmentsMode?"segments":"sequence",this._logger.debug("Using append mode: "+this._sourceBuffer.mode),this._sourceBuffer.addEventListener("updateend",this._onSourceBufferUpdateEnd,!1),this._sourceBuffer.addEventListener("error",this._onSourceBufferError,!1)}catch(e){this._handleError(e)}this._initializeDeferred.resolve(void 0),this._whenIdleDeferred.resolve(void 0),this._initialized=!0,this._performNextAction()},e.prototype._onMediaSourceError=function(e){this._handleError(e)},e.prototype._handleError=function(e){this._ensureNotDead(),this._logger.error("Error occurred.",e),this._error=e||new Error("Unknown error."),this.kill()},e.prototype._onSourceBufferUpdateEnd=function(){var e=this._currentAction;return this._logger.debug("Update ended.",this.getBuffered()),e?"append"===e.type&&l(this.getBuffered()).end<=this._bufferEnd?void this._handleError(new Error("Buffer end point did not increase after an append.")):(this._currentAction=null,e.deferred.resolve(void 0),void this._performNextAction()):void this._handleError(new Error("No action in progress."))},e.prototype._onSourceBufferError=function(e){this._handleError(e)},e.prototype._performNextAction=function(){var e=this._whenIdleDeferred;if(!this._currentAction&&this._sourceBuffer){var t=this._pendingActions.shift();if(!t)return this._logger.debug("No more actions."),void(e&&(this._whenIdleDeferred=null,e.resolve(void 0)));switch(e||(this._whenIdleDeferred=o()),this._currentAction=t,this._logger.debug("Performing next action..."),t.type){case"append":var n=l(this.getBuffered());try{if("segments"===this._sourceBuffer.mode){var i=n.end/1e3;this._logger.debug("Setting timestampOffset because detected safari.",i),this._sourceBuffer.timestampOffset=i}this._logger.debug("Calling appendBuffer()."),this._bufferEnd=n.end,this._sourceBuffer.appendBuffer(t.data)}catch(r){this._handleError(r)}break;case"remove":try{var s=t.range;this._logger.debug("Calling remove().",s.start,s.end),this._sourceBuffer.remove(s.start/1e3,s.end/1e3)}catch(r){this._handleError(r)}}}},e}();t.MSE=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(0),o=r.helpers.find,s=r.eventDispatcher.EventDispatcher,a=r.helpers.abortableJob.abortedError,l=r.helpers.abortableJob.AbortableJob,u=r.logger.prefixLogger,c=r.logger.noOpLogger;!function(e){e[e.RETRIEVING_SEGMENT=0]="RETRIEVING_SEGMENT",e[e.RETRIEVED_SEGMENT=1]="RETRIEVED_SEGMENT",e[e.RETRIEVING_DATA=2]="RETRIEVING_DATA",e[e.COMPLETE=3]="COMPLETE"}(i||(i={}));var d=function(){function e(e){this._onSegmentRequestQueued=new s,this._onSegmentRequestStart=new s,this._onSegmentRetrieved=new s,this._onSegmentRequestFailed=new s,this._onSegmentDecryptionStart=new s,this._onSegmentDecryptionEnd=new s,this._onSegmentTransmuxStart=new s,this._onSegmentTransmuxEnd=new s,this._onSegmentReady=new s,this._onError=new s,this._segments=[],this._retrievingSegment=null,this._timerId=null,this._dead=!1;var t=e.playlist,n=e.getPosition,i=e.maxBufferLength,r=e.cacheSize,o=e.transmuxer,a=e.logger,l=void 0===a?c:a;if(this._logger=u(l,"PlaylistSegmentRetriever"),t&&!t.hasRetrieveCompleted())throw new Error("Playlist retrieve has not completed.");if(0>i)throw new Error("Max buffer length must be > 0.");if(0>r)throw new Error("Cache size must be > 0.");this.onSegmentRequestQueued=this._onSegmentRequestQueued.getHandle(),this.onSegmentRequestStart=this._onSegmentRequestStart.getHandle(),this.onSegmentRetrieved=this._onSegmentRetrieved.getHandle(),this.onSegmentRequestFailed=this._onSegmentRequestFailed.getHandle(),this.onSegmentDecryptionStart=this._onSegmentDecryptionStart.getHandle(),this.onSegmentDecryptionEnd=this._onSegmentDecryptionEnd.getHandle(),this.onSegmentTransmuxStart=this._onSegmentTransmuxStart.getHandle(),this.onSegmentTransmuxEnd=this._onSegmentTransmuxEnd.getHandle(),this.onSegmentReady=this._onSegmentReady.getHandle(),this.onError=this._onError.getHandle(),this._playlist=t,this._transmuxer=o,this._getPosition=n,
this._maxBufferLength=i,this._cacheSize=r,this.update()}return e.prototype.updateMaxBufferLength=function(e){if(this._ensureNotDead(),0>e)throw new Error("Max buffer length must be > 0.");this._logger.debug("updateMaxBufferLength() called.",e),this._maxBufferLength=e,this.update()},e.prototype.updateCacheSize=function(e){if(this._ensureNotDead(),0>e)throw new Error("Cache size must be > 0.");this._logger.debug("updateCacheSize() called.",e),this._cacheSize=e,this.update()},e.prototype.getCacheSize=function(){return this._cacheSize},e.prototype.getCacheUsage=function(){return this._segments.reduce(function(e,t){return t.state===i.COMPLETE?e+t.data.byteLength:e},0)},e.prototype.switchPlaylist=function(e){if(this._ensureNotDead(),e&&!e.hasRetrieveCompleted())throw new Error("Playlist retrieve has not completed.");this._logger.debug("switchPlaylist() called."),this._abortCurrentRetrieve(),this._playlist=e,this._segments=this._segments.filter(function(e){return e.state===i.COMPLETE}),this.update()},e.prototype.getSegmentsWithData=function(){return this._ensureNotDead(),this._segments.filter(function(e){return e.state===i.COMPLETE}).map(function(e){if(e.state!==i.COMPLETE)throw new Error("Unexpected error.");var t=e.segment,n=e.initData,r=e.data,o=e.eventRepresentation;return{segment:t,initData:n,data:r,eventRepresentation:o}})},e.prototype.update=function(){this._ensureNotDead(),this._timerId&&(this._logger.debug("Cancelling update timer."),window.clearTimeout(this._timerId),this._timerId=null);var e=this._getPosition(),t=e;this._segments.some(function(n){if(n.state!==i.COMPLETE)return!1;var r=n.segment.getTimeRange();return r.end<e?!1:r.start>=t&&!r.containsTime(t)?!0:(t=r.end,!1)});var n=o(this._segments,function(e){if(e.state===i.RETRIEVED_SEGMENT||e.state===i.RETRIEVING_DATA){var n=e.segment.getTimeRange();return n.containsTime(t)}return!1});return t>=e+this._maxBufferLength?(this._abortCurrentRetrieve(),this._garbageCollect(e),void this._scheduleNextUpdate()):(n?this._retrieveSegmentData(n):this._retrieveSegment(t),void this._garbageCollect(e))},e.prototype.kill=function(){this._dead||(this._logger.debug("kill() called."),this._abortCurrentRetrieve(),this._dead=!0,this._timerId&&(this._logger.debug("Cancelling update timer."),window.clearTimeout(this._timerId)),this._logger.debug("Killed."))},e.prototype._retrieveSegmentData=function(e){var t=this;if(e.state!==i.RETRIEVED_SEGMENT&&e.state!==i.RETRIEVING_DATA)throw new Error("Segment in incorrect state for data to be retrieved.");var n=this._retrievingSegment;if(!n||n.state!==i.RETRIEVING_DATA||e.segment!==n.segment){this._abortCurrentRetrieve();var r=new l(function(){var n=!1,i=e.segment.retrieveData();t._logger.debug("Retrieving segment data...");var r=i.whenComplete().then(function(e){var i=e.data,r=e.eventRepresentation;if(n)throw a;return t._logger.debug("Retrieved segment data."),t._onSegmentTransmuxStart.dispatch({segment:r}),t._transmuxer.transmux(i).then(function(e){var i=e.data,o=e.initData;if(n)throw a;return t._onSegmentTransmuxEnd.dispatch({segment:r}),t._logger.debug("Transmuxed segment."),{data:i,initData:o,eventRepresentation:r}})});return{result:r,abort:function(){n=!0,i.abort()}}}).run();r.onCompletion(function(n){var r=n.initData,o=n.data,s=n.eventRepresentation;t._retrievingSegment=null,t._segments.splice(t._segments.indexOf(e),1,{state:i.COMPLETE,initData:r,data:o,eventRepresentation:s,segment:e.segment}),t._logger.debug("Segment retrieve completed.",s),t.update(),t._onSegmentReady.dispatch({segment:e.segment,initData:r,data:o,eventRepresentation:s})}),r.onError(function(e){e!==a&&(t._logger.error("Error retrieving segment data.",e),t._scheduleNextUpdate(),t._onError.dispatch(e))}),this._retrievingSegment={state:i.RETRIEVING_DATA,dataRetrieveJob:r,segment:e.segment}}},e.prototype._retrieveSegment=function(e){var t=this,n=this._retrievingSegment,r=this._playlist,o=r?r.getSegmentIndexContainingTime(e):null;if(!n||n.state!==i.RETRIEVING_SEGMENT||n.segmentIndex!==o)if(this._abortCurrentRetrieve(),null!==o&&r){var s=r.getSegment(o);this._logger.debug("Retrieving segment.",o),s.onCompletion(function(e){t._logger.debug("Retrieved segment.",o),e.onSegmentRequestQueued.subscribe(t._onSegmentRequestQueued.dispatch),e.onSegmentRequestStart.subscribe(t._onSegmentRequestStart.dispatch),e.onSegmentRetrieved.subscribe(t._onSegmentRetrieved.dispatch),e.onSegmentRequestFailed.subscribe(t._onSegmentRequestFailed.dispatch),e.onSegmentDecryptionStart.subscribe(t._onSegmentDecryptionStart.dispatch),e.onSegmentDecryptionEnd.subscribe(t._onSegmentDecryptionEnd.dispatch),t._segments.splice(t._segments.indexOf(l),1);var n=e.getTimeRange(),r=t._segments.length;t._segments.some(function(e,t){return e.state===i.RETRIEVING_SEGMENT?!1:e.segment.getTimeRange().start>n.start?(r=t,!0):!1}),t._segments.splice(r,0,{state:i.RETRIEVED_SEGMENT,segment:e}),t._retrievingSegment=null,t.update()}),s.onError(function(e){e!==a&&(t._logger.error("Error retrieving segment.",e),t._scheduleNextUpdate(),t._onError.dispatch(e))});var l={state:i.RETRIEVING_SEGMENT,segmentIndex:o,segmentRetrieveJob:s};this._segments.push(l),this._retrievingSegment=l}else this._scheduleNextUpdate()},e.prototype._abortCurrentRetrieve=function(){var e=this._retrievingSegment;e&&(e.state===i.RETRIEVING_SEGMENT?(this._logger.debug("Aborting segment retrieve job."),e.segmentRetrieveJob.abort()):e.state===i.RETRIEVING_DATA&&(this._logger.debug("Aborting segment data retrieve job."),e.dataRetrieveJob.abort()),this._retrievingSegment=null)},e.prototype._garbageCollect=function(e){var t=this._segments,n=this._cacheSize,r=this.getCacheUsage();if(!(n>=r)){var o=e+this._maxBufferLength;t.filter(function(t){if(t.state!==i.COMPLETE)return!1;var n=t.segment.getTimeRange();return n.end<=e||n.start>o}).map(function(t){if(t.state!==i.COMPLETE)throw new Error("Unexpected error.");var n=t.segment.getTimeRange(),r=Math.abs(e-n.start);return{segment:t,distance:r,size:t.data.byteLength}}).sort(function(e,t){return t.distance-e.distance}).some(function(e){return n>=r?!0:(t.splice(t.indexOf(e.segment),1),r-=e.size,!1)})}},e.prototype._scheduleNextUpdate=function(){var e=this;this._timerId||(this._timerId=window.setTimeout(function(){e._timerId=null,e.update()},1e3))},e.prototype._ensureNotDead=function(){if(this._dead)throw new Error("Playlist segment retriever has been killed.")},e}();t.PlaylistSegmentRetriever=d},function(e,t,n){"use strict";function i(e){return 0===e.indexOf('"')&&e.lastIndexOf('"')===e.length-1?e.slice(1,-1):e}function r(e){0===e.indexOf("0x")&&(e=e.substr(2));var t=new Uint16Array(8);if(e.length%4!==0)throw new d.PlaylistParseError("Failed to parse IV (length is not multiple of 4).");for(var n=0;n<e.length;n+=4){var i=parseInt(e.substr(n,4),16);if(isNaN(i))throw new d.PlaylistParseError("Failed to parse hex number in IV string.");t[n/4]=i}return new Uint8Array(t)}function o(e){for(var t=new Uint8Array(16),n=12;16>n;n++)t[n]=e>>8*(15-n)&255;return t}function s(e){return!(e>=400&&500>e)}Object.defineProperty(t,"__esModule",{value:!0});var a,l=n(0),u=n(31),c=n(3),d=n(12),h=n(13),p=n(26),f=n(25),g=l.helpers.abortableJob.AbortableJob,m=l.helpers.deferred.buildDeferred,_=l.helpers.cache.buildCache,v=l.helpers.retry,y=v.retry,b=v.buildExponentialDelayCalculator,w=l.helpers.Promise,x=l.helpers.find,k=l.helpers.url,S=l.eventDispatcher.EventDispatcher,E=l.logger.prefixLogger,T=l.logger.noOpLogger,A=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT(INF): *(\d+(?:\.\d+)?)(?:,(.*))?)|(?:(?!#)()(\S.+))|(?:#EXT-X-(BYTERANGE): *(\d+(?:@\d+(?:\.\d+)?)?)|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(PROGRAM-DATE-TIME):(.+))|(?:#EXT-X-(VERSION):(\d+))|(?:(#)(.*):(.*))|(?:(#)(.*)))(?:.*)\r?\n?/g,P=/(.+?)=(.+?)(?:,|$)/g,C=/^\d*(\.\d+)?$/;!function(e){e[e.NONE=0]="NONE",e[e.AES_128=1]="AES_128",e[e.SAMPLE_AES=2]="SAMPLE_AES"}(a||(a={}));var D;!function(e){e[e.VOD=0]="VOD",e[e.LIVE=1]="LIVE",e[e.EVENT=2]="EVENT"}(D=t.PlaylistType||(t.PlaylistType={}));var M=function(){function e(e){var t=e.url,n=e.playlistLoader,i=e.segmentLoader,r=e.keyLoader,o=void 0===r?null:r,a=e.segmentFormat,l=e.logger,u=void 0===l?T:l,d=e.delayCalculator,h=void 0===d?b():d,f=e.keyDelayCalculator,v=void 0===f?b():f,x=e.segmentDelayCalculator,k=e.isPlaylistResponseCodeAcceptable,A=void 0===k?function(e){return 200===e}:k,P=e.isPlaylistResponseCodeRetryable,C=void 0===P?s:P,D=e.isSegmentResponseCodeAcceptable,M=void 0===D?function(e){return 200===e}:D,R=e.isSegmentResponseCodeRetryable,I=void 0===R?s:R,O=e.isKeyResponseCodeAcceptable,L=void 0===O?function(e){return 200===e}:O,N=e.isKeyResponseCodeRetryable,F=void 0===N?s:N,B=this;this._keyRetrievalJobsCache=_(),this._data=null,this._playlistEventRepresentation=null,this._onPlaylistRequestQueued=new S,this._onPlaylistRequestStart=new S,this._onPlaylistRetrieved=new S,this._onPlaylistRequestFailed=new S,this._onPlaylistParseStart=new S,this._onPlaylistParseEnd=new S,this._onKeyRequestQueued=new S,this._onKeyRequestStart=new S,this._onKeyRetrieved=new S,this._onKeyRequestFailed=new S,this._logger=E(u,"Playlist"),this.onPlaylistRequestQueued=this._onPlaylistRequestQueued.getHandle(),this.onPlaylistRequestStart=this._onPlaylistRequestStart.getHandle(),this.onPlaylistRetrieved=this._onPlaylistRetrieved.getHandle(),this.onPlaylistRequestFailed=this._onPlaylistRequestFailed.getHandle(),this.onPlaylistParseStart=this._onPlaylistParseStart.getHandle(),this.onPlaylistParseEnd=this._onPlaylistParseEnd.getHandle(),this.onKeyRequestQueued=this._onKeyRequestQueued.getHandle(),this.onKeyRequestStart=this._onKeyRequestStart.getHandle(),this.onKeyRetrieved=this._onKeyRetrieved.getHandle(),this.onKeyRequestFailed=this._onKeyRequestFailed.getHandle(),this._url=t,this._playlistLoader=n,this._segmentLoader=i,this._keyLoader=o,this._segmentFormat=a,this._delayCalculator=h,this._keyDelayCalculator=v,this._isPlaylistResponseCodeAcceptable=A,this._isPlaylistResponseCodeRetryable=C,this._isSegmentResponseCodeAcceptable=M,this._isSegmentResponseCodeRetryable=I,this._isKeyResponseCodeAcceptable=L,this._isKeyResponseCodeRetryable=F,this._segmentDelayCalculator=x,this._downloadAbortableJob=new g(function(){var e=y(function(){return new g(function(){var e=new p.Playlist(t);B._onPlaylistRequestQueued.dispatch({playlist:e});var n=B._playlistLoader.request({url:t});n.whenRequestStarted.then(function(){B._onPlaylistRequestStart.dispatch({playlist:e})}),B._logger.debug("Requesting playlist.",t);var i=n.getResponse().then(function(n){if(!n)return B._logger.warn("Playlist request timed out.",t),B._onPlaylistRequestFailed.dispatch({playlist:e,statusCode:null}),{success:!1};var i=n.statusCode;if(B._isPlaylistResponseCodeAcceptable(i)){var r=n.data;return r?(B._logger.debug("Got playlist response.",t,i),B._onPlaylistRetrieved.dispatch({playlist:e,statusCode:i}),{success:!0,result:{playlistContent:r,eventRepresentation:e}}):(B._logger.warn("Playlist response contained no data.",t,i),B._onPlaylistRequestFailed.dispatch({playlist:e,statusCode:i}),{success:!1})}return B._isPlaylistResponseCodeRetryable(i)?(B._logger.debug("Playlist response code was not acceptable. Will retry.",t,i),B._onPlaylistRequestFailed.dispatch({playlist:e,statusCode:i}),{success:!1}):(B._logger.debug("Playlist response code was not acceptable.",t,i),B._onPlaylistRequestFailed.dispatch({playlist:e,statusCode:i}),w.reject(new c.UnacceptableResponseStatusCodeError(i)))});return{result:i,abort:function(){B._logger.debug("Aborting playlist request.",t),n.abort(),B._onPlaylistRequestFailed.dispatch({playlist:e,aborted:!0})}}})},h);return{result:e.whenComplete(),abort:function(){return e.abort()}}}),this._retrieveJob=new g(function(){var e=B._downloadAbortableJob.run(),t=m();return e.onCompletion(function(e){var n=e.playlistContent,i=e.eventRepresentation;B._onPlaylistParseStart.dispatch({playlist:i});try{B._data=B._parsePlaylist(n)}catch(r){return B._logger.error("Error when parsing playlist.",r,n),void t.reject(r)}B._playlistEventRepresentation=i,B._onPlaylistParseEnd.dispatch({playlist:i}),t.resolve(void 0)}),e.onError(t.reject),{result:t.promise,abort:function(){return e.abort()}}})}return e.prototype.retrieve=function(){return this._retrieveJob.run()},e.prototype.hasRetrieveCompleted=function(){return!!this._data},e.prototype.getStartingSequenceNumber=function(){if(!this._data)throw new Error("Not loaded yet.");return this._data.mediaSequence},e.prototype.getType=function(){if(!this._data)throw new Error("Not loaded yet.");return this._data.type},e.prototype.getTargetDuration=function(){if(!this._data)throw new Error("Not loaded yet.");return this._data.targetDuration},e.prototype.getTotalDuration=function(){if(!this._data)throw new Error("Not loaded yet.");return this._data.totalDuration},e.prototype.hasEnded=function(){if(!this._data)throw new Error("Not loaded yet.");return this._data.ended},e.prototype.getSegmentCount=function(){if(!this._data)throw new Error("Not loaded yet.");return this._data.segments.length},e.prototype.getSegment=function(e){return this.getSegments(e,e+1)[0]},e.prototype.getSegments=function(e,t){var n=this,i=this._data;if(!i)throw new Error("Not loaded yet.");var r=i.mediaSequence;void 0===e&&(e=r);var o=i.segments.length;if(void 0===t&&(t=r+o),r>e)throw new Error("Start index must be >= the first segment index.");if(r>t)throw new Error("End index must be >= the first segment index.");if(t>r+o)throw new Error("End index cannot be > than the index of the last segment.");if(e>t)throw new Error("End index must be >= start index.");return i.segments.slice(e-r,t-r).map(function(t,i){var r=new g(function(){var r=t.encryptionData,o=e+i,s=n._playlistEventRepresentation;if(!s)throw new Error("Playlist event representation should exist.");var a=n._buildEncryptionConfig(r,o),l=a.whenComplete().then(function(e){return new u.Segment({url:t.url,index:o,timeRange:t.timeRange,format:n._segmentFormat,loader:n._segmentLoader,playlistEventRepresentation:s,logger:n._logger,delayCalculator:n._segmentDelayCalculator,isResponseCodeAcceptable:n._isSegmentResponseCodeAcceptable,isResponseCodeRetryable:n._isSegmentResponseCodeRetryable,encryptionConfig:e})});return{result:l,abort:function(){return a.abort()}}});return r.run()})},e.prototype.getSegmentIndexContainingTime=function(e){var t=this._data;if(!t)throw new Error("Not loaded yet.");var n=x(t.segments,function(t){return t.timeRange.containsTime(e)});return n?t.mediaSequence+t.segments.indexOf(n):null},e.prototype._buildEncryptionConfig=function(e,t){var n=this,i=new g(function(){if(e.method===a.NONE)return{result:w.resolve(void 0)};if(e.method!==a.AES_128)return n._logger.error("Unsupported encryption method.",e.method),{result:w.reject(new h.UnsupportedEncryptionError)};var i=n._keyLoader;if(!i)return{result:w.reject(new Error("Encryption method not supported as no key loader provided."))};var r=n._retrieveKey(e.keyUrl),s=r.whenComplete().then(function(n){return{cipher:"AES-CBC",key:n,iv:e.iv||o(t)}});return{result:s,abort:function(){return r.abort()}}});return i.run()},e.prototype._retrieveKey=function(e){var t=this,n=this._keyLoader;if(!n)throw new Error("No key loader.");var i=this._keyRetrievalJobsCache.get(e);if(i)this._logger.debug("Key retrieval already in progress.",e);else{var r=this._playlistEventRepresentation;if(!r)throw new Error("Playlist event representation should exist.");i=new g(function(){var i=y(function(){return new g(function(){var i=new f.Key(r,e);t._onKeyRequestQueued.dispatch({key:i});var o=n.request({url:e});o.whenRequestStarted.then(function(){return t._onKeyRequestStart.dispatch({key:i})}),t._logger.debug("Retrieving key.",e);var s=o.getResponse().then(function(n){if(!n)return t._logger.warn("Key request timed out.",e),t._onKeyRequestFailed.dispatch({key:i,statusCode:null}),{success:!1};var r=n.statusCode;if(t._isKeyResponseCodeAcceptable(r)){var o=n.data;return o?(t._logger.debug("Got key response.",e,r),t._onKeyRetrieved.dispatch({key:i,statusCode:r}),{success:!0,result:new Uint8Array(o)}):(t._logger.warn("Key response contained no data.",e,r),t._onKeyRequestFailed.dispatch({key:i,statusCode:r}),{success:!1})}return t._isKeyResponseCodeRetryable(r)?(t._logger.warn("Key response code was not acceptable. Will retry.",e,r),t._onKeyRequestFailed.dispatch({key:i,statusCode:r}),{success:!1}):(t._logger.warn("Key response code was not acceptable.",e,r),t._onKeyRequestFailed.dispatch({key:i,statusCode:r}),w.reject(new c.UnacceptableResponseStatusCodeError(r)))});return{result:s,abort:function(){t._logger.debug("Aborting key request.",e),o.abort(),t._onKeyRequestFailed.dispatch({key:i,aborted:!0})}}})},t._keyDelayCalculator);return{result:i.whenComplete(),abort:function(){return i.abort()}}}),this._keyRetrievalJobsCache.set(e,i)}return i.run()},e.prototype._parsePlaylist=function(e){var t={version:null,type:D.LIVE,mediaSequence:null,targetDuration:null,totalDuration:0,ended:!1},n=[],o={method:a.NONE},s=null;A.lastIndex=0;for(var u,c=0,h=!1;null!==(u=A.exec(e));){var p=u.filter(function(e,t){return 0===t?!1:void 0!==e}).map(function(e,t){return 0===t?e.toLowerCase():e}),f=p[0],g=p.slice(1);if(0===c){if("extm3u"!==f)throw new d.PlaylistParseError("First line did not contain EXTM3U tag.")}else{if(!h)switch(f){case"playlist-type":if(t.type!==D.LIVE)throw new d.PlaylistParseError("Already have playlist type.");switch(g[0].toLowerCase()){case"vod":t.type=D.VOD;break;case"event":t.type=D.EVENT;break;default:throw new d.PlaylistParseError("Invalid playlist type.")}break;case"media-sequence":if(null!==t.mediaSequence)throw new d.PlaylistParseError("Already have media sequence number.");var m=parseInt(g[0],10);if(m+""!==g[0])throw new d.PlaylistParseError("Invalid media sequence number.");t.mediaSequence=m;break;case"targetduration":if(null!==t.targetDuration)throw new d.PlaylistParseError("Already have target duration.");var _=parseInt(g[0],10);if(_+""!==g[0]||0>_)throw new d.PlaylistParseError("Invalid target duration.");t.targetDuration=1e3*_;break;case"version":if(null!==t.version)throw new d.PlaylistParseError("Already have version.");var v=parseInt(g[0],10);if(v+""!==g[0])throw new d.PlaylistParseError("Invalid version.");if(3>v)throw new d.PlaylistParseError("HLS version must be 3 or above.");t.version=v;break;default:h=!0}if(h)switch(f){case"key":P.lastIndex=0;for(var y=void 0,b=null,w=null,x=null;null!==(y=P.exec(g[0]));){if(3!==y.length)throw new d.PlaylistParseError("Error parsing key attributes.");var S=y[1].trim().toLowerCase(),E=i(y[2].trim());switch(S){case"method":b=E.toLowerCase();break;case"uri":w=k.buildAbsoluteUrl(this._url,E);break;case"iv":x=r(E);break;default:this._logger.warn("Unknown attribute when parsing KEY line.",S)}}if(!b)throw new d.PlaylistParseError("Missing encryption method.");if(!w&&"none"!==b)throw new d.PlaylistParseError("Missing key url.");switch(b){case"none":if(null!==w)throw new d.PlaylistParseError("Key url not allowed.");if(null!==x)throw new d.PlaylistParseError("IV not allowed.");o={method:a.NONE};break;case"aes-128":if(!w)throw new d.PlaylistParseError("Key url required.");o={method:a.AES_128,keyUrl:w,iv:x};break;case"sample-aes":if(!w)throw new d.PlaylistParseError("Key url required.");o={method:a.SAMPLE_AES,keyUrl:w,iv:x};break;default:throw new d.PlaylistParseError("Unknown encryption method.")}break;case"inf":if(!g[0].match(C))throw new d.PlaylistParseError("Invalid segment duration.");s=1e3*parseFloat(g[0]);break;case"":if(t.ended)throw new d.PlaylistParseError("Already received ENDLIST tag.");if(null===s)throw new d.PlaylistParseError("Not received segment duration.");var T=k.buildAbsoluteUrl(this._url,g[0]);n.push({url:T,timeRange:new l.TimeRange(t.totalDuration,s),encryptionData:o}),t.totalDuration+=s,s=null;break;case"endlist":if(t.ended)throw new d.PlaylistParseError("Already had ENDLIST tag.");t.ended=!0;break;default:this._logger.warn("Unable to parse playlist line.",f)}}c++}var M=t.version,R=t.type,I=t.mediaSequence,O=t.targetDuration,L=t.ended,N=t.totalDuration;if(null===M)throw new d.PlaylistParseError("Missing version.");if(null===O)throw new d.PlaylistParseError("Missing target duration.");if(L&&R===D.LIVE)throw new d.PlaylistParseError("Cannot be ended if type is LIVE.");if(!L&&R===D.VOD)throw new d.PlaylistParseError("Must be ended if type is VOD.");return null===I&&(I=0),{version:M,type:R,mediaSequence:I,targetDuration:O,totalDuration:N,ended:L,segments:n}},e}();t.Playlist=M},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(22),o=n(3),s=n(11),a=n(27),l=i.helpers.abortableJob.AbortableJob,u=i.helpers.retry,c=u.retry,d=u.buildExponentialDelayCalculator,h=i.helpers.Promise,p=i.eventDispatcher.EventDispatcher,f=i.logger.prefixLogger,g=i.logger.noOpLogger,m=function(){function e(e){var t=e.url,n=e.index,i=e.timeRange,r=e.encryptionConfig,s=e.format,u=e.loader,m=e.playlistEventRepresentation,_=e.logger,v=void 0===_?g:_,y=e.delayCalculator,b=void 0===y?d():y,w=e.isResponseCodeAcceptable,x=void 0===w?function(e){return 200===e}:w,k=e.isResponseCodeRetryable,S=void 0===k?function(e){return!(e>=400&&500>e)}:k,E=this;this._onSegmentRequestQueued=new p,this._onSegmentRequestStart=new p,this._onSegmentRetrieved=new p,this._onSegmentRequestFailed=new p,this._onSegmentDecryptionStart=new p,this._onSegmentDecryptionEnd=new p,this._logger=f(v,"Segment"),this.onSegmentRequestQueued=this._onSegmentRequestQueued.getHandle(),this.onSegmentRequestStart=this._onSegmentRequestStart.getHandle(),this.onSegmentRetrieved=this._onSegmentRetrieved.getHandle(),this.onSegmentRequestFailed=this._onSegmentRequestFailed.getHandle(),this.onSegmentDecryptionStart=this._onSegmentDecryptionStart.getHandle(),this.onSegmentDecryptionEnd=this._onSegmentDecryptionEnd.getHandle(),this._timeRange=i,this._encryptionConfig=r||null,this._format=s,this._loader=u,this._isResponseCodeAcceptable=x,this._isResponseCodeRetryable=S,this._downloadAbortableJob=new l(function(){var e=c(function(){return new l(function(){var e=new a.Segment(m,t,n);E._onSegmentRequestQueued.dispatch({segment:e});var i=E._loader.request({url:t});i.whenRequestStarted.then(function(){return E._onSegmentRequestStart.dispatch({segment:e})}),E._logger.debug("Requesting segment.",t);var r=i.getResponse().then(function(n){if(!n)return E._logger.warn("Segment request timed out.",t),E._onSegmentRequestFailed.dispatch({segment:e,statusCode:null}),{success:!1};var i=n.statusCode;if(E._isResponseCodeAcceptable(i)){var r=n.data;return r?(E._logger.debug("Got segment response.",t,i),E._onSegmentRetrieved.dispatch({segment:e,statusCode:i}),{success:!0,result:{data:new Uint8Array(r),eventRepresentation:e}}):(E._logger.warn("Segment response contained no data.",t,i),E._onSegmentRequestFailed.dispatch({segment:e,statusCode:i}),{success:!1})}return E._isResponseCodeRetryable(i)?(E._logger.debug("Segment response code was not acceptable. Will retry.",t,i),E._onSegmentRequestFailed.dispatch({segment:e,statusCode:i}),{success:!1}):(E._logger.debug("Segment response code was not acceptable.",t,i),E._onSegmentRequestFailed.dispatch({segment:e,statusCode:i}),h.reject(new o.UnacceptableResponseStatusCodeError(i)))});return{result:r,abort:function(){E._logger.debug("Aborting segment request.",t),i.abort(),E._onSegmentRequestFailed.dispatch({segment:e,aborted:!0})}}})},b);return{result:e.whenComplete(),abort:function(){return e.abort()}}}),this._retrieveAbortableJob=new l(function(){var e=E._downloadAbortableJob.run(),t=e.whenComplete().then(function(e){var t=e.data,n=e.eventRepresentation;return E.decrypt(t,n).then(function(e){return{data:e,eventRepresentation:n}})});return{result:t,abort:function(){e.abort()}}})}return e.prototype.getTimeRange=function(){return this._timeRange},e.prototype.retrieveData=function(){return this._retrieveAbortableJob.run()},e.prototype.decrypt=function(e,t){var n=this,i=this._encryptionConfig;if(!i)return h.resolve(e);this._logger.info("Finding a decryptor...");var o=r.DecryptorFactory.retrieveDecryptor(i);if(!o)return this._logger.error("Could not find a decryptor."),h.reject(new s.NoDecryptorError);this._logger.info("Decryptor found."),this._onSegmentDecryptionStart.dispatch({segment:t});var a=o.decrypt(e,i);return a.then(function(){n._logger.debug("Decrypted."),n._onSegmentDecryptionEnd.dispatch({segment:t})}),a},e}();t.Segment=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(4),o=i.helpers.Promise,s=i.eventDispatcher.EventDispatcher,a=i.logger.prefixLogger,l=i.logger.noOpLogger,u=r.helpers.timeRanges.getCoverage,c=7e3,d=function(){function e(e,t,n,i,r){void 0===r&&(r=l);var o=this;this._onAppendQueued=new s,this._onAppendEnd=new s,this._updateTimerId=null,this._waitingForData=!1,this._started=!1,this._resettingPromise=null,this._error=null,this._logger=a(r,"SimpleMSE"),this.onAppendQueued=this._onAppendQueued.getHandle(),this.onAppendEnd=this._onAppendEnd.getHandle(),this._mse=e,this._getNextSegmentData=t,this._getPosition=n,this._onError=i,e.whenInitialized().then(function(){!o._error&&o._started&&(o._logger.debug("MSE initialized. Preparing to update."),o._prepareUpdate())})["catch"](function(e){o._error||(o._logger.error("Error when waiting for MSE to initialize.",e),o._handleError(e||new Error("Error waiting for MSE to initialize.")))})}return e.prototype.start=function(){if(this._checkNotErrored(),this._resettingPromise)throw new Error("start() is not allowed whilst a reset is in progress.");if(this._started)throw new Error("Already started. reset() first.");this._logger.debug("start() called."),this._started=!0,this._prepareUpdate()},e.prototype.kill=function(){this._error||(this._logger.debug("kill() called."),this._updateTimerId&&(this._logger.debug("Clearing update timer."),window.clearTimeout(this._updateTimerId),this._updateTimerId=null),this._error=new Error("Killed."),this._logger.debug("Killed."))},e.prototype.reset=function(){var e=this;if(this._checkNotErrored(),this._logger.debug("reset() called."),this._resettingPromise)return this._logger.debug("Reset already in progress."),this._resettingPromise;if(!this._started)return this._logger.debug("Nothing to do to, already reset."),o.resolve();var t=this._mse;return this._waitingForData=!1,this._started=!1,this._updateTimerId&&(this._logger.debug("Claring update timer."),window.clearTimeout(this._updateTimerId),this._updateTimerId=null),this._logger.debug("Waiting to clear MSE buffer..."),this._resettingPromise=t.whenIdle().then(function(){e._logger.debug("Clearing MSE buffer.");var n=t.getBuffered(),i=u(n);return i.duration>0?t.remove(i):void 0}).then(function(){e._logger.debug("MSE buffer cleared."),e._resettingPromise=null})["catch"](function(t){if(!e._error){e._logger.error("Error resetting MSE.",t);var n=t||new Error("Error resetting MSE.");throw e._handleError(n),n}})},e.prototype.waitingForSegmentData=function(){return this._checkNotErrored(),this._waitingForData},e.prototype.provideNextSegmentData=function(e){if(this._checkNotErrored(),!this._waitingForData)throw new Error("Not waiting for data.");this._logger.debug("Segment data provided."),this._waitingForData=!1,this._update(e)},e.prototype._prepareUpdate=function(){if(!this._updateTimerId){var e=this._mse;if(e.hasInitialized()){var t=u(e.getBuffered());if(t.end<=this._getPosition()+c){this._logger.debug("Requesting next segment data.");var n=this._getNextSegmentData();n?(this._logger.debug("Got segment data."),this._update(n)):(this._logger.debug("Did not get any data."),this._waitingForData=!0)}else this._scheduleUpdate()}}},e.prototype._update=function(e){var t=this;this._logger.debug("Updating...");var n=this._mse;this._onAppendQueued.dispatch({segment:e.eventRepresentation}),this._logger.debug("Appending..."),n.append(e.data).then(function(){t._logger.debug("Appended."),t._onAppendEnd.dispatch({segment:e.eventRepresentation}),t._resettingPromise||t._scheduleUpdate()})["catch"](function(e){t._error||(t._logger.error("Error updating MSE.",e),t._handleError(e||new Error("Error updating MSE.")))})},e.prototype._scheduleUpdate=function(){var e=this;this._updateTimerId=window.setTimeout(function(){e._updateTimerId=null,e._prepareUpdate()},500)},e.prototype._checkNotErrored=function(){if(this._error)throw this._error},e.prototype._handleError=function(e){this._error||(this._error=e,this._onError(e))},e}();t.SimpleMSE=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(34),r=n(14),o=[i.PassThrough,r.MP3ToMP4];t["default"]=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=i.helpers.Promise;t.PassThrough={getInputFormat:function(){return{}},getOutputFormat:function(){return{}},transmux:function(e){return r.resolve({data:e})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(33);t.TransmuxerFactory={retrieveTransmuxers:function(e,t){return i["default"].filter(function(n){var i=n.getInputFormat(),r=n.getOutputFormat();return!(e&&(i.mimeType&&e.mimeType&&e.mimeType!==i.mimeType||i.audioCodec&&e.audioCodec&&e.audioCodec.id!==i.audioCodec.id||i.videoCodec&&e.videoCodec&&e.videoCodec.id!==i.videoCodec.id)||t&&(r.mimeType&&t.mimeType&&t.mimeType!==r.mimeType||r.audioCodec&&t.audioCodec&&t.audioCodec.id!==r.audioCodec.id||r.videoCodec&&t.videoCodec&&t.videoCodec.id!==r.videoCodec.id))})},retrieveTransmuxer:function(e,n){return t.TransmuxerFactory.retrieveTransmuxers(e,n)[0]||null}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version="3.7.0",t.buildNumber=699;var i=n(16);t.HLSMSEPlayer=i.HLSMSEPlayer;var r=n(15);t.errors=r.errors;var o=n(17);t.retrievalErrors=o.retrievalErrors}])})},530:function(e,t,n){!function(t,i){e.exports=i(n(215))}(this,function(e){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=6)}([function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=function(e){function t(t,n,i){void 0===n&&(n={}),void 0===i&&(i=2e4);var r=e.call(this)||this;r.__aborted=!1;var o=new XMLHttpRequest;return r.xhr=o,o.addEventListener("load",function(){return r._onLoad()}),o.addEventListener("error",function(){return r._onError()}),o.addEventListener("timeout",function(){return r._onTimeout()}),o.open("GET",t,!0),o.timeout=i,o.responseType=r._getResponseType(),Object.keys(n).forEach(function(e){return o.setRequestHeader(e,n[e])}),r._signalRequestStart(),o.send(),r}return i(t,e),t.prototype._abort=function(){this.__aborted=!0,this.xhr.abort()},t.prototype._onTimeout=function(){this.__aborted||this._provideResponse(null)},t.prototype._onLoad=function(){if(!this.__aborted){var e=this.xhr;this._provideResponse({statusCode:e.status,data:this.xhr.response,headers:this._parseHeaders(e.getAllResponseHeaders()||"")})}},t.prototype._onError=function(){this.__aborted||(0===this.xhr.status?this._provideResponse({statusCode:0,data:null,headers:{}}):this._provideResponse(new Error("An error occurred.")))},t.prototype._parseHeaders=function(e){var t={};if(!e)return t;for(var n=e.split("\r\n"),i=0,r=n.length;r>i;i++){
var o=n[i],s=o.indexOf(": ");if(s>0){var a=o.substring(0,s).trim(),l=o.substring(s+2);t[a]=l}}return t},t}(r.loader.LoaderRequest);t.LoaderRequest=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3);t.arrayBufferLoader={request:function(e){var t=e.url,n=e.headers,r=e.timeout;return new i.ArrayBufferLoaderRequest(t,n,r)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4);t.stringLoader={request:function(e){var t=e.url,n=e.headers,r=e.timeout;return new i.StringLoaderRequest(t,n,r)}}},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype._getResponseType=function(){return"arraybuffer"},t}(r.LoaderRequest);t.ArrayBufferLoaderRequest=o},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype._getResponseType=function(){return"text"},t}(r.LoaderRequest);t.StringLoaderRequest=o},function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version="3.7.0",t.buildNumber=699;var i=n(2);t.stringLoader=i.stringLoader;var r=n(1);t.arrayBufferLoader=r.arrayBufferLoader}])})},531:function(e,t,n){"use strict";e.exports=n(365).extend(n(464),{notificationType:"activities",parse:function(e){var t=e.collection;return t&&t.forEach(function(e){e.comment&&!e.comment.user&&(e.comment.user=e.user,e.comment.user_id=e.user.user_id),e.user&&(delete e.user.cpp,delete e.user.default_tracks_feedable),e.resource&&(delete e.resource.cpp,delete e.resource.default_tracks_feedable)}),t}},{hashFn:function(){return 1}})},532:function(e,t,n){"use strict";e.exports=n(308).extend({baseUrl:function(){return n(65).stringify({path:["app","v2","tracks",this.options.sound_id,"comments"],query:{filter_replies:1}})},getCommentAtTimestamp:function(e,t){return t=n(3).isNumber(t)?t:0,this.find(function(i){var r=i.get("timestamp"),o=e-r;return 0===t?r===e:o>=0&&Math.abs(o)<=t&&r!==n(106).EMPTY_TIMESTAMP})||null},onCommentCreated:function(e){e.get("replyTo")||this.add(e,{at:0})}},{hashFn:function(e,t){return t&&t.sound_id||null}})},535:function(e,t,n){"use strict";var i=e.exports=n(73).extend({model:n(67),setup:function(){n(61).isLoggedIn()||this.setToFullyPopulated()},baseUrl:function(){return this.getEndpointUrl("shortcutsTrackLikes")}},{hashFn:function(){return n(55).get("me").get("id")},prefetch:function(){var e=new i;e.isPopulated()||e.fetch(),e.release()}})},538:function(e,t,n){"use strict";e.exports=n(152).extend({model:n(88),defaults:{type:"playlists"},baseUrl:function(){return this.getEndpointUrl("userPlaylistsWithoutAlbums",{id:this.options.userId})}})},539:function(e,t,n){"use strict";e.exports=n(152).extend(n(981),{defaults:{type:"sounds"},baseUrl:function(){return this.getEndpointUrl("streamUserProfile",{id:this.options.userId})},setup:function(e){n(152).prototype.setup.call(this,e),this.isMe=n(61).currentUserId()===e.userId},parse:function(e){var t=e.collection,i=void 0===t?[]:t,r=n(61).currentUserId();return i.length&&!this.isMe&&(i=i.filter(function(e){return e.user&&(delete e.user.cpp,delete e.user.default_tracks_feedable),e.track||e.playlist&&e.playlist.track_count||e.playlist&&e.playlist.user_id===r})),i}})},598:function(e,t,n){"use strict";e.exports=n(66).extend({resource_type:"chartTrack",submodelMap:{track:n(67)},createSubmodel:function(e,t){this.soundModel=new e(this.get(t)),this.addSubmodel(this.soundModel)}})},600:function(e,t,n){"use strict";function i(){this._messageSentAt=new Date(this.get("sent_at"))}function r(){var e=this,t=this.getPossibleAudibleLinks();t&&n(174).getAudibleModels(t).done(function(t){t.forEach(function(e){e&&o.call(this,e.audible,e.link)},e),e.trigger("audibleFinishedResolving")})}function o(e,t){var i=n(65).parse(e.getShareURL()).path,r={link:null,model:e};-1!==t.indexOf(i)&&(r.link=t,this.addSubmodel(r.model),s.call(this,r))}function s(e){var t=this.get("audibleInformation");t.push(e),this.set("audibleInformation",t),this.trigger("audibleInformationUpdated",{audibleInformation:e,timestamp:this.sentAt()})}var a=n(55).get("systemUserId");e.exports=n(66).extend({resource_type:"conversation_message",_messageSentAt:null,getSenderId:function(){var e=this.get("sender_urn");return e?n(94).getAsAttributes(e).id:null},setup:function(){this.set("audibleInformation",[]),i.call(this)},sentAt:function(){return this._messageSentAt},fetchAudibles:function(){r.call(this)},getAudible:function(){var e=this.get("audibleInformation");return e&&e[0]&&e[0].model},hasDataForView:function(){return!0},getPossibleAudibleLinks:function(){var e=this.get("content")?this.get("content"):"";return e.match(n(174).scLinksRegexGlobal)},isFromSoundCloud:function(){return this.getSenderId()===a},isFromMissingUser:function(){var e=this.get("sender");return e&&"missing_user"===e.kind}},{hashFn:function(e){return e.id||[e.conversation_id,e.sent_at].join("_")}})},601:function(e,t,n){"use strict";var i={create:"userEmailCreate",update:"userEmailUpdate","delete":"userEmailDelete"};e.exports=n(66).extend({resource_type:"email",setup:function(e,t){!t||!t.userId||e&&e.user_id||this.set({user_id:t.userId})},baseUrl:null,getEndpointForMethod:function(e){return i[e]}})},602:function(e,t,n){"use strict";e.exports=n(66).extend({resource_type:"historicalPlay",submodelMap:{track:n(67)},setup:function(e){this.sound=new(n(67))({id:e.track_id}),this.addSubmodel(this.sound)}},{hashFn:function(e){var t=e.id,n=e.resource_id,i=e.track_id;return t||n||i}})},606:function(e,t,n){"use strict";function i(e){return e||""}e.exports=n(66).extend({resource_type:"stats-totals",baseUrl:function(){var e=this.options,t=e.user,n=e.track,i=e.singleMetric,r={user_urn:t,track_urn:n,metric:i};return n?this.getEndpointUrl("totalsTrackStats",r):this.getEndpointUrl("totalsUserStats",r)},fetch:function(e){var t=this.options,i=t.from,r=t.to;return i&&r&&(e=n(3).assign({data:{from:+i,to:+r}},e)),n(66).prototype.fetch.call(this,e)},parse:function(e){return e&&e.period||e}},{hashFn:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return[t.singleMetric,+t.from,+t.to,t.track].map(i).join("_")}})},608:function(e,t,n){"use strict";var i={bandpage:"BandPage",bandcamp:"Bandcamp",bandsintown:"Bandsintown",beatport:"Beatport",berklee:"Berklee",ccmixter:"ccMixter",discogs:"Discogs",facebook:"Facebook",flavors:"flavors.me",flickr:"Flickr",foursquare:"Foursquare",freesound:"Freesound",gigatools:"Gigatools",google_plus:"Google+",hypem:"Hype Machine",instagram:"Instagram",itunes_podcast:"iTunes Podcast",lastfm:"Last.fm",mixcloud:"Mixcloud",myspace:"MySpace",ning:"Ning",pinterest:"Pinterest",purevolume:"PureVolume",residentadvisor:"Resident Advisor",residentadvisorlabel:"Resident Advisor",reverbnation:"ReverbNation",snapchat:"Snapchat",songkick:"Songkick",soundcloud:"SoundCloud",spotify:"Spotify",thedjlist:"The DJ List",tumblr:"Tumblr",twitter:"Twitter",vimeo:"Vimeo",virb:"Virb",vkontakte:"VK",whatpeopleplay:"Whatpeopleplay",wordpress:"Wordpress",youtube:"YouTube",zeroinch:"zero"};e.exports=n(66).extend({resource_type:"web-profile",getUserId:function(){return this.collection?this.collection.resource_id:this.options.userId},getNetworkName:function(){var e=this.pick("network","title","url"),t=e.network,n=e.title,r=e.url;return n?n:"personal"===t||"other"===t?r.replace(/^https?:\/\//,""):"email"===t?r:i[t]||""},isEmail:function(){return this.get("url").indexOf("@")>0},getNetworkClassName:function(){return(this.get("network")||"").replace(/[^a-z]/g,"")}},{hashFn:function(e,t){return e.id}})},678:function(e,t,n){"use strict";e.exports=function(e,t){return n(141).render(e,t&&t.hash)}},682:function(e,t){function n(e){if(this.size=0,this._data=[],e)for(var t=0;t<e.length;++t)this.insert(t,e[t])}function i(){this._data.push(0)}function r(){this._data.pop()}function o(e){for(var t=0;t<this._data.length;++t)this._data[t]&=e._data[t]}function s(e){for(var t=0;e;++t)e&=e-1;return t}function a(e,t,n){var i=(1<<t-e+1)-1<<e;return n||(i=~i),i}var l=1<<31;e.exports=n,n.combine=function(e){var t=e[0].clone();return t.applyAnd(e.slice(1)),t},n.prototype={get:function(e){return 0!==(this._data[e/32|0]&1<<e%32)},set:function(e,t){if(!(0>e||e>=this.size)){var n=e/32|0,i=e%32;this._data[n]^=(!t-1^this._data[n])&1<<i}},insert:function(e,t){if(!(e>this.size||0>e)){var n,r,o,s,u;if(this.size%32===0&&i.call(this),e<this.size){for(n=e/32|0,r=e%32,o=this._data[n],u=this._data.length-1;u>n;--u)this._data[u]<<=1,this._data[u-1]&l&&(this._data[u]|=1);s=a(0,r-1,!1),this._data[n]=o<<1&s|o&~s}++this.size,this.set(e,t)}},remove:function(e){if(!(e>=this.size||0>e)){var t,n,i,o,s;if(e<this.size-1)for(t=e/32|0,n=e%32,i=this._data[t],o=a(0,n-1,!1),this._data[t]=i>>>1&o|i&~o,s=t+1;s<this._data.length;++s)1&this._data[s]&&(this._data[s-1]|=l),this._data[s]>>>=1;--this.size%32===0&&r.call(this)}},applyAnd:function(e){for(var t=0;t<e.length;++t)o.call(this,e[t])},clearRange:function(e,t){var n,i,r,o=e/32|0,s=t/32|0;for(r=o;s>=r;++r)n=Math.max(0,e-32*r),i=Math.min(31,t-32*r),0===n&&31===i?this._data[r]=0:this._data[r]&=a(n,i,0)},clone:function(){var e=new n;return e._data=this._data.slice(),e.size=this.size,e},getIndexes:function(e){for(var t=[],n=!!e,i=0;i<this.size;++i)this.get(i)===n&&t.push(i);return t},countValuesInRange:function(e,t,n){t=t||0,n=void 0===n?this.size-1:n;var i,r,o,l,u=t/32|0,c=n/32|0,d=0;for(o=u;c>=o;++o)i=Math.max(0,t-32*o),r=Math.min(31,n-32*o),l=0===i&&31===r?this._data[o]:this._data[o]&a(i,r,1),d+=s(l);return e?d:n-t-d+1}}},683:function(e,t,n){/*!
	 * Bowser - a browser detector
	 * https://github.com/ded/bowser
	 * MIT License | (c) Dustin Diaz 2015
	 */
!function(t,i){"undefined"!=typeof e&&e.exports?e.exports=i():n(3240)(t,i)}("bowser",function(){function e(e){function t(t){var n=e.match(t);return n&&n.length>1&&n[1]||""}function n(t){var n=e.match(t);return n&&n.length>1&&n[2]||""}var i,r=t(/(ipod|iphone|ipad)/i).toLowerCase(),o=/like android/i.test(e),a=!o&&/android/i.test(e),l=/nexus\s*[0-6]\s*/i.test(e),u=!l&&/nexus\s*[0-9]+/i.test(e),c=/CrOS/.test(e),d=/silk/i.test(e),h=/sailfish/i.test(e),p=/tizen/i.test(e),f=/(web|hpw)os/i.test(e),g=/windows phone/i.test(e),m=!g&&/windows/i.test(e),_=!r&&!d&&/macintosh/i.test(e),v=!a&&!h&&!p&&!f&&/linux/i.test(e),y=t(/edge\/(\d+(\.\d+)?)/i),b=t(/version\/(\d+(\.\d+)?)/i),w=/tablet/i.test(e),x=!w&&/[^-]mobi/i.test(e),k=/xbox/i.test(e);/opera|opr|opios/i.test(e)?i={name:"Opera",opera:s,version:b||t(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(e)?i={name:"Opera Coast",coast:s,version:b||t(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?i={name:"Yandex Browser",yandexbrowser:s,version:b||t(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(e)?i={name:"UC Browser",ucbrowser:s,version:t(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(e)?i={name:"Maxthon",maxthon:s,version:t(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(e)?i={name:"Epiphany",epiphany:s,version:t(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(e)?i={name:"Puffin",puffin:s,version:t(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(e)?i={name:"Sleipnir",sleipnir:s,version:t(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(e)?i={name:"K-Meleon",kMeleon:s,version:t(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:g?(i={name:"Windows Phone",windowsphone:s},y?(i.msedge=s,i.version=y):(i.msie=s,i.version=t(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?i={name:"Internet Explorer",msie:s,version:t(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:c?i={name:"Chrome",chromeos:s,chromeBook:s,chrome:s,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(e)?i={name:"Microsoft Edge",msedge:s,version:y}:/vivaldi/i.test(e)?i={name:"Vivaldi",vivaldi:s,version:t(/vivaldi\/(\d+(\.\d+)?)/i)||b}:h?i={name:"Sailfish",sailfish:s,version:t(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?i={name:"SeaMonkey",seamonkey:s,version:t(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(e)?(i={name:"Firefox",firefox:s,version:t(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(i.firefoxos=s)):d?i={name:"Amazon Silk",silk:s,version:t(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(e)?i={name:"PhantomJS",phantom:s,version:t(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(e)?i={name:"SlimerJS",slimer:s,version:t(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?i={name:"BlackBerry",blackberry:s,version:b||t(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:f?(i={name:"WebOS",webos:s,version:b||t(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(i.touchpad=s)):/bada/i.test(e)?i={name:"Bada",bada:s,version:t(/dolfin\/(\d+(\.\d+)?)/i)}:p?i={name:"Tizen",tizen:s,version:t(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||b}:/qupzilla/i.test(e)?i={name:"QupZilla",qupzilla:s,version:t(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||b}:/chromium/i.test(e)?i={name:"Chromium",chromium:s,version:t(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||b}:/chrome|crios|crmo/i.test(e)?i={name:"Chrome",chrome:s,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:a?i={name:"Android",version:b}:/safari|applewebkit/i.test(e)?(i={name:"Safari",safari:s},b&&(i.version=b)):r?(i={name:"iphone"==r?"iPhone":"ipad"==r?"iPad":"iPod"},b&&(i.version=b)):i=/googlebot/i.test(e)?{name:"Googlebot",googlebot:s,version:t(/googlebot\/(\d+(\.\d+))/i)||b}:{name:t(/^(.*)\/(.*) /),version:n(/^(.*)\/(.*) /)},!i.msedge&&/(apple)?webkit/i.test(e)?(/(apple)?webkit\/537\.36/i.test(e)?(i.name=i.name||"Blink",i.blink=s):(i.name=i.name||"Webkit",i.webkit=s),!i.version&&b&&(i.version=b)):!i.opera&&/gecko\//i.test(e)&&(i.name=i.name||"Gecko",i.gecko=s,i.version=i.version||t(/gecko\/(\d+(\.\d+)?)/i)),i.msedge||!a&&!i.silk?r?(i[r]=s,i.ios=s):_?i.mac=s:k?i.xbox=s:m?i.windows=s:v&&(i.linux=s):i.android=s;var S="";i.windowsphone?S=t(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):r?(S=t(/os (\d+([_\s]\d+)*) like mac os x/i),S=S.replace(/[_\s]/g,".")):a?S=t(/android[ \/-](\d+(\.\d+)*)/i):i.webos?S=t(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):i.blackberry?S=t(/rim\stablet\sos\s(\d+(\.\d+)*)/i):i.bada?S=t(/bada\/(\d+(\.\d+)*)/i):i.tizen&&(S=t(/tizen[\/\s](\d+(\.\d+)*)/i)),S&&(i.osversion=S);var E=S.split(".")[0];return w||u||"ipad"==r||a&&(3==E||E>=4&&!x)||i.silk?i.tablet=s:(x||"iphone"==r||"ipod"==r||a||l||i.blackberry||i.webos||i.bada)&&(i.mobile=s),i.msedge||i.msie&&i.version>=10||i.yandexbrowser&&i.version>=15||i.vivaldi&&i.version>=1||i.chrome&&i.version>=20||i.firefox&&i.version>=20||i.safari&&i.version>=6||i.opera&&i.version>=10||i.ios&&i.osversion&&i.osversion.split(".")[0]>=6||i.blackberry&&i.version>=10.1||i.chromium&&i.version>=20?i.a=s:i.msie&&i.version<10||i.chrome&&i.version<20||i.firefox&&i.version<20||i.safari&&i.version<6||i.opera&&i.version<10||i.ios&&i.osversion&&i.osversion.split(".")[0]<6||i.chromium&&i.version<20?i.c=s:i.x=s,i}function t(e){return e.split(".").length}function n(e,t){var n,i=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n++)i.push(t(e[n]));return i}function i(e){for(var i=Math.max(t(e[0]),t(e[1])),r=n(e,function(e){var r=i-t(e);return e+=new Array(r+1).join(".0"),n(e.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});--i>=0;){if(r[0][i]>r[1][i])return 1;if(r[0][i]!==r[1][i])return-1;if(0===i)return 0}}function r(t,n,r){var o=a;"string"==typeof n&&(r=n,n=void 0),void 0===n&&(n=!1),r&&(o=e(r));var s=""+o.version;for(var l in t)if(t.hasOwnProperty(l)&&o[l])return i([s,t[l]])<0;return n}function o(e,t,n){return!r(e,t,n)}var s=!0,a=e("undefined"!=typeof navigator?navigator.userAgent:"");return a.test=function(e){for(var t=0;t<e.length;++t){var n=e[t];if("string"==typeof n&&n in a)return!0}return!1},a.isUnsupportedBrowser=r,a.compareVersions=i,a.check=o,a._detect=e,a})},740:function(e,t,n){"use strict";e.exports=n(2271)()?Object.assign:n(2272)},741:function(e,t,n){"use strict";e.exports=n(2282)()?String.prototype.contains:n(2283)},742:function(e,t,n){"use strict";var i,r=n(1139),o=n(740),s=n(233),a=n(234),l=n(295),u=n(2257),c=n(337),d=Object.defineProperty,h=Object.defineProperties;e.exports=i=function(e,t){return this instanceof i?(h(this,{__list__:l("w",a(e)),__context__:l("w",t),__nextIndex__:l("w",0)}),void(t&&(s(t.on),t.on("_add",this._onAdd),t.on("_delete",this._onDelete),t.on("_clear",this._onClear)))):new i(e,t)},h(i.prototype,o({constructor:l(i),_next:l(function(){var e;if(this.__list__)return this.__redo__&&(e=this.__redo__.shift(),void 0!==e)?e:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:l(function(){return this._createResult(this._next())}),_createResult:l(function(e){return void 0===e?{done:!0,value:void 0}:{done:!1,value:this._resolve(e)}}),_resolve:l(function(e){return this.__list__[e]}),_unBind:l(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:l(function(){return"[object Iterator]"})},u({_onAdd:l(function(e){if(!(e>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__)return void d(this,"__redo__",l("c",[e]));this.__redo__.forEach(function(t,n){t>=e&&(this.__redo__[n]=++t)},this),this.__redo__.push(e)}}),_onDelete:l(function(e){var t;e>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(t=this.__redo__.indexOf(e),-1!==t&&this.__redo__.splice(t,1),this.__redo__.forEach(function(t,n){t>e&&(this.__redo__[n]=--t)},this)))}),_onClear:l(function(){this.__redo__&&r.call(this.__redo__),this.__nextIndex__=0})}))),d(i.prototype,c.iterator,l(function(){return this})),d(i.prototype,c.toStringTag,l("","Iterator"))},755:function(e,t,n){e.exports=n.p+"assets/images/header/cloud-e365a47.png"},756:function(e,t,n){e.exports=n.p+"assets/images/header/cloud@2x-e5fba46.png"},757:function(e,t,n){e.exports=n.p+"assets/images/list-bullet-ab4e6e4.png"},760:function(e,t,n){e.exports=n.p+"assets/images/messages/deleted_user_40-8817cd0.png"},800:function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-confirm-email-banner l-inner-fullwidth"></div>\n<div class="l-banner l-inner-fullwidth">\n\n</div>\n<div class="l-listen-hero">\n\n</div>\n<div class="l-listen-wrapper">\n  <div class="l-about-main">\n    <div class="l-about-rows">\n      <div class="l-about-row">\n        <div class="l-about-top">\n\n        </div>\n      </div>\n      <div class="l-about-row l-listen__mainContent">\n        <div class="l-about-left">\n\n        </div>\n        <div class="l-about-right">\n\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="l-sidebar-right">\n\n  </div>\n</div>\n'},useData:!0})},801:function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-premium">\n  <div class="l-creators-navigation l-inner-fullwidth"></div>\n  <div class="l-premium-banner l-inner-fullwidth">\n\n  </div>\n  <div class="l-premium-content">\n\n  </div>\n</div>\n'},useData:!0})},802:function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-creators-navigation l-inner-fullwidth"></div>\n<div class="l-main"></div>\n'},useData:!0})},864:function(e,t,n){function i(e,t,n){for(var i=-1,r=s(t),o=r.length;++i<o;){var a=r[i],l=e[a],u=n(l,t[a],a,e,t);(u===u?u===l:l!==l)&&(void 0!==l||a in e)||(e[a]=u)}return e}var r=n(2868),o=n(2871),s=n(1184),a=o(function(e,t,n){return n?i(e,t,n):r(e,t)});e.exports=a},865:function(e,t,n){var i=n(1872);"string"==typeof i&&(i=[[e.id,i,""]]);n(7)(i,{})},866:function(e,t,n){var i=n(1875);"string"==typeof i&&(i=[[e.id,i,""]]);n(7)(i,{})},925:function(e,t){function n(e,t){return function(t){return e[i.pluralForm(t)].replace(/%d/i,t)}}var i=e.exports={delimiters:{thousands:",",decimal:"."},relativeTime:{justNow:"Just now",rightNow:"Right now",future:"%s",past:"%s",sec:n(["1 second","%d seconds"]),min:n(["1 minute","%d minutes"]),hour:n(["1 hour","%d hours"]),day:n(["1 day","%d days"]),month:n(["1 month","%d months"]),year:n(["1 year","%d years"])},dateFormats:{readable:"DD MMMM YYYY",readableTime:"DD MMMM YYYY HH:mm",readableAbbreviated:"MMM DD, YYYY",readableWithWeekday:"DDDD, DD MMMM YYYY","default":"DD/MM/YYYY"},dates:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortWeekdays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],minWeekdays:["Su","Mo","Tu","We","Th","Fr","Sa"]},d3:{grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"]},datePicker:{closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},pluralForm:function(e){return 1!==e?1:0}}},926:function(e,t){var n={getPurchaseTitle:function(e,t){var n,i=e.purchase_url,r=this._shops;if(t=t||"Buy",i&&!e.purchase_title)for(n in r)if(r.hasOwnProperty(n)&&r[n].test(i))switch(n){case"Flattr":return"Flattr";case"Promohutt":return"Subscribe on Promo Hutt";default:return t+" on "+n}return e.purchase_title||t},getStoreName:function(e){var t,n=e.purchase_url,i=this._shops;if(n)for(var r in i)if(i[r].test(n)){t=r;break}return t},_shops:{Amazon:/ama?zo?n\.(co\.(jp|uk)|com|de|to)/,Beatport:/beatport\.(com|it)/,iTunes:/apple\.com/,Juno:/juno(\.co\.uk|download\.com)/,"Digital Tunes":/digital-tunes\.net/,'zero"':/zero-inch\.com/,trackitdown:/trackitdown\.net/,whatpeopleplay:/whatpeopleplay\.com/,DJdownload:/djdownload\.com/,Minno:/soundra\.in/,Flattr:/flattr\.com/,Ganxy:/ganxy\.com/,Legitmix:/legitmix\.com|lgt\.mx/,Promohutt:/promohutt\.com/}};"undefined"!=typeof e&&e.exports?e.exports=n:(window.SC=window.SC||{},window.SC.OnlineStores=n)},927:function(e,t,n){e.exports=n(1232)},928:function(e,t){"use strict";function n(e,t,i,s){var a=e.firstChild,l=void 0;if(a)do a.nodeType===r?t(a):a.nodeType===o&&n(a,t,i,s),l=a;while((a=a.nextSibling)&&(!i||i(l)));s&&a&&s(a)}var i=Node,r=i.TEXT_NODE,o=i.ELEMENT_NODE;e.exports=n},929:function(e,t,n){"use strict";var i=n(975).makeFilterGenerator(["output"]);e.exports=n(132).extend({model:n(279),defaults:{query:null},setupSources:function(){var e=this.options.query;return this.remoteCollection=new(n(1259))(null,{query:e,limit:10}),[[new(n(346)),{maxModels:2}],[new(n(535)),{maxModels:2}],this.remoteCollection]},updateFilter:function(e){var t=i(e);this.setFilter("term",function(e){return"query"===e.get("kind")||t(e)}),this.remoteCollection.updateQuery(e)},getQueryUrn:function(){return this.remoteCollection.queryUrn},extractModel:function(e){switch(e.get("kind")){case"user":return new(n(279))({entity:n(3).clone(e.attributes),output:e.get("username"),highlights:[],kind:"following"});case"track":return new(n(279))({entity:n(3).clone(e.attributes),output:e.get("title"),highlights:[],kind:"like"});default:return!1}}},{hashFn:function(){return 1}})},930:function(e,t,n){"use strict";function i(e){var t=e.audibleInformation.model;t&&this.attachments.add({urn:t.getUrn(),timestamp:e.timestamp})}function r(e){var t=this;e.some(function(e){return e===t.options.resource_id?(t.fetchUnread(),!0):void 0})}e.exports=n(73).extend({model:n(600),attachments:null,setup:function(e){var t=e.resource_id;this.attachments=new(n(1248))(null,{conversationId:t}),this.listenTo(this,"audibleInformationUpdated",i).listenTo(n(57),"new-unread-messages",r)},baseUrl:function(){return n(316).baseUrlWithId(this.resource_id,"messages")},comparator:function(e,t){return t.sentAt()-e.sentAt()},fetchUnread:function(){this.fetch({add:!0,remove:!1,url:this.baseUrl()+"?limit=10&linked_partitioning=1"})},getAttachments:function(){return this.attachments}},{onCleanup:function(e){e.attachments.release()}})},931:function(e,t,n){"use strict";e.exports=n(132).extend(n(319).withOptions({fields:["username"]}),{model:n(64),defaults:{limit:2e3,maxModels:null},setup:function(e){var t=e.query;n(132).prototype.setup.apply(this,arguments),this.setUserInput(t)},setupSources:function(){return[[new(n(346)),{maxModels:this.options.maxModels}]]}},{prefetch:function(){n(346).prefetch()}})},932:function(e,t,n){"use strict";e.exports=n(73).extend(n(123),{model:n(67),next_href:!1,lastFetchTime:Date.now(),getSourceInfo:function(){return this.options.sourceInfo||{}}})},933:function(e,t,n){"use strict";e.exports=n(73).extend({actionName:null,defaults:{resource_id:null,resource_type:null},model:n(64),setup:function(e){var t=e.resource_type,i=e.resource_id,r=n(3).result(this,"actionName"),o=t,s=r+":target:"+o+":"+i;this.listenTo(n(74),s,this.onAction)},onAction:function(e){if(e.state)this.add({id:e.origin},{at:0});else{var t=this.get(e.origin);t&&this.remove(t)}}})},934:function(e,t,n){"use strict";function i(e){var t=e.state,i=e.target,r=this.get(i);if(r&&this.remove(r),t){var o=new(n(125))({id:i});o.release(),this.add(o,{at:0})}}var r=e.exports=n(73).extend({model:n(125),setup:function(){this.listenTo(n(74),"likeStation",i)},baseUrl:function(){return this.getEndpointUrl("likedStations")},parse:function(e){var t=e.collection,i=n(3).values(n(125).types);return t.filter(function(e){var t=e.type;return i.indexOf(t)>-1})}},{hashFn:function(){return 1}});n(360).applyTo(r,{fields:["title"]})},936:function(e,t,n){"use strict";function i(e){return"artist_recommended"}function r(e){return e.split("").reduce(function(e,t){return e+t.charCodeAt(0)},0)%1e3}e.exports=n(73).extend({model:n(125),defaults:{type:"artist"},baseUrl:function(){var e=i(this.options.type);return this.getEndpointUrl("recommendedStations",{type:e})},shuffleBy:function(e){var t=r(e);this.comparator=function(i){return i.id===e?1/0:n(94).toComponents(i.id).id%t},this.sort()}},{hashFn:function(e,t){return t.type||"artist"}})},938:function(e,t,n){(function(t){"use strict";var i=200,r=1e3,o=5e3;e.exports=n(73).extend({model:n(1430),_isLooping:!1,_loopInterval:null,_approvalDeferred:null,_isPending:!1,setup:function(){var e=this;this.listenTo(this,"change:entry_time",n(3).debounce(function(){e.sort({silent:!0})},i)).listenTo(this,"submission:success",function(){e._isPending=!0,e.trigger("change:approval")})},fetch:function(e){return e.timeout=o,n(73).prototype.fetch.call(this,e)},baseUrl:function(){return this.getEndpointUrl("visuals",{},{urn:"soundcloud:sounds:"+this.resource_id})},isLooping:function(){return this._isLooping},getLoopInterval:function(){return this._loopInterval},parse:function(e){var t=e&&e.visuals;return t?(t=n(3).map(t,function(e){return e.id=n(94).getAsAttributes(e.urn).id,e.filename=e.visual_url.split("/").pop(),e}),e.is_looping&&e.loop_interval&&(this._isLooping=!0,this._loopInterval=Math.max(r,e.loop_interval)),t):this.toJSON()},isApproved:function(){return!(!this.length||!this.at(0).get("urn"))},isPending:function(){return this._isPending},submitForApproval:function(e){if(!n(96).formData)return void this.trigger("submission:error");var i=new window.FormData,r={visuals:[],user_urn:n(55).get("me").getUrn(),urn:e};return this.forEach(function(e,t){var o;e&&e.has("file")&&(o=e.toJSON(),n(3).omit(o,"visual_url","urn","_resource_id","_resource_type"),o.entry_time=Math.floor(o.entry_time),r.visuals.push(o),i.append("visuals[upload-"+t+"]",e.get("file"),e.get("filename")))}),i.append("visuals_data",JSON.stringify(r)),t.ajax({url:n(55).get("visualsQueueHost"),type:"POST",data:i,processData:!1,contentType:!1,dataType:"json",beforeSend:function(e){e.setRequestHeader("Authorization","OAuth "+n(61).getAuthToken())}}).done(this.trigger.bind(this,"submission:success")).fail(this.trigger.bind(this,"submission:error"))},fetchApprovalStatus:function(){var e=this,i="soundcloud:sounds:"+this.options.resource_id,r=n(55).get("me").getUrn(),o=this._approvalDeferred,s=function(t){t&&t.urn&&(e._isPending=!0),o.resolve()};return o&&"rejected"!==o.state()?o:(o=this._approvalDeferred=n(56).defer(),t.ajax(n(55).get("visualsQueueHost")+"/"+i,{data:{user_urn:r},beforeSend:function(e){e.setRequestHeader("Authorization","OAuth "+n(61).getAuthToken())}}).done(s).fail(o.reject),o)},comparator:function(e){return e.get("entry_time")}})}).call(t,n(1))},939:function(e,t,n){"use strict";var i=(e.exports=n(132).extend({model:n(383),setupSources:function(){var e=this.options,t=e.category,r=[new(n(1262))(null,e)];return t&&"who_to_follow"!==t||r.unshift(new i(null,e)),r}}),n(73).extend(n(1363),{model:n(383),adZone:"suggestedUsers",_deferred:null,meIds:null,setup:function(){this.meIds=new(n(483))},fetch:function(e){var t=this;if(this._deferred)return this._deferred;var i=this._deferred=n(56).defer();return this.meIds.fetch().done(function(){n(73).prototype.fetch.call(t,e).done(i.resolve).fail(i.reject)}).fail(i.reject),i.always(function(){t._deferred=null}),i},parse:function(e){var t=this.meIds;return e.filter(function(e){return!t.get(e.origin.id)})}},{onCleanup:function(e){e.meIds.release(),e.meIds=null},hashFn:function(e,t){return t&&t.category||1}}))},940:function(e,t,n){"use strict";e.exports=n(308).extend({defaults:{limit:n(55).get("maxComments")},initialize:function(){n(308).prototype.initialize.apply(this,arguments),this.threads=[],this.listenTo(this,"remove",this._removeComment)},threads:null,_addComment:function(e){var t,i,r,o,s=e.get("timestamp");r=this.getTimestampIndex(s),i=this.threads[r],e.created_timestamp=Date.parse(e.get("created_at")),i&&i[0]===s?(o=n(3).sortedIndex(i[1],e,function(e){return e.created_timestamp}),i[1].splice(o,0,e)):(t=[s,[e]],this.threads.splice(r,0,t))},_removeComment:function(e){var t,n=this.getThreadAtTimestamp(e.get("timestamp"));n&&(t=n[1].indexOf(e),t>-1&&n[1].splice(t,1))},_prepareModel:function(){var e=n(308).prototype._prepareModel.apply(this,arguments);return e.created_timestamp=Date.parse(e.created_at),e.get("timestamp")>this.soundDuration&&e.set({timestamp:n(106).EMPTY_TIMESTAMP},{silent:!0}),this._addComment(e),e},comparator:function(e,t){var i=e.attributes.timestamp===n(106).EMPTY_TIMESTAMP?1/0:e.attributes.timestamp,r=t.attributes.timestamp===n(106).EMPTY_TIMESTAMP?1/0:t.attributes.timestamp;return i-r||e.created_timestamp-t.created_timestamp},getThreadComments:function(e){var t,i,r=arguments[1],o=n(3).isNumber(r)?r:0,s=n(3).isBoolean(r)?r:!1;return t=0===o?this.getThreadAtTimestamp(e):n(3).find(this.threads,function(t){return Math.abs(e-t[0])<=o&&t[0]!==n(106).EMPTY_TIMESTAMP}),i=t?t[1]:[],i.filter(s?function(e){return e.id}:n(3).identity)},getTimestamps:function(){return n(3).pluck(this.threads,0)},getTimestampIndex:function(e){return n(3).sortedIndex(this.threads,[e],function(e){return e[0]===n(106).EMPTY_TIMESTAMP?1/0:e[0]})},getThreadAtTimestamp:function(e){var t=this.getTimestampIndex(e),n=this.threads[t];return n&&n[0]===e?n:null}})},943:function(e,t,n){"use strict";e.exports=n(132).extend(n(123),n(319).withOptions({fields:["playlist.title","playlist.user.username"]}),{model:n(381),filters:{likedAlbumsOnly:function(e){return e.isAlbum()&&e.isLiked()}},setupSources:function(){return[new(n(944))(null,this.options)]},getSourceInfo:function(){return{type:"user-liked-albums",resourceId:this.options.userId,resourceType:"user"}}})},944:function(e,t,n){"use strict";function i(e){var t=e.object;this.add(n(381).getModelData(this.options.userId,"playlist",t.id),{at:0})}function r(e){var t=(e.targetType,e.state),i=e.origin,r=e.target,s=void 0;t?this.add(n(381).getModelData(i,"playlist-like",r),{at:0}):(s=o.call(this,r))&&this.remove(s)}function o(e){return this.find(function(t){return e===t.get("playlist").id})}var s=[{emitter:n(74),event:"like",getInstance:function(e,t){var n=t.origin,i=t.targetType;return e.options.userId===n&&"playlist"===i},handler:r},{emitter:n(74),event:"createPlaylist",getInstance:function(e,t){var n=t.object;return e.options.userId===n.get("user_id")},handler:i}];e.exports=n(152).extend(n(195).withOptions({events:s}),{model:n(381),defaults:{type:"playlists/liked_and_owned"},baseUrl:function(){return this.getEndpointUrl("collectionPlaylists",{id:this.options.userId})},audibleAt:function(e){var t=this.at(e);return t&&t.getAudible()}})},945:function(e,t,n){"use strict";function i(e){return e.isOwned()}function r(e){return e.isLiked()}e.exports=n(132).extend(n(123),n(319).withOptions({fields:["playlist.title","playlist.user.username"]}),{model:n(381),_filterType:"all",filters:{playlistsOnly:function(e){return!e.isAlbum()}},setupSources:function(){return[new(n(944))(null,this.options)]},setTypeFilter:function(e){if(e!==this._filterType)switch(this._filterType=e,e){case"all":this.setFilter("likedOrCreated",null);break;case"liked":this.setFilter("likedOrCreated",r);break;case"owned":this.setFilter("likedOrCreated",i)}},compareModels:function(e,t){return e.get("playlist").id===t.get("playlist").id},getSourceInfo:function(){return{type:"user-playlists",resourceId:this.options.userId,resourceType:"user"}}})},947:function(e,t,n){"use strict";e.exports=n(73).extend({model:n(67),defaults:{limit:250},baseUrl:function(){return this.getEndpointUrl("userTracks",{id:this.options.userId})}})},948:function(e,t,n){"use strict";e.exports=n(73).extend({model:n(352),url:null,defaults:{userId:null},setup:function(e){this.webProfiles=new(n(450))(null,e)},fetch:function(){var e=this;return this.webProfiles.fetch().done(function(t){e.lastFetchTime=Date.now(),e.reset(t)})},toJSON:function(e){return this.filter(function(e){return!e.isEmpty()}).map(function(t){return t.toJSON(e)})},saveEdits:function(){var e=this,t=this.map(function(e){return e.validate()});return n(56).all(t).then(function(){for(var t=arguments.length,i=Array(t),r=0;t>r;r++)i[r]=arguments[r];return n(3).all(i)?n(22).sync("create",e,{url:e.webProfiles.url()}):n(56).reject()})}},{hashFn:function(e,t){return t.userId}})},949:function(e,t,n){"use strict";e.exports=[n(51).t("January"),n(51).t("February"),n(51).t("March"),n(51).t("April"),n(51).t("May"),n(51).t("June"),n(51).t("July"),n(51).t("August"),n(51).t("September"),n(51).t("October"),n(51).t("November"),n(51).t("December")]},950:function(e,t){"use strict";function n(e,t){return 1===t?"rgb("+e+")":"rgba("+e+","+t+")"}var i="0,0,0",r="102,102,102",o="153,153,153",s="229,229,229",a="255,0,0",l="255,191,153",u="255,51,0",c="255,85,0",d="255,119,0",h="255,101,0",p="255,255,255";e.exports={_config:{barWidth:2,gapWidth:1,fadeInSteps:10,fixedTimeIndicator:!0,commentLines:!1,fullHighlight:!0},"default":{progressGradient:[[0,d],[.7,u],[.701,c],[1,c]],loaderGradient:[[0,i,.5],[1,i,.5]],backgroundGradient:[[0,r],[.7,r],[.701,r,.5],[1,r,.5]],gapGradient:[[0,o,.5],[.7,o,.5],[.701,p,0],[1,p,0]],scrubberGradientBackward:[[0,r,.5],[.7,r,.5],[.701,r,0],[1,r,0]],scrubberGradientForward:[[0,c,.5],[.7,c,.5],[.701,c,0],[1,c,0]],highlightGradientPlayed:[[0,c],[.7,c],[.701,c],[1,c]],highlightGradientUnplayed:[[0,i,.5],[1,i,.5]],progressIndicatorBg:n(i,1),progressIndicatorColor:n(h,1),durationIndicatorBg:n(i,1),durationIndicatorColor:n(o,1),dividerColorPrevious:n(a,1),dividerColorUpcoming:n(o,1)},inverted:{progressGradient:[[0,d],[.7,u],[.701,l],[1,l]],loaderGradient:[[0,p],[1,p]],backgroundGradient:[[0,p],[.7,p],[.701,s],[1,s]],gapGradient:[[0,p,0],[.28,p,.3],[.7,p,.5],[.701,p,.125],[1,p,.125]],scrubberGradientBackward:[[0,p,.5],[.7,p,.5],[.701,p,0],[1,p,0]],scrubberGradientForward:[[0,c,.5],[.7,c,.5],[.701,c,0],[1,c,0]],highlightGradientPlayed:[[0,c],[.7,c],[.701,c],[1,c]],highlightGradientUnplayed:[[0,p],[1,p]],progressIndicatorBg:n(i,1),progressIndicatorColor:n(h,1),durationIndicatorBg:n(i,1),durationIndicatorColor:n(o,1),dividerColorPrevious:n(a,1),dividerColorUpcoming:n(o,1)}}},960:function(e,t,n){(function(t){"use strict";var i=(new Date).getFullYear();e.exports=n(80).extend({fields:{year:{defaultValue:null,datasource:n(3).range(i-13,i-100,-1).map(function(e){return{value:e,label:e}})},month:{defaultValue:null,datasource:n(949).map(function(e,t){return{value:t+1,label:e}})}},buttons:{save:{label:n(51).t("Verify age"),action:"save"}},actions:{"default":"save",save:function(){var e=this,t=n(56).defer();return this.validate().done(function(n){n?e.saveOwnAge().done(t.resolve).fail(t.reject):t.reject()}).fail(t.reject),t}},constraints:{year:[[n(70),{message:n(51).t("Select a year.")}]],month:[[n(70),{message:n(51).t("Select a month.")}]]},saveOwnAge:function(){var e="/users/"+n(55).get("me").getUrn(),i=n(65).stringify({path:e},n(55).get("api_v2_host"));return t.ajax({type:"PUT",url:i,contentType:"application/json",dataType:"json",data:JSON.stringify({date_of_birth:this.pick("year","month")})})}},{hashFn:function(){return 1}})}).call(t,n(1))},1016:function(e,t,n){"use strict";var i=new(n(104))("already-seen"),r=function(e){var t=e.id,n=e.key;return t||n||null};e.exports=n(66).extend({resource_type:"announcement",defaults:{key:"",message:"",dismissable:!0},baseUrl:function(){return this.getEndpointUrl("announcement",{id:this.id})},fetch:function(){},dismiss:function(){this.destroy()},isNew:function(){return!n(61).isLoggedIn()||!this.get("dismissable")},isAlreadySeen:function(){return 1===i.get(this.get("key"))},markAsSeen:function(){i.set(this.get("key"),1)}},{hashFn:r})},1017:function(e,t,n){"use strict";e.exports=n(66).extend({resource_type:"app",baseUrl:function(){return this.getEndpointUrl("app",{id:this.id})}})},1018:function(e,t,n){"use strict";e.exports=n(240).extend({readEndpoint:"userBlockingsIds",createEndpoint:"userBlockingsCreate",deleteEndpoint:"userBlockingsDelete",getDeleteEndpointPathParams:function(e){return{urn:n(94).fromComponents({collection:"users",id:e})}},getCreateEndpointQueryParams:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=t.reported,i=t.remove_activities;return{user_id:e,reported:n?"true":null,remove_activities:i?"true":null}}})},1022:function(e,t,n){"use strict";e.exports=n(66).extend({baseUrl:function(){return this.getEndpointUrl("territoriesWhichRequireExplicitRightsholder",{},{isrc:this.id})},parse:function(e){return{territories:e}}},{hashFn:function(e){var t=e.id,n=void 0===t?"":t,i=e.resource_id;return i||"isrc:"+n}})},1023:function(e,t,n){"use strict";e.exports=n(240).extend({maxResults:1e3,readOnly:!0,readEndpoint:"myFollowersIds"})},1024:function(e,t,n){"use strict";e.exports=n(240).extend({readEndpoint:"likedStationIds",createEndpoint:"likeStation",deleteEndpoint:"unlikeStation"})},1027:function(e,t,n){"use strict";e.exports=n(240).extend({readEndpoint:"playlistLikesIds",createEndpoint:"playlistLikesCreate",deleteEndpoint:"playlistLikesDelete"})},1028:function(e,t,n){"use strict";e.exports=n(240).extend({readEndpoint:"playlistRepostsIds",createEndpoint:"playlistRepostsCreate",deleteEndpoint:"playlistRepostsDelete"})},1030:function(e,t,n){"use strict";e.exports=n(240).extend({readEndpoint:"soundLikesIds",createEndpoint:"soundLikesCreate",deleteEndpoint:"soundLikesDelete"})},1031:function(e,t,n){"use strict";e.exports=n(240).extend({readEndpoint:"soundRepostsIds",createEndpoint:"soundRepostsCreate",deleteEndpoint:"soundRepostsDelete"})},1091:function(e,t,n){"use strict";e.exports=function(e){var t=n(175).usertextOneline(e,{links:!1});return new(n(20).SafeString)(n(175).splitWords(t))}},1092:function(e,t){"use strict";e.exports={"sc-artwork-placeholder-0":["#846170","#70929c"],"sc-artwork-placeholder-1":["#846170","#e6846e"],"sc-artwork-placeholder-2":["#846170","#8e8485"],"sc-artwork-placeholder-3":["#70929c","#846170"],"sc-artwork-placeholder-4":["#70929c","#e6846e"],"sc-artwork-placeholder-5":["#70929c","#8e8485"],"sc-artwork-placeholder-6":["#e6846e","#846170"],"sc-artwork-placeholder-7":["#e6846e","#70929c"],"sc-artwork-placeholder-8":["#e6846e","#8e8485"],"sc-artwork-placeholder-9":["#8e8485","#846170"],"sc-artwork-placeholder-10":["#8e8485","#70929c"],"sc-artwork-placeholder-11":["#8e8485","#e6846e"]}},1093:function(e,t,n){"use strict";function i(e){function t(e){var t=e.prefix;return[r(e)].filter(Boolean).concat(e.subroutes).map(function(e){var i=e.route,r=""===i?"":o(e.route).test("")?"(?:/(?:"+i+"))?":"/(?:"+i+")";return n(3).defaults({route:t+r},e)})}function i(e){var t=o(e.route),n=s(e),i=null!=e.name?e.name:e.route;return{name:i,route:t,handler:n,code:e.code}}var o=n(1233).create({includeQueryParams:!0,caseInsensitive:!1,definitions:{user:":alphanum{1,255}",sound:":alphanum{1,255}",playlist:":alphanum{1,255}",id:":num+",stationType:"track|artist",stationIdentifier:":alphanum{1,255}(?:/:alphanum{1,255})?",secretToken:"s-[a-zA-Z0-9]{5}",group:":alphanum{1,255}",exploreCategory:"[^/]+",tag:".+",conversationId:":num+:(?::num+|system)",code:"\\w+",planName:"pro(?:-unlimited)?",metric:"\\w+",date:"[^/]+",monthYear:"(?:0[1-9]|1[012])-20[0-9]{2}"}});return e.reduce(function(e,n){return n.subroutes?e.concat(t(n)):e.concat(n)},[]).map(i)}function r(e){var t=e.fallThrough;return t===!0?null:{route:".*",handler:t?s(t):o}}function o(){return this.apply("error",{type:"404"})}function s(e){var t=e.redirect,n=t?function(){var e="string"==typeof t?t:t.apply(this,arguments);return this.navigate(l(e,this.getQueryString()),{replace:!0,trigger:!0})}:e.handler;return e.requiresLogin?a(n):n}function a(e){return function(){return this.isLoggedIn()?e.apply(this,arguments):this.unauthenticated()}}function l(e){var t=arguments.length<=1||void 0===arguments[1]?"":arguments[1],n=e.indexOf("#")>-1?e.split(/(?=#)/):[e,""],i=n[0],r=n[1];return e.indexOf("?")>-1?i+t.replace(/^\?/,"&")+r:i+t+r}e.exports=i([{route:"(.*)",handler:function(e){var t=e.replace(/[,.)]+$/,"");
return e!==t?this.navigate("/"+t,{trigger:!0,replace:!0}):this.apply("error",{type:"404"})}},{prefix:":user/:sound",subroutes:n(1856),fallThrough:!0},{prefix:":user/sets/:playlist",subroutes:n(1853)},{prefix:":user",subroutes:n(1861),fallThrough:!0},{prefix:":user/stats",subroutes:n(1860)},{prefix:":user/(?!sets/):sound/stats",subroutes:n(1859)},{prefix:"you",subroutes:n(1862)},{prefix:"you/apps",subroutes:n(1848)},{prefix:"stations",subroutes:n(1857)},{route:"(?:you/)?groups(?:/.*)?",code:410,redirect:"/"},{route:"",handler:function(){return this.isLoggedIn()?this.navigate("/stream",{replace:!0,trigger:!0}):this.apply("front")}},{prefix:"charts",subroutes:n(1845)},{route:"(?:(?:explore|tracks)(?:/:exploreCategory)?|tags|hot|latest)",redirect:function(e){return e?"/charts/top?genre="+e:"/charts/top"}},{prefix:"discover",subroutes:n(1849),fallThrough:{redirect:"/discover"}},{route:"campaigns/:alphanum+",code:410,redirect:"/"},{prefix:"people",subroutes:n(1852)},{route:"popular/searches(?:/(:num+))?",handler:function(e){return this.apply("popular-searches",{subpage:Number(e||"1")})}},{route:"(go-terms-of-use|community-guidelines|imprint|law-enforcement-guidelines)",handler:function(e){return this.apply("static-page",{pageName:e})}},{route:"(terms-of-use(?:-pro)?(?:/:monthYear)?)",handler:function(e){return this.apply("static-page",{pageName:e})}},{prefix:"pages",subroutes:n(1851)},{prefix:"tags",subroutes:n(1858),fallThrough:{redirect:"/charts"}},{route:"search(?:/(sounds|sets|people|groups|go|albums))?",handler:function(e){return this.apply("search",{category:e})}},{route:"notifications",requiresLogin:!0,handler:function(){return this.apply("activity")}},{route:"stream/activity",redirect:"/notifications"},{route:"stream",requiresLogin:!0,handler:function(){return this.apply("stream")}},{route:"logout",code:401,handler:function(){return this.apply("logout")}},{prefix:"mobile",subroutes:n(1850)},{route:"upload",handler:function(){return this.apply("upload")}},{route:"upload-beta",handler:function(){return this.apply("upload")}},{route:"next-upload",redirect:"/upload"},{route:"messages(?:/:conversationId)?",requiresLogin:!0,handler:function(e){return this.apply("inbox",{conversationId:e})}},{route:"xbox-app",handler:function(){return this.apply("xbox")}},{prefix:"pro",subroutes:n(1847)},{route:"premium(/.*)?",redirect:function(e){return"/pro"+(e||"")}},{prefix:"go",subroutes:n(1846)},{route:"(soundcloudgo|soundcloudgoplus|goplus|GO)",redirect:"/go"},{route:"(soundcloudgo/soundcloudgo)",redirect:"/go#feature-chart"},{prefix:"settings",subroutes:n(1854),fallThrough:{redirect:"/settings"}},{route:"dashboard(?:/.*)?",redirect:"/stream"},{route:"creativecommons",redirect:"/search/sounds/?filter.license=to_share"},{route:"(tracks|people|groups)/search",redirect:function(e){return"tracks"===e&&(e="sounds"),"/search/"+e}},{prefix:"signin",subroutes:n(1855)},{route:"login(?:/(.*))?",redirect:function(e){return this.isLoggedIn()?"/stream":["/signin",e].filter(Boolean).join("/")}},{route:"signup",redirect:"/signin"},{route:"activate(?:/(:alphanum+))?",requiresLogin:!0,handler:function(e){return this.apply("activate",{code:e})}},{route:"("+["settings/(connections)(?:/(.*))?","upload-classic"].join("|")+")(/.*)?",handler:function(){return this.notImplemented()}}])},1096:function(e,t,n){(function(e,i){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
"use strict";function r(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function o(){return e.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,n){if(o()<n)throw new RangeError("Invalid typed array length");return e.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(n),t.__proto__=e.prototype):(null===t&&(t=new e(n)),t.length=n),t}function e(t,n,i){if(!(e.TYPED_ARRAY_SUPPORT||this instanceof e))return new e(t,n,i);if("number"==typeof t){if("string"==typeof n)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return a(this,t,n,i)}function a(e,t,n,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?p(e,t,n,i):"string"==typeof t?d(e,t,n):f(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(0>e)throw new RangeError('"size" argument must not be negative')}function u(e,t,n,i){return l(t),0>=t?s(e,t):void 0!==n?"string"==typeof i?s(e,t).fill(n,i):s(e,t).fill(n):s(e,t)}function c(t,n){if(l(n),t=s(t,0>n?0:0|g(n)),!e.TYPED_ARRAY_SUPPORT)for(var i=0;n>i;++i)t[i]=0;return t}function d(t,n,i){if(("string"!=typeof i||""===i)&&(i="utf8"),!e.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var r=0|_(n,i);t=s(t,r);var o=t.write(n,i);return o!==r&&(t=t.slice(0,o)),t}function h(e,t){var n=t.length<0?0:0|g(t.length);e=s(e,n);for(var i=0;n>i;i+=1)e[i]=255&t[i];return e}function p(t,n,i,r){if(n.byteLength,0>i||n.byteLength<i)throw new RangeError("'offset' is out of bounds");if(n.byteLength<i+(r||0))throw new RangeError("'length' is out of bounds");return n=void 0===i&&void 0===r?new Uint8Array(n):void 0===r?new Uint8Array(n,i):new Uint8Array(n,i,r),e.TYPED_ARRAY_SUPPORT?(t=n,t.__proto__=e.prototype):t=h(t,n),t}function f(t,n){if(e.isBuffer(n)){var i=0|g(n.length);return t=s(t,i),0===t.length?t:(n.copy(t,0,0,i),t)}if(n){if("undefined"!=typeof ArrayBuffer&&n.buffer instanceof ArrayBuffer||"length"in n)return"number"!=typeof n.length||X(n.length)?s(t,0):h(t,n);if("Buffer"===n.type&&Z(n.data))return h(t,n.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function g(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function m(t){return+t!=t&&(t=0),e.alloc(+t)}function _(t,n){if(e.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var r=!1;;)switch(n){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return W(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return G(t).length;default:if(r)return W(t).length;n=(""+n).toLowerCase(),r=!0}}function v(e,t,n){var i=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),0>=n)return"";if(n>>>=0,t>>>=0,t>=n)return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return M(this,t,n);case"latin1":case"binary":return R(this,t,n);case"base64":return P(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function y(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function b(t,n,i,r,o){if(0===t.length)return-1;if("string"==typeof i?(r=i,i=0):i>2147483647?i=2147483647:-2147483648>i&&(i=-2147483648),i=+i,isNaN(i)&&(i=o?0:t.length-1),0>i&&(i=t.length+i),i>=t.length){if(o)return-1;i=t.length-1}else if(0>i){if(!o)return-1;i=0}if("string"==typeof n&&(n=e.from(n,r)),e.isBuffer(n))return 0===n.length?-1:w(t,n,i,r,o);if("number"==typeof n)return n=255&n,e.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,n,i):Uint8Array.prototype.lastIndexOf.call(t,n,i):w(t,[n],i,r,o);throw new TypeError("val must be string, number or Buffer")}function w(e,t,n,i,r){function o(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var s=1,a=e.length,l=t.length;if(void 0!==i&&(i=String(i).toLowerCase(),"ucs2"===i||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;s=2,a/=2,l/=2,n/=2}var u;if(r){var c=-1;for(u=n;a>u;u++)if(o(e,u)===o(t,-1===c?0:u-c)){if(-1===c&&(c=u),u-c+1===l)return c*s}else-1!==c&&(u-=u-c),c=-1}else for(n+l>a&&(n=a-l),u=n;u>=0;u--){for(var d=!0,h=0;l>h;h++)if(o(e,u+h)!==o(t,h)){d=!1;break}if(d)return u}return-1}function x(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?(i=Number(i),i>r&&(i=r)):i=r;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;i>s;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function k(e,t,n,i){return K(W(t,e.length-n),e,n,i)}function S(e,t,n,i){return K(V(t),e,n,i)}function E(e,t,n,i){return S(e,t,n,i)}function T(e,t,n,i){return K(G(t),e,n,i)}function A(e,t,n,i){return K(Y(t,e.length-n),e,n,i)}function P(e,t,n){return 0===t&&n===e.length?J.fromByteArray(e):J.fromByteArray(e.slice(t,n))}function C(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;n>r;){var o=e[r],s=null,a=o>239?4:o>223?3:o>191?2:1;if(n>=r+a){var l,u,c,d;switch(a){case 1:128>o&&(s=o);break;case 2:l=e[r+1],128===(192&l)&&(d=(31&o)<<6|63&l,d>127&&(s=d));break;case 3:l=e[r+1],u=e[r+2],128===(192&l)&&128===(192&u)&&(d=(15&o)<<12|(63&l)<<6|63&u,d>2047&&(55296>d||d>57343)&&(s=d));break;case 4:l=e[r+1],u=e[r+2],c=e[r+3],128===(192&l)&&128===(192&u)&&128===(192&c)&&(d=(15&o)<<18|(63&l)<<12|(63&u)<<6|63&c,d>65535&&1114112>d&&(s=d))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|1023&s),i.push(s),r+=a}return D(i)}function D(e){var t=e.length;if(ee>=t)return String.fromCharCode.apply(String,e);for(var n="",i=0;t>i;)n+=String.fromCharCode.apply(String,e.slice(i,i+=ee));return n}function M(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;n>r;++r)i+=String.fromCharCode(127&e[r]);return i}function R(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;n>r;++r)i+=String.fromCharCode(e[r]);return i}function I(e,t,n){var i=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>i)&&(n=i);for(var r="",o=t;n>o;++o)r+=q(e[o]);return r}function O(e,t,n){for(var i=e.slice(t,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function L(e,t,n){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function N(t,n,i,r,o,s){if(!e.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>o||s>n)throw new RangeError('"value" argument is out of bounds');if(i+r>t.length)throw new RangeError("Index out of range")}function F(e,t,n,i){0>t&&(t=65535+t+1);for(var r=0,o=Math.min(e.length-n,2);o>r;++r)e[n+r]=(t&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function B(e,t,n,i){0>t&&(t=4294967295+t+1);for(var r=0,o=Math.min(e.length-n,4);o>r;++r)e[n+r]=t>>>8*(i?r:3-r)&255}function U(e,t,n,i,r,o){if(n+i>e.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("Index out of range")}function j(e,t,n,i,r){return r||U(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(e,t,n,i,23,4),n+4}function H(e,t,n,i,r){return r||U(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(e,t,n,i,52,8),n+8}function $(e){if(e=z(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function z(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function q(e){return 16>e?"0"+e.toString(16):e.toString(16)}function W(e,t){t=t||1/0;for(var n,i=e.length,r=null,o=[],s=0;i>s;++s){if(n=e.charCodeAt(s),n>55295&&57344>n){if(!r){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(t-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(56320>n){(t-=3)>-1&&o.push(239,191,189),r=n;continue}n=(r-55296<<10|n-56320)+65536}else r&&(t-=3)>-1&&o.push(239,191,189);if(r=null,128>n){if((t-=1)<0)break;o.push(n)}else if(2048>n){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(65536>n){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function V(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function Y(e,t){for(var n,i,r,o=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),i=n>>8,r=n%256,o.push(r),o.push(i);return o}function G(e){return J.toByteArray($(e))}function K(e,t,n,i){for(var r=0;i>r&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function X(e){return e!==e}var J=n(1865),Q=n(2863),Z=n(2864);t.Buffer=e,t.SlowBuffer=m,t.INSPECT_MAX_BYTES=50,e.TYPED_ARRAY_SUPPORT=void 0!==i.TYPED_ARRAY_SUPPORT?i.TYPED_ARRAY_SUPPORT:r(),t.kMaxLength=o(),e.poolSize=8192,e._augment=function(t){return t.__proto__=e.prototype,t},e.from=function(e,t,n){return a(null,e,t,n)},e.TYPED_ARRAY_SUPPORT&&(e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0})),e.alloc=function(e,t,n){return u(null,e,t,n)},e.allocUnsafe=function(e){return c(null,e)},e.allocUnsafeSlow=function(e){return c(null,e)},e.isBuffer=function(e){return!(null==e||!e._isBuffer)},e.compare=function(t,n){if(!e.isBuffer(t)||!e.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(t===n)return 0;for(var i=t.length,r=n.length,o=0,s=Math.min(i,r);s>o;++o)if(t[o]!==n[o]){i=t[o],r=n[o];break}return r>i?-1:i>r?1:0},e.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(t,n){if(!Z(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return e.alloc(0);var i;if(void 0===n)for(n=0,i=0;i<t.length;++i)n+=t[i].length;var r=e.allocUnsafe(n),o=0;for(i=0;i<t.length;++i){var s=t[i];if(!e.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,o),o+=s.length}return r},e.byteLength=_,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;e>t;t+=2)y(this,t,t+1);return this},e.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;e>t;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},e.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;e>t;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},e.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):v.apply(this,arguments)},e.prototype.equals=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:0===e.compare(this,t)},e.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},e.prototype.compare=function(t,n,i,r,o){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=0),void 0===i&&(i=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),0>n||i>t.length||0>r||o>this.length)throw new RangeError("out of range index");if(r>=o&&n>=i)return 0;if(r>=o)return-1;if(n>=i)return 1;if(n>>>=0,i>>>=0,r>>>=0,o>>>=0,this===t)return 0;for(var s=o-r,a=i-n,l=Math.min(s,a),u=this.slice(r,o),c=t.slice(n,i),d=0;l>d;++d)if(u[d]!==c[d]){s=u[d],a=c[d];break}return a>s?-1:s>a?1:0},e.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},e.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},e.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},e.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t=0|t,isFinite(n)?(n=0|n,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(0>n||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return x(this,e,t,n);case"utf8":case"utf-8":return k(this,e,t,n);case"ascii":return S(this,e,t,n);case"latin1":case"binary":return E(this,e,t,n);case"base64":return T(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;e.prototype.slice=function(t,n){var i=this.length;t=~~t,n=void 0===n?i:~~n,0>t?(t+=i,0>t&&(t=0)):t>i&&(t=i),0>n?(n+=i,0>n&&(n=0)):n>i&&(n=i),t>n&&(n=t);var r;if(e.TYPED_ARRAY_SUPPORT)r=this.subarray(t,n),r.__proto__=e.prototype;else{var o=n-t;r=new e(o,void 0);for(var s=0;o>s;++s)r[s]=this[s+t]}return r},e.prototype.readUIntLE=function(e,t,n){e=0|e,t=0|t,n||L(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return i},e.prototype.readUIntBE=function(e,t,n){e=0|e,t=0|t,n||L(e,t,this.length);for(var i=this[e+--t],r=1;t>0&&(r*=256);)i+=this[e+--t]*r;return i},e.prototype.readUInt8=function(e,t){return t||L(e,1,this.length),this[e]},e.prototype.readUInt16LE=function(e,t){return t||L(e,2,this.length),this[e]|this[e+1]<<8},e.prototype.readUInt16BE=function(e,t){return t||L(e,2,this.length),this[e]<<8|this[e+1]},e.prototype.readUInt32LE=function(e,t){return t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},e.prototype.readUInt32BE=function(e,t){return t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},e.prototype.readIntLE=function(e,t,n){e=0|e,t=0|t,n||L(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*t)),i},e.prototype.readIntBE=function(e,t,n){e=0|e,t=0|t,n||L(e,t,this.length);for(var i=t,r=1,o=this[e+--i];i>0&&(r*=256);)o+=this[e+--i]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*t)),o},e.prototype.readInt8=function(e,t){return t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},e.prototype.readInt16LE=function(e,t){t||L(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt16BE=function(e,t){t||L(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt32LE=function(e,t){return t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},e.prototype.readInt32BE=function(e,t){return t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},e.prototype.readFloatLE=function(e,t){return t||L(e,4,this.length),Q.read(this,e,!0,23,4)},e.prototype.readFloatBE=function(e,t){return t||L(e,4,this.length),Q.read(this,e,!1,23,4)},e.prototype.readDoubleLE=function(e,t){return t||L(e,8,this.length),Q.read(this,e,!0,52,8)},e.prototype.readDoubleBE=function(e,t){return t||L(e,8,this.length),Q.read(this,e,!1,52,8)},e.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=0|t,n=0|n,!i){var r=Math.pow(2,8*n)-1;N(this,e,t,n,r,0)}var o=1,s=0;for(this[t]=255&e;++s<n&&(o*=256);)this[t+s]=e/o&255;return t+n},e.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=0|t,n=0|n,!i){var r=Math.pow(2,8*n)-1;N(this,e,t,n,r,0)}var o=n-1,s=1;for(this[t+o]=255&e;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+n},e.prototype.writeUInt8=function(t,n,i){return t=+t,n=0|n,i||N(this,t,n,1,255,0),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[n]=255&t,n+1},e.prototype.writeUInt16LE=function(t,n,i){return t=+t,n=0|n,i||N(this,t,n,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):F(this,t,n,!0),n+2},e.prototype.writeUInt16BE=function(t,n,i){return t=+t,n=0|n,i||N(this,t,n,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):F(this,t,n,!1),n+2},e.prototype.writeUInt32LE=function(t,n,i){return t=+t,n=0|n,i||N(this,t,n,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=255&t):B(this,t,n,!0),n+4},e.prototype.writeUInt32BE=function(t,n,i){return t=+t,n=0|n,i||N(this,t,n,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):B(this,t,n,!1),n+4},e.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=0|t,!i){var r=Math.pow(2,8*n-1);N(this,e,t,n,r-1,-r)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)0>e&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},e.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=0|t,!i){var r=Math.pow(2,8*n-1);N(this,e,t,n,r-1,-r)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)0>e&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},e.prototype.writeInt8=function(t,n,i){return t=+t,n=0|n,i||N(this,t,n,1,127,-128),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[n]=255&t,n+1},e.prototype.writeInt16LE=function(t,n,i){return t=+t,n=0|n,i||N(this,t,n,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):F(this,t,n,!0),n+2},e.prototype.writeInt16BE=function(t,n,i){return t=+t,n=0|n,i||N(this,t,n,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):F(this,t,n,!1),n+2},e.prototype.writeInt32LE=function(t,n,i){return t=+t,n=0|n,i||N(this,t,n,4,2147483647,-2147483648),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24):B(this,t,n,!0),n+4},e.prototype.writeInt32BE=function(t,n,i){return t=+t,n=0|n,i||N(this,t,n,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):B(this,t,n,!1),n+4},e.prototype.writeFloatLE=function(e,t,n){return j(this,e,t,!0,n)},e.prototype.writeFloatBE=function(e,t,n){return j(this,e,t,!1,n)},e.prototype.writeDoubleLE=function(e,t,n){return H(this,e,t,!0,n)},e.prototype.writeDoubleBE=function(e,t,n){return H(this,e,t,!1,n)},e.prototype.copy=function(t,n,i,r){if(i||(i=0),r||0===r||(r=this.length),n>=t.length&&(n=t.length),n||(n=0),r>0&&i>r&&(r=i),r===i)return 0;if(0===t.length||0===this.length)return 0;if(0>n)throw new RangeError("targetStart out of bounds");if(0>i||i>=this.length)throw new RangeError("sourceStart out of bounds");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-n<r-i&&(r=t.length-n+i);var o,s=r-i;if(this===t&&n>i&&r>n)for(o=s-1;o>=0;--o)t[o+n]=this[o+i];else if(1e3>s||!e.TYPED_ARRAY_SUPPORT)for(o=0;s>o;++o)t[o+n]=this[o+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+s),n);return s},e.prototype.fill=function(t,n,i,r){if("string"==typeof t){if("string"==typeof n?(r=n,n=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),1===t.length){var o=t.charCodeAt(0);256>o&&(t=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!e.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t=255&t);if(0>n||this.length<n||this.length<i)throw new RangeError("Out of range index");if(n>=i)return this;n>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0);var s;if("number"==typeof t)for(s=n;i>s;++s)this[s]=t;else{var a=e.isBuffer(t)?t:W(new e(t,r).toString()),l=a.length;for(s=0;i-n>s;++s)this[s+n]=a[s%l]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(t,n(1096).Buffer,function(){return this}())},1097:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(46,function(e){i=n(1281);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1098:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(24,function(e){i=n(1282);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1099:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(33,function(e){i=n(1283);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1100:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(22,function(e){i=n(1284);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1101:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(25,function(e){i=n(1285);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1102:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(15,function(e){i=n(1286);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1103:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(30,function(e){i=n(1287);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1104:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(38,function(e){i=n(1288);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1105:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(41,function(e){i=n(1289);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1106:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(23,function(e){i=n(1290);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1107:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(20,function(e){i=n(1291);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1108:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(31,function(e){i=n(1292);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1109:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(6,function(e){i=n(1293);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1110:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(16,function(e){i=n(1294);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1111:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(39,function(e){i=n(1295);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1112:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(17,function(e){i=n(1296);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1113:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(29,function(e){i=n(1297);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1114:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(11,function(e){i=n(1298);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1115:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(45,function(e){i=n(1299);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1116:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(44,function(e){i=n(1300);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1117:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(37,function(e){i=n(1301);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1118:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(21,function(e){i=n(1302);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1119:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(43,function(e){i=n(1303);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1120:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(14,function(e){i=n(1304);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1121:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(34,function(e){i=n(1305);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1122:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(19,function(e){i=n(1306);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1123:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(9,function(e){i=n(1307);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1124:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(18,function(e){i=n(1308);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1125:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(36,function(e){i=n(1309);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1126:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(32,function(e){i=n(1310);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1127:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(10,function(e){i=n(1311);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1128:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(28,function(e){i=n(1312);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1129:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(8,function(e){i=n(1313);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1130:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(40,function(e){i=n(1314);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1131:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(7,function(e){i=n(1315);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1132:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(12,function(e){i=n(1316);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1133:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(42,function(e){i=n(1317);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1134:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(13,function(e){i=n(1318);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1135:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(26,function(e){i=n(1319);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1136:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(5,function(e){i=n(1320);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1137:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(35,function(e){i=n(1321);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1138:function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(27,function(e){i=n(1322);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},1139:function(e,t,n){"use strict";var i=n(234);e.exports=function(){return i(this).length=0,this}},1140:function(e,t){"use strict";e.exports=function(){}},1141:function(e,t,n){"use strict";var i=n(2269),r=Math.max;e.exports=function(e){return r(0,i(e))}},1142:function(e,t,n){"use strict";var i=n(424),r=Array.prototype.forEach,o=Object.create,s=function(e,t){var n;for(n in e)t[n]=e[n]};e.exports=function(e){var t=o(null);return r.call(arguments,function(e){i(e)&&s(Object(e),t)}),t}},1143:function(e,t){"use strict";var n=Object.create,i=Object.getPrototypeOf,r={};e.exports=function(){var e=Object.setPrototypeOf,t=arguments[0]||n;return"function"!=typeof e?!1:i(e(t(null),r))===r}},1144:function(e,t,n){"use strict";var i,r=n(2277),o=n(234),s=Object.prototype.isPrototypeOf,a=Object.defineProperty,l={configurable:!0,enumerable:!1,writable:!0,value:void 0};i=function(e,t){if(o(e),null===t||r(t))return e;throw new TypeError("Prototype must be null or an object")},e.exports=function(e){var t,n;return e?(2===e.level?e.set?(n=e.set,t=function(e,t){return n.call(i(e,t),t),e}):t=function(e,t){return i(e,t).__proto__=t,e}:t=function r(e,t){var n;return i(e,t),n=s.call(r.nullPolyfill,e),n&&delete r.nullPolyfill.__proto__,null===t&&(t=r.nullPolyfill),e.__proto__=t,n&&a(r.nullPolyfill,"__proto__",l),e},Object.defineProperty(t,"level",{configurable:!1,enumerable:!1,writable:!1,value:e.level})):null}(function(){var e,t=Object.create(null),n={},i=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(i){try{e=i.set,e.call(t,n)}catch(r){}if(Object.getPrototypeOf(t)===n)return{set:e,level:2}}return t.__proto__=n,Object.getPrototypeOf(t)===n?{level:2}:(t={},t.__proto__=n,Object.getPrototypeOf(t)===n?{level:1}:!1)}()),n(2274)},1145:function(e,t,n){"use strict";var i=n(2287);e.exports=function(e){if(!i(e))throw new TypeError(e+" is not iterable");return e}},1148:function(e,t,n){e.exports=n.p+"assets/images/empty-states/playlists-17e39df.png"},1150:function(e,t,n){e.exports=n.p+"assets/images/empty-states/stream-d2c2a1b.png"},1151:function(e,t,n){e.exports=n.p+"assets/images/empty-states/stream@2x-fab0f85.png"},1152:function(e,t,n){e.exports=n.p+"assets/images/empty-states/tracks-b8fba92.png"},1153:function(e,t,n){e.exports=n.p+"assets/images/empty-states/tracks@2x-59b77a9.png"},1154:function(e,t,n){e.exports=n.p+"assets/images/failed-25974ff.png"},1155:function(e,t,n){e.exports=n.p+"assets/images/failed@2x-0ba1589.png"},1156:function(e,t,n){e.exports=n.p+"assets/images/header/query-suggestion-ed120ce.svg"},1157:function(e,t,n){e.exports=n.p+"assets/images/header/search-dbfe5cb.svg"},1158:function(e,t,n){e.exports=n.p+"assets/images/home/hp_image-6155d6b.jpg"},1159:function(e,t,n){e.exports=n.p+"assets/images/home/hp_image@2x-ae2160d.jpg"},1160:function(e,t,n){e.exports=n.p+"assets/images/notifications/error-18e777c.png"},1161:function(e,t,n){e.exports=n.p+"assets/images/notifications/good-248c30c.png"},1162:function(e,t,n){e.exports=n.p+"assets/images/notifications/good@2x-2dda7c7.png"},1163:function(e,t,n){e.exports=n.p+"assets/images/playback/volume-max-2831f71.svg"},1164:function(e,t,n){e.exports=n.p+"assets/images/playback/volume-medium-95eaa90.svg"},1165:function(e,t,n){e.exports=n.p+"assets/images/playback/volume-muted-f2ccb6f.svg"},1166:function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-main"></div>\n\n'},useData:!0})},1167:function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-collection">\n  <div class="l-nav">\n\n  </div>\n  <div class="l-main">\n\n  </div>\n</div>\n'},useData:!0})},1168:function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-main"></div>\n\n<div class="l-consumer-sub-footer"></div>\n'},useData:!0})},1169:function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-front">\n  <div class="l-front-hero l-inner-fullwidth">\n\n  </div>\n  <div class="l-front-content">\n\n  </div>\n  <div class="l-front-mobile-teaser l-inner-fullwidth">\n\n  </div>\n  <div class="l-front-osc-teaser l-inner-fullwidth">\n\n  </div>\n  <div class="l-front-signup-teaser">\n\n  </div>\n  <div class="l-front-footer">\n\n  </div>\n</div>\n'},useData:!0})},1170:function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-messages-left sc-border-box"></div>\n<div class="l-messages-top g-z-index-content"></div>\n<div class="l-messages-main"></div>\n'},useData:!0})},1171:function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-confirm-email-banner l-inner-fullwidth"></div>\n<div class="l-banner l-inner-fullwidth"></div>\n<div class="l-listen-hero"></div>\n<div class="l-engagement"></div>\n<div class="l-main"></div>\n'},useData:!0})},1172:function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-confirm-email-banner l-inner-fullwidth"></div>\n<div class="l-banner l-inner-fullwidth">\n\n</div>\n<div class="listen-content">\n\n</div>\n<div class="l-three-column listen-about">\n  <div class="l-sidebar-left">\n\n  </div>\n  <div class="l-main sc-border-light-right">\n\n  </div>\n  <div class="l-sidebar-right">\n\n  </div>\n</div>\n';
},useData:!0})},1173:function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-creators-navigation l-inner-fullwidth"></div>\n<div class="l-main"></div>\n'},useData:!0})},1174:function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-creators-navigation l-inner-fullwidth"></div>\n<div class="l-oscp-headline">\n\n</div>\n<div class="l-oscp-main">\n\n</div>\n</div>\n<div class="l-oscp-footer">\n\n</div>\n'},useData:!0})},1175:function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-search l-fixed-fluid">\n  <div class="l-fixed-top">\n\n  </div>\n  <div class="l-fixed-left">\n\n  </div>\n  <div class="l-main">\n\n  </div>\n</div>\n'},useData:!0})},1176:function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-station-hero l-inner-fullwidth">\n\n</div>\n<div class="l-one-column">\n  <div class="l-main l-station-main">\n\n  </div>\n</div>\n'},useData:!0})},1177:function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-creators-navigation l-inner-fullwidth">\n\n</div>\n<div class="l-top">\n\n</div>\n<div class="l-main">\n\n</div>\n'},useData:!0})},1178:function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-creators-navigation l-inner-fullwidth"></div>\n<div class="l-confirm-email-banner l-inner-fullwidth"></div>\n<div class="l-main-upload"></div>\n<div class="l-main-footer"></div>\n'},useData:!0})},1179:function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-confirm-email-banner l-inner-fullwidth"></div>\n<div class="l-banner l-inner-fullwidth">\n\n</div>\n<div class="l-user-hero">\n\n</div>\n<div class="l-vertical-bar">\n\n</div>\n<div class="l-fluid-fixed">\n  <div class="l-main l-user-main sc-border-light-right">\n\n  </div>\n  <div class="l-sidebar-right l-user-sidebar-right">\n\n  </div>\n</div>\n'},useData:!0})},1180:function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-main"></div>\n\n<div class="l-footer-container"></div>\n'},useData:!0})},1183:function(e,t,n){(function(t){"use strict";function i(e,t){return 1===arguments.length?r(e):o(e,t)}function r(e){return JSON.parse(l.getItem(e))}function o(e,t){try{return l.setItem(e,JSON.stringify(t)),!0}catch(n){return!1}}function s(e){return l.removeItem(e)}function a(){return l.clear()}var l=function(e){try{if("localStorage"in t&&t.localStorage)return t.localStorage}catch(n){}return e}(n(2866)),u=n(2867);i.set=o,i.get=r,i.remove=s,i.clear=a,i.on=u.on,i.off=u.off,e.exports=i}).call(t,function(){return this}())},1184:function(e,t,n){function i(e){return function(t){return null==t?void 0:t[e]}}function r(e){return null!=e&&s(v(e))}function o(e,t){return e="number"==typeof e||p.test(e)?+e:-1,t=null==t?_:t,e>-1&&e%1==0&&t>e}function s(e){return"number"==typeof e&&e>-1&&e%1==0&&_>=e}function a(e){for(var t=u(e),n=t.length,i=n&&e.length,r=!!i&&s(i)&&(h(e)||d(e)),a=-1,l=[];++a<n;){var c=t[a];(r&&o(c,i)||g.call(e,c))&&l.push(c)}return l}function l(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function u(e){if(null==e)return[];l(e)||(e=Object(e));var t=e.length;t=t&&s(t)&&(h(e)||d(e))&&t||0;for(var n=e.constructor,i=-1,r="function"==typeof n&&n.prototype===e,a=Array(t),u=t>0;++i<t;)a[i]=i+"";for(var c in e)u&&o(c,t)||"constructor"==c&&(r||!g.call(e,c))||a.push(c);return a}var c=n(2872),d=n(2874),h=n(2875),p=/^\d+$/,f=Object.prototype,g=f.hasOwnProperty,m=c(Object,"keys"),_=9007199254740991,v=i("length"),y=m?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&r(e)?a(e):l(e)?m(e):[]}:a;e.exports=y},1185:function(e,t,n){var i=n(1866);"string"==typeof i&&(i=[[e.id,i,""]]);n(7)(i,{})},1186:function(e,t,n){var i=n(1867);"string"==typeof i&&(i=[[e.id,i,""]]);n(7)(i,{})},1187:function(e,t,n){var i=n(1868);"string"==typeof i&&(i=[[e.id,i,""]]);n(7)(i,{})},1188:function(e,t,n){var i=n(1869);"string"==typeof i&&(i=[[e.id,i,""]]);n(7)(i,{})},1189:function(e,t,n){var i=n(1870);"string"==typeof i&&(i=[[e.id,i,""]]);n(7)(i,{})},1190:function(e,t,n){var i=n(1871);"string"==typeof i&&(i=[[e.id,i,""]]);n(7)(i,{})},1191:function(e,t,n){var i=n(1873);"string"==typeof i&&(i=[[e.id,i,""]]);n(7)(i,{})},1192:function(e,t,n){var i=n(1874);"string"==typeof i&&(i=[[e.id,i,""]]);n(7)(i,{})},1193:function(e,t,n){var i=n(1876);"string"==typeof i&&(i=[[e.id,i,""]]);n(7)(i,{})},1194:function(e,t,n){var i=n(1877);"string"==typeof i&&(i=[[e.id,i,""]]);n(7)(i,{})},1195:function(e,t,n){var i=n(1878);"string"==typeof i&&(i=[[e.id,i,""]]);n(7)(i,{})},1210:function(e,t,n){function i(e){return n(r(e))}function r(e){return o[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var o={"./activate":1097,"./activate.js":1097,"./activity":1098,"./activity.js":1098,"./charts":1099,"./charts.js":1099,"./checkout":1100,"./checkout.js":1100,"./checkout.tmpl":1166,"./collection":1101,"./collection.css":1185,"./collection.js":1101,"./collection.tmpl":1167,"./consumer-premium":1102,"./consumer-premium.css":1186,"./consumer-premium.js":1102,"./consumer-premium.tmpl":1168,"./copyright-form":1103,"./copyright-form.js":1103,"./developer-apps":1104,"./developer-apps.js":1104,"./error":1105,"./error.js":1105,"./front":1106,"./front.css":1187,"./front.js":1106,"./front.tmpl":1169,"./inbox":1107,"./inbox.css":1188,"./inbox.js":1107,"./inbox.tmpl":1170,"./listen":1109,"./listen-blocked.tmpl":1171,"./listen-network":1108,"./listen-network.js":1108,"./listen-promoted.css":1189,"./listen-promoted.tmpl":1172,"./listen.css":1190,"./listen.js":1109,"./listen.tmpl":800,"./logout":1110,"./logout.js":1110,"./mobile":1112,"./mobile-pulse":1111,"./mobile-pulse.js":1111,"./mobile-pulse.tmpl":1173,"./mobile.js":1112,"./new-for-you":1113,"./new-for-you.js":1113,"./oscp":1114,"./oscp.js":1114,"./oscp.tmpl":1174,"./password-reset-success":1115,"./password-reset-success.js":1115,"./people":1117,"./people-directory":1116,"./people-directory.js":1116,"./people.js":1117,"./personal-recommended":1118,"./personal-recommended.js":1118,"./popular-searches":1119,"./popular-searches.js":1119,"./premium":1120,"./premium.css":865,"./premium.js":1120,"./premium.tmpl":801,"./purchased":1121,"./purchased.js":1121,"./search":1122,"./search.css":1191,"./search.js":1122,"./search.tmpl":1175,"./settings":1123,"./settings.css":1192,"./settings.js":1123,"./signin":1124,"./signin.css":866,"./signin.js":1124,"./static-page":1125,"./static-page.js":1125,"./station":1126,"./station.css":1193,"./station.js":1126,"./station.tmpl":1176,"./stats":1127,"./stats.js":1127,"./stats.tmpl":802,"./stream":1128,"./stream-explore.tmpl":519,"./stream.js":1128,"./subscriptions":1129,"./subscriptions.js":1129,"./tags":1130,"./tags.js":1130,"./track-manager":1131,"./track-manager.js":1131,"./track-manager.tmpl":1177,"./track-stats":1132,"./track-stats.js":1132,"./two-column-sound-hero.css":1194,"./two-column-sound-hero.tmpl":2501,"./unsubscribed":1133,"./unsubscribed.js":1133,"./upload":1134,"./upload.js":1134,"./upload.tmpl":1178,"./user":1136,"./user-network":1135,"./user-network.js":1135,"./user.css":1195,"./user.js":1136,"./user.tmpl":1179,"./widgets":1137,"./widgets.js":1137,"./xbox":1138,"./xbox.js":1138,"./xbox.tmpl":1180};i.keys=function(){return Object.keys(o)},i.resolve=r,e.exports=i,i.id=1210},1212:function(e,t,n){var i=n(46).Deferred,r=4;e.exports=function(e){var t,n,o,s,a,l,u,c;e&&(o=e.data||null,n=e.url||"",t=e.type||"GET",s=e.dataType||"text",a=e.async,l=e.timeout,u=e.beforeSend||null);var d=i();a=a!==!1;var h=new XMLHttpRequest;return h.open(t,n,a),a&&(h.responseType="text"),u&&u(h),h.onreadystatechange=function(){if(h.readyState===r)if(clearTimeout(c),0!==h.status&&h.status<400){var e=h.responseText;if("json"===s)try{e=JSON.parse(e)}catch(t){return void d.reject(h)}d.resolve(e)}else d.reject(h)},null!=l&&(c=setTimeout(function(){h.readyState!==r&&(h.abort(),d.reject(h))},l)),h.send(o),d.promise()}},1216:function(e,t,n){(function(t){"use strict";function i(){return _.call(arguments,function(e,t){return t&&v(t).forEach(function(n){void 0===e[n]?e[n]=t[n]:"object"==typeof e[n]&&"object"==typeof t[n]&&(e[n]=i(e[n],t[n]))}),e},{})}function r(e){return JSON.parse(JSON.stringify(e))}function o(e){return"function"==typeof e?e():e}function s(e,t,n,r){if(b.forEach(function(e){if(!(e in t))throw new Error('Endpoint "'+n+'" missing required field: "'+e+'"')}),e.indexOf(t.service)<0)throw new Error('Endpoint "'+n+'" references unknown service: "'+t.service+'"');return i({name:n},t,r,y)}function a(e,t,n){return x.forEach(function(n){if(!(n in e))throw new Error('Service "'+t+'" missing required field: "'+n+'"')}),i({name:t},e,n,w)}function l(e,t){return e.replace(/:([\w-]+)/g,function(e,n){return null!=t[n]?t[n]:""})}function u(e,t){var n=e[t];if(!n)throw new Error('Could not find config for endpoint "'+t+'"');return r(n)}function c(e,t){var n=e[t];if(!n)throw new Error('Could not find config for service "'+t+'"');return r(n)}function d(e,t,n,r,s){var a=n.protocol,u=n.hostname,c=n.port,d=l(t.path,r),h=i(s,o(t.query),n.query);return e.formatUrl(a,u,c,d,h)}function h(e,t){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],i=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],r=arguments.length<=4||void 0===arguments[4]?{}:arguments[4],o=arguments[5],s=arguments.length<=6||void 0===arguments[6]?[]:arguments[6],a=u(e.endpoints,t),l=c(e.services,a.service),d={pathParams:n,queryParams:i,headers:r,data:o,args:s};return g(e.middleware.concat(p.bind(null,e)),e.Promise,{requestOptions:d,endpoint:a,service:l})}function p(e,t){var n=t.requestOptions,r=t.endpoint,o=t.service,s=n.pathParams,a=n.queryParams,l=n.headers,u=n.data;return e.requestTransport({method:r.method,url:d(e,r,o,s,a),dataType:r.dataType,data:u||null,headers:i(l,r.headers,o.headers),timeout:r.timeout})}function f(){return"undefined"!=typeof window?window.Promise:t.Promise}var g=n(1217),m=Array.prototype,_=(m.slice,m.reduce),v=Object.keys,y={dataType:"json",method:"get",query:{},timeout:3e3,customSettings:{}},b=["path","service"],w={headers:{},port:null,protocol:"http",query:{},customSettings:{}},x=["hostname"];e.exports=function(e,t,n){var i,r=arguments.length<=3||void 0===arguments[3]?f():arguments[3],o=e.endpoints,l=e.services,p=e.defaults||{},g={middleware:[]};if(g.Promise=r,!o||!l)throw new Error("Cannot create endpoints: invalid config format");if("function"!=typeof t)throw new Error("Cannot create endpoints: no api transport given");if(g.requestTransport=t,"function"!=typeof n)throw new Error("Cannot create endpoints: no url formatter given");return g.formatUrl=n,g.services=v(l).reduce(function(e,t){return e[t]=a(l[t],t,p.services),e},{}),i=v(g.services),g.endpoints=v(o).reduce(function(e,t){return e[t]=s(i,o[t],t,p.endpoints),e},{}),{callEndpoint:h.bind(null,g),getUrlForEndpoint:function(e,t,n){var i=u(g.endpoints,e),r=c(g.services,i.service);return d(g,i,r,t,n)},use:function(e){return void g.middleware.push(e)}}}}).call(t,function(){return this}())},1218:function(e,t,n){e.exports=n(1219)},1219:function(e,t){function n(e,t){return"function"==typeof t.test?t.test(e):e===t}e.exports=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return{get:function(t,i){return e[t]&&n(e[t].experiment_name,i)?e[t].variant_name:!1},getAll:function(){return e},getVariantIds:function(){return Object.keys(e).reduce(function(t,n){return null!=e[n].variant_id&&(t[n]=e[n].variant_id),t},{})}}}},1220:function(e,t){function n(e){var t=e.data[0],n=e.data[1];if(!/https?:\/\/(.+\.|)soundcloud\.(com|dev\:[0-9]{4})/.test(e.origin))return!1;switch(t){case"i18n-locale:rendered":return i(n);case"i18n-locale:set-locale-always":return o.onLocaleChange()}}function i(e){r.style.width=e.width,r.style.height=e.height}var r,o=e.exports={init:function(e){if(!e||!e.selector||!e.host)throw new Error("i18n locale iframe: Missing parameter(s)");r=window.document.createElement("iframe"),r.src=e.host+"/i18n-locale-switcher.html",r.frameBorder=0,r.style.border="none",r.style.backgroundColor="transparent",window.addEventListener("message",n),window.document.querySelector(e.selector).appendChild(r)},onLocaleChange:function(){window.location.reload()}}},1221:function(e,t,n){function i(e){this.phrases={},this.setLocale(e)}function r(){var e=o.call(this);this.number=new f(e),this.dateTime=new p(e,this.number),this.price=new g(this.locale,this.number)}function o(){return k[this.locale]||k[w]}function s(e,t){return t?e.replace(b,function(e,n,i,r){var o=t[n||i||r];return i?v(o):o}):e}function a(e,t){return k[e].pluralForm(t)}function l(e){return Array.isArray(e)?e[0]:e.toString()}function u(e){for(var t,n,i=1,r=arguments.length;r>i;i++){t=arguments[i];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}function c(e){for(var t=1,n=arguments.length;n>t;t++){var i=arguments[t];for(var r in i)void 0===e[r]&&(e[r]=i[r])}return e}function d(e){var t=e.dates,n=e.d3;return{decimal:e.delimiters.decimal,thousands:e.delimiters.thousands,grouping:n.grouping,currency:n.currency,dateTime:n.dateTime,date:n.date,time:n.time,periods:n.periods,days:t.weekdays,shortDays:t.shortWeekdays,months:t.months,shortMonths:t.monthsShort}}function h(e){var t=e.datePicker,n=e.dates;return{closeText:t.closeText,prevText:t.prevText,nextText:t.nextText,currentText:t.currentText,weekHeader:t.weekHeader,dateFormat:t.dateFormat,firstDay:t.firstDay,isRTL:t.isRTL,showMonthAfterYear:t.showMonthAfterYear,yearSuffix:t.yearSuffix,monthNames:n.months,monthNamesShort:n.monthsShort,dayNames:n.weekdays,dayNamesShort:n.shortWeekdays,dayNamesMin:n.minWeekdays}}var p=n(1222),f=n(1223),g=n(1224),m="sclocale",_={};e.exports=i;var v,y="[a-zA-Z0-9_]+",b=new RegExp("\\[\\[\\[("+y+")\\]\\]\\]|\\[\\[("+y+")\\]\\]|(%d)","g"),w="en",x=n(1226),k={de:n(1225),en:n(925),en_GB:n(925),es:x,es_419:x,fr:n(1227),it:n(1228),nl:n(1229),pt_BR:n(1230),sv:n(1231)};i.prototype.availableLocales=Object.keys(k),i.prototype.getLocaleCookieName=function(){return m},i.prototype.setLocale=function(e){this.locale=k[e]?e:w,r.call(this)},i.prototype.setPhrases=function(e){this.phrases=e||{}},i.prototype.extend=function(e){u(this.phrases,e)},i.prototype.getLocaleDataFor=function(e){var t=o.call(this),n=_;switch(e){case"d3":return n.d3=n.d3||d(t);case"jquery.datepicker":return n["jquery.datepicker"]=n["jquery.datepicker"]||h(t);default:return t}},i.prototype.t=function(e,t,n,i){var r=(n?n+"::":"")+e,o=this.phrases[r]||e;return s.call(this,l(o),t)},i.prototype.tp=function(e,t,n,i,r,o){var u=(r?r+"::":"")+e,d=this.phrases[u],h=this.number.format(n);return d=d?d[a(this.locale,n)]:a("en",n)?t:e,s.call(this,l(d),c({"%d":h},i))},v=function(){function e(e){return t[e]||"&amp;"}var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n=/[&<>"'`]/g,i=/[&<>"'`]/;return function(t){return t||0===t?(t=""+t,i.test(t)?t.replace(n,e):t):""}}()},1225:function(e,t){function n(e,t){return function(t){return e[i.pluralForm(t)].replace(/%d/i,t)}}var i={delimiters:{thousands:".",decimal:","},relativeTime:{justNow:"Vor kurzem",rightNow:"Jetzt",future:"%s",past:"%s",sec:n(["1 Sekunde","%d Sekunden"]),min:n(["1 Minute","%d Minuten"]),hour:n(["1 Stunde","%d Stunden"]),day:n(["1 Tag","%d Tagen"]),month:n(["1 Monat","%d Monaten"]),year:n(["1 Jahr","%d Jahren"])},dateFormats:{readable:"DD MMMM YYYY",readableTime:"DD MMMM YYYY HH:mm",readableAbbreviated:"DD MMM YYYY",readableWithWeekday:"DDDD, DD MMMM YYYY","default":"DD.MM.YYYY"},dates:{months:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthsShort:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],weekdays:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortWeekdays:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],minWeekdays:["So","Mo","Di","Mi","Do","Fr","Sa"]},d3:{grouping:[3],currency:[""," "],dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"]},datePicker:{closeText:"Schlieen",prevText:"Zurck",nextText:"Weiter",currentText:"Heute",weekHeader:"KW",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},pluralForm:function(e){return 1!==e?1:0}};e.exports=i},1226:function(e,t){function n(e,t){return function(t){return e[i.pluralForm(t)].replace(/%d/i,t)}}var i=e.exports={delimiters:{thousands:".",decimal:","},relativeTime:{justNow:"Ahora mismo",rightNow:"Ahora mismo",future:"%s",past:"%s",sec:n(["1 segundo","%d segundos"]),min:n(["1 minuto","%d minutos"]),hour:n(["1 hora","%d horas"]),day:n(["1 da","%d das"]),month:n(["1 mes","%d meses"]),year:n(["1 ao","%d aos"])},dateFormats:{readable:"DD MMMM YYYY",readableTime:"DD MMMM YYYY HH:mm",readableAbbreviated:"DD MMM YYYY",readableWithWeekday:"DDDD, DD MMMM YYYY","default":"DD/MM/YYYY"},dates:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthsShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],weekdays:["Domingo","Lunes","Martes","Mircoles","Jueves","Viernes","Sbado"],shortWeekdays:["Dom.","Lun.","Mar.","Mi.","Jue.","Vie.","Sb."],minWeekdays:["Do","Lu","Ma","Mi","Ju","Vi","S"]},d3:{grouping:[3],currency:["",""],dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"]},datePicker:{closeText:"Cerrar",prevText:"Ant",nextText:"Sig",currentText:"Hoy",weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},pluralForm:function(e){return 1!==e?1:0}}},1227:function(e,t){function n(e,t){return function(t){return e[i.pluralForm(t)].replace(/%d/i,t)}}var i=e.exports={delimiters:{thousands:".",decimal:","},relativeTime:{justNow:"Rcemment",rightNow:"Maintenant",future:"%s",past:"%s",sec:n(["1 seconde","%d secondes"]),min:n(["1 minute","%d minutes"]),hour:n(["1 heure","%d heures"]),day:n(["1 jour","%d jours"]),month:n(["1 mois","%d mois"]),year:n(["1 an","%d ans"])},dateFormats:{readable:"DD MMMM YYYY",readableTime:"DD MMMM YYYY HH:mm",readableAbbreviated:"DD MMM YYYY",readableWithWeekday:"DDDD DD MMMM YYYY","default":"DD/MM/YYYY"},dates:{months:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"],monthsShort:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],weekdays:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortWeekdays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],minWeekdays:["Di","Lu","Ma","Me","Je","Ve","Sa"]},d3:{grouping:[3],currency:["$",""],dateTime:"%A, le %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"]},datePicker:{closeText:"Fermer",prevText:"Prcdent",nextText:"Suivant",currentText:"Aujourd'hui",weekHeader:"Sem.",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},pluralForm:function(e){return e>1?1:0}}},1228:function(e,t){function n(e,t){return function(t){return e[i.pluralForm(t)].replace(/%d/i,t)}}var i=e.exports={delimiters:{thousands:".",decimal:","},relativeTime:{justNow:"Un momento fa",rightNow:"Ora",future:"%s",past:"%s",sec:n(["1 secondo","%d secondi"]),min:n(["1 minuto","%d minuti"]),hour:n(["1 ora","%d ore"]),day:n(["1 giorno","%d giorni"]),month:n(["1 mese","%d mesi"]),year:n(["1 anno","%d anni"])},dateFormats:{readable:"DD MMMM YYYY",readableTime:"DD MMMM YYYY HH:mm",readableAbbreviated:"MMM DD, YYYY",readableWithWeekday:"DDDD, DD MMMM YYYY","default":"DD/MM/YYYY"},dates:{months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthsShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],weekdays:["Domenica","Luned","Marted","Mercoled","Gioved","Venerd","Sabato"],shortWeekdays:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],minWeekdays:["Do","Lu","Ma","Me","Gi","Ve","Sa"]},d3:{grouping:[3],currency:["",""],dateTime:"%A %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"]},datePicker:{closeText:"Chiudi",prevText:"Prec",nextText:"Succ",currentText:"Oggi",weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},pluralForm:function(e){return 1!==e?1:0}}},1229:function(e,t){function n(e,t){return function(t){return e[i.pluralForm(t)].replace(/%d/i,t)}}var i=e.exports={delimiters:{thousands:",",decimal:"."},relativeTime:{justNow:"Zojuist",rightNow:"Nu",future:"%s",past:"%s",sec:n(["1 seconde","%d seconden"]),min:n(["1 minuut","%d minuten"]),hour:n(["1 uur","%d uur"]),day:n(["1 dag","%d dagen"]),month:n(["1 maand","%d maanden"]),year:n(["1 jaar","%d jaar"])},dateFormats:{readable:"DD MMMM YYYY",readableTime:"DD MMMM YYYY HH:mm",readableAbbreviated:"MMM DD, YYYY",readableWithWeekday:"DDDD, DD MMMM YYYY","default":"DD-MM-YYYY"},dates:{months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],monthsShort:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"],weekdays:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],shortWeekdays:["zon","maa","din","woe","don","vri","zat"],minWeekdays:["zo","ma","di","wo","do","vr","za"]},d3:{grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%d-%m-%Y",time:"%H:%M:%S",periods:["AM","PM"]},datePicker:{closeText:"Sluiten",prevText:"",nextText:"",currentText:"Vandaag",weekHeader:"Wk",dateFormat:"dd-mm-yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},pluralForm:function(e){return 1!==e?1:0}}},1230:function(e,t){function n(e,t){return function(t){return e[i.pluralForm(t)].replace(/%d/i,t)}}var i=e.exports={delimiters:{thousands:".",decimal:","},relativeTime:{justNow:"Agora h pouco",rightNow:"Agora h pouco",future:"%s",past:"%s",sec:n(["1 segundo","%d segundos"]),min:n(["1 minuto","%d minutos"]),hour:n(["1 hora","%d horas"]),day:n(["1 dia","%d dias"]),month:n(["1 ms","%d meses"]),year:n(["1 ano","%d anos"])},dateFormats:{readable:"DD MMMM YYYY",readableTime:"DD MMMM YYYY HH:mm",readableAbbreviated:"MMM DD, YYYY",readableWithWeekday:"DDDD, DD MMMM YYYY","default":"DD/MM/YYYY"},dates:{months:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthsShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],weekdays:["Domingo","Segunda-Feira","Tera-Feira","Quarta-Feira","Quinta-Feira","Sexta-Feira","Sbado"],shortWeekdays:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"],minWeekdays:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"]},d3:{grouping:[3],currency:["$",""],dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"]},datePicker:{closeText:"Fechar",prevText:"Anterior",nextText:"Prximo",currentText:"Hoje",weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},pluralForm:function(e){return 1!==e?1:0}}},1231:function(e,t){function n(e,t){return function(t){return e[i.pluralForm(t)].replace(/%d/i,t)}}var i=e.exports={delimiters:{thousands:"",decimal:","},relativeTime:{justNow:"Alldeles nyss",rightNow:"Alldeles nyss",future:"%s",past:"%s",sec:n(["1 sekund","%d sekunder"]),min:n(["1 minut","%d minuter"]),hour:n(["1 timme","%d timmar"]),day:n(["1 dygn","%d dygn"]),month:n(["1 mnad","%d mnad"]),year:n(["1 r","%d r"])},dateFormats:{readable:"YYYY MMMM DD",readableTime:"YYYY MMMM DD HH:mm",readableAbbreviated:"MMM DD, YYYY",readableWithWeekday:"DDDD, YYYY MMMM DD","default":"YYYY-MMMM-DD"},dates:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],monthsShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],weekdays:["Sndag","Mndag","Tisdag","Onsdag","Torsdag","Fredag","Lrdag"],shortWeekdays:["Sn","Mn","Tis","Ons","Tor","Fre","Lr"],minWeekdays:["S","M","Ti","On","To","Fr","L"]},d3:{grouping:[3],currency:["","SEK"],dateTime:"%A den %d %B %Y %X",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["fm","em"]},datePicker:{closeText:"Stng",prevText:"Frra",nextText:"Nsta",currentText:"Idag",weekHeader:"Ve",dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},pluralForm:function(e){return 1!==e?1:0}}},1232:function(e,t){"use strict";e.exports=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return{get:function(t){return!!e[t]},getAll:function(){return e}}}},1233:function(e,t){"use strict";function n(e){var n=void 0===e?{}:e,r=n.definitions,l=void 0===r?{}:r,u=n.includeQueryParams,c=void 0===u?!1:u,d=n.caseInsensitive,h=void 0===d?!1:d,p=i(l),f=s({},a,p),g=o(f,!0),m=c?"(?:\\?([\\s\\S]*))?":"",_=h?"i":"";return function(e){var n=new RegExp("^"+g(e)+m+"$",_);return n[t.sourceKey]=e,n}}function i(e){return Object.keys(e).reduce(function(t,n){var i=e[n];return t[n]=u(i),t},{})}function r(e,t){return t.length-e.length}function o(e,t){var n=Object.keys(e).sort(r).join("|"),i=new RegExp("(?:\\(\\?)?:("+n+")"+l,"g"),o=/^\(\?:/,s=t?"":"?:",a=function(t,n,i){if(void 0===i&&(i=""),o.test(t))return t;var r=i?"(?:"+e[n]+")":e[n];return"("+s+r+i+")"};return function(e){return i.lastIndex=0,e.replace(i,a)}}function s(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(e,t){for(var n in t)e[n]=t[n];return e},e)}t.sourceKey="function"==typeof Symbol?Symbol("source"):"routeabout.source",t.create=n;var a={alpha:"[a-zA-Z_-]",alphanum:"[a-zA-Z0-9_-]",num:"[0-9]"},l="(\\+|\\*|\\?|\\{\\d+,?\\d*\\})?",u=o(a,!1)},1234:function(e,t,n){!function(t,i){e.exports=i(n(215),n(191))}(this,function(e,t){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(2),s=r.helpers.abortableJob.AbortableJob,a=r.helpers.Promise,l=[o.renditions.httpMp3,o.renditions.hlsMp3,o.renditions.encryptedHlsMp3],u=function(e){function t(t){var n=t.urlsWithRenditions,i=t.trackId,r=void 0===i?null:i,o=e.call(this)||this;return o._trackId=r,n.map(function(e){return e.rendition}).forEach(function(e){if(l.indexOf(e)<0)throw new Error("Unknown rendition.")}),o._urlsWithRenditions=n,o}return i(t,e),t.prototype.getTrackId=function(){return this._trackId},t.prototype.excludeRendition=function(e){if(l.indexOf(e)<0)throw new Error("Unknown rendition.");this._urlsWithRenditions=this._urlsWithRenditions.filter(function(t){return t.rendition!==e})},t.prototype.getUrl=function(){var e=this,t=new s(function(){var t=e._urlsWithRenditions.shift()||null;return{result:a.resolve(t)}});return t.run()},t}(o.BaseStreamUrlRetriever);t.StreamUrlRetriever=u},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version="9.1.0",t.buildNumber=196;var i=n(0);t.StreamUrlRetriever=i.StreamUrlRetriever}])})},1235:function(e,t,n){!function(t,i){e.exports=i(n(215),n(191))}(this,function(e,t){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(3),s=n(1),a=r.helpers.abortableJob.AbortableJob,l=r.helpers.find,u=r.helpers.time,c=300,d=new s.Limiter(c,3e5),h=5e3,p=[{id:"encrypted-hls_mp3",rendition:o.renditions.encryptedHlsMp3},{id:"hls_mp3",rendition:o.renditions.hlsMp3},{id:"http_mp3",rendition:o.renditions.httpMp3}],f=function(e){function t(t){var n=t.loader,i=t.clientId,r=t.trackId,o=t.secretToken,s=void 0===o?null:o,a=t.requestAuthorization,l=void 0===a?null:a,u=t.excludedRenditions,c=void 0===u?[]:u,d=t.maxBitrate,h=void 0===d?1/0:d,f=t.endpointBaseUrl,g=void 0===f?"https://api.soundcloud.com/":f,m=t.encryptedStreamsEnabled,_=void 0===m?!1:m,v=e.call(this)||this;if(v._getUrlsJob=null,v._clearResponseTimer=null,!n)throw new Error("loader required.");if("string"!=typeof i)throw new Error("clientId invalid.");if("number"!=typeof r)throw new Error("trackId invalid.");if(null!==s&&"string"!=typeof s)throw new Error("secretToken invalid.");if(null!==l&&"string"!=typeof l)throw new Error("requestAuthorizaton invalid.");if(c.forEach(function(e){if(p.map(function(e){return e.rendition}).indexOf(e)<0)throw new Error("Unknown rendition.")}),"number"!=typeof h||0>=h)throw new Error("maxBitrate must be > 0.");if("string"!=typeof g)throw new Error("endpointBaseUrl must be > 0.");if("boolean"!=typeof _)throw new Error("encryptedStreamsEnabled invalid.");return v._loader=n,v._clientId=i,v._requestAuthorization=l,v._trackId=r,v._secretToken=s,v._endpointBaseUrl=g,v._encryptedStreamsEnabled=_,v._excludedRenditions=c,v._excludedRenditionsOnLastURLRequest=c.slice(),v._maxBitrate=h,v}return i(t,e),t.getAllRenditions=function(){return p.map(function(e){return e.rendition})},t.prototype.getTrackId=function(){return this._trackId},t.prototype.excludeRendition=function(e){if(p.map(function(e){return e.rendition}).indexOf(e)<0)throw new Error("Unknown rendition.");this._excludedRenditions.indexOf(e)<0&&this._excludedRenditions.push(e)},t.prototype.updateRequestAuthorization=function(e){if(null!==e&&"string"!=typeof e)throw new Error("requestAuthorizaton invalid.");this._requestAuthorization=e},t.prototype.clearCache=function(){this._clearResponseTimer&&(window.clearTimeout(this._clearResponseTimer),this._clearResponseTimer=null),this._getUrlsJob=null},t.prototype.getMaxBitrate=function(){return this._maxBitrate},t.prototype.setMaxBitrate=function(e){if("number"!=typeof e||0>=e)throw new Error("maxBitrate must be > 0.");this._maxBitrate=e},t.prototype.getUrl=function(){var e=this,t=this._maxBitrate,n=this._excludedRenditions,i=new a(function(){e._excludedRenditionsOnLastURLRequest.length===e._excludedRenditions.length?e.clearCache():e._excludedRenditionsOnLastURLRequest=e._excludedRenditions.slice();var i=e._getUrls(),r=i.whenComplete().then(function(e){var i=e.urls,r=e.timeRetrieved,o=null;return p.map(function(e){return e.rendition}).filter(function(e){return n.indexOf(e)<0;
}).some(function(e){var n=i.filter(function(t){return t.rendition===e}).map(function(e){return{url:e.url,bitrate:e.bitrate}}),s=l(n.sort(function(e,t){return t.bitrate-e.bitrate}),function(e){return e.bitrate<=t});return s?(o={url:s.url,rendition:e,bitrate:s.bitrate,timeRetrieved:r},!0):!1}),o});return{result:r,abort:function(){return i.abort()}}});return i.run()},t.prototype._getUrls=function(){var e=this;return this._getUrlsJob||(this._getUrlsJob=new a(function(){var t=r.helpers.deferred.buildDeferred(),n=null,i=d.execute(function(){var i=e._requestAuthorization?{Authorization:e._requestAuthorization}:{},r=e._endpointBaseUrl+"i1/tracks/"+encodeURI(e._trackId+"")+"/streams?client_id="+encodeURIComponent(e._clientId);e._encryptedStreamsEnabled&&(r+="&with_encrypted_streams=true"),e._secretToken&&(r+="&secret_token="+encodeURI(e._secretToken)),n=e._loader.request({url:r,headers:i});var s=n.getResponse().then(function(e){if(!e)throw new o.RequestError(null);if(200!==e.statusCode)throw new o.RequestError(e.statusCode);if(!e.data)throw new Error("Response contained no data.");var t=u.now(),n=JSON.parse(e.data),i=[];return Object.keys(n).map(function(e){var t=e.split("_"),r=t[0],o=t[1],s=t[2],a=parseInt(s,10);if(r&&o&&!isNaN(a)){var u=r+"_"+o,c=l(p,function(e){return e.id===u});c&&i.push({rendition:c.rendition,bitrate:a,url:n[e]})}}),{urls:i,timeRetrieved:t}});s.then(t.resolve,t.reject)});return{result:t.promise,abort:function(){i.abort(),n&&n.abort()}}}),this._clearResponseTimer=window.setTimeout(function(){e._clearResponseTimer=null,e._getUrlsJob=null},h)),this._getUrlsJob.run()},t}(o.BaseStreamUrlRetriever);t.StreamUrlRetriever=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){if(void 0===t&&(t=6e4),this._limit=e,this._period=t,this._jobs=[],this._jobsRunInPeriod=0,0>=e)throw new Error("limit must be > 0.");if(0>=t)throw new Error("period must be > 0.")}return e.prototype.execute=function(e){var t=this,n={job:e};return this._jobs.push(n),this._executeNextJob(),{abort:function(){var e=t._jobs.indexOf(n);e>=0&&t._jobs.splice(e,1)}}},e.prototype._executeNextJob=function(){var e=this;if(this._jobsRunInPeriod<this._limit){var t=this._jobs.shift();t&&(this._jobsRunInPeriod++,window.setTimeout(function(){e._jobsRunInPeriod--,e._executeNextJob()},this._period),t.job())}},e}();t.Limiter=i},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version="9.1.0",t.buildNumber=196;var i=n(0);t.StreamUrlRetriever=i.StreamUrlRetriever}])})},1244:function(module,exports,__webpack_require__){!function(e,t){module.exports=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=20)}([function(e,t,n){"use strict";function i(e,t){void 0===t&&(t=64e3);for(var n="",i=0;8>i;i++)if(e.context=r(e.context,i),e.params=r(e.params,i),e.environment=r(e.environment,i),e.session=r(e.session,i),n=JSON.stringify(e),n.length<t)return n;var o=new Error("airbrake-js: cannot jsonify notice (length="+n.length+" maxLength="+t+")");throw o.params={json:n.slice(0,Math.floor(t/2))+"..."},o}function r(e,t){var n={};for(var i in e)n[i]=o(e[i],t);return n}function o(e,t){var n=new l(t);return n.truncate(e)}function s(e,t){try{return e[t]}catch(n){return}}function a(e){var t=Object.prototype.toString.apply(e);return t.slice("[object ".length,-1)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var l=function(){function e(e){void 0===e&&(e=0),this.maxStringLength=1024,this.maxObjectLength=128,this.maxArrayLength=32,this.maxDepth=8,this.keys=[],this.seen=[],this.maxStringLength=this.maxStringLength>>e||1,this.maxObjectLength=this.maxObjectLength>>e||1,this.maxArrayLength=this.maxArrayLength>>e||1,this.maxDepth=this.maxDepth>>e||1}return e.prototype.truncate=function(e,t,n){if(void 0===t&&(t=""),void 0===n&&(n=0),null===e||void 0===e)return e;switch(typeof e){case"boolean":case"number":case"function":return e;case"string":return this.truncateString(e);case"object":break;default:return String(e)}if(e instanceof String)return this.truncateString(e.toString());if(e instanceof Boolean||e instanceof Number||e instanceof Date||e instanceof RegExp)return e;if(e instanceof Error)return e.toString();if(this.seen.indexOf(e)>=0)return"[Circular "+this.getPath(e)+"]";var i=a(e);if(n++,n>this.maxDepth)return"[Truncated "+i+"]";switch(this.keys.push(t),this.seen.push(e),i){case"Array":return this.truncateArray(e,n);case"Object":return this.truncateObject(e,n);default:var r=this.maxDepth;this.maxDepth=0;var o=this.truncateObject(e,n);return o.__type=i,this.maxDepth=r,o}},e.prototype.getPath=function(e){for(var t=this.seen.indexOf(e),n=[this.keys[t]],i=t;i>=0;i--){var r=this.seen[i];r&&s(r,n[0])===e&&(e=r,n.unshift(this.keys[i]))}return"~"+n.join(".")},e.prototype.truncateString=function(e){return e.length>this.maxStringLength?e.slice(0,this.maxStringLength)+"...":e},e.prototype.truncateArray=function(e,t){var n=0,i=[];for(var r in e){var o=e[r];if(n++,n>=this.maxArrayLength)break;i.push(this.truncate(o,r,t))}return i},e.prototype.truncateObject=function(e,t){var n=0,i={};for(var r in e){var o=s(e,r);if(void 0!==o&&"function"!=typeof o){if(n++,n>=this.maxObjectLength)break;i[r]=this.truncate(o,r,t)}}return i},e}();t.truncate=o},function(e,t,n){"use strict";var i=n(14),r=n(13),o=n(7),s=n(6),a=n(9),l=n(5),u=n(10),c=n(8),d=n(18),h=n(15),p=n(17),f=n(19),g=n(16),m=n(12),_=function(){function e(e){void 0===e&&(e={});var t=this;this.opts={},this.reporters=[],this.filters=[],this.offline=!1,this.errors=[],this.opts.projectId=e.projectId,this.opts.projectKey=e.projectKey,this.opts.host=e.host||"https://api.airbrake.io",this.opts.timeout=e.timeout||1e4,this.processor=e.processor||r["default"],this.addReporter(e.reporter||d.detectReporter(e)),this.addFilter(o["default"]),this.addFilter(s["default"]()),this.addFilter(a["default"]),this.addFilter(l["default"]),"object"==typeof window?(this.addFilter(u["default"]),"function"==typeof window.addEventListener&&(window.addEventListener("online",this.onOnline.bind(this)),window.addEventListener("offline",function(){return t.offline=!0}))):this.addFilter(c["default"]),m.historian.registerNotifier(this)}return e.prototype.setProject=function(e,t){this.opts.projectId=e,this.opts.projectKey=t},e.prototype.setHost=function(e){this.opts.host=e},e.prototype.addReporter=function(e){var t;switch(e){case"fetch":t=h["default"];break;case"node":t=p["default"];break;case"xhr":t=f["default"];break;case"jsonp":t=g["default"];break;default:t=e}this.reporters.push(t)},e.prototype.addFilter=function(e){this.filters.push(e)},e.prototype.notify=function(e){var t=this;("object"!=typeof e||void 0===e.error)&&(e={error:e});var n=e.promise||new i["default"];if(!e.error){var r=new Error("notify: got err="+JSON.stringify(e.error)+", wanted an Error");return n.reject(r),n}if(this.offline)return e.promise=n,this.errors.push(e),this.errors.length>100&&this.errors.slice(-100),n;var o={id:"",errors:[],context:Object.assign({language:"JavaScript",severity:"error",notifier:{name:"airbrake-js",version:"0.9.0",url:"https://github.com/airbrake/airbrake-js"}},e.context),params:e.params||{},environment:e.environment||{},session:e.session||{}},s=m.getHistory();return s.length>0&&(o.context.history=s),this.processor(e.error,function(e,i){o.errors.push(i);for(var r=0,s=t.filters;r<s.length;r++){var a=s[r],l=a(o);if(null===l)return;o=l}for(var u=0,c=t.reporters;u<c.length;u++){var d=c[u];d(o,t.opts,n)}}),n},e.prototype.wrap=function(e){if(e.__airbrake)return e;var t=this,n=function(){var n=Array.prototype.slice.call(arguments),i=t.wrapArguments(n);try{return e.apply(this,i)}catch(r){throw t.notify({error:r,params:{arguments:n}}),m.historian.ignoreNextWindowError(),r}};for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);return n.__airbrake=!0,n.__inner=e,n},e.prototype.wrapArguments=function(e){for(var t in e){var n=e[t];"function"==typeof n&&(e[t]=this.wrap(n))}return e},e.prototype.call=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=this.wrap(e);return i.apply(this,Array.prototype.slice.call(arguments,1))},e.prototype.onerror=function(){m.historian.onerror.apply(m.historian,arguments)},e.prototype.onOnline=function(){this.offline=!1;for(var e=0,t=this.errors;e<t.length;e++){var n=t[e];this.notify(n)}this.errors=[]},e}();e.exports=_},function(e,t){Object.assign||(Object.assign=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var i=function(t){t&&Object.keys(t).forEach(function(n){return e[n]=t[n]})},r=0,o=t;r<o.length;r++){var s=o[r];i(s)}return e})},function(e,t,n){var i=!1;!function(t,r){"use strict";"function"==typeof i&&i.amd?i("error-stack-parser",["stackframe"],r):e.exports=r(n(4))}(this,function(e){"use strict";var t=/(^|@)\S+\:\d+/,n=/^\s*at .*(\S+\:\d+|\(native\))/m,i=/^(eval@)?(\[native code\])?$/;return{parse:function(e){if("undefined"!=typeof e.stacktrace||"undefined"!=typeof e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(n))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/,n=t.exec(e.replace(/[\(\)]/g,""));return[n[1],n[2]||void 0,n[3]||void 0]},parseV8OrIE:function(t){var i=t.stack.split("\n").filter(function(e){return!!e.match(n)},this);return i.map(function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var n=t.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),i=this.extractLocation(n.pop()),r=n.join(" ")||void 0,o=["eval","<anonymous>"].indexOf(i[0])>-1?void 0:i[0];return new e({functionName:r,fileName:o,lineNumber:i[1],columnNumber:i[2],source:t})},this)},parseFFOrSafari:function(t){var n=t.stack.split("\n").filter(function(e){return!e.match(i)},this);return n.map(function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===t.indexOf("@")&&-1===t.indexOf(":"))return new e({functionName:t});var n=t.split("@"),i=this.extractLocation(n.pop()),r=n.join("@")||void 0;return new e({functionName:r,fileName:i[0],lineNumber:i[1],columnNumber:i[2],source:t})},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)/i,i=t.message.split("\n"),r=[],o=2,s=i.length;s>o;o+=2){var a=n.exec(i[o]);a&&r.push(new e({fileName:a[2],lineNumber:a[1],source:i[o]}))}return r},parseOpera10:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,i=t.stacktrace.split("\n"),r=[],o=0,s=i.length;s>o;o+=2){var a=n.exec(i[o]);a&&r.push(new e({functionName:a[3]||void 0,fileName:a[2],lineNumber:a[1],source:i[o]}))}return r},parseOpera11:function(n){var i=n.stack.split("\n").filter(function(e){return!!e.match(t)&&!e.match(/^Error created at/)},this);return i.map(function(t){var n,i=t.split("@"),r=this.extractLocation(i.pop()),o=i.shift()||"",s=o.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;o.match(/\(([^\)]*)\)/)&&(n=o.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var a=void 0===n||"[arguments not available]"===n?void 0:n.split(",");return new e({functionName:s,args:a,fileName:r[0],lineNumber:r[1],columnNumber:r[2],source:t})},this)}}})},function(e,t,n){var i=!1;!function(t,n){"use strict";"function"==typeof i&&i.amd?i("stackframe",[],n):e.exports=n()}(this,function(){"use strict";function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e){return e[0].toUpperCase()+e.substring(1)}function n(e){return function(){return this[e]}}function i(e){if(e instanceof Object)for(var n=0;n<l.length;n++)e.hasOwnProperty(l[n])&&void 0!==e[l[n]]&&this["set"+t(l[n])](e[l[n]])}var r=["isConstructor","isEval","isNative","isToplevel"],o=["columnNumber","lineNumber"],s=["fileName","functionName","source"],a=["args"],l=r.concat(o,s,a);i.prototype={getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof i)this.evalOrigin=e;else{if(!(e instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new i(e)}},toString:function(){var t=this.getFunctionName()||"{anonymous}",n="("+(this.getArgs()||[]).join(",")+")",i=this.getFileName()?"@"+this.getFileName():"",r=e(this.getLineNumber())?":"+this.getLineNumber():"",o=e(this.getColumnNumber())?":"+this.getColumnNumber():"";return t+n+i+r+o}};for(var u=0;u<r.length;u++)i.prototype["get"+t(r[u])]=n(r[u]),i.prototype["set"+t(r[u])]=function(e){return function(t){this[e]=Boolean(t)}}(r[u]);for(var c=0;c<o.length;c++)i.prototype["get"+t(o[c])]=n(o[c]),i.prototype["set"+t(o[c])]=function(t){return function(n){if(!e(n))throw new TypeError(t+" must be a Number");this[t]=Number(n)}}(o[c]);for(var d=0;d<s.length;d++)i.prototype["get"+t(s[d])]=n(s[d]),i.prototype["set"+t(s[d])]=function(e){return function(t){this[e]=String(t)}}(s[d]);return i})},function(e,t,n){"use strict";function i(e){var t=e.errors[0];if(""!==t.type&&"Error"!==t.type)return e;var n=t.message.match(r);return null!==n&&(t.type=n[1],t.message=n[2]),e}Object.defineProperty(t,"__esModule",{value:!0});var r=new RegExp(["^","\\[(\\$.+)\\]","\\s","([\\s\\S]+)","$"].join(""));t["default"]=i},function(e,t,n){"use strict";function i(){var e,t;return function(n){var i=JSON.stringify(n);return i===e?null:(t&&clearTimeout(t),e=i,t=setTimeout(function(){e=""},1e3),n)}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i},function(e,t,n){"use strict";function i(e){var t=e.errors[0];if(""===t.type&&-1!==r.indexOf(t.message))return null;if(t.backtrace){var n=t.backtrace[0];if("<anonymous>"===n.file)return null}return e}Object.defineProperty(t,"__esModule",{value:!0});var r=["Script error","Script error.","InvalidAccessError"];t["default"]=i},function(module,exports,__webpack_require__){"use strict";function filter(e){os&&(e.context.os=os.type()+"/"+os.release(),e.context.architecture=os.arch(),e.context.hostname=os.hostname()),e.context.platform=myProcess.platform,e.context.rootDirectory||(e.context.rootDirectory=myProcess.cwd()),myProcess.env.NODE_ENV&&(e.context.environment=myProcess.env.NODE_ENV),e.params.process={pid:myProcess.pid,cwd:myProcess.cwd(),execPath:myProcess.execPath,argv:myProcess.argv};for(var t in["uptime","cpuUsage","memoryUsage"])myProcess[t]&&(e.params.process[t]=myProcess[t]());return os&&(e.params.os={homedir:os.homedir(),uptime:os.uptime(),freemem:os.freemem(),totalmem:os.totalmem(),loadavg:os.loadavg()}),e}Object.defineProperty(exports,"__esModule",{value:!0});var myProcess,os;try{myProcess=eval("process"),os=eval("require")("os")}catch(_){}exports["default"]=filter},function(e,t,n){"use strict";function i(e){var t=e.errors[0];if(""!==t.type&&"Error"!==t.type)return e;var n=t.message.match(r);return null!==n&&(t.type=n[1],t.message=n[2]),e}Object.defineProperty(t,"__esModule",{value:!0});var r=new RegExp(["^","Uncaught\\s","(.+?)",":\\s","(.+)","$"].join(""));t["default"]=i},function(e,t,n){"use strict";function i(e){return window.navigator&&window.navigator.userAgent&&(e.context.userAgent=window.navigator.userAgent),window.location&&(e.context.url=String(window.location),e.context.rootDirectory=window.location.protocol+"//"+window.location.host),e}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i},function(e,t,n){"use strict";function i(e){if(!e)return"";var t=[];if(e.tagName&&t.push(e.tagName.toLowerCase()),e.id&&(t.push("#"),t.push(e.id)),e.className&&(t.push("."),t.push(e.className.split(" ").join("."))),e.getAttribute)for(var n=0,i=s;n<i.length;n++){var r=i[n],o=e.getAttribute(r);o&&t.push("["+r+'="'+o+'"]')}return t.join("")}function r(e){for(var t=10,n=[],r=e;r;){var o=i(r);if(""!==o&&(n.push(o),n.length>t))break;r=r.parentNode}return 0===n.length?String(e):n.reverse().join(" > ")}function o(e){return function(t){var n;try{n=t.target}catch(i){return}if(n){var o={type:t.type};try{o.target=r(n)}catch(s){o.target="<"+s.toString()+">"}e.pushHistory(o)}}}Object.defineProperty(t,"__esModule",{value:!0});var s=["type","name","src"];t.makeEventHandler=o},function(module,exports,__webpack_require__){"use strict";function getHistory(){return exports.historian.getHistory()}Object.defineProperty(exports,"__esModule",{value:!0});var dom_1=__webpack_require__(11),Historian=function(){function Historian(){var _this=this;if(this.historyMaxLen=20,this.notifiers=[],this.errors=[],this.ignoreWindowError=0,this.history=[],this.ignoreNextXHR=0,"object"==typeof window){var self_1=this,oldHandler_1=window.onerror;window.onerror=function(){oldHandler_1&&oldHandler_1.apply(this,arguments),self_1.onerror.apply(self_1,arguments)}}else{var p=eval("process");p.on("uncaughtException",function(e){throw _this.notify(e),e}),p.on("unhandledRejection",function(e,t){_this.notify(e)})}"object"==typeof document&&this.dom(),"object"==typeof console&&this.console(),"function"==typeof fetch&&this.fetch(),"undefined"!=typeof XMLHttpRequest&&this.xhr(),"object"==typeof history&&this.location()}return Historian.prototype.registerNotifier=function(e){this.notifiers.push(e);for(var t=0,n=this.errors;t<n.length;t++){var i=n[t];this.notifyNotifiers(i)}this.errors=[]},Historian.prototype.notify=function(e){return this.notifiers.length>0?void this.notifyNotifiers(e):(this.errors.push(e),void(this.errors.length>this.historyMaxLen&&(this.errors=this.errors.slice(-this.historyMaxLen))))},Historian.prototype.notifyNotifiers=function(e){for(var t=0,n=this.notifiers;t<n.length;t++){var i=n[t];i.notify(e)}},Historian.prototype.onerror=function(e,t,n,i,r){return this.ignoreWindowError>0?void 0:r?void this.notify({error:r,context:{windowError:!0}}):void(t&&n&&this.notify({error:{message:e,fileName:t,lineNumber:n,columnNumber:i,noStack:!0},context:{windowError:!0}}))},Historian.prototype.ignoreNextWindowError=function(){var e=this;this.ignoreWindowError++,setTimeout(function(){return e.ignoreWindowError--})},Historian.prototype.getHistory=function(){return this.history},Historian.prototype.pushHistory=function(e){return this.isDupState(e)?void(this.lastState.num?this.lastState.num++:this.lastState.num=2):(e.date||(e.date=new Date),this.history.push(e),this.lastState=e,void(this.history.length>this.historyMaxLen&&(this.history=this.history.slice(-this.historyMaxLen))))},Historian.prototype.isDupState=function(e){if(!this.lastState)return!1;for(var t in e)if("date"!==t&&e[t]!==this.lastState[t])return!1;return!0},Historian.prototype.dom=function(){var e=dom_1.makeEventHandler(this);document.addEventListener("DOMContentLoaded",e),window.addEventListener("load",e),document.addEventListener("click",e),document.addEventListener("keypress",e),window.addEventListener("error",function(t){"error"in t||e(t)},!0)},Historian.prototype.console=function(){for(var e=this,t=["debug","log","info","warn","error"],n=(function(t){if(!(t in console))return"continue";var n=console[t],i=function(){n.apply(console,arguments),e.pushHistory({type:"log",severity:t,arguments:Array.prototype.slice.call(arguments)})};console[t]=i}),i=0,r=t;i<r.length;i++){var o=r[i];n(o)}},Historian.prototype.fetch=function(){var e=this,t=fetch;window.fetch=function(n,i){var r={type:"xhr",date:new Date};"string"==typeof n?r.url=n:r.url=n.url,i&&i.method?r.method=i.method:r.method="GET",e.ignoreNextXHR++,setTimeout(function(){return e.ignoreNextXHR--});var o=t.apply(this,arguments);return o.then(function(t){r.statusCode=t.status,r.duration=(new Date).getTime()-r.date.getTime(),e.pushHistory(r)}),o}},Historian.prototype.xhr=function(){var e=this,t=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(n,i,r,o,s){0===e.ignoreNextXHR&&(this.__state={type:"xhr",method:n,url:i}),t.apply(this,arguments)};var n=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(t){var i=this.onreadystatechange;return this.onreadystatechange=function(t){return 4===this.readyState&&this.__state&&e.recordReq(this),i?i.apply(this,arguments):void 0},this.__state&&(this.__state.date=new Date),n.apply(this,arguments)}},Historian.prototype.recordReq=function(e){var t=e.__state;t.statusCode=e.status,t.duration=(new Date).getTime()-t.date.getTime(),this.pushHistory(t)},Historian.prototype.location=function(){this.lastLocation=document.location.pathname;var e=this,t=window.onpopstate;window.onpopstate=function(n){return e.recordLocation(document.location.pathname),t?t.apply(this,arguments):void 0};var n=history.pushState;history.pushState=function(t,i,r){r&&e.recordLocation(r.toString()),n.apply(this,arguments)}},Historian.prototype.recordLocation=function(e){var t=e.indexOf("://");t>=0?(e=e.slice(t+3),t=e.indexOf("/"),e=t>=0?e.slice(t):"/"):"/"!==e.charAt(0)&&(e="/"+e),this.pushHistory({type:"location",from:this.lastLocation,to:e}),this.lastLocation=e},Historian}();exports["default"]=Historian,exports.historian=new Historian,exports.getHistory=getHistory},function(e,t,n){"use strict";function i(e){try{return o.parse(e)}catch(t){s&&e.stack&&console.warn("ErrorStackParser:",t.toString(),e.stack)}return e.fileName?[e]:[]}function r(e,t){var n=[];if(!e.noStack){var r=i(e);if(0===r.length)try{throw new Error("fake")}catch(o){r=i(o),r.shift(),r.shift()}for(var s=0,a=r;s<a.length;s++){var l=a[s];n.push({"function":l.functionName||"",file:l.fileName||"<anonymous>",line:l.lineNumber||0,column:l.columnNumber||0})}}var u;u=e.name?e.name:"";var c;c=e.message?String(e.message):String(e),t("stacktracejs",{type:u,message:c,backtrace:n})}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),s="object"==typeof console&&console.warn;t["default"]=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.onResolved=[],this.onRejected=[],e&&e(this.resolve.bind(this),this.reject.bind(this))}return e.prototype.then=function(e,t){return e&&(this.resolvedWith?e(this.resolvedWith):this.onResolved.push(e)),t&&(this.rejectedWith?t(this.rejectedWith):this.onRejected.push(t)),this},e.prototype["catch"]=function(e){return this.rejectedWith?e(this.rejectedWith):this.onRejected.push(e),this},e.prototype.resolve=function(e){if(this.resolvedWith||this.rejectedWith)throw new Error("Promise is already resolved or rejected");this.resolvedWith=e;for(var t=0,n=this.onResolved;t<n.length;t++){var i=n[t];i(e)}return this},e.prototype.reject=function(e){if(this.resolvedWith||this.rejectedWith)throw new Error("Promise is already resolved or rejected");this.rejectedWith=e;for(var t=0,n=this.onRejected;t<n.length;t++){var i=n[t];i(e)}return this},e}();t["default"]=i},function(e,t,n){"use strict";function i(e,t,n){var i=t.host+"/api/v3/projects/"+t.projectId+"/notices?key="+t.projectKey,o=r["default"](e);fetch(i,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:o}).then(function(t){return t.status>=200&&t.status<500?void t.json().then(function(t){if(t.id)return e.id=t.id,void n.resolve(e);if(t.error){var i=new Error(t.error);return void n.reject(i)}}):void t.text().then(function(e){var i=new Error("airbrake: fetch: unexpected response: code="+t.status+" body='"+e+"'");n.reject(i)})})["catch"](function(e){n.reject(e)})}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t["default"]=i},function(e,t,n){"use strict";function i(e,t,n){o++;var i="airbrakeCb"+String(o);window[i]=function(t){try{delete window[i]}catch(r){window[i]=void 0}if(t.id)return e.id=t.id,void n.resolve(e);if(t.error){var o=new Error(t.error);return void n.reject(o)}var s=new Error(t);n.reject(s)};var s=encodeURIComponent(r["default"](e)),a=t.host+"/api/v3/projects/"+t.projectId+"/create-notice?key="+t.projectKey+"&callback="+i+"&body="+s,l=window.document,u=l.getElementsByTagName("head")[0],c=l.createElement("script");c.src=a,c.onload=function(){return u.removeChild(c)},c.onerror=function(){u.removeChild(c);var e=new Error("airbrake: JSONP script error");n.reject(e)},u.appendChild(c)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=0;t["default"]=i},function(module,exports,__webpack_require__){"use strict";function report(e,t,n){var i=t.host+"/api/v3/projects/"+t.projectId+"/notices?key="+t.projectKey,r=jsonify_notice_1["default"](e);request({url:i,method:"POST",body:r,headers:{"content-type":"application/json"},timeout:t.timeout},function(t,i,r){if(t)return void n.reject(t);if(i.statusCode>=200&&i.statusCode<500){var o=JSON.parse(r);if(o.id)return e.id=o.id,void n.resolve(e);if(o.error){var s=new Error(o.error);return void n.reject(s)}}r=r.trim();var a=new Error("airbrake: node: unexpected response: code="+i.statusCode+" body='"+r+"'");n.reject(a)})}Object.defineProperty(exports,"__esModule",{value:!0});var jsonify_notice_1=__webpack_require__(0),request;try{request=eval("require")("request")}catch(_){}exports["default"]=report},function(e,t,n){"use strict";function i(e){return"function"==typeof fetch?"fetch":"function"==typeof XMLHttpRequest?"xhr":"object"==typeof window?"jsonp":"node"}Object.defineProperty(t,"__esModule",{value:!0}),t.detectReporter=i},function(e,t,n){"use strict";function i(e,t,n){var i=t.host+"/api/v3/projects/"+t.projectId+"/notices?key="+t.projectKey,o=r["default"](e),s=new XMLHttpRequest;s.open("POST",i,!0),s.timeout=t.timeout,s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=function(){if(4===s.readyState){if(s.status>=200&&s.status<500){var t=JSON.parse(s.responseText);if(t.id)return e.id=t.id,void n.resolve(e);if(t.error){var i=new Error(t.error);return void n.reject(i)}}var r=s.responseText.trim(),o=new Error("airbrake: xhr: unexpected response: code="+s.status+" body='"+r+"'");n.reject(o)}},s.send(o)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t["default"]=i},function(e,t,n){n(2),e.exports=n(1)}])})},1245:function(e,t,n){(function(t){"use strict";function i(){function e(e,t){}var t=arguments.length<=0||void 0===arguments[0]?2:arguments[0],r=n(55).get("me"),o=arguments[1];return o||(o=n(56).defer().done(function(){n(64).instances.add(r),n(57).trigger("connect:hasUserData")})),r.id?o.resolve():r.fetch().done(o.resolve).fail(function(r){403===r.status?(e("Frozen user account, removing token",r),n(61).logout(),o.reject(r)):t?(e("Error fetching user information. Retrying...",r),i(t-1,o)):(e("Could not fetch user information. Giving up...",r),n(61).logout().always(function(){window.location.reload()}),o.reject(r))}),o}function r(){var e=10;!function i(){t(window.document).one("ajaxSuccess",function(t,r){!n(51).dateTimeHelper.setServerTime(r.getResponseHeader("Date"))&&--e&&i()})}()}function o(){n(963).initialize({statusCode:n(314)}),n(358).initialize()}function s(){n(55).set("geoip",new(n(1426)))}function a(){var e,i,r=window.document;e=new(n(62)),e.setRoutes(n(1093),n(1844)),e.setLoader(n(1361)),n(163)&&n(163).initialize(),n(55).set("router",e),n(92).setAudioAd(n(1422)),h(),n(173).volume.loadFromSettings(!1),n(1329).initialize(),p(),n(59).initialize(t(r),!0),n(1392).initialize(),m(),i=new(n(1440))({el:t("#app"),appVersion:b}),i.render(),n(22).history.start({root:"/",pushState:!0}),t(window).on("unload",f)}function l(){var e=new(n(64))({id:n(55).get("systemUserId")});e.release=e.hold=n(3).noop}function u(){n(1357)(),n(55).get("me").on("change:consumer_subscription",function(){if(this.hasHighTier()){var e=n(67).instances.filter(function(e){return e.isBlocked()||e.isSnippetized()}).map(function(e){return e.isPlaying()?e.fetch().then(function(){var t=e.currentTime();e.disposeAudio(),e.play({seek:t})}):(e.disposeAudio(),e.fetch())});n(56).mapEither(function(){n(57).trigger("policyRefresh")},n(56).settled(e))}})}function c(){n(273).activate(),n(273).on(n(273).actions.STOP,g);var e=void 0,t=function(){window.clearTimeout(e)},i=function(){n(163)&&n(163).some(function(e){return e.get("playing")})||n(273).disconnect()};n(57).on("audio:play",function(){n(153).isCasting()||(n(273).reconnect(),n(273).publishEvent(n(273).events.PLAY),t())}),n(57).on("audio:pause",function(){t(),e=window.setTimeout(i,w)})}function d(){function e(e){return"user"===e.originType&&e.origin===n(55).get("me").id}var t=function(t,i,r){var o=r.state!==!1;if(o&&e(r)){var s=n(63).getCurrentMetadata(),a=s&&n(82).extractPromotedAttrs(s.originalModel),l=void 0;r.context&&"promoted"===r.context.campaign?l=r.context:s&&a&&s.sound&&s.sound.getUrn()===i&&(l=a),l&&n(82).trackEvent(t,l)}},i=function(e,i){switch(i){case"target":return function(i){var r=n(94).generate(i.targetType,i.target);return t(e,r,i)};case"object":default:return function(n){var i=n.object&&n.object.getUrn();return t(e,i,n)}}};n(74).on("like",i("like","target")).on("comment",i("comment","target")).on("addToPlaylist",i("addToPlaylist","object")).on("createPlaylist",i("createPlaylist","object")).on("follow",i("follow","target")).on("repost",i("repost","target")).on("likeStation",i("like","target"))}function h(){if(n(63).initialize(n(92),n(74),n(57),function(e){var t=n(94).fromComponents({collection:"track-stations",id:e.id}),i=new(n(235))(null,{resource_id:t}),r=n(125).getStationPageUrl(e);return i.release(),{source:i,restoreUrl:r}}),n(55).get("rollouts").get("backfill_queue")){var e=void 0,t=void 0;if(n(55).get("me").id)e=new(n(446)),e.setLimit(25),t=n(62).getRoute("youNetwork",null,"history");else{var i=n(366).select({field:"id",unique:!0,newestFirst:!0,limit:50}).map(function(e){return{id:e,kind:"sound"}});if(!i.length)return;e=new(n(932))(i,{sourceInfo:{type:"history"}}),t=""}n(63).setInitialHistorySource(e,t),e.release()}}function p(){var e=function(e){var t=n(63).getCurrentSound(),i=n(147),r=i.all,o=i.none,s=t&&t.getUrn(),a={click_name:e===r?"repeat::all":e===o?"repeat::none":"repeat::one"};s&&(a.click_object=s),n(59).trackClick(["play_controls","repeat_track",e===r?"all":e===o?"none":"one"],a)};n(63).on("change:repeatMode",e)}function f(){n(59).dispose(t(window.document))}function g(){var e=n(63).getCurrentSound();!e||e.isPaused()||n(153).isCasting()||(e.pause({pause_reason:"concurrent_streaming"}),n(57).trigger("concurrent_streaming:pause"))}function m(){var e=0,t=2;n(63).on("change:currentSound",function(i){var r=i.current,o=n(263).allowed(),s=!n(239).focused(),a=n(148).get("newTrackNotifications");"never"!==a&&n(61).isLoggedIn()&&r.isPlaying()&&(null===o&&s?++e===t&&n(57).trigger("desktop-notification-reminder"):o&&("always"===a||"bg"===a&&s)&&!function(){var e=function(){var e=r.get("user");n(263).create(r.get("title"),{icon:n(85).urlFrom(r,100),body:e.username,tag:"nowPlaying"}).closeAfter(5e3).on("click",window.focus,window)};r.attrExists(["title","user"])?e():r.fetch().then(function(){r.isPlaying()&&r===n(63).getCurrentSound()&&e()})}())})}var _=n(117).getFacebookToken,v=n(117).loadFacebookSDK,y=7e3,b=void 0,w=2e4;e.exports={start:function(e){window.document.head;window.console&&window.console.info&&window.console.info("You like to look under the hood? Why not help us build the engine? http://soundcloud.com/jobs"),b=e?e:"DEVELOPMENT",n(55).set("app_version",b),window._scAuthCallbacks=n(1327),x()}};var x=n(3).once(function(){var e=void 0,t=n(56).defer();n(61).setSigninView(n(654)),r(),o(),n(1356)({}),n(1358)({}),u(),
s(),l(),c(),d(),n(551).initialize(),n(166).startPlayTracking(),n(1323).initialize();var h=function(){e=i(),window.setTimeout(n(61).loginToClassicSoundCloud,y)};n(158).setExperiments(n(55).get("experiments").getVariantIds()),(n(61).isLoggedIn()?n(56).resolve():n(61).loginWithCookies()).done(h).fail(function(){n(57).once("connect:login",h),n(55).get("me").lastFetchTime=Date.now(),e=n(56).resolve()}).always(function(){e.fail(n(124).ajaxFatal(n(144).USER_INFO_NOT_LOADED)).always(a).done(t.resolve).fail(t.reject)}),t.always(function(){if(!n(61).isLoggedIn()){var e=n(65).getFragmentParam("access_token");e?(n(62).removeFragmentParams("access_token","expires_in"),n(61).loginWithFacebook(e)):n(575).facebook&&v().then(function(){return _({promptUser:!1})}).then(n(61).loginWithFacebook)}})})}).call(t,n(1))},1246:function(e,t,n){(function(e){"use strict";var t;window.__sc_abortApp||(n(51).initialize(),t=n(1245),e(function(){t.start(window.__sc_version)}))}).call(t,n(1))},1247:function(e,t,n){"use strict";function i(e){return this.message.indexOf(e)>-1}function r(e,t,i){o(t)&&(s>0?(e.lastFetchTime=Date.now(),e.reset([l])):(s++,n(3).delay(function(){e.fetch().done(function(){s=0})},5e3)))}function o(e){var t=e.status;return t>=500}var s=0,a={"cookies-notification-29-03-2016":{message:n(51).t("SoundCloud uses cookies. By using our services, youre agreeing to our [[[linkStart]]]Cookie Policy[[[linkEnd]]].",{linkStart:'<a href="[[link]]" class="sc-link-dark">',linkEnd:"</a>"}),viewOptions:function(){return n(133).requiresUserConsent()?{ackText:n(51).t("Allow cookies"),onAck:function(){return n(133).enable()},ackOnDocClick:!0}:void 0}()},"email-confirmation-announcement":{message:n(51).t('Please confirm your email address to make the most of your SoundCloud experience. Check your <a href="[[href]]" class="sc-link-dark">settings</a> to resend the confirmation email.',{href:n(62).getRoute("settings")}),shouldAddAnnouncement:function(){return n(61).isLoggedIn()&&!n(55).get("me").get("primary_email_confirmed")}},"email-missing-announcement":{message:n(51).t('Dont lose access to your account. <a href="[[href]]" class="sc-link-dark">Add an email address</a>.',{href:n(62).getRoute("settings")}),shouldAddAnnouncement:function(){return n(61).isLoggedIn()&&/nosend\.soundcloudmail\.com$/.test(n(55).get("me").get("primary_email"))}}},l={message:n(51).t('Were currently experiencing issues, but we are working to get them resolved as soon as possible. Please check our <a href="http://status.soundcloud.com/" target="_blank">Status blog</a> for more information.'),dismissable:!1},u=["old search system","We will no longer be showing Favorites","making some changes to the Classic Dashboard"];e.exports=n(1389).extend({model:n(1016),baseUrl:function(){return this.getEndpointUrl("announcements")},setup:function(){var e=this;this.on("error",r,this),Object.keys(a).filter(function(e){var t=a[e].shouldAddAnnouncement;return!t||t()}).forEach(function(t){var n=a[t],i=n.message,r=n.viewOptions,o=void 0===r?{}:r,s=e.add({key:t,message:i});s.viewOptions=o,e.lastFetchTime=Date.now()})},parse:function(e){return e.filter(function(e){return!u.some(i,e)})}},{neverRelease:!0,hashFn:function(){return 1}})},1248:function(e,t,n){"use strict";e.exports=n(73).extend(n(123),{model:n(1421),next_href:!1,audibleAt:function(e){var t=this.at(e);return t&&t.getAudible()},getSourceInfo:function(){var e=n(161).instances.get(this.options.conversationId);return{type:"conversation",resourceType:"user",resourceId:e.getRecipient().id}},comparator:function(e){return e.get("timestamp")}},{hashFn:function(e,t){return t&&t.conversationId}})},1253:function(e,t,n){"use strict";function i(e){this.add(e)}e.exports=n(73).extend({model:n(482),baseUrl:function(){return this.getEndpointUrl("meConnections")},setup:function(){this.listenTo(n(57),"connect:newConnection",i)},getByType:function(e){return this.findWhere({type:e})}},{hashFn:function(){return 1},neverRelease:!0})},1254:function(e,t,n){"use strict";function i(e){this.add(e.object,{at:0})}var r=function(){return 1},o=(e.exports=n(132).extend(n(319).withOptions({fields:["title"]}),{model:n(88),setupSources:function(){return[new o(null,this.options)]}},{hashFn:r}),n(73).extend({model:n(88),defaults:{offset:0,limit:50},baseUrl:function(){return this.getEndpointUrl("userPlaylists",{id:n(55).get("me").id})},setup:function(){var e=n(55).get("me").id;this.listenTo(n(74),"createPlaylist:origin:user:"+e,i)}},{neverRelease:!0,hashFn:r}))},1257:function(e,t,n){"use strict";e.exports=n(132).extend({model:n(67),defaults:{sourceType:"likes"},filters:{onlySounds:function(e){return"sound"===e.resource_type&&!e.isBlacklisted()}},setupSources:function(){var e=n(55).get("me").id;return"likes"===this.options.sourceType?[new(n(348))(null,{userId:e})]:[new(n(217))(null,{userId:e})]},extractModel:function(e){return e.getAudible()}},{hashFn:function(e,t){return t&&t.resource_id}})},1259:function(e,t,n){"use strict";function i(e){var t=e.collection,i=e.query_urn;return t.map(function(e){var t=e.output,r=e.query,o=e.highlights;return{output:t,highlights:o,kind:"query",link:n(62).getRoute("search",null,r,{query_urn:i}),artwork_url:null}})}e.exports=n(73).extend({model:n(279),defaults:{query:null},queryUrn:null,_currentlyFetching:!1,baseUrl:function(){var e=this.options.query,t=n(55).get("experiments").get("v2_listening","search_localized_autocomplete_web")||null;return this.getEndpointUrl("searchQueries",{},{q:e,variant:t})},fetch:function(e){return n(73).prototype.fetch.call(this,n(3).defaults({omitAuthorization:!0},e))},parse:function(e){return this.queryUrn=e.query_urn,i(e)},updateQuery:function(e){var t=this;this.options.query=e,this._currentlyFetching||(this._currentlyFetching=!0,this.queryUrn=null,this.next_href=null,this.fetch({reset:!0}).always(function(){t._currentlyFetching=!1,e!==t.options.query&&t.updateQuery(t.options.query)}))}})},1261:function(e,t,n){"use strict";e.exports=n(1004).extend({defaults:{prefix:"",context:null,urn:null},baseUrl:function(){var e=this.options,t={q:e.prefix.toLowerCase(),highlight_mode:"offsets",context:e.context&&e.context.map(function(e){return e.toLowerCase()}).join(","),urn:e.urn,user_id:n(55).get("me").id};return this.getEndpointUrl("searchSuggestTags",{},t)},parse:function(e){return n(3).pluck(e.suggestions,"id")}},{hashFn:function(e,t){var n=t.prefix,i=t.context,r=t.urn;return n+";"+JSON.stringify(i)+";"+r}})},1262:function(e,t,n){"use strict";function i(e){return"News"===e?"News & Politics":e}e.exports=n(310).extend({defaults:{limit:21,category:null,excludeFollowing:!0,view:null,shuffle:!1},model:n(383),meIds:null,setup:function(){this.meIds=new(n(483))},baseUrl:function(){var e=this.options.view,t=e?{view:e}:{};return this.getEndpointUrl("mySuggestedUsers",{category:i(this.options.category)},t)},fetch:function(){for(var e=this,t=arguments.length,i=Array(t),r=0;t>r;r++)i[r]=arguments[r];var o=n(56).defer();return this.meIds.fetch().done(function(){n(310).prototype.fetch.apply(e,i).done(o.resolve).fail(o.reject)}).fail(o.reject),o},getTokens:function(){return this.map(function(e){return e.get("token")})},parse:function(e){var t=this,i=this.options,r=i.shuffle,o=i.excludeFollowing,s=e.collection;return r&&(s=n(3).shuffle(s)),this.next_href=s.length>0?null:!1,n(3).filter(s,function(e){return!o||t.isValidUserSuggestion(e.user.id)})},isValidUserSuggestion:function(e){return!this.meIds.get(e)}},{hashFn:function(e,t){return t&&t.category||1},onCleanup:function(e){e.meIds.release(),e.meIds=null}})},1267:function(e,t,n){"use strict";function i(){return new(n(343))(null,{resource_id:this.options.userId,playlists_for:"user",limit:this.options.limit})}e.exports=n(132).extend(n(319).withOptions({fields:["title"]}),{model:n(75),defaults:{limit:25,includePrivateSounds:!1,includePlaylists:!0},setup:function(){for(var e,t=arguments.length,i=Array(t),r=0;t>r;r++)i[r]=arguments[r];(e=n(132).prototype.setup).call.apply(e,[this].concat(i)),this.options.includePrivateSounds||this.setFilter("publicOnly",function(e){return e.isPublic()})},setupSources:function(){var e=[];return this.options.includePlaylists&&e.push(i.call(this)),e.push(new(n(947))(null,{userId:this.options.userId})),e},extractModel:function(e){return e}},{hashFn:function(e,t){var n=t.includePlaylists!==!1;return t.userId+"_audibles"+(n?"_includes_playlists":"")}})},1272:function(e,t,n){"use strict";e.exports=n(73).extend({model:n(66).extend(),baseUrl:function(){return this.getEndpointUrl("meRightsholders")},parse:function(e){var t=n(55).get("me"),i=t.getUrn(),r=n(3).uniq(e||[],function(e){return e.rightsholder_urn});return r.map(function(e){var n=e.name,r=e.rightsholder_urn;return n||r!==i?{name:n,rightsholder_urn:r}:{name:t.get("username"),rightsholder_urn:r}})},availableTerritories:function(){var e=this.models.reduce(function(e,t){return e[t.get("rightsholder_urn")]=t.get("name"),e},{}),t=n(3).object(n(3).map(n(84).monetizableCountryCodes(),function(t){return[t,e]}));return t}},{hashFn:function(){return 1}})},1273:function(e,t,n){"use strict";e.exports={userBadge:{Subview:n(1821),minHeight:199,width:"150",offset:"0 10"},audibleAttribute:{Subview:n(247),relativeElementAnchor:"center bottom",width:"200",anchor:"right top",offset:"18 10",smallText:!0},genericDialog:{relativeElementAnchor:"center bottom",anchor:"right top",offset:"18 10",smallText:!1,text:""}}},1274:function(e,t,n){"use strict";var i="get",r="post",o="put",s="delete",a="public-api",l="api-v2",u="sign-in",c="visuals",d="pages";e.exports=n(3).mapObject({announcement:[i,a,"announcements/:id"],announcements:[i,a,"announcements"],app:[i,a,"app/:id"],appV2TrackComments:[i,a,"app/v2/tracks/:id/comments"],audioAd:[i,l,"audio-ad"],charts:[i,l,"charts"],checkIdentifier:[i,u,"identifier",{q:null}],collectionPlaylists:[i,l,"users/:id/playlists/liked_and_owned"],comment:[i,l,"comments/:id"],commentSpam:[r,a,"i1/comments/:id/spam"],developerApps:[i,l,"apps"],playlistLikesIds:[i,l,"me/playlist_likes/ids"],playlistLikesCreate:[o,l,"users/:userId/playlist_likes/:id"],playlistLikesDelete:[s,l,"users/:userId/playlist_likes/:id"],playlistRepostsIds:[i,a,"e1/me/playlist_reposts/ids"],playlistRepostsCreate:[o,a,"e1/me/playlist_reposts/:id"],playlistRepostsDelete:[s,a,"e1/me/playlist_reposts/:id"],soundLikesIds:[i,a,"e1/me/track_likes/ids"],soundLikesCreate:[o,l,"users/:userId/track_likes/:id"],soundLikesDelete:[s,l,"users/:userId/track_likes/:id"],edgePlaylistCategory:[i,a,"e1/playlists/:id/:category"],edgeTrackCategory:[i,a,"e1/tracks/:id/:category"],soundReposters:[i,l,"tracks/:id/reposters"],soundRepostsIds:[i,a,"e1/me/track_reposts/ids"],soundRepostsCreate:[o,a,"e1/me/track_reposts/:id"],soundRepostsDelete:[s,a,"e1/me/track_reposts/:id"],featuredProfiles:[i,l,"users/:id/featured-profiles"],feedPlaylistUpdate:[o,l,"feed-playlists/:id"],feedTrackUpdate:[o,l,"feed-tracks/:urn"],me:[i,l,"me"],meConnections:[i,a,"me/connections"],meRightsholders:[i,l,"me/rightsholders"],meUpdate:[o,l,"me"],myActivitiesTracks:[i,a,"me/activities/tracks"],myConnection:[i,a,"me/connections/:id"],myFollowersIds:[i,l,"me/followers/ids"],myFollowingsIds:[i,l,"users/:userId/followings/ids"],myFollowingsCreate:[r,l,"me/followings/:id"],myFollowingsDelete:[s,l,"me/followings/:id"],mySuggestedUsers:[i,l,"me/suggested/users/:category"],newForYou:[i,l,"me/new-for-you"],oscpStatus:[i,l,"oscp/status"],oscpUserCreate:[r,l,"oscp/user_info"],oscpPayoutCreate:[r,l,"oscp/payout"],oscpAvailableContract:[i,l,"oscp/contracts/available/:contract_type"],oscpActiveContract:[i,l,"oscp/contracts/active/:id"],oscpContractSign:[r,l,"oscp/contracts/sign/:contract_type"],paymentCheckout:[i,l,"payments/checkout"],paymentCheckoutItem:[i,l,"payments/checkout/:id"],paymentOrders:[i,l,"payments/orders/:type"],paymentQuotations:[i,l,"payments/quotations/:category"],paymentQuotationsCode:[i,l,"payments/quotations/code/:id"],paymentsConsumerSubscriptionsActive:[i,l,"payments/consumer-subscriptions/active"],paymentsSubscriptionsActive:[i,l,"payments/subscriptions/active"],personalizedTracks:[i,l,"me/personalized-tracks"],playHistoryTracks:[i,l,"me/play-history/tracks"],playHistoryContexts:[i,l,"me/play-history/contexts"],playHistoryAdd:[r,l,"me/play-history"],playHistoryClear:[s,l,"me/play-history"],playlist:[i,l,"playlists/:id"],playlistUpdate:[o,l,"playlists/:id"],playlistArtworkUpdate:[o,a,"playlists/:id"],playlistDelete:[s,a,"playlists/:id"],playlistCategory:[i,l,"playlists/:id/:category"],playlistCreate:[r,l,"playlists"],playlistDiscovery:[i,l,"playlists/discovery"],playlistsForTrack:[i,l,"tracks/:trackId/playlists"],playlistsWithoutAlbumsForTrack:[i,l,"tracks/:trackId/playlists_without_albums"],albumsForTrack:[i,l,"tracks/:trackId/albums"],promotedSearch:[i,l,"promoted/search"],promotedUploadTakeover:[i,l,"promoted/upload-takeover"],promotedUploadText:[i,l,"promoted/upload-text"],promotedUsers:[i,l,"promoted/users"],recommendedStations:[i,l,"stations/:type"],relatedSounds:[i,l,"tracks/:track_id/related"],reportCopyrightInfringement:[r,l,"copyright_reports"],resetPassword:[r,l,"users/password_reset",{email:null}],resolve:[i,l,"resolve",{url:""}],rollouts:[i,l,"features/:names"],search:[i,l,"search"],searchQueries:[i,l,"search/queries"],searchCategory:[i,l,"search/:category"],searchSuggestTags:[i,a,"search/suggest/tags"],searchUniversal:[i,l,"search/bucketed",{q:null,limit_ft:16,limit_others:3}],shortcutsFollowings:[i,l,"me/shortcuts/followings"],shortcutsTrackLikes:[i,l,"me/shortcuts/track-likes"],signinWithFacebook:[r,u,"sign-in/facebook"],signinWithGoogle:[r,u,"sign-in/google"],signinWithPassword:[r,u,"sign-in/password"],signupWithEmail:[r,u,"sign-up/email"],signupWithEmailToken:[r,u,"sign-up/email/token"],signupWithFacebook:[r,u,"sign-up/facebook"],signupWithGoogle:[r,u,"sign-up/google"],station:[i,l,"stations/:urn"],stationBatch:[i,l,"stations",{urns:null}],stationTracks:[i,l,"stations/:urn/tracks"],likedStations:[i,l,"stations/liked"],likedStationIds:[i,l,"stations/liked/ids"],likeStation:[o,l,"stations/liked/:id"],unlikeStation:[s,l,"stations/liked/:id"],staticPage:[i,d,":pageName.html"],stream:[i,l,"stream"],streamNotifications:[i,l,"stream/notifications"],streamUserProfile:[i,l,"stream/users/:id"],streamUserReposts:[i,l,"stream/users/:id/reposts"],tagsSuggested:[i,l,"tags/suggested/:urn"],tagsSuggestedCategory:[i,l,"tags/suggested/:category/:urn"],territoriesWhichRequireExplicitRightsholder:[i,l,"tracks/explicit-rightsholder-required-in"],timeseriesTrack:[i,l,"users/:user_urn/tracks/:track_urn/stats/timeseries/:metric",{from:null,to:null,resolution:null}],timeseriesUser:[i,l,"users/:user_urn/stats/timeseries/:metric",{from:null,to:null,resolution:null,tracks:null}],topUserStats:[i,l,"users/:user_urn/stats/top/:metric/:by",{from:null,to:null}],topTrackStats:[i,l,"users/:user_urn/tracks/:track_urn/stats/top/:metric/:by",{from:null,to:null}],totalsUserStats:[i,l,"users/:user_urn/stats/totals/:metric"],totalsTrackStats:[i,l,"users/:user_urn/tracks/:track_urn/stats/totals/:metric"],track:[i,l,"tracks/:urn"],trackAsOwner:[i,l,"tracks/:urn",{representation:"owner"}],trackBatch:[i,l,"tracks"],trackCategory:[i,l,"tracks/:id/:category"],trackCreate:[i,l,"tracks"],trackComments:[i,l,"tracks/:id/comments"],trackDelete:[s,l,"tracks/:id"],trackImageUpdate:[o,a,"tracks/:id"],trackPatchUpdate:[o,a,"tracks/:id"],trackPermalinkAvailability:[i,l,"track_permalink_availability",{permalink:null}],trackStreams:[i,a,"i1/tracks/:id/streams"],trackUpdate:[i,l,"tracks/:urn"],trinityPublish:[i,a,"tpub/publish"],trinitySubscribe:[i,a,"tsub/subscribe"],user:[i,l,"users/:id"],userAlbums:[i,l,"users/:id/albums"],userAsOwner:[i,l,"users/:urn",{representation:"owner"}],userComments:[i,a,"users/:id/comments"],userDelete:[r,l,"users/:urn/deletion"],userEmailCreate:[r,l,"users/:user_id/emails"],userEmailDelete:[s,l,"users/:user_id/emails/:id"],userEmailResendConfirmation:[r,l,"users/:user_id/emails/:id/confirmation"],userEmailUpdate:[o,l,"users/:user_id/emails/:id"],userEmails:[i,l,"users/:id/emails"],userFollowers:[i,l,"users/:id/followers"],userFollowersFollowedBy:[i,l,"users/:id/followers/followed_by/:followed_by"],userFollowings:[i,l,"users/:id/followings"],userFollowingsNotFollowedBy:[i,l,"users/:id/followings/not_followed_by/:not_followed_by"],userImageUpdate:[o,a,"users/:id"],userLikes:[i,l,"users/:id/likes"],userTrackLikes:[i,l,"users/:id/track_likes"],userNotificationsPreferences:[i,l,"users/:id/notifications/preferences"],userPlaylists:[i,l,"users/:id/playlists"],userPlaylistsWithoutAlbums:[i,l,"users/:id/playlists_without_albums"],userResetPassword:[r,l,"users/:id/password_reset"],userSettings:[i,l,"users/:id/settings"],userSpotlight:[i,l,"users/:id/spotlight"],userTracks:[i,l,"users/:id/tracks"],userWebProfiles:[i,l,"users/:urn/web-profiles"],userWebProfilesUpdate:[r,l,"users/:urn/web-profiles"],visuals:[i,c,"visuals"],userPrivacyPreferences:[i,l,"me/settings/privacy"],userPrivacyPreferencesUpdate:[r,l,"me/settings/privacy"],userBlockings:[i,l,"me/mutings"],userBlockingsIds:[i,a,"me/mutings/users/ids"],userBlockingsDelete:[s,l,"me/mutings/:urn"],userBlockingsCreate:[r,a,"me/blockings",{user_id:null,reported:null,remove_activities:null}]},function(e){return{method:e[0],service:e[1],path:e[2],query:e[3]}})},1278:function(e,t,n){"use strict";var i=n(65).parse("https://api-v2.soundcloud.com/"),r=n(65).parse("https://api.soundcloud.com/"),o=n(65).parse("https://visuals.soundcloud.com"),s=n(65).parse("https://sign-in.soundcloud.com/");e.exports={"api-v2":{hostname:i.host,protocol:i.scheme,port:i.port,headers:{Accept:"application/json, text/javascript, */*; q=0.1"},query:{client_id:"2t9loNQH90kzJcsFCODdigxfp325aq4z"}},"public-api":{hostname:r.host,protocol:r.scheme,query:{client_id:"2t9loNQH90kzJcsFCODdigxfp325aq4z"}},"sign-in":{hostname:s.host,protocol:s.scheme,port:s.port,headers:{Accept:"application/json, text/javascript, */*; q=0.1"},query:{client_id:"2t9loNQH90kzJcsFCODdigxfp325aq4z"},customSettings:{timeout:5e3}},visuals:{hostname:o.host,protocol:o.scheme,query:{client_id:"2t9loNQH90kzJcsFCODdigxfp325aq4z"}},pages:{hostname:"pages.soundcloud.com",protocol:"https"}}},1280:function(e,t,n){"use strict";n(42),n(43),n(44),n(33),n(32),n(34),n(35),n(36),n(39),n(41),n(107).ios&&n(31)},1421:function(e,t,n){"use strict";e.exports=n(66).extend({_audible:null,setup:function(){var e,t=this.get("urn");t&&(e=n(94).getAsAttributes(t),this._audible=new(n(75))({resource_type:e.resource_type,id:e.id}),this.addSubmodel(this._audible))},getAudible:function(){return this._audible}})},1422:function(e,t,n){"use strict";function i(){var e=Math.min(this.getRequiredListenPeriod(),this.sound.getMediaDuration()),t=this.sound.currentTime();return e-t}function r(e){this._monetizableTrack.trigger("ad:"+e.type,e)}var o=function(e,t){return t.reduce(function(e,t){return e&&e[t]},e)};e.exports=n(66).extend({resource_type:"audio_ad",submodelMap:{sound:n(67)},_monetizableTrack:null,baseUrl:function(){return n(82).getAudioAdsUrl({trackId:this.getMonetizableTrack().id})},setup:function(){this.options.requiredListenPeriod=this.options.requiredListenPeriod||0},createSubmodel:function(e,t){var i;"sound"===t?(i=this.get("sound"),this.sound=new(n(67))(n(3).assign(i,{resource_id:{ad_target_id:this.resource_id,sound_id:i.id}})),this.sound.setMonetizableTrack(this._monetizableTrack),this.listenTo(this.sound,"buffering:start buffering:end",r)):n(66).prototype.createSubmodel.apply(this,arguments)},parse:function(e){if(!e||!e.promoted)return{};var t=e.promoted;n(82).parseResponse({promoted:[t]});var i=e.track,r=o(t,["data","audio"]),s=o(t,["data","companion_display"])||{},a=function(){return{audio:r,companion_display:s,sound:n(3).assign({ad_type:"internal"},i),user:i.user}},l=function(){return{audio:r,companion_display:s,sound:n(3).extend({ad_type:"external"},n(3).pick(r,["url","duration"]))}};return i?a():r&&r.url?l():{}},isPopulated:function(){var e="MONETIZE"===this.getMonetizableTrack().get("policy");return e?n(66).prototype.isPopulated.call(this):!0},getMsUntilCanSkip:function(){return Math.max(i.call(this),0)},getRequiredListenPeriod:function(){return this.get("audio").skippable?this.options.requiredListenPeriod:this.sound.get("duration")},isSkippableRightNow:function(){return i.call(this)<=0},getMonetizableTrack:function(){return this._monetizableTrack},configureMonetizableTrack:function(e){this._monetizableTrack=e},getLandingPage:function(){var e=this.get("companion_display")||{},t=e.landing_page;return t}})},1425:function(e,t,n){"use strict";var i=[n(174).anySCLinkRegex,/^https:\/\/play.google.com\/.*id\=com\.soundcloud\.android/,/^https:\/\/itunes.apple.com\/.*\/soundcloud\//,/^https:\/\/soundcloudcontests.com\b/,/^https:\/\/docs.google.com\/a\/soundcloud\.com\//];e.exports=n(66).extend({resource_type:"dashbox",baseUrl:function(){return n(82).getDashboxUrl(this.options.adZone,n(51).getLocale())},parse:function(e){return n(82).parseDashboxResponse(e)},isAd:function(){var e=this.get("click_through_url")||this.get("landing_page");return e?!i.some(e.match,e):!1},isStandardDashbox:function(){return!!this.get("body")},isVisualDashbox:function(){return!!this.get("ad_visual")},hasContent:function(){return this.isStandardDashbox()||this.isVisualDashbox()}})},1426:function(e,t,n){"use strict";e.exports=n(66).extend({},{neverRelease:!0,hashFn:function(){return 1}})},1430:function(e,t,n){"use strict";e.exports=n(66).extend({resource_type:"soundVisual",hasDataForView:function(){return!0},baseUrl:n(3).noop},{hashFn:function(e){return e.urn}})},1841:function(e,t,n){"use strict";e.exports=n(52)},1842:function(e,t,n){"use strict";e.exports=function(e,t){return n(51).dateTimeHelper.timecode(e,t.hash)}},1843:function(e,t){"use strict";var n=["free","lite","solo","pro","pro-plus","creator-pro","creator-pro-unlimited"],i={customBuyTitle:[!1,!0,!0,!0,!0,!0,!0],quietMode:[!1,!0,!0,!0,!0,!0,!0],fileReplace:[!1,!0,!0,!0,!0,!0,!0],planLevel:[0,1,2,2,2,1,2],spotlight:[!1,!0,!0,!0,!0,!0,!0],stats:[0,1,2,2,2,1,2],visuals:[!1,!0,!0,!0,!0,!0,!0],widgets:[!1,!0,!0,!0,!0,!0,!0],widgetOptions:[!1,!1,!1,!1,!0,!1,!0]},r=["free","consumer-mid-tier","consumer-high-tier"],o={adFree:[!1,!0,!0]};e.exports={get:function(e,t,s){var a;return(a=i[s])?a[n.indexOf(e)]:(a=o[s])?a[r.indexOf(t)]:void 0}}},1844:function(e,t,n){"use strict";function i(e){return n(3).isFunction(e.toJSON)?e.toJSON():e}function r(e){return e.replace(/^https?:.+?\w\//,"/")}function o(e,t){return t&&(t.metric&&(e.push(t.metric),t.from&&t.to&&e.push(t.from,t.to)),t.expanded&&e.push("expanded")),e}e.exports={listen:function(e,t){if(e=i(e),"playlist"===e.kind)return this.getRoute("playlist",e,t);var o,s={};return t=t?"/comment-"+t:"",e._playlist&&e._playlist.id&&(o=e._playlist.permalink_url.replace(/\/s-[a-zA-Z0-9]{5}$/,""),s.query={"in":r(o).substr(1)+(this.includeSecretTokenForPlaylist(e._playlist)?"/"+e._playlist.secret_token:"")}),s.path=e.user?"/"+e.user.permalink+"/"+e.permalink+t+(this.includeSecretTokenForSound(e)?"/"+e.secret_token:""):r(e.permalink_url+t),n(119).stringify(s)},listenNetwork:function(e,t,o){e=i(e);var s={};return"related"===t&&(t="recommended"),s.path=e.user?"/"+e.user.permalink+"/"+e.permalink+(this.includeSecretTokenForSound(e)?"/"+e.secret_token:""):r(e.permalink_url),s.path+="/"+t+("comments"===t&&o?"/"+o:""),n(119).stringify(s)},playlistEdit:function(e){return e=i(e),"/"+n(119).stringify({path:[e.user.permalink,"sets",e.permalink,"edit"]})},playlist:function(e){return e=i(e),e.user?"/"+e.user.permalink+"/sets/"+e.permalink+(this.includeSecretTokenForPlaylist(e)?"/"+e.secret_token:""):r(e.permalink_url)},playlistNetwork:function(e,t){e=i(e);var o={};return o.path=e.user?"/"+e.user.permalink+"/sets/"+e.permalink+(this.includeSecretTokenForPlaylist(e)?"/"+e.secret_token:""):r(e.permalink_url),o.path+="/"+t,n(119).stringify(o)},user:function(e,t){return e=i(e),"/"+e.permalink+(t?"/"+t:"")},userNetwork:function(e,t){return e=i(e),"/"+e.permalink+"/"+t},root:function(){return"/"},explore:function(e){return e=(e||"").toLowerCase(),"/"+n(119).stringify({path:["explore",e]})},charts:function(e,t,i){return"/"+n(119).stringify({path:["charts",n(3).findWhere(n(157).kinds,{id:e||n(157).defaultKind}).urlPart],query:{genre:t,country:i}})},people:function(e){return"/"+n(119).stringify({path:["people",e]})},peopleDirectory:function(e){return"/people/directory"+(e?"/"+e:"")},popularSearches:function(e){return"/popular/searches"+(e?"/"+e:"")},pages:function(e){return"/"+e},embedPage:function(){return"/pages/embed"},emailUnsubscribedPage:function(){return"/pages/unsubscribed"},pagesPages:function(e){return"/pages/"+e},tags:function(e){return n(119).stringify({path:"/tags/"+e.toLowerCase()})},search:function(e,t,i){var r={sounds:"sounds",high_tier:"go",sets:"sets",playlists:"sets",albums:"albums",people:"people"}[e];return"/"+n(119).stringify({path:["search",r],query:n(3).assign({q:t},i)})},activity:function(){return"/notifications"},stream:function(e){return"/stream"+(e?"/"+e:"")},logout:function(){return"/logout"},mobile:function(e){return"/mobile"+(e?"/"+e:"")},upload:function(){return"/upload"},youNetwork:function(e,t){return"/you/"+t},messages:function(e){return"/messages"+(e?"/"+e:"")},premium:function(e,t,i){var r=["pro",e];return t&&r.push("buy",t),"/"+n(119).stringify({path:r,query:{ref:i}})},redeem:function(e){return"/pro/redeem/"+e},purchased:function(e){var t=e.indexOf("gift")>-1?"gifts":"",i=e.replace(/(gift|creator)-/,"");return"/pro/purchased/"+n(119).stringify({path:[t,i]})},consumerPremium:function(e){var t=["go"];return"/"+n(119).stringify({path:t,query:{ref:e}})},consumerPremiumCheckout:function(e,t,i,r){var o=["go",i,"buy",e];return"/"+n(119).stringify({path:o,query:{promo_code:r,ref:t}})},consumerPremiumPurchased:function(e,t){var i=["go","purchased",e];return"/"+n(119).stringify({path:i,query:{ref:t}})},settings:function(e){return"/"+n(119).stringify({path:["settings",e]})},subscriptionSettings:function(e){return"/"+n(119).stringify({path:["you/subscriptions",e]})},oscpSettings:function(e){return"/"+n(119).stringify({path:["you/premier",e]})},developerApps:function(e){return"/"+n(119).stringify({path:["you/apps",e]})},signin:function(e){return"/"+n(119).stringify({path:["signin"],query:{redirect_url:e}})},v1:function(e,t){return t=t||"","/"+e+t},station:function(e){return"/stations/"+i(e).permalink},stations:function(){return"/you/stations"},stats:function(e){var t=[n(55).get("me").get("permalink"),"stats"];return"/"+n(119).joinPath(o(t,e))},"track-stats":function(e,t){e=i(e);var r=[e.user.permalink,e.permalink,"stats"];return"/"+n(119).joinPath(o(r,t))},recommended:function(){return"/discover"},reportCopyright:function(e){var t={path:"/pages/copyright/report/form"};return e&&(e=i(e),t.query={track:e.permalink,user:e.user.permalink}),n(119).stringify(t)},"new-for-you":function(){return"/discover/the-upload"},orders:function(e){return"/subscription/orders/"+e}}},1845:function(e,t,n){"use strict";function i(e,t,i){var r=n(3).findWhere(e,t);return r?r.id:i}e.exports=[{route:"(top|new)?",handler:function(e){var t=this.getQueryParams();return this.apply("charts",{chartKind:i(n(157).kinds,{urlPart:e},n(157).defaultKind),genre:i(n(157).genres,{id:t.genre},n(157).defaultGenre),country:i(n(157).countries,{id:t.country})})}}]},1846:function(e,t){"use strict";var n="(raybanremix)";e.exports=[{route:"",handler:function(){return this.apply("consumer-premium")}},{route:n+"(?:/:code)?",handler:function(e,t){return this.apply("consumer-premium",{customRoute:e,promoCode:t})}},{route:"(?:"+n+"/)?buy/go",handler:function(e){return this.apply("checkout",{plan:"go",customRoute:e})}},{route:"(?:"+n+"/)?buy/go-plus",handler:function(e){return this.apply("checkout",{plan:"go-plus",customRoute:e})}},{route:"purchased/go",handler:function(){return this.apply("consumer-premium",{purchased:!0,plan:"go"})}},{route:"purchased/go-plus",handler:function(){return this.apply("consumer-premium",{purchased:!0,plan:"go-plus"})}}]},1847:function(e,t){"use strict";e.exports=[{route:"",handler:function(){return this.apply("premium")}},{route:"gifts(?:/buy/:planName)?",handler:function(e){return this.apply("premium",{secondary:"gifts",buyPlan:e})}},{route:"buy/:planName",handler:function(e){return this.apply("premium",{buyPlan:e})}},{route:"redeem/:code",handler:function(e){return this.apply("premium",{secondary:"redeem",code:e})}},{route:"purchased(?:/(gifts))?/:planName",handler:function(e,t){return this.apply("purchased",{subpage:e,plan:t})}}]},1848:function(e,t){"use strict";e.exports=[{route:"",requiresLogin:!0,handler:function(){return this.apply("developer-apps")}},{route:"new",redirect:function(){return"https://docs.google.com/forms/d/e/1FAIpQLSfNxc82RJuzC0DnISat7n4H-G7IsPQIdaMpe202iiHZEoso9w/viewform"}}]},1849:function(e,t){"use strict";e.exports=[{route:"",requiresLogin:!0,handler:function(){return this.apply("personal-recommended")}},{route:"the-upload",requiresLogin:!0,handler:function(){return this.apply("new-for-you")}}]},1850:function(e,t){"use strict";e.exports=[{route:"(iphone|android)?",handler:function(e){return this.apply("mobile",{platform:e})}},{route:"pulse",handler:function(){return this.apply("mobile-pulse")}}]},1851:function(e,t){"use strict";e.exports=[{route:"embed",handler:function(){return this.apply("widgets")}},{route:"widgets",redirect:"/pages/embed"},{route:"unsubscribed",code:401,handler:function(){return this.apply("unsubscribed")}},{route:"((?:privacy|cookies)(?:/:monthYear)?)",handler:function(e){return this.apply("static-page",{pageName:"pages/"+e})}},{route:"(copyright/report|copyright|contact|competition|oscp-privacy|dmca_policy|model-withdrawal-form)",handler:function(e){return this.apply("static-page",{pageName:"pages/"+e})}},{route:"(help-community/(?:guidelines|privacy-policy|terms-of-use|cookies-policy))",handler:function(e){return this.apply("static-page",{pageName:"pages/"+e})}},{route:"who-we-are",redirect:"/pages/contact"},{route:"(copyright/report/form)",requiresLogin:!0,handler:function(e){return this.apply("copyright-form",{pageName:"pages/"+e})}}]},1852:function(e,t){"use strict";e.exports=[{route:"",code:401,handler:function(){return this.apply("people")}},{route:"(following|followers)",redirect:function(e){return"/you/"+e}},{route:"directory(?:/(:alphanum+))?",handler:function(e){return this.apply("people-directory",{subpage:e||"A"})}},{route:"finder|genre|find_friends",redirect:"/people"}]},1853:function(e,t){"use strict";e.exports=[{name:"playlist",route:":secretToken?",handler:function(e,t,n){return this.apply("listen",{userPermalink:e,playlistPermalink:t,secretToken:n})}},{route:"(?::secretToken/)?(likes|reposts)",handler:function(e,t,n,i){return this.apply("listen-network",{userPermalink:e,playlistPermalink:t,secretToken:n,subpage:i})}},{route:"edit",redirect:function(e,t){return"/"+e+"/sets/"+t}}]},1854:function(e,t){"use strict";e.exports=[{route:"(content|notifications|privacy)?",requiresLogin:!0,handler:function(e){return this.apply("settings",{subpage:e||""})}},{route:"account",requiresLogin:!0,redirect:"/settings"},{route:"extra",redirect:"/settings/content"},{route:"plan",redirect:"/you/subscriptions"},{route:"email",redirect:"/settings/notifications"}]},1855:function(e,t){"use strict";e.exports=[{route:"reset/success",handler:function(){return this.apply("password-reset-success")}},{route:"(forgot)?",handler:function(e){return this.isLoggedIn()?this.navigate("/stream",{replace:!0,trigger:!0}):this.apply("signin",{subpage:e})}}]},1856:function(e,t){"use strict";function n(e){return"/"+Array.prototype.filter.call(arguments,Boolean).join("/")}function i(e,t,n,i){return"recommended"===i&&(i="related"),this.apply("listen-network",{userPermalink:e,soundPermalink:t,secretToken:n,subpage:i})}e.exports=[{name:"listen",route:"(?::secretToken|comment-:id)?",handler:function(e,t,n,i){return this.apply("listen",{userPermalink:e,soundPermalink:t,secretToken:n,commentId:parseInt(i,10)})}},{route:"(?::secretToken/)?groups",code:410,redirect:function(e,t,i){
return n(e,t,i)}},{route:"(?::secretToken/)?(likes)",handler:i},{route:"(?::secretToken/)?(reposts)",handler:i},{route:"(?::secretToken/)?(sets)",handler:i},{route:"(?::secretToken/)?(albums)",handler:i},{route:"(?::secretToken/)?(recommended)",handler:i},{route:"(?::secretToken/)?comments(?:/:id)?",redirect:function(e,t,i,r){var o=r?"comment-"+r:null;return n(e,t,i,o)}},{route:"(?::secretToken/)?related",redirect:function(e,t,i){return n(e,t,i,"recommended")}},{route:"download(?:/:secretToken)?",code:410,redirect:function(e,t,i){return n(e,t,i)}},{route:"edit",redirect:function(e,t){return n(e,t)}}]},1857:function(e,t){"use strict";e.exports=[{route:"",redirect:"/you/stations"},{route:":stationType/:stationIdentifier",handler:function(e,t){return this.apply("station",{type:e,identifier:t})}}]},1858:function(e,t){"use strict";e.exports=[{route:":tag",handler:function(e){return this.apply("tags",{tag:e})}}]},1859:function(e,t){"use strict";function n(e){return function(t,n,i,r,o,s){var a=this.getCurrentUserPermalink();return t!==a?this.navigate("/"+t,{replace:!0,trigger:!0}):e.apply(this,arguments)}}e.exports=[{route:"",requiresLogin:!0,handler:n(function(e,t){return this.apply("track-stats",{trackPermalink:t,userPermalink:e})})},{route:":metric(?:/:date/:date)?(/expanded)?",requiresLogin:!0,handler:n(function(e,t,n,i,r,o){return this.apply("track-stats",{metric:n,from:i,to:r,trackPermalink:t,userPermalink:e,expanded:!!o})})}]},1860:function(e,t){"use strict";function n(e){return function(t,n,i,r,o){var s=this.getCurrentUserPermalink();return t!==s?this.navigate("/"+t,{replace:!0,trigger:!0}):e.apply(this,arguments)}}e.exports=[{route:"",requiresLogin:!0,handler:n(function(e){return this.apply("stats")})},{route:":metric(?:/:date/:date)?(/expanded)?",requiresLogin:!0,handler:n(function(e,t,n,i,r){return this.apply("stats",{metric:t,from:n,to:i,expanded:!!r})})}]},1861:function(e,t){"use strict";function n(e,t){return this.apply("user",{userPermalink:e,subpage:t})}function i(e,t){return this.apply("user-network",{userPermalink:e,subpage:t})}e.exports=[{name:"user",route:"",handler:function(e){return this.apply("user",{userPermalink:e})}},{route:"(albums)",handler:n},{route:"(reposts)",handler:n},{route:"(sets)",handler:n},{route:"(tracks)",handler:n},{route:"(likes)",handler:i},{route:"(followers)",handler:i},{route:"(following)",handler:i},{route:"(comments)",handler:i},{route:"favorites",redirect:function(e){return"/"+e+"/likes"}},{route:"groups|spotlight",code:410,redirect:function(e){return"/"+e}}]},1862:function(e,t){"use strict";function n(e){return this.apply("collection",{subpage:e})}function i(e){return"/"+this.getCurrentUserPermalink()+"/"+e}e.exports=[{route:"",requiresLogin:!0,redirect:function(){return"/"+this.getCurrentUserPermalink()}},{route:"tracks",requiresLogin:!0,handler:function(){return this.apply("track-manager")}},{route:"(collection)",requiresLogin:!0,handler:n},{route:"(likes)",requiresLogin:!0,handler:n},{route:"(sets)",requiresLogin:!0,handler:n},{route:"(albums)",requiresLogin:!0,handler:n},{route:"(following)",requiresLogin:!0,handler:n},{route:"(stations)",requiresLogin:!0,handler:n},{route:"(history)",requiresLogin:!0,handler:n},{route:"(followers)",requiresLogin:!0,redirect:i},{route:"(comments)",requiresLogin:!0,redirect:i},{route:"(reposts)",requiresLogin:!0,redirect:i},{route:"subscriptions(?:/(go|pro))?",requiresLogin:!0,handler:function(e){return this.apply("subscriptions",{subpage:e})}},{route:"premier(?:/(agreement|getting-started|faqs))?",handler:function(e){var t=this.getRolloutValue("oscp_known_content_monetization_eligible")||this.getRolloutValue("oscp_unknown_content_payouts_eligible"),n=["agreement","getting-started"];return!t&&n.indexOf(e)>-1?this.navigate("/you/premier",{replace:!0,trigger:!0}):this.apply("oscp",{subpage:e||""})}},{route:"(stats(?:/.*)?)",requiresLogin:!0,redirect:function(e){return"/"+this.getCurrentUserPermalink()+"/"+e}}]},1863:function(e,t){"use strict";e.exports={user:{likes:{permalink_url:":permalink_url/likes",uri:":uri/favorites"},spotlight:{permalink_url:":permalink_url",uri:":uri/spotlight"}}}},1864:function(e,t,n){"use strict";var i=/^[]/,r={de:"Deutsch",en:"English (US)",es:"Espaol",fr:"Franais",it:"Italiano",nl:"Nederlands",pt_BR:"Portugus (Brasil)"},o={asterisk:"Asterisk"},s=n(3).extend({},r,o),a=n(3).keys(r),l=n(3).keys(s),u=n(3).keys(o);e.exports={defaultLocale:"en",publicLanguages:r,publicLanguageCodes:a,experimentalLanguages:o,experimentalLanguageCodes:u,experimentalAndPublicLanguages:s,experimentalAndPublicLanguageCodes:l,isLocaleExperimental:function(e){var t=i.test(e);return t||u.indexOf(e)>-1},normalizeLocale:function(e){var t=e.split("_")[0];return n(3).contains(l,t)?t:e}}},1865:function(e,t){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function i(e){return 3*e.length/4-n(e)}function r(e){var t,i,r,o,s,a=e.length;o=n(e),s=new c(3*a/4-o),i=o>0?a-4:a;var l=0;for(t=0;i>t;t+=4)r=u[e.charCodeAt(t)]<<18|u[e.charCodeAt(t+1)]<<12|u[e.charCodeAt(t+2)]<<6|u[e.charCodeAt(t+3)],s[l++]=r>>16&255,s[l++]=r>>8&255,s[l++]=255&r;return 2===o?(r=u[e.charCodeAt(t)]<<2|u[e.charCodeAt(t+1)]>>4,s[l++]=255&r):1===o&&(r=u[e.charCodeAt(t)]<<10|u[e.charCodeAt(t+1)]<<4|u[e.charCodeAt(t+2)]>>2,s[l++]=r>>8&255,s[l++]=255&r),s}function o(e){return l[e>>18&63]+l[e>>12&63]+l[e>>6&63]+l[63&e]}function s(e,t,n){for(var i,r=[],s=t;n>s;s+=3)i=(e[s]<<16)+(e[s+1]<<8)+e[s+2],r.push(o(i));return r.join("")}function a(e){for(var t,n=e.length,i=n%3,r="",o=[],a=16383,u=0,c=n-i;c>u;u+=a)o.push(s(e,u,u+a>c?c:u+a));return 1===i?(t=e[n-1],r+=l[t>>2],r+=l[t<<4&63],r+="=="):2===i&&(t=(e[n-2]<<8)+e[n-1],r+=l[t>>10],r+=l[t>>4&63],r+=l[t<<2&63],r+="="),o.push(r),o.join("")}t.byteLength=i,t.toByteArray=r,t.fromByteArray=a;for(var l=[],u=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,p=d.length;p>h;++h)l[h]=d[h],u[d.charCodeAt(h)]=h;u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},1866:function(e,t,n){t=e.exports=n(6)(),t.push([e.id,".l-collection>.l-nav{margin:30px 0}",""])},1867:function(e,t,n){t=e.exports=n(6)(),t.push([e.id,".l-consumer-sub-footer{padding:0 40px}",""])},1868:function(e,t,n){t=e.exports=n(6)(),t.push([e.id,".frontHero{color:#fff;position:relative;overflow:hidden;border-top:4px solid #f50;background-color:#666;height:450px;background:url("+n(1158)+") 0 0/cover no-repeat;-webkit-font-smoothing:antialiased}.frontHero__container{height:100%;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:column nowrap;-ms-flex-flow:column nowrap;flex-flow:column nowrap;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.frontHero__signin{position:absolute;top:20px;right:30px}.frontHero__loginButton{margin-right:6px;height:30px;padding:0 15px}.frontHero__createAccountButton{height:30px;padding:0 16px}.frontHero__logo{position:absolute;top:13px;left:19px;background:url("+n(755)+') no-repeat 12px 11px;background-size:48px 22px;display:block;width:184px;height:46px;text-indent:-999em}.frontHero__logo::after{position:absolute;left:1px;content:"";display:inline-block;height:100%;width:100%;background:url('+n(514)+") no-repeat 60px 11px;background-size:115px 22px}.frontHero__carousel{display:-webkit-flex;display:-ms-flexbox;display:flex;overflow:hidden}.frontHero__carouselNav{display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-bottom:24px}.frontHero__carouselNavDot{width:10px;height:10px;background:0 0;border-radius:6px;border:1px solid #fff;cursor:pointer}.frontHero__carouselNavDot+.frontHero__carouselNavDot{margin-left:18px}.frontHero__content{width:100%;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:column nowrap;-ms-flex-flow:column nowrap;flex-flow:column nowrap;-webkit-align-items:center;-ms-flex-align:center;align-items:center;margin:145px 0 0}.frontHero__title{margin-bottom:8px;font-size:36px;font-weight:100}.frontHero__tagline{font-size:18px;max-width:530px;text-align:center}.frontHero__cta{margin-top:17px;display:-webkit-flex;display:-ms-flexbox;display:flex}.frontHero__learnButton{font-size:17px;min-width:164px;height:46px;margin-right:25px;padding-top:12px}.frontHero__ctaButton{font-size:18px;min-width:210px;height:46px}@media (-webkit-min-device-pixel-ratio:2),(min-resolution:2dppx),(min-resolution:192dpi){.frontHero{background-image:url("+n(1159)+")}.frontHero__logo{background-image:url("+n(756)+")}.frontHero__logo::after{background-image:url("+n(515)+")}}",""])},1869:function(e,t,n){t=e.exports=n(6)(),t.push([e.id,".l-messages-left{position:fixed;top:45px;bottom:0;width:350px;overflow:hidden}.l-messages-main{padding-left:380px}@media (max-width:1079px){.l-messages-left{width:270px}.l-messages-main{padding-left:300px}}",""])},1870:function(e,t,n){t=e.exports=n(6)(),t.push([e.id,".listen-about .l-main{min-height:230px}@media (max-width:1079px){.listen-about>.l-sidebar-left{display:none}}",""])},1871:function(e,t,n){t=e.exports=n(6)(),t.push([e.id,".l-listen-wrapper{position:relative}.l-listen-wrapper .l-about-main{margin-right:330px;padding-top:20px}.l-listen-wrapper .l-about-rows{padding-right:30px;border-right:1px solid #f2f2f2}.l-listen-wrapper .l-about-row{margin-bottom:20px}.l-listen-wrapper .l-about-row:last-child{margin-bottom:0}.l-listen-wrapper .l-about-top>.listenEngagement{padding-top:0}.l-listen-wrapper .l-sidebar-right{top:30px;right:0;position:absolute;bottom:auto;width:300px;margin-bottom:50px}.l-listen__mainContent{position:relative}.l-listen__mainContent>.l-about-left{position:absolute;top:0;left:0;width:120px}.l-listen__mainContent>.l-about-right{padding-left:150px}",""])},1872:function(e,t,n){t=e.exports=n(6)(),t.push([e.id,".l-premium-content{padding-top:30px}",""])},1873:function(e,t,n){t=e.exports=n(6)(),t.push([e.id,".l-search{position:relative}.l-search .l-fixed-top{position:absolute;top:0;left:0}.l-search .l-fixed-left{position:absolute;top:94px;left:0;bottom:0;width:220px}.l-search .l-main{margin:0 0 0 250px;padding-top:84px}@media (max-width:1079px){.l-search .l-main{margin-left:240px}}",""])},1874:function(e,t,n){t=e.exports=n(6)(),t.push([e.id,"@media (max-width:1079px){.l-settings-layout .l-fluid-fixed .l-main{margin-right:0;padding-right:0;border-right:0}.l-settings-layout .l-fluid-fixed .l-sidebar-right{display:none}}",""])},1875:function(e,t,n){t=e.exports=n(6)(),t.push([e.id,".l-signin .l-main{width:400px;height:620px;margin:30px auto;padding:0 30px;border:1px solid #e5e5e5}",""])},1876:function(e,t,n){t=e.exports=n(6)(),t.push([e.id,".l-station-wrapper{position:relative}.l-station-wrapper .l-about-main{margin-right:330px;padding-top:20px}.l-station-wrapper .l-about-rows{padding-right:30px;border-right:1px solid #f2f2f2}.l-station-wrapper .l-about-row{margin-bottom:20px}.l-station-wrapper .l-about-row:last-child{margin-bottom:0}.l-station-wrapper .l-sidebar-right{top:30px;right:0;position:absolute;bottom:auto;width:300px;margin-bottom:50px}.l-station__mainContent{position:relative}.l-station__mainContent>.l-about-left{position:absolute;top:0;left:0;width:120px}.l-station__mainContent>.l-about-right{padding-left:150px}",""])},1877:function(e,t,n){t=e.exports=n(6)(),t.push([e.id,".l-two-column-sound-hero{position:relative}.l-two-column-sound-hero .l-sidebar-right{position:absolute;top:30px;bottom:0;right:0;width:300px}.l-two-column-sound-hero .l-sidebar-right .l-fixed{width:300px;overflow:hidden}.l-two-column-sound-hero .l-sidebar-right .l-footer{position:relative;top:-30px;padding-bottom:30px}.l-two-column-sound-hero .l-main{padding:0 30px 0 0;margin:0 330px 0 0}.l-two-column-sound-hero .l-listen-content{position:relative;padding:20px 0 0 0;margin:0}@media (max-width:1079px){.l-two-column-sound-hero .l-main{padding-right:20px;margin-right:320px}}",""])},1878:function(e,t,n){t=e.exports=n(6)(),t.push([e.id,".l-fluid-fixed .l-user-main{margin-top:20px;padding-top:0}.l-fluid-fixed .l-user-sidebar-right{top:0}",""])},2257:function(e,t,n){"use strict";var i,r=n(2273),o=n(1142),s=n(233),a=n(2281),l=n(233),u=n(234),c=Function.prototype.bind,d=Object.defineProperty,h=Object.prototype.hasOwnProperty;i=function(e,t,n){var i,o=u(t)&&l(t.value);return i=r(t),delete i.writable,delete i.value,i.get=function(){return!n.overwriteDefinition&&h.call(this,e)?o:(t.value=c.call(o,n.resolveContext?n.resolveContext(this):this),d(this,e,t),this[e])},i},e.exports=function(e){var t=o(arguments[1]);return null!=t.resolveContext&&s(t.resolveContext),a(e,function(e,n){return i(n,e,t)})}},2258:function(e,t,n){"use strict";var i=n(2266),r=n(1141),o=n(234),s=Array.prototype.indexOf,a=Object.prototype.hasOwnProperty,l=Math.abs,u=Math.floor;e.exports=function(e){var t,n,c,d;if(!i(e))return s.apply(this,arguments);for(n=r(o(this).length),c=arguments[1],c=isNaN(c)?0:c>=0?u(c):r(this.length)-u(l(c)),t=c;n>t;++t)if(a.call(this,t)&&(d=this[t],i(d)))return t;return-1}},2259:function(e,t,n){"use strict";e.exports=n(2260)()?Array.from:n(2261)},2260:function(e,t){"use strict";e.exports=function(){var e,t,n=Array.from;return"function"!=typeof n?!1:(e=["raz","dwa"],t=n(e),Boolean(t&&t!==e&&"dwa"===t[1]))}},2261:function(e,t,n){"use strict";var i=n(337).iterator,r=n(507),o=n(2262),s=n(1141),a=n(233),l=n(234),u=n(424),c=n(509),d=Array.isArray,h=Function.prototype.call,p={configurable:!0,enumerable:!0,writable:!0,value:null},f=Object.defineProperty;e.exports=function(e){var t,n,g,m,_,v,y,b,w,x,k=arguments[1],S=arguments[2];if(e=Object(l(e)),u(k)&&a(k),this&&this!==Array&&o(this))t=this;else{if(!k){if(r(e))return _=e.length,1!==_?Array.apply(null,e):(m=new Array(1),m[0]=e[0],m);if(d(e)){for(m=new Array(_=e.length),n=0;_>n;++n)m[n]=e[n];return m}}m=[]}if(!d(e))if(void 0!==(w=e[i])){for(y=a(w).call(e),t&&(m=new t),b=y.next(),n=0;!b.done;)x=k?h.call(k,S,b.value,n):b.value,t?(p.value=x,f(m,n,p)):m[n]=x,b=y.next(),++n;_=n}else if(c(e)){for(_=e.length,t&&(m=new t),n=0,g=0;_>n;++n)x=e[n],_>n+1&&(v=x.charCodeAt(0),v>=55296&&56319>=v&&(x+=e[++n])),x=k?h.call(k,S,x,g):x,t?(p.value=x,f(m,g,p)):m[g]=x,++g;_=g}if(void 0===_)for(_=s(e.length),t&&(m=new t(_)),n=0;_>n;++n)x=k?h.call(k,S,e[n],n):e[n],t?(p.value=x,f(m,n,p)):m[n]=x;return t&&(p.value=null,m.length=_),m}},2262:function(e,t,n){"use strict";var i=Object.prototype.toString,r=i.call(n(1140));e.exports=function(e){return"function"==typeof e&&i.call(e)===r}},2263:function(e,t,n){"use strict";e.exports=n(2264)()?Math.sign:n(2265)},2264:function(e,t){"use strict";e.exports=function(){var e=Math.sign;return"function"!=typeof e?!1:1===e(10)&&-1===e(-20)}},2265:function(e,t){"use strict";e.exports=function(e){return e=Number(e),isNaN(e)||0===e?e:e>0?1:-1}},2266:function(e,t,n){"use strict";e.exports=n(2267)()?Number.isNaN:n(2268)},2267:function(e,t){"use strict";e.exports=function(){var e=Number.isNaN;return"function"!=typeof e?!1:!e({})&&e(NaN)&&!e(34)}},2268:function(e,t){"use strict";e.exports=function(e){return e!==e}},2269:function(e,t,n){"use strict";var i=n(2263),r=Math.abs,o=Math.floor;e.exports=function(e){return isNaN(e)?0:(e=Number(e),0!==e&&isFinite(e)?i(e)*o(r(e)):e)}},2270:function(e,t,n){"use strict";var i=n(233),r=n(234),o=Function.prototype.bind,s=Function.prototype.call,a=Object.keys,l=Object.prototype.propertyIsEnumerable;e.exports=function(e,t){return function(n,u){var c,d=arguments[2],h=arguments[3];return n=Object(r(n)),i(u),c=a(n),h&&c.sort("function"==typeof h?o.call(h,n):void 0),"function"!=typeof e&&(e=c[e]),s.call(e,c,function(e,i){return l.call(n,e)?s.call(u,d,n[e],e,n,i):t})}}},2271:function(e,t){"use strict";e.exports=function(){var e,t=Object.assign;return"function"!=typeof t?!1:(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},2272:function(e,t,n){"use strict";var i=n(2278),r=n(234),o=Math.max;e.exports=function(e,t){var n,s,a,l=o(arguments.length,2);for(e=Object(r(e)),a=function(i){try{e[i]=t[i]}catch(r){n||(n=r)}},s=1;l>s;++s)t=arguments[s],i(t).forEach(a);if(void 0!==n)throw n;return e}},2273:function(e,t,n){"use strict";var i=n(2259),r=n(740),o=n(234);e.exports=function(e){var t=Object(o(e)),n=arguments[1],s=Object(arguments[2]);if(t!==e&&!n)return t;var a={};return n?i(n,function(t){(s.ensure||t in e)&&(a[t]=e[t])}):r(a,e),a}},2274:function(e,t,n){"use strict";var i,r=Object.create;n(1143)()||(i=n(1144)),e.exports=function(){var e,t,n;return i?1!==i.level?r:(e={},t={},n={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(e){return"__proto__"===e?void(t[e]={configurable:!0,enumerable:!1,writable:!0,value:void 0}):void(t[e]=n)}),Object.defineProperties(e,t),Object.defineProperty(i,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:e}),function(t,n){return r(null===t?e:t,n)}):r}()},2275:function(e,t,n){"use strict";e.exports=n(2270)("forEach")},2276:function(e,t){"use strict";e.exports=function(e){return"function"==typeof e}},2277:function(e,t,n){"use strict";var i=n(424),r={"function":!0,object:!0};e.exports=function(e){return i(e)&&r[typeof e]||!1}},2278:function(e,t,n){"use strict";e.exports=n(2279)()?Object.keys:n(2280)},2279:function(e,t){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},2280:function(e,t,n){"use strict";var i=n(424),r=Object.keys;e.exports=function(e){return r(i(e)?Object(e):e)}},2281:function(e,t,n){"use strict";var i=n(233),r=n(2275),o=Function.prototype.call;e.exports=function(e,t){var n={},s=arguments[2];return i(t),r(e,function(e,i,r,a){n[i]=o.call(t,s,e,i,r,a)}),n}},2282:function(e,t){"use strict";var n="razdwatrzy";e.exports=function(){return"function"!=typeof n.contains?!1:n.contains("dwa")===!0&&n.contains("foo")===!1}},2283:function(e,t){"use strict";var n=String.prototype.indexOf;e.exports=function(e){return n.call(this,e,arguments[1])>-1}},2284:function(e,t,n){"use strict";var i,r=n(508),o=n(741),s=n(295),a=n(742),l=Object.defineProperty;i=e.exports=function(e,t){return this instanceof i?(a.call(this,e),t=t?o.call(t,"key+value")?"key+value":o.call(t,"key")?"key":"value":"value",void l(this,"__kind__",s("",t))):new i(e,t)},r&&r(i,a),i.prototype=Object.create(a.prototype,{constructor:s(i),_resolve:s(function(e){return"value"===this.__kind__?this.__list__[e]:"key+value"===this.__kind__?[e,this.__list__[e]]:e}),toString:s(function(){return"[object Array Iterator]"})})},2285:function(e,t,n){"use strict";var i=n(507),r=n(233),o=n(509),s=n(2286),a=Array.isArray,l=Function.prototype.call,u=Array.prototype.some;e.exports=function(e,t){var n,c,d,h,p,f,g,m,_=arguments[2];if(a(e)||i(e)?n="array":o(e)?n="string":e=s(e),r(t),d=function(){h=!0},"array"===n)return void u.call(e,function(e){return l.call(t,_,e,d),h?!0:void 0});if("string"!==n)for(c=e.next();!c.done;){if(l.call(t,_,c.value,d),h)return;c=e.next()}else for(f=e.length,p=0;f>p&&(g=e[p],f>p+1&&(m=g.charCodeAt(0),m>=55296&&56319>=m&&(g+=e[++p])),l.call(t,_,g,d),!h);++p);}},2286:function(e,t,n){"use strict";var i=n(507),r=n(509),o=n(2284),s=n(2288),a=n(1145),l=n(337).iterator;e.exports=function(e){return"function"==typeof a(e)[l]?e[l]():i(e)?new o(e):r(e)?new s(e):new o(e)}},2287:function(e,t,n){"use strict";var i=n(507),r=n(509),o=n(337).iterator,s=Array.isArray;e.exports=function(e){return null==e?!1:s(e)?!0:r(e)?!0:i(e)?!0:"function"==typeof e[o]}},2288:function(e,t,n){"use strict";var i,r=n(508),o=n(295),s=n(742),a=Object.defineProperty;i=e.exports=function(e){return this instanceof i?(e=String(e),s.call(this,e),void a(this,"__length__",o("",e.length))):new i(e)},r&&r(i,s),i.prototype=Object.create(s.prototype,{constructor:o(i),_next:o(function(){return this.__list__?this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind():void 0}),_resolve:o(function(e){var t,n=this.__list__[e];return this.__nextIndex__===this.__length__?n:(t=n.charCodeAt(0),t>=55296&&56319>=t?n+this.__list__[this.__nextIndex__++]:n)}),toString:o(function(){return"[object String Iterator]"})})},2289:function(e,t){"use strict";e.exports=function(){var e,t,n;return"function"!=typeof Set?!1:(e=new Set(["raz","dwa","trzy"]),"[object Set]"!==String(e)?!1:3!==e.size?!1:"function"!=typeof e.add?!1:"function"!=typeof e.clear?!1:"function"!=typeof e["delete"]?!1:"function"!=typeof e.entries?!1:"function"!=typeof e.forEach?!1:"function"!=typeof e.has?!1:"function"!=typeof e.keys?!1:"function"!=typeof e.values?!1:(t=e.values(),n=t.next(),n.done!==!1?!1:"raz"!==n.value?!1:!0))}},2290:function(e,t){"use strict";e.exports=function(){return"undefined"==typeof Set?!1:"[object Set]"===Object.prototype.toString.call(Set.prototype)}()},2292:function(e,t,n){"use strict";var i,r,o,s=n(1139),a=n(2258),l=n(508),u=n(233),c=n(295),d=n(2297),h=n(337),p=n(1145),f=n(2285),g=n(2291),m=n(2290),_=Function.prototype.call,v=Object.defineProperty,y=Object.getPrototypeOf;m&&(o=Set),e.exports=i=function(){var e,t=arguments[0];if(!(this instanceof i))throw new TypeError("Constructor requires 'new'");return e=m&&l?l(new o,y(this)):this,null!=t&&p(t),v(e,"__setData__",c("c",[])),t?(f(t,function(e){-1===a.call(this,e)&&this.push(e)},e.__setData__),e):e},m&&(l&&l(i,o),i.prototype=Object.create(o.prototype,{constructor:c(i)})),d(Object.defineProperties(i.prototype,{add:c(function(e){return this.has(e)?this:(this.emit("_add",this.__setData__.push(e)-1,e),this)}),clear:c(function(){this.__setData__.length&&(s.call(this.__setData__),this.emit("_clear"))}),"delete":c(function(e){var t=a.call(this.__setData__,e);return-1===t?!1:(this.__setData__.splice(t,1),this.emit("_delete",t,e),!0)}),entries:c(function(){return new g(this,"key+value")}),forEach:c(function(e){var t,n,i,r=arguments[1];for(u(e),t=this.values(),n=t._next();void 0!==n;)i=t._resolve(n),_.call(e,r,i,i,this),n=t._next()}),has:c(function(e){return-1!==a.call(this.__setData__,e)}),keys:c(r=function(){return this.values()}),size:c.gs(function(){return this.__setData__.length}),values:c(function(){return new g(this)}),toString:c(function(){return"[object Set]"})})),v(i.prototype,h.iterator,c(r)),v(i.prototype,h.toStringTag,c("c","Set"))},2293:function(e,t){"use strict";var n={object:!0,symbol:!0};e.exports=function(){var e;if("function"!=typeof Symbol)return!1;e=Symbol("test symbol");try{String(e)}catch(t){return!1}return n[typeof Symbol.iterator]&&n[typeof Symbol.toPrimitive]&&n[typeof Symbol.toStringTag]?!0:!1}},2294:function(e,t){"use strict";e.exports=function(e){return e?"symbol"==typeof e?!0:e.constructor?"Symbol"!==e.constructor.name?!1:"Symbol"===e[e.constructor.toStringTag]:!1:!1}},2295:function(e,t,n){"use strict";var i,r,o,s,a=n(295),l=n(2296),u=Object.create,c=Object.defineProperties,d=Object.defineProperty,h=Object.prototype,p=u(null);if("function"==typeof Symbol){i=Symbol;try{String(i()),s=!0}catch(f){}}var g=function(){var e=u(null);return function(t){for(var n,i,r=0;e[t+(r||"")];)++r;return t+=r||"",e[t]=!0,n="@@"+t,d(h,n,a.gs(null,function(e){i||(i=!0,d(this,n,a(e)),i=!1)})),n}}();o=function(e){if(this instanceof o)throw new TypeError("Symbol is not a constructor");return r(e)},e.exports=r=function m(e){var t;if(this instanceof m)throw new TypeError("Symbol is not a constructor");return s?i(e):(t=u(o.prototype),e=void 0===e?"":String(e),c(t,{__description__:a("",e),__name__:a("",g(e))}))},c(r,{"for":a(function(e){return p[e]?p[e]:p[e]=r(String(e))}),keyFor:a(function(e){var t;l(e);for(t in p)if(p[t]===e)return t}),hasInstance:a("",i&&i.hasInstance||r("hasInstance")),isConcatSpreadable:a("",i&&i.isConcatSpreadable||r("isConcatSpreadable")),iterator:a("",i&&i.iterator||r("iterator")),match:a("",i&&i.match||r("match")),replace:a("",i&&i.replace||r("replace")),search:a("",i&&i.search||r("search")),species:a("",i&&i.species||r("species")),split:a("",i&&i.split||r("split")),toPrimitive:a("",i&&i.toPrimitive||r("toPrimitive")),toStringTag:a("",i&&i.toStringTag||r("toStringTag")),unscopables:a("",i&&i.unscopables||r("unscopables"))}),c(o.prototype,{constructor:a(r),toString:a("",function(){return this.__name__})}),c(r.prototype,{toString:a(function(){return"Symbol ("+l(this).__description__+")"}),valueOf:a(function(){return l(this)})}),d(r.prototype,r.toPrimitive,a("",function(){var e=l(this);return"symbol"==typeof e?e:e.toString()})),d(r.prototype,r.toStringTag,a("c","Symbol")),d(o.prototype,r.toStringTag,a("c",r.prototype[r.toStringTag])),d(o.prototype,r.toPrimitive,a("c",r.prototype[r.toPrimitive]))},2296:function(e,t,n){"use strict";var i=n(2294);e.exports=function(e){if(!i(e))throw new TypeError(e+" is not a symbol");return e}},2297:function(e,t,n){"use strict";var i,r,o,s,a,l,u,c=n(295),d=n(233),h=Function.prototype.apply,p=Function.prototype.call,f=Object.create,g=Object.defineProperty,m=Object.defineProperties,_=Object.prototype.hasOwnProperty,v={configurable:!0,enumerable:!1,writable:!0};i=function(e,t){var n;return d(t),_.call(this,"__ee__")?n=this.__ee__:(n=v.value=f(null),g(this,"__ee__",v),v.value=null),n[e]?"object"==typeof n[e]?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},r=function(e,t){var n,r;return d(t),r=this,i.call(this,e,n=function(){o.call(r,e,n),h.call(t,this,arguments)}),n.__eeOnceListener__=t,this},o=function(e,t){var n,i,r,o;if(d(t),!_.call(this,"__ee__"))return this;if(n=this.__ee__,!n[e])return this;if(i=n[e],"object"==typeof i)for(o=0;r=i[o];++o)(r===t||r.__eeOnceListener__===t)&&(2===i.length?n[e]=i[o?0:1]:i.splice(o,1));else(i===t||i.__eeOnceListener__===t)&&delete n[e];return this},s=function(e){var t,n,i,r,o;if(_.call(this,"__ee__")&&(r=this.__ee__[e]))if("object"==typeof r){for(n=arguments.length,o=new Array(n-1),t=1;n>t;++t)o[t-1]=arguments[t];for(r=r.slice(),t=0;i=r[t];++t)h.call(i,this,o)}else switch(arguments.length){case 1:p.call(r,this);break;case 2:p.call(r,this,arguments[1]);break;case 3:p.call(r,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),t=1;n>t;++t)o[t-1]=arguments[t];h.call(r,this,o)}},a={on:i,once:r,off:o,emit:s},l={on:c(i),once:c(r),off:c(o),emit:c(s)},u=m({},l),e.exports=t=function(e){return null==e?f(u):m(Object(e),l)},t.methods=a},2298:function(e,t){/** @license
	 * eventsource.js
	 * Available under MIT License (MIT)
	 * https://github.com/Yaffle/EventSource/
	 */
!function(e){"use strict";function t(){this.data={}}function n(){this.listeners=new t}function i(e){c(function(){throw e},0)}function r(e){this.type=e,this.target=void 0}function o(e,t){r.call(this,e),this.data=t.data,this.lastEventId=t.lastEventId}function s(e,t){var n=e;return n!==n&&(n=t),T>n?T:n>A?A:n}function a(e,t,n){try{"function"==typeof t&&t.call(e,n)}catch(r){i(r)}}function l(t,i){function l(){H=y,void 0!=F&&(F.abort(),F=void 0),0!==B&&(d(B),B=0),0!==U&&(d(U),U=0),I.readyState=y}function u(e){var n="";if(H===v||H===_)try{n=F.responseText}catch(i){}var u=void 0,h=!1;if(H===_){var p=0,f="",g=void 0;if("contentType"in F)""!==e&&"error"!==e&&(p=200,f="OK",g=F.contentType);else try{p=F.status,f=F.statusText,g=F.getResponseHeader("Content-Type")}catch(i){p=0,f="",g=void 0}if(void 0==g&&(g=""),0===p&&""===f&&"load"===e&&""!==n&&(p=200,f="OK",""===g)){var T=/^data\:([^,]*?)(?:;base64)?,[\S]*$/.exec(t);void 0!=T&&(g=T[1])}if(200===p&&E.test(g)){if(H=v,L=!0,O=D,I.readyState=v,u=new r("open"),I.dispatchEvent(u),a(I,I.onopen,u),H===y)return}else if(0!==p&&(200!==p||""!==g)){var P="";P=200!==p?"EventSource's response has a status "+p+" "+f.replace(/\s+/g," ")+" that is not 200. Aborting the connection.":"EventSource's response has a Content-Type specifying an unsupported type: "+g.replace(/\s+/g," ")+". Aborting the connection.",c(function(){throw new Error(P)},0),h=!0}}if(H===v){n.length>j&&(L=!0);for(var C=j-1,N=n.length,U="\n";++C<N;)if(U=n.charAt(C),V===b&&"\n"===U)V=w;else if(V===b&&(V=w),"\r"===U||"\n"===U){if("data"===Y?$.push(G):"id"===Y?z=G:"event"===Y?q=G:"retry"===Y?(D=s(Number(G),D),O=D):"heartbeatTimeout"===Y&&(M=s(Number(G),M),0!==B&&(d(B),B=c(W,M))),G="",Y="",V===w){if(0!==$.length&&(R=z,""===q&&(q="message"),u=new o(q,{data:$.join("\n"),lastEventId:z}),I.dispatchEvent(u),"message"===q&&a(I,I.onmessage,u),H===y))return;$.length=0,q=""}V="\r"===U?b:w}else V===w&&(V=x),V===x?":"===U?V=k:Y+=U:V===k?(" "!==U&&(G+=U),V=S):V===S&&(G+=U);j=N}H!==v&&H!==_||!("load"===e||"error"===e||h||j>1048576||0===B&&!L)?0===B&&(L=!1,B=c(W,M)):(h?l():(""!==e||0!==B||L||c(function(){throw new Error("No activity within "+M+" milliseconds. Reconnecting.")},0),H=m,F.abort(),0!==B&&(d(B),B=0),O>16*D&&(O=16*D),O>A&&(O=A),B=c(W,O),O=2*O+1,I.readyState=_),u=new r("error"),I.dispatchEvent(u),a(I,I.onerror,u))}function h(){u("progress")}function p(){u("load")}function T(){u("error")}function P(){u(4===F.readyState?0===F.status?"error":"load":"progress")}t=t.toString();var C=f&&void 0!=i&&Boolean(i.withCredentials),D=s(1e3,0),M=s(45e3,0),R="",I=this,O=D,L=!1,N=void 0!=i&&void 0!=i.Transport?i.Transport:g,F=new N,B=0,U=0,j=0,H=m,$=[],z="",q="",W=void 0,V=w,Y="",G="";"readyState"in F&&void 0!=e.opera&&(U=c(function K(){3===F.readyState&&u("progress"),U=c(K,500)},0)),W=function(){if(B=0,H!==m)return void u("");if((!("ontimeout"in F)||"sendAsBinary"in F||"mozAnon"in F)&&void 0!=e.document&&void 0!=e.document.readyState&&"complete"!==e.document.readyState)return void(B=c(W,4));F.onload=p,F.onerror=T,"onabort"in F&&(F.onabort=T),"onprogress"in F&&(F.onprogress=h),"onreadystatechange"in F&&(F.onreadystatechange=P),L=!1,B=c(W,M),j=0,H=_,$.length=0,q="",z=R,G="",Y="",V=w;var n=t.slice(0,5);n="data:"!==n&&"blob:"!==n?t+((-1===t.indexOf("?",0)?"?":"&")+"lastEventId="+encodeURIComponent(R)+"&r="+(Math.random()+1).toString().slice(2)):t,F.open("GET",n,!0),"withCredentials"in F&&(F.withCredentials=C),"responseType"in F&&(F.responseType="text"),"setRequestHeader"in F&&F.setRequestHeader("Accept","text/event-stream"),F.send(void 0)},n.call(this),this.close=l,this.url=t,this.readyState=_,this.withCredentials=C,this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,W()}function u(){this.CONNECTING=_,this.OPEN=v,this.CLOSED=y}var c=e.setTimeout,d=e.clearTimeout;t.prototype.get=function(e){return this.data[e+"~"]},t.prototype.set=function(e,t){this.data[e+"~"]=t},t.prototype["delete"]=function(e){delete this.data[e+"~"]},n.prototype.dispatchEvent=function(e){e.target=this;var t=e.type.toString(),n=this.listeners,r=n.get(t);if(void 0!=r)for(var o=r.length,s=-1,a=void 0;++s<o;){a=r[s];try{a.call(this,e)}catch(l){i(l)}}},n.prototype.addEventListener=function(e,t){e=e.toString();var n=this.listeners,i=n.get(e);void 0==i&&(i=[],n.set(e,i));for(var r=i.length;--r>=0;)if(i[r]===t)return;i.push(t)},n.prototype.removeEventListener=function(e,t){e=e.toString();var n=this.listeners,i=n.get(e);if(void 0!=i){for(var r=i.length,o=[],s=-1;++s<r;)i[s]!==t&&o.push(i[s]);0===o.length?n["delete"](e):n.set(e,o)}},o.prototype=r.prototype;var h=e.XMLHttpRequest,p=e.XDomainRequest,f=void 0!=h&&void 0!=(new h).withCredentials,g=f||void 0!=h&&void 0==p?h:p,m=-1,_=0,v=1,y=2,b=3,w=4,x=5,k=6,S=7,E=/^text\/event\-stream;?(\s*charset\=utf\-8)?$/i,T=1e3,A=18e6;u.prototype=n.prototype,l.prototype=new u,u.call(l),f&&(l.prototype.withCredentials=void 0);var P=function(){return void 0!=e.EventSource&&"withCredentials"in e.EventSource.prototype};void 0!=g&&(void 0==e.EventSource||f&&!P())&&(e.NativeEventSource=e.EventSource,e.EventSource=l)}("undefined"!=typeof window?window:this)},2299:function(e,t,n){e.exports=n.p+"assets/images/apply-all-column-58784f5.png"},2300:function(e,t,n){e.exports=n.p+"assets/images/apply-all-column@2x-c075c1a.png"},2304:function(e,t,n){e.exports=n.p+"assets/images/buttons/hero/buffering-d977ce5.gif"},2305:function(e,t,n){e.exports=n.p+"assets/images/buttons/hero/buffering@2x-44e6355.gif"},2306:function(e,t,n){e.exports=n.p+"assets/images/buttons/hero/pause-1f3f227.svg"},2307:function(e,t,n){e.exports=n.p+"assets/images/buttons/hero/play-69601b9.svg"},2309:function(e,t,n){e.exports=n.p+"assets/images/check@2x-0f7dc93.png"},2310:function(e,t,n){e.exports=n.p+"assets/images/close-announcement-ed61508.png"},2311:function(e,t,n){e.exports=n.p+"assets/images/close-announcement@2x-65dcea9.png"},2312:function(e,t,n){e.exports=n.p+"assets/images/close-modal-light-1161ba2.svg"},2329:function(e,t,n){e.exports=n.p+"assets/images/consumer-sub/tooltip_active-9c15ad7.svg"},2330:function(e,t,n){e.exports=n.p+"assets/images/consumer-sub/tooltip_inactive-17c43e3.svg"},2333:function(e,t,n){e.exports=n.p+"assets/images/drag-handle-a403f9f.png"},2335:function(e,t,n){e.exports=n.p+"assets/images/empty-states/comments-1267be6.png"},2336:function(e,t,n){e.exports=n.p+"assets/images/empty-states/comments@2x-30296ad.png"},2337:function(e,t,n){e.exports=n.p+"assets/images/empty-states/following-f6990be.png"},2338:function(e,t,n){e.exports=n.p+"assets/images/empty-states/following@2x-65b4cc6.png"},2339:function(e,t,n){e.exports=n.p+"assets/images/empty-states/history-ccb5327.png"},2340:function(e,t,n){e.exports=n.p+"assets/images/empty-states/history@2x-6eaa4ed.png"},2341:function(e,t,n){e.exports=n.p+"assets/images/empty-states/likes-3bcb162.png"},2342:function(e,t,n){e.exports=n.p+"assets/images/empty-states/likes@2x-0ea46c8.png"},2343:function(e,t,n){e.exports=n.p+"assets/images/empty-states/playlists@2x-81659ed.png"},2344:function(e,t,n){e.exports=n.p+"assets/images/empty-states/reposts-3574306.png"},2345:function(e,t,n){e.exports=n.p+"assets/images/empty-states/reposts@2x-34af13e.png"},2346:function(e,t,n){e.exports=n.p+"assets/images/empty-states/stations-96e82b9.svg"},2351:function(e,t,n){e.exports=n.p+"assets/images/header/activities-66caaa5.svg"},2352:function(e,t,n){e.exports=n.p+"assets/images/header/dropdown-cf3420a.svg"},2353:function(e,t,n){e.exports=n.p+"assets/images/header/header-icons-1afa052.png"},2354:function(e,t,n){e.exports=n.p+"assets/images/header/messages-f517d0e.svg"},2355:function(e,t,n){e.exports=n.p+"assets/images/header/more-0e9e752.svg"},2356:function(e,t,n){e.exports=n.p+"assets/images/header/profile/followers-e0004f7.svg"},2357:function(e,t,n){e.exports=n.p+"assets/images/header/profile/followings-f4ce003.svg"},2358:function(e,t,n){e.exports=n.p+"assets/images/header/profile/like-30802b4.svg"},2359:function(e,t,n){e.exports=n.p+"assets/images/header/profile/playlist-71fefc0.svg"},2360:function(e,t,n){e.exports=n.p+"assets/images/header/profile/premium-27cf1e0.svg"},2361:function(e,t,n){e.exports=n.p+"assets/images/header/profile/stations_light-0c5b748.png"},2362:function(e,t,n){e.exports=n.p+"assets/images/header/profile/stations_light@2x-474487c.png"},2363:function(e,t,n){e.exports=n.p+"assets/images/header/profile/stats-8214c05.svg"},2364:function(e,t,n){e.exports=n.p+"assets/images/header/profile/track_manager_light-e8f84d9.png"},2365:function(e,t,n){e.exports=n.p+"assets/images/header/profile/track_manager_light@2x-49a9db5.png"},2366:function(e,t,n){e.exports=n.p+"assets/images/header/profile/user-853e629.svg"},2369:function(e,t,n){e.exports=n.p+"assets/images/loader-dark-45940ae.gif"},2371:function(e,t,n){e.exports=n.p+"assets/images/messages/recipientRemove-929f8f7.png"},2399:function(e,t,n){e.exports=n.p+"assets/images/outgoing_link-d031a03.svg"},2400:function(e,t,n){e.exports=n.p+"assets/images/play-queue/bg-tile-ebc9fe1.png"},2401:function(e,t,n){e.exports=n.p+"assets/images/play-queue/close-dcc8a56.svg"},2402:function(e,t,n){e.exports=n.p+"assets/images/play-queue/drag-handle-8249e38.svg"},2403:function(e,t,n){e.exports=n.p+"assets/images/play-queue/google-cast-icon-d8eece1.svg"},2404:function(e,t,n){e.exports=n.p+"assets/images/play-queue/more-f2f2da9.svg"},2405:function(e,t,n){e.exports=n.p+"assets/images/play-queue/remove-80b921c.svg"},2406:function(e,t,n){e.exports=n.p+"assets/images/playback/pause-b36fad6.svg"},2407:function(e,t,n){e.exports=n.p+"assets/images/playback/play-91b117d.svg"},2408:function(e,t,n){e.exports=n.p+"assets/images/playback/prev-05b62ec.svg"},2409:function(e,t,n){e.exports=n.p+"assets/images/playback/repeat-all-943c155.svg"},2410:function(e,t,n){e.exports=n.p+"assets/images/playback/repeat-one-51bb7cb.svg"},2411:function(e,t,n){e.exports=n.p+"assets/images/playback/repeat-7ef67cb.svg"},2412:function(e,t,n){e.exports=n.p+"assets/images/playback/shuffle-active-ded3a16.svg"},2413:function(e,t,n){e.exports=n.p+"assets/images/playback/shuffle-94280dc.svg"},2414:function(e,t,n){e.exports=n.p+"assets/images/playback/skip-9b481fb.svg"},2417:function(e,t,n){e.exports=n.p+"assets/images/playlist-cover-bg_small-1e40200.png"},2418:function(e,t,n){e.exports=n.p+"assets/images/playlist-cover-bg_small@2x-c437aa7.png"},2424:function(e,t,n){e.exports=n.p+"assets/images/premium/error-305b36d.png"},2439:function(e,t,n){e.exports=n.p+"assets/images/stations/station-overlay-small-a969a05.svg"},2440:function(e,t,n){e.exports=n.p+"assets/images/stations/station-overlay-3eaed41.svg"},2442:function(e,t,n){e.exports=n.p+"assets/images/stopper-9d4f27a.png"},2443:function(e,t,n){e.exports=n.p+"assets/images/throbber-repeat-6059102.png"},2446:function(e,t,n){e.exports=n.p+"assets/images/upload/big-checkbox-583f9f7.png"},2447:function(e,t,n){e.exports=n.p+"assets/images/upload/big-checkbox@2x-a39eff5.png"},2475:function(e,t,n){e.exports=n.p+"assets/images/who-to-follow/refresh-8000d51.png"},2476:function(e,t,n){e.exports=n.p+"assets/images/widgets/colors-0c8fa81.png"},2482:function(e,t,n){e.exports=n.p+"assets/images/widgets/tabs/classic-3212ff0.png"},2483:function(e,t,n){e.exports=n.p+"assets/images/widgets/tabs/mini-450a780.png"},2484:function(e,t,n){e.exports=n.p+"assets/images/widgets/tabs/visual-b7ef66f.png"},2499:function(e,t,n){e.exports=n.p+"assets/swf/flashAudio-ccac65e.swf"},2500:function(e,t,n){e.exports=n.p+"assets/swf/flashAudio_debug-64e67d8.swf"},2501:function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-two-column-sound-hero">\n  <div class="l-main sc-border-light-right">\n    <div class="l-listen-sound sc-clearfix"></div>\n    <div class="l-listen-engagement"></div>\n    <div class="l-listen-content"></div>\n  </div>\n  <div class="l-sidebar-right">\n\n  </div>\n</div>\n'},useData:!0})},2863:function(e,t){t.read=function(e,t,n,i,r){var o,s,a=8*r-i-1,l=(1<<a)-1,u=l>>1,c=-7,d=n?r-1:0,h=n?-1:1,p=e[t+d];for(d+=h,o=p&(1<<-c)-1,p>>=-c,c+=a;c>0;o=256*o+e[t+d],d+=h,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=i;c>0;s=256*s+e[t+d],d+=h,c-=8);if(0===o)o=1-u;else{if(o===l)return s?NaN:(p?-1:1)*(1/0);s+=Math.pow(2,i),o-=u}return(p?-1:1)*s*Math.pow(2,o-i)},t.write=function(e,t,n,i,r,o){var s,a,l,u=8*o-r-1,c=(1<<u)-1,d=c>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,f=i?1:-1,g=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),t+=s+d>=1?h/l:h*Math.pow(2,1-d),t*l>=2&&(s++,l/=2),s+d>=c?(a=0,s=c):s+d>=1?(a=(t*l-1)*Math.pow(2,r),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,r),s=0));r>=8;e[n+p]=255&a,p+=f,a/=256,r-=8);for(s=s<<r|a,u+=r;u>0;e[n+p]=255&s,p+=f,s/=256,u-=8);e[n+p-f]|=128*g}},2864:function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},2866:function(e,t){"use strict";function n(e){return e in s?s[e]:null}function i(e,t){return s[e]=t,!0}function r(e){var t=e in s;return t?delete s[e]:!1}function o(){return s={},!0}var s={};e.exports={getItem:n,setItem:i,removeItem:r,clear:o}},2867:function(e,t){(function(t){"use strict";function n(){t.addEventListener?t.addEventListener("storage",i,!1):t.attachEvent?t.attachEvent("onstorage",i):t.onstorage=i}function i(e){function n(t){t(JSON.parse(e.newValue),JSON.parse(e.oldValue),e.url||e.uri)}e||(e=t.event);var i=s[e.key];i&&i.forEach(n)}function r(e,t){s[e]?s[e].push(t):s[e]=[t],a===!1&&n()}function o(e,t){var n=s[e];n.length>1?n.splice(n.indexOf(t),1):s[e]=[]}var s={},a=!1;e.exports={on:r,off:o}}).call(t,function(){return this}())},2868:function(e,t,n){function i(e,t){return null==t?e:r(t,o(t),e)}var r=n(2869),o=n(1184);e.exports=i},2869:function(e,t){function n(e,t,n){n||(n={});for(var i=-1,r=t.length;++i<r;){var o=t[i];n[o]=e[o]}return n}e.exports=n},2870:function(e,t){function n(e,t,n){if("function"!=typeof e)return i;if(void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,o){return e.call(t,n,i,r,o)};case 5:return function(n,i,r,o,s){return e.call(t,n,i,r,o,s)}}return function(){return e.apply(t,arguments)}}function i(e){return e}e.exports=n},2871:function(e,t,n){function i(e){return s(function(t,n){var i=-1,s=null==t?0:n.length,a=s>2?n[s-2]:void 0,l=s>2?n[2]:void 0,u=s>1?n[s-1]:void 0;for("function"==typeof a?(a=r(a,u,5),s-=2):(a="function"==typeof u?u:void 0,s-=a?1:0),l&&o(n[0],n[1],l)&&(a=3>s?void 0:a,s=1);++i<s;){var c=n[i];c&&e(t,c,a)}return t})}var r=n(2870),o=n(2873),s=n(2876);e.exports=i},2872:function(e,t){function n(e){return!!e&&"object"==typeof e}function i(e,t){var n=null==e?void 0:e[t];return s(n)?n:void 0}function r(e){return o(e)&&h.call(e)==a}function o(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function s(e){return null==e?!1:r(e)?p.test(c.call(e)):n(e)&&l.test(e)}var a="[object Function]",l=/^\[object .+?Constructor\]$/,u=Object.prototype,c=Function.prototype.toString,d=u.hasOwnProperty,h=u.toString,p=RegExp("^"+c.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=i},2873:function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}function i(e){return null!=e&&s(c(e))}function r(e,t){return e="number"==typeof e||l.test(e)?+e:-1,t=null==t?u:t,e>-1&&e%1==0&&t>e}function o(e,t,n){if(!a(n))return!1;var o=typeof t;if("number"==o?i(n)&&r(t,n.length):"string"==o&&t in n){var s=n[t];return e===e?e===s:s!==s}return!1}function s(e){return"number"==typeof e&&e>-1&&e%1==0&&u>=e}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var l=/^\d+$/,u=9007199254740991,c=n("length");e.exports=o},2874:function(e,t){function n(e){return r(e)&&f.call(e,"callee")&&(!m.call(e,"callee")||g.call(e)==c)}function i(e){return null!=e&&s(e.length)&&!o(e)}function r(e){return l(e)&&i(e)}function o(e){var t=a(e)?g.call(e):"";return t==d||t==h}function s(e){return"number"==typeof e&&e>-1&&e%1==0&&u>=e}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function l(e){return!!e&&"object"==typeof e}var u=9007199254740991,c="[object Arguments]",d="[object Function]",h="[object GeneratorFunction]",p=Object.prototype,f=p.hasOwnProperty,g=p.toString,m=p.propertyIsEnumerable;e.exports=n},2875:function(e,t){function n(e){return!!e&&"object"==typeof e}function i(e,t){var n=null==e?void 0:e[t];return a(n)?n:void 0}function r(e){return"number"==typeof e&&e>-1&&e%1==0&&_>=e}function o(e){return s(e)&&f.call(e)==u}function s(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function a(e){return null==e?!1:o(e)?g.test(h.call(e)):n(e)&&c.test(e)}var l="[object Array]",u="[object Function]",c=/^\[object .+?Constructor\]$/,d=Object.prototype,h=Function.prototype.toString,p=d.hasOwnProperty,f=d.toString,g=RegExp("^"+h.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),m=i(Array,"isArray"),_=9007199254740991,v=m||function(e){return n(e)&&r(e.length)&&f.call(e)==l};e.exports=v},2876:function(e,t){function n(e,t){if("function"!=typeof e)throw new TypeError(i);return t=r(void 0===t?e.length-1:+t||0,0),function(){for(var n=arguments,i=-1,o=r(n.length-t,0),s=Array(o);++i<o;)s[i]=n[t+i];switch(t){case 0:return e.call(this,s);case 1:return e.call(this,n[0],s);case 2:return e.call(this,n[0],n[1],s)}var a=Array(t+1);for(i=-1;++i<t;)a[i]=n[i];return a[t]=s,e.apply(this,a)}}var i="Expected a function",r=Math.max;e.exports=n},2877:function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function o(e){if(d===clearTimeout)return clearTimeout(e);if((d===i||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function s(){g&&p&&(g=!1,p.length?f=p.concat(f):m=-1,f.length&&a())}function a(){if(!g){var e=r(s);g=!0;for(var t=f.length;t;){for(p=f,f=[];++m<t;)p&&p[m].run();m=-1,t=f.length}p=null,g=!1,o(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var c,d,h=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{d="function"==typeof clearTimeout?clearTimeout:i}catch(e){d=i}}();var p,f=[],g=!1,m=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new l(e,t)),1!==f.length||g||r(a)},l.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=u,h.addListener=u,h.once=u,h.off=u,h.removeListener=u,h.removeAllListeners=u,h.emit=u,h.prependListener=u,h.prependOnceListener=u,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},2878:function(e,t,n){/*!
	 * Remixin v1.0.1
	 * (c) SoundCloud 2015
	 * Remixin may be freely distributed under the MIT license.
	 */
!function(t){var i=t(n(47));e.exports=i}(function(e){function t(){this.mixins=e.initial(arguments),this.properties=e.last(arguments)}function n(e,t){this.applyTo=function(n){e.applyTo(n,t)}}function i(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2]);case 4:return e.call(t,n[0],n[1],n[2],n[3]);default:return e.apply(t,n)}}function r(e,t){return null==e?t.slice():o(u(e),t)}function o(t,n){return t.concat(e.difference(n,t))}function s(e,t){return null==e?t:r(l(e),l(t)).join(" ")}function a(t,n){return e.extend({},n,t)}function l(t){return e.compact(t.split(d))}function u(t){return e.isArray(t)?t:[t]}var c=["before","after","around","requires","override","defaults","applyTo","requirePrototype","merge"],d=/\s+/;return e.extend(t.prototype,{applyTo:function(t,n){var i=this.properties;this.defaults(t,i.defaults),this.extend(t,i),this.merge(t,i.merge),e.invoke(this.mixins,"applyTo",t),["requires","requirePrototype","override","before","after","around"].forEach(function(e){this[e](t,i[e])},this),i.applyTo&&i.applyTo.call(this,t,n)},withOptions:function(e){return new n(this,e)},before:function(t,n){e.each(n,function(e,n){var r=t[n];t[n]=function(){for(var t=Array(arguments.length),n=0;n<arguments.length;++n)t[n]=arguments[n];return i(e,this,t),i(r,this,t)}})},after:function(t,n){e.each(n,function(e,n){var r=t[n];t[n]=function(){for(var t=Array(arguments.length),n=0;n<arguments.length;++n)t[n]=arguments[n];var o=i(r,this,t);return i(e,this,t),o}})},around:function(t,n){e.each(n,function(e,n){var r=t[n];t[n]=function(){var t=0,n=arguments.length,o=Array(n+1);for(o[0]=r.bind(this);n>t;++t)o[t+1]=arguments[t];return i(e,this,o)}})},override:function(t,n){e.extend(t,n)},defaults:function(t,n){e.each(n,function(e,n){t.hasOwnProperty(n)||(t[n]=e)})},merge:function(t,n){e.each(n,function(n,i){if(null!=n){var o=t[i];t[i]=e.isArray(n)?r(o,n):e.isString(n)?s(o,n):a(o,n)}})},extend:function(t,n){var i=e.omit(n,c);e.extend(t,i)},requires:e.noop,requirePrototype:e.noop}),n.prototype=t.prototype,t})},2879:function(e,t,n){"use strict";t.__esModule=!0;var i=n(4);t["default"]=function(e){e.registerDecorator("inline",function(e,t,n,r){var o=e;return t.partials||(t.partials={},o=function(r,o){var s=n.partials;n.partials=i.extend({},s,t.partials);var a=e(r,o);return n.partials=s,a}),t.partials[r.args[0]]=r.fn,o})},e.exports=t["default"]},2880:function(e,t,n){"use strict";t.__esModule=!0;var i=n(4);t["default"]=function(e){e.registerHelper("blockHelperMissing",function(t,n){var r=n.inverse,o=n.fn;if(t===!0)return o(this);if(t===!1||null==t)return r(this);if(i.isArray(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):r(this);if(n.data&&n.ids){var s=i.createFrame(n.data);s.contextPath=i.appendContextPath(n.data.contextPath,n.name),n={data:s}}return o(t,n)})},e.exports=t["default"]},2881:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(4),o=n(5),s=i(o);t["default"]=function(e){e.registerHelper("each",function(e,t){function n(t,n,o){u&&(u.key=t,u.index=n,u.first=0===n,u.last=!!o,c&&(u.contextPath=c+t)),l+=i(e[t],{data:u,blockParams:r.blockParams([e[t],t],[c+t,null])})}if(!t)throw new s["default"]("Must pass iterator to #each");var i=t.fn,o=t.inverse,a=0,l="",u=void 0,c=void 0;if(t.data&&t.ids&&(c=r.appendContextPath(t.data.contextPath,t.ids[0])+"."),r.isFunction(e)&&(e=e.call(this)),t.data&&(u=r.createFrame(t.data)),e&&"object"==typeof e)if(r.isArray(e))for(var d=e.length;d>a;a++)a in e&&n(a,a,a===e.length-1);else{var h=void 0;for(var p in e)e.hasOwnProperty(p)&&(void 0!==h&&n(h,a-1),h=p,a++);void 0!==h&&n(h,a-1,!0)}return 0===a&&(l=o(this)),l})},e.exports=t["default"]},2882:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(5),o=i(r);t["default"]=function(e){e.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new o["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')})},e.exports=t["default"]},2883:function(e,t,n){"use strict";t.__esModule=!0;var i=n(4);t["default"]=function(e){e.registerHelper("if",function(e,t){return i.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||i.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})})},e.exports=t["default"]},2884:function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e){e.registerHelper("log",function(){for(var t=[void 0],n=arguments[arguments.length-1],i=0;i<arguments.length-1;i++)t.push(arguments[i]);var r=1;null!=n.hash.level?r=n.hash.level:n.data&&null!=n.data.level&&(r=n.data.level),t[0]=r,e.log.apply(e,t)})},e.exports=t["default"]},2885:function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e){e.registerHelper("lookup",function(e,t){return e&&e[t]})},e.exports=t["default"]},2886:function(e,t,n){"use strict";t.__esModule=!0;var i=n(4);t["default"]=function(e){e.registerHelper("with",function(e,t){i.isFunction(e)&&(e=e.call(this));var n=t.fn;if(i.isEmpty(e))return t.inverse(this);var r=t.data;return t.data&&t.ids&&(r=i.createFrame(t.data),r.contextPath=i.appendContextPath(t.data.contextPath,t.ids[0])),n(e,{data:r,blockParams:i.blockParams([e],[r&&r.contextPath])})})},e.exports=t["default"]},3240:function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}}});