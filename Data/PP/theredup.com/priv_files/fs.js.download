(function(){var v=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,h){a.__proto__=h}||function(a,h){for(var g in h)h.hasOwnProperty(g)&&(a[g]=h[g])};return function(l,h){function g(){this.constructor=l}a(l,h);l.prototype=null===h?Object.create(h):(g.prototype=h.prototype,new g)}}(),z=this&&this.__awaiter||function(a,l,h,g){return new (h||(h=P))(function(d,b){function c(a){try{f(g.next(a))}catch(c){b(c)}}function e(a){try{f(g["throw"](a))}catch(c){b(c)}}
function f(a){a.done?d(a.value):(new h(function(b){b(a.value)})).then(c,e)}f((g=g.apply(a,l||[])).next())})},A=this&&this.__generator||function(a,l){function h(a){return function(b){return g([a,b])}}function g(f){if(b)throw new TypeError("Generator is already executing.");for(;d;)try{if(b=1,c&&(e=c[f[0]&2?"return":f[0]?"throw":"next"])&&!(e=e.call(c,f[1])).done)return e;if(c=0,e)f=[0,e.value];switch(f[0]){case 0:case 1:e=f;break;case 4:return d.label++,{value:f[1],done:!1};case 5:d.label++;c=f[1];
f=[0];continue;case 7:f=d.ops.pop();d.trys.pop();continue;default:if(!(e=d.trys,e=0<e.length&&e[e.length-1])&&(6===f[0]||2===f[0])){d=0;continue}if(3===f[0]&&(!e||f[1]>e[0]&&f[1]<e[3])){d.label=f[1];break}if(6===f[0]&&d.label<e[1]){d.label=e[1];e=f;break}if(e&&d.label<e[2]){d.label=e[2];d.ops.push(f);break}e[2]&&d.ops.pop();d.trys.pop();continue}f=l.call(a,d)}catch(k){f=[6,k],c=0}finally{b=e=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}var d={label:0,sent:function(){if(e[0]&1)throw e[1];
return e[1]},trys:[],ops:[]},b,c,e,f;return f={next:h(0),"throw":h(1),"return":h(2)},"function"===typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f},m;(function(a){var l;a.Namespace=function(a){if(!l){var g=a._fs_loaded;l=g?g:a._fs_namespace?a._fs_namespace:"FS"}return l};a.isLoaded=function(a){return a._fs_loaded};a.setLoaded=function(a,g){a._fs_loaded=g;g in a||(a[g]={})}})(m||(m={}));(function(a){a._fs_debug=function(a){return!!a._fs_ext_debug||!!a._fs_debug};a._fs_host=function(a){return a._fs_ext_host||
a._fs_host};a._fs_org=function(a){return a._fs_ext_org||a._fs_org};a._fs_csp=function(a){return a._fs_csp};a._fs_cookie_domain=function(a){return a._fs_cookie_domain};a._fs_ready=function(a){return a._fs_ready};a._fs_run_in_iframe=function(a){return!!a._fs_run_in_iframe};a._fs_is_outer_script=function(a){return!!a._fs_is_outer_script};a._fs_replay_flags=function(a){return a._fs_replay_flags};a._fs_transport=function(a){return a._fs_transport};a.set_fs_shutdown=function(a,h){a._fs_shutdown=h};a.FS_q_drain=
function(l){if((l=l[a.Namespace(l)])&&"q"in l){var h=l.q;delete l.q;return h}return[]};a.FS_q_push=function(l,h){var g=l[a.Namespace(l)];"q"in g||(g.q=[]);g.q.push(h)}})(m||(m={}));(function(a){a.CompiledTimestamp=1519244439;a.CompiledVersion="UNSET"})(m||(m={}));(function(a){function l(){var c,e;try{throw Error("");}catch(k){c="<generated>\n",e=k.stack||k.backtrace||k.stacktrace}if(!e){c="<generated-ie>\n";e=[];try{for(var t=arguments.callee.caller.caller;t&&e.length<g;){var D=b.test(t.toString())?
RegExp.$1||d:d;e.push(D);t=t.caller}}catch(p){a.logIfDebug(p)}e=e.join("\n")}return c+e}function h(b,e,d){if(!(0>=c)){c--;"string"==typeof b&&(b=Error(b));var g=a.getCookies(document).fs_uid;(g=g?a.parseIdentityCookie(g):void 0)&&g.OrgId!=a._fs_org(window)&&(g=void 0);var D=window.location.origin,p=(new Date).getTime(),s;try{s=window.self!==window.top}catch(h){s=!0}b={projectRoot:D,"metaData[device][time]":p,"metaData[misc][inIframe]":s,"metaData[misc][CompiledTimestamp]":a.CompiledTimestamp,"metaData[misc][CompiledTime]":(new Date(1E3*
a.CompiledTimestamp)).toISOString(),"metaData[misc][orgId]":a._fs_org(window),"metaData[misc][userId:sessionId]":g?g.UserId+":"+g.SessionId:"NA",context:document.location.pathname,message:b.message,name:"Recording Error",payloadVersion:3,releaseStage:"production "+(new Date(1E3*a.CompiledTimestamp)).toISOString(),severity:e,notfierVersion:"3.2.0",language:navigator.language||navigator.userLanguage||"en-GB",stacktrace:b.stack||(b.backtrace||b.stacktrace)||l(),apiKey:"38f089fdedbe27e3ca594fb18cdbc78e",
ct:"img",cb:(new Date).getTime()};if(d)for(var q in d)b["metaData[aux]["+q+"]"]=d[q];d=[];for(q in b)d.push(encodeURIComponent(q)+"="+encodeURIComponent(b[q]));(new Image).src="https://notify.bugsnag.com/js?"+d.sort().join("&")}}var g=10,d="[anonymous]",b=/function\s*([\w\-$]+)?\s*\(/i;a.generateStacktrace=l;var c=15;a.sendToBugsnag=h;var e={};a.assert=function(a,b,c){void 0===c&&(c=1);if(a)return!0;e[b]=e[b]||0;e[b]++;if(e[b]>c)return!1;h(Error("Assertion failed: "+b),"error");return a}})(m||(m=
{}));(function(a){function l(){var a=0,b=new N(d),c=document.createTextNode("");b.observe(c,{characterData:!0});return function(){var b=a=++a%2;c.data=b+""}}function h(){var a=new MessageChannel;a.port1.onmessage=d;return function(){return a.port2.postMessage(0)}}function g(){var a=setTimeout;return function(){return a(d,1)}}function d(){for(var a=0;a<y;a+=2)(0,H[a])(H[a+1]),H[a]=void 0,H[a+1]=void 0;y=0}function b(a,b){var c=arguments,f=this,d=new this.constructor(e);void 0===d[A]&&m(d);var n=f._state;
n?function(){var a=c[n-1];G(function(){return M(n,d,a,f._result)})}():r(f,d,a,b);return d}function c(a){if(a&&"object"===typeof a&&a.constructor===this)return a;var b=new this(e);p(b,a);return b}function e(){}function f(a){try{return a.then}catch(b){return K.error=b,K}}function n(a,b,c,e,f){try{a.call(b,c,e)}catch(d){return d}}function k(a,b,c){G(function(a){var e=!1,f=n(c,b,function(c){e||(e=!0,b!==c?p(a,c):u(a,c))},function(b){e||(e=!0,q(a,b))},"Settle: "+(a._label||" unknown promise"));!e&&f&&
(e=!0,q(a,f))},a)}function t(a,b){b._state===L?u(a,b._result):b._state===I?q(a,b._result):r(b,void 0,function(b){return p(a,b)},function(b){return q(a,b)})}function D(a,e,f){e.constructor===a.constructor&&f===b&&e.constructor.resolve===c?t(a,e):f===K?(q(a,K.error),K.error=null):void 0===f?u(a,e):"function"===typeof f?k(a,e,f):u(a,e)}function p(a,b){a===b?q(a,new TypeError("You cannot resolve a promise with itself")):"function"===typeof b||"object"===typeof b&&null!==b?D(a,b,f(b)):u(a,b)}function s(a){a._onerror&&
a._onerror(a._result);w(a)}function u(a,b){a._state===v&&(a._result=b,a._state=L,0!==a._subscribers.length&&G(w,a))}function q(a,b){a._state===v&&(a._state=I,a._result=b,G(s,a))}function r(a,b,c,e){var f=a._subscribers,d=f.length;a._onerror=null;f[d]=b;f[d+L]=c;f[d+I]=e;0===d&&a._state&&G(w,a)}function w(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var e,f,d=a._result,n=0;n<b.length;n+=3)e=b[n],f=b[n+c],e?M(c,e,f,d):f(d);a._subscribers.length=0}}function x(){this.error=null}function M(a,
b,c,e){var f="function"===typeof c,d,n,k,g;if(f){try{d=c(e)}catch(D){C.error=D,d=C}d===C?(g=!0,n=d.error,d.error=null):k=!0;if(b===d){q(b,new TypeError("A promises callback cannot return that same promise."));return}}else d=e,k=!0;b._state===v&&(f&&k?p(b,d):g?q(b,n):a===L?u(b,d):a===I&&q(b,d))}function Q(a,b){try{b(function(b){p(a,b)},function(b){q(a,b)})}catch(c){q(a,c)}}function m(a){a[A]=O++;a._state=void 0;a._result=void 0;a._subscribers=[]}function F(a,b){this._instanceConstructor=a;this.promise=
new a(e);this.promise[A]||m(this.promise);E(b)?(this._input=b,this._remaining=this.length=b.length,this._result=Array(this.length),0===this.length?u(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&u(this.promise,this._result))):q(this.promise,Error("Array Methods must be provided an Array"))}var J=void 0,E=J=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},y=0,G=function(a,b){H[y]=a;H[y+1]=b;y+=2;2===
y&&z()},N=window.MutationObserver||window.WebKitMutationObserver,J="undefined"!==typeof Uint8ClampedArray&&void 0!=typeof self&&"undefined"!==typeof self.importScripts&&"undefined"!==typeof MessageChannel,H=Array(1E3),z;z=N?l():J?h():g();var A=Math.random().toString(36).substring(16),v=void 0,L=1,I=2,K=new x,C=new x,O=0;F.prototype._enumerate=function(){for(var a=this.length,b=this._input,c=0;this._state===v&&c<a;c++)this._eachEntry(b[c],c)};F.prototype._eachEntry=function(a,d){var n=this._instanceConstructor,
k=n.resolve;k===c?(k=f(a),k===b&&a._state!==v?this._settledAt(a._state,d,a._result):"function"!==typeof k?(this._remaining--,this._result[d]=a):n===B?(n=new n(e),D(n,a,k),this._willSettleAt(n,d)):this._willSettleAt(new n(function(b){return b(a)}),d)):this._willSettleAt(k(a),d)};F.prototype._settledAt=function(a,b,c){var e=this.promise;e._state===v&&(this._remaining--,a===I?q(e,c):this._result[b]=c);0===this._remaining&&u(e,this._result)};F.prototype._willSettleAt=function(a,b){var c=this;r(a,void 0,
function(a){return c._settledAt(L,b,a)},function(a){return c._settledAt(I,b,a)})};var B=function(a){this[A]=O++;this._result=this._state=void 0;this._subscribers=[];if(e!==a){if("function"!==typeof a)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(this instanceof B)Q(this,a);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}};B.all=function(a){return(new F(this,
a)).promise};B.race=function(a){var b=this;return E(a)?new b(function(c,e){for(var f=a.length,d=0;d<f;d++)b.resolve(a[d]).then(c,e)}):new b(function(a,b){return b(new TypeError("You must pass an array to race."))})};B.resolve=c;B.reject=function(a){var b=new this(e);q(b,a);return b};B._setAsap=function(a){G=a};B._asap=G;B.prototype={constructor:B,then:b,"catch":function(a){return this.then(null,a)}};a.Promise="function"==typeof window.Promise?window.Promise:B})(m||(m={}));var P=m.Promise;(function(a){var l=
navigator.userAgent;a.uaIsIE=-1<l.indexOf("MSIE ")||-1<l.indexOf("Trident/");a.uaIsEdge=-1<l.indexOf("Edge/")})(m||(m={}));(function(a){a.initWindex=function(l){try{if(a.uaIsIE||a.uaIsEdge)return a.windex.done=!0,a.Promise.resolve();if(!l.document||a.windex.done)return a.Promise.resolve();var h=l.document.createElement("iframe");h.id="FullStory-iframe";h.className="fs-hide";h.setAttribute("style","display: none;");var g=l.document.body||l.document.head||l.document.documentElement||l.document;try{g.appendChild(h)}catch(d){return a.Promise.resolve()}h.src=
"about:blank";if(!h.contentWindow)return a.Promise.resolve();var b={done:!0,JSON:h.contentWindow.JSON,Array:h.contentWindow.Array,Object:h.contentWindow.Object,objectHasOwnProp:a.unbind(h.contentWindow.Object.prototype.hasOwnProperty),setWindowTimeout:a.unbind(h.contentWindow.setTimeout),setWindowInterval:a.unbind(h.contentWindow.setInterval),clearWindowTimeout:a.unbind(h.contentWindow.clearTimeout),clearWindowInterval:a.unbind(h.contentWindow.clearInterval)};h.parentNode&&h.parentNode.removeChild(h);
var c,e=new a.Promise(function(a){return c=a});setTimeout(function(){try{(new b.Array).push(0),a.windex=b}catch(e){a.windex.done=!0}c()});return e}catch(f){return a.sendToBugsnag(f,"error"),a.Promise.resolve()}}})(m||(m={}));(function(a){function l(b){return a.windex.Object.values.call(a.windex.Object,b||{})}function h(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b}function g(a){e&&window.console&&console.log(a)}function d(a){var b="Internal error: unable to determine what JSON error was";
try{b=""+a,b=b.replace(/[^a-zA-Z0-9\.\:\!\, ]/g,"_")}catch(c){}return'"'+b+'"'}function b(a){var c=a.document,e=a.location.href;"string"==typeof c.baseURI?e=c.baseURI:(c=c.getElementsByTagName("base")[0])&&c.href&&(e=c.href);return"about:blank"==e&&a.parent!=a?b(a.parent):e}function c(a){return function(b){for(var c=[],e=1;e<arguments.length;e++)c[e-1]=arguments[e];return a.apply(b,c)}}var e=!1;a.windex={done:!1,JSON:JSON,Array:Array,Object:Object,objectHasOwnProp:c(Object.prototype.hasOwnProperty),
setWindowTimeout:c(setTimeout),setWindowInterval:c(setInterval),clearWindowTimeout:c(clearTimeout),clearWindowInterval:c(clearInterval)};a.BAD_APP_IDS=" 0 1 -1 true false n/a nan undefined null nil the_id_that_you_use_in_your_app_for_this_user".split(" ");a._native_bind=function(a,b){for(var c=[],e=2;e<arguments.length;e++)c[e-2]=arguments[e];return a.bind.apply(a,[b].concat(c))};a._js_bind=function(a,b){for(var c=[],e=2;e<arguments.length;e++)c[e-2]=arguments[e];return function(){var e=Array.prototype.slice.call(arguments);
a.call.apply(a,[b].concat(c,e))}};a.bind=Function.prototype.bind?a._native_bind:a._js_bind;a._native_map=function(a,b,c){return a.map(b,c)};a._js_map=function(a,b,c){for(var e=Array(a.length),f=0;f<a.length;f++)e[f]=b.call(c,a[f],f,a);return e};a.map=Array.prototype.map?a._native_map:a._js_map;a._native_trim=function(a){return a.trim()};a._js_trim=function(a){return a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};a.trim=String.prototype.trim?a._native_trim:a._js_trim;a._native_filter=function(a,
b,c){return a.filter(b,c)};a._js_filter=function(a,b,c){for(var e=Array(a.length),f=0;f<a.length;f++)e[f]=b.call(c,a[f],f,a);return e};a.filter=Array.prototype.filter?a._native_filter:a._js_filter;var f=function(b){return a.windex.Array.isArray(b)},n=function(b){return"[object Array]"==a.windex.Object.prototype.toString.call(b)};a.isArray=a.windex.Array.isArray?f:n;a._native_keys=function(b){return a.windex.Object.keys(b)};a._js_keys=function(b){var c=[],e;for(e in b)a.windex.objectHasOwnProp(b,e)&&
c.push(e);return c};a.keys="function"==typeof a.windex.Object.keys?a._native_keys:a._js_keys;a.prefix=function(a,b){return 0==a.lastIndexOf(b,0)};a.forIn=function(b,c){for(var e in b)a.windex.objectHasOwnProp(b,e)&&c(b[e],e,b)};a.firstKey=function(a){for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b))return b};a.firstValue=function(a){for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b))return a[b]};a.hasNKeys=function(a,b){var c=0,e;for(e in a)if(Object.prototype.hasOwnProperty.call(a,
e)&&++c>b)return!1;return c==b};a.hasMoreThanNKeys=function(a,b){var c=0,e;for(e in a)if(Object.prototype.hasOwnProperty.call(a,e)&&++c>b)return!0;return!1};a._native_values=l;a._js_values=h;a.values=a.windex.Object.values?l:h;a.$entry=function(a,b){var c=function(){try{return a.apply(b||this,arguments)}catch(c){}};return window.Zone&&window.Zone.root&&"function"==typeof window.Zone.root.wrap?window.Zone.root.wrap(c):c};a.initDebug=function(b){e=a._fs_debug(b)};a.isDebug=function(){return e};a.logIfDebug=
g;a.stringify=function(b){var c=Array.prototype.toJSON,e=String.prototype.toJSON;c&&(Array.prototype.toJSON=void 0);e&&(String.prototype.toJSON=void 0);var f;try{f=a.windex.JSON.stringify(b)}catch(n){f=d(n)}finally{c&&(Array.prototype.toJSON=c),e&&(String.prototype.toJSON=e)}return f};a.jsonErrorString=d;a.baseUri=b;a.doctypeString=function(a){a=a.doctype;if(!a)return"";var b;b="<!DOCTYPE "+a.name;a.publicId&&(b+=' PUBLIC "'+a.publicId+'"');a.systemId&&(b+=' "'+a.systemId+'"');return b+">"};a.parseJson=
function(b){return a.windex.JSON.parse(b)};a.domainFromHost=function(a){var b=a.indexOf(":");0<=b&&(a=a.slice(0,b));return a};a.isLocalhost=function(a){return"localhost"==a||"127.0.0.1"==a};a.isIP=function(a){return!!a.match(/^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$/g)};a.tryGetScreenDims=function(a){var b=0,c=0;if(null==a.screen)return[b,c];b=parseInt(String(a.screen.width));c=parseInt(String(a.screen.height));b=isNaN(b)?0:b;c=isNaN(c)?0:c;return[b,c]};f=function(){function a(){var b=this;
this._listeners=[];this._children=[];this._yesCapture=!0;this._noCapture=!1;try{var c=Object.defineProperty({},"passive",{get:function(){b._yesCapture={capture:!0,passive:!0};b._noCapture={capture:!1,passive:!0}}});window.addEventListener("test",function(){},c)}catch(e){}}a.prototype.add=function(a,b,c,e){c={target:a,type:b,fn:function(a){try{e(a)}catch(b){g("Error in event listener: "+b)}},options:c?this._yesCapture:this._noCapture,index:this._listeners.length};this._listeners.push(c);a.addEventListener(b,
c.fn,c.options);return c};a.prototype.remove=function(a){a.target&&(a.target.removeEventListener(a.type,a.fn,a.options),a.target=null,a.fn=void 0)};a.prototype.clear=function(){for(var a=0;a<this._listeners.length;a++)this._listeners[a].target&&this.remove(this._listeners[a]);this._listeners=[]};a.prototype.createChild=function(){var b=new a;this._children.push(b);return b};a.prototype.refresh=function(){for(var a=0,b=this._listeners;a<b.length;a++){var c=b[a];c.target&&(c.target.removeEventListener(c.type,
c.fn,c.options),c.target.addEventListener(c.type,c.fn,c.options))}a=0;for(b=this._children;a<b.length;a++)b[a].refresh()};return a}();a.DomListeners=f;var k=function(){function b(a,c){this.target=a;this.propertyName=c;this.attached=this.on=!1;this.native=a[c]}b.prototype.before=function(a){this._before=a;return this};b.prototype.afterAsync=function(a){this._afterAsync=a;return this};b.prototype.afterSync=function(a){this._afterSync=a;return this};b.prototype.disable=function(){this.on=!1;this.target[this.propertyName]==
this.shim&&(this.target[this.propertyName]=this.native,this.attached=!1)};b.prototype.enable=function(){this.on=!0;if(!this.attached){this.shim||(this.shim=this.makeShim());try{this.target[this.propertyName]=this.shim}catch(a){return!1}this.attached=!0}return!0};b.prototype.makeShim=function(){var b=this;return function(){var c={that:this,args:arguments};if(b.on)try{b._before&&b._before.call(this,c)}catch(e){g("Error in hook before "+b.propertyName)}var f=b.native.apply(this,arguments);if(b.on)try{if(b._afterSync&&
b._afterSync.call(this,c),b._afterAsync){var d=this;a.windex.setWindowTimeout(window,function(){try{b._afterAsync.call(d,c)}catch(a){g("Error in async hook after "+b.propertyName)}},0)}}catch(n){g("Error in hook after "+b.propertyName)}return f}};return b}(),t={};a.activateHook=function(a,b){if(!a||"function"!=typeof a[b])return null;t[b]=t[b]||[];for(var c,e=0;e<t[b].length;e++)t[b][e].obj==a&&(c=t[b][e].hook);c||(c=new k(a,b),t[b].push({obj:a,hook:c}));return c.enable()?c:null};a.tagName=function(a){return a.tagName?
"object"==typeof a.tagName?"form":a.tagName.toLowerCase():null};a.parseIdentityCookie=function(b){var c="",e="",f="",d="",n="";if(b){var k=b.split("`");3>k.length?c=b:(f=k[0],d=k[1],c=k[2],5<=k.length&&(n=decodeURIComponent(k[3]),0<=a.BAD_APP_IDS.indexOf(n)&&(g('ignoring invalid app key "'+n+'" from cookie.'),n="")))}b=c.indexOf(":");-1!=b&&(e=c.slice(b+1),c=c.slice(0,b));return{Host:f,OrgId:d,UserId:c,SessionId:e,AppKey:n}};a.getCookies=function(a){var b={};a=a.cookie.split(";");for(var c=0;c<a.length;c++){var e=
a[c].replace(/^\s+|\s+$/g,"").split("=");b[e[0]]||(b[e[0]]=e[1])}return b};a.wait=function(b){return new a.Promise(function(c){a.windex.setWindowTimeout(window,function(){return c()},b)})};a.unbind=c;a.elemSheet=function(a){return a?a.sheet:void 0};a.sheetRules=function(a){return a?a.cssRules||a.rules:void 0}})(m||(m={}));(function(a){a.EVENT_MUT_INSERT=2;a.EVENT_MUT_REMOVE=3;a.EVENT_MUT_ATTR=4;a.EVENT_MUT_ATTR_CURVE=5;a.EVENT_MUT_TEXT=6;a.EVENT_MUT_SKIPIDS=7;a.EVENT_MOUSEMOVE=8;a.EVENT_MOUSEMOVE_CURVE=
9;a.EVENT_SCROLL=10;a.EVENT_SCROLL_CURVE=11;a.EVENT_MOUSEDOWN=12;a.EVENT_MOUSEUP=13;a.EVENT_KEYDOWN=14;a.EVENT_KEYUP=15;a.EVENT_CLICK=16;a.EVENT_FOCUS=17;a.EVENT_VALUECHANGE=18;a.EVENT_RESIZE=19;a.EVENT_DOMLOADED=20;a.EVENT_LOAD=21;a.EVENT_PLACEHOLDER_SIZE=22;a.EVENT_UNLOAD=23;a.EVENT_BLUR=24;a.EVENT_SET_FRAME_BASE=25;a.EVENT_TOUCHSTART=32;a.EVENT_TOUCHEND=33;a.EVENT_TOUCHCANCEL=34;a.EVENT_TOUCHMOVE=35;a.EVENT_TOUCHMOVE_CURVE=36;a.EVENT_NAVIGATE=37;a.EVENT_PLAY=38;a.EVENT_PAUSE=39;a.EVENT_INNERWIDTH=
40;a.EVENT_INNERWIDTH_CURVE=41;a.EVENT_LOG=48;a.EVENT_ERROR=49;a.EVENT_DBL_CLICK=50;a.EVENT_FORM_SUBMIT=51;a.EVENT_WINDOW_FOCUS=52;a.EVENT_WINDOW_BLUR=53;a.EVENT_HEARTBEAT=54;a.EVENT_WATCHED_ELEM=56;a.PerfEntryTiming=0;a.PerfEntryNavigation=1;a.PerfEntryResource=2;a.PerfEntryPaint=3;a.PerfEntryMark=4;a.PerfEntryMeasure=5;a.PerfEntryMemory=6;a.EVENT_PERF_ENTRY=57;a.RecFeaturePerformance=0;a.RecFeaturePerformanceEntries=1;a.RecFeaturePerformanceMemory=2;a.EVENT_REC_FEAT_SUPPORTED=58;a.EVENT_SELECT=
59;a.RecStylesheetOwnerTypeNode=0;a.RecStylesheetOwnerTypeRule=1;a.EVENT_CSSRULE_INSERT=60;a.EVENT_CSSRULE_DELETE=61;a.EVENT_STYLESHEET_FAIL=62;a.EVENT_SYS_SETMETA=8192;a.EVENT_SYS_SETVAR=8193;a.EVENT_SYS_HIGHLIGHT=8194;a.EVENT_SYS_RESOURCEHASH=8195;a.EVENT_COOKED_LOAD="load";a.EVENT_COOKED_UNLOAD="unload";a.EVENT_COOKED_NAVIGATE="navigate";a.EVENT_COOKED_CLICK="click";a.EVENT_COOKED_TAP="tap";a.EVENT_COOKED_FOCUS="focus";a.EVENT_COOKED_CHANGE="change";a.EVENT_COOKED_MOUSE_THRASH="thrash";a.EVENT_FORM_ABANDONED=
"abandon";a.EVENT_COOKED_ELEM_SEEN="seen";a.isUserActionEvent=function(l){switch(l){case a.EVENT_MOUSEDOWN:case a.EVENT_MOUSEMOVE:case a.EVENT_MOUSEMOVE_CURVE:case a.EVENT_MOUSEUP:case a.EVENT_KEYDOWN:case a.EVENT_KEYUP:case a.EVENT_TOUCHSTART:case a.EVENT_TOUCHEND:case a.EVENT_TOUCHMOVE:case a.EVENT_TOUCHMOVE_CURVE:case a.EVENT_TOUCHCANCEL:case a.EVENT_CLICK:case a.EVENT_SCROLL:case a.EVENT_SCROLL_CURVE:case a.EVENT_NAVIGATE:return!0}return!1};a.MAX_LOGS_PER_PAGE=1024})(m||(m={}));(function(a){a.HighlightTypeFsId=
"fsidentity";a.HighlightTypeNewUid="newuid";a.UID_COOKIE="fs_uid";var l=function(){function h(a){void 0===a&&(a=document);this._doc=a;this._cookies={}}h.prototype.initFromCookies=function(g,d){this._cookies=a.getCookies(this._doc);this._cookie=a.parseIdentityCookie(this._cookies[a.UID_COOKIE]);if(this._cookie.Host.replace(/^www\./,"")!=g.replace(/^www\./,"")||this._cookie.OrgId!=d)this._cookie={Host:g,OrgId:d,UserId:"",SessionId:"",AppKey:""}};h.prototype.initFromParsedCookie=function(a){this._cookie=
a};h.prototype.clear=function(){var a=this.host(),d=this.orgId();this._cookie={Host:a,OrgId:d,UserId:"",SessionId:"",AppKey:""};this.write()};h.prototype.host=function(){return this._cookie.Host};h.prototype.orgId=function(){return this._cookie.OrgId};h.prototype.userId=function(){return this._cookie.UserId};h.prototype.sessionId=function(){return this._cookie.SessionId};h.prototype.appKey=function(){return this._cookie.AppKey};h.prototype.cookieData=function(){return this._cookie};h.prototype.cookies=
function(){return this._cookies};h.prototype.setCookie=function(a,d){var b=a+"="+d,b=this._domain?b+("; domain=."+encodeURIComponent(this._domain)):b+"; domain=";this._doc.cookie=b+"; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/"};h.prototype.setIds=function(g,d,b,c){if(a.isLocalhost(d)||a.isIP(d))d="";g=a._fs_cookie_domain(g);"string"==typeof g&&(d=g);this._domain=d;this._cookie.UserId=b;this._cookie.SessionId=c;this.write()};h.prototype.clearAppId=function(){if(!this._cookie.AppKey)return!1;this._cookie.AppKey=
"";this.write();return!0};h.prototype.setAppId=function(a){this._cookie.AppKey=a;this.write()};h.prototype.encode=function(){var a=this._cookie.Host+"`"+this._cookie.OrgId+"`"+this._cookie.UserId+":"+this._cookie.SessionId;this._cookie.AppKey&&(a+="`"+encodeURIComponent(this._cookie.AppKey)+"`");return a};h.prototype.write=function(){null!=this._domain&&this.setCookie(a.UID_COOKIE,this.encode())};return h}();a.Identity=l})(m||(m={}));(function(a){function l(d,b){"number"==typeof d&&Math.floor(d)==
d&&(a.logIfDebug("Expected appId of type 'string' instead got value: "+d+" of type: "+typeof d),d=""+d);if("string"!=typeof d)return a.logIfDebug("blocking FS.identify API call; uid value ("+d+") must be a string"),[void 0,a.HighlightTypeFsId];var c=d.trim();if(0<=a.BAD_APP_IDS.indexOf(c.toLowerCase()))return a.logIfDebug("blocking FS.identify API call; uid value ("+d+") is illegal"),[void 0,a.HighlightTypeFsId];var e=void 0;b&&(b._cookie.AppKey&&b._cookie.AppKey!=c)&&(a.logIfDebug("user re-identified; existing uid ("+
b._cookie.AppKey+") does not match provided uid ("+c+")"),e=a.HighlightTypeNewUid);return[c,e]}var h=function(){function d(a){this._identity=a;this.AccountSystemVars={acctId:"str",displayName:"str",website:"str"};this.UserSystemVars={uid:"str",displayName:"str",email:"str"};this.VarTypes={str:function(a){return"string"==typeof a},bool:function(a){return"boolean"==typeof a},"int":function(a){return"number"==typeof a&&0==a-Math.floor(a)},real:function(a){return"number"==typeof a},date:function(a){return a?
!isNaN(a.constructor===Date?a:new Date(a)):!1}}}d.prototype.identity=function(){return this._identity};d.prototype.api=function(b,c){var e=!1,f=[];switch(b){case g.rec:return[[],!1,c?"restart":"shutdown"];case g.account:f=f.concat(this.setvar_api("acct",this.AccountSystemVars,c));break;case g.user:if("object"!=typeof c)a.logIfDebug("Expected argument of type 'object' instead got type: '"+typeof c+"', value: "+a.stringify(c));else if("uid"in c){var d=c.uid;if(!1===d)this._identity.clearAppId()&&(e=
!0),delete c.uid;else{var k=l(d,this._identity),d=k[0],k=k[1];if(!d){switch(k){case a.HighlightTypeFsId:f.push({When:0,Kind:a.EVENT_SYS_HIGHLIGHT,Args:[a.HighlightTypeFsId,c.uid+""]});break;case void 0:break;default:a.logIfDebug("unexpected failReason returned from setAppId: "+k)}return[f,!1,null]}c.uid=d;this._identity.setAppId(c.uid);k==a.HighlightTypeNewUid&&(e=!0)}}f=f.concat(this.setvar_api("user",this.UserSystemVars,c));break;default:a.logIfDebug('invalid operation "'+b+'"; only "rec", "account", and "user" are supported at present')}return[f,
e,null]};d.prototype.setvar_api=function(b,c,e){var f=[],d={},k;for(k in e)if(e.hasOwnProperty(k)){var g=e[k];a.logIfDebug("set-var('"+b+"'): \""+k+'" = '+a.stringify(g));var h=typeof g;if("object"!==h||g&&g.constructor==Date){var p,l;if(k in c)p=k,l=c[k];else{l=k.split("_");if(2!=l.length){a.logIfDebug('variables must be of the form "name_type", where "type" is one of [str, bool, int, real, date]');f.push({When:0,Kind:a.EVENT_SYS_HIGHLIGHT,Args:["varname",b+":"+k]});continue}-1!=k.indexOf(" ")?(p=
k.replace(/ /g,""),f.push({When:0,Kind:a.EVENT_SYS_HIGHLIGHT,Args:["varname",b+":"+k]}),a.logIfDebug("Warning: variable '"+k+"' has spaces in it, which is disallowed. Converted name to '"+p+"'.")):p=k;l=l[1]}l in this.VarTypes?this.VarTypes[l](g)?("str"==l&&(g=g.trim()),"date"==l&&(g=this.toIsoString(g)),d[p]=g):(a.logIfDebug("illegal value "+a.stringify(g)+" for type "+l),"number"===h?h=0==g-Math.floor(g)?"integer":"real":"object"==h&&(null!=g&&g.constructor==Date)&&(h=isNaN(g)?"invalid date":"date"),
f.push({When:0,Kind:a.EVENT_SYS_HIGHLIGHT,Args:["vartype",b+":"+k,h]})):(a.logIfDebug('invalid type "'+l+'"'),f.push({When:0,Kind:a.EVENT_SYS_HIGHLIGHT,Args:["varname",b+":"+k]}))}else g instanceof Array&&(h="array"),f.push({When:0,Kind:a.EVENT_SYS_HIGHLIGHT,Args:["vartype",b+":"+k,h+" (unsupported)"]})}f.push({When:0,Kind:a.EVENT_SYS_SETVAR,Args:[b,a.stringify(d)]});return f};d.prototype.toIsoString=function(a){return(a.constructor===Date?a:new Date(a)).toISOString()};return d}();a.Vars=h;a.transformValidateAppId=
l;var g;(function(a){a.rec="rec";a.user="user";a.account="account"})(g=a.ApiType||(a.ApiType={}))})(m||(m={}));var C;(function(a){var l="(.*?"+/(?:[^\\](?:\\\\)*)/.source+")";a.CSS_URL=RegExp([['@import\\s+"','"'],["@import\\s+'","'"],['url\\(\\s*"','"\\s*\\)'],["url\\(\\s*'","'\\s*\\)"],["url\\(\\s*","\\s*\\)"]].map(function(a){return"("+a[0]+")"+l+"("+a[1]+")"}).join("|"),"g");a.replaceCssUrls=function(h,g){return h.replace(a.CSS_URL,function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];
return g(b[0]||b[3]||b[6]||b[9]||b[12],b[1]||b[4]||b[7]||b[10]||b[13],b[2]||b[5]||b[8]||b[11]||b[14],b[15])})};a.QUOTES=/\"|'/g;a.HOVER=/\:hover/g;a.FOCUS=/\:focus/g;a.MEDIA_QUERY=/(@media.*?{)/g;a.DOMAIN=/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9]\.[a-zA-Z]{2,}$/;a.DOMAIN_PART=/^[a-zA-Z0-9-:]{1,61}$/;a.IPv4_PART=/^[0-9]{1,3}$/;a.IPv6_PART=/^[0-9a-f]{0,4}$/;a.PLAYBACK_URL_PARAMS=/.*\?Base=(.*)&Url=(.*)/;a.EMAIL=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
a.IMAGE_FILENAME=/\.(jpe?g|png|svg|gif|bmp)$/;a.ATTR_SELECTOR=/\[.*\]/g;a.SVG_NS=/svg\:/g})(C||(C={}));(function(a){var l=function(){function g(a,b){this.parent=a;this.combinator=b;this.classes={};this.attrs={};this.attrMatch={}}g.prototype.cssEscapeIdent=function(a){var b=function(a){return-1!="[]:./\\()@#%^&*'\" ".indexOf(a)?"\\"+a:"\\"+a.charCodeAt(0).toString(16)+" "};return"-"==a?"\\-":"-"==a[0]?"-"+a.slice(1).replace(/([^0-9a-zA-Z-_])/g,b):a.replace(/[^0-9a-zA-Z-_:]/g,b)};g.prototype.cssEscapeString=
function(a){return'"'+a.replace(/[\x01-\x1f\"\\]/g,function(a){return'"'==a||"\\"==a?"\\"+a:"\\"+a.charCodeAt(0).toString(16)+" "})+'"'};g.prototype.serialize=function(){var d=this.combinator?this.combinator:"";this.tag&&(d+="*"==this.tag?this.tag:this.cssEscapeIdent(this.tag));this.id&&(d+="#"+this.cssEscapeIdent(this.id));var b=a.keys(this.classes);b.sort();for(var c=0;c<b.length;c++)d+="."+this.cssEscapeIdent(b[c]);for(var e in this.attrs)d=""==this.attrMatch[e]?d+("["+this.cssEscapeIdent(e)+"]"):
d+("["+this.cssEscapeIdent(e)+this.attrMatch[e]+this.cssEscapeString(this.attrs[e])+"]");return d};return g}();a.SelectorRule=l;var h=function(){function a(d){this.rules=d}a.parse=function(d,b,c){void 0===b&&(b=null);d=d.trim();var e=new l(null,null),f=0,n=!1,k=function(){throw"Invalid selector";},t=function(){r=d[++f];if("\n"==r||null==r)throw k();if(r.match(/[0-9a-fA-F]/)){var a="";do a+=r,r=d[++f];while(r&&r.match(/[0-9a-fA-F]/));r&&r.match(/[\s]/)&&f++;return String.fromCharCode(parseInt(a,16))}f++;
return r},h=function(a){for(var b=f,c="",e;null!=(e=d[f]);)if("\\"==e)c+=t();else if(e.match(a?/[a-zA-Z0-9_:\-]/:/[a-zA-Z0-9_\-]/)||128<e.charCodeAt(0))c+=e,f++;else break;if(b==f)throw k();return c},p=function(){for(;null!=d[f]&&d[f].match(/\s/);)f++},s=function(){n=!0;f++;var a=h().toLowerCase();try{var c;p();var g=d[f],q="=";if("*"==g||"|"==g||"^"==g||"$"==g||"~"==g)q=g+"=",f++;if(b&&!b[q])throw k();if("="!=d[f])throw k();f++;p();c=q}catch(l){if(b&&!b["[]"]||"Invalid selector"!=l)throw l;if("]"!=
d[f])throw k();f++;e.attrs[a]=e.attrMatch[a]="";return}r=d[f];'"'==r||"'"==r?(g=r,f++):g="]";for(q="";(r=d[f])!=g;){if(null==r)throw k();if("\\"==r)q+=t();else{if("]"==g&&('"'==r||"'"==r))throw k();q+=r;f++}}f++;"]"!=g&&"]"==d[f]&&f++;e.attrs[a]=q;e.attrMatch[a]=c},m=function(){if(!n)throw k();n=!1;p();var a=d[f];">"==a||"+"==a||"~"==a?(f++,p()):a=" ";e=new l(e,a);if(b&&!b[a])throw k();};if(0==d.indexOf("//"))throw k();for(var q=0,f=0;f<d.length;){if(q++>2*d.length)throw console.log("Likely caught in an infinite loop while parsing "+
d),"Internal error, infinite loop";var r=d[f];switch(r){case "#":n=!0;f++;e.id=h();break;case "*":if(n)throw k();n=!0;e.tag="*";if(b&&!b["*"])throw k();f++;break;case ".":n=!0;f++;e.classes[h()]=!0;break;case "[":s();break;case " ":case ">":case "+":case "~":m();break;case ":":throw k();default:if(n)throw k();n=!0;e.tag=h(c).toLowerCase()}}if(!n)throw k();return new a(e)};a.prototype.serialize=function(){for(var a=null,b=this.rules;b;b=b.parent)a=a?b.serialize()+a:b.serialize();return a};return a}();
a.Selector=h})(m||(m={}));(function(a){function l(a){var c={};if(!a)return c;if(a.classList)for(var e=0;e<a.classList.length;++e)c[a.classList[e]]=!0;else if(a.className)for(a=(a.getAttribute("class")||"").split(" "),e=0;e<a.length;++e)c[a[e].trim()]=!0;return c}a.WatchKindNYI="nyi";a.WatchKindBlocked="blocked";a.WatchKindWatch="watch";var h=function(){function b(a,b){this._parent=a;this._rule=b}b.prototype.parent=function(){return this._parent};b.prototype.matches=function(c,e){if(!c||this._rule.tag&&
a.tagName(c)!=this._rule.tag||this._rule.id&&c.id!=this._rule.id)return!1;for(var f in this._rule.classes)if(!(f in e))return!1;for(var d in this._rule.attrs)if(f=c.getAttribute(d),null==f||!b.attrPredicates[this._rule.attrMatch[d]](f,this._rule.attrs[d]))return!1;return this._parent?this._parent.matches(c.parentElement,l(c.parentElement)):!0};b.attrPredicates={"":function(a,b){return!0},"=":function(a,b){return a==b},"*=":function(a,b){return-1<a.indexOf(b)},"^=":function(a,b){return 0==a.lastIndexOf(b,
0)},"$=":function(a,b){return a.indexOf(b,a.length-b.length)+b.length==a.length},"~=":function(a,b){return-1<a.split(/\s+/).indexOf(b)},"|=":function(a,b){return-1<a.split("-").indexOf(b)}};return b}();a.WatchRuleElem=h;var g=function(){function b(b){this.kind=b.Kind;this.selector=a.Selector.parse(b.Selector,{">":!0,"=":!0,"[]":!0,"*=":!0,"^=":!0,"$=":!0,"~=":!0,"|=":!0});var e=function(a){return new h(a.parent?e(a.parent):null,a)};this.rules=e(this.selector.rules)}b.isComment=function(a){return!!a.match(/^\s*\/\//)};
b.prototype.serialize=function(){return this.selector.serialize()};return b}();a.WatchRule=g;var d=function(){function b(){this._rules=[];this._predicateRules=[];this.rawRules=[]}b.prototype.isWatched=function(a){for(var b=0;b<this._predicateRules.length;++b)if(this._predicateRules[b].Selector(a))return this._predicateRules[b].Kind;for(var f=l(a),b=0;b<this._rules.length;++b)if(this._rules[b].rules.matches(a,f))return this._rules[b].kind;return null};b.prototype.addRule=function(b){try{return g.isComment(b.Selector)||
""==a.trim(b.Selector)||(this._rules.push(new g(b)),this.rawRules.push(b)),!0}catch(e){return a.sendToBugsnag(e,"error"),!1}};b.prototype.addPredicateRule=function(a){this._predicateRules.push(a)};b.prototype.mungeWatchedStyle=function(b,e){var f=b.getBoundingClientRect(),d=Math.floor(f.width),f=Math.floor(f.height);if("object"==a.tagName(b))for(var k=b.children,g=0;g<k.length;g++){var h=k[g];if("embed"==a.tagName(h)){k=h.getBoundingClientRect();d=Math.max(d,Math.floor(k.width));f=Math.max(f,Math.floor(k.height));
break}}k="";null!=e&&(k=e.trim());0<k.length&&";"!=k.charAt(k.length-1)&&(k+=";");if(0!=d||0!=f)k+="width:"+d+"px;height:"+f+"px;";return k};return b}();a.Watcher=d})(m||(m={}));(function(a){a.MutationProcessingInterval=250;a.CurveSamplingInterval=142;a.UploadInterval=5E3;a.HeartbeatInitial=4E3;a.HeartbeatMax=256E3;a.PageInactivityTimeout=18E5;a.BackoffMax=3E5;a.ScrollSampleInterval=a.MutationProcessingInterval/5;a.InactivityThreshold=4E3})(m||(m={}));(function(a){var l=function(){function a(d,b,
c){this._ctx=d;this._q=b;this._valueIndices=c;this._evts=[]}a.prototype.add=function(a){0==this._evts.length&&this._q.push(a);this._evts.push(a)};a.prototype.finish=function(a,b){var c=this._evts.length;if(1>=c)return!1;for(var e=this._evts[0].When,f=this._evts[c-1].When,n=0;n<this._valueIndices.length;++n){var k=this._valueIndices[n],g=this._evts[0].Args[k],h=(this._evts[1].When-e)/(f-e),l=(this._evts[1].Args[k]-g)/h,s=this._evts[c-1].Args[k],h=(f-this._evts[c-2].When)/(f-e);b.push(g,s,l,(s-this._evts[c-
2].Args[k])/h)}this._evts[0].Kind=a;this._evts[0].Args=b;return!0};a.prototype.evts=function(){return this._evts};return a}(),h=function(){function g(a){this._ctx=a;this._gotInitialScroll=!1}g.prototype.processQueue=function(d){if(0==d.length)return d;for(var b=this._ctx.now(),c=[],e=new l(this._ctx,c,[0,1]),f={},n={},k,g=0;g<d.length;++g){var h=d[g];switch(h.Kind){case a.EVENT_MOUSEMOVE:e.add(h);break;case a.EVENT_TOUCHMOVE:var p=h.Args[0];p in f||(f[p]=new l(this._ctx,c,[1,2]));f[p].add(h);break;
case a.EVENT_SCROLL:p=h.Args[0];p in n||(n[p]=new l(this._ctx,c,[1,2]));n[p].add(h);break;case a.EVENT_INNERWIDTH:k||(k=new l(this._ctx,c,[0]));k.add(h);break;default:c.push(h)}}e.finish(a.EVENT_MOUSEMOVE_CURVE,[b])&&(d=e.evts(),e=d[d.length-1].Args,2<e.length&&e[2]&&d[0].Args.push(e[2]));for(p in n)d=parseInt(p),n[d].finish(a.EVENT_SCROLL_CURVE,[b,d]);for(p in f)d=parseInt(p),f[d].finish(a.EVENT_TOUCHMOVE_CURVE,[b,d]);k&&k.finish(a.EVENT_INNERWIDTH_CURVE,[b]);return c};return g}();a.EventProcessor=
h})(m||(m={}));(function(a){a.Node_ELEMENT_NODE=1;a.Node_ATTRIBUTE_NODE=2;a.Node_TEXT_NODE=3;a.Node_CDATA_SECTION_NODE=4;a.Node_ENTITY_REFERENCE_NODE=5;a.Node_ENTITY_NODE=6;a.Node_PROCESSING_INSTRUCTION_NODE=7;a.Node_COMMENT_NODE=8;a.Node_DOCUMENT_NODE=9;a.Node_DOCUMENT_TYPE_NODE=10;a.Node_DOCUMENT_FRAGMENT_NODE=11;a.Node_NOTATION_NODE=12;a.XHR_UNSENT=0;a.XHR_OPENED=1;a.XHR_HEADERS_RECEIVED=2;a.XHR_LOADING=3;a.XHR_DONE=4;a.XHR_STATUS_ABORTED=0})(m||(m={}));(function(a){function l(g,d){var b=Math.min(a.BackoffMax,
5E3*Math.pow(2,g));return d?b+0.25*Math.random()*b:b}var h=function(){function g(){}g.prototype.postPromise=function(d,b,c,e){var f=this;return new a.Promise(function(a,k){f.post(d,b,c,e,a,k)})};return g}();a.HttpPoster=h;h=function(g){function d(){return null!==g&&g.apply(this,arguments)||this}v(d,g);d.prototype.post=function(b,c,e,f,d,k){c="//"+c+e;var g=!1,h=new XMLHttpRequest;if("withCredentials"in h)h.onreadystatechange=function(){if(h.readyState==a.XHR_DONE&&!g){g=!0;try{200==h.status?d(h.responseText):
k&&k(h.status)}catch(b){a.sendToBugsnag(b,"error")}}},h.open("POST",b+c,!0),h.withCredentials=!0,"function"!=typeof f.append&&h.setRequestHeader("Content-Type","text/plain"),h.send(f);else{var l=new XDomainRequest;l.onload=function(){d(l.responseText)};l.onerror=function(){k&&k("Not Found"==l.responseText?404:500)};l.onprogress=function(){};l.open("POST",c);l.send(f)}};d.prototype.sendBeacon=function(a,c,e,f){return"function"==typeof navigator.sendBeacon?(navigator.sendBeacon(a+"//"+c+e,f),!0):!1};
d.prototype.exponentialBackoffMs=function(a,c){return l(a,c)};return d}(h);a.XHRPoster=h;a.exponentialBackoffMs=l;a.isErrorFatal=function(a){return 400<=a||202==a?!0:!1};a.gceHost=function(g){return a.isLocalhost(a.domainFromHost(g))?g:0==g.indexOf("www.")||0==g.indexOf("app.")?"rs."+g.slice(4):"rs."+g}})(m||(m={}));(function(a){function l(b,c){return a.stringify({__fs:[b,c?c:""]})}function h(a,c,e,f,d,k,g){a="/rec/bundle?OrgId="+a+"&UserId="+c+"&SessionId="+e+"&PageId="+f+"&Seq="+d.Seq;k&&(a+="&PageStartTime="+
k);g&&(a+="&DeltaT="+g);return a}var g=function(){function b(a,b){void 0===b&&(b=new d);this._wnd=a;this._messagePoster=b}b.prototype.enqueueEvents=function(b){this._messagePoster.postMessage(this._wnd.parent,a.FS_IFRAME_EVENTS,b)};b.prototype.startPipeline=function(a){};b.prototype.stopPipeline=function(){};b.prototype.flush=function(){};b.prototype.singSwanSong=function(){};return b}();a.PostMessageEventTransport=g;var d=function(){function b(){}b.prototype.postMessage=function(b,e,f){var d;try{d=
a._fs_transport(b)}catch(k){}d?d.send(e,a.stringify(f)):b.postMessage(l(e,f),"*")};return b}();a.PostMessagePoster=d;a.formatPostMessageData=l;g=function(){function b(b,e,f,d,k){void 0===f&&(f=a.RealTicker);void 0===d&&(d=a.RealTimeout);void 0===k&&(k=new a.XHRPoster);var g=this;this._ctx=b;this._onShutdown=e;this._tickerFactory=f;this._poster=k;this._backoffTime=this._backoffRetries=this._byteCount=0;this._bundleSeq=1;this._lastPostTime=0;this._largePageSize=16E6;this._outgoingEventQueue=[];this._bundleQueue=
[];this._hibernating=!1;this._lastUserEvent=this._heartbeatInterval=0;this._finished=!1;this._bundleHost=a.gceHost(b.getHost());this._protocol=b.getProtocol();this._identity=b.getIdentity();this._lastBundleTime=b.wallTime();this._uploadTicker=new this._tickerFactory(a.UploadInterval);this._swanSong=new a.SwanSong(b,this,this._identity,d);this._heartbeatTimeout=new d(function(){g._outgoingEventQueue.push({Kind:a.EVENT_HEARTBEAT,When:g._ctx.now(),Args:[]});g._heartbeatInterval*=2;g._heartbeatInterval>
a.HeartbeatMax&&(g._heartbeatInterval=a.HeartbeatMax);g._heartbeatTimeout.start(g._heartbeatInterval)});this._hibernationTimeout=new d(function(){g._ctx.now()-g._lastUserEvent<=2*a.PageInactivityTimeout&&(g._outgoingEventQueue.push({Kind:a.EVENT_UNLOAD,When:g._ctx.now(),Args:["hibernation"]}),g.singSwanSong());g.stopPipeline();g._hibernating=!0},a.PageInactivityTimeout)}b.prototype.protocol=function(){return this._protocol};b.prototype.enqueueEvents=function(b){if(this._hibernating){if(!this._finished)for(var e=
0;e<b.length;e++){var f=b[e];if(a.isUserActionEvent(f.Kind)){this._ctx.splitPage();this._finished=!0;break}}}else{for(e=0;e<b.length;e++)if(f=b[e],a.isUserActionEvent(f.Kind)){this._hibernationTimeout.start();this._heartbeatInterval=a.HeartbeatInitial;this._heartbeatTimeout.start(this._heartbeatInterval);this._lastUserEvent=this._ctx.now();break}(d=this._outgoingEventQueue).push.apply(d,b);var d}};b.prototype.startPipeline=function(b){var e=this;this._pageId=b;this.enqueueAndSendBundle();this._uploadTicker.start(function(){e.enqueueAndSendBundle()});
this._heartbeatInterval=a.HeartbeatInitial;this._heartbeatTimeout.start(this._heartbeatInterval);this._hibernationTimeout.start()};b.prototype.stopPipeline=function(){this._uploadTicker.stop();this._outgoingEventQueue=[];this._bundleQueue=[];this._hibernationTimeout.cancel();this._heartbeatTimeout.cancel()};b.prototype.flush=function(){this.maybeSendNextBundle()};b.prototype.singSwanSong=function(){if(!this._hibernating&&(0<this._outgoingEventQueue.length&&this.enqueueNextBundle(!0),0<this._bundleQueue.length||
this._pendingBundle)){var a=this._bundleQueue.concat();this._pendingBundle&&a.unshift(this._pendingBundle);this._swanSong.sing(this._pageId,a,this._lastBundleTime)}};b.prototype.sendSwanSongBundle=function(a,b,f,d,g,t,l,p,s){a=h(a,b,f,d,g,t,l);this.post(a,g,p,s)};b.prototype.enqueueAndSendBundle=function(){this._pendingBundle?this._pendingBundleFailed&&this._sendPendingBundle():0==this._outgoingEventQueue.length?this.maybeSendNextBundle():this.enqueueNextBundle()};b.prototype.enqueueNextBundle=function(b){void 0===
b&&(b=!1);var e={When:this._outgoingEventQueue[0].When,Seq:this._bundleSeq++,Evts:this._outgoingEventQueue};this._outgoingEventQueue=[];this._bundleQueue.push(e);b?this._poster.sendBeacon(this._protocol,this._bundleHost,this.bundleUrl(e),a.stringify(e)):this.maybeSendNextBundle()};b.prototype.maybeSendNextBundle=function(){this._pageId&&(!this._pendingBundle&&0!=this._bundleQueue.length)&&(this._pendingBundle=this._bundleQueue.shift(),this._sendPendingBundle())};b.prototype._sendPendingBundle=function(){var b=
this,e=this._ctx.wallTime();if(!(e<this._backoffTime)){var f=this._pendingBundle;f&&(this._pendingBundleFailed=!1,this._lastPostTime=this._lastBundleTime=e,this.sendBundle(f,function(e){a.logIfDebug("Sent bundle "+f.Seq+" with "+f.Evts.length+" events");b._pendingBundle=null;b._backoffTime=0;b._backoffRetries=0;b._ctx.wallTime()-b._lastPostTime>a.UploadInterval&&b.maybeSendNextBundle()},function(e){a.logIfDebug("Failed to send events.");a.isErrorFatal(e)?b._onShutdown():(b._pendingBundleFailed=!0,
b._backoffTime=b._lastPostTime+b._poster.exponentialBackoffMs(b._backoffRetries++,!1))}))}};b.prototype.sendBundle=function(a,b,f){this.post(this.bundleUrl(a),a,b,f)};b.prototype.bundleUrl=function(a){return h(this._identity.orgId(),this._identity.userId(),this._identity.sessionId(),this._pageId,a)};b.prototype.post=function(b,e,f,d){var g="";null!=e&&(g=a.stringify(e),this._byteCount+=g.length,a.logIfDebug("total bytes written: "+this._byteCount));this._poster.post(this._protocol,this._bundleHost,
b,g,f,d);this._byteCount>this._largePageSize&&16<this._bundleSeq&&(a.logIfDebug("Splitting large page of size: "+this._byteCount.toString()),a.sendToBugsnag(Error("Large page of "+this._byteCount+" bytes was sent to: "+b),"info"),this._ctx.splitPage(),this._byteCount=0)};return b}();a.HttpEventTransport=g})(m||(m={}));(function(a){var l=function(){function a(){this.dict={idx:-1,map:{}};this.nodeCount=1;this.startIdx=0}a.prototype.encode=function(g){function d(){e?1<k?f.push([e.idx,k]):f.push(e.idx):
f.push(b)}if(0==g.length)return[];var b=g[0],c,e=Object.prototype.hasOwnProperty.call(this.dict.map,b)?this.dict.map[b]:null,f=[],n,k=1;for(c=1;c<g.length;c++)if(n=g[c],e&&Object.prototype.hasOwnProperty.call(e.map,n))k++,b=n,e=e.map[n];else{d();var t=this.startIdx+c-k;null==e&&this.nodeCount<a.MAX_NODES&&(e={idx:t,map:{}},this.dict.map[b]=e,this.nodeCount++);e&&this.nodeCount<a.MAX_NODES&&(e.map[n]={idx:t,map:{}},this.nodeCount++);k=1;b=n;e=Object.prototype.hasOwnProperty.call(this.dict.map,n)?this.dict.map[n]:
null}d();this.startIdx+=g.length;return f};a.MAX_NODES=1E4;return a}();a.LZJGWEncoder=l;l=function(){function a(){this._seq=[]}a.prototype.sequence=function(){return this._seq};a.prototype.decode=function(a){for(var d=this._seq.length,b=0;b<a.length;++b){var c=a[b];switch(typeof c){case "string":this._seq.push(c);break;case "number":this._seq.push(this._seq[c]);break;case "object":if(null==c){this._seq.push("");break}for(var e=0;e<c[1];e++)this._seq.push(this._seq[c[0]+e])}}return d};return a}();
a.LZJGWDecoder=l})(m||(m={}));(function(a){var l=function(){function h(g,d,b,c){void 0===c&&(c=a.RealTimeout);this._ctx=g;this._transport=d;this._identity=b;this._timeoutFactory=c;this._recover()}h.prototype.sing=function(g,d,b){a.logIfDebug("Saving "+d.length+" bundles in swan-song.");g={OrgId:this._identity.orgId(),UserId:this._identity.userId(),SessionId:this._identity.sessionId(),PageId:g,Bundles:d,PageStartTime:this._ctx.startTime(),LastBundleTime:b};g=a.stringify(g);if(!(2E6<g.length))try{localStorage.singSwanSong=
g}catch(c){}};h.prototype._recover=function(){try{if("singSwanSong"in localStorage){var g=localStorage.singSwanSong;delete localStorage.singSwanSong;var d=a.parseJson(g);d.Bundles&&d.UserId&&d.SessionId&&d.PageId?(d.OrgId||(d.OrgId=this._identity.orgId()),0<d.Bundles.length&&(a.logIfDebug("Sending "+d.Bundles.length+" bundles as prior page swan song"),this.sendSwanSongBundles(d.OrgId,d.UserId,d.SessionId,d.PageId,d.PageStartTime,d.Bundles,d.LastBundleTime))):a.logIfDebug("Malformed swan song found. Ignoring it.")}}catch(b){a.logIfDebug("Error recovering swan-song: "+
b)}};h.prototype.sendSwanSongBundles=function(g,d,b,c,e,f,n,k){var h=this;void 0===k&&(k=0);var l=null;a.isArray(f)&&(0!==f.length&&void 0!==f[0])&&(1==f.length&&(l=this._ctx.wallTime()-(n||0)),this._transport.sendSwanSongBundle(g,d,b,c,f[0],e,l,function(k){a.logIfDebug("Sent "+f[0].Evts.length+" trailing events from last session as Seq "+f[0].Seq);f.shift();0<f.length?h.sendSwanSongBundles(g,d,b,c,e,f,n):a.logIfDebug("Done with prior page swan song")},function(l){a.isErrorFatal(l)?a.logIfDebug("Fatal error while sending events, giving up"):
(a.logIfDebug("Failed to send events from last session, will retry while on this page"),h._lastSwanSongRetryTimeout=(new h._timeoutFactory(h.sendSwanSongBundles,a.exponentialBackoffMs(k,!0),h,g,d,b,c,e,f,n,k+1)).start())}))};return h}();a.SwanSong=l})(m||(m={}));(function(a){var l=function(){function g(){this._due=0;this._id=g.nextId++}g.checkForBrokenSchedulers=function(){if(!g.checkOngoing){g.checkOngoing=!0;var d=Date.now();a.forIn(g.registry,function(a){a.maybeForceTick(d)});g.checkOngoing=!1}};
g.prototype.register=function(a){this._due=Date.now()+2*a;g.registry[this._id]=this};g.prototype.unregister=function(){delete g.registry[this._id]};g.prototype.maybeForceTick=function(d){var b=this;d>this._due&&"function"==typeof requestAnimationFrame&&requestAnimationFrame(function(){var c=g.checkOngoing;try{g.checkOngoing=!0,b._tick()}catch(e){a.sendToBugsnag(e,"error")}finally{g.checkOngoing=c}})};g.registry={};g.nextId=0;g.checkOngoing=!1;return g}();a.Scheduler=l;var h=function(g){function d(a){var c=
g.call(this)||this;c._interval=a;c._handle=-1;return c}v(d,g);d.prototype.start=function(b){var c=this;-1==this._handle&&(this._tick=function(){try{b(),c.register(c._interval)}catch(e){a.sendToBugsnag(e,"error")}},this._handle=a.windex.setWindowInterval(window,this._tick,this._interval),this.register(this._interval))};d.prototype.stop=function(){-1!=this._handle&&(a.windex.clearWindowInterval(window,this._handle),this._handle=-1,this._tick=function(){},this.unregister())};return d}(l);a.RealTicker=
h;l=function(g){function d(b,c,e){void 0===c&&(c=0);for(var f=[],d=3;d<arguments.length;d++)f[d-3]=arguments[d];var k=g.call(this)||this;k.delay=c;k.timer=-1;k._tick=function(){try{b.apply(void 0===e?window:e,f)}catch(c){a.sendToBugsnag(c,"error")}try{k.unregister()}catch(d){a.sendToBugsnag(d,"error")}};return k}v(d,g);d.prototype.start=function(b){void 0===b&&(b=this.delay);this.delay=b;a.windex.clearWindowTimeout(window,this.timer);this.timer=a.windex.setWindowTimeout(window,this._tick,this.delay);
this.register(b);return this};d.prototype.cancel=function(){a.windex.clearWindowTimeout(window,this.timer);this.timer=-1;this.unregister()};return d}(l);a.RealTimeout=l;l=function(){function a(d,b,c){this.limit=d;this.breaker=c;this.remaining=0;this.ticker=new h(b);this.open()}a.prototype.guard=function(a){var b=this;return function(){if(0==b.remaining)b.breaker(),b.remaining--;else if(!(0>b.remaining))return b.remaining--,a.apply(this,arguments)}};a.prototype.close=function(){this.ticker.stop();
return this};a.prototype.open=function(){var a=this;this.remaining=this.limit;this.ticker.start(function(){a.remaining=a.limit});return this};return a}();a.Throttle=l})(m||(m={}));(function(a){var l=function(){function h(g,d,b,c){void 0===b&&(b=function(){return[]});void 0===c&&(c=a.RealTicker);this._ctx=g;this._transport=d;this._gatherExternalEvents=b;this._tickerFactory=c;this._recordingDisabled=!1;this._lastWhen=-1;this._gotUnload=!1;this._eventQueue=[];this._sampleCurvesTicker=new this._tickerFactory(a.CurveSamplingInterval);
this._processMutationsTicker=new this._tickerFactory(a.MutationProcessingInterval);this._processor=new a.EventProcessor(g)}h.prototype.startPipeline=function(a,d,b){var c=this;void 0===d&&(d=0);void 0===b&&(b=[]);this._recordingDisabled||this._pipelineStarted||(this._pipelineStarted=!0,this._frameId=d,this._parentIds=b,this.processEvents(),this._processMutationsTicker.start(function(){c.processEvents()}),this._sampleCurvesTicker.start(function(){c.processEvents(!0)}),this._transport.startPipeline(a))};
h.prototype.enqueue=function(g,d){this.enqueueAt(this._ctx.now(),g,d);a.Scheduler.checkForBrokenSchedulers()};h.prototype.enqueueAt=function(a,d,b){this._recordingDisabled||(a<=this._lastWhen&&(a=this._lastWhen+1),this._lastWhen=a,this._eventQueue.push({When:a,Kind:d,Args:b}))};h.prototype.enqueueFirst=function(a,d){0<this._eventQueue.length?this._eventQueue.unshift({When:this._eventQueue[0].When,Kind:a,Args:d}):this.enqueue(a,d)};h.prototype.addUnload=function(g){this._gotUnload||(this._gotUnload=
!0,this.enqueue(a.EVENT_UNLOAD,[g]),this.singSwanSong())};h.prototype.shutdown=function(){this._flush();this.addUnload("shutdown");this._flush();this._recordingDisabled=!0;this.stopPipeline()};h.prototype._flush=function(){this.processEvents();this._transport.flush()};h.prototype.prequeue=function(a,d){this._recordingDisabled||this._eventQueue.unshift({When:0,Kind:a,Args:d})};h.prototype.appendToQueue=function(a){this._eventQueue=this._eventQueue.concat(a)};h.prototype.singSwanSong=function(){this._recordingDisabled||
(this.processEvents(),this._transport.singSwanSong())};h.prototype.rebaseIframe=function(a){for(var d=0,b=this._eventQueue.length;d<b;d++){var c=this._eventQueue[d],e=c.When+this._ctx.startTime()-a;0>e&&(e=0);c.When=e}};h.prototype.processEvents=function(a){if(this._pipelineStarted){var d=this._eventQueue;this._eventQueue=[];d=this._processor.processQueue(d);a||(d=d.concat(this._gatherExternalEvents(0!=d.length)));this.ensureFrameIds(d);0!=d.length&&this._transport.enqueueEvents(d)}};h.prototype.ensureFrameIds=
function(a){if(this._frameId)for(var d=this._parentIds,b=d&&0<d.length,c=0;c<a.length;++c){var e=a[c];e.FId||(e.FId=this._frameId);b&&!e.PIds&&(e.PIds=d)}};h.prototype.stopPipeline=function(){this._pipelineStarted&&(this._sampleCurvesTicker.stop(),this._processMutationsTicker.stop(),this._eventQueue=[],this._transport.stopPipeline())};return h}();a.EventQueue=l})(m||(m={}));(function(a){function l(b,c){try{var d={tokens:[],opath:[],cyclic:h(b,c/4)};g(b,c,0,d);return d.tokens.join("")}catch(k){return a.jsonErrorString(k)}}
function h(b,c){var d=0;try{a.windex.JSON.stringify(b,function(a,b){if(d++>c)throw"break";return"object"!=typeof b?void 0:b})}catch(k){if("break"!=k)return!0}return!1}function g(b,f,n,k){if(1>f)return 0;var h;b&&b.constructor==Date?h=isNaN(b)?"Invalid Date":b.toUTCString():(h="object"===typeof Node?b instanceof Node:b&&"object"===typeof b&&0<b.nodeType&&"string"===typeof b.nodeName,h=h?d(b):void 0===b?"undefined":"object"!=typeof b||null==b?b:b instanceof Error?b.stack||b.name+": "+b.message:void 0);
if(void 0!==h){h=a.windex.JSON.stringify(h);if(void 0===h)return 0;'"'==h[0]&&(h=c(h,f,'..."'));return h.length<=f?(k.tokens.push(h),h.length):0}if(k.cyclic){k.opath.splice(n);h=k.opath.lastIndexOf(b);if(-1<h)return b='"'+c("<Cycle to ancestor #"+(n-h-1)+">",f-2)+'"',k.tokens.push(b),b.length;k.opath.push(b)}var l=f,p=function(a){return l>=a.length?(l-=a.length,k.tokens.push(a),!0):!1};h=function(a){","==k.tokens[k.tokens.length-1]?k.tokens[k.tokens.length-1]=a:p(a)};if(2>l)return 0;if(a.isArray(b)){p("[");
for(var s=0;s<b.length&&0<l;s++){var m=g(b[s],l-1,n+1,k),l=l-m;if(0==m&&!p("null"))break;p(",")}h("]")}else{p("{");for(var q=a.keys(b),s=0;s<q.length&&0<l;s++){var m=q[s],r=b[m];if(!p('"'+m+'":'))break;m=g(r,l-1,n+1,k);if(0==m){k.tokens.pop();break}l-=m;p(",")}h("}")}return Infinity==f?1:f-l}function d(b){if(!a.fsid(b)||a.watchKind(b)==a.WatchKindBlocked)return b.toString();if(b.tagName){var c=a.tagName(b);return"<"+c+(b.attributes&&b.attributes.type?' type="'+b.attributes.type.value+'"':"")+(b.id?
' id="'+b.id+'"':"")+(b.className?' class="'+b.className+'"':"")+">"+(b.firstChild?"...":"")+"</"+c+">"}c="";b.data&&b.data.substring&&(c=" "+b.data.substring(0,50)+(50<b.data.length?"...":""));return b.nodeName+c}var b=function(){function b(a,c,e){this._queue=a;this._wnd=c;this._overflow=this._enabled=!1;this._total=0;this._hooks=[];this._listeners=e.createChild()}b.prototype.enable=function(){var b=this;this._listeners.add(this._wnd,"error",!0,function(a){return b.addError(a)});this._listeners.add(this._wnd,
"unhandledrejection",!0,function(a){b.addLog("error",["Uncaught (in promise)",a.reason])});if(!this._enabled)if(this._enabled=!0,this._wnd.console)for(var c=function(c){var d=a.activateHook(e._wnd.console,c);if(!d)return"continue";d.before(function(a){return b.addLog(c,a.args)});e._hooks.push(d)},e=this,d=0,g=["log","info","warn","error"];d<g.length;d++)c(g[d]);else this.addLog("log",["NOTE: Log messages cannot be captured on IE9"])};b.prototype.disable=function(){this._listeners.clear();if(this._enabled){this._enabled=
!1;for(var a;a=this._hooks.pop();)a.disable()}};b.prototype.addLog=function(b,c){if(this.checkOverflow()){for(var e=[b],d=0;d<c.length;++d)e.push(l(c[d],1E3));this._queue.enqueue(a.EVENT_LOG,e)}};b.prototype.addError=function(b){if(this.checkOverflow()){var c=b.message,e=b.filename;b=b.lineno;if(c||e||b)"object"==typeof c&&(c=l(c,1E3)),"object"==typeof e&&(e=l(e,100)),"object"==typeof b&&(b=-1),this._queue.enqueue(a.EVENT_ERROR,[c,e,b])}};b.prototype.checkOverflow=function(){if(this._overflow)return!1;
if(this._total==a.MAX_LOGS_PER_PAGE)return this._queue.enqueue(a.EVENT_LOG,["warn",b.OVERFLOW_MSG]),this._overflow=!0,!1;this._total++;return!0};b.OVERFLOW_MSG='"[received more than '+a.MAX_LOGS_PER_PAGE+' messages; no longer recording console]"';return b}();a.ConsoleWatcher=b;a.stringifyLogMessage=l;var c=function(a,b,c){void 0===c&&(c="...");return a.length<=b?a:a.length<=c.length||b<=c.length?a.substring(0,b):a.substring(0,b-c.length)+c}})(m||(m={}));(function(a){function l(c,e){var f=Object.getOwnPropertyDescriptor(c.prototype,
e);f&&Object.defineProperty(c.prototype,e,{set:function(c){var e=this,d=a.fsid(e);d&&(b&&b.values[d]!=c)&&(new a.RealTimeout(function(){if(b)b.onChange(e,c)})).start();return f.set.call(this,c)},get:function(){return f.get&&f.get.call(this)}})}function h(a){switch(a.type){case "checkbox":case "radio":return""+a.checked;default:return(a=a.value)||(a=""),""+a}}var g=function(){function c(a,c){this._onchange=a;this._checkElem=c;this._fallback=!1;this._elems={};this.values={};b=this}c.prototype.hookEvents=
function(){var a;(a=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"))&&a.set?(d||(l(HTMLInputElement,"value"),l(HTMLInputElement,"checked"),l(HTMLSelectElement,"value"),l(HTMLTextAreaElement,"value"),d=!0),a=!0):a=!1;a||(this._fallback=!0)};c.prototype.addInput=function(b){var c=a.fsid(b);this._elems[c]=b;this.values[c]=h(b);a:switch(b.type){case "checkbox":case "radio":c=b.checked!=b.hasAttribute("checked");break a;default:var c=b.value||"",d=b.getAttribute("value")||"",c=c!=d}c&&
this._onchange(b)};c.prototype.onChange=function(b,c){void 0===c&&(c=h(b));var d=a.fsid(b);(b=this._elems[d])&&c!=this.values[d]&&(this._onchange(b),this.values[d]=c)};c.prototype.tick=function(){for(var a in this._elems)if(!this._checkElem(this._elems[a]))delete this._elems[a],delete this.values[a];else if(this._fallback){var b=this._elems[a],c=h(b);c!=this.values[a]&&(this._onchange(b),this.values[a]=c)}};c.prototype.shutdown=function(){b=null};c.prototype._usingFallback=function(){return this._fallback};
c.prototype._trackingElem=function(a){return!!this._elems[a]};return c}();a.InputWatcher=g;var d=!1,b;a.valueOfInputishElem=h})(m||(m={}));(function(a){function l(a){return"_fswatch"in a}function h(a){return a._fswatch}function g(a,b){a._fswatch=b}function d(b,c){if(l(b.node))for(var e=b,d=b.parent;d;d=d.parent){d.watchedChildSet||(d.watchedChildSet={});if(e.watchedChildSet)for(var f in e.watchedChildSet)delete d.watchedChildSet[f];d.watchedChildSet[e.id]=e;if(a.hasNKeys(d.watchedChildSet,2))e=d;
else if(a.hasMoreThanNKeys(d.watchedChildSet,2))break}}function b(b){return b?a._mirrors[b._fs]:null}function c(a){return a&&a._fs||0}function e(a,b,c){f(b);b.parent=a;if(b.next=c)b.prev=c.prev,c.prev=b;null==b.next?(b.prev=a.lastChild,a.lastChild=b):b.next.prev=b;null==b.prev?a.child=b:b.prev.next=b}function f(b){if(b.parent){if(a.hasMoreThanNKeys(b.watchedChildSet,0)||l(b.node))for(var c=b.watchedChildSet&&a.hasMoreThanNKeys(b.watchedChildSet,1)||l(b.node)?b.id:a.firstKey(b.watchedChildSet),e=c?
b.parent:null;e&&e.watchedChildSet&&e.watchedChildSet[c];){delete e.watchedChildSet[c];if(a.hasNKeys(e.watchedChildSet,1)){for(var c=e.id,d=a.firstValue(e.watchedChildSet),e=e.parent;e&&e.watchedChildSet&&e.watchedChildSet[c];)delete e.watchedChildSet[c],e.watchedChildSet[d.id]=d,e=e.parent;break}e=e.parent}b.parent.child==b&&(b.parent.child=b.next);b.parent.lastChild==b&&(b.parent.lastChild=b.prev);b.prev&&(b.prev.next=b.next);b.next&&(b.next.prev=b.prev);b.parent=b.prev=b.next=null;delete a._mirrors[b.id];
b.node._fs==b.id&&(b.node._fs=0);b.id=0;b.child&&n(b.child)}}function n(b){for(b=[b];0<b.length&&1E4>b.length;){var c=b.pop();delete a._mirrors[c.id];c.node._fs==c.id&&(c.node._fs=0);c.id=0;c.next&&b.push(c.next);c.child&&b.push(c.child)}a.assert(1E4>b.length,"clearIds is fast")}function k(a,b){if(a.attributes&&0<a.attributes.length)for(var c=0;c<a.attributes.length;c++){var e=a.attributes[c];b(m(e.name),e.value)}}function t(a,b,c){if("class"==b&&0>c.indexOf("_fs_block_"))c+=" _fs_block_"+h(a);else if("value"==
b||"checked"==b||"src"==b||"data"==b||"alt"==b)return null;return c}function m(a){return/[a-z]/.test(a)?a:u[a]||a.toLowerCase()}function p(b){b=b.textContent;if(!b)return"";var c=b.length;return c>a.MaxTextSizeBytes?(a.sendToBugsnag("Ignoring huge text node with length ["+c+"]","warning"),""):b}a.MaxTextSizeBytes=16E6;a.isWatched=l;a.watchKind=h;a.setWatched=g;a._mirrors={};a.mirrorFor=b;a.fsid=c;a.fsidIfNotBlocked=function(b){return h(b)!=a.WatchKindBlocked?c(b):0};a.removeMirror=f;a.clearIds=n;
var s=function(){function c(a){this._watcher=a;this._curId=1}c.prototype.curId=function(){return this._curId};c.prototype.tokenizeNode=function(a,c,e,d,f){var g=this._curId;try{var n=b(a),k=b(c);a=[];this.tokeNode(n,k,e,a,d,f);return a}catch(h){return this._curId=g,[]}};c.prototype.tokeNode=function(b,c,f,g,n,h){if("SCRIPT"==f.nodeName||f.nodeType==a.Node_COMMENT_NODE)return null;var l={id:this._curId++,node:f};a._mirrors[l.id]=l;f._fs=l.id;b&&e(b,l,c);if(f.nodeType==a.Node_DOCUMENT_TYPE_NODE)return g.push("<!DOCTYPE",
":name",f.name,":publicId",f.publicId||"",":systemId",f.systemId||""),l;b=f.nodeName;"http://www.w3.org/2000/svg"==f.namespaceURI&&(b="svg:"+b);g.push("<"+b);try{var t=this.processWatchedElem(f,g);if(t&&(d(l,t),t!=a.WatchKindWatch))return l;if(n)try{n(f)}catch(m){a.sendToBugsnag(m,"error")}k(f,function(b,c){g.push(":"+b);g.push(c);if(h)try{h(f,b,c)}catch(e){a.sendToBugsnag(e,"error")}});if(f.firstChild){g.push("[");var s;for(s=f.firstChild;s;s=s.nextSibling)this.tokeNode(l,null,s,g,n,h);g.push("]")}f.nodeType==
a.Node_TEXT_NODE&&g.push(p(f))}catch(D){a.sendToBugsnag(D,"error")}return l};c.prototype.processWatchedElem=function(b,c){if(b.nodeType==a.Node_ELEMENT_NODE&&this._watcher){var e=this._watcher.isWatched(b);if(e){g(b,e);if(e!=a.WatchKindWatch){var d,f=!1;k(b,function(a,e){var g=t(b,a,e);"class"==a?d=!0:"style"==a&&(f=!0);null!=g&&(c.push(":"+a),c.push(g))});d||(c.push(":class"),c.push("_fs_block_"+e));f||(c.push(":style"),c.push(this._watcher.mungeWatchedStyle(b,"")))}return e}}return null};return c}();
a.NodeEncoder=s;a.rewriteBlockedAttribute=t;var u={ATTRIBUTENAME:"attributeName",ATTRIBUTETYPE:"attributeType",BASEFREQUENCY:"baseFrequency",BASEPROFILE:"baseProfile",CALCMODE:"calcMode",CLIPPATHUNITS:"clipPathUnits",CONTENTSCRIPTTYPE:"contentScriptType",CONTENTSTYLETYPE:"contentStyleType",DIFFUSECONSTANT:"diffuseConstant",EDGEMODE:"edgeMode",EXTERNALRESOURCESREQUIRED:"externalResourcesRequired",FILTERRES:"filterRes",FILTERUNITS:"filterUnits",GLYPHREF:"glyphRef",GRADIENTTRANSFORM:"gradientTransform",
GRADIENTUNITS:"gradientUnits",KERNELMATRIX:"kernelMatrix",KERNELUNITLENGTH:"kernelUnitLength",KEYPOINTS:"keyPoints",KEYSPLINES:"keySplines",KEYTIMES:"keyTimes",LENGTHADJUST:"lengthAdjust",LIMITINGCONEANGLE:"limitingConeAngle",MARKERHEIGHT:"markerHeight",MARKERUNITS:"markerUnits",MARKERWIDTH:"markerWidth",MASKCONTENTUNITS:"maskContentUnits",MASKUNITS:"maskUnits",NUMOCTAVES:"numOctaves",PATHLENGTH:"pathLength",PATTERNCONTENTUNITS:"patternContentUnits",PATTERNTRANSFORM:"patternTransform",PATTERNUNITS:"patternUnits",
POINTSATX:"pointsAtX",POINTSATY:"pointsAtY",POINTSATZ:"pointsAtZ",PRESERVEALPHA:"preserveAlpha",PRESERVEASPECTRATIO:"preserveAspectRatio",PRIMITIVEUNITS:"primitiveUnits",REFX:"refX",REFY:"refY",REPEATCOUNT:"repeatCount",REPEATDUR:"repeatDur",REQUIREDEXTENSIONS:"requiredExtensions",REQUIREDFEATURES:"requiredFeatures",SPECULARCONSTANT:"specularConstant",SPECULAREXPONENT:"specularExponent",SPREADMETHOD:"spreadMethod",STARTOFFSET:"startOffset",STDDEVIATION:"stdDeviation",STITCHTILES:"stitchTiles",SURFACESCALE:"surfaceScale",
SYSTEMLANGUAGE:"systemLanguage",TABLEVALUES:"tableValues",TARGETX:"targetX",TARGETY:"targetY",TEXTLENGTH:"textLength",VIEWBOX:"viewBox",VIEWTARGET:"viewTarget",XCHANNELSELECTOR:"xChannelSelector",YCHANNELSELECTOR:"yChannelSelector",ZOOMANDPAN:"zoomAndPan"};a.fixAttrName=m;a.safeTextContent=p})(m||(m={}));(function(a){function l(){p=!1;var a=s;s=[];a.sort(function(a,b){return a.uid_-b.uid_});var b=!1;a.forEach(function(a){var c=a.takeRecords();h(a);c.length&&(a.callback_(c,a),b=!0)});b&&l()}function h(a){a.nodes_.forEach(function(b){(b=
n.get(b))&&b.forEach(function(b){b.observer===a&&b.removeTransientObservers()})})}function g(a,b){for(var c=a;c;c=c.parentNode){var e=n.get(c);if(e)for(var d=0;d<e.length;d++){var f=e[d],g=f.options;(c===a||g.subtree)&&(g=b(g))&&f.enqueue(g)}}}function d(a){this.callback_=a;this.nodes_=[];this.records_=[];this.uid_=++u}function b(a){if(w)return w;var b=r,c=new q(b.type,b.target);c.addedNodes=b.addedNodes.slice();c.removedNodes=b.removedNodes.slice();c.previousSibling=b.previousSibling;c.nextSibling=
b.nextSibling;c.attributeName=b.attributeName;c.attributeNamespace=b.attributeNamespace;c.oldValue=b.oldValue;w=c;w.oldValue=a;return w}function c(a,b,c){var e=this;this.observer=a;this.target=b;this.options=c;this.transientObservedNodes=[];this.handleEventBound=function(a){return e.handleEvent_(a)}}a.MutationObserver=a.uaIsIE?d:window.MutationObserver||window.WebKitMutationObserver||d;var e=Object.defineProperty,f=Date.now()%1E9,n=new (window.WeakMap||function(){var a=function(){this.name="__st"+
(1E9*Math.random()>>>0)+(f++ +"__")};a.prototype={set:function(a,b){var c=a[this.name];c&&c[0]===a?c[1]=b:e(a,this.name,{value:[a,b],writable:!0})},get:function(a){var b;return(b=a[this.name])&&b[0]===a?b[1]:void 0}};return a}()),k=window.setImmediate||window.msSetImmediate;if(!k){var t=[],m=String(Math.random());window.addEventListener("message",function(a){a.data===m&&(a=t,t=[],a.forEach(function(a){a()}))});k=function(a){for(var b=1;b<arguments.length;b++);t.push(a);window.postMessage(m,"*");return 0}}var p=
!1,s=[],u=0;d.prototype={observe:function(a,b){a=window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(a)||a;if(!b.childList&&!b.attributes&&!b.characterData||b.attributeOldValue&&!b.attributes||b.attributeFilter&&b.attributeFilter.length&&!b.attributes||b.characterDataOldValue&&!b.characterData)throw new SyntaxError;var e=n.get(a);e||n.set(a,e=[]);for(var d,f=0;f<e.length;f++)if(e[f].observer===this){d=e[f];d.removeListeners();d.options=b;break}d||(d=new c(this,a,b),e.push(d),this.nodes_.push(a));
d.addListeners()},disconnect:function(){this.nodes_.forEach(function(a){a=n.get(a);for(var b=0;b<a.length;b++){var c=a[b];if(c.observer===this){c.removeListeners();a.splice(b,1);break}}},this);this.records_=[]},takeRecords:function(){var a=this.records_;this.records_=[];return a}};var q=function(){return function(a,b){this.type=a;this.target=b;this.addedNodes=[];this.removedNodes=[];this.oldValue=this.attributeNamespace=this.attributeName=this.nextSibling=this.previousSibling=null}}(),r,w;c.prototype=
{enqueue:function(a){var b=this.observer.records_,c=b.length;if(0<b.length){var e=b[c-1];e=e===a?e:!w||e!==w&&e!==r?null:w;if(e){b[c-1]=e;return}}else s.push(this.observer),p||(p=!0,k(l));b[c]=a},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(a){var b=this.options;b.attributes&&a.addEventListener("DOMAttrModified",this.handleEventBound,!0);b.characterData&&a.addEventListener("DOMCharacterDataModified",this.handleEventBound,!0);b.childList&&a.addEventListener("DOMNodeInserted",
this.handleEventBound,!0);(b.childList||b.subtree)&&a.addEventListener("DOMNodeRemoved",this.handleEventBound,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(a){var b=this.options;b.attributes&&a.removeEventListener("DOMAttrModified",this.handleEventBound,!0);b.characterData&&a.removeEventListener("DOMCharacterDataModified",this.handleEventBound,!0);b.childList&&a.removeEventListener("DOMNodeInserted",this.handleEventBound,!0);(b.childList||b.subtree)&&
a.removeEventListener("DOMNodeRemoved",this.handleEventBound,!0)},addTransientObserver:function(a){if(a!==this.target){this.addListeners_(a);this.transientObservedNodes.push(a);var b=n.get(a);b||n.set(a,b=[]);b.push(this)}},removeTransientObservers:function(){var a=this.transientObservedNodes;this.transientObservedNodes=[];a.forEach(function(a){this.removeListeners_(a);a=n.get(a);for(var b=0;b<a.length;b++)if(a[b]===this){a.splice(b,1);break}},this)},handleEvent_:function(a){switch(a.type){case "DOMAttrModified":var c=
a.attrName,e=a.relatedNode.namespaceURI,d=a.target,f=r=new q("attributes",d);f.attributeName=c;f.attributeNamespace=e;var n=a.attrChange===MutationEvent.ADDITION?null:a.prevValue;g(d,function(a){if(a.attributes&&(!a.attributeFilter||!a.attributeFilter.length||-1!==a.attributeFilter.indexOf(c)||-1!==a.attributeFilter.indexOf(e)))return a.attributeOldValue?b(n):f});break;case "DOMCharacterDataModified":d=a.target;f=r=new q("characterData",d);n=a.prevValue;g(d,function(a){if(a.characterData)return a.characterDataOldValue?
b(n):f});break;case "DOMNodeRemoved":this.addTransientObserver(a.target);case "DOMNodeInserted":var d=a.relatedNode,k=a.target,h;"DOMNodeInserted"===a.type?(a=[k],h=[]):(a=[],h=[k]);var l=k.previousSibling,k=k.nextSibling,f=r=new q("childList",d);f.addedNodes=a;f.removedNodes=h;f.previousSibling=l;f.nextSibling=k;g(d,function(a){if(a.childList)return f})}r=w=void 0}}})(m||(m={}));(function(a){var l=function(){function h(g,d,b,c,e){void 0===b&&(b=function(){});void 0===c&&(c=function(){});void 0===
e&&(e=function(){});this._ctx=g;this._watcher=d;this._nodeVisitor=b;this._beforeRemove=c;this._attrVisitor=e;this._sentDomSnapshot=!1;this._records=[];this._watchedDims={};this._wnd=g.getWindow();this._encoder=new a.NodeEncoder(d)}h.prototype.hookMutations=function(g){var d=this;void 0===g&&(g=this._wnd.document);this._root=g;this._sentDomSnapshot=!1;this._lz=new a.LZJGWEncoder;this._observer=new a.MutationObserver(function(a){d._records=d._records.concat(a)});this._observer.observe(g,{childList:!0,
attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0})};h.prototype.shutdown=function(){this._observer&&this._observer.disconnect();var g=a.mirrorFor(this._root);g&&a.clearIds(g);this._records=[]};h.prototype.processMutations=function(){if(!this._root)return[];var g=this._ctx.now(),d=[];this._sentDomSnapshot||(this.genInsert(g,d,null,this._root,null),this.resizeRelatedWatchedElements(g,d,this._root),this._sentDomSnapshot=!0);if(0==this._records.length)return d;var b=
{},c={};this.processRecords(g,d,c,b);for(var e in c){var f=e.split(":");d.push({Kind:a.EVENT_MUT_ATTR,When:g,Args:[parseInt(f[0]),f[1],c[e]]})}for(e in b)d.push({Kind:a.EVENT_MUT_TEXT,When:g,Args:[parseInt(e),b[e]]});this._records=[];return d};h.prototype.processRecords=function(g,d,b,c){for(var e={},f={},n=0;n<this._records.length;++n)try{var k=this._records[n],h=a.fsid(k.target);if(h)switch(e[h]=k.target,k.type){case "childList":if(0<k.removedNodes.length)for(var l=0;l<k.removedNodes.length;++l){var p=
a.mirrorFor(k.removedNodes[l]);p&&p.id&&p.parent==a.mirrorFor(k.target)&&p.next==a.mirrorFor(k.nextSibling)&&this.genRemove(g,d,p)}h&&(f[h]=k.target);break;case "characterData":var m=a.safeTextContent(k.target);k.oldValue!=m&&(a.isWatched(k.target)||(c[h]=m));break;case "attributes":var u=k.target;if(this._watcher.isWatched(u)==a.WatchKindBlocked&&a.watchKind(u)!=a.WatchKindBlocked){this.genRemove(g,d,a.mirrorFor(u));var q=a.mirrorFor(u.parentNode);q&&(f[q.id]=q.node);break}var r=k.attributeName||
"",w=a.fixAttrName(r);if(u.hasAttribute(r)){var x=k.target.getAttribute(r);k.oldValue!=x&&(x=this.rewriteAttr(k.target,w,x||""),this._attrVisitor(k.target,w,x||""),null!==x&&(b[h+":"+w]=x))}else b[h+":"+w]=null}}catch(M){}for(var v in f)b=f[v],(c=a.mirrorFor(b))&&c.id&&this.diff(g,d,b,c.child,b.firstChild);for(v in e)b=e[v],this.resizeRelatedWatchedElements(g,d,b)};h.prototype.diff=function(g,d,b,c,e){for(var f=[];c&&e;){var n=a.mirrorFor(e);a.fsid(e)?n&&c.id==n.id?(c=c.next,e=e.nextSibling):(f.push({remove:c}),
c=c.next):(f.push({insert:[b,e,c.node]}),e=e.nextSibling)}for(;c;c=c.next)f.push({remove:c});for(;e;e=e.nextSibling)f.push({insert:[b,e,null]});for(b=0;b<f.length;b++)c=f[b],c.insert?this.genInsert(g,d,c.insert[0],c.insert[1],c.insert[2]):c.remove&&this.genRemove(g,d,c.remove)};h.prototype.resizeRelatedWatchedElements=function(g,d,b){var c=a.mirrorFor(b);if(c)for(var e=[c],c=0;e.length&&1E3>++c;){var f=e.pop();b=a.watchKind(f.node);null!=b?this.addPlaceholderResize(g,d,f.node,b):f.watchedChildSet&&
a.forIn(f.watchedChildSet,function(a){e.push(a)})}else{for(c=b;c&&!a.fsid(c);)c=c.parentNode;c&&(b=a.watchKind(c),null!=b&&this.addPlaceholderResize(g,d,c,b))}};h.prototype.addPlaceholderResize=function(g,d,b,c){try{var e=b.getBoundingClientRect(),f=Math.floor(e.width),n=Math.floor(e.height),k=a.fsid(b),h=this._watchedDims[k];h&&h.w==f&&h.h==n||(c==a.WatchKindWatch?(b=0!=f&&0!=n,(!!h&&0!=h.w&&0!=h.h)!=b&&d.push({When:g,Kind:a.EVENT_WATCHED_ELEM,Args:[k,b]})):d.push({When:g,Kind:a.EVENT_PLACEHOLDER_SIZE,
Args:[k,f,n]}),this._watchedDims[k]={w:f,h:n})}catch(l){}};h.prototype.genInsert=function(g,d,b,c,e){var f=this;if(b&&a.isWatched(b))return null;var n=a.fsid(b)||-1,k=a.fsid(e)||-1,h=[];b=this._encoder.tokenizeNode(b,e,c,function(a){f._nodeVisitor(g,a,h)},function(a,b,c){f._attrVisitor(a,b,c)});0<b.length&&d.push({When:g,Kind:a.EVENT_MUT_INSERT,Args:[n,k,this._lz.encode(b)]});for(d=0;d<h.length;d++)(0,h[d])()};h.prototype.genRemove=function(g,d,b){var c=b.id;this._beforeRemove(b);a.removeMirror(b);
if(0<d.length&&(b=d[d.length-1],b.Kind==a.EVENT_MUT_REMOVE)){b.Args.push(c);return}d.push({When:g,Kind:a.EVENT_MUT_REMOVE,Args:[c]})};h.prototype.rewriteAttr=function(g,d,b){return a.isWatched(g)?a.rewriteBlockedAttribute(g,d,b):b};return h}();a.MutationWatcher=l})(m||(m={}));(function(a){function l(a){a=String(a);for(var b,f,n=0,k=g,h=[];a.charAt(n|0)||(k="=",n%1);h.push(k.charAt(63&b>>8-8*(n%1)))){f=a.charCodeAt(n+=0.75);if(255<f)throw new d("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");
b=b<<8|f}return h.join("")}var h=function(){function a(){this.reset()}a.prototype.reset=function(){this.hash=[2166136261,2166136261,2166136261,2166136261]};a.prototype.write=function(a){for(var b=0;b<a.length;b++){var c=b%4;this.hash[c]^=a[b];this.hash[c]+=(this.hash[c]<<1)+(this.hash[c]<<4)+(this.hash[c]<<7)+(this.hash[c]<<8)+(this.hash[c]<<24)}};a.prototype.writeAscii=function(a){for(var b=0;b<a.length;b++){var c=b%4;this.hash[c]^=a.charCodeAt(b);this.hash[c]+=(this.hash[c]<<1)+(this.hash[c]<<4)+
(this.hash[c]<<7)+(this.hash[c]<<8)+(this.hash[c]<<24)}};a.prototype.sum=function(){var a=("00000000"+(this.hash[0]>>>0).toString(16)).slice(-8)+("00000000"+(this.hash[1]>>>0).toString(16)).slice(-8)+("00000000"+(this.hash[2]>>>0).toString(16)).slice(-8)+("00000000"+(this.hash[3]>>>0).toString(16)).slice(-8);return b(String.fromCharCode.apply(null,a.replace(/\r|\n/g,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")))};return a}();a._FSNV=h;a.hashNonBlocking=function(b,e,d){void 0===
d&&(d=new h);return z(this,void 0,void 0,function(){var g,k,h,l;return A(this,function(p){switch(p.label){case 0:g=b.now(),k=e.byteLength,h=0,p.label=1;case 1:return h<k?50<b.now()-g?[4,a.wait(75)]:[3,3]:[3,5];case 2:p.sent(),g=b.now(),p.label=3;case 3:l=new Uint8Array(e,h,Math.min(k,e.byteLength-h)),d.write(l),p.label=4;case 4:return h+=5096,[3,1];case 5:return[2,{hash:d.sum(),hasher:d}]}})})};var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d=function(a){function b(){return null!==
a&&a.apply(this,arguments)||this}v(b,a);return b}(Error),b=window.btoa||l;a._jsbtoa=l})(m||(m={}));(function(a){function l(b,c){var e,d=new a.Promise(function(a){return e=a});if(!a.assert(a.prefix(b,"blob:"),'Blob url must start with "blob:"'))return e(null),d;var n=new XMLHttpRequest;if("string"!=typeof n.responseType)return e(null),d;n.open("GET",b);n.responseType=c;n.onerror=function(){e(null)};n.onload=function(){if(200!=n.status)a.logIfDebug("Error loading blob resource "+b),e(null);else{var c=
n.response;(c.size||c.length)>g?(a.sendToBugsnag("Size of blob resource "+b+" exceeds limit of "+g,"warning"),e(null)):"string"==typeof c?e({data:c,contentType:n.getResponseHeader("Content-Type")}):h(c).then(function(a){a?e({data:a,blob:c,contentType:c.type}):e(null)})}};n.send();return d}function h(b){var c,e=new a.Promise(function(a){return c=a}),d=new FileReader;d.readAsArrayBuffer(b);d.onload=function(){c(d.result)};d.onerror=function(b){a.sendToBugsnag(b,"error");c(null)};return e}var g=1E6,
d=function(){function b(b,d,f,g,k){void 0===f&&(f=new a.XHRPoster);void 0===g&&(g=window.FormData);void 0===k&&(k=a.RealTimeout);this.ctx=b;this.queue=d;this.poster=f;this.FormDataCtr=g;this.Timeout=k;this.started={};this.byUrl={};this.batchReady=!1;this.existsBatch=[];this.host=a.gceHost(this.ctx.getHost())}b.prototype.init=function(){this.FormDataCtr&&this.main().catch(function(b){a.sendToBugsnag(b,"error")})};b.prototype.main=function(){return z(this,void 0,void 0,function(){var b,d,f,g,k,h,l,
p,m,u,q,r,w,x,v,z,C,F,J,E;return A(this,function(y){switch(y.label){case 0:return[4,this.getBatch()];case 1:b=y.sent();d=a.stringify(a.map(b,function(a){return a.hash}));f={};for(g=0;g<b.length;g++)k=b[g],f[k.hash]=k;h=this.ctx.getOrgId();l="/rec/newResources?OrgId="+h;y.label=2;case 2:return y.trys.push([2,4,,5]),[4,this.poster.postPromise(this.ctx.getProtocol(),this.host,l,d)];case 3:return p=y.sent(),[3,5];case 4:return m=y.sent(),a.logIfDebug("/rec/newResources failed with status "+m),[3,0];case 5:try{u=
JSON.parse(p)}catch(A){return a.sendToBugsnag("Error parsing /rec/newResources response","error"),[3,0]}q=0;r=u;y.label=6;case 6:if(!(q<r.length))return[3,11];w=r[q];x=f[w];v=x.url;z=x.children;C=x.contentType;F=x.blob||x.stringData;J=x.blob||new Blob([x.stringData],{type:C});if(null==F)return a.sendToBugsnag("Tried to re-upload a resource","error"),[3,10];E=new this.FormDataCtr;E.append("orgId",h);E.append("baseUrl",v);E.append("fsnvHash",w);E.append("childHashes",a.stringify(z));E.append("contents",
J,"blob");x.blob=x.stringData=null;y.label=7;case 7:return y.trys.push([7,9,,10]),[4,this.poster.postPromise(this.ctx.getProtocol(),this.host,"/rec/uploadResource",E)];case 8:return y.sent(),[3,10];case 9:return y.sent(),a.logIfDebug("Server error uploading resource"),[3,10];case 10:return q++,[3,6];case 11:return[3,0];case 12:return[2]}})})};b.prototype.getBatch=function(){var b=this,d,f=new a.Promise(function(a){return d=a}),g=function(){b.popBatch=null;b.batchReady=!1;var a=b.existsBatch;b.existsBatch=
[];d(a)};this.batchReady?g():this.popBatch=g;return f};b.prototype.uploadBlob=function(b,d){void 0===d&&(d=!1);return z(this,void 0,void 0,function(){var f=this,g,k,h,l,p,m,u;return A(this,function(q){switch(q.label){case 0:if(0!=b.lastIndexOf("blob:",0)||!this.FormDataCtr||this.started[b])return[2];this.started[b]=!0;return[4,this.processResource(b,d)];case 1:g=q.sent();if(!g)return[2];k=0==this.existsBatch.length;for(h=[g];0<h.length;)if(l=h.pop()){p=0;for(m=a.values(l.children);p<m.length;p++)u=
m[p],h.push(u);this.existsBatch.push(l)}k&&(new this.Timeout(function(){f.batchReady=!0;f.popBatch&&f.popBatch()},50)).start();return[2]}})})};b.prototype.processResource=function(b,d,f){void 0===f&&(f=0);return z(this,void 0,void 0,function(){var g;return A(this,function(k){switch(k.label){case 0:return this.byUrl[b]?[2,this.byUrl[b]]:3<f?(a.sendToBugsnag("Resource uploading exceeded max resource depth 3","warning"),[2,null]):[4,d?this.processCss(b,f):this.processImage(b)];case 1:g=k.sent();if(!g)return[2,
null];this.byUrl[g.url]=g;this.queue.enqueue(a.EVENT_SYS_RESOURCEHASH,["url",b,g.hash]);return[2,g]}})})};b.prototype.processImage=function(b){return z(this,void 0,void 0,function(){var d,f;return A(this,function(g){switch(g.label){case 0:return[4,l(b,"blob")];case 1:return(d=g.sent())?[4,a.hashNonBlocking(this.ctx,d.data)]:[2,null];case 2:return f=g.sent().hash,[2,{hash:f,url:b,blob:d.blob,contentType:d.contentType,children:{}}]}})})};b.prototype.processCss=function(b,d){return z(this,void 0,void 0,
function(){var f,g,k,t,m,p,s,u,q,r,w,x;return A(this,function(v){switch(v.label){case 0:return[4,l(b,"text")];case 1:f=v.sent();if(!f)return[2,null];g=[];k=C.replaceCssUrls(f.data,function(b,c,d,e){a.prefix(c,"blob:")&&(e=a.trim(f.data.substring(e-20,e)),e=a.prefix(b,"@import")||e.lastIndexOf("@import")==e.length-7,g.push({url:c,isCss:e}),c="");return b+c+d});return[4,h(new Blob([k]))];case 2:return(t=v.sent())?[4,a.hashNonBlocking(this.ctx,t)]:[2,null];case 3:m=v.sent().hasher,p={},s=0,u=g,v.label=
4;case 4:if(!(s<u.length))return[3,7];q=u[s];r=q.url;w=q.isCss;return[4,this.processResource(r,w,d+1)];case 5:x=v.sent();if(!x)return[3,6];p[r]=x;m.writeAscii(x.hash);v.label=6;case 6:return s++,[3,4];case 7:return[2,{url:b,hash:m.sum(),stringData:f.data,contentType:f.contentType||"text/css",children:p}]}})})};return b}();a.ResourceUploader=d})(m||(m={}));(function(a){var l="navigationStart unloadEventStart unloadEventEnd redirectStart redirectEnd fetchStart domainLookupStart domainLookupEnd connectStart connectEnd secureConnectionStart requestStart responseStart responseEnd domLoading domInteractive domContentLoadedEventStart domContentLoadedEventEnd domComplete loadEventStart loadEventEnd".split(" "),
h="name startTime duration initiatorType redirectStart redirectEnd fetchStart domainLookupStart domainLookupEnd connectStart connectEnd secureConnectionStart requestStart responseStart responseEnd unloadEventStart unloadEventEnd domInteractive domContentLoadedEventStart domContentLoadedEventEnd domComplete loadEventStart loadEventEnd type redirectCount decodedBodySize encodedBodySize transferSize".split(" "),g="name startTime duration initiatorType redirectStart redirectEnd fetchStart domainLookupStart domainLookupEnd connectStart connectEnd secureConnectionStart requestStart responseStart responseEnd decodedBodySize encodedBodySize transferSize".split(" "),
d=["name","startTime","duration"],b=["jsHeapSizeLimit","totalJSHeapSize","usedJSHeapSize"],c=function(){function c(b,d){this._ctx=b;this._queue=d;this._memorySupported=this._getEntriesSupported=this._timingSupported=this._perfSupported=!1;this._lastUsedJSHeapSize=this._lastPerfCount=0;window.performance&&(this._perfSupported=!0,window.performance.timing&&(this._timingSupported=!0),window.performance.memory&&(this._memorySupported=!0),"function"===typeof window.performance.getEntries&&(this._getEntriesSupported=
!0),b.inFrame()||this._queue.enqueue(a.EVENT_REC_FEAT_SUPPORTED,[a.RecFeaturePerformance,this._timingSupported,a.RecFeaturePerformanceEntries,this._getEntriesSupported,a.RecFeaturePerformanceMemory,this._memorySupported]),this.checkMemory())}c.prototype.onLoad=function(){this._timingSupported&&this.recordTiming(performance.timing)};c.prototype.tick=function(a){this.checkMemory();a&&this.checkForNewEntries()};c.prototype.checkMemory=function(){if(this._memorySupported&&!this._ctx.inFrame()){var c=
performance.memory,d=c.usedJSHeapSize-this._lastUsedJSHeapSize;if(0==this._lastUsedJSHeapSize||0.2<Math.abs(d/this._lastUsedJSHeapSize))this.addPerfEvent(a.PerfEntryMemory,c,b),this._lastUsedJSHeapSize=c.usedJSHeapSize}};c.prototype.checkForNewEntries=function(){if(this._perfSupported&&this._getEntriesSupported){var a=performance.getEntries();if(a.length>this._lastPerfCount){for(;this._lastPerfCount<a.length;this._lastPerfCount++){var b=a[this._lastPerfCount];switch(b.entryType){case "navigation":this.recordNavigation(b);
break;case "resource":this.recordResource(b);break;case "paint":this.recordPaint(b);break;case "measure":this.recordMeasure(b);break;case "mark":this.recordMark(b)}}this._lastPerfCount=a.length}}};c.prototype.recordTiming=function(b){this.addPerfEvent(a.PerfEntryTiming,b,l)};c.prototype.recordNavigation=function(b){this.addPerfEvent(a.PerfEntryNavigation,b,h)};c.prototype.recordResource=function(b){this.addPerfEvent(a.PerfEntryResource,b,g)};c.prototype.recordPaint=function(b){this.addPerfEvent(a.PerfEntryPaint,
b,d)};c.prototype.recordMark=function(b){this.addPerfEvent(a.PerfEntryMark,b,d)};c.prototype.recordMeasure=function(b){this.addPerfEvent(a.PerfEntryMeasure,b,d)};c.prototype.addPerfEvent=function(b,c,d){b=[b];for(var e=0;e<d.length;e++){var g=c[d[e]];void 0===g&&(g=-1);b.push(g)}this._queue.enqueue(a.EVENT_PERF_ENTRY,b)};return c}();a.PerfWatcher=c})(m||(m={}));(function(a){var l=function(){function h(g,d){var b=this;this.ctx=g;this.queue=d;this.hooks=[];var c=h;this.throttle=new a.Throttle(c.ThrottleMax,
c.ThrottleInterval,function(){return setTimeout(function(){b.queue.enqueue(a.EVENT_STYLESHEET_FAIL,[]);b.stop()})});this.addInsert=this.throttle.guard(this.addInsert);this.addDelete=this.throttle.guard(this.addDelete)}h.prototype.start=function(){var g=this;this.throttle.open();var d=this.ctx.getWindow();if(d.CSSStyleSheet){var d=d.CSSStyleSheet.prototype,b;if(b=a.activateHook(d,"insertRule"))b.afterSync(function(a){g.addInsert(a.that,a.args[0],a.args[1])}),this.hooks.push(b);if(b=a.activateHook(d,
"deleteRule"))b.afterSync(function(a){g.addDelete(a.that,a.args[0])}),this.hooks.push(b)}};h.prototype.snapshot=function(g){var d=a.fsid(g);if(d&&(g=a.sheetRules(a.elemSheet(g))))for(var b=0;b<g.length;b++){var c=void 0;try{c=g[b].cssText}catch(e){c="html {}"}this.queue.enqueue(a.EVENT_CSSRULE_INSERT,[d,c,b])}};h.prototype.addInsert=function(g,d,b){(g=a.fsid(g.ownerNode))&&"string"==typeof d&&(d=[g,d],"number"==typeof b&&d.push(b),this.queue.enqueue(a.EVENT_CSSRULE_INSERT,d))};h.prototype.addDelete=
function(g,d){var b=a.fsid(g.ownerNode);b&&"number"==typeof d&&this.queue.enqueue(a.EVENT_CSSRULE_DELETE,[b,d])};h.prototype.stop=function(){this.throttle.close();for(var a=0,d=this.hooks;a<d.length;a++)d[a].disable();this.hooks=[]};h.ThrottleMax=1024;h.ThrottleInterval=1E4;return h}();a.StyleSheetWatcher=l})(m||(m={}));(function(a){function l(a,b){if(!a.firstChild)return[a,b];a=a.firstChild;for(var c=0;c<b-1&&a.nextSibling;c++)a=a.nextSibling;return[a,0]}function h(d,b,c){var e=a.tagName(d);if(("img"==
e||"embed"==e)&&"src"==b||("use"==e||"image"==e)&&"href"==b||"object"==e&&"data"==b)return[[c],!1];var f;return"link"==e&&"href"==b&&(f=d.getAttribute("rel"))&&-1<f.indexOf("stylesheet")?[[c],!0]:"srcset"!=b||"img"!=e&&"source"!=e?[[],!1]:null!=c.match(/^\s*$/)?[[],!1]:[a.map(c.split(","),function(b){return a.trim(b).split(/\s+/)[0]}),!1]}var g=function(){function d(b,c,d,f,g,k,l){void 0===l&&(l=new a.ResourceUploader(b,c));var m=this;this._ctx=b;this._queue=c;this._watcher=d;this._onFrameCreated=
g;this._beforeFrameRemoved=k;this._resourceUploader=l;this._clientHeight=this._clientWidth=this._curWindowScrollY=this._curWindowScrollX=-1;this._curInnerWidth=0;this._curSelection=[];this._scrollTimeouts={};this._initialized=this._uploadResources=this._quirks=!1;this._wnd=b.getWindow();this._doc=this._wnd.document;this._loc=this._wnd.location;this._hst=this._wnd.history;this._listeners=f.createChild();this._quirks="BackCompat"==this._doc.compatMode;this._currentUrl=this._loc.href;this._inputWatcher=
new a.InputWatcher(function(a){m.addChangeElem(a)},function(b){return!!a.fsid(b)});this._perfWatcher=new a.PerfWatcher(b,c);this._styleSheetWatcher=new a.StyleSheetWatcher(b,c);this._mutWatcher=new a.MutationWatcher(b,d,function(a,b,c){m.visitNode(a,b,c)},function(b){var c=b.node;if("iframe"==a.tagName(b.node))m._beforeFrameRemoved(b.node);else if("function"==typeof c.getElementsByTagName)for(b=c.getElementsByTagName("iframe"),c=0;c<b.length;c++)m._beforeFrameRemoved(b[c])},function(a,b,c){if(m._uploadResources)for(c=
h(a,b,c),a=c[1],b=0,c=c[0];b<c.length;b++){var d=c[b];0==d.lastIndexOf("blob:",0)&&m._resourceUploader.uploadBlob(d,a)}})}d.prototype.watchEvents=function(){var b=this;this._mutWatcher.hookMutations();this._inputWatcher.hookEvents();this._styleSheetWatcher.start();this._listeners.add(this._wnd,"mousemove",!0,function(a){b.addMouseMove(a)});this._listeners.add(this._wnd,"mousedown",!0,function(a){b.addMouseDown(a)});this._listeners.add(this._wnd,"mouseup",!0,function(a){b.addMouseUp(a)});this._listeners.add(this._wnd,
"keydown",!0,function(a){b.addKeyDown(a)});this._listeners.add(this._wnd,"keyup",!0,function(a){b.addKeyUp(a)});this._listeners.add(this._wnd,"click",!0,function(a){b.addClick(a)});this._listeners.add(this._wnd,"dblclick",!0,function(a){b.addDblClick(a)});this._listeners.add(this._wnd,"focus",!0,function(a){b.addFocus(a)});this._listeners.add(this._wnd,"blur",!0,function(a){b.addBlur(a)});this._listeners.add(this._wnd,"change",!0,function(a){b.addChange(a)});this._listeners.add(this._wnd,"touchstart",
!0,function(c){b.addTouchEvent(c,a.EVENT_TOUCHSTART);b.addWindowScroll()});this._listeners.add(this._wnd,"touchend",!0,function(c){b.addTouchEvent(c,a.EVENT_TOUCHEND);b.addWindowScroll()});this._listeners.add(this._wnd,"touchmove",!0,function(c){b.addTouchEvent(c,a.EVENT_TOUCHMOVE);b.addWindowScroll()});this._listeners.add(this._wnd,"touchcancel",!0,function(c){b.addTouchEvent(c,a.EVENT_TOUCHCANCEL)});this._listeners.add(this._wnd,"play",!0,function(c){b.addPlayPauseEvent(c,a.EVENT_PLAY)});this._listeners.add(this._wnd,
"pause",!0,function(c){b.addPlayPauseEvent(c,a.EVENT_PAUSE)});this._listeners.add(this._wnd,"scroll",!1,function(a){b.addWindowScroll()});this._listeners.add(this._wnd,"resize",!1,function(a){b.addResize()});this._listeners.add(this._wnd,"submit",!1,function(a){b.addFormSubmit(a)});this._listeners.add(this._wnd,"focus",!1,function(a){b.addWindowFocus(a)});this._listeners.add(this._wnd,"blur",!1,function(a){b.addWindowBlur(a)});this._listeners.add(this._wnd,"popstate",!1,function(){b.addNavigate()});
this._listeners.add(this._wnd,"selectstart",!0,function(a){b.addSelection()});this._listeners.add(this._doc,"selectionchange",!0,function(a){b.addSelection()});(this._pushHook=a.activateHook(this._hst,"pushState"))&&this._pushHook.afterSync(function(){return b.addNavigate()});(this._replaceHook=a.activateHook(this._hst,"replaceState"))&&this._replaceHook.afterSync(function(){return b.addNavigate()});"function"==typeof this._wnd.document.hasFocus&&this._queue.enqueue(this._wnd.document.hasFocus()?
a.EVENT_WINDOW_FOCUS:a.EVENT_WINDOW_BLUR,[]);this._initialized=!0};d.prototype.initResourceUploading=function(){this._resourceUploader.init();this._uploadResources=!0};d.prototype.onDomLoad=function(){this.addDomLoaded();this.addResize()};d.prototype.onLoad=function(){var a=this;setTimeout(function(){a._perfWatcher.onLoad();a.addLoad();a.addResize()},0)};d.prototype.bundleEvents=function(a){this._inputWatcher.tick();this._perfWatcher.tick(a);this.addWindowInnerWidth();return this._mutWatcher.processMutations()};
d.prototype.shutdown=function(){this._initialized&&(this._initialized=!1,this._listeners.clear(),this._pushHook&&this._pushHook.disable(),this._replaceHook&&this._replaceHook.disable(),this._inputWatcher.shutdown(),this._mutWatcher.shutdown())};d.prototype.docElem=function(){return this._doc.documentElement};d.prototype.visitNode=function(b,c,d){var f=this;switch(c.nodeName){case "HTML":this._docElScrollListener&&this._listeners.remove(this._docElScrollListener);this._docElScrollListener=this._listeners.add(c,
"scroll",!0,function(a){f.addScroll(a.target)});break;case "BODY":this.addResize();this.addWindowScroll();d.push(function(){f.addSelection()});break;case "INPUT":case "TEXTAREA":case "SELECT":this._inputWatcher.addInput(c);break;case "FRAME":case "IFRAME":this._onFrameCreated(c);break;case "VIDEO":case "AUDIO":c.paused||this.addPlayPauseEventById(a.fsid(c),a.EVENT_PLAY);break;case "STYLE":b=c.sheet;if(!b)break;var g=void 0;try{g=b.rules||b.cssRules}catch(k){break}g&&(0<g.length&&/^\s*$/.test(c.textContent||
""))&&d.push(function(){f._styleSheetWatcher.snapshot(c)})}"number"!=typeof c.scrollLeft||0==c.scrollLeft&&0==c.scrollTop||this.addScroll(c)};d.prototype.addMouseMove=function(b){b=a.fsid(b.target)?[b.clientX,b.clientY,a.fsid(b.target)]:[b.clientX,b.clientY];this._queue.enqueue(a.EVENT_MOUSEMOVE,b)};d.prototype.addMouseDown=function(b){this._queue.enqueue(a.EVENT_MOUSEDOWN,[b.clientX,b.clientY])};d.prototype.addMouseUp=function(b){this._queue.enqueue(a.EVENT_MOUSEUP,[b.clientX,b.clientY])};d.prototype.addTouchEvent=
function(a,c){if(void 0!==a.changedTouches)for(var d=0;d<a.changedTouches.length;++d){var f=a.changedTouches[d];isNaN(parseInt(f.identifier))&&(f.identifier=0);this._queue.enqueue(c,[f.identifier,f.clientX,f.clientY])}};d.prototype.addPlayPauseEvent=function(b,c){var d=a.fsid(b.target);d&&this.addPlayPauseEventById(d,c)};d.prototype.addPlayPauseEventById=function(a,c){this._queue.enqueue(c,[a])};d.prototype.addWindowFocus=function(b){this._queue.enqueue(a.EVENT_WINDOW_FOCUS,[])};d.prototype.addWindowBlur=
function(b){this._queue.enqueue(a.EVENT_WINDOW_BLUR,[])};d.prototype.maybeAddValueChange=function(){var a=this._doc.activeElement;if(a)this._inputWatcher.onChange(a)};d.prototype.addKeyDown=function(b){b=this._doc.activeElement;if(!b||a.fsidIfNotBlocked(b))this.maybeAddValueChange(),this._queue.enqueue(a.EVENT_KEYDOWN,[])};d.prototype.addKeyUp=function(b){b=this._doc.activeElement;if(!b||a.fsidIfNotBlocked(b))this.maybeAddValueChange(),this._queue.enqueue(a.EVENT_KEYUP,[])};d.prototype.addWindowInnerWidth=
function(){try{var b=this._wnd.innerWidth}catch(c){return}b!=this._curInnerWidth&&(this._queue.enqueue(a.EVENT_INNERWIDTH,[b]),this._curInnerWidth=b)};d.prototype.doWorkInScrollTimeout=function(b,c){var d=this;b in this._scrollTimeouts||(this._scrollTimeouts[b]=c,(new a.RealTimeout(function(){if(b in d._scrollTimeouts){var a=d._scrollTimeouts[b];delete d._scrollTimeouts[b];a()}},a.ScrollSampleInterval)).start())};d.prototype._fireScrollTimeouts=function(){for(var a in this._scrollTimeouts)this._scrollTimeouts[a](),
delete this._scrollTimeouts[a];this._scrollTimeouts=[]};d.prototype.addWindowScroll=function(){var b=this,c=this._doc.scrollingElement||this._doc.body||this._doc.documentElement,d=a.fsid(c);d&&this.doWorkInScrollTimeout(d,function(){var f,g;"pageXOffset"in b._wnd?(f=b._wnd.pageXOffset,g=b._wnd.pageYOffset):(f=c.scrollLeft,g=c.scrollTop);if(f!=b._curWindowScrollX||g!=b._curWindowScrollY)b._queue.enqueue(a.EVENT_SCROLL,[d,f,g]),b._curWindowScrollX=f,b._curWindowScrollY=g;b.addWindowInnerWidth()})};
d.prototype.addScroll=function(b){var c=this,d=a.fsid(b);d&&"number"==typeof b.scrollLeft&&this.doWorkInScrollTimeout(d,function(){c._queue.enqueue(a.EVENT_SCROLL,[d,b.scrollLeft,b.scrollTop])})};d.prototype.addResize=function(){if(this._doc.body){var b,c;this._quirks?(b=this._doc.body.clientWidth,c=this._doc.body.clientHeight):(b=this.docElem().clientWidth,c=this.docElem().clientHeight);if(b!=this._clientWidth||c!=this._clientHeight)this._clientWidth=b,this._clientHeight=c,b=Math.max(this._wnd.innerWidth||
-1,this._clientWidth),this.isMediaValue("width",b)||(b=this.findMediaValue("width",b,b+128)||b),c=Math.max(this._wnd.innerHeight,this._clientHeight),this.isMediaValue("height",c)||(c=this.findMediaValue("height",c,c+128)||c),b==this._clientWidth&&c==this._clientHeight?this._queue.enqueue(a.EVENT_RESIZE,[this._clientWidth,this._clientHeight]):this._queue.enqueue(a.EVENT_RESIZE,[this._clientWidth,this._clientHeight,b,c])}};d.prototype.isMediaValue=function(a,c){if("function"!=typeof this._wnd.matchMedia)return!0;
var d=this._wnd.matchMedia("(min-"+a+": "+c+"px)");if(!d)return!0;var f=this._wnd.matchMedia("(max-"+a+": "+c+"px)");return f?d.matches&&f.matches:!0};d.prototype.findMediaValue=function(a,c,d){if(!this._wnd.matchMedia)return 0;for(;c<d;){var f=Math.floor((c+d)/2);if(this._wnd.matchMedia("(min-"+a+": "+f+"px)").matches){if(this._wnd.matchMedia("(max-"+a+": "+f+"px)").matches)return f;c=f+1}else d=f-1}return 0};d.prototype.addDomLoaded=function(){this._queue.enqueue(a.EVENT_DOMLOADED,[])};d.prototype.addLoad=
function(){this._queue.enqueue(a.EVENT_LOAD,[])};d.prototype.addNavigate=function(){var b=this._loc.href;this._currentUrl!=b&&(this._currentUrl=b,this._queue.enqueue(a.EVENT_NAVIGATE,[this._loc.href,this._doc.title]))};d.prototype.addClick=function(b){var c=b.target,d=a.fsid(c);if(d){var f=0,g=0,k=0,h=0;c&&c.getBoundingClientRect&&(c=c.getBoundingClientRect(),f=c.left,g=c.top,k=c.width,h=c.height);this._queue.enqueue(a.EVENT_CLICK,[d,b.clientX,b.clientY,f,g,k,h])}};d.prototype.addDblClick=function(b){(b=
a.fsid(b.target))&&this._queue.enqueue(a.EVENT_DBL_CLICK,[b])};d.prototype.addFormSubmit=function(b){(b=a.fsid(b.target))&&this._queue.enqueue(a.EVENT_FORM_SUBMIT,[b])};d.prototype.addFocus=function(b){(b=a.fsid(b.target))&&this._queue.enqueue(a.EVENT_FOCUS,[b])};d.prototype.addBlur=function(b){(b=a.fsid(b.target))&&this._queue.enqueue(a.EVENT_BLUR,[b])};d.prototype.addChange=function(a){this._inputWatcher.onChange(a.target)};d.prototype.addChangeElem=function(b){var c=a.fsidIfNotBlocked(b);c&&this._queue.enqueue(a.EVENT_VALUECHANGE,
[c,a.valueOfInputishElem(b)])};d.prototype.addSelection=function(){for(var b=this.selectionArgs(),c=!1,d=0;4>d;d++)if(this._curSelection[d]!==b[d]){c=!0;break}c&&(this._curSelection=b,this._queue.enqueue(a.EVENT_SELECT,b))};d.prototype.selectionArgs=function(){if(!this._wnd.getSelection)return[];var b=this._wnd.getSelection();if(!b||"None"==b.type)return[];if("Caret"==b.type){var c=a.fsid(b.anchorNode);return c?[c,b.anchorOffset]:[]}if(!b.anchorNode||!b.focusNode)return[];var d=l(b.anchorNode,b.anchorOffset),
c=d[0],d=d[1],b=l(b.focusNode,b.focusOffset),f=b[0],g=b[1],f=(b=Boolean(c.compareDocumentPosition(f)&Node.DOCUMENT_POSITION_FOLLOWING))?[c,f]:[f,c],c=f[0],f=f[1],g=b?[d,g]:[g,d],d=g[0],g=g[1];for(a.fsid(c)||(d=0);c&&!a.fsid(c)&&c!=f;)c=c.nextSibling||c.parentNode;for(a.fsid(f)||(g=0);f&&!a.fsid(f)&&f!=c;)f=f.previousSibling||f.parentNode;if(c==f&&d==g)return[];var k=a.fsid(c),h=a.fsid(f);return c&&f&&k&&h?[k,d,h,g,b]:[]};return d}();a.EventWatcher=g;a.getResourceUrls=h})(m||(m={}));(function(a){function l(b,
c){b&&b.postMessage&&b.postMessage(a.stringify({__fs:c}),"*")}function h(b){try{var c=a.parseJson(b);if("__fs"in c)return c.__fs}catch(d){}return[]}function g(a){a=a.src;return!a||"about:blank"==a||0==a.indexOf("javascript:")||0==a.indexOf(d)}a.FS_REQUEST_FRAME_ID="RequestFrameId";a.FS_GREET_CHILD_FRAME="GreetFrame";a.FS_SET_FRAME_ID_CMD="SetFrameId";a.FS_IFRAME_EVENTS="EvtBundle";a.FS_SHUTDOWN_FRAME="ShutdownFrame";a.FS_RESTART_FRAME="RestartFrame";var d=location.protocol+"//"+location.host;a.defaultInjector=
function(c,d,e,g){a.logIfDebug("Injecting into Frame ["+c.src+"]");try{if(c.id==c.name&&b.test(c.id))a.logIfDebug("Blacklisted iframe: "+c.src);else if(c.src&&"about:blank"!=c.src&&0>c.src.indexOf("javascript:")&&c.src!=c.contentWindow.location.href&&"loading"==c.contentDocument.readyState)a.logIfDebug("Frame not yet loaded: "+c.src);else if(c.contentWindow[a.Namespace(c.contentWindow)])a.logIfDebug("FS already defined in Frame contentWindow: "+c.src+". Ignoring.");else{var h=c.contentWindow,l=c.contentDocument;
h._fs_org=d;h._fs_host=e;h._fs_debug=a.isDebug();h._fs_run_in_iframe=!0;var m=l.createElement("script");m.async=!0;m.src=g+"//"+e+"/s/fs.js";"testdrive"==d&&(m.src+="?allowMoo=true");l.head.appendChild(m)}}catch(u){a.logIfDebug("iFrame no injecty. Probably not same origin.")}};var b=/^fb\d{18}$/,c;(function(a){a[a.NoInfoYet=1]="NoInfoYet";a[a.Enabled=2]="Enabled";a[a.Disabled=3]="Disabled"})(c=a.GetCurrentSessionEnabledState||(a.GetCurrentSessionEnabledState={}));var e=function(){function b(d,e,f,
g){var h=this;this._ctx=d;this._injector=g;this._iFrames=[];this._pendingChildFrameIdInits=[];this._listeners=new a.DomListeners;this._getCurrentSessionEnabled=c.NoInfoYet;this._resourceUploadingEnabled=!1;this._tickerTasks=[];this._watcher=new a.Watcher;this._transport=f(d,function(){h.shutdown()});this._queue=new a.EventQueue(d,this._transport,function(a){a=h._eventWatcher.bundleEvents(a);for(var b=void 0;b=h._tickerTasks.pop();)b();return a},e);this._eventWatcher=new a.EventWatcher(d,this._queue,
this._watcher,this._listeners,function(a){h.onFrameCreated(a)},function(a){h.beforeFrameRemoved(a)});this._consoleWatcher=new a.ConsoleWatcher(this._queue,d.getWindow(),this._listeners);this._protocol=d.getProtocol();this._host=d.getHost();this._orgId=d.getOrgId();this._wnd=d.getWindow()}b.prototype.start=function(b,c){var d=this;this._onFullyStarted=c;this.addDefaultWatches();this._consoleWatcher.enable();"onpagehide"in this._wnd?this._listeners.add(this._wnd,"pagehide",!1,function(a){d._queue.addUnload("pagehide")}):
this._listeners.add(this._wnd,"unload",!1,function(a){d._queue.addUnload("unload")});this._listeners.add(this._wnd,"message",!1,function(a){"string"==typeof a.data&&d.postMessageReceived(a.source,h(a.data))});(this._docCloseHook=a.activateHook(this._wnd.Document?this._wnd.Document.prototype:this._wnd.document,"close"))&&this._docCloseHook.afterAsync(function(){d._listeners.refresh()})};b.prototype.getCurrentSessionEnabled=function(){return this._getCurrentSessionEnabled};b.prototype.queue=function(){return this._queue};
b.prototype.eventWatcher=function(){return this._eventWatcher};b.prototype.console=function(){return this._consoleWatcher};b.prototype.onDomLoad=function(){this._eventWatcher.onDomLoad()};b.prototype.onLoad=function(){this._eventWatcher.onLoad()};b.prototype.shutdown=function(){this._queue.shutdown();this._eventWatcher.shutdown();this._consoleWatcher.disable();this._listeners.clear();this._docCloseHook&&this._docCloseHook.disable();this.tellAllFramesTo([a.FS_SHUTDOWN_FRAME])};b.prototype.tellAllFramesTo=
function(a){for(var b=0;b<this._iFrames.length;b++)l(this._iFrames[b].contentWindow,a)};b.prototype.getCurrentSessionURL=function(b){var d=this._getCurrentSessionEnabled;if(d==c.NoInfoYet)return null;var e;e=this._host;e=a.isLocalhost(a.domainFromHost(e))?e:0==e.indexOf("www.")?"app."+e.slice(4):"app."+e;if(d==c.Disabled)return this._protocol+"//"+e+"/opt/upgrade";d=this.getCurrentSession();if(!d)return null;b&&(d+=":"+this._ctx.wallTime());return this._protocol+"//"+e+"/ui/"+this._ctx.getOrgId()+
"/session/"+encodeURIComponent(d)};b.prototype.getCurrentSession=function(){var a=this._getCurrentSessionEnabled;return a!=c.NoInfoYet&&a!=c.Disabled&&this._userId?this._userId+":"+this._sessionId:null};b.prototype.addDefaultWatches=function(){this._watcher.addPredicateRule({Selector:function(b){var c=a.tagName(b);if("object"==c)c="data";else if("embed"==c)c="src";else return!1;return!(C.IMAGE_FILENAME.test(b[c])&&(!b.type||0==b.type.lastIndexOf("image",0)))},Kind:a.WatchKindNYI});this._watcher.addRule({Selector:"canvas",
Kind:a.WatchKindNYI});this._watcher.addRule({Selector:"noscript",Kind:a.WatchKindBlocked});this._watcher.addRule({Selector:".fs-hide",Kind:a.WatchKindBlocked})};b.prototype.fullyStarted=function(){this._onFullyStarted()};b.prototype.enableResourceUploading=function(){this._resourceUploadingEnabled=!0;this._eventWatcher.initResourceUploading()};b.prototype.flushPendingChildFrameInits=function(){if(0<this._pendingChildFrameIdInits.length){for(var a=0;a<this._pendingChildFrameIdInits.length;a++)this._pendingChildFrameIdInits[a]();
this._pendingChildFrameIdInits=[]}};b.prototype.onFrameCreated=function(b){var c=this;if(a.fsid(b)){this._iFrames.push(b);var d=g(b),e=!1;try{e=!!b.contentWindow[a.Namespace(b.contentWindow)]}catch(f){e=!0}(!d||e)&&b.contentWindow&&b.contentWindow.postMessage?l(b.contentWindow,[a.FS_GREET_CHILD_FRAME]):d?(a.logIfDebug("Attempting to setup Frame ["+b.src+"]"),this._injector(b,this._orgId,this._host,this._protocol),b.addEventListener("load",function(d){c._tickerTasks.push(function(){a.logIfDebug("onload for frame ["+
b.src+"]");c._injector(b,c._orgId,c._host,c._protocol)})})):a.logIfDebug("Frame Doesn't need injecting. Probably cross domain ["+b.src+"]")}else a.logIfDebug("fsid missing or invalid for iFrame."+b.src)};b.prototype.beforeFrameRemoved=function(a){for(var b=0;b<this._iFrames.length;b++)if(a==this._iFrames[b]){this._iFrames.splice(b,1);break}};b.prototype.postMessageReceived=function(b,c){switch(c[0]){case a.FS_IFRAME_EVENTS:var d=c[1];0<d.length&&this._transport.enqueueEvents(d);break;case a.FS_REQUEST_FRAME_ID:d=
this.iFrameWndToFsId(b),b&&d?(a.logIfDebug("Responding to FID request for frame "+d),this.sendFrameIdToInnerFrame(b,d)):a.logIfDebug("No FrameId found. Hoping to send one later.")}};b.prototype.sendFrameIdToInnerFrame=function(b,c){var d=this,e=function(){var e=[];0!=d._frameId&&(e=d._parentIds?d._parentIds.concat(d._frameId):[d._frameId]);l(b,[a.FS_SET_FRAME_ID_CMD,c,e,d._ctx.startTime(),d._watcher.rawRules,d._protocol,d._host,d._orgId,d._userId,d._sessionId,d._pageId,d.getCurrentSessionEnabled(),
d._resourceUploadingEnabled])};null==this._frameId?this._pendingChildFrameIdInits.push(e):e()};b.prototype.iFrameWndToFsId=function(b){for(var c=0;c<this._iFrames.length;c++)if(this._iFrames[c].contentWindow==b)return a.fsid(this._iFrames[c]);a.logIfDebug("Unable to locate frame for window");return NaN};return b}();a.AbstractRecorder=e;a.parsePostMessageData=h})(m||(m={}));(function(a){function l(g,d){return new a.HttpEventTransport(g,d)}var h=function(g){function d(b,c,d,f,h){void 0===c&&(c=a.RealTicker);
void 0===d&&(d=new a.XHRPoster);void 0===f&&(f=l);void 0===h&&(h=a.defaultInjector);var k=g.call(this,b,c,f,h)||this;k._poster=d;k._domLoaded=!1;k._recordingDisabled=!1;k._integrationScriptFetched=!1;k._doc=k._wnd.document;k._frameId=0;k._identity=b.getIdentity();k._getCurrentSessionEnabled=a.GetCurrentSessionEnabledState.NoInfoYet;a.set_fs_shutdown(k._wnd,function(a){k._queue.shutdown();a&&(a=k._doc.getElementById(a))&&a.setAttribute("_fs_embed_token",k._embedToken)});return k}v(d,g);d.prototype.onDomLoad=
function(){var a=this;g.prototype.onDomLoad.call(this);this._domLoaded=!0;this.injectIntegrationScript(function(){a.fireFsReady()})};d.prototype.start=function(b,c,d){var f=this;g.prototype.start.call(this,b,c);var h=this._doc.documentElement;c=a._fs_replay_flags(this._wnd);var k=a.tryGetScreenDims(this._wnd),l=k[0],k=k[1],m="";b||(m=this._identity.userId());b={OrgId:this._orgId,UserId:m,Url:location.href,Base:a.baseUri(this._wnd),Width:h.clientWidth,Height:h.clientHeight,ScreenWidth:l,ScreenHeight:k,
Referrer:this._doc.referrer,Doctype:a.doctypeString(this._doc),CompiledTimestamp:a.CompiledTimestamp};d&&(b.AppId=d);c&&(b.ReplayFlags=c);this._poster.post(this._protocol,a.gceHost(this._host),"/rec/page",a.stringify(b),function(b){var c;try{c=a.parseJson(b)}catch(d){f.disableBecauseRecPageSaidSo();return}f.handleResponse(c);f._queue.enqueueFirst(a.EVENT_SET_FRAME_BASE,[a.baseUri(f._wnd),a.doctypeString(f._doc)]);f._queue.startPipeline(c.PageIntId);f.fullyStarted()},function(a){f.disableBecauseRecPageSaidSo()})};
d.prototype.setIdsAndCookie=function(b){var c=this._identity;c.setIds(this._wnd,b.CookieDomain,b.UserIntId,b.SessionIntId);this._userId=b.UserIntId;this._sessionId=b.SessionIntId;this._pageId=b.PageIntId;this._embedToken=b.EmbedToken;a.logIfDebug("/User,"+c.userId()+"/Session,"+c.sessionId()+"/Page,"+b.PageIntId)};d.prototype.injectIntegrationScript=function(b){if(this._domLoaded&&this._integrationScriptFetched)if(this._integrationScript){var c=this._doc.createElement("script");a._fs_csp(this._wnd)?
(c.addEventListener("load",b),c.addEventListener("error",b),c.async=!0,c.src=this._protocol+"//"+this._host+"/rec/integrations?OrgId="+this._orgId,this._doc.head.appendChild(c)):(c.text=this._integrationScript,this._doc.head.appendChild(c),b())}else b()};d.prototype.handleResponse=function(b){var c=this;this.setIdsAndCookie(b);this._integrationScriptFetched=!0;this._integrationScript=b.IntegrationScript;this._getCurrentSessionEnabled=b.GetCurrentSessionEnabled?a.GetCurrentSessionEnabledState.Enabled:
a.GetCurrentSessionEnabledState.Disabled;b.ResourceUploadingEnabled&&this.enableResourceUploading();this.injectIntegrationScript(function(){c.fireFsReady()});if(b.Blocks)for(var d=0;d<b.Blocks.length;++d)this._watcher.addRule(b.Blocks[d]);if(b.Watches)for(d=0;d<b.Watches.length;++d)this._watcher.addRule(b.Watches[d])};d.prototype.disableBecauseRecPageSaidSo=function(){this.shutdown();a.logIfDebug("Disabling FS.");this._recordingDisabled=!0;this.fireFsReady()};d.prototype.fireFsReady=function(){var b=
a._fs_ready(this._wnd);if(b)try{this._recordingDisabled?b(!0):b()}catch(c){a.logIfDebug("exception in _fs_ready(): "+c)}};return d}(a.AbstractRecorder);a.TopRecorder=h})(m||(m={}));(function(a){function l(g,d){return new a.PostMessageEventTransport(g.getWindow())}a.makeFrameTransport=l;var h=function(g){function d(b,c,d,f,h){void 0===c&&(c=a.RealTicker);void 0===d&&(d=new a.PostMessagePoster);void 0===f&&(f=l);void 0===h&&(h=a.defaultInjector);b=g.call(this,b,c,f,h)||this;b._messagePoster=d;return b}
v(d,g);d.prototype.start=function(a,c){g.prototype.start.call(this,a,c);this.sendRequestForFrameId()};d.prototype.postMessageReceived=function(b,c){g.prototype.postMessageReceived.call(this,b,c);switch(c[0]){case a.FS_GREET_CHILD_FRAME:this.sendRequestForFrameId();break;case a.FS_SET_FRAME_ID_CMD:try{this.setFrameIdFromOutside(c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12])}catch(d){a.logIfDebug("Failed to parse frameId from message"+c)}}};d.prototype.sendRequestForFrameId=function(){this._frameId||
(0==this._frameId?a.logIfDebug("For some reason the outer window attempted to request a frameId"):this._wnd.parent?(a.logIfDebug("Asking for a frame ID from within frame: "+location.href),this._messagePoster.postMessage(this._wnd.parent,a.FS_REQUEST_FRAME_ID,[])):a.logIfDebug("Orphaned window. Location href = "+location.href))};d.prototype.setFrameIdFromOutside=function(b,c,d,f,g,h,l,m,p,s,u,q){if(b)if(this._frameId)this._frameId!=b?(a.logIfDebug("Updating frame id from "+this._frameId+" to "+b),
this._ctx.splitPage()):a.logIfDebug("frame Id is already set to "+this._frameId);else{a.logIfDebug("FrameId received within frame "+location.href+": "+b);this._protocol=g;this._userId=m;this._sessionId=p;this._host=h;this._orgId=l;this._getCurrentSessionEnabled=u||a.GetCurrentSessionEnabledState.NoInfoYet;q&&this.enableResourceUploading();this._frameId=b;this._parentIds=c;for(g=0;g<f.length;++g)this._watcher.addRule(f[g]);this._queue.enqueueFirst(a.EVENT_SET_FRAME_BASE,[a.baseUri(this._wnd),a.doctypeString(this._wnd.document)]);
this._queue.rebaseIframe(d);this._ctx.setStartTime(d);this._pageId=s;this._queue.startPipeline(s,b,c);this.flushPendingChildFrameInits();this.fullyStarted()}else a.logIfDebug("Outer page gave us a bogus frame Id! Iframe: "+location.href)};return d}(a.AbstractRecorder);a.InnerRecorder=h})(m||(m={}));(function(a){function l(d){if(d==top||a._fs_is_outer_script(d)||a._fs_run_in_iframe(d)||a._fs_transport(d))return!0;try{return d.parent.document,l(d.parent)}catch(b){return!1}}var h=function(){function d(){}
d.prototype.createTopRecorder=function(b){return new a.TopRecorder(b)};d.prototype.createInnerRecorder=function(b){return new a.InnerRecorder(b)};return d}();a.DefaultRecorderMaker=h;var g=function(){function d(a,c){void 0===a&&(a=window);void 0===c&&(c=new h);this.wnd=a;this.recMaker=c;this.protocol="https:";this.domDoneLoaded=!1;this._startTime=this.wallTime();this.waitingOnStart=!1;this.reidentifyCount=0}d.prototype.init=function(){a.isLoaded(this.wnd)||(a.setLoaded(this.wnd,a.Namespace(this.wnd)),
a.initWindex(this.wnd),this.initApi(),this.start())};d.prototype.wallTime=function(){return(new Date).getTime()};d.prototype.now=function(){return this.wallTime()-this._startTime};d.prototype.startTime=function(){return this._startTime};d.prototype.setStartTime=function(a){this._startTime=a};d.prototype.getHost=function(){return this.host};d.prototype.getProtocol=function(){return this.protocol};d.prototype.getOrgId=function(){return this.orgId};d.prototype.getIdentity=function(){return this.identity};
d.prototype.getVars=function(){return this.vars};d.prototype.getWindow=function(){return this.wnd};d.prototype.getCurrentSessionURL=function(a){return this.recorder?this.recorder.getCurrentSessionURL(a):null};d.prototype.getCurrentSession=function(){return this.recorder?this.recorder.getCurrentSession():null};d.prototype.enableConsole=function(){this.recorder&&this.recorder.console().enable()};d.prototype.disableConsole=function(){this.recorder&&this.recorder.console().disable()};d.prototype.log=
function(a){for(var c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];this.recorder&&("log"!==a&&("info"!==a&&"warn"!==a&&"error"!==a&&"debug"!==a)&&(c.unshift(a),a="log"),this.recorder.console().addLog(a,c))};d.prototype.shutdown=function(){!this.recorder||this.deferredStart?a.logIfDebug("Recording already shut down."):(this.recorder.shutdown(),this.recorder=null)};d.prototype.restart=function(){this.deferredStart?(this.deferredStart(),this.deferredStart=null):this.recorder?a.logIfDebug("Recording already started."):
this.recorder=this.createRecorder(!0)};d.prototype.splitPage=function(b){return z(this,void 0,void 0,function(){return A(this,function(c){switch(c.label){case 0:if(b&&null==this.identity)return a.logIfDebug("Can't re-identify from an iframe"),[2];if(this.waitingOnStart)return this.splitPending=[b],[2];this.shutdown();return[4,a.wait(0)];case 1:return c.sent(),[4,a.wait(0)];case 2:return c.sent(),b&&this.identity&&this.identity.clear(),this.restart(),[2]}})})};d.prototype._api=function(b,c){if(this.inFrame())a.logIfDebug("API calls may only be made from the top-most frame");
else if(this.recorder){var d=this.vars.api(b,c),f=d[0];if(d[1]){if(8>this.reidentifyCount){this.reidentifyCount++;a.FS_q_push(this.wnd,[b,c]);this.splitPage(!0);return}a.logIfDebug("reidentified too many times; giving up")}for(d=0;d<f.length;d++)this.recorder.queue().enqueue(f[d].Kind,f[d].Args)}else a.FS_q_push(this.wnd,[b,c])};d.prototype._cookies=function(){if(this.identity)return this.identity.cookies();a.logIfDebug("Error in FS integration: Can't get cookies from inside an iframe");return null};
d.prototype._setCookie=function(b,c){this.identity?this.identity.setCookie(b,c):a.logIfDebug("Error in FS integration: Can't set cookies from inside an iframe")};d.prototype.initApi=function(){var b=this.wnd[a.Namespace(this.wnd)];b.getCurrentSessionURL=a.$entry(this.getCurrentSessionURL,this);b.getCurrentSession=a.$entry(this.getCurrentSession,this);b.enableConsole=a.$entry(this.enableConsole,this);b.disableConsole=a.$entry(this.disableConsole,this);b.log=a.$entry(this.log,this);b.shutdown=a.$entry(this.shutdown,
this);b.restart=a.$entry(this.restart,this);b._api=a.$entry(this._api,this);b._cookies=a.$entry(this._cookies,this);b._setCookie=a.$entry(this._setCookie,this)};d.prototype.start=function(){var b=this;a.initDebug(this.wnd);a.logIfDebug("script version "+a.CompiledVersion+" (compiled at "+a.CompiledTimestamp+")");this.host=a._fs_host(this.wnd);this.orgId=a._fs_org(this.wnd);this.host?this.orgId?(a.logIfDebug("host: "+this.host),a.logIfDebug("orgid: "+this.orgId),"localhost:8080"==this.host&&(this.protocol=
"http:"),this.inFrame()||(this.identity=new a.Identity(this.wnd.document),this.vars=new a.Vars(this.identity),this.identity.initFromCookies(this.host,this.orgId)),this.canRecord(this.orgId)?(this.recorder=this.createRecorder(),this.recorder.eventWatcher().watchEvents(),this.hookLoadEvents(),this.wnd.addEventListener("message",function(c){if("string"==typeof c.data)switch(a.parsePostMessageData(c.data)[0]){case a.FS_SHUTDOWN_FRAME:b.shutdown();break;case a.FS_RESTART_FRAME:b.restart()}})):this.hailMary()):
a.logIfDebug("Missing global _fs_org. Recording disabled."):a.logIfDebug("Missing global _fs_host. Recording disabled.")};d.prototype.createRecorder=function(b){var c=this;this._startTime=this.wallTime();var d;if(this.inFrame())d=this.recMaker.createInnerRecorder(this);else{d=this.recMaker.createTopRecorder(this);for(var f=this.drainApiQueue(a.FS_q_drain(this.wnd)),g=f.events,h=f.reidentify,l=f.appId,f=f.defer,m=0;m<g.length;m++)d.queue().enqueue(g[m].Kind,g[m].Args)}this.waitingOnStart=!0;g=function(){d.start(!!h,
function(){c.waitingOnStart=!1;b&&d.tellAllFramesTo([a.FS_RESTART_FRAME]);c.splitPending&&(c.splitPage.apply(c,c.splitPending),c.splitPending=null)},l);b&&d.eventWatcher().watchEvents()};f?this.deferredStart=g:g();return d};d.prototype.drainApiQueue=function(b){if(!b)return{events:[]};for(var c=[],d,f,g,h=0;h<b.length;h++){"user"==b[h][0]&&"uid"in b[h][1]&&(d=a.transformValidateAppId(b[h][1].uid)[0]);var l=this.vars.api(b[h][0],b[h][1]),m=l[0],p=l[1];(l=l[2])&&(g="shutdown"===l);p&&(c=[],f=!0);c=
c.concat(m)}return{events:c,reidentify:f,appId:d,defer:g}};d.prototype.inFrame=function(){if("boolean"==typeof this._inFrame)return this._inFrame;var b=a._fs_transport(this.wnd);a._fs_is_outer_script(this.wnd)?this._inFrame=!1:this.wnd!=top?this._inFrame=!0:b?b.init&&b.init(this.orgId)&&(this._inFrame=!0):this._inFrame=!1;return this._inFrame};d.prototype.canRecord=function(b){return this.wnd.MutationEvent&&this.wnd.postMessage?l(this.wnd)?!0:(a.logIfDebug("Fullstory recording for this page is NOT allowed within an iFrame."),
!1):(a.logIfDebug("missing required browser features"),!1)};d.prototype.hailMary=function(){var b=this;if(this.identity){var c=document.documentElement,d=a._fs_replay_flags(this.wnd);a.logIfDebug("Unable to record playback stream.");var f=document.createElement("script");this.wnd.__fs_startResponse=function(a){a&&b.identity.setIds(b.wnd,a.CookieDomain,a.UserIntId,a.SessionIntId);document.head.removeChild(f)};f.src="//"+a.gceHost(this.host)+"/rec/page?OrgId="+this.orgId+"&UserId="+this.identity.userId()+
"&Url="+encodeURIComponent(location.href)+"&Base="+encodeURIComponent(a.baseUri(this.wnd))+"&Width="+c.clientWidth+"&Height="+c.clientHeight+"&ScreenWidth="+this.wnd.screen.width+"&ScreenHeight="+this.wnd.screen.height+"&Referrer="+encodeURIComponent(document.referrer)+"&Doctype="+encodeURIComponent(a.doctypeString(document))+"&CompiledTimestamp="+a.CompiledTimestamp+"&Fallback=true"+(d?"&ReplayFlags="+d:"");document.head.appendChild(f)}};d.prototype.hookLoadEvents=function(){var a=this,c=function(){a.domDoneLoaded||
(a.domDoneLoaded=!0,a.recorder&&a.recorder.onDomLoad())},d=!1,f=function(){d||(d=!0,a.recorder&&a.recorder.onLoad())};switch(document.readyState){case "interactive":document.attachEvent||c();break;case "complete":c(),f()}this.domDoneLoaded||document.addEventListener("DOMContentLoaded",function(a){c()});d||this.wnd.addEventListener("load",function(a){c();f()})};return d}();a.WindowContext=g})(m||(m={}));try{(new m.WindowContext).init()}catch(R){m.sendToBugsnag(R,"error"),m._fs_debug(window)&&window.console&&
console.log&&console.log("Failed to initialize FullStory.")}})();
