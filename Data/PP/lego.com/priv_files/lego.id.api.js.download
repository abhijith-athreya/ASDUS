/** 
* @name: legoid.api
* @buildtime: 2017-09-13 12:36:35
* @version: 2.0.18
**/
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){!function(a,c){"undefined"!=typeof b?b.exports=c():"function"==typeof define&&"object"==typeof define.amd?define(c):this[a]=c()}("api",function(){function b(b){var c={qwery:a("../../../lib/3rd/qwery"),bonzo:a("../../../lib/3rd/bonzo"),bean:a("../../../lib/3rd/bean"),helper:a("../../../lib/account/helper"),reqwest:a("../../../lib/3rd/reqwest"),modal:a("../../../lib/account/modal"),q:a("../../../lib/3rd/q"),ellipsisHelper:a("../../../lib/account/ellipsisHelper")};if("object"==typeof b)for(var d in b)b.hasOwnProperty(d)&&c.hasOwnProperty(d)&&"undefined"!=typeof b[d]&&(c[d]=b[d]);else if("function"==typeof injectedDependencies)throw new Error("Injected dependencies must be an object");return c}var c=function(a,c){function d(){return y?"accountlite":"account2"}function e(){s=new Array,t=new Array}function f(){return{getProfile:!1,getConfig:!1,getNotifications:!1,logout:!1}}function g(){return{getProfile:new Array}}function h(){return{getProfile:{timestamp:(new Date).getTime(),identifier:null,content:null}}}function i(){var a=LEGOID.Config.Resources.UnactivatedUrl;a=a.indexOf("?")!=-1?a+"&context=modal":a+"?context=modal",q.modal.open(a,780,350)}function j(a){return q.bonzo(q.qwery(a))}function k(a){for(var b=0;b<s.length;b++)s[b].update(a);for(var c=0;c<t.length;c++)t[c].update(a)}function l(){this.button=q.bonzo.create('<a href="" class="legoid-button"></a>'),this.element="body",this.add=function(a,b,c,d){switch(this.element=a,b){case"edit":this.addEditButton(this.element);break;case"login":this.addLoginButton(this.element);break;case"logout":this.addLogoutButton(this.element);break;case"register":this.addRegisterButton(this.element);break;case"auto":var e=this;"undefined"==typeof c&&(c=A),n.getProfile({callback:function(a){t.push(e),a.Authenticated?e.addLogoutButton(e.element):a.NeedToActivate?e.addActivateButton(e.element):e.addLoginButton(e.element),c.call(d)}})}},this.update=function(a){var b=this;q.bean.off(b.button[0],"click"),j(b.button[0]).remove(),a.Authenticated?b.addLogoutButton(b.element):a.NeedToActivate?b.addActivateButton(b.element):b.addLoginButton(b.element)},this.addLoginButton=function(a){j(this.button).text(p.Texts.LEGOIDConnectTexts.LoginText),j(this.button).attr("title",p.Texts.LEGOIDConnectTexts.LoginText.toUpperCase()),j(this.button).attr("href",q.helper.appendReturnUrl(p.Resources.ModalLoginUrl)),j(this.button).attr("data-uitest","js-api-login-button"),q.bean.on(this.button[0],"click",function(a){a.preventDefault(),q.helper.trackingReady()&&TrackMan.useModule([TrackMan.Modules.BasicTracking],function(a){a.clickAction(d()+"-login-click")}),n.showLoginModal()}),j(a).append(this.button)},this.addActivateButton=function(a){j(this.button).text(p.Texts.LEGOIDConnectTexts.UnactivatedText),j(this.button).attr("title",p.Texts.LEGOIDConnectTexts.UnactivatedText.toUpperCase()),j(this.button).attr("href",q.helper.appendReturnUrl(LEGOID.Config.Resources.UnactivatedUrl)),j(this.button).attr("data-uitest","js-api-activate-button"),q.bean.on(this.button[0],"click",function(a){a.preventDefault(),i()}),j(a).append(this.button)},this.addRegisterButton=function(a){j(this.button).text(p.Texts.LEGOIDConnectTexts.RegistrationText),j(this.button).attr("title",p.Texts.LEGOIDConnectTexts.RegistrationText.toUpperCase()),j(this.button).attr("href",q.helper.appendReturnUrl(p.Resources.ModalRegistrationUrl)),j(this.button).attr("data-uitest","js-api-register-button"),q.bean.on(this.button[0],"click",function(a){a.preventDefault(),q.helper.trackingReady()&&TrackMan.useModule([TrackMan.Modules.BasicTracking],function(a){a.clickAction(d()+"-register-click")}),LEGOID.API.showRegisterModal()}),j(a).append(this.button)},this.addEditButton=function(a){j(this.button).text(p.Texts.LEGOIDConnectTexts.EditProfileText),j(this.button).attr("title",p.Texts.LEGOIDConnectTexts.EditProfileText.toUpperCase()),j(this.button).attr("href",p.Resources.EditProfileUrl),j(this.button).attr("data-uitest","js-api-edit-button"),q.bean.on(this.button[0],"click",function(a){a.preventDefault(),n.gotoEditProfile()}),j(a).append(this.button)},this.addLogoutButton=function(a){j(this.button).text(p.Texts.LEGOIDConnectTexts.LogoutText),j(this.button).attr("title",p.Texts.LEGOIDConnectTexts.LogoutText.toUpperCase()),j(this.button).attr("data-uitest","js-api-logout-button"),q.bean.on(this.button[0],"click",function(a){a.preventDefault(),q.helper.trackingReady()&&(TrackMan.useModule([TrackMan.Modules.BasicTracking],function(a){a.clickAction(d()+"-logout-click")}),TrackMan.useModule([TrackMan.Modules.AccountTracking],function(a){a.pages.signOut()})),n.logout()}),j(a).append(this.button)}}function m(){var a=this;this.deferred=q.q.defer(),this.container=q.bonzo.create('<div class="legoid-box-container" data-uitest="legoid-box"></div>'),this.logo=q.bonzo.create('<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADYAAAAgCAMAAABuFHtpAAACplBMVEUAAAAAAD5DdpqVs8fl7PH////x+/+XuNBei6lahJ5tlK4obKEobKFKe5orY4Yxao8rYoQlXoEobKEhWn0bVnklaJkCQ2oDRGsWX5kXU3YYYZoZVHcaVHYaVXcaVXgaY5sbVnkbVnobY5sdWoEdW4IdZJwdZZweZZwfZZ0fZp0gZp0gZ50hZ50hZ54iZ54iaJ4jZJMjaJ4jaJ8jaZ8kaZ8lZ5klaJklap8laqAmaqAma6Ana6AnbKEoapsobKEobKIrbqIsb6IucKMucKQvcaQwcaQxcqUyc6Uzc6Uzc6Y0dKY1dKY1dKc1dac3dqc4d6g6eKk7eak8ealAfKtCfaxDfq1Ef61Ff61FgK5Iga5Iga9LhLBMhbFPhrJQh7JTgJpUibRVirVWjLVXjLVYhJ1YjbZZjbZajrdbjrddkLhfkblfkrlgk7lhk7lilLpklbtllrxnjqVnl7xomL1rmr5wncBzn8J0n8J0oMJ1ocN3osN7pcV9psZ+n7N+psZ+p8eBqciCqsiDqsmEq8mFrMmFrMqGrMqHrcqHrcuIrsuJrsuLqbuOsc2Pss6Qs86RtM6UttCVsMGWscGXt9GXuNGZtMOaudKautKautObutOctsWdvNSevdSfvdWgvtWlwdeow9mrxtquyNuvyNyvydywydyxxdGyyt23zd+4zuC5zuC70OG+0uK+0+PA1OPB1OPF1+XH1t7I2ufJ2efJ2ufK2+jL2ODM3OjN3enR3+rS4OvT4ezU4ezV4uza5e/b5u/c5+/e5uve6fHf6fHg6vHi6e7i6/Lj7PLk7PPm7fTm7vTn7vTp7/Xp8PXq8fbr8fbs8PPs8vbs8vft8fTt8vft8/fu8/fu9Pjx9vny9vn1+Pr2+fv3+fr5+/z9/f7+/v7+/v/////hcUpHAAAAFnRSTlMAAAAAAAAPFycyU2FijL3Q2fL0+P7+sx2pjgAAAk5JREFUeNrV1edX01AYwOG696p1j9YqXRCiEG0h+rpq66TiQKpSN4pbcS8UJ4666sSNuHDUgXtvi4gTxVXf/8R7SUILnlbDN3/n3Pue++FJcpIPUdRTwj/XvVHNqgohGQp6dmxSW2Qgi6k61K0M06haNVBUl880qjYNa1STyTppSO0b16oii0Hntu1oTeuUsRiWxoknu51sNqdzqBmYpPkOHTlZxs8ZyPFdu5Ga9ZAYk3OJti8WaMbnT0wQj6SxtrtkL7TxqT/IPBQJQhLT+5B2JRpous9v9DAY72QsM17D3BkenN7bj2vmPsXFfDDjdC1Pe2n7W+vjKCsmbBBeHDXAgQ+0JjBELMfdFhiGt6OCmPVMccn7ItrHEp+HLWOkWXiUOYd404PpAGr8GhFgrBeDy+Qldi9zYRJeYFKz8eUKXA3A40NjgGnLqV9elrB3/RL6Yt6QPoYvmGZchydG4CdHZA5mWwJMjaX5xXWDAX0RmUeQNHUa3b9ZuR10FsRBRbbnrf/nru8C4ydtd29LXOR2Z/XiE7eezOIB2IkHjq9ioCL70HwLXm5xSmDl4jlhxpsB/mD4jKxHKN4tOZmbMHtmgglCFGArydopPqSh4MUYJN2y/pVdHzdv8kEUGPkAU/DYgrN4vktophVfpFi+yNaC2od8aGa6T0igvfESi8nD0aEZjHwdpPIBJKb1oTkMA33Kxg1Cm5ysxA6n5eLV6HAMNqPU+tLLFL5KoYfH/SEssw+XstEj73LFpi9d4oqCkCxs/zdTVkYp6Y9Kvqr/Gy7VaLNggvhAAAAAAElFTkSuQmCC">'),this.avatar=q.bonzo.create('<div class="legoid-avatar" />'),this.links=q.bonzo.create('<div class="links"></div>'),this.login=q.bonzo.create('<a href="'+q.helper.appendReturnUrl(p.Resources.ModalLoginUrl)+'" data-uitest="login-link">'+p.Texts.HeaderTexts.LoginText+"</a>"),this.register=q.bonzo.create('<a href="'+q.helper.appendReturnUrl(p.Resources.ModalRegistrationUrl)+'" data-uitest="register-link">'+p.Texts.HeaderTexts.RegistrationText+"</a>"),this.logout=q.bonzo.create('<a href="'+p.Resources.LogoutUrl+'" data-uitest="logout-link">'+p.Texts.HeaderTexts.LogoutText+"</a>"),this.edit=q.bonzo.create('<a class="edit" href="'+q.helper.appendReturnUrl(p.Resources.EditProfileUrl)+'" data-uitest="edit-profile-link">'+p.Texts.HeaderTexts.EditProfileText+"</a>"),this.activate=q.bonzo.create('<a href="'+q.helper.appendReturnUrl(p.Resources.UnactivatedUrl)+'">'+p.Texts.HeaderTexts.UnactivatedText+"</a>"),this.notification=q.bonzo.create('<div class="legoid-notification" data-uitest="legoid-notification"></div>'),q.bean.on(this.register[0],"click",function(a){a.preventDefault(),q.helper.trackingReady()&&TrackMan.useModule([TrackMan.Modules.BasicTracking],function(a){a.clickAction(d()+"-register-click")}),n.showRegisterModal()}),this.add=function(b,c){return a.update(c),j(a.container).append(a.links),j(b).append(a.container),this.deferred.promise},this.removeNotification=function(){j(".legoid-notification").length&&(j(".legoid-notification").remove(),j(this.avatar).removeClass("active"),j(this.logo).removeClass("active"))},this.addNotification=function(a,b,c){this.removeNotification(),"undefined"==typeof a&&(a=0),a>9&&(a="9+"),"function"==typeof b?(j(this.notification).addClass("active"),q.bean.on(this.notification[0],"click",function(a){a.preventDefault(),b.call()}),j(this.avatar).addClass("active"),q.bean.on(this.logo[0],"click",function(a){a.preventDefault(),b.call()}),q.bean.on(this.avatar[0],"click",function(a){a.preventDefault(),b.call()})):(j(this.notification).removeClass("active"),q.bean.off(this.notification[0],"click")),j(this.notification[0]).text(a),j(c).prepend(this.notification)},this.update=function(a){var b=this;j(this.links).empty(),j(this.logo).remove(),j(this.avatar).remove(),a.Authenticated?(q.bean.off(this.logout[0],"click"),q.bean.on(this.logout[0],"click",function(a){a.preventDefault(),q.helper.trackingReady()&&(TrackMan.useModule([TrackMan.Modules.BasicTracking],function(a){a.clickAction(d()+"-logout-click")}),TrackMan.useModule([TrackMan.Modules.AccountTracking],function(a){a.pages.signOut()})),n.logout()}),q.bean.off(this.edit[0],"click"),q.bean.on(this.edit[0],"click",function(a){a.preventDefault(),n.showMyAccountModal()}),j(this.edit).text(a.UserName),j(this.edit).attr("title",p.Texts.HeaderTexts.SignedInText+" '"+a.UserName+"'"),j(this.avatar).css({"background-image":"url("+a.Avatar+")"}),j(this.container).prepend(b.avatar),j(this.links).append(this.edit),j(this.links).append(this.logout)):(j(this.container).prepend(b.logo),a.NeedToActivate?(q.bean.off(this.logout[0],"click"),q.bean.on(this.logout[0],"click",function(a){a.preventDefault(),q.helper.trackingReady()&&(TrackMan.useModule([TrackMan.Modules.BasicTracking],function(a){a.clickAction(d()+"-logout-click")}),TrackMan.useModule([TrackMan.Modules.AccountTracking],function(a){a.pages.signOut()})),n.logout()}),q.bean.off(this.activate[0],"click"),q.bean.on(this.activate[0],"click",function(a){a.preventDefault(),i()}),j(this.links).append(this.activate),j(this.links).append(this.logout)):(q.bean.off(this.login[0],"click"),q.bean.on(this.login[0],"click",function(a){a.preventDefault(),q.helper.trackingReady()&&TrackMan.useModule([TrackMan.Modules.BasicTracking],function(a){a.clickAction(d()+"-login-click")}),n.showLoginModal()}),j(this.links).append(this.login),j(this.links).append(this.register)),this.deferred.resolve()),!a.Authenticated&&!a.NeedToActivate||v.getNotifications?b.removeNotification():(v.getNotifications=!0,n.getProfileVersion({name:"LEGOID",callback:function(c){q.reqwest({url:p.Resources.NotificationService+"/"+a.PublicUserId+"/"+c+".jsonp?context=modal",type:"jsonp",jsonpCallback:"callback",jsonpCallbackName:"lidgetnotifications",success:function(a){a.Success&&a.Data.Notifications&&1==a.Data.Notifications.length&&b.addNotification(1,function(){switch(a.Data.Notifications[0].Target){case"_self":q.modal.open(a.Data.Notifications[0].Action)}},b.container[0])},complete:function(){v.getNotifications=!1,b.deferred.resolve()},error:function(){b.deferred.reject(new Error("No answer from notification service"))}})}}))}}var n,o,p,q,r,s,t,u,v,w,x,y=!1,z="LegoCom",A=function(){};return n={ui:{autoScale:function(a){try{q.ellipsisHelper.init(a)}catch(b){}}},subscribe:function(a){if("object"!=typeof a)throw new Error("You need to provide a configuration object for the subscribe method");var b=a.force||!1;if(!b&&!n.getAsync())throw new Error("You can't subscribe when the API isn't in async mode");if(a.event&&""!=a.event){var c=a.event,d=a.callback||A,e=a.scope||window;if(!(c in u))throw new Error("Event is not supported by subscribe method");u[c].push({callback:d,scope:e})}},unsubscribe:function(a){if("object"!=typeof a)throw new Error("You need to provide a configuration object for the unsubscribe method");if(!n.getAsync())throw new Error("You can't unsubscribe when the API isn't in async mode");var b=a.event;if(!(b in u))throw new Error("Event is not supported by unsubscribe method");u[b]=new Array},isReady:function(){return r},closeModal:function(){q.bean.fire(document,"LEGOID.ModalClose")},loadButton:function(a){var b=q.q.defer();"undefined"==typeof a&&(a={});var c,d={type:"auto",selector:"body",callback:A,scope:window},e=a.type||d.type,f=a.selector||d.selector,g=a.callback||d.callback,h=a.scope||d.scope,i=j(f).length;return j(f).each(function(a,d){c=new l,i==d+1?c.add(a,e,function(){b.resolve(),g.call(h)}):c.add(a,e)}),b.promise},loadBox:function(a){var b=q.q.defer();"undefined"==typeof a&&(a={});var c,d={selector:".LEGOIDBox",callback:A,scope:window},e=a.selector||d.selector,f=a.callback||d.callback,g=a.scope||d.scope;return this.getProfile({callback:function(a){j(e).each(function(d){d.canHaveChildren!==!1&&(c=new m,c.add(d,a).then(function(){s.push(c),f.call(g);try{q.ellipsisHelper.init()}catch(a){}b.resolve()}))})}}),b.promise},getSession:function(){var a=document.cookie.split(";"),b="00000000-0000-0000-0000-000000000000",c=0;if(0==document.cookie.length)return{id:b,version:c};for(var d=p.Cookies.SessionIdentityCookieName,e=0;e<a.length;e++){var f=a[e],g=f.split("=")[0].replace(/^\s+|\s+$/g,"");if(g==d){var h=f.split("=")[1];"undefined"!=h&&(h=h.replace(/^\s+|\s+$/g,"")),b=h}else if(0===g.indexOf(p.Cookies.SessionVersionCookieName)){var i=g.split(".");i[i.length-1]>c&&(c=1*i[i.length-1])}}return{id:b,version:c}},getProfile:function(a,b){"undefined"==typeof a&&(a={});var c=a.deferred||q.q.defer();b="undefined"==typeof b||b;var d=(new Date).getTime(),e=this.getSession(),f=e.id+"/"+e.version,g={callback:A,scope:window},h=a.scope||g.scope,i=a.callback||g.callback;try{delete this.session}catch(j){this.session=void 0}return b&&d<x.getProfile.timestamp+2e3&&x.getProfile.identifier==f&&null!==x.getProfile.content?(i.call(h,x.getProfile.content),c.resolve(x.getProfile.content),w.getProfile.length&&n.getProfile(w.getProfile.splice(0,1)[0]),c.promise):v.getProfile?(a.deferred=c,w.getProfile.push(a),c.promise):(v.getProfile=!0,q.reqwest({url:p.Resources.CurrentUserEndpoint+"/"+f,type:"jsonp",jsonpCallback:"callback",jsonpCallbackName:"lidgetprofile",error:function(a){i.call(h,!1,"Communication with user endpoint failed"),c.reject(new Error("Communication with user endpoint failed"))},success:function(a){a.Success?(x.getProfile={timestamp:(new Date).getTime(),identifier:f,content:a.Data},i.call(h,a.Data),c.resolve(a.Data)):(i.call(h,!1,"Communication with user endpoint failed"),c.reject(new Error("Communication with user endpoint failed")))},complete:function(){v.getProfile=!1,w.getProfile.length&&n.getProfile(w.getProfile.splice(0,1)[0])}}),c.promise)},clearCache:function(){x=h(),w=g(),v=f()},getProfileVersion:function(a){"undefined"==typeof a&&(a={});var b=q.q.defer(),c={callback:A,scope:window},d=a.callback||c.callback,e=a.scope||c.scope,f=a.name||"LEGOID",g=0;return this.getProfile().done(function(a){for(var c=a.Profiles,h=0,i=c.length;h<i;h++)if(c[h].Name.toLowerCase()==f.toLowerCase()){g=c[h].Version;break}b.resolve(g),d.call(e,g)}),b.promise},isAuthenticated:function(a){"undefined"==typeof a&&(a={});var b=q.q.defer(),c={callback:A,scope:window},d=a.callback||c.callback,e=a.scope||c.scope;return this.getProfile().done(function(a){a.Authenticated?(d.call(e,!0),b.resolve(!0)):(d.call(e,!1),b.resolve(!1))}),b.promise},enforceAcceptOfNewTermsOfService:function(a){this.getProfile({callback:function(b){if(b.AuthorizationLevel.Level>=20&&b.TosVersion<a.minimumRequiredVersion){var c=p.Resources.MustAcceptNewTermsofServiceUrl;b.IsChild&&(c=p.Resources.MustSendNewTermsOfServiceUrl),q.helper.redirect(q.helper.appendReturnUrl(c),"_top")}}})},verifyPassword:function(a){"undefined"==typeof a&&(a={});var b=this,c={async:b.getAsync(),callback:A,scope:window},d=a.async||c.async,e=a.callback||c.callback,f=a.scope||c.scope,g=LEGOID.Config.Resources.VerifyPasswordUrl||"/en-us/verifypassword?context=modal";d&&(q.bean.one(document,"LEGOID.VerifyPassword",function(){e.call(f,!0)}),g+=g.indexOf("?")!=-1?"&async=true":"?async=true"),q.modal.open(q.helper.appendReturnUrl(g,a.returnUrl||null),780,402)},showLoginModal:function(a){"undefined"==typeof a&&(a={});var b,c,d=this,e=a.experience||n.getExperience(),f={async:d.getAsync(),callback:A,scope:window,lite:!1},g=a.async||f.async,h=a.callback||f.callback,i=a.scope||f.scope,j=a.lite||f.lite;j?(b=p.Resources.LiteModalLoginUrl,c=433,d.isLite=!0):(b=p.Resources.ModalLoginUrl,c=450),b+=b.indexOf("?")!=-1?"&experience="+e:"?experience="+e,g&&(q.bean.one(document,"LEGOID.ModalClose",function(){n.isAuthenticated().done(function(a){h.call(i,a)})}),b+=b.indexOf("?")!=-1?"&async=true":"?async=true"),q.modal.open(q.helper.appendReturnUrl(b,a.returnUrl||null),780,c)},showRegisterModal:function(a){"undefined"==typeof a&&(a={});var b,c=this,d={callback:A,scope:window,lite:!1,parentFlow:!1},e=a.async||c.getAsync(),f=a.experience||n.getExperience(),g=a.callback||d.callback,h=a.scope||d.scope,i=a.lite||d.lite,j=a.parentFlow||d.parentFlow;i?(b=p.Resources.LiteModalRegistrationUrl,c.isLite=!0):b=p.Resources.ModalRegistrationUrl,b+=(b.indexOf("?")!==-1?"&":"?")+"experience="+f,j&&(b+=(b.indexOf("?")!==-1?"&":"?")+"parentFlow=true"),e&&(q.bean.one(document,"LEGOID.ModalClose",function(){n.isAuthenticated().done(function(a){g.call(h,a)})}),b+=b.indexOf("?")!==-1?"&async=true":"?async=true"),q.modal.open(q.helper.appendReturnUrl(b,a.returnUrl||null),780)},showMyAccountModal:function(){var a="boolean"==typeof false&&false;a?q.modal.open(LEGOID.Config.Resources.ModalMyAccountUrl,920,682):LEGOID.API.gotoEditProfile()},gotoLogin:function(){q.helper.redirect(q.helper.appendReturnUrl(p.Resources.LoginUrl),"_top")},gotoRegister:function(){q.helper.redirect(q.helper.appendReturnUrl(p.Resources.RegistrationUrl),"_top")},gotoEditProfile:function(){q.helper.redirect(q.helper.appendReturnUrl(p.Resources.EditProfileUrl),"_top")},setAsync:function(a){o=a},getAsync:function(){return o},setExperience:function(a){z=a},getExperience:function(){return z},getMultipleProfiles:function(a,b,c){var d=q.q.defer(),e="";if(b="function"!=typeof b?A:b,c="undefined"==typeof c?window:c,a.constructor!==Array)return d.reject(new Error("PUIDS must be an array of strings")),b.call(c,!1,"PUIDS must be an array of strings"),d.promise;if(a.length>50)return d.reject(new Error("The limit is 50 PUIDS pr. call")),b.call(c,!1,"The limit is 50 PUIDS pr. call"),d.promise;for(var f=0;f<a.length;f++){if("string"!=typeof a[f])return d.reject(new Error("One of the elements in the PUID array is not a string")),b.call(c,!1,"One of the elements in the PUID array is not a string"),d.promise;e+="puids="+a[f]+"&"}return e=e.substr(0,e.length-1),q.reqwest({url:p.Resources.MultipleProfilesEndpoint,type:"json",data:e,method:"post",contentType:"application/x-www-form-urlencoded",crossOrigin:!0,error:function(a){d.reject(new Error("Failed to fetch user profiles from endpoint")),b.call(c,!1,"Failed to fetch user profiles from endpoint")},success:function(a){a.Success?(d.resolve(a.Data),b.call(c,a.Data)):(d.reject(new Error("Failed to fetch user profiles from endpoint")),b.call(c,!1,"Failed to fetch user profiles from endpoint"))}}),d.promise},showGenericModal:function(a){q.modal.open(a.url,a.width,a.height)},logout:function(a){var b=q.q.defer();"undefined"==typeof a&&(a={});var c={async:n.getAsync(),callback:A,scope:window},d=a.async||c.async,e=a.callback||c.callback,f=a.scope||c.scope;return q.reqwest({url:p.Resources.LogoutUrl,type:"jsonp",jsonpCallback:"callback",jsonpCallbackName:"lidlogout",success:function(){d?(q.bean.fire(document,"LEGOID.Logout"),e.call(f,!0),b.resolve()):q.helper.reload()},complete:function(){v.logout=!1}}),b.promise},getAccessToken:function(a){"undefined"==typeof a&&(a={});var b=a.deferred||q.q.defer(),c=this.getSession(),d=c.id+"/"+c.version,e={callback:A,scope:window},f=a.scope||e.scope,g=a.callback||e.callback;try{delete this.session}catch(h){this.session=void 0}return q.reqwest({url:p.Resources.AccountAPIBaseUrl+"/v1/accesstokens/"+d+".jsonp",type:"jsonp",jsonpCallback:"callback",jsonpCallbackName:"lidgetAccessToken",success:function(a){g.call(f,a.Token),b.resolve(a.Token)},error:function(a){400==a.status?(g.call(f,!1,"Inconsistent or no session available on request"),b.reject(new Error("Inconsistent or no session available on request"))):(g.call(f,!1,"Communication with accesstoken endpoint failed"),b.reject(new Error("Communication with accesstoken endpoint failed")))}}),b.promise}},q=new b,q.bean.on(document,"LEGOID.Logout",function(){n.getProfile({callback:function(a){k(a)}});for(var a=0;a<u.logout.length;a++)u.logout[a].callback.call(u.logout[a].scope)}),q.bean.on(document,"LEGOID.ModalClose",function(){n.getProfile({callback:function(a){k(a)}});for(var a=0;a<u.modalClose.length;a++)u.modalClose[a].callback.call(u.modalClose[a].scope)}),q.bean.on(document,"LEGOID.ModalOpen",function(){for(var a=0;a<u.modalOpen.length;a++)u.modalOpen[a].callback.call(u.modalOpen[a].scope)}),q.bean.on(document,"LEGOID.Login",function(){n.getProfile({callback:function(a){k(a)}});for(var a=0;a<u.login.length;a++)u.login[a].callback.call(u.login[a].scope)}),q.bean.on(document,"LEGOID.VerifyPassword",function(){q.modal.close();for(var a=0;a<u.verifyPassword.length;a++)u.logout[a].callback.call(a.scope)}),q.bean.on(document,"LEGOID.ChildRegister",function(){for(var a=0;a<u.activationEmailSend.length;a++)u.activationEmailSend[a].callback.call(a.scope)}),q.bean.on(document,"LEGOID.ShowUnactivatedPage",function(){var a=n.getAsync();n.setAsync(!0),n.getProfile({callback:function(b){k(b),n.setAsync(a)}})}),q=new b(c),o=!1,r=!1,u={login:new Array,logout:new Array,modalClose:new Array,modalOpen:new Array,verifyPassword:new Array,activationEmailSend:new Array},n.clearCache(),e(),r=!0,p=a,this.api=n,this};return c.prototype.api={},function(a,b){var d=new c(a,b);return d.api}})},{"../../../lib/3rd/bean":3,"../../../lib/3rd/bonzo":4,"../../../lib/3rd/q":5,"../../../lib/3rd/qwery":6,"../../../lib/3rd/reqwest":8,"../../../lib/account/ellipsisHelper":9,"../../../lib/account/helper":10,"../../../lib/account/modal":11}],2:[function(require,module,exports){if("function"==typeof define&&"function (){throw\"LEGO.Web.SiteStats.js module loader pre-requisite 'requirejs' not found.\"}"==define.toString())try{delete define}catch(e){define=void 0}!function(){"use strict";function loadConfig(){reqwest({url:"https://lc-www-live-s.legocdn.com/r/account2/en-US/services/account/apiconfigservice.ashx",type:"jsonp",jsonpCallback:"callback",jsonpCallbackName:"lidapi",success:function(a){var b=window.LEGOID||{};b.Config=a,window.LEGOID=b,stylesheetLoader(b.Config.Resources.LegoIdStyleSheet,init,"legoidcss")}})}function executeCallback(){domready(function(){for(var a=window.LEGOIDReady.length,b=0;b<a;b++)"function"==typeof window.LEGOIDReady[0]&&window.LEGOIDReady[0].call(),window.LEGOIDReady.shift()})}function init(){window.LEGOID.API=api(LEGOID.Config);try{delete window.LEGOIDLoading}catch(a){window.LEGOIDLoading=void 0}executeCallback()}window.LEGOID="undefined"==typeof window.LEGOID?{}:window.LEGOID,window.LEGOIDReady="undefined"==typeof window.LEGOIDReady?[]:window.LEGOIDReady;var qwery=require("../../../lib/3rd/qwery"),bean=require("../../../lib/3rd/bean"),reqwest=require("../../../lib/3rd/reqwest"),domready=require("../../../lib/3rd/ready"),stylesheetLoader=require("../../../lib/account/stylesheetLoader"),helper=require("../../../lib/account/helper"),api=require("./api");if("function"==typeof window.LEGOIDReady&&(window.LEGOIDReady=[window.LEGOIDReady]),eval("'LEGOIDReady' != 'LEGOIDReady'"))switch(typeof LEGOIDReady){case"function":window.LEGOIDReady.push(LEGOIDReady);break;case"object":window.LEGOIDReady=window.LEGOIDReady.concat(LEGOIDReady)}if(!window.LEGOIDLoading){if(window.LEGOIDLoading=!0,"object"==typeof LEGOID.API&&"function"==typeof LEGOID.API.isReady&&LEGOID.API.isReady()){try{delete window.LEGOIDLoading}catch(e){window.LEGOIDLoading=void 0}return void executeCallback()}bean.setSelectorEngine(qwery);var postmessageSupported="undefined"!=typeof window.postMessage;if(postmessageSupported){var eventMethod=window.addEventListener?"addEventListener":"attachEvent",messageEvent="attachEvent"==eventMethod?"onmessage":"message";window[eventMethod](messageEvent,function(a){var b=helper.tryParsePostMessageJSON(a);b&&b.event&&RegExp(/^LEGOID\.\w+$/).test(b.event)&&bean.fire(document,b.event)},!1)}"undefined"!=typeof LEGOID&&LEGOID.Config?stylesheetLoader(LEGOID.Config.Resources.LegoIdStyleSheet,init,"legoidcss"):loadConfig()}}()},{"../../../lib/3rd/bean":3,"../../../lib/3rd/qwery":6,"../../../lib/3rd/ready":7,"../../../lib/3rd/reqwest":8,"../../../lib/account/helper":10,"../../../lib/account/stylesheetLoader":12,"./api":1}],3:[function(a,b,c){!function(a,c,d){"undefined"!=typeof b&&b.exports?b.exports=d():"function"==typeof define&&define.amd?define(d):c[a]=d()}("bean",this,function(a,b){a=a||"bean",b=b||this;var c,d=window,e=b[a],f=/[^\.]*(?=\..*)\.|.*/,g=/\..*/,h="addEventListener",i="removeEventListener",j=document||{},k=j.documentElement||{},l=k[h],m=l?h:"attachEvent",n={},o=Array.prototype.slice,p=function(a,b){return a.split(b||" ")},q=function(a){return"string"==typeof a},r=function(a){return"function"==typeof a},s="click dblclick mouseup mousedown contextmenu mousewheel mousemultiwheel DOMMouseScroll mouseover mouseout mousemove selectstart selectend keydown keypress keyup orientationchange focus blur change reset select submit load unload beforeunload resize move DOMContentLoaded readystatechange message error abort scroll ",t="show input invalid touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend textinputreadystatechange pageshow pagehide popstate hashchange offline online afterprint beforeprint dragstart dragenter dragover dragleave drag drop dragend loadstart progress suspend emptied stalled loadmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate play pause ratechange volumechange cuechange checking noupdate downloading cached updateready obsolete ",u=function(a,b,c){for(c=0;c<b.length;c++)b[c]&&(a[b[c]]=1);return a}({},p(s+(l?t:""))),v=function(){var a="compareDocumentPosition"in k?function(a,b){return b.compareDocumentPosition&&16===(16&b.compareDocumentPosition(a))}:"contains"in k?function(a,b){return b=9===b.nodeType||b===window?k:b,b!==a&&b.contains(a)}:function(a,b){for(;a=a.parentNode;)if(a===b)return 1;return 0},b=function(b){var c=b.relatedTarget;return c?c!==this&&"xul"!==c.prefix&&!/document/.test(this.toString())&&!a(c,this):null==c};return{mouseenter:{base:"mouseover",condition:b},mouseleave:{base:"mouseout",condition:b},mousewheel:{base:/Firefox/.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"}}}(),w=function(){var a=p("altKey attrChange attrName bubbles cancelable ctrlKey currentTarget detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey srcElement target timeStamp type view which propertyName"),b=a.concat(p("button buttons clientX clientY dataTransfer fromElement offsetX offsetY pageX pageY screenX screenY toElement")),c=b.concat(p("wheelDelta wheelDeltaX wheelDeltaY wheelDeltaZ axis")),e=a.concat(p("char charCode key keyCode keyIdentifier keyLocation location")),f=a.concat(p("data")),g=a.concat(p("touches targetTouches changedTouches scale rotation")),h=a.concat(p("data origin source")),i=a.concat(p("state")),l=/over|out/,m=[{reg:/key/i,fix:function(a,b){return b.keyCode=a.keyCode||a.which,e}},{reg:/click|mouse(?!(.*wheel|scroll))|menu|drag|drop/i,fix:function(a,c,d){return c.rightClick=3===a.which||2===a.button,c.pos={x:0,y:0},a.pageX||a.pageY?(c.clientX=a.pageX,c.clientY=a.pageY):(a.clientX||a.clientY)&&(c.clientX=a.clientX+j.body.scrollLeft+k.scrollLeft,c.clientY=a.clientY+j.body.scrollTop+k.scrollTop),l.test(d)&&(c.relatedTarget=a.relatedTarget||a[("mouseover"==d?"from":"to")+"Element"]),b}},{reg:/mouse.*(wheel|scroll)/i,fix:function(){return c}},{reg:/^text/i,fix:function(){return f}},{reg:/^touch|^gesture/i,fix:function(){return g}},{reg:/^message$/i,fix:function(){return h}},{reg:/^popstate$/i,fix:function(){return i}},{reg:/.*/,fix:function(){return a}}],n={},o=function(a,b,c){if(arguments.length&&(a=a||((b.ownerDocument||b.document||b).parentWindow||d).event,this.originalEvent=a,this.isNative=c,this.isBean=!0,a)){var e,f,g,h,i,j=a.type,k=a.target||a.srcElement;if(this.target=k&&3===k.nodeType?k.parentNode:k,c){if(i=n[j],!i)for(e=0,f=m.length;e<f;e++)if(m[e].reg.test(j)){n[j]=i=m[e].fix;break}for(h=i(a,this,j),e=h.length;e--;)!((g=h[e])in this)&&g in a&&(this[g]=a[g])}}};return o.prototype.preventDefault=function(){this.originalEvent.preventDefault?this.originalEvent.preventDefault():this.originalEvent.returnValue=!1},o.prototype.stopPropagation=function(){this.originalEvent.stopPropagation?this.originalEvent.stopPropagation():this.originalEvent.cancelBubble=!0},o.prototype.stop=function(){this.preventDefault(),this.stopPropagation(),this.stopped=!0},o.prototype.stopImmediatePropagation=function(){this.originalEvent.stopImmediatePropagation&&this.originalEvent.stopImmediatePropagation(),this.isImmediatePropagationStopped=function(){return!0}},o.prototype.isImmediatePropagationStopped=function(){return this.originalEvent.isImmediatePropagationStopped&&this.originalEvent.isImmediatePropagationStopped()},o.prototype.clone=function(a){var b=new o(this,this.element,this.isNative);return b.currentTarget=a,b},o}(),x=function(a,b){return l||b||a!==j&&a!==d?a:k},y=function(){var a=function(a,b,c,d){var e=function(c,e){return b.apply(a,d?o.call(e,c?0:1).concat(d):e)},f=function(c,d){return b.__beanDel?b.__beanDel.ft(c.target,a):d},g=c?function(a){var b=f(a,this);if(c.apply(b,arguments))return a&&(a.currentTarget=b),e(a,arguments)}:function(a){return b.__beanDel&&(a=a.clone(f(a))),e(a,arguments)};return g.__beanDel=b.__beanDel,g},b=function(b,c,d,e,f,g,h){var i,j=v[c];"unload"==c&&(d=D(E,b,c,d,e)),j&&(j.condition&&(d=a(b,d,j.condition,g)),c=j.base||c),this.isNative=i=u[c]&&!!b[m],this.customType=!l&&!i&&c,this.element=b,this.type=c,this.original=e,this.namespaces=f,this.eventType=l||i?c:"propertychange",this.target=x(b,i),this[m]=!!this.target[m],this.root=h,this.handler=a(b,d,null,g)};return b.prototype.inNamespaces=function(a){var b,c,d=0;if(!a)return!0;if(!this.namespaces)return!1;for(b=a.length;b--;)for(c=this.namespaces.length;c--;)a[b]==this.namespaces[c]&&d++;return a.length===d},b.prototype.matches=function(a,b,c){return!(this.element!==a||b&&this.original!==b||c&&this.handler!==c)},b}(),z=function(){var a={},b=function(c,d,e,f,g,h){var i=g?"r":"$";if(d&&"*"!=d){var j,k=0,l=a[i+d],m="*"==c;if(!l)return;for(j=l.length;k<j;k++)if((m||l[k].matches(c,e,f))&&!h(l[k],l,k,d))return}else for(var n in a)n.charAt(0)==i&&b(c,n.substr(1),e,f,g,h)},c=function(b,c,d,e){var f,g=a[(e?"r":"$")+c];if(g)for(f=g.length;f--;)if(!g[f].root&&g[f].matches(b,d,null))return!0;return!1},d=function(a,c,d,e){var f=[];return b(a,c,d,null,e,function(a){return f.push(a)}),f},e=function(b){var c=!b.root&&!this.has(b.element,b.type,null,!1),d=(b.root?"r":"$")+b.type;return(a[d]||(a[d]=[])).push(b),c},f=function(c){b(c.element,c.type,null,c.handler,c.root,function(b,c,d){return c.splice(d,1),b.removed=!0,0===c.length&&delete a[(b.root?"r":"$")+b.type],!1})},g=function(){var b,c=[];for(b in a)"$"==b.charAt(0)&&(c=c.concat(a[b]));return c};return{has:c,get:d,put:e,del:f,entries:g}}(),A=function(a){c=arguments.length?a:j.querySelectorAll?function(a,b){return b.querySelectorAll(a)}:function(){throw new Error("Bean: No selector engine installed")}},B=function(a,b){if(l||!b||!a||a.propertyName=="_on"+b){var c=z.get(this,b||a.type,null,!1),d=c.length,e=0;for(a=new w(a,this,(!0)),b&&(a.type=b);e<d&&!a.isImmediatePropagationStopped();e++)c[e].removed||c[e].handler.call(this,a)}},C=l?function(a,b,c){a[c?h:i](b,B,!1)}:function(a,b,c,d){var e;c?(z.put(e=new y(a,d||b,function(b){B.call(a,b,d)},B,null,null,(!0))),d&&null==a["_on"+d]&&(a["_on"+d]=0),e.target.attachEvent("on"+e.eventType,e.handler)):(e=z.get(a,d||b,B,!0)[0],e&&(e.target.detachEvent("on"+e.eventType,e.handler),z.del(e)))},D=function(a,b,c,d,e){return function(){d.apply(this,arguments),a(b,c,e)}},E=function(a,b,c,d){var e,f,h=b&&b.replace(g,""),i=z.get(a,h,null,!1),j={};for(e=0,f=i.length;e<f;e++)(!c||i[e].original===c)&&i[e].inNamespaces(d)&&(z.del(i[e]),!j[i[e].eventType]&&i[e][m]&&(j[i[e].eventType]={t:i[e].eventType,c:i[e].type}));for(e in j)z.has(a,j[e].t,null,!1)||C(a,j[e].t,!1,j[e].c)},F=function(a,b){var d=function(b,d){for(var e,f=q(a)?c(a,d):a;b&&b!==d;b=b.parentNode)for(e=f.length;e--;)if(f[e]===b)return b},e=function(a){var c=d(a.target,this);c&&b.apply(c,arguments)};return e.__beanDel={ft:d,selector:a},e},G=l?function(a,b,c){var e=j.createEvent(a?"HTMLEvents":"UIEvents");e[a?"initEvent":"initUIEvent"](b,!0,!0,d,1),c.dispatchEvent(e)}:function(a,b,c){c=x(c,a),a?c.fireEvent("on"+b,j.createEventObject()):c["_on"+b]++},H=function(a,b,c){var d,e,h,i,j=q(b);if(j&&b.indexOf(" ")>0){for(b=p(b),i=b.length;i--;)H(a,b[i],c);return a}if(e=j&&b.replace(g,""),e&&v[e]&&(e=v[e].base),!b||j)(h=j&&b.replace(f,""))&&(h=p(h,".")),E(a,e,c,h);else if(r(b))E(a,null,b);else for(d in b)b.hasOwnProperty(d)&&H(a,d,b[d]);return a},I=function(a,b,d,e){var h,i,j,k,l,q,s;{if(void 0!==d||"object"!=typeof b){for(r(d)?(l=o.call(arguments,3),e=h=d):(h=e,l=o.call(arguments,4),e=F(d,h,c)),j=p(b),this===n&&(e=D(H,a,b,e,h)),k=j.length;k--;)s=z.put(q=new y(a,j[k].replace(g,""),e,h,p(j[k].replace(f,""),"."),l,(!1))),q[m]&&s&&C(a,q.eventType,!0,q.customType);return a}for(i in b)b.hasOwnProperty(i)&&I.call(this,a,i,b[i])}},J=function(a,b,c,d){return I.apply(null,q(c)?[a,c,b,d].concat(arguments.length>3?o.call(arguments,5):[]):o.call(arguments))},K=function(){return I.apply(n,arguments)},L=function(a,b,c){var d,e,h,i,j,k=p(b);for(d=k.length;d--;)if(b=k[d].replace(g,""),(i=k[d].replace(f,""))&&(i=p(i,".")),i||c||!a[m])for(j=z.get(a,b,null,!1),c=[!1].concat(c),e=0,h=j.length;e<h;e++)j[e].inNamespaces(i)&&j[e].handler.apply(a,c);else G(u[b],b,a);return a},M=function(a,b,c){for(var d,e,f=z.get(b,c,null,!1),g=f.length,h=0;h<g;h++)f[h].original&&(d=[a,f[h].type],(e=f[h].handler.__beanDel)&&d.push(e.selector),d.push(f[h].original),I.apply(null,d));return a},N={on:I,add:J,one:K,off:H,remove:H,clone:M,fire:L,setSelectorEngine:A,noConflict:function(){return b[a]=e,this}};if(d.attachEvent){var O=function(){var a,b=z.entries();for(a in b)b[a].type&&"unload"!==b[a].type&&H(b[a].element,b[a].type);d.detachEvent("onunload",O),d.CollectGarbage&&d.CollectGarbage()};d.attachEvent("onunload",O)}return A(),N})},{}],4:[function(a,b,c){!function(a,c,d){"undefined"!=typeof b&&b.exports?b.exports=d():"function"==typeof define&&define.amd?define(d):c[a]=d()}("bonzo",this,function(){function a(a){return a&&a.nodeName&&(1==a.nodeType||11==a.nodeType)}function b(b,c,d){var e,f,g;if("string"==typeof b)return v.create(b);if(a(b)&&(b=[b]),d){for(g=[],e=0,f=b.length;e<f;e++)g[e]=r(c,b[e]);return g}return b}function c(a){return new RegExp("(^|\\s+)"+a+"(\\s+|$)")}function d(a,b,c,d){for(var e,f=0,g=a.length;f<g;f++)e=d?a.length-f-1:f,b.call(c||a[e],a[e],e,a);return a}function e(b,c,d){for(var f=0,g=b.length;f<g;f++)a(b[f])&&(e(b[f].childNodes,c,d),c.call(d||b[f],b[f],f,b));return b}function f(a){return a.replace(/-(.)/g,function(a,b){return b.toUpperCase()})}function g(a){return a?a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase():a}function h(a){a[T]("data-node-uid")||a[S]("data-node-uid",++O);var b=a[T]("data-node-uid");return N[b]||(N[b]={})}function i(a){var b=a[T]("data-node-uid");b&&delete N[b]}function j(a){var b;try{return null===a||void 0===a?void 0:"true"===a||"false"!==a&&("null"===a?null:(b=parseFloat(a))==a?b:a)}catch(c){}}function k(a,b,c){for(var d=0,e=a.length;d<e;++d)if(b.call(c||null,a[d],d,a))return!0;return!1}function l(a){return"transform"==a&&(a=V.transform)||/^transform-?[Oo]rigin$/.test(a)&&(a=V.transform+"Origin")||"float"==a&&(a=V.cssFloat),a?f(a):null}function m(a,c,e,f){var g=0,h=c||this,i=[],j=$&&"string"==typeof a&&"<"!=a.charAt(0)?$(a):a;return d(b(j),function(a,b){d(h,function(c){e(a,i[g++]=b>0?r(h,c):c)},null,f)},this,f),h.length=g,d(i,function(a){h[--g]=a},null,!f),h}function n(a,b,c){var d=v(a),e=d.css("position"),f=d.offset(),g="relative",h=e==g,i=[parseInt(d.css("left"),10),parseInt(d.css("top"),10)];"static"==e&&(d.css("position",g),e=g),isNaN(i[0])&&(i[0]=h?0:a.offsetLeft),isNaN(i[1])&&(i[1]=h?0:a.offsetTop),null!=b&&(a.style.left=b-f.left+i[0]+R),null!=c&&(a.style.top=c-f.top+i[1]+R)}function o(a,b){return"function"==typeof b?b(a):b}function p(a,b,c){var d=this[0];return d?null==a&&null==b?(s(d)?t():{x:d.scrollLeft,y:d.scrollTop})[c]:(s(d)?z.scrollTo(a,b):(null!=a&&(d.scrollLeft=a),null!=b&&(d.scrollTop=b)),this):this}function q(a){if(this.length=0,a){a="string"==typeof a||a.nodeType||"undefined"==typeof a.length?[a]:a,this.length=a.length;for(var b=0;b<a.length;b++)this[b]=a[b]}}function r(a,b){var c,d,e,f=b.cloneNode(!0);if(a.$&&"function"==typeof a.cloneEvents)for(a.$(f).cloneEvents(b),c=a.$(f).find("*"),d=a.$(b).find("*"),e=0;e<d.length;e++)a.$(c[e]).cloneEvents(d[e]);return f}function s(a){return a===z||/^(?:body|html)$/i.test(a.tagName)}function t(){return{x:z.pageXOffset||B.scrollLeft,y:z.pageYOffset||B.scrollTop}}function u(a){var b=document.createElement("script"),c=a.match(F);return b.src=c[1],b}function v(a){return new q(a)}var w,x,y,z=window,A=z.document,B=A.documentElement,C="parentNode",D=/^(checked|value|selected|disabled)$/i,E=/^(select|fieldset|table|tbody|tfoot|td|tr|colgroup)$/i,F=/\s*<script +src=['"]([^'"]+)['"]>/,G=["<table>","</table>",1],H=["<table><tbody><tr>","</tr></tbody></table>",3],I=["<select>","</select>",1],J=["_","",0,1],K={thead:G,tbody:G,tfoot:G,colgroup:G,caption:G,tr:["<table><tbody>","</tbody></table>",2],th:H,td:H,col:["<table><colgroup>","</colgroup></table>",2],fieldset:["<form>","</form>",1],legend:["<form><fieldset>","</fieldset></form>",2],option:I,optgroup:I,script:J,style:J,link:J,param:J,base:J},L=/^(checked|selected|disabled)$/,M=/msie/i.test(navigator.userAgent),N={},O=0,P=/^-?[\d\.]+$/,Q=/^data-(.+)$/,R="px",S="setAttribute",T="getAttribute",U="getElementsByTagName",V=function(){var a=A.createElement("p");return a.innerHTML='<a href="#x">x</a><table style="float:left;"></table>',{hrefExtended:"#x"!=a[U]("a")[0][T]("href"),autoTbody:0!==a[U]("tbody").length,computedStyle:A.defaultView&&A.defaultView.getComputedStyle,cssFloat:a[U]("table")[0].style.styleFloat?"styleFloat":"cssFloat",transform:function(){var b,c=["transform","webkitTransform","MozTransform","OTransform","msTransform"];for(b=0;b<c.length;b++)if(c[b]in a.style)return c[b]}(),classList:"classList"in a,opasity:function(){return"undefined"!=typeof A.createElement("a").style.opacity}()}}(),W=/(^\s*|\s*$)/g,X=/\s+/,Y=String.prototype.toString,Z={lineHeight:1,zoom:1,zIndex:1,opacity:1,boxFlex:1,WebkitBoxFlex:1,MozBoxFlex:1},$=A.querySelectorAll&&function(a){return A.querySelectorAll(a)},_=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(W,"")},aa=V.computedStyle?function(a,b){var c=null,d=A.defaultView.getComputedStyle(a,"");return d&&(c=d[b]),a.style[b]||c}:M&&B.currentStyle?function(a,b){var c,d;if("opacity"==b&&!V.opasity){c=100;try{c=a.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(e){try{c=a.filters("alpha").opacity}catch(f){}}return c/100}return d=a.currentStyle?a.currentStyle[b]:null,a.style[b]||d}:function(a,b){return a.style[b]};return V.classList?(w=function(a,b){return a.classList.contains(b)},x=function(a,b){a.classList.add(b)},y=function(a,b){a.classList.remove(b)}):(w=function(a,b){return c(b).test(a.className)},x=function(a,b){a.className=_(a.className+" "+b)},y=function(a,b){a.className=_(a.className.replace(c(b)," "))}),q.prototype={get:function(a){return this[a]||null},each:function(a,b){return d(this,a,b)},deepEach:function(a,b){return e(this,a,b)},map:function(a,b){var c,d,e=[];for(d=0;d<this.length;d++)c=a.call(this,this[d],d),b?b(c)&&e.push(c):e.push(c);return e},html:function(a,c){var e=c?void 0===B.textContent?"innerText":"textContent":"innerHTML",f=this,g=function(c,e){d(b(a,f,e),function(a){c.appendChild(a)})},h=function(b,d){try{if(c||"string"==typeof a&&!E.test(b.tagName))return b[e]=a}catch(f){}g(b,d)};return"undefined"!=typeof a?this.empty().each(h):this[0]?this[0][e]:""},text:function(a){return this.html(a,!0)},append:function(a){var c=this;return this.each(function(e,f){d(b(a,c,f),function(a){e.appendChild(a)})})},prepend:function(a){var c=this;return this.each(function(e,f){var g=e.firstChild;d(b(a,c,f),function(a){e.insertBefore(a,g)})})},appendTo:function(a,b){return m.call(this,a,b,function(a,b){a.appendChild(b)})},prependTo:function(a,b){return m.call(this,a,b,function(a,b){a.insertBefore(b,a.firstChild)},1)},before:function(a){var c=this;return this.each(function(e,f){d(b(a,c,f),function(a){e[C].insertBefore(a,e)})})},after:function(a){var c=this;return this.each(function(e,f){d(b(a,c,f),function(a){e[C].insertBefore(a,e.nextSibling)},null,1)})},insertBefore:function(a,b){return m.call(this,a,b,function(a,b){a[C].insertBefore(b,a)})},insertAfter:function(a,b){return m.call(this,a,b,function(a,b){var c=a.nextSibling;c?a[C].insertBefore(b,c):a[C].appendChild(b)},1)},replaceWith:function(a){return v(b(a)).insertAfter(this),this.remove()},clone:function(a){var b,c,d=[];for(c=0,b=this.length;c<b;c++)d[c]=r(a||this,this[c]);return v(d)},addClass:function(a){return a=Y.call(a).split(X),this.each(function(b){d(a,function(a){a&&!w(b,o(b,a))&&x(b,o(b,a))})})},removeClass:function(a){return a=Y.call(a).split(X),this.each(function(b){d(a,function(a){a&&w(b,o(b,a))&&y(b,o(b,a))})})},hasClass:function(a){return a=Y.call(a).split(X),k(this,function(b){return k(a,function(a){return a&&w(b,a)})})},toggleClass:function(a,b){return a=Y.call(a).split(X),this.each(function(c){d(a,function(a){a&&("undefined"!=typeof b?b?!w(c,a)&&x(c,a):y(c,a):w(c,a)?y(c,a):x(c,a))})})},show:function(a){return a="string"==typeof a?a:"",this.each(function(b){b.style.display=a})},hide:function(){return this.each(function(a){a.style.display="none"})},toggle:function(a,b){return b="string"==typeof b?b:"","function"!=typeof a&&(a=null),this.each(function(c){c.style.display=c.offsetWidth||c.offsetHeight?"none":b,a&&a.call(c)})},first:function(){return v(this.length?this[0]:[])},last:function(){return v(this.length?this[this.length-1]:[])},next:function(){return this.related("nextSibling")},previous:function(){return this.related("previousSibling")},parent:function(){return this.related(C)},related:function(a){return v(this.map(function(b){for(b=b[a];b&&1!==b.nodeType;)b=b[a];return b||0},function(a){return a}))},focus:function(){return this.length&&this[0].focus(),this},blur:function(){return this.length&&this[0].blur(),this},css:function(a,b){function c(a,b,c){for(var d in e)if(e.hasOwnProperty(d)){c=e[d],(b=l(d))&&P.test(c)&&!(b in Z)&&(c+=R);try{a.style[b]=o(a,c)}catch(f){}}}var d,e=a;return void 0===b&&"string"==typeof a?(b=this[0],b?b===A||b===z?(d=b===A?v.doc():v.viewport(),"width"==a?d.width:"height"==a?d.height:""):(a=l(a))?aa(b,a):null:null):("string"==typeof a&&(e={},e[a]=b),M&&e.opacity&&(e.filter="alpha(opacity="+100*e.opacity+")",e.zoom=a.zoom||1,delete e.opacity),this.each(c))},offset:function(a,b){if(!a||"object"!=typeof a||"number"!=typeof a.top&&"number"!=typeof a.left){if("number"==typeof a||"number"==typeof b)return this.each(function(c){n(c,a,b)});if(!this[0])return{top:0,left:0,height:0,width:0};var c=this[0],d=c.ownerDocument.documentElement,e=c.getBoundingClientRect(),f=t(),g=c.offsetWidth,h=c.offsetHeight,i=e.top+f.y-Math.max(0,d&&d.clientTop,A.body.clientTop),j=e.left+f.x-Math.max(0,d&&d.clientLeft,A.body.clientLeft);return{top:i,left:j,height:h,width:g}}return this.each(function(b){n(b,a.left,a.top)})},dim:function(){if(!this.length)return{height:0,width:0};var a=this[0],b=9==a.nodeType&&a.documentElement,c=b||!a.style||a.offsetWidth||a.offsetHeight?null:function(b){var c={position:a.style.position||"",visibility:a.style.visibility||"",display:a.style.display||""};return b.first().css({position:"absolute",visibility:"hidden",display:"block"}),c}(this),d=b?Math.max(a.body.scrollWidth,a.body.offsetWidth,b.scrollWidth,b.offsetWidth,b.clientWidth):a.offsetWidth,e=b?Math.max(a.body.scrollHeight,a.body.offsetHeight,b.scrollHeight,b.offsetHeight,b.clientHeight):a.offsetHeight;return c&&this.first().css(c),{height:e,width:d}},attr:function(a,b){var c,d=this[0];if("string"==typeof a||a instanceof String)return"undefined"==typeof b?d?D.test(a)?!(!L.test(a)||"string"!=typeof d[a])||d[a]:"href"!=a&&"src"!=a||!V.hrefExtended?d[T](a):d[T](a,2):null:this.each(function(c){D.test(a)?c[a]=o(c,b):c[S](a,o(c,b))});for(c in a)a.hasOwnProperty(c)&&this.attr(c,a[c]);return this},removeAttr:function(a){return this.each(function(b){L.test(a)?b[a]=!1:b.removeAttribute(a)})},val:function(a){return"string"==typeof a?this.attr("value",a):this.length?this[0].value:null},data:function(a,b){var c,e,i=this[0];return"undefined"==typeof b?i?(c=h(i),"undefined"==typeof a?(d(i.attributes,function(a){(e=(""+a.name).match(Q))&&(c[f(e[1])]=j(a.value))}),c):("undefined"==typeof c[a]&&(c[a]=j(this.attr("data-"+g(a)))),c[a])):null:this.each(function(c){h(c)[a]=b})},remove:function(){return this.deepEach(i),this.detach()},empty:function(){return this.each(function(a){for(e(a.childNodes,i);a.firstChild;)a.removeChild(a.firstChild)})},detach:function(){return this.each(function(a){a[C]&&a[C].removeChild(a)})},scrollTop:function(a){return p.call(this,null,a,"y")},scrollLeft:function(a){return p.call(this,a,null,"x")}},v.setQueryEngine=function(a){$=a,delete v.setQueryEngine},v.aug=function(a,b){for(var c in a)a.hasOwnProperty(c)&&((b||q.prototype)[c]=a[c])},v.create=function(b){return"string"==typeof b&&""!==b?function(){if(F.test(b))return[u(b)];var a=b.match(/^\s*<([^\s>]+)/),c=A.createElement("div"),e=[],f=a?K[a[1].toLowerCase()]:null,g=f?f[2]+1:1,h=f&&f[3],i=C,j=V.autoTbody&&f&&"<table>"==f[0]&&!/<tbody/i.test(b);for(c.innerHTML=f?f[0]+b+f[1]:b;g--;)c=c.firstChild;h&&c&&1!==c.nodeType&&(c=c.nextSibling);do(!a||1==c.nodeType)&&(!j||c.tagName&&"TBODY"!=c.tagName)&&e.push(c);while(c=c.nextSibling);return d(e,function(a){a[i]&&a[i].removeChild(a)}),e}():a(b)?[b.cloneNode(!0)]:[]},v.doc=function(){var a=v.viewport();return{width:Math.max(A.body.scrollWidth,B.scrollWidth,a.width),height:Math.max(A.body.scrollHeight,B.scrollHeight,a.height)}},v.firstChild=function(a){for(var b,c=a.childNodes,d=0,e=c&&c.length||0;d<e;d++)1===c[d].nodeType&&(b=c[e=d]);return b},v.viewport=function(){return{width:M?B.clientWidth:self.innerWidth,height:M?B.clientHeight:self.innerHeight}},v.isAncestor="compareDocumentPosition"in B?function(a,b){return 16==(16&a.compareDocumentPosition(b))}:"contains"in B?function(a,b){return a!==b&&a.contains(b)}:function(a,b){for(;b=b[C];)if(b===a)return!0;return!1},v})},{}],5:[function(a,b,c){(function(a){!function(a){if("function"==typeof bootstrap)bootstrap("promise",a);else if("object"==typeof c)b.exports=a();else if("function"==typeof define&&define.amd)define(a);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=a}else Q=a()}(function(){"use strict";function b(a){return function(){return W.apply(a,arguments)}}function c(a){return a===Object(a)}function d(a){return"[object StopIteration]"===ca(a)||a instanceof S}function e(a,b){if(P&&b.stack&&"object"==typeof a&&null!==a&&a.stack&&a.stack.indexOf(da)===-1){for(var c=[],d=b;d;d=d.source)d.stack&&c.unshift(d.stack);c.unshift(a.stack);var e=c.join("\n"+da+"\n");a.stack=f(e)}}function f(a){for(var b=a.split("\n"),c=[],d=0;d<b.length;++d){var e=b[d];i(e)||g(e)||!e||c.push(e)}return c.join("\n")}function g(a){return a.indexOf("(module.js:")!==-1||a.indexOf("(node.js:")!==-1}function h(a){var b=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(a);if(b)return[b[1],Number(b[2])];var c=/at ([^ ]+):(\d+):(?:\d+)$/.exec(a);if(c)return[c[1],Number(c[2])];var d=/.*@(.+):(\d+)$/.exec(a);return d?[d[1],Number(d[2])]:void 0}function i(a){var b=h(a);if(!b)return!1;var c=b[0],d=b[1];return c===R&&d>=T&&d<=ha}function j(){if(P)try{throw new Error}catch(a){var b=a.stack.split("\n"),c=b[0].indexOf("@")>0?b[1]:b[2],d=h(c);if(!d)return;return R=d[0],d[1]}}function k(a,b,c){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(b+" is deprecated, use "+c+" instead.",new Error("").stack),a.apply(a,arguments)}}function l(a){return s(a)?a:t(a)?C(a):B(a)}function m(){function a(a){b=a,f.source=a,Y(c,function(b,c){V(function(){a.promiseDispatch.apply(a,c)})},void 0),c=void 0,d=void 0}var b,c=[],d=[],e=_(m.prototype),f=_(p.prototype);if(f.promiseDispatch=function(a,e,f){var g=X(arguments);c?(c.push(g),"when"===e&&f[1]&&d.push(f[1])):V(function(){b.promiseDispatch.apply(b,g)})},f.valueOf=function(){if(c)return f;var a=r(b);return s(a)&&(b=a),a},f.inspect=function(){return b?b.inspect():{state:"pending"}},l.longStackSupport&&P)try{throw new Error}catch(g){f.stack=g.stack.substring(g.stack.indexOf("\n")+1)}return e.promise=f,e.resolve=function(c){b||a(l(c))},e.fulfill=function(c){b||a(B(c))},e.reject=function(c){b||a(A(c))},e.notify=function(a){b||Y(d,function(b,c){V(function(){c(a)})},void 0)},e}function n(a){if("function"!=typeof a)throw new TypeError("resolver must be a function.");var b=m();try{a(b.resolve,b.reject,b.notify)}catch(c){b.reject(c)}return b.promise}function o(a){return n(function(b,c){for(var d=0,e=a.length;d<e;d++)l(a[d]).then(b,c)})}function p(a,b,c){void 0===b&&(b=function(a){return A(new Error("Promise does not support operation: "+a))}),void 0===c&&(c=function(){return{state:"unknown"}});var d=_(p.prototype);if(d.promiseDispatch=function(c,e,f){var g;try{g=a[e]?a[e].apply(d,f):b.call(d,e,f)}catch(h){g=A(h)}c&&c(g)},d.inspect=c,c){var e=c();"rejected"===e.state&&(d.exception=e.reason),d.valueOf=function(){var a=c();return"pending"===a.state||"rejected"===a.state?d:a.value}}return d}function q(a,b,c,d){return l(a).then(b,c,d)}function r(a){if(s(a)){var b=a.inspect();if("fulfilled"===b.state)return b.value}return a}function s(a){return c(a)&&"function"==typeof a.promiseDispatch&&"function"==typeof a.inspect}function t(a){return c(a)&&"function"==typeof a.then}function u(a){return s(a)&&"pending"===a.inspect().state}function v(a){return!s(a)||"fulfilled"===a.inspect().state}function w(a){return s(a)&&"rejected"===a.inspect().state}function x(){ea.length=0,fa.length=0,ga||(ga=!0)}function y(a,b){ga&&(fa.push(a),b&&"undefined"!=typeof b.stack?ea.push(b.stack):ea.push("(no stack) "+b))}function z(a){if(ga){var b=Z(fa,a);b!==-1&&(fa.splice(b,1),ea.splice(b,1))}}function A(a){var b=p({when:function(b){return b&&z(this),b?b(a):this}},function(){return this},function(){return{state:"rejected",reason:a}});return y(b,a),b}function B(a){return p({when:function(){return a},get:function(b){return a[b]},set:function(b,c){a[b]=c},"delete":function(b){delete a[b]},post:function(b,c){return null===b||void 0===b?a.apply(void 0,c):a[b].apply(a,c)},apply:function(b,c){return a.apply(b,c)},keys:function(){return ba(a)}},void 0,function(){return{state:"fulfilled",value:a}})}function C(a){var b=m();return V(function(){try{a.then(b.resolve,b.reject,b.notify)}catch(c){b.reject(c)}}),b.promise}function D(a){return p({isDef:function(){}},function(b,c){return J(a,b,c)},function(){return l(a).inspect()})}function E(a,b,c){return l(a).spread(b,c)}function F(a){return function(){function b(a,b){var g;if("undefined"==typeof StopIteration){try{g=c[a](b)}catch(h){return A(h)}return g.done?l(g.value):q(g.value,e,f)}try{g=c[a](b)}catch(h){return d(h)?l(h.value):A(h)}return q(g,e,f)}var c=a.apply(this,arguments),e=b.bind(b,"next"),f=b.bind(b,"throw");return e()}}function G(a){l.done(l.async(a)())}function H(a){throw new S(a)}function I(a){return function(){return E([this,K(arguments)],function(b,c){return a.apply(b,c)})}}function J(a,b,c){return l(a).dispatch(b,c)}function K(a){return q(a,function(a){var b=0,c=m();return Y(a,function(d,e,f){var g;s(e)&&"fulfilled"===(g=e.inspect()).state?a[f]=g.value:(++b,q(e,function(d){a[f]=d,0===--b&&c.resolve(a)},c.reject,function(a){c.notify({index:f,value:a})}))},void 0),0===b&&c.resolve(a),c.promise})}function L(a){return q(a,function(a){return a=$(a,l),q(K($(a,function(a){return q(a,U,U)})),function(){return a})})}function M(a){return l(a).allSettled()}function N(a,b){return l(a).then(void 0,void 0,b)}function O(a,b){return l(a).nodeify(b)}var P=!1;try{throw new Error}catch(Q){P=!!Q.stack}var R,S,T=j(),U=function(){},V=function(){function b(){for(;c.next;){c=c.next;var a=c.task;c.task=void 0;var d=c.domain;d&&(c.domain=void 0,d.enter());try{a()}catch(f){if(g)throw d&&d.exit(),setTimeout(b,0),d&&d.enter(),f;setTimeout(function(){throw f},0)}d&&d.exit()}e=!1}var c={task:void 0,next:null},d=c,e=!1,f=void 0,g=!1;if(V=function(b){d=d.next={task:b,domain:g&&a.domain,next:null},e||(e=!0,f())},"undefined"!=typeof a&&a.nextTick)g=!0,f=function(){a.nextTick(b)};else if("function"==typeof setImmediate)f="undefined"!=typeof window?setImmediate.bind(window,b):function(){setImmediate(b)};else if("undefined"!=typeof MessageChannel){var h=new MessageChannel;h.port1.onmessage=function(){f=i,h.port1.onmessage=b,b()};var i=function(){h.port2.postMessage(0)};f=function(){setTimeout(b,0),i()}}else f=function(){setTimeout(b,0)};return V}(),W=Function.call,X=b(Array.prototype.slice),Y=b(Array.prototype.reduce||function(a,b){var c=0,d=this.length;if(1===arguments.length)for(;;){if(c in this){b=this[c++];break}if(++c>=d)throw new TypeError}for(;c<d;c++)c in this&&(b=a(b,this[c],c));return b}),Z=b(Array.prototype.indexOf||function(a){for(var b=0;b<this.length;b++)if(this[b]===a)return b;return-1}),$=b(Array.prototype.map||function(a,b){var c=this,d=[];return Y(c,function(e,f,g){d.push(a.call(b,f,g,c))},void 0),d}),_=Object.create||function(a){function b(){}return b.prototype=a,new b},aa=b(Object.prototype.hasOwnProperty),ba=Object.keys||function(a){var b=[];for(var c in a)aa(a,c)&&b.push(c);return b},ca=b(Object.prototype.toString);S="undefined"!=typeof ReturnValue?ReturnValue:function(a){this.value=a};var da="From previous event:";l.resolve=l,l.nextTick=V,l.longStackSupport=!1,l.defer=m,m.prototype.makeNodeResolver=function(){var a=this;return function(b,c){b?a.reject(b):arguments.length>2?a.resolve(X(arguments,1)):a.resolve(c)}},l.Promise=n,l.promise=n,n.race=o,n.all=K,n.reject=A,n.resolve=l,l.passByCopy=function(a){return a},p.prototype.passByCopy=function(){return this},l.join=function(a,b){return l(a).join(b)},p.prototype.join=function(a){return l([this,a]).spread(function(a,b){if(a===b)return a;throw new Error("Can't join: not the same: "+a+" "+b)})},l.race=o,p.prototype.race=function(){return this.then(l.race)},l.makePromise=p,p.prototype.toString=function(){return"[object Promise]"},p.prototype.then=function(a,b,c){function d(b){try{return"function"==typeof a?a(b):b}catch(c){return A(c)}}function f(a){if("function"==typeof b){e(a,h);try{return b(a)}catch(c){return A(c)}}return A(a)}function g(a){return"function"==typeof c?c(a):a}var h=this,i=m(),j=!1;return V(function(){h.promiseDispatch(function(a){j||(j=!0,i.resolve(d(a)))},"when",[function(a){j||(j=!0,i.resolve(f(a)))}])}),h.promiseDispatch(void 0,"when",[void 0,function(a){var b,c=!1;try{b=g(a)}catch(d){if(c=!0,!l.onerror)throw d;l.onerror(d)}c||i.notify(b)}]),i.promise},l.when=q,p.prototype.thenResolve=function(a){return this.then(function(){return a})},l.thenResolve=function(a,b){return l(a).thenResolve(b)},p.prototype.thenReject=function(a){return this.then(function(){throw a})},l.thenReject=function(a,b){return l(a).thenReject(b)},l.nearer=r,l.isPromise=s,l.isPromiseAlike=t,l.isPending=u,p.prototype.isPending=function(){return"pending"===this.inspect().state},l.isFulfilled=v,p.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},l.isRejected=w,p.prototype.isRejected=function(){return"rejected"===this.inspect().state};var ea=[],fa=[],ga=!0;l.resetUnhandledRejections=x,l.getUnhandledReasons=function(){return ea.slice()},l.stopUnhandledRejectionTracking=function(){x(),ga=!1},x(),l.reject=A,l.fulfill=B,l.master=D,l.spread=E,p.prototype.spread=function(a,b){return this.all().then(function(b){return a.apply(void 0,b)},b)},l.async=F,l.spawn=G,l["return"]=H,l.promised=I,l.dispatch=J,p.prototype.dispatch=function(a,b){var c=this,d=m();return V(function(){c.promiseDispatch(d.resolve,a,b)}),d.promise},l.get=function(a,b){return l(a).dispatch("get",[b])},p.prototype.get=function(a){return this.dispatch("get",[a])},l.set=function(a,b,c){return l(a).dispatch("set",[b,c])},p.prototype.set=function(a,b){return this.dispatch("set",[a,b])},l.del=l["delete"]=function(a,b){return l(a).dispatch("delete",[b])},p.prototype.del=p.prototype["delete"]=function(a){return this.dispatch("delete",[a])},l.mapply=l.post=function(a,b,c){return l(a).dispatch("post",[b,c])},p.prototype.mapply=p.prototype.post=function(a,b){return this.dispatch("post",[a,b])},l.send=l.mcall=l.invoke=function(a,b){return l(a).dispatch("post",[b,X(arguments,2)])},p.prototype.send=p.prototype.mcall=p.prototype.invoke=function(a){return this.dispatch("post",[a,X(arguments,1)])},l.fapply=function(a,b){return l(a).dispatch("apply",[void 0,b])},p.prototype.fapply=function(a){return this.dispatch("apply",[void 0,a])},l["try"]=l.fcall=function(a){return l(a).dispatch("apply",[void 0,X(arguments,1)])},p.prototype.fcall=function(){return this.dispatch("apply",[void 0,X(arguments)])},l.fbind=function(a){var b=l(a),c=X(arguments,1);return function(){return b.dispatch("apply",[this,c.concat(X(arguments))])}},p.prototype.fbind=function(){var a=this,b=X(arguments);return function(){return a.dispatch("apply",[this,b.concat(X(arguments))])}},l.keys=function(a){return l(a).dispatch("keys",[])},p.prototype.keys=function(){return this.dispatch("keys",[])},l.all=K,p.prototype.all=function(){return K(this)},l.allResolved=k(L,"allResolved","allSettled"),p.prototype.allResolved=function(){return L(this)},l.allSettled=M,p.prototype.allSettled=function(){return this.then(function(a){return K($(a,function(a){function b(){return a.inspect()}return a=l(a),a.then(b,b)}))})},l.fail=l["catch"]=function(a,b){return l(a).then(void 0,b)},p.prototype.fail=p.prototype["catch"]=function(a){return this.then(void 0,a)},l.progress=N,p.prototype.progress=function(a){return this.then(void 0,void 0,a)},l.fin=l["finally"]=function(a,b){return l(a)["finally"](b)},p.prototype.fin=p.prototype["finally"]=function(a){return a=l(a),this.then(function(b){return a.fcall().then(function(){return b})},function(b){return a.fcall().then(function(){throw b})})},l.done=function(a,b,c,d){return l(a).done(b,c,d)},p.prototype.done=function(b,c,d){var f=function(a){V(function(){if(e(a,g),!l.onerror)throw a;l.onerror(a)})},g=b||c||d?this.then(b,c,d):this;"object"==typeof a&&a&&a.domain&&(f=a.domain.bind(f)),g.then(void 0,f)},l.timeout=function(a,b,c){return l(a).timeout(b,c)},p.prototype.timeout=function(a,b){var c=m(),d=setTimeout(function(){b&&"string"!=typeof b||(b=new Error(b||"Timed out after "+a+" ms"),b.code="ETIMEDOUT"),c.reject(b)},a);return this.then(function(a){clearTimeout(d),c.resolve(a)},function(a){clearTimeout(d),c.reject(a)},c.notify),c.promise},l.delay=function(a,b){return void 0===b&&(b=a,a=void 0),l(a).delay(b)},p.prototype.delay=function(a){return this.then(function(b){var c=m();return setTimeout(function(){c.resolve(b)},a),c.promise})},l.nfapply=function(a,b){return l(a).nfapply(b)},p.prototype.nfapply=function(a){var b=m(),c=X(a);return c.push(b.makeNodeResolver()),this.fapply(c).fail(b.reject),b.promise},l.nfcall=function(a){var b=X(arguments,1);return l(a).nfapply(b)},p.prototype.nfcall=function(){var a=X(arguments),b=m();return a.push(b.makeNodeResolver()),this.fapply(a).fail(b.reject),b.promise},l.nfbind=l.denodeify=function(a){var b=X(arguments,1);return function(){var c=b.concat(X(arguments)),d=m();return c.push(d.makeNodeResolver()),l(a).fapply(c).fail(d.reject),d.promise}},p.prototype.nfbind=p.prototype.denodeify=function(){var a=X(arguments);return a.unshift(this),l.denodeify.apply(void 0,a)},l.nbind=function(a,b){var c=X(arguments,2);return function(){function d(){return a.apply(b,arguments)}var e=c.concat(X(arguments)),f=m();return e.push(f.makeNodeResolver()),l(d).fapply(e).fail(f.reject),f.promise}},p.prototype.nbind=function(){var a=X(arguments,0);return a.unshift(this),l.nbind.apply(void 0,a)},l.nmapply=l.npost=function(a,b,c){return l(a).npost(b,c)},p.prototype.nmapply=p.prototype.npost=function(a,b){var c=X(b||[]),d=m();return c.push(d.makeNodeResolver()),this.dispatch("post",[a,c]).fail(d.reject),d.promise},l.nsend=l.nmcall=l.ninvoke=function(a,b){var c=X(arguments,2),d=m();return c.push(d.makeNodeResolver()),l(a).dispatch("post",[b,c]).fail(d.reject),d.promise},p.prototype.nsend=p.prototype.nmcall=p.prototype.ninvoke=function(a){var b=X(arguments,1),c=m();return b.push(c.makeNodeResolver()),this.dispatch("post",[a,b]).fail(c.reject),c.promise},l.nodeify=O,p.prototype.nodeify=function(a){return a?void this.then(function(b){V(function(){a(null,b)})},function(b){V(function(){a(b)})}):this};var ha=j();return l})}).call(this,a("v3go1D"))},{v3go1D:13}],6:[function(a,b,c){!function(a,c,d){"undefined"!=typeof b&&b.exports?b.exports=d():"function"==typeof define&&define.amd?define(d):c[a]=d()}("qwery",this,function(){function a(){this.c={}}function b(a){return W.g(a)||W.s(a,"(^|\\s+)"+a+"(\\s+|$)",1)}function c(a,b){for(var c=0,d=a.length;c<d;c++)b(a[c])}function d(a){for(var b=[],c=0,d=a.length;c<d;++c)p(a[c])?b=b.concat(a[c]):b[b.length]=a[c];return b}function e(a){for(var b=0,c=a.length,d=[];b<c;b++)d[b]=a[b];return d}function f(a){for(;(a=a.previousSibling)&&1!=a[C];);return a}function g(a){return a.match(U)}function h(a,c,d,e,f,g,h,i,k,l,m){var n,o,p,q,r;if(1!==this[C])return!1;if(c&&"*"!==c&&this[B]&&this[B].toLowerCase()!==c)return!1;if(d&&(o=d.match(D))&&o[1]!==this.id)return!1;if(d&&(r=d.match(E)))for(n=r.length;n--;)if(!b(r[n].slice(1)).test(this.className))return!1;if(k&&s.pseudos[k]&&!s.pseudos[k](this,m))return!1;if(e&&!h){q=this.attributes;for(p in q)if(Object.prototype.hasOwnProperty.call(q,p)&&(q[p].name||p)==f)return this}return!(e&&!j(g,_(this,f)||"",h))&&this}function i(a){return X.g(a)||X.s(a,a.replace(N,"\\$1"))}function j(a,b,c){switch(a){case"=":return b==c;case"^=":return b.match(Y.g("^="+c)||Y.s("^="+c,"^"+i(c),1));case"$=":return b.match(Y.g("$="+c)||Y.s("$="+c,i(c)+"$",1));case"*=":return b.match(Y.g(c)||Y.s(c,i(c),1));case"~=":return b.match(Y.g("~="+c)||Y.s("~="+c,"(?:^|\\s+)"+i(c)+"(?:\\s+|$)",1));case"|=":return b.match(Y.g("|="+c)||Y.s("|="+c,"^"+i(c)+"(-|$)",1))}return 0}function k(a,b){var d,e,f,i,j,k,l,n=[],o=[],p=b,q=Z.g(a)||Z.s(a,a.split(T)),s=a.match(S);if(!q.length)return n;if(i=(q=q.slice(0)).pop(),q.length&&(f=q[q.length-1].match(F))&&(p=r(b,f[1])),!p)return n;for(k=g(i),j=p!==b&&9!==p[C]&&s&&/^[+~]$/.test(s[s.length-1])?function(a){for(;p=p.nextSibling;)1==p[C]&&(k[1]?k[1]==p[B].toLowerCase():1)&&(a[a.length]=p);return a}([]):p[y](k[1]||"*"),d=0,e=j.length;d<e;d++)(l=h.apply(j[d],k))&&(n[n.length]=l);return q.length?(c(n,function(a){m(a,q,s)&&(o[o.length]=a)}),o):n}function l(a,b,c){if(n(b))return a==b;if(p(b))return!!~d(b).indexOf(a);for(var e,f,i=b.split(",");b=i.pop();)if(e=Z.g(b)||Z.s(b,b.split(T)),f=b.match(S),e=e.slice(0),h.apply(a,g(e.pop()))&&(!e.length||m(a,e,f,c)))return!0;return!1}function m(a,b,c,d){function e(a,d,i){for(;i=V[c[d]](i,a);)if(n(i)&&h.apply(i,g(b[d]))){if(!d)return i;if(f=e(i,d-1,i))return f}}var f;return(f=e(a,b.length-1,a))&&(!d||$(f,d))}function n(a,b){return a&&"object"==typeof a&&(b=a[C])&&(1==b||9==b)}function o(a){var b,c,d=[];a:for(b=0;b<a.length;++b){for(c=0;c<d.length;++c)if(d[c]==a[b])continue a;d[d.length]=a[b]}return d}function p(a){return"object"==typeof a&&isFinite(a.length)}function q(a){return a?"string"==typeof a?s(a)[0]:!a[C]&&p(a)?a[0]:a:v}function r(a,b,c){return 9===a[C]?a.getElementById(b):a.ownerDocument&&((c=a.ownerDocument.getElementById(b))&&$(c,a)&&c||!$(a,a.ownerDocument)&&u('[id="'+b+'"]',a)[0])}function s(a,b){var c,f,g=q(b);if(!g||!a)return[];if(a===window||n(a))return!b||a!==window&&n(g)&&$(a,g)?[a]:[];if(a&&p(a))return d(a);if(c=a.match(R)){if(c[1])return(f=r(g,c[1]))?[f]:[];if(c[2])return e(g[y](c[2]));if(aa&&c[3])return e(g[x](c[3]))}return u(a,g)}function t(a,b){return function(c){var d,e;return J.test(c)?void(9!==a[C]&&((e=d=a.getAttribute("id"))||a.setAttribute("id",e="__qwerymeupscotty"),c='[id="'+e+'"]'+c,b(a.parentNode||a,c,!0),d||a.removeAttribute("id"))):void(c.length&&b(a,c,!1))}}var u,v=document,w=v.documentElement,x="getElementsByClassName",y="getElementsByTagName",z="querySelectorAll",A="useNativeQSA",B="tagName",C="nodeType",D=/#([\w\-]+)/,E=/\.[\w\-]+/g,F=/^#([\w\-]+)$/,G=/^\.([\w\-]+)$/,H=/^([\w\-]+)$/,I=/^([\w]+)?\.([\w\-]+)$/,J=/(^|,)\s*[>~+]/,K=/^\s+|\s*([,\s\+\~>]|$)\s*/g,L=/[\s\>\+\~]/,M=/(?![\s\w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^'"]*\]|[\s\w\+\-]*\))/,N=/([.*+?\^=!:${}()|\[\]\/\\])/g,O=/^(\*|[a-z0-9]+)?(?:([\.\#]+[\w\-\.#]+)?)/,P=/\[([\w\-]+)(?:([\|\^\$\*\~]?\=)['"]?([ \w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^]+)["']?)?\]/,Q=/:([\w\-]+)(\(['"]?([^()]+)['"]?\))?/,R=new RegExp(F.source+"|"+H.source+"|"+G.source),S=new RegExp("("+L.source+")"+M.source,"g"),T=new RegExp(L.source+M.source),U=new RegExp(O.source+"("+P.source+")?("+Q.source+")?"),V={" ":function(a){return a&&a!==w&&a.parentNode},">":function(a,b){return a&&a.parentNode==b.parentNode&&a.parentNode},"~":function(a){return a&&a.previousSibling},"+":function(a,b,c,d){return!!a&&((c=f(a))&&(d=f(b))&&c==d&&c)}};a.prototype={g:function(a){return this.c[a]||void 0},s:function(a,b,c){return b=c?new RegExp(b):b,this.c[a]=b}};var W=new a,X=new a,Y=new a,Z=new a,$="compareDocumentPosition"in w?function(a,b){return 16==(16&b.compareDocumentPosition(a))}:"contains"in w?function(a,b){return b=9===b[C]||b==window?w:b,b!==a&&b.contains(a)}:function(a,b){for(;a=a.parentNode;)if(a===b)return 1;return 0},_=function(){var a=v.createElement("p");return(a.innerHTML='<a href="#x">x</a>')&&"#x"!=a.firstChild.getAttribute("href")?function(a,b){return"class"===b?a.className:"href"===b||"src"===b?a.getAttribute(b,2):a.getAttribute(b)}:function(a,b){return a.getAttribute(b)}}(),aa=!!v[x],ba=v.querySelector&&v[z],ca=function(a,b){var d,f,g=[];try{return 9!==b[C]&&J.test(a)?(c(d=a.split(","),t(b,function(a,b){f=a[z](b),1==f.length?g[g.length]=f.item(0):f.length&&(g=g.concat(e(f)))})),d.length>1&&g.length>1?o(g):g):e(b[z](a))}catch(h){}return da(a,b)},da=function(a,d){var e,f,g,h,i,j,l=[];if(a=a.replace(K,"$1"),f=a.match(I)){for(i=b(f[2]),e=d[y](f[1]||"*"),g=0,h=e.length;g<h;g++)i.test(e[g].className)&&(l[l.length]=e[g]);return l}return c(j=a.split(","),t(d,function(a,b,c){for(i=k(b,a),g=0,h=i.length;g<h;g++)(9===a[C]||c||$(i[g],d))&&(l[l.length]=i[g])})),j.length>1&&l.length>1?o(l):l},ea=function(a){"undefined"!=typeof a[A]&&(u=a[A]&&ba?ca:da)};return ea({useNativeQSA:!0}),s.configure=ea,s.uniq=o,s.is=l,s.pseudos={},s})},{}],7:[function(a,b,c){!function(a,c){"undefined"!=typeof b?b.exports=c():"function"==typeof define&&"object"==typeof define.amd?define(c):this[a]=c()}("domready",function(a){function b(a){for(n=1;a=d.shift();)a()}var c,d=[],e=!1,f=document,g=f.documentElement,h=g.doScroll,i="DOMContentLoaded",j="addEventListener",k="onreadystatechange",l="readyState",m=h?/^loaded|^c/:/^loaded|c/,n=m.test(f[l]);return f[j]&&f[j](i,c=function(){f.removeEventListener(i,c,e),b()},e),h&&f.attachEvent(k,c=function(){/^c/.test(f[l])&&(f.detachEvent(k,c),b())}),a=h?function(b){self!=top?n?b():d.push(b):function(){try{g.doScroll("left")}catch(c){return setTimeout(function(){a(b)},50)}b()}()}:function(a){n?a():d.push(a)}})},{}],8:[function(require,module,exports){!function(a,b,c){"undefined"!=typeof module&&module.exports?module.exports=c():"function"==typeof define&&define.amd?define(c):b[a]=c()}("reqwest",this,function(){function handleReadyState(a,b,c){return function(){return a._aborted?c(a.request):void(a.request&&4==a.request[readyState]&&(a.request.onreadystatechange=noop,twoHundo.test(a.request.status)?b(a.request):c(a.request)))}}function setHeaders(a,b){var c,d=b.headers||{};d.Accept=d.Accept||defaultHeaders.accept[b.type]||defaultHeaders.accept["*"],b.crossOrigin||d[requestedWith]||(d[requestedWith]=defaultHeaders.requestedWith),d[contentType]||(d[contentType]=b.contentType||defaultHeaders.contentType);for(c in d)d.hasOwnProperty(c)&&"setRequestHeader"in a&&a.setRequestHeader(c,d[c])}function setCredentials(a,b){"undefined"!=typeof b.withCredentials&&"undefined"!=typeof a.withCredentials&&(a.withCredentials=!!b.withCredentials)}function urlappend(a,b){return a+(/\?/.test(a)?"&":"?")+b}function handleJsonp(a,b,c,d){var e=uniqid++,f=a.jsonpCallback||"callback",g=a.jsonpCallbackName||reqwest.getcallbackPrefix(e),h=new RegExp("((^|\\?|&)"+f+")=([^&]+)"),i=d.match(h),j=doc.createElement("script"),k=0;navigator.userAgent.indexOf("MSIE 10.0")!==-1;return g+=""+instId,i?"?"===i[3]?d=d.replace(h,"$1="+g):g=i[3]:d=urlappend(d,f+"="+g),win[g]=function(a){lastValue[e]=a},j.type="text/javascript",j.src=d,j.async=!0,j.onload=j.onreadystatechange=function(){return!(j[readyState]&&"complete"!==j[readyState]&&"loaded"!==j[readyState]||k)&&(j.onload=j.onreadystatechange=null,j.onclick&&j.onclick(),b(lastValue[e]),delete lastValue[e],head.removeChild(j),void(k=1))},head.appendChild(j),{abort:function(){j.onload=j.onreadystatechange=null,c({},"Request is aborted: timeout",{}),delete lastValue[e],head.removeChild(j),k=1}}}function getRequest(a,b){var c,d=this.o,e=(d.method||"GET").toUpperCase(),f="string"==typeof d?d:d.url,g=d.processData!==!1&&d.data&&"string"!=typeof d.data?reqwest.toQueryString(d.data):d.data||null,h=!1;return"jsonp"!=d.type&&"GET"!=e||!g||(f=urlappend(f,g),g=null),"jsonp"==d.type?handleJsonp(d,a,b,f):(c=xhr(d),c.open(e,f,d.async!==!1),setHeaders(c,d),setCredentials(c,d),win[xDomainRequest]&&c instanceof win[xDomainRequest]?(c.onload=a,c.onerror=b,c.onprogress=function(){},h=!0):c.onreadystatechange=handleReadyState(this,a,b),d.before&&d.before(c),h?setTimeout(function(){c.send(g)},200):c.send(g),c)}function Reqwest(a,b){this.o=a,this.fn=b,init.apply(this,arguments)}function setType(a){var b=a.match(/\.(json|jsonp|html|xml)(\?|$)/);return b?b[1]:"js"}function init(o,fn){function complete(a){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(a)}function success(resp){resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=win.JSON?win.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function error(a,b,c){for(a=self.request,self._responseArgs.resp=a,self._responseArgs.msg=b,self._responseArgs.t=c,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(a,b,c);complete(a)}this.url="string"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this,type=o.type||setType(this.url);fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){self.abort()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(a,b){return new Reqwest(a,b)}function normalize(a){return a?a.replace(/\r?\n/g,"\r\n"):""}function serial(a,b){var c,d,e,f,g=a.name,h=a.tagName.toLowerCase(),i=function(a){a&&!a.disabled&&b(g,normalize(a.attributes.value&&a.attributes.value.specified?a.value:a.text))};if(!a.disabled&&g)switch(h){case"input":/reset|button|image|file/i.test(a.type)||(c=/checkbox/i.test(a.type),d=/radio/i.test(a.type),e=a.value,(!(c||d)||a.checked)&&b(g,normalize(c&&""===e?"on":e)));break;case"textarea":b(g,normalize(a.value));break;case"select":if("select-one"===a.type.toLowerCase())i(a.selectedIndex>=0?a.options[a.selectedIndex]:null);else for(f=0;a.length&&f<a.length;f++)a.options[f].selected&&i(a.options[f])}}function eachFormElement(){var a,b,c=this,d=function(a,b){var d,e,f;for(d=0;d<b.length;d++)for(f=a[byTag](b[d]),e=0;e<f.length;e++)serial(f[e],c)};for(b=0;b<arguments.length;b++)a=arguments[b],/input|select|textarea/i.test(a.tagName)&&serial(a,c),d(a,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var a={};return eachFormElement.apply(function(b,c){b in a?(a[b]&&!isArray(a[b])&&(a[b]=[a[b]]),a[b].push(c)):a[b]=c},arguments),a}function buildParams(a,b,c,d){var e,f,g,h=/\[\]$/;if(isArray(b))for(f=0;b&&f<b.length;f++)g=b[f],c||h.test(a)?d(a,g):buildParams(a+"["+("object"==typeof g?f:"")+"]",g,c,d);else if(b&&"[object Object]"===b.toString())for(e in b)buildParams(a+"["+e+"]",b[e],c,d);else d(a,b)}void 0===window._reqwest?window._reqwest=1:window._reqwest++;var win=window,instId=window._reqwest,doc=document,twoHundo=/^(20\d|1223)$/,byTag="getElementsByTagName",readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",head=doc[byTag]("head")[0],uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue={},xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(a){return a instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(a){if(a.crossOrigin===!0){var b=win[xmlHttpRequest]?new XMLHttpRequest:null;if(b&&"withCredentials"in b)return b;if(win[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}return win[xmlHttpRequest]?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(a){return a}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(a,b){return a=a||function(){},b=b||function(){},this._fulfilled?this._responseArgs.resp=a(this._responseArgs.resp):this._erred?b(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(a),this._errorHandlers.push(b)),this},always:function(a){return this._fulfilled||this._erred?a(this._responseArgs.resp):this._completeHandlers.push(a),this},fail:function(a){return this._erred?a(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(a),this}},reqwest.serializeArray=function(){var a=[];return eachFormElement.apply(function(b,c){a.push({name:b,value:c})},arguments),a},reqwest.serialize=function(){if(0===arguments.length)return"";var a,b,c=Array.prototype.slice.call(arguments,0);return a=c.pop(),a&&a.nodeType&&c.push(a)&&(a=null),a&&(a=a.type),b="map"==a?serializeHash:"array"==a?reqwest.serializeArray:serializeQueryString,b.apply(null,c)},reqwest.toQueryString=function(a,b){var c,d,e=b||!1,f=[],g=encodeURIComponent,h=function(a,b){b="function"==typeof b?b():null==b?"":b,f[f.length]=g(a)+"="+g(b)};if(isArray(a))for(d=0;a&&d<a.length;d++)h(a[d].name,a[d].value);else for(c in a)a.hasOwnProperty(c)&&buildParams(c,a[c],e,h);return f.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(a,b){return a&&(a.type&&(a.method=a.type)&&delete a.type,a.dataType&&(a.type=a.dataType),a.jsonpCallback&&(a.jsonpCallbackName=a.jsonpCallback)&&delete a.jsonpCallback,a.jsonp&&(a.jsonpCallback=a.jsonp)),new Reqwest(a,b)},reqwest.ajaxSetup=function(a){a=a||{};for(var b in a)globalSetupOptions[b]=a[b]},reqwest})},{}],9:[function(a,b,c){!function(a,c){"undefined"!=typeof b?b.exports=c():"function"==typeof define&&"object"==typeof define.amd?define(c):this[a]=c()}("ellipsisHelper",function(){function a(a){function c(a,b){try{b&&(a.style.fontSize=b),0===(a.title+"").length&&(a.title=a.innerText)}catch(c){}}function d(e){var f,g,h,i,j,k,l;try{for(l=0;l<e.length;l++)try{for(h=!1,f=a.document.querySelectorAll(e[l]["class"]),g=0;g<f.length;g++)try{if(i=f[g].offsetWidth+1,j=f[g].scrollWidth,k=f[g].innerText.length,i<j||k>e[l].maxLen){h=!0;break}}catch(m){}if(h)for(g=0;g<f.length;g++)c(f[g],e[l].fontSize)}catch(n){}}catch(o){}b>0&&setTimeout(function(){d(e)},1e3),b-=1}null!==a&&"undefined"!=typeof a&&a||(a=window),setTimeout(function(){d([{"class":".legoid-box .links a",maxLen:9,fontSize:"9px"},{"class":".account .button.normal",fontSize:"10px"},{"class":".account h2",fontSize:"22px"}])},250)}var b=5,c={init:a};return c})},{}],10:[function(a,b,c){!function(a,c){"undefined"!=typeof b?b.exports=c():"function"==typeof define&&"object"==typeof define.amd?define(c):this[a]=c()}("helper",function(){var a={trackingReady:function(){return"object"==typeof window.TrackMan&&"object"==typeof window.TrackMan.LoadedModules&&"object"==typeof window.TrackMan.LoadedModules.AccountTracking},redirect:function(a,b){if("_top"==b)window.top.location.href=a;else{if("_self"!=b)throw new Error(b+" not supported");window.location.href=a}},reload:function(){window.top.location.reload()},tryParsePostMessageJSON:function(a){if(RegExp(/^https:\/\/account2(\.|\..*\.)lego\.com/).test(a.origin.toLocaleLowerCase())===!1)return!1;try{var b=JSON.parse(a.data);if(b&&"object"==typeof b&&null!==b)return b}catch(a){}return!1},appendReturnUrl:function(a,b){var c=b||location.href;if(void 0!==a)return a.indexOf("returnUrl=")!=-1?a:a.indexOf("?")!=-1?a+"&returnUrl="+encodeURIComponent(c):a+"?returnUrl="+encodeURIComponent(c)}};return a})},{}],11:[function(a,b,c){!function(a,c){"undefined"!=typeof b?b.exports=c():"function"==typeof define&&"object"==typeof define.amd?define(c):this[a]=c()}("modal",function(){function b(a){return h(f(a))}function c(){p&&document.getElementById("legoid-iframe").contentWindow.postMessage('{"event":"LEGOID.TrackModalClose"}',"*")}function d(){b(o).addClass("removing"),setTimeout(function(){s.close()},600)}function e(){b(o).remove(),b(o).removeClass("removing"),i.off(document,"LEGOID.keydown"),i.off(m[0],"click"),i.off(b(l)[0],"click")}var f=a("../3rd/qwery"),g=a("./helper"),h=a("../3rd/bonzo"),i=a("../3rd/bean"),j=a("./ellipsisHelper"),k=h.create('<iframe id="legoid-iframe" name="legoid-iframe" frameborder="0" scrolling="no" border="0" src="" data-uitest="legoid-iframe"></iframe>'),l=h.create('<div class="transparency" data-uitest="transparent-element"></div>'),m=h.create('<div class="legoid-close" data-uitest="legoid-modal-close"></div>'),n=h.create('<div class="content"></div>'),o=h.create('<div id="legoid-modal" data-uitest="legoid-modal"></div>');i.setSelectorEngine(f);var p="undefined"!=typeof window.postMessage;if(p)var q=window.addEventListener?"addEventListener":"attachEvent",r="attachEvent"==q?"onmessage":"message";var s={open:function(a,f,s){i.on(b(l)[0],"click",function(){c(),d()}),i.on(m[0],"click",function(){c(),d()}),i.on(document,"LEGOID.keydown",function(a){c(),d()}),i.on(document,"LEGOID.ModalClose",function(){e()}),i.fire(document,"LEGOID.ModalOpen"),b(k).attr("src",a),b(o).append(l),b(n).append(m),b(n).append(k),b(o).append(n),"undefined"!=typeof s&&b(n).css("height",s+"px"),"undefined"!=typeof f&&(b(n).css("width",f+"px"),b(n).css("margin-left",f/2*-1)),p&&window[q](r,function(a){var c=g.tryParsePostMessageJSON(a);c&&c.modalHeight&&b(n).css("height",c.modalHeight+"px")},!1);var t=(h.viewport().height-s)/2+b(window).scrollTop();t<25&&(t=25),b(n).css("top",t+"px"),b("body").append(o),"object"==typeof window.frames&&"function"==typeof window.frames["legoid-iframe"].focus&&window.frames["legoid-iframe"].focus();try{j.init(window.frames["legoid-iframe"]||window)}catch(u){}},close:function(){i.fire(document,"LEGOID.ModalClose")}};return s})},{"../3rd/bean":3,"../3rd/bonzo":4,"../3rd/qwery":6,"./ellipsisHelper":9,"./helper":10}],12:[function(a,b,c){!function(a,c){"undefined"!=typeof b?b.exports=c():"function"==typeof define&&"object"==typeof define.amd?define(c):this[a]=c()}("stylesheetLoader",function(){function a(){for(var a,g=document.styleSheets,h=0,i=g.length;h<i;h++)if(g[h].ownerNode.id==c)if(null!==g[h].cssRules){if(g[h].cssRules.length){if(!f)return f=!0,clearTimeout(a),e.removeAttribute("id"),void d.call();return}}else if(document.styleSheets.length>b){if(!f)return f=!0,clearTimeout(a),e.removeAttribute("id"),void d.call();return}}var b,c,d,e,f=!1;return function(g,h,i){timer=setTimeout(a,1e3),e=document.createElement("link");var j,k=function(){if(!f)return f=!0,clearTimeout(timer),e.removeAttribute("id"),void d.call()};d=h,b=document.styleSheets.length,c=i+ +new Date,e.href=g,e.rel="stylesheet",e.type="text/css",e.id=c,e.onload=k,j=document.getElementsByTagName("script")[0],j.parentNode.insertBefore(e,j)}})},{}],13:[function(a,b,c){function d(){}var e=b.exports={};e.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};if(b){var c=[];return window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),c.length>0)){var d=c.shift();d()}},!0),function(a){c.push(a),window.postMessage("process-tick","*")}}return function(a){setTimeout(a,0)}}(),e.title="browser",e.browser=!0,e.env={},e.argv=[],e.on=d,e.addListener=d,e.once=d,e.off=d,e.removeListener=d,e.removeAllListeners=d,e.emit=d,e.binding=function(a){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(a){throw new Error("process.chdir is not supported")}},{}]},{},[2]);